{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/admin/admin-challenge/admin-challenge.component.ts","webpack:///src/app/admin/admin-challenge/admin-challenge.component.html","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.ts","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.html","webpack:///src/app/admin/admin-ratings/admin-ratings.component.ts","webpack:///src/app/admin/admin-ratings/admin-ratings.component.html","webpack:///src/app/admin/admin-user/admin-user.component.ts","webpack:///src/app/admin/admin-user/admin-user.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.html","webpack:///src/app/dialogs/email-pass/email-pass.component.ts","webpack:///src/app/dialogs/email-pass/email-pass.component.html","webpack:///src/app/dialogs/hint/hint.component.ts","webpack:///src/app/dialogs/hint/hint.component.html","webpack:///src/app/dialogs/login-dialog/login-dialog.component.ts","webpack:///src/app/dialogs/login-dialog/login-dialog.component.html","webpack:///src/app/dialogs/menu/menu.component.ts","webpack:///src/app/dialogs/menu/menu.component.html","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.ts","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.html","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.ts","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.html","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.html","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.ts","webpack:///src/app/dialogs/successful-solve/successful-solve.component.ts","webpack:///src/app/dialogs/successful-solve/successful-solve.component.html","webpack:///src/app/navbar/navbar.component.ts","webpack:///src/app/navbar/navbar.component.html","webpack:///src/app/pages/about/about.component.ts","webpack:///src/app/pages/about/about.component.html","webpack:///src/app/pages/aicreate/aicreate.component.ts","webpack:///src/app/pages/aicreate/aicreate.component.html","webpack:///src/app/pages/challenges/challenges.component.ts","webpack:///src/app/pages/challenges/challenges.component.html","webpack:///src/app/pages/create/create.component.ts","webpack:///src/app/pages/create/create.component.html","webpack:///src/app/pages/footer/footer.component.ts","webpack:///src/app/pages/footer/footer.component.html","webpack:///src/app/pages/index/index.component.ts","webpack:///src/app/pages/index/index.component.html","webpack:///src/app/pages/leaderboard/leaderboard.component.ts","webpack:///src/app/pages/leaderboard/leaderboard.component.html","webpack:///src/app/pages/leaderboard/leaderboardArr.ts","webpack:///src/app/pages/login/login.component.ts","webpack:///src/app/pages/login/login.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.html","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.ts","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.html","webpack:///src/app/pages/profile/profile.component.ts","webpack:///src/app/pages/profile/profile.component.html","webpack:///src/app/pages/ratings/RatingsArr.ts","webpack:///src/app/pages/ratings/puzzleArr.ts","webpack:///src/app/pages/ratings/ratings.component.ts","webpack:///src/app/pages/ratings/ratings.component.html","webpack:///src/app/pages/reset-password/reset-password.component.ts","webpack:///src/app/pages/reset-password/reset-password.component.html","webpack:///src/app/pages/reset-success/reset-success.component.ts","webpack:///src/app/pages/reset-success/reset-success.component.html","webpack:///src/app/pages/signup/signup.component.ts","webpack:///src/app/pages/signup/signup.component.html","webpack:///src/app/rate-dialog/rate-dialog.component.ts","webpack:///src/app/rate-dialog/rate-dialog.component.html","webpack:///src/app/services/api.service.ts","webpack:///src/assets/js/FileSaver.js","webpack:///src/assets/js/OrbitControls.js","webpack:///src/assets/js/aiCreation.js","webpack:///src/assets/js/downloadPuzzle.js","webpack:///src/assets/js/generate3D.js","webpack:///src/assets/js/jszip.min.js","webpack:///src/assets/js/manualCreation.js","webpack:///src/assets/js/solvePuzzle.js","webpack:///src/assets/js/three.module.js","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AdminChallengeComponent","api","formBuilder","router","dialog","error_messages","type","message","challengeForm","group","oneName","required","pattern","twoName","bonusName","oneDif","twoDiff","bonusDiff","createChallenge","selector","templateUrl","styleUrls","AdminPuzzlesComponent","ratings","puzzles","pageSize","startIndex","endIndex","pageSizeOptions","event","pageIndex","totalNumberOfPuzzles","slice","filterValue","datasource","filterPredicate","data","filter","name","toLowerCase","includes","creator","trim","filteredData","length","sort","a","b","sortedBy","paramA","paramB","Date","created","getTime","rating","i","puzzleObj","description","createdAt","image","shared","j","total","k","puzzleID","push","puzzleAscending","dataAvailable","show","populatePuz","getAllPuzzleRatings","subscribe","ratingObj","error","console","log","getPuzzles","getAllPuzzlesAdmin","Object","deletePuzzleAdmin","alert","location","reload","localStorage","getItem","navigate","populate","applyFilter","AdminRatingsComponent","getAllRatingsAdmin","ratingList","testPuzzle","testUser","rateID","deleteRatingAdmin","getPuzzleRatings","AdminUserComponent","totalNumberOfUsers","userList","username","getAllUsers","user","deleteUser","getUsers","routes","path","component","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","title","AppModule","declarations","entryComponents","providers","bootstrap","CreateDialogComponent","clicked","EmailPassComponent","dialogRef","form","input","email","close","submit","HintComponent","solveDialog","open","disableClose","hasBackdrop","pageValue","easy","med","hard","LoginDialogComponent","MenuComponent","ProfilePuzzlesDialogComponent","fromPage","ProfileUpdateDialogComponent","SolveDialogComponent","showHintButton","showMe","display","expertMode","ms","setTimeout","getAllPuzzleByID","parseInt","hintImage","delay","stop","token","setItem","xppoints","numHints","SuccessfulSolveComponent","NavbarComponent","removeItem","admin","logout","AboutComponent","AICreateComponent","createDialog","loginDialog","success","ChallengesComponent","date","day","getDay","datee","getDate","month","getMonth","year","getFullYear","months","actualMonth","getChallenges","puzzleOneID","puzzleOneName","puzzleOneImage","puzzleOneDifficulty","oneXP","oneHints","puzzleTwoID","puzzleTwoName","puzzleTwoImage","puzzleTwoDifficulty","twoXP","twoHints","puzzleThreeID","puzzleThreeName","puzzleThreeImage","puzzleThreeDifficulty","threeXP","threeHints","openSolveDialogEasy","openSolveDialogMed","openSolveDialogHard","CreateComponent","FooterComponent","IndexComponent","LeaderboardComponent","cdref","displayedColumns","countPuzzles","target","value","dataSource","paginator","firstPage","data3","leaderboardObj","memberSince","xp","level","currentUser","getPuzzlesByUser","data2","nrPuzzles","l","avgRating","x","retrieveAllSolveAttempts","data4","solved","start","populateTable","LeaderboardArr","LoginComponent","fieldTextType","formError","verifyUser","password","loginUser","status","emailDialogRef","afterClosed","result","entry","requestPasswordChange","loginForm","minLength","toggleFieldTextType","sendMail","ProfilePuzzlesComponent","temp","setPageSizeOptionsInput","userPuzzleList","text","nameAscending","puzzle","sharePuzzle","profileDialog","deletePuzzle","stopSharingPuzzle","levelDialog","getUserPuzzles","ProfileRatingsComponent","split","map","str","userRatingsList","puzzleName","getPuzzleRatingsByUser","ratePID","rateDialogRef","ratingEntry","createNewPuzzleRating","rateP","checkData","openRateDialog","deleteVal","findRatingID","deleteRating","getUserPuzzleRatings","ProfileSolvedPuzzlesComponent","dateCreated","ProfileComponent","nameTextboxValue","undefined","updateName","currentUserObject","updatePorfileDialog","currPlayerXP","playerLevel","upperBound","lowerBound","currXP","range","currProgress","Math","round","object","updateLevel","playerXP","usernameTextboxValue","updateUsername","getUser","updateNameForm","updateUsernameForm","checkLevel","RatingsArr","PuzzleArr","RatingsComponent","cdr","getAllPuzzles","searchValue","getSearchedPuzzles","dataObjectSize","showRating","ratingSavedDialog","ResetPasswordComponent","fieldTextType2","resetDone","doPasswordsMatch","resetPasswordForm","controls","resetPassword","confirmPassword","firstPassword","secondPassword","toggleFieldTextType2","ResetSuccessComponent","route","snapshot","paramMap","get","SignupComponent","createUser","signUpForm","newUser","createNewUser","RateDialogComponent","APIService","http","httpOptions","headers","post","put","term","providedIn","saveAs","navigator","msSaveOrOpenBlob","bind","view","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","externalHost","click","node","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","force_saveable_type","fs_min_size","deletion_queue","process_deletion_queue","file","revokeObjectURL","remove","dispatch","filesaver","event_types","concat","listener","call","FileSaver","blob","blob_changed","object_url","target_view","get_object_url","createObjectURL","dispatch_all","fs_error","href","window","readyState","DONE","abortable","func","apply","arguments","create_if_not_found","create","exclusive","INIT","download","chrome","webkitSlice","size","TEMPORARY","fs","root","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","prototype","onwritestart","onprogress","onwrite","onabort","addEventListener","unload","removeEventListener","self","content","OrbitControls","domElement","warn","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","focus","mouseAction","button","ctrlKey","metaKey","shiftKey","stopPropagation","DOLLY_ROTATE","tabIndex","constructor","MapControls","Chromosome","sites","fitness","Site","surfaceArea","generatePuzzleAIButton","nextPuzzleButton","previousPuzzleButton","progressBar","generatedPuzzles","renderedPuzzleIndex","tempWidth","tempHeight","totalSurfaceArea","generationSize","tournamentSize","maximumIterations","seedString","sliders","labels","numberOfSites","desiredProportions","groupDistribution","copyObject","obj","JSON","parse","stringify","xmur3","h","imul","charCodeAt","mulberry32","t","seed","rand","random","floor","expandPuzzle","factor","tempSites","initializeDataAI","getElementById","generatePuzzleAI","style","displaySlidersCard","newGeneration","run","index","renderPuzzle","numberOfPiecesInGroup","generateSliders","appendChild","proportion","counter","innerHTML","lastGeneration","expandedSites","piecesJSONObject","numberOfSliders","inputContainer","defaultValue","slider","createElement","previousValue","sliderid","step","difference","distributedValue","toFixed","leftover","tempValue","parseFloat","headerLabel","valueLabel","br","currentGeneration","nextGeneration","parentX","parentY","children","initializeGeneration","generation","getFittest","runTournament","crossover","mutate","calculateAndSetFitness","fittestChromosome","chromosome","selectedSite","movementDirection","chromosomeX","chromosomeY","swapIndex","childX","childY","tempSite","chosenChromosome","newChromosome","siteIndex","determineAndSetSiteBoundaries","sortSites","siteA","siteB","row","col","distances","equidistantPoints","getPuzzleDataURL","pieces","base64Image","desiredFile","downloadPuzzle3D","getPuzzleData","downloadPuzzle2D","url","$","ajax","puzzleObject","generateSTLFiles","generateImageFile","zip","imgFolder","folder","tileFolder","cuboidFolder","createTilePrintableFiles","depths","getDepth","createCuboidPrintableFiles","base64","generateAsync","depthsArray","currentPiece","topRight","topLeft","bottomRight","bottomLeft","nextTopRight","nextTopLeft","nextBottomRight","nextBottomLeft","stlFileFrontFace","stlFileBackFace","pieceIndex","vertexIndex","z","addVertexToFile","zPositionBottom","zPositionTop","optionalSuffix","stlFile","vertexA","vertexB","vertexC","nth","scene","camera","renderer","line","points","pieceGeometry","pieceGeometryArray","piece","tile","initiate3DCanvas","height","width","background","antialias","setSize","render3D","jsonData","appendedString","extractPoints","pieceMeshArray","generateAndColorMeshes","colors","addMeshesToScene","animate","render2D","meshArray","mesh","frustumCulled","tempPieceMeshArray","material","numberOfPiecesPerFace","colorCounter","color","tempPieceGeometryArray","buildSquare","vertices","buildTriangle","point1","point2","point3","faces","requestAnimationFrame","render","s","o","u","r","require","n","c","d","p","encode","f","getTypeOf","charAt","join","decode","substr","replace","uint8array","Uint8Array","Array","indexOf","compressedSize","uncompressedSize","crc32","compression","compressedContent","getContentWorker","pipe","uncompressWorker","on","streamInfo","data_length","getCompressedWorker","withStreamInfo","createWorkerFrom","compressWorker","STORE","magic","DEFLATE","binary","createFolders","compressionOptions","comment","unixPermissions","dosPermissions","lie","Uint16Array","Uint32Array","_pako","_pakoAction","_pakoOptions","meta","inherits","processChunk","_createPako","transformTo","flush","cleanUp","raw","onData","pako","A","String","fromCharCode","O","utf8encode","I","m","_","g","w","S","C","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCFullYear","getUTCMonth","getUTCDate","B","E","fileRecord","R","LOCAL_FILE_HEADER","dirRecord","CENTRAL_FILE_HEADER","bytesWritten","zipComment","zipPlatform","encodeFileName","streamFiles","accumulate","contentBuffer","dirRecords","currentSourceOffset","entriesCount","currentFile","_sources","percent","openedSource","closedSource","DATA_DESCRIPTOR","shift","CENTRAL_DIRECTORY_END","prepareNextSource","previous","isPaused","pause","resume","registerPrevious","end","generatedError","lock","generateWorker","platform","options","_compressWorker","files","loadAsync","support","defaults","version","external","decompressed","extend","checkCRC32","optimizedBinaryString","decodeFileName","utf8decode","isNode","isStream","reject","prepareContent","load","all","fileNameStr","fileCommentStr","_upstreamEnded","_bindStream","_stream","Readable","_helper","emit","_read","Buffer","newBufferFrom","from","allocBuffer","alloc","fill","isBuffer","toUpperCase","substring","lastIndexOf","toString","hasOwnProperty","generate","generateInternalStream","mimeType","checkSupport","generateNodeStream","toNodejsStream","stream","byteAt","zero","lastIndexOfSignature","readAndCheckSignature","readData","checkOffset","checkIndex","setIndex","skip","readInt","readString","readDate","UTC","subarray","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","destType","propName","dataIsReady","_tickScheduled","_tickAndRepeat","isFinished","_tick","extraStreamInfo","isLocked","_listeners","mergeStreamInfo","nodestream","_internalType","_outputType","_mimeType","newBlob","_worker","objectMode","array","string","arraybuffer","ArrayBuffer","nodebuffer","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","leftOver","applyFromCharCode","Utf8DecodeWorker","Utf8EncodeWorker","stringifyByChunk","stringifyByChar","applyCanBeUsed","buffer","byteLength","MAX_VALUE_16BITS","MAX_VALUE_32BITS","pretty","FileReader","onload","readAsArrayBuffer","loadOptions","checkSignature","reader","isSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","localHeaderOffset","readLocalPart","handleUTF8","processAttributes","readCentralDir","zip64","readCentralPart","readEndOfCentral","abs","prepareReader","isEncrypted","bitFlag","useUTF8","fileNameLength","fileName","compressionMethod","versionMadeBy","extraFieldsLength","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","readExtraFields","parseZIP64ExtraField","fileComment","extraFields","findExtraFieldUnicodePath","findExtraFieldUnicodeComment","_data","_dataBinary","internalStream","_decompressWorker","async","nodeStream","MutationObserver","WebKitMutationObserver","createTextNode","observe","characterData","MessageChannel","onreadystatechange","parentNode","removeChild","documentElement","port1","onmessage","port2","postMessage","global","TypeError","queue","outcome","promise","onFulfilled","callFulfilled","otherCallFulfilled","onRejected","callRejected","otherCallRejected","race","immediate","assign","method","chunkSize","windowBits","memLevel","strategy","to","gzip","err","msg","ended","chunks","strm","avail_out","deflateInit2","header","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","output","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","inflateInit2","Z_OK","inflateGetHeader","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","inflateSetDictionary","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","Int32Array","setTyped","Buf16","Buf32","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","T","D","F","pending","pending_buf","pending_out","total_out","N","_tr_flush_block","block_start","strstart","U","P","L","max_chain_length","prev_length","nice_match","w_size","w_mask","prev","good_match","lookahead","match_start","window_size","hash_size","head","wrap","adler","total_in","insert","ins_h","hash_shift","hash_mask","Z","match_length","_tr_tally","max_lazy_match","last_lit","W","prev_match","match_available","M","good_length","max_lazy","nice_length","max_chain","H","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","G","data_type","_tr_init","K","Y","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","time","os","_tr_align","_tr_stored_block","deflateInfo","xflags","extra_len","done","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","mode","sane","last","havedict","flags","check","wbits","ncode","nlen","ndist","have","next","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","V","q","J","splice","apiURL","distanceMetric","canvas","canvasCoords","stage","layer","pointsArray","siteBoundaries","colorPalettes","selectedPalette","currentRenderMode","hoverOverPoint","disableEditMode","deletePointButtonClicked","editIcon","deleteIcon","defaultPalette","addColorPalette","shadesOfRedPalette","shadesOfGreenPalette","shadesOfBluePalette","arrayOfColors","paletteName","changePuzzleColorPalette","removeChildren","attrs","stroke","draw","randomizePuzzleColorPalette","rgbColor","getRandomColorsArray","randomColorArray","getRandomRGB","initializeData","Stage","container","Layer","getBoundingClientRect","point","createPoint","generatePuzzle","setDistanceMetric","savePuzzle","palettes","getElementsByClassName","paletteIndex","getAttribute","puzzleDescription","puzzleImage","toDataURL","pixelRatio","contentType","dataType","getCurrentRenderMode","metric","setDisableEditMode","bool","setSites","clearBoard","destroyChildren","Ring","innerRadius","outerRadius","strokeWidth","draggable","onmousemove","body","cursor","destroy","getChildren","getClassName","generateSiteBoundaries","createPieces","trimmedPoints","trimPoints","Line","paintBrushColor","pointArray","lastPointCol","firstPointCol","currentRow","crissCross","calculateDistancesFromSitesToPoint","equidistantPointsPresent","returnArray","minimumDistance","xOfPoint","yOfPoint","sitePoints","calculateDistance","point1X","point1Y","point2X","point2Y","calculateEuclideanDistance","calculateManhattanDistance","resultX","resultY","saveSolveAttemptURL","correctPositions","pieceInCorrectPosition","correctOrientation","outline","board","startTime","puzzleSolved","selectedDifficulty","rotationEnabled","solvedDiv","initializeDataSolve","Rect","saveSolveAttempt","getPieceInCorrectPositionArray","solvePuzzleID","solveStartTime","timeTaken","performance","now","gainedExp","attemptDuration","generatePieces","generalTransformer","Transformer","centeredScaling","rotationSnaps","rotationSnapTolerance","resizeEnabled","borderEnabled","anchorStroke","anchorFill","rotateAnchorOffset","selectedPiece","offsetX","getRandomOffsetX","offsetY","getRandomOffset","getMin","minY","Group","hitBox","perfectDrawEnabled","moveToTop","nodes","attributes","_getNodeRect","shape","rotateAroundCenter","rotation","_fitNodesInto","checkPositionAndSnapIntoPlace","getRandomRotation","hitBoxCoordinates","absolutePosition","checkPosition","snapPieceIntoPlace","checkIfPuzzleSolved","choice","getMax","coordinate","returnValue","pixelArray","minX","maxX","coords1","coords2","xDifference","yDifference","span","onclick","currentCoords","targetCoords","rotateAroundPoint","angleRad","cos","sin","__assign","deltaRad","center","getCenter","Number","EPSILON","isInteger","sign","Function","defineProperty","match","source","nextKey","REVISION","MOUSE","TOUCH","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","EventDispatcher","listeners","hasEventListener","listenerArray","_lut","_seed","MathUtils","DEG2RAD","RAD2DEG","generateUUID","d0","d1","d2","d3","uuid","clamp","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","defineProperties","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","addVectors","addScalar","subScalar","multiply","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","roundToZero","negate","cross","lengthSq","manhattanLength","normalize","atan2","distanceTo","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","getInverse","throwOnDegenerate","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","sx","sy","cx","cy","rotate","translate","_canvas","ImageUtils","getDataURL","src","HTMLCanvasElement","context","getContext","ImageData","putImageData","drawImage","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","isTexture","updateMatrix","toJSON","isRootObject","textures","metadata","generator","images","isArray","transformUv","uv","Vector4","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","WebGLMultisampleRenderTarget","samples","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","len","tDir","multiplyQuaternionsFlat","_onChangeCallback","isQuaternion","setFromEuler","euler","isEuler","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","vFrom","vTo","angleTo","rotateTowards","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","_vector","Vector3","_quaternion","isVector3","multiplyVectors","applyEuler","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","dz","setFromSphericalCoords","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sz","_v1","_m1","Matrix4","_zero","_one","isMatrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","eye","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","x2","y2","z2","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","near","far","makeOrthographic","_matrix","_quaternion$1","Euler","DefaultOrder","_order","RotationOrders","asin","setFromQuaternion","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_v1$1","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","configurable","enumerable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","isLight","attach","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","isInstancedMesh","count","instanceMatrix","serialize","library","isMesh","isLine","isPoints","geometry","parameters","uuids","extractFromCache","cache","values","key","recursive","Scene","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_points","_vector$1","_box","Box3","_v0","_v1$2","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","isBox3","setFromArray","minZ","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","expandByObject","box","isEmpty","getSize","expandByVector","expandByScalar","boundingBox","computeBoundingBox","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","axes","satForAxes","distanceToPoint","clampedPoint","getBoundingSphere","intersect","v0","extents","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","delta","intersectsLine","startSign","endSign","coplanarPoint","optionalNormalMatrix","referencePoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getUV","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","Color","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","hex","setHSL","handleAlpha","exec","components","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","lightMapIntensity","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","usage","updateRange","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","computeGroups","face","fromGeometry","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","arrayMax","_bufferGeometryId","_m1$2","_obj","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","tangent","computeBoundingSphere","positions","lineDistances","isGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","raycaster","intersects","intersection","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","checkIntersection","uvs_f","morphInfluences","influence","isSkinnedMesh","boneTransform","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","kl","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","uvs1","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","srcVertexNormal","destVertexNormal","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","uniform","Camera","PerspectiveCamera","aspect","filmGauge","filmOffset","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","clearViewOffset","skew","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","currentXrEnabled","xr","currentRenderTarget","getRenderTarget","setRenderTarget","clear","stencil","WebGLCubeRenderTarget","dummy","fromEquirectangularTexture","shader","tEquirect","DataTexture","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","UniformsLib","common","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","frame","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","isInterleavedBufferAttribute","deleteBuffer","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","transmission","transmissionMap","WebGLBackground","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","has","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","updateCache","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","pathLength","lastIndex","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","WebGLShader","createShader","shaderSource","compileShader","programIdCount","addLineNumbers","getEncodingComponents","getShaderErrors","getShaderParameter","getShaderInfoLog","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","WebGLProgram","cacheKey","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","shaderName","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","cachedUniforms","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","getParameters","shadows","nClipPlanes","nClipIntersection","isMeshStandardMaterial","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","materialProperties","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","onSceneDispose","cameras","list","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","vsm_frag","vsm_vert","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","mapPass","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","renderObject","VSMPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","isGroup","WebXRController","_targetRay","_grip","_hand","getHandSpace","joints","inputState","pinching","XRHand","LITTLE_PHALANX_TIP","joint","getTargetRaySpace","getGripSpace","disconnect","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","jointPose","getJointPose","transform","jointRadius","indexTip","INDEX_PHALANX_TIP","thumbTip","THUMB_PHALANX_TIP","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","WebXRManager","framebufferScaleFactor","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","isPresenting","getController","controller","getControllerGrip","getHand","onSessionEvent","onSessionEnd","setFramebuffer","animation","onRequestReferenceSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","updateInputSources","inputSources","removed","added","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","getCamera","depthNear","depthFar","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","refreshUniformsCommon","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","opaqueObjects","transparentObjects","renderObjects","isLOD","isImmediateRenderObject","camera2","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","ltc_1","LTC_1","ltc_2","LTC_2","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","WebGL1Renderer","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","float32Array","transformVertex","vertexPosition","mvPosition","_v1$4","_v2$2","LOD","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","calculateInverses","normalizeSkinWeights","skinWeight","basePosition","skinIndex","weight","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","bone","isBone","getBoneByName","Bone","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","linecap","linejoin","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","computeLineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","hasVideoFrameCallback","HAVE_CURRENT_DATA","CompressedTexture","CanvasTexture","isCanvasTexture","DepthTexture","WireframeGeometry","edge","edges","edge1","edge2","ol","ParametricGeometry","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","uvA","uvB","uvC","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","generateBufferData","generateSegment","generateIndices","getPointAt","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","shapePoints","reverse","hl","ahole","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","font","isFont","generateShapes","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","uOffset","RingGeometry","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","segment","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","inverseSegments","base","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","indexOffset","shapeVertices","shapeHoles","shapeHole","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","__proto__","RawShaderMaterial","Materials","AnimationUtils","arraySlice","isTypedArray","convertArray","forceClone","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceValue","interpolant","createInterpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","json","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","getTrackTypeForValueTypeName","typeName","parseKeyframeTrack","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","requestHeader","setCrossOrigin","setPath","setResourcePath","setRequestHeader","loading","FileLoader","cached","dataUriRegex","dataUriRegexResult","request","isBase64","decodeURIComponent","atob","response","responseType","parser","DOMParser","parseFromString","XMLHttpRequest","callbacks","withCredentials","overrideMimeType","send","setResponseType","setWithCredentials","setMimeType","AnimationLoader","CompressedTextureLoader","loaded","loadTexture","texDatas","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","onImageLoad","onImageError","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","cacheLengths","sums","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","scaleW","scaleH","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","getAt","coeff","getIrradianceAt","addScaledSH","getBasisAt","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","decodeText","TextDecoder","escape","extractUrlBase","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","TYPED_ARRAYS","arrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","geometryShapes","bufferGeometryLoader","details","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","isImageBitmapLoader","setOptions","res","imageBitmap","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","_cachedOutline","action","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","sky","ground","isHemisphereLightProbe","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","oldTime","elapsedTime","running","getElapsedTime","getDelta","newTime","_position$2","_quaternion$3","_scale$1","_orientation","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","getInput","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","play","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","_position$3","_quaternion$4","_scale$2","_orientation$1","PositionalAudio","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","nodeName","isAnimationObjectGroup","sanitizeNodeName","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Spherical","other","setFromCartesianCoords","Cylindrical","_vector$7","Box2","_startP","_startEnd","Line3","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","startEnd_startP","ImmediateRenderObject","_vector$8","SpotLightHelper","cone","coneLength","coneWidth","_vector$9","_boneMatrix","_matrixWorldInv","getBoneList","boneList","SkeletonHelper","isSkeletonHelper","PointLightHelper","sphereSize","_vector$a","_color1","_color2","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","_v1$5","_v2$3","_v3$1","DirectionalLightHelper","lightPlane","targetLine","_vector$b","_camera","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","_box$3","BoxHelper","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setColor","AxesHelper","LOD_MIN","LOD_MAX","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","MAX_SAMPLES","ENCODINGS","_flatCamera","_createPlanes","_lodPlanes","_sizeLods","_sigmas","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","fromScene","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","equirectangular","_fromTexture","fromCubemap","cubemap","compileCubemapShader","_getCubemapShader","compileEquirectangularShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","maxComponent","fExp","log2","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","exp","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","shaderMaterial","_getCommonVertexShader","_getEncodings","Face4","LineStrip","LinePieces","NoColors","FaceColors","VertexColors","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","Handlers","XHRLoader","BinaryTextureLoader","setTexturePath","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","removeAttribute","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","WebGLRenderTargetCube","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","CanvasRenderer","JSONLoader","SceneUtils","createMultiMaterialObject","detach","LensFlare","revision","production","bootstrapModule"],"mappings":"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A;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\n\r\n@Component({\r\n  selector: 'app-admin-challenge',\r\n  templateUrl: './admin-challenge.component.html',\r\n  styleUrls: ['./admin-challenge.component.css']\r\n})\r\nexport class AdminChallengeComponent implements OnInit {\r\n\r\n  nameTextboxValue: string;\r\n  challengeForm: FormGroup;\r\n\r\n  constructor(private api: APIService, private formBuilder: FormBuilder, private router: Router, private dialog: MatDialog) { }\r\n\r\n  createChallenge(){}\r\n\r\n  error_messages = {\r\n    'name': [\r\n      { type: 'required', message: 'Name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.challengeForm = this.formBuilder.group({\r\n      oneName: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      twoName: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      bonusName: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      oneDif: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      twoDiff: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      bonusDiff: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n    });\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<div class=\"container-fluid\" >\r\n    <div fxLayout=\"row\" fxLayout.xs=\"col wrap\">\r\n    <mat-card class=\"chall\">\r\n        <mat-card-header>\r\n            <h1>Create Challenges</h1>\r\n        </mat-card-header>\r\n        <mat-card-content class=\"content\">\r\n            <form [formGroup]=\"challengeForm\" (ngSubmit)=\"createChallenge()\">\r\n\r\n            <div class=\"challengeOne\">\r\n                <h3>Challenge One</h3>\r\n                <mat-form-field appearance=\"outline\">\r\n                    <label for=\"name\">Puzzle Name: </label>\r\n                    <input matInput formControlName=\"oneName\"  placeholder=\"XYZ\">\r\n                </mat-form-field>\r\n\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Difficulty: </label>\r\n                    <input matInput formControlName=\"oneDiff\"  placeholder=\"Intermediate\">\r\n                </mat-form-field>\r\n            </div>\r\n            <hr>\r\n\r\n            <div class=\"challengeOne\">\r\n                <h3>Challenge Two</h3>\r\n                <mat-form-field appearance=\"outline\">\r\n                    <label for=\"name\">Puzzle Name: </label>\r\n                    <input matInput formControlName=\"twoName\"  placeholder=\"XYZ\">\r\n                </mat-form-field>\r\n\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Difficulty: </label>\r\n                    <input matInput formControlName=\"twoDiff\"  placeholder=\"Novice\">\r\n                </mat-form-field>\r\n            </div>\r\n            <hr>\r\n\r\n            <div class=\"challengeOne\">\r\n                <h3>Bonus Challenge</h3>\r\n                <mat-form-field appearance=\"outline\">\r\n                    <label for=\"name\">Puzzle Name: </label>\r\n                    <input matInput formControlName=\"bonusName\"  placeholder=\"XYZ\">\r\n                </mat-form-field>\r\n\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Difficulty: </label>\r\n                    <input matInput formControlName=\"bonusDiff\"  placeholder=\"Expert\">\r\n                </mat-form-field>\r\n            </div>\r\n            \r\n            <button mat-raised-button type=\"submit\" class=\"btns\" >Save</button>\r\n            </form>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n  </div>\r\n</div>\r\n\r\n<!-- <app-footer class=\"footer\" ></app-footer> -->","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-puzzles',\r\n  templateUrl: './admin-puzzles.component.html',\r\n  styleUrls: ['./admin-puzzles.component.css']\r\n})\r\nexport class AdminPuzzlesComponent implements OnInit {\r\n\r\n  ratings: Array<RatingsArr> = [];\r\n  puzzles: Array<PuzzleArr> = [];\r\n  ratingEntry: any;\r\n  datasource: any;\r\n  show: boolean;\r\n  dataAvailable: boolean ;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      puzzleObj.shared = data[i].shared;\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          //********* ERROR HERE - THIS LOOP IS NOT ENTERED WHEN THE RATINGS VALUE IS 0  ************\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n    this.puzzleAscending();\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzlesAdmin().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  delete(puzzleID){\r\n      if(this.api.deletePuzzleAdmin(puzzleID).subscribe()){\r\n        alert(\"Puzzle deleted\");\r\n        location.reload();\r\n      }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n    this.show = true;\r\n    this.dataAvailable = false;\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n  <mat-form-field class=\"searchArea\">\r\n      <mat-label>Search</mat-label>\r\n      <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n  </mat-form-field>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n    sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n  }\">Name\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n    sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n  }\">Rating\r\n    <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n    sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n  }\">Creator\r\n    <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n    sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n  }\">Date\r\n    <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n  <h1 class=\"main-title\" >All Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <!-- <mat-icon aria-hidden=\"false\" class=\"infoIcon\">info_outline</mat-icon> -->\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Created by:</strong> {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Shared:</strong> {{puzzle.shared}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"delete(puzzle.id)\">DELETE PUZZLE</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-ratings',\r\n  templateUrl: './admin-ratings.component.html',\r\n  styleUrls: ['./admin-ratings.component.css']\r\n})\r\nexport class AdminRatingsComponent implements OnInit {\r\n\r\n  ratingList: any;\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  show: boolean;\r\n\r\n  datasource: any;\r\n  sortedBy: any = true;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  getPuzzleRatings() {\r\n    this.api.getAllRatingsAdmin().subscribe( data => {\r\n      this.ratingList = data;\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      console.log(this.ratingList);\r\n      this.show = false ;\r\n      this.datasource = new MatTableDataSource(this.ratingList);\r\n      this.puzzleAscending();\r\n    }\r\n    )\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.testPuzzle.name.toLowerCase().includes(filter) || data.testUser.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.ratingList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  delete(rateID){\r\n    if(this.api.deleteRatingAdmin(rateID).subscribe()){\r\n      alert(\"Rating deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getPuzzleRatings();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Rater\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" >\r\n    <h1 class=\"main-title\" >All Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.testPuzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rating: </strong>{{rating.rating}}/5</mat-card-subtitle>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rater: </strong>{{rating.testUser.name}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{rating.testPuzzle.name}}</strong></mat-card-title>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"delete(rating.id)\">DELETE RATING</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\n\r\n@Component({\r\n  selector: 'app-admin-user',\r\n  templateUrl: './admin-user.component.html',\r\n  styleUrls: ['./admin-user.component.css']\r\n})\r\nexport class AdminUserComponent implements OnInit {\r\n\r\n  userList: any;\r\n  show: boolean;\r\n  totalNumberOfUsers: number;\r\n  pageSize: number = 12;\r\n  startIndex:number = 0;\r\n  endIndex: number = 12;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n  datasource: any;\r\n\r\n  pageEvent: PageEvent;\r\n  sortedBy: any = \"\";\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfUsers){\r\n      this.endIndex = this.totalNumberOfUsers\r\n    }\r\n    this.userList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.username.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfUsers = this.datasource.filteredData.length;\r\n  }\r\n\r\n  getUsers(){\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.totalNumberOfUsers = Object.keys(data).length;\r\n      this.userList = data;\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userList);\r\n      this.puzzleAscending();\r\n    });\r\n  }\r\n\r\n  delete(user){\r\n    if(this.api.deleteUser(user).subscribe()){\r\n      alert(\"User deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getUsers();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container-fluid\" >\r\n    <h1>All Users</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n      <div class=\"content\" *ngFor=\"let user of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n        <mat-card>\r\n            <mat-card-title><strong>{{user.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Email: {{user.username}}</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button id=\"delete\" (click)=\"delete(user.id)\">DELETE USER</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfUsers\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component'\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component'\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component'\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { ChallengesComponent } from './pages/challenges/challenges.component';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\nimport { AdminChallengeComponent } from './admin/admin-challenge/admin-challenge.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {path: 'index', component: IndexComponent},\r\n  {path: 'signup', component: SignupComponent},\r\n  {path: 'login', component: LoginComponent},\r\n  {path: 'profile', component: ProfileComponent},\r\n  {path: 'profilePuzzles', component: ProfilePuzzlesComponent},\r\n  {path: 'profileRatings', component: ProfileRatingsComponent},\r\n  {path: 'profileSolvedPuzzle', component: ProfileSolvedPuzzlesComponent},\r\n  {path: 'about', component: AboutComponent},\r\n  {path: 'challenges', component: ChallengesComponent},\r\n  {path: 'ratings', component: RatingsComponent},\r\n  {path: 'resetPassword', component: ResetPasswordComponent},\r\n  {path: 'resetSuccess', component: ResetSuccessComponent},\r\n  {path: 'create', component: CreateComponent},\r\n  {path: 'aicreate', component: AICreateComponent},\r\n  {path: 'adminUser', component: AdminUserComponent},\r\n  {path: 'adminRatings', component: AdminRatingsComponent},\r\n  {path: 'adminPuzzles', component: AdminPuzzlesComponent},\r\n  {path: 'adminChallenge', component: AdminChallengeComponent},\r\n  {path: 'leaderboard', component: LeaderboardComponent},\r\n\r\n\r\n    // otherwise redirect to home\r\n  { path: '', redirectTo: '/index', pathMatch: 'full' },\r\n  { path: '**', component: IndexComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'prometheus-puzzles';\r\n  \r\n  constructor() {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {NgxPaginationModule} from 'ngx-pagination';\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n//\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport { MatToolbarModule} from '@angular/material/toolbar';\r\nimport { MatTableModule} from '@angular/material/table';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatGridListModule } from '@angular/material/grid-list'\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\r\nimport {MatSortModule} from '@angular/material/sort';\r\n\r\n\r\n//pages\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { NavbarComponent } from './navbar/navbar.component';\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { RateDialogComponent } from './rate-dialog/rate-dialog.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component';\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport { SolveDialogComponent } from './dialogs/solve-dialog/solve-dialog.component';\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component';\r\nimport { MenuComponent } from './dialogs/menu/menu.component';\r\nimport { CreateDialogComponent } from './dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from './dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from './dialogs/profile-update-dialog/profile-update-dialog.component';\r\nimport { SuccessfulSolveComponent } from './dialogs/successful-solve/successful-solve.component';\r\nimport { EmailPassComponent } from './dialogs/email-pass/email-pass.component';\r\nimport { FooterComponent } from './pages/footer/footer.component';\r\nimport { ProfilePuzzlesDialogComponent } from './dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { ChallengesComponent } from './pages/challenges/challenges.component';\r\nimport { HintComponent } from './dialogs/hint/hint.component';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\nimport { AdminChallengeComponent } from './admin/admin-challenge/admin-challenge.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    IndexComponent,\r\n    SignupComponent,\r\n    LoginComponent,\r\n    ProfileComponent,\r\n    RatingsComponent,\r\n    NavbarComponent,\r\n    ResetPasswordComponent,\r\n    ResetSuccessComponent,\r\n    CreateComponent,\r\n    RateDialogComponent,\r\n    ProfilePuzzlesComponent,\r\n    ProfileRatingsComponent,\r\n    AICreateComponent,\r\n    AdminUserComponent,\r\n    AdminRatingsComponent,\r\n    AdminPuzzlesComponent,\r\n    SolveDialogComponent,\r\n    ProfileSolvedPuzzlesComponent,\r\n    MenuComponent,\r\n    CreateDialogComponent,\r\n    LoginDialogComponent,\r\n    ProfileUpdateDialogComponent,\r\n    SuccessfulSolveComponent,\r\n    EmailPassComponent,\r\n    FooterComponent,\r\n    ProfilePuzzlesDialogComponent,\r\n    AboutComponent,\r\n    ChallengesComponent,\r\n    HintComponent,\r\n    LeaderboardComponent,\r\n    AdminChallengeComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    NgxPaginationModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    FlexLayoutModule,\r\n    MatButtonModule,\r\n    MatDividerModule,\r\n    MatIconModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule,\r\n    MatToolbarModule,\r\n    MatTableModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    MatSortModule,\r\n    MatInputModule, MatListModule, MatPaginatorModule, MatProgressBarModule,\r\n    MatCardModule, MatFormFieldModule, MatDialogModule, MatGridListModule, MatRadioModule, ReactiveFormsModule,\r\n    MDBBootstrapModule.forRoot(),\r\n  ],\r\n  entryComponents: [RateDialogComponent],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-create-dialog',\r\n  templateUrl: './create-dialog.component.html',\r\n  styleUrls: ['./create-dialog.component.css']\r\n})\r\nexport class CreateDialogComponent implements OnInit {\r\n  \r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/profilePuzzles']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>Successfully Created</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-email-pass',\r\n  templateUrl: './email-pass.component.html',\r\n  styleUrls: ['./email-pass.component.css']\r\n})\r\nexport class EmailPassComponent implements OnInit {\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<EmailPassComponent>) { }\r\n\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ]\r\n  }\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  submit(form){\r\n    this.input = form.email;\r\n      this.dialogRef.close(`${form.email}`);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      email: ['', [Validators.email, Validators.required]]\r\n    })\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Enter email address. </h1>\r\n  <h3>Email with reset password confirmation will be sent.</h3>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"email\" placeholder=\"Enter Email\" ngControl=\"email\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.email\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('email').hasError(error.type) && (form.get('email').dirty || form.get('email').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { SolveDialogComponent } from '../solve-dialog/solve-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-hint',\r\n  templateUrl: './hint.component.html',\r\n  styleUrls: ['./hint.component.css']\r\n})\r\nexport class HintComponent implements OnInit {\r\n\r\n  fromPage: any;\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog){}\r\n\r\n    easy(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent,\r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 5 } \r\n        });\r\n    }\r\n  \r\n    med(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent, \r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 3 } \r\n        });\r\n    }\r\n  \r\n    hard(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent, \r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 0 } \r\n        });\r\n    }\r\n\r\n  ngOnInit(): void {}\r\n\r\n}\r\n","<div mat-dialog-content><h2>Please Select Game Difficulty</h2></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"easy()\">Novice (5 hints)</button>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"med()\">Intermediate(3 hints)</button>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"hard()\">Expert(No hints)</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login-dialog',\r\n  templateUrl: './login-dialog.component.html',\r\n  styleUrls: ['./login-dialog.component.css']\r\n})\r\nexport class LoginDialogComponent implements OnInit {\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>You are not logged in. Please login</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Puzzle Rating Successful</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles-dialog',\r\n  templateUrl: './profile-puzzles-dialog.component.html',\r\n  styleUrls: ['./profile-puzzles-dialog.component.css']\r\n})\r\nexport class ProfilePuzzlesDialogComponent implements OnInit {\r\n\r\n  fromPage: string;\r\n\r\n  constructor( public dialogRef: MatDialogRef<ProfilePuzzlesDialogComponent>, \r\n              @Optional() @Inject(MAT_DIALOG_DATA) public data: any) \r\n  {\r\n    this.fromPage = data.pageValue;\r\n  }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>{{fromPage}}</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-profile-update-dialog',\r\n  templateUrl: './profile-update-dialog.component.html',\r\n  styleUrls: ['./profile-update-dialog.component.css']\r\n})\r\nexport class ProfileUpdateDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Profile Successfully Updated</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","<div class=\"solver\" id=\"solverDialogDiv\">\r\n  <!-- <div class=\"headings\"> -->\r\n    <h3 *ngIf=\"!expertMode\" mat-dialog-title><strong>Instructions:</strong>Drag Puzzle Pieces onto the canvas to solve the puzzle</h3>\r\n    <h3 *ngIf=\"expertMode\" mat-dialog-title><strong>Instructions:</strong> Click and drag pieces into their correct positions. Double click a piece to rotate it!</h3>\r\n  <!-- </div> -->\r\n\r\n    <div id=\"solvedDiv\" class=\"modal\">\r\n        <!-- Modal content -->\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\">&times;</span>\r\n          <p>Puzzle Successfully Solved</p>\r\n          <p>You earned: <strong>{{xppoints}}</strong>XP</p>\r\n          <p>View your profile page to track your progress</p>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    <div id=\"solverContainer\"></div>\r\n\r\n    <div mat-dialog-actions>\r\n      <button class=\"btns\" mat-button mat-dialog-close id=\"closeSolverDialogButton\">Close</button>\r\n      <label hidden=\"true\" id=\"difficultyLevel\">{{numHints}}</label>\r\n      <button mat-button *ngIf=\"showHintButton\" class=\"btns\" (click)=\"showImage()\">Hint {{fromPage}}(remaining)</button><label></label>\r\n  </div>\r\n\r\n  <div  class=\"modal\" [ngStyle]=\"{'display':display}\">\r\n    <div id=\"cc\" class=\"modal-content\">\r\n      <img id=\"pic\" src=\"{{hintImage}}\">\r\n    </div>\r\n  </div> \r\n  \r\n</div>\r\n","\r\nimport { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { initializeDataSolve } from 'src/assets/js/solvePuzzle.js';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-solve-dialog',\r\n  templateUrl: './solve-dialog.component.html',\r\n  styleUrls: ['./solve-dialog.component.css']\r\n})\r\nexport class SolveDialogComponent implements OnInit {\r\n\r\n  token: any;\r\n\r\n  fromPage: number;\r\n  showHintButton: boolean = false;\r\n  showMe:boolean = false;\r\n  hintImage: any;\r\n  xppoints:any;\r\n\r\n  numHints: number;\r\n\r\n  display = \"none\";\r\n\r\n  expertMode:boolean = false;\r\n\r\n  hintDialog: MatDialogRef<HintComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<SolveDialogComponent>, \r\n    @Optional() @Inject(MAT_DIALOG_DATA) public data: any){\r\n      this.fromPage = data.pageValue;\r\n    }\r\n\r\n    async delay(ms: number) {\r\n      await new Promise(resolve => setTimeout(()=>resolve(), ms))\r\n      .then( () => { });\r\n    }\r\n\r\n    showImage(){\r\n      let puzzleID = localStorage.getItem('solvingPuzzleID');\r\n      if(this.fromPage > 0)\r\n      {\r\n        this.fromPage = this.fromPage - 1;\r\n        this.api.getAllPuzzleByID(parseInt(puzzleID)).subscribe( data => {\r\n          this.hintImage = data[0].image;\r\n          this.display = 'block';\r\n          this.delay(2500).then( () =>{\r\n              this.display = 'none';\r\n            });\r\n        })\r\n      }\r\n    }\r\n\r\n    handleEvent(event: any){\r\n      if(event == stop()){\r\n        alert(\"Done\")\r\n      }\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token =  localStorage.getItem('token');\r\n    localStorage.setItem('numHints', \"\" + this.fromPage);\r\n    initializeDataSolve();\r\n\r\n    if(this.fromPage == 5){ this.xppoints = 10;}\r\n    else if(this.fromPage == 3){ this.xppoints = 30;}\r\n    else if(this.fromPage == 0){ this.xppoints = 50;}\r\n\r\n    if(this.fromPage > 5){\r\n      this.showMe = true;\r\n      if(this.fromPage == 25)\r\n      {\r\n        this.expertMode = true;\r\n        this.numHints = 0;\r\n        this.showHintButton = false;\r\n      }\r\n    }\r\n    else{\r\n      this.numHints = this.fromPage;\r\n      if(this.numHints == 0){\r\n        this.expertMode = true;\r\n        this.showHintButton = false;\r\n      }\r\n      else{\r\n        this.showHintButton = true;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-successful-solve',\r\n  templateUrl: './successful-solve.component.html',\r\n  styleUrls: ['./successful-solve.component.css']\r\n})\r\nexport class SuccessfulSolveComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>successful-solve works!</p>\r\n","import { Component, OnInit} from '@angular/core';\r\n//import { getName } from '.././pages/login/login.component';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n  name:string;\r\n  admin:boolean;\r\n  token: any;\r\n\r\n  constructor(private router: Router) { }\r\n\r\n  logout(){\r\n    localStorage.removeItem('token');\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name = localStorage.getItem('name');\r\n    this.token = localStorage.getItem('token');\r\n    if (this.token == \"CgOOiUKmqqPyOlhFjDZth\"){\r\n      this.admin = true; \r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n<div class=\"logo\">\r\n  <img class=\"navimg\" src=\"assets/images/logo_nav.png\" routerLink=\"/ratings\">\r\n</div>\r\n  <nav class=\"navbar navbar-expand-sm\" id=\"navCustom\">\r\n\r\n    <span class=\"left\"><button id=\"burger\" class=\"navbar-toggler hidden-sm hidden-md hidden-lg hidden-xl\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent1\"\r\n    aria-controls=\"navbarSupportedContent1\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span><i\r\n        class=\"fa fa-bars fa-2x\"></i></span></button></span>\r\n\r\n    <span class=\"collapse navbar-collapse left\" id=\"navbarSupportedContent1\">\r\n        <ul class=\"nav navbar-nav mr-auto\" routerLinkActive=\"active\">\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/ratings\">View</a>\r\n            </li>\r\n            <li class=\"nav-item dropdown\" >\r\n              <a  role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Create<div class=\"caret\"></div></a>\r\n               <div  class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/create\" >Manual</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/aicreate\" >AI</a><br>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Profile<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/profile\">My Details</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profilePuzzles\">My Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileRatings\">My Ratings</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileSolvedPuzzle\">Solved Puzzles</a>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/about\">About Our AI</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/challenges\">Challenges</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/leaderboard\">Leaderboard</a>\r\n            </li>\r\n            <li *ngIf=\"admin\" class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Admin<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminUser\">All Users</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminPuzzles\">All Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminRatings\">All Ratings</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminChallenge\">Challenges</a>\r\n               </div>\r\n            </li>\r\n        </ul>\r\n    </span>\r\n    <span class=\"navbar-text\">\r\n        Hello, {{name}}\r\n        <a id=\"logout\" (click)=\"logout()\">Logout</a>\r\n    </span>\r\n  </nav>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-about',\r\n  templateUrl: './about.component.html',\r\n  styleUrls: ['./about.component.css']\r\n})\r\nexport class AboutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<div class=\"container-fluid\">\r\n    <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\"> \r\n     <mat-card class=\"content\">\r\n       <mat-card-header>\r\n       </mat-card-header>\r\n      <mat-card-content>\r\n        <div id=\"topContent\">\r\n            <mat-card-title >Introducing Prometheus: The Artificial \"Brain\" behind Prometheus' Puzzles</mat-card-title>\r\n            <div id=\"topText\">\r\n                Prometheus is our AI (short for artificial intelligence), and Prometheus is in-charge of generating all the wonderful puzzles hosted on this site - hence the name \"Prometheus' Puzzles\". Prometheus is a genetic algorithm and it works by burrowing the concept of Darwin's Theory of Evolution. In simple terms, Prometheus generates a set of puzzles (referred to as a generation), and through multiple iterations Prometheus decides which puzzles best fit certain criteria. These puzzles that are selected by Prometheus are then allowed to contribute to the next generation of puzzles. This \"evolution\" is repeated until a generation Prometheus deems worthy is produced, and these are the puzzles that are shown at the end.\r\n            </div>\r\n        </div>\r\n        <!-- <hr> -->\r\n        <br>\r\n        <div id=\"bottomContent\">\r\n            <mat-card-title >How does Prometheus work?</mat-card-title>\r\n              Prometheus is a genetic algorithm - it essentially finds solutions by firstly creating an initial set of puzzles and evolving successive generations which are fitter than said initial set. And this process of evolution is emulated through the use of the reproduction, mutation, and crossover operations. <br><br>\r\n\r\n            <mat-card-title >Reproduction</mat-card-title>\r\n              In this operation, the fittest puzzle of the current generation is selected to proceed into the next. This is only done once in every generation. <br><br>\r\n            \r\n            <mat-card-title >Mutation</mat-card-title>\r\n              For this operation, the puzzle selected changes by having one of the sites shift in a random direction by a random offset. This is demonstrated in the following figure: <br><br>\r\n              <img class=\"mediumImage\" src=\"assets/images/mutation.png\"> <br><br>\r\n\r\n            <mat-card-title >Crossover</mat-card-title>\r\n              For this operation, two puzzles are selected and they each exchange of their respective sites with the other. This operation produces two new offspring, which are then mutated and become part of the next generation. This is shown in the following diagram:<br><br>\r\n              <img class=\"largeImage\" src=\"assets/images/crossover.png\"><br><br>\r\n\r\n            <mat-card-title >How does Prometheus select puzzles?</mat-card-title>\r\n              Prometheus selects puzzles by conducting tournament selection, wherein puzzles compete and the fittest one wins. Prometheus will randomly select a few puzzles from the generation and then run the tournament. <br><br>\r\n\r\n            <mat-card-title >How is a puzzle's fitness determined?</mat-card-title>\r\n              A puzzles' fitness is determined by how well the puzzle fits the criteria established by the user. The criteria is set up in the algorithm parameters section by the user, where the user will input the number of pieces assigned to each of the three groups: <br><br>\r\n              <img src=\"assets/images/parameters_number_per_group.png\"><br><br>\r\n              And afterwards the user will decide how much of the board space should belong to each group: <br><br>\r\n              <img src=\"assets/images/parameters_distribution.png\"><br><br>\r\n              Now the criteria from which Prometheus evaluates puzzles is set. Prometheus quantifies a puzzle's fitness by how close the board space distribution is to the user's specifications. Board space occupied by a piece in measured by the surface area (in piexls) of said piece. <br><br>\r\n\r\n              As a simple example, take a look at the previous two images of the algorithm parameters section. Notice that for group 3, there is only 1 puzzle piece and we have given it 55% of the board space. One of the results we get looks like this (where the label correspondes to the group the piece belongs to): <br><br>\r\n              <img src=\"assets/images/parameters_result.png\"><br><br>\r\n\r\n              And that's it! That is how Prometheus works it's magic. \r\n\r\n            <!-- <div id=\"bottomText\">\r\n              <div class=\"left\">\r\n               Our AI Puzzle Generator makes use of a Genetic Algorithm (GA). Blah blah Blah\r\n               <br>\r\n               <img src=\"assets/images/Capture.PNG\">\r\n              </div>\r\n              <div class=\"right\"> \r\n                Bleh bleh bleh<br>\r\n               <img src=\"assets/images/Capture2.PNG\"/>\r\n              </div>\r\n            </div> -->\r\n        </div>\r\n      </mat-card-content>\r\n    </mat-card>\r\n    </div>\r\n  </div>\r\n \r\n  <app-footer class=\"footer\"></app-footer>\r\n ","import { Component, Input, OnInit } from '@angular/core';\r\nimport { initializeDataAI } from 'src/assets/js/aiCreation.js';\r\nimport { Router } from '@angular/router';\r\nimport { Colors, Color } from 'angular-bootstrap-md';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-aicreate',\r\n  templateUrl: './aicreate.component.html',\r\n  styleUrls: ['./aicreate.component.css']\r\n})\r\nexport class AICreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  col: Color;\r\n  color: Colors;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>\r\n\r\n  @Input() OnlyNumber: boolean;\r\n  \r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n  \tinitializeDataAI();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div>\r\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\r\n <mat-icon class=\"fish\" id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\r\n</div>\r\n\r\n\r\n <div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\r\n   aria-hidden=\"true\">\r\n   <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n     <div class=\"modal-content\">\r\n       <div class=\"modal-body mb-0 p-0\">\r\n         <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n           <iframe class=\"embed-responsive-item\" src=\"../../assets/AIFinal.mp4\" allowfullscreen></iframe>\r\n         </div>\r\n       </div>\r\n       <div class=\"modal-footer justify-content-center\">\r\n         <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\r\n       </div>\r\n     </div>\r\n   </div>\r\n </div>\r\n\r\n <div class=\"container-fluid\">\r\n   <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n     <mat-card class=\"puzzleOptions\">\r\n       <mat-card-header>\r\n         <mat-card-title class=\"titleLabel\">Algorithm Parameters</mat-card-title>\r\n       </mat-card-header>\r\n       <mat-card-content>\r\n         <div id=\"inputContainer\">\r\n           <!-- <label>Maximum of puzzle pieces - 20</label><br>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of puzzle pieces</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"3\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox\">\r\n           </mat-form-field> -->\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 1 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" min=\"1\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox1\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 2 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" min=\"1\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox2\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 3 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" min=\"1\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox3\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n\r\n           <br><label>Select Puzzle Type</label><br>\r\n           <mat-radio-group class=\"radio-group\">\r\n             <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButtonAI\" > Euclidean </mat-radio-button>\r\n             <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButtonAI\" > Manhattan </mat-radio-button>\r\n           </mat-radio-group>\r\n           <button mat-raised-button class=\"btns\" id=\"nextButton\">Next</button>\r\n           <button mat-raised-button class=\"btns\" id=\"generatePuzzleButtonAI\">Generate Puzzle</button><br>\r\n         </div>\r\n       </mat-card-content>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"creationCard\">\r\n      <mat-card-header>\r\n        <mat-card-title >Create a puzzle</mat-card-title>\r\n      </mat-card-header>\r\n     <mat-card-content>\r\n       <div id=\"containerAI\">\r\n       </div>\r\n       <div id=\"progressBarDiv\">\r\n        <mat-progress-bar mode=\"indeterminate\" id=\"progressBar\"></mat-progress-bar>\r\n       </div>\r\n       <br>\r\n       <div id=\"puzzleControlsDiv\">\r\n        <button mat-raised-button class=\"btns\" id=\"previousPuzzleButton\">Previous Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"nextPuzzleButton\">Next Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"generate3DButtonAI\">Generate 3D</button>\r\n       </div>\r\n     </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"saveOptions\">\r\n     <mat-card-header>\r\n       <mat-card-title class=\"titleLabel\">Saving Options</mat-card-title>\r\n     </mat-card-header>\r\n     <mat-card-content class=\"matContentC\">\r\n       <button mat-raised-button class=\"btns\" id=\"paintBrushButton\">\r\n         <mat-icon id=\"paintBrushButtonIcon\">brush</mat-icon><input type=\"color\" id=\"paintBrushColorInputAI\" class=\"\">\r\n       </button><br>\r\n       <label id=\"colorPalleteLabel\">Select a color-palette:</label><br>\r\n       <mat-radio-group>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\r\n       </mat-radio-group>\r\n       <button mat-raised-button class=\"btns\" id=\"randomizeColorsButtonAI\">Randomize Colors</button>\r\n       <br><br>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Puzzle Name</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Short description</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <!-- <label id=\"\">Name: </label><br><input [(ngModel)]=\"name\" type=\"text\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\"><br> -->\r\n       <!-- <label id=\"\">Short Description: </label><br><input [(ngModel)]=\"description\" type=\"text\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\"><br> -->\r\n       <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\r\n       <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" (click)=\"success()\">Save</button>\r\n       <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" routerLink=\"/profilePuzzles\">Save</button> -->\r\n     </mat-card-content>\r\n   </mat-card>\r\n   </div>\r\n </div>\r\n\r\n <app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { APIService } from 'src/app/services/api.service';\r\n\r\n@Component({\r\n  selector: 'app-challenges',\r\n  templateUrl: './challenges.component.html',\r\n  styleUrls: ['./challenges.component.css']\r\n})\r\nexport class ChallengesComponent implements OnInit {\r\n\r\n  date: Date = new Date();  \r\n  day: any = this.date.getDay();\r\n  datee: any = this.date.getDate();\r\n  month: any = this.date.getMonth();\r\n  year: any = this.date.getFullYear();\r\n  months: any[] = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\n  actualMonth: any = this.months[this.month];\r\n  xppoints: number;\r\n\r\n  token: any;\r\n  solveDialog: MatDialogRef<SolveDialogComponent>\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  timeDif:any; timeDur:any; timeID:any; timeImage:any; timeName:any;\r\n  solveDif:any; solveHints:any; solveID:any; solveImage: any; solveName:any;\r\n\r\n  puzzleOneID:any; puzzleOneName:any; puzzleOneImage:any; puzzleOneDifficulty:any; oneHints: any; oneXP:any;\r\n  puzzleTwoID:any; puzzleTwoName:any; puzzleTwoImage:any; puzzleTwoDifficulty:any; twoHints: any; twoXP: any;\r\n  puzzleThreeID:any; puzzleThreeName:any; puzzleThreeImage:any; puzzleThreeDifficulty:any; threeHints: any; threeXP: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  openSolveDialogEasy(puzzleID: any){\r\n   localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n      disableClose: true, hasBackdrop: true,\r\n      data: { pageValue:  5} \r\n    });\r\n  }\r\n\r\n  openSolveDialogMed(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n     this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n       disableClose: true, hasBackdrop: true,\r\n       data: { pageValue:  3} \r\n     });\r\n   }\r\n\r\n   openSolveDialogHard(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n     this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n       disableClose: true, hasBackdrop: true,\r\n       data: { pageValue:  0} \r\n     });\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n    this.token = localStorage.getItem('token');\r\n    this.api.getChallenges().subscribe( data => {\r\n      console.log(\"Got da data\", data['puzzleOneName']);\r\n      this.puzzleOneID = data['puzzleOneID'];\r\n      this.puzzleOneName = data['puzzleOneName'];\r\n      this.puzzleOneImage = data['puzzleOneImage'];\r\n      this.puzzleOneDifficulty = data['puzzleOneDifficulty'];\r\n      this.oneXP = 10;\r\n      this.oneHints = 5;\r\n\r\n      //\r\n      this.puzzleTwoID = data['puzzleTwoID'];\r\n      this.puzzleTwoName = data['puzzleTwoName'];\r\n      this.puzzleTwoImage =data['puzzleTwoImage'];\r\n      this.puzzleTwoDifficulty = data['puzzleTwoDifficulty'];\r\n      this.twoXP = 30;\r\n      this.twoHints = 3;\r\n\r\n      //\r\n      this.puzzleThreeID = data['puzzleThreeID'];\r\n      this.puzzleThreeName = data['puzzleThreeName'];\r\n      this.puzzleThreeImage = data['puzzleThreeImage'];\r\n      this.puzzleThreeDifficulty = data['puzzleThreeDifficulty'];\r\n      this.threeXP = 50;\r\n      this.threeHints = 0;\r\n      \r\n      // this.timeDif = data[0].timeDifficulty;\r\n      // this.timeID = data[0].timeID;\r\n      // this.timeImage = data[0].timeImage;\r\n      // this.timeName = data[0].timeName;\r\n      // if(this.timeDif == \"Novice\"){ this.timeDur = 90; this.xppoints = 10;}\r\n      // else if(this.timeDif == \"Intermediate\"){ this.timeDur = 45; this.xppoints = 30;}\r\n      // else if (this.timeDif == \"Expert\"){ this.timeDur = 25; this.xppoints = 50;}\r\n      // //\r\n      // this.solveDif = data[1].solveDifficulty;\r\n      // this.solveID = data[1].solveID;\r\n      // this.solveImage = data[1].solveImage;\r\n      // this.solveName = data[1].solveName;\r\n      // if(this.solveDif == \"Novice\"){ this.solveHints = 5; this.xppoints = 10;}\r\n      // else if(this.solveDif == \"Intermediate\"){ this.solveHints = 3; this.xppoints = 30;}\r\n      // else if(this.solveDif == \"Expert\"){ this.solveHints = 0; this.xppoints = 50;}\r\n    })\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n <div class=\"container-fluid\">\r\n  <h1 class=\"main-title\">Complete Daily Challenges to Earn XP and Level Up</h1>\r\n   <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n\r\n    <mat-card class=\"date\">\r\n        {{datee}}<br>{{actualMonth}}<br>{{year}}\r\n    </mat-card>\r\n\r\n     <!-- <mat-card class=\"chall1\">\r\n       <mat-card-header>\r\n         <mat-card-title class=\"\">Solve Challenge</mat-card-title>\r\n       </mat-card-header>\r\n       <mat-card-content>\r\n       </mat-card-content>\r\n    </mat-card> -->\r\n\r\n    <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Easy Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"{{puzzleOneImage}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Number of Given Hints: {{oneHints}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Difficulty: {{puzzleOneDifficulty}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Earn: {{oneXP}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <mat-card-title><strong>{{puzzleOneName}}</strong></mat-card-title>\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialogEasy(puzzleOneID)\">Solve</button>\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n      <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Medium Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"{{puzzleTwoImage}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Number of Given Hints: {{twoHints}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Difficulty: {{puzzleTwoDifficulty}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Earn: {{twoXP}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <mat-card-title><strong>{{puzzleTwoName}}</strong></mat-card-title>\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialogMed(puzzleTwoID)\">Solve</button>\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n      <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Hard Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"{{puzzleThreeImage}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Number of Given Hints: {{threeHints}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Difficulty: {{puzzleThreeDifficulty}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Earn: {{threeXP}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <mat-card-title><strong>{{puzzleThreeName}}</strong></mat-card-title>\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialogHard(puzzleThreeID)\">Solve</button>\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n    <!-- <mat-card class=\"chall2\">\r\n      <mat-card-header>\r\n        <mat-card-title >Time Challenge</mat-card-title>\r\n      </mat-card-header>\r\n     <mat-card-content>\r\n     </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"chall3\">\r\n     <mat-card-header>\r\n       <mat-card-title class=\"titleLabel\">Bonus Challenge</mat-card-title>\r\n     </mat-card-header>\r\n     <mat-card-content class=\"\">\r\n       </mat-card-content>\r\n   </mat-card> -->\r\n   </div>\r\n </div>\r\n\r\n <app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { initializeData } from 'src/assets/js/manualCreation.js';\r\nimport { Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-create',\r\n  templateUrl: './create.component.html',\r\n  styleUrls: ['./create.component.css']\r\n})\r\nexport class CreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    initializeData();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div>\r\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\r\n <mat-icon id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\r\n</div>\r\n\r\n<div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\r\n  aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-body mb-0 p-0\">\r\n        <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n          <iframe class=\"embed-responsive-item\" src=\"../../assets/ManualFinal.mp4\" allowfullscreen></iframe>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer justify-content-center\">\r\n        <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"container-fluid\">\r\n  <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n    <mat-card class=\"puzzleType\">\r\n      <mat-card-header>\r\n        <mat-card-title class=\"titleLabel\">Select Puzzle Type</mat-card-title>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <mat-radio-group class=\"radio-group\">\r\n          <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButton\" > Euclidean </mat-radio-button>\r\n          <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButton\" > Manhattan </mat-radio-button>\r\n        </mat-radio-group>\r\n      </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"creationCard\">\r\n    <mat-card-header>\r\n      <mat-card-title class=\"titleLabel\">Create puzzle by selecting points on the canvas</mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <button mat-raised-button class=\"btns\" id=\"deletePointButton\">\r\n        <mat-icon id=\"deletePointButtonIcon\">delete</mat-icon><mat-icon id=\"editPointButtonIcon\">edit</mat-icon> Delete Mode\r\n      </button>\r\n      <button mat-raised-button class=\"btns\" id=\"paintBrushButton\">\r\n        <mat-icon id=\"paintBrushButtonIcon\">brush</mat-icon><input type=\"color\" id=\"paintBrushColorInput\" class=\"\">\r\n      </button>\r\n      <div id=\"container\">\r\n      </div>\r\n    </mat-card-content>\r\n    <mat-card-actions>\r\n      <button mat-raised-button class=\"btns\" id=\"generatePuzzleButton\">Generate Puzzle</button>\r\n      <button mat-raised-button class=\"btns\" id=\"generate3DButton\">Generate 3D</button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"saveOptions\">\r\n    <mat-card-header>\r\n      <mat-card-title id=\"saveHeading\">Saving Options</mat-card-title>\r\n    </mat-card-header>\r\n\r\n    <mat-card-content class=\"matContentC\">\r\n      <label class=\"titleLabel\" id=\"colorPalleteLabel\">Select a color-palette:</label><br>\r\n      <mat-radio-group class=\"colRadioBtns\">\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\r\n      </mat-radio-group>\r\n      <button mat-raised-button class=\"btns\" id=\"randomizeColorsButton\">Randomize Colors</button>\r\n      <br><br>\r\n\r\n      <mat-form-field class=\"names\" appearance=\"outline\">\r\n        <mat-label>Puzzle Name</mat-label>\r\n        <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\">\r\n      </mat-form-field>\r\n\r\n      <mat-form-field class=\"names\" appearance=\"outline\">\r\n        <mat-label>Short description</mat-label>\r\n        <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\">\r\n      </mat-form-field>\r\n\r\n      <!-- <label id=\"\">Name: </label><br><input type=\"text\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\"><br> -->\r\n      <!-- <label id=\"\">Short Description: </label><br><input type=\"text\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\"><br> -->\r\n      <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\r\n      <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" (click)=\"success()\">Save</button>\r\n      <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" routerLink=\"/profilePuzzles\">Save</button> -->\r\n    </mat-card-content>\r\n  </mat-card>\r\n  </div>\r\n</div>\r\n\r\n<app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"footer\">\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <div class=\"text\"> \r\n            Copyright 2020 - Prometheus Puzzles &nbsp; | &nbsp; team.prometheus@willowmoore.co.za\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.css']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<header id=\"indexNav\">\r\n    <nav class=\"links\">\r\n      <ul>\r\n        <li id=\"btnLink\"><a href=\"/signup\" mat-button class=\"indexBtn\">Sign Up</a></li>\r\n        <li id=\"btnLink\"><a href=\"/login\" mat-button class=\"indexBtn\">Login</a></li>\r\n      </ul>\r\n    </nav>\r\n</header>\r\n<div class=\"container\" id=\"second\">\r\n        <!-- <h1 class=\"main-title\"><strong>CREATE | SOLVE | PRINT | RATE</strong></h1>\r\n        <h2 class=\"subtitle\"><i>Sign up or login to start creating puzzles that can be solved, printed and rated.</i></h2> -->\r\n        <picture>\r\n          <source media=\"(max-width: 768px)\" srcset=\"assets/images/indexSml.jpg\">\r\n          <img class=\"splashImage\" src=\"assets/images/newsplash.jpg\">\r\n        </picture>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div>\r\n     -->\r\n\r\n    <!-- <div class=\"content\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"descText\">\r\n            <mat-card fxFlex=\"90\">\r\n                    <p>Puzzles have been a hobby of many people over the centuries, coming in various\r\n                    forms which have various ways of solving. Puzzles have played a role in peoples\r\n                    problem solving skills. Puzzle generators have allowed for more puzzles to be\r\n                    created, using various techniques to create interesting and challenging puzzles.\r\n                    The system requested by the client involves the creation of 3-Dimensional puzzles (manually and from the use of AI), testing of puzzles, sharing and rating of\r\n                    puzzles by other users, as well as the ability of downloading 3D printable files.\r\n                    Team Prometheus, has come up with a way to develop the system according to\r\n                    the clients specifications.</p>\r\n          </mat-card>\r\n        </div> -->\r\n\r\n\r\n\r\n        <!-- <div class=\"container\">\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <div class=\"flex-container\" fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\" >\r\n            <div class=\"overlay\"></div>\r\n            <mat-card  class=\"child-1\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by {{puzzle.creator}}</mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Rating: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Date: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\" src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n\r\n            <mat-card  class=\"child-2\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgB.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n            <mat-card class=\"child-3\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n        </div>\r\n\r\n\r\n                <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n                <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n\r\n\r\n    </div> -->\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport {MatPaginator} from '@angular/material/paginator';\r\nimport {MatSort, MatSortable} from '@angular/material/sort';\r\nimport { LeaderboardArr } from './leaderboardArr';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {ChangeDetectorRef } from '@angular/core';\r\nimport { RatingsArr } from '../ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-leaderboard',\r\n  templateUrl: './leaderboard.component.html',\r\n  styleUrls: ['./leaderboard.component.css']\r\n})\r\nexport class LeaderboardComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = ['position','name', 'memberSince', 'xp', 'level', 'nrPuzzles', 'avgRating', 'solved'];\r\n  userList: Array<LeaderboardArr> = [];\r\n  dataSource: any;\r\n  i: number;\r\n  j: number;\r\n  l: number;\r\n  x: number;\r\n  currentUser: any;\r\n  token: any;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  countPuzzles: number =0;\r\n  ratings: Array<RatingsArr> = [];\r\n\r\n\r\n\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  @ViewChild(MatSort) sort: MatSort;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog, private cdref: ChangeDetectorRef) {\r\n  }\r\n\r\n  applyFilter(event: Event) {\r\n    const filterValue = (event.target as HTMLInputElement).value;\r\n    this.dataSource.filter = filterValue.trim().toLowerCase();\r\n\r\n    if (this.dataSource.paginator) {\r\n      this.dataSource.paginator.firstPage();\r\n    }\r\n  }\r\n\r\n  populateTable(){\r\n\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data3=> {\r\n        for(let j=0; data3[j]!= null; j++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data3[j].id;\r\n          ratingObj.rating = data3[j].rating;\r\n          ratingObj.puzzleID = data3[j].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.i = 0;\r\n      while(data[this.i]!=null){\r\n        let leaderboardObj = new LeaderboardArr();\r\n        leaderboardObj.name = data[this.i].name;\r\n        leaderboardObj.memberSince = data[this.i].createdAt;\r\n        leaderboardObj.xp = data[this.i].xp;\r\n        leaderboardObj.level = data[this.i].level;\r\n        if (leaderboardObj.xp == null){\r\n          leaderboardObj.xp = 0;\r\n        }\r\n        if (leaderboardObj.level == null){\r\n          leaderboardObj.level = 0;\r\n        }\r\n\r\n        this.currentUser = {\r\n          \"token\": data[this.i].token\r\n        }\r\n\r\n        this.api.getPuzzlesByUser(this.currentUser).subscribe( data2 => {\r\n          leaderboardObj.nrPuzzles = Object.keys(data2).length;\r\n          this.l = 0;\r\n\r\n          if (leaderboardObj.nrPuzzles == 0){\r\n            leaderboardObj.avgRating = 0;\r\n          }\r\n          else {\r\n\r\n          while (data2[this.l] != null){\r\n\r\n\r\n              this.x = 0;\r\n              this.countPuzzles = 0;\r\n              for (let k=0; this.ratings[k]!=null; k++){\r\n                if (this.ratings[k].puzzleID == data2[this.l].id)\r\n                {\r\n                  if (this.ratings[k].rating != 0){\r\n                    this.countPuzzles = this.countPuzzles + this.ratings[k].rating;\r\n                    this.x = this.x + 1;\r\n                  }\r\n                }\r\n              if (this.countPuzzles != 0)\r\n                leaderboardObj.avgRating = this.countPuzzles/this.x;\r\n              else\r\n                leaderboardObj.avgRating = 0;\r\n            }\r\n\r\n            this.l = this.l + 1;\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n      this.api.retrieveAllSolveAttempts(this.currentUser).subscribe( data4 => {\r\n        leaderboardObj.solved = Object.keys(data4).length;\r\n      });\r\n\r\n        this.i = this.i + 1;\r\n\r\n        this.userList.push(leaderboardObj);\r\n      }\r\n      this.dataSource = new MatTableDataSource(this.userList);\r\n      this.dataSource.paginator = this.paginator;\r\n      this.sort.sort(({ id: 'xp', start: 'desc'}) as MatSortable);\r\n      this.dataSource.sort = this.sort;\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.dataSource = new MatTableDataSource();\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.populateTable();\r\n\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<h1>Leaderboard</h1>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n  <mat-label>Search</mat-label>\r\n  <input matInput (keyup)=\"applyFilter($event)\" placeholder=\"Ex. Mia\" #input>\r\n</mat-form-field>\r\n\r\n<div class=\"mat-elevation-z8\">\r\n  <table mat-table [dataSource]=\"dataSource\" matSort>\r\n\r\n    <ng-container matColumnDef=\"position\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>\r\n      <td mat-cell *matCellDef=\"let i = index\">\r\n          {{this.paginator.pageIndex == 0 ? i + 1 : 1 + i + this.paginator.pageIndex * this.paginator.pageSize}}\r\n      </td>\r\n    </ng-container>\r\n\r\n    <!-- Name Column -->\r\n    <ng-container matColumnDef=\"name\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.name}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"memberSince\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Member Since </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.memberSince}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"xp\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>XP</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.xp}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"level\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>Level</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.level}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"nrPuzzles\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Number of Puzzles</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.nrPuzzles}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"avgRating\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Average Rating of puzzles</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.avgRating}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"solved\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>Puzzles Solved</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.solved}} </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n\r\n    <!-- Row shown when there is no matching data. -->\r\n    <tr class=\"mat-row\" *matNoDataRow>\r\n      <td class=\"mat-cell\" colspan=\"4\">No data matching the filter \"{{input.value}}\"</td>\r\n    </tr>\r\n  </table>\r\n\r\n  <mat-paginator [pageSizeOptions]=\"[10, 25, 100]\"></mat-paginator>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","export class LeaderboardArr{\r\n  name: string;\r\n  memberSince: string;\r\n  nrPuzzles: number;\r\n  avgRating: number;\r\n  solved: number;\r\n  xp: number;\r\n  level: number;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { EmailPassComponent } from 'src/app/dialogs/email-pass/email-pass.component';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\n\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  emailDialogRef: MatDialogRef<EmailPassComponent>;\r\n  entry: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router, private dialog: MatDialog) {}\r\n  //method for logging in user and getting the token associated with the said user\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n\r\n  loginUser(currentUser: User){\r\n    this.formError = '';\r\n    if(currentUser !== null){\r\n      this.verifyUser = {\r\n        \"username\":currentUser.email,\r\n        \"password\":currentUser.password\r\n      }\r\n\r\n      this.api.loginUser(this.verifyUser).subscribe(\r\n        data => {\r\n          localStorage.removeItem('name');\r\n          localStorage.setItem('name', data['name']);\r\n          localStorage.removeItem('token');\r\n          localStorage.setItem('token', data['token']);\r\n\r\n        this.formError = \"\";\r\n        this.router.navigate(['/ratings']);\r\n\r\n        setTimeout(()=>{\r\n          localStorage.removeItem('token');\r\n          this.router.navigate(['login']);\r\n          alert(\"You have been logged out after 1 hour\");\r\n        },3600000);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n          if(error.status >= 401){\r\n            this.formError = error.error;\r\n          }\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  sendMail(){\r\n    this.emailDialogRef = this.dialog.open(EmailPassComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.emailDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.entry = {\r\n        //\"id\":this.rateUID,\r\n          \"username\": result\r\n        }\r\n\r\n        if(this.api.requestPasswordChange(this.entry).subscribe())\r\n        {\r\n          alert(\"Email will be send to you.\")\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loginForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]]\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n        <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n            <mat-card-header>\r\n                <h3>Login</h3>\r\n            </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"loginForm\" (ngSubmit)=\"loginUser(loginForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('email').hasError(error.type) && (loginForm.get('email').dirty || loginForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label><br>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('password').hasError(error.type) && (loginForm.get('password').dirty || loginForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!loginForm.valid\" class=\"btns\" id=\"one\">Login</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n            <mat-card-actions>\r\n                <a (click)=\"sendMail()\" class=\"forgot\">Forgot Password</a>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let puzzle of (this.datasource.filteredData | slice: startIndex:endIndex)\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.createdAt}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <!-- <mat-card-subtitle>Description: {{puzzle.description}}</mat-card-subtitle> -->\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\" >\r\n              <button *ngIf=\"!puzzle.shared\" mat-button class=\"btns\" (click)=\"share(puzzle.id)\">Share</button>\r\n              <button *ngIf=\"puzzle.shared\" mat-button class=\"btns\" (click)=\"stopShare(puzzle.id)\">Stop Sharing</button>\r\n              <button mat-button class=\"btns\" (click)=\"deletePuzzle(puzzle.id)\">Delete</button>\r\n              <!-- <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">SOLVE</button> -->\r\n            </mat-card-actions>\r\n\r\n            <!-- <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n              <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n          </mat-card-actions> -->\r\n          <br>\r\n          <mat-card-actions class=\"puzzleActionsA\">\r\n            <button mat-button class=\"btnsA\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n          </mat-card-actions>\r\n\r\n\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n  <div *ngIf=\"text\">\r\n    <h2 id=\"NoneText\" >You have not created any puzzles at the moment</h2>\r\n  </div>\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { ProfilePuzzlesDialogComponent } from 'src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles',\r\n  templateUrl: './profile-puzzles.component.html',\r\n  styleUrls: ['./profile-puzzles.component.css']\r\n})\r\nexport class ProfilePuzzlesComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  profileDialog: MatDialogRef<ProfilePuzzlesDialogComponent>;\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  getUserPuzzles(){\r\n    this.userPuzzleList = \"\";\r\n    this.api.getPuzzlesByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  share(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.sharePuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Puzzle shared\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  deletePuzzle(puzzleID: any){\r\n    // this.puzzle = {\r\n    //   \"puzzleID\": puzzleID\r\n    // }\r\n    if(this.api.deletePuzzle(puzzleID).subscribe()){\r\n        //alert(\"Puzzle deleted\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle deleted\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  stopShare(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.stopSharingPuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Stop sharing puzzle\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Stopped sharing shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  async delay(ms: number) {\r\n    await new Promise(resolve => setTimeout(()=>resolve(), ms))\r\n    .then( () => { console.log(\"fired\"); });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.delay(2000).then( () =>{\r\n      this.getUserPuzzles();\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-profile-ratings',\r\n  templateUrl: './profile-ratings.component.html',\r\n  styleUrls: ['./profile-ratings.component.css']\r\n})\r\nexport class ProfileRatingsComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user puzzle ratings variables\r\n  //ratingList: Observable <any[]> ;\r\n  userRatingsList: any;\r\n  text: boolean;\r\n  ratePID: number;\r\n  ratingEntry: any;\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  show: boolean;\r\n  deleteVal: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n  datasource: any = \"\";\r\n\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userRatingsList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  getUserPuzzleRatings(){\r\n    this.api.getPuzzleRatingsByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userRatingsList = data;\r\n      this.show = false;\r\n      this.text = false;\r\n      if (this.totalNumberOfPuzzles == 0){\r\n        this.text = true;\r\n      }\r\n      this.datasource = new MatTableDataSource(this.userRatingsList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          alert(\"Rating added\");\r\n        }\r\n\r\n        location.reload();\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  delete(ratePID: any){\r\n    this.deleteVal = {\r\n      \"puzzleID\" : ratePID,\r\n      \"token\" : localStorage.getItem('token')\r\n    }\r\n\r\n  this.api.findRatingID(this.deleteVal).subscribe( (result) => {\r\n    if(this.api.deleteRating(result[\"id\"]).subscribe()){\r\n        alert(\"Rating deleted\");\r\n        location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzleRatings();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{rating.created}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{rating.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{rating.puzzleName}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{rating.rating}}/5</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n                <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n            </mat-card-actions>\r\n            <br>\r\n            <mat-card-actions class=\"puzzleActionsA\">\r\n                <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(rating.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(rating.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!text && !show\"  [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n<div id=\"NoneText\" *ngIf=\"text\">\r\n    <h2>You have not made any ratings at the moment</h2>\r\n</div>\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-profile-solved-puzzles',\r\n  templateUrl: './profile-solved-puzzles.component.html',\r\n  styleUrls: ['./profile-solved-puzzles.component.css']\r\n})\r\nexport class ProfileSolvedPuzzlesComponent implements OnInit {\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  //puzzleList: Observable <Puzzle[]> ;\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n}\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  getUserPuzzles(){\r\n    this.api.retrieveAllSolveAttempts(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzles();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n    <div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n        <h1 class=\"main-title\">Solved Puzzles</h1>\r\n        <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n          <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n            <div class=\"content-overlay\"></div>\r\n            <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n              <div class=\"content-details fadeIn-bottom\">\r\n                <mat-card-header>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.dateCreated}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Best time: {{puzzle.bestTime}} seconds</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Solve attempts duration: {{puzzle.attemptDuration}} seconds</mat-card-subtitle>\r\n                </mat-card-header>\r\n              </div>\r\n              <mat-card-title><strong>{{puzzle.puzzleName}}</strong></mat-card-title>\r\n              <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n              <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.puzzleID)\">Solve</button>\r\n                <button  mat-button class=\"btns\">Rate</button>\r\n                <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n              </mat-card-actions>\r\n          </mat-card>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                      (page)=\"pageEvent = changeEvent($event)\">\r\n    </mat-paginator>\r\n\r\n    <div *ngIf=\"text\">\r\n      <h2 id=\"NoneText\" >You have not solved any puzzles at the moment</h2>\r\n    </div>\r\n    <div class=\"spinner\">\r\n      <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n    </div>\r\n\r\n    <app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n    </div>\r\n\r\n<!-- Button trigger modal -->\r\n<!-- <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#basicExampleModal\">\r\n  Launch demo modal\r\n</button> -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialogRef, MatDialog } from '@angular/material/dialog';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from 'src/app/dialogs/profile-update-dialog/profile-update-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  nameTextboxValue: string;\r\n  usernameTextboxValue: string;\r\n  currentUserObject:any;\r\n  token: any;\r\n  currentUser: any;\r\n  updateNameForm: FormGroup;\r\n  updateUsernameForm: FormGroup;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  updatePorfileDialog: MatDialogRef<ProfileUpdateDialogComponent>;\r\n  playerLevel: number;\r\n  increaseBy: number;\r\n  playerXP: number;\r\n  object: any;\r\n\r\n  upperBound:number; lowerBound:number; currXP:number; currProgress:number; range:number; temp: number;\r\n\r\n  constructor(private api: APIService, private formBuilder: FormBuilder, private router: Router, private dialog: MatDialog) { }\r\n\r\n  updateName(){\r\n    this.currentUser = null;\r\n      if(this.nameTextboxValue != undefined){\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": this.nameTextboxValue\r\n      }\r\n      localStorage.removeItem('name');\r\n      localStorage.setItem('name', this.currentUser['name']);\r\n      this.api.updateName(this.currentUser).subscribe( data => {\r\n        this.currentUserObject['name'] = data['name'];\r\n      });\r\n      this.updatePorfileDialog = this.dialog.open(ProfileUpdateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //---------open dialog to say \"Profile Updated\"\r\n      //alert(\"Name updated\");\r\n    }\r\n    else{ console.log(\"No value provided\");}\r\n    //location.reload();\r\n  }\r\n\r\n  checkLevel(currPlayerXP: any){\r\n    if(currPlayerXP <= 200 ){ this.playerLevel = 1;\r\n      this.upperBound = 200; this.lowerBound = 0; this.currXP = currPlayerXP; \r\n      this.range = this.upperBound - this.lowerBound;\r\n      this.temp = (this.currXP - this.lowerBound);\r\n      this.currProgress = Math.round((this.temp / this.range ) * 100);\r\n    }\r\n    else if(currPlayerXP >= 201 && currPlayerXP <= 350 ){ \r\n      this.playerLevel = 2;\r\n      this.upperBound = 350; this.lowerBound = 201; this.currXP = currPlayerXP; \r\n      this.range = this.upperBound - this.lowerBound;\r\n      this.temp = (this.currXP - this.lowerBound);\r\n      this.currProgress = Math.round((this.temp / this.range ) * 100);\r\n    }\r\n    else if(currPlayerXP >= 351 && currPlayerXP <= 500 ){ \r\n      this.playerLevel = 3;\r\n      this.upperBound = 500; this.lowerBound = 351; this.currXP = currPlayerXP; \r\n      this.range = this.upperBound - this.lowerBound;\r\n      this.temp = (this.currXP - this.lowerBound);\r\n      this.currProgress = Math.round((this.temp / this.range ) * 100);\r\n    }\r\n    else if(currPlayerXP >= 501 && currPlayerXP <= 750){ \r\n      this.playerLevel = 4;\r\n      this.upperBound = 750; this.lowerBound = 501; this.currXP = currPlayerXP; \r\n      this.range = this.upperBound - this.lowerBound;\r\n      this.temp = (this.currXP - this.lowerBound);\r\n      this.currProgress = Math.round((this.temp / this.range ) * 100);}\r\n    else if(currPlayerXP >= 751 ){ \r\n      this.playerLevel = 5;\r\n      this.upperBound = 1000; this.lowerBound = 751; this.currXP = currPlayerXP; \r\n      this.range = this.upperBound - this.lowerBound;\r\n      this.temp = (this.currXP - this.lowerBound);\r\n      this.currProgress = Math.round((this.temp / this.range ) * 100);\r\n    }\r\n    //updateXP\r\n    this.object = {\r\n      \"token\": localStorage.getItem('token'),\r\n      \"level\": this.playerLevel\r\n    }\r\n    this.api.updateLevel(this.object).subscribe( data=> {\r\n      this.playerLevel = data['level'];\r\n    });\r\n    return this.playerXP;\r\n  }\r\n\r\n  updateUsername(){\r\n    this.currentUser = null;\r\n    if(this.usernameTextboxValue != undefined){\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token'),\r\n      \"username\": this.usernameTextboxValue\r\n    }\r\n    this.api.updateUsername(this.currentUser).subscribe( data => {\r\n      this.currentUserObject['username'] = data['username'];\r\n    })\r\n  }\r\n  else{console.log(\"No value provided\")}\r\n  }\r\n\r\n  error_messages = {\r\n    'username': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      this.currentUserObject = data;\r\n      // console.log(\"user: \",data);\r\n\r\n      this.updateNameForm = this.formBuilder.group({\r\n        name: [data['name'], [Validators.required, Validators.pattern('[a-zA-Z ]*')]]\r\n      });\r\n\r\n      this.updateUsernameForm = this.formBuilder.group({\r\n        username: [data['username'], [Validators.required, Validators.email]]\r\n      });\r\n      this.playerLevel = data['level'];\r\n      this.playerXP = data['xp'];\r\n      this.playerLevel = this.checkLevel(this.playerXP);\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<!--app-navbar-profile></app-navbar-profile-->\r\n\r\n\r\n<div class=\"container-fluid\" >\r\n    <div fxLayout=\"row\" fxLayout.xs=\"col wrap\">\r\n    <mat-card class=\"profileText\">\r\n        <mat-card-header>\r\n            <h1>Edit Details</h1>\r\n        </mat-card-header>\r\n        <mat-card-content class=\"move\">\r\n        <div *ngIf=\"currentUserObject\">\r\n            <form [formGroup]=\"updateNameForm\" (ngSubmit)=\"updateName()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Your Name: </label>\r\n                    <input matInput formControlName=\"name\"  value=\"{{currentUserObject.name}}\" (input)=\"nameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.name\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateNameForm.get('name').hasError(error.type) && (updateNameForm.get('name').dirty || updateNameForm.get('name').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateNameForm.valid\" class=\"btns\" >Save</button>\r\n            </form>\r\n\r\n            <form [formGroup]=\"updateUsernameForm\" (ngSubmit)=\"updateUsername()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"username\">Your Email: </label>\r\n                    <input matInput formControlName=\"username\"  value=\"{{currentUserObject.username}}\" (input)=\"usernameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.username\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateUsernameForm.get('username').hasError(error.type) && (updateUsernameForm.get('username').dirty || updateUsernameForm.get('username').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateUsernameForm.valid\" class=\"btns\">Save</button>\r\n            </form>\r\n        </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"lvl\">\r\n        <mat-card-title>Progress</mat-card-title>\r\n        <mat-card-content class=\"move\">\r\n            <mat-card-title class=\"lvlText\">XP: {{playerXP}}</mat-card-title>\r\n            <mat-card-title class=\"lvlText\">Level: {{playerLevel}}</mat-card-title>\r\n            <mat-progress-bar class=\"bb\" mode=\"determinate\" value=\"{{currProgress}}\"></mat-progress-bar>\r\n            <mat-card-subtitle class=\"prog\">Level Progress: {{currProgress}}%</mat-card-subtitle>\r\n\r\n        \r\n        \r\n    </mat-card-content>\r\n    </mat-card>\r\n\r\n  </div>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","export class RatingsArr{\r\n  id: number;\r\n  rating: number;\r\n  puzzleID: number;\r\n}\r\n","export class PuzzleArr{\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  creator: string;\r\n  rating: number;\r\n  created: any;\r\n  showRating: boolean;\r\n  image: any;\r\n  shared: boolean = false; \r\n}\r\n","import { Component, OnInit, ChangeDetectorRef, ViewEncapsulation } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { PuzzleArr } from './puzzleArr';\r\nimport { RatingsArr } from './RatingsArr';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PuzzleRating } from 'src/app/models/PuzzleRating';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { MenuComponent } from 'src/app/dialogs/menu/menu.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-ratings',\r\n  templateUrl: './ratings.component.html',\r\n  styleUrls: ['./ratings.component.css']\r\n})\r\nexport class RatingsComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = [\"id\",\"name\",\"description\",\"creator\",\"rating\",\"created\",\"showRating\",\"image\"];\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  puzzles: Array<PuzzleArr> = [];\r\n  name: string;\r\n  ratings: Array<RatingsArr> = [];\r\n  ratePID: number;\r\n  rateUID: string;\r\n  ratingEntry: any;\r\n  formError: string;\r\n  show: boolean;\r\n  dataAvailable: boolean;\r\n  //searchbar\r\n  searchTextboxValue: string;\r\n  token: any;\r\n  currentUser: any;\r\n  datasource: any = \"\";\r\n  solvingPuzzleID: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  //solve dialog variable\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  sortedBy: any;\r\n\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  ratingSavedDialog: any;\r\n  loginDialog: any;\r\n\r\n  constructor(private api: APIService, private cdr: ChangeDetectorRef, private dialog: MatDialog, private router: Router) {\r\n  }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  //sorting functions start here\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n  //sorting functions end here\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzles().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  searchItems(searchValue: any){\r\n    if(searchValue != undefined){\r\n      this.api.getSearchedPuzzles(searchValue).subscribe( data => {\r\n        var dataObjectSize = Object.keys(data).length;\r\n        if(dataObjectSize == 0 )\r\n        {\r\n          alert(\"Nothing matches given criteria\");\r\n          console.log(\"Nothing matches given criteria\");\r\n        }\r\n        else{\r\n          //Please populate the page with the data received. Other puzzles not fromd data must be cleared\r\n          console.log(data);\r\n          this.populate(data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      if (puzzleObj.creator== this.currentUser[\"name\"])\r\n      {\r\n        puzzleObj.showRating = false;\r\n      }\r\n      else\r\n      {\r\n        puzzleObj.showRating = true;\r\n      }\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n    this.puzzleAscending();\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          this.ratingSavedDialog = this.dialog.open(MenuComponent, { disableClose: true, hasBackdrop: true });\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  reload(){\r\n    this.populate(null);\r\n  }\r\n\r\n   //solve dialog\r\n   openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n    //   disableClose: true, hasBackdrop: true,\r\n    //   data: { pageValue:  \"\"} \r\n    // });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  //solve dialog\r\n  // openSolveDialog(puzzleID: any){\r\n  //   localStorage.setItem('solvingPuzzleID', puzzleID);\r\n  //   this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  // }\r\n  //end of solve dialog\r\n  //start of download methods\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n  //end of download methods\r\n\r\n  ngOnInit(): void {\r\n    this.show=true;\r\n    this.dataAvailable = false;\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //this.router.navigate(['/index']);\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      console.log(data[\"name\"]);\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": data[\"name\"]\r\n      }\r\n    });\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n\r\n  }\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Creator\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\">Created by: {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button *ngIf=\"puzzle.showRating\" mat-button class=\"btns\" (click)=\"openAndCheck(puzzle.id)\">Rate</button>\r\n              <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<app-footer *ngIf=\"!show\"  class=\"footer\" ></app-footer>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-reset-password',\r\n  templateUrl: './reset-password.component.html',\r\n  styleUrls: ['./reset-password.component.css']\r\n})\r\nexport class ResetPasswordComponent implements OnInit {\r\n  resetPasswordForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  resetDone: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router ) {}\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for logging in user and getting the token associated with the said user\r\n  resetPassword(currentUser: User){\r\n    this.resetDone = '';\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.resetPasswordForm.controls['password'].value, this.resetPasswordForm.controls['confirmPassword'].value) == true){\r\n      this.verifyUser = {\r\n        \"username\": currentUser.email,\r\n        \"password\": currentUser.password\r\n      }\r\n      if(this.verifyUser != null){\r\n        this.api.resetPassword(this.verifyUser).subscribe(\r\n          () => {},\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n            else\r\n            {\r\n              this.router.navigate(['/resetSuccess', { message: \"Password reset. Please login\" }]);\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.resetPasswordForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n    if (firstPassword !== secondPassword) {\r\n        return false;\r\n    } else {\r\n      return true;\r\n    }\r\n}\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Reset Password</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"resetPasswordForm\" (ngSubmit)=\"resetPassword(resetPasswordForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('email').hasError(error.type) && (resetPasswordForm.get('email').dirty || resetPasswordForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('password').hasError(error.type) && (resetPasswordForm.get('password').dirty || resetPasswordForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <mat-form-field appearance=\"fill\">\r\n                            <mat-label>Confirm password</mat-label>\r\n                            <input matInput required\r\n                                [type]=\"fieldTextType2 ? 'text' : 'password'\" class=\"input\" formControlName=\"confirmPassword\"/>\r\n                        </mat-form-field>\r\n                        <span>\r\n                            <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType2,'fa-eye': fieldTextType2 }\" (click)=\"toggleFieldTextType2()\">\r\n                            </i>\r\n                        </span>\r\n                            <div>\r\n                                <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                    <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('confirmPassword').hasError(error.type) && (resetPasswordForm.get('confirmPassword').dirty || resetPasswordForm.get('confirmPassword').touched)\">\r\n                                        {{ error.message }}\r\n                                    </mat-error>\r\n                                </ng-container>\r\n                                <span id=\"passError\">{{formError}}</span>\r\n                            </div>\r\n                    </div>\r\n\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!resetPasswordForm.valid\" class=\"btns\" id=\"one\">Submit</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-reset-success',\r\n  templateUrl: './reset-success.component.html',\r\n  styleUrls: ['./reset-success.component.css']\r\n})\r\nexport class ResetSuccessComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute, private router: Router ) {}\r\n\r\n  ngOnInit() {\r\n\r\n    let message = this.route.snapshot.paramMap.get('message');\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n          <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n              <mat-card-header>\r\n                  <h3>Reset Password</h3>\r\n              </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                    <p>Please login</p>\r\n                    <a routerLink=\"/login\" mat-raised-button class=\"btns\" id=\"two\">Login</a>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\r\nimport { User } from '../../models/User';\r\nimport { APIService } from '../../services/api.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-signup',\r\n  templateUrl: './signup.component.html',\r\n  styleUrls: ['./signup.component.css']\r\n})\r\nexport class SignupComponent implements OnInit {\r\n  signUpForm: FormGroup;\r\n  newUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  token: any;\r\n  name: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router) {}\r\n\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for creating a new user. A new JSON object is created and sent to the node api\r\n  createNewUser(createUser: any){\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.signUpForm.controls['password'].value, this.signUpForm.controls['confirmPassword'].value) == true){\r\n      this.newUser = {\r\n        \"name\": createUser.name,\r\n        \"username\": createUser.email,\r\n        \"password\": createUser.password\r\n      }\r\n      if(this.newUser != null){\r\n        this.api.createUser(this.newUser).subscribe(\r\n            data => {\r\n              console.log(data);\r\n              localStorage.removeItem('name');\r\n              localStorage.setItem('name', data['name']);\r\n              localStorage.removeItem('token');\r\n              localStorage.setItem('token', data['token']);\r\n              this.router.navigate(['/ratings']);\r\n            },\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            console.log('Error from API: ', error.error);\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ],\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.signUpForm = this.formBuilder.group({\r\n      name: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n        if (firstPassword !== secondPassword) {\r\n          //this.formError = \"Passwords do not match: \" + controlName + \" \" + matchingControlName;\r\n            return false;\r\n        } else {\r\n          //this.formError = \"Match: \" + controlName + \" \" + matchingControlName;\r\n          return true;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Sign Up</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"signUpForm\" (ngSubmit)=\"createNewUser(signUpForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your full name</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"John Doe\" formControlName=\"name\" required >\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.name\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('name').hasError(error.type) && (signUpForm.get('name').dirty || signUpForm.get('name').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('email').hasError(error.type) && (signUpForm.get('email').dirty || signUpForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"password\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType,\r\n                        'fa-eye': fieldTextType\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('password').hasError(error.type) && (signUpForm.get('password').dirty || signUpForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Confirm password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType2 ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"confirmPassword\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType2,\r\n                        'fa-eye': fieldTextType2\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType2()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('confirmPassword').hasError(error.type) && (signUpForm.get('confirmPassword').dirty || signUpForm.get('confirmPassword').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!signUpForm.valid\" class=\"btns\" id=\"one\">Sign Up</button>\r\n\r\n                    <a routerLink=\"/index\" mat-raised-button color=\"accent\" class=\"btns\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-rate-dialog',\r\n  templateUrl: './rate-dialog.component.html',\r\n  styleUrls: ['./rate-dialog.component.css']\r\n})\r\nexport class RateDialogComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<RateDialogComponent>) { }\r\n\r\n    @Input() OnlyNumber: boolean;\r\n\r\n    error_messages = {\r\n      'rating': [\r\n        { type: 'pattern', message: 'Must be a number between 1 and 5' }\r\n      ]\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      rating: ['', Validators.pattern(\"^([1-5])$\")]\r\n    })\r\n  }\r\n\r\n  submit(form){\r\n    this.input = form.rating;\r\n      this.dialogRef.close(`${form.rating}`);\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Rate Puzzle (out of 5)</h1>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"rating\" placeholder=\"Enter Rating\" ngControl=\"rating\" OnlyNumber=\"true\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.rating\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('rating').hasError(error.type) && (form.get('rating').dirty || form.get('rating').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport { User } from '../models/User';\r\nimport { Puzzle } from '../models/Puzzle';\r\nimport { PuzzleRating } from '../models/PuzzleRating';\r\nimport {HttpHeaders} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class APIService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /**\r\n   * User endpoints start here\r\n   */\r\n  //create new user\r\n  createUser(newUser: User){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/createUser',newUser, httpOptions);\r\n  }\r\n\r\n  loginUser(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/login', currentUser, httpOptions);\r\n  }\r\n\r\n  resetPassword(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/resetPassword', currentUser, httpOptions);\r\n  }\r\n\r\n  getUser(token: any){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getUser',token, httpOptions);\r\n  }\r\n\r\n  updateLevel(currentUser:User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateLevel', currentUser, httpOptions);\r\n  }\r\n\r\n  updateName(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateName', currentUser, httpOptions);\r\n  }\r\n\r\n  updateUsername(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateUsername', currentUser, httpOptions);\r\n  }\r\n\r\n  getPuzzlesByUser(token: any): Observable<any[]> {\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzlesByUser', token, httpOptions);\r\n  }\r\n\r\n  getPuzzleRatingsByUser(token: any): Observable<any[]>{\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzleRatingsByUser', token, httpOptions);\r\n  }\r\n\r\n  /**\r\n   * User endpoints end here\r\n   */\r\n\r\n  /**\r\n   * Challenge Endpoints start here\r\n   */\r\n\r\n  getChallenges(){\r\n    return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getChallenges');\r\n  }\r\n\r\n   /**\r\n   * Challenge Endpoints end here\r\n   */\r\n\r\n\r\n/**\r\n* Puzzle endpoints start here\r\n*/\r\ngetAllPuzzles(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzles');\r\n}\r\n\r\ngetAllPuzzleByID(puzzleID: number){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/' + puzzleID);\r\n}\r\n\r\ncreateNewPuzzle(puzzle: Puzzle){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ncreateNewPuzzleRating(rating: PuzzleRating){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzleRating', rating, httpOptions);\r\n}\r\n\r\ngetAllPuzzleRatings(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzleRatings');\r\n}\r\n\r\ngetSearchedPuzzles(term: any){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getSearchedPuzzles/' + term);\r\n}\r\n\r\nsharePuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/sharePuzzle', puzzle, httpOptions);\r\n}\r\n\r\nstopSharingPuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/stopSharingPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ndeletePuzzle(puzzle:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deletePuzzle/'+puzzle);\r\n}\r\n\r\nfindRatingID(rating: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/findRatingID', rating, httpOptions);\r\n}\r\n\r\ndeleteRating(rating:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deleteRating/'+rating);\r\n}\r\n\r\nretrieveAllSolveAttempts(currentUser: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getSolvedPuzzles', currentUser, httpOptions);\r\n}\r\n\r\n/**\r\n* Puzzle endpoints end here\r\n*/\r\n\r\n/**\r\n* Admin endpoints start here\r\n*/\r\n\r\ngetAllUsers(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllUsers');\r\n}\r\n\r\ndeleteUser(user:number): Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteUser/'+user);\r\n}\r\n\r\ngetAllPuzzlesAdmin()\r\n{\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllPuzzles');\r\n}\r\n\r\ndeletePuzzleAdmin(puzzle:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deletePuzzle/'+puzzle);\r\n}\r\n\r\ngetAllRatingsAdmin(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllRatings');\r\n}\r\n\r\ndeleteRatingAdmin(rateID:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteRatingAdmin/'+rateID);\r\n}\r\n/**\r\n* Admin endpoints end here\r\n*/\r\n\r\nrequestPasswordChange(email: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/requestPasswordChange', email, httpOptions);\r\n}\r\n\r\n}\r\n","/*! FileSaver.js\r\n *  A saveAs() FileSaver implementation.\r\n *  2014-01-24\r\n *\r\n *  By Eli Grey, http://eligrey.com\r\n *  License: X11/MIT\r\n *    See LICENSE.md\r\n */\r\n\r\n/*global self */\r\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\r\n\r\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\r\nvar saveAs = saveAs\r\n  // IE 10+ (native saveAs)\r\n  || (typeof navigator !== \"undefined\" &&\r\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\r\n  // Everyone else\r\n  || (function(view) {\r\n\t\"use strict\";\r\n\t// IE <10 is explicitly unsupported\r\n\tif (typeof navigator !== \"undefined\" &&\r\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\r\n\t\treturn;\r\n\t}\r\n\tvar\r\n\t\t  doc = view.document\r\n\t\t  // only get URL when necessary in case BlobBuilder.js hasn't overridden it yet\r\n\t\t, get_URL = function() {\r\n\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t}\r\n\t\t, URL = view.URL || view.webkitURL || view\r\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t, can_use_save_link = !view.externalHost && \"download\" in save_link\r\n\t\t, click = function(node) {\r\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t);\r\n\t\t\tnode.dispatchEvent(event);\r\n\t\t}\r\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t, throw_outside = function(ex) {\r\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\r\n\t\t\t\tthrow ex;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t, fs_min_size = 0\r\n\t\t, deletion_queue = []\r\n\t\t, process_deletion_queue = function() {\r\n\t\t\tvar i = deletion_queue.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar file = deletion_queue[i];\r\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\tURL.revokeObjectURL(file);\r\n\t\t\t\t} else { // file is a File\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdeletion_queue.length = 0; // clear queue\r\n\t\t}\r\n\t\t, dispatch = function(filesaver, event_types, event) {\r\n\t\t\tevent_types = [].concat(event_types);\r\n\t\t\tvar i = event_types.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t, FileSaver = function(blob, name) {\r\n\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\tvar\r\n\t\t\t\t  filesaver = this\r\n\t\t\t\t, type = blob.type\r\n\t\t\t\t, blob_changed = false\r\n\t\t\t\t, object_url\r\n\t\t\t\t, target_view\r\n\t\t\t\t, get_object_url = function() {\r\n\t\t\t\t\tvar object_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\tdeletion_queue.push(object_url);\r\n\t\t\t\t\treturn object_url;\r\n\t\t\t\t}\r\n\t\t\t\t, dispatch_all = function() {\r\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t}\r\n\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t, fs_error = function() {\r\n\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.open(object_url, \"_blank\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\tdispatch_all();\r\n\t\t\t\t}\r\n\t\t\t\t, abortable = function(func) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\r\n\t\t\t\t, slice\r\n\t\t\t;\r\n\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\tif (!name) {\r\n\t\t\t\tname = \"download\";\r\n\t\t\t}\r\n\t\t\tif (can_use_save_link) {\r\n\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t// FF for Android has a nasty garbage collection mechanism\r\n\t\t\t\t// that turns all objects that are not pure javascript into 'deadObject'\r\n\t\t\t\t// this means `doc` and `save_link` are unusable and need to be recreated\r\n\t\t\t\t// `view` is usable though:\r\n\t\t\t\tdoc = view.document;\r\n\t\t\t\tsave_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\");\r\n\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\tsave_link.download = name;\r\n\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t\t);\r\n\t\t\t\tsave_link.dispatchEvent(event);\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch_all();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\tblob_changed = true;\r\n\t\t\t}\r\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\tname += \".download\";\r\n\t\t\t}\r\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\ttarget_view = view;\r\n\t\t\t}\r\n\t\t\tif (!req_fs) {\r\n\t\t\t\tfs_error();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfs_min_size += blob.size;\r\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\r\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\r\n\t\t\t\t\tvar save = function() {\r\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\r\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\r\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\r\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\tdeletion_queue.push(file);\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\twriter.onerror = function() {\r\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\r\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\r\n\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\r\n\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\tsave();\r\n\t\t\t\t\t}), abortable(function(ex) {\r\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}), fs_error);\r\n\t\t\t}), fs_error);\r\n\t\t}\r\n\t\t, FS_proto = FileSaver.prototype\r\n\t\t, saveAs = function(blob, name) {\r\n\t\t\treturn new FileSaver(blob, name);\r\n\t\t}\r\n\t;\r\n\tFS_proto.abort = function() {\r\n\t\tvar filesaver = this;\r\n\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\tdispatch(filesaver, \"abort\");\r\n\t};\r\n\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\tFS_proto.WRITING = 1;\r\n\tFS_proto.DONE = 2;\r\n\r\n\tFS_proto.error =\r\n\tFS_proto.onwritestart =\r\n\tFS_proto.onprogress =\r\n\tFS_proto.onwrite =\r\n\tFS_proto.onabort =\r\n\tFS_proto.onerror =\r\n\tFS_proto.onwriteend =\r\n\t\tnull;\r\n\r\n\tview.addEventListener(\"unload\", process_deletion_queue, false);\r\n\tsaveAs.unload = function() {\r\n\t\tprocess_deletion_queue();\r\n\t\tview.removeEventListener(\"unload\", process_deletion_queue, false);\r\n\t};\r\n\treturn saveAs;\r\n}(\r\n\t   typeof self !== \"undefined\" && self\r\n\t|| typeof window !== \"undefined\" && window\r\n\t|| this.content\r\n));\r\n// `self` is undefined in Firefox for Android content script context\r\n// while `this` is nsIContentFrameMessageManager\r\n// with an attribute `content` that corresponds to the window\r\n\r\nif (typeof module !== \"undefined\") module.exports = saveAs;\r\n","import {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tTOUCH,\r\n\tVector2,\r\n\tVector3\r\n} from \"src/assets/js/three.module.js\";\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = domElement;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.05;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t// Touch fingers\r\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\tvar twoPI = 2 * Math.PI;\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\tvar min = scope.minAzimuthAngle;\r\n\t\t\tvar max = scope.maxAzimuthAngle;\r\n\r\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\tif ( min < max ) {\r\n\r\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = {\r\n\t\tNONE: - 1,\r\n\t\tROTATE: 0,\r\n\t\tDOLLY: 1,\r\n\t\tPAN: 2,\r\n\t\tTOUCH_ROTATE: 3,\r\n\t\tTOUCH_PAN: 4,\r\n\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t};\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\tvar needsUpdate = false;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t// Prevent the browser from scrolling.\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Manually set the focus since calling preventDefault above\r\n\t\t// prevents the browser from setting it automatically.\r\n\r\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n\t\tvar mouseAction;\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase 0:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// make sure element can receive keys.\r\n\r\n\tif ( scope.domElement.tabIndex === - 1 ) {\r\n\r\n\t\tscope.domElement.tabIndex = 0;\r\n\r\n\t}\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nvar MapControls = function ( object, domElement ) {\r\n\r\n\tOrbitControls.call( this, object, domElement );\r\n\r\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n\tthis.touches.ONE = TOUCH.PAN;\r\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n};\r\n\r\nMapControls.prototype = Object.create( EventDispatcher.prototype );\r\nMapControls.prototype.constructor = MapControls;\r\n\r\nexport { OrbitControls, MapControls };\r\n","import { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard, getCurrentRenderMode } from 'src/assets/js/manualCreation.js';\r\nimport { render3D, render2D } from 'src/assets/js/generate3D.js';\r\n\r\n///The structure of each individual/chromosome object\r\nlet Chromosome = {\r\n\tsites: [],\r\n\tfitness: -1,\r\n};\r\n\r\n///The structure of each site object\r\nlet Site = {\r\n\tx: 0,\r\n\ty: 0,\r\n\tsurfaceArea: 0,\r\n};\r\n\r\nlet generatePuzzleAIButton, nextPuzzleButton, previousPuzzleButton, progressBar;\r\nlet generatedPuzzles;\r\nlet renderedPuzzleIndex;\r\nlet tempWidth, tempHeight;\r\nlet totalSurfaceArea;\r\n\r\n//Genetic Algorithm parameters\r\nlet generationSize = 10 + 1;\r\nlet tournamentSize = 4;\r\nlet maximumIterations = 150;\r\nlet seedString = 'apples';\r\n\r\nlet sliders = [];\r\nlet labels = [];\r\nlet numberOfSites = 6;\r\nlet desiredProportions = [0.40, 0.20, 0.10, 0.10, 0.10, 0.10];\r\nlet groupDistribution = [];\r\n\r\nfunction copyObject(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction xmur3(str) {\r\n    for(var i = 0, h = 1779033703 ^ str.length; i < str.length; i++)\r\n        h = Math.imul(h ^ str.charCodeAt(i), 3432918353),\r\n        h = h << 13 | h >>> 19;\r\n    return function() {\r\n        h = Math.imul(h ^ h >>> 16, 2246822507);\r\n        h = Math.imul(h ^ h >>> 13, 3266489909);\r\n        return (h ^= h >>> 16) >>> 0;\r\n    }\r\n}\r\n\r\nfunction mulberry32(a) {\r\n    return function() {\r\n      var t = a += 0x6D2B79F5;\r\n      t = Math.imul(t ^ t >>> 15, t | 1);\r\n      t ^= t + Math.imul(t ^ t >>> 7, t | 61);\r\n      return ((t ^ t >>> 14) >>> 0) / 4294967296;\r\n    }\r\n}\r\n\r\nlet seed = xmur3(seedString);\r\nlet rand = mulberry32(seed());\r\n\r\nfunction random(max)\r\n{\r\n    // return Math.ceil(rand() * max) - 1;\r\n    return Math.floor(Math.random() * max);\r\n}\r\n\r\nfunction expandPuzzle(sites, factor)\r\n{\r\n\tlet tempSites = [];\r\n\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\ttempSites[i] = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t}\r\n\t\ttempSites[i].x = sites[i].x * factor;\r\n\t\ttempSites[i].y = sites[i].y * factor;\r\n\t}\r\n\r\n\treturn tempSites;\r\n}\r\n\r\nexport function initializeDataAI()\r\n{\r\n\tinitializeData('AI');\r\n\tsetDisableEditMode(true);\r\n\tgroupDistribution = [];\r\n\tgeneratedPuzzles = [];\r\n\tsliders = [];\r\n\tlabels = [];\r\n\trenderedPuzzleIndex = 0;\r\n\tgeneratePuzzleAIButton = document.getElementById('generatePuzzleButtonAI');\r\n\tgeneratePuzzleAIButton.addEventListener('mousedown', generatePuzzleAI);\r\n\tgeneratePuzzleAIButton.remove();\r\n\r\n\tnextPuzzleButton = document.getElementById('nextPuzzleButton');\r\n\tpreviousPuzzleButton = document.getElementById('previousPuzzleButton');\r\n\tnextPuzzleButton.remove();\r\n\tpreviousPuzzleButton.remove();\r\n\r\n\tprogressBar = document.getElementById('progressBar');\r\n\tprogressBar.style.display = 'none';\r\n\r\n\tdocument.getElementById('nextButton').addEventListener('mousedown', displaySlidersCard);\r\n\r\n\tnextPuzzleButton.addEventListener('mousedown', function(){\r\n\t\trenderedPuzzleIndex++;\r\n\t\tif(renderedPuzzleIndex == generatedPuzzles.length)\r\n\t\t{\r\n\t\t\tlet newGeneration = run();\r\n\t\t\tfor(let index = 0; index < newGeneration.length; index++)\r\n\t\t\t{\r\n\t\t\t\tgeneratedPuzzles.push(newGeneration[index].sites);\r\n\t\t\t}\r\n\t\t\tconsole.log('reached maximum :<');\r\n\t\t}\r\n\r\n\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t});\r\n\r\n\tpreviousPuzzleButton.addEventListener('mousedown', function(){\r\n\t\tif(renderedPuzzleIndex != 0)\r\n\t\t{\r\n\t\t\trenderedPuzzleIndex--;\r\n\t\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction displaySlidersCard()\r\n{\r\n\tlet numberOfPiecesInGroup;\r\n\tnumberOfSites = 0;\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tnumberOfPiecesInGroup = parseInt(document.getElementById('numberOfPiecesInputBox' + (i+1)).value);\r\n\r\n\t\tif(document.getElementById('numberOfPiecesInputBox' + (i+1)).value === '')\r\n\t\t{\r\n\t\t\tnumberOfPiecesInGroup = 1;\r\n\t\t}\r\n\t\tif(numberOfPiecesInGroup < 0)\r\n\t\t{\r\n\t\t\tnumberOfPiecesInGroup *= -1;\r\n\t\t}\r\n\r\n\t\tgroupDistribution.push(numberOfPiecesInGroup);\r\n\t\tnumberOfSites += numberOfPiecesInGroup;\r\n\t}\r\n\r\n\tgenerateSliders(3);\r\n\r\n\tdocument.getElementById('inputContainer').appendChild(generatePuzzleAIButton);\r\n}\r\n\r\nfunction generatePuzzleAI()\r\n{\r\n\t// document.getElementById('progressBarDiv').appendChild(progressBar);\r\n\t// progressBar.style.display = 'block';\r\n\tdesiredProportions = [];\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tlet proportion = (sliders[i].value / groupDistribution[i]) / 100;\r\n\r\n\t\tfor(let counter = 0; counter < groupDistribution[i]; counter++)\r\n\t\t\tdesiredProportions.push(proportion);\r\n\t}\r\n\r\n\tdesiredProportions.sort( function(a, b) { return b - a } );\r\n\r\n\tdocument.getElementById('inputContainer').innerHTML = '';\r\n\r\n\tlet lastGeneration = run();\r\n\tfor(let index = 0; index < lastGeneration.length; index++)\r\n\t{\r\n\t\tgeneratedPuzzles.push(lastGeneration[index].sites);\r\n\t}\r\n\r\n\trenderPuzzle(lastGeneration[0].sites);\r\n\t// progressBar.remove();\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(previousPuzzleButton);\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(nextPuzzleButton);\r\n}\r\n\r\nfunction renderPuzzle(sites)\r\n{\r\n\tlet expandedSites = expandPuzzle(sites, 10);\r\n\tsetSites(expandedSites);\r\n\tclearBoard();\r\n\tgenerateSiteBoundaries();\r\n\tlet piecesJSONObject = createPieces();\r\n\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\tif(getCurrentRenderMode() == '3D')\r\n\t\trender3D(piecesJSONObject, 'AI');\r\n}\r\n\r\nfunction generateSliders(numberOfSliders)\r\n{\r\n\tlet inputContainer = document.getElementById('inputContainer');\r\n\tlet defaultValue = 100/numberOfSliders;\r\n\r\n\tinputContainer.innerHTML = '';\r\n\r\n\tfor(let i = 0; i < numberOfSliders; i++)\r\n\t{\r\n\t\tlet slider = document.createElement('input');\r\n\t\tslider.type = 'range';\r\n\t\tslider.min = 1.00;\r\n\t\tslider.max = 100.00 - numberOfSliders + 1;\r\n\t\tslider.value = defaultValue;\r\n\t\tslider.previousValue = defaultValue;\r\n\t\tslider.sliderid = i;\r\n\t\tslider.step = 0.01;\r\n\r\n\t\tslider.addEventListener('input', function() {\r\n\t\t\tlet difference = this.previousValue - this.value;\r\n\t\t\tlet distributedValue = (difference/( numberOfSliders - 1 )).toFixed(2);\r\n\t\t\tlet leftover = 0;\r\n\r\n\t\t\tfor(let i = 0 ; i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = ( parseFloat(sliders[i].value) + parseFloat(distributedValue) );\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(leftover != 0 && ( tempValue + leftover ) >= 1.00)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttempValue += leftover;\r\n\t\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftover += parseFloat(distributedValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; leftover != 0 && i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = parseFloat(sliders[i].value) + leftover;\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.previousValue = this.value;\r\n\t\t\tlabels[this.sliderid].innerHTML = parseInt(this.value);\r\n\t\t});\r\n\r\n\t\tlet headerLabel = document.createElement('label');\r\n\t\theaderLabel.innerHTML = 'Size ' + (i+1);\r\n\r\n\t\tlet valueLabel = document.createElement('label');\r\n\t\tvalueLabel.innerHTML = defaultValue.toFixed(0);\r\n\r\n\t\tlet br = document.createElement('br');\r\n\r\n\t\tsliders.push(slider); \r\n\t\tlabels.push(valueLabel);\r\n\r\n\r\n\t\tinputContainer.appendChild(headerLabel);\r\n\t\tinputContainer.appendChild(slider);\r\n\t\tinputContainer.appendChild(valueLabel);\r\n\t\tinputContainer.appendChild(br);\r\n\t}\r\n}\r\n\r\n///Executes the genetic algorithm and returns the resulting site array\r\nfunction run()\r\n{\r\n\tlet currentGeneration = [], nextGeneration = [];\r\n\tlet parentX, parentY, children;\r\n\tlet x, y;\r\n\ttempWidth = width/10;\r\n\ttempHeight = height/10;\r\n\ttotalSurfaceArea = tempWidth * tempHeight;\r\n\r\n\tnextGeneration = initializeGeneration();\r\n\tfor(let generation = 0; generation < maximumIterations; generation++)\r\n\t{\r\n\t\tcurrentGeneration = nextGeneration;\r\n\t\tnextGeneration = [];\r\n\t\tnextGeneration.push( getFittest(currentGeneration) );\r\n\t\tfor(let i = 0; i < generationSize - 1; i+=2)\r\n\t\t{\r\n\t\t\tparentX = runTournament(currentGeneration);\r\n\t\t\tparentY = runTournament(currentGeneration);\r\n\t\t\tchildren = crossover(parentX, parentY);\r\n\t\t\tmutate(children[0]);\r\n\t\t\tmutate(children[1]);\r\n\t\t\tcalculateAndSetFitness(children[0]);\r\n\t\t\tcalculateAndSetFitness(children[1]);\r\n\t\t\tnextGeneration.push(...children);\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(nextGeneration);\r\n\tconsole.log('done!');\r\n\treturn nextGeneration;\r\n}\r\n\r\n///Returns the fittest chromosome from generation\r\nfunction getFittest(generation)\r\n{\r\n\tlet fittestChromosome = null;\r\n\tfittestChromosome = generation[0];\r\n\r\n\tfor(let i = 1; i < generationSize; i++)\r\n\t\tif(generation[i].fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = generation[i];\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Randomly selected a site and a movement direction; then proceed to execute movement using a random offset\r\nfunction mutate(chromosome)\r\n{\r\n\t// let siteIndex = random(numberOfSites);\r\n\tlet selectedSite = chromosome.sites[random(numberOfSites)];\r\n\tlet offset = random(5 + 1);\r\n\tlet movementDirection = random(4);\r\n\r\n\t///Move site to the right by offset (increment x by offset), or move to the left if at board edge\r\n\tif(movementDirection == 0)\r\n\t{\r\n\t\tif(selectedSite.x + offset < tempWidth)\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t}\r\n\t///Move site to the left by offset (decrement x by offset), or move to the right if at the board edge\r\n\telse if(movementDirection == 1)\r\n\t{\r\n\t\tif(selectedSite.x - offset > 0)\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t}\r\n\t///Move site upwards by offset (decrement y by offset), or move downwards if at the board edge\r\n\telse if(movementDirection == 2)\r\n\t{\r\n\t\tif(selectedSite.y - offset > 0)\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t}\r\n\t///Move site downwards by offset (increment y by offset), or move upwards if at board edge\r\n\telse if(movementDirection == 3)\r\n\t{\r\n\t\tif(selectedSite.y + offset < tempHeight)\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t}\r\n}\r\n\r\n/**\r\n\tCrossover operation; randomly select a site index and swap the sites located on said index.\r\n\tThis function will create two new children, swap their sites and return an array containing them.\r\n**/\r\nfunction crossover(chromosomeX, chromosomeY)\r\n{\r\n\tlet swapIndex = random(numberOfSites);\r\n\tlet childX = copyObject(chromosomeX);\r\n\tlet childY = copyObject(chromosomeY);\r\n\r\n\tlet tempSite = childX.sites[swapIndex];\r\n\tchildX.sites[swapIndex] = childY.sites[swapIndex];\r\n\tchildY.sites[swapIndex] = tempSite;\r\n\r\n\treturn [childX, childY];\r\n}\r\n\r\n///Tournament selection of parent for next generation - fittest from a random bunch is returned.\r\nfunction runTournament(generation)\r\n{\r\n\tlet chosenChromosome, fittestChromosome = null;\r\n\r\n\tfor(let i = 0; i < tournamentSize; i++)\r\n\t{\r\n\t\tchosenChromosome = generation[random(generationSize)];\r\n\t\tif(fittestChromosome == null || chosenChromosome.fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = chosenChromosome;\r\n\t}\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Create and return the initial generation of chromosomes\r\nfunction initializeGeneration()\r\n{\r\n\tlet currentGeneration = [];\r\n\tfor(let i = 0; i < generationSize; i++)\r\n\t{\r\n\t\tlet newChromosome = copyObject(Chromosome);\r\n\t\tfor(let siteIndex = 0; siteIndex < numberOfSites; siteIndex++)\r\n\t\t{\r\n\t\t\tlet tempSite = copyObject(Site);\r\n\t\t\ttempSite.x = random(tempWidth + 1);\r\n\t\t\ttempSite.y = random(tempHeight + 1);\r\n\t\t\tnewChromosome.sites.push(tempSite);\r\n\t\t}\r\n\r\n\t\tcalculateAndSetFitness(newChromosome);\r\n\t\tcurrentGeneration.push(newChromosome);\r\n\t}\r\n\r\n\treturn currentGeneration;\r\n}\r\n\r\n///Calculate and set the fitness of a chromosome\r\nfunction calculateAndSetFitness(chromosome)\r\n{\r\n\tdetermineAndSetSiteBoundaries(chromosome);\r\n\tsortSites(chromosome);\r\n\tlet fitness = 0, difference;\r\n\r\n\tfor(let i = 0; i < desiredProportions.length; i++)\r\n\t{\r\n\t\tdifference = ( desiredProportions[i] * totalSurfaceArea ) - chromosome.sites[i].surfaceArea;\r\n\t\tif(difference < 0)\r\n\t\t\tdifference *= -1;\r\n\t\tfitness += difference;\r\n\t}\r\n\r\n\tchromosome.fitness = fitness;\r\n}\r\n\r\n///Sort the sites according to surface area from highest to lowest\r\nfunction sortSites(chromosome)\r\n{\r\n\tlet sites = chromosome.sites;\r\n\tsites.sort(function(siteA, siteB) { return \tsiteB.surfaceArea - siteA.surfaceArea });\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction determineAndSetSiteBoundaries(chromosome)\r\n{\r\n\tfor(let i = 0; i < numberOfSites; i++)\r\n\t\tchromosome.sites[i].surfaceArea = 0;\r\n\r\n\tfor(let row = 0; row < tempHeight; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < tempWidth; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, chromosome.sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tchromosome.sites[equidistantPoints[0]].surfaceArea += 1;\r\n\t\t}\r\n\t}\r\n}\r\n","import JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { downloadPuzzle3D, downloadPuzzle2D };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet piecesJSONObject, pieces, base64Image;\r\nlet desiredFile;\r\n\r\nfunction downloadPuzzle3D(puzzleID)\r\n{\r\n\tdesiredFile = '3D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction downloadPuzzle2D(puzzleID)\r\n{\r\n\tdesiredFile = '2D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tbase64Image = base64Image.split(\",\");\r\n\t\t\tbase64Image = base64Image[1];\r\n\t\t\tif(desiredFile == '3D')\r\n\t\t\t\tgenerateSTLFiles();\r\n\t\t\telse\r\n\t\t\t\tgenerateImageFile();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generateSTLFiles()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\tlet tileFolder = zip.folder(\"tile puzzle\");\r\n\tlet cuboidFolder = zip.folder(\"cuboid puzzle\");\r\n\tcreateTilePrintableFiles(tileFolder, 0, 5);\r\n  let depths;\r\n\tif(piecesJSONObject.depths === undefined)\r\n\t{\r\n    \r\n    depths = [];\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(Math.floor(Math.random() * 8) + 1);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdepths = piecesJSONObject.depths;\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(depths[i]);\r\n\t}\r\n\r\n\tcreateCuboidPrintableFiles(cuboidFolder, depths);\r\n\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction createCuboidPrintableFiles(folder, depthsArray)\r\n{\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet nextTopRight, nextTopLeft, nextBottomRight, nextBottomLeft;\r\n\tlet stlFileFrontFace, stlFileBackFace;\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFileFrontFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tstlFileBackFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\r\n\t\t\t\tnextTopLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextTopRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileFrontFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileFrontFace);\r\n\t\t\tstlFileFrontFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileFrontFace);\r\n\r\n\r\n\t\t\ttopLeft.z = 500;\r\n\t\t\tbottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\ttopRight.z = 500;\r\n\t\t\tbottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\r\n\t\t\t\tnextTopLeft.z = 500;\r\n\t\t\t\tnextBottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\t\tnextTopRight.z = 500;\r\n\t\t\t\tnextBottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileBackFace);\r\n\t\t\tstlFileBackFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t}\r\n\r\n\t\tstlFileFrontFace += \"endsolid puzzle\";\r\n\t\tstlFileBackFace += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(front_face).stl\", stlFileFrontFace);\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(back_face).stl\", stlFileBackFace);\r\n\t}\r\n}\r\n\r\nfunction createTilePrintableFiles(folder, zPositionBottom, zPositionTop, optionalSuffix)\r\n{\r\n\tif(optionalSuffix == undefined)\r\n\t\toptionalSuffix = '';\r\n\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet nextTopRight, nextTopLeft, nextBottomRight, nextBottomLeft;\r\n\tlet stlFile;\r\n\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFile = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\t\r\n\t\t\t\tnextTopLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: zPositionTop\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: zPositionBottom\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextTopRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: zPositionTop\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: zPositionBottom\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstlFile = addVertexToFile(topLeft, topRight, nextTopRight, stlFile);\r\n\t\t\t\tstlFile = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFile);\r\n\r\n\t\t\t\tstlFile = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFile);\r\n\t\t\t\tstlFile = addVertexToFile(nextTopRight, topRight, bottomRight, stlFile);\r\n\r\n\t\t\t\tstlFile = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFile);\r\n\t\t\t\tstlFile = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFile);\r\n\t\t\t}\r\n\r\n\t\t\tstlFile = addVertexToFile(bottomLeft, bottomRight, topRight, stlFile);\r\n\t\t\tstlFile = addVertexToFile(topRight, topLeft, bottomLeft, stlFile);\r\n\t\t}\r\n\t\tstlFile += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + optionalSuffix + \".stl\", stlFile);\r\n\t}\r\n}\r\n\r\nfunction addVertexToFile(vertexA, vertexB, vertexC, stlFile)\r\n{\r\n\tstlFile += \"facet normal 0 0 0\\n\";\r\n\tstlFile += \"outer loop\\n\";\r\n\tstlFile += \"vertex \" + vertexA.x + \" \" + vertexA.y + \" \" + vertexA.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexB.x + \" \" + vertexB.y + \" \" + vertexB.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexC.x + \" \" + vertexC.y + \" \" + vertexC.z + \"\\n\";\r\n\tstlFile += \"endloop\\n\";\r\n\tstlFile += \"endfacet\\n\";\r\n\r\n\treturn stlFile;\r\n}\r\n\r\nfunction generateImageFile()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500);\r\n}\r\n","import * as THREE from 'src/assets/js/three.module.js';\r\nimport { OrbitControls } from 'src/assets/js/OrbitControls.js';\r\nexport { initiate3DCanvas, render3D, render2D };\r\n\r\nlet scene, camera, renderer, line, points, pieceGeometry, pieceGeometryArray, piece;\r\nlet tile;\r\nlet factor = 5;\r\n\r\nfunction initiate3DCanvas(height, width)\r\n{\r\n\tpoints = [];\r\n\tpieceGeometryArray = [];\r\n\tscene = new THREE.Scene();\r\n\tscene.background = new THREE.Color('white');\r\n\tcamera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);\r\n\trenderer = new THREE.WebGLRenderer({antialias: true});\r\n\t// renderer = new THREE.WebGLRenderer();\r\n\trenderer.setSize(height, width);\r\n\r\n\t// camera.lookAt( 0, 0, 0 );\r\n\tcamera.position.z = 750;\r\n\tconst controls = new OrbitControls(camera, renderer.domElement);\r\n\tcontrols.target.set(0, 10, 0);\r\n\tcontrols.update();\r\n}\r\n\r\nfunction render3D(jsonData, appendedString)\r\n{\r\n\twhile(scene.children.length > 0)\r\n\t\tscene.remove(scene.children[0]);\r\n\t\r\n\tlet pieceGeometryArray = extractPoints(jsonData.pieces, jsonData.depths);\r\n\tlet pieceMeshArray = generateAndColorMeshes(pieceGeometryArray, jsonData.colors);\r\n\taddMeshesToScene(pieceMeshArray);\r\n\ttile = document.getElementById('container'+appendedString).innerHTML;\r\n\tdocument.getElementById('container'+appendedString).innerHTML = \"\";\r\n\tdocument.getElementById('container'+appendedString).appendChild(renderer.domElement);\r\n\tanimate();\r\n}\r\n\r\nfunction render2D(appendedString)\r\n{\r\n\tdocument.getElementById('container'+appendedString).innerHTML = tile;\r\n}\r\n\r\nfunction addMeshesToScene(meshArray)\r\n{\r\n\tfor(let mesh of meshArray)\r\n\t{\r\n\t\tmesh.frustumCulled = false;\r\n\t\t// Add to scene\r\n\t\tscene.add(mesh);\r\n\t}\r\n}\r\n\r\nfunction generateAndColorMeshes(pieceGeometryArray, colors)\r\n{\r\n\tlet tempPieceMeshArray = [];\r\n\tlet material;\r\n\tlet numberOfPiecesPerFace = pieceGeometryArray.length/2;\r\n\tlet colorCounter = 0;\r\n\tfor(let i = 0; i < pieceGeometryArray.length; i+=2)\r\n\t{\r\n\t\t// Create mesh with geo and MeshBasicMaterial\r\n\t\tmaterial = new THREE.MeshBasicMaterial({color: colors[(colorCounter % colors.length)]});\r\n\t\ttempPieceMeshArray.push(new THREE.Mesh(pieceGeometryArray[i], material));\r\n\t\tmaterial = new THREE.MeshBasicMaterial({color: colors[( (colorCounter+numberOfPiecesPerFace) % colors.length )]});\r\n\t\ttempPieceMeshArray.push(new THREE.Mesh(pieceGeometryArray[i+1], material));\r\n\r\n\t\tcolorCounter++;\r\n\t}\r\n\r\n\treturn tempPieceMeshArray;\r\n}\r\n\r\nfunction extractPoints(pieces, depths)\r\n{\r\n\tlet topLeft, topRight, bottomLeft, bottomRight, piece;\r\n\tlet tempPieceGeometryArray = [];\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tpiece = pieces[pieceIndex];\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 10);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 10);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 0);\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , getDepth(depths[pieceIndex]));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, 0);\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index], piece[index+1], 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index], piece[index+1], 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2], piece[index+3], 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2], piece[index+3], 0);\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , ( 500 / factor ));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, ( 500 / factor ));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\t}\r\n\r\n\treturn tempPieceGeometryArray;\r\n}\r\n\r\nfunction buildSquare(bottomLeft, bottomRight, topRight, topLeft, index)\r\n{\r\n\tpieceGeometry.vertices.push(bottomLeft, bottomRight, topRight, topLeft);\r\n\tbuildTriangle(index, index+1, index+2);\r\n\tbuildTriangle(index+2, index+3, index);\r\n}\r\n\r\nfunction buildTriangle(point1, point2, point3)\r\n{\r\n\tpieceGeometry.faces.push(new THREE.Face3(point1, point2, point3));\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500) / factor;\r\n}\r\n\r\nfunction animate()\r\n{\r\n\trequestAnimationFrame(animate);\r\n\t// piece.rotation.x += 0.01;\r\n\t// piece.rotation.y += 0.01;\r\n\t// piece.rotation.z += 0.01;\r\n\trenderer.render(scene, camera);\r\n}","/*!\r\n\r\nJSZip v3.5.0 - A JavaScript class for generating and reading zip files\r\n<http://stuartk.com/jszip>\r\n\r\n(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>\r\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.\r\n\r\nJSZip uses the library pako released under the MIT license :\r\nhttps://github.com/nodeca/pako/blob/master/LICENSE\r\n*/\r\n\r\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).JSZip=t()}}(function(){return function s(a,o,h){function u(r,t){if(!o[r]){if(!a[r]){var e=\"function\"==typeof require&&require;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var i=new Error(\"Cannot find module '\"+r+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,function(t){var e=a[r][1][t];return u(e||t)},n,n.exports,s,a,o,h)}return o[r].exports}for(var l=\"function\"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){\"use strict\";var c=t(\"./utils\"),d=t(\"./support\"),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.encode=function(t){for(var e,r,i,n,s,a,o,h=[],u=0,l=t.length,f=l,d=\"string\"!==c.getTypeOf(t);u<t.length;)f=l-u,i=d?(e=t[u++],r=u<l?t[u++]:0,u<l?t[u++]:0):(e=t.charCodeAt(u++),r=u<l?t.charCodeAt(u++):0,u<l?t.charCodeAt(u++):0),n=e>>2,s=(3&e)<<4|r>>4,a=1<f?(15&r)<<2|i>>6:64,o=2<f?63&i:64,h.push(p.charAt(n)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join(\"\")},r.decode=function(t){var e,r,i,n,s,a,o=0,h=0,u=\"data:\";if(t.substr(0,u.length)===u)throw new Error(\"Invalid base64 input, it looks like a data url.\");var l,f=3*(t=t.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&f--,t.charAt(t.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(l=d.uint8array?new Uint8Array(0|f):new Array(0|f);o<t.length;)e=p.indexOf(t.charAt(o++))<<2|(n=p.indexOf(t.charAt(o++)))>>4,r=(15&n)<<4|(s=p.indexOf(t.charAt(o++)))>>2,i=(3&s)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=e,64!==s&&(l[h++]=r),64!==a&&(l[h++]=i);return l}},{\"./support\":30,\"./utils\":32}],2:[function(t,e,r){\"use strict\";var i=t(\"./external\"),n=t(\"./stream/DataWorker\"),s=t(\"./stream/DataLengthProbe\"),a=t(\"./stream/Crc32Probe\");s=t(\"./stream/DataLengthProbe\");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),e=this;return t.on(\"end\",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s(\"uncompressedSize\")).pipe(e.compressWorker(r)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",e)},e.exports=o},{\"./external\":6,\"./stream/Crc32Probe\":25,\"./stream/DataLengthProbe\":26,\"./stream/DataWorker\":27}],3:[function(t,e,r){\"use strict\";var i=t(\"./stream/GenericWorker\");r.STORE={magic:\"\\0\\0\",compressWorker:function(t){return new i(\"STORE compression\")},uncompressWorker:function(){return new i(\"STORE decompression\")}},r.DEFLATE=t(\"./flate\")},{\"./flate\":7,\"./stream/GenericWorker\":28}],4:[function(t,e,r){\"use strict\";var i=t(\"./utils\");var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?\"string\"!==i.getTypeOf(t)?function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{\"./utils\":32}],5:[function(t,e,r){\"use strict\";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){\"use strict\";var i=null;i=\"undefined\"!=typeof Promise?Promise:t(\"lie\"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,n=t(\"pako\"),s=t(\"./utils\"),a=t(\"./stream/GenericWorker\"),o=i?\"uint8array\":\"array\";function h(t,e){a.call(this,\"FlateWorker/\"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic=\"\\b\\0\",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(t){return new h(\"Deflate\",t)},r.uncompressWorker=function(){return new h(\"Inflate\",{})}},{\"./stream/GenericWorker\":28,\"./utils\":32,pako:38}],8:[function(t,e,r){\"use strict\";function A(t,e){var r,i=\"\";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,r,i,n,s){var a,o,h=t.file,u=t.compression,l=s!==O.utf8encode,f=I.transformTo(\"string\",s(h.name)),d=I.transformTo(\"string\",O.utf8encode(h.name)),c=h.comment,p=I.transformTo(\"string\",s(c)),m=I.transformTo(\"string\",O.utf8encode(c)),_=d.length!==h.name.length,g=m.length!==c.length,b=\"\",v=\"\",y=\"\",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var S=0;e&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),\"UNIX\"===n?(C=798,z|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(t){return 63&(t||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+d,b+=\"up\"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+=\"uc\"+A(y.length,2)+y);var E=\"\";return E+=\"\\n\\0\",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+\"\\0\\0\\0\\0\"+A(z,4)+A(i,4)+f+b+p}}var I=t(\"../utils\"),n=t(\"../stream/GenericWorker\"),O=t(\"../utf8\"),B=t(\"../crc32\"),R=t(\"../signature\");function s(t,e,r,i){n.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,n),s.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},s.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return R.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,n){var s=I.transformTo(\"string\",n(i));return R.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+A(t,2)+A(t,2)+A(e,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on(\"error\",function(t){e.error(t)}),this},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},s.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=s},{\"../crc32\":4,\"../signature\":23,\"../stream/GenericWorker\":28,\"../utf8\":31,\"../utils\":32}],9:[function(t,e,r){\"use strict\";var u=t(\"../compressions\"),i=t(\"./ZipFileWorker\");r.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach(function(t,e){h++;var r=function(t,e){var r=t||e,i=u[r];if(!i)throw new Error(r+\" is not a valid compression method !\");return i}(e.options.compression,a.compression),i=e.options.compressionOptions||a.compressionOptions||{},n=e.dir,s=e.date;e._compressWorker(r,i).withStreamInfo(\"file\",{name:t,dir:n,date:s,comment:e.comment||\"\",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(t){o.error(t)}return o}},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(t,e,r){\"use strict\";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files={},this.comment=null,this.root=\"\",this.clone=function(){var t=new i;for(var e in this)\"function\"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t(\"./object\")).loadAsync=t(\"./load\"),i.support=t(\"./support\"),i.defaults=t(\"./defaults\"),i.version=\"3.5.0\",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t(\"./external\"),e.exports=i},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":15,\"./support\":30}],11:[function(t,e,r){\"use strict\";var i=t(\"./utils\"),n=t(\"./external\"),o=t(\"./utf8\"),h=(i=t(\"./utils\"),t(\"./zipEntries\")),s=t(\"./stream/Crc32Probe\"),u=t(\"./nodejsUtils\");function l(i){return new n.Promise(function(t,e){var r=i.decompressed.getContentWorker().pipe(new s);r.on(\"error\",function(t){e(t)}).on(\"end\",function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error(\"Corrupted zip : CRC32 mismatch\")):t()}).resume()})}e.exports=function(t,s){var a=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?n.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):i.prepareContent(\"the loaded zip file\",t,!0,s.optimizedBinaryString,s.base64).then(function(t){var e=new h(s);return e.load(t),e}).then(function(t){var e=[n.Promise.resolve(t)],r=t.files;if(s.checkCRC32)for(var i=0;i<r.length;i++)e.push(l(r[i]));return n.Promise.all(e)}).then(function(t){for(var e=t.shift(),r=e.files,i=0;i<r.length;i++){var n=r[i];a.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:s.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a})}},{\"./external\":6,\"./nodejsUtils\":14,\"./stream/Crc32Probe\":25,\"./utf8\":31,\"./utils\":32,\"./zipEntries\":33}],12:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../stream/GenericWorker\");function s(t,e){n.call(this,\"Nodejs stream input adapter for \"+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on(\"data\",function(t){e.push({data:t,meta:{percent:0}})}).on(\"error\",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on(\"end\",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{\"../stream/GenericWorker\":28,\"../utils\":32}],13:[function(t,e,r){\"use strict\";var n=t(\"readable-stream\").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on(\"data\",function(t,e){i.push(t)||i._helper.pause(),r&&r(e)}).on(\"error\",function(t){i.emit(\"error\",t)}).on(\"end\",function(){i.push(null)})}t(\"../utils\").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{\"../utils\":32,\"readable-stream\":16}],14:[function(t,e,r){\"use strict\";e.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if(\"number\"==typeof t)throw new Error('The \"data\" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&\"function\"==typeof t.on&&\"function\"==typeof t.pause&&\"function\"==typeof t.resume}}},{}],15:[function(t,e,r){\"use strict\";function s(t,e,r){var i,n=u.getTypeOf(e),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),\"string\"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=_(t))&&b.call(this,i,!0);var a=\"string\"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(e instanceof d&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e=\"\",s.compression=\"STORE\",n=\"string\");var o=null;o=e instanceof d||e instanceof l?e:p.isNode&&p.isStream(e)?new m(t,e):u.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var h=new c(t,o,s);this.files[t]=h}var n=t(\"./utf8\"),u=t(\"./utils\"),l=t(\"./stream/GenericWorker\"),a=t(\"./stream/StreamHelper\"),f=t(\"./defaults\"),d=t(\"./compressedObject\"),c=t(\"./zipObject\"),o=t(\"./generate\"),p=t(\"./nodejsUtils\"),m=t(\"./nodejs/NodejsStreamInputAdapter\"),_=function(t){\"/\"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf(\"/\");return 0<e?t.substring(0,e):\"\"},g=function(t){return\"/\"!==t.slice(-1)&&(t+=\"/\"),t},b=function(t,e){return e=void 0!==e?e:f.createFolders,t=g(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function h(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(r){var i=[];return this.forEach(function(t,e){r(t,e)&&i.push(e)}),i},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,s.call(this,t,e,r),this;if(h(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(t,e){return e.dir&&r.test(t)});var t=this.root+r,e=b.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(r){r=this.root+r;var t=this.files[r];if(t||(\"/\"!==r.slice(-1)&&(r+=\"/\"),t=this.files[r]),t&&!t.dir)delete this.files[r];else for(var e=this.filter(function(t,e){return e.name.slice(0,r.length)===r}),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(t){var e,r={};try{if((r=u.extend(t||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),\"binarystring\"===r.type&&(r.type=\"string\"),!r.type)throw new Error(\"No output type specified.\");u.checkSupport(r.type),\"darwin\"!==r.platform&&\"freebsd\"!==r.platform&&\"linux\"!==r.platform&&\"sunos\"!==r.platform||(r.platform=\"UNIX\"),\"win32\"===r.platform&&(r.platform=\"DOS\");var i=r.comment||this.comment||\"\";e=o.generateWorker(this,r,i)}catch(t){(e=new l(\"error\")).error(t)}return new a(e,r.type||\"string\",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type=\"nodebuffer\"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=i},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":12,\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31,\"./utils\":32,\"./zipObject\":35}],16:[function(t,e,r){e.exports=t(\"stream\")},{stream:void 0}],17:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],18:[function(t,e,r){\"use strict\";var i=t(\"../utils\");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+t+\"). Corrupted zip ?\")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo(\"string\",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{\"../utils\":32}],19:[function(t,e,r){\"use strict\";var i=t(\"./Uint8ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./Uint8ArrayReader\":21}],20:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],21:[function(t,e,r){\"use strict\";var i=t(\"./ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./ArrayReader\":17}],22:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../support\"),s=t(\"./ArrayReader\"),a=t(\"./StringReader\"),o=t(\"./NodeBufferReader\"),h=t(\"./Uint8ArrayReader\");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),\"string\"!==e||n.uint8array?\"nodebuffer\"===e?new o(t):n.uint8array?new h(i.transformTo(\"uint8array\",t)):new s(i.transformTo(\"array\",t)):new a(t)}},{\"../support\":30,\"../utils\":32,\"./ArrayReader\":17,\"./NodeBufferReader\":19,\"./StringReader\":20,\"./Uint8ArrayReader\":21}],23:[function(t,e,r){\"use strict\";r.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",r.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",r.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",r.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",r.DATA_DESCRIPTOR=\"PK\u0007\\b\"},{}],24:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../utils\");function s(t){i.call(this,\"ConvertWorker to \"+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],25:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../crc32\");function s(){i.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}t(\"../utils\").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{\"../crc32\":4,\"../utils\":32,\"./GenericWorker\":28}],26:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataLengthProbe for \"+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],27:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataWorker\");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":t=this.data.substring(this.index,e);break;case\"uint8array\":t=this.data.subarray(this.index,e);break;case\"array\":case\"nodebuffer\":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],28:[function(t,e,r){\"use strict\";function i(t){this.name=t||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit(\"data\",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit(\"error\",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit(\"error\",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.end()}),t.on(\"error\",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+t:t}},e.exports=i},{}],29:[function(t,e,r){\"use strict\";var h=t(\"../utils\"),n=t(\"./ConvertWorker\"),s=t(\"./GenericWorker\"),u=t(\"../base64\"),i=t(\"../support\"),a=t(\"../external\"),o=null;if(i.nodestream)try{o=t(\"../nodejs/NodejsStreamOutputAdapter\")}catch(t){}function l(t,o){return new a.Promise(function(e,r){var i=[],n=t._internalType,s=t._outputType,a=t._mimeType;t.on(\"data\",function(t,e){i.push(t),o&&o(e)}).on(\"error\",function(t){i=[],r(t)}).on(\"end\",function(){try{var t=function(t,e,r){switch(t){case\"blob\":return h.newBlob(h.transformTo(\"arraybuffer\",e),r);case\"base64\":return u.encode(e);default:return h.transformTo(t,e)}}(s,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case\"string\":return e.join(\"\");case\"array\":return Array.prototype.concat.apply([],e);case\"uint8array\":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case\"nodebuffer\":return Buffer.concat(e);default:throw new Error(\"concat : unsupported type '\"+t+\"'\")}}(n,i),a);e(t)}catch(t){r(t)}i=[]}).resume()})}function f(t,e,r){var i=e;switch(e){case\"blob\":case\"arraybuffer\":i=\"uint8array\";break;case\"base64\":i=\"string\"}try{this._internalType=i,this._outputType=e,this._mimeType=r,h.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s(\"error\"),this._worker.error(t)}}f.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var r=this;return\"data\"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){h.delay(e,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new o(this,{objectMode:\"nodebuffer\"!==this._outputType},t)}},e.exports=f},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":13,\"../support\":30,\"../utils\":32,\"./ConvertWorker\":24,\"./GenericWorker\":28}],30:[function(t,e,r){\"use strict\";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,r.nodebuffer=\"undefined\"!=typeof Buffer,r.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:\"application/zip\"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob(\"application/zip\").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t(\"readable-stream\").Readable}catch(t){r.nodestream=!1}},{\"readable-stream\":16}],31:[function(t,e,s){\"use strict\";for(var o=t(\"./utils\"),h=t(\"./support\"),r=t(\"./nodejsUtils\"),i=t(\"./stream/GenericWorker\"),u=new Array(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;u[254]=u[254]=1;function a(){i.call(this,\"utf-8 decode\"),this.leftOver=null}function l(){i.call(this,\"utf-8 encode\")}s.utf8encode=function(t){return h.nodebuffer?r.newBufferFrom(t,\"utf-8\"):function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=h.uint8array?new Uint8Array(o):new Array(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},s.utf8decode=function(t){return h.nodebuffer?o.transformTo(\"nodebuffer\",t).toString(\"utf-8\"):function(t){var e,r,i,n,s=t.length,a=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)a[r++]=i;else if(4<(n=u[i]))a[r++]=65533,e+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&e<s;)i=i<<6|63&t[e++],n--;1<n?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(t=o.transformTo(h.uint8array?\"uint8array\":\"array\",t))},o.inherits(a,i),a.prototype.processChunk=function(t){var e=o.transformTo(h.uint8array?\"uint8array\":\"array\",t.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}(e),n=e;i!==e.length&&(h.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,i),l.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=l},{\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./support\":30,\"./utils\":32}],32:[function(t,e,a){\"use strict\";var o=t(\"./support\"),h=t(\"./base64\"),r=t(\"./nodejsUtils\"),i=t(\"set-immediate-shim\"),u=t(\"./external\");function n(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}a.newBlob=function(e,r){a.checkSupport(\"blob\");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error(\"Bug : can't construct the Blob.\")}}};var s={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)\"array\"===e||\"nodebuffer\"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join(\"\")},stringifyByChar:function(t){for(var e=\"\",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=a.getTypeOf(t),i=!0;if(\"uint8array\"===r?i=s.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}a.applyFromCharCode=f;var c={};c.string={string:n,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,r.allocBuffer(t.length))}},c.array={string:f,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:n},a.transformTo=function(t,e){if(e=e||\"\",!t)return e;a.checkSupport(t);var r=a.getTypeOf(e);return c[r][t](e)},a.getTypeOf=function(t){return\"string\"==typeof t?\"string\":\"[object Array]\"===Object.prototype.toString.call(t)?\"array\":o.nodebuffer&&r.isBuffer(t)?\"nodebuffer\":o.uint8array&&t instanceof Uint8Array?\"uint8array\":o.arraybuffer&&t instanceof ArrayBuffer?\"arraybuffer\":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+\" is not supported by this platform\")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,r,i=\"\";for(r=0;r<(t||\"\").length;r++)i+=\"\\\\x\"+((e=t.charCodeAt(r))<16?\"0\":\"\")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,r){i(function(){t.apply(r||null,e||[])})},a.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},a.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},a.prepareContent=function(r,t,i,n,s){return u.Promise.resolve(t).then(function(i){return o.blob&&(i instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(i)))&&\"undefined\"!=typeof FileReader?new u.Promise(function(e,r){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){r(t.target.error)},t.readAsArrayBuffer(i)}):i}).then(function(t){var e=a.getTypeOf(t);return e?(\"arraybuffer\"===e?t=a.transformTo(\"uint8array\",t):\"string\"===e&&(s?t=h.decode(t):i&&!0!==n&&(t=function(t){return l(t,o.uint8array?new Uint8Array(t.length):new Array(t.length))}(t))),t):u.Promise.reject(new Error(\"Can't read the data of '\"+r+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":14,\"./support\":30,\"set-immediate-shim\":54}],33:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),n=t(\"./utils\"),s=t(\"./signature\"),a=t(\"./zipEntry\"),o=(t(\"./utf8\"),t(\"./support\"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+n.pretty(e)+\", expected \"+n.pretty(t)+\")\")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?\"uint8array\":\"array\",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(i)+\" bytes.\")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{\"./reader/readerFor\":22,\"./signature\":23,\"./support\":30,\"./utf8\":31,\"./utils\":32,\"./zipEntry\":34}],34:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),s=t(\"./utils\"),n=t(\"./compressedObject\"),a=t(\"./crc32\"),o=t(\"./utf8\"),h=t(\"./compressions\"),u=t(\"./support\");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+s.pretty(this.compressionMethod)+\" unknown (inner file : \"+s.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(n)},handleUTF8:function(){var t=u.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":22,\"./support\":30,\"./utf8\":31,\"./utils\":32}],35:[function(t,e,r){\"use strict\";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=t(\"./stream/StreamHelper\"),n=t(\"./stream/DataWorker\"),a=t(\"./utf8\"),o=t(\"./compressedObject\"),h=t(\"./stream/GenericWorker\");i.prototype={internalStream:function(t){var e=null,r=\"string\";try{if(!t)throw new Error(\"No output type specified.\");var i=\"string\"===(r=t.toLowerCase())||\"text\"===r;\"binarystring\"!==r&&\"text\"!==r||(r=\"string\"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h(\"error\")).error(t)}return new s(e,r,\"\")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||\"nodebuffer\").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var u=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],l=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},f=0;f<u.length;f++)i.prototype[u[f]]=l;e.exports=i},{\"./compressedObject\":2,\"./stream/DataWorker\":27,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31}],36:[function(t,l,e){(function(e){\"use strict\";var r,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var n=0,s=new t(u),a=e.document.createTextNode(\"\");s.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)r=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var t=e.document.createElement(\"script\");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var o=new e.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var t,e;i=!0;for(var r=h.length;r;){for(e=h,h=[],t=-1;++t<r;)e[t]();r=h.length}i=!1}l.exports=function(t){1!==h.push(t)||i||r()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],37:[function(t,e,r){\"use strict\";var n=t(\"immediate\");function u(){}var l={},s=[\"REJECTED\"],a=[\"FULFILLED\"],i=[\"PENDING\"];function o(t){if(\"function\"!=typeof t)throw new TypeError(\"resolver must be a function\");this.state=i,this.queue=[],this.outcome=void 0,t!==u&&c(this,t)}function h(t,e,r){this.promise=t,\"function\"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,i){n(function(){var t;try{t=r(i)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError(\"Cannot resolve promise with itself\")):l.resolve(e,t)})}function d(t){var e=t&&t.then;if(t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof e)return function(){e.apply(t,arguments)}}function c(e,t){var r=!1;function i(t){r||(r=!0,l.reject(e,t))}function n(t){r||(r=!0,l.resolve(e,t))}var s=p(function(){t(n,i)});\"error\"===s.status&&i(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status=\"success\"}catch(t){r.status=\"error\",r.value=t}return r}(e.exports=o).prototype.finally=function(e){if(\"function\"!=typeof e)return this;var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if(\"function\"!=typeof t&&this.state===a||\"function\"!=typeof e&&this.state===s)return this;var r=new this.constructor(u);this.state!==i?f(r,this.state===a?t:e,this.outcome):this.queue.push(new h(r,t,e));return r},h.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){l.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=p(d,e);if(\"error\"===r.status)return l.reject(t,r.value);var i=r.value;if(i)c(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},l.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},o.resolve=function(t){if(t instanceof this)return t;return l.resolve(new this(u),t)},o.reject=function(t){var e=new this(u);return l.reject(e,t)},o.all=function(t){var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var i=t.length,n=!1;if(!i)return this.resolve([]);var s=new Array(i),a=0,e=-1,o=new this(u);for(;++e<i;)h(t[e],e);return o;function h(t,e){r.resolve(t).then(function(t){s[e]=t,++a!==i||n||(n=!0,l.resolve(o,s))},function(t){n||(n=!0,l.reject(o,t))})}},o.race=function(t){var e=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var r=t.length,i=!1;if(!r)return this.resolve([]);var n=-1,s=new this(u);for(;++n<r;)a=t[n],e.resolve(a).then(function(t){i||(i=!0,l.resolve(s,t))},function(t){i||(i=!0,l.reject(s,t))});var a;return s}},{immediate:36}],38:[function(t,e,r){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(t,e,r){\"use strict\";var a=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),h=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),s=t(\"./zlib/zstream\"),u=Object.prototype.toString,l=0,f=-1,d=0,c=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:f,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(n[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?h.string2buf(e.dictionary):\"[object ArrayBuffer]\"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=a.deflateSetDictionary(this.strm,i))!==l)throw new Error(n[r]);this._dict_set=!0}}function i(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||n[r.err];return r.result}p.prototype.push=function(t,e){var r,i,n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=h.string2buf(t):\"[object ArrayBuffer]\"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),1!==(r=a.deflate(n,i))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==r);return 4===i?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==i||(this.onEnd(l),!(n.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=p,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(t,e,r){\"use strict\";var d=t(\"./zlib/inflate\"),c=t(\"./utils/common\"),p=t(\"./utils/strings\"),m=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),s=t(\"./zlib/gzheader\"),_=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,e.windowBits);if(r!==m.Z_OK)throw new Error(i[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(t,e){var r=new a(e);if(r.push(t,!0),r.err)throw r.msg||i[r.err];return r.result}a.prototype.push=function(t,e){var r,i,n,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?m.Z_FINISH:m.Z_NO_FLUSH,\"string\"==typeof t?h.input=p.binstring2buf(t):\"[object ArrayBuffer]\"===_.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new c.Buf8(u),h.next_out=0,h.avail_out=u),(r=d.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o=\"string\"==typeof l?p.string2buf(l):\"[object ArrayBuffer]\"===_.call(l)?new Uint8Array(l):l,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||i!==m.Z_FINISH&&i!==m.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=p.utf8border(h.output,h.next_out),s=h.next_out-n,a=p.buf2string(h.output,n),h.next_out=s,h.avail_out=u-s,s&&c.arraySet(h.output,h.output,n,s,0),this.onData(a)):this.onData(c.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(i=m.Z_FINISH),i===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):i!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===m.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},r.ungzip=o},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(\"object\"!=typeof r)throw new TypeError(r+\"must be non-object\");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){\"use strict\";var h=t(\"./common\"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var u=new h.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var r=\"\",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}u[254]=u[254]=1,r.string2buf=function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h.Buf8(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new h.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,a=e||t.length,o=new Array(2*a);for(r=i=0;r<a;)if((n=t[r++])<128)o[i++]=n;else if(4<(s=u[n]))o[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<a;)n=n<<6|63&t[r++],s--;1<s?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return l(o,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}},{\"./common\":41}],43:[function(t,e,r){\"use strict\";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){\"use strict\";var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){\"use strict\";var h,d=t(\"../utils/common\"),u=t(\"./trees\"),c=t(\"./adler32\"),p=t(\"./crc32\"),i=t(\"./messages\"),l=0,f=4,m=0,_=-2,g=-1,b=4,n=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(t,e){return t.msg=i[e],e}function T(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function F(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(d.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function N(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function P(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,u=t.window,l=t.w_mask,f=t.prev,d=t.strstart+S,c=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===c&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(i=S-(d-s),s=d-S,a<i){if(t.match_start=e,o<=(a=i))break;c=u[s+a-1],p=u[s+a]}}}while((e=f[e&l])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function j(t){var e,r,i,n,s,a,o,h,u,l,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(d.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--r;);for(e=r=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--r;);n+=f}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,h=t.strstart+t.lookahead,u=n,l=void 0,l=a.avail_in,u<l&&(l=u),r=0===l?0:(a.avail_in-=l,d.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=c(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=x)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+x-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function Z(t,e){for(var r,i;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r)),t.match_length>=x)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function W(t,e){for(var r,i,n;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*w),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(k+1),this.heap=new d.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:E,t.adler=2===e.wrap?0:1,e.last_flush=l,u._tr_init(e),m):R(t,_)}function K(t){var e=G(t);return e===m&&function(t){t.window_size=2*t.w_size,D(t.head),t.max_lazy_match=h[t.level].max_lazy,t.good_match=h[t.level].good_length,t.nice_match=h[t.level].nice_length,t.max_chain_length=h[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,r,i,n,s){if(!t)return _;var a=1;if(e===g&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),n<1||y<n||r!==v||i<8||15<i||e<0||9<e||s<0||b<s)return R(t,_);8===i&&(i=9);var o=new H;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,K(t)}h=[new M(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&e===l)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-z&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?_:(t.state.gzhead=e,m):_},r.deflate=function(t,e){var r,i,n,s;if(!t||!t.state||5<e||e<0)return t?R(t,_):_;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return R(t,0===t.avail_out?-5:_);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===C)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=p(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,3),i.status=E);else{var a=v+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=E,P(i,a),0!==i.strstart&&(P(i,t.adler>>>16),P(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,m}else if(0===t.avail_in&&T(e)<=T(r)&&e!==f)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==l&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===l)return A;break}if(t.match_length=0,r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):3===i.strategy?function(t,e){for(var r,i,n,s,a=t.window;;){if(t.lookahead<=S){if(j(t),t.lookahead<=S&&e===l)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=a[n=t.strstart-1])===a[++n]&&i===a[++n]&&i===a[++n]){s=t.strstart+S;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=S-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(r=u._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):h[i.level].func(i,e);if(o!==O&&o!==B||(i.status=666),o===A||o===O)return 0===t.avail_out&&(i.last_flush=-1),m;if(o===I&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,m}return e!==f?m:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(P(i,t.adler>>>16),P(i,65535&t.adler)),F(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?m:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?R(t,_):(t.state=null,e===E?R(t,-3):m):_},r.deflateSetDictionary=function(t,e){var r,i,n,s,a,o,h,u,l=e.length;if(!t||!t.state)return _;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(t.adler=c(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new d.Buf8(r.w_size),d.arraySet(u,e,l-r.w_size,r.w_size,0),e=u,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,j(r);r.lookahead>=x;){for(i=r.strstart,n=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+x-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,m},r.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(t,e,r){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){\"use strict\";e.exports=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C;r=t.state,i=t.next_in,z=t.input,n=i+(t.avail_in-5),s=t.next_out,C=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=m[c&g];e:for(;;){if(c>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(c&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg=\"invalid literal/length code\",r.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(c+=z[i++]<<p,p+=8),w+=c&(1<<y)-1,c>>>=y,p-=y),p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=_[c&b];r:for(;;){if(c>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(c&(1<<y)-1)];continue r}t.msg=\"invalid distance code\",r.mode=30;break t}if(k=65535&v,p<(y&=15)&&(c+=z[i++]<<p,(p+=8)<y&&(c+=z[i++]<<p,p+=8)),h<(k+=c&(1<<y)-1)){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(c>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(S=d,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=d[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=d[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(i<n&&s<o);i-=w=p>>3,c&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(t,e,r){\"use strict\";var I=t(\"../utils/common\"),O=t(\"./adler32\"),B=t(\"./crc32\"),R=t(\"./inffast\"),T=t(\"./inftrees\"),D=1,F=2,N=0,U=-2,P=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(i),e.distcode=e.distdyn=new I.Buf32(n),e.sane=1,e.back=-1,N):U}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):U}function h(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?U:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):U}function u(t,e){var r,i;return t?(i=new s,(t.state=i).window=null,(r=h(t,e))!==N&&(t.state=null),r):U}var l,f,d=!0;function j(t){if(d){var e;for(l=new I.Buf32(512),f=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(T(D,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;T(F,t.lens,0,32,f,0,t.work,{bits:5}),d=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function Z(t,e,r,i){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),i>=s.wsize?(I.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(n=s.wsize-s.wnext)&&(n=i),I.arraySet(s.window,e,r-i,n,s.wnext),(i-=n)?(I.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,15)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return U;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,f=o,d=h,x=N;t:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg=\"incorrect header check\",r.mode=30;break}if(8!=(15&u)){t.msg=\"unknown compression method\",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg=\"invalid window size\",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){t.msg=\"unknown compression method\",r.mode=30;break}if(57344&r.flags){t.msg=\"unknown header flags set\",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,i,s,c,k)),512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg=\"header crc mismatch\",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}t.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==e)break;u>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg=\"invalid block type\",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg=\"invalid stored block lengths\",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),h<c&&(c=h),0===c)break t;I.arraySet(n,i,s,c,a),o-=c,s+=c,h-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg=\"too many length or distance symbols\",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid code lengths set\",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){t.msg=\"invalid bit length repeat\",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg=\"invalid bit length repeat\",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg=\"invalid code -- missing end-of-block\",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid literal/lengths set\",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){t.msg=\"invalid distances set\",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,R(t,d),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){t.msg=\"invalid literal/length code\",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){t.msg=\"invalid distance code\",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg=\"invalid distance too far back\",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=d-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=n,p=a-r.offset,c=r.length;for(h<c&&(c=h),h-=c,r.length-=c;n[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=i[s++]<<l,l+=8}if(d-=h,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?B(r.check,n,d,a-d):O(r.check,n,d,a-d)),d=h,(r.flags?u:L(u))!==r.check){t.msg=\"incorrect data check\",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg=\"incorrect length check\",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return U}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Z(t,t.output,t.next_out,d-t.avail_out)?(r.mode=31,-4):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?B(r.check,n,d,t.next_out-d):O(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===d||4===e)&&x===N&&(x=-5),x)},r.inflateEnd=function(t){if(!t||!t.state)return U;var e=t.state;return e.window&&(e.window=null),t.state=null,N},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?U:((r.head=e).done=!1,N):U},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,e,i,0)!==r.check?-3:Z(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(t,e,r){\"use strict\";var D=t(\"../utils/common\"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,i,n,s,a,o){var h,u,l,f,d,c,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<i;v++)O[e[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===t||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<i;v++)0!==e[r+v]&&(a[B[e[r+v]]++]=v);if(c=0===t?(A=R=a,19):1===t?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,d=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<c?(m=0,a[v]):a[v]>c?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;n[d+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=e[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),d+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===t&&852<C||2===t&&592<C)return 1;n[l=E&f]=k<<24|x<<16|d-s|0}}return 0!==E&&(n[d+E]=b-S<<24|64<<16|0),o.bits=k,0}},{\"../utils/common\":41}],51:[function(t,e,r){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],52:[function(t,e,r){\"use strict\";var n=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,a=29,u=256,l=u+1+a,f=30,d=19,_=2*l+1,g=15,c=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));i(z);var C=new Array(2*f);i(C);var E=new Array(512);i(E);var A=new Array(256);i(A);var I=new Array(a);i(I);var O,B,R,T=new Array(f);function D(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?E[t]:E[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>c-r?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=r-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function L(t,e,r){P(t,r[2*e],r[2*e+1])}function j(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function Z(t,e,r){var i,n,s=new Array(g+1),a=0;for(i=1;i<=g;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function W(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?U(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function G(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&H(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!H(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function K(t,e,r){var i,n,s,a,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(s=A[n])+u+1,e),0!==(a=w[s])&&P(t,n-=I[s],a),L(t,s=N(--i),r),0!==(a=k[s])&&P(t,i-=T[s],a)),o<t.last_lit;);L(t,m,e)}function Y(t,e){var r,i,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)G(t,s,r);for(n=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,s[2*n]=s[2*r]+s[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,s[2*r+1]=s[2*i+1]=n,t.heap[1]=n++,G(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<_;r++)p<(s=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(s=p,m++),h[2*i+1]=s,u<i||(t.bl_count[s]++,a=0,c<=i&&(a=d[i-c]),o=h[2*i],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)u<(n=t.heap[--r])||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),i--)}}(t,e),Z(s,u,t.bl_count)}function X(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*b]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*y]++,s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function V(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<u)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(L(t,n,t.bl_tree),o--),L(t,b,t.bl_tree),P(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),P(t,o-3,3)):(L(t,y,t.bl_tree),P(t,o-11,7));s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}i(T);var q=!1;function J(t,e,r,i){P(t,(s<<1)+(i?1:0),3),function(t,e,r,i){M(t),i&&(U(t,r),U(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){q||(function(){var t,e,r,i,n,s=new Array(g+1);for(i=r=0;i<a-1;i++)for(I[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(A[r-1]=i,i=n=0;i<16;i++)for(T[i]=n,t=0;t<1<<k[i];t++)E[n++]=i;for(n>>=7;i<f;i++)for(T[i]=n<<7,t=0;t<1<<k[i]-7;t++)E[256+n++]=i;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)z[2*t+1]=8,t++,s[8]++;for(;t<=255;)z[2*t+1]=9,t++,s[9]++;for(;t<=279;)z[2*t+1]=7,t++,s[7]++;for(;t<=287;)z[2*t+1]=8,t++,s[8]++;for(Z(z,l+1,s),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=j(t,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,d,p)}(),q=!0),t.l_desc=new F(t.dyn_ltree,O),t.d_desc=new F(t.dyn_dtree,B),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},r._tr_stored_block=J,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?J(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),K(t,z,C)):(P(t,4+(i?1:0),3),function(t,e,r,i){var n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*S[n]+1],3);V(t,t.dyn_ltree,e-1),V(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&M(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(A[r]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),L(t,m,z),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{\"../utils/common\":41}],53:[function(t,e,r){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){\"use strict\";e.exports=\"function\"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)});","import Konva from 'konva';\r\nimport { initiate3DCanvas, render3D, render2D } from 'src/assets/js/generate3D.js';\r\nexport { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard, getCurrentRenderMode };\r\n\r\nlet apiURL = \"https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle\";\r\nlet distanceMetric = 'euclidean';\r\nlet token;\r\n\r\nlet canvas, canvasCoords;\r\nlet width =  500, height = 500;\r\nlet stage, layer;\r\nlet pointsArray, pieces;\r\nlet sites, siteBoundaries;\r\n\r\nlet colorPalettes = [];\r\nlet selectedPalette;\r\n\r\nlet appendedString;\r\nlet currentRenderMode;\r\nlet hoverOverPoint = false;\r\nlet disableEditMode = false;\r\nlet deletePointButtonClicked = false;\r\nlet piecesJSONObject;\r\n\r\nlet editIcon, deleteIcon;\r\n\r\n///Make an array with desired colors - can be hex values or names\r\nlet defaultPalette = ['plum', 'tomato', 'orange', 'violet', 'gray', 'mediumseagreen', 'lightgray', 'slateblue', 'brown', 'aquamarine', 'antiquewhite', 'red', 'green'];\r\n///Add the array to the page using this function with the array as a first and the desired name as a second parameter\r\naddColorPalette(defaultPalette, \"Default\");\r\n\r\nlet shadesOfRedPalette = ['crimson', 'darkred', 'coral', 'firebrick', 'indianred', 'maroon', 'orangered', 'palevioletred', 'red', 'tomato', 'brown'];\r\naddColorPalette(shadesOfRedPalette, \"Shades Of Red\");\r\n\r\nlet shadesOfGreenPalette = ['teal', 'mediumspringgreen', 'limegreen', 'forestgreen', 'mediumseagreen', 'lawngreen', 'palegreen', 'greenyellow', 'aquamarine'];\r\naddColorPalette(shadesOfGreenPalette, \"Shades of Green\");\r\n\r\nlet shadesOfBluePalette = ['darkblue', 'deepskyblue', 'mediumblue', 'dodgerblue', 'midnightblue', 'royalblue', 'darkslateblue', 'cornflowerblue', 'skyblue', 'powderblue'];\r\naddColorPalette(shadesOfBluePalette, \"Shades of Blue\");\r\n\r\n///Add a color palette to the page and needed functionality\r\nfunction addColorPalette(arrayOfColors, paletteName)\r\n{\r\n\tcolorPalettes.push(arrayOfColors);\r\n}\r\n\r\n///Changes the displayed color palette used on the puzzle and re-renders it\r\nfunction changePuzzleColorPalette(colors)\r\n{\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlayer.removeChildren();\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = colors;\r\n\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\tpieces[i].attrs.stroke = colors[i % colors.length];\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\r\n\t\tif(currentRenderMode == '3D')\r\n\t\t\trender3D(piecesJSONObject, appendedString);\r\n\t\telse\r\n\t\t\tlayer.draw();\r\n\t\t\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t}\r\n}\r\n\r\n///Randomizes the color palette used on the puzzle\r\nfunction randomizePuzzleColorPalette()\r\n{\r\n\tselectedPalette = [];\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlet rgbColor;\r\n\t\tlayer.removeChildren();\r\n\t\tselectedPalette = getRandomColorsArray(pieces.length*2);\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\tpieces[i].attrs.stroke = selectedPalette[i];\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = selectedPalette;\r\n\t\tif(currentRenderMode == '3D')\r\n\t\t\trender3D(piecesJSONObject, appendedString);\r\n\t\telse\r\n\t\t\tlayer.draw();\r\n\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t}\r\n}\r\n\r\nfunction getRandomColorsArray(n)\r\n{\r\n\tlet randomColorArray = [];\r\n\tfor(let i = 0; i < n; i++)\r\n\t{\r\n\t\trandomColorArray.push(getRandomRGB());\r\n\t}\r\n\r\n\treturn randomColorArray;\r\n}\r\n\r\n///Returns a random RGB value\r\nfunction getRandomRGB()\r\n{\r\n\tlet r = Math.floor(Math.random() * 256);\r\n\tlet g = Math.floor(Math.random() * 256);\r\n\tlet b = Math.floor(Math.random() * 256);\r\n\treturn \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n}\r\n\r\n///Initialize data and set functions for buttons\r\nfunction initializeData(append)\r\n{\r\n\tappendedString = append;\r\n\tif(appendedString == undefined)\r\n\t\tappendedString = '';\r\n\r\n\tsites = [];\r\n\tsiteBoundaries = [];\r\n\tpieces = [];\r\n\r\n\tdisableEditMode = false;\r\n\r\n\tselectedPalette = defaultPalette;\r\n\r\n\tcurrentRenderMode = '2D';\r\n\tcanvas = document.getElementById('container'+appendedString);\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'container'+appendedString,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\r\n\tstage.add(layer);\r\n\r\n\tcanvas.addEventListener('mousedown', function(event){\r\n\t\tif(!disableEditMode && !hoverOverPoint)\r\n\t\t{\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tlet x = event.clientX - canvasCoords.x;\r\n\t\t\tlet y = event.clientY - canvasCoords.y;\r\n\r\n\t\t\tlet point = createPoint(x, y);\r\n\r\n\t\t\tlayer.add(point);\r\n\t\t\tlayer.draw();\r\n\t\t\tconsole.log(\"X: \" + x + \" Y: \" + y);\r\n\t\t}\r\n\t});\r\n\r\n\tif(document.getElementById('generatePuzzleButton') != null)\r\n\t\tdocument.getElementById('generatePuzzleButton').addEventListener('mousedown', generatePuzzle);\r\n\r\n\tdocument.getElementById('euclideanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('euclidean');\r\n\t});\r\n\r\n\tdocument.getElementById('manhattanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('manhattan');\r\n\t});\r\n\r\n\tdocument.getElementById('saveButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\tsavePuzzle(appendedString);\r\n\t});\r\n\r\n\tif(document.getElementById('deletePointButton') != null)\r\n\t{\r\n\t\teditIcon = document.getElementById('editPointButtonIcon');\r\n\t\tdeleteIcon = document.getElementById('deletePointButtonIcon');\r\n\t\tif(editIcon != null)\r\n\t\t\teditIcon.remove();\r\n\r\n\t\tdocument.getElementById('deletePointButton').addEventListener('mousedown', function() {\r\n\t\t\tdeletePointButtonClicked = !deletePointButtonClicked;\r\n\t\t\tif(deletePointButtonClicked)\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = true;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(editIcon);\r\n\t\t\t\tthis.innerHTML += 'Edit Mode';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = false;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(deleteIcon);\r\n\t\t\t\tthis.innerHTML += 'Delete Mode';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdocument.getElementById('randomizeColorsButton'+appendedString).addEventListener('mousedown', randomizePuzzleColorPalette);\r\n\r\n\tlet palettes = document.getElementsByClassName('colorPalettes');\r\n\r\n\tfor(let paletteIndex = 0; paletteIndex < palettes.length; paletteIndex++)\r\n\t{\r\n\t\tpalettes[paletteIndex].addEventListener('mousedown', function(){\r\n\t\t\tselectedPalette = colorPalettes[this.getAttribute('paletteid')];\r\n\t\t\tchangePuzzleColorPalette(selectedPalette);\r\n\t\t});\r\n\t}\r\n\r\n\t// document.getElementById('saveAndSubmitButton').addEventListener('mousedown', function() {\r\n\t// \t// let puzzleImage = stage.toDataURL({ pixelRatio: 0.25 });\r\n\t// \t// document.getElementById('testingImg').src = puzzleImage;\r\n\t// \tsavePuzzle(true);\r\n\t// });\r\n\r\n\r\n\tif(document.getElementById('generate3DButton'+appendedString) != null)\r\n\t{\r\n\t\tinitiate3DCanvas(height, width);\r\n\t\tdocument.getElementById('generate3DButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\t\tif(currentRenderMode == '2D')\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('generate3DButton'+appendedString).innerHTML = 'Generate 2D';\r\n\t\t\t\trender3D(JSON.parse(piecesJSONObject), appendedString);\r\n\t\t\t\tcurrentRenderMode = '3D';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('generate3DButton'+appendedString).innerHTML = 'Generate 3D';\r\n\t\t\t\trender2D(appendedString);\r\n\t\t\t\tcurrentRenderMode = '2D';\r\n\t\t\t\tstage = new Konva.Stage({\r\n\t\t\t\t\tcontainer: 'container'+appendedString,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t});\r\n\t\t\t\tstage.add(layer);\r\n\t\t\t\tlayer.draw();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n///Create a post ajax request and send it to the API in order to save the user's created puzzle\r\nfunction savePuzzle(appendedString)\r\n{\r\n\ttoken = document.getElementById('tokenLabel').innerHTML;\r\n\r\n\tlet puzzleName = document.getElementById('puzzleNameInputBox'+appendedString).value;\r\n\tlet puzzleDescription = document.getElementById('puzzleDescriptionInputBox'+appendedString).value;\r\n\r\n\tlet puzzleImage = stage.toDataURL({ pixelRatio: 0.50 });\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tname: puzzleName,\r\n\t\tdescription: puzzleDescription,\r\n\t\tpuzzleObject: piecesJSONObject,\r\n\t\timage: puzzleImage,\r\n\t\tshared: false\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: apiURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t},\r\n\t\terror: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getCurrentRenderMode()\r\n{\r\n\treturn currentRenderMode;\r\n}\r\n\r\n///Set the selected distance metric for the puzzle\r\nfunction setDistanceMetric(metric)\r\n{\r\n\tdistanceMetric = metric;\r\n}\r\n\r\n///Set disableEditMode to true to prevent user from clicking it any further\r\nfunction setDisableEditMode(bool)\r\n{\r\n\tdisableEditMode = bool;\r\n}\r\n\r\n///Set the sites array\r\nfunction setSites(tempSites)\r\n{\r\n\tsites = tempSites;\r\n}\r\n\r\n///Clear the board\r\nfunction clearBoard()\r\n{\r\n\tpiecesJSONObject = {\r\n\t\t'pieces' : [],\r\n\t\t'colors' : [],\r\n\t\t'depths' : []\r\n\t};\r\n\r\n\tpieces = [];\r\n\tlayer.destroyChildren();\r\n}\r\n\r\n///Create a visual representation of where the user clicks\r\nfunction createPoint(x, y)\r\n{\r\n\tlet point = new Konva.Ring({\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tinnerRadius: 3,\r\n        outerRadius: 15,\r\n\t\tstroke: 'black',\r\n\t\tfill: '#7C593A',\r\n\t\tstrokeWidth: 1,\r\n\t});\r\n\r\n\tpoint.draggable(true);\r\n\r\n\tpoint.on('mouseover', function (event){\r\n\t\tdocument.onmousemove = function(event) {\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tpoint.x(event.clientX - canvasCoords.x);\r\n\t\t\tpoint.y(event.clientY - canvasCoords.y);\r\n\t\t};\r\n\r\n\t\thoverOverPoint = true;\r\n\t\tdocument.body.style.cursor = 'pointer';\r\n\t});\r\n\r\n\tpoint.on('mouseout', function(event) {\r\n\t\tdocument.onmousemove = null;\r\n\t\thoverOverPoint = false;\r\n\t\tdocument.body.style.cursor = 'default';\r\n\t});\r\n\r\n\tpoint.on('mousedown', function(event) {\r\n\t\t// console.log('clicked!');\r\n\t\tif(deletePointButtonClicked)\r\n\t\t{\r\n\t\t\tdocument.onmousemove = null;\r\n\t\t\thoverOverPoint = false;\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\tpoint.destroy();\r\n\t\t\tlayer.draw();\r\n\t\t}\r\n\t});\r\n\r\n\treturn point;\r\n}\r\n\r\n///Calls the necessary functions to generate puzzle's vertiecs as well as the visual representation\r\nfunction generatePuzzle()\r\n{\r\n\tpointsArray = layer.getChildren(function(node) {\r\n\t\treturn node.getClassName() === 'Ring';\r\n\t});\r\n\r\n\tsites = [];\r\n\tfor (let i = pointsArray.length - 1; i >= 0; i--) {\r\n\t\tsites.push({\r\n\t\t\tx: pointsArray[i].attrs.x,\r\n\t\t\ty: pointsArray[i].attrs.y,\r\n\t\t});\r\n\t}\r\n\r\n\tclearBoard();\r\n\r\n\t///This makes sure that the generate button will only generate once\r\n\tdisableEditMode = true;\r\n\r\n\tgenerateSiteBoundaries();\r\n\tcreatePieces();\r\n}\r\n\r\n///Creates the puzzle pieces from the siteBoundaries for each site(position selected by the user)\r\nfunction createPieces()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\tlet trimmedPoints = trimPoints(siteBoundaries[i]);\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: trimmedPoints,\r\n\t\t\tstroke: selectedPalette[i % selectedPalette.length],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t});\r\n\r\n\t\tpiece.on('mousedown', function() {\r\n\t\t\tlet paintBrushColor = document.getElementById('paintBrushColorInput'+appendedString).value;\r\n\t\t\tthis.stroke(paintBrushColor);\r\n\t\t\tselectedPalette[i] = paintBrushColor;\r\n\t\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\t\tpiecesJSONObject.colors = selectedPalette;\r\n\t\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t\t\tlayer.draw();\r\n\t\t});\r\n\r\n\t\tpieces.push(piece);\r\n\t\tpiecesJSONObject.pieces.push(trimmedPoints);\r\n\t\tpiecesJSONObject.depths.push(Math.floor(Math.random() * 8) + 1);\r\n\t\tlayer.add(piece);\r\n\t}\r\n\r\n\tpiecesJSONObject.colors = selectedPalette;\r\n\tlayer.draw();\r\n\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\treturn piecesJSONObject;\r\n\t// console.log(piecesJSONObject);\r\n}\r\n\r\n///Shortens the array of vertices for each puzzle piece\r\nfunction trimPoints(pointArray)\r\n{\r\n\tlet trimmedPoints = [];\r\n\tlet lastPointCol = -1;\r\n\tlet firstPointCol = pointArray[0];\r\n\tlet currentRow = pointArray[1];\r\n\tlet crissCross = 1;\r\n\r\n\tfor(let index = 0; index < pointArray.length; index+=2)\r\n\t{\r\n\t\tif(currentRow != pointArray[index+1])\r\n\t\t{\r\n\t\t\tif(crissCross == 1)\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\tcrissCross = -1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\tcrissCross - 1;\r\n\t\t\t}\r\n\r\n\t\t\tfirstPointCol = pointArray[index];\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t\tcurrentRow = pointArray[index+1];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t}\r\n\t}\r\n\r\n\treturn trimmedPoints;\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction generateSiteBoundaries()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t\tsiteBoundaries[i] = [];\r\n\r\n\tfor(let row = 0; row < height; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < width; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(col);\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(row);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n///Determines which site is closest to a pixel position\r\nfunction equidistantPointsPresent(distances)\r\n{\r\n\tlet returnArray = [];\r\n\tlet minimumDistance = Math.min(...distances);\r\n\r\n\t// if(distanceMetric === 'euclidean')\r\n\t\t// minimumDistance = minimumDistance + '';\r\n\r\n\tlet index = 0, counter = 0;\r\n\r\n\twhile(index != -1)\r\n\t{\r\n\t\tindex = distances.indexOf(minimumDistance);\r\n\t\tif(index != -1)\r\n\t\t{\r\n\t\t\treturnArray.push(index+counter);\r\n\t\t\tdistances.splice(index, 1);\r\n\t\t\tcounter++;\r\n\t\t}\r\n\t}\r\n\r\n\treturn returnArray;\r\n}\r\n\r\n///Calculates the distances from each site to pixel in position (xOfPoint, yOfPoint) and returns an array\r\nfunction calculateDistancesFromSitesToPoint(xOfPoint, yOfPoint, sitePoints)\r\n{\r\n\tlet result = [];\r\n\tfor(let i = 0; i < sitePoints.length; i++)\r\n\t\tresult.push(calculateDistance(xOfPoint, yOfPoint, sitePoints[i].x, sitePoints[i].y));\r\n\r\n\treturn result;\r\n}\r\n\r\n///Calculates the distance from point1 to point2 using the selected distance metrix\r\nfunction calculateDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tif(distanceMetric === 'euclidean')\r\n\t\treturn calculateEuclideanDistance(point1X, point1Y, point2X, point2Y);\r\n\telse if(distanceMetric === 'manhattan')\r\n\t\treturn calculateManhattanDistance(point1X, point1Y, point2X, point2Y);\r\n}\r\n\r\n///Calculates and returns the Euclidean distance\r\nfunction calculateEuclideanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet result = Math.pow( Math.pow( point1X - point2X, 2 ) + Math.pow( point1Y - point2Y, 2 ), 0.5 );\r\n\treturn result;\r\n}\r\n\r\n///Calculates and returns the Manhattan distance\r\nfunction calculateManhattanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet resultX = point1X - point2X;\r\n\tif(resultX < 0)\r\n\t\tresultX *= -1;\r\n\tlet resultY = point1Y - point2Y;\r\n\tif(resultY < 0)\r\n\t\tresultY *= -1;\r\n\tlet result = resultX + resultY;\r\n\treturn result;\r\n}\r\n","import Konva from 'konva';\r\nimport JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { initializeDataSolve, getPieceInCorrectPositionArray };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet saveSolveAttemptURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/newSolveAttempt';\r\nlet piecesJSONObject, pieces, colors, base64Image;\r\nlet correctPositions, pieceInCorrectPosition, correctOrientation;\r\nlet defaultPalette = ['Plum', 'Tomato', 'Orange', 'Violet', 'Gray', 'MediumSeaGreen', 'LightGray', 'SlateBlue', 'Brown', 'Aquamarine', 'AntiqueWhite', 'Red', 'Green'];\r\nlet canvas, stage, layer, outline, board, puzzleID;\r\nlet width = 1000, height = 500;\r\nlet startTime, puzzleSolved, selectedDifficulty, rotationEnabled;\r\nlet solvedDiv;\r\n// window.onload = function(){\r\n// \tinitializeDataSolve();\r\n// }\r\n\r\nfunction initializeDataSolve()\r\n{\r\n\r\n\tsolvedDiv = document.getElementById('solvedDiv');\r\n\tsolvedDiv.remove();\r\n\tcorrectPositions = [];\r\n\tpieceInCorrectPosition = [];\r\n\tcorrectOrientation = [];\r\n\tpuzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tpuzzleSolved = false;\r\n\tgetPuzzleData(puzzleID);\r\n\r\n\tcanvas = document.getElementById('solverContainer');\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'solverContainer',\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t});\r\n\r\n\tboard = new Konva.Rect({\r\n\t\tx: (width/4),\r\n\t\ty: 0,\r\n\t\twidth: width/2,\r\n\t\theight: height,\r\n\t\tstroke: 'black',\r\n\t\tfill: 'white',\r\n\t\tstrokeWidth: 2\r\n\t});\r\n\r\n\toutline = new Konva.Rect({\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tstroke: 'grey',\r\n\t\tfill: '#fff',\r\n\t\tstrokeWidth: 1\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\tstage.add(layer);\r\n\tlayer.add(outline);\r\n\r\n\tdocument.getElementById('closeSolverDialogButton').addEventListener('mousedown', function(){\r\n\t\tif(!puzzleSolved)\r\n\t\t\tsaveSolveAttempt(false, puzzleID, startTime);\r\n\t});\r\n\t\r\n\tlet numHints = parseInt(localStorage.getItem('numHints'));\r\n\trotationEnabled = true;\r\n\r\n\tif(numHints == 0)\r\n\t{\r\n\t\tselectedDifficulty = 'expert';\r\n\t}\r\n\telse if(numHints == 3)\r\n\t{\r\n\t\tselectedDifficulty = 'intermediate';\r\n\t}\r\n\telse\r\n\t{\r\n\t\trotationEnabled = false;\r\n\t\tselectedDifficulty = 'novice';\r\n\t}\r\n\tconsole.log(selectedDifficulty);\r\n}\r\n\r\nfunction getPieceInCorrectPositionArray()\r\n{\r\n\treturn pieceInCorrectPosition;\r\n}\r\n\r\nfunction saveSolveAttempt(solved, solvePuzzleID, solveStartTime)\r\n{\r\n\tlet token = document.getElementById('tokenLabel').innerHTML;\r\n\tlet timeTaken = performance.now();\r\n\ttimeTaken = (timeTaken - solveStartTime).toFixed(0);\r\n\ttimeTaken = Math.floor(timeTaken / 1000);\r\n\t\r\n\tlet gainedExp = 0;\r\n\tif(solved && selectedDifficulty == 'expert')\r\n\t\tgainedExp = 50;\r\n\telse if(solved && selectedDifficulty == 'intermediate')\r\n\t\tgainedExp = 30;\r\n\telse if(solved && selectedDifficulty == 'novice')\r\n\t\tgainedExp = 10;\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tpuzzleID: solvePuzzleID,\r\n\t\tattemptDuration: timeTaken,\r\n\t\tsolved: solved,\r\n\t\txp: gainedExp\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: saveSolveAttemptURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status){\r\n\t\t\tconsole.log('success!');\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\t\t\tcolors = piecesJSONObject.colors;\r\n\t\t\tif(colors === undefined)\r\n\t\t\t\tcolors = defaultPalette;\r\n\t\t\tgeneratePieces();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generatePieces()\r\n{\r\n\tlet generalTransformer = new Konva.Transformer({\r\n\t\tcenteredScaling: true,\r\n        rotationSnaps: [0, 90, 180, 270],\r\n        rotationSnapTolerance: 45,\r\n        resizeEnabled: false,\r\n        borderEnabled: false,\r\n        anchorStroke: '',\r\n        anchorFill: '',\r\n        rotateAnchorOffset: -20,\r\n\t});\r\n\r\n\tlayer.add(generalTransformer);\r\n\t\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tlet selectedPiece = pieces[pieceIndex];\r\n\t\tlet offsetX = getRandomOffsetX(selectedPiece, 0);\r\n\t\t// console.log(offsetX);\r\n\t\tlet offsetY = getRandomOffset(getMin(selectedPiece, 'y'), ( height/2 ));\r\n\t\tlet minY = getMin(selectedPiece, 'y');\r\n\r\n\t\tcorrectPositions.push({x: selectedPiece[0], y: selectedPiece[1]});\r\n\t\tpieceInCorrectPosition.push(false);\r\n\r\n\t\tfor(let i = 0; i < selectedPiece.length; i+=2)\r\n\t\t{\r\n\t\t\tif( (pieceIndex+1) % 2 == 0)\r\n\t\t\t\tselectedPiece[i] += 800;\r\n\t\t\tselectedPiece[i] -= offsetX;\r\n\t\t\t// selectedPiece[i+1] += minY - ((pieceIndex % 5) * 100);\r\n\t\t}\r\n\r\n\t\tlet group = new Konva.Group();\r\n\r\n\t\tlet hitBox = new Konva.Rect({\r\n\t\t\tx: selectedPiece[0],\r\n\t\t\ty: selectedPiece[1],\r\n\t\t\twidth: 5,\r\n\t\t\theight: 5\r\n\t\t});\r\n\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: selectedPiece,\r\n\t\t\tstroke: colors[pieceIndex % colors.length],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tperfectDrawEnabled: false,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t// this.scale({x: 1, y: 1});\r\n\t\t\tgroup.moveToTop();\r\n\t\t\tlayer.draw();\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t// this.scale({x: 0.5, y: 0.5});\r\n\t\t\t// layer.draw();\r\n\t\t});\r\n\r\n\t\tgroup.on('dblclick', function() {\r\n\t\t\t// piece.rotate(90);\r\n\t\t\tif(rotationEnabled && pieceInCorrectPosition[pieceIndex] == false)\r\n\t\t\t{\r\n\t\t\t\tgeneralTransformer.nodes([piece]);\r\n\t\t\t\tlet attributes = generalTransformer._getNodeRect();\r\n\t\t\t\tvar shape = rotateAroundCenter(attributes, 1.5707963267948966);\r\n\r\n\t\t\t\tif(Math.floor(shape.rotation) == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t\t\t\tconsole.log((shape.rotation));\r\n\t\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\t// piece.on('transformend', function() {\r\n\t\t// \tconsole.log(generalTransformer._getNodeRect());\r\n\t\t// });\r\n\r\n\t\tgroup.on('dragend', function(){\r\n\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t});\r\n\r\n\t\tgroup.add(piece);\r\n\t\tgroup.add(hitBox);\r\n\t\tgroup.draggable(true);\r\n\t\tlayer.add(group);\r\n\r\n\t\tif(rotationEnabled)\r\n\t\t{\r\n\t\t\t//randomly rotate piece\r\n\t\t\tgroup.add(generalTransformer);\r\n\t\t\tgeneralTransformer.nodes([piece]);\r\n\t\t\tvar attributes = generalTransformer._getNodeRect();\r\n\t\t\tvar shape = rotateAroundCenter(attributes, getRandomRotation());\r\n\t\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t\t\t\r\n\t\t\tif(shape.rotation == 0)\r\n\t\t\t{\r\n\t\t\t\tconsole.log('correct orientation');\r\n\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlayer.add(board);\r\n\tlayer.draw();\r\n\tstartTime = performance.now();\r\n}\r\n\r\nfunction checkPositionAndSnapIntoPlace(group, pieceIndex)\r\n{\r\n\tlet hitBox = group.getChildren()[1];\r\n\tlet hitBoxCoordinates = hitBox.absolutePosition();\r\n\thitBoxCoordinates.x -= 250;\r\n\r\n\tif(checkPosition(hitBoxCoordinates, correctPositions[pieceIndex]) && correctOrientation[pieceIndex])\r\n\t{\r\n\t\tsnapPieceIntoPlace(hitBoxCoordinates, correctPositions[pieceIndex], group);\r\n\t\tgroup.draggable(false);\r\n\t\tconsole.log('nailed it!!');\r\n\t\tpieceInCorrectPosition[pieceIndex] = true;\r\n\t\tcheckIfPuzzleSolved();\r\n\t}\r\n\telse\r\n\t{\r\n\t\tconsole.log('you are off bud!');\r\n\t\tconsole.log('The correct x: ' + correctPositions[pieceIndex].x + ' - The correct y: ' + correctPositions[pieceIndex].y);\r\n\t\tconsole.log('The current x: ' + hitBoxCoordinates.x + ' - The current y: ' + hitBoxCoordinates.y);\r\n\t\tpieceInCorrectPosition[pieceIndex] = false;\r\n\t}\r\n}\r\n\r\nfunction getRandomRotation()\r\n{\r\n\tlet choice = Math.floor(Math.random() * 4);\r\n\r\n\tif(choice == 0)\r\n\t{\r\n\t\t//no change to rotation\r\n\t\treturn 0;\r\n\t}\r\n\telse if(choice == 1)\r\n\t{\r\n\t\t//rotate 90 degrees\r\n\t\treturn 1.5707963267948966;\r\n\t}\r\n\telse if(choice == 2)\r\n\t{\r\n\t\t//rotate 180 degrees\r\n\t\treturn 3.141592653589793;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//rotate 270 degrees\r\n\t\treturn 4.71238898038469;\r\n\t}\r\n}\r\n\r\nfunction getMax(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet max = 0;\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] > max)\r\n\t\t\tmax = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn max;\r\n}\r\n\r\nfunction getMin(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet min = pointsArray[step];\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] < min)\r\n\t\t\tmin = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn min;\r\n}\r\n\r\nfunction getRandomOffset(lowerBound, upperBound)\r\n{\r\n\tlet returnValue = 0;\r\n\t// while( returnValue <= lowerBound )\r\n\t{\r\n\t\treturnValue = Math.floor((Math.random() * upperBound) + 1);\r\n\t}\r\n\r\n\treturn returnValue;\r\n}\r\n\r\nfunction getRandomOffsetX(pixelArray, min)\r\n{\r\n\tlet minX = getMin(pixelArray, 'x');\r\n\tlet maxX = getMax(pixelArray, 'x');\r\n\r\n\treturn minX;\r\n\r\n}\r\n\r\nfunction checkPosition(coords1, coords2)\r\n{\r\n\tlet xDifference = coords1.x - coords2.x;\r\n\tlet yDifference = coords1.y - coords2.y;\r\n\tif(xDifference < 0)\r\n\t\txDifference *= -1;\r\n\tif(yDifference < 0)\r\n\t\tyDifference *= -1;\r\n\r\n\tif(xDifference <= 15 && yDifference <= 15)\r\n\t\treturn true;\r\n\telse\r\n\t\treturn false;\r\n}\r\n\r\nfunction checkIfPuzzleSolved()\r\n{\r\n\tfor(let pieceIndex = 0; pieceIndex < pieceInCorrectPosition.length; pieceIndex++)\r\n\t{\r\n\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tsetTimeout(function() {\r\n\t\tdocument.getElementById('solverDialogDiv').appendChild(solvedDiv);\r\n\t\tsolvedDiv.style.display = \"block\";\r\n\r\n\t\t// Get the <span> element that closes the modal\r\n\t\tvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n\t\t// When the user clicks on <span> (x), close the modal\r\n\t\tspan.onclick = function() {\r\n\t\t\tsolvedDiv.style.display = \"none\";\r\n\t\t}\r\n\t}, 500);\r\n\r\n\t// alert('Puzzle Solved!');\r\n\tpuzzleSolved = true;\r\n\tsaveSolveAttempt(puzzleSolved, puzzleID, startTime);\r\n}\r\n\r\nfunction snapPieceIntoPlace(currentCoords, targetCoords, piece)\r\n{\r\n\tlet xDifference = currentCoords.x - targetCoords.x;\r\n\tlet yDifference = currentCoords.y - targetCoords.y;\r\n\tpiece.x(piece.x() - xDifference);\r\n\tpiece.y(piece.y() - yDifference);\r\n\tlayer.draw();\r\n}\r\n\r\nfunction rotateAroundPoint(shape, angleRad, point) {\r\n  var x = point.x +\r\n      (shape.x - point.x) * Math.cos(angleRad) -\r\n      (shape.y - point.y) * Math.sin(angleRad);\r\n  var y = point.y +\r\n      (shape.x - point.x) * Math.sin(angleRad) +\r\n      (shape.y - point.y) * Math.cos(angleRad);\r\n  return __assign(__assign({}, shape), { rotation: shape.rotation + angleRad, x: x,\r\n      y: y });\r\n}\r\nfunction rotateAroundCenter(shape, deltaRad) {\r\n  var center = getCenter(shape);\r\n  return rotateAroundPoint(shape, deltaRad, center);\r\n}\r\n\r\nvar __assign = function() {\r\n  __assign = Object.assign || function __assign(t) {\r\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n      }\r\n      return t;\r\n  };\r\n  return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction getCenter(shape) {\r\n  return {\r\n      x: shape.x +\r\n          (shape.width / 2) * Math.cos(shape.rotation) +\r\n          (shape.height / 2) * Math.sin(-shape.rotation),\r\n      y: shape.y +\r\n          (shape.height / 2) * Math.cos(shape.rotation) +\r\n          (shape.width / 2) * Math.sin(shape.rotation),\r\n  };\r\n}\r\n","// Polyfills\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\nif ( Number.isInteger === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n\r\n\tNumber.isInteger = function ( value ) {\r\n\r\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( 'name' in Function.prototype === false ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\tObject.assign = function ( target ) {\r\n\r\n\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n\t\t}\r\n\r\n\t\tconst output = Object( target );\r\n\r\n\t\tfor ( let index = 1; index < arguments.length; index ++ ) {\r\n\r\n\t\t\tconst source = arguments[ index ];\r\n\r\n\t\t\tif ( source !== undefined && source !== null ) {\r\n\r\n\t\t\t\tfor ( const nextKey in source ) {\r\n\r\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst REVISION = '119';\r\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\r\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\r\nconst CullFaceNone = 0;\r\nconst CullFaceBack = 1;\r\nconst CullFaceFront = 2;\r\nconst CullFaceFrontBack = 3;\r\nconst BasicShadowMap = 0;\r\nconst PCFShadowMap = 1;\r\nconst PCFSoftShadowMap = 2;\r\nconst VSMShadowMap = 3;\r\nconst FrontSide = 0;\r\nconst BackSide = 1;\r\nconst DoubleSide = 2;\r\nconst FlatShading = 1;\r\nconst SmoothShading = 2;\r\nconst NoBlending = 0;\r\nconst NormalBlending = 1;\r\nconst AdditiveBlending = 2;\r\nconst SubtractiveBlending = 3;\r\nconst MultiplyBlending = 4;\r\nconst CustomBlending = 5;\r\nconst AddEquation = 100;\r\nconst SubtractEquation = 101;\r\nconst ReverseSubtractEquation = 102;\r\nconst MinEquation = 103;\r\nconst MaxEquation = 104;\r\nconst ZeroFactor = 200;\r\nconst OneFactor = 201;\r\nconst SrcColorFactor = 202;\r\nconst OneMinusSrcColorFactor = 203;\r\nconst SrcAlphaFactor = 204;\r\nconst OneMinusSrcAlphaFactor = 205;\r\nconst DstAlphaFactor = 206;\r\nconst OneMinusDstAlphaFactor = 207;\r\nconst DstColorFactor = 208;\r\nconst OneMinusDstColorFactor = 209;\r\nconst SrcAlphaSaturateFactor = 210;\r\nconst NeverDepth = 0;\r\nconst AlwaysDepth = 1;\r\nconst LessDepth = 2;\r\nconst LessEqualDepth = 3;\r\nconst EqualDepth = 4;\r\nconst GreaterEqualDepth = 5;\r\nconst GreaterDepth = 6;\r\nconst NotEqualDepth = 7;\r\nconst MultiplyOperation = 0;\r\nconst MixOperation = 1;\r\nconst AddOperation = 2;\r\nconst NoToneMapping = 0;\r\nconst LinearToneMapping = 1;\r\nconst ReinhardToneMapping = 2;\r\nconst CineonToneMapping = 3;\r\nconst ACESFilmicToneMapping = 4;\r\nconst CustomToneMapping = 5;\r\n\r\nconst UVMapping = 300;\r\nconst CubeReflectionMapping = 301;\r\nconst CubeRefractionMapping = 302;\r\nconst EquirectangularReflectionMapping = 303;\r\nconst EquirectangularRefractionMapping = 304;\r\nconst CubeUVReflectionMapping = 306;\r\nconst CubeUVRefractionMapping = 307;\r\nconst RepeatWrapping = 1000;\r\nconst ClampToEdgeWrapping = 1001;\r\nconst MirroredRepeatWrapping = 1002;\r\nconst NearestFilter = 1003;\r\nconst NearestMipmapNearestFilter = 1004;\r\nconst NearestMipMapNearestFilter = 1004;\r\nconst NearestMipmapLinearFilter = 1005;\r\nconst NearestMipMapLinearFilter = 1005;\r\nconst LinearFilter = 1006;\r\nconst LinearMipmapNearestFilter = 1007;\r\nconst LinearMipMapNearestFilter = 1007;\r\nconst LinearMipmapLinearFilter = 1008;\r\nconst LinearMipMapLinearFilter = 1008;\r\nconst UnsignedByteType = 1009;\r\nconst ByteType = 1010;\r\nconst ShortType = 1011;\r\nconst UnsignedShortType = 1012;\r\nconst IntType = 1013;\r\nconst UnsignedIntType = 1014;\r\nconst FloatType = 1015;\r\nconst HalfFloatType = 1016;\r\nconst UnsignedShort4444Type = 1017;\r\nconst UnsignedShort5551Type = 1018;\r\nconst UnsignedShort565Type = 1019;\r\nconst UnsignedInt248Type = 1020;\r\nconst AlphaFormat = 1021;\r\nconst RGBFormat = 1022;\r\nconst RGBAFormat = 1023;\r\nconst LuminanceFormat = 1024;\r\nconst LuminanceAlphaFormat = 1025;\r\nconst RGBEFormat = RGBAFormat;\r\nconst DepthFormat = 1026;\r\nconst DepthStencilFormat = 1027;\r\nconst RedFormat = 1028;\r\nconst RedIntegerFormat = 1029;\r\nconst RGFormat = 1030;\r\nconst RGIntegerFormat = 1031;\r\nconst RGBIntegerFormat = 1032;\r\nconst RGBAIntegerFormat = 1033;\r\n\r\nconst RGB_S3TC_DXT1_Format = 33776;\r\nconst RGBA_S3TC_DXT1_Format = 33777;\r\nconst RGBA_S3TC_DXT3_Format = 33778;\r\nconst RGBA_S3TC_DXT5_Format = 33779;\r\nconst RGB_PVRTC_4BPPV1_Format = 35840;\r\nconst RGB_PVRTC_2BPPV1_Format = 35841;\r\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\r\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\r\nconst RGB_ETC1_Format = 36196;\r\nconst RGB_ETC2_Format = 37492;\r\nconst RGBA_ETC2_EAC_Format = 37496;\r\nconst RGBA_ASTC_4x4_Format = 37808;\r\nconst RGBA_ASTC_5x4_Format = 37809;\r\nconst RGBA_ASTC_5x5_Format = 37810;\r\nconst RGBA_ASTC_6x5_Format = 37811;\r\nconst RGBA_ASTC_6x6_Format = 37812;\r\nconst RGBA_ASTC_8x5_Format = 37813;\r\nconst RGBA_ASTC_8x6_Format = 37814;\r\nconst RGBA_ASTC_8x8_Format = 37815;\r\nconst RGBA_ASTC_10x5_Format = 37816;\r\nconst RGBA_ASTC_10x6_Format = 37817;\r\nconst RGBA_ASTC_10x8_Format = 37818;\r\nconst RGBA_ASTC_10x10_Format = 37819;\r\nconst RGBA_ASTC_12x10_Format = 37820;\r\nconst RGBA_ASTC_12x12_Format = 37821;\r\nconst RGBA_BPTC_Format = 36492;\r\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\r\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\r\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\r\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\r\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\r\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\r\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\r\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\r\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\r\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\r\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\r\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\r\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\r\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\r\nconst LoopOnce = 2200;\r\nconst LoopRepeat = 2201;\r\nconst LoopPingPong = 2202;\r\nconst InterpolateDiscrete = 2300;\r\nconst InterpolateLinear = 2301;\r\nconst InterpolateSmooth = 2302;\r\nconst ZeroCurvatureEnding = 2400;\r\nconst ZeroSlopeEnding = 2401;\r\nconst WrapAroundEnding = 2402;\r\nconst NormalAnimationBlendMode = 2500;\r\nconst AdditiveAnimationBlendMode = 2501;\r\nconst TrianglesDrawMode = 0;\r\nconst TriangleStripDrawMode = 1;\r\nconst TriangleFanDrawMode = 2;\r\nconst LinearEncoding = 3000;\r\nconst sRGBEncoding = 3001;\r\nconst GammaEncoding = 3007;\r\nconst RGBEEncoding = 3002;\r\nconst LogLuvEncoding = 3003;\r\nconst RGBM7Encoding = 3004;\r\nconst RGBM16Encoding = 3005;\r\nconst RGBDEncoding = 3006;\r\nconst BasicDepthPacking = 3200;\r\nconst RGBADepthPacking = 3201;\r\nconst TangentSpaceNormalMap = 0;\r\nconst ObjectSpaceNormalMap = 1;\r\n\r\nconst ZeroStencilOp = 0;\r\nconst KeepStencilOp = 7680;\r\nconst ReplaceStencilOp = 7681;\r\nconst IncrementStencilOp = 7682;\r\nconst DecrementStencilOp = 7683;\r\nconst IncrementWrapStencilOp = 34055;\r\nconst DecrementWrapStencilOp = 34056;\r\nconst InvertStencilOp = 5386;\r\n\r\nconst NeverStencilFunc = 512;\r\nconst LessStencilFunc = 513;\r\nconst EqualStencilFunc = 514;\r\nconst LessEqualStencilFunc = 515;\r\nconst GreaterStencilFunc = 516;\r\nconst NotEqualStencilFunc = 517;\r\nconst GreaterEqualStencilFunc = 518;\r\nconst AlwaysStencilFunc = 519;\r\n\r\nconst StaticDrawUsage = 35044;\r\nconst DynamicDrawUsage = 35048;\r\nconst StreamDrawUsage = 35040;\r\nconst StaticReadUsage = 35045;\r\nconst DynamicReadUsage = 35049;\r\nconst StreamReadUsage = 35041;\r\nconst StaticCopyUsage = 35046;\r\nconst DynamicCopyUsage = 35050;\r\nconst StreamCopyUsage = 35042;\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nfunction EventDispatcher() {}\r\n\r\nObject.assign( EventDispatcher.prototype, {\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tconst index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\t// Make a copy, in case listeners are removed while iterating.\r\n\t\t\tconst array = listenerArray.slice( 0 );\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _lut = [];\r\n\r\nfor ( let i = 0; i < 256; i ++ ) {\r\n\r\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n}\r\n\r\nlet _seed = 1234567;\r\n\r\nconst MathUtils = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\r\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\r\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\r\n\r\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n\t\treturn uuid.toUpperCase();\r\n\r\n\t},\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n\tlerp: function ( x, y, t ) {\r\n\r\n\t\treturn ( 1 - t ) * x + t * y;\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\r\n\r\n\tseededRandom: function ( s ) {\r\n\r\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\r\n\r\n\t\t// Park-Miller algorithm\r\n\r\n\t\t_seed = _seed * 16807 % 2147483647;\r\n\r\n\t\treturn ( _seed - 1 ) / 2147483646;\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * MathUtils.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * MathUtils.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tceilPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tfloorPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\r\n\r\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\r\n\r\n\t\t// rotations are applied to the axes in the order specified by 'order'\r\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\r\n\t\t// angles are in radians\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c2 = cos( b / 2 );\r\n\t\tconst s2 = sin( b / 2 );\r\n\r\n\t\tconst c13 = cos( ( a + c ) / 2 );\r\n\t\tconst s13 = sin( ( a + c ) / 2 );\r\n\r\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\r\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\r\n\r\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\r\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYX':\r\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZY':\r\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXZ':\r\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZX':\r\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXY':\r\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYZ':\r\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction Vector2( x = 0, y = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector2.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.x = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.y = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tisVector2: true,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tcross: function ( v ) {\r\n\r\n\t\treturn this.x * v.y - this.y * v.x;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tconst x = this.x - center.x;\r\n\t\tconst y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Matrix3() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tisMatrix3: true,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrix3Column( this, 0 );\r\n\t\tyAxis.setFromMatrix3Column( this, 1 );\r\n\t\tzAxis.setFromMatrix3Column( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function ( m ) {\r\n\r\n\t\tconst me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\tconst me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\tte[ 3 ] = t12 * detInv;\r\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\tte[ 6 ] = t13 * detInv;\r\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tlet tmp;\r\n\t\tconst m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tconst m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\t\tconst c = Math.cos( rotation );\r\n\t\tconst s = Math.sin( rotation );\r\n\r\n\t\tthis.set(\r\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t\t0, 0, 1\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tscale: function ( sx, sy ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotate: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta );\r\n\t\tconst s = Math.sin( theta );\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n\t\tte[ 0 ] = c * a11 + s * a21;\r\n\t\tte[ 3 ] = c * a12 + s * a22;\r\n\t\tte[ 6 ] = c * a13 + s * a23;\r\n\r\n\t\tte[ 1 ] = - s * a11 + c * a21;\r\n\t\tte[ 4 ] = - s * a12 + c * a22;\r\n\t\tte[ 7 ] = - s * a13 + c * a23;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( tx, ty ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _canvas;\r\n\r\nconst ImageUtils = {\r\n\r\n\tgetDataURL: function ( image ) {\r\n\r\n\t\tif ( /^data:/i.test( image.src ) ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tlet canvas;\r\n\r\n\t\tif ( image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tcanvas = image;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t\t\t_canvas.width = image.width;\r\n\t\t\t_canvas.height = image.height;\r\n\r\n\t\t\tconst context = _canvas.getContext( '2d' );\r\n\r\n\t\t\tif ( image instanceof ImageData ) {\r\n\r\n\t\t\t\tcontext.putImageData( image, 0, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcanvas = _canvas;\r\n\r\n\t\t}\r\n\r\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nlet textureId = 0;\r\n\r\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : RGBAFormat;\r\n\tthis.internalFormat = null;\r\n\tthis.type = type !== undefined ? type : UnsignedByteType;\r\n\r\n\tthis.offset = new Vector2( 0, 0 );\r\n\tthis.repeat = new Vector2( 1, 1 );\r\n\tthis.center = new Vector2( 0, 0 );\r\n\tthis.rotation = 0;\r\n\r\n\tthis.matrixAutoUpdate = true;\r\n\tthis.matrix = new Matrix3();\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n}\r\n\r\nTexture.DEFAULT_IMAGE = undefined;\r\nTexture.DEFAULT_MAPPING = UVMapping;\r\n\r\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Texture,\r\n\r\n\tisTexture: true,\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.internalFormat = source.internalFormat;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\t\tthis.center.copy( source.center );\r\n\t\tthis.rotation = source.rotation;\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrix.copy( source.matrix );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tconst output = {\r\n\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\tcenter: [ this.center.x, this.center.y ],\r\n\t\t\trotation: this.rotation,\r\n\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tformat: this.format,\r\n\t\t\ttype: this.type,\r\n\t\t\tencoding: this.encoding,\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy,\r\n\r\n\t\t\tflipY: this.flipY,\r\n\r\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\r\n\t\t\tunpackAlignment: this.unpackAlignment\r\n\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tconst image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlet url;\r\n\r\n\t\t\t\tif ( Array.isArray( image ) ) {\r\n\r\n\t\t\t\t\t// process array of images e.g. CubeTexture\r\n\r\n\t\t\t\t\turl = [];\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// process single image\r\n\r\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: url\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! isRootObject ) {\r\n\r\n\t\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== UVMapping ) return uv;\r\n\r\n\t\tuv.applyMatrix3( this.matrix );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn uv;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Vector4( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\tthis.w = w;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector4.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.z = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.w = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tisVector4: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\tthis.x = 1;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = q.x / s;\r\n\t\t\tthis.y = q.y / s;\r\n\t\t\tthis.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tlet angle, x, y, z; // variables for result\r\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tconst xx = ( m11 + 1 ) / 2;\r\n\t\t\tconst yy = ( m22 + 1 ) / 2;\r\n\t\t\tconst zz = ( m33 + 1 ) / 2;\r\n\t\t\tconst xy = ( m12 + m21 ) / 4;\r\n\t\t\tconst xz = ( m13 + m31 ) / 4;\r\n\t\t\tconst yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\t\tthis.w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\t\tthis.w = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nfunction WebGLRenderTarget( width, height, options ) {\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n\tthis.texture.image = {};\r\n\tthis.texture.image.width = width;\r\n\tthis.texture.image.height = height;\r\n\r\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\r\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\r\n\r\n}\r\n\r\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: WebGLRenderTarget,\r\n\r\n\tisWebGLRenderTarget: true,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.texture.image.width = width;\r\n\t\t\tthis.texture.image.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\tthis.depthTexture = source.depthTexture;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\r\n\r\n\tWebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.samples = 4;\r\n\r\n}\r\n\r\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\r\n\r\n\tconstructor: WebGLMultisampleRenderTarget,\r\n\r\n\tisWebGLMultisampleRenderTarget: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\r\n\r\n\t\tthis.samples = source.samples;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Quaternion( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._w = w;\r\n\r\n}\r\n\r\nObject.assign( Quaternion, {\r\n\r\n\tslerp: function ( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tlet s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternionsFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\r\n\r\n\t\tconst x0 = src0[ srcOffset0 ];\r\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\r\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\r\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 ];\r\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\r\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\r\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\r\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\r\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\r\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\r\n\r\n\t\treturn dst;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Quaternion.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tw: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._w = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Quaternion.prototype, {\r\n\r\n\tisQuaternion: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c1 = cos( x / 2 );\r\n\t\tconst c2 = cos( y / 2 );\r\n\t\tconst c3 = cos( z / 2 );\r\n\r\n\t\tconst s1 = sin( x / 2 );\r\n\t\tconst s2 = sin( y / 2 );\r\n\t\tconst s3 = sin( z / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tconst EPS = 0.000001;\r\n\r\n\t\tlet r = vFrom.dot( vTo ) + 1;\r\n\r\n\t\tif ( r < EPS ) {\r\n\r\n\t\t\tr = 0;\r\n\r\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\tthis._x = - vFrom.y;\r\n\t\t\t\tthis._y = vFrom.x;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = - vFrom.z;\r\n\t\t\t\tthis._z = vFrom.y;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\r\n\r\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\r\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\r\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tangleTo: function ( q ) {\r\n\r\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\r\n\r\n\t},\r\n\r\n\trotateTowards: function ( q, step ) {\r\n\r\n\t\tconst angle = this.angleTo( q );\r\n\r\n\t\tif ( angle === 0 ) return this;\r\n\r\n\t\tconst t = Math.min( 1, step / angle );\r\n\r\n\t\tthis.slerp( q, t );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\treturn this.set( 0, 0, 0, 1 );\r\n\r\n\t},\r\n\r\n\tinverse: function () {\r\n\r\n\t\t// quaternion is assumed to have unit length\r\n\r\n\t\treturn this.conjugate();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tlet l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\r\n\r\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\r\n\r\n\t\t\tconst s = 1 - t;\r\n\t\t\tthis._w = s * w + t * this._w;\r\n\t\t\tthis._x = s * x + t * this._x;\r\n\t\t\tthis._y = s * y + t * this._y;\r\n\t\t\tthis._z = s * z + t * this._z;\r\n\r\n\t\t\tthis.normalize();\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\r\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis._x = attribute.getX( index );\r\n\t\tthis._y = attribute.getY( index );\r\n\t\tthis._z = attribute.getZ( index );\r\n\t\tthis._w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nconst _vector = new Vector3();\r\nconst _quaternion = new Quaternion();\r\n\r\nfunction Vector3( x = 0, y = 0, z = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\r\n}\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tisVector3: true,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\r\n\r\n\t},\r\n\r\n\tapplyAxisAngle: function ( axis, angle ) {\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\treturn this.applyMatrix3( m ).normalize();\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tconst ix = qw * x + qy * z - qz * y;\r\n\t\tconst iy = qw * y + qz * x - qx * z;\r\n\t\tconst iz = qw * z + qx * y - qy * x;\r\n\t\tconst iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\r\n\r\n\t},\r\n\r\n\tunproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\t// TODO lengthSquared?\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.crossVectors( this, v );\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tconst ax = a.x, ay = a.y, az = a.z;\r\n\t\tconst bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function ( v ) {\r\n\r\n\t\tconst denominator = v.lengthSq();\r\n\r\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\r\n\r\n\t\tconst scalar = v.dot( this ) / denominator;\r\n\r\n\t\treturn this.copy( v ).multiplyScalar( scalar );\r\n\r\n\t},\r\n\r\n\tprojectOnPlane: function ( planeNormal ) {\r\n\r\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\treturn this.sub( _vector );\r\n\r\n\t},\r\n\r\n\treflect: function ( normal ) {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t},\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\r\n\r\n\t\tif ( denominator === 0 ) return Math.PI / 2;\r\n\r\n\t\tconst theta = this.dot( v ) / denominator;\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function ( s ) {\r\n\r\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\r\n\r\n\t},\r\n\r\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\r\n\r\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\r\n\t\tthis.y = Math.cos( phi ) * radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCylindrical: function ( c ) {\r\n\r\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\r\n\r\n\t},\r\n\r\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\r\n\r\n\t\tthis.x = radius * Math.sin( theta );\r\n\t\tthis.y = y;\r\n\t\tthis.z = radius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 12 ];\r\n\t\tthis.y = e[ 13 ];\r\n\t\tthis.z = e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrix3Column: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 3 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v1 = new Vector3();\r\nconst _m1 = new Matrix4();\r\nconst _zero = new Vector3( 0, 0, 0 );\r\nconst _one = new Vector3( 1, 1, 1 );\r\nconst _x = new Vector3();\r\nconst _y = new Vector3();\r\nconst _z = new Vector3();\r\n\r\nfunction Matrix4() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\tisMatrix4: true,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tconst te = this.elements, me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function ( m ) {\r\n\r\n\t\t// this method does not support reflection matrices\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\r\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\r\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\r\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// bottom row\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// last column\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\treturn this.compose( _zero, q, _one );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( eye, target, up ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\t_z.subVectors( eye, target );\r\n\r\n\t\tif ( _z.lengthSq() === 0 ) {\r\n\r\n\t\t\t// eye and target are in the same position\r\n\r\n\t\t\t_z.z = 1;\r\n\r\n\t\t}\r\n\r\n\t\t_z.normalize();\r\n\t\t_x.crossVectors( up, _z );\r\n\r\n\t\tif ( _x.lengthSq() === 0 ) {\r\n\r\n\t\t\t// up and z are parallel\r\n\r\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\r\n\r\n\t\t\t\t_z.x += 0.0001;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_z.z += 0.0001;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_z.normalize();\r\n\t\t\t_x.crossVectors( up, _z );\r\n\r\n\t\t}\r\n\r\n\t\t_x.normalize();\r\n\t\t_y.crossVectors( _z, _x );\r\n\r\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\r\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\r\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tlet tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPosition: function ( x, y, z ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\tte[ 12 ] = x.x;\r\n\t\t\tte[ 13 ] = x.y;\r\n\t\t\tte[ 14 ] = x.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tte[ 12 ] = x;\r\n\t\t\tte[ 13 ] = y;\r\n\t\t\tte[ 14 ] = z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tconst te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s, c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts, c, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tconst c = Math.cos( angle );\r\n\t\tconst s = Math.sin( angle );\r\n\t\tconst t = 1 - c;\r\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\r\n\t\tconst tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeShear: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, y, z, 0,\r\n\t\t\tx, 1, z, 0,\r\n\t\t\tx, y, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n\t\tte[ 1 ] = ( xy + wz ) * sx;\r\n\t\tte[ 2 ] = ( xz - wy ) * sx;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = ( xy - wz ) * sy;\r\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n\t\tte[ 6 ] = ( yz + wx ) * sy;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = ( xz + wy ) * sz;\r\n\t\tte[ 9 ] = ( yz - wx ) * sz;\r\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = position.x;\r\n\t\tte[ 13 ] = position.y;\r\n\t\tte[ 14 ] = position.z;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\tlet sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\tlet sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t// if determine is negative, we need to invert one scale\r\n\t\tconst det = this.determinant();\r\n\t\tif ( det < 0 ) sx = - sx;\r\n\r\n\t\tposition.x = te[ 12 ];\r\n\t\tposition.y = te[ 13 ];\r\n\t\tposition.z = te[ 14 ];\r\n\r\n\t\t// scale the rotation part\r\n\t\t_m1.copy( this );\r\n\r\n\t\tconst invSX = 1 / sx;\r\n\t\tconst invSY = 1 / sy;\r\n\t\tconst invSZ = 1 / sz;\r\n\r\n\t\t_m1.elements[ 0 ] *= invSX;\r\n\t\t_m1.elements[ 1 ] *= invSX;\r\n\t\t_m1.elements[ 2 ] *= invSX;\r\n\r\n\t\t_m1.elements[ 4 ] *= invSY;\r\n\t\t_m1.elements[ 5 ] *= invSY;\r\n\t\t_m1.elements[ 6 ] *= invSY;\r\n\r\n\t\t_m1.elements[ 8 ] *= invSZ;\r\n\t\t_m1.elements[ 9 ] *= invSZ;\r\n\t\t_m1.elements[ 10 ] *= invSZ;\r\n\r\n\t\tquaternion.setFromRotationMatrix( _m1 );\r\n\r\n\t\tscale.x = sx;\r\n\t\tscale.y = sy;\r\n\t\tscale.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tif ( far === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = 2 * near / ( right - left );\r\n\t\tconst y = 2 * near / ( top - bottom );\r\n\r\n\t\tconst a = ( right + left ) / ( right - left );\r\n\t\tconst b = ( top + bottom ) / ( top - bottom );\r\n\t\tconst c = - ( far + near ) / ( far - near );\r\n\t\tconst d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst w = 1.0 / ( right - left );\r\n\t\tconst h = 1.0 / ( top - bottom );\r\n\t\tconst p = 1.0 / ( far - near );\r\n\r\n\t\tconst x = ( right + left ) * w;\r\n\t\tconst y = ( top + bottom ) * h;\r\n\t\tconst z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\t\tarray[ offset + 9 ] = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _matrix = new Matrix4();\r\nconst _quaternion$1 = new Quaternion();\r\n\r\nfunction Euler( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._order = order;\r\n\r\n}\r\n\r\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nEuler.DefaultOrder = 'XYZ';\r\n\r\nObject.defineProperties( Euler.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\torder: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._order;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._order = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Euler.prototype, {\r\n\r\n\tisEuler: true,\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tconst clamp = MathUtils.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements;\r\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\t_matrix.makeRotationFromQuaternion( q );\r\n\r\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function ( newOrder ) {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\t_quaternion$1.setFromEuler( this );\r\n\r\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\r\n\r\n\t},\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nfunction Layers() {\r\n\r\n\tthis.mask = 1 | 0;\r\n\r\n}\r\n\r\nObject.assign( Layers.prototype, {\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenableAll: function () {\r\n\r\n\t\tthis.mask = 0xffffffff | 0;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\r\n\r\n\t},\r\n\r\n\tdisableAll: function () {\r\n\r\n\t\tthis.mask = 0;\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _object3DId = 0;\r\n\r\nconst _v1$1 = new Vector3();\r\nconst _q1 = new Quaternion();\r\nconst _m1$1 = new Matrix4();\r\nconst _target = new Vector3();\r\n\r\nconst _position = new Vector3();\r\nconst _scale = new Vector3();\r\nconst _quaternion$2 = new Quaternion();\r\n\r\nconst _xAxis = new Vector3( 1, 0, 0 );\r\nconst _yAxis = new Vector3( 0, 1, 0 );\r\nconst _zAxis = new Vector3( 0, 0, 1 );\r\n\r\nconst _addedEvent = { type: 'added' };\r\nconst _removedEvent = { type: 'removed' };\r\n\r\nfunction Object3D() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = Object3D.DefaultUp.clone();\r\n\r\n\tconst position = new Vector3();\r\n\tconst rotation = new Euler();\r\n\tconst quaternion = new Quaternion();\r\n\tconst scale = new Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation._onChange( onRotationChange );\r\n\tquaternion._onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.matrix = new Matrix4();\r\n\tthis.matrixWorld = new Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\r\nObject3D.DefaultMatrixAutoUpdate = true;\r\n\r\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Object3D,\r\n\r\n\tisObject3D: true,\r\n\r\n\tonBeforeRender: function () {},\r\n\tonAfterRender: function () {},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tthis.matrix.premultiply( matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tthis.quaternion.premultiply( q );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.multiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateOnWorldAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in world space\r\n\t\t// axis is assumed to be normalized\r\n\t\t// method assumes no rotated parent\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.premultiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _xAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _yAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _zAxis, angle );\r\n\r\n\t},\r\n\r\n\ttranslateOnAxis: function ( axis, distance ) {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_v1$1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\tthis.position.add( _v1$1.multiplyScalar( distance ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslateX: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _xAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateY: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _yAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateZ: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _zAxis, distance );\r\n\r\n\t},\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( x, y, z ) {\r\n\r\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\t_target.copy( x );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_target.set( x, y, z );\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tif ( this.isCamera || this.isLight ) {\r\n\r\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\r\n\r\n\t\t}\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\r\n\r\n\t\tif ( parent ) {\r\n\r\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\r\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\r\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( object && object.isObject3D ) ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t\tobject.dispatchEvent( _addedEvent );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t\tobject.dispatchEvent( _removedEvent );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tattach: function ( object ) {\r\n\r\n\t\t// adds object as a child of this, while maintaining the object's world transform\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_m1$1.getInverse( this.matrixWorld );\r\n\r\n\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\tobject.parent.updateWorldMatrix( true, false );\r\n\r\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tobject.applyMatrix4( _m1$1 );\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst child = this.children[ i ];\r\n\t\t\tconst object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\r\n\t\t\ttarget = new Quaternion();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldScale: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( updateParents === true && parent !== null ) {\r\n\r\n\t\t\tparent.updateWorldMatrix( true, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.parent === null ) {\r\n\r\n\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tif ( updateChildren === true ) {\r\n\r\n\t\t\tconst children = this.children;\r\n\r\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\t// meta is a string when called from JSON.stringify\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tconst output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {},\r\n\t\t\t\tshapes: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\r\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\r\n\t\tobject.layers = this.layers.mask;\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\r\n\r\n\t\t// object specific properties\r\n\r\n\t\tif ( this.isInstancedMesh ) {\r\n\r\n\t\t\tobject.type = 'InstancedMesh';\r\n\t\t\tobject.count = this.count;\r\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tfunction serialize( library, element ) {\r\n\r\n\t\t\tif ( library[ element.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn element.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\r\n\r\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\r\n\r\n\t\t\tconst parameters = this.geometry.parameters;\r\n\r\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\r\n\r\n\t\t\t\tconst shapes = parameters.shapes;\r\n\r\n\t\t\t\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\t\t\t\tserialize( meta.shapes, shape );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tserialize( meta.shapes, shapes );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( Array.isArray( this.material ) ) {\r\n\r\n\t\t\t\tconst uuids = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.material = uuids;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tconst geometries = extractFromCache( meta.geometries );\r\n\t\t\tconst materials = extractFromCache( meta.materials );\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\t\t\tconst shapes = extractFromCache( meta.shapes );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.rotation.order = source.rotation.order;\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.layers.mask = source.layers.mask;\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tconst child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Scene() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.background = null;\r\n\tthis.environment = null;\r\n\tthis.fog = null;\r\n\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Scene,\r\n\r\n\tisScene: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tif ( source.background !== null ) this.background = source.background.clone();\r\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\r\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\r\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\r\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\r\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _points = [\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3()\r\n];\r\n\r\nconst _vector$1 = new Vector3();\r\n\r\nconst _box = new Box3();\r\n\r\n// triangle centered vertices\r\n\r\nconst _v0 = new Vector3();\r\nconst _v1$2 = new Vector3();\r\nconst _v2 = new Vector3();\r\n\r\n// triangle edge vectors\r\n\r\nconst _f0 = new Vector3();\r\nconst _f1 = new Vector3();\r\nconst _f2 = new Vector3();\r\n\r\nconst _center = new Vector3();\r\nconst _extents = new Vector3();\r\nconst _triangleNormal = new Vector3();\r\nconst _testAxis = new Vector3();\r\n\r\nfunction Box3( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n}\r\n\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tisBox3: true,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\tconst x = array[ i ];\r\n\t\t\tconst y = array[ i + 1 ];\r\n\t\t\tconst z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromBufferAttribute: function ( attribute ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst x = attribute.getX( i );\r\n\t\t\tconst y = attribute.getY( i );\r\n\t\t\tconst z = attribute.getZ( i );\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\treturn this.expandByObject( object );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByObject: function ( object ) {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box.copy( geometry.boundingBox );\r\n\t\t\t_box.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\tthis.union( _box );\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.expandByObject( children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\r\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\r\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\tthis.clampPoint( sphere.center, _vector$1 );\r\n\r\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tlet min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\r\n\r\n\t},\r\n\r\n\tintersectsTriangle: function ( triangle ) {\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// compute box center and extents\r\n\t\tthis.getCenter( _center );\r\n\t\t_extents.subVectors( this.max, _center );\r\n\r\n\t\t// translate triangle to aabb origin\r\n\t\t_v0.subVectors( triangle.a, _center );\r\n\t\t_v1$2.subVectors( triangle.b, _center );\r\n\t\t_v2.subVectors( triangle.c, _center );\r\n\r\n\t\t// compute edge vectors for triangle\r\n\t\t_f0.subVectors( _v1$2, _v0 );\r\n\t\t_f1.subVectors( _v2, _v1$2 );\r\n\t\t_f2.subVectors( _v0, _v2 );\r\n\r\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\r\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\r\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\r\n\t\tlet axes = [\r\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\r\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\r\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\r\n\t\t];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// test 3 face normals from the aabb\r\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// finally testing the face normal of the triangle\r\n\t\t// use already existing triangle edge vectors here\r\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\r\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\r\n\r\n\t\treturn satForAxes( axes, _v0, _v1$2, _v2, _extents );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\r\n\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tgetBoundingSphere: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\r\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\r\n\r\n\t\t}\r\n\r\n\t\tthis.getCenter( target.center );\r\n\r\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n\t\tif ( this.isEmpty() ) this.makeEmpty();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\t// transform of empty box is an empty box.\r\n\t\tif ( this.isEmpty() ) return this;\r\n\r\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\r\n\r\n\t\tthis.setFromPoints( _points );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction satForAxes( axes, v0, v1, v2, extents ) {\r\n\r\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\r\n\r\n\t\t_testAxis.fromArray( axes, i );\r\n\t\t// project the aabb onto the seperating axis\r\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\r\n\t\t// project all 3 vertices of the triangle onto the seperating axis\r\n\t\tconst p0 = v0.dot( _testAxis );\r\n\t\tconst p1 = v1.dot( _testAxis );\r\n\t\tconst p2 = v2.dot( _testAxis );\r\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\r\n\r\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\r\n\t\t\t// the axis is seperating and we can exit\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nconst _box$1 = new Box3();\r\n\r\nfunction Sphere( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : - 1;\r\n\r\n}\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points, optionalCenter ) {\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\r\n\r\n\t\t}\r\n\r\n\t\tlet maxRadiusSq = 0;\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\treturn ( this.radius < 0 );\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.center.set( 0, 0, 0 );\r\n\t\tthis.radius = - 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\ttarget.sub( this.center ).normalize();\r\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\r\n\t\t\ttarget = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\t// Empty sphere produces empty bounding box\r\n\t\t\ttarget.makeEmpty();\r\n\t\t\treturn target;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.set( this.center, this.center );\r\n\t\ttarget.expandByScalar( this.radius );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$2 = new Vector3();\r\nconst _segCenter = new Vector3();\r\nconst _segDir = new Vector3();\r\nconst _diff = new Vector3();\r\n\r\nconst _edge1 = new Vector3();\r\nconst _edge2 = new Vector3();\r\nconst _normal = new Vector3();\r\n\r\nfunction Ray( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\r\n\r\n}\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trecast: function ( t ) {\r\n\r\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( point, this.origin );\r\n\r\n\t\tconst directionDistance = target.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn target.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function ( point ) {\r\n\r\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t// point behind the ray\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t}\r\n\r\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\treturn _vector$2.distanceToSquared( point );\r\n\r\n\t},\r\n\r\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n\t\t// It returns the min distance between the ray and the segment\r\n\t\t// defined by v0 and v1\r\n\t\t// It can also set two optional targets :\r\n\t\t// - The closest point on the ray\r\n\t\t// - The closest point on the segment\r\n\r\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t_diff.copy( this.origin ).sub( _segCenter );\r\n\r\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\tconst a01 = - this.direction.dot( _segDir );\r\n\t\tconst b0 = _diff.dot( this.direction );\r\n\t\tconst b1 = - _diff.dot( _segDir );\r\n\t\tconst c = _diff.lengthSq();\r\n\t\tconst det = Math.abs( 1 - a01 * a01 );\r\n\t\tlet s0, s1, sqrDist, extDet;\r\n\r\n\t\tif ( det > 0 ) {\r\n\r\n\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\textDet = segExtent * det;\r\n\r\n\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\tconst invDet = 1 / det;\r\n\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\r\n\r\n\t\t}\r\n\r\n\t\treturn sqrDist;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function ( sphere, target ) {\r\n\r\n\t\t_vector$2.subVectors( sphere.center, this.origin );\r\n\t\tconst tca = _vector$2.dot( this.direction );\r\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\r\n\t\tconst radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\tconst thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\tconst t0 = tca - thc;\r\n\r\n\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\tconst t1 = tca + thc;\r\n\r\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t// test to see if t0 is behind the ray:\r\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\tif ( t0 < 0 ) return this.at( t1, target );\r\n\r\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\treturn this.at( t0, target );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t : null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, target ) {\r\n\r\n\t\tconst t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, target );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, target ) {\r\n\r\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tconst invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tconst origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n\t\t_edge1.subVectors( b, a );\r\n\t\t_edge2.subVectors( c, a );\r\n\t\t_normal.crossVectors( _edge1, _edge2 );\r\n\r\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\tlet DdN = this.direction.dot( _normal );\r\n\t\tlet sign;\r\n\r\n\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\tsign = 1;\r\n\r\n\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\tsign = - 1;\r\n\t\t\tDdN = - DdN;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t_diff.subVectors( this.origin, a );\r\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\r\n\r\n\t\t// b1 < 0, no intersection\r\n\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\r\n\r\n\t\t// b2 < 0, no intersection\r\n\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// b1+b2 > 1, no intersection\r\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Line intersects triangle, check if ray does.\r\n\t\tconst QdN = - sign * _diff.dot( _normal );\r\n\r\n\t\t// t < 0, no intersection\r\n\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Ray intersects triangle.\r\n\t\treturn this.at( QdN / DdN, target );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.transformDirection( matrix4 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector1 = new Vector3();\r\nconst _vector2 = new Vector3();\r\nconst _normalMatrix = new Matrix3();\r\n\r\nfunction Plane( normal, constant ) {\r\n\r\n\t// normal is assumed to be normalized\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n}\r\n\r\nObject.assign( Plane.prototype, {\r\n\r\n\tisPlane: true,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function ( a, b, c ) {\r\n\r\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\r\n\r\n\t},\r\n\r\n\tintersectLine: function ( line, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst direction = line.delta( _vector1 );\r\n\r\n\t\tconst denominator = this.normal.dot( direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\treturn target.copy( line.start );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t},\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tconst startSign = this.distanceToPoint( line.start );\r\n\t\tconst endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\r\n\r\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\r\n\r\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\tthis.constant = - referencePoint.dot( normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant -= offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v0$1 = new Vector3();\r\nconst _v1$3 = new Vector3();\r\nconst _v2$1 = new Vector3();\r\nconst _v3 = new Vector3();\r\n\r\nconst _vab = new Vector3();\r\nconst _vac = new Vector3();\r\nconst _vbc = new Vector3();\r\nconst _vap = new Vector3();\r\nconst _vbp = new Vector3();\r\nconst _vcp = new Vector3();\r\n\r\nfunction Triangle( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tgetNormal: function ( a, b, c, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( c, b );\r\n\t\t_v0$1.subVectors( a, b );\r\n\t\ttarget.cross( _v0$1 );\r\n\r\n\t\tconst targetLengthSq = target.lengthSq();\r\n\t\tif ( targetLengthSq > 0 ) {\r\n\r\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( 0, 0, 0 );\r\n\r\n\t},\r\n\r\n\t// static/instance method to calculate barycentric coordinates\r\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n\tgetBarycoord: function ( point, a, b, c, target ) {\r\n\r\n\t\t_v0$1.subVectors( c, a );\r\n\t\t_v1$3.subVectors( b, a );\r\n\t\t_v2$1.subVectors( point, a );\r\n\r\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\r\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\r\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\r\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\r\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\r\n\r\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn target.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tconst invDenom = 1 / denom;\r\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn target.set( 1 - u - v, v, u );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point, a, b, c ) {\r\n\r\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\r\n\r\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\r\n\r\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\r\n\r\n\t\ttarget.set( 0, 0 );\r\n\t\ttarget.addScaledVector( uv1, _v3.x );\r\n\t\ttarget.addScaledVector( uv2, _v3.y );\r\n\t\ttarget.addScaledVector( uv3, _v3.z );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( a, b, c, direction ) {\r\n\r\n\t\t_v0$1.subVectors( c, b );\r\n\t\t_v1$3.subVectors( a, b );\r\n\r\n\t\t// strictly front facing\r\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetArea: function () {\r\n\r\n\t\t_v0$1.subVectors( this.c, this.b );\r\n\t\t_v1$3.subVectors( this.a, this.b );\r\n\r\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\r\n\r\n\t},\r\n\r\n\tgetMidpoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tgetNormal: function ( target ) {\r\n\r\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetPlane: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\r\n\t\t\ttarget = new Plane();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tgetBarycoord: function ( point, target ) {\r\n\r\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\r\n\r\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( direction ) {\r\n\r\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsTriangle( this );\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( p, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst a = this.a, b = this.b, c = this.c;\r\n\t\tlet v, w;\r\n\r\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\r\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\r\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\r\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\r\n\t\t// the point lies in with the minimum amount of redundant computation.\r\n\r\n\t\t_vab.subVectors( b, a );\r\n\t\t_vac.subVectors( c, a );\r\n\t\t_vap.subVectors( p, a );\r\n\t\tconst d1 = _vab.dot( _vap );\r\n\t\tconst d2 = _vac.dot( _vap );\r\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\r\n\r\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\r\n\t\t\treturn target.copy( a );\r\n\r\n\t\t}\r\n\r\n\t\t_vbp.subVectors( p, b );\r\n\t\tconst d3 = _vab.dot( _vbp );\r\n\t\tconst d4 = _vac.dot( _vbp );\r\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\r\n\r\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\r\n\t\t\treturn target.copy( b );\r\n\r\n\t\t}\r\n\r\n\t\tconst vc = d1 * d4 - d3 * d2;\r\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\r\n\r\n\t\t\tv = d1 / ( d1 - d3 );\r\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\r\n\r\n\t\t}\r\n\r\n\t\t_vcp.subVectors( p, c );\r\n\t\tconst d5 = _vab.dot( _vcp );\r\n\t\tconst d6 = _vac.dot( _vcp );\r\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\r\n\r\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\r\n\t\t\treturn target.copy( c );\r\n\r\n\t\t}\r\n\r\n\t\tconst vb = d5 * d2 - d1 * d6;\r\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\r\n\r\n\t\t\tw = d2 / ( d2 - d6 );\r\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\r\n\r\n\t\t}\r\n\r\n\t\tconst va = d3 * d6 - d5 * d4;\r\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\r\n\r\n\t\t\t_vbc.subVectors( c, b );\r\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\r\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\r\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\r\n\r\n\t\t}\r\n\r\n\t\t// face region\r\n\t\tconst denom = 1 / ( va + vb + vc );\r\n\t\t// u = va * denom\r\n\t\tv = vb * denom;\r\n\t\tw = vc * denom;\r\n\r\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\nconst _hslA = { h: 0, s: 0, l: 0 };\r\nconst _hslB = { h: 0, s: 0, l: 0 };\r\n\r\nfunction Color( r, g, b ) {\r\n\r\n\tif ( g === undefined && b === undefined ) {\r\n\r\n\t\t// r is THREE.Color, hex or string\r\n\t\treturn this.set( r );\r\n\r\n\t}\r\n\r\n\treturn this.setRGB( r, g, b );\r\n\r\n}\r\n\r\nfunction hue2rgb( p, q, t ) {\r\n\r\n\tif ( t < 0 ) t += 1;\r\n\tif ( t > 1 ) t -= 1;\r\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\tif ( t < 1 / 2 ) return q;\r\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction SRGBToLinear( c ) {\r\n\r\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\r\n\r\n}\r\n\r\nfunction LinearToSRGB( c ) {\r\n\r\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\r\n\r\n}\r\n\r\nObject.assign( Color.prototype, {\r\n\r\n\tisColor: true,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value && value.isColor ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function ( h, s, l ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\th = MathUtils.euclideanModulo( h, 1 );\r\n\t\ts = MathUtils.clamp( s, 0, 1 );\r\n\t\tl = MathUtils.clamp( l, 0, 1 );\r\n\r\n\t\tif ( s === 0 ) {\r\n\r\n\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\tconst q = ( 2 * l ) - p;\r\n\r\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tlet m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tlet color;\r\n\t\t\tconst name = m[ 1 ];\r\n\t\t\tconst components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tconst hex = m[ 1 ];\r\n\t\t\tconst size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\treturn this.setColorName( style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetColorName: function ( style ) {\r\n\r\n\t\t// color keywords\r\n\t\tconst hex = _colorKeywords[ style ];\r\n\r\n\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t// red\r\n\t\t\tthis.setHex( hex );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// unknown color\r\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyGammaToLinear( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyLinearToGamma( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopySRGBToLinear: function ( color ) {\r\n\r\n\t\tthis.r = SRGBToLinear( color.r );\r\n\t\tthis.g = SRGBToLinear( color.g );\r\n\t\tthis.b = SRGBToLinear( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToSRGB: function ( color ) {\r\n\r\n\t\tthis.r = LinearToSRGB( color.r );\r\n\t\tthis.g = LinearToSRGB( color.g );\r\n\t\tthis.b = LinearToSRGB( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertSRGBToLinear: function () {\r\n\r\n\t\tthis.copySRGBToLinear( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToSRGB: function () {\r\n\r\n\t\tthis.copyLinearToSRGB( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( target ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\r\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\r\n\r\n\t\t}\r\n\r\n\t\tconst r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tconst max = Math.max( r, g, b );\r\n\t\tconst min = Math.min( r, g, b );\r\n\r\n\t\tlet hue, saturation;\r\n\t\tconst lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.h = hue;\r\n\t\ttarget.s = saturation;\r\n\t\ttarget.l = lightness;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\r\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\r\n\r\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( color ) {\r\n\r\n\t\tthis.r = Math.max( 0, this.r - color.r );\r\n\t\tthis.g = Math.max( 0, this.g - color.g );\r\n\t\tthis.b = Math.max( 0, this.b - color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpHSL: function ( color, alpha ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\t\tcolor.getHSL( _hslB );\r\n\r\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\r\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\r\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\r\n\r\n\t\tthis.setHSL( h, s, l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis.r = attribute.getX( index );\r\n\t\tthis.g = attribute.getY( index );\r\n\t\tthis.b = attribute.getZ( index );\r\n\r\n\t\tif ( attribute.normalized === true ) {\r\n\r\n\t\t\t// assuming Uint8Array\r\n\r\n\t\t\tthis.r /= 255;\r\n\t\t\tthis.g /= 255;\r\n\t\t\tthis.b /= 255;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn this.getHex();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nColor.NAMES = _colorKeywords;\r\n\r\nfunction Face3( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = ( color && color.isColor ) ? color : new Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n}\r\n\r\nObject.assign( Face3.prototype, {\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet materialId = 0;\r\n\r\nfunction Material() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.blending = NormalBlending;\r\n\tthis.side = FrontSide;\r\n\tthis.flatShading = false;\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blendSrc = SrcAlphaFactor;\r\n\tthis.blendDst = OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.stencilWriteMask = 0xff;\r\n\tthis.stencilFunc = AlwaysStencilFunc;\r\n\tthis.stencilRef = 0;\r\n\tthis.stencilFuncMask = 0xff;\r\n\tthis.stencilFail = KeepStencilOp;\r\n\tthis.stencilZFail = KeepStencilOp;\r\n\tthis.stencilZPass = KeepStencilOp;\r\n\tthis.stencilWrite = false;\r\n\r\n\tthis.clippingPlanes = null;\r\n\tthis.clipIntersection = false;\r\n\tthis.clipShadows = false;\r\n\r\n\tthis.shadowSide = null;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.dithering = false;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.toneMapped = true;\r\n\r\n\tthis.userData = {};\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Material,\r\n\r\n\tisMaterial: true,\r\n\r\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\r\n\r\n\tcustomProgramCacheKey: function () {\r\n\r\n\t\treturn this.onBeforeCompile.toString();\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( const key in values ) {\r\n\r\n\t\t\tconst newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// for backward compatability if shading is set in the constructor\r\n\t\t\tif ( key === 'shading' ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue && currentValue.isColor ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\r\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\r\n\r\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\r\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\r\n\r\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\r\n\r\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\r\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalMapType = this.normalMapType;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap && this.envMap.isTexture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\t\t\tdata.refractionRatio = this.refractionRatio;\r\n\r\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\r\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\r\n\r\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\r\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\r\n\t\tif ( this.vertexColors ) data.vertexColors = true;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\r\n\t\tdata.depthFunc = this.depthFunc;\r\n\t\tdata.depthTest = this.depthTest;\r\n\t\tdata.depthWrite = this.depthWrite;\r\n\r\n\t\tdata.stencilWrite = this.stencilWrite;\r\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\r\n\t\tdata.stencilFunc = this.stencilFunc;\r\n\t\tdata.stencilRef = this.stencilRef;\r\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\r\n\t\tdata.stencilFail = this.stencilFail;\r\n\t\tdata.stencilZFail = this.stencilZFail;\r\n\t\tdata.stencilZPass = this.stencilZPass;\r\n\r\n\t\t// rotation (SpriteMaterial)\r\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\r\n\r\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\r\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\r\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\r\n\r\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\r\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\r\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\r\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\r\n\r\n\t\tif ( this.dithering === true ) data.dithering = true;\r\n\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\r\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\r\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\r\n\t\tif ( this.skinning === true ) data.skinning = true;\r\n\r\n\t\tif ( this.visible === false ) data.visible = false;\r\n\r\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\r\n\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.fog = source.fog;\r\n\r\n\t\tthis.blending = source.blending;\r\n\t\tthis.side = source.side;\r\n\t\tthis.flatShading = source.flatShading;\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\r\n\t\tthis.stencilFunc = source.stencilFunc;\r\n\t\tthis.stencilRef = source.stencilRef;\r\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\r\n\t\tthis.stencilFail = source.stencilFail;\r\n\t\tthis.stencilZFail = source.stencilZFail;\r\n\t\tthis.stencilZPass = source.stencilZPass;\r\n\t\tthis.stencilWrite = source.stencilWrite;\r\n\r\n\t\tconst srcPlanes = source.clippingPlanes;\r\n\t\tlet dstPlanes = null;\r\n\r\n\t\tif ( srcPlanes !== null ) {\r\n\r\n\t\t\tconst n = srcPlanes.length;\r\n\t\t\tdstPlanes = new Array( n );\r\n\r\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.clippingPlanes = dstPlanes;\r\n\t\tthis.clipIntersection = source.clipIntersection;\r\n\t\tthis.clipShadows = source.clipShadows;\r\n\r\n\t\tthis.shadowSide = source.shadowSide;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.dithering = source.dithering;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.toneMapped = source.toneMapped;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Material.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\r\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\r\n\r\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\r\n\r\nMeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _vector$3 = new Vector3();\r\nconst _vector2$1 = new Vector2();\r\n\r\nfunction BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tif ( Array.isArray( array ) ) {\r\n\r\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n\t}\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\r\n\tthis.normalized = normalized === true;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\r\n\tisBufferAttribute: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\t\tthis.count = source.count;\r\n\t\tthis.normalized = source.normalized;\r\n\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tif ( this.itemSize === 2 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector2$1.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.itemSize === 3 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector$3.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyNormalMatrix( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.transformDirection( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn {\r\n\t\t\titemSize: this.itemSize,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tarray: Array.prototype.slice.call( this.array ),\r\n\t\t\tnormalized: this.normalized\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\r\n\r\n\r\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\r\n\r\n\r\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\r\n\r\n\r\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\r\n\r\n\r\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\r\n\r\n\r\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\r\n\r\n\r\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\r\n\r\n\r\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\r\n\r\n\r\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\r\n\r\nfunction DirectGeometry() {\r\n\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nObject.assign( DirectGeometry.prototype, {\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tconst groups = [];\r\n\r\n\t\tlet group, i;\r\n\t\tlet materialIndex = undefined;\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tconst faces = geometry.faces;\r\n\t\tconst vertices = geometry.vertices;\r\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tconst morphTargets = geometry.morphTargets;\r\n\t\tconst morphTargetsLength = morphTargets.length;\r\n\r\n\t\tlet morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = {\r\n\t\t\t\t\tname: morphTargets[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphNormals = geometry.morphNormals;\r\n\t\tconst morphNormalsLength = morphNormals.length;\r\n\r\n\t\tlet morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = {\r\n\t\t\t\t\tname: morphNormals[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tconst skinIndices = geometry.skinIndices;\r\n\t\tconst skinWeights = geometry.skinWeights;\r\n\r\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction arrayMax( array ) {\r\n\r\n\tif ( array.length === 0 ) return - Infinity;\r\n\r\n\tlet max = array[ 0 ];\r\n\r\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\r\n\r\n\t\tif ( array[ i ] > max ) max = array[ i ];\r\n\r\n\t}\r\n\r\n\treturn max;\r\n\r\n}\r\n\r\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\r\n\r\nconst _m1$2 = new Matrix4();\r\nconst _obj = new Object3D();\r\nconst _offset = new Vector3();\r\nconst _box$2 = new Box3();\r\nconst _boxMorphTargets = new Box3();\r\nconst _vector$4 = new Vector3();\r\n\r\nfunction BufferGeometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\tthis.morphTargetsRelative = false;\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: BufferGeometry,\r\n\r\n\tisBufferGeometry: true,\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tif ( Array.isArray( index ) ) {\r\n\r\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.index = index;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tsetAttribute: function ( name, attribute ) {\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeleteAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tposition.applyMatrix4( matrix );\r\n\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst tangent = this.attributes.tangent;\r\n\r\n\t\tif ( tangent !== undefined ) {\r\n\r\n\t\t\ttangent.transformDirection( matrix );\r\n\r\n\t\t\ttangent.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$2.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$2.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$2.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$2.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$2.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj.lookAt( vector );\r\n\r\n\t\t_obj.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset ).negate();\r\n\r\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( object.isPoints || object.isLine ) {\r\n\r\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isMesh ) {\r\n\r\n\t\t\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tconst position = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tlet geometry = object.geometry;\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tlet direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\r\n\r\n\t\t\t\tdirect = undefined;\r\n\t\t\t\tgeometry.elementsNeedUpdate = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( const name in geometry.morphTargets ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\r\n\t\t\t\tattribute.name = morphTarget.name;\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position ) {\r\n\r\n\t\t\t// first, find the center of the bounding sphere\r\n\r\n\t\t\tconst center = this.boundingSphere.center;\r\n\r\n\t\t\t_box$2.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box$2.getCenter( center );\r\n\r\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\r\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\tlet maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\r\n\r\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\r\n\t\t\t\t\t\t\t_vector$4.add( _offset );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconst index = this.index;\r\n\t\tconst positionAttribute = this.getAttribute( 'position' );\r\n\r\n\t\tif ( positionAttribute !== undefined ) {\r\n\r\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\r\n\r\n\t\t\tif ( normalAttribute === undefined ) {\r\n\r\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\r\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tconst vA = index.getX( i + 0 );\r\n\t\t\t\t\tconst vB = index.getX( i + 1 );\r\n\t\t\t\t\tconst vC = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\r\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\r\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\r\n\r\n\t\t\t\t\tnA.add( cb );\r\n\t\t\t\t\tnB.add( cb );\r\n\t\t\t\t\tnC.add( cb );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tnormalAttribute.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) {\r\n\r\n\t\t\toffset = 0;\r\n\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tconst attribute1 = attributes[ key ];\r\n\t\t\tconst attributeArray1 = attribute1.array;\r\n\r\n\t\t\tconst attribute2 = geometry.attributes[ key ];\r\n\t\t\tconst attributeArray2 = attribute2.array;\r\n\r\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\r\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\r\n\r\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tconst normals = this.attributes.normal;\r\n\r\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\r\n\r\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\r\n\r\n\t\t\t_vector$4.normalize();\r\n\r\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tfunction convertBufferAttribute( attribute, indices ) {\r\n\r\n\t\t\tconst array = attribute.array;\r\n\t\t\tconst itemSize = attribute.itemSize;\r\n\t\t\tconst normalized = attribute.normalized;\r\n\r\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tlet index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry2 = new BufferGeometry();\r\n\r\n\t\tconst indices = this.index.array;\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\t// attributes\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\r\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\tgeometry2.setAttribute( name, newAttribute );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = this.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst morphArray = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = morphAttribute[ i ];\r\n\r\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\t\tmorphArray.push( newAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tconst index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\tdata.data.attributes[ key ] = attributeData;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = {};\r\n\t\tlet hasMorphAttributes = false;\r\n\r\n\t\tfor ( const key in this.morphAttributes ) {\r\n\r\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = attributeArray[ i ];\r\n\r\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\t\tarray.push( attributeData );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( array.length > 0 ) {\r\n\r\n\t\t\t\tmorphAttributes[ key ] = array;\r\n\r\n\t\t\t\thasMorphAttributes = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphAttributes ) {\r\n\r\n\t\t\tdata.data.morphAttributes = morphAttributes;\r\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.index = null;\r\n\t\tthis.attributes = {};\r\n\t\tthis.morphAttributes = {};\r\n\t\tthis.groups = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// used for storing cloned, shared data\r\n\r\n\t\tconst data = {};\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// index\r\n\r\n\t\tconst index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// attributes\r\n\r\n\t\tconst attributes = source.attributes;\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = source.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = source.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// draw range\r\n\r\n\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\tthis.drawRange.count = source.drawRange.count;\r\n\r\n\t\t// user data\r\n\r\n\t\tthis.userData = source.userData;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _inverseMatrix = new Matrix4();\r\nconst _ray = new Ray();\r\nconst _sphere = new Sphere();\r\n\r\nconst _vA = new Vector3();\r\nconst _vB = new Vector3();\r\nconst _vC = new Vector3();\r\n\r\nconst _tempA = new Vector3();\r\nconst _tempB = new Vector3();\r\nconst _tempC = new Vector3();\r\n\r\nconst _morphA = new Vector3();\r\nconst _morphB = new Vector3();\r\nconst _morphC = new Vector3();\r\n\r\nconst _uvA = new Vector2();\r\nconst _uvB = new Vector2();\r\nconst _uvC = new Vector2();\r\n\r\nconst _intersectionPoint = new Vector3();\r\nconst _intersectionPointWorld = new Vector3();\r\n\r\nfunction Mesh( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Mesh,\r\n\r\n\tisMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\r\n\r\n\t\t}\r\n\r\n\t\tif ( source.morphTargetDictionary !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\r\n\r\n\t\t}\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst material = this.material;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere.copy( geometry.boundingSphere );\r\n\t\t_sphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix.getInverse( matrixWorld );\r\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t}\r\n\r\n\t\tlet intersection;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\r\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\r\n\t\t\tconst uv = geometry.attributes.uv;\r\n\t\t\tconst uv2 = geometry.attributes.uv2;\r\n\t\t\tconst groups = geometry.groups;\r\n\t\t\tconst drawRange = geometry.drawRange;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t// indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = index.getX( j );\r\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\r\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = index.getX( i );\r\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\r\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\t\t// non-indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = j;\r\n\t\t\t\t\t\t\tconst b = j + 1;\r\n\t\t\t\t\t\t\tconst c = j + 2;\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = i;\r\n\t\t\t\t\t\tconst b = i + 1;\r\n\t\t\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst isMultiMaterial = Array.isArray( material );\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst faces = geometry.faces;\r\n\t\t\tlet uvs;\r\n\r\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = faces[ f ];\r\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\tconst fvA = vertices[ face.a ];\r\n\t\t\t\tconst fvB = vertices[ face.b ];\r\n\t\t\t\tconst fvC = vertices[ face.c ];\r\n\r\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\r\n\r\n\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\r\n\r\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\r\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tlet intersect;\r\n\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\t_intersectionPointWorld.copy( point );\r\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: _intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\r\n\r\n\t_vA.fromBufferAttribute( position, a );\r\n\t_vB.fromBufferAttribute( position, b );\r\n\t_vC.fromBufferAttribute( position, c );\r\n\r\n\tconst morphInfluences = object.morphTargetInfluences;\r\n\r\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\r\n\r\n\t\t_morphA.set( 0, 0, 0 );\r\n\t\t_morphB.set( 0, 0, 0 );\r\n\t\t_morphC.set( 0, 0, 0 );\r\n\r\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst influence = morphInfluences[ i ];\r\n\t\t\tconst morphAttribute = morphPosition[ i ];\r\n\r\n\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\r\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\r\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\r\n\r\n\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_vA.add( _morphA );\r\n\t\t_vB.add( _morphB );\r\n\t\t_vC.add( _morphC );\r\n\r\n\t}\r\n\r\n\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\tobject.boneTransform( a, _vA );\r\n\t\tobject.boneTransform( b, _vB );\r\n\t\tobject.boneTransform( c, _vC );\r\n\r\n\t}\r\n\r\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2 ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\r\n\r\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = new Face3( a, b, c );\r\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\nlet _geometryId = 0; // Geometry uses even numbers as Id\r\nconst _m1$3 = new Matrix4();\r\nconst _obj$1 = new Object3D();\r\nconst _offset$1 = new Vector3();\r\n\r\nfunction Geometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [[]];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Geometry,\r\n\r\n\tisGeometry: true,\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$3.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$3.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$3.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$3.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$3.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj$1.lookAt( vector );\r\n\r\n\t\t_obj$1.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj$1.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tif ( attributes.position === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst position = attributes.position;\r\n\t\tconst normal = attributes.normal;\r\n\t\tconst color = attributes.color;\r\n\t\tconst uv = attributes.uv;\r\n\t\tconst uv2 = attributes.uv2;\r\n\r\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\r\n\r\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\r\n\r\n\t\t\tif ( color !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\r\n\t\t\t\tscope.colors[ a ].clone(),\r\n\t\t\t\tscope.colors[ b ].clone(),\r\n\t\t\t\tscope.colors[ c ].clone()\r\n\t\t\t];\r\n\r\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\r\n\t\t\t];\r\n\r\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uv !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = geometry.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\r\n\r\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tconst center = this.boundingSphere.center;\r\n\t\tconst radius = this.boundingSphere.radius;\r\n\r\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tconst matrix = new Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tconst vertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.computeFaceNormals();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFlatVertexNormals: function () {\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tconst tmpGeo = new Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tconst faceNormal = new Vector3();\r\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet normalMatrix,\r\n\t\t\tvertexOffset = this.vertices.length,\r\n\t\t\tvertices1 = this.vertices,\r\n\t\t\tvertices2 = geometry.vertices,\r\n\t\t\tfaces1 = this.faces,\r\n\t\t\tfaces2 = geometry.faces,\r\n\t\t\tcolors1 = this.colors,\r\n\t\t\tcolors2 = geometry.colors;\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = vertices2[ i ];\r\n\r\n\t\t\tconst vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\r\n\r\n\t\t\tcolors1.push( colors2[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tlet face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tconst unique = [], changes = [];\r\n\r\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tconst precision = Math.pow( 10, precisionPoints );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst v = this.vertices[ i ];\r\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tconst faceIndicesToRemove = [];\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tconst indices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tconst idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tconst diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.vertices = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tconst faces = this.faces;\r\n\t\tconst length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tlet newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tconst vertices = [];\r\n\r\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = [];\r\n\t\tconst normals = [];\r\n\t\tconst normalsHash = {};\r\n\t\tconst colors = [];\r\n\t\tconst colorsHash = {};\r\n\t\tconst uvs = [];\r\n\t\tconst uvsHash = {};\r\n\r\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tconst hasMaterial = true;\r\n\t\t\tconst hasFaceUv = false; // deprecated\r\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tlet faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [[]];\r\n\t\tthis.morphTargets = [];\r\n\t\tthis.morphNormals = [];\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\tthis.lineDistances = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// vertices\r\n\r\n\t\tconst vertices = source.vertices;\r\n\r\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tconst colors = source.colors;\r\n\r\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.colors.push( colors[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tconst faces = source.faces;\r\n\r\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// face vertex uvs\r\n\r\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tconst uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphTargets = source.morphTargets;\r\n\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = {};\r\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\r\n\r\n\t\t\t// vertices\r\n\r\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.vertices = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.normals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.push( morphTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// morph normals\r\n\r\n\t\tconst morphNormals = source.morphNormals;\r\n\r\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphNormal = {};\r\n\r\n\t\t\t// vertex normals\r\n\r\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.vertexNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\r\n\t\t\t\t\tconst destVertexNormal = {};\r\n\r\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\r\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\r\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\r\n\r\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// face normals\r\n\r\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.faceNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphNormals.push( morphNormal );\r\n\r\n\t\t}\r\n\r\n\t\t// skin weights\r\n\r\n\t\tconst skinWeights = source.skinWeights;\r\n\r\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// skin indices\r\n\r\n\t\tconst skinIndices = source.skinIndices;\r\n\r\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// line distances\r\n\r\n\t\tconst lineDistances = source.lineDistances;\r\n\r\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// update flags\r\n\r\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\r\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\r\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// BoxGeometry\r\n\r\nclass BoxGeometry extends Geometry {\r\n\r\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\t\tthis.mergeVertices();\r\n\r\n\t}\r\n\r\n}\r\n\r\n// BoxBufferGeometry\r\n\r\nclass BoxBufferGeometry extends BufferGeometry {\r\n\r\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxBufferGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\t// segments\r\n\r\n\t\twidthSegments = Math.floor( widthSegments );\r\n\t\theightSegments = Math.floor( heightSegments );\r\n\t\tdepthSegments = Math.floor( depthSegments );\r\n\r\n\t\t// buffers\r\n\r\n\t\tconst indices = [];\r\n\t\tconst vertices = [];\r\n\t\tconst normals = [];\r\n\t\tconst uvs = [];\r\n\r\n\t\t// helper variables\r\n\r\n\t\tlet numberOfVertices = 0;\r\n\t\tlet groupStart = 0;\r\n\r\n\t\t// build each side of the box geometry\r\n\r\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\r\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\r\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\r\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t\t// build geometry\r\n\r\n\t\tthis.setIndex( indices );\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\t\tconst segmentWidth = width / gridX;\r\n\t\t\tconst segmentHeight = height / gridY;\r\n\r\n\t\t\tconst widthHalf = width / 2;\r\n\t\t\tconst heightHalf = height / 2;\r\n\t\t\tconst depthHalf = depth / 2;\r\n\r\n\t\t\tconst gridX1 = gridX + 1;\r\n\t\t\tconst gridY1 = gridY + 1;\r\n\r\n\t\t\tlet vertexCounter = 0;\r\n\t\t\tlet groupCount = 0;\r\n\r\n\t\t\tconst vector = new Vector3();\r\n\r\n\t\t\t// generate vertices, normals and uvs\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t\t// now apply vector to vertex buffer\r\n\r\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t\t// now apply vector to normal buffer\r\n\r\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// uvs\r\n\r\n\t\t\t\t\tuvs.push( ix / gridX );\r\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t\t\t\t// counters\r\n\r\n\t\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\t// 1. you need three indices to draw a single face\r\n\t\t\t// 2. a single segment consists of two faces\r\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t\t// faces\r\n\r\n\t\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t\t// increase counter\r\n\r\n\t\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t\t// calculate new start value for groups\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\r\n\t\t\t// update total number of vertices\r\n\r\n\t\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nfunction cloneUniforms( src ) {\r\n\r\n\tconst dst = {};\r\n\r\n\tfor ( const u in src ) {\r\n\r\n\t\tdst[ u ] = {};\r\n\r\n\t\tfor ( const p in src[ u ] ) {\r\n\r\n\t\t\tconst property = src[ u ][ p ];\r\n\r\n\t\t\tif ( property && ( property.isColor ||\r\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\r\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\r\n\t\t\t\tproperty.isTexture ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.clone();\r\n\r\n\t\t\t} else if ( Array.isArray( property ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.slice();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dst;\r\n\r\n}\r\n\r\nfunction mergeUniforms( uniforms ) {\r\n\r\n\tconst merged = {};\r\n\r\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\r\n\r\n\t\tfor ( const p in tmp ) {\r\n\r\n\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn merged;\r\n\r\n}\r\n\r\n// Legacy\r\n\r\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\r\n\r\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\r\n\r\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\r\n\r\n/**\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction ShaderMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = default_vertex;\r\n\tthis.fragmentShader = default_fragment;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\tthis.lights = false; // set to use scene lights\r\n\tthis.clipping = false; // set to use user-defined clipping planes\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\tthis.uniformsNeedUpdate = false;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\r\n\r\nShaderMaterial.prototype = Object.create( Material.prototype );\r\nShaderMaterial.prototype.constructor = ShaderMaterial;\r\n\r\nShaderMaterial.prototype.isShaderMaterial = true;\r\n\r\nShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = cloneUniforms( source.uniforms );\r\n\r\n\tthis.defines = Object.assign( {}, source.defines );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.lights = source.lights;\r\n\tthis.clipping = source.clipping;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = Object.assign( {}, source.extensions );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tconst data = Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = {};\r\n\r\n\tfor ( const name in this.uniforms ) {\r\n\r\n\t\tconst uniform = this.uniforms[ name ];\r\n\t\tconst value = uniform.value;\r\n\r\n\t\tif ( value && value.isTexture ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 't',\r\n\t\t\t\tvalue: value.toJSON( meta ).uuid\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isColor ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'c',\r\n\t\t\t\tvalue: value.getHex()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector2 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v2',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\tvalue: value\r\n\t\t\t};\r\n\r\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\r\n\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\tconst extensions = {};\r\n\r\n\tfor ( const key in this.extensions ) {\r\n\r\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nfunction Camera() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new Matrix4();\r\n\r\n\tthis.projectionMatrix = new Matrix4();\r\n\tthis.projectionMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Camera,\r\n\r\n\tisCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\r\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PerspectiveCamera( fov, aspect, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\tthis.focus = 10;\r\n\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.view = null;\r\n\r\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\r\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: PerspectiveCamera,\r\n\r\n\tisPerspectiveCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\tthis.focus = source.focus;\r\n\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\tthis.filmGauge = source.filmGauge;\r\n\t\tthis.filmOffset = source.filmOffset;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */\r\n\tsetFocalLength: function ( focalLength ) {\r\n\r\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */\r\n\tgetFocalLength: function () {\r\n\r\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\r\n\r\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n\t},\r\n\r\n\tgetEffectiveFOV: function () {\r\n\r\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\r\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n\t},\r\n\r\n\tgetFilmWidth: function () {\r\n\r\n\t\t// film not completely covered in portrait format (aspect < 1)\r\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\tgetFilmHeight: function () {\r\n\r\n\t\t// film not completely covered in landscape format (aspect > 1)\r\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   const w = 1920;\r\n\t *   const h = 1080;\r\n\t *   const fullWidth = w * 3;\r\n\t *   const fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tthis.aspect = fullWidth / fullHeight;\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tlet near = this.near,\r\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n\t\t\theight = 2 * top,\r\n\t\t\twidth = this.aspect * height,\r\n\t\t\tleft = - 0.5 * width,\r\n\t\t\tview = this.view;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst fullWidth = view.fullWidth,\r\n\t\t\t\tfullHeight = view.fullHeight;\r\n\r\n\t\t\tleft += view.offsetX * width / fullWidth;\r\n\t\t\ttop -= view.offsetY * height / fullHeight;\r\n\t\t\twidth *= view.width / fullWidth;\r\n\t\t\theight *= view.height / fullHeight;\r\n\r\n\t\t}\r\n\r\n\t\tconst skew = this.filmOffset;\r\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.zoom = this.zoom;\r\n\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\tdata.object.focus = this.focus;\r\n\r\n\t\tdata.object.aspect = this.aspect;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\tdata.object.filmGauge = this.filmGauge;\r\n\t\tdata.object.filmOffset = this.filmOffset;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst fov = 90, aspect = 1;\r\n\r\nfunction CubeCamera( near, far, renderTarget ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\r\n\r\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.renderTarget = renderTarget;\r\n\r\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.layers = this.layers;\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.layers = this.layers;\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.layers = this.layers;\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.layers = this.layers;\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.layers = this.layers;\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.layers = this.layers;\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.update = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tconst currentXrEnabled = renderer.xr.enabled;\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\trenderer.xr.enabled = false;\r\n\r\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 0 );\r\n\t\trenderer.render( scene, cameraPX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 1 );\r\n\t\trenderer.render( scene, cameraNX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 2 );\r\n\t\trenderer.render( scene, cameraPY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 3 );\r\n\t\trenderer.render( scene, cameraNY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 4 );\r\n\t\trenderer.render( scene, cameraPZ );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 5 );\r\n\t\trenderer.render( scene, cameraNZ );\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t\trenderer.xr.enabled = currentXrEnabled;\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( renderer, color, depth, stencil ) {\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\trenderer.setRenderTarget( renderTarget, i );\r\n\r\n\t\t\trenderer.clear( color, depth, stencil );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t};\r\n\r\n}\r\n\r\nCubeCamera.prototype = Object.create( Object3D.prototype );\r\nCubeCamera.prototype.constructor = CubeCamera;\r\n\r\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\r\n\r\n\tif ( Number.isInteger( options ) ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\r\n\r\n\t\toptions = dummy;\r\n\r\n\t}\r\n\r\n\tWebGLRenderTarget.call( this, size, size, options );\r\n\r\n}\r\n\r\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\r\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\r\n\r\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\r\n\r\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\r\n\r\n\tthis.texture.type = texture.type;\r\n\tthis.texture.format = RGBAFormat; // see #18859\r\n\tthis.texture.encoding = texture.encoding;\r\n\r\n\tthis.texture.generateMipmaps = texture.generateMipmaps;\r\n\tthis.texture.minFilter = texture.minFilter;\r\n\tthis.texture.magFilter = texture.magFilter;\r\n\r\n\tconst scene = new Scene();\r\n\r\n\tconst shader = {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\r\n\r\n\t\t\t\t#include <begin_vertex>\r\n\t\t\t\t#include <project_vertex>\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tuniform sampler2D tEquirect;\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\r\n\r\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\r\n\r\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\r\n\r\n\t\t\t}\r\n\t\t`\r\n\t};\r\n\r\n\tconst material = new ShaderMaterial( {\r\n\r\n\t\tname: 'CubemapFromEquirect',\r\n\r\n\t\tuniforms: cloneUniforms( shader.uniforms ),\r\n\t\tvertexShader: shader.vertexShader,\r\n\t\tfragmentShader: shader.fragmentShader,\r\n\t\tside: BackSide,\r\n\t\tblending: NoBlending\r\n\r\n\t} );\r\n\r\n\tmaterial.uniforms.tEquirect.value = texture;\r\n\r\n\tconst mesh = new Mesh( new BoxBufferGeometry( 5, 5, 5 ), material );\r\n\r\n\tscene.add( mesh );\r\n\r\n\tconst camera = new CubeCamera( 1, 10, this );\r\n\tcamera.update( renderer, scene );\r\n\r\n\tmesh.geometry.dispose();\r\n\tmesh.material.dispose();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\tthis.unpackAlignment = 1;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture.prototype = Object.create( Texture.prototype );\r\nDataTexture.prototype.constructor = DataTexture;\r\n\r\nDataTexture.prototype.isDataTexture = true;\r\n\r\nconst _sphere$1 = new Sphere();\r\nconst _vector$5 = new Vector3();\r\n\r\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new Plane()\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( Frustum.prototype, {\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromProjectionMatrix: function ( m ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst me = m.elements;\r\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function ( object ) {\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSprite: function ( sprite ) {\r\n\r\n\t\t_sphere$1.center.set( 0, 0, 0 );\r\n\t\t_sphere$1.radius = 0.7071067811865476;\r\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst center = sphere.center;\r\n\t\tconst negRadius = - sphere.radius;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst plane = planes[ i ];\r\n\r\n\t\t\t// corner at max distance\r\n\r\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nconst UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\r\n\t\tmap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() },\r\n\t\tuv2Transform: { value: new Matrix3() },\r\n\r\n\t\talphaMap: { value: null },\r\n\r\n\t},\r\n\r\n\tspecularmap: {\r\n\r\n\t\tspecularMap: { value: null },\r\n\r\n\t},\r\n\r\n\tenvmap: {\r\n\r\n\t\tenvMap: { value: null },\r\n\t\tflipEnvMap: { value: - 1 },\r\n\t\treflectivity: { value: 1.0 },\r\n\t\trefractionRatio: { value: 0.98 },\r\n\t\tmaxMipLevel: { value: 0 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\taoMap: { value: null },\r\n\t\taoMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\tlightMap: { value: null },\r\n\t\tlightMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\temissiveMap: { value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\tbumpMap: { value: null },\r\n\t\tbumpScale: { value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\tnormalMap: { value: null },\r\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\tdisplacementMap: { value: null },\r\n\t\tdisplacementScale: { value: 1 },\r\n\t\tdisplacementBias: { value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\troughnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\tmetalnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tgradientmap: {\r\n\r\n\t\tgradientMap: { value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\tfogDensity: { value: 0.00025 },\r\n\t\tfogNear: { value: 1 },\r\n\t\tfogFar: { value: 2000 },\r\n\t\tfogColor: { value: new Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\tambientLightColor: { value: [] },\r\n\r\n\t\tlightProbe: { value: [] },\r\n\r\n\t\tdirectionalLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tcolor: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalShadowMap: { value: [] },\r\n\t\tdirectionalShadowMatrix: { value: [] },\r\n\r\n\t\tspotLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdirection: {},\r\n\t\t\tdistance: {},\r\n\t\t\tconeCos: {},\r\n\t\t\tpenumbraCos: {},\r\n\t\t\tdecay: {}\r\n\t\t} },\r\n\r\n\t\tspotLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tspotShadowMap: { value: [] },\r\n\t\tspotShadowMatrix: { value: [] },\r\n\r\n\t\tpointLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdecay: {},\r\n\t\t\tdistance: {}\r\n\t\t} },\r\n\r\n\t\tpointLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {},\r\n\t\t\tshadowCameraNear: {},\r\n\t\t\tshadowCameraFar: {}\r\n\t\t} },\r\n\r\n\t\tpointShadowMap: { value: [] },\r\n\t\tpointShadowMatrix: { value: [] },\r\n\r\n\t\themisphereLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tskyColor: {},\r\n\t\t\tgroundColor: {}\r\n\t\t} },\r\n\r\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\r\n\t\trectAreaLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\twidth: {},\r\n\t\t\theight: {}\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tsize: { value: 1.0 },\r\n\t\tscale: { value: 1.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\r\n\t\trotation: { value: 0.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction WebGLAnimation() {\r\n\r\n\tlet context = null;\r\n\tlet isAnimating = false;\r\n\tlet animationLoop = null;\r\n\tlet requestId = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tanimationLoop( time, frame );\r\n\r\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tstart: function () {\r\n\r\n\t\t\tif ( isAnimating === true ) return;\r\n\t\t\tif ( animationLoop === null ) return;\r\n\r\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t\t\tisAnimating = true;\r\n\r\n\t\t},\r\n\r\n\t\tstop: function () {\r\n\r\n\t\t\tcontext.cancelAnimationFrame( requestId );\r\n\r\n\t\t\tisAnimating = false;\r\n\r\n\t\t},\r\n\r\n\t\tsetAnimationLoop: function ( callback ) {\r\n\r\n\t\t\tanimationLoop = callback;\r\n\r\n\t\t},\r\n\r\n\t\tsetContext: function ( value ) {\r\n\r\n\t\t\tcontext = value;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLAttributes( gl, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tconst buffers = new WeakMap();\r\n\r\n\tfunction createBuffer( attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst usage = attribute.usage;\r\n\r\n\t\tconst buffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\t\tgl.bufferData( bufferType, array, usage );\r\n\r\n\t\tattribute.onUploadCallback();\r\n\r\n\t\tlet type = 5126;\r\n\r\n\t\tif ( array instanceof Float32Array ) {\r\n\r\n\t\t\ttype = 5126;\r\n\r\n\t\t} else if ( array instanceof Float64Array ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\r\n\r\n\t\t} else if ( array instanceof Uint16Array ) {\r\n\r\n\t\t\ttype = 5123;\r\n\r\n\t\t} else if ( array instanceof Int16Array ) {\r\n\r\n\t\t\ttype = 5122;\r\n\r\n\t\t} else if ( array instanceof Uint32Array ) {\r\n\r\n\t\t\ttype = 5125;\r\n\r\n\t\t} else if ( array instanceof Int32Array ) {\r\n\r\n\t\t\ttype = 5124;\r\n\r\n\t\t} else if ( array instanceof Int8Array ) {\r\n\r\n\t\t\ttype = 5120;\r\n\r\n\t\t} else if ( array instanceof Uint8Array ) {\r\n\r\n\t\t\ttype = 5121;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tbuffer: buffer,\r\n\t\t\ttype: type,\r\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\r\n\t\t\tversion: attribute.version\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst updateRange = attribute.updateRange;\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\r\n\t\tif ( updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, array );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateRange.count = - 1; // reset range\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction get( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\treturn buffers.get( attribute );\r\n\r\n\t}\r\n\r\n\tfunction remove( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data ) {\r\n\r\n\t\t\tgl.deleteBuffer( data.buffer );\r\n\r\n\t\t\tbuffers.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction update( attribute, bufferType ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\r\n\r\n\t\t} else if ( data.version < attribute.version ) {\r\n\r\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\r\n\r\n\t\t\tdata.version = attribute.version;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\n// PlaneGeometry\r\n\r\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\r\nPlaneGeometry.prototype.constructor = PlaneGeometry;\r\n\r\n// PlaneBufferGeometry\r\n\r\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\twidth = width || 1;\r\n\theight = height || 1;\r\n\r\n\tconst width_half = width / 2;\r\n\tconst height_half = height / 2;\r\n\r\n\tconst gridX = Math.floor( widthSegments ) || 1;\r\n\tconst gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tconst gridX1 = gridX + 1;\r\n\tconst gridY1 = gridY + 1;\r\n\r\n\tconst segment_width = width / gridX;\r\n\tconst segment_height = height / gridY;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tconst y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tconst x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices.push( x, - y, 0 );\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\tuvs.push( ix / gridX );\r\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tconst a = ix + gridX1 * iy;\r\n\t\t\tconst b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\r\n\r\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\r\n\r\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\r\n\r\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\r\n\r\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\r\n\r\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\r\n\r\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\r\n\r\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\r\n\r\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\r\n\r\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\r\n\r\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\r\n\r\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\r\n\r\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\r\n\r\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_maxMipLevel 8.0\\n#define cubeUV_minMipLevel 4.0\\n#define cubeUV_maxTileSize 256.0\\n#define cubeUV_minTileSize 16.0\\nfloat getFace(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    float face = -1.0;\\n    if (absDirection.x > absDirection.z) {\\n      if (absDirection.x > absDirection.y)\\n        face = direction.x > 0.0 ? 0.0 : 3.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    } else {\\n      if (absDirection.z > absDirection.y)\\n        face = direction.z > 0.0 ? 2.0 : 5.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    }\\n    return face;\\n}\\nvec2 getUV(vec3 direction, float face) {\\n    vec2 uv;\\n    if (face == 0.0) {\\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\\n    return 0.5 * (uv + 1.0);\\n}\\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\\n  float face = getFace(direction);\\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\\n  mipInt = max(mipInt, cubeUV_minMipLevel);\\n  float faceSize = exp2(mipInt);\\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\\n  vec2 f = fract(uv);\\n  uv += 0.5 - f;\\n  if (face > 2.0) {\\n    uv.y += faceSize;\\n    face -= 3.0;\\n  }\\n  uv.x += face * faceSize;\\n  if(mipInt < cubeUV_maxMipLevel){\\n    uv.y += 2.0 * cubeUV_maxTileSize;\\n  }\\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\\n  uv *= texelSize;\\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x += texelSize;\\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.y += texelSize;\\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x -= texelSize;\\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  vec3 tm = mix(tl, tr, f.x);\\n  vec3 bm = mix(bl, br, f.x);\\n  return mix(tm, bm, f.y);\\n}\\n#define r0 1.0\\n#define v0 0.339\\n#define m0 -2.0\\n#define r1 0.8\\n#define v1 0.276\\n#define m1 -1.0\\n#define r4 0.4\\n#define v4 0.046\\n#define m4 2.0\\n#define r5 0.305\\n#define v5 0.016\\n#define m5 3.0\\n#define r6 0.21\\n#define v6 0.0038\\n#define m6 4.0\\nfloat roughnessToMip(float roughness) {\\n  float mip = 0.0;\\n  if (roughness >= r1) {\\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\\n  } else if (roughness >= r4) {\\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\\n  } else if (roughness >= r5) {\\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\\n  } else if (roughness >= r6) {\\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\\n  } else {\\n    mip = -2.0 * log2(1.16 * roughness);  }\\n  return mip;\\n}\\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\\n  float mipF = fract(mip);\\n  float mipInt = floor(mip);\\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\\n  if (mipF == 0.0) {\\n    return vec4(color0, 1.0);\\n  } else {\\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\\n    return vec4(mix(color0, color1, mipF), 1.0);\\n  }\\n}\\n#endif\";\r\n\r\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\r\n\r\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\r\n\r\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\r\n\r\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\r\n\r\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\r\n\r\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\r\n\r\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\r\n\r\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\r\n\r\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\r\n\r\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\r\n\r\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\r\n\r\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\r\n\r\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\r\n\r\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\r\n\r\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\r\n\r\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\r\n\r\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\r\n\r\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\r\n\r\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\r\n\r\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\r\n\r\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\r\n\r\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\r\n\r\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\r\n\r\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\r\n\r\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\r\n\r\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\r\n\r\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\r\n\r\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\r\n\r\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\r\n\r\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\r\n\r\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\r\n\r\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\r\n\r\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\r\n\r\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\r\n\r\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\r\n\r\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\r\n\r\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\r\n\r\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\r\n\r\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\r\n\r\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\r\n\r\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\r\n\r\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\r\n\r\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\r\n\r\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\r\n\r\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\r\n\r\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\r\n\r\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\r\n\r\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\r\n\r\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\r\n\r\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\r\n\r\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\r\n\r\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\r\n\r\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\r\n\r\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\r\n\r\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\r\n\r\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\r\n\r\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\r\n\r\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\r\n\r\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\r\n\r\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\r\n\r\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\r\n\r\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\r\n\r\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\r\n\r\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\r\n\r\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nconst ShaderChunk = {\r\n\talphamap_fragment: alphamap_fragment,\r\n\talphamap_pars_fragment: alphamap_pars_fragment,\r\n\talphatest_fragment: alphatest_fragment,\r\n\taomap_fragment: aomap_fragment,\r\n\taomap_pars_fragment: aomap_pars_fragment,\r\n\tbegin_vertex: begin_vertex,\r\n\tbeginnormal_vertex: beginnormal_vertex,\r\n\tbsdfs: bsdfs,\r\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\r\n\tclipping_planes_fragment: clipping_planes_fragment,\r\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\r\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\r\n\tclipping_planes_vertex: clipping_planes_vertex,\r\n\tcolor_fragment: color_fragment,\r\n\tcolor_pars_fragment: color_pars_fragment,\r\n\tcolor_pars_vertex: color_pars_vertex,\r\n\tcolor_vertex: color_vertex,\r\n\tcommon: common,\r\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\r\n\tdefaultnormal_vertex: defaultnormal_vertex,\r\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\r\n\tdisplacementmap_vertex: displacementmap_vertex,\r\n\temissivemap_fragment: emissivemap_fragment,\r\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\r\n\tencodings_fragment: encodings_fragment,\r\n\tencodings_pars_fragment: encodings_pars_fragment,\r\n\tenvmap_fragment: envmap_fragment,\r\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\r\n\tenvmap_pars_fragment: envmap_pars_fragment,\r\n\tenvmap_pars_vertex: envmap_pars_vertex,\r\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\r\n\tenvmap_vertex: envmap_vertex,\r\n\tfog_vertex: fog_vertex,\r\n\tfog_pars_vertex: fog_pars_vertex,\r\n\tfog_fragment: fog_fragment,\r\n\tfog_pars_fragment: fog_pars_fragment,\r\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\r\n\tlightmap_fragment: lightmap_fragment,\r\n\tlightmap_pars_fragment: lightmap_pars_fragment,\r\n\tlights_lambert_vertex: lights_lambert_vertex,\r\n\tlights_pars_begin: lights_pars_begin,\r\n\tlights_toon_fragment: lights_toon_fragment,\r\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\r\n\tlights_phong_fragment: lights_phong_fragment,\r\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\r\n\tlights_physical_fragment: lights_physical_fragment,\r\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\r\n\tlights_fragment_begin: lights_fragment_begin,\r\n\tlights_fragment_maps: lights_fragment_maps,\r\n\tlights_fragment_end: lights_fragment_end,\r\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\r\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\r\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\r\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\r\n\tmap_fragment: map_fragment,\r\n\tmap_pars_fragment: map_pars_fragment,\r\n\tmap_particle_fragment: map_particle_fragment,\r\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\r\n\tmetalnessmap_fragment: metalnessmap_fragment,\r\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\r\n\tmorphnormal_vertex: morphnormal_vertex,\r\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\r\n\tmorphtarget_vertex: morphtarget_vertex,\r\n\tnormal_fragment_begin: normal_fragment_begin,\r\n\tnormal_fragment_maps: normal_fragment_maps,\r\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\r\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\r\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\r\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\r\n\tpacking: packing,\r\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\r\n\tproject_vertex: project_vertex,\r\n\tdithering_fragment: dithering_fragment,\r\n\tdithering_pars_fragment: dithering_pars_fragment,\r\n\troughnessmap_fragment: roughnessmap_fragment,\r\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\r\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\r\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\r\n\tshadowmap_vertex: shadowmap_vertex,\r\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\r\n\tskinbase_vertex: skinbase_vertex,\r\n\tskinning_pars_vertex: skinning_pars_vertex,\r\n\tskinning_vertex: skinning_vertex,\r\n\tskinnormal_vertex: skinnormal_vertex,\r\n\tspecularmap_fragment: specularmap_fragment,\r\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\r\n\ttonemapping_fragment: tonemapping_fragment,\r\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\r\n\ttransmissionmap_fragment: transmissionmap_fragment,\r\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\r\n\tuv_pars_fragment: uv_pars_fragment,\r\n\tuv_pars_vertex: uv_pars_vertex,\r\n\tuv_vertex: uv_vertex,\r\n\tuv2_pars_fragment: uv2_pars_fragment,\r\n\tuv2_pars_vertex: uv2_pars_vertex,\r\n\tuv2_vertex: uv2_vertex,\r\n\tworldpos_vertex: worldpos_vertex,\r\n\r\n\tbackground_frag: background_frag,\r\n\tbackground_vert: background_vert,\r\n\tcube_frag: cube_frag,\r\n\tcube_vert: cube_vert,\r\n\tdepth_frag: depth_frag,\r\n\tdepth_vert: depth_vert,\r\n\tdistanceRGBA_frag: distanceRGBA_frag,\r\n\tdistanceRGBA_vert: distanceRGBA_vert,\r\n\tequirect_frag: equirect_frag,\r\n\tequirect_vert: equirect_vert,\r\n\tlinedashed_frag: linedashed_frag,\r\n\tlinedashed_vert: linedashed_vert,\r\n\tmeshbasic_frag: meshbasic_frag,\r\n\tmeshbasic_vert: meshbasic_vert,\r\n\tmeshlambert_frag: meshlambert_frag,\r\n\tmeshlambert_vert: meshlambert_vert,\r\n\tmeshmatcap_frag: meshmatcap_frag,\r\n\tmeshmatcap_vert: meshmatcap_vert,\r\n\tmeshtoon_frag: meshtoon_frag,\r\n\tmeshtoon_vert: meshtoon_vert,\r\n\tmeshphong_frag: meshphong_frag,\r\n\tmeshphong_vert: meshphong_vert,\r\n\tmeshphysical_frag: meshphysical_frag,\r\n\tmeshphysical_vert: meshphysical_vert,\r\n\tnormal_frag: normal_frag,\r\n\tnormal_vert: normal_vert,\r\n\tpoints_frag: points_frag,\r\n\tpoints_vert: points_vert,\r\n\tshadow_frag: shadow_frag,\r\n\tshadow_vert: shadow_vert,\r\n\tsprite_frag: sprite_frag,\r\n\tsprite_vert: sprite_vert\r\n};\r\n\r\nconst ShaderLib = {\r\n\r\n\tbasic: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\r\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\r\n\r\n\t},\r\n\r\n\tlambert: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\r\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\r\n\r\n\t},\r\n\r\n\tphong: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\r\n\t\t\t\tshininess: { value: 30 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphong_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphong_frag\r\n\r\n\t},\r\n\r\n\tstandard: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.roughnessmap,\r\n\t\t\tUniformsLib.metalnessmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\troughness: { value: 1.0 },\r\n\t\t\t\tmetalness: { value: 0.0 },\r\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n\t},\r\n\r\n\ttoon: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.gradientmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\r\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\r\n\r\n\t},\r\n\r\n\tmatcap: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tmatcap: { value: null }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\r\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.points,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.points_vert,\r\n\t\tfragmentShader: ShaderChunk.points_frag\r\n\r\n\t},\r\n\r\n\tdashed: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tscale: { value: 1 },\r\n\t\t\t\tdashSize: { value: 1 },\r\n\t\t\t\ttotalSize: { value: 2 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.linedashed_vert,\r\n\t\tfragmentShader: ShaderChunk.linedashed_frag\r\n\r\n\t},\r\n\r\n\tdepth: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.depth_vert,\r\n\t\tfragmentShader: ShaderChunk.depth_frag\r\n\r\n\t},\r\n\r\n\tnormal: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.normal_vert,\r\n\t\tfragmentShader: ShaderChunk.normal_frag\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.sprite,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.sprite_vert,\r\n\t\tfragmentShader: ShaderChunk.sprite_frag\r\n\r\n\t},\r\n\r\n\tbackground: {\r\n\r\n\t\tuniforms: {\r\n\t\t\tuvTransform: { value: new Matrix3() },\r\n\t\t\tt2D: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.background_vert,\r\n\t\tfragmentShader: ShaderChunk.background_frag\r\n\r\n\t},\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\tcube: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.cube_vert,\r\n\t\tfragmentShader: ShaderChunk.cube_frag\r\n\r\n\t},\r\n\r\n\tequirect: {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.equirect_vert,\r\n\t\tfragmentShader: ShaderChunk.equirect_frag\r\n\r\n\t},\r\n\r\n\tdistanceRGBA: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\treferencePosition: { value: new Vector3() },\r\n\t\t\t\tnearDistance: { value: 1 },\r\n\t\t\t\tfarDistance: { value: 1000 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\r\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\r\n\r\n\t},\r\n\r\n\tshadow: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.lights,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t},\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.shadow_vert,\r\n\t\tfragmentShader: ShaderChunk.shadow_frag\r\n\r\n\t}\r\n\r\n};\r\n\r\nShaderLib.physical = {\r\n\r\n\tuniforms: mergeUniforms( [\r\n\t\tShaderLib.standard.uniforms,\r\n\t\t{\r\n\t\t\tclearcoat: { value: 0 },\r\n\t\t\tclearcoatMap: { value: null },\r\n\t\t\tclearcoatRoughness: { value: 0 },\r\n\t\t\tclearcoatRoughnessMap: { value: null },\r\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\r\n\t\t\tclearcoatNormalMap: { value: null },\r\n\t\t\tsheen: { value: new Color( 0x000000 ) },\r\n\t\t\ttransmission: { value: 0 },\r\n\t\t\ttransmissionMap: { value: null },\r\n\t\t}\r\n\t] ),\r\n\r\n\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n};\r\n\r\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\r\n\r\n\tconst clearColor = new Color( 0x000000 );\r\n\tlet clearAlpha = 0;\r\n\r\n\tlet planeMesh;\r\n\tlet boxMesh;\r\n\r\n\tlet currentBackground = null;\r\n\tlet currentBackgroundVersion = 0;\r\n\tlet currentTonemapping = null;\r\n\r\n\tfunction render( renderList, scene, camera, forceClear ) {\r\n\r\n\t\tlet background = scene.isScene === true ? scene.background : null;\r\n\r\n\t\t// Ignore background in AR\r\n\t\t// TODO: Reconsider this.\r\n\r\n\t\tconst xr = renderer.xr;\r\n\t\tconst session = xr.getSession && xr.getSession();\r\n\r\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\r\n\r\n\t\t\tbackground = null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( background === null ) {\r\n\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t} else if ( background && background.isColor ) {\r\n\r\n\t\t\tsetClear( background, 1 );\r\n\t\t\tforceClear = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderer.autoClear || forceClear ) {\r\n\r\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\r\n\r\n\t\t\tif ( boxMesh === undefined ) {\r\n\r\n\t\t\t\tboxMesh = new Mesh(\r\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\r\n\t\t\t\t\t\tside: BackSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\r\n\r\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\r\n\r\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( boxMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst texture = background.isWebGLCubeRenderTarget ? background.texture : background;\r\n\r\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\r\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tboxMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = texture.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\r\n\r\n\t\t} else if ( background && background.isTexture ) {\r\n\r\n\t\t\tif ( planeMesh === undefined ) {\r\n\r\n\t\t\t\tplaneMesh = new Mesh(\r\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\r\n\t\t\t\t\t\tside: FrontSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( planeMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\r\n\r\n\t\t\tif ( background.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tbackground.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tplaneMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = background.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setClear( color, alpha ) {\r\n\r\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetClearColor: function () {\r\n\r\n\t\t\treturn clearColor;\r\n\r\n\t\t},\r\n\t\tsetClearColor: function ( color, alpha ) {\r\n\r\n\t\t\tclearColor.set( color );\r\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\tgetClearAlpha: function () {\r\n\r\n\t\t\treturn clearAlpha;\r\n\r\n\t\t},\r\n\t\tsetClearAlpha: function ( alpha ) {\r\n\r\n\t\t\tclearAlpha = alpha;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\trender: render\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\r\n\r\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\r\n\r\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\r\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\r\n\r\n\tconst bindingStates = {};\r\n\r\n\tconst defaultState = createBindingState( null );\r\n\tlet currentState = defaultState;\r\n\r\n\tfunction setup( object, material, program, geometry, index ) {\r\n\r\n\t\tlet updateBuffers = false;\r\n\r\n\t\tif ( vaoAvailable ) {\r\n\r\n\t\t\tconst state = getBindingState( geometry, program, material );\r\n\r\n\t\t\tif ( currentState !== state ) {\r\n\r\n\t\t\t\tcurrentState = state;\r\n\t\t\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = needsUpdate( geometry );\r\n\r\n\t\t\tif ( updateBuffers ) saveCache( geometry );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\t\tif ( currentState.geometry !== geometry.id ||\r\n\t\t\t\tcurrentState.program !== program.id ||\r\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\r\n\r\n\t\t\t\tcurrentState.geometry = geometry.id;\r\n\t\t\t\tcurrentState.program = program.id;\r\n\t\t\t\tcurrentState.wireframe = wireframe;\r\n\r\n\t\t\t\tupdateBuffers = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh === true ) {\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattributes.update( index, 34963 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createVertexArrayObject() {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\r\n\r\n\t\treturn extension.createVertexArrayOES();\r\n\r\n\t}\r\n\r\n\tfunction bindVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\r\n\r\n\t\treturn extension.bindVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction deleteVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\r\n\r\n\t\treturn extension.deleteVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction getBindingState( geometry, program, material ) {\r\n\r\n\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\tlet programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tif ( programMap === undefined ) {\r\n\r\n\t\t\tprogramMap = {};\r\n\t\t\tbindingStates[ geometry.id ] = programMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet stateMap = programMap[ program.id ];\r\n\r\n\t\tif ( stateMap === undefined ) {\r\n\r\n\t\t\tstateMap = {};\r\n\t\t\tprogramMap[ program.id ] = stateMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet state = stateMap[ wireframe ];\r\n\r\n\t\tif ( state === undefined ) {\r\n\r\n\t\t\tstate = createBindingState( createVertexArrayObject() );\r\n\t\t\tstateMap[ wireframe ] = state;\r\n\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\r\n\t}\r\n\r\n\tfunction createBindingState( vao ) {\r\n\r\n\t\tconst newAttributes = [];\r\n\t\tconst enabledAttributes = [];\r\n\t\tconst attributeDivisors = [];\r\n\r\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\t\t\tenabledAttributes[ i ] = 0;\r\n\t\t\tattributeDivisors[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\r\n\t\t\t// for backward compatibility on non-VAO support browser\r\n\t\t\tgeometry: null,\r\n\t\t\tprogram: null,\r\n\t\t\twireframe: false,\r\n\r\n\t\t\tnewAttributes: newAttributes,\r\n\t\t\tenabledAttributes: enabledAttributes,\r\n\t\t\tattributeDivisors: attributeDivisors,\r\n\t\t\tobject: vao,\r\n\t\t\tattributes: {}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction needsUpdate( geometry ) {\r\n\r\n\t\tconst cachedAttributes = currentState.attributes;\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\r\n\r\n\t\tfor ( const key in geometryAttributes ) {\r\n\r\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\r\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\r\n\r\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\r\n\r\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction saveCache( geometry ) {\r\n\r\n\t\tconst cache = {};\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst data = {};\r\n\t\t\tdata.attribute = attribute;\r\n\r\n\t\t\tif ( attribute.data ) {\r\n\r\n\t\t\t\tdata.data = attribute.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache[ key ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentState.attributes = cache;\r\n\r\n\t}\r\n\r\n\tfunction initAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\r\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction enableAttribute( attribute ) {\r\n\r\n\t\tenableAttributeAndDivisor( attribute, 0 );\r\n\r\n\t}\r\n\r\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\t\tconst attributeDivisors = currentState.attributeDivisors;\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disableUnusedAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\r\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\r\n\r\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\r\n\r\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\r\n\r\n\t\t}\r\n\r\n\t\tinitAttributes();\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( const name in programAttributes ) {\r\n\r\n\t\t\tconst programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\r\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\r\n\r\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst data = geometryAttribute.data;\r\n\t\t\t\t\t\tconst stride = data.stride;\r\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\r\n\r\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\treset();\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete bindingStates[ geometryId ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfGeometry( geometry ) {\r\n\r\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\r\n\r\n\t\tconst programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t}\r\n\r\n\t\tdelete bindingStates[ geometry.id ];\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfProgram( program ) {\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\r\n\r\n\t\t\tconst stateMap = programMap[ program.id ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ program.id ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\tresetDefaultState();\r\n\r\n\t\tif ( currentState === defaultState ) return;\r\n\r\n\t\tcurrentState = defaultState;\r\n\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t}\r\n\r\n\t// for backward-compatilibity\r\n\r\n\tfunction resetDefaultState() {\r\n\r\n\t\tdefaultState.geometry = null;\r\n\t\tdefaultState.program = null;\r\n\t\tdefaultState.wireframe = false;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tsetup: setup,\r\n\t\treset: reset,\r\n\t\tresetDefaultState: resetDefaultState,\r\n\t\tdispose: dispose,\r\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\r\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\r\n\r\n\t\tinitAttributes: initAttributes,\r\n\t\tenableAttribute: enableAttribute,\r\n\t\tdisableUnusedAttributes: disableUnusedAttributes\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawArrays( mode, start, count );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawArraysInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, start, count, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLCapabilities( gl, extensions, parameters ) {\r\n\r\n\tlet maxAnisotropy;\r\n\r\n\tfunction getMaxAnisotropy() {\r\n\r\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaxAnisotropy = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxAnisotropy;\r\n\r\n\t}\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\t/* eslint-disable no-undef */\r\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\r\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\r\n\t/* eslint-enable no-undef */\r\n\r\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n\tconst maxPrecision = getMaxPrecision( precision );\r\n\r\n\tif ( maxPrecision !== precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\r\n\t\tprecision = maxPrecision;\r\n\r\n\t}\r\n\r\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\r\n\r\n\tconst maxTextures = gl.getParameter( 34930 );\r\n\tconst maxVertexTextures = gl.getParameter( 35660 );\r\n\tconst maxTextureSize = gl.getParameter( 3379 );\r\n\tconst maxCubemapSize = gl.getParameter( 34076 );\r\n\r\n\tconst maxAttributes = gl.getParameter( 34921 );\r\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\r\n\tconst maxVaryings = gl.getParameter( 36348 );\r\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\r\n\r\n\tconst vertexTextures = maxVertexTextures > 0;\r\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\r\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\r\n\r\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\r\n\r\n\treturn {\r\n\r\n\t\tisWebGL2: isWebGL2,\r\n\r\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\r\n\t\tgetMaxPrecision: getMaxPrecision,\r\n\r\n\t\tprecision: precision,\r\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\tmaxTextures: maxTextures,\r\n\t\tmaxVertexTextures: maxVertexTextures,\r\n\t\tmaxTextureSize: maxTextureSize,\r\n\t\tmaxCubemapSize: maxCubemapSize,\r\n\r\n\t\tmaxAttributes: maxAttributes,\r\n\t\tmaxVertexUniforms: maxVertexUniforms,\r\n\t\tmaxVaryings: maxVaryings,\r\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\r\n\r\n\t\tvertexTextures: vertexTextures,\r\n\t\tfloatFragmentTextures: floatFragmentTextures,\r\n\t\tfloatVertexTextures: floatVertexTextures,\r\n\r\n\t\tmaxSamples: maxSamples\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLClipping() {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet globalState = null,\r\n\t\tnumGlobalPlanes = 0,\r\n\t\tlocalClippingEnabled = false,\r\n\t\trenderingShadows = false;\r\n\r\n\tconst plane = new Plane(),\r\n\t\tviewNormalMatrix = new Matrix3(),\r\n\r\n\t\tuniform = { value: null, needsUpdate: false };\r\n\r\n\tthis.uniform = uniform;\r\n\tthis.numPlanes = 0;\r\n\tthis.numIntersection = 0;\r\n\r\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\r\n\r\n\t\tconst enabled =\r\n\t\t\tplanes.length !== 0 ||\r\n\t\t\tenableLocalClipping ||\r\n\t\t\t// enable state of previous frame - the clipping code has to\r\n\t\t\t// run another frame in order to reset the state:\r\n\t\t\tnumGlobalPlanes !== 0 ||\r\n\t\t\tlocalClippingEnabled;\r\n\r\n\t\tlocalClippingEnabled = enableLocalClipping;\r\n\r\n\t\tglobalState = projectPlanes( planes, camera, 0 );\r\n\t\tnumGlobalPlanes = planes.length;\r\n\r\n\t\treturn enabled;\r\n\r\n\t};\r\n\r\n\tthis.beginShadows = function () {\r\n\r\n\t\trenderingShadows = true;\r\n\t\tprojectPlanes( null );\r\n\r\n\t};\r\n\r\n\tthis.endShadows = function () {\r\n\r\n\t\trenderingShadows = false;\r\n\t\tresetGlobalState();\r\n\r\n\t};\r\n\r\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\r\n\r\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\r\n\r\n\t\t\t// there's no local clipping\r\n\r\n\t\t\tif ( renderingShadows ) {\r\n\r\n\t\t\t\t// there's no global clipping\r\n\r\n\t\t\t\tprojectPlanes( null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresetGlobalState();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n\t\t\t\tlGlobal = nGlobal * 4;\r\n\r\n\t\t\tlet dstArray = cache.clippingState || null;\r\n\r\n\t\t\tuniform.value = dstArray; // ensure unique state\r\n\r\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\r\n\r\n\t\t\t\tdstArray[ i ] = globalState[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache.clippingState = dstArray;\r\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\r\n\t\t\tthis.numPlanes += nGlobal;\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tfunction resetGlobalState() {\r\n\r\n\t\tif ( uniform.value !== globalState ) {\r\n\r\n\t\t\tuniform.value = globalState;\r\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = numGlobalPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t}\r\n\r\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n\t\tlet nPlanes = planes !== null ? planes.length : 0,\r\n\t\t\tdstArray = null;\r\n\r\n\t\tif ( nPlanes !== 0 ) {\r\n\r\n\t\t\tdstArray = uniform.value;\r\n\r\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\r\n\r\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\r\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\r\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniform.value = dstArray;\r\n\t\t\tuniform.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = nPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t\treturn dstArray;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLExtensions( gl ) {\r\n\r\n\tconst extensions = {};\r\n\r\n\treturn {\r\n\r\n\t\thas: function ( name ) {\r\n\r\n\t\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\t\treturn extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet extension;\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'WEBGL_depth_texture':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\textensions[ name ] = extension;\r\n\r\n\t\t\treturn !! extension;\r\n\r\n\t\t},\r\n\r\n\t\tget: function ( name ) {\r\n\r\n\t\t\tif ( ! this.has( name ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\r\n\r\n\tconst geometries = new WeakMap();\r\n\tconst wireframeAttributes = new WeakMap();\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tconst geometry = event.target;\r\n\t\tconst buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const name in buffergeometry.attributes ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tgeometries.delete( geometry );\r\n\r\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\r\n\r\n\t\tif ( attribute ) {\r\n\r\n\t\t\tattributes.remove( attribute );\r\n\t\t\twireframeAttributes.delete( buffergeometry );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\r\n\r\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\r\n\r\n\t\t\tdelete geometry._maxInstanceCount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction get( object, geometry ) {\r\n\r\n\t\tlet buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry ) return buffergeometry;\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries.set( geometry, buffergeometry );\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction update( geometry ) {\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\r\n\r\n\t\tfor ( const name in geometryAttributes ) {\r\n\r\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tattributes.update( array[ i ], 34962 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateWireframeAttribute( geometry ) {\r\n\r\n\t\tconst indices = [];\r\n\r\n\t\tconst geometryIndex = geometry.index;\r\n\t\tconst geometryPosition = geometry.attributes.position;\r\n\t\tlet version = 0;\r\n\r\n\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\tconst array = geometryIndex.array;\r\n\t\t\tversion = geometryIndex.version;\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = array[ i + 0 ];\r\n\t\t\t\tconst b = array[ i + 1 ];\r\n\t\t\t\tconst c = array[ i + 2 ];\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst array = geometryPosition.array;\r\n\t\t\tversion = geometryPosition.version;\r\n\r\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = i + 0;\r\n\t\t\t\tconst b = i + 1;\r\n\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\r\n\t\tattribute.version = version;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\r\n\r\n\t\t//\r\n\r\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\r\n\r\n\t\t//\r\n\r\n\t\twireframeAttributes.set( geometry, attribute );\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( currentAttribute ) {\r\n\r\n\t\t\tconst geometryIndex = geometry.index;\r\n\r\n\t\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\t\t// if the attribute is obsolete, create a new one\r\n\r\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\r\n\r\n\t\t\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\treturn wireframeAttributes.get( geometry );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tupdate: update,\r\n\r\n\t\tgetWireframeAttribute: getWireframeAttribute\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tlet type, bytesPerElement;\r\n\r\n\tfunction setIndex( value ) {\r\n\r\n\t\ttype = value.type;\r\n\t\tbytesPerElement = value.bytesPerElement;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawElementsInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLInfo( gl ) {\r\n\r\n\tconst memory = {\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\t};\r\n\r\n\tconst render = {\r\n\t\tframe: 0,\r\n\t\tcalls: 0,\r\n\t\ttriangles: 0,\r\n\t\tpoints: 0,\r\n\t\tlines: 0\r\n\t};\r\n\r\n\tfunction update( count, mode, instanceCount ) {\r\n\r\n\t\trender.calls ++;\r\n\r\n\t\tswitch ( mode ) {\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\trender.lines += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\trender.points += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\trender.frame ++;\r\n\t\trender.calls = 0;\r\n\t\trender.triangles = 0;\r\n\t\trender.points = 0;\r\n\t\trender.lines = 0;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tmemory: memory,\r\n\t\trender: render,\r\n\t\tprograms: null,\r\n\t\tautoReset: true,\r\n\t\treset: reset,\r\n\t\tupdate: update\r\n\t};\r\n\r\n}\r\n\r\nfunction numericalSort( a, b ) {\r\n\r\n\treturn a[ 0 ] - b[ 0 ];\r\n\r\n}\r\n\r\nfunction absNumericalSort( a, b ) {\r\n\r\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\r\n\r\n}\r\n\r\nfunction WebGLMorphtargets( gl ) {\r\n\r\n\tconst influencesList = {};\r\n\tconst morphInfluences = new Float32Array( 8 );\r\n\r\n\tconst workInfluences = [];\r\n\r\n\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\tworkInfluences[ i ] = [ i, 0 ];\r\n\r\n\t}\r\n\r\n\tfunction update( object, geometry, material, program ) {\r\n\r\n\t\tconst objectInfluences = object.morphTargetInfluences;\r\n\r\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\r\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\r\n\r\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\r\n\r\n\t\tlet influences = influencesList[ geometry.id ];\r\n\r\n\t\tif ( influences === undefined ) {\r\n\r\n\t\t\t// initialise list\r\n\r\n\t\t\tinfluences = [];\r\n\r\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinfluencesList[ geometry.id ] = influences;\r\n\r\n\t\t}\r\n\r\n\t\t// Collect influences\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst influence = influences[ i ];\r\n\r\n\t\t\tinfluence[ 0 ] = i;\r\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tinfluences.sort( absNumericalSort );\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tworkInfluences.sort( numericalSort );\r\n\r\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\r\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\r\n\r\n\t\tlet morphInfluencesSum = 0;\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tconst influence = workInfluences[ i ];\r\n\t\t\tconst index = influence[ 0 ];\r\n\t\t\tconst value = influence[ 1 ];\r\n\r\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = value;\r\n\t\t\t\tmorphInfluencesSum += value;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\r\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\r\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\r\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\r\n\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLObjects( gl, geometries, attributes, info ) {\r\n\r\n\tlet updateMap = new WeakMap();\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\tconst geometry = object.geometry;\r\n\t\tconst buffergeometry = geometries.get( object, geometry );\r\n\r\n\t\t// Update once per frame\r\n\r\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\r\n\r\n\t\t\tif ( geometry.isGeometry ) {\r\n\r\n\t\t\t\tbuffergeometry.updateFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometries.update( buffergeometry );\r\n\r\n\t\t\tupdateMap.set( buffergeometry, frame );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\r\n\r\n\t\t}\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tupdateMap = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\r\n\tformat = format !== undefined ? format : RGBFormat;\r\n\r\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.flipY = false;\r\n\r\n}\r\n\r\nCubeTexture.prototype = Object.create( Texture.prototype );\r\nCubeTexture.prototype.constructor = CubeTexture;\r\n\r\nCubeTexture.prototype.isCubeTexture = true;\r\n\r\nObject.defineProperty( CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DataTexture2DArray( data, width, height, depth ) {\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\r\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\r\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\r\n\r\nfunction DataTexture3D( data, width, height, depth ) {\r\n\r\n\t// We're going to add .setXXX() methods for setting properties later.\r\n\t// Users can still set in DataTexture3D directly.\r\n\t//\r\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\r\n\t// \ttexture.anisotropy = 16;\r\n\t//\r\n\t// See #14839\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n\r\n}\r\n\r\nDataTexture3D.prototype = Object.create( Texture.prototype );\r\nDataTexture3D.prototype.constructor = DataTexture3D;\r\nDataTexture3D.prototype.isDataTexture3D = true;\r\n\r\n/**\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [textures] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'textures' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (textures factorizations):\r\n *\r\n * .upload( gl, seq, values, textures )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n *\r\n * Methods of the top-level container (textures factorizations):\r\n *\r\n * .setValue( gl, name, value, textures )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n */\r\n\r\nconst emptyTexture = new Texture();\r\nconst emptyTexture2dArray = new DataTexture2DArray();\r\nconst emptyTexture3d = new DataTexture3D();\r\nconst emptyCubeTexture = new CubeTexture();\r\n\r\n// --- Utilities ---\r\n\r\n// Array Caches (provide typed arrays for temporary by size)\r\n\r\nconst arrayCacheF32 = [];\r\nconst arrayCacheI32 = [];\r\n\r\n// Float32Array caches used for uploading Matrix uniforms\r\n\r\nconst mat4array = new Float32Array( 16 );\r\nconst mat3array = new Float32Array( 9 );\r\nconst mat2array = new Float32Array( 4 );\r\n\r\n// Flattening for arrays of vectors and matrices\r\n\r\nfunction flatten( array, nBlocks, blockSize ) {\r\n\r\n\tconst firstElem = array[ 0 ];\r\n\r\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\r\n\t// unoptimized: ! isNaN( firstElem )\r\n\t// see http://jacksondunstan.com/articles/983\r\n\r\n\tlet n = nBlocks * blockSize,\r\n\t\tr = arrayCacheF32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Float32Array( n );\r\n\t\tarrayCacheF32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tif ( nBlocks !== 0 ) {\r\n\r\n\t\tfirstElem.toArray( r, 0 );\r\n\r\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n\t\t\toffset += blockSize;\r\n\t\t\tarray[ i ].toArray( r, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\nfunction arraysEqual( a, b ) {\r\n\r\n\tif ( a.length !== b.length ) return false;\r\n\r\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\r\n\r\n\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction copyArray( a, b ) {\r\n\r\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\r\n\r\n\t\ta[ i ] = b[ i ];\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Texture unit allocation\r\n\r\nfunction allocTexUnits( textures, n ) {\r\n\r\n\tlet r = arrayCacheI32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Int32Array( n );\r\n\t\tarrayCacheI32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\tr[ i ] = textures.allocateTextureUnit();\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\n// --- Setters ---\r\n\r\n// Note: Defining these methods externally, because they come in a bunch\r\n// and this way their names minify.\r\n\r\n// Single scalar\r\n\r\nfunction setValueV1f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1f( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Single float vector (from flat array or THREE.VectorN)\r\n\r\nfunction setValueV2f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\r\n\r\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform2fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV3f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\r\n\t\t}\r\n\r\n\t} else if ( v.r !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\r\n\t\t\tcache[ 0 ] = v.r;\r\n\t\t\tcache[ 1 ] = v.g;\r\n\t\t\tcache[ 2 ] = v.b;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform3fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV4f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\r\n\r\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\t\t\tcache[ 3 ] = v.w;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform4fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single matrix (from flat array or MatrixN)\r\n\r\nfunction setValueM2( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat2array.set( elements );\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM3( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat3array.set( elements );\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM4( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat4array.set( elements );\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single texture (2D / Cube)\r\n\r\nfunction setValueT1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\r\n\r\n}\r\n\r\nfunction setValueT2DArray1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\r\n\r\n}\r\n\r\nfunction setValueT3D1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\r\n\r\n}\r\n\r\nfunction setValueT6( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\nfunction setValueV1i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1i( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\nfunction setValueV2i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV3i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV4i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\n// uint\r\n\r\nfunction setValueV1ui( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1ui( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Helper to pick the right setter for the singular case\r\n\r\nfunction getSingularSetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1f; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\r\n\r\n\t\tcase 0x1405: return setValueV1ui; // UINT\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1;\r\n\r\n\t\tcase 0x8b5f: // SAMPLER_3D\r\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\r\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\r\n\t\t\treturn setValueT3D1;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6;\r\n\r\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\r\n\t\t\treturn setValueT2DArray1;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Array of scalars\r\nfunction setValueV1fArray( gl, v ) {\r\n\r\n\tgl.uniform1fv( this.addr, v );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\nfunction setValueV1iArray( gl, v ) {\r\n\r\n\tgl.uniform1iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV2iArray( gl, v ) {\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV3iArray( gl, v ) {\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV4iArray( gl, v ) {\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n}\r\n\r\n\r\n// Array of vectors (flat or from THREE classes)\r\n\r\nfunction setValueV2fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 2 );\r\n\r\n\tgl.uniform2fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV3fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 3 );\r\n\r\n\tgl.uniform3fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV4fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniform4fv( this.addr, data );\r\n\r\n}\r\n\r\n// Array of matrices (flat or from THREE clases)\r\n\r\nfunction setValueM2Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniformMatrix2fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM3Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 9 );\r\n\r\n\tgl.uniformMatrix3fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM4Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 16 );\r\n\r\n\tgl.uniformMatrix4fv( this.addr, false, data );\r\n\r\n}\r\n\r\n// Array of textures (2D / Cube)\r\n\r\nfunction setValueT1Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueT6Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Helper to pick the right setter for a pure (bottom-level) array\r\n\r\nfunction getPureArraySetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1Array;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6Array;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// --- Uniform Classes ---\r\n\r\nfunction SingleUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.setValue = getSingularSetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nfunction PureArrayUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.size = activeInfo.size;\r\n\tthis.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nPureArrayUniform.prototype.updateCache = function ( data ) {\r\n\r\n\tlet cache = this.cache;\r\n\r\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\r\n\r\n\t\tthis.cache = new Float32Array( data.length );\r\n\r\n\t}\r\n\r\n\tcopyArray( cache, data );\r\n\r\n};\r\n\r\nfunction StructuredUniform( id ) {\r\n\r\n\tthis.id = id;\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n}\r\n\r\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\r\n\r\n\tconst seq = this.seq;\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tu.setValue( gl, value[ u.id ], textures );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// --- Top-level ---\r\n\r\n// Parser - builds up the property tree from the path strings\r\n\r\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\r\n\r\n// extracts\r\n// \t- the identifier (member name or array index)\r\n//  - followed by an optional right bracket (found when array index)\r\n//  - followed by an optional left bracket or dot (type of subscript)\r\n//\r\n// Note: These portions can be read in a non-overlapping fashion and\r\n// allow straightforward parsing of the hierarchy that WebGL encodes\r\n// in the uniform names.\r\n\r\nfunction addUniform( container, uniformObject ) {\r\n\r\n\tcontainer.seq.push( uniformObject );\r\n\tcontainer.map[ uniformObject.id ] = uniformObject;\r\n\r\n}\r\n\r\nfunction parseUniform( activeInfo, addr, container ) {\r\n\r\n\tconst path = activeInfo.name,\r\n\t\tpathLength = path.length;\r\n\r\n\t// reset RegExp object, because of the early exit of a previous run\r\n\tRePathPart.lastIndex = 0;\r\n\r\n\twhile ( true ) {\r\n\r\n\t\tconst match = RePathPart.exec( path ),\r\n\t\t\tmatchEnd = RePathPart.lastIndex;\r\n\r\n\t\tlet id = match[ 1 ],\r\n\t\t\tidIsIndex = match[ 2 ] === ']',\r\n\t\t\tsubscript = match[ 3 ];\r\n\r\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\r\n\r\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n\t\t\taddUniform( container, subscript === undefined ?\r\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\r\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// step into inner node / create it in case it doesn't exist\r\n\r\n\t\t\tconst map = container.map;\r\n\t\t\tlet next = map[ id ];\r\n\r\n\t\t\tif ( next === undefined ) {\r\n\r\n\t\t\t\tnext = new StructuredUniform( id );\r\n\t\t\t\taddUniform( container, next );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcontainer = next;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Root Container\r\n\r\nfunction WebGLUniforms( gl, program ) {\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35718 );\r\n\r\n\tfor ( let i = 0; i < n; ++ i ) {\r\n\r\n\t\tconst info = gl.getActiveUniform( program, i ),\r\n\t\t\taddr = gl.getUniformLocation( program, info.name );\r\n\r\n\t\tparseUniform( info, addr, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\r\n\r\n\tconst u = this.map[ name ];\r\n\r\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\r\n\r\n};\r\n\r\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\r\n\r\n\tconst v = object[ name ];\r\n\r\n\tif ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n};\r\n\r\n\r\n// Static interface\r\n\r\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ],\r\n\t\t\tv = values[ u.id ];\r\n\r\n\t\tif ( v.needsUpdate !== false ) {\r\n\r\n\t\t\t// note: always updating when .needsUpdate is undefined\r\n\t\t\tu.setValue( gl, v.value, textures );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nWebGLUniforms.seqWithValue = function ( seq, values ) {\r\n\r\n\tconst r = [];\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tif ( u.id in values ) r.push( u );\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n};\r\n\r\nfunction WebGLShader( gl, type, string ) {\r\n\r\n\tconst shader = gl.createShader( type );\r\n\r\n\tgl.shaderSource( shader, string );\r\n\tgl.compileShader( shader );\r\n\r\n\treturn shader;\r\n\r\n}\r\n\r\nlet programIdCount = 0;\r\n\r\nfunction addLineNumbers( string ) {\r\n\r\n\tconst lines = string.split( '\\n' );\r\n\r\n\tfor ( let i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t}\r\n\r\n\treturn lines.join( '\\n' );\r\n\r\n}\r\n\r\nfunction getEncodingComponents( encoding ) {\r\n\r\n\tswitch ( encoding ) {\r\n\r\n\t\tcase LinearEncoding:\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\t\tcase sRGBEncoding:\r\n\t\t\treturn [ 'sRGB', '( value )' ];\r\n\t\tcase RGBEEncoding:\r\n\t\t\treturn [ 'RGBE', '( value )' ];\r\n\t\tcase RGBM7Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\r\n\t\tcase RGBM16Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\r\n\t\tcase RGBDEncoding:\r\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\r\n\t\tcase GammaEncoding:\r\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\r\n\t\tcase LogLuvEncoding:\r\n\t\t\treturn [ 'LogLuv', '( value )' ];\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getShaderErrors( gl, shader, type ) {\r\n\r\n\tconst status = gl.getShaderParameter( shader, 35713 );\r\n\tconst log = gl.getShaderInfoLog( shader ).trim();\r\n\r\n\tif ( status && log === '' ) return '';\r\n\r\n\t// --enable-privileged-webgl-extension\r\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\tconst source = gl.getShaderSource( shader );\r\n\r\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\r\n\r\n}\r\n\r\nfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\tlet toneMappingName;\r\n\r\n\tswitch ( toneMapping ) {\r\n\r\n\t\tcase LinearToneMapping:\r\n\t\t\ttoneMappingName = 'Linear';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ReinhardToneMapping:\r\n\t\t\ttoneMappingName = 'Reinhard';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CineonToneMapping:\r\n\t\t\ttoneMappingName = 'OptimizedCineon';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ACESFilmicToneMapping:\r\n\t\t\ttoneMappingName = 'ACESFilmic';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CustomToneMapping:\r\n\t\t\ttoneMappingName = 'Custom';\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\r\n\t\t\ttoneMappingName = 'Linear';\r\n\r\n\t}\r\n\r\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\r\n\r\n}\r\n\r\nfunction generateExtensions( parameters ) {\r\n\r\n\tconst chunks = [\r\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\r\n\t];\r\n\r\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n}\r\n\r\nfunction generateDefines( defines ) {\r\n\r\n\tconst chunks = [];\r\n\r\n\tfor ( const name in defines ) {\r\n\r\n\t\tconst value = defines[ name ];\r\n\r\n\t\tif ( value === false ) continue;\r\n\r\n\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t}\r\n\r\n\treturn chunks.join( '\\n' );\r\n\r\n}\r\n\r\nfunction fetchAttributeLocations( gl, program ) {\r\n\r\n\tconst attributes = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35721 );\r\n\r\n\tfor ( let i = 0; i < n; i ++ ) {\r\n\r\n\t\tconst info = gl.getActiveAttrib( program, i );\r\n\t\tconst name = info.name;\r\n\r\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\r\n\r\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t}\r\n\r\n\treturn attributes;\r\n\r\n}\r\n\r\nfunction filterEmptyLine( string ) {\r\n\r\n\treturn string !== '';\r\n\r\n}\r\n\r\nfunction replaceLightNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\r\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\r\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\r\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\r\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\r\n\r\n}\r\n\r\nfunction replaceClippingPlaneNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\r\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\r\n\r\n}\r\n\r\n// Resolve Includes\r\n\r\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\r\n\r\nfunction resolveIncludes( string ) {\r\n\r\n\treturn string.replace( includePattern, includeReplacer );\r\n\r\n}\r\n\r\nfunction includeReplacer( match, include ) {\r\n\r\n\tconst string = ShaderChunk[ include ];\r\n\r\n\tif ( string === undefined ) {\r\n\r\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t}\r\n\r\n\treturn resolveIncludes( string );\r\n\r\n}\r\n\r\n// Unroll Loops\r\n\r\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\nconst unrollLoopPattern = /#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;\r\n\r\nfunction unrollLoops( string ) {\r\n\r\n\treturn string\r\n\t\t.replace( unrollLoopPattern, loopReplacer )\r\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\r\n\r\n}\r\n\r\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\r\n\r\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\r\n\treturn loopReplacer( match, start, end, snippet );\r\n\r\n}\r\n\r\nfunction loopReplacer( match, start, end, snippet ) {\r\n\r\n\tlet string = '';\r\n\r\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\tstring += snippet\r\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\r\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\r\n\r\n\t}\r\n\r\n\treturn string;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction generatePrecision( parameters ) {\r\n\r\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\r\n\r\n\tif ( parameters.precision === \"highp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"mediump\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"lowp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\r\n\r\n\t}\r\n\r\n\treturn precisionstring;\r\n\r\n}\r\n\r\nfunction generateShadowMapTypeDefine( parameters ) {\r\n\r\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\r\n\r\n\t}\r\n\r\n\treturn shadowMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapTypeDefine( parameters ) {\r\n\r\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeReflectionMapping:\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CubeUVReflectionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EquirectangularReflectionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapModeDefine( parameters ) {\r\n\r\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\r\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapModeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapBlendingDefine( parameters ) {\r\n\r\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.combine ) {\r\n\r\n\t\t\tcase MultiplyOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MixOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase AddOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapBlendingDefine;\r\n\r\n}\r\n\r\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\r\n\r\n\tconst gl = renderer.getContext();\r\n\r\n\tconst defines = parameters.defines;\r\n\r\n\tlet vertexShader = parameters.vertexShader;\r\n\tlet fragmentShader = parameters.fragmentShader;\r\n\r\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\r\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\r\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\r\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\r\n\r\n\r\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\r\n\r\n\tconst customDefines = generateDefines( defines );\r\n\r\n\tconst program = gl.createProgram();\r\n\r\n\tlet prefixVertex, prefixFragment;\r\n\r\n\tif ( parameters.isRawShaderMaterial ) {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixVertex.length > 0 ) {\r\n\r\n\t\t\tprefixVertex += '\\n';\r\n\r\n\t\t}\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixFragment.length > 0 ) {\r\n\r\n\t\t\tprefixFragment += '\\n';\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\r\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t'#ifdef USE_INSTANCING',\r\n\r\n\t\t\t' attribute mat4 instanceMatrix;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'attribute vec3 position;',\r\n\t\t\t'attribute vec3 normal;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'#ifdef USE_TANGENT',\r\n\r\n\t\t\t'\tattribute vec4 tangent;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t'\t#else',\r\n\r\n\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t'\t#endif',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\r\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\r\n\r\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\r\n\r\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\r\n\r\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\r\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\r\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\r\n\r\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tvertexShader = resolveIncludes( vertexShader );\r\n\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\r\n\r\n\tfragmentShader = resolveIncludes( fragmentShader );\r\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\r\n\r\n\tvertexShader = unrollLoops( vertexShader );\r\n\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\tif ( parameters.isWebGL2 && ! parameters.isRawShaderMaterial ) {\r\n\r\n\t\t// GLSL 3.0 conversion\r\n\r\n\t\tprefixVertex = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define attribute in',\r\n\t\t\t'#define varying out',\r\n\t\t\t'#define texture2D texture'\r\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\r\n\r\n\t\tprefixFragment = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define varying in',\r\n\t\t\t'out highp vec4 pc_fragColor;',\r\n\t\t\t'#define gl_FragColor pc_fragColor',\r\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\r\n\t\t\t'#define texture2D texture',\r\n\t\t\t'#define textureCube texture',\r\n\t\t\t'#define texture2DProj textureProj',\r\n\t\t\t'#define texture2DLodEXT textureLod',\r\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\r\n\t\t\t'#define textureCubeLodEXT textureLod',\r\n\t\t\t'#define texture2DGradEXT textureGrad',\r\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\r\n\t\t\t'#define textureCubeGradEXT textureGrad'\r\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\r\n\r\n\t}\r\n\r\n\tconst vertexGlsl = prefixVertex + vertexShader;\r\n\tconst fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\r\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\r\n\r\n\tgl.attachShader( program, glVertexShader );\r\n\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t// Force a particular attribute to index 0.\r\n\r\n\tif ( parameters.index0AttributeName !== undefined ) {\r\n\r\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\r\n\r\n\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t}\r\n\r\n\tgl.linkProgram( program );\r\n\r\n\t// check for link errors\r\n\tif ( renderer.debug.checkShaderErrors ) {\r\n\r\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\r\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\r\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\r\n\r\n\t\tlet runnable = true;\r\n\t\tlet haveDiagnostics = true;\r\n\r\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\r\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Clean up\r\n\r\n\t// Crashes in iOS9 and iOS10. #18402\r\n\t// gl.detachShader( program, glVertexShader );\r\n\t// gl.detachShader( program, glFragmentShader );\r\n\r\n\tgl.deleteShader( glVertexShader );\r\n\tgl.deleteShader( glFragmentShader );\r\n\r\n\t// set up caching for uniform locations\r\n\r\n\tlet cachedUniforms;\r\n\r\n\tthis.getUniforms = function () {\r\n\r\n\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedUniforms;\r\n\r\n\t};\r\n\r\n\t// set up caching for attribute locations\r\n\r\n\tlet cachedAttributes;\r\n\r\n\tthis.getAttributes = function () {\r\n\r\n\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedAttributes;\r\n\r\n\t};\r\n\r\n\t// free resource\r\n\r\n\tthis.destroy = function () {\r\n\r\n\t\tbindingStates.releaseStatesOfProgram( this );\r\n\r\n\t\tgl.deleteProgram( program );\r\n\t\tthis.program = undefined;\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.name = parameters.shaderName;\r\n\tthis.id = programIdCount ++;\r\n\tthis.cacheKey = cacheKey;\r\n\tthis.usedTimes = 1;\r\n\tthis.program = program;\r\n\tthis.vertexShader = glVertexShader;\r\n\tthis.fragmentShader = glFragmentShader;\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nfunction WebGLPrograms( renderer, extensions, capabilities, bindingStates ) {\r\n\r\n\tconst programs = [];\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\r\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\r\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\r\n\tconst vertexTextures = capabilities.vertexTextures;\r\n\r\n\tlet precision = capabilities.precision;\r\n\r\n\tconst shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshDistanceMaterial: 'distanceRGBA',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshToonMaterial: 'toon',\r\n\t\tMeshStandardMaterial: 'physical',\r\n\t\tMeshPhysicalMaterial: 'physical',\r\n\t\tMeshMatcapMaterial: 'matcap',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points',\r\n\t\tShadowMaterial: 'shadow',\r\n\t\tSpriteMaterial: 'sprite'\r\n\t};\r\n\r\n\tconst parameterNames = [\r\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\",\r\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\r\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\r\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\r\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\r\n\t\t\"sheen\", \"transmissionMap\"\r\n\t];\r\n\r\n\tfunction allocateBones( object ) {\r\n\r\n\t\tconst skeleton = object.skeleton;\r\n\t\tconst bones = skeleton.bones;\r\n\r\n\t\tif ( floatVertexTextures ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\r\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\r\n\r\n\t\t\tif ( maxBones < bones.length ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map ) {\r\n\r\n\t\tlet encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = LinearEncoding;\r\n\r\n\t\t} else if ( map.isTexture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map.isWebGLRenderTarget ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tfunction getParameters( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tconst maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet vertexShader, fragmentShader;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\r\n\t\t\tvertexShader = shader.vertexShader;\r\n\t\t\tfragmentShader = shader.fragmentShader;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvertexShader = material.vertexShader;\r\n\t\t\tfragmentShader = material.fragmentShader;\r\n\r\n\t\t}\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tconst parameters = {\r\n\r\n\t\t\tisWebGL2: isWebGL2,\r\n\r\n\t\t\tshaderID: shaderID,\r\n\t\t\tshaderName: material.type,\r\n\r\n\t\t\tvertexShader: vertexShader,\r\n\t\t\tfragmentShader: fragmentShader,\r\n\t\t\tdefines: material.defines,\r\n\r\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial,\r\n\t\t\tisShaderMaterial: material.isShaderMaterial,\r\n\r\n\t\t\tprecision: precision,\r\n\r\n\t\t\tinstancing: object.isInstancedMesh === true,\r\n\r\n\t\t\tsupportsVertexTextures: vertexTextures,\r\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\r\n\t\t\tmatcap: !! material.matcap,\r\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\r\n\t\t\tenvMap: !! envMap,\r\n\t\t\tenvMapMode: envMap && envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\r\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\r\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\r\n\t\t\tclearcoatMap: !! material.clearcoatMap,\r\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\r\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tgradientMap: !! material.gradientMap,\r\n\r\n\t\t\tsheen: !! material.sheen,\r\n\r\n\t\t\ttransmissionMap: !! material.transmissionMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\r\n\t\t\tvertexColors: material.vertexColors,\r\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\r\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\r\n\r\n\t\t\tfog: !! fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\r\n\r\n\t\t\tflatShading: material.flatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning && maxBones > 0,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: floatVertexTextures,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumRectAreaLights: lights.rectArea.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\r\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\r\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\r\n\r\n\t\t\tnumClippingPlanes: nClipPlanes,\r\n\t\t\tnumClipIntersection: nClipIntersection,\r\n\r\n\t\t\tdithering: material.dithering,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === DoubleSide,\r\n\t\t\tflipSided: material.side === BackSide,\r\n\r\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\r\n\r\n\t\t\tindex0AttributeName: material.index0AttributeName,\r\n\r\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\r\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\r\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\r\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\r\n\r\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\r\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\r\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\r\n\r\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t}\r\n\r\n\tfunction getProgramCacheKey( parameters ) {\r\n\r\n\t\tconst array = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tarray.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.push( parameters.fragmentShader );\r\n\t\t\tarray.push( parameters.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.defines !== undefined ) {\r\n\r\n\t\t\tfor ( const name in parameters.defines ) {\r\n\r\n\t\t\t\tarray.push( name );\r\n\t\t\t\tarray.push( parameters.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.isRawShaderMaterial === undefined ) {\r\n\r\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray.push( renderer.outputEncoding );\r\n\t\t\tarray.push( renderer.gammaFactor );\r\n\r\n\t\t}\r\n\r\n\t\tarray.push( parameters.customProgramCacheKey );\r\n\r\n\t\treturn array.join();\r\n\r\n\t}\r\n\r\n\tfunction getUniforms( material ) {\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\t\tlet uniforms;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms = material.uniforms;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction acquireProgram( parameters, cacheKey ) {\r\n\r\n\t\tlet program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tconst preexistingProgram = programs[ p ];\r\n\r\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\r\n\r\n\t\t\t\tprogram = preexistingProgram;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction releaseProgram( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tconst i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetParameters: getParameters,\r\n\t\tgetProgramCacheKey: getProgramCacheKey,\r\n\t\tgetUniforms: getUniforms,\r\n\t\tacquireProgram: acquireProgram,\r\n\t\treleaseProgram: releaseProgram,\r\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\t\tprograms: programs\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLProperties() {\r\n\r\n\tlet properties = new WeakMap();\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tlet map = properties.get( object );\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties.set( object, map );\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t}\r\n\r\n\tfunction remove( object ) {\r\n\r\n\t\tproperties.delete( object );\r\n\r\n\t}\r\n\r\n\tfunction update( object, key, value ) {\r\n\r\n\t\tproperties.get( object )[ key ] = value;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tproperties = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction painterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.program !== b.program ) {\r\n\r\n\t\treturn a.program.id - b.program.id;\r\n\r\n\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\treturn a.material.id - b.material.id;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn a.z - b.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction reversePainterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn b.z - a.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction WebGLRenderList( properties ) {\r\n\r\n\tconst renderItems = [];\r\n\tlet renderItemsIndex = 0;\r\n\r\n\tconst opaque = [];\r\n\tconst transparent = [];\r\n\r\n\tconst defaultProgram = { id: - 1 };\r\n\r\n\tfunction init() {\r\n\r\n\t\trenderItemsIndex = 0;\r\n\r\n\t\topaque.length = 0;\r\n\t\ttransparent.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tif ( renderItem === undefined ) {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\r\n\t\t\t\tgroupOrder: groupOrder,\r\n\t\t\t\trenderOrder: object.renderOrder,\r\n\t\t\t\tz: z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\r\n\t\t\trenderItem.groupOrder = groupOrder;\r\n\t\t\trenderItem.renderOrder = object.renderOrder;\r\n\t\t\trenderItem.z = z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t}\r\n\r\n\t\trenderItemsIndex ++;\r\n\r\n\t\treturn renderItem;\r\n\r\n\t}\r\n\r\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\r\n\r\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\r\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\r\n\r\n\t}\r\n\r\n\tfunction finish() {\r\n\r\n\t\t// Clear references from inactive renderItems in the list\r\n\r\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderItems[ i ];\r\n\r\n\t\t\tif ( renderItem.id === null ) break;\r\n\r\n\t\t\trenderItem.id = null;\r\n\t\t\trenderItem.object = null;\r\n\t\t\trenderItem.geometry = null;\r\n\t\t\trenderItem.material = null;\r\n\t\t\trenderItem.program = null;\r\n\t\t\trenderItem.group = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\topaque: opaque,\r\n\t\ttransparent: transparent,\r\n\r\n\t\tinit: init,\r\n\t\tpush: push,\r\n\t\tunshift: unshift,\r\n\t\tfinish: finish,\r\n\r\n\t\tsort: sort\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderLists( properties ) {\r\n\r\n\tlet lists = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\tlists.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tconst cameras = lists.get( scene );\r\n\t\tlet list;\r\n\r\n\t\tif ( cameras === undefined ) {\r\n\r\n\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\tlists.set( scene, new WeakMap() );\r\n\t\t\tlists.get( scene ).set( camera, list );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlist = cameras.get( camera );\r\n\t\t\tif ( list === undefined ) {\r\n\r\n\t\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\t\tcameras.set( camera, list );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tlists = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction UniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tskyColor: new Color(),\r\n\t\t\t\t\t\tgroundColor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'RectAreaLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\thalfWidth: new Vector3(),\r\n\t\t\t\t\t\thalfHeight: new Vector3()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction ShadowUniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\r\n\t\t\t\t\t\tshadowCameraNear: 1,\r\n\t\t\t\t\t\tshadowCameraFar: 1000\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n\r\n\r\nlet nextVersion = 0;\r\n\r\nfunction shadowCastingLightsFirst( lightA, lightB ) {\r\n\r\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\r\n\r\n}\r\n\r\nfunction WebGLLights() {\r\n\r\n\tconst cache = new UniformsCache();\r\n\r\n\tconst shadowCache = ShadowUniformsCache();\r\n\r\n\tconst state = {\r\n\r\n\t\tversion: 0,\r\n\r\n\t\thash: {\r\n\t\t\tdirectionalLength: - 1,\r\n\t\t\tpointLength: - 1,\r\n\t\t\tspotLength: - 1,\r\n\t\t\trectAreaLength: - 1,\r\n\t\t\themiLength: - 1,\r\n\r\n\t\t\tnumDirectionalShadows: - 1,\r\n\t\t\tnumPointShadows: - 1,\r\n\t\t\tnumSpotShadows: - 1\r\n\t\t},\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tprobe: [],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadow: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadow: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\trectArea: [],\r\n\t\tpoint: [],\r\n\t\tpointShadow: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: []\r\n\r\n\t};\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\r\n\r\n\tconst vector3 = new Vector3();\r\n\tconst matrix4 = new Matrix4();\r\n\tconst matrix42 = new Matrix4();\r\n\r\n\tfunction setup( lights, shadows, camera ) {\r\n\r\n\t\tlet r = 0, g = 0, b = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\r\n\r\n\t\tlet directionalLength = 0;\r\n\t\tlet pointLength = 0;\r\n\t\tlet spotLength = 0;\r\n\t\tlet rectAreaLength = 0;\r\n\t\tlet hemiLength = 0;\r\n\r\n\t\tlet numDirectionalShadows = 0;\r\n\t\tlet numPointShadows = 0;\r\n\t\tlet numSpotShadows = 0;\r\n\r\n\t\tconst viewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\tlights.sort( shadowCastingLightsFirst );\r\n\r\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\r\n\t\t\tconst color = light.color;\r\n\t\t\tconst intensity = light.intensity;\r\n\t\t\tconst distance = light.distance;\r\n\r\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n\t\t\tif ( light.isAmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light.isLightProbe ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\r\n\r\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( light.isDirectionalLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\r\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumDirectionalShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\r\n\r\n\t\t\t\tdirectionalLength ++;\r\n\r\n\t\t\t} else if ( light.isSpotLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\r\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumSpotShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\r\n\r\n\t\t\t\tspotLength ++;\r\n\r\n\t\t\t} else if ( light.isRectAreaLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\t// (a) intensity is the total visible light emitted\r\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\r\n\r\n\t\t\t\t// (b) intensity is the brightness of the light\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\r\n\t\t\t\tmatrix42.identity();\r\n\t\t\t\tmatrix4.copy( light.matrixWorld );\r\n\t\t\t\tmatrix4.premultiply( viewMatrix );\r\n\t\t\t\tmatrix42.extractRotation( matrix4 );\r\n\r\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\r\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\r\n\r\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\r\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\r\n\r\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\r\n\t\t\t\t// uniforms.distance = distance;\r\n\r\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\r\n\r\n\t\t\t\trectAreaLength ++;\r\n\r\n\t\t\t} else if ( light.isPointLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\r\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\r\n\r\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\r\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumPointShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.point[ pointLength ] = uniforms;\r\n\r\n\t\t\t\tpointLength ++;\r\n\r\n\t\t\t} else if ( light.isHemisphereLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\r\n\r\n\t\t\t\themiLength ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.ambient[ 0 ] = r;\r\n\t\tstate.ambient[ 1 ] = g;\r\n\t\tstate.ambient[ 2 ] = b;\r\n\r\n\t\tconst hash = state.hash;\r\n\r\n\t\tif ( hash.directionalLength !== directionalLength ||\r\n\t\t\thash.pointLength !== pointLength ||\r\n\t\t\thash.spotLength !== spotLength ||\r\n\t\t\thash.rectAreaLength !== rectAreaLength ||\r\n\t\t\thash.hemiLength !== hemiLength ||\r\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\r\n\t\t\thash.numPointShadows !== numPointShadows ||\r\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\r\n\r\n\t\t\tstate.directional.length = directionalLength;\r\n\t\t\tstate.spot.length = spotLength;\r\n\t\t\tstate.rectArea.length = rectAreaLength;\r\n\t\t\tstate.point.length = pointLength;\r\n\t\t\tstate.hemi.length = hemiLength;\r\n\r\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\r\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadow.length = numPointShadows;\r\n\t\t\tstate.pointShadowMap.length = numPointShadows;\r\n\t\t\tstate.spotShadow.length = numSpotShadows;\r\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\r\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\r\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\r\n\r\n\t\t\thash.directionalLength = directionalLength;\r\n\t\t\thash.pointLength = pointLength;\r\n\t\t\thash.spotLength = spotLength;\r\n\t\t\thash.rectAreaLength = rectAreaLength;\r\n\t\t\thash.hemiLength = hemiLength;\r\n\r\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\r\n\t\t\thash.numPointShadows = numPointShadows;\r\n\t\t\thash.numSpotShadows = numSpotShadows;\r\n\r\n\t\t\tstate.version = nextVersion ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tsetup: setup,\r\n\t\tstate: state\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderState() {\r\n\r\n\tconst lights = new WebGLLights();\r\n\r\n\tconst lightsArray = [];\r\n\tconst shadowsArray = [];\r\n\r\n\tfunction init() {\r\n\r\n\t\tlightsArray.length = 0;\r\n\t\tshadowsArray.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction pushLight( light ) {\r\n\r\n\t\tlightsArray.push( light );\r\n\r\n\t}\r\n\r\n\tfunction pushShadow( shadowLight ) {\r\n\r\n\t\tshadowsArray.push( shadowLight );\r\n\r\n\t}\r\n\r\n\tfunction setupLights( camera ) {\r\n\r\n\t\tlights.setup( lightsArray, shadowsArray, camera );\r\n\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tlightsArray: lightsArray,\r\n\t\tshadowsArray: shadowsArray,\r\n\r\n\t\tlights: lights\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: init,\r\n\t\tstate: state,\r\n\t\tsetupLights: setupLights,\r\n\r\n\t\tpushLight: pushLight,\r\n\t\tpushShadow: pushShadow\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderStates() {\r\n\r\n\tlet renderStates = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\trenderStates.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tlet renderState;\r\n\r\n\t\tif ( renderStates.has( scene ) === false ) {\r\n\r\n\t\t\trenderState = new WebGLRenderState();\r\n\t\t\trenderStates.set( scene, new WeakMap() );\r\n\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\r\n\r\n\t\t\t\trenderState = new WebGLRenderState();\r\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn renderState;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\trenderStates = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nfunction MeshDepthMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.depthPacking = BasicDepthPacking;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\r\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\r\n\r\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\r\n\r\nMeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.depthPacking = source.depthPacking;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  referencePosition: <float>,\r\n *  nearDistance: <float>,\r\n *  farDistance: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>\r\n *\r\n * }\r\n */\r\n\r\nfunction MeshDistanceMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDistanceMaterial';\r\n\r\n\tthis.referencePosition = new Vector3();\r\n\tthis.nearDistance = 1;\r\n\tthis.farDistance = 1000;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\r\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\r\n\r\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\r\n\r\nMeshDistanceMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.referencePosition.copy( source.referencePosition );\r\n\tthis.nearDistance = source.nearDistance;\r\n\tthis.farDistance = source.farDistance;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\r\n\r\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\r\n\r\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\r\n\r\n\tlet _frustum = new Frustum();\r\n\r\n\tconst _shadowMapSize = new Vector2(),\r\n\t\t_viewportSize = new Vector2(),\r\n\r\n\t\t_viewport = new Vector4(),\r\n\r\n\t\t_depthMaterials = [],\r\n\t\t_distanceMaterials = [],\r\n\r\n\t\t_materialCache = {};\r\n\r\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\r\n\r\n\tconst shadowMaterialVertical = new ShaderMaterial( {\r\n\r\n\t\tdefines: {\r\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\r\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\r\n\t\t},\r\n\r\n\t\tuniforms: {\r\n\t\t\tshadow_pass: { value: null },\r\n\t\t\tresolution: { value: new Vector2() },\r\n\t\t\tradius: { value: 4.0 }\r\n\t\t},\r\n\r\n\t\tvertexShader: vsm_vert,\r\n\r\n\t\tfragmentShader: vsm_frag\r\n\r\n\t} );\r\n\r\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\r\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\r\n\r\n\tconst fullScreenTri = new BufferGeometry();\r\n\tfullScreenTri.setAttribute(\r\n\t\t\"position\",\r\n\t\tnew BufferAttribute(\r\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\r\n\t\t\t3\r\n\t\t)\r\n\t);\r\n\r\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = PCFShadowMap;\r\n\r\n\tthis.render = function ( lights, scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\tif ( lights.length === 0 ) return;\r\n\r\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\r\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\r\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\r\n\r\n\t\tconst _state = _renderer.state;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.setBlending( NoBlending );\r\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\r\n\t\t_state.buffers.depth.setTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\r\n\r\n\t\t\tif ( shadow === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\r\n\r\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\r\n\r\n\t\t\t_viewportSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\r\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\r\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\r\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\r\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\tconst viewportCount = shadow.getViewportCount();\r\n\r\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\r\n\r\n\t\t\t\tconst viewport = shadow.getViewport( vp );\r\n\r\n\t\t\t\t_viewport.set(\r\n\t\t\t\t\t_viewportSize.x * viewport.x,\r\n\t\t\t\t\t_viewportSize.y * viewport.y,\r\n\t\t\t\t\t_viewportSize.x * viewport.z,\r\n\t\t\t\t\t_viewportSize.y * viewport.w\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_state.viewport( _viewport );\r\n\r\n\t\t\t\tshadow.updateMatrices( light, vp );\r\n\r\n\t\t\t\t_frustum = shadow.getFrustum();\r\n\r\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// do blur pass for VSM\r\n\r\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tVSMPass( shadow, camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tshadow.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\r\n\r\n\t};\r\n\r\n\tfunction VSMPass( shadow, camera ) {\r\n\r\n\t\tconst geometry = _objects.update( fullScreenMesh );\r\n\r\n\t\t// vertical pass\r\n\r\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\r\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.mapPass );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\r\n\r\n\t\t// horizonal pass\r\n\r\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\r\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _depthMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDepthMaterial( {\r\n\r\n\t\t\t\tdepthPacking: RGBADepthPacking,\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_depthMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _distanceMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDistanceMaterial( {\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_distanceMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\r\n\r\n\t\tlet result = null;\r\n\r\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\r\n\t\tlet customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( light.isPointLight === true ) {\r\n\r\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( customMaterial === undefined ) {\r\n\r\n\t\t\tlet useMorphing = false;\r\n\r\n\t\t\tif ( material.morphTargets === true ) {\r\n\r\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet useSkinning = false;\r\n\r\n\t\t\tif ( object.isSkinnedMesh === true ) {\r\n\r\n\t\t\t\tif ( material.skinning === true ) {\r\n\r\n\t\t\t\t\tuseSkinning = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\r\n\r\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _renderer.localClippingEnabled &&\r\n\t\t\t\tmaterial.clipShadows === true &&\r\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\r\n\r\n\t\t\t// in this case we need a unique material instance reflecting the\r\n\t\t\t// appropriate state\r\n\r\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\r\n\r\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\r\n\r\n\t\t\tif ( materialsForVariant === undefined ) {\r\n\r\n\t\t\t\tmaterialsForVariant = {};\r\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n\t\t\tif ( cachedMaterial === undefined ) {\r\n\r\n\t\t\t\tcachedMaterial = result.clone();\r\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tresult.visible = material.visible;\r\n\t\tresult.wireframe = material.wireframe;\r\n\r\n\t\tif ( type === VSMShadowMap ) {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\r\n\r\n\t\t}\r\n\r\n\t\tresult.clipShadows = material.clipShadows;\r\n\t\tresult.clippingPlanes = material.clippingPlanes;\r\n\t\tresult.clipIntersection = material.clipIntersection;\r\n\r\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\tresult.linewidth = material.linewidth;\r\n\r\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\r\n\r\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tresult.nearDistance = shadowCameraNear;\r\n\t\t\tresult.farDistance = shadowCameraFar;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\r\n\r\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\r\n\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n\t\t\t\tconst geometry = _objects.update( object );\r\n\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ k ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLState( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction ColorBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tconst color = new Vector4();\r\n\t\tlet currentColorMask = null;\r\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetMask: function ( colorMask ) {\r\n\r\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n\t\t\t\t\tcurrentColorMask = colorMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha === true ) {\r\n\r\n\t\t\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolor.set( r, g, b, a );\r\n\r\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\r\n\r\n\t\t\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\t\t\tcurrentColorClear.copy( color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentColorMask = null;\r\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction DepthBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentDepthMask = null;\r\n\t\tlet currentDepthFunc = null;\r\n\t\tlet currentDepthClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( depthTest ) {\r\n\r\n\t\t\t\tif ( depthTest ) {\r\n\r\n\t\t\t\t\tenable( 2929 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdisable( 2929 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( depthMask ) {\r\n\r\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.depthMask( depthMask );\r\n\t\t\t\t\tcurrentDepthMask = depthMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( depthFunc ) {\r\n\r\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\t\t\tcase NeverDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase AlwaysDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase EqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase NotEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( depth ) {\r\n\r\n\t\t\t\tif ( currentDepthClear !== depth ) {\r\n\r\n\t\t\t\t\tgl.clearDepth( depth );\r\n\t\t\t\t\tcurrentDepthClear = depth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentDepthMask = null;\r\n\t\t\t\tcurrentDepthFunc = null;\r\n\t\t\t\tcurrentDepthClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction StencilBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentStencilMask = null;\r\n\t\tlet currentStencilFunc = null;\r\n\t\tlet currentStencilRef = null;\r\n\t\tlet currentStencilFuncMask = null;\r\n\t\tlet currentStencilFail = null;\r\n\t\tlet currentStencilZFail = null;\r\n\t\tlet currentStencilZPass = null;\r\n\t\tlet currentStencilClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( stencilTest ) {\r\n\r\n\t\t\t\tif ( ! locked ) {\r\n\r\n\t\t\t\t\tif ( stencilTest ) {\r\n\r\n\t\t\t\t\t\tenable( 2960 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tdisable( 2960 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.stencilMask( stencilMask );\r\n\t\t\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\r\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\r\n\r\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\t\t\tcurrentStencilRef = stencilRef;\r\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\r\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n\t\t\t\t\tcurrentStencilFail = stencilFail;\r\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( stencil ) {\r\n\r\n\t\t\t\tif ( currentStencilClear !== stencil ) {\r\n\r\n\t\t\t\t\tgl.clearStencil( stencil );\r\n\t\t\t\t\tcurrentStencilClear = stencil;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentStencilMask = null;\r\n\t\t\t\tcurrentStencilFunc = null;\r\n\t\t\t\tcurrentStencilRef = null;\r\n\t\t\t\tcurrentStencilFuncMask = null;\r\n\t\t\t\tcurrentStencilFail = null;\r\n\t\t\t\tcurrentStencilZFail = null;\r\n\t\t\t\tcurrentStencilZPass = null;\r\n\t\t\t\tcurrentStencilClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst colorBuffer = new ColorBuffer();\r\n\tconst depthBuffer = new DepthBuffer();\r\n\tconst stencilBuffer = new StencilBuffer();\r\n\r\n\tlet enabledCapabilities = {};\r\n\r\n\tlet currentProgram = null;\r\n\r\n\tlet currentBlendingEnabled = null;\r\n\tlet currentBlending = null;\r\n\tlet currentBlendEquation = null;\r\n\tlet currentBlendSrc = null;\r\n\tlet currentBlendDst = null;\r\n\tlet currentBlendEquationAlpha = null;\r\n\tlet currentBlendSrcAlpha = null;\r\n\tlet currentBlendDstAlpha = null;\r\n\tlet currentPremultipledAlpha = false;\r\n\r\n\tlet currentFlipSided = null;\r\n\tlet currentCullFace = null;\r\n\r\n\tlet currentLineWidth = null;\r\n\r\n\tlet currentPolygonOffsetFactor = null;\r\n\tlet currentPolygonOffsetUnits = null;\r\n\r\n\tconst maxTextures = gl.getParameter( 35661 );\r\n\r\n\tlet lineWidthAvailable = false;\r\n\tlet version = 0;\r\n\tconst glVersion = gl.getParameter( 7938 );\r\n\r\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 1.0 );\r\n\r\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 2.0 );\r\n\r\n\t}\r\n\r\n\tlet currentTextureSlot = null;\r\n\tlet currentBoundTextures = {};\r\n\r\n\tconst currentScissor = new Vector4();\r\n\tconst currentViewport = new Vector4();\r\n\r\n\tfunction createTexture( type, target, count ) {\r\n\r\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\r\n\t\tconst texture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( type, texture );\r\n\t\tgl.texParameteri( type, 10241, 9728 );\r\n\t\tgl.texParameteri( type, 10240, 9728 );\r\n\r\n\t\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\tconst emptyTextures = {};\r\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\r\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\r\n\r\n\t// init\r\n\r\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\r\n\tdepthBuffer.setClear( 1 );\r\n\tstencilBuffer.setClear( 0 );\r\n\r\n\tenable( 2929 );\r\n\tdepthBuffer.setFunc( LessEqualDepth );\r\n\r\n\tsetFlipSided( false );\r\n\tsetCullFace( CullFaceBack );\r\n\tenable( 2884 );\r\n\r\n\tsetBlending( NoBlending );\r\n\r\n\t//\r\n\r\n\tfunction enable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tenabledCapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tenabledCapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction useProgram( program ) {\r\n\r\n\t\tif ( currentProgram !== program ) {\r\n\r\n\t\t\tgl.useProgram( program );\r\n\r\n\t\t\tcurrentProgram = program;\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tconst equationToGL = {\r\n\t\t[ AddEquation ]: 32774,\r\n\t\t[ SubtractEquation ]: 32778,\r\n\t\t[ ReverseSubtractEquation ]: 32779\r\n\t};\r\n\r\n\tif ( isWebGL2 ) {\r\n\r\n\t\tequationToGL[ MinEquation ] = 32775;\r\n\t\tequationToGL[ MaxEquation ] = 32776;\r\n\r\n\t} else {\r\n\r\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\r\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst factorToGL = {\r\n\t\t[ ZeroFactor ]: 0,\r\n\t\t[ OneFactor ]: 1,\r\n\t\t[ SrcColorFactor ]: 768,\r\n\t\t[ SrcAlphaFactor ]: 770,\r\n\t\t[ SrcAlphaSaturateFactor ]: 776,\r\n\t\t[ DstColorFactor ]: 774,\r\n\t\t[ DstAlphaFactor ]: 772,\r\n\t\t[ OneMinusSrcColorFactor ]: 769,\r\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\r\n\t\t[ OneMinusDstColorFactor ]: 775,\r\n\t\t[ OneMinusDstAlphaFactor ]: 773\r\n\t};\r\n\r\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending === NoBlending ) {\r\n\r\n\t\t\tif ( currentBlendingEnabled ) {\r\n\r\n\t\t\t\tdisable( 3042 );\r\n\t\t\t\tcurrentBlendingEnabled = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! currentBlendingEnabled ) {\r\n\r\n\t\t\tenable( 3042 );\r\n\t\t\tcurrentBlendingEnabled = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== CustomBlending ) {\r\n\r\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\r\n\r\n\t\t\t\t\tgl.blendEquation( 32774 );\r\n\r\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\r\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentBlendSrc = null;\r\n\t\t\t\tcurrentBlendDst = null;\r\n\t\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t\t\tcurrentBlending = blending;\r\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// custom blending\r\n\r\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\r\n\r\n\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\r\n\r\n\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentBlending = blending;\r\n\t\tcurrentPremultipledAlpha = null;\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material, frontFaceCW ) {\r\n\r\n\t\tmaterial.side === DoubleSide\r\n\t\t\t? disable( 2884 )\r\n\t\t\t: enable( 2884 );\r\n\r\n\t\tlet flipSided = ( material.side === BackSide );\r\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\r\n\r\n\t\tsetFlipSided( flipSided );\r\n\r\n\t\t( material.blending === NormalBlending && material.transparent === false )\r\n\t\t\t? setBlending( NoBlending )\r\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\tdepthBuffer.setFunc( material.depthFunc );\r\n\t\tdepthBuffer.setTest( material.depthTest );\r\n\t\tdepthBuffer.setMask( material.depthWrite );\r\n\t\tcolorBuffer.setMask( material.colorWrite );\r\n\r\n\t\tconst stencilWrite = material.stencilWrite;\r\n\t\tstencilBuffer.setTest( stencilWrite );\r\n\t\tif ( stencilWrite ) {\r\n\r\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\r\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\r\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\r\n\r\n\t\t}\r\n\r\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setFlipSided( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( 2304 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( 2305 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCullFace( cullFace ) {\r\n\r\n\t\tif ( cullFace !== CullFaceNone ) {\r\n\r\n\t\t\tenable( 2884 );\r\n\r\n\t\t\tif ( cullFace !== currentCullFace ) {\r\n\r\n\t\t\t\tif ( cullFace === CullFaceBack ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1029 );\r\n\r\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1028 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.cullFace( 1032 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 2884 );\r\n\r\n\t\t}\r\n\r\n\t\tcurrentCullFace = cullFace;\r\n\r\n\t}\r\n\r\n\tfunction setLineWidth( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tenable( 32823 );\r\n\r\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 32823 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setScissorTest( scissorTest ) {\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tenable( 3089 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 3089 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// texture\r\n\r\n\tfunction activeTexture( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction bindTexture( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === null ) {\r\n\r\n\t\t\tactiveTexture();\r\n\r\n\t\t}\r\n\r\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction unbindTexture() {\r\n\r\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\r\n\r\n\t\t\tgl.bindTexture( boundTexture.type, null );\r\n\r\n\t\t\tboundTexture.type = undefined;\r\n\t\t\tboundTexture.texture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction compressedTexImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage3D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage3D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction scissor( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction viewport( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction reset() {\r\n\r\n\t\tenabledCapabilities = {};\r\n\r\n\t\tcurrentTextureSlot = null;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentProgram = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\t\tcurrentCullFace = null;\r\n\r\n\t\tcolorBuffer.reset();\r\n\t\tdepthBuffer.reset();\r\n\t\tstencilBuffer.reset();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tbuffers: {\r\n\t\t\tcolor: colorBuffer,\r\n\t\t\tdepth: depthBuffer,\r\n\t\t\tstencil: stencilBuffer\r\n\t\t},\r\n\r\n\t\tenable: enable,\r\n\t\tdisable: disable,\r\n\r\n\t\tuseProgram: useProgram,\r\n\r\n\t\tsetBlending: setBlending,\r\n\t\tsetMaterial: setMaterial,\r\n\r\n\t\tsetFlipSided: setFlipSided,\r\n\t\tsetCullFace: setCullFace,\r\n\r\n\t\tsetLineWidth: setLineWidth,\r\n\t\tsetPolygonOffset: setPolygonOffset,\r\n\r\n\t\tsetScissorTest: setScissorTest,\r\n\r\n\t\tactiveTexture: activeTexture,\r\n\t\tbindTexture: bindTexture,\r\n\t\tunbindTexture: unbindTexture,\r\n\t\tcompressedTexImage2D: compressedTexImage2D,\r\n\t\ttexImage2D: texImage2D,\r\n\t\ttexImage3D: texImage3D,\r\n\r\n\t\tscissor: scissor,\r\n\t\tviewport: viewport,\r\n\r\n\t\treset: reset\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst maxTextures = capabilities.maxTextures;\r\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\r\n\tconst maxTextureSize = capabilities.maxTextureSize;\r\n\tconst maxSamples = capabilities.maxSamples;\r\n\r\n\tconst _videoTextures = new WeakMap();\r\n\tlet _canvas;\r\n\r\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\r\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\r\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\r\n\r\n\tlet useOffscreenCanvas = false;\r\n\r\n\ttry {\r\n\r\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\r\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\r\n\r\n\t} catch ( err ) {\r\n\r\n\t\t// Ignore any errors\r\n\r\n\t}\r\n\r\n\tfunction createCanvas( width, height ) {\r\n\r\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\r\n\r\n\t\treturn useOffscreenCanvas ?\r\n\t\t\tnew OffscreenCanvas( width, height ) :\r\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t}\r\n\r\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\r\n\r\n\t\tlet scale = 1;\r\n\r\n\t\t// handle case if texture exceeds max size\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\t// only perform resize if necessary\r\n\r\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\r\n\r\n\t\t\t// only perform resize for certain image types\r\n\r\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\r\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\r\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\r\n\r\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\r\n\r\n\t\t\t\tconst width = floor( scale * image.width );\r\n\t\t\t\tconst height = floor( scale * image.height );\r\n\r\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\r\n\r\n\t\t\t\t// cube textures can't reuse the same canvas\r\n\r\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\r\n\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tconst context = canvas.getContext( '2d' );\r\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\r\n\r\n\t\t\t\treturn canvas;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( 'data' in image ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn image;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( isWebGL2 ) return false;\r\n\r\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\r\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\r\n\r\n\t\treturn texture.generateMipmaps && supportsMips &&\r\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n\t}\r\n\r\n\tfunction generateMipmap( target, texture, width, height ) {\r\n\r\n\t\t_gl.generateMipmap( target );\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\r\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\r\n\r\n\t}\r\n\r\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\r\n\r\n\t\tif ( isWebGL2 === false ) return glFormat;\r\n\r\n\t\tif ( internalFormatName !== null ) {\r\n\r\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\r\n\r\n\t\t}\r\n\r\n\t\tlet internalFormat = glFormat;\r\n\r\n\t\tif ( glFormat === 6403 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6407 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6408 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\r\n\r\n\t\t}\r\n\r\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\r\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\r\n\r\n\t\t\textensions.get( 'EXT_color_buffer_float' );\r\n\r\n\t\t}\r\n\r\n\t\treturn internalFormat;\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback( f ) {\r\n\r\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\r\n\r\n\t\t\treturn 9728;\r\n\r\n\t\t}\r\n\r\n\t\treturn 9729;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tconst texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) {\r\n\r\n\t\t\t_videoTextures.delete( texture );\r\n\r\n\t\t}\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tconst renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\tproperties.remove( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget ) return;\r\n\r\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\trenderTarget.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.remove( renderTarget.texture );\r\n\t\tproperties.remove( renderTarget );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tlet textureUnits = 0;\r\n\r\n\tfunction resetTextureUnits() {\r\n\r\n\t\ttextureUnits = 0;\r\n\r\n\t}\r\n\r\n\tfunction allocateTextureUnit() {\r\n\r\n\t\tconst textureUnit = textureUnits;\r\n\r\n\t\tif ( textureUnit >= maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\ttextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setTexture2D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tconst image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\r\n\r\n\t\t\t} else if ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture2DArray( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture3D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture.image.length !== 6 ) return;\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\r\n\t\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\r\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\r\n\r\n\t\t\tconst cubeImage = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst image = cubeImage[ 0 ],\r\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\t\tglFormat = utils.convert( texture.format ),\r\n\t\t\t\tglType = utils.convert( texture.type ),\r\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\r\n\r\n\t\t\tlet mipmaps;\r\n\r\n\t\t\tif ( isCompressed ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmipmaps = texture.mipmaps;\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\t\t// We assume images for cube map have the same size.\r\n\t\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setTextureCubeDynamic( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 34067, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\tconst wrappingToGL = {\r\n\t\t[ RepeatWrapping ]: 10497,\r\n\t\t[ ClampToEdgeWrapping ]: 33071,\r\n\t\t[ MirroredRepeatWrapping ]: 33648\r\n\t};\r\n\r\n\tconst filterToGL = {\r\n\t\t[ NearestFilter ]: 9728,\r\n\t\t[ NearestMipmapNearestFilter ]: 9984,\r\n\t\t[ NearestMipmapLinearFilter ]: 9986,\r\n\r\n\t\t[ LinearFilter ]: 9729,\r\n\t\t[ LinearMipmapNearestFilter ]: 9985,\r\n\t\t[ LinearMipmapLinearFilter ]: 9987\r\n\t};\r\n\r\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\r\n\r\n\t\tif ( supportsMips ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\r\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\r\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initTexture( textureProperties, texture ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\tinfo.memory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tlet textureType = 3553;\r\n\r\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\r\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\r\n\r\n\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\r\n\r\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\r\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\r\n\r\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\tglFormat = utils.convert( texture.format );\r\n\r\n\t\tlet glType = utils.convert( texture.type ),\r\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\tsetTextureParameters( textureType, texture, supportsMips );\r\n\r\n\t\tlet mipmap;\r\n\t\tconst mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture.isDepthTexture ) {\r\n\r\n\t\t\t// populate depth texture with dummy data\r\n\r\n\t\t\tglInternalFormat = 6402;\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 35056;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// validation checks for WebGL 1\r\n\r\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedShortType;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tglInternalFormat = 34041;\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n\t\t} else if ( texture.isDataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture.isCompressedTexture ) {\r\n\r\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t} else if ( texture.isDataTexture2DArray ) {\r\n\r\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else if ( texture.isDataTexture3D ) {\r\n\r\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tlet glInternalFormat = 33189;\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\r\n\r\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\r\n\r\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t}\r\n\r\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\r\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\r\n\r\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\r\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\r\n\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\r\n\r\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\r\n\r\n\t\t}\r\n\r\n\t\t// upload an empty depth texture with framebuffer size\r\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\r\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\r\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\r\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\r\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\r\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\r\n\r\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\tinfo.memory.textures ++;\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\r\n\r\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\r\n\r\n\t\t\trenderTarget.texture.format = RGBAFormat;\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\r\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\r\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 34067, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 3553, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tconst texture = renderTarget.texture;\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\r\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\r\n\r\n\t\t\tstate.bindTexture( target, webglTexture );\r\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\r\n\t\t\tstate.bindTexture( target, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\r\n\r\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\r\n\r\n\t\t\t\tconst width = renderTarget.width;\r\n\t\t\t\tconst height = renderTarget.height;\r\n\t\t\t\tlet mask = 16384;\r\n\r\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\r\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\r\n\r\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getRenderTargetSamples( renderTarget ) {\r\n\r\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\r\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\r\n\r\n\t}\r\n\r\n\tfunction updateVideoTexture( texture ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\t// Check the last frame we updated the VideoTexture\r\n\r\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\r\n\r\n\t\t\t_videoTextures.set( texture, frame );\r\n\t\t\ttexture.update();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// backwards compatibility\r\n\r\n\tlet warnedTexture2D = false;\r\n\tlet warnedTextureCube = false;\r\n\r\n\tfunction safeSetTexture2D( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTexture2D === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTexture2D = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( texture, slot );\r\n\r\n\t}\r\n\r\n\tfunction safeSetTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTextureCube === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTextureCube = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\r\n\t\t// TODO: unify these code paths\r\n\t\tif ( ( texture && texture.isCubeTexture ) ||\r\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t// this function alone should take care of cube textures\r\n\t\t\tsetTextureCube( texture, slot );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\r\n\t\t\tsetTextureCubeDynamic( texture, slot );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.allocateTextureUnit = allocateTextureUnit;\r\n\tthis.resetTextureUnits = resetTextureUnits;\r\n\r\n\tthis.setTexture2D = setTexture2D;\r\n\tthis.setTexture2DArray = setTexture2DArray;\r\n\tthis.setTexture3D = setTexture3D;\r\n\tthis.setTextureCube = setTextureCube;\r\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\r\n\tthis.setupRenderTarget = setupRenderTarget;\r\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\r\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\r\n\r\n\tthis.safeSetTexture2D = safeSetTexture2D;\r\n\tthis.safeSetTextureCube = safeSetTextureCube;\r\n\r\n}\r\n\r\nfunction WebGLUtils( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction convert( p ) {\r\n\r\n\t\tlet extension;\r\n\r\n\t\tif ( p === UnsignedByteType ) return 5121;\r\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\r\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\r\n\t\tif ( p === UnsignedShort565Type ) return 33635;\r\n\r\n\t\tif ( p === ByteType ) return 5120;\r\n\t\tif ( p === ShortType ) return 5122;\r\n\t\tif ( p === UnsignedShortType ) return 5123;\r\n\t\tif ( p === IntType ) return 5124;\r\n\t\tif ( p === UnsignedIntType ) return 5125;\r\n\t\tif ( p === FloatType ) return 5126;\r\n\r\n\t\tif ( p === HalfFloatType ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 5131;\r\n\r\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.HALF_FLOAT_OES;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === AlphaFormat ) return 6406;\r\n\t\tif ( p === RGBFormat ) return 6407;\r\n\t\tif ( p === RGBAFormat ) return 6408;\r\n\t\tif ( p === LuminanceFormat ) return 6409;\r\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\r\n\t\tif ( p === DepthFormat ) return 6402;\r\n\t\tif ( p === DepthStencilFormat ) return 34041;\r\n\t\tif ( p === RedFormat ) return 6403;\r\n\r\n\t\t// WebGL2 formats.\r\n\r\n\t\tif ( p === RedIntegerFormat ) return 36244;\r\n\t\tif ( p === RGFormat ) return 33319;\r\n\t\tif ( p === RGIntegerFormat ) return 33320;\r\n\t\tif ( p === RGBIntegerFormat ) return 36248;\r\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\r\n\r\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\r\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\r\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\r\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\r\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\r\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\r\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\r\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_BPTC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === UnsignedInt248Type ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 34042;\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { convert: convert };\r\n\r\n}\r\n\r\nfunction ArrayCamera( array ) {\r\n\r\n\tPerspectiveCamera.call( this );\r\n\r\n\tthis.cameras = array || [];\r\n\r\n}\r\n\r\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\r\n\r\n\tconstructor: ArrayCamera,\r\n\r\n\tisArrayCamera: true\r\n\r\n} );\r\n\r\nfunction Group() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n}\r\n\r\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Group,\r\n\r\n\tisGroup: true\r\n\r\n} );\r\n\r\nfunction WebXRController() {\r\n\r\n\tthis._targetRay = null;\r\n\tthis._grip = null;\r\n\tthis._hand = null;\r\n\r\n}\r\n\r\nObject.assign( WebXRController.prototype, {\r\n\r\n\tconstructor: WebXRController,\r\n\r\n\tgetHandSpace: function () {\r\n\r\n\t\tif ( this._hand === null ) {\r\n\r\n\t\t\tthis._hand = new Group();\r\n\t\t\tthis._hand.matrixAutoUpdate = false;\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t\tthis._hand.joints = [];\r\n\t\t\tthis._hand.inputState = { pinching: false };\r\n\r\n\t\t\tif ( window.XRHand ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\r\n\t\t\t\t\tlet joint = new Group();\r\n\t\t\t\t\tjoint.matrixAutoUpdate = false;\r\n\t\t\t\t\tjoint.visible = false;\r\n\t\t\t\t\tthis._hand.joints.push( joint );\r\n\t\t\t\t\t// ??\r\n\t\t\t\t\tthis._hand.add( joint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this._hand;\r\n\r\n\t},\r\n\r\n\tgetTargetRaySpace: function () {\r\n\r\n\t\tif ( this._targetRay === null ) {\r\n\r\n\t\t\tthis._targetRay = new Group();\r\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._targetRay;\r\n\r\n\t},\r\n\r\n\tgetGripSpace: function () {\r\n\r\n\t\tif ( this._grip === null ) {\r\n\r\n\t\t\tthis._grip = new Group();\r\n\t\t\tthis._grip.matrixAutoUpdate = false;\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._grip;\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function ( inputSource ) {\r\n\r\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function ( inputSource, frame, referenceSpace ) {\r\n\r\n\t\tlet inputPose = null;\r\n\t\tlet gripPose = null;\r\n\t\tlet handPose = null;\r\n\r\n\t\tconst targetRay = this._targetRay;\r\n\t\tconst grip = this._grip;\r\n\t\tconst hand = this._hand;\r\n\r\n\t\tif ( inputSource ) {\r\n\r\n\t\t\tif ( inputSource.hand ) {\r\n\r\n\t\t\t\thandPose = true;\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\tif ( inputSource.hand[ i ] ) {\r\n\r\n\t\t\t\t\t\t// Update the joints groups with the XRJoint poses\r\n\t\t\t\t\t\tlet jointPose = frame.getJointPose( inputSource.hand[ i ], referenceSpace );\r\n\t\t\t\t\t\tconst joint = hand.joints[ i ];\r\n\r\n\t\t\t\t\t\tif ( jointPose !== null ) {\r\n\r\n\t\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\r\n\t\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\r\n\t\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjoint.visible = jointPose !== null;\r\n\r\n\t\t\t\t\t\t// Custom events\r\n\r\n\t\t\t\t\t\t// Check pinch\r\n\t\t\t\t\t\tconst indexTip = hand.joints[ window.XRHand.INDEX_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst thumbTip = hand.joints[ window.XRHand.THUMB_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\r\n\r\n\t\t\t\t\t\tconst distanceToPinch = 0.02;\r\n\t\t\t\t\t\tconst threshold = 0.005;\r\n\r\n\t\t\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = false;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchend\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = true;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchstart\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( inputPose !== null ) {\r\n\r\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\r\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\r\n\r\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( gripPose !== null ) {\r\n\r\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\r\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\ttargetRay.visible = ( inputPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( grip !== null ) {\r\n\r\n\t\t\tgrip.visible = ( gripPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hand !== null ) {\r\n\r\n\t\t\thand.visible = ( handPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebXRManager( renderer, gl ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet session = null;\r\n\r\n\tlet framebufferScaleFactor = 1.0;\r\n\r\n\tlet referenceSpace = null;\r\n\tlet referenceSpaceType = 'local-floor';\r\n\r\n\tlet pose = null;\r\n\r\n\tconst controllers = [];\r\n\tconst inputSourcesMap = new Map();\r\n\r\n\t//\r\n\r\n\tconst cameraL = new PerspectiveCamera();\r\n\tcameraL.layers.enable( 1 );\r\n\tcameraL.viewport = new Vector4();\r\n\r\n\tconst cameraR = new PerspectiveCamera();\r\n\tcameraR.layers.enable( 2 );\r\n\tcameraR.viewport = new Vector4();\r\n\r\n\tconst cameras = [ cameraL, cameraR ];\r\n\r\n\tconst cameraVR = new ArrayCamera();\r\n\tcameraVR.layers.enable( 1 );\r\n\tcameraVR.layers.enable( 2 );\r\n\r\n\tlet _currentDepthNear = null;\r\n\tlet _currentDepthFar = null;\r\n\r\n\t//\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.isPresenting = false;\r\n\r\n\tthis.getController = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getTargetRaySpace();\r\n\r\n\t};\r\n\r\n\tthis.getControllerGrip = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getGripSpace();\r\n\r\n\t};\r\n\r\n\tthis.getHand = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getHandSpace();\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tfunction onSessionEvent( event ) {\r\n\r\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\r\n\r\n\t\tif ( controller ) {\r\n\r\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onSessionEnd() {\r\n\r\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\r\n\r\n\t\t\tcontroller.disconnect( inputSource );\r\n\r\n\t\t} );\r\n\r\n\t\tinputSourcesMap.clear();\r\n\r\n\t\t//\r\n\r\n\t\trenderer.setFramebuffer( null );\r\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\r\n\t\tanimation.stop();\r\n\r\n\t\tscope.isPresenting = false;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\r\n\r\n\t}\r\n\r\n\tfunction onRequestReferenceSpace( value ) {\r\n\r\n\t\treferenceSpace = value;\r\n\r\n\t\tanimation.setContext( session );\r\n\t\tanimation.start();\r\n\r\n\t\tscope.isPresenting = true;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\r\n\r\n\t}\r\n\r\n\tthis.setFramebufferScaleFactor = function ( value ) {\r\n\r\n\t\tframebufferScaleFactor = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setReferenceSpaceType = function ( value ) {\r\n\r\n\t\treferenceSpaceType = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getReferenceSpace = function () {\r\n\r\n\t\treturn referenceSpace;\r\n\r\n\t};\r\n\r\n\tthis.getSession = function () {\r\n\r\n\t\treturn session;\r\n\r\n\t};\r\n\r\n\tthis.setSession = function ( value ) {\r\n\r\n\t\tsession = value;\r\n\r\n\t\tif ( session !== null ) {\r\n\r\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\r\n\r\n\t\t\tconst attributes = gl.getContextAttributes();\r\n\r\n\t\t\tif ( attributes.xrCompatible !== true ) {\r\n\r\n\t\t\t\tgl.makeXRCompatible();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst layerInit = {\r\n\t\t\t\tantialias: attributes.antialias,\r\n\t\t\t\talpha: attributes.alpha,\r\n\t\t\t\tdepth: attributes.depth,\r\n\t\t\t\tstencil: attributes.stencil,\r\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\r\n\t\t\t};\r\n\r\n\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\r\n\r\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\r\n\r\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateInputSources( event ) {\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\t// Assign inputSources to available controllers\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// Notify disconnected\r\n\r\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.removed[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\t\t\t\tinputSourcesMap.delete( inputSource );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Notify connected\r\n\r\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.added[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst cameraLPos = new Vector3();\r\n\tconst cameraRPos = new Vector3();\r\n\r\n\t/**\r\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\r\n\t * the cameras' projection and world matrices have already been set.\r\n\t * And that near and far planes are identical for both cameras.\r\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\r\n\t */\r\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\r\n\r\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\r\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\r\n\r\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\r\n\r\n\t\tconst projL = cameraL.projectionMatrix.elements;\r\n\t\tconst projR = cameraR.projectionMatrix.elements;\r\n\r\n\t\t// VR systems will have identical far and near planes, and\r\n\t\t// most likely identical top and bottom frustum extents.\r\n\t\t// Use the left camera for these values.\r\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\r\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\r\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\r\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\r\n\r\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\r\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\r\n\t\tconst left = near * leftFov;\r\n\t\tconst right = near * rightFov;\r\n\r\n\t\t// Calculate the new camera's position offset from the\r\n\t\t// left camera. xOffset should be roughly half `ipd`.\r\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\r\n\t\tconst xOffset = zOffset * - leftFov;\r\n\r\n\t\t// TODO: Better way to apply this offset?\r\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.translateX( xOffset );\r\n\t\tcamera.translateZ( zOffset );\r\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t// Find the union of the frustum values of the cameras and scale\r\n\t\t// the values so that the near plane's position does not change in world space,\r\n\t\t// although must now be relative to the new union camera.\r\n\t\tconst near2 = near + zOffset;\r\n\t\tconst far2 = far + zOffset;\r\n\t\tconst left2 = left - xOffset;\r\n\t\tconst right2 = right + ( ipd - xOffset );\r\n\t\tconst top2 = topFov * far / far2 * near2;\r\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\r\n\r\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\r\n\r\n\t}\r\n\r\n\tfunction updateCamera( camera, parent ) {\r\n\r\n\t\tif ( parent === null ) {\r\n\r\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\r\n\r\n\t\t}\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t}\r\n\r\n\tthis.getCamera = function ( camera ) {\r\n\r\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\r\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\r\n\r\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\r\n\r\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\r\n\r\n\t\t\tsession.updateRenderState( {\r\n\t\t\t\tdepthNear: cameraVR.near,\r\n\t\t\t\tdepthFar: cameraVR.far\r\n\t\t\t} );\r\n\r\n\t\t\t_currentDepthNear = cameraVR.near;\r\n\t\t\t_currentDepthFar = cameraVR.far;\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = camera.parent;\r\n\t\tconst cameras = cameraVR.cameras;\r\n\r\n\t\tupdateCamera( cameraVR, parent );\r\n\r\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\r\n\r\n\t\t\tupdateCamera( cameras[ i ], parent );\r\n\r\n\t\t}\r\n\r\n\t\t// update camera and its children\r\n\r\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\r\n\r\n\t\tconst children = camera.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( true );\r\n\r\n\t\t}\r\n\r\n\t\t// update projection matrix for proper view frustum culling\r\n\r\n\t\tif ( cameras.length === 2 ) {\r\n\r\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assume single camera setup (AR)\r\n\r\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\treturn cameraVR;\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tpose = frame.getViewerPose( referenceSpace );\r\n\r\n\t\tif ( pose !== null ) {\r\n\r\n\t\t\tconst views = pose.views;\r\n\t\t\tconst baseLayer = session.renderState.baseLayer;\r\n\r\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\r\n\r\n\t\t\tlet cameraVRNeedsUpdate = false;\r\n\r\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\r\n\r\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\r\n\r\n\t\t\t\tcameraVR.cameras.length = 0;\r\n\t\t\t\tcameraVRNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\r\n\r\n\t\t\t\tconst view = views[ i ];\r\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\r\n\r\n\t\t\t\tconst camera = cameras[ i ];\r\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\r\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\r\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\r\n\r\n\t\t\t\tif ( i === 0 ) {\r\n\r\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\r\n\r\n\t\t\t\t\tcameraVR.cameras.push( camera );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tconst controller = controllers[ i ];\r\n\t\t\tconst inputSource = inputSources[ i ];\r\n\r\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\r\n\t};\r\n\r\n\tthis.dispose = function () {};\r\n\r\n}\r\n\r\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\r\n\r\nfunction WebGLMaterials( properties ) {\r\n\r\n\tfunction refreshFogUniforms( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value.copy( fog.color );\r\n\r\n\t\tif ( fog.isFog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog.isFogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshMaterialUniforms( uniforms, material, environment, pixelRatio, height ) {\r\n\r\n\t\tif ( material.isMeshBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshLambertMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsLambert( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshToonMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsToon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshPhongMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsPhong( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshStandardMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material, environment );\r\n\r\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhysical( uniforms, material, environment );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isMeshMatcapMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsMatcap( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDepthMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDepth( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDistanceMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDistance( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshNormalMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsNormal( uniforms, material );\r\n\r\n\t\t} else if ( material.isLineBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsLine( uniforms, material );\r\n\r\n\t\t\tif ( material.isLineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsDash( uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isPointsMaterial ) {\r\n\r\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\r\n\r\n\t\t} else if ( material.isSpriteMaterial ) {\r\n\r\n\t\t\trefreshUniformsSprites( uniforms, material );\r\n\r\n\t\t} else if ( material.isShadowMaterial ) {\r\n\r\n\t\t\tuniforms.color.value.copy( material.color );\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t} else if ( material.isShaderMaterial ) {\r\n\r\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tif ( material.color ) {\r\n\r\n\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.specularMap ) {\r\n\r\n\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\r\n\t\t}\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tif ( envMap ) {\r\n\r\n\t\t\tuniforms.envMap.value = envMap;\r\n\r\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\tvar maxMipLevel = properties.get( envMap ).__maxMipLevel;\r\n\r\n\t\t\tif ( maxMipLevel !== undefined ) {\r\n\r\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities for uv2\r\n\t\t// 1. ao map\r\n\t\t// 2. light map\r\n\r\n\t\tlet uv2ScaleMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.aoMap;\r\n\r\n\t\t} else if ( material.lightMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.lightMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2ScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuv2ScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * pixelRatio;\r\n\t\tuniforms.scale.value = height * 0.5;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsSprites( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.rotation.value = material.rotation;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert( uniforms, material ) {\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value.copy( material.specular );\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsToon( uniforms, material ) {\r\n\r\n\t\tif ( material.gradientMap ) {\r\n\r\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap || environment ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\r\n\r\n\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\r\n\r\n\t\tuniforms.clearcoat.value = material.clearcoat;\r\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\r\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\r\n\r\n\t\tif ( material.clearcoatMap ) {\r\n\r\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatRoughnessMap ) {\r\n\r\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatNormalMap ) {\r\n\r\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\r\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\r\n\r\n\t\t\tif ( material.side === BackSide ) {\r\n\r\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.transmission.value = material.transmission;\r\n\r\n\t\tif ( material.transmissionMap ) {\r\n\r\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsMatcap( uniforms, material ) {\r\n\r\n\t\tif ( material.matcap ) {\r\n\r\n\t\t\tuniforms.matcap.value = material.matcap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDepth( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDistance( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\r\n\t\tuniforms.nearDistance.value = material.nearDistance;\r\n\t\tuniforms.farDistance.value = material.farDistance;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsNormal( uniforms, material ) {\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\trefreshFogUniforms: refreshFogUniforms,\r\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderer( parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\r\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\r\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\r\n\r\n\tlet currentRenderList = null;\r\n\tlet currentRenderState = null;\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\r\n\t// Debug configuration container\r\n\tthis.debug = {\r\n\r\n\t\t/**\r\n\t\t * Enables error checking and reporting when shader programs are being compiled\r\n\t\t * @type {boolean}\r\n\t\t */\r\n\t\tcheckShaderErrors: true\r\n\t};\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// user-defined clipping\r\n\r\n\tthis.clippingPlanes = [];\r\n\tthis.localClippingEnabled = false;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.outputEncoding = LinearEncoding;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = NoToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// internal properties\r\n\r\n\tconst _this = this;\r\n\r\n\tlet _isContextLost = false;\r\n\r\n\t// internal state cache\r\n\r\n\tlet _framebuffer = null;\r\n\r\n\tlet _currentActiveCubeFace = 0;\r\n\tlet _currentActiveMipmapLevel = 0;\r\n\tlet _currentRenderTarget = null;\r\n\tlet _currentFramebuffer = null;\r\n\tlet _currentMaterialId = - 1;\r\n\r\n\tlet _currentCamera = null;\r\n\tlet _currentArrayCamera = null;\r\n\r\n\tconst _currentViewport = new Vector4();\r\n\tconst _currentScissor = new Vector4();\r\n\tlet _currentScissorTest = null;\r\n\r\n\t//\r\n\r\n\tlet _width = _canvas.width;\r\n\tlet _height = _canvas.height;\r\n\r\n\tlet _pixelRatio = 1;\r\n\tlet _opaqueSort = null;\r\n\tlet _transparentSort = null;\r\n\r\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\r\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\r\n\tlet _scissorTest = false;\r\n\r\n\t// frustum\r\n\r\n\tconst _frustum = new Frustum();\r\n\r\n\t// clipping\r\n\r\n\tconst _clipping = new WebGLClipping();\r\n\tlet _clippingEnabled = false;\r\n\tlet _localClippingEnabled = false;\r\n\r\n\t// camera matrices cache\r\n\r\n\tconst _projScreenMatrix = new Matrix4();\r\n\r\n\tconst _vector3 = new Vector3();\r\n\r\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\t// initialize\r\n\r\n\tlet _gl = _context;\r\n\r\n\tfunction getContext( contextNames, contextAttributes ) {\r\n\r\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\r\n\r\n\t\t\tconst contextName = contextNames[ i ];\r\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\r\n\t\t\tif ( context !== null ) return context;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\ttry {\r\n\r\n\t\tconst contextAttributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\r\n\t\t\tpowerPreference: _powerPreference,\r\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\r\n\t\t};\r\n\r\n\t\t// event listeners must be registered before WebGL context is created, see #12753\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\r\n\r\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\r\n\r\n\t\t\t\tcontextNames.shift();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl = getContext( contextNames, contextAttributes );\r\n\r\n\t\t\tif ( _gl === null ) {\r\n\r\n\t\t\t\tif ( getContext( contextNames ) ) {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\r\n\t\tthrow error;\r\n\r\n\t}\r\n\r\n\tlet extensions, capabilities, state, info;\r\n\tlet properties, textures, attributes, geometries, objects;\r\n\tlet programCache, materials, renderLists, renderStates;\r\n\r\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\r\n\r\n\tlet utils, bindingStates;\r\n\r\n\tfunction initGLContext() {\r\n\r\n\t\textensions = new WebGLExtensions( _gl );\r\n\r\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\t\tif ( capabilities.isWebGL2 === false ) {\r\n\r\n\t\t\textensions.get( 'WEBGL_depth_texture' );\r\n\t\t\textensions.get( 'OES_texture_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\r\n\t\t\textensions.get( 'OES_standard_derivatives' );\r\n\t\t\textensions.get( 'OES_element_index_uint' );\r\n\t\t\textensions.get( 'OES_vertex_array_object' );\r\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t}\r\n\r\n\t\textensions.get( 'OES_texture_float_linear' );\r\n\r\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\r\n\r\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t\tinfo = new WebGLInfo( _gl );\r\n\t\tproperties = new WebGLProperties();\r\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\r\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\r\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\r\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\r\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\r\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\r\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities, bindingStates );\r\n\t\tmaterials = new WebGLMaterials( properties );\r\n\t\trenderLists = new WebGLRenderLists( properties );\r\n\t\trenderStates = new WebGLRenderStates();\r\n\r\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\r\n\r\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\r\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\r\n\r\n\t\tinfo.programs = programCache.programs;\r\n\r\n\t\t_this.capabilities = capabilities;\r\n\t\t_this.extensions = extensions;\r\n\t\t_this.properties = properties;\r\n\t\t_this.renderLists = renderLists;\r\n\t\t_this.state = state;\r\n\t\t_this.info = info;\r\n\r\n\t}\r\n\r\n\tinitGLContext();\r\n\r\n\t// xr\r\n\r\n\tconst xr = new WebXRManager( _this, _gl );\r\n\r\n\tthis.xr = xr;\r\n\r\n\t// shadow map\r\n\r\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.loseContext();\r\n\r\n\t};\r\n\r\n\tthis.forceContextRestore = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.restoreContext();\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _width, _height, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width, _height );\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\tif ( xr.isPresenting ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getDrawingBufferSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\r\n\r\n\t};\r\n\r\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_pixelRatio = pixelRatio;\r\n\r\n\t\t_canvas.width = Math.floor( width * pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * pixelRatio );\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getCurrentViewport = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\r\n\r\n\t\t\ttarget = new Vector4();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( _currentViewport );\r\n\r\n\t};\r\n\r\n\tthis.getViewport = function ( target ) {\r\n\r\n\t\treturn target.copy( _viewport );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_viewport.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissor = function ( target ) {\r\n\r\n\t\treturn target.copy( _scissor );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_scissor.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn _scissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\tthis.setOpaqueSort = function ( method ) {\r\n\r\n\t\t_opaqueSort = method;\r\n\r\n\t};\r\n\r\n\tthis.setTransparentSort = function ( method ) {\r\n\r\n\t\t_transparentSort = method;\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn background.getClearColor();\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function () {\r\n\r\n\t\tbackground.setClearColor.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn background.getClearAlpha();\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function () {\r\n\r\n\t\tbackground.setClearAlpha.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tlet bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= 16384;\r\n\t\tif ( depth === undefined || depth ) bits |= 256;\r\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\trenderLists.dispose();\r\n\t\trenderStates.dispose();\r\n\t\tproperties.dispose();\r\n\t\tobjects.dispose();\r\n\t\tbindingStates.dispose();\r\n\r\n\t\txr.dispose();\r\n\r\n\t\tanimation.stop();\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\r\n\r\n\t\t_isContextLost = true;\r\n\r\n\t}\r\n\r\n\tfunction onContextRestore( /* event */ ) {\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\r\n\r\n\t\t_isContextLost = false;\r\n\r\n\t\tinitGLContext();\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tconst material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.remove( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tconst programInfo = properties.get( material ).program;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tfunction renderObjectImmediate( object, program ) {\r\n\r\n\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t_this.renderBufferImmediate( object, program );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tthis.renderBufferImmediate = function ( object, program ) {\r\n\r\n\t\tbindingStates.initAttributes();\r\n\r\n\t\tconst buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\r\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\r\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\r\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\r\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( 4, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\r\n\r\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\r\n\r\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\tstate.setMaterial( material, frontFaceCW );\r\n\r\n\t\t//\r\n\r\n\t\tlet index = geometry.index;\r\n\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tif ( index === null ) {\r\n\r\n\t\t\tif ( position === undefined || position.count === 0 ) return;\r\n\r\n\t\t} else if ( index.count === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet rangeFactor = 1;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\r\n\t\t\trangeFactor = 2;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphTargets || material.morphNormals ) {\r\n\r\n\t\t\tmorphtargets.update( object, geometry, material, program );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.setup( object, material, program, geometry, index );\r\n\r\n\t\tlet attribute;\r\n\t\tlet renderer = bufferRenderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattribute = attributes.get( index );\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( attribute );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\r\n\r\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\r\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\r\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\r\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\tif ( drawCount === 0 ) return;\r\n\r\n\t\t//\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isLine ) {\r\n\r\n\t\t\tlet lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object.isLineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else if ( object.isLineLoop ) {\r\n\r\n\t\t\t\trenderer.setMode( 2 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isPoints ) {\r\n\r\n\t\t\trenderer.setMode( 0 );\r\n\r\n\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\r\n\r\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\r\n\r\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Compile\r\n\r\n\tthis.compile = function ( scene, camera ) {\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tconst compiled = new WeakMap();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tlet material = object.material;\r\n\r\n\t\t\tif ( material ) {\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tlet material2 = material[ i ];\r\n\r\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\r\n\r\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\r\n\t\t\t\t\t\t\tcompiled.set( material2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\r\n\r\n\t\t\t\t\tinitMaterial( material, scene, object );\r\n\t\t\t\t\tcompiled.set( material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time ) {\r\n\r\n\t\tif ( xr.isPresenting ) return;\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\t\txr.setAnimationLoop( callback );\r\n\r\n\t\t( callback === null ) ? animation.stop() : animation.start();\r\n\r\n\t};\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tlet renderTarget, forceClear;\r\n\r\n\t\tif ( arguments[ 2 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\r\n\t\t\trenderTarget = arguments[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( arguments[ 3 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\r\n\t\t\tforceClear = arguments[ 3 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _isContextLost === true ) return;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\tbindingStates.resetDefaultState();\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\r\n\r\n\t\t\tcamera = xr.getCamera( camera );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\r\n\r\n\t\t_localClippingEnabled = this.localClippingEnabled;\r\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n\t\tcurrentRenderList = renderLists.get( scene, camera );\r\n\t\tcurrentRenderList.init();\r\n\r\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\r\n\r\n\t\tcurrentRenderList.finish();\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.beginShadows();\r\n\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tshadowMap.render( shadowsArray, scene, camera );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.endShadows();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.info.autoReset === true ) this.info.reset();\r\n\r\n\t\tif ( renderTarget !== undefined ) {\r\n\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\r\n\r\n\t\t// render scene\r\n\r\n\t\tconst opaqueObjects = currentRenderList.opaque;\r\n\t\tconst transparentObjects = currentRenderList.transparent;\r\n\r\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\r\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( _currentRenderTarget !== null ) {\r\n\r\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\r\n\r\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\r\n\r\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.buffers.depth.setTest( true );\r\n\t\tstate.buffers.depth.setMask( true );\r\n\t\tstate.buffers.color.setMask( true );\r\n\r\n\t\tstate.setPolygonOffset( false );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t\tcurrentRenderList = null;\r\n\t\tcurrentRenderState = null;\r\n\r\n\t};\r\n\r\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible ) {\r\n\r\n\t\t\tif ( object.isGroup ) {\r\n\r\n\t\t\t\tgroupOrder = object.renderOrder;\r\n\r\n\t\t\t} else if ( object.isLOD ) {\r\n\r\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\r\n\r\n\t\t\t} else if ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n\t\t\t\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\t\t\t\t// update skeleton only once in a frame\r\n\r\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\r\n\r\n\t\t\t\t\t\tobject.skeleton.update();\r\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, scene, camera ) {\r\n\r\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\r\n\r\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderList[ i ];\r\n\r\n\t\t\tconst object = renderItem.object;\r\n\t\t\tconst geometry = renderItem.geometry;\r\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\r\n\t\t\tconst group = renderItem.group;\r\n\r\n\t\t\tif ( camera.isArrayCamera ) {\r\n\r\n\t\t\t\t_currentArrayCamera = camera;\r\n\r\n\t\t\t\tconst cameras = camera.cameras;\r\n\r\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst camera2 = cameras[ j ];\r\n\r\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\r\n\r\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\r\n\r\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\r\n\r\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_currentArrayCamera = null;\r\n\r\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\r\n\r\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\tif ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\t\tstate.setMaterial( material );\r\n\r\n\t\t\tbindingStates.reset();\r\n\r\n\t\t\trenderObjectImmediate( object, program );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\r\n\r\n\t\t}\r\n\r\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, scene, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tconst lightsStateVersion = lights.state.version;\r\n\r\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\r\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\r\n\r\n\t\tlet program = materialProperties.program;\r\n\t\tlet programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\r\n\r\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tparameters.uniforms = programCache.getUniforms( material, parameters );\r\n\r\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\r\n\r\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\r\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\r\n\r\n\t\t}\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( ! material.isShaderMaterial &&\r\n\t\t\t! material.isRawShaderMaterial ||\r\n\t\t\tmaterial.clipping === true ) {\r\n\r\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\r\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\r\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tmaterialProperties.fog = scene.fog;\r\n\r\n\t\t// store the light setup it was created for\r\n\r\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\r\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\r\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\r\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\r\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\r\n\t\t\tuniforms.spotLights.value = lights.state.spot;\r\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\r\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\r\n\t\t\tuniforms.pointLights.value = lights.state.point;\r\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\r\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\r\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\r\n\r\n\t\t}\r\n\r\n\t\tconst progUniforms = materialProperties.program.getUniforms(),\r\n\t\t\tuniformsList =\r\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n\t\tmaterialProperties.uniformsList = uniformsList;\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, scene, material, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\ttextures.resetTextureUnits();\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\r\n\t\tif ( _clippingEnabled === true ) {\r\n\r\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\r\n\r\n\t\t\t\tconst useCache =\r\n\t\t\t\t\tcamera === _currentCamera &&\r\n\t\t\t\t\tmaterial.id === _currentMaterialId;\r\n\r\n\t\t\t\t// we might want to call this function with some ClippingGroup\r\n\t\t\t\t// object instead of the material, once it becomes feasible\r\n\t\t\t\t// (#8465, #8379)\r\n\t\t\t\t_clipping.setState(\r\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\r\n\t\t\t\t\tcamera, materialProperties, useCache );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.version === materialProperties.__version ) {\r\n\r\n\t\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.environment !== environment ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\r\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\r\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tinitMaterial( material, scene, object );\r\n\t\t\tmaterialProperties.__version = material.version;\r\n\r\n\t\t}\r\n\r\n\t\tlet refreshProgram = false;\r\n\t\tlet refreshMaterial = false;\r\n\t\tlet refreshLights = false;\r\n\r\n\t\tconst program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( state.useProgram( program.program ) ) {\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\r\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _currentCamera !== camera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material.isShaderMaterial ||\r\n\t\t\t\tmaterial.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.envMap ) {\r\n\r\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n\t\t\t\tif ( uCamPos !== undefined ) {\r\n\r\n\t\t\t\t\tuCamPos.setValue( _gl,\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ||\r\n\t\t\t\tmaterial.isShadowMaterial ||\r\n\t\t\t\tmaterial.skinning ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n\t\t\tconst skeleton = object.skeleton;\r\n\r\n\t\t\tif ( skeleton ) {\r\n\r\n\t\t\t\tconst bones = skeleton.bones;\r\n\r\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\r\n\r\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\r\n\r\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\r\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\r\n\t\t\t\t\t\tsize = Math.max( size, 4 );\r\n\r\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\r\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\r\n\r\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\r\n\r\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\r\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\r\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\r\n\r\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\r\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\r\n\r\n\t\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, environment, _pixelRatio, _height );\r\n\r\n\t\t\t// RectAreaLight Texture\r\n\t\t\t// TODO (mrdoob): Find a nicer implementation\r\n\r\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\r\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\t\t\tmaterial.uniformsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isSpriteMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\r\n\r\n\t\t}\r\n\r\n\t\t// common matrices\r\n\r\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\t\tuniforms.lightProbe.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.pointLightShadows.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.spotLightShadows.needsUpdate = value;\r\n\t\tuniforms.rectAreaLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\tfunction materialNeedsLights( material ) {\r\n\r\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\r\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\r\n\t\t\t( material.isShaderMaterial && material.lights === true );\r\n\r\n\t}\r\n\r\n\t//\r\n\tthis.setFramebuffer = function ( value ) {\r\n\r\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\r\n\r\n\t\t_framebuffer = value;\r\n\r\n\t};\r\n\r\n\tthis.getActiveCubeFace = function () {\r\n\r\n\t\treturn _currentActiveCubeFace;\r\n\r\n\t};\r\n\r\n\tthis.getActiveMipmapLevel = function () {\r\n\r\n\t\treturn _currentActiveMipmapLevel;\r\n\r\n\t};\r\n\r\n\tthis.getRenderTarget = function () {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t};\r\n\r\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\t\t_currentActiveCubeFace = activeCubeFace;\r\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\ttextures.setupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = _framebuffer;\r\n\t\tlet isCube = false;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\r\n\t\t\t\tisCube = true;\r\n\r\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\r\n\r\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\r\n\r\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tlet restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst texture = renderTarget.texture;\r\n\t\t\t\tconst textureFormat = texture.format;\r\n\t\t\t\tconst textureType = texture.type;\r\n\r\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\r\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\r\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\r\n\r\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst levelScale = Math.pow( 2, - level );\r\n\t\tconst width = Math.floor( texture.image.width * levelScale );\r\n\t\tconst height = Math.floor( texture.image.height * levelScale );\r\n\t\tconst glFormat = utils.convert( texture.format );\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst width = srcTexture.image.width;\r\n\t\tconst height = srcTexture.image.height;\r\n\t\tconst glFormat = utils.convert( dstTexture.format );\r\n\t\tconst glType = utils.convert( dstTexture.type );\r\n\r\n\t\ttextures.setTexture2D( dstTexture, 0 );\r\n\r\n\t\t// As another texture upload may have changed pixelStorei\r\n\t\t// parameters, make sure they are correct for the dstTexture\r\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\r\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\r\n\r\n\t\tif ( srcTexture.isDataTexture ) {\r\n\r\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( srcTexture.isCompressedTexture ) {\r\n\r\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Generate mipmaps only when copying level 0\r\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.initTexture = function ( texture ) {\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGL1Renderer( parameters ) {\r\n\r\n\tWebGLRenderer.call( this, parameters );\r\n\r\n}\r\n\r\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\r\n\r\n\tconstructor: WebGL1Renderer,\r\n\r\n\tisWebGL1Renderer: true\r\n\r\n} );\r\n\r\nfunction FogExp2( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n}\r\n\r\nObject.assign( FogExp2.prototype, {\r\n\r\n\tisFogExp2: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new FogExp2( this.color, this.density );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'FogExp2',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tdensity: this.density\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Fog( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n}\r\n\r\nObject.assign( Fog.prototype, {\r\n\r\n\tisFog: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Fog( this.color, this.near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'Fog',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tnear: this.near,\r\n\t\t\tfar: this.far\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InterleavedBuffer( array, stride ) {\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\tthis.count = array !== undefined ? array.length / stride : 0;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n}\r\n\r\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\r\n\tisInterleavedBuffer: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.count = source.count;\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\r\n\r\n\t\t}\r\n\r\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\r\n\r\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\r\n\t\tib.setUsage( this.usage );\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\t// generate UUID for array buffer if necessary\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\treturn {\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tbuffer: this.array.buffer._uuid,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tstride: this.stride\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$6 = new Vector3();\r\n\r\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n\tthis.normalized = normalized === true;\r\n\r\n}\r\n\r\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\r\n\r\n\tcount: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.count;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tarray: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.array;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tneedsUpdate: {\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.data.needsUpdate = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBufferAttribute.prototype, {\r\n\r\n\tisInterleavedBufferAttribute: true,\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$6.x = this.getX( i );\r\n\t\t\t_vector$6.y = this.getY( i );\r\n\t\t\t_vector$6.z = this.getZ( i );\r\n\r\n\t\t\t_vector$6.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\r\n\r\n\t\t\treturn {\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\ttype: this.array.constructor.name,\r\n\t\t\t\tarray: array,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// save as true interlaved attribtue\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisInterleavedBufferAttribute: true,\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\tdata: this.data.uuid,\r\n\t\t\t\toffset: this.offset,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *  rotation: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */\r\n\r\nfunction SpriteMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nSpriteMaterial.prototype = Object.create( Material.prototype );\r\nSpriteMaterial.prototype.constructor = SpriteMaterial;\r\nSpriteMaterial.prototype.isSpriteMaterial = true;\r\n\r\nSpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nlet _geometry;\r\n\r\nconst _intersectPoint = new Vector3();\r\nconst _worldScale = new Vector3();\r\nconst _mvPosition = new Vector3();\r\n\r\nconst _alignedPosition = new Vector2();\r\nconst _rotatedPosition = new Vector2();\r\nconst _viewWorldMatrix = new Matrix4();\r\n\r\nconst _vA$1 = new Vector3();\r\nconst _vB$1 = new Vector3();\r\nconst _vC$1 = new Vector3();\r\n\r\nconst _uvA$1 = new Vector2();\r\nconst _uvB$1 = new Vector2();\r\nconst _uvC$1 = new Vector2();\r\n\r\nfunction Sprite( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Sprite';\r\n\r\n\tif ( _geometry === undefined ) {\r\n\r\n\t\t_geometry = new BufferGeometry();\r\n\r\n\t\tconst float32Array = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\r\n\t\t\t0.5, - 0.5, 0, 1, 0,\r\n\t\t\t0.5, 0.5, 0, 1, 1,\r\n\t\t\t- 0.5, 0.5, 0, 0, 1\r\n\t\t] );\r\n\r\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\r\n\r\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\r\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\r\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\r\n\r\n\t}\r\n\r\n\tthis.geometry = _geometry;\r\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\r\n\r\n\tthis.center = new Vector2( 0.5, 0.5 );\r\n\r\n}\r\n\r\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Sprite,\r\n\r\n\tisSprite: true,\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tif ( raycaster.camera === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\r\n\r\n\t\t}\r\n\r\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\r\n\r\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\r\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\r\n\r\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\r\n\r\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\r\n\r\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst rotation = this.material.rotation;\r\n\t\tlet sin, cos;\r\n\r\n\t\tif ( rotation !== 0 ) {\r\n\r\n\t\t\tcos = Math.cos( rotation );\r\n\t\t\tsin = Math.sin( rotation );\r\n\r\n\t\t}\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\r\n\t\t_uvA$1.set( 0, 0 );\r\n\t\t_uvB$1.set( 1, 0 );\r\n\t\t_uvC$1.set( 1, 1 );\r\n\r\n\t\t// check first triangle\r\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\r\n\r\n\t\tif ( intersect === null ) {\r\n\r\n\t\t\t// check second triangle\r\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\t\t_uvB$1.set( 0, 1 );\r\n\r\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\r\n\t\t\tif ( intersect === null ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: _intersectPoint.clone(),\r\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\r\n\r\n\t\tthis.material = source.material;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\r\n\r\n\t// compute position in camera space\r\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\r\n\r\n\t// to check if rotation is not zero\r\n\tif ( sin !== undefined ) {\r\n\r\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\r\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\r\n\r\n\t} else {\r\n\r\n\t\t_rotatedPosition.copy( _alignedPosition );\r\n\r\n\t}\r\n\r\n\r\n\tvertexPosition.copy( mvPosition );\r\n\tvertexPosition.x += _rotatedPosition.x;\r\n\tvertexPosition.y += _rotatedPosition.y;\r\n\r\n\t// transform to world space\r\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\r\n\r\n}\r\n\r\nconst _v1$4 = new Vector3();\r\nconst _v2$2 = new Vector3();\r\n\r\nfunction LOD() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis._currentLevel = 0;\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.autoUpdate = true;\r\n\r\n}\r\n\r\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: LOD,\r\n\r\n\tisLOD: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\t\tconst levels = source.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddLevel: function ( object, distance ) {\r\n\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\r\n\t\tdistance = Math.abs( distance );\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tlet l;\r\n\r\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCurrentLevel: function () {\r\n\r\n\t\treturn this._currentLevel;\r\n\r\n\t},\r\n\r\n\tgetObjectForDistance: function ( distance ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn levels[ i - 1 ].object;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\r\n\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._currentLevel = i - 1;\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\r\n\r\n\t\tdata.object.levels = [];\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SkinnedMesh( geometry, material ) {\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t}\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = 'attached';\r\n\tthis.bindMatrix = new Matrix4();\r\n\tthis.bindMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: SkinnedMesh,\r\n\r\n\tisSkinnedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.bindMode = source.bindMode;\r\n\t\tthis.bindMatrix.copy( source.bindMatrix );\r\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\r\n\r\n\t\tthis.skeleton = source.skeleton;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbind: function ( skeleton, bindMatrix ) {\r\n\r\n\t\tthis.skeleton = skeleton;\r\n\r\n\t\tif ( bindMatrix === undefined ) {\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t\t}\r\n\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tthis.skeleton.pose();\r\n\r\n\t},\r\n\r\n\tnormalizeSkinWeights: function () {\r\n\r\n\t\tconst vector = new Vector4();\r\n\r\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\r\n\r\n\t\t\tvector.x = skinWeight.getX( i );\r\n\t\t\tvector.y = skinWeight.getY( i );\r\n\t\t\tvector.z = skinWeight.getZ( i );\r\n\t\t\tvector.w = skinWeight.getW( i );\r\n\r\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tvector.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.bindMode === 'attached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t\t} else if ( this.bindMode === 'detached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tboneTransform: ( function () {\r\n\r\n\t\tconst basePosition = new Vector3();\r\n\r\n\t\tconst skinIndex = new Vector4();\r\n\t\tconst skinWeight = new Vector4();\r\n\r\n\t\tconst vector = new Vector3();\r\n\t\tconst matrix = new Matrix4();\r\n\r\n\t\treturn function ( index, target ) {\r\n\r\n\t\t\tconst skeleton = this.skeleton;\r\n\t\t\tconst geometry = this.geometry;\r\n\r\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\r\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\r\n\r\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\r\n\r\n\t\t\ttarget.set( 0, 0, 0 );\r\n\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst weight = skinWeight.getComponent( i );\r\n\r\n\t\t\t\tif ( weight !== 0 ) {\r\n\r\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\r\n\r\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\r\n\r\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\r\n\r\n\t\t};\r\n\r\n\t}() )\r\n\r\n} );\r\n\r\nconst _offsetMatrix = new Matrix4();\r\nconst _identityMatrix = new Matrix4();\r\n\r\nfunction Skeleton( bones, boneInverses ) {\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\r\n\r\n\tthis.frame = - 1;\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Skeleton.prototype, {\r\n\r\n\tcalculateInverses: function () {\r\n\r\n\t\tthis.boneInverses = [];\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst inverse = new Matrix4();\r\n\r\n\t\t\tif ( this.bones[ i ] ) {\r\n\r\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\t// recover the bind-time world matrices\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst bones = this.bones;\r\n\t\tconst boneInverses = this.boneInverses;\r\n\t\tconst boneMatrices = this.boneMatrices;\r\n\t\tconst boneTexture = this.boneTexture;\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\r\n\r\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\r\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( boneTexture !== undefined ) {\r\n\r\n\t\t\tboneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Skeleton( this.bones, this.boneInverses );\r\n\r\n\t},\r\n\r\n\tgetBoneByName: function ( name ) {\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone.name === name ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tdispose: function ( ) {\r\n\r\n\t\tif ( this.boneTexture ) {\r\n\r\n\t\t\tthis.boneTexture.dispose();\r\n\r\n\t\t\tthis.boneTexture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Bone() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n}\r\n\r\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Bone,\r\n\r\n\tisBone: true\r\n\r\n} );\r\n\r\nconst _instanceLocalMatrix = new Matrix4();\r\nconst _instanceWorldMatrix = new Matrix4();\r\n\r\nconst _instanceIntersects = [];\r\n\r\nconst _mesh = new Mesh();\r\n\r\nfunction InstancedMesh( geometry, material, count ) {\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\r\n\r\n\tthis.count = count;\r\n\r\n\tthis.frustumCulled = false;\r\n\r\n}\r\n\r\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: InstancedMesh,\r\n\r\n\tisInstancedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\r\n\t\tthis.count = source.count;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst raycastTimes = this.count;\r\n\r\n\t\t_mesh.geometry = this.geometry;\r\n\t\t_mesh.material = this.material;\r\n\r\n\t\tif ( _mesh.material === undefined ) return;\r\n\r\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\r\n\r\n\t\t\t// calculate the world matrix for each instance\r\n\r\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\r\n\r\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\r\n\r\n\t\t\t// the mesh represents this single instance\r\n\r\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\r\n\r\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\r\n\r\n\t\t\t// process the result of raycast\r\n\r\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\r\n\t\t\t\tintersect.instanceId = instanceId;\r\n\t\t\t\tintersect.object = this;\r\n\t\t\t\tintersects.push( intersect );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_instanceIntersects.length = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */\r\n\r\nfunction LineBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineBasicMaterial.prototype = Object.create( Material.prototype );\r\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\r\n\r\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\r\n\r\nLineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _start = new Vector3();\r\nconst _end = new Vector3();\r\nconst _inverseMatrix$1 = new Matrix4();\r\nconst _ray$1 = new Ray();\r\nconst _sphere$2 = new Sphere();\r\n\r\nfunction Line( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\r\n\r\n\t}\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Line,\r\n\r\n\tisLine: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [ 0 ];\r\n\r\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\r\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tlineDistances[ 0 ] = 0;\r\n\r\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Line.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$2.copy( geometry.boundingSphere );\r\n\t\t_sphere$2.applyMatrix4( matrixWorld );\r\n\t\t_sphere$2.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\r\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tconst vStart = new Vector3();\r\n\t\tconst vEnd = new Vector3();\r\n\t\tconst interSegment = new Vector3();\r\n\t\tconst interRay = new Vector3();\r\n\t\tconst step = ( this && this.isLineSegments ) ? 2 : 1;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\t\t\t\t\tconst b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _start$1 = new Vector3();\r\nconst _end$1 = new Vector3();\r\n\r\nfunction LineSegments( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n}\r\n\r\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineSegments,\r\n\r\n\tisLineSegments: true,\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\r\n\r\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\r\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\r\n\r\n\t\t\t\t_start$1.copy( vertices[ i ] );\r\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\r\n\r\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LineLoop( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineLoop';\r\n\r\n}\r\n\r\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineLoop,\r\n\r\n\tisLineLoop: true,\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n *\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction PointsMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nPointsMaterial.prototype = Object.create( Material.prototype );\r\nPointsMaterial.prototype.constructor = PointsMaterial;\r\n\r\nPointsMaterial.prototype.isPointsMaterial = true;\r\n\r\nPointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _inverseMatrix$2 = new Matrix4();\r\nconst _ray$2 = new Ray();\r\nconst _sphere$3 = new Sphere();\r\nconst _position$1 = new Vector3();\r\n\r\nfunction Points( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new PointsMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Points,\r\n\r\n\tisPoints: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$3.copy( geometry.boundingSphere );\r\n\t\t_sphere$3.applyMatrix4( matrixWorld );\r\n\t\t_sphere$3.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\r\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\r\n\r\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\r\n\r\n\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\tconst intersectPoint = new Vector3();\r\n\r\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\r\n\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\tpoint: intersectPoint,\r\n\t\t\tindex: index,\r\n\t\t\tface: null,\r\n\t\t\tobject: object\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.format = format !== undefined ? format : RGBFormat;\r\n\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tconst scope = this;\r\n\r\n\tfunction updateVideo() {\r\n\r\n\t\tscope.needsUpdate = true;\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n\tif ( 'requestVideoFrameCallback' in video ) {\r\n\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n}\r\n\r\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\r\n\r\n\tconstructor: VideoTexture,\r\n\r\n\tisVideoTexture: true,\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst video = this.image;\r\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\r\n\r\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n}\r\n\r\nCompressedTexture.prototype = Object.create( Texture.prototype );\r\nCompressedTexture.prototype.constructor = CompressedTexture;\r\n\r\nCompressedTexture.prototype.isCompressedTexture = true;\r\n\r\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nCanvasTexture.prototype = Object.create( Texture.prototype );\r\nCanvasTexture.prototype.constructor = CanvasTexture;\r\nCanvasTexture.prototype.isCanvasTexture = true;\r\n\r\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\r\n\r\n\tformat = format !== undefined ? format : DepthFormat;\r\n\r\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\r\n\r\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\r\n\r\n\t}\r\n\r\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\r\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps\t= false;\r\n\r\n}\r\n\r\nDepthTexture.prototype = Object.create( Texture.prototype );\r\nDepthTexture.prototype.constructor = DepthTexture;\r\nDepthTexture.prototype.isDepthTexture = true;\r\n\r\nfunction WireframeGeometry( geometry ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'WireframeGeometry';\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// different logic for Geometry and BufferGeometry\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t// create a data structure that contains all edges without duplicates\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tconst edge1 = face[ keys[ j ] ];\r\n\t\t\t\tconst edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// generate vertices\r\n\r\n\t\tfor ( const key in edges ) {\r\n\r\n\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\tlet vertex = geometry.vertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = geometry.vertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t} else if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n\t\tlet vertex = new Vector3();\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst indices = geometry.index;\r\n\t\t\tlet groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// create a data structure that contains all eges without duplicates\r\n\r\n\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tconst group = groups[ o ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\r\n\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\r\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// generate vertices\r\n\r\n\t\t\tfor ( const key in edges ) {\r\n\r\n\t\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\r\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\r\n\r\n\t\t\t\t\tconst index1 = 3 * i + j;\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nWireframeGeometry.prototype.constructor = WireframeGeometry;\r\n\r\n/**\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\r\n */\r\n\r\n// ParametricGeometry\r\n\r\nfunction ParametricGeometry( func, slices, stacks ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nParametricGeometry.prototype = Object.create( Geometry.prototype );\r\nParametricGeometry.prototype.constructor = ParametricGeometry;\r\n\r\n// ParametricBufferGeometry\r\n\r\nfunction ParametricBufferGeometry( func, slices, stacks ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\tconst EPS = 0.00001;\r\n\r\n\tconst normal = new Vector3();\r\n\r\n\tconst p0 = new Vector3(), p1 = new Vector3();\r\n\tconst pu = new Vector3(), pv = new Vector3();\r\n\r\n\tif ( func.length < 3 ) {\r\n\r\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\r\n\r\n\t}\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tconst sliceCount = slices + 1;\r\n\r\n\tfor ( let i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tconst v = i / stacks;\r\n\r\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tconst u = j / slices;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tfunc( u, v, p0 );\r\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\t// approximate tangent vectors via finite differences\r\n\r\n\t\t\tif ( u - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u - EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u + EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( v - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u, v - EPS, p1 );\r\n\t\t\t\tpv.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u, v + EPS, p1 );\r\n\t\t\t\tpv.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// cross product of tangent vectors returns surface normal\r\n\r\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u, v );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\tconst a = i * sliceCount + j;\r\n\t\t\tconst b = i * sliceCount + j + 1;\r\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\t// faces one and two\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\r\n\r\n// PolyhedronGeometry\r\n\r\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\r\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\r\n\r\n// PolyhedronBufferGeometry\r\n\r\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\t// default buffer data\r\n\r\n\tconst vertexBuffer = [];\r\n\tconst uvBuffer = [];\r\n\r\n\t// the subdivision creates the vertex buffer data\r\n\r\n\tsubdivide( detail );\r\n\r\n\t// all vertices should lie on a conceptual sphere with a given radius\r\n\r\n\tapplyRadius( radius );\r\n\r\n\t// finally, create the uv data\r\n\r\n\tgenerateUVs();\r\n\r\n\t// build non-indexed geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\r\n\r\n\tif ( detail === 0 ) {\r\n\r\n\t\tthis.computeVertexNormals(); // flat normals\r\n\r\n\t} else {\r\n\r\n\t\tthis.normalizeNormals(); // smooth normals\r\n\r\n\t}\r\n\r\n\t// helper functions\r\n\r\n\tfunction subdivide( detail ) {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\t// iterate over all faces and apply a subdivison with the given detail value\r\n\r\n\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t// get the vertices of the face\r\n\r\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\r\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\r\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\r\n\r\n\t\t\t// perform subdivision\r\n\r\n\t\t\tsubdivideFace( a, b, c, detail );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction subdivideFace( a, b, c, detail ) {\r\n\r\n\t\tconst cols = Math.pow( 2, detail );\r\n\r\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\r\n\r\n\t\tconst v = [];\r\n\r\n\t\t// construct all of the vertices for this subdivision\r\n\r\n\t\tfor ( let i = 0; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tconst aj = a.clone().lerp( c, i / cols );\r\n\t\t\tconst bj = b.clone().lerp( c, i / cols );\r\n\r\n\t\t\tconst rows = cols - i;\r\n\r\n\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// construct all of the faces\r\n\r\n\t\tfor ( let i = 0; i < cols; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tconst k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction applyRadius( radius ) {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\t// iterate over the entire buffer and apply the radius to each vertex\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tvertex.normalize().multiplyScalar( radius );\r\n\r\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\r\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\r\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\r\n\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\r\n\t\t\tuvBuffer.push( u, 1 - v );\r\n\r\n\t\t}\r\n\r\n\t\tcorrectUVs();\r\n\r\n\t\tcorrectSeam();\r\n\r\n\t}\r\n\r\n\tfunction correctSeam() {\r\n\r\n\t\t// handle case when face straddles the seam, see #3269\r\n\r\n\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\r\n\r\n\t\t\t// uv data of a single face\r\n\r\n\t\t\tconst x0 = uvBuffer[ i + 0 ];\r\n\t\t\tconst x1 = uvBuffer[ i + 2 ];\r\n\t\t\tconst x2 = uvBuffer[ i + 4 ];\r\n\r\n\t\t\tconst max = Math.max( x0, x1, x2 );\r\n\t\t\tconst min = Math.min( x0, x1, x2 );\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\r\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\r\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction pushVertex( vertex ) {\r\n\r\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t}\r\n\r\n\tfunction getVertexByIndex( index, vertex ) {\r\n\r\n\t\tconst stride = index * 3;\r\n\r\n\t\tvertex.x = vertices[ stride + 0 ];\r\n\t\tvertex.y = vertices[ stride + 1 ];\r\n\t\tvertex.z = vertices[ stride + 2 ];\r\n\r\n\t}\r\n\r\n\tfunction correctUVs() {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\tconst centroid = new Vector3();\r\n\r\n\t\tconst uvA = new Vector2();\r\n\t\tconst uvB = new Vector2();\r\n\t\tconst uvC = new Vector2();\r\n\r\n\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\r\n\r\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\r\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\r\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\r\n\r\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\r\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\r\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\r\n\r\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\r\n\r\n\t\t\tconst azi = azimuth( centroid );\r\n\r\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\r\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\r\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction correctUV( uv, stride, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\r\n\r\n// TetrahedronGeometry\r\n\r\nfunction TetrahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\r\n\r\n// TetrahedronBufferGeometry\r\n\r\nfunction TetrahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\r\n\r\n// OctahedronGeometry\r\n\r\nfunction OctahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\r\n\r\n// OctahedronBufferGeometry\r\n\r\nfunction OctahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\r\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\r\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\r\n\t\t1, 3, 4,\t1, 4, 2\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\r\n\r\n// IcosahedronGeometry\r\n\r\nfunction IcosahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\r\n\r\n// IcosahedronBufferGeometry\r\n\r\nfunction IcosahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tconst vertices = [\r\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\r\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\r\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\r\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\r\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\r\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\r\n\r\n// DodecahedronGeometry\r\n\r\nfunction DodecahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\r\n\r\n// DodecahedronBufferGeometry\r\n\r\nfunction DodecahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tconst r = 1 / t;\r\n\r\n\tconst vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\r\n\t\t- 1, 1, - 1, - 1, 1, 1,\r\n\t\t1, - 1, - 1, 1, - 1, 1,\r\n\t\t1, 1, - 1, 1, 1, 1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t, 0, - r, t,\r\n\t\t 0, r, - t, 0, r, t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t, 0, - r, t, 0,\r\n\t\t r, - t, 0, r, t, 0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t, 0, - r, t, 0, - r,\r\n\t\t- t, 0, r, t, 0, r\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\r\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\r\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\r\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\r\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\r\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\r\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\r\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\r\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\r\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\r\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\r\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\r\n\r\n// TubeGeometry\r\n\r\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\r\n\r\n\tconst bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = bufferGeometry.tangents;\r\n\tthis.normals = bufferGeometry.normals;\r\n\tthis.binormals = bufferGeometry.binormals;\r\n\r\n\t// create geometry\r\n\r\n\tthis.fromBufferGeometry( bufferGeometry );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTubeGeometry.prototype = Object.create( Geometry.prototype );\r\nTubeGeometry.prototype.constructor = TubeGeometry;\r\n\r\n// TubeBufferGeometry\r\n\r\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TubeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\ttubularSegments = tubularSegments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\r\n\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = frames.tangents;\r\n\tthis.normals = frames.normals;\r\n\tthis.binormals = frames.binormals;\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\tconst uv = new Vector2();\r\n\tlet P = new Vector3();\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\tconst indices = [];\r\n\r\n\t// create buffer data\r\n\r\n\tgenerateBufferData();\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// functions\r\n\r\n\tfunction generateBufferData() {\r\n\r\n\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\r\n\r\n\t\t\tgenerateSegment( i );\r\n\r\n\t\t}\r\n\r\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\r\n\t\t// at the regular position on the given path\r\n\t\t//\r\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n\t\t// uvs are generated in a separate function.\r\n\t\t// this makes it easy compute correct values for closed geometries\r\n\r\n\t\tgenerateUVs();\r\n\r\n\t\t// finally create faces\r\n\r\n\t\tgenerateIndices();\r\n\r\n\t}\r\n\r\n\tfunction generateSegment( i ) {\r\n\r\n\t\t// we use getPointAt to sample evenly distributed points from the given path\r\n\r\n\t\tP = path.getPointAt( i / tubularSegments, P );\r\n\r\n\t\t// retrieve corresponding normal and binormal\r\n\r\n\t\tconst N = frames.normals[ i ];\r\n\t\tconst B = frames.binormals[ i ];\r\n\r\n\t\t// generate normals and vertices for the current segment\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tconst sin = Math.sin( v );\r\n\t\t\tconst cos = - Math.cos( v );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\r\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\r\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\r\n\t\t\tnormal.normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = P.x + radius * normal.x;\r\n\t\t\tvertex.y = P.y + radius * normal.y;\r\n\t\t\tvertex.z = P.z + radius * normal.z;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateIndices() {\r\n\r\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\t\tuv.x = i / tubularSegments;\r\n\t\t\t\tuv.y = j / radialSegments;\r\n\r\n\t\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\r\n\r\nTubeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tdata.path = this.parameters.path.toJSON();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// TorusKnotGeometry\r\n\r\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\r\n\r\n// TorusKnotBufferGeometry\r\n\r\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\tconst P1 = new Vector3();\r\n\tconst P2 = new Vector3();\r\n\r\n\tconst B = new Vector3();\r\n\tconst T = new Vector3();\r\n\tconst N = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tconst u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\t\t\tconst cx = - tube * Math.cos( v );\r\n\t\t\tconst cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tconst cu = Math.cos( u );\r\n\t\tconst su = Math.sin( u );\r\n\t\tconst quOverP = q / p * u;\r\n\t\tconst cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n}\r\n\r\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\r\n\r\n// TorusGeometry\r\n\r\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusGeometry.prototype.constructor = TorusGeometry;\r\n\r\n// TorusBufferGeometry\r\n\r\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst center = new Vector3();\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tconst u = i / tubularSegments * arc;\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\r\n\r\n/**\r\n * Port from https://github.com/mapbox/earcut (v2.2.2)\r\n */\r\n\r\nconst Earcut = {\r\n\r\n\ttriangulate: function ( data, holeIndices, dim ) {\r\n\r\n\t\tdim = dim || 2;\r\n\r\n\t\tlet hasHoles = holeIndices && holeIndices.length,\r\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\r\n\t\t\ttriangles = [];\r\n\r\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\r\n\r\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\t\tif ( data.length > 80 * dim ) {\r\n\r\n\t\t\tminX = maxX = data[ 0 ];\r\n\t\t\tminY = maxY = data[ 1 ];\r\n\r\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\r\n\r\n\t\t\t\tx = data[ i ];\r\n\t\t\t\ty = data[ i + 1 ];\r\n\t\t\t\tif ( x < minX ) minX = x;\r\n\t\t\t\tif ( y < minY ) minY = y;\r\n\t\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\t\tif ( y > maxY ) maxY = y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\r\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n\t\t}\r\n\r\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n\t\treturn triangles;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// create a circular doubly linked list from polygon points in the specified winding order\r\nfunction linkedList( data, start, end, dim, clockwise ) {\r\n\r\n\tlet i, last;\r\n\r\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t}\r\n\r\n\tif ( last && equals( last, last.next ) ) {\r\n\r\n\t\tremoveNode( last );\r\n\t\tlast = last.next;\r\n\r\n\t}\r\n\r\n\treturn last;\r\n\r\n}\r\n\r\n// eliminate colinear or duplicate points\r\nfunction filterPoints( start, end ) {\r\n\r\n\tif ( ! start ) return start;\r\n\tif ( ! end ) end = start;\r\n\r\n\tlet p = start,\r\n\t\tagain;\r\n\tdo {\r\n\r\n\t\tagain = false;\r\n\r\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n\t\t\tremoveNode( p );\r\n\t\t\tp = end = p.prev;\r\n\t\t\tif ( p === p.next ) break;\r\n\t\t\tagain = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tp = p.next;\r\n\r\n\t\t}\r\n\r\n\t} while ( again || p !== end );\r\n\r\n\treturn end;\r\n\r\n}\r\n\r\n// main ear slicing loop which triangulates a polygon (given as a linked list)\r\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n\tif ( ! ear ) return;\r\n\r\n\t// interlink polygon nodes in z-order\r\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n\tlet stop = ear,\r\n\t\tprev, next;\r\n\r\n\t// iterate through ears, slicing them one by one\r\n\twhile ( ear.prev !== ear.next ) {\r\n\r\n\t\tprev = ear.prev;\r\n\t\tnext = ear.next;\r\n\r\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n\t\t\t// cut off the triangle\r\n\t\t\ttriangles.push( prev.i / dim );\r\n\t\t\ttriangles.push( ear.i / dim );\r\n\t\t\ttriangles.push( next.i / dim );\r\n\r\n\t\t\tremoveNode( ear );\r\n\r\n\t\t\t// skipping the next vertex leads to less sliver triangles\r\n\t\t\tear = next.next;\r\n\t\t\tstop = next.next;\r\n\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tear = next;\r\n\r\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\r\n\t\tif ( ear === stop ) {\r\n\r\n\t\t\t// try filtering points and slicing again\r\n\t\t\tif ( ! pass ) {\r\n\r\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\r\n\r\n\t\t\t} else if ( pass === 1 ) {\r\n\r\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\r\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\r\n\r\n\t\t\t} else if ( pass === 2 ) {\r\n\r\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// check whether a polygon node forms a valid ear with adjacent nodes\r\nfunction isEar( ear ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// now make sure we don't have other points inside the potential ear\r\n\tlet p = ear.next.next;\r\n\r\n\twhile ( p !== ear.prev ) {\r\n\r\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.next;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// triangle bbox; min & max are calculated like this for speed\r\n\tlet minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n\t// z-order range for the current triangle bbox;\r\n\tlet minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n\tlet p = ear.prevZ,\r\n\t\tn = ear.nextZ;\r\n\r\n\t// look for points inside the triangle in both directions\r\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in decreasing z-order\r\n\twhile ( p && p.z >= minZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in increasing z-order\r\n\twhile ( n && n.z <= maxZ ) {\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\n// go through all polygon nodes and cure small local self-intersections\r\nfunction cureLocalIntersections( start, triangles, dim ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tlet a = p.prev,\r\n\t\t\tb = p.next.next;\r\n\r\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n\t\t\ttriangles.push( a.i / dim );\r\n\t\t\ttriangles.push( p.i / dim );\r\n\t\t\ttriangles.push( b.i / dim );\r\n\r\n\t\t\t// remove two nodes involved\r\n\t\t\tremoveNode( p );\r\n\t\t\tremoveNode( p.next );\r\n\r\n\t\t\tp = start = b;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn filterPoints( p );\r\n\r\n}\r\n\r\n// try splitting polygon into two and triangulate them independently\r\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n\t// look for a valid diagonal that divides the polygon into two\r\n\tlet a = start;\r\n\tdo {\r\n\r\n\t\tlet b = a.next.next;\r\n\t\twhile ( b !== a.prev ) {\r\n\r\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n\t\t\t\t// split the polygon in two by the diagonal\r\n\t\t\t\tlet c = splitPolygon( a, b );\r\n\r\n\t\t\t\t// filter colinear points around the cuts\r\n\t\t\t\ta = filterPoints( a, a.next );\r\n\t\t\t\tc = filterPoints( c, c.next );\r\n\r\n\t\t\t\t// run earcut on each half\r\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\r\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tb = b.next;\r\n\r\n\t\t}\r\n\r\n\t\ta = a.next;\r\n\r\n\t} while ( a !== start );\r\n\r\n}\r\n\r\n// link every hole into the outer loop, producing a single-ring polygon without holes\r\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n\tlet queue = [],\r\n\t\ti, len, start, end, list;\r\n\r\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n\t\tstart = holeIndices[ i ] * dim;\r\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n\t\tlist = linkedList( data, start, end, dim, false );\r\n\t\tif ( list === list.next ) list.steiner = true;\r\n\t\tqueue.push( getLeftmost( list ) );\r\n\r\n\t}\r\n\r\n\tqueue.sort( compareX );\r\n\r\n\t// process holes from left to right\r\n\tfor ( i = 0; i < queue.length; i ++ ) {\r\n\r\n\t\teliminateHole( queue[ i ], outerNode );\r\n\t\touterNode = filterPoints( outerNode, outerNode.next );\r\n\r\n\t}\r\n\r\n\treturn outerNode;\r\n\r\n}\r\n\r\nfunction compareX( a, b ) {\r\n\r\n\treturn a.x - b.x;\r\n\r\n}\r\n\r\n// find a bridge between vertices that connects hole with an outer ring and and link it\r\nfunction eliminateHole( hole, outerNode ) {\r\n\r\n\touterNode = findHoleBridge( hole, outerNode );\r\n\tif ( outerNode ) {\r\n\r\n\t\tconst b = splitPolygon( outerNode, hole );\r\n\r\n\t\t// filter collinear points around the cuts\r\n\t\tfilterPoints( outerNode, outerNode.next );\r\n\t\tfilterPoints( b, b.next );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\r\nfunction findHoleBridge( hole, outerNode ) {\r\n\r\n\tlet p = outerNode,\r\n\t\thx = hole.x,\r\n\t\thy = hole.y,\r\n\t\tqx = - Infinity,\r\n\t\tm;\r\n\r\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\r\n\t// segment's endpoint with lesser x will be potential connection point\r\n\tdo {\r\n\r\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n\t\t\tlet x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\t\t\tif ( x <= hx && x > qx ) {\r\n\r\n\t\t\t\tqx = x;\r\n\t\t\t\tif ( x === hx ) {\r\n\r\n\t\t\t\t\tif ( hy === p.y ) return p;\r\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== outerNode );\r\n\r\n\tif ( ! m ) return null;\r\n\r\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\r\n\r\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\r\n\t// if there are no points found, we have a valid connection;\r\n\t// otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n\tlet stop = m,\r\n\t\tmx = m.x,\r\n\t\tmy = m.y,\r\n\t\ttanMin = Infinity,\r\n\t\ttan;\r\n\r\n\tp = m;\r\n\r\n\tdo {\r\n\r\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\r\n\r\n\t\t\t\tm = p;\r\n\t\t\t\ttanMin = tan;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== stop );\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n// whether sector in vertex m contains sector in vertex p in the same coordinates\r\nfunction sectorContainsSector( m, p ) {\r\n\r\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\r\n\r\n}\r\n\r\n// interlink polygon nodes in z-order\r\nfunction indexCurve( start, minX, minY, invSize ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n\t\tp.prevZ = p.prev;\r\n\t\tp.nextZ = p.next;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\tp.prevZ.nextZ = null;\r\n\tp.prevZ = null;\r\n\r\n\tsortLinked( p );\r\n\r\n}\r\n\r\n// Simon Tatham's linked list merge sort algorithm\r\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\nfunction sortLinked( list ) {\r\n\r\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\r\n\t\tinSize = 1;\r\n\r\n\tdo {\r\n\r\n\t\tp = list;\r\n\t\tlist = null;\r\n\t\ttail = null;\r\n\t\tnumMerges = 0;\r\n\r\n\t\twhile ( p ) {\r\n\r\n\t\t\tnumMerges ++;\r\n\t\t\tq = p;\r\n\t\t\tpSize = 0;\r\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\r\n\r\n\t\t\t\tpSize ++;\r\n\t\t\t\tq = q.nextZ;\r\n\t\t\t\tif ( ! q ) break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tqSize = inSize;\r\n\r\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n\t\t\t\t\te = p;\r\n\t\t\t\t\tp = p.nextZ;\r\n\t\t\t\t\tpSize --;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\te = q;\r\n\t\t\t\t\tq = q.nextZ;\r\n\t\t\t\t\tqSize --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( tail ) tail.nextZ = e;\r\n\t\t\t\telse list = e;\r\n\r\n\t\t\t\te.prevZ = tail;\r\n\t\t\t\ttail = e;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp = q;\r\n\r\n\t\t}\r\n\r\n\t\ttail.nextZ = null;\r\n\t\tinSize *= 2;\r\n\r\n\t} while ( numMerges > 1 );\r\n\r\n\treturn list;\r\n\r\n}\r\n\r\n// z-order of a point given coords and inverse of the longer side of data bbox\r\nfunction zOrder( x, y, minX, minY, invSize ) {\r\n\r\n\t// coords are transformed into non-negative 15-bit integer range\r\n\tx = 32767 * ( x - minX ) * invSize;\r\n\ty = 32767 * ( y - minY ) * invSize;\r\n\r\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\r\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\r\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n\treturn x | ( y << 1 );\r\n\r\n}\r\n\r\n// find the leftmost node of a polygon ring\r\nfunction getLeftmost( start ) {\r\n\r\n\tlet p = start,\r\n\t\tleftmost = start;\r\n\tdo {\r\n\r\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn leftmost;\r\n\r\n}\r\n\r\n// check if a point lies within a convex triangle\r\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n}\r\n\r\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\nfunction isValidDiagonal( a, b ) {\r\n\r\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\r\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\r\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\r\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\r\n\r\n}\r\n\r\n// signed area of a triangle\r\nfunction area( p, q, r ) {\r\n\r\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n}\r\n\r\n// check if two points are equal\r\nfunction equals( p1, p2 ) {\r\n\r\n\treturn p1.x === p2.x && p1.y === p2.y;\r\n\r\n}\r\n\r\n// check if two segments intersect\r\nfunction intersects( p1, q1, p2, q2 ) {\r\n\r\n\tconst o1 = sign( area( p1, q1, p2 ) );\r\n\tconst o2 = sign( area( p1, q1, q2 ) );\r\n\tconst o3 = sign( area( p2, q2, p1 ) );\r\n\tconst o4 = sign( area( p2, q2, q1 ) );\r\n\r\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\r\n\r\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\r\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\r\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\r\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// for collinear points p, q, r, check if point q lies on segment pr\r\nfunction onSegment( p, q, r ) {\r\n\r\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\r\n\r\n}\r\n\r\nfunction sign( num ) {\r\n\r\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\r\n\r\n}\r\n\r\n// check if a polygon diagonal intersects any polygon segments\r\nfunction intersectsPolygon( a, b ) {\r\n\r\n\tlet p = a;\r\n\tdo {\r\n\r\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// check if a polygon diagonal is locally inside the polygon\r\nfunction locallyInside( a, b ) {\r\n\r\n\treturn area( a.prev, a, a.next ) < 0 ?\r\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n}\r\n\r\n// check if the middle point of a polygon diagonal is inside the polygon\r\nfunction middleInside( a, b ) {\r\n\r\n\tlet p = a,\r\n\t\tinside = false,\r\n\t\tpx = ( a.x + b.x ) / 2,\r\n\t\tpy = ( a.y + b.y ) / 2;\r\n\tdo {\r\n\r\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\r\n\t\t\tinside = ! inside;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn inside;\r\n\r\n}\r\n\r\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\nfunction splitPolygon( a, b ) {\r\n\r\n\tlet a2 = new Node( a.i, a.x, a.y ),\r\n\t\tb2 = new Node( b.i, b.x, b.y ),\r\n\t\tan = a.next,\r\n\t\tbp = b.prev;\r\n\r\n\ta.next = b;\r\n\tb.prev = a;\r\n\r\n\ta2.next = an;\r\n\tan.prev = a2;\r\n\r\n\tb2.next = a2;\r\n\ta2.prev = b2;\r\n\r\n\tbp.next = b2;\r\n\tb2.prev = bp;\r\n\r\n\treturn b2;\r\n\r\n}\r\n\r\n// create a node and optionally link it with previous one (in a circular doubly linked list)\r\nfunction insertNode( i, x, y, last ) {\r\n\r\n\tconst p = new Node( i, x, y );\r\n\r\n\tif ( ! last ) {\r\n\r\n\t\tp.prev = p;\r\n\t\tp.next = p;\r\n\r\n\t} else {\r\n\r\n\t\tp.next = last.next;\r\n\t\tp.prev = last;\r\n\t\tlast.next.prev = p;\r\n\t\tlast.next = p;\r\n\r\n\t}\r\n\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction removeNode( p ) {\r\n\r\n\tp.next.prev = p.prev;\r\n\tp.prev.next = p.next;\r\n\r\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n}\r\n\r\nfunction Node( i, x, y ) {\r\n\r\n\t// vertex index in coordinates array\r\n\tthis.i = i;\r\n\r\n\t// vertex coordinates\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n\t// previous and next vertex nodes in a polygon ring\r\n\tthis.prev = null;\r\n\tthis.next = null;\r\n\r\n\t// z-order curve value\r\n\tthis.z = null;\r\n\r\n\t// previous and next nodes in z-order\r\n\tthis.prevZ = null;\r\n\tthis.nextZ = null;\r\n\r\n\t// indicates whether this is a steiner point\r\n\tthis.steiner = false;\r\n\r\n}\r\n\r\nfunction signedArea( data, start, end, dim ) {\r\n\r\n\tlet sum = 0;\r\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n\t\tj = i;\r\n\r\n\t}\r\n\r\n\treturn sum;\r\n\r\n}\r\n\r\nconst ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tconst n = contour.length;\r\n\t\tlet a = 0.0;\r\n\r\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\r\n\t\tconst holeIndices = []; // array of hole indices\r\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\r\n\r\n\t\tremoveDupEndPts( contour );\r\n\t\taddContour( vertices, contour );\r\n\r\n\t\t//\r\n\r\n\t\tlet holeIndex = contour.length;\r\n\r\n\t\tholes.forEach( removeDupEndPts );\r\n\r\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\r\n\r\n\t\t\tholeIndices.push( holeIndex );\r\n\t\t\tholeIndex += holes[ i ].length;\r\n\t\t\taddContour( vertices, holes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\r\n\r\n\t\t//\r\n\r\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\r\n\r\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn faces;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction removeDupEndPts( points ) {\r\n\r\n\tconst l = points.length;\r\n\r\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\tpoints.pop();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction addContour( vertices, contour ) {\r\n\r\n\tfor ( let i = 0; i < contour.length; i ++ ) {\r\n\r\n\t\tvertices.push( contour[ i ].x );\r\n\t\tvertices.push( contour[ i ].y );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  depth: <float>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float>, // how far from shape outline does bevel start\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\r\n *\r\n *  UVGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n */\r\n\r\n// ExtrudeGeometry\r\n\r\nfunction ExtrudeGeometry( shapes, options ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\r\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\r\n\r\nExtrudeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n// ExtrudeBufferGeometry\r\n\r\nfunction ExtrudeBufferGeometry( shapes, options ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tconst scope = this;\r\n\r\n\tconst verticesArray = [];\r\n\tconst uvArray = [];\r\n\r\n\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tconst shape = shapes[ i ];\r\n\t\taddShape( shape );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst placeholder = [];\r\n\r\n\t\t// options\r\n\r\n\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\tconst steps = options.steps !== undefined ? options.steps : 1;\r\n\t\tlet depth = options.depth !== undefined ? options.depth : 100;\r\n\r\n\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\r\n\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\r\n\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\r\n\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\r\n\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\t\tconst extrudePath = options.extrudePath;\r\n\r\n\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\r\n\r\n\t\t// deprecated options\r\n\r\n\t\tif ( options.amount !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\r\n\t\t\tdepth = options.amount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet extrudePts, extrudeByPath = false;\r\n\t\tlet splineTube, binormal, normal, position2;\r\n\r\n\t\tif ( extrudePath ) {\r\n\r\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\t\textrudeByPath = true;\r\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t\t// SETUP TNB variables\r\n\r\n\t\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\r\n\r\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\t\tbinormal = new Vector3();\r\n\t\t\tnormal = new Vector3();\r\n\t\t\tposition2 = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// Safeguards if bevels are not enabled\r\n\r\n\t\tif ( ! bevelEnabled ) {\r\n\r\n\t\t\tbevelSegments = 0;\r\n\t\t\tbevelThickness = 0;\r\n\t\t\tbevelSize = 0;\r\n\t\t\tbevelOffset = 0;\r\n\r\n\t\t}\r\n\r\n\t\t// Variables initialization\r\n\r\n\t\tconst shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet vertices = shapePoints.shape;\r\n\t\tconst holes = shapePoints.holes;\r\n\r\n\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\r\n\r\n\t\tif ( reverse ) {\r\n\r\n\t\t\tvertices = vertices.reverse();\r\n\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t\t/* Vertices */\r\n\r\n\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\tvertices = vertices.concat( ahole );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction scalePt2( pt, vec, size ) {\r\n\r\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t\t}\r\n\r\n\t\tconst vlen = vertices.length, flen = faces.length;\r\n\r\n\r\n\t\t// Find directions for point movement\r\n\r\n\r\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t\t//\r\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\r\n\r\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\t\tconst v_prev_x = inPt.x - inPrev.x,\r\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\r\n\t\t\tconst v_next_x = inNext.x - inPt.x,\r\n\t\t\t\tv_next_y = inNext.y - inPt.y;\r\n\r\n\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t\t// check for collinear edges\r\n\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not collinear\r\n\r\n\t\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\r\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t\t//  but prevent crazy spikes\r\n\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\t\tlet direction_eq = false; // assumes: opposite\r\n\r\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\t\tv_trans_y = v_prev_x;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst contourMovements = [];\r\n\r\n\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tconst holesMovements = [];\r\n\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\toneHoleMovements = [];\r\n\r\n\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\t\tif ( j === il ) j = 0;\r\n\t\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t\t//  (j)---(i)---(k)\r\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tholesMovements.push( oneHoleMovements );\r\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bs = bevelSize + bevelOffset;\r\n\r\n\t\t// Back facing vertices\r\n\r\n\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Add stepped vertices...\r\n\t\t// Including front facing vertices\r\n\r\n\t\tfor ( let s = 1; s <= steps; s ++ ) {\r\n\r\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Add bevel segments planes\r\n\r\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/* Faces */\r\n\r\n\t\t// Top and bottom faces\r\n\r\n\t\tbuildLidFaces();\r\n\r\n\t\t// Sides faces\r\n\r\n\t\tbuildSideFaces();\r\n\r\n\r\n\t\t/////  Internal functions\r\n\r\n\t\tfunction buildLidFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\r\n\t\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\t\tlet layer = 0; // steps + 1\r\n\t\t\t\tlet offset = vlen * layer;\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// Create faces for the z-sides of the shape\r\n\r\n\t\tfunction buildSideFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\t\t\tlet layeroffset = 0;\r\n\t\t\tsidewalls( contour, layeroffset );\r\n\t\t\tlayeroffset += contour.length;\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t\t//, true\r\n\t\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\t\tlet i = contour.length;\r\n\r\n\t\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\t\tconst j = i;\r\n\t\t\t\tlet k = i - 1;\r\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\r\n\r\n\t\t\t\t\tconst slen1 = vlen * s;\r\n\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\t\tconst a = layeroffset + j + slen1,\r\n\t\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\t\tf4( a, b, c, d );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction v( x, y, z ) {\r\n\r\n\t\t\tplaceholder.push( x );\r\n\t\t\tplaceholder.push( y );\r\n\t\t\tplaceholder.push( z );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction f3( a, b, c ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction f4( a, b, c, d ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( d );\r\n\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\t\t\taddVertex( d );\r\n\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction addVertex( index ) {\r\n\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction addUV( vector2 ) {\r\n\r\n\t\t\tuvArray.push( vector2.x );\r\n\t\t\tuvArray.push( vector2.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\r\n\r\nExtrudeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n//\r\n\r\nconst WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\r\n\t\treturn [\r\n\t\t\tnew Vector2( a_x, a_y ),\r\n\t\t\tnew Vector2( b_x, b_y ),\r\n\t\t\tnew Vector2( c_x, c_y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\r\n\t\tconst d_x = vertices[ indexD * 3 ];\r\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\r\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\r\n\r\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\nfunction toJSON( shapes, options, data ) {\r\n\r\n\t//\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\n/**\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float> // how far from text outline does bevel start\r\n * }\r\n */\r\n\r\n// TextGeometry\r\n\r\nfunction TextGeometry( text, parameters ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\ttext: text,\r\n\t\tparameters: parameters\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTextGeometry.prototype = Object.create( Geometry.prototype );\r\nTextGeometry.prototype.constructor = TextGeometry;\r\n\r\n// TextBufferGeometry\r\n\r\nfunction TextBufferGeometry( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst font = parameters.font;\r\n\r\n\tif ( ! ( font && font.isFont ) ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new Geometry();\r\n\r\n\t}\r\n\r\n\tconst shapes = font.generateShapes( text, parameters.size );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextBufferGeometry';\r\n\r\n}\r\n\r\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\r\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\r\n\r\n// SphereGeometry\r\n\r\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nSphereGeometry.prototype = Object.create( Geometry.prototype );\r\nSphereGeometry.prototype.constructor = SphereGeometry;\r\n\r\n// SphereBufferGeometry\r\n\r\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\r\n\r\n\tlet index = 0;\r\n\tconst grid = [];\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n\t\tconst verticesRow = [];\r\n\r\n\t\tconst v = iy / heightSegments;\r\n\r\n\t\t// special case for the poles\r\n\r\n\t\tlet uOffset = 0;\r\n\r\n\t\tif ( iy == 0 && thetaStart == 0 ) {\r\n\r\n\t\t\tuOffset = 0.5 / widthSegments;\r\n\r\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\r\n\r\n\t\t\tuOffset = - 0.5 / widthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst u = ix / widthSegments;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.copy( vertex ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u + uOffset, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index ++ );\r\n\r\n\t\t}\r\n\r\n\t\tgrid.push( verticesRow );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst a = grid[ iy ][ ix + 1 ];\r\n\t\t\tconst b = grid[ iy ][ ix ];\r\n\t\t\tconst c = grid[ iy + 1 ][ ix ];\r\n\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\r\n\r\n// RingGeometry\r\n\r\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nRingGeometry.prototype = Object.create( Geometry.prototype );\r\nRingGeometry.prototype.constructor = RingGeometry;\r\n\r\n// RingBufferGeometry\r\n\r\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0.5;\r\n\touterRadius = outerRadius || 1;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// some helper variables\r\n\r\n\tlet radius = innerRadius;\r\n\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\t// values are generate from the inside of the ring to the outside\r\n\r\n\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tconst segment = i + thetaSegmentLevel;\r\n\r\n\t\t\tconst a = segment;\r\n\t\t\tconst b = segment + thetaSegments + 1;\r\n\t\t\tconst c = segment + thetaSegments + 2;\r\n\t\t\tconst d = segment + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\r\n\r\n// LatheGeometry\r\n\r\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nLatheGeometry.prototype = Object.create( Geometry.prototype );\r\nLatheGeometry.prototype.constructor = LatheGeometry;\r\n\r\n// LatheBufferGeometry\r\n\r\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\r\n\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst inverseSegments = 1.0 / segments;\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tconst phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tconst sin = Math.sin( phi );\r\n\t\tconst cos = Math.cos( phi );\r\n\r\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tconst base = j + i * points.length;\r\n\r\n\t\t\tconst a = base;\r\n\t\t\tconst b = base + points.length;\r\n\t\t\tconst c = base + points.length + 1;\r\n\t\t\tconst d = base + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif ( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tconst normals = this.attributes.normal.array;\r\n\t\tconst n1 = new Vector3();\r\n\t\tconst n2 = new Vector3();\r\n\t\tconst n = new Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\r\n\t\tconst base = segments * points.length * 3;\r\n\r\n\t\tfor ( let i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\r\n\r\n// ShapeGeometry\r\n\r\nfunction ShapeGeometry( shapes, curveSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( typeof curveSegments === 'object' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\r\n\r\n\t\tcurveSegments = curveSegments.curveSegments;\r\n\r\n\t}\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nShapeGeometry.prototype = Object.create( Geometry.prototype );\r\nShapeGeometry.prototype.constructor = ShapeGeometry;\r\n\r\nShapeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n// ShapeBufferGeometry\r\n\r\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tcurveSegments = curveSegments || 12;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet groupStart = 0;\r\n\tlet groupCount = 0;\r\n\r\n\t// allow single and array values for \"shapes\" parameter\r\n\r\n\tif ( Array.isArray( shapes ) === false ) {\r\n\r\n\t\taddShape( shapes );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\r\n\r\n\t\t\taddShape( shapes[ i ] );\r\n\r\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\t\t\tgroupCount = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\r\n\t// helper functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst indexOffset = vertices.length / 3;\r\n\t\tconst points = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet shapeVertices = points.shape;\r\n\t\tconst shapeHoles = points.holes;\r\n\r\n\t\t// check direction of vertices\r\n\r\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\r\n\r\n\t\t\tshapeVertices = shapeVertices.reverse();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\r\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\r\n\r\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\r\n\r\n\t\t// join vertices of inner and outer paths to a single array\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices, normals, uvs\r\n\r\n\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst vertex = shapeVertices[ i ];\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\r\n\r\n\t\t}\r\n\r\n\t\t// incides\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tconst a = face[ 0 ] + indexOffset;\r\n\t\t\tconst b = face[ 1 ] + indexOffset;\r\n\t\t\tconst c = face[ 2 ] + indexOffset;\r\n\r\n\t\t\tindices.push( a, b, c );\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\r\n\r\nShapeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction toJSON$1( shapes, data ) {\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\nfunction EdgesGeometry( geometry, thresholdAngle ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'EdgesGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tthresholdAngle: thresholdAngle\r\n\t};\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tlet edge1, edge2, key;\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// prepare source geometry\r\n\r\n\tlet geometry2;\r\n\r\n\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\tgeometry2 = new Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tconst sourceVertices = geometry2.vertices;\r\n\tconst faces = geometry2.faces;\r\n\r\n\t// now create a data structure where each entry represents an edge with its adjoining faces\r\n\r\n\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tconst face = faces[ i ];\r\n\r\n\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge1 = face[ keys[ j ] ];\r\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\r\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tedges[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate vertices\r\n\r\n\tfor ( key in edges ) {\r\n\r\n\t\tconst e = edges[ key ];\r\n\r\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\r\n\r\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tlet vertex = sourceVertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = sourceVertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nEdgesGeometry.prototype.constructor = EdgesGeometry;\r\n\r\n// CylinderGeometry\r\n\r\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\r\nCylinderGeometry.prototype.constructor = CylinderGeometry;\r\n\r\n// CylinderBufferGeometry\r\n\r\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tconst scope = this;\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\r\n\theight = height || 1;\r\n\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet index = 0;\r\n\tconst indexArray = [];\r\n\tconst halfHeight = height / 2;\r\n\tlet groupStart = 0;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) generateCap( true );\r\n\t\tif ( radiusBottom > 0 ) generateCap( false );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\tfunction generateTorso() {\r\n\r\n\t\tconst normal = new Vector3();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tconst slope = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tconst indexRow = [];\r\n\r\n\t\t\tconst v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\r\n\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tconst u = x / radialSegments;\r\n\r\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\t\tconst sinTheta = Math.sin( theta );\r\n\t\t\t\tconst cosTheta = Math.cos( theta );\r\n\r\n\t\t\t\t// vertex\r\n\r\n\t\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\r\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\r\n\t\t\t\tuvs.push( u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\r\n\t\t\t\tindexRow.push( index ++ );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\r\n\t\t\t\tconst a = indexArray[ y ][ x ];\r\n\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t// update group counter\r\n\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, 0 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n\tfunction generateCap( top ) {\r\n\r\n\t\tlet centerIndexStart, centerIndexEnd;\r\n\r\n\t\tconst uv = new Vector2();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tconst sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( 0.5, 0.5 );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tconst u = x / radialSegments;\r\n\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\tconst cosTheta = Math.cos( theta );\r\n\t\t\tconst sinTheta = Math.sin( theta );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\r\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tconst c = centerIndexStart + x;\r\n\t\t\tconst i = centerIndexEnd + x;\r\n\r\n\t\t\tif ( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\r\n\t\t\t\tindices.push( i, i + 1, c );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\r\n\t\t\t\tindices.push( i + 1, i, c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n}\r\n\r\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\r\n\r\n// ConeGeometry\r\n\r\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\r\nConeGeometry.prototype.constructor = ConeGeometry;\r\n\r\n// ConeBufferGeometry\r\n\r\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\r\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\r\n\r\n// CircleGeometry\r\n\r\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCircleGeometry.prototype = Object.create( Geometry.prototype );\r\nCircleGeometry.prototype.constructor = CircleGeometry;\r\n\r\n// CircleBufferGeometry\r\n\r\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// center point\r\n\r\n\tvertices.push( 0, 0, 0 );\r\n\tnormals.push( 0, 0, 1 );\r\n\tuvs.push( 0.5, 0.5 );\r\n\r\n\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\r\n\r\n\t\tconst segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\t// vertex\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t// normal\r\n\r\n\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t// uvs\r\n\r\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\r\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\r\n\r\nvar Geometries = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tWireframeGeometry: WireframeGeometry,\r\n\tParametricGeometry: ParametricGeometry,\r\n\tParametricBufferGeometry: ParametricBufferGeometry,\r\n\tTetrahedronGeometry: TetrahedronGeometry,\r\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\r\n\tOctahedronGeometry: OctahedronGeometry,\r\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\r\n\tIcosahedronGeometry: IcosahedronGeometry,\r\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\r\n\tDodecahedronGeometry: DodecahedronGeometry,\r\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\r\n\tPolyhedronGeometry: PolyhedronGeometry,\r\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\r\n\tTubeGeometry: TubeGeometry,\r\n\tTubeBufferGeometry: TubeBufferGeometry,\r\n\tTorusKnotGeometry: TorusKnotGeometry,\r\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\r\n\tTorusGeometry: TorusGeometry,\r\n\tTorusBufferGeometry: TorusBufferGeometry,\r\n\tTextGeometry: TextGeometry,\r\n\tTextBufferGeometry: TextBufferGeometry,\r\n\tSphereGeometry: SphereGeometry,\r\n\tSphereBufferGeometry: SphereBufferGeometry,\r\n\tRingGeometry: RingGeometry,\r\n\tRingBufferGeometry: RingBufferGeometry,\r\n\tPlaneGeometry: PlaneGeometry,\r\n\tPlaneBufferGeometry: PlaneBufferGeometry,\r\n\tLatheGeometry: LatheGeometry,\r\n\tLatheBufferGeometry: LatheBufferGeometry,\r\n\tShapeGeometry: ShapeGeometry,\r\n\tShapeBufferGeometry: ShapeBufferGeometry,\r\n\tExtrudeGeometry: ExtrudeGeometry,\r\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\r\n\tEdgesGeometry: EdgesGeometry,\r\n\tConeGeometry: ConeGeometry,\r\n\tConeBufferGeometry: ConeBufferGeometry,\r\n\tCylinderGeometry: CylinderGeometry,\r\n\tCylinderBufferGeometry: CylinderBufferGeometry,\r\n\tCircleGeometry: CircleGeometry,\r\n\tCircleBufferGeometry: CircleBufferGeometry,\r\n\tBoxGeometry: BoxGeometry,\r\n\tBoxBufferGeometry: BoxBufferGeometry\r\n});\r\n\r\n/**\r\n * parameters = {\r\n *  color: <THREE.Color>\r\n * }\r\n */\r\n\r\nfunction ShadowMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShadowMaterial';\r\n\r\n\tthis.color = new Color( 0x000000 );\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nShadowMaterial.prototype = Object.create( Material.prototype );\r\nShadowMaterial.prototype.constructor = ShadowMaterial;\r\n\r\nShadowMaterial.prototype.isShadowMaterial = true;\r\n\r\nShadowMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction RawShaderMaterial( parameters ) {\r\n\r\n\tShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n}\r\n\r\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\r\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\r\n\r\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshStandardMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 1.0;\r\n\tthis.metalness = 0.0;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.vertexTangents = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\r\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\r\n\r\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\r\n\r\nMeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.vertexTangents = source.vertexTangents;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  clearcoat: <float>,\r\n *  clearcoatMap: new THREE.Texture( <Image> ),\r\n *  clearcoatRoughness: <float>,\r\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\r\n *  clearcoatNormalScale: <Vector2>,\r\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\r\n *\r\n *  reflectivity: <float>,\r\n *\r\n *  sheen: <Color>,\r\n *\r\n *  transmission: <float>,\r\n *  transmissionMap: new THREE.Texture( <Image> )\r\n * }\r\n */\r\n\r\nfunction MeshPhysicalMaterial( parameters ) {\r\n\r\n\tMeshStandardMaterial.call( this );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.type = 'MeshPhysicalMaterial';\r\n\r\n\tthis.clearcoat = 0.0;\r\n\tthis.clearcoatMap = null;\r\n\tthis.clearcoatRoughness = 0.0;\r\n\tthis.clearcoatRoughnessMap = null;\r\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\r\n\tthis.clearcoatNormalMap = null;\r\n\r\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n\tthis.sheen = null; // null will disable sheen bsdf\r\n\r\n\tthis.transmission = 0.0;\r\n\tthis.transmissionMap = null;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\r\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\r\n\r\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\r\n\r\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.clearcoat = source.clearcoat;\r\n\tthis.clearcoatMap = source.clearcoatMap;\r\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\r\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\r\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\r\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\r\n\r\n\tthis.reflectivity = source.reflectivity;\r\n\r\n\tif ( source.sheen ) {\r\n\r\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\r\n\r\n\t} else {\r\n\r\n\t\tthis.sheen = null;\r\n\r\n\t}\r\n\r\n\tthis.transmission = source.transmission;\r\n\tthis.transmissionMap = source.transmissionMap;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.MultiplyOperation,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshPhongMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.specular = new Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\r\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\r\n\r\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\r\n\r\nMeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *  gradientMap: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshToonMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'TOON': '' };\r\n\r\n\tthis.type = 'MeshToonMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\tthis.gradientMap = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshToonMaterial.prototype = Object.create( Material.prototype );\r\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\r\n\r\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\r\n\r\nMeshToonMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\tthis.gradientMap = source.gradientMap;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshNormalMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\r\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\r\n\r\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\r\n\r\nMeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshLambertMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\r\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\r\n\r\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\r\n\r\nMeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  matcap: new THREE.Texture( <Image> ),\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshMatcapMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.type = 'MeshMatcapMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.matcap = null;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\r\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\r\n\r\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\r\n\r\nMeshMatcapMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.matcap = source.matcap;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */\r\n\r\nfunction LineDashedMaterial( parameters ) {\r\n\r\n\tLineBasicMaterial.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\r\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\r\n\r\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\r\n\r\nLineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tLineBasicMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Materials = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tShadowMaterial: ShadowMaterial,\r\n\tSpriteMaterial: SpriteMaterial,\r\n\tRawShaderMaterial: RawShaderMaterial,\r\n\tShaderMaterial: ShaderMaterial,\r\n\tPointsMaterial: PointsMaterial,\r\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\r\n\tMeshStandardMaterial: MeshStandardMaterial,\r\n\tMeshPhongMaterial: MeshPhongMaterial,\r\n\tMeshToonMaterial: MeshToonMaterial,\r\n\tMeshNormalMaterial: MeshNormalMaterial,\r\n\tMeshLambertMaterial: MeshLambertMaterial,\r\n\tMeshDepthMaterial: MeshDepthMaterial,\r\n\tMeshDistanceMaterial: MeshDistanceMaterial,\r\n\tMeshBasicMaterial: MeshBasicMaterial,\r\n\tMeshMatcapMaterial: MeshMatcapMaterial,\r\n\tLineDashedMaterial: LineDashedMaterial,\r\n\tLineBasicMaterial: LineBasicMaterial,\r\n\tMaterial: Material\r\n});\r\n\r\nconst AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function ( array, from, to ) {\r\n\r\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\r\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\r\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function ( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function ( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function ( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tconst n = times.length;\r\n\t\tconst result = new Array( n );\r\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function ( values, stride, order ) {\r\n\r\n\t\tconst nValues = values.length;\r\n\t\tconst result = new values.constructor( nValues );\r\n\r\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tconst srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tlet i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tlet value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\r\n\r\n\t\tfps = fps || 30;\r\n\r\n\t\tconst clip = sourceClip.clone();\r\n\r\n\t\tclip.name = name;\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tconst track = clip.tracks[ i ];\r\n\t\t\tconst valueSize = track.getValueSize();\r\n\r\n\t\t\tconst times = [];\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\r\n\r\n\t\t\t\tconst frame = track.times[ j ] * fps;\r\n\r\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\r\n\r\n\t\t\t\ttimes.push( track.times[ j ] );\r\n\r\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( times.length === 0 ) continue;\r\n\r\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\r\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\r\n\r\n\t\t\ttracks.push( track );\r\n\r\n\t\t}\r\n\r\n\t\tclip.tracks = tracks;\r\n\r\n\t\t// find minimum .times value across all tracks in the trimmed clip\r\n\r\n\t\tlet minStartTime = Infinity;\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\r\n\r\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// shift all tracks such that clip begins at t=0\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\r\n\r\n\t\t}\r\n\r\n\t\tclip.resetDuration();\r\n\r\n\t\treturn clip;\r\n\r\n\t},\r\n\r\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\r\n\r\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\r\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\r\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\r\n\r\n\t\tconst numTracks = targetClip.tracks.length;\r\n\t\tconst referenceTime = referenceFrame / fps;\r\n\r\n\t\t// Make each track's values relative to the values at the reference frame\r\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\r\n\r\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\r\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\r\n\r\n\t\t\t// Skip this track if it's non-numeric\r\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\r\n\r\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\r\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\r\n\r\n\t\t\t\treturn track.name === referenceTrack.name\r\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( targetTrack === undefined ) continue;\r\n\r\n\t\t\tconst valueSize = referenceTrack.getValueSize();\r\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\r\n\t\t\tlet referenceValue;\r\n\r\n\t\t\t// Find the value to subtract out of the track\r\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\r\n\r\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, 0, referenceTrack.valueSize );\r\n\r\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\r\n\r\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\r\n\t\t\t\tconst startIndex = lastIndex * valueSize;\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Interpolate to the reference value\r\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\r\n\t\t\t\tinterpolant.evaluate( referenceTime );\r\n\t\t\t\treferenceValue = interpolant.resultBuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Conjugate the quaternion\r\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\tconst referenceQuat = new Quaternion(\r\n\t\t\t\t\treferenceValue[ 0 ],\r\n\t\t\t\t\treferenceValue[ 1 ],\r\n\t\t\t\t\treferenceValue[ 2 ],\r\n\t\t\t\t\treferenceValue[ 3 ]\r\n\t\t\t\t).normalize().conjugate();\r\n\t\t\t\treferenceQuat.toArray( referenceValue );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Subtract the reference value from all of the track values\r\n\r\n\t\t\tconst numTimes = targetTrack.times.length;\r\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\r\n\r\n\t\t\t\tconst valueStart = j * valueSize;\r\n\r\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\r\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart,\r\n\t\t\t\t\t\treferenceValue,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Subtract each value for all other numeric track types\r\n\t\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\r\n\r\n\t\treturn targetClip;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n */\r\n\r\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n}\r\n\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\tevaluate: function ( t ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[ i1 ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tlet right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n\r\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\r\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[ i1 ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function () {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function ( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\r\n\r\n\t\tthrow new Error( 'call to abstract method' );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\t//( 0, t, t0 ), returns this.resultBuffer\r\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\r\n\r\n\t//( N-1, tN-1, t ), returns this.resultBuffer\r\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\r\n\r\n} );\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n */\r\n\r\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = - 0;\r\n\tthis._offsetPrev = - 0;\r\n\tthis._weightNext = - 0;\r\n\tthis._offsetNext = - 0;\r\n\r\n}\r\n\r\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( i1, t0, t1 ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\r\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\r\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\r\n\t\tconst sN = wN * ppp - wN * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: LinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n */\r\n\r\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: DiscreteInterpolant,\r\n\r\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction KeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\r\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n}\r\n\r\n// Static methods\r\n\r\nObject.assign( KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\ttoJSON: function ( track ) {\r\n\r\n\t\tconst trackType = track.constructor;\r\n\r\n\t\tlet json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( KeyframeTrack.prototype, {\r\n\r\n\tconstructor: KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\r\n\r\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function ( result ) {\r\n\r\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function ( interpolation ) {\r\n\r\n\t\tlet factoryMethod;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tconst message = \"unsupported interpolation for \" +\r\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function () {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function () {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function ( timeOffset ) {\r\n\r\n\t\tif ( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function ( timeScale ) {\r\n\r\n\t\tif ( timeScale !== 1.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function ( startTime, endTime ) {\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tlet from = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\r\n\r\n\t\t\t++ from;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\r\n\r\n\t\t\t-- to;\r\n\r\n\t\t}\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif ( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) {\r\n\r\n\t\t\t\tto = Math.max( to, 1 );\r\n\t\t\t\tfrom = to - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst stride = this.getValueSize();\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tconst valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif ( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tlet prevTime = null;\r\n\r\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tconst currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tconst value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function () {\r\n\r\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\r\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\r\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\r\n\r\n\t\t\tlastIndex = times.length - 1;\r\n\r\n\t\tlet writeIndex = 1;\r\n\r\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\r\n\r\n\t\t\tlet keep = false;\r\n\r\n\t\t\tconst time = times[ i ];\r\n\t\t\tconst timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\tif ( ! smoothInterpolation ) {\r\n\r\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\r\n\t\t\t\t\tconst offset = i * stride,\r\n\t\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst value = values[ offset + j ];\r\n\r\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tkeep = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tconst readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// flush last keyframe (compaction looks ahead)\r\n\r\n\t\tif ( lastIndex > 0 ) {\r\n\r\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\r\n\r\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t++ writeIndex;\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.times = times;\r\n\t\t\tthis.values = values;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\r\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\r\n\r\n\t\tconst TypedKeyframeTrack = this.constructor;\r\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\r\n\r\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\r\n\t\ttrack.createInterpolant = this.createInterpolant;\r\n\r\n\t\treturn track;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of Boolean keyframe values.\r\n */\r\n\r\nfunction BooleanKeyframeTrack( name, times, values ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values );\r\n\r\n}\r\n\r\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n/**\r\n * A Track of keyframe values that represent color.\r\n */\r\n\r\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: ColorKeyframeTrack,\r\n\r\n\tValueTypeName: 'color'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n\t// Note: Very basic implementation and nothing special yet.\r\n\t// However, this is the place for color space parameterization.\r\n\r\n} );\r\n\r\n/**\r\n * A Track of numeric keyframe values.\r\n */\r\n\r\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n */\r\n\r\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tlet offset = i1 * stride;\r\n\r\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of quaternion keyframe values.\r\n */\r\n\r\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n/**\r\n * A Track that interpolates Strings\r\n */\r\n\r\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n/**\r\n * A Track of vectored keyframe values.\r\n */\r\n\r\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\nfunction AnimationClip( name, duration, tracks, blendMode ) {\r\n\r\n\tthis.name = name;\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\r\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getTrackTypeForValueTypeName( typeName ) {\r\n\r\n\tswitch ( typeName.toLowerCase() ) {\r\n\r\n\t\tcase 'scalar':\r\n\t\tcase 'double':\r\n\t\tcase 'float':\r\n\t\tcase 'number':\r\n\t\tcase 'integer':\r\n\r\n\t\t\treturn NumberKeyframeTrack;\r\n\r\n\t\tcase 'vector':\r\n\t\tcase 'vector2':\r\n\t\tcase 'vector3':\r\n\t\tcase 'vector4':\r\n\r\n\t\t\treturn VectorKeyframeTrack;\r\n\r\n\t\tcase 'color':\r\n\r\n\t\t\treturn ColorKeyframeTrack;\r\n\r\n\t\tcase 'quaternion':\r\n\r\n\t\t\treturn QuaternionKeyframeTrack;\r\n\r\n\t\tcase 'bool':\r\n\t\tcase 'boolean':\r\n\r\n\t\t\treturn BooleanKeyframeTrack;\r\n\r\n\t\tcase 'string':\r\n\r\n\t\t\treturn StringKeyframeTrack;\r\n\r\n\t}\r\n\r\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\r\n\r\n}\r\n\r\nfunction parseKeyframeTrack( json ) {\r\n\r\n\tif ( json.type === undefined ) {\r\n\r\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\r\n\r\n\t}\r\n\r\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\r\n\r\n\tif ( json.times === undefined ) {\r\n\r\n\t\tconst times = [], values = [];\r\n\r\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\tjson.times = times;\r\n\t\tjson.values = values;\r\n\r\n\t}\r\n\r\n\t// derived classes can define a static parse method\r\n\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\treturn trackType.parse( json );\r\n\r\n\t} else {\r\n\r\n\t\t// by default, we assume a constructor compatible with the base\r\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( AnimationClip, {\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( clip ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tconst json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks,\r\n\t\t\t'uuid': clip.uuid,\r\n\t\t\t'blendMode': clip.blendMode\r\n\r\n\t\t};\r\n\r\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n\t\tconst numMorphTargets = morphTargetSequence.length;\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tlet times = [];\r\n\t\t\tlet values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\ti,\r\n\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\tnew NumberKeyframeTrack(\r\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\ttimes, values\r\n\t\t\t\t).scale( 1.0 / fps ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( name, - 1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function ( objectOrClipArray, name ) {\r\n\r\n\t\tlet clipArray = objectOrClipArray;\r\n\r\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n\t\t\tconst o = objectOrClipArray;\r\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\r\n\r\n\t\tconst animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = morphTargets[ i ];\r\n\t\t\tconst parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tconst name = parts[ 1 ];\r\n\r\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\r\n\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst clips = [];\r\n\r\n\t\tfor ( const name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function ( animation, bones ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tconst times = [];\r\n\t\t\t\tconst values = [];\r\n\r\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tconst clipName = animation.name || 'default';\r\n\t\tconst fps = animation.fps || 30;\r\n\t\tconst blendMode = animation.blendMode;\r\n\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tlet duration = animation.length || - 1;\r\n\r\n\t\tconst hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n\t\t\t// process morph targets\r\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tconst morphTargetNames = {};\r\n\r\n\t\t\t\tlet k;\r\n\r\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tconst times = [];\r\n\t\t\t\t\tconst values = [];\r\n\r\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( AnimationClip.prototype, {\r\n\r\n\tresetDuration: function () {\r\n\r\n\t\tconst tracks = this.tracks;\r\n\t\tlet duration = 0;\r\n\r\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttrim: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tvalid = valid && this.tracks[ i ].validate();\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\toptimize: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\ttracks.push( this.tracks[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction LoadingManager( onLoad, onProgress, onError ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet isLoading = false;\r\n\tlet itemsLoaded = 0;\r\n\tlet itemsTotal = 0;\r\n\tlet urlModifier = undefined;\r\n\tconst handlers = [];\r\n\r\n\t// Refer to #5689 for the reason why we don't set .onStart\r\n\t// in the constructor\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.resolveURL = function ( url ) {\r\n\r\n\t\tif ( urlModifier ) {\r\n\r\n\t\t\treturn urlModifier( url );\r\n\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\r\n\t};\r\n\r\n\tthis.setURLModifier = function ( transform ) {\r\n\r\n\t\turlModifier = transform;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.addHandler = function ( regex, loader ) {\r\n\r\n\t\thandlers.push( regex, loader );\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.removeHandler = function ( regex ) {\r\n\r\n\t\tconst index = handlers.indexOf( regex );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\thandlers.splice( index, 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.getHandler = function ( file ) {\r\n\r\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tconst regex = handlers[ i ];\r\n\t\t\tconst loader = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst DefaultLoadingManager = new LoadingManager();\r\n\r\nfunction Loader( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n\tthis.crossOrigin = 'anonymous';\r\n\tthis.path = '';\r\n\tthis.resourcePath = '';\r\n\tthis.requestHeader = {};\r\n\r\n}\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\r\n\r\n\tloadAsync: function ( url, onProgress ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tscope.load( url, resolve, onProgress, reject );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tparse: function ( /* data */ ) {},\r\n\r\n\tsetCrossOrigin: function ( crossOrigin ) {\r\n\r\n\t\tthis.crossOrigin = crossOrigin;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetResourcePath: function ( resourcePath ) {\r\n\r\n\t\tthis.resourcePath = resourcePath;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRequestHeader: function ( requestHeader ) {\r\n\r\n\t\tthis.requestHeader = requestHeader;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst loading = {};\r\n\r\nfunction FileLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FileLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\t// Check if request is duplicate\r\n\r\n\t\tif ( loading[ url ] !== undefined ) {\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check for data: URI\r\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\r\n\t\tlet request;\r\n\r\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\r\n\t\tif ( dataUriRegexResult ) {\r\n\r\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\r\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\r\n\r\n\t\t\tlet data = dataUriRegexResult[ 3 ];\r\n\t\t\tdata = decodeURIComponent( data );\r\n\r\n\t\t\tif ( isBase64 ) data = atob( data );\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tlet response;\r\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\r\n\r\n\t\t\t\tswitch ( responseType ) {\r\n\r\n\t\t\t\t\tcase 'arraybuffer':\r\n\t\t\t\t\tcase 'blob':\r\n\r\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\r\n\r\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tresponse = view.buffer;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'document':\r\n\r\n\t\t\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'json':\r\n\r\n\t\t\t\t\t\tresponse = JSON.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault: // 'text' or other\r\n\r\n\t\t\t\t\t\tresponse = data;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onError ) onError( error );\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Initialise array for duplicate requests\r\n\r\n\t\t\tloading[ url ] = [];\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\trequest = new XMLHttpRequest();\r\n\r\n\t\t\trequest.open( 'GET', url, true );\r\n\r\n\t\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\t\tconst response = this.response;\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\r\n\r\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\r\n\t\t\t\t\t// error response bodies as proper responses to requests.\r\n\t\t\t\t\tCache.add( url, response );\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\r\n\r\n\t\t\tfor ( const header in this.requestHeader ) {\r\n\r\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trequest.send( null );\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMimeType: function ( value ) {\r\n\r\n\t\tthis.mimeType = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AnimationLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction CompressedTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst images = [];\r\n\r\n\t\tconst texture = new CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction DataTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: DataTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst texture = new DataTexture();\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tconst texData = scope.parse( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( texData.image !== undefined ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( texData.data !== undefined ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\r\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( texData.format !== undefined ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.type !== undefined ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmaps !== undefined ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmapCount === 1 ) {\r\n\r\n\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImageLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\r\n\r\n\t\tfunction onImageLoad() {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tCache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onImageError( event ) {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'load', onImageLoad, false );\r\n\t\timage.addEventListener( 'error', onImageError, false );\r\n\r\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\r\n\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CubeTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new CubeTexture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction TextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new Texture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\r\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\r\n\r\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Extensible curve object.\r\n *\r\n * Some common of curve methods:\r\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\r\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following curves inherit from THREE.Curve:\r\n *\r\n * -- 2D curves --\r\n * THREE.ArcCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.EllipseCurve\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.SplineCurve\r\n *\r\n * -- 3D curves --\r\n * THREE.CatmullRomCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath.\r\n *\r\n **/\r\n\r\nfunction Curve() {\r\n\r\n\tthis.type = 'Curve';\r\n\r\n\tthis.arcLengthDivisions = 200;\r\n\r\n}\r\n\r\nObject.assign( Curve.prototype, {\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( /* t, optionalTarget */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\r\n\r\n\t\tif ( this.cacheArcLengths &&\r\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\r\n\t\t\t! this.needsUpdate ) {\r\n\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tconst cache = [];\r\n\t\tlet current, last = this.getPoint( 0 );\r\n\t\tlet sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tconst arcLengths = this.getLengths();\r\n\r\n\t\tlet i = 0, il = arcLengths.length;\r\n\r\n\t\tlet targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tlet low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\treturn i / ( il - 1 );\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tconst lengthBefore = arcLengths[ i ];\r\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tconst segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function ( t, optionalTarget ) {\r\n\r\n\t\tconst delta = 0.0001;\r\n\t\tlet t1 = t - delta;\r\n\t\tlet t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tconst pt1 = this.getPoint( t1 );\r\n\t\tconst pt2 = this.getPoint( t2 );\r\n\r\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\r\n\r\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\r\n\r\n\t\treturn tangent;\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcomputeFrenetFrames: function ( segments, closed ) {\r\n\r\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\r\n\t\tconst normal = new Vector3();\r\n\r\n\t\tconst tangents = [];\r\n\t\tconst normals = [];\r\n\t\tconst binormals = [];\r\n\r\n\t\tconst vec = new Vector3();\r\n\t\tconst mat = new Matrix4();\r\n\r\n\t\t// compute the tangent vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\t\tconst u = i / segments;\r\n\r\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\r\n\t\t\ttangents[ i ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the minimum tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new Vector3();\r\n\t\tbinormals[ 0 ] = new Vector3();\r\n\t\tlet min = Number.MAX_VALUE;\r\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\r\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\r\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= min ) {\r\n\r\n\t\t\tmin = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= min ) {\r\n\r\n\t\t\tmin = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= min ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\r\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\t\tvec.normalize();\r\n\r\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\t\tif ( closed === true ) {\r\n\r\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\r\n\t\t\ttheta /= segments;\r\n\r\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\r\n\r\n\t\t\t\ttheta = - theta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\t\t// twist a little...\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttangents: tangents,\r\n\t\t\tnormals: normals,\r\n\t\t\tbinormals: binormals\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Curve',\r\n\t\t\t\tgenerator: 'Curve.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\r\n\t\tdata.type = this.type;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'EllipseCurve';\r\n\r\n\tthis.aX = aX || 0;\r\n\tthis.aY = aY || 0;\r\n\r\n\tthis.xRadius = xRadius || 1;\r\n\tthis.yRadius = yRadius || 1;\r\n\r\n\tthis.aStartAngle = aStartAngle || 0;\r\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\r\n\r\n\tthis.aClockwise = aClockwise || false;\r\n\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n}\r\n\r\nEllipseCurve.prototype = Object.create( Curve.prototype );\r\nEllipseCurve.prototype.constructor = EllipseCurve;\r\n\r\nEllipseCurve.prototype.isEllipseCurve = true;\r\n\r\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst twoPi = Math.PI * 2;\r\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\r\n\r\n\t// ensures that deltaAngle is 0 .. 2 PI\r\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\r\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\r\n\r\n\tif ( deltaAngle < Number.EPSILON ) {\r\n\r\n\t\tif ( samePoints ) {\r\n\r\n\t\t\tdeltaAngle = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( this.aClockwise === true && ! samePoints ) {\r\n\r\n\t\tif ( deltaAngle === twoPi ) {\r\n\r\n\t\t\tdeltaAngle = - twoPi;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = deltaAngle - twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst angle = this.aStartAngle + t * deltaAngle;\r\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\r\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tconst cos = Math.cos( this.aRotation );\r\n\t\tconst sin = Math.sin( this.aRotation );\r\n\r\n\t\tconst tx = x - this.aX;\r\n\t\tconst ty = y - this.aY;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = tx * cos - ty * sin + this.aX;\r\n\t\ty = tx * sin + ty * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn point.set( x, y );\r\n\r\n};\r\n\r\nEllipseCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.aX = source.aX;\r\n\tthis.aY = source.aY;\r\n\r\n\tthis.xRadius = source.xRadius;\r\n\tthis.yRadius = source.yRadius;\r\n\r\n\tthis.aStartAngle = source.aStartAngle;\r\n\tthis.aEndAngle = source.aEndAngle;\r\n\r\n\tthis.aClockwise = source.aClockwise;\r\n\r\n\tthis.aRotation = source.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n\r\nEllipseCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.aX = this.aX;\r\n\tdata.aY = this.aY;\r\n\r\n\tdata.xRadius = this.xRadius;\r\n\tdata.yRadius = this.yRadius;\r\n\r\n\tdata.aStartAngle = this.aStartAngle;\r\n\tdata.aEndAngle = this.aEndAngle;\r\n\r\n\tdata.aClockwise = this.aClockwise;\r\n\r\n\tdata.aRotation = this.aRotation;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nEllipseCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.aX = json.aX;\r\n\tthis.aY = json.aY;\r\n\r\n\tthis.xRadius = json.xRadius;\r\n\tthis.yRadius = json.yRadius;\r\n\r\n\tthis.aStartAngle = json.aStartAngle;\r\n\tthis.aEndAngle = json.aEndAngle;\r\n\r\n\tthis.aClockwise = json.aClockwise;\r\n\r\n\tthis.aRotation = json.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\tthis.type = 'ArcCurve';\r\n\r\n}\r\n\r\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\r\nArcCurve.prototype.constructor = ArcCurve;\r\n\r\nArcCurve.prototype.isArcCurve = true;\r\n\r\n/**\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\n\r\n/*\r\nBased on an optimized c++ solution in\r\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n - http://ideone.com/NoEbVM\r\n\r\nThis CubicPoly class could be used for reusing some variables and calculations,\r\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\nwhich can be placed in CurveUtils.\r\n*/\r\n\r\nfunction CubicPoly() {\r\n\r\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tfunction init( x0, x1, t0, t1 ) {\r\n\r\n\t\tc0 = x0;\r\n\t\tc1 = t0;\r\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\r\n\r\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t\t},\r\n\r\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t\t// rescale tangents for parametrization in [0,1]\r\n\t\t\tt1 *= dt1;\r\n\t\t\tt2 *= dt1;\r\n\r\n\t\t\tinit( x1, x2, t1, t2 );\r\n\r\n\t\t},\r\n\r\n\t\tcalc: function ( t ) {\r\n\r\n\t\t\tconst t2 = t * t;\r\n\t\t\tconst t3 = t2 * t;\r\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nconst tmp = new Vector3();\r\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\r\n\r\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CatmullRomCurve3';\r\n\r\n\tthis.points = points || [];\r\n\tthis.closed = closed || false;\r\n\tthis.curveType = curveType || 'centripetal';\r\n\tthis.tension = ( tension !== undefined ) ? tension : 0.5;\r\n\r\n}\r\n\r\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\r\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\r\n\r\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\r\n\r\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst points = this.points;\r\n\tconst l = points.length;\r\n\r\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\tlet intPoint = Math.floor( p );\r\n\tlet weight = p - intPoint;\r\n\r\n\tif ( this.closed ) {\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\r\n\r\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\tintPoint = l - 2;\r\n\t\tweight = 1;\r\n\r\n\t}\r\n\r\n\tlet p0, p1, p2, p3; // 4 points\r\n\r\n\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate first point\r\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\tp0 = tmp;\r\n\r\n\t}\r\n\r\n\tp1 = points[ intPoint % l ];\r\n\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate last point\r\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\tp3 = tmp;\r\n\r\n\t}\r\n\r\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\r\n\r\n\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\r\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t// safety check for repeated points\r\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t} else if ( this.curveType === 'catmullrom' ) {\r\n\r\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\r\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\r\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\r\n\r\n\t}\r\n\r\n\tpoint.set(\r\n\t\tpx.calc( weight ),\r\n\t\tpy.calc( weight ),\r\n\t\tpz.calc( weight )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\tthis.closed = source.closed;\r\n\tthis.curveType = source.curveType;\r\n\tthis.tension = source.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\tdata.closed = this.closed;\r\n\tdata.curveType = this.curveType;\r\n\tdata.tension = this.tension;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector3().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\tthis.closed = json.closed;\r\n\tthis.curveType = json.curveType;\r\n\tthis.tension = json.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Bezier Curves formulas obtained from\r\n * http://en.wikipedia.org/wiki/Bzier_curve\r\n */\r\n\r\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\r\n\r\n\tconst v0 = ( p2 - p0 ) * 0.5;\r\n\tconst v1 = ( p3 - p1 ) * 0.5;\r\n\tconst t2 = t * t;\r\n\tconst t3 = t * t2;\r\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction QuadraticBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP1( t, p ) {\r\n\r\n\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP2( t, p ) {\r\n\r\n\treturn t * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezier( t, p0, p1, p2 ) {\r\n\r\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\r\n\t\tQuadraticBezierP2( t, p2 );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction CubicBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * k * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP1( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn 3 * k * k * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP2( t, p ) {\r\n\r\n\treturn 3 * ( 1 - t ) * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP3( t, p ) {\r\n\r\n\treturn t * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\r\n\r\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\r\n\t\tCubicBezierP3( t, p3 );\r\n\r\n}\r\n\r\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\tthis.v3 = v3 || new Vector2();\r\n\r\n}\r\n\r\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\r\n\r\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\r\n\r\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\tthis.v3 = v3 || new Vector3();\r\n\r\n}\r\n\r\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\r\n\r\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\r\n\r\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\r\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve';\r\n\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nLineCurve.prototype = Object.create( Curve.prototype );\r\nLineCurve.prototype.constructor = LineCurve;\r\n\r\nLineCurve.prototype.isLineCurve = true;\r\n\r\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\r\n\r\n\tconst tangent = optionalTarget || new Vector2();\r\n\r\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\nLineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve3( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve3';\r\n\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nLineCurve3.prototype = Object.create( Curve.prototype );\r\nLineCurve3.prototype.constructor = LineCurve3;\r\n\r\nLineCurve3.prototype.isLineCurve3 = true;\r\n\r\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\r\n\r\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\r\n\r\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\r\n\r\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\r\n\r\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\r\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction SplineCurve( points ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'SplineCurve';\r\n\r\n\tthis.points = points || [];\r\n\r\n}\r\n\r\nSplineCurve.prototype = Object.create( Curve.prototype );\r\nSplineCurve.prototype.constructor = SplineCurve;\r\n\r\nSplineCurve.prototype.isSplineCurve = true;\r\n\r\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst points = this.points;\r\n\tconst p = ( points.length - 1 ) * t;\r\n\r\n\tconst intPoint = Math.floor( p );\r\n\tconst weight = p - intPoint;\r\n\r\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tconst p1 = points[ intPoint ];\r\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tpoint.set(\r\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\r\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nSplineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nSplineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nSplineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector2().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Curves = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tArcCurve: ArcCurve,\r\n\tCatmullRomCurve3: CatmullRomCurve3,\r\n\tCubicBezierCurve: CubicBezierCurve,\r\n\tCubicBezierCurve3: CubicBezierCurve3,\r\n\tEllipseCurve: EllipseCurve,\r\n\tLineCurve: LineCurve,\r\n\tLineCurve3: LineCurve3,\r\n\tQuadraticBezierCurve: QuadraticBezierCurve,\r\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\r\n\tSplineCurve: SplineCurve\r\n});\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nfunction CurvePath() {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CurvePath';\r\n\r\n\tthis.curves = [];\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n}\r\n\r\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\r\n\r\n\tconstructor: CurvePath,\r\n\r\n\tadd: function ( curve ) {\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t},\r\n\r\n\tclosePath: function () {\r\n\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconst d = t * this.getLength();\r\n\t\tconst curveLengths = this.getCurveLengths();\r\n\t\tlet i = 0;\r\n\r\n\t\t// To think about boundaries points.\r\n\r\n\t\twhile ( i < curveLengths.length ) {\r\n\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\t\tconst diff = curveLengths[ i ] - d;\r\n\t\t\t\tconst curve = this.curves[ i ];\r\n\r\n\t\t\t\tconst segmentLength = curve.getLength();\r\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\r\n\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ti ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n\t},\r\n\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// cacheLengths must be recalculated.\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.cacheLengths = null;\r\n\t\tthis.getCurveLengths();\r\n\r\n\t},\r\n\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n\tgetCurveLengths: function () {\r\n\r\n\t\t// We use cache values if curves and cache array are same length\r\n\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\t\treturn this.cacheLengths;\r\n\r\n\t\t}\r\n\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\r\n\t\tconst lengths = [];\r\n\t\tlet sums = 0;\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheLengths = lengths;\r\n\r\n\t\treturn lengths;\r\n\r\n\t},\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 40;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tdivisions = divisions || 12;\r\n\r\n\t\tconst points = [];\r\n\t\tlet last;\r\n\r\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\r\n\r\n\t\t\tconst curve = curves[ i ];\r\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\r\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\r\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\r\n\t\t\t\t\t\t: divisions;\r\n\r\n\t\t\tconst pts = curve.getPoints( resolution );\r\n\r\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\r\n\r\n\t\t\t\tconst point = pts[ j ];\r\n\r\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\r\n\r\n\t\t\t\tpoints.push( point );\r\n\t\t\t\tlast = point;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurve.prototype.copy.call( this, source );\r\n\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = source.curves[ i ];\r\n\r\n\t\t\tthis.curves.push( curve.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoClose = source.autoClose;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\t\tdata.autoClose = this.autoClose;\r\n\t\tdata.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = this.curves[ i ];\r\n\t\t\tdata.curves.push( curve.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.autoClose = json.autoClose;\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = json.curves[ i ];\r\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Path( points ) {\r\n\r\n\tCurvePath.call( this );\r\n\r\n\tthis.type = 'Path';\r\n\r\n\tthis.currentPoint = new Vector2();\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.setFromPoints( points );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n\tconstructor: Path,\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\r\n\r\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tconst curve = new QuadraticBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCPx, aCPy ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tconst curve = new CubicBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCP1x, aCP1y ),\r\n\t\t\tnew Vector2( aCP2x, aCP2y ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\r\n\r\n\t\tconst curve = new SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\tif ( this.curves.length > 0 ) {\r\n\r\n\t\t\t// if a previous curve is present, attempt to join\r\n\t\t\tconst firstPoint = curve.getPoint( 0 );\r\n\r\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\r\n\r\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tconst lastPoint = curve.getPoint( 1 );\r\n\t\tthis.currentPoint.copy( lastPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurvePath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.currentPoint.copy( source.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\r\n\r\n\t\tdata.currentPoint = this.currentPoint.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurvePath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.currentPoint.fromArray( json.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Shape( points ) {\r\n\r\n\tPath.call( this, points );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.type = 'Shape';\r\n\r\n\tthis.holes = [];\r\n\r\n}\r\n\r\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\r\n\r\n\tconstructor: Shape,\r\n\r\n\tgetPointsHoles: function ( divisions ) {\r\n\r\n\t\tconst holesPts = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t\t}\r\n\r\n\t\treturn holesPts;\r\n\r\n\t},\r\n\r\n\t// get points of shape and holes (keypoints based on segments parameter)\r\n\r\n\textractPoints: function ( divisions ) {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tshape: this.getPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tPath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = source.holes[ i ];\r\n\r\n\t\t\tthis.holes.push( hole.clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Path.prototype.toJSON.call( this );\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = this.holes[ i ];\r\n\t\t\tdata.holes.push( hole.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tPath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.uuid = json.uuid;\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = json.holes[ i ];\r\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Light( color, intensity ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n}\r\n\r\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Light,\r\n\r\n\tisLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.intensity = source.intensity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\r\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\r\n\r\n\tLight.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new Color( groundColor );\r\n\r\n}\r\n\r\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: HemisphereLight,\r\n\r\n\tisHemisphereLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightShadow( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.normalBias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.mapPass = null;\r\n\tthis.matrix = new Matrix4();\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis._frustum = new Frustum();\r\n\tthis._frameExtents = new Vector2( 1, 1 );\r\n\r\n\tthis._viewportCount = 1;\r\n\r\n\tthis._viewports = [\r\n\r\n\t\tnew Vector4( 0, 0, 1, 1 )\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( LightShadow.prototype, {\r\n\r\n\t_projScreenMatrix: new Matrix4(),\r\n\r\n\t_lightPositionWorld: new Vector3(),\r\n\r\n\t_lookTarget: new Vector3(),\r\n\r\n\tgetViewportCount: function () {\r\n\r\n\t\treturn this._viewportCount;\r\n\r\n\t},\r\n\r\n\tgetFrustum: function () {\r\n\r\n\t\treturn this._frustum;\r\n\r\n\t},\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst shadowCamera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tshadowCamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\tshadowCamera.lookAt( lookTarget );\r\n\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t\tshadowMatrix.set(\r\n\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t);\r\n\r\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t},\r\n\r\n\tgetViewport: function ( viewportIndex ) {\r\n\r\n\t\treturn this._viewports[ viewportIndex ];\r\n\r\n\t},\r\n\r\n\tgetFrameExtents: function () {\r\n\r\n\t\treturn this._frameExtents;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\r\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\r\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\r\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\r\n\r\n\t\tobject.camera = this.camera.toJSON( false ).object;\r\n\t\tdelete object.camera.matrix;\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n}\r\n\r\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: SpotLightShadow,\r\n\r\n\tisSpotLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle;\r\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\r\n\t\tconst far = light.distance || camera.far;\r\n\r\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n\t\t\tcamera.fov = fov;\r\n\t\t\tcamera.aspect = aspect;\r\n\t\t\tcamera.far = far;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / Math.PI;\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new SpotLightShadow();\r\n\r\n}\r\n\r\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: SpotLight,\r\n\r\n\tisSpotLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.penumbra = source.penumbra;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n\tthis._frameExtents = new Vector2( 4, 2 );\r\n\r\n\tthis._viewportCount = 6;\r\n\r\n\tthis._viewports = [\r\n\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t// following orientation:\r\n\t\t//\r\n\t\t//  xzXZ\r\n\t\t//   y Y\r\n\t\t//\r\n\t\t// X - Positive x direction\r\n\t\t// x - Negative x direction\r\n\t\t// Y - Positive y direction\r\n\t\t// y - Negative y direction\r\n\t\t// Z - Positive z direction\r\n\t\t// z - Negative z direction\r\n\r\n\t\t// positive X\r\n\t\tnew Vector4( 2, 1, 1, 1 ),\r\n\t\t// negative X\r\n\t\tnew Vector4( 0, 1, 1, 1 ),\r\n\t\t// positive Z\r\n\t\tnew Vector4( 3, 1, 1, 1 ),\r\n\t\t// negative Z\r\n\t\tnew Vector4( 1, 1, 1, 1 ),\r\n\t\t// positive Y\r\n\t\tnew Vector4( 3, 0, 1, 1 ),\r\n\t\t// negative Y\r\n\t\tnew Vector4( 1, 0, 1, 1 )\r\n\t];\r\n\r\n\tthis._cubeDirections = [\r\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\r\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tthis._cubeUps = [\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n}\r\n\r\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: PointLightShadow,\r\n\r\n\tisPointLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light, viewportIndex ) {\r\n\r\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\r\n\r\n\t\tconst camera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tcamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.copy( camera.position );\r\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\r\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\r\n\t\tcamera.lookAt( lookTarget );\r\n\t\tcamera.updateMatrixWorld();\r\n\r\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLight( color, intensity, distance, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new PointLightShadow();\r\n\r\n}\r\n\r\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: PointLight,\r\n\r\n\tisPointLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\tthis.view = null;\r\n\r\n\tthis.left = ( left !== undefined ) ? left : - 1;\r\n\tthis.right = ( right !== undefined ) ? right : 1;\r\n\tthis.top = ( top !== undefined ) ? top : 1;\r\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: OrthographicCamera,\r\n\r\n\tisOrthographicCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\r\n\t\tthis.zoom = source.zoom;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tconst cx = ( this.right + this.left ) / 2;\r\n\t\tconst cy = ( this.top + this.bottom ) / 2;\r\n\r\n\t\tlet left = cx - dx;\r\n\t\tlet right = cx + dx;\r\n\t\tlet top = cy + dy;\r\n\t\tlet bottom = cy - dy;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\r\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\r\n\r\n\t\t\tleft += scaleW * this.view.offsetX;\r\n\t\t\tright = left + scaleW * this.view.width;\r\n\t\t\ttop -= scaleH * this.view.offsetY;\r\n\t\t\tbottom = top - scaleH * this.view.height;\r\n\r\n\t\t}\r\n\r\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLightShadow() {\r\n\r\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n}\r\n\r\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: DirectionalLightShadow,\r\n\r\n\tisDirectionalLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tthis.shadow = new DirectionalLightShadow();\r\n\r\n}\r\n\r\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: DirectionalLight,\r\n\r\n\tisDirectionalLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n}\r\n\r\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: AmbientLight,\r\n\r\n\tisAmbientLight: true\r\n\r\n} );\r\n\r\nfunction RectAreaLight( color, intensity, width, height ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'RectAreaLight';\r\n\r\n\tthis.width = ( width !== undefined ) ? width : 10;\r\n\tthis.height = ( height !== undefined ) ? height : 10;\r\n\r\n}\r\n\r\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: RectAreaLight,\r\n\r\n\tisRectAreaLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.width = this.width;\r\n\t\tdata.object.height = this.height;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Primary reference:\r\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n *\r\n * Secondary reference:\r\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\r\n */\r\n\r\n// 3-band SH defined by 9 coefficients\r\n\r\nfunction SphericalHarmonics3() {\r\n\r\n\tthis.coefficients = [];\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\tthis.coefficients.push( new Vector3() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( SphericalHarmonics3.prototype, {\r\n\r\n\tisSphericalHarmonics3: true,\r\n\r\n\tset: function ( coefficients ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tzero: function () {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// get the radiance in the direction of the normal\r\n\t// target is a Vector3\r\n\tgetAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\r\n\t// target is a Vector3\r\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n\tgetIrradianceAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tadd: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledSH: function ( sh, s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( sh, alpha ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcopy: function ( sh ) {\r\n\r\n\t\treturn this.set( sh.coefficients );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( SphericalHarmonics3, {\r\n\r\n\t// evaluate the basis functions\r\n\t// shBasis is an Array[ 9 ]\r\n\tgetBasisAt: function ( normal, shBasis ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\t// band 0\r\n\t\tshBasis[ 0 ] = 0.282095;\r\n\r\n\t\t// band 1\r\n\t\tshBasis[ 1 ] = 0.488603 * y;\r\n\t\tshBasis[ 2 ] = 0.488603 * z;\r\n\t\tshBasis[ 3 ] = 0.488603 * x;\r\n\r\n\t\t// band 2\r\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\r\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\r\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\r\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\r\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightProbe( sh, intensity ) {\r\n\r\n\tLight.call( this, undefined, intensity );\r\n\r\n\tthis.type = 'LightProbe';\r\n\r\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\r\n\r\n}\r\n\r\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: LightProbe,\r\n\r\n\tisLightProbe: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.sh.copy( source.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\r\n\t\tthis.sh.fromArray( json.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.sh = this.sh.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction MaterialLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.textures = {};\r\n\r\n}\r\n\r\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst textures = this.textures;\r\n\r\n\t\tfunction getTexture( name ) {\r\n\r\n\t\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn textures[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tconst material = new Materials[ json.type ]();\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\r\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\r\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\r\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\r\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\r\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\r\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\r\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\r\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\r\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\r\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\r\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\r\n\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\r\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\r\n\r\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\r\n\r\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\r\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\r\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\r\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\r\n\r\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\r\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\r\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\r\n\r\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\r\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\r\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\r\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\r\n\r\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\r\n\r\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\r\n\r\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\r\n\r\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\r\n\r\n\t\tif ( json.vertexColors !== undefined ) {\r\n\r\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\r\n\r\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Shader Material\r\n\r\n\t\tif ( json.uniforms !== undefined ) {\r\n\r\n\t\t\tfor ( const name in json.uniforms ) {\r\n\r\n\t\t\t\tconst uniform = json.uniforms[ name ];\r\n\r\n\t\t\t\tmaterial.uniforms[ name ] = {};\r\n\r\n\t\t\t\tswitch ( uniform.type ) {\r\n\r\n\t\t\t\t\tcase 't':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v2':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'm3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\r\n\r\n\t\t\t\t\tcase 'm4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\r\n\t\tif ( json.extensions !== undefined ) {\r\n\r\n\t\t\tfor ( const key in json.extensions ) {\r\n\r\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Deprecated\r\n\r\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\r\n\r\n\t\t// for PointsMaterial\r\n\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\r\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\r\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tlet normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\r\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\r\n\r\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\r\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\r\n\r\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\r\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\r\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\r\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\r\n\r\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\r\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\r\n\r\n\t\treturn material;\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst LoaderUtils = {\r\n\r\n\tdecodeText: function ( array ) {\r\n\r\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n\t\t\treturn new TextDecoder().decode( array );\r\n\r\n\t\t}\r\n\r\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n\t\tlet s = '';\r\n\r\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t// Implicitly assumes little-endian.\r\n\t\t\ts += String.fromCharCode( array[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// merges multi-byte utf-8 characters.\r\n\r\n\t\t\treturn decodeURIComponent( escape( s ) );\r\n\r\n\t\t} catch ( e ) { // see #16358\r\n\r\n\t\t\treturn s;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconst index = url.lastIndexOf( '/' );\r\n\r\n\t\tif ( index === - 1 ) return './';\r\n\r\n\t\treturn url.substr( 0, index + 1 );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction InstancedBufferGeometry() {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.instanceCount = Infinity;\r\n\r\n}\r\n\r\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\r\n\r\n\tconstructor: InstancedBufferGeometry,\r\n\r\n\tisInstancedBufferGeometry: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferGeometry.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceCount = source.instanceCount;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\t\tdata.instanceCount = this.instanceCount;\r\n\r\n\t\tdata.isInstancedBufferGeometry = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\r\n\r\n\tif ( typeof ( normalized ) === 'number' ) {\r\n\r\n\t\tmeshPerAttribute = normalized;\r\n\r\n\t\tnormalized = false;\r\n\r\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\r\n\r\n\t}\r\n\r\n\tBufferAttribute.call( this, array, itemSize, normalized );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\r\n\r\n\tconstructor: InstancedBufferAttribute,\r\n\r\n\tisInstancedBufferAttribute: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferAttribute.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ()\t{\r\n\r\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\r\n\r\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\tdata.isInstancedBufferAttribute = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction BufferGeometryLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst interleavedBufferMap = {};\r\n\t\tconst arrayBufferMap = {};\r\n\r\n\t\tfunction getInterleavedBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\r\n\r\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\r\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\r\n\r\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\r\n\r\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\r\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\r\n\t\t\tib.uuid = interleavedBuffer.uuid;\r\n\r\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\r\n\r\n\t\t\treturn ib;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getArrayBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\r\n\r\n\t\t\tconst arrayBuffers = json.arrayBuffers;\r\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\r\n\r\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\r\n\r\n\t\t\tarrayBufferMap[ uuid ] = ab;\r\n\r\n\t\t\treturn ab;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\r\n\r\n\t\tconst index = json.data.index;\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = json.data.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\t\t\tlet bufferAttribute;\r\n\r\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\r\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = json.data.morphAttributes;\r\n\r\n\t\tif ( morphAttributes ) {\r\n\r\n\t\t\tfor ( const key in morphAttributes ) {\r\n\r\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst attribute = attributeArray[ i ];\r\n\t\t\t\t\tlet bufferAttribute;\r\n\r\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\t\t\tarray.push( bufferAttribute );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\r\n\r\n\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\tgeometry.morphTargetsRelative = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tconst center = new Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.name ) geometry.name = json.name;\r\n\t\tif ( json.userData ) geometry.userData = json.userData;\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TYPED_ARRAYS = {\r\n\tInt8Array: Int8Array,\r\n\tUint8Array: Uint8Array,\r\n\t// Workaround for IE11 pre KB2929437. See #11440\r\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\r\n\tInt16Array: Int16Array,\r\n\tUint16Array: Uint16Array,\r\n\tInt32Array: Int32Array,\r\n\tUint32Array: Uint32Array,\r\n\tFloat32Array: Float32Array,\r\n\tFloat64Array: Float64Array\r\n};\r\n\r\nfunction ObjectLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\r\n\t\tthis.resourcePath = this.resourcePath || path;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json = null;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\tif ( onError !== undefined ) onError( error );\r\n\r\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.parse( json, onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tconst shapes = this.parseShape( json.shapes );\r\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\r\n\r\n\t\tconst images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tconst textures = this.parseTextures( json.textures, images );\r\n\t\tconst materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tconst object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseShape: function ( json ) {\r\n\r\n\t\tconst shapes = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\r\n\r\n\t\t\t\tshapes[ shape.uuid ] = shape;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json, shapes ) {\r\n\r\n\t\tconst geometries = {};\r\n\t\tlet geometryShapes;\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlet geometry;\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ConeGeometry':\r\n\t\t\t\t\tcase 'ConeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TubeGeometry':\r\n\t\t\t\t\tcase 'TubeBufferGeometry':\r\n\r\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\r\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.closed\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\t\t\t\t\tcase 'LatheBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'PolyhedronGeometry':\r\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.vertices,\r\n\t\t\t\t\t\t\tdata.indices,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.details\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ShapeGeometry':\r\n\t\t\t\t\tcase 'ShapeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.curveSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\t\tcase 'ExtrudeGeometry':\r\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst extrudePath = data.options.extrudePath;\r\n\r\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.options\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\t\t\t\t\tcase 'InstancedBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tconst cache = {}; // MultiMaterial\r\n\t\tconst materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst loader = new MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\r\n\r\n\t\t\t\t\t// Deprecated\r\n\r\n\t\t\t\t\tconst array = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst material = data.materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = array;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst data = json[ i ];\r\n\r\n\t\t\tconst clip = AnimationClip.parse( data );\r\n\r\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tconst scope = this;\r\n\t\tconst images = {};\r\n\r\n\t\tlet loader;\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, undefined, function () {\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tconst manager = new LoadingManager( onLoad );\r\n\r\n\t\t\tloader = new ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst image = json[ i ];\r\n\t\t\t\tconst url = image.url;\r\n\r\n\t\t\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\t\t\t// load array of images e.g CubeTexture\r\n\r\n\t\t\t\t\timages[ image.uuid ] = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst currentUrl = url[ j ];\r\n\r\n\t\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\r\n\r\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// load single image\r\n\r\n\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\r\n\r\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value, type ) {\r\n\r\n\t\t\tif ( typeof value === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn type[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tconst textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet texture;\r\n\r\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\r\n\r\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\r\n\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\r\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\r\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\r\n\r\n\t\t\t\tif ( data.wrap !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\r\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\r\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\r\n\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\r\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\r\n\r\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\r\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function ( data, geometries, materials ) {\r\n\r\n\t\tlet object;\r\n\r\n\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometries[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\tif ( Array.isArray( name ) ) {\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tconst uuid = name[ i ];\r\n\r\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tarray.push( materials[ uuid ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn materials[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tlet geometry, material;\r\n\r\n\t\tswitch ( data.type ) {\r\n\r\n\t\t\tcase 'Scene':\r\n\r\n\t\t\t\tobject = new Scene();\r\n\r\n\t\t\t\tif ( data.background !== undefined ) {\r\n\r\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\r\n\r\n\t\t\t\t\t\tobject.background = new Color( data.background );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.fog !== undefined ) {\r\n\r\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\r\n\r\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'RectAreaLight':\r\n\r\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LightProbe':\r\n\r\n\t\t\t\tobject = new LightProbe().fromJSON( data );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SkinnedMesh':\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\r\n\r\n\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\r\n\t\t\t\tobject = new Mesh( geometry, material );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'InstancedMesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\t\t\t\tconst count = data.count;\r\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\r\n\r\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\r\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LOD':\r\n\r\n\t\t\t\tobject = new LOD();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Line':\r\n\r\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineLoop':\r\n\r\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineSegments':\r\n\r\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointCloud':\r\n\t\t\tcase 'Points':\r\n\r\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Group':\r\n\r\n\t\t\t\tobject = new Group();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tobject = new Object3D();\r\n\r\n\t\t}\r\n\r\n\t\tobject.uuid = data.uuid;\r\n\r\n\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\r\n\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\tobject.matrix.fromArray( data.matrix );\r\n\r\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\r\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\r\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\tif ( data.shadow ) {\r\n\r\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\r\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\r\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\r\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\r\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\r\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\r\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\r\n\r\n\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\tconst children = data.children;\r\n\r\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\r\n\r\n\t\t\tconst levels = data.levels;\r\n\r\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\tconst level = levels[ l ];\r\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TEXTURE_MAPPING = {\r\n\tUVMapping: UVMapping,\r\n\tCubeReflectionMapping: CubeReflectionMapping,\r\n\tCubeRefractionMapping: CubeRefractionMapping,\r\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\r\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\r\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\r\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\r\n};\r\n\r\nconst TEXTURE_WRAPPING = {\r\n\tRepeatWrapping: RepeatWrapping,\r\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\r\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\r\n};\r\n\r\nconst TEXTURE_FILTER = {\r\n\tNearestFilter: NearestFilter,\r\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\r\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\r\n\tLinearFilter: LinearFilter,\r\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\r\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\r\n};\r\n\r\nfunction ImageBitmapLoader( manager ) {\r\n\r\n\tif ( typeof createImageBitmap === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\r\n\r\n\t}\r\n\r\n\tif ( typeof fetch === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\r\n\r\n\t}\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.options = { premultiplyAlpha: 'none' };\r\n\r\n}\r\n\r\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageBitmapLoader,\r\n\r\n\tisImageBitmapLoader: true,\r\n\r\n\tsetOptions: function setOptions( options ) {\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tfetch( url ).then( function ( res ) {\r\n\r\n\t\t\treturn res.blob();\r\n\r\n\t\t} ).then( function ( blob ) {\r\n\r\n\t\t\treturn createImageBitmap( blob, scope.options );\r\n\r\n\t\t} ).then( function ( imageBitmap ) {\r\n\r\n\t\t\tCache.add( url, imageBitmap );\r\n\r\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} ).catch( function ( e ) {\r\n\r\n\t\t\tif ( onError ) onError( e );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ShapePath() {\r\n\r\n\tthis.type = 'ShapePath';\r\n\r\n\tthis.color = new Color();\r\n\r\n\tthis.subPaths = [];\r\n\tthis.currentPath = null;\r\n\r\n}\r\n\r\nObject.assign( ShapePath.prototype, {\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath = new Path();\r\n\t\tthis.subPaths.push( this.currentPath );\r\n\t\tthis.currentPath.moveTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath.lineTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts ) {\r\n\r\n\t\tthis.currentPath.splineThru( pts );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoShapes: function ( isCCW, noHoles ) {\r\n\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\t\tconst shapes = [];\r\n\r\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\t\tconst tmpShape = new Shape();\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\t\tconst polyLen = inPolygon.length;\r\n\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tlet inside = false;\r\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\r\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn\tinside;\r\n\r\n\t\t}\r\n\r\n\t\tconst isClockWise = ShapeUtils.isClockWise;\r\n\r\n\t\tconst subPaths = this.subPaths;\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tlet solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\t\tif ( subPaths.length === 1 ) {\r\n\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new Shape();\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\t\tconst betterShapeHoles = [];\r\n\t\tconst newShapes = [];\r\n\t\tlet newShapeHoles = [];\r\n\t\tlet mainIdx = 0;\r\n\t\tlet tmpPoints;\r\n\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\t\tif ( solid ) {\r\n\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t\t//console.log('cw', i);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t\t//console.log('ccw', i);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tif ( newShapes.length > 1 ) {\r\n\r\n\t\t\tlet ambiguous = false;\r\n\t\t\tconst toChange = [];\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\tconst ho = sho[ hIdx ];\r\n\t\t\t\t\tlet hole_unassigned = true;\r\n\r\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet tmpHoles;\r\n\r\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Font( data ) {\r\n\r\n\tthis.type = 'Font';\r\n\r\n\tthis.data = data;\r\n\r\n}\r\n\r\nObject.assign( Font.prototype, {\r\n\r\n\tisFont: true,\r\n\r\n\tgenerateShapes: function ( text, size ) {\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\r\n\t\tconst shapes = [];\r\n\t\tconst paths = createPaths( text, size, this.data );\r\n\r\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction createPaths( text, size, data ) {\r\n\r\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\r\n\tconst scale = size / data.resolution;\r\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\r\n\r\n\tconst paths = [];\r\n\r\n\tlet offsetX = 0, offsetY = 0;\r\n\r\n\tfor ( let i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\tconst char = chars[ i ];\r\n\r\n\t\tif ( char === '\\n' ) {\r\n\r\n\t\t\toffsetX = 0;\r\n\t\t\toffsetY -= line_height;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\r\n\t\t\toffsetX += ret.offsetX;\r\n\t\t\tpaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn paths;\r\n\r\n}\r\n\r\nfunction createPath( char, scale, offsetX, offsetY, data ) {\r\n\r\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\r\n\r\n\tif ( ! glyph ) {\r\n\r\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tconst path = new ShapePath();\r\n\r\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n\r\n\tif ( glyph.o ) {\r\n\r\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\tconst action = outline[ i ++ ];\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { offsetX: glyph.ha * scale, path: path };\r\n\r\n}\r\n\r\nfunction FontLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst font = scope.parse( json );\r\n\r\n\t\t\tif ( onLoad ) onLoad( font );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\treturn new Font( json );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _context;\r\n\r\nconst AudioContext = {\r\n\r\n\tgetContext: function () {\r\n\r\n\t\tif ( _context === undefined ) {\r\n\r\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\t\t}\r\n\r\n\t\treturn _context;\r\n\r\n\t},\r\n\r\n\tsetContext: function ( value ) {\r\n\r\n\t\t_context = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction AudioLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AudioLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\r\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\r\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\r\n\r\n\t\t\t\tconst context = AudioContext.getContext();\r\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\r\n\r\n\t\t\t\t\tonLoad( audioBuffer );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( skyColor );\r\n\tconst color2 = new Color().set( groundColor );\r\n\r\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\r\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\r\n\r\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\r\n\tconst c0 = Math.sqrt( Math.PI );\r\n\tconst c1 = c0 * Math.sqrt( 0.75 );\r\n\r\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\r\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\r\n\r\n}\r\n\r\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: HemisphereLightProbe,\r\n\r\n\tisHemisphereLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying colors not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLightProbe( color, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( color );\r\n\r\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\r\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\r\n\r\n}\r\n\r\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: AmbientLightProbe,\r\n\r\n\tisAmbientLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying color not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _eyeRight = new Matrix4();\r\nconst _eyeLeft = new Matrix4();\r\n\r\nfunction StereoCamera() {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.eyeSep = 0.064;\r\n\r\n\tthis.cameraL = new PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n\tthis._cache = {\r\n\t\tfocus: null,\r\n\t\tfov: null,\r\n\t\taspect: null,\r\n\t\tnear: null,\r\n\t\tfar: null,\r\n\t\tzoom: null,\r\n\t\teyeSep: null\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( StereoCamera.prototype, {\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\r\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\r\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\tcache.focus = camera.focus;\r\n\t\t\tcache.fov = camera.fov;\r\n\t\t\tcache.aspect = camera.aspect * this.aspect;\r\n\t\t\tcache.near = camera.near;\r\n\t\t\tcache.far = camera.far;\r\n\t\t\tcache.zoom = camera.zoom;\r\n\t\t\tcache.eyeSep = this.eyeSep;\r\n\r\n\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\r\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\r\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\r\n\t\t\tlet xmin, xmax;\r\n\r\n\t\t\t// translate xOffset\r\n\r\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\r\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\r\n\r\n\t\t\t// for left eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t// for right eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\r\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Clock( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n}\r\n\r\nObject.assign( Clock.prototype, {\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.elapsedTime = 0;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\t\tthis.autoStart = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tlet diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tconst newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\r\n\r\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$2 = new Vector3();\r\nconst _quaternion$3 = new Quaternion();\r\nconst _scale$1 = new Vector3();\r\nconst _orientation = new Vector3();\r\n\r\nfunction AudioListener() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = AudioContext.getContext();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n\tthis.timeDelta = 0;\r\n\r\n\t// private\r\n\r\n\tthis._clock = new Clock();\r\n\r\n}\r\n\r\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: AudioListener,\r\n\r\n\tgetInput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tremoveFilter: function ( ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\t\t\tthis.gain.connect( this.context.destination );\r\n\t\t\tthis.filter = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.filter;\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( value ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t\t}\r\n\r\n\t\tthis.filter = value;\r\n\t\tthis.gain.connect( this.filter );\r\n\t\tthis.filter.connect( this.context.destination );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMasterVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetMasterVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tconst listener = this.context.listener;\r\n\t\tconst up = this.up;\r\n\r\n\t\tthis.timeDelta = this._clock.getDelta();\r\n\r\n\t\tthis.matrixWorld.decompose( _position$2, _quaternion$3, _scale$1 );\r\n\r\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion$3 );\r\n\r\n\t\tif ( listener.positionX ) {\r\n\r\n\t\t\t// code path for Chrome (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\r\n\r\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$2.x, endTime );\r\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$2.y, endTime );\r\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$2.z, endTime );\r\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\r\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\r\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\r\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\r\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\r\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlistener.setPosition( _position$2.x, _position$2.y, _position$2.z );\r\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Audio( listener ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.listener = listener;\r\n\tthis.context = listener.context;\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.buffer = null;\r\n\tthis.detune = 0;\r\n\tthis.loop = false;\r\n\tthis.loopStart = 0;\r\n\tthis.loopEnd = 0;\r\n\tthis.offset = 0;\r\n\tthis.duration = undefined;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis._startedAt = 0;\r\n\tthis._progress = 0;\r\n\r\n\tthis.filters = [];\r\n\r\n}\r\n\r\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Audio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tsetNodeSource: function ( audioNode ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'audioNode';\r\n\t\tthis.source = audioNode;\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaElementSource: function ( mediaElement ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaNode';\r\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaStreamSource: function ( mediaStream ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaStreamNode';\r\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetBuffer: function ( audioBuffer ) {\r\n\r\n\t\tthis.buffer = audioBuffer;\r\n\t\tthis.sourceType = 'buffer';\r\n\r\n\t\tif ( this.autoplay ) this.play();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tplay: function ( delay ) {\r\n\r\n\t\tif ( delay === undefined ) delay = 0;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._startedAt = this.context.currentTime + delay;\r\n\r\n\t\tconst source = this.context.createBufferSource();\r\n\t\tsource.buffer = this.buffer;\r\n\t\tsource.loop = this.loop;\r\n\t\tsource.loopStart = this.loopStart;\r\n\t\tsource.loopEnd = this.loopEnd;\r\n\t\tsource.onended = this.onEnded.bind( this );\r\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.source = source;\r\n\r\n\t\tthis.setDetune( this.detune );\r\n\t\tthis.setPlaybackRate( this.playbackRate );\r\n\r\n\t\treturn this.connect();\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\t// update current progress\r\n\r\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\r\n\r\n\t\t\tif ( this.loop === true ) {\r\n\r\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\r\n\r\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.source.stop();\r\n\t\t\tthis.source.onended = null;\r\n\r\n\t\t\tthis.isPlaying = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._progress = 0;\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.source.onended = null;\r\n\t\tthis.isPlaying = false;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.connect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilters: function () {\r\n\r\n\t\treturn this.filters;\r\n\r\n\t},\r\n\r\n\tsetFilters: function ( value ) {\r\n\r\n\t\tif ( ! value ) value = [];\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filters = value;\r\n\t\t\tthis.connect();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.filters = value;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDetune: function ( value ) {\r\n\r\n\t\tthis.detune = value;\r\n\r\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDetune: function () {\r\n\r\n\t\treturn this.detune;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.getFilters()[ 0 ];\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( filter ) {\r\n\r\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\r\n\r\n\t},\r\n\r\n\tsetPlaybackRate: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.playbackRate = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetPlaybackRate: function () {\r\n\r\n\t\treturn this.playbackRate;\r\n\r\n\t},\r\n\r\n\tonEnded: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tgetLoop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.loop;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.loop = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.loop = this.loop;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopStart: function ( value ) {\r\n\r\n\t\tthis.loopStart = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopEnd: function ( value ) {\r\n\r\n\t\tthis.loopEnd = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$3 = new Vector3();\r\nconst _quaternion$4 = new Quaternion();\r\nconst _scale$2 = new Vector3();\r\nconst _orientation$1 = new Vector3();\r\n\r\nfunction PositionalAudio( listener ) {\r\n\r\n\tAudio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.panningModel = 'HRTF';\r\n\tthis.panner.connect( this.gain );\r\n\r\n}\r\n\r\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\r\n\r\n\tconstructor: PositionalAudio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.panner;\r\n\r\n\t},\r\n\r\n\tgetRefDistance: function () {\r\n\r\n\t\treturn this.panner.refDistance;\r\n\r\n\t},\r\n\r\n\tsetRefDistance: function ( value ) {\r\n\r\n\t\tthis.panner.refDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetRolloffFactor: function () {\r\n\r\n\t\treturn this.panner.rolloffFactor;\r\n\r\n\t},\r\n\r\n\tsetRolloffFactor: function ( value ) {\r\n\r\n\t\tthis.panner.rolloffFactor = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDistanceModel: function () {\r\n\r\n\t\treturn this.panner.distanceModel;\r\n\r\n\t},\r\n\r\n\tsetDistanceModel: function ( value ) {\r\n\r\n\t\tthis.panner.distanceModel = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxDistance: function () {\r\n\r\n\t\treturn this.panner.maxDistance;\r\n\r\n\t},\r\n\r\n\tsetMaxDistance: function ( value ) {\r\n\r\n\t\tthis.panner.maxDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDirectionalCone: function ( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\r\n\r\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\r\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\r\n\t\tthis.panner.coneOuterGain = coneOuterGain;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\r\n\r\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$4, _scale$2 );\r\n\r\n\t\t_orientation$1.set( 0, 0, 1 ).applyQuaternion( _quaternion$4 );\r\n\r\n\t\tconst panner = this.panner;\r\n\r\n\t\tif ( panner.positionX ) {\r\n\r\n\t\t\t// code path for Chrome and Firefox (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\r\n\r\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position$3.x, endTime );\r\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position$3.y, endTime );\r\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position$3.z, endTime );\r\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation$1.x, endTime );\r\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation$1.y, endTime );\r\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation$1.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpanner.setPosition( _position$3.x, _position$3.y, _position$3.z );\r\n\t\t\tpanner.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AudioAnalyser( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n}\r\n\r\nObject.assign( AudioAnalyser.prototype, {\r\n\r\n\tgetFrequencyData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\r\n\t\treturn this.data;\r\n\r\n\t},\r\n\r\n\tgetAverageFrequency: function () {\r\n\r\n\t\tlet value = 0;\r\n\t\tconst data = this.getFrequencyData();\r\n\r\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\tvalue += data[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn value / data.length;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PropertyMixer( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tlet mixFunction,\r\n\t\tmixFunctionAdditive,\r\n\t\tsetIdentity;\r\n\r\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\t//\r\n\t// 'add' is used for additive cumulative results\r\n\t//\r\n\t// 'work' is optional and is only present for quaternion types. It is used\r\n\t// to store intermediate quaternion multiplication results\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\r\n\t\t\tmixFunction = this._slerp;\r\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\r\n\t\t\tthis._workIndex = 5;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\t\t\tmixFunction = this._select;\r\n\r\n\t\t\t// Use the regular mix function and for additive on these types,\r\n\t\t\t// additive is not relevant for non-numeric types\r\n\t\t\tmixFunctionAdditive = this._select;\r\n\r\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\r\n\r\n\t\t\tthis.buffer = new Array( valueSize * 5 );\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tmixFunction = this._lerp;\r\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\r\n\r\n\t}\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\r\n\tthis._setIdentity = setIdentity;\r\n\tthis._origIndex = 3;\r\n\tthis._addIndex = 4;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n}\r\n\r\nObject.assign( PropertyMixer.prototype, {\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function ( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride;\r\n\r\n\t\tlet currentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tconst mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// accumulate data in the 'incoming' region into 'add'\r\n\taccumulateAdditive: function ( weight ) {\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = stride * this._addIndex;\r\n\r\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\r\n\r\n\t\t\t// add = identity\r\n\r\n\t\t\tthis._setIdentity();\r\n\r\n\t\t}\r\n\r\n\t\t// add := add + incoming * weight\r\n\r\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\r\n\t\tthis.cumulativeWeightAdditive += weight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function ( accuIndex ) {\r\n\r\n\t\tconst stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tconst originalValueOffset = stride * this._origIndex;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tif ( weightAdditive > 0 ) {\r\n\r\n\t\t\t// accuN := accuN + additive accuN\r\n\r\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function () {\r\n\r\n\t\tconst binding = this.binding;\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * this._origIndex;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\t// Add to identity for additive\r\n\t\tthis._setIdentity();\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function () {\r\n\r\n\t\tconst originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityNumeric: function () {\r\n\r\n\t\tconst startIndex = this._addIndex * this.valueSize;\r\n\t\tconst endIndex = startIndex + this.valueSize;\r\n\r\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityQuaternion: function () {\r\n\r\n\t\tthis._setAdditiveIdentityNumeric();\r\n\t\tthis.buffer[ this._addIndex * 4 + 3 ] = 1;\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityOther: function () {\r\n\r\n\t\tconst startIndex = this._origIndex * this.valueSize;\r\n\t\tconst targetIndex = this._addIndex * this.valueSize;\r\n\r\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\r\n\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst workOffset = this._workIndex * stride;\r\n\r\n\t\t// Store result in intermediate buffer offset\r\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\r\n\r\n\t\t// Slerp to the intermediate result\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst s = 1 - t;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// Characters [].:/ are reserved for track binding syntax.\r\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\r\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\r\n\r\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\r\n// only latin characters, and the unicode \\p{L} is not yet supported. So\r\n// instead, we exclude reserved characters and match everything else.\r\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\r\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\r\n\r\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\r\n// be matched to parse the rest of the track name.\r\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\r\n\r\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\r\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\r\n\r\n// Object on target node, and accessor. May not contain reserved\r\n// characters. Accessor may contain any character except closing bracket.\r\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\r\n\r\n// Property and accessor. May not contain reserved characters. Accessor may\r\n// contain any non-bracket characters.\r\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\r\n\r\nconst _trackRe = new RegExp( ''\r\n\t+ '^'\r\n\t+ _directoryRe\r\n\t+ _nodeRe\r\n\t+ _objectRe\r\n\t+ _propertyRe\r\n\t+ '$'\r\n);\r\n\r\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\r\n\r\nfunction Composite( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n}\r\n\r\nObject.assign( Composite.prototype, {\r\n\r\n\tgetValue: function ( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function ( array, offset ) {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\nfunction PropertyBinding( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n}\r\n\r\nObject.assign( PropertyBinding, {\r\n\r\n\tComposite: Composite,\r\n\r\n\tcreate: function ( root, path, parsedPath ) {\r\n\r\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\r\n\r\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Replaces spaces with underscores and removes unsupported characters from\r\n\t * node names, to ensure compatibility with parseTrackName().\r\n\t *\r\n\t * @param {string} name Node name to be sanitized.\r\n\t * @return {string}\r\n\t */\r\n\tsanitizeNodeName: function ( name ) {\r\n\r\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\r\n\r\n\t},\r\n\r\n\tparseTrackName: function ( trackName ) {\r\n\r\n\t\tconst matches = _trackRe.exec( trackName );\r\n\r\n\t\tif ( ! matches ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\tconst results = {\r\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\r\n\t\t\tnodeName: matches[ 2 ],\r\n\t\t\tobjectName: matches[ 3 ],\r\n\t\t\tobjectIndex: matches[ 4 ],\r\n\t\t\tpropertyName: matches[ 5 ], // required\r\n\t\t\tpropertyIndex: matches[ 6 ]\r\n\t\t};\r\n\r\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\r\n\r\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\r\n\r\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\r\n\r\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\r\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\r\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\r\n\t\t\t// include '.' characters).\r\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\r\n\r\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\r\n\t\t\t\tresults.objectName = objectName;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\r\n\t},\r\n\r\n\tfindNode: function ( root, nodeName ) {\r\n\r\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\t\treturn root;\r\n\r\n\t\t}\r\n\r\n\t\t// search into skeleton bones.\r\n\t\tif ( root.skeleton ) {\r\n\r\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\r\n\r\n\t\t\tif ( bone !== undefined ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// search into node subtree.\r\n\t\tif ( root.children ) {\r\n\r\n\t\t\tconst searchNodeSubtree = function ( children ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\t\tconst childNode = children[ i ];\r\n\r\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\t\tif ( result ) return result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\t\tif ( subTreeNode ) {\r\n\r\n\t\t\t\treturn subTreeNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function () {},\r\n\t_setValue_unavailable: function () {},\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tconst source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t],\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function () {\r\n\r\n\t\tlet targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n\t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( objectName ) {\r\n\r\n\t\t\tlet objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif ( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tconst nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( nodeProperty === undefined ) {\r\n\r\n\t\t\tconst nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\r\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tlet versioning = this.Versioning.None;\r\n\r\n\t\tthis.targetObject = targetObject;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tlet bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\r\n\r\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( PropertyBinding.prototype, {\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n *  - Add objects you would otherwise pass as 'root' to the\r\n *    constructor or the .clipAction method of AnimationMixer.\r\n *\r\n *  - Instead pass this object as 'root'.\r\n *\r\n *  - You can also add and remove objects later when the mixer\r\n *    is running.\r\n *\r\n * Note:\r\n *\r\n *    Objects of this class appear as one object to the mixer,\r\n *    so cache control of the individual objects must be done\r\n *    on the group.\r\n *\r\n * Limitation:\r\n *\r\n *  - The animated properties must be compatible among the\r\n *    all objects in the group.\r\n *\r\n *  - A single property can either be controlled through a\r\n *    target group or directly, but not both.\r\n */\r\n\r\nfunction AnimationObjectGroup() {\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0; // threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tconst indices = {};\r\n\tthis._indicesByUUID = indices; // for bookkeeping\r\n\r\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = []; // inside: string\r\n\tthis._parsedPaths = []; // inside: { we don't care, here }\r\n\tthis._bindings = []; // inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() {\r\n\r\n\t\t\t\treturn scope._objects.length;\r\n\r\n\t\t\t},\r\n\t\t\tget inUse() {\r\n\r\n\t\t\t\treturn this.total - scope.nCachedObjects_;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tget bindingsPerObject() {\r\n\r\n\t\t\treturn scope._bindings.length;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( AnimationObjectGroup.prototype, {\r\n\r\n\tisAnimationObjectGroup: true,\r\n\r\n\tadd: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet knownObject = undefined,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid;\r\n\t\t\tlet index = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tknownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\r\n\r\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\r\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_,\r\n\t\t\tnObjects = objects.length;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tconst lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function ( path, parsedPath ) {\r\n\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tlet indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tconst paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = objects[ i ];\r\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function ( path ) {\r\n\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationAction( mixer, clip, localRoot, blendMode ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\tthis.blendMode = blendMode || clip.blendMode;\r\n\r\n\tconst tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tconst interpolantSettings = {\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tconst interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants; // bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null; // for the memory manager\r\n\tthis._byClipCacheIndex = null; // for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = LoopRepeat;\r\n\tthis._loopCount = - 1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; // no. of repetitions when looping\r\n\r\n\tthis.paused = false; // true -> zero effective time scale\r\n\tthis.enabled = true; // false -> zero effective weight\r\n\r\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\r\n\r\n}\r\n\r\nObject.assign( AnimationAction.prototype, {\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function () {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0; // restart clip\r\n\t\tthis._loopCount = - 1;// forget previous loops\r\n\t\tthis._startTime = null;// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function () {\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function () {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function ( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function ( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function () {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif ( warp ) {\r\n\r\n\t\t\tconst fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function () {\r\n\r\n\t\tlet weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the time scale stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function ( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function () {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function ( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function ( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function ( duration ) {\r\n\r\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tconst mixer = this._mixer,\r\n\t\t\tnow = mixer.time,\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tlet interpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function () {\r\n\r\n\t\tlet timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function () {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function () {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\r\n\r\n\t\t// called by the mixer\r\n\r\n\t\tif ( ! this.enabled ) {\r\n\r\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\r\n\r\n\t\t\tthis._updateWeight( time );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tconst clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tconst weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tconst interpolants = this._interpolants;\r\n\t\t\tconst propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tswitch ( this.blendMode ) {\r\n\r\n\t\t\t\tcase AdditiveAnimationBlendMode:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase NormalAnimationBlendMode:\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function ( time ) {\r\n\r\n\t\tlet weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tconst interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function ( time ) {\r\n\r\n\t\tlet timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tconst interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.paused = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function ( deltaTime ) {\r\n\r\n\t\tconst duration = this._clip.duration;\r\n\t\tconst loop = this.loop;\r\n\r\n\t\tlet time = this.time + deltaTime;\r\n\t\tlet loopCount = this._loopCount;\r\n\r\n\t\tconst pingPong = ( loop === LoopPingPong );\r\n\r\n\t\tif ( deltaTime === 0 ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) return time;\r\n\r\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\r\n\r\n\t\t}\r\n\r\n\t\tif ( loop === LoopOnce ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tthis._loopCount = 0;\r\n\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle_stop: {\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tbreak handle_stop;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // repetitive Repeat or PingPong\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tif ( deltaTime >= 0 ) {\r\n\r\n\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( time >= duration || time < 0 ) {\r\n\r\n\t\t\t\t// wrap around\r\n\r\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\tconst pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\tif ( pending <= 0 ) {\r\n\r\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// keep running\r\n\r\n\t\t\t\t\tif ( pending === 1 ) {\r\n\r\n\t\t\t\t\t\t// entering the last round\r\n\r\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\treturn duration - time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\r\n\r\n\t\tconst settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\r\n\r\n\t\tconst mixer = this._mixer, now = mixer.time;\r\n\t\tlet interpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\t\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationMixer( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n}\r\n\r\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: AnimationMixer,\r\n\r\n\t_bindAction: function ( action, prototypeAction ) {\r\n\r\n\t\tconst root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\r\n\r\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tconst track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name;\r\n\r\n\t\t\tlet binding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new PropertyMixer(\r\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function ( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipUuid = action._clip.uuid,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function ( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function () {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\r\n\t\t// \tactionByRoot: AnimationAction - lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._actions.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveActions;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._bindings.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveBindings;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._controlInterpolants.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for AnimationAction objects\r\n\r\n\t_isActiveAction: function ( action ) {\r\n\r\n\t\tconst index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function ( action ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tconst clipUuid = action._clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function ( action ) {\r\n\r\n\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function ( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function ( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function () {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\r\n\r\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new LinearInterpolant(\r\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function ( interpolant ) {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid;\r\n\r\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\r\n\r\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\r\n\r\n\t\tlet actionsForClip = this._actionsByClip[ clipUuid ],\r\n\t\t\tprototypeAction = null;\r\n\r\n\t\tif ( blendMode === undefined ) {\r\n\r\n\t\t\tif ( clipObject !== null ) {\r\n\r\n\t\t\t\tblendMode = clipObject.blendMode;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tblendMode = NormalAnimationBlendMode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tif ( clipObject === null )\r\n\t\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function () {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions;\r\n\r\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\r\n\r\n\t\t\tactions[ i ].stop();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function ( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tconst action = actions[ i ];\r\n\r\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Allows you to seek to a specific time in an animation.\r\n\tsetTime: function ( timeInSeconds ) {\r\n\r\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\r\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\r\n\r\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function ( clip ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tclipUuid = clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tconst cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function ( root ) {\r\n\r\n\t\tconst rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( const clipUuid in actionsByClip ) {\r\n\r\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( const trackName in bindingByName ) {\r\n\r\n\t\t\t\tconst binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Uniform( value ) {\r\n\r\n\tif ( typeof value === 'string' ) {\r\n\r\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n\t\tvalue = arguments[ 1 ];\r\n\r\n\t}\r\n\r\n\tthis.value = value;\r\n\r\n}\r\n\r\nUniform.prototype.clone = function () {\r\n\r\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\r\n\r\n};\r\n\r\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\r\n\r\n\tInterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\r\n\r\n\tconstructor: InstancedInterleavedBuffer,\r\n\r\n\tisInstancedInterleavedBuffer: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\r\n\r\n\t\tib.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\r\n\r\n\t\tjson.isInstancedInterleavedBuffer = true;\r\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Raycaster( origin, direction, near, far ) {\r\n\r\n\tthis.ray = new Ray( origin, direction );\r\n\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\tthis.near = near || 0;\r\n\tthis.far = far || Infinity;\r\n\tthis.camera = null;\r\n\tthis.layers = new Layers();\r\n\r\n\tthis.params = {\r\n\t\tMesh: {},\r\n\t\tLine: { threshold: 1 },\r\n\t\tLOD: {},\r\n\t\tPoints: { threshold: 1 },\r\n\t\tSprite: {}\r\n\t};\r\n\r\n\tObject.defineProperties( this.params, {\r\n\t\tPointCloud: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\treturn this.Points;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n}\r\n\r\nfunction ascSort( a, b ) {\r\n\r\n\treturn a.distance - b.distance;\r\n\r\n}\r\n\r\nfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\tif ( object.layers.test( raycaster.layers ) ) {\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t}\r\n\r\n\tif ( recursive === true ) {\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Raycaster.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.ray.set( origin, direction );\r\n\r\n\t},\r\n\r\n\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\r\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tintersectObject: function ( object, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t},\r\n\r\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t}\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\r\n * The azimuthal angle (theta) is measured from the positive z-axis.\r\n */\r\n\r\nclass Spherical {\r\n\r\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi; // polar angle\r\n\t\tthis.theta = theta; // azimuthal angle\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tset( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.phi = other.phi;\r\n\t\tthis.theta = other.theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe() {\r\n\r\n\t\tconst EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetFromVector3( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t}\r\n\r\n\tsetFromCartesianCoords( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( x, z );\r\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\r\n */\r\n\r\nfunction Cylindrical( radius, theta, y ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\r\n\tthis.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nObject.assign( Cylindrical.prototype, {\r\n\r\n\tset: function ( radius, theta, y ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.theta = theta;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.theta = other.theta;\r\n\t\tthis.y = other.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t},\r\n\r\n\tsetFromCartesianCoords: function ( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + z * z );\r\n\t\tthis.theta = Math.atan2( x, z );\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$7 = new Vector2();\r\n\r\nfunction Box2( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\r\n\r\n}\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 4 splitting planes to rule out intersections\r\n\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _startP = new Vector3();\r\nconst _startEnd = new Vector3();\r\n\r\nfunction Line3( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Line3.prototype, {\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function ( point, clampToLine ) {\r\n\r\n\t\t_startP.subVectors( point, this.start );\r\n\t\t_startEnd.subVectors( this.end, this.start );\r\n\r\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\r\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\r\n\r\n\t\tlet t = startEnd_startP / startEnd2;\r\n\r\n\t\tif ( clampToLine ) {\r\n\r\n\t\t\tt = MathUtils.clamp( t, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\r\n\r\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImmediateRenderObject( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( /* renderCallback */ ) {};\r\n\r\n\tthis.hasPositions = false;\r\n\tthis.hasNormals = false;\r\n\tthis.hasColors = false;\r\n\tthis.hasUvs = false;\r\n\r\n\tthis.positionArray = null;\r\n\tthis.normalArray = null;\r\n\tthis.colorArray = null;\r\n\tthis.uvArray = null;\r\n\r\n\tthis.count = 0;\r\n\r\n}\r\n\r\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\r\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\r\n\r\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\r\n\r\nconst _vector$8 = new Vector3();\r\n\r\nfunction SpotLightHelper( light, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst positions = [\r\n\t\t0, 0, 0, \t0, 0, 1,\r\n\t\t0, 0, 0, \t1, 0, 1,\r\n\t\t0, 0, 0,\t- 1, 0, 1,\r\n\t\t0, 0, 0, \t0, 1, 1,\r\n\t\t0, 0, 0, \t0, - 1, 1\r\n\t];\r\n\r\n\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n\t\tconst p1 = ( i / l ) * Math.PI * 2;\r\n\t\tconst p2 = ( j / l ) * Math.PI * 2;\r\n\r\n\t\tpositions.push(\r\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\r\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.cone = new LineSegments( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nSpotLightHelper.prototype = Object.create( Object3D.prototype );\r\nSpotLightHelper.prototype.constructor = SpotLightHelper;\r\n\r\nSpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nSpotLightHelper.prototype.update = function () {\r\n\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tconst coneLength = this.light.distance ? this.light.distance : 1000;\r\n\tconst coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t_vector$8.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\tthis.cone.lookAt( _vector$8 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.cone.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst _vector$9 = new Vector3();\r\nconst _boneMatrix = new Matrix4();\r\nconst _matrixWorldInv = new Matrix4();\r\n\r\nfunction getBoneList( object ) {\r\n\r\n\tconst boneList = [];\r\n\r\n\tif ( object && object.isBone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n}\r\n\r\nfunction SkeletonHelper( object ) {\r\n\r\n\tconst bones = getBoneList( object );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst color1 = new Color( 0, 0, 1 );\r\n\tconst color2 = new Color( 0, 1, 0 );\r\n\r\n\tfor ( let i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tcolors.push( color1.r, color1.g, color1.b );\r\n\t\t\tcolors.push( color2.r, color2.g, color2.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkeletonHelper';\r\n\r\n\tthis.root = object;\r\n\tthis.bones = bones;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n}\r\n\r\nSkeletonHelper.prototype = Object.create( LineSegments.prototype );\r\nSkeletonHelper.prototype.constructor = SkeletonHelper;\r\n\r\nSkeletonHelper.prototype.isSkeletonHelper = true;\r\n\r\nSkeletonHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst bones = this.bones;\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t_matrixWorldInv.getInverse( this.root.matrixWorld );\r\n\r\n\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PointLightHelper( light, sphereSize, color ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\r\n\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'PointLightHelper';\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n\r\n\t/*\r\n\tconst distanceGeometry = new THREE.IcosahedronBufferGeometry( 1, 2 );\r\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tconst d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n}\r\n\r\nPointLightHelper.prototype = Object.create( Mesh.prototype );\r\nPointLightHelper.prototype.constructor = PointLightHelper;\r\n\r\nPointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nPointLightHelper.prototype.update = function () {\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\t/*\r\n\tconst d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\nconst _vector$a = new Vector3();\r\nconst _color1 = new Color();\r\nconst _color2 = new Color();\r\n\r\nfunction HemisphereLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new OctahedronBufferGeometry( size );\r\n\tgeometry.rotateY( Math.PI * 0.5 );\r\n\r\n\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\tif ( this.color === undefined ) this.material.vertexColors = true;\r\n\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\tconst colors = new Float32Array( position.count * 3 );\r\n\r\n\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\r\n\r\n\tthis.add( new Mesh( geometry, this.material ) );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\r\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\r\n\r\nHemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.children[ 0 ].geometry.dispose();\r\n\tthis.children[ 0 ].material.dispose();\r\n\r\n};\r\n\r\nHemisphereLightHelper.prototype.update = function () {\r\n\r\n\tconst mesh = this.children[ 0 ];\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tconst colors = mesh.geometry.getAttribute( 'color' );\r\n\r\n\t\t_color1.copy( this.light.color );\r\n\t\t_color2.copy( this.light.groundColor );\r\n\r\n\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\r\n\r\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t\tcolors.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tmesh.lookAt( _vector$a.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\r\n};\r\n\r\nfunction GridHelper( size, divisions, color1, color2 ) {\r\n\r\n\tsize = size || 10;\r\n\tdivisions = divisions || 10;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst center = divisions / 2;\r\n\tconst step = size / divisions;\r\n\tconst halfSize = size / 2;\r\n\r\n\tconst vertices = [], colors = [];\r\n\r\n\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\r\n\r\n\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\r\n\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\r\n\r\n\t\tconst color = i === center ? color1 : color2;\r\n\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'GridHelper';\r\n\r\n}\r\n\r\nGridHelper.prototype = Object.create( LineSegments.prototype );\r\nGridHelper.prototype.constructor = GridHelper;\r\n\r\nfunction PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\r\n\r\n\tradius = radius || 10;\r\n\tradials = radials || 16;\r\n\tcircles = circles || 8;\r\n\tdivisions = divisions || 64;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\t// create the radials\r\n\r\n\tfor ( let i = 0; i <= radials; i ++ ) {\r\n\r\n\t\tconst v = ( i / radials ) * ( Math.PI * 2 );\r\n\r\n\t\tconst x = Math.sin( v ) * radius;\r\n\t\tconst z = Math.cos( v ) * radius;\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tvertices.push( x, 0, z );\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t}\r\n\r\n\t// create the circles\r\n\r\n\tfor ( let i = 0; i <= circles; i ++ ) {\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tconst r = radius - ( radius / circles * i );\r\n\r\n\t\tfor ( let j = 0; j < divisions; j ++ ) {\r\n\r\n\t\t\t// first vertex\r\n\r\n\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tlet x = Math.sin( v ) * r;\r\n\t\t\tlet z = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t\t// second vertex\r\n\r\n\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tx = Math.sin( v ) * r;\r\n\t\t\tz = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'PolarGridHelper';\r\n\r\n}\r\n\r\nPolarGridHelper.prototype = Object.create( LineSegments.prototype );\r\nPolarGridHelper.prototype.constructor = PolarGridHelper;\r\n\r\nconst _v1$5 = new Vector3();\r\nconst _v2$3 = new Vector3();\r\nconst _v3$1 = new Vector3();\r\n\r\nfunction DirectionalLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tif ( size === undefined ) size = 1;\r\n\r\n\tlet geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\r\n\t\t- size, size, 0,\r\n\t\tsize, size, 0,\r\n\t\tsize, - size, 0,\r\n\t\t- size, - size, 0,\r\n\t\t- size, size, 0\r\n\t], 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.lightPlane = new Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n\tthis.targetLine = new Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\r\nDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\r\n\r\nDirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nDirectionalLightHelper.prototype.update = function () {\r\n\r\n\t_v1$5.setFromMatrixPosition( this.light.matrixWorld );\r\n\t_v2$3.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t_v3$1.subVectors( _v2$3, _v1$5 );\r\n\r\n\tthis.lightPlane.lookAt( _v2$3 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.lightPlane.material.color.set( this.color );\r\n\t\tthis.targetLine.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightPlane.material.color.copy( this.light.color );\r\n\t\tthis.targetLine.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\tthis.targetLine.lookAt( _v2$3 );\r\n\tthis.targetLine.scale.z = _v3$1.length();\r\n\r\n};\r\n\r\nconst _vector$b = new Vector3();\r\nconst _camera = new Camera();\r\n\r\n/**\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nfunction CameraHelper( camera ) {\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tconst colorFrustum = new Color( 0xffaa00 );\r\n\tconst colorCone = new Color( 0xff0000 );\r\n\tconst colorUp = new Color( 0x00aaff );\r\n\tconst colorTarget = new Color( 0xffffff );\r\n\tconst colorCross = new Color( 0x333333 );\r\n\r\n\t// near\r\n\r\n\taddLine( 'n1', 'n2', colorFrustum );\r\n\taddLine( 'n2', 'n4', colorFrustum );\r\n\taddLine( 'n4', 'n3', colorFrustum );\r\n\taddLine( 'n3', 'n1', colorFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( 'f1', 'f2', colorFrustum );\r\n\taddLine( 'f2', 'f4', colorFrustum );\r\n\taddLine( 'f4', 'f3', colorFrustum );\r\n\taddLine( 'f3', 'f1', colorFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( 'n1', 'f1', colorFrustum );\r\n\taddLine( 'n2', 'f2', colorFrustum );\r\n\taddLine( 'n3', 'f3', colorFrustum );\r\n\taddLine( 'n4', 'f4', colorFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( 'p', 'n1', colorCone );\r\n\taddLine( 'p', 'n2', colorCone );\r\n\taddLine( 'p', 'n3', colorCone );\r\n\taddLine( 'p', 'n4', colorCone );\r\n\r\n\t// up\r\n\r\n\taddLine( 'u1', 'u2', colorUp );\r\n\taddLine( 'u2', 'u3', colorUp );\r\n\taddLine( 'u3', 'u1', colorUp );\r\n\r\n\t// target\r\n\r\n\taddLine( 'c', 't', colorTarget );\r\n\taddLine( 'p', 'c', colorCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( 'cn1', 'cn2', colorCross );\r\n\taddLine( 'cn3', 'cn4', colorCross );\r\n\r\n\taddLine( 'cf1', 'cf2', colorCross );\r\n\taddLine( 'cf3', 'cf4', colorCross );\r\n\r\n\tfunction addLine( a, b, color ) {\r\n\r\n\t\taddPoint( a, color );\r\n\t\taddPoint( b, color );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, color ) {\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'CameraHelper';\r\n\r\n\tthis.camera = camera;\r\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nCameraHelper.prototype = Object.create( LineSegments.prototype );\r\nCameraHelper.prototype.constructor = CameraHelper;\r\n\r\nCameraHelper.prototype.update = function () {\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst pointMap = this.pointMap;\r\n\r\n\tconst w = 1, h = 1;\r\n\r\n\t// we need just camera projection matrix inverse\r\n\t// world matrix must be identity\r\n\r\n\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\r\n\r\n\t// center / target\r\n\r\n\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\r\n\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\r\n\r\n\t// near\r\n\r\n\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\r\n\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\r\n\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\r\n\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\r\n\r\n\t// far\r\n\r\n\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\r\n\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\r\n\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\r\n\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\r\n\r\n\t// up\r\n\r\n\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\r\n\r\n\t// cross\r\n\r\n\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\r\n\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\r\n\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\r\n\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\r\n\r\n\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\r\n\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\r\n\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\r\n\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n};\r\n\r\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\r\n\r\n\t_vector$b.set( x, y, z ).unproject( camera );\r\n\r\n\tconst points = pointMap[ point ];\r\n\r\n\tif ( points !== undefined ) {\r\n\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tposition.setXYZ( points[ i ], _vector$b.x, _vector$b.y, _vector$b.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst _box$3 = new Box3();\r\n\r\nfunction BoxHelper( object, color ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tconst positions = new Float32Array( 8 * 3 );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'BoxHelper';\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nBoxHelper.prototype = Object.create( LineSegments.prototype );\r\nBoxHelper.prototype.constructor = BoxHelper;\r\n\r\nBoxHelper.prototype.update = function ( object ) {\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\r\n\r\n\t}\r\n\r\n\tif ( this.object !== undefined ) {\r\n\r\n\t\t_box$3.setFromObject( this.object );\r\n\r\n\t}\r\n\r\n\tif ( _box$3.isEmpty() ) return;\r\n\r\n\tconst min = _box$3.min;\r\n\tconst max = _box$3.max;\r\n\r\n\t/*\r\n\t  5____4\r\n\t1/___0/|\r\n\t| 6__|_7\r\n\t2/___3/\r\n\r\n\t0: max.x, max.y, max.z\r\n\t1: min.x, max.y, max.z\r\n\t2: min.x, min.y, max.z\r\n\t3: max.x, min.y, max.z\r\n\t4: max.x, max.y, min.z\r\n\t5: min.x, max.y, min.z\r\n\t6: min.x, min.y, min.z\r\n\t7: max.x, min.y, min.z\r\n\t*/\r\n\r\n\tconst position = this.geometry.attributes.position;\r\n\tconst array = position.array;\r\n\r\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\r\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\r\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\r\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\tposition.needsUpdate = true;\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n\r\n};\r\n\r\nBoxHelper.prototype.setFromObject = function ( object ) {\r\n\r\n\tthis.object = object;\r\n\tthis.update();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nBoxHelper.prototype.copy = function ( source ) {\r\n\r\n\tLineSegments.prototype.copy.call( this, source );\r\n\r\n\tthis.object = source.object;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction Box3Helper( box, color ) {\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.box = box;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\r\n\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n}\r\n\r\nBox3Helper.prototype = Object.create( LineSegments.prototype );\r\nBox3Helper.prototype.constructor = Box3Helper;\r\n\r\nBox3Helper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst box = this.box;\r\n\r\n\tif ( box.isEmpty() ) return;\r\n\r\n\tbox.getCenter( this.position );\r\n\r\n\tbox.getSize( this.scale );\r\n\r\n\tthis.scale.multiplyScalar( 0.5 );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PlaneHelper( plane, size, hex ) {\r\n\r\n\tthis.plane = plane;\r\n\r\n\tthis.size = ( size === undefined ) ? 1 : size;\r\n\r\n\tconst color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tconst positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\tgeometry.computeBoundingSphere();\r\n\r\n\tLine.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'PlaneHelper';\r\n\r\n\t//\r\n\r\n\tconst positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\r\n\r\n\tconst geometry2 = new BufferGeometry();\r\n\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\r\n\tgeometry2.computeBoundingSphere();\r\n\r\n\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\r\n\r\n}\r\n\r\nPlaneHelper.prototype = Object.create( Line.prototype );\r\nPlaneHelper.prototype.constructor = PlaneHelper;\r\n\r\nPlaneHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tlet scale = - this.plane.constant;\r\n\r\n\tif ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\r\n\r\n\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\r\n\r\n\tthis.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\r\n\r\n\tthis.lookAt( this.plane.normal );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nconst _axis = new Vector3();\r\nlet _lineGeometry, _coneGeometry;\r\n\r\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'ArrowHelper';\r\n\r\n\tif ( dir === undefined ) dir = new Vector3( 0, 0, 1 );\r\n\tif ( origin === undefined ) origin = new Vector3( 0, 0, 0 );\r\n\tif ( length === undefined ) length = 1;\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tif ( _lineGeometry === undefined ) {\r\n\r\n\t\t_lineGeometry = new BufferGeometry();\r\n\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n\t\t_coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n\t\t_coneGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\t}\r\n\r\n\tthis.position.copy( origin );\r\n\r\n\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.line.matrixAutoUpdate = false;\r\n\tthis.add( this.line );\r\n\r\n\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.cone.matrixAutoUpdate = false;\r\n\tthis.add( this.cone );\r\n\r\n\tthis.setDirection( dir );\r\n\tthis.setLength( length, headLength, headWidth );\r\n\r\n}\r\n\r\nArrowHelper.prototype = Object.create( Object3D.prototype );\r\nArrowHelper.prototype.constructor = ArrowHelper;\r\n\r\nArrowHelper.prototype.setDirection = function ( dir ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t} else {\r\n\r\n\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\tconst radians = Math.acos( dir.y );\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\r\n\r\n\t}\r\n\r\n};\r\n\r\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\nArrowHelper.prototype.copy = function ( source ) {\r\n\r\n\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\tthis.line.copy( source.line );\r\n\tthis.cone.copy( source.cone );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction AxesHelper( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tconst vertices = [\r\n\t\t0, 0, 0,\tsize, 0, 0,\r\n\t\t0, 0, 0,\t0, size, 0,\r\n\t\t0, 0, 0,\t0, 0, size\r\n\t];\r\n\r\n\tconst colors = [\r\n\t\t1, 0, 0,\t1, 0.6, 0,\r\n\t\t0, 1, 0,\t0.6, 1, 0,\r\n\t\t0, 0, 1,\t0, 0.6, 1\r\n\t];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'AxesHelper';\r\n\r\n}\r\n\r\nAxesHelper.prototype = Object.create( LineSegments.prototype );\r\nAxesHelper.prototype.constructor = AxesHelper;\r\n\r\nconst LOD_MIN = 4;\r\nconst LOD_MAX = 8;\r\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\r\n\r\n// The standard deviations (radians) associated with the extra mips. These are\r\n// chosen to approximate a Trowbridge-Reitz distribution function times the\r\n// geometric shadowing function. These sigma values squared must match the\r\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\r\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\r\n\r\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\r\n\r\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\r\n// samples and exit early, but not recompile the shader.\r\nconst MAX_SAMPLES = 20;\r\n\r\nconst ENCODINGS = {\r\n\t[ LinearEncoding ]: 0,\r\n\t[ sRGBEncoding ]: 1,\r\n\t[ RGBEEncoding ]: 2,\r\n\t[ RGBM7Encoding ]: 3,\r\n\t[ RGBM16Encoding ]: 4,\r\n\t[ RGBDEncoding ]: 5,\r\n\t[ GammaEncoding ]: 6\r\n};\r\n\r\nconst _flatCamera = new OrthographicCamera();\r\nconst { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\r\nlet _oldTarget = null;\r\n\r\n// Golden Ratio\r\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\r\nconst INV_PHI = 1 / PHI;\r\n\r\n// Vertices of a dodecahedron (except the opposites, which represent the\r\n// same axis), used as axis directions evenly spread on a sphere.\r\nconst _axisDirections = [\r\n\tnew Vector3( 1, 1, 1 ),\r\n\tnew Vector3( - 1, 1, 1 ),\r\n\tnew Vector3( 1, 1, - 1 ),\r\n\tnew Vector3( - 1, 1, - 1 ),\r\n\tnew Vector3( 0, PHI, INV_PHI ),\r\n\tnew Vector3( 0, PHI, - INV_PHI ),\r\n\tnew Vector3( INV_PHI, 0, PHI ),\r\n\tnew Vector3( - INV_PHI, 0, PHI ),\r\n\tnew Vector3( PHI, INV_PHI, 0 ),\r\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\r\n\r\n/**\r\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\r\n * (PMREM) from a cubeMap environment texture. This allows different levels of\r\n * blur to be quickly accessed based on material roughness. It is packed into a\r\n * special CubeUV format that allows us to perform custom interpolation so that\r\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\r\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\r\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\r\n * higher roughness levels. In this way we maintain resolution to smoothly\r\n * interpolate diffuse lighting while limiting sampling computation.\r\n */\r\n\r\nfunction PMREMGenerator( renderer ) {\r\n\r\n\tthis._renderer = renderer;\r\n\tthis._pingPongRenderTarget = null;\r\n\r\n\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\r\n\tthis._equirectShader = null;\r\n\tthis._cubemapShader = null;\r\n\r\n\tthis._compileMaterial( this._blurMaterial );\r\n\r\n}\r\n\r\nPMREMGenerator.prototype = {\r\n\r\n\tconstructor: PMREMGenerator,\r\n\r\n\t/**\r\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\r\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\r\n\t * in radians to be applied to the scene before PMREM generation. Optional near\r\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\r\n\t * is placed at the origin).\r\n\t */\r\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\r\n\r\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\r\n\t\tif ( sigma > 0 ) {\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\r\n\r\n\t\t}\r\n\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromEquirectangular: function ( equirectangular ) {\r\n\r\n\t\treturn this._fromTexture( equirectangular );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromCubemap: function ( cubemap ) {\r\n\r\n\t\treturn this._fromTexture( cubemap );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileCubemapShader: function () {\r\n\r\n\t\tif ( this._cubemapShader === null ) {\r\n\r\n\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\t\t\tthis._compileMaterial( this._cubemapShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileEquirectangularShader: function () {\r\n\r\n\t\tif ( this._equirectShader === null ) {\r\n\r\n\t\t\tthis._equirectShader = _getEquirectShader();\r\n\t\t\tthis._compileMaterial( this._equirectShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\r\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\r\n\t * one of them will cause any others to also become unusable.\r\n\t */\r\n\tdispose: function () {\r\n\r\n\t\tthis._blurMaterial.dispose();\r\n\r\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\r\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\r\n\r\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\r\n\r\n\t\t\t_lodPlanes[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// private interface\r\n\r\n\t_cleanup: function ( outputTarget ) {\r\n\r\n\t\tthis._pingPongRenderTarget.dispose();\r\n\t\tthis._renderer.setRenderTarget( _oldTarget );\r\n\t\toutputTarget.scissorTest = false;\r\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\r\n\r\n\t},\r\n\r\n\t_fromTexture: function ( texture ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\r\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_allocateTargets: function ( texture ) { // warning: null texture is valid\r\n\r\n\t\tconst params = {\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tgenerateMipmaps: false,\r\n\t\t\ttype: UnsignedByteType,\r\n\t\t\tformat: RGBEFormat,\r\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\r\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\r\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\r\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_compileMaterial: function ( material ) {\r\n\r\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_sceneToCubeUV: function ( scene, near, far, cubeUVRenderTarget ) {\r\n\r\n\t\tconst fov = 90;\r\n\t\tconst aspect = 1;\r\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\r\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\r\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tconst outputEncoding = renderer.outputEncoding;\r\n\t\tconst toneMapping = renderer.toneMapping;\r\n\t\tconst clearColor = renderer.getClearColor();\r\n\t\tconst clearAlpha = renderer.getClearAlpha();\r\n\r\n\t\trenderer.toneMapping = NoToneMapping;\r\n\t\trenderer.outputEncoding = LinearEncoding;\r\n\r\n\t\tlet background = scene.background;\r\n\t\tif ( background && background.isColor ) {\r\n\r\n\t\t\tbackground.convertSRGBToLinear();\r\n\t\t\t// Convert linear to RGBE\r\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\r\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\r\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\r\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\r\n\t\t\trenderer.setClearColor( background, alpha );\r\n\t\t\tscene.background = null;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst col = i % 3;\r\n\t\t\tif ( col == 0 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\r\n\r\n\t\t\t} else if ( col == 1 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\r\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_setViewport( cubeUVRenderTarget,\r\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\r\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\t\trenderer.render( scene, cubeCamera );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.toneMapping = toneMapping;\r\n\t\trenderer.outputEncoding = outputEncoding;\r\n\t\trenderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t},\r\n\r\n\t_textureToCubeUV: function ( texture, cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tif ( texture.isCubeTexture ) {\r\n\r\n\t\t\tif ( this._cubemapShader == null ) {\r\n\r\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( this._equirectShader == null ) {\r\n\r\n\t\t\t\tthis._equirectShader = _getEquirectShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\r\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\r\n\t\tconst uniforms = material.uniforms;\r\n\r\n\t\tuniforms[ 'envMap' ].value = texture;\r\n\r\n\t\tif ( ! texture.isCubeTexture ) {\r\n\r\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\r\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\r\n\r\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\r\n\r\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\trenderer.render( mesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_applyPMREM: function ( cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst autoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\r\n\r\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.autoClear = autoClear;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\r\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\r\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\r\n\t * the poles) to approximate the orthogonally-separable blur. It is least\r\n\t * accurate at the poles, but still does a decent job.\r\n\t */\r\n\t_blur: function ( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\r\n\r\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tlodIn,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'latitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tlodOut,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'longitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t},\r\n\r\n\t_halfBlur: function ( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst blurMaterial = this._blurMaterial;\r\n\r\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\r\n\r\n\t\t\tconsole.error(\r\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\r\n\r\n\t\t}\r\n\r\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\r\n\t\tconst STANDARD_DEVIATIONS = 3;\r\n\r\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\r\n\t\tconst blurUniforms = blurMaterial.uniforms;\r\n\r\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\r\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\r\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\r\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\r\n\r\n\t\tif ( samples > MAX_SAMPLES ) {\r\n\r\n\t\t\tconsole.warn( `sigmaRadians, ${\r\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\r\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\r\n\r\n\t\t}\r\n\r\n\t\tconst weights = [];\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\r\n\r\n\t\t\tconst x = i / sigmaPixels;\r\n\t\t\tconst weight = Math.exp( - x * x / 2 );\r\n\t\t\tweights.push( weight );\r\n\r\n\t\t\tif ( i == 0 ) {\r\n\r\n\t\t\t\tsum += weight;\r\n\r\n\t\t\t} else if ( i < samples ) {\r\n\r\n\t\t\t\tsum += 2 * weight;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\r\n\r\n\t\t\tweights[ i ] = weights[ i ] / sum;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\r\n\t\tblurUniforms[ 'samples' ].value = samples;\r\n\t\tblurUniforms[ 'weights' ].value = weights;\r\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\r\n\r\n\t\tif ( poleAxis ) {\r\n\r\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\r\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\r\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\r\n\t\tconst outputSize = _sizeLods[ lodOut ];\r\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\r\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\r\n\r\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\r\n\t\trenderer.setRenderTarget( targetOut );\r\n\t\trenderer.render( blurMesh, _flatCamera );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction _isLDR( texture ) {\r\n\r\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\r\n\r\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\r\n\r\n}\r\n\r\nfunction _createPlanes() {\r\n\r\n\tconst _lodPlanes = [];\r\n\tconst _sizeLods = [];\r\n\tconst _sigmas = [];\r\n\r\n\tlet lod = LOD_MAX;\r\n\r\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\tconst sizeLod = Math.pow( 2, lod );\r\n\t\t_sizeLods.push( sizeLod );\r\n\t\tlet sigma = 1.0 / sizeLod;\r\n\r\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\r\n\r\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\r\n\r\n\t\t} else if ( i == 0 ) {\r\n\r\n\t\t\tsigma = 0;\r\n\r\n\t\t}\r\n\r\n\t\t_sigmas.push( sigma );\r\n\r\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\r\n\t\tconst min = - texelSize / 2;\r\n\t\tconst max = 1 + texelSize / 2;\r\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\r\n\r\n\t\tconst cubeFaces = 6;\r\n\t\tconst vertices = 6;\r\n\t\tconst positionSize = 3;\r\n\t\tconst uvSize = 2;\r\n\t\tconst faceIndexSize = 1;\r\n\r\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\r\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\r\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\r\n\r\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\r\n\r\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\r\n\t\t\tconst y = face > 2 ? 0 : - 1;\r\n\t\t\tconst coordinates = [\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y + 1, 0\r\n\t\t\t];\r\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\r\n\t\t\tuv.set( uv1, uvSize * vertices * face );\r\n\t\t\tconst fill = [ face, face, face, face, face, face ];\r\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\r\n\r\n\t\t}\r\n\r\n\t\tconst planes = new BufferGeometry();\r\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\r\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\r\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\r\n\t\t_lodPlanes.push( planes );\r\n\r\n\t\tif ( lod > LOD_MIN ) {\r\n\r\n\t\t\tlod --;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { _lodPlanes, _sizeLods, _sigmas };\r\n\r\n}\r\n\r\nfunction _createRenderTarget( params ) {\r\n\r\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\r\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\r\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\r\n\tcubeUVRenderTarget.scissorTest = true;\r\n\treturn cubeUVRenderTarget;\r\n\r\n}\r\n\r\nfunction _setViewport( target, x, y, width, height ) {\r\n\r\n\ttarget.viewport.set( x, y, width, height );\r\n\ttarget.scissor.set( x, y, width, height );\r\n\r\n}\r\n\r\nfunction _getBlurShader( maxSamples ) {\r\n\r\n\tconst weights = new Float32Array( maxSamples );\r\n\tconst poleAxis = new Vector3( 0, 1, 0 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'SphericalGaussianBlur',\r\n\r\n\t\tdefines: { 'n': maxSamples },\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'samples': { value: 1 },\r\n\t\t\t'weights': { value: weights },\r\n\t\t\t'latitudinal': { value: false },\r\n\t\t\t'dTheta': { value: 0 },\r\n\t\t\t'mipInt': { value: 0 },\r\n\t\t\t'poleAxis': { value: poleAxis },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform int samples;\r\n\t\t\tuniform float weights[ n ];\r\n\t\t\tuniform bool latitudinal;\r\n\t\t\tuniform float dTheta;\r\n\t\t\tuniform float mipInt;\r\n\t\t\tuniform vec3 poleAxis;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\r\n\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\r\n\r\n\t\t\t\tfloat cosTheta = cos( theta );\r\n\t\t\t\t// Rodrigues' axis-angle rotation\r\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\r\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\r\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\r\n\r\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\r\n\r\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\r\n\r\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\taxis = normalize( axis );\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\r\n\r\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\r\n\r\n\t\t\t\t\tif ( i >= samples ) {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfloat theta = dTheta * float( i );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getEquirectShader() {\r\n\r\n\tconst texelSize = new Vector2( 1, 1 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'EquirectangularToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'texelSize': { value: texelSize },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform vec2 texelSize;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\r\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\r\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\r\n\r\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\r\n\t\t\t\tuv -= f * texelSize;\r\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x += texelSize.x;\r\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.y += texelSize.y;\r\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x -= texelSize.x;\r\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\r\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\r\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\r\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCubemapShader() {\r\n\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'CubemapToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform samplerCube envMap;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCommonVertexShader() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tprecision mediump float;\r\n\t\tprecision mediump int;\r\n\r\n\t\tattribute vec3 position;\r\n\t\tattribute vec2 uv;\r\n\t\tattribute float faceIndex;\r\n\r\n\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t// RH coordinate system; PMREM face-indexing convention\r\n\t\tvec3 getDirection( vec2 uv, float face ) {\r\n\r\n\t\t\tuv = 2.0 * uv - 1.0;\r\n\r\n\t\t\tvec3 direction = vec3( uv, 1.0 );\r\n\r\n\t\t\tif ( face == 0.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\r\n\r\n\t\t\t} else if ( face == 1.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\r\n\r\n\t\t\t} else if ( face == 2.0 ) {\r\n\r\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\r\n\r\n\t\t\t} else if ( face == 3.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\r\n\r\n\t\t\t} else if ( face == 4.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\r\n\r\n\t\t\t} else if ( face == 5.0 ) {\r\n\r\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn direction;\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\r\n\t\t\tgl_Position = vec4( position, 1.0 );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction _getEncodings() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tuniform int inputEncoding;\r\n\t\tuniform int outputEncoding;\r\n\r\n\t\t#include <encodings_pars_fragment>\r\n\r\n\t\tvec4 inputTexelToLinear( vec4 value ) {\r\n\r\n\t\t\tif ( inputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( inputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn sRGBToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn RGBEToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn GammaToLinear( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 linearToOutputTexel( vec4 value ) {\r\n\r\n\t\t\tif ( outputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( outputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn LinearTosRGB( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn LinearToRGBE( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn LinearToGamma( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\r\n\r\n\t\t\treturn inputTexelToLinear( color );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction Face4( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new Face3( a, b, c, normal, color, materialIndex );\r\n\r\n}\r\n\r\nconst LineStrip = 0;\r\nconst LinePieces = 1;\r\nconst NoColors = 0;\r\nconst FaceColors = 1;\r\nconst VertexColors = 2;\r\n\r\nfunction MeshFaceMaterial( materials ) {\r\n\r\n\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction MultiMaterial( materials ) {\r\n\r\n\tif ( materials === undefined ) materials = [];\r\n\r\n\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\r\n\tmaterials.isMultiMaterial = true;\r\n\tmaterials.materials = materials;\r\n\tmaterials.clone = function () {\r\n\r\n\t\treturn materials.slice();\r\n\r\n\t};\r\n\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction PointCloud( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction Particle( material ) {\r\n\r\n\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\r\n\treturn new Sprite( material );\r\n\r\n}\r\n\r\nfunction ParticleSystem( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction PointCloudMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleBasicMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleSystemMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction Vertex( x, y, z ) {\r\n\r\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\treturn new Vector3( x, y, z );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction DynamicBufferAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.' );\r\n\treturn new BufferAttribute( array, itemSize ).setUsage( DynamicDrawUsage );\r\n\r\n}\r\n\r\nfunction Int8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\r\n\treturn new Int8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\r\n\treturn new Uint8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8ClampedAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\r\n\treturn new Uint8ClampedBufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\r\n\treturn new Int16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\r\n\treturn new Uint16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\r\n\treturn new Int32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\r\n\treturn new Uint32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\r\n\treturn new Float32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float64Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\r\n\treturn new Float64BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\n//\r\n\r\nCurve.create = function ( construct, getPoint ) {\r\n\r\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\r\n\r\n\tconstruct.prototype = Object.create( Curve.prototype );\r\n\tconstruct.prototype.constructor = construct;\r\n\tconstruct.prototype.getPoint = getPoint;\r\n\r\n\treturn construct;\r\n\r\n};\r\n\r\n//\r\n\r\nObject.assign( CurvePath.prototype, {\r\n\r\n\tcreatePointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from path points (for Line or Points objects)\r\n\r\n\t\tconst pts = this.getPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateSpacedPointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from equidistant sampling along the path\r\n\r\n\t\tconst pts = this.getSpacedPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateGeometry: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\tconst geometry = new Geometry();\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Path.prototype, {\r\n\r\n\tfromPoints: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\r\n\t\treturn this.setFromPoints( points );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction ClosedSplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n}\r\n\r\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction SplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction Spline( points ) {\r\n\r\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\nObject.assign( Spline.prototype, {\r\n\r\n\tinitFromArray: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\r\n\r\n\t},\r\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\r\n\r\n\t},\r\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction AxisHelper( size ) {\r\n\r\n\tconsole.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\r\n\treturn new AxesHelper( size );\r\n\r\n}\r\n\r\nfunction BoundingBoxHelper( object, color ) {\r\n\r\n\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\r\n\treturn new BoxHelper( object, color );\r\n\r\n}\r\n\r\nfunction EdgesHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\r\n\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\nGridHelper.prototype.setColors = function () {\r\n\r\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n};\r\n\r\nSkeletonHelper.prototype.update = function () {\r\n\r\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\r\n\r\n};\r\n\r\nfunction WireframeHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\r\n\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\r\n\t\treturn LoaderUtils.extractUrlBase( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nLoader.Handlers = {\r\n\r\n\tadd: function ( /* regex, loader */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\r\n\r\n\t},\r\n\r\n\tget: function ( /* file */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction XHRLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\r\n\treturn new FileLoader( manager );\r\n\r\n}\r\n\r\nfunction BinaryTextureLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\r\n\treturn new DataTextureLoader( manager );\r\n\r\n}\r\n\r\nObject.assign( ObjectLoader.prototype, {\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().' );\r\n\t\treturn this.setResourcePath( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\r\n} );\r\n\r\nFrustum.prototype.setFromMatrix = function ( m ) {\r\n\r\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\r\n\treturn this.setFromProjectionMatrix( m );\r\n\r\n};\r\n\r\nLine3.prototype.center = function ( optionalTarget ) {\r\n\r\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\r\n\treturn this.getCenter( optionalTarget );\r\n\r\n};\r\n\r\nObject.assign( MathUtils, {\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\r\n\t\treturn MathUtils.floorPowerOfTwo( value );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\r\n\t\treturn MathUtils.ceilPowerOfTwo( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix3( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tgetPosition: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\r\n\r\n\t},\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\tmultiplyToArray: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\ttranslate: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\trotateX: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\trotateY: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\trotateZ: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\trotateByAxis: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix4( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\r\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nPlane.prototype.isIntersectionLine = function ( line ) {\r\n\r\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\treturn this.intersectsLine( line );\r\n\r\n};\r\n\r\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\r\n\r\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\treturn vector.applyQuaternion( this );\r\n\r\n};\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\treturn this.intersectsPlane( plane );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tarea: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\r\n\t\treturn this.getArea();\r\n\r\n\t},\r\n\tbarycoordFromPoint: function ( point, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn this.getBarycoord( point, target );\r\n\r\n\t},\r\n\tmidpoint: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\r\n\t\treturn this.getMidpoint( target );\r\n\r\n\t},\r\n\tnormal: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn this.getNormal( target );\r\n\r\n\t},\r\n\tplane: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\r\n\t\treturn this.getPlane( target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\r\n\r\n\t},\r\n\tnormal: function ( a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn Triangle.getNormal( a, b, c, target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Shape.prototype, {\r\n\r\n\textractAllPoints: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\r\n\t\treturn this.extractPoints( divisions );\r\n\r\n\t},\r\n\textrude: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\r\n\t\treturn new ExtrudeGeometry( this, options );\r\n\r\n\t},\r\n\tmakeGeometry: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\r\n\t\treturn new ShapeGeometry( this, options );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tsetEulerFromRotationMatrix: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\tsetEulerFromQuaternion: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\treturn this.setFromMatrixScale( m );\r\n\r\n\t},\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\treturn this.setFromMatrixColumn( matrix, index );\r\n\r\n\t},\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\r\n\t\treturn this.applyMatrix4( m );\r\n\r\n\t},\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Geometry.prototype, {\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Object3D.prototype, {\r\n\r\n\tgetChildByName: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\r\n\t},\r\n\trenderDepth: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n\t},\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Object3D.prototype, {\r\n\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Mesh.prototype, {\r\n\r\n\tsetDrawMode: function () {\r\n\r\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( Mesh.prototype, {\r\n\r\n\tdrawMode: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\r\n\t\t\treturn TrianglesDrawMode;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( LOD.prototype, {\r\n\r\n\tobjects: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\treturn this.levels;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t},\r\n\tset: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nSkinnedMesh.prototype.initBones = function () {\r\n\r\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\r\n\r\n};\r\n\r\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\treturn this.arcLengthDivisions;\r\n\r\n\t},\r\n\tset: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\tthis.arcLengthDivisions = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n\tthis.setFocalLength( focalLength );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( BufferAttribute.prototype, {\r\n\r\n\tlength: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\r\n\t\t\treturn this.array.length;\r\n\r\n\t\t}\r\n\t},\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( DynamicDrawUsage );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tcopyIndicesArray: function ( /* indices */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( BufferGeometry.prototype, {\r\n\r\n\taddIndex: function ( index ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\r\n\t},\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\r\n\r\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.setAttribute( name, attribute );\r\n\r\n\t},\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tif ( indexOffset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\r\n\t},\r\n\tclearDrawCalls: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\r\n\t},\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeOffsets: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\r\n\t},\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\r\n\r\n\t\treturn this.deleteAttribute( name );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( BufferGeometry.prototype, {\r\n\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InstancedBufferGeometry.prototype, {\r\n\r\n\tmaxInstancedCount: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\treturn this.instanceCount;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\tthis.instanceCount = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Raycaster.prototype, {\r\n\r\n\tlinePrecision: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\treturn this.params.Line.threshold;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\tthis.params.Line.threshold = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InterleavedBuffer.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( value );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( ExtrudeBufferGeometry.prototype, {\r\n\r\n\tgetArrays: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShapeList: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShape: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Uniform.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tonUpdate: {\r\n\t\tvalue: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Material.prototype, {\r\n\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\toverdraw: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\r\n\t\t\treturn new Color();\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tshading: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\tthis.flatShading = ( value === FlatShading );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tstencilMask: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\treturn this.stencilFuncMask;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\tthis.stencilFuncMask = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhongMaterial.prototype, {\r\n\r\n\tmetal: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\r\n\r\n\ttransparency: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\treturn this.transmission;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\tthis.transmission = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( ShaderMaterial.prototype, {\r\n\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( WebGLRenderer.prototype, {\r\n\r\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t},\r\n\tanimate: function ( callback ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\r\n\t\tthis.setAnimationLoop( callback );\r\n\r\n\t},\r\n\tgetCurrentRenderTarget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\r\n\t\treturn this.getRenderTarget();\r\n\r\n\t},\r\n\tgetMaxAnisotropy: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\r\n\t\treturn this.capabilities.getMaxAnisotropy();\r\n\r\n\t},\r\n\tgetPrecision: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\r\n\t\treturn this.capabilities.precision;\r\n\r\n\t},\r\n\tresetGLState: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\r\n\t\treturn this.state.reset();\r\n\r\n\t},\r\n\tsupportsFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\r\n\t},\r\n\tsupportsHalfFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\r\n\t},\r\n\tsupportsStandardDerivatives: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t},\r\n\tsupportsCompressedTextureS3TC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t},\r\n\tsupportsBlendMinMax: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t},\r\n\tsupportsVertexTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\r\n\t\treturn this.capabilities.vertexTextures;\r\n\r\n\t},\r\n\tsupportsInstancedArrays: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t},\r\n\tenableScissorTest: function ( boolean ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\tthis.setScissorTest( boolean );\r\n\r\n\t},\r\n\tinitMaterial: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t},\r\n\taddPrePlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t},\r\n\taddPostPlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t},\r\n\tupdateShadowMap: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t},\r\n\tsetFaceCulling: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\r\n\r\n\t},\r\n\tallocTextureUnit: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture2D: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\r\n\r\n\t},\r\n\tsetTextureCube: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\r\n\r\n\t},\r\n\tgetActiveMipMapLevel: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\r\n\t\treturn this.getActiveMipmapLevel();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLRenderer.prototype, {\r\n\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.enabled;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tcontext: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\r\n\t\t\treturn this.getContext();\r\n\r\n\t\t}\r\n\t},\r\n\tvr: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\r\n\t\t\treturn this.xr;\r\n\r\n\t\t}\r\n\t},\r\n\tgammaInput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tgammaOutput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\r\n\r\n\t\t}\r\n\t},\r\n\ttoneMappingWhitePoint: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\t\t\treturn 1.0;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLShadowMap.prototype, {\r\n\r\n\tcullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* cullFace */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderReverseSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderSingleSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLRenderTargetCube( width, height, options ) {\r\n\r\n\tconsole.warn( 'THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).' );\r\n\treturn new WebGLCubeRenderTarget( width, options );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.defineProperties( WebGLRenderTarget.prototype, {\r\n\r\n\twrapS: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Audio.prototype, {\r\n\r\n\tload: {\r\n\t\tvalue: function ( file ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\r\n\t\t\tconst scope = this;\r\n\t\t\tconst audioLoader = new AudioLoader();\r\n\t\t\taudioLoader.load( file, function ( buffer ) {\r\n\r\n\t\t\t\tscope.setBuffer( buffer );\r\n\r\n\t\t\t} );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t},\r\n\tstartTime: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nAudioAnalyser.prototype.getData = function () {\r\n\r\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n\treturn this.getFrequencyData();\r\n\r\n};\r\n\r\n//\r\n\r\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\r\n\treturn this.update( renderer, scene );\r\n\r\n};\r\n\r\n//\r\n\r\nconst GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\t\tlet matrix;\r\n\r\n\t\tif ( geometry2.isMesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nImageUtils.crossOrigin = undefined;\r\n\r\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\tconst loader = new TextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\tconst loader = new CubeTextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTexture = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTextureCube = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction CanvasRenderer() {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been removed' );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction JSONLoader() {\r\n\r\n\tconsole.error( 'THREE.JSONLoader has been removed.' );\r\n\r\n}\r\n\r\n//\r\n\r\nconst SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tdetach: function ( /* child, parent, scene */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tattach: function ( /* child, scene, parent */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nfunction LensFlare() {\r\n\r\n\tconsole.error( 'THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js' );\r\n\r\n}\r\n\r\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t/* eslint-disable no-undef */\r\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\r\n\t\trevision: REVISION,\r\n\t} } ) );\r\n\t/* eslint-enable no-undef */\r\n\r\n}\r\n\r\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, AxisHelper, BackSide, BasicDepthPacking, BasicShadowMap, BinaryTextureLoader, Bone, BooleanKeyframeTrack, BoundingBoxHelper, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasRenderer, CanvasTexture, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, ClosedSplineCurve3, Color, ColorKeyframeTrack, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, BoxGeometry as CubeGeometry, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubeUVRefractionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DirectionalLightShadow, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicBufferAttribute, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EdgesHelper, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, Face3, Face4, FaceColors, FileLoader, FlatShading, Float32Attribute, Float32BufferAttribute, Float64Attribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FrontSide, Frustum, GammaEncoding, Geometry, GeometryUtils, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16Attribute, Int16BufferAttribute, Int32Attribute, Int32BufferAttribute, Int8Attribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, JSONLoader, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LensFlare, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, LightShadow, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LinePieces, LineSegments, LineStrip, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LogLuvEncoding, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils as Math, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshFaceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiMaterial, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColors, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricBufferGeometry, ParametricGeometry, Particle, ParticleBasicMaterial, ParticleSystem, ParticleSystemMaterial, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointCloud, PointCloudMaterial, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBDEncoding, RGBEEncoding, RGBEFormat, RGBFormat, RGBIntegerFormat, RGBM16Encoding, RGBM7Encoding, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, Scene, SceneUtils, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, Spline, SplineCurve, SplineCurve3, SpotLight, SpotLightHelper, SpotLightShadow, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, TextBufferGeometry, TextGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16Attribute, Uint16BufferAttribute, Uint32Attribute, Uint32BufferAttribute, Uint8Attribute, Uint8BufferAttribute, Uint8ClampedAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, Vertex, VertexColors, VideoTexture, WebGL1Renderer, WebGLCubeRenderTarget, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderTargetCube, WebGLRenderer, WebGLUtils, WireframeGeometry, WireframeHelper, WrapAroundEnding, XHRLoader, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, sRGBEncoding };\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}