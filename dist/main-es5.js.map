{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.ts","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.html","webpack:///src/app/admin/admin-ratings/admin-ratings.component.ts","webpack:///src/app/admin/admin-ratings/admin-ratings.component.html","webpack:///src/app/admin/admin-user/admin-user.component.ts","webpack:///src/app/admin/admin-user/admin-user.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.html","webpack:///src/app/dialogs/email-pass/email-pass.component.ts","webpack:///src/app/dialogs/email-pass/email-pass.component.html","webpack:///src/app/dialogs/hint/hint.component.ts","webpack:///src/app/dialogs/hint/hint.component.html","webpack:///src/app/dialogs/login-dialog/login-dialog.component.ts","webpack:///src/app/dialogs/login-dialog/login-dialog.component.html","webpack:///src/app/dialogs/menu/menu.component.ts","webpack:///src/app/dialogs/menu/menu.component.html","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.ts","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.html","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.ts","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.html","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.html","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.ts","webpack:///src/app/dialogs/successful-solve/successful-solve.component.ts","webpack:///src/app/dialogs/successful-solve/successful-solve.component.html","webpack:///src/app/navbar/navbar.component.ts","webpack:///src/app/navbar/navbar.component.html","webpack:///src/app/pages/about/about.component.ts","webpack:///src/app/pages/about/about.component.html","webpack:///src/app/pages/aicreate/aicreate.component.ts","webpack:///src/app/pages/aicreate/aicreate.component.html","webpack:///src/app/pages/challenges/challenges.component.ts","webpack:///src/app/pages/challenges/challenges.component.html","webpack:///src/app/pages/create/create.component.ts","webpack:///src/app/pages/create/create.component.html","webpack:///src/app/pages/footer/footer.component.ts","webpack:///src/app/pages/footer/footer.component.html","webpack:///src/app/pages/index/index.component.ts","webpack:///src/app/pages/index/index.component.html","webpack:///src/app/pages/leaderboard/leaderboard.component.ts","webpack:///src/app/pages/leaderboard/leaderboard.component.html","webpack:///src/app/pages/leaderboard/leaderboardArr.ts","webpack:///src/app/pages/login/login.component.ts","webpack:///src/app/pages/login/login.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.html","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.ts","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.html","webpack:///src/app/pages/profile/profile.component.ts","webpack:///src/app/pages/profile/profile.component.html","webpack:///src/app/pages/ratings/RatingsArr.ts","webpack:///src/app/pages/ratings/puzzleArr.ts","webpack:///src/app/pages/ratings/ratings.component.ts","webpack:///src/app/pages/ratings/ratings.component.html","webpack:///src/app/pages/reset-password/reset-password.component.ts","webpack:///src/app/pages/reset-password/reset-password.component.html","webpack:///src/app/pages/reset-success/reset-success.component.ts","webpack:///src/app/pages/reset-success/reset-success.component.html","webpack:///src/app/pages/signup/signup.component.ts","webpack:///src/app/pages/signup/signup.component.html","webpack:///src/app/rate-dialog/rate-dialog.component.ts","webpack:///src/app/rate-dialog/rate-dialog.component.html","webpack:///src/app/services/api.service.ts","webpack:///src/assets/js/FileSaver.js","webpack:///src/assets/js/OrbitControls.js","webpack:///src/assets/js/aiCreation.js","webpack:///src/assets/js/downloadPuzzle.js","webpack:///src/assets/js/generate3D.js","webpack:///src/assets/js/jszip.min.js","webpack:///src/assets/js/manualCreation.js","webpack:///src/assets/js/solvePuzzle.js","webpack:///src/assets/js/three.module.js","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AdminPuzzlesComponent","api","router","ratings","puzzles","pageSize","startIndex","endIndex","pageSizeOptions","event","pageIndex","totalNumberOfPuzzles","slice","filterValue","datasource","filterPredicate","data","filter","name","toLowerCase","includes","creator","trim","filteredData","length","sort","a","b","sortedBy","paramA","paramB","Date","created","getTime","rating","i","puzzleObj","description","createdAt","image","shared","j","total","k","puzzleID","push","puzzleAscending","dataAvailable","show","populatePuz","getAllPuzzleRatings","subscribe","ratingObj","error","console","log","getPuzzles","getAllPuzzlesAdmin","Object","deletePuzzleAdmin","alert","location","reload","localStorage","getItem","navigate","populate","applyFilter","selector","templateUrl","styleUrls","AdminRatingsComponent","getAllRatingsAdmin","ratingList","testPuzzle","testUser","rateID","deleteRatingAdmin","getPuzzleRatings","AdminUserComponent","totalNumberOfUsers","userList","username","getAllUsers","user","deleteUser","getUsers","routes","path","component","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","title","AppModule","declarations","entryComponents","providers","bootstrap","CreateDialogComponent","dialog","clicked","EmailPassComponent","formBuilder","dialogRef","error_messages","type","message","form","input","email","close","group","required","submit","HintComponent","solveDialog","open","disableClose","hasBackdrop","pageValue","easy","med","hard","LoginDialogComponent","MenuComponent","ProfilePuzzlesDialogComponent","fromPage","ProfileUpdateDialogComponent","SolveDialogComponent","showHintButton","showMe","display","expertMode","ms","setTimeout","getAllPuzzleByID","parseInt","hintImage","delay","stop","token","setItem","numHints","SuccessfulSolveComponent","NavbarComponent","removeItem","admin","logout","AboutComponent","AICreateComponent","createDialog","loginDialog","success","ChallengesComponent","date","day","getDay","datee","getDate","month","getMonth","year","getFullYear","months","actualMonth","solveHints","timeDur","getChallenges","timeDif","timeDifficulty","timeID","timeImage","timeName","xppoints","solveDif","solveDifficulty","solveID","solveImage","solveName","openSolveDialog","openSolveDialogTime","CreateComponent","FooterComponent","IndexComponent","LeaderboardComponent","cdref","displayedColumns","countPuzzles","target","value","dataSource","paginator","firstPage","data3","leaderboardObj","memberSince","currentUser","getPuzzlesByUser","data2","nrPuzzles","l","avgRating","x","retrieveAllSolveAttempts","data4","solved","populateTable","LeaderboardArr","LoginComponent","fieldTextType","formError","verifyUser","password","loginUser","status","emailDialogRef","afterClosed","result","entry","requestPasswordChange","loginForm","minLength","toggleFieldTextType","sendMail","ProfilePuzzlesComponent","temp","setPageSizeOptionsInput","userPuzzleList","text","nameAscending","puzzle","sharePuzzle","profileDialog","deletePuzzle","stopSharingPuzzle","levelDialog","getUserPuzzles","ProfileRatingsComponent","split","map","str","userRatingsList","puzzleName","getPuzzleRatingsByUser","ratePID","rateDialogRef","ratingEntry","createNewPuzzleRating","rateP","checkData","openRateDialog","deleteVal","findRatingID","deleteRating","getUserPuzzleRatings","ProfileSolvedPuzzlesComponent","dateCreated","ProfileComponent","nameTextboxValue","undefined","updateName","currentUserObject","updatePorfileDialog","currPlayerXP","playerLevel","object","updateLevel","playerXP","usernameTextboxValue","updateUsername","getUser","updateNameForm","pattern","updateUsernameForm","checkLevel","RatingsArr","PuzzleArr","RatingsComponent","cdr","getAllPuzzles","searchValue","getSearchedPuzzles","dataObjectSize","showRating","ratingSavedDialog","ResetPasswordComponent","fieldTextType2","resetDone","doPasswordsMatch","resetPasswordForm","controls","resetPassword","confirmPassword","firstPassword","secondPassword","toggleFieldTextType2","ResetSuccessComponent","route","snapshot","paramMap","get","SignupComponent","createUser","signUpForm","newUser","createNewUser","RateDialogComponent","APIService","http","httpOptions","headers","post","put","term","providedIn","saveAs","navigator","msSaveOrOpenBlob","bind","view","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","externalHost","click","node","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","force_saveable_type","fs_min_size","deletion_queue","process_deletion_queue","file","revokeObjectURL","remove","dispatch","filesaver","event_types","concat","listener","call","FileSaver","blob","blob_changed","object_url","target_view","get_object_url","createObjectURL","dispatch_all","fs_error","href","window","readyState","DONE","abortable","func","apply","arguments","create_if_not_found","create","exclusive","INIT","download","chrome","webkitSlice","size","TEMPORARY","fs","root","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","prototype","onwritestart","onprogress","onwrite","onabort","addEventListener","unload","removeEventListener","self","content","OrbitControls","domElement","warn","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","focus","mouseAction","button","ctrlKey","metaKey","shiftKey","stopPropagation","DOLLY_ROTATE","tabIndex","constructor","MapControls","Chromosome","sites","fitness","Site","surfaceArea","generatePuzzleAIButton","nextPuzzleButton","previousPuzzleButton","progressBar","generatedPuzzles","renderedPuzzleIndex","tempWidth","tempHeight","totalSurfaceArea","generationSize","tournamentSize","maximumIterations","seedString","sliders","labels","numberOfSites","desiredProportions","groupDistribution","copyObject","obj","JSON","parse","stringify","xmur3","h","imul","charCodeAt","mulberry32","t","seed","rand","random","floor","expandPuzzle","factor","tempSites","initializeDataAI","getElementById","generatePuzzleAI","style","displaySlidersCard","newGeneration","run","index","renderPuzzle","numberOfPiecesInGroup","generateSliders","appendChild","proportion","counter","innerHTML","lastGeneration","expandedSites","piecesJSONObject","numberOfSliders","inputContainer","defaultValue","slider","createElement","previousValue","sliderid","step","difference","distributedValue","toFixed","leftover","tempValue","parseFloat","headerLabel","valueLabel","br","currentGeneration","nextGeneration","parentX","parentY","children","initializeGeneration","generation","getFittest","runTournament","crossover","mutate","calculateAndSetFitness","fittestChromosome","chromosome","selectedSite","movementDirection","chromosomeX","chromosomeY","swapIndex","childX","childY","tempSite","chosenChromosome","newChromosome","siteIndex","determineAndSetSiteBoundaries","sortSites","siteA","siteB","row","col","distances","equidistantPoints","getPuzzleDataURL","pieces","base64Image","desiredFile","downloadPuzzle3D","getPuzzleData","downloadPuzzle2D","url","$","ajax","puzzleObject","generateSTLFiles","generateImageFile","zip","imgFolder","folder","tileFolder","cuboidFolder","createTilePrintableFiles","depths","getDepth","createCuboidPrintableFiles","base64","generateAsync","depthsArray","currentPiece","topRight","topLeft","bottomRight","bottomLeft","nextTopRight","nextTopLeft","nextBottomRight","nextBottomLeft","stlFileFrontFace","stlFileBackFace","pieceIndex","vertexIndex","z","addVertexToFile","zPositionBottom","zPositionTop","optionalSuffix","stlFile","vertexA","vertexB","vertexC","nth","scene","camera","renderer","line","points","pieceGeometry","pieceGeometryArray","piece","tile","initiate3DCanvas","height","width","background","antialias","setSize","render3D","jsonData","appendedString","extractPoints","pieceMeshArray","generateAndColorMeshes","colors","addMeshesToScene","animate","render2D","meshArray","mesh","frustumCulled","tempPieceMeshArray","material","numberOfPiecesPerFace","colorCounter","color","tempPieceGeometryArray","buildSquare","vertices","buildTriangle","point1","point2","point3","faces","requestAnimationFrame","render","s","o","u","r","require","n","c","d","p","encode","f","getTypeOf","charAt","join","decode","substr","replace","uint8array","Uint8Array","Array","indexOf","compressedSize","uncompressedSize","crc32","compression","compressedContent","getContentWorker","pipe","uncompressWorker","on","streamInfo","data_length","getCompressedWorker","withStreamInfo","createWorkerFrom","compressWorker","STORE","magic","DEFLATE","binary","createFolders","compressionOptions","comment","unixPermissions","dosPermissions","lie","Uint16Array","Uint32Array","_pako","_pakoAction","_pakoOptions","meta","inherits","processChunk","_createPako","transformTo","flush","cleanUp","raw","level","onData","pako","A","String","fromCharCode","O","utf8encode","I","m","_","g","w","S","C","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCFullYear","getUTCMonth","getUTCDate","B","E","fileRecord","R","LOCAL_FILE_HEADER","dirRecord","CENTRAL_FILE_HEADER","bytesWritten","zipComment","zipPlatform","encodeFileName","streamFiles","accumulate","contentBuffer","dirRecords","currentSourceOffset","entriesCount","currentFile","_sources","percent","openedSource","closedSource","DATA_DESCRIPTOR","shift","CENTRAL_DIRECTORY_END","prepareNextSource","previous","isPaused","pause","resume","registerPrevious","end","generatedError","lock","generateWorker","platform","options","_compressWorker","files","loadAsync","support","defaults","version","external","decompressed","extend","checkCRC32","optimizedBinaryString","decodeFileName","utf8decode","isNode","isStream","reject","prepareContent","load","all","fileNameStr","fileCommentStr","_upstreamEnded","_bindStream","_stream","Readable","_helper","emit","_read","Buffer","newBufferFrom","from","allocBuffer","alloc","fill","isBuffer","toUpperCase","substring","lastIndexOf","toString","hasOwnProperty","generate","generateInternalStream","mimeType","checkSupport","generateNodeStream","toNodejsStream","stream","byteAt","zero","lastIndexOfSignature","readAndCheckSignature","readData","checkOffset","checkIndex","setIndex","skip","readInt","readString","readDate","UTC","subarray","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","destType","propName","dataIsReady","_tickScheduled","_tickAndRepeat","isFinished","_tick","extraStreamInfo","isLocked","_listeners","mergeStreamInfo","nodestream","_internalType","_outputType","_mimeType","newBlob","_worker","objectMode","array","string","arraybuffer","ArrayBuffer","nodebuffer","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","leftOver","applyFromCharCode","Utf8DecodeWorker","Utf8EncodeWorker","stringifyByChunk","stringifyByChar","applyCanBeUsed","buffer","byteLength","MAX_VALUE_16BITS","MAX_VALUE_32BITS","pretty","FileReader","onload","readAsArrayBuffer","loadOptions","checkSignature","reader","isSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","localHeaderOffset","readLocalPart","handleUTF8","processAttributes","readCentralDir","zip64","readCentralPart","readEndOfCentral","abs","prepareReader","isEncrypted","bitFlag","useUTF8","fileNameLength","fileName","compressionMethod","versionMadeBy","extraFieldsLength","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","readExtraFields","parseZIP64ExtraField","fileComment","extraFields","findExtraFieldUnicodePath","findExtraFieldUnicodeComment","_data","_dataBinary","internalStream","_decompressWorker","async","nodeStream","MutationObserver","WebKitMutationObserver","createTextNode","observe","characterData","MessageChannel","onreadystatechange","parentNode","removeChild","documentElement","port1","onmessage","port2","postMessage","global","TypeError","queue","outcome","promise","onFulfilled","callFulfilled","otherCallFulfilled","onRejected","callRejected","otherCallRejected","race","immediate","assign","method","chunkSize","windowBits","memLevel","strategy","to","gzip","err","msg","ended","chunks","strm","avail_out","deflateInit2","header","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","output","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","inflateInit2","Z_OK","inflateGetHeader","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","inflateSetDictionary","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","Int32Array","setTyped","Buf16","Buf32","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","T","D","F","pending","pending_buf","pending_out","total_out","N","_tr_flush_block","block_start","strstart","U","P","L","max_chain_length","prev_length","nice_match","w_size","w_mask","prev","good_match","lookahead","match_start","window_size","hash_size","head","wrap","adler","total_in","insert","ins_h","hash_shift","hash_mask","Z","match_length","_tr_tally","max_lazy_match","last_lit","W","prev_match","match_available","M","good_length","max_lazy","nice_length","max_chain","H","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","G","data_type","_tr_init","K","Y","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","time","os","_tr_align","_tr_stored_block","deflateInfo","xflags","extra_len","done","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","mode","sane","last","havedict","flags","check","wbits","ncode","nlen","ndist","have","next","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","V","q","J","splice","apiURL","distanceMetric","canvas","canvasCoords","stage","layer","pointsArray","siteBoundaries","colorPalettes","selectedPalette","currentRenderMode","hoverOverPoint","disableEditMode","deletePointButtonClicked","editIcon","deleteIcon","defaultPalette","addColorPalette","shadesOfRedPalette","shadesOfGreenPalette","shadesOfBluePalette","arrayOfColors","paletteName","changePuzzleColorPalette","removeChildren","attrs","stroke","draw","randomizePuzzleColorPalette","rgbColor","getRandomColorsArray","randomColorArray","getRandomRGB","initializeData","Stage","container","Layer","getBoundingClientRect","point","createPoint","generatePuzzle","setDistanceMetric","savePuzzle","palettes","getElementsByClassName","paletteIndex","getAttribute","puzzleDescription","puzzleImage","toDataURL","pixelRatio","contentType","dataType","getCurrentRenderMode","metric","setDisableEditMode","bool","setSites","clearBoard","destroyChildren","Ring","innerRadius","outerRadius","strokeWidth","draggable","onmousemove","body","cursor","destroy","getChildren","getClassName","generateSiteBoundaries","createPieces","trimmedPoints","trimPoints","Line","paintBrushColor","pointArray","lastPointCol","firstPointCol","currentRow","crissCross","calculateDistancesFromSitesToPoint","equidistantPointsPresent","returnArray","minimumDistance","xOfPoint","yOfPoint","sitePoints","calculateDistance","point1X","point1Y","point2X","point2Y","calculateEuclideanDistance","calculateManhattanDistance","resultX","resultY","saveSolveAttemptURL","correctPositions","pieceInCorrectPosition","correctOrientation","outline","board","startTime","puzzleSolved","selectedDifficulty","rotationEnabled","solvedDiv","initializeDataSolve","Rect","saveSolveAttempt","getPieceInCorrectPositionArray","solvePuzzleID","solveStartTime","timeTaken","performance","now","gainedExp","attemptDuration","xp","generatePieces","generalTransformer","Transformer","centeredScaling","rotationSnaps","rotationSnapTolerance","resizeEnabled","borderEnabled","anchorStroke","anchorFill","rotateAnchorOffset","selectedPiece","offsetX","getRandomOffsetX","offsetY","getRandomOffset","getMin","minY","Group","hitBox","perfectDrawEnabled","moveToTop","nodes","attributes","_getNodeRect","shape","rotateAroundCenter","rotation","_fitNodesInto","checkPositionAndSnapIntoPlace","getRandomRotation","hitBoxCoordinates","absolutePosition","checkPosition","snapPieceIntoPlace","checkIfPuzzleSolved","choice","getMax","coordinate","lowerBound","upperBound","returnValue","pixelArray","minX","maxX","coords1","coords2","xDifference","yDifference","span","onclick","currentCoords","targetCoords","rotateAroundPoint","angleRad","cos","sin","__assign","deltaRad","center","getCenter","Number","EPSILON","isInteger","sign","Function","defineProperty","match","source","nextKey","REVISION","MOUSE","TOUCH","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","EventDispatcher","listeners","hasEventListener","listenerArray","_lut","_seed","MathUtils","DEG2RAD","RAD2DEG","generateUUID","d0","d1","d2","d3","uuid","clamp","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","defineProperties","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","addVectors","addScalar","subScalar","multiply","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","cross","lengthSq","manhattanLength","normalize","atan2","distanceTo","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","getInverse","throwOnDegenerate","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","sx","sy","cx","cy","rotate","translate","_canvas","ImageUtils","getDataURL","src","HTMLCanvasElement","context","getContext","ImageData","putImageData","drawImage","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","isTexture","updateMatrix","toJSON","isRootObject","textures","metadata","generator","images","isArray","transformUv","uv","Vector4","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","WebGLMultisampleRenderTarget","samples","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","len","tDir","multiplyQuaternionsFlat","_onChangeCallback","isQuaternion","setFromEuler","euler","isEuler","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","vFrom","vTo","angleTo","rotateTowards","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","_vector","Vector3","_quaternion","isVector3","multiplyVectors","applyEuler","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","dz","setFromSphericalCoords","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sz","_v1","_m1","Matrix4","_zero","_one","isMatrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","eye","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","x2","y2","z2","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","near","far","makeOrthographic","_matrix","_quaternion$1","Euler","DefaultOrder","_order","RotationOrders","asin","setFromQuaternion","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_v1$1","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","configurable","enumerable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","isLight","attach","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","isInstancedMesh","count","instanceMatrix","serialize","library","isMesh","isLine","isPoints","geometry","parameters","uuids","extractFromCache","cache","values","key","recursive","Scene","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_points","_vector$1","_box","Box3","_v0","_v1$2","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","isBox3","setFromArray","minZ","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","expandByObject","box","isEmpty","getSize","expandByVector","expandByScalar","boundingBox","computeBoundingBox","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","axes","satForAxes","distanceToPoint","clampedPoint","getBoundingSphere","intersect","v0","extents","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","delta","start","intersectsLine","startSign","endSign","coplanarPoint","optionalNormalMatrix","referencePoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getUV","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","Color","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","hex","setHSL","handleAlpha","exec","components","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","lightMapIntensity","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","usage","updateRange","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","computeGroups","face","fromGeometry","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","arrayMax","_bufferGeometryId","_m1$2","_obj","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","tangent","computeBoundingSphere","positions","lineDistances","isGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","raycaster","intersects","intersection","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","checkIntersection","uvs_f","morphInfluences","influence","isSkinnedMesh","boneTransform","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","kl","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","uvs1","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","srcVertexNormal","destVertexNormal","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","uniform","Camera","PerspectiveCamera","aspect","filmGauge","filmOffset","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","clearViewOffset","skew","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","currentXrEnabled","xr","currentRenderTarget","getRenderTarget","setRenderTarget","clear","stencil","WebGLCubeRenderTarget","dummy","fromEquirectangularTexture","shader","tEquirect","DataTexture","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","UniformsLib","common","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","frame","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","isInterleavedBufferAttribute","deleteBuffer","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","transmission","transmissionMap","WebGLBackground","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","has","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","updateCache","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","pathLength","lastIndex","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","WebGLShader","createShader","shaderSource","compileShader","programIdCount","addLineNumbers","getEncodingComponents","getShaderErrors","getShaderParameter","getShaderInfoLog","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","WebGLProgram","cacheKey","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","shaderName","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","cachedUniforms","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","getParameters","shadows","nClipPlanes","nClipIntersection","isMeshStandardMaterial","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","materialProperties","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","onSceneDispose","cameras","list","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","vsm_frag","vsm_vert","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","mapPass","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","renderObject","VSMPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","isGroup","WebXRController","_targetRay","_grip","_hand","getHandSpace","joints","inputState","pinching","XRHand","LITTLE_PHALANX_TIP","joint","getTargetRaySpace","getGripSpace","disconnect","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","jointPose","getJointPose","transform","jointRadius","indexTip","INDEX_PHALANX_TIP","thumbTip","THUMB_PHALANX_TIP","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","WebXRManager","framebufferScaleFactor","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","isPresenting","getController","controller","getControllerGrip","getHand","onSessionEvent","onSessionEnd","setFramebuffer","animation","onRequestReferenceSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","updateInputSources","inputSources","removed","added","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","getCamera","depthNear","depthFar","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","refreshUniformsCommon","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","opaqueObjects","transparentObjects","renderObjects","isLOD","isImmediateRenderObject","camera2","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","ltc_1","LTC_1","ltc_2","LTC_2","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","WebGL1Renderer","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","float32Array","transformVertex","vertexPosition","mvPosition","_v1$4","_v2$2","LOD","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","calculateInverses","normalizeSkinWeights","skinWeight","basePosition","skinIndex","weight","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","bone","isBone","getBoneByName","Bone","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","linecap","linejoin","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","computeLineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","hasVideoFrameCallback","HAVE_CURRENT_DATA","CompressedTexture","CanvasTexture","isCanvasTexture","DepthTexture","WireframeGeometry","edge","edges","edge1","edge2","ol","ParametricGeometry","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","uvA","uvB","uvC","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","generateBufferData","generateSegment","generateIndices","getPointAt","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","shapePoints","reverse","hl","ahole","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","font","isFont","generateShapes","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","uOffset","RingGeometry","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","segment","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","inverseSegments","base","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","indexOffset","shapeVertices","shapeHoles","shapeHole","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","__proto__","RawShaderMaterial","Materials","AnimationUtils","arraySlice","isTypedArray","convertArray","forceClone","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceValue","interpolant","createInterpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","json","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","getTrackTypeForValueTypeName","typeName","parseKeyframeTrack","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","requestHeader","setCrossOrigin","setPath","setResourcePath","setRequestHeader","loading","FileLoader","cached","dataUriRegex","dataUriRegexResult","request","isBase64","decodeURIComponent","atob","response","responseType","parser","DOMParser","parseFromString","XMLHttpRequest","callbacks","withCredentials","overrideMimeType","send","setResponseType","setWithCredentials","setMimeType","AnimationLoader","CompressedTextureLoader","loaded","loadTexture","texDatas","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","onImageLoad","onImageError","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","cacheLengths","sums","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","scaleW","scaleH","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","getAt","coeff","getIrradianceAt","addScaledSH","getBasisAt","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","decodeText","TextDecoder","escape","extractUrlBase","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","TYPED_ARRAYS","arrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","geometryShapes","bufferGeometryLoader","details","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","isImageBitmapLoader","setOptions","res","imageBitmap","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","_cachedOutline","action","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","sky","ground","isHemisphereLightProbe","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","oldTime","elapsedTime","running","getElapsedTime","getDelta","newTime","_position$2","_quaternion$3","_scale$1","_orientation","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","getInput","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","play","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","_position$3","_quaternion$4","_scale$2","_orientation$1","PositionalAudio","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","nodeName","isAnimationObjectGroup","sanitizeNodeName","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Spherical","other","setFromCartesianCoords","Cylindrical","_vector$7","Box2","_startP","_startEnd","Line3","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","startEnd_startP","ImmediateRenderObject","_vector$8","SpotLightHelper","cone","coneLength","coneWidth","_vector$9","_boneMatrix","_matrixWorldInv","getBoneList","boneList","SkeletonHelper","isSkeletonHelper","PointLightHelper","sphereSize","_vector$a","_color1","_color2","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","_v1$5","_v2$3","_v3$1","DirectionalLightHelper","lightPlane","targetLine","_vector$b","_camera","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","_box$3","BoxHelper","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setColor","AxesHelper","LOD_MIN","LOD_MAX","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","MAX_SAMPLES","ENCODINGS","_flatCamera","_createPlanes","_lodPlanes","_sizeLods","_sigmas","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","fromScene","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","equirectangular","_fromTexture","fromCubemap","cubemap","compileCubemapShader","_getCubemapShader","compileEquirectangularShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","maxComponent","fExp","log2","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","exp","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","shaderMaterial","_getCommonVertexShader","_getEncodings","Face4","LineStrip","LinePieces","NoColors","FaceColors","VertexColors","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","Handlers","XHRLoader","BinaryTextureLoader","setTexturePath","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","removeAttribute","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","WebGLRenderTargetCube","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","CanvasRenderer","JSONLoader","SceneUtils","createMultiMaterialObject","detach","LensFlare","revision","production","bootstrapModule"],"mappings":"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;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;;;AAEA,QAAKkC,MAAM,CAACC,OAAP,KAAmBjuC,SAAxB,EAAoC;AAEnCguC,YAAM,CAACC,OAAP,GAAiB9jC,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAa,CAAE,EAAf,CAAjB;AAEA;;AAED,QAAK88B,MAAM,CAACE,SAAP,KAAqBluC,SAA1B,EAAsC;AAErC;AACA;AAEAguC,YAAM,CAACE,SAAP,GAAmB,UAAWxyC,KAAX,EAAmB;AAErC,eAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6B6S,QAAQ,CAAE7S,KAAF,CAArC,IAAkDyO,IAAI,CAAC4N,KAAL,CAAYrc,KAAZ,MAAwBA,KAAjF;AAEA,OAJD;AAMA,K,CAED;;;AAEA,QAAKyO,IAAI,CAACgkC,IAAL,KAAcnuC,SAAnB,EAA+B;AAE9B;AAEAmK,UAAI,CAACgkC,IAAL,GAAY,UAAW5xC,CAAX,EAAe;AAE1B,eAASA,CAAC,GAAG,CAAN,GAAY,CAAE,CAAd,GAAoBA,CAAC,GAAG,CAAN,GAAY,CAAZ,GAAgB,CAAEA,CAA3C;AAEA,OAJD;AAMA;;AAED,QAAK,UAAU6xC,QAAQ,CAACtlC,SAAnB,KAAiC,KAAtC,EAA8C;AAE7C;AACA;AAEA3V,YAAM,CAACk7C,cAAP,CAAuBD,QAAQ,CAACtlC,SAAhC,EAA2C,MAA3C,EAAmD;AAElDrG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKopB,QAAL,GAAgByiB,KAAhB,CAAuB,2BAAvB,EAAsD,CAAtD,CAAP;AAEA;AANiD,OAAnD;AAUA;;AAED,QAAKn7C,MAAM,CAACiiC,MAAP,KAAkBp1B,SAAvB,EAAmC;AAElC;AACA;AAEA7M,YAAM,CAACiiC,MAAP,GAAgB,UAAW35B,MAAX,EAAoB;AAEnC,YAAKA,MAAM,KAAKuE,SAAX,IAAwBvE,MAAM,KAAK,IAAxC,EAA+C;AAE9C,gBAAM,IAAI+4B,SAAJ,CAAe,4CAAf,CAAN;AAEA;;AAED,YAAMmC,MAAM,GAAGxjC,MAAM,CAAEsI,MAAF,CAArB;;AAEA,aAAM,IAAIid,KAAK,GAAG,CAAlB,EAAqBA,KAAK,GAAGxR,SAAS,CAACjW,MAAvC,EAA+CynB,KAAK,EAApD,EAA0D;AAEzD,cAAM61B,MAAM,GAAGrnC,SAAS,CAAEwR,KAAF,CAAxB;;AAEA,cAAK61B,MAAM,KAAKvuC,SAAX,IAAwBuuC,MAAM,KAAK,IAAxC,EAA+C;AAE9C,iBAAM,IAAMC,OAAZ,IAAuBD,MAAvB,EAAgC;AAE/B,kBAAKp7C,MAAM,CAAC2V,SAAP,CAAiBgjB,cAAjB,CAAgC7lB,IAAhC,CAAsCsoC,MAAtC,EAA8CC,OAA9C,CAAL,EAA+D;AAE9D7X,sBAAM,CAAE6X,OAAF,CAAN,GAAoBD,MAAM,CAAEC,OAAF,CAA1B;AAEA;AAED;AAED;AAED;;AAED,eAAO7X,MAAP;AAEA,OAhCD;AAkCA;;AAED,QAAM8X,QAAQ,GAAG,KAAjB;AACA,QAAMC,KAAK,GAAG;AAAEtjC,UAAI,EAAE,CAAR;AAAWM,YAAM,EAAE,CAAnB;AAAsBJ,WAAK,EAAE,CAA7B;AAAgCG,YAAM,EAAE,CAAxC;AAA2CE,WAAK,EAAE,CAAlD;AAAqDC,SAAG,EAAE;AAA1D,KAAd;AACA,QAAM+iC,KAAK,GAAG;AAAEljC,YAAM,EAAE,CAAV;AAAaG,SAAG,EAAE,CAAlB;AAAqBI,eAAS,EAAE,CAAhC;AAAmCsJ,kBAAY,EAAE;AAAjD,KAAd;AACA,QAAMs5B,YAAY,GAAG,CAArB;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,cAAc,GAAG,CAAvB;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,gBAAgB,GAAG,CAAzB;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,SAAS,GAAG,CAAlB;AACA,QAAMC,QAAQ,GAAG,CAAjB;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,WAAW,GAAG,CAApB;AACA,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,cAAc,GAAG,CAAvB;AACA,QAAMC,gBAAgB,GAAG,CAAzB;AACA,QAAMC,mBAAmB,GAAG,CAA5B;AACA,QAAMC,gBAAgB,GAAG,CAAzB;AACA,QAAMC,cAAc,GAAG,CAAvB;AACA,QAAMC,WAAW,GAAG,GAApB;AACA,QAAMC,gBAAgB,GAAG,GAAzB;AACA,QAAMC,uBAAuB,GAAG,GAAhC;AACA,QAAMC,WAAW,GAAG,GAApB;AACA,QAAMC,WAAW,GAAG,GAApB;AACA,QAAMC,UAAU,GAAG,GAAnB;AACA,QAAMC,SAAS,GAAG,GAAlB;AACA,QAAMC,cAAc,GAAG,GAAvB;AACA,QAAMC,sBAAsB,GAAG,GAA/B;AACA,QAAMC,cAAc,GAAG,GAAvB;AACA,QAAMC,sBAAsB,GAAG,GAA/B;AACA,QAAMC,cAAc,GAAG,GAAvB;AACA,QAAMC,sBAAsB,GAAG,GAA/B;AACA,QAAMC,cAAc,GAAG,GAAvB;AACA,QAAMC,sBAAsB,GAAG,GAA/B;AACA,QAAMC,sBAAsB,GAAG,GAA/B;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,WAAW,GAAG,CAApB;AACA,QAAMC,SAAS,GAAG,CAAlB;AACA,QAAMC,cAAc,GAAG,CAAvB;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,YAAY,GAAG,CAArB;AACA,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,mBAAmB,GAAG,CAA5B;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,qBAAqB,GAAG,CAA9B;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AAEA,QAAMC,SAAS,GAAG,GAAlB;AACA,QAAMC,qBAAqB,GAAG,GAA9B;AACA,QAAMC,qBAAqB,GAAG,GAA9B;AACA,QAAMC,gCAAgC,GAAG,GAAzC;AACA,QAAMC,gCAAgC,GAAG,GAAzC;AACA,QAAMC,uBAAuB,GAAG,GAAhC;AACA,QAAMC,uBAAuB,GAAG,GAAhC;AACA,QAAMC,cAAc,GAAG,IAAvB;AACA,QAAMC,mBAAmB,GAAG,IAA5B;AACA,QAAMC,sBAAsB,GAAG,IAA/B;AACA,QAAMC,aAAa,GAAG,IAAtB;AACA,QAAMC,0BAA0B,GAAG,IAAnC;AACA,QAAMC,0BAA0B,GAAG,IAAnC;AACA,QAAMC,yBAAyB,GAAG,IAAlC;AACA,QAAMC,yBAAyB,GAAG,IAAlC;AACA,QAAMC,YAAY,GAAG,IAArB;AACA,QAAMC,yBAAyB,GAAG,IAAlC;AACA,QAAMC,yBAAyB,GAAG,IAAlC;AACA,QAAMC,wBAAwB,GAAG,IAAjC;AACA,QAAMC,wBAAwB,GAAG,IAAjC;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,QAAQ,GAAG,IAAjB;AACA,QAAMC,SAAS,GAAG,IAAlB;AACA,QAAMC,iBAAiB,GAAG,IAA1B;AACA,QAAMC,OAAO,GAAG,IAAhB;AACA,QAAMC,eAAe,GAAG,IAAxB;AACA,QAAMC,SAAS,GAAG,IAAlB;AACA,QAAMC,aAAa,GAAG,IAAtB;AACA,QAAMC,qBAAqB,GAAG,IAA9B;AACA,QAAMC,qBAAqB,GAAG,IAA9B;AACA,QAAMC,oBAAoB,GAAG,IAA7B;AACA,QAAMC,kBAAkB,GAAG,IAA3B;AACA,QAAMC,WAAW,GAAG,IAApB;AACA,QAAMC,SAAS,GAAG,IAAlB;AACA,QAAMC,UAAU,GAAG,IAAnB;AACA,QAAMC,eAAe,GAAG,IAAxB;AACA,QAAMC,oBAAoB,GAAG,IAA7B;AACA,QAAMC,UAAU,GAAGH,UAAnB;AACA,QAAMI,WAAW,GAAG,IAApB;AACA,QAAMC,kBAAkB,GAAG,IAA3B;AACA,QAAMC,SAAS,GAAG,IAAlB;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,QAAQ,GAAG,IAAjB;AACA,QAAMC,eAAe,GAAG,IAAxB;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,iBAAiB,GAAG,IAA1B;AAEA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,uBAAuB,GAAG,KAAhC;AACA,QAAMC,uBAAuB,GAAG,KAAhC;AACA,QAAMC,wBAAwB,GAAG,KAAjC;AACA,QAAMC,wBAAwB,GAAG,KAAjC;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,oBAAoB,GAAG,KAA7B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,qBAAqB,GAAG,KAA9B;AACA,QAAMC,sBAAsB,GAAG,KAA/B;AACA,QAAMC,sBAAsB,GAAG,KAA/B;AACA,QAAMC,sBAAsB,GAAG,KAA/B;AACA,QAAMC,gBAAgB,GAAG,KAAzB;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,4BAA4B,GAAG,KAArC;AACA,QAAMC,6BAA6B,GAAG,KAAtC;AACA,QAAMC,6BAA6B,GAAG,KAAtC;AACA,QAAMC,6BAA6B,GAAG,KAAtC;AACA,QAAMC,8BAA8B,GAAG,KAAvC;AACA,QAAMC,8BAA8B,GAAG,KAAvC;AACA,QAAMC,8BAA8B,GAAG,KAAvC;AACA,QAAMC,QAAQ,GAAG,IAAjB;AACA,QAAMC,UAAU,GAAG,IAAnB;AACA,QAAMC,YAAY,GAAG,IAArB;AACA,QAAMC,mBAAmB,GAAG,IAA5B;AACA,QAAMC,iBAAiB,GAAG,IAA1B;AACA,QAAMC,iBAAiB,GAAG,IAA1B;AACA,QAAMC,mBAAmB,GAAG,IAA5B;AACA,QAAMC,eAAe,GAAG,IAAxB;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,wBAAwB,GAAG,IAAjC;AACA,QAAMC,0BAA0B,GAAG,IAAnC;AACA,QAAMC,iBAAiB,GAAG,CAA1B;AACA,QAAMC,qBAAqB,GAAG,CAA9B;AACA,QAAMC,mBAAmB,GAAG,CAA5B;AACA,QAAMC,cAAc,GAAG,IAAvB;AACA,QAAMC,YAAY,GAAG,IAArB;AACA,QAAMC,aAAa,GAAG,IAAtB;AACA,QAAMC,YAAY,GAAG,IAArB;AACA,QAAMC,cAAc,GAAG,IAAvB;AACA,QAAMC,aAAa,GAAG,IAAtB;AACA,QAAMC,cAAc,GAAG,IAAvB;AACA,QAAMC,YAAY,GAAG,IAArB;AACA,QAAMC,iBAAiB,GAAG,IAA1B;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,qBAAqB,GAAG,CAA9B;AACA,QAAMC,oBAAoB,GAAG,CAA7B;AAEA,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,aAAa,GAAG,IAAtB;AACA,QAAMC,gBAAgB,GAAG,IAAzB;AACA,QAAMC,kBAAkB,GAAG,IAA3B;AACA,QAAMC,kBAAkB,GAAG,IAA3B;AACA,QAAMC,sBAAsB,GAAG,KAA/B;AACA,QAAMC,sBAAsB,GAAG,KAA/B;AACA,QAAMC,eAAe,GAAG,IAAxB;AAEA,QAAMC,gBAAgB,GAAG,GAAzB;AACA,QAAMC,eAAe,GAAG,GAAxB;AACA,QAAMC,gBAAgB,GAAG,GAAzB;AACA,QAAMC,oBAAoB,GAAG,GAA7B;AACA,QAAMC,kBAAkB,GAAG,GAA3B;AACA,QAAMC,mBAAmB,GAAG,GAA5B;AACA,QAAMC,uBAAuB,GAAG,GAAhC;AACA,QAAMC,iBAAiB,GAAG,GAA1B;AAEA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,gBAAgB,GAAG,KAAzB;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,gBAAgB,GAAG,KAAzB;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,eAAe,GAAG,KAAxB;AACA,QAAMC,gBAAgB,GAAG,KAAzB;AACA,QAAMC,eAAe,GAAG,KAAxB;AAEA;;;;AAIA,aAASC,eAAT,GAA2B,CAAE;;AAE7BtnD,UAAM,CAACiiC,MAAP,CAAeqlB,eAAe,CAAC3xC,SAA/B,EAA0C;AAEzCK,sBAAgB,EAAE,0BAAW7S,IAAX,EAAiB0P,QAAjB,EAA4B;AAE7C,YAAK,KAAK+nB,UAAL,KAAoB/tB,SAAzB,EAAqC,KAAK+tB,UAAL,GAAkB,EAAlB;AAErC,YAAM2sB,SAAS,GAAG,KAAK3sB,UAAvB;;AAEA,YAAK2sB,SAAS,CAAEpkD,IAAF,CAAT,KAAsB0J,SAA3B,EAAuC;AAEtC06C,mBAAS,CAAEpkD,IAAF,CAAT,GAAoB,EAApB;AAEA;;AAED,YAAKokD,SAAS,CAAEpkD,IAAF,CAAT,CAAkBgtB,OAAlB,CAA2Btd,QAA3B,MAA0C,CAAE,CAAjD,EAAqD;AAEpD00C,mBAAS,CAAEpkD,IAAF,CAAT,CAAkBhE,IAAlB,CAAwB0T,QAAxB;AAEA;AAED,OApBwC;AAsBzC20C,sBAAgB,EAAE,0BAAWrkD,IAAX,EAAiB0P,QAAjB,EAA4B;AAE7C,YAAK,KAAK+nB,UAAL,KAAoB/tB,SAAzB,EAAqC,OAAO,KAAP;AAErC,YAAM06C,SAAS,GAAG,KAAK3sB,UAAvB;AAEA,eAAO2sB,SAAS,CAAEpkD,IAAF,CAAT,KAAsB0J,SAAtB,IAAmC06C,SAAS,CAAEpkD,IAAF,CAAT,CAAkBgtB,OAAlB,CAA2Btd,QAA3B,MAA0C,CAAE,CAAtF;AAEA,OA9BwC;AAgCzCqD,yBAAmB,EAAE,6BAAW/S,IAAX,EAAiB0P,QAAjB,EAA4B;AAEhD,YAAK,KAAK+nB,UAAL,KAAoB/tB,SAAzB,EAAqC;AAErC,YAAM06C,SAAS,GAAG,KAAK3sB,UAAvB;AACA,YAAM6sB,aAAa,GAAGF,SAAS,CAAEpkD,IAAF,CAA/B;;AAEA,YAAKskD,aAAa,KAAK56C,SAAvB,EAAmC;AAElC,cAAM0Y,KAAK,GAAGkiC,aAAa,CAACt3B,OAAd,CAAuBtd,QAAvB,CAAd;;AAEA,cAAK0S,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpBkiC,yBAAa,CAACnY,MAAd,CAAsB/pB,KAAtB,EAA6B,CAA7B;AAEA;AAED;AAED,OAnDwC;AAqDzC9T,mBAAa,EAAE,uBAAW1U,KAAX,EAAmB;AAEjC,YAAK,KAAK69B,UAAL,KAAoB/tB,SAAzB,EAAqC;AAErC,YAAM06C,SAAS,GAAG,KAAK3sB,UAAvB;AACA,YAAM6sB,aAAa,GAAGF,SAAS,CAAExqD,KAAK,CAACoG,IAAR,CAA/B;;AAEA,YAAKskD,aAAa,KAAK56C,SAAvB,EAAmC;AAElC9P,eAAK,CAACuL,MAAN,GAAe,IAAf,CAFkC,CAIlC;;AACA,cAAM+yB,KAAK,GAAGosB,aAAa,CAACvqD,KAAd,CAAqB,CAArB,CAAd;;AAEA,eAAM,IAAIuB,CAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGmyB,KAAK,CAACv9B,MAA3B,EAAmCW,CAAC,GAAGyK,CAAvC,EAA0CzK,CAAC,EAA3C,EAAiD;AAEhD48B,iBAAK,CAAE58B,CAAF,CAAL,CAAWqU,IAAX,CAAiB,IAAjB,EAAuB/V,KAAvB;AAEA;AAED;AAED;AA3EwC,KAA1C;AA+EA,QAAM2qD,IAAI,GAAG,EAAb;;AAEA,SAAM,IAAIjpD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,GAArB,EAA0BA,CAAC,EAA3B,EAAiC;AAEhCipD,UAAI,CAAEjpD,CAAF,CAAJ,GAAY,CAAEA,CAAC,GAAG,EAAJ,GAAS,GAAT,GAAe,EAAjB,IAA0BA,CAAF,CAAMi6B,QAAN,CAAgB,EAAhB,CAApC;AAEA;;AAED,QAAIivB,KAAK,GAAG,OAAZ;AAEA,QAAMC,SAAS,GAAG;AAEjBC,aAAO,EAAE7wC,IAAI,CAACC,EAAL,GAAU,GAFF;AAGjB6wC,aAAO,EAAE,MAAM9wC,IAAI,CAACC,EAHH;AAKjB8wC,kBAAY,EAAE,wBAAY;AAEzB;AAEA,YAAMC,EAAE,GAAGhxC,IAAI,CAAC2N,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,YAAMsjC,EAAE,GAAGjxC,IAAI,CAAC2N,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,YAAMujC,EAAE,GAAGlxC,IAAI,CAAC2N,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,YAAMwjC,EAAE,GAAGnxC,IAAI,CAAC2N,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,YAAMyjC,IAAI,GAAGV,IAAI,CAAEM,EAAE,GAAG,IAAP,CAAJ,GAAoBN,IAAI,CAAEM,EAAE,IAAI,CAAN,GAAU,IAAZ,CAAxB,GAA6CN,IAAI,CAAEM,EAAE,IAAI,EAAN,GAAW,IAAb,CAAjD,GAAuEN,IAAI,CAAEM,EAAE,IAAI,EAAN,GAAW,IAAb,CAA3E,GAAiG,GAAjG,GACZN,IAAI,CAAEO,EAAE,GAAG,IAAP,CADQ,GACQP,IAAI,CAAEO,EAAE,IAAI,CAAN,GAAU,IAAZ,CADZ,GACiC,GADjC,GACuCP,IAAI,CAAEO,EAAE,IAAI,EAAN,GAAW,IAAX,GAAkB,IAApB,CAD3C,GACwEP,IAAI,CAAEO,EAAE,IAAI,EAAN,GAAW,IAAb,CAD5E,GACkG,GADlG,GAEZP,IAAI,CAAEQ,EAAE,GAAG,IAAL,GAAY,IAAd,CAFQ,GAEeR,IAAI,CAAEQ,EAAE,IAAI,CAAN,GAAU,IAAZ,CAFnB,GAEwC,GAFxC,GAE8CR,IAAI,CAAEQ,EAAE,IAAI,EAAN,GAAW,IAAb,CAFlD,GAEwER,IAAI,CAAEQ,EAAE,IAAI,EAAN,GAAW,IAAb,CAF5E,GAGZR,IAAI,CAAES,EAAE,GAAG,IAAP,CAHQ,GAGQT,IAAI,CAAES,EAAE,IAAI,CAAN,GAAU,IAAZ,CAHZ,GAGiCT,IAAI,CAAES,EAAE,IAAI,EAAN,GAAW,IAAb,CAHrC,GAG2DT,IAAI,CAAES,EAAE,IAAI,EAAN,GAAW,IAAb,CAH5E,CARyB,CAazB;;AACA,eAAOC,IAAI,CAAC7vB,WAAL,EAAP;AAEA,OArBgB;AAuBjB8vB,WAAK,EAAE,eAAW9/C,KAAX,EAAkB2S,GAAlB,EAAuBC,GAAvB,EAA6B;AAEnC,eAAOnE,IAAI,CAACmE,GAAL,CAAUD,GAAV,EAAelE,IAAI,CAACkE,GAAL,CAAUC,GAAV,EAAe5S,KAAf,CAAf,CAAP;AAEA,OA3BgB;AA6BjB;AACA;AAEA+/C,qBAAe,EAAE,yBAAWl5B,CAAX,EAAc+D,CAAd,EAAkB;AAElC,eAAO,CAAI/D,CAAC,GAAG+D,CAAN,GAAYA,CAAd,IAAoBA,CAA3B;AAEA,OApCgB;AAsCjB;AAEAo1B,eAAS,EAAE,mBAAWn/C,CAAX,EAAco/C,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA+B;AAEzC,eAAOD,EAAE,GAAG,CAAEt/C,CAAC,GAAGo/C,EAAN,KAAeG,EAAE,GAAGD,EAApB,KAA6BD,EAAE,GAAGD,EAAlC,CAAZ;AAEA,OA5CgB;AA8CjB;AAEAI,UAAI,EAAE,cAAWx/C,CAAX,EAAc+W,CAAd,EAAiBqE,CAAjB,EAAqB;AAE1B,eAAO,CAAE,IAAIA,CAAN,IAAYpb,CAAZ,GAAgBob,CAAC,GAAGrE,CAA3B;AAEA,OApDgB;AAsDjB;AAEA0oC,gBAAU,EAAE,oBAAWz/C,CAAX,EAAc8R,GAAd,EAAmBC,GAAnB,EAAyB;AAEpC,YAAK/R,CAAC,IAAI8R,GAAV,EAAgB,OAAO,CAAP;AAChB,YAAK9R,CAAC,IAAI+R,GAAV,EAAgB,OAAO,CAAP;AAEhB/R,SAAC,GAAG,CAAEA,CAAC,GAAG8R,GAAN,KAAgBC,GAAG,GAAGD,GAAtB,CAAJ;AAEA,eAAO9R,CAAC,GAAGA,CAAJ,IAAU,IAAI,IAAIA,CAAlB,CAAP;AAEA,OAjEgB;AAmEjB0/C,kBAAY,EAAE,sBAAW1/C,CAAX,EAAc8R,GAAd,EAAmBC,GAAnB,EAAyB;AAEtC,YAAK/R,CAAC,IAAI8R,GAAV,EAAgB,OAAO,CAAP;AAChB,YAAK9R,CAAC,IAAI+R,GAAV,EAAgB,OAAO,CAAP;AAEhB/R,SAAC,GAAG,CAAEA,CAAC,GAAG8R,GAAN,KAAgBC,GAAG,GAAGD,GAAtB,CAAJ;AAEA,eAAO9R,CAAC,GAAGA,CAAJ,GAAQA,CAAR,IAAcA,CAAC,IAAKA,CAAC,GAAG,CAAJ,GAAQ,EAAb,CAAD,GAAqB,EAAnC,CAAP;AAEA,OA5EgB;AA8EjB;AAEA2/C,aAAO,EAAE,iBAAWC,GAAX,EAAgBC,IAAhB,EAAuB;AAE/B,eAAOD,GAAG,GAAGhyC,IAAI,CAAC4N,KAAL,CAAY5N,IAAI,CAAC2N,MAAL,MAAkBskC,IAAI,GAAGD,GAAP,GAAa,CAA/B,CAAZ,CAAb;AAEA,OApFgB;AAsFjB;AAEAE,eAAS,EAAE,mBAAWF,GAAX,EAAgBC,IAAhB,EAAuB;AAEjC,eAAOD,GAAG,GAAGhyC,IAAI,CAAC2N,MAAL,MAAkBskC,IAAI,GAAGD,GAAzB,CAAb;AAEA,OA5FgB;AA8FjB;AAEAG,qBAAe,EAAE,yBAAWC,KAAX,EAAmB;AAEnC,eAAOA,KAAK,IAAK,MAAMpyC,IAAI,CAAC2N,MAAL,EAAX,CAAZ;AAEA,OApGgB;AAsGjB;AAEA0kC,kBAAY,EAAE,sBAAWt6B,CAAX,EAAe;AAE5B,YAAKA,CAAC,KAAKliB,SAAX,EAAuB86C,KAAK,GAAG54B,CAAC,GAAG,UAAZ,CAFK,CAI5B;;AAEA44B,aAAK,GAAGA,KAAK,GAAG,KAAR,GAAgB,UAAxB;AAEA,eAAO,CAAEA,KAAK,GAAG,CAAV,IAAgB,UAAvB;AAEA,OAlHgB;AAoHjB2B,cAAQ,EAAE,kBAAWC,OAAX,EAAqB;AAE9B,eAAOA,OAAO,GAAG3B,SAAS,CAACC,OAA3B;AAEA,OAxHgB;AA0HjB2B,cAAQ,EAAE,kBAAWC,OAAX,EAAqB;AAE9B,eAAOA,OAAO,GAAG7B,SAAS,CAACE,OAA3B;AAEA,OA9HgB;AAgIjB4B,kBAAY,EAAE,sBAAWnhD,KAAX,EAAmB;AAEhC,eAAO,CAAEA,KAAK,GAAKA,KAAK,GAAG,CAApB,MAA8B,CAA9B,IAAmCA,KAAK,KAAK,CAApD;AAEA,OApIgB;AAsIjBohD,oBAAc,EAAE,wBAAWphD,KAAX,EAAmB;AAElC,eAAOyO,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAa/G,IAAI,CAAC4yC,IAAL,CAAW5yC,IAAI,CAACnX,GAAL,CAAU0I,KAAV,IAAoByO,IAAI,CAAC6yC,GAApC,CAAb,CAAP;AAEA,OA1IgB;AA4IjBC,qBAAe,EAAE,yBAAWvhD,KAAX,EAAmB;AAEnC,eAAOyO,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAa/G,IAAI,CAAC4N,KAAL,CAAY5N,IAAI,CAACnX,GAAL,CAAU0I,KAAV,IAAoByO,IAAI,CAAC6yC,GAArC,CAAb,CAAP;AAEA,OAhJgB;AAkJjBE,kCAA4B,EAAE,sCAAW3a,CAAX,EAAcpxC,CAAd,EAAiBC,CAAjB,EAAoBoxB,CAApB,EAAuB26B,KAAvB,EAA+B;AAE5D;AAEA;AACA;AACA;AAEA,YAAMzP,GAAG,GAAGvjC,IAAI,CAACujC,GAAjB;AACA,YAAMC,GAAG,GAAGxjC,IAAI,CAACwjC,GAAjB;AAEA,YAAMyP,EAAE,GAAG1P,GAAG,CAAEt8C,CAAC,GAAG,CAAN,CAAd;AACA,YAAMisD,EAAE,GAAG1P,GAAG,CAAEv8C,CAAC,GAAG,CAAN,CAAd;AAEA,YAAMksD,GAAG,GAAG5P,GAAG,CAAE,CAAEv8C,CAAC,GAAGqxB,CAAN,IAAY,CAAd,CAAf;AACA,YAAM+6B,GAAG,GAAG5P,GAAG,CAAE,CAAEx8C,CAAC,GAAGqxB,CAAN,IAAY,CAAd,CAAf;AAEA,YAAMg7B,IAAI,GAAG9P,GAAG,CAAE,CAAEv8C,CAAC,GAAGqxB,CAAN,IAAY,CAAd,CAAhB;AACA,YAAMi7B,IAAI,GAAG9P,GAAG,CAAE,CAAEx8C,CAAC,GAAGqxB,CAAN,IAAY,CAAd,CAAhB;AAEA,YAAMk7B,IAAI,GAAGhQ,GAAG,CAAE,CAAElrB,CAAC,GAAGrxB,CAAN,IAAY,CAAd,CAAhB;AACA,YAAMwsD,IAAI,GAAGhQ,GAAG,CAAE,CAAEnrB,CAAC,GAAGrxB,CAAN,IAAY,CAAd,CAAhB;;AAEA,gBAASgsD,KAAT;AAEC,eAAK,KAAL;AACC5a,aAAC,CAACtzB,GAAF,CAAOmuC,EAAE,GAAGG,GAAZ,EAAiBF,EAAE,GAAGG,IAAtB,EAA4BH,EAAE,GAAGI,IAAjC,EAAuCL,EAAE,GAAGE,GAA5C;AACA;;AAED,eAAK,KAAL;AACC/a,aAAC,CAACtzB,GAAF,CAAOouC,EAAE,GAAGI,IAAZ,EAAkBL,EAAE,GAAGG,GAAvB,EAA4BF,EAAE,GAAGG,IAAjC,EAAuCJ,EAAE,GAAGE,GAA5C;AACA;;AAED,eAAK,KAAL;AACC/a,aAAC,CAACtzB,GAAF,CAAOouC,EAAE,GAAGG,IAAZ,EAAkBH,EAAE,GAAGI,IAAvB,EAA6BL,EAAE,GAAGG,GAAlC,EAAuCH,EAAE,GAAGE,GAA5C;AACA;;AAED,eAAK,KAAL;AACC/a,aAAC,CAACtzB,GAAF,CAAOmuC,EAAE,GAAGG,GAAZ,EAAiBF,EAAE,GAAGM,IAAtB,EAA4BN,EAAE,GAAGK,IAAjC,EAAuCN,EAAE,GAAGE,GAA5C;AACA;;AAED,eAAK,KAAL;AACC/a,aAAC,CAACtzB,GAAF,CAAOouC,EAAE,GAAGK,IAAZ,EAAkBN,EAAE,GAAGG,GAAvB,EAA4BF,EAAE,GAAGM,IAAjC,EAAuCP,EAAE,GAAGE,GAA5C;AACA;;AAED,eAAK,KAAL;AACC/a,aAAC,CAACtzB,GAAF,CAAOouC,EAAE,GAAGM,IAAZ,EAAkBN,EAAE,GAAGK,IAAvB,EAA6BN,EAAE,GAAGG,GAAlC,EAAuCH,EAAE,GAAGE,GAA5C;AACA;;AAED;AACCvqD,mBAAO,CAAC2W,IAAR,CAAc,oFAAoFyzC,KAAlG;AA3BF;AA+BA;AAxMgB,KAAlB;;AA4MA,aAASS,OAAT,GAAiC;AAAA,UAAfrhD,CAAe,uEAAX,CAAW;AAAA,UAAR+W,CAAQ,uEAAJ,CAAI;AAEhC,WAAK/W,CAAL,GAASA,CAAT;AACA,WAAK+W,CAAL,GAASA,CAAT;AAEA;;AAEDngB,UAAM,CAAC0qD,gBAAP,CAAyBD,OAAO,CAAC90C,SAAjC,EAA4C;AAE3C,eAAS;AAERrG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKlG,CAAZ;AAEA,SANO;AAQR0S,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKa,CAAL,GAASb,KAAT;AAEA;AAZO,OAFkC;AAkB3C,gBAAU;AAET+G,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAK6Q,CAAZ;AAEA,SANQ;AAQTrE,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAK4X,CAAL,GAAS5X,KAAT;AAEA;AAZQ;AAlBiC,KAA5C;AAoCAvI,UAAM,CAACiiC,MAAP,CAAewoB,OAAO,CAAC90C,SAAvB,EAAkC;AAEjCg1C,eAAS,EAAE,IAFsB;AAIjC7uC,SAAG,EAAE,aAAW1S,CAAX,EAAc+W,CAAd,EAAkB;AAEtB,aAAK/W,CAAL,GAASA,CAAT;AACA,aAAK+W,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAXgC;AAajCyqC,eAAS,EAAE,mBAAWC,MAAX,EAAoB;AAE9B,aAAKzhD,CAAL,GAASyhD,MAAT;AACA,aAAK1qC,CAAL,GAAS0qC,MAAT;AAEA,eAAO,IAAP;AAEA,OApBgC;AAsBjCC,UAAI,EAAE,cAAW1hD,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OA5BgC;AA8BjC2hD,UAAI,EAAE,cAAW5qC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OApCgC;AAsCjC6qC,kBAAY,EAAE,sBAAWzlC,KAAX,EAAkBhd,KAAlB,EAA0B;AAEvC,gBAASgd,KAAT;AAEC,eAAK,CAAL;AAAQ,iBAAKnc,CAAL,GAASb,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAK4X,CAAL,GAAS5X,KAAT;AAAgB;;AACxB;AAAS,kBAAM,IAAIvM,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AAJV;;AAQA,eAAO,IAAP;AAEA,OAlDgC;AAoDjC0lC,kBAAY,EAAE,sBAAW1lC,KAAX,EAAmB;AAEhC,gBAASA,KAAT;AAEC,eAAK,CAAL;AAAQ,mBAAO,KAAKnc,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAK+W,CAAZ;;AACR;AAAS,kBAAM,IAAInkB,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AAJV;AAQA,OA9DgC;AAgEjCxM,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKjZ,CAA3B,EAA8B,KAAK+W,CAAnC,CAAP;AAEA,OApEgC;AAsEjCxG,UAAI,EAAE,cAAWwE,CAAX,EAAe;AAEpB,aAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX;AACA,aAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAAX;AAEA,eAAO,IAAP;AAEA,OA7EgC;AA+EjCzE,SAAG,EAAE,aAAWyC,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK20C,UAAL,CAAiB/sC,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AAEA,eAAO,IAAP;AAEA,OA7FgC;AA+FjCgrC,eAAS,EAAE,mBAAWp8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AAEA,eAAO,IAAP;AAEA,OAtGgC;AAwGjCm8B,gBAAU,EAAE,oBAAWltD,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AAEA,eAAO,IAAP;AAEA,OA/GgC;AAiHjC3E,qBAAe,EAAE,yBAAW2C,CAAX,EAAc4Q,CAAd,EAAkB;AAElC,aAAK3lB,CAAL,IAAU+U,CAAC,CAAC/U,CAAF,GAAM2lB,CAAhB;AACA,aAAK5O,CAAL,IAAUhC,CAAC,CAACgC,CAAF,GAAM4O,CAAhB;AAEA,eAAO,IAAP;AAEA,OAxHgC;AA0HjCnU,SAAG,EAAE,aAAWuD,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK2J,UAAL,CAAiB/B,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AAEA,eAAO,IAAP;AAEA,OAxIgC;AA0IjCirC,eAAS,EAAE,mBAAWr8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AAEA,eAAO,IAAP;AAEA,OAjJgC;AAmJjC7O,gBAAU,EAAE,oBAAWliB,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AAEA,eAAO,IAAP;AAEA,OA1JgC;AA4JjCkrC,cAAQ,EAAE,kBAAWltC,CAAX,EAAe;AAExB,aAAK/U,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AAEA,eAAO,IAAP;AAEA,OAnKgC;AAqKjCtE,oBAAc,EAAE,wBAAWgvC,MAAX,EAAoB;AAEnC,aAAKzhD,CAAL,IAAUyhD,MAAV;AACA,aAAK1qC,CAAL,IAAU0qC,MAAV;AAEA,eAAO,IAAP;AAEA,OA5KgC;AA8KjCS,YAAM,EAAE,gBAAWntC,CAAX,EAAe;AAEtB,aAAK/U,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AAEA,eAAO,IAAP;AAEA,OArLgC;AAuLjCorC,kBAAY,EAAE,sBAAWV,MAAX,EAAoB;AAEjC,eAAO,KAAKhvC,cAAL,CAAqB,IAAIgvC,MAAzB,CAAP;AAEA,OA3LgC;AA6LjCW,kBAAY,EAAE,sBAAWr4B,CAAX,EAAe;AAE5B,YAAM/pB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AACA,YAAMpkB,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,aAAKriD,CAAL,GAASrN,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAApC;AACA,aAAKokB,CAAL,GAASpkB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAApC;AAEA,eAAO,IAAP;AAEA,OAvMgC;AAyMjCmf,SAAG,EAAE,aAAWiD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACkE,GAAL,CAAU,KAAK9R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACkE,GAAL,CAAU,KAAKiF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OAhNgC;AAkNjChF,SAAG,EAAE,aAAWgD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAU,KAAK/R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAU,KAAKgF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OAzNgC;AA2NjCkoC,WAAK,EAAE,eAAWntC,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,aAAK/R,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAAC9R,CAAd,EAAiB4N,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAAC/R,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACiF,CAAd,EAAiBnJ,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACgF,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OApOgC;AAsOjCurC,iBAAW,EAAE,qBAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,aAAKxiD,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKxiD,CAAvB,CAAlB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKzrC,CAAvB,CAAlB,CAAT;AAEA,eAAO,IAAP;AAEA,OA7OgC;AA+OjC0rC,iBAAW,EAAE,qBAAW3wC,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,YAAMrd,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,eAAO,KAAKytD,YAAL,CAAmBztD,MAAM,IAAI,CAA7B,EAAiC+d,cAAjC,CAAiD7E,IAAI,CAACmE,GAAL,CAAUD,GAAV,EAAelE,IAAI,CAACkE,GAAL,CAAUC,GAAV,EAAerd,MAAf,CAAf,CAAjD,CAAP;AAEA,OArPgC;AAuPjC8mB,WAAK,EAAE,iBAAY;AAElB,aAAKxb,CAAL,GAAS4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OA9PgC;AAgQjCypC,UAAI,EAAE,gBAAY;AAEjB,aAAKxgD,CAAL,GAAS4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OAvQgC;AAyQjC2rC,WAAK,EAAE,iBAAY;AAElB,aAAK1iD,CAAL,GAAS4N,IAAI,CAAC80C,KAAL,CAAY,KAAK1iD,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC80C,KAAL,CAAY,KAAK3rC,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OAhRgC;AAkRjC4rC,iBAAW,EAAE,uBAAY;AAExB,aAAK3iD,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAjB,GAAuC4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAhD;AACA,aAAK+W,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAjB,GAAuCnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAhD;AAEA,eAAO,IAAP;AAEA,OAzRgC;AA2RjC6rC,YAAM,EAAE,kBAAY;AAEnB,aAAK5iD,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAK+W,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,eAAO,IAAP;AAEA,OAlSgC;AAoSjCjE,SAAG,EAAE,aAAWiC,CAAX,EAAe;AAEnB,eAAO,KAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX,GAAe,KAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAAjC;AAEA,OAxSgC;AA0SjC8rC,WAAK,EAAE,eAAW9tC,CAAX,EAAe;AAErB,eAAO,KAAK/U,CAAL,GAAS+U,CAAC,CAACgC,CAAX,GAAe,KAAKA,CAAL,GAAShC,CAAC,CAAC/U,CAAjC;AAEA,OA9SgC;AAgTjC8iD,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAK9iD,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAAvC;AAEA,OApTgC;AAsTjCriB,YAAM,EAAE,kBAAY;AAEnB,eAAOkZ,IAAI,CAACmK,IAAL,CAAW,KAAK/X,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAA3C,CAAP;AAEA,OA1TgC;AA4TjCgsC,qBAAe,EAAE,2BAAY;AAE5B,eAAOn1C,IAAI,CAAC4nB,GAAL,CAAU,KAAKx1B,CAAf,IAAqB4N,IAAI,CAAC4nB,GAAL,CAAU,KAAKze,CAAf,CAA5B;AAEA,OAhUgC;AAkUjCisC,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKb,YAAL,CAAmB,KAAKztD,MAAL,MAAiB,CAApC,CAAP;AAEA,OAtUgC;AAwUjCkgB,WAAK,EAAE,iBAAY;AAElB;AAEA,YAAMA,KAAK,GAAGhH,IAAI,CAACq1C,KAAL,CAAY,CAAE,KAAKlsC,CAAnB,EAAsB,CAAE,KAAK/W,CAA7B,IAAmC4N,IAAI,CAACC,EAAtD;AAEA,eAAO+G,KAAP;AAEA,OAhVgC;AAkVjCsuC,gBAAU,EAAE,oBAAWnuC,CAAX,EAAe;AAE1B,eAAOnH,IAAI,CAACmK,IAAL,CAAW,KAAKnF,iBAAL,CAAwBmC,CAAxB,CAAX,CAAP;AAEA,OAtVgC;AAwVjCnC,uBAAiB,EAAE,2BAAWmC,CAAX,EAAe;AAEjC,YAAM8C,EAAE,GAAG,KAAK7X,CAAL,GAAS+U,CAAC,CAAC/U,CAAtB;AAAA,YAAyB8X,EAAE,GAAG,KAAKf,CAAL,GAAShC,CAAC,CAACgC,CAAzC;AACA,eAAOc,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAtB;AAEA,OA7VgC;AA+VjCqrC,yBAAmB,EAAE,6BAAWpuC,CAAX,EAAe;AAEnC,eAAOnH,IAAI,CAAC4nB,GAAL,CAAU,KAAKx1B,CAAL,GAAS+U,CAAC,CAAC/U,CAArB,IAA2B4N,IAAI,CAAC4nB,GAAL,CAAU,KAAKze,CAAL,GAAShC,CAAC,CAACgC,CAArB,CAAlC;AAEA,OAnWgC;AAqWjCqsC,eAAS,EAAE,mBAAW1uD,MAAX,EAAoB;AAE9B,eAAO,KAAKsuD,SAAL,GAAiBvwC,cAAjB,CAAiC/d,MAAjC,CAAP;AAEA,OAzWgC;AA2WjC8qD,UAAI,EAAE,cAAWzqC,CAAX,EAAcsuC,KAAd,EAAsB;AAE3B,aAAKrjD,CAAL,IAAU,CAAE+U,CAAC,CAAC/U,CAAF,GAAM,KAAKA,CAAb,IAAmBqjD,KAA7B;AACA,aAAKtsC,CAAL,IAAU,CAAEhC,CAAC,CAACgC,CAAF,GAAM,KAAKA,CAAb,IAAmBssC,KAA7B;AAEA,eAAO,IAAP;AAEA,OAlXgC;AAoXjCC,iBAAW,EAAE,qBAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,aAAKrjD,CAAL,GAASujD,EAAE,CAACvjD,CAAH,GAAO,CAAEwjD,EAAE,CAACxjD,CAAH,GAAOujD,EAAE,CAACvjD,CAAZ,IAAkBqjD,KAAlC;AACA,aAAKtsC,CAAL,GAASwsC,EAAE,CAACxsC,CAAH,GAAO,CAAEysC,EAAE,CAACzsC,CAAH,GAAOwsC,EAAE,CAACxsC,CAAZ,IAAkBssC,KAAlC;AAEA,eAAO,IAAP;AAEA,OA3XgC;AA6XjCI,YAAM,EAAE,gBAAW1uC,CAAX,EAAe;AAEtB,eAAWA,CAAC,CAAC/U,CAAF,KAAQ,KAAKA,CAAf,IAAwB+U,CAAC,CAACgC,CAAF,KAAQ,KAAKA,CAA9C;AAEA,OAjYgC;AAmYjC2sC,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAK/Q,CAAL,GAASiyB,KAAK,CAAElhB,MAAF,CAAd;AACA,aAAKgG,CAAL,GAASkb,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AAEA,eAAO,IAAP;AAEA,OA5YgC;AA8YjC4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAK/Q,CAAvB;AACAiyB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKgG,CAA3B;AAEA,eAAOkb,KAAP;AAEA,OAxZgC;AA0ZjC2xB,yBAAmB,EAAE,6BAAWC,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAE1D,YAAKA,MAAM,KAAKtN,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,qEAAd;AAEA;;AAED,aAAKnN,CAAL,GAAS6jD,SAAS,CAACC,IAAV,CAAgB3nC,KAAhB,CAAT;AACA,aAAKpF,CAAL,GAAS8sC,SAAS,CAACE,IAAV,CAAgB5nC,KAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OAvagC;AAyajC6nC,kBAAY,EAAE,sBAAWzS,MAAX,EAAmB38B,KAAnB,EAA2B;AAExC,YAAMqR,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAUv8B,KAAV,CAAV;AAAA,YAA6B+Q,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUx8B,KAAV,CAAjC;AAEA,YAAM5U,CAAC,GAAG,KAAKA,CAAL,GAASuxC,MAAM,CAACvxC,CAA1B;AACA,YAAM+W,CAAC,GAAG,KAAKA,CAAL,GAASw6B,MAAM,CAACx6B,CAA1B;AAEA,aAAK/W,CAAL,GAASA,CAAC,GAAGimB,CAAJ,GAAQlP,CAAC,GAAG4O,CAAZ,GAAgB4rB,MAAM,CAACvxC,CAAhC;AACA,aAAK+W,CAAL,GAAS/W,CAAC,GAAG2lB,CAAJ,GAAQ5O,CAAC,GAAGkP,CAAZ,GAAgBsrB,MAAM,CAACx6B,CAAhC;AAEA,eAAO,IAAP;AAEA,OArbgC;AAubjCwE,YAAM,EAAE,kBAAY;AAEnB,aAAKvb,CAAL,GAAS4N,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAKxE,CAAL,GAASnJ,IAAI,CAAC2N,MAAL,EAAT;AAEA,eAAO,IAAP;AAEA;AA9bgC,KAAlC;;AAkcA,aAAS0oC,OAAT,GAAmB;AAElB,WAAK5B,QAAL,GAAgB,CAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAIf,CAJe,EAIZ,CAJY,EAIT,CAJS,CAAhB;;AAQA,UAAK13C,SAAS,CAACjW,MAAV,GAAmB,CAAxB,EAA4B;AAE3B8B,eAAO,CAACD,KAAR,CAAe,+EAAf;AAEA;AAED;;AAEDK,UAAM,CAACiiC,MAAP,CAAeorB,OAAO,CAAC13C,SAAvB,EAAkC;AAEjC23C,eAAS,EAAE,IAFsB;AAIjCxxC,SAAG,EAAE,aAAWyxC,GAAX,EAAgBC,GAAhB,EAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDC,GAAnD,EAAyD;AAE7D,YAAMC,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,GAAUT,GAAV;AAAeS,UAAE,CAAE,CAAF,CAAF,GAAUN,GAAV;AAAeM,UAAE,CAAE,CAAF,CAAF,GAAUH,GAAV;AAC9BG,UAAE,CAAE,CAAF,CAAF,GAAUR,GAAV;AAAeQ,UAAE,CAAE,CAAF,CAAF,GAAUL,GAAV;AAAeK,UAAE,CAAE,CAAF,CAAF,GAAUF,GAAV;AAC9BE,UAAE,CAAE,CAAF,CAAF,GAAUP,GAAV;AAAeO,UAAE,CAAE,CAAF,CAAF,GAAUJ,GAAV;AAAeI,UAAE,CAAE,CAAF,CAAF,GAAUD,GAAV;AAE9B,eAAO,IAAP;AAEA,OAdgC;AAgBjCE,cAAQ,EAAE,oBAAY;AAErB,aAAKnyC,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP;AAQA,eAAO,IAAP;AAEA,OA5BgC;AA8BjC/C,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuByqC,SAAvB,CAAkC,KAAKrB,QAAvC,CAAP;AAEA,OAlCgC;AAoCjC9xC,UAAI,EAAE,cAAWwZ,CAAX,EAAe;AAEpB,YAAM66B,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMyC,EAAE,GAAG/6B,CAAC,CAACs4B,QAAb;AAEAuC,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACtCF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACtCF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAEtC,eAAO,IAAP;AAEA,OA/CgC;AAiDjCC,kBAAY,EAAE,sBAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE9CF,aAAK,CAACG,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AACAF,aAAK,CAACE,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AACAD,aAAK,CAACC,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AAEA,eAAO,IAAP;AAEA,OAzDgC;AA2DjCC,oBAAc,EAAE,wBAAWr7B,CAAX,EAAe;AAE9B,YAAM+6B,EAAE,GAAG/6B,CAAC,CAACs4B,QAAb;AAEA,aAAK3vC,GAAL,CAECoyC,EAAE,CAAE,CAAF,CAFH,EAEUA,EAAE,CAAE,CAAF,CAFZ,EAEmBA,EAAE,CAAE,CAAF,CAFrB,EAGCA,EAAE,CAAE,CAAF,CAHH,EAGUA,EAAE,CAAE,CAAF,CAHZ,EAGmBA,EAAE,CAAE,CAAF,CAHrB,EAICA,EAAE,CAAE,CAAF,CAJH,EAIUA,EAAE,CAAE,CAAF,CAJZ,EAImBA,EAAE,CAAE,EAAF,CAJrB;AAQA,eAAO,IAAP;AAEA,OAzEgC;AA2EjC7C,cAAQ,EAAE,kBAAWl4B,CAAX,EAAe;AAExB,eAAO,KAAKs7B,gBAAL,CAAuB,IAAvB,EAA6Bt7B,CAA7B,CAAP;AAEA,OA/EgC;AAiFjCu7B,iBAAW,EAAE,qBAAWv7B,CAAX,EAAe;AAE3B,eAAO,KAAKs7B,gBAAL,CAAuBt7B,CAAvB,EAA0B,IAA1B,CAAP;AAEA,OArFgC;AAuFjCs7B,sBAAgB,EAAE,0BAAWzwD,CAAX,EAAcC,CAAd,EAAkB;AAEnC,YAAM0wD,EAAE,GAAG3wD,CAAC,CAACytD,QAAb;AACA,YAAMmD,EAAE,GAAG3wD,CAAC,CAACwtD,QAAb;AACA,YAAMuC,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMoD,GAAG,GAAGF,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBG,GAAG,GAAGH,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCI,GAAG,GAAGJ,EAAE,CAAE,CAAF,CAA5C;AACA,YAAMK,GAAG,GAAGL,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBM,GAAG,GAAGN,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCO,GAAG,GAAGP,EAAE,CAAE,CAAF,CAA5C;AACA,YAAMQ,GAAG,GAAGR,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBS,GAAG,GAAGT,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCU,GAAG,GAAGV,EAAE,CAAE,CAAF,CAA5C;AAEA,YAAMW,GAAG,GAAGV,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBW,GAAG,GAAGX,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCY,GAAG,GAAGZ,EAAE,CAAE,CAAF,CAA5C;AACA,YAAMa,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AACA,YAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCkB,GAAG,GAAGlB,EAAE,CAAE,CAAF,CAA5C;AAEAZ,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGa,GAAxC;AACA5B,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGc,GAAxC;AACA7B,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGW,GAAN,GAAYV,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGe,GAAxC;AAEA9B,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGM,GAAN,GAAYL,GAAG,GAAGQ,GAAlB,GAAwBP,GAAG,GAAGU,GAAxC;AACA5B,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGO,GAAN,GAAYN,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGW,GAAxC;AACA7B,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGU,GAAlB,GAAwBT,GAAG,GAAGY,GAAxC;AAEA9B,UAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGG,GAAN,GAAYF,GAAG,GAAGK,GAAlB,GAAwBJ,GAAG,GAAGO,GAAxC;AACA5B,UAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGM,GAAlB,GAAwBL,GAAG,GAAGQ,GAAxC;AACA7B,UAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGS,GAAxC;AAEA,eAAO,IAAP;AAEA,OAnHgC;AAqHjCj0C,oBAAc,EAAE,wBAAWkT,CAAX,EAAe;AAE9B,YAAMi/B,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAC5Bi/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAC5Bi/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAE5B,eAAO,IAAP;AAEA,OA/HgC;AAiIjCghC,iBAAW,EAAE,uBAAY;AAExB,YAAM/B,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMztD,CAAC,GAAGgwD,EAAE,CAAE,CAAF,CAAZ;AAAA,YAAmB/vD,CAAC,GAAG+vD,EAAE,CAAE,CAAF,CAAzB;AAAA,YAAgC3+B,CAAC,GAAG2+B,EAAE,CAAE,CAAF,CAAtC;AAAA,YACC1+B,CAAC,GAAG0+B,EAAE,CAAE,CAAF,CADP;AAAA,YACcjyD,CAAC,GAAGiyD,EAAE,CAAE,CAAF,CADpB;AAAA,YAC2Bv+B,CAAC,GAAGu+B,EAAE,CAAE,CAAF,CADjC;AAAA,YAEC36B,CAAC,GAAG26B,EAAE,CAAE,CAAF,CAFP;AAAA,YAEc5pC,CAAC,GAAG4pC,EAAE,CAAE,CAAF,CAFpB;AAAA,YAE2BvvD,CAAC,GAAGuvD,EAAE,CAAE,CAAF,CAFjC;AAIA,eAAOhwD,CAAC,GAAGjC,CAAJ,GAAQ0C,CAAR,GAAYT,CAAC,GAAGyxB,CAAJ,GAAQrL,CAApB,GAAwBnmB,CAAC,GAAGqxB,CAAJ,GAAQ7wB,CAAhC,GAAoCR,CAAC,GAAGwxB,CAAJ,GAAQ4D,CAA5C,GAAgDhE,CAAC,GAAGC,CAAJ,GAAQlL,CAAxD,GAA4DiL,CAAC,GAAGtzB,CAAJ,GAAQs3B,CAA3E;AAEA,OA3IgC;AA6IjC28B,gBAAU,EAAE,oBAAW9wC,MAAX,EAAmB+wC,iBAAnB,EAAuC;AAElD,YAAKA,iBAAiB,KAAKpjD,SAA3B,EAAuC;AAEtCjN,iBAAO,CAAC2W,IAAR,CAAc,kFAAd;AAEA;;AAED,YAAM23C,EAAE,GAAGhvC,MAAM,CAACusC,QAAlB;AAAA,YACCuC,EAAE,GAAG,KAAKvC,QADX;AAAA,YAGC8B,GAAG,GAAGW,EAAE,CAAE,CAAF,CAHT;AAAA,YAGgBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAHxB;AAAA,YAG+BL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAHvC;AAAA,YAICV,GAAG,GAAGU,EAAE,CAAE,CAAF,CAJT;AAAA,YAIgBP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAJxB;AAAA,YAI+BJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAJvC;AAAA,YAKCT,GAAG,GAAGS,EAAE,CAAE,CAAF,CALT;AAAA,YAKgBN,GAAG,GAAGM,EAAE,CAAE,CAAF,CALxB;AAAA,YAK+BH,GAAG,GAAGG,EAAE,CAAE,CAAF,CALvC;AAAA,YAOCgC,GAAG,GAAGnC,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAPzB;AAAA,YAQCuC,GAAG,GAAGrC,GAAG,GAAGL,GAAN,GAAYM,GAAG,GAAGP,GARzB;AAAA,YASC4C,GAAG,GAAGxC,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GATzB;AAAA,YAWC4C,GAAG,GAAG9C,GAAG,GAAG2C,GAAN,GAAYxC,GAAG,GAAGyC,GAAlB,GAAwBtC,GAAG,GAAGuC,GAXrC;AAaA,YAAKC,GAAG,KAAK,CAAb,EAAiB,OAAO,KAAKv0C,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,CAAP;AAEjB,YAAMw0C,MAAM,GAAG,IAAID,GAAnB;AAEArC,UAAE,CAAE,CAAF,CAAF,GAAUkC,GAAG,GAAGI,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEH,GAAG,GAAGD,GAAN,GAAYG,GAAG,GAAGL,GAApB,IAA4B4C,MAAtC;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEF,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAApB,IAA4B2C,MAAtC;AAEAtC,UAAE,CAAE,CAAF,CAAF,GAAUmC,GAAG,GAAGG,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAED,GAAG,GAAGR,GAAN,GAAYM,GAAG,GAAGJ,GAApB,IAA4B6C,MAAtC;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEH,GAAG,GAAGL,GAAN,GAAYM,GAAG,GAAGP,GAApB,IAA4B+C,MAAtC;AAEAtC,UAAE,CAAE,CAAF,CAAF,GAAUoC,GAAG,GAAGE,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEN,GAAG,GAAGD,GAAN,GAAYG,GAAG,GAAGL,GAApB,IAA4B+C,MAAtC;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEL,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAApB,IAA4B8C,MAAtC;AAEA,eAAO,IAAP;AAEA,OApLgC;AAsLjCC,eAAS,EAAE,qBAAY;AAEtB,YAAIC,GAAJ;AACA,YAAMr9B,CAAC,GAAG,KAAKs4B,QAAf;AAEA+E,WAAG,GAAGr9B,CAAC,CAAE,CAAF,CAAP;AAAcA,SAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,SAAC,CAAE,CAAF,CAAD,GAASq9B,GAAT;AAC/BA,WAAG,GAAGr9B,CAAC,CAAE,CAAF,CAAP;AAAcA,SAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,SAAC,CAAE,CAAF,CAAD,GAASq9B,GAAT;AAC/BA,WAAG,GAAGr9B,CAAC,CAAE,CAAF,CAAP;AAAcA,SAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,SAAC,CAAE,CAAF,CAAD,GAASq9B,GAAT;AAE/B,eAAO,IAAP;AAEA,OAjMgC;AAmMjCC,qBAAe,EAAE,yBAAWC,OAAX,EAAqB;AAErC,eAAO,KAAKlC,cAAL,CAAqBkC,OAArB,EAA+BV,UAA/B,CAA2C,IAA3C,EAAkDO,SAAlD,EAAP;AAEA,OAvMgC;AAyMjCI,wBAAkB,EAAE,4BAAWzhC,CAAX,EAAe;AAElC,YAAMiE,CAAC,GAAG,KAAKs4B,QAAf;AAEAv8B,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AACAjE,SAAC,CAAE,CAAF,CAAD,GAASiE,CAAC,CAAE,CAAF,CAAV;AAEA,eAAO,IAAP;AAEA,OAzNgC;AA2NjCy9B,oBAAc,EAAE,wBAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBC,EAAvB,EAA2BrY,QAA3B,EAAqCsY,EAArC,EAAyCC,EAAzC,EAA8C;AAE7D,YAAM7hC,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAU5B,QAAV,CAAV;AACA,YAAM5pB,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAU7B,QAAV,CAAV;AAEA,aAAK78B,GAAL,CACCi1C,EAAE,GAAG1hC,CADN,EACS0hC,EAAE,GAAGhiC,CADd,EACiB,CAAEgiC,EAAF,IAAS1hC,CAAC,GAAG4hC,EAAJ,GAASliC,CAAC,GAAGmiC,EAAtB,IAA6BD,EAA7B,GAAkCJ,EADnD,EAEC,CAAEG,EAAF,GAAOjiC,CAFR,EAEWiiC,EAAE,GAAG3hC,CAFhB,EAEmB,CAAE2hC,EAAF,IAAS,CAAEjiC,CAAF,GAAMkiC,EAAN,GAAW5hC,CAAC,GAAG6hC,EAAxB,IAA+BA,EAA/B,GAAoCJ,EAFvD,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP;AAMA,OAtOgC;AAwOjCv1C,WAAK,EAAE,eAAWw1C,EAAX,EAAeC,EAAf,EAAoB;AAE1B,YAAMhD,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,IAAW+C,EAAX;AAAe/C,UAAE,CAAE,CAAF,CAAF,IAAW+C,EAAX;AAAe/C,UAAE,CAAE,CAAF,CAAF,IAAW+C,EAAX;AAC9B/C,UAAE,CAAE,CAAF,CAAF,IAAWgD,EAAX;AAAehD,UAAE,CAAE,CAAF,CAAF,IAAWgD,EAAX;AAAehD,UAAE,CAAE,CAAF,CAAF,IAAWgD,EAAX;AAE9B,eAAO,IAAP;AAEA,OAjPgC;AAmPjCG,YAAM,EAAE,gBAAW33C,KAAX,EAAmB;AAE1B,YAAM6V,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAV;AACA,YAAMuV,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAV;AAEA,YAAMw0C,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMoD,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AACA,YAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCkB,GAAG,GAAGlB,EAAE,CAAE,CAAF,CAA5C;AAEAA,UAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGw/B,GAAJ,GAAU9/B,CAAC,GAAGigC,GAAxB;AACAhB,UAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGy/B,GAAJ,GAAU//B,CAAC,GAAGkgC,GAAxB;AACAjB,UAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAG0/B,GAAJ,GAAUhgC,CAAC,GAAGmgC,GAAxB;AAEAlB,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEj/B,CAAF,GAAM8/B,GAAN,GAAYx/B,CAAC,GAAG2/B,GAA1B;AACAhB,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEj/B,CAAF,GAAM+/B,GAAN,GAAYz/B,CAAC,GAAG4/B,GAA1B;AACAjB,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEj/B,CAAF,GAAMggC,GAAN,GAAY1/B,CAAC,GAAG6/B,GAA1B;AAEA,eAAO,IAAP;AAEA,OAvQgC;AAyQjCkC,eAAS,EAAE,mBAAWP,EAAX,EAAeC,EAAf,EAAoB;AAE9B,YAAM9C,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,IAAW6C,EAAE,GAAG7C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,UAAE,CAAE,CAAF,CAAF,IAAW6C,EAAE,GAAG7C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,UAAE,CAAE,CAAF,CAAF,IAAW6C,EAAE,GAAG7C,EAAE,CAAE,CAAF,CAAlB;AAClDA,UAAE,CAAE,CAAF,CAAF,IAAW8C,EAAE,GAAG9C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,UAAE,CAAE,CAAF,CAAF,IAAW8C,EAAE,GAAG9C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,UAAE,CAAE,CAAF,CAAF,IAAW8C,EAAE,GAAG9C,EAAE,CAAE,CAAF,CAAlB;AAElD,eAAO,IAAP;AAEA,OAlRgC;AAoRjCnB,YAAM,EAAE,gBAAW3tC,MAAX,EAAoB;AAE3B,YAAM8uC,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMyC,EAAE,GAAGhvC,MAAM,CAACusC,QAAlB;;AAEA,aAAM,IAAIhtD,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG,CAArB,EAAwBA,GAAC,EAAzB,EAA+B;AAE9B,cAAKuvD,EAAE,CAAEvvD,GAAF,CAAF,KAAYyvD,EAAE,CAAEzvD,GAAF,CAAnB,EAA2B,OAAO,KAAP;AAE3B;;AAED,eAAO,IAAP;AAEA,OAjSgC;AAmSjCquD,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;;AAE5B,aAAM,IAAI1b,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG,CAArB,EAAwBA,GAAC,EAAzB,EAA+B;AAE9B,eAAKgtD,QAAL,CAAehtD,GAAf,IAAqB48B,KAAK,CAAE58B,GAAC,GAAG0b,MAAN,CAA1B;AAEA;;AAED,eAAO,IAAP;AAEA,OA/SgC;AAiTjC4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,YAAM6zC,EAAE,GAAG,KAAKvC,QAAhB;AAEApwB,aAAK,CAAElhB,MAAF,CAAL,GAAkB6zC,EAAE,CAAE,CAAF,CAApB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AAEA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AAEA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AAEA,eAAO3yB,KAAP;AAEA;AAtUgC,KAAlC;;AA0UA,QAAIg2B,OAAJ;;AAEA,QAAMC,UAAU,GAAG;AAElBC,gBAAU,EAAE,oBAAW1yD,KAAX,EAAmB;AAE9B,YAAK,UAAU6R,IAAV,CAAgB7R,KAAK,CAAC2yD,GAAtB,CAAL,EAAmC;AAElC,iBAAO3yD,KAAK,CAAC2yD,GAAb;AAEA;;AAED,YAAK,OAAOC,iBAAP,IAA4B,WAAjC,EAA+C;AAE9C,iBAAO5yD,KAAK,CAAC2yD,GAAb;AAEA;;AAED,YAAI/hB,MAAJ;;AAEA,YAAK5wC,KAAK,YAAY4yD,iBAAtB,EAA0C;AAEzChiB,gBAAM,GAAG5wC,KAAT;AAEA,SAJD,MAIO;AAEN,cAAKwyD,OAAO,KAAKxkD,SAAjB,EAA6BwkD,OAAO,GAAGxgD,QAAQ,CAACK,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAAV;AAE7BmgD,iBAAO,CAACtkC,KAAR,GAAgBluB,KAAK,CAACkuB,KAAtB;AACAskC,iBAAO,CAACvkC,MAAR,GAAiBjuB,KAAK,CAACiuB,MAAvB;;AAEA,cAAM4kC,OAAO,GAAGL,OAAO,CAACM,UAAR,CAAoB,IAApB,CAAhB;;AAEA,cAAK9yD,KAAK,YAAY+yD,SAAtB,EAAkC;AAEjCF,mBAAO,CAACG,YAAR,CAAsBhzD,KAAtB,EAA6B,CAA7B,EAAgC,CAAhC;AAEA,WAJD,MAIO;AAEN6yD,mBAAO,CAACI,SAAR,CAAmBjzD,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgCA,KAAK,CAACkuB,KAAtC,EAA6CluB,KAAK,CAACiuB,MAAnD;AAEA;;AAED2iB,gBAAM,GAAG4hB,OAAT;AAEA;;AAED,YAAK5hB,MAAM,CAAC1iB,KAAP,GAAe,IAAf,IAAuB0iB,MAAM,CAAC3iB,MAAP,GAAgB,IAA5C,EAAmD;AAElD,iBAAO2iB,MAAM,CAAC+C,SAAP,CAAkB,YAAlB,EAAgC,GAAhC,CAAP;AAEA,SAJD,MAIO;AAEN,iBAAO/C,MAAM,CAAC+C,SAAP,CAAkB,WAAlB,CAAP;AAEA;AAED;AAvDiB,KAAnB;AA2DA,QAAIuf,SAAS,GAAG,CAAhB;;AAEA,aAASC,OAAT,CAAkBnzD,KAAlB,EAAyBozD,OAAzB,EAAkCC,KAAlC,EAAyCC,KAAzC,EAAgDC,SAAhD,EAA2DC,SAA3D,EAAsEC,MAAtE,EAA8EnvD,IAA9E,EAAoFovD,UAApF,EAAgGC,QAAhG,EAA2G;AAE1GxyD,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAE3yC,aAAK,EAAEwpD,SAAS;AAAlB,OAAnC;AAEA,WAAK3J,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAKvqD,IAAL,GAAY,EAAZ;AAEA,WAAKqB,KAAL,GAAaA,KAAK,KAAKgO,SAAV,GAAsBhO,KAAtB,GAA8BmzD,OAAO,CAACS,aAAnD;AACA,WAAKC,OAAL,GAAe,EAAf;AAEA,WAAKT,OAAL,GAAeA,OAAO,KAAKplD,SAAZ,GAAwBolD,OAAxB,GAAkCD,OAAO,CAACW,eAAzD;AAEA,WAAKT,KAAL,GAAaA,KAAK,KAAKrlD,SAAV,GAAsBqlD,KAAtB,GAA8B7S,mBAA3C;AACA,WAAK8S,KAAL,GAAaA,KAAK,KAAKtlD,SAAV,GAAsBslD,KAAtB,GAA8B9S,mBAA3C;AAEA,WAAK+S,SAAL,GAAiBA,SAAS,KAAKvlD,SAAd,GAA0BulD,SAA1B,GAAsCxS,YAAvD;AACA,WAAKyS,SAAL,GAAiBA,SAAS,KAAKxlD,SAAd,GAA0BwlD,SAA1B,GAAsCtS,wBAAvD;AAEA,WAAKwS,UAAL,GAAkBA,UAAU,KAAK1lD,SAAf,GAA2B0lD,UAA3B,GAAwC,CAA1D;AAEA,WAAKD,MAAL,GAAcA,MAAM,KAAKzlD,SAAX,GAAuBylD,MAAvB,GAAgCvR,UAA9C;AACA,WAAK6R,cAAL,GAAsB,IAAtB;AACA,WAAKzvD,IAAL,GAAYA,IAAI,KAAK0J,SAAT,GAAqB1J,IAArB,GAA4B88C,gBAAxC;AAEA,WAAK9lC,MAAL,GAAc,IAAIswC,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,WAAKoI,MAAL,GAAc,IAAIpI,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,WAAK9P,MAAL,GAAc,IAAI8P,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,WAAK9R,QAAL,GAAgB,CAAhB;AAEA,WAAKma,gBAAL,GAAwB,IAAxB;AACA,WAAK5zC,MAAL,GAAc,IAAImuC,OAAJ,EAAd;AAEA,WAAK0F,eAAL,GAAuB,IAAvB;AACA,WAAKC,gBAAL,GAAwB,KAAxB;AACA,WAAKC,KAAL,GAAa,IAAb;AACA,WAAKC,eAAL,GAAuB,CAAvB,CApC0G,CAoChF;AAE1B;AACA;AACA;AACA;;AACA,WAAKV,QAAL,GAAgBA,QAAQ,KAAK3lD,SAAb,GAAyB2lD,QAAzB,GAAoCvN,cAApD;AAEA,WAAKxuB,OAAL,GAAe,CAAf;AACA,WAAK08B,QAAL,GAAgB,IAAhB;AAEA;;AAEDnB,WAAO,CAACS,aAAR,GAAwB5lD,SAAxB;AACAmlD,WAAO,CAACW,eAAR,GAA0B9T,SAA1B;AAEAmT,WAAO,CAACr8C,SAAR,GAAoB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAE9E0M,iBAAW,EAAE2vC,OAFiE;AAI9EoB,eAAS,EAAE,IAJmE;AAM9EC,kBAAY,EAAE,wBAAY;AAEzB,aAAKn0C,MAAL,CAAY0xC,cAAZ,CAA4B,KAAKz2C,MAAL,CAAY/Q,CAAxC,EAA2C,KAAK+Q,MAAL,CAAYgG,CAAvD,EAA0D,KAAK0yC,MAAL,CAAYzpD,CAAtE,EAAyE,KAAKypD,MAAL,CAAY1yC,CAArF,EAAwF,KAAKw4B,QAA7F,EAAuG,KAAKgC,MAAL,CAAYvxC,CAAnH,EAAsH,KAAKuxC,MAAL,CAAYx6B,CAAlI;AAEA,OAV6E;AAY9EpH,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAhB6E;AAkB9EA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAK59C,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB;AAEA,aAAKqB,KAAL,GAAau8C,MAAM,CAACv8C,KAApB;AACA,aAAK6zD,OAAL,GAAetX,MAAM,CAACsX,OAAP,CAAex1D,KAAf,CAAsB,CAAtB,CAAf;AAEA,aAAK+0D,OAAL,GAAe7W,MAAM,CAAC6W,OAAtB;AAEA,aAAKC,KAAL,GAAa9W,MAAM,CAAC8W,KAApB;AACA,aAAKC,KAAL,GAAa/W,MAAM,CAAC+W,KAApB;AAEA,aAAKC,SAAL,GAAiBhX,MAAM,CAACgX,SAAxB;AACA,aAAKC,SAAL,GAAiBjX,MAAM,CAACiX,SAAxB;AAEA,aAAKE,UAAL,GAAkBnX,MAAM,CAACmX,UAAzB;AAEA,aAAKD,MAAL,GAAclX,MAAM,CAACkX,MAArB;AACA,aAAKM,cAAL,GAAsBxX,MAAM,CAACwX,cAA7B;AACA,aAAKzvD,IAAL,GAAYi4C,MAAM,CAACj4C,IAAnB;AAEA,aAAKgX,MAAL,CAAYR,IAAZ,CAAkByhC,MAAM,CAACjhC,MAAzB;AACA,aAAK04C,MAAL,CAAYl5C,IAAZ,CAAkByhC,MAAM,CAACyX,MAAzB;AACA,aAAKlY,MAAL,CAAYhhC,IAAZ,CAAkByhC,MAAM,CAACT,MAAzB;AACA,aAAKhC,QAAL,GAAgByC,MAAM,CAACzC,QAAvB;AAEA,aAAKma,gBAAL,GAAwB1X,MAAM,CAAC0X,gBAA/B;AACA,aAAK5zC,MAAL,CAAYvF,IAAZ,CAAkByhC,MAAM,CAACl8B,MAAzB;AAEA,aAAK6zC,eAAL,GAAuB3X,MAAM,CAAC2X,eAA9B;AACA,aAAKC,gBAAL,GAAwB5X,MAAM,CAAC4X,gBAA/B;AACA,aAAKC,KAAL,GAAa7X,MAAM,CAAC6X,KAApB;AACA,aAAKC,eAAL,GAAuB9X,MAAM,CAAC8X,eAA9B;AACA,aAAKV,QAAL,GAAgBpX,MAAM,CAACoX,QAAvB;AAEA,eAAO,IAAP;AAEA,OAvD6E;AAyD9Ec,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAMqhC,YAAY,GAAKrhC,IAAI,KAAKrlB,SAAT,IAAsB,OAAOqlB,IAAP,KAAgB,QAA7D;;AAEA,YAAK,CAAEqhC,YAAF,IAAkBrhC,IAAI,CAACshC,QAAL,CAAe,KAAKpL,IAApB,MAA+Bv7C,SAAtD,EAAkE;AAEjE,iBAAOqlB,IAAI,CAACshC,QAAL,CAAe,KAAKpL,IAApB,CAAP;AAEA;;AAED,YAAM5kB,MAAM,GAAG;AAEdiwB,kBAAQ,EAAE;AACTh9B,mBAAO,EAAE,GADA;AAETtzB,gBAAI,EAAE,SAFG;AAGTuwD,qBAAS,EAAE;AAHF,WAFI;AAQdtL,cAAI,EAAE,KAAKA,IARG;AASd5qD,cAAI,EAAE,KAAKA,IATG;AAWdy0D,iBAAO,EAAE,KAAKA,OAXA;AAadY,gBAAM,EAAE,CAAE,KAAKA,MAAL,CAAYzpD,CAAd,EAAiB,KAAKypD,MAAL,CAAY1yC,CAA7B,CAbM;AAcdhG,gBAAM,EAAE,CAAE,KAAKA,MAAL,CAAY/Q,CAAd,EAAiB,KAAK+Q,MAAL,CAAYgG,CAA7B,CAdM;AAedw6B,gBAAM,EAAE,CAAE,KAAKA,MAAL,CAAYvxC,CAAd,EAAiB,KAAKuxC,MAAL,CAAYx6B,CAA7B,CAfM;AAgBdw4B,kBAAQ,EAAE,KAAKA,QAhBD;AAkBdnQ,cAAI,EAAE,CAAE,KAAK0pB,KAAP,EAAc,KAAKC,KAAnB,CAlBQ;AAoBdG,gBAAM,EAAE,KAAKA,MApBC;AAqBdnvD,cAAI,EAAE,KAAKA,IArBG;AAsBdqvD,kBAAQ,EAAE,KAAKA,QAtBD;AAwBdH,mBAAS,EAAE,KAAKA,SAxBF;AAyBdD,mBAAS,EAAE,KAAKA,SAzBF;AA0BdG,oBAAU,EAAE,KAAKA,UA1BH;AA4BdU,eAAK,EAAE,KAAKA,KA5BE;AA8BdD,0BAAgB,EAAE,KAAKA,gBA9BT;AA+BdE,yBAAe,EAAE,KAAKA;AA/BR,SAAf;;AAmCA,YAAK,KAAKr0D,KAAL,KAAegO,SAApB,EAAgC;AAE/B;AAEA,cAAMhO,KAAK,GAAG,KAAKA,KAAnB;;AAEA,cAAKA,KAAK,CAACupD,IAAN,KAAev7C,SAApB,EAAgC;AAE/BhO,iBAAK,CAACupD,IAAN,GAAaR,SAAS,CAACG,YAAV,EAAb,CAF+B,CAEQ;AAEvC;;AAED,cAAK,CAAEwL,YAAF,IAAkBrhC,IAAI,CAACyhC,MAAL,CAAa90D,KAAK,CAACupD,IAAnB,MAA8Bv7C,SAArD,EAAiE;AAEhE,gBAAI8c,GAAJ;;AAEA,gBAAKuG,KAAK,CAAC0jC,OAAN,CAAe/0D,KAAf,CAAL,EAA8B;AAE7B;AAEA8qB,iBAAG,GAAG,EAAN;;AAEA,mBAAM,IAAIlrB,GAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGrK,KAAK,CAACf,MAA3B,EAAmCW,GAAC,GAAGyK,CAAvC,EAA0CzK,GAAC,EAA3C,EAAiD;AAEhDkrB,mBAAG,CAACxqB,IAAJ,CAAUmyD,UAAU,CAACC,UAAX,CAAuB1yD,KAAK,CAAEJ,GAAF,CAA5B,CAAV;AAEA;AAED,aAZD,MAYO;AAEN;AAEAkrB,iBAAG,GAAG2nC,UAAU,CAACC,UAAX,CAAuB1yD,KAAvB,CAAN;AAEA;;AAEDqzB,gBAAI,CAACyhC,MAAL,CAAa90D,KAAK,CAACupD,IAAnB,IAA4B;AAC3BA,kBAAI,EAAEvpD,KAAK,CAACupD,IADe;AAE3Bz+B,iBAAG,EAAEA;AAFsB,aAA5B;AAKA;;AAED6Z,gBAAM,CAAC3kC,KAAP,GAAeA,KAAK,CAACupD,IAArB;AAEA;;AAED,YAAK,CAAEmL,YAAP,EAAsB;AAErBrhC,cAAI,CAACshC,QAAL,CAAe,KAAKpL,IAApB,IAA6B5kB,MAA7B;AAEA;;AAED,eAAOA,MAAP;AAEA,OA7J6E;AA+J9EpnB,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA,OAnK6E;AAqK9E0wD,iBAAW,EAAE,qBAAWC,EAAX,EAAgB;AAE5B,YAAK,KAAK7B,OAAL,KAAiBpT,SAAtB,EAAkC,OAAOiV,EAAP;AAElCA,UAAE,CAACtI,YAAH,CAAiB,KAAKtsC,MAAtB;;AAEA,YAAK40C,EAAE,CAAC1qD,CAAH,GAAO,CAAP,IAAY0qD,EAAE,CAAC1qD,CAAH,GAAO,CAAxB,EAA4B;AAE3B,kBAAS,KAAK8oD,KAAd;AAEC,iBAAK9S,cAAL;AAEC0U,gBAAE,CAAC1qD,CAAH,GAAO0qD,EAAE,CAAC1qD,CAAH,GAAO4N,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC1qD,CAAf,CAAd;AACA;;AAED,iBAAKi2C,mBAAL;AAECyU,gBAAE,CAAC1qD,CAAH,GAAO0qD,EAAE,CAAC1qD,CAAH,GAAO,CAAP,GAAW,CAAX,GAAe,CAAtB;AACA;;AAED,iBAAKk2C,sBAAL;AAEC,kBAAKtoC,IAAI,CAAC4nB,GAAL,CAAU5nB,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC1qD,CAAf,IAAqB,CAA/B,MAAuC,CAA5C,EAAgD;AAE/C0qD,kBAAE,CAAC1qD,CAAH,GAAO4N,IAAI,CAAC4yC,IAAL,CAAWkK,EAAE,CAAC1qD,CAAd,IAAoB0qD,EAAE,CAAC1qD,CAA9B;AAEA,eAJD,MAIO;AAEN0qD,kBAAE,CAAC1qD,CAAH,GAAO0qD,EAAE,CAAC1qD,CAAH,GAAO4N,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC1qD,CAAf,CAAd;AAEA;;AAED;AAxBF;AA4BA;;AAED,YAAK0qD,EAAE,CAAC3zC,CAAH,GAAO,CAAP,IAAY2zC,EAAE,CAAC3zC,CAAH,GAAO,CAAxB,EAA4B;AAE3B,kBAAS,KAAKgyC,KAAd;AAEC,iBAAK/S,cAAL;AAEC0U,gBAAE,CAAC3zC,CAAH,GAAO2zC,EAAE,CAAC3zC,CAAH,GAAOnJ,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC3zC,CAAf,CAAd;AACA;;AAED,iBAAKk/B,mBAAL;AAECyU,gBAAE,CAAC3zC,CAAH,GAAO2zC,EAAE,CAAC3zC,CAAH,GAAO,CAAP,GAAW,CAAX,GAAe,CAAtB;AACA;;AAED,iBAAKm/B,sBAAL;AAEC,kBAAKtoC,IAAI,CAAC4nB,GAAL,CAAU5nB,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC3zC,CAAf,IAAqB,CAA/B,MAAuC,CAA5C,EAAgD;AAE/C2zC,kBAAE,CAAC3zC,CAAH,GAAOnJ,IAAI,CAAC4yC,IAAL,CAAWkK,EAAE,CAAC3zC,CAAd,IAAoB2zC,EAAE,CAAC3zC,CAA9B;AAEA,eAJD,MAIO;AAEN2zC,kBAAE,CAAC3zC,CAAH,GAAO2zC,EAAE,CAAC3zC,CAAH,GAAOnJ,IAAI,CAAC4N,KAAL,CAAYkvC,EAAE,CAAC3zC,CAAf,CAAd;AAEA;;AAED;AAxBF;AA4BA;;AAED,YAAK,KAAK8yC,KAAV,EAAkB;AAEjBa,YAAE,CAAC3zC,CAAH,GAAO,IAAI2zC,EAAE,CAAC3zC,CAAd;AAEA;;AAED,eAAO2zC,EAAP;AAEA;AAnP6E,KAA3D,CAApB;AAuPA9zD,UAAM,CAACk7C,cAAP,CAAuB8W,OAAO,CAACr8C,SAA/B,EAA0C,aAA1C,EAAyD;AAExDmG,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,YAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKkuB,OAAL;AAEtB;AANuD,KAAzD;;AAUA,aAASs9B,OAAT,GAA+C;AAAA,UAA7B3qD,CAA6B,uEAAzB,CAAyB;AAAA,UAAtB+W,CAAsB,uEAAlB,CAAkB;AAAA,UAAfuL,CAAe,uEAAX,CAAW;AAAA,UAAR4H,CAAQ,uEAAJ,CAAI;AAE9C,WAAKlqB,CAAL,GAASA,CAAT;AACA,WAAK+W,CAAL,GAASA,CAAT;AACA,WAAKuL,CAAL,GAASA,CAAT;AACA,WAAK4H,CAAL,GAASA,CAAT;AAEA;;AAEDtzB,UAAM,CAAC0qD,gBAAP,CAAyBqJ,OAAO,CAACp+C,SAAjC,EAA4C;AAE3C,eAAS;AAERrG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKoc,CAAZ;AAEA,SANO;AAQR5P,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKmjB,CAAL,GAASnjB,KAAT;AAEA;AAZO,OAFkC;AAkB3C,gBAAU;AAET+G,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKgkB,CAAZ;AAEA,SANQ;AAQTxX,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAK+qB,CAAL,GAAS/qB,KAAT;AAEA;AAZQ;AAlBiC,KAA5C;AAoCAvI,UAAM,CAACiiC,MAAP,CAAe8xB,OAAO,CAACp+C,SAAvB,EAAkC;AAEjCq+C,eAAS,EAAE,IAFsB;AAIjCl4C,SAAG,EAAE,aAAW1S,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAoB4H,CAApB,EAAwB;AAE5B,aAAKlqB,CAAL,GAASA,CAAT;AACA,aAAK+W,CAAL,GAASA,CAAT;AACA,aAAKuL,CAAL,GAASA,CAAT;AACA,aAAK4H,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAbgC;AAejCs3B,eAAS,EAAE,mBAAWC,MAAX,EAAoB;AAE9B,aAAKzhD,CAAL,GAASyhD,MAAT;AACA,aAAK1qC,CAAL,GAAS0qC,MAAT;AACA,aAAKn/B,CAAL,GAASm/B,MAAT;AACA,aAAKv3B,CAAL,GAASu3B,MAAT;AAEA,eAAO,IAAP;AAEA,OAxBgC;AA0BjCC,UAAI,EAAE,cAAW1hD,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAhCgC;AAkCjC2hD,UAAI,EAAE,cAAW5qC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAxCgC;AA0CjC8zC,UAAI,EAAE,cAAWvoC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAhDgC;AAkDjCwoC,UAAI,EAAE,cAAW5gC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAxDgC;AA0DjC03B,kBAAY,EAAE,sBAAWzlC,KAAX,EAAkBhd,KAAlB,EAA0B;AAEvC,gBAASgd,KAAT;AAEC,eAAK,CAAL;AAAQ,iBAAKnc,CAAL,GAASb,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAK4X,CAAL,GAAS5X,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAKmjB,CAAL,GAASnjB,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAK+qB,CAAL,GAAS/qB,KAAT;AAAgB;;AACxB;AAAS,kBAAM,IAAIvM,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AANV;;AAUA,eAAO,IAAP;AAEA,OAxEgC;AA0EjC0lC,kBAAY,EAAE,sBAAW1lC,KAAX,EAAmB;AAEhC,gBAASA,KAAT;AAEC,eAAK,CAAL;AAAQ,mBAAO,KAAKnc,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAK+W,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAKuL,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAK4H,CAAZ;;AACR;AAAS,kBAAM,IAAIt3B,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AANV;AAUA,OAtFgC;AAwFjCxM,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKjZ,CAA3B,EAA8B,KAAK+W,CAAnC,EAAsC,KAAKuL,CAA3C,EAA8C,KAAK4H,CAAnD,CAAP;AAEA,OA5FgC;AA8FjC3Z,UAAI,EAAE,cAAWwE,CAAX,EAAe;AAEpB,aAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX;AACA,aAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAAX;AACA,aAAKuL,CAAL,GAASvN,CAAC,CAACuN,CAAX;AACA,aAAK4H,CAAL,GAAWnV,CAAC,CAACmV,CAAF,KAAQzmB,SAAV,GAAwBsR,CAAC,CAACmV,CAA1B,GAA8B,CAAvC;AAEA,eAAO,IAAP;AAEA,OAvGgC;AAyGjC5X,SAAG,EAAE,aAAWyC,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK20C,UAAL,CAAiB/sC,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AACA,aAAK4H,CAAL,IAAUnV,CAAC,CAACmV,CAAZ;AAEA,eAAO,IAAP;AAEA,OAzHgC;AA2HjC63B,eAAS,EAAE,mBAAWp8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AACA,aAAKrD,CAAL,IAAUqD,CAAV;AACA,aAAKuE,CAAL,IAAUvE,CAAV;AAEA,eAAO,IAAP;AAEA,OApIgC;AAsIjCm8B,gBAAU,EAAE,oBAAWltD,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AACA,aAAKuL,CAAL,GAAS1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAjB;AACA,aAAK4H,CAAL,GAASt1B,CAAC,CAACs1B,CAAF,GAAMr1B,CAAC,CAACq1B,CAAjB;AAEA,eAAO,IAAP;AAEA,OA/IgC;AAiJjC9X,qBAAe,EAAE,yBAAW2C,CAAX,EAAc4Q,CAAd,EAAkB;AAElC,aAAK3lB,CAAL,IAAU+U,CAAC,CAAC/U,CAAF,GAAM2lB,CAAhB;AACA,aAAK5O,CAAL,IAAUhC,CAAC,CAACgC,CAAF,GAAM4O,CAAhB;AACA,aAAKrD,CAAL,IAAUvN,CAAC,CAACuN,CAAF,GAAMqD,CAAhB;AACA,aAAKuE,CAAL,IAAUnV,CAAC,CAACmV,CAAF,GAAMvE,CAAhB;AAEA,eAAO,IAAP;AAEA,OA1JgC;AA4JjCnU,SAAG,EAAE,aAAWuD,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK2J,UAAL,CAAiB/B,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AACA,aAAK4H,CAAL,IAAUnV,CAAC,CAACmV,CAAZ;AAEA,eAAO,IAAP;AAEA,OA5KgC;AA8KjC83B,eAAS,EAAE,mBAAWr8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AACA,aAAKrD,CAAL,IAAUqD,CAAV;AACA,aAAKuE,CAAL,IAAUvE,CAAV;AAEA,eAAO,IAAP;AAEA,OAvLgC;AAyLjC7O,gBAAU,EAAE,oBAAWliB,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AACA,aAAKuL,CAAL,GAAS1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAjB;AACA,aAAK4H,CAAL,GAASt1B,CAAC,CAACs1B,CAAF,GAAMr1B,CAAC,CAACq1B,CAAjB;AAEA,eAAO,IAAP;AAEA,OAlMgC;AAoMjCzX,oBAAc,EAAE,wBAAWgvC,MAAX,EAAoB;AAEnC,aAAKzhD,CAAL,IAAUyhD,MAAV;AACA,aAAK1qC,CAAL,IAAU0qC,MAAV;AACA,aAAKn/B,CAAL,IAAUm/B,MAAV;AACA,aAAKv3B,CAAL,IAAUu3B,MAAV;AAEA,eAAO,IAAP;AAEA,OA7MgC;AA+MjCsJ,kBAAY,EAAE,sBAAWhhC,CAAX,EAAe;AAE5B,YAAM/pB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BuL,CAAC,GAAG,KAAKA,CAAvC;AAAA,YAA0C4H,CAAC,GAAG,KAAKA,CAAnD;AACA,YAAMv3B,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,aAAKriD,CAAL,GAASrN,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAAnC,GAAuC3vB,CAAC,CAAE,EAAF,CAAD,GAAUu3B,CAA1D;AACA,aAAKnT,CAAL,GAASpkB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAAnC,GAAuC3vB,CAAC,CAAE,EAAF,CAAD,GAAUu3B,CAA1D;AACA,aAAK5H,CAAL,GAAS3vB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,EAAF,CAAD,GAAU2vB,CAApC,GAAwC3vB,CAAC,CAAE,EAAF,CAAD,GAAUu3B,CAA3D;AACA,aAAKA,CAAL,GAASv3B,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,EAAF,CAAD,GAAU2vB,CAApC,GAAwC3vB,CAAC,CAAE,EAAF,CAAD,GAAUu3B,CAA3D;AAEA,eAAO,IAAP;AAEA,OA3NgC;AA6NjCi4B,kBAAY,EAAE,sBAAWV,MAAX,EAAoB;AAEjC,eAAO,KAAKhvC,cAAL,CAAqB,IAAIgvC,MAAzB,CAAP;AAEA,OAjOgC;AAmOjCuJ,gCAA0B,EAAE,oCAAWhlB,CAAX,EAAe;AAE1C;AAEA;AAEA,aAAK9b,CAAL,GAAS,IAAItc,IAAI,CAACq9C,IAAL,CAAWjlB,CAAC,CAAC9b,CAAb,CAAb;AAEA,YAAMvE,CAAC,GAAG/X,IAAI,CAACmK,IAAL,CAAW,IAAIiuB,CAAC,CAAC9b,CAAF,GAAM8b,CAAC,CAAC9b,CAAvB,CAAV;;AAEA,YAAKvE,CAAC,GAAG,MAAT,EAAkB;AAEjB,eAAK3lB,CAAL,GAAS,CAAT;AACA,eAAK+W,CAAL,GAAS,CAAT;AACA,eAAKuL,CAAL,GAAS,CAAT;AAEA,SAND,MAMO;AAEN,eAAKtiB,CAAL,GAASgmC,CAAC,CAAChmC,CAAF,GAAM2lB,CAAf;AACA,eAAK5O,CAAL,GAASivB,CAAC,CAACjvB,CAAF,GAAM4O,CAAf;AACA,eAAKrD,CAAL,GAAS0jB,CAAC,CAAC1jB,CAAF,GAAMqD,CAAf;AAEA;;AAED,eAAO,IAAP;AAEA,OA7PgC;AA+PjCulC,oCAA8B,EAAE,wCAAWnhC,CAAX,EAAe;AAE9C;AAEA;AAEA,YAAInV,KAAJ,EAAW5U,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,CAN8C,CAM1B;;AACpB,YAAM6oC,OAAO,GAAG,IAAhB;AAAA,YAAuB;AACtBC,gBAAQ,GAAG,GADZ;AAAA,YACkB;AAEjBxG,UAAE,GAAG76B,CAAC,CAACs4B,QAHR;AAAA,YAKCgJ,GAAG,GAAGzG,EAAE,CAAE,CAAF,CALT;AAAA,YAKgB0G,GAAG,GAAG1G,EAAE,CAAE,CAAF,CALxB;AAAA,YAK+B2G,GAAG,GAAG3G,EAAE,CAAE,CAAF,CALvC;AAAA,YAMC4G,GAAG,GAAG5G,EAAE,CAAE,CAAF,CANT;AAAA,YAMgB6G,GAAG,GAAG7G,EAAE,CAAE,CAAF,CANxB;AAAA,YAM+B8G,GAAG,GAAG9G,EAAE,CAAE,CAAF,CANvC;AAAA,YAOC+G,GAAG,GAAG/G,EAAE,CAAE,CAAF,CAPT;AAAA,YAOgBgH,GAAG,GAAGhH,EAAE,CAAE,CAAF,CAPxB;AAAA,YAO+BiH,GAAG,GAAGjH,EAAE,CAAE,EAAF,CAPvC;;AASA,YAAOh3C,IAAI,CAAC4nB,GAAL,CAAU81B,GAAG,GAAGE,GAAhB,IAAwBL,OAA1B,IACEv9C,IAAI,CAAC4nB,GAAL,CAAU+1B,GAAG,GAAGI,GAAhB,IAAwBR,OAD1B,IAEEv9C,IAAI,CAAC4nB,GAAL,CAAUk2B,GAAG,GAAGE,GAAhB,IAAwBT,OAF/B,EAE2C;AAE1C;AACA;AACA;AAEA,cAAOv9C,IAAI,CAAC4nB,GAAL,CAAU81B,GAAG,GAAGE,GAAhB,IAAwBJ,QAA1B,IACEx9C,IAAI,CAAC4nB,GAAL,CAAU+1B,GAAG,GAAGI,GAAhB,IAAwBP,QAD1B,IAEEx9C,IAAI,CAAC4nB,GAAL,CAAUk2B,GAAG,GAAGE,GAAhB,IAAwBR,QAF1B,IAGEx9C,IAAI,CAAC4nB,GAAL,CAAU61B,GAAG,GAAGI,GAAN,GAAYI,GAAZ,GAAkB,CAA5B,IAAkCT,QAHzC,EAGsD;AAErD;AAEA,iBAAK14C,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;AAEA,mBAAO,IAAP,CANqD,CAMxC;AAEb,WAjByC,CAmB1C;;;AAEAkC,eAAK,GAAGhH,IAAI,CAACC,EAAb;AAEA,cAAMi+C,EAAE,GAAG,CAAET,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,cAAMU,EAAE,GAAG,CAAEN,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,cAAMO,EAAE,GAAG,CAAEH,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,cAAMI,EAAE,GAAG,CAAEX,GAAG,GAAGE,GAAR,IAAgB,CAA3B;AACA,cAAMU,EAAE,GAAG,CAAEX,GAAG,GAAGI,GAAR,IAAgB,CAA3B;AACA,cAAMQ,EAAE,GAAG,CAAET,GAAG,GAAGE,GAAR,IAAgB,CAA3B;;AAEA,cAAOE,EAAE,GAAGC,EAAP,IAAiBD,EAAE,GAAGE,EAA3B,EAAkC;AAEjC;AAEA,gBAAKF,EAAE,GAAGX,OAAV,EAAoB;AAEnBnrD,eAAC,GAAG,CAAJ;AACA+W,eAAC,GAAG,WAAJ;AACAuL,eAAC,GAAG,WAAJ;AAEA,aAND,MAMO;AAENtiB,eAAC,GAAG4N,IAAI,CAACmK,IAAL,CAAW+zC,EAAX,CAAJ;AACA/0C,eAAC,GAAGk1C,EAAE,GAAGjsD,CAAT;AACAsiB,eAAC,GAAG4pC,EAAE,GAAGlsD,CAAT;AAEA;AAED,WAlBD,MAkBO,IAAK+rD,EAAE,GAAGC,EAAV,EAAe;AAErB;AAEA,gBAAKD,EAAE,GAAGZ,OAAV,EAAoB;AAEnBnrD,eAAC,GAAG,WAAJ;AACA+W,eAAC,GAAG,CAAJ;AACAuL,eAAC,GAAG,WAAJ;AAEA,aAND,MAMO;AAENvL,eAAC,GAAGnJ,IAAI,CAACmK,IAAL,CAAWg0C,EAAX,CAAJ;AACA/rD,eAAC,GAAGisD,EAAE,GAAGl1C,CAAT;AACAuL,eAAC,GAAG6pC,EAAE,GAAGp1C,CAAT;AAEA;AAED,WAlBM,MAkBA;AAEN;AAEA,gBAAKi1C,EAAE,GAAGb,OAAV,EAAoB;AAEnBnrD,eAAC,GAAG,WAAJ;AACA+W,eAAC,GAAG,WAAJ;AACAuL,eAAC,GAAG,CAAJ;AAEA,aAND,MAMO;AAENA,eAAC,GAAG1U,IAAI,CAACmK,IAAL,CAAWi0C,EAAX,CAAJ;AACAhsD,eAAC,GAAGksD,EAAE,GAAG5pC,CAAT;AACAvL,eAAC,GAAGo1C,EAAE,GAAG7pC,CAAT;AAEA;AAED;;AAED,eAAK5P,GAAL,CAAU1S,CAAV,EAAa+W,CAAb,EAAgBuL,CAAhB,EAAmB1N,KAAnB;AAEA,iBAAO,IAAP,CAxF0C,CAwF7B;AAEb,SA5G6C,CA8G9C;;;AAEA,YAAI+Q,CAAC,GAAG/X,IAAI,CAACmK,IAAL,CAAW,CAAE6zC,GAAG,GAAGF,GAAR,KAAkBE,GAAG,GAAGF,GAAxB,IAClB,CAAEH,GAAG,GAAGI,GAAR,KAAkBJ,GAAG,GAAGI,GAAxB,CADkB,GAElB,CAAEH,GAAG,GAAGF,GAAR,KAAkBE,GAAG,GAAGF,GAAxB,CAFO,CAAR,CAhH8C,CAkHZ;;AAElC,YAAK19C,IAAI,CAAC4nB,GAAL,CAAU7P,CAAV,IAAgB,KAArB,EAA6BA,CAAC,GAAG,CAAJ,CApHiB,CAsH9C;AACA;;AAEA,aAAK3lB,CAAL,GAAS,CAAE4rD,GAAG,GAAGF,GAAR,IAAgB/lC,CAAzB;AACA,aAAK5O,CAAL,GAAS,CAAEw0C,GAAG,GAAGI,GAAR,IAAgBhmC,CAAzB;AACA,aAAKrD,CAAL,GAAS,CAAEkpC,GAAG,GAAGF,GAAR,IAAgB3lC,CAAzB;AACA,aAAKuE,CAAL,GAAStc,IAAI,CAACq9C,IAAL,CAAW,CAAEI,GAAG,GAAGI,GAAN,GAAYI,GAAZ,GAAkB,CAApB,IAA0B,CAArC,CAAT;AAEA,eAAO,IAAP;AAEA,OA/XgC;AAiYjC/5C,SAAG,EAAE,aAAWiD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACkE,GAAL,CAAU,KAAK9R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACkE,GAAL,CAAU,KAAKiF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACkE,GAAL,CAAU,KAAKwQ,CAAf,EAAkBvN,CAAC,CAACuN,CAApB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAACkE,GAAL,CAAU,KAAKoY,CAAf,EAAkBnV,CAAC,CAACmV,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OA1YgC;AA4YjCnY,SAAG,EAAE,aAAWgD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAU,KAAK/R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAU,KAAKgF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAU,KAAKuQ,CAAf,EAAkBvN,CAAC,CAACuN,CAApB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAACmE,GAAL,CAAU,KAAKmY,CAAf,EAAkBnV,CAAC,CAACmV,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OArZgC;AAuZjC+0B,WAAK,EAAE,eAAWntC,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,aAAK/R,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAAC9R,CAAd,EAAiB4N,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAAC/R,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACiF,CAAd,EAAiBnJ,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACgF,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACwQ,CAAd,EAAiB1U,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACuQ,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACoY,CAAd,EAAiBtc,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACmY,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OAlagC;AAoajCo4B,iBAAW,EAAE,qBAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,aAAKxiD,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKxiD,CAAvB,CAAlB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKzrC,CAAvB,CAAlB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKlgC,CAAvB,CAAlB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKt4B,CAAvB,CAAlB,CAAT;AAEA,eAAO,IAAP;AAEA,OA7agC;AA+ajCu4B,iBAAW,EAAE,qBAAW3wC,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,YAAMrd,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,eAAO,KAAKytD,YAAL,CAAmBztD,MAAM,IAAI,CAA7B,EAAiC+d,cAAjC,CAAiD7E,IAAI,CAACmE,GAAL,CAAUD,GAAV,EAAelE,IAAI,CAACkE,GAAL,CAAUC,GAAV,EAAerd,MAAf,CAAf,CAAjD,CAAP;AAEA,OArbgC;AAubjC8mB,WAAK,EAAE,iBAAY;AAElB,aAAKxb,CAAL,GAAS4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC4N,KAAL,CAAY,KAAK8G,CAAjB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAAC4N,KAAL,CAAY,KAAK0O,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OAhcgC;AAkcjCs2B,UAAI,EAAE,gBAAY;AAEjB,aAAKxgD,CAAL,GAAS4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC4yC,IAAL,CAAW,KAAKl+B,CAAhB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAAC4yC,IAAL,CAAW,KAAKt2B,CAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OA3cgC;AA6cjCw4B,WAAK,EAAE,iBAAY;AAElB,aAAK1iD,CAAL,GAAS4N,IAAI,CAAC80C,KAAL,CAAY,KAAK1iD,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC80C,KAAL,CAAY,KAAK3rC,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC80C,KAAL,CAAY,KAAKpgC,CAAjB,CAAT;AACA,aAAK4H,CAAL,GAAStc,IAAI,CAAC80C,KAAL,CAAY,KAAKx4B,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OAtdgC;AAwdjCy4B,iBAAW,EAAE,uBAAY;AAExB,aAAK3iD,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAjB,GAAuC4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAhD;AACA,aAAK+W,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAjB,GAAuCnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAhD;AACA,aAAKuL,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB1U,IAAI,CAAC4yC,IAAL,CAAW,KAAKl+B,CAAhB,CAAjB,GAAuC1U,IAAI,CAAC4N,KAAL,CAAY,KAAK8G,CAAjB,CAAhD;AACA,aAAK4H,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBtc,IAAI,CAAC4yC,IAAL,CAAW,KAAKt2B,CAAhB,CAAjB,GAAuCtc,IAAI,CAAC4N,KAAL,CAAY,KAAK0O,CAAjB,CAAhD;AAEA,eAAO,IAAP;AAEA,OAjegC;AAmejC04B,YAAM,EAAE,kBAAY;AAEnB,aAAK5iD,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAK+W,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAKuL,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAK4H,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,eAAO,IAAP;AAEA,OA5egC;AA8ejCpX,SAAG,EAAE,aAAWiC,CAAX,EAAe;AAEnB,eAAO,KAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX,GAAe,KAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAA1B,GAA8B,KAAKuL,CAAL,GAASvN,CAAC,CAACuN,CAAzC,GAA6C,KAAK4H,CAAL,GAASnV,CAAC,CAACmV,CAA/D;AAEA,OAlfgC;AAofjC44B,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAK9iD,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKuL,CAAL,GAAS,KAAKA,CAAlD,GAAsD,KAAK4H,CAAL,GAAS,KAAKA,CAA3E;AAEA,OAxfgC;AA0fjCx1B,YAAM,EAAE,kBAAY;AAEnB,eAAOkZ,IAAI,CAACmK,IAAL,CAAW,KAAK/X,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKuL,CAAL,GAAS,KAAKA,CAAlD,GAAsD,KAAK4H,CAAL,GAAS,KAAKA,CAA/E,CAAP;AAEA,OA9fgC;AAggBjC64B,qBAAe,EAAE,2BAAY;AAE5B,eAAOn1C,IAAI,CAAC4nB,GAAL,CAAU,KAAKx1B,CAAf,IAAqB4N,IAAI,CAAC4nB,GAAL,CAAU,KAAKze,CAAf,CAArB,GAA0CnJ,IAAI,CAAC4nB,GAAL,CAAU,KAAKlT,CAAf,CAA1C,GAA+D1U,IAAI,CAAC4nB,GAAL,CAAU,KAAKtL,CAAf,CAAtE;AAEA,OApgBgC;AAsgBjC84B,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKb,YAAL,CAAmB,KAAKztD,MAAL,MAAiB,CAApC,CAAP;AAEA,OA1gBgC;AA4gBjC0uD,eAAS,EAAE,mBAAW1uD,MAAX,EAAoB;AAE9B,eAAO,KAAKsuD,SAAL,GAAiBvwC,cAAjB,CAAiC/d,MAAjC,CAAP;AAEA,OAhhBgC;AAkhBjC8qD,UAAI,EAAE,cAAWzqC,CAAX,EAAcsuC,KAAd,EAAsB;AAE3B,aAAKrjD,CAAL,IAAU,CAAE+U,CAAC,CAAC/U,CAAF,GAAM,KAAKA,CAAb,IAAmBqjD,KAA7B;AACA,aAAKtsC,CAAL,IAAU,CAAEhC,CAAC,CAACgC,CAAF,GAAM,KAAKA,CAAb,IAAmBssC,KAA7B;AACA,aAAK/gC,CAAL,IAAU,CAAEvN,CAAC,CAACuN,CAAF,GAAM,KAAKA,CAAb,IAAmB+gC,KAA7B;AACA,aAAKn5B,CAAL,IAAU,CAAEnV,CAAC,CAACmV,CAAF,GAAM,KAAKA,CAAb,IAAmBm5B,KAA7B;AAEA,eAAO,IAAP;AAEA,OA3hBgC;AA6hBjCC,iBAAW,EAAE,qBAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,aAAKrjD,CAAL,GAASujD,EAAE,CAACvjD,CAAH,GAAO,CAAEwjD,EAAE,CAACxjD,CAAH,GAAOujD,EAAE,CAACvjD,CAAZ,IAAkBqjD,KAAlC;AACA,aAAKtsC,CAAL,GAASwsC,EAAE,CAACxsC,CAAH,GAAO,CAAEysC,EAAE,CAACzsC,CAAH,GAAOwsC,EAAE,CAACxsC,CAAZ,IAAkBssC,KAAlC;AACA,aAAK/gC,CAAL,GAASihC,EAAE,CAACjhC,CAAH,GAAO,CAAEkhC,EAAE,CAAClhC,CAAH,GAAOihC,EAAE,CAACjhC,CAAZ,IAAkB+gC,KAAlC;AACA,aAAKn5B,CAAL,GAASq5B,EAAE,CAACr5B,CAAH,GAAO,CAAEs5B,EAAE,CAACt5B,CAAH,GAAOq5B,EAAE,CAACr5B,CAAZ,IAAkBm5B,KAAlC;AAEA,eAAO,IAAP;AAEA,OAtiBgC;AAwiBjCI,YAAM,EAAE,gBAAW1uC,CAAX,EAAe;AAEtB,eAAWA,CAAC,CAAC/U,CAAF,KAAQ,KAAKA,CAAf,IAAwB+U,CAAC,CAACgC,CAAF,KAAQ,KAAKA,CAArC,IAA8ChC,CAAC,CAACuN,CAAF,KAAQ,KAAKA,CAA3D,IAAoEvN,CAAC,CAACmV,CAAF,KAAQ,KAAKA,CAA1F;AAEA,OA5iBgC;AA8iBjCw5B,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAK/Q,CAAL,GAASiyB,KAAK,CAAElhB,MAAF,CAAd;AACA,aAAKgG,CAAL,GAASkb,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AACA,aAAKuR,CAAL,GAAS2P,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AACA,aAAKmZ,CAAL,GAAS+H,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AAEA,eAAO,IAAP;AAEA,OAzjBgC;AA2jBjC4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAK/Q,CAAvB;AACAiyB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKgG,CAA3B;AACAkb,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKuR,CAA3B;AACA2P,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKmZ,CAA3B;AAEA,eAAO+H,KAAP;AAEA,OAvkBgC;AAykBjC2xB,yBAAmB,EAAE,6BAAWC,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAE1D,YAAKA,MAAM,KAAKtN,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,qEAAd;AAEA;;AAED,aAAKnN,CAAL,GAAS6jD,SAAS,CAACC,IAAV,CAAgB3nC,KAAhB,CAAT;AACA,aAAKpF,CAAL,GAAS8sC,SAAS,CAACE,IAAV,CAAgB5nC,KAAhB,CAAT;AACA,aAAKmG,CAAL,GAASuhC,SAAS,CAACuI,IAAV,CAAgBjwC,KAAhB,CAAT;AACA,aAAK+N,CAAL,GAAS25B,SAAS,CAACwI,IAAV,CAAgBlwC,KAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OAxlBgC;AA0lBjCZ,YAAM,EAAE,kBAAY;AAEnB,aAAKvb,CAAL,GAAS4N,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAKxE,CAAL,GAASnJ,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAK+G,CAAL,GAAS1U,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAK2O,CAAL,GAAStc,IAAI,CAAC2N,MAAL,EAAT;AAEA,eAAO,IAAP;AAEA;AAnmBgC,KAAlC;AAumBA;;;;;;AAKA,aAAS+wC,iBAAT,CAA4B3oC,KAA5B,EAAmCD,MAAnC,EAA2CqJ,OAA3C,EAAqD;AAEpD,WAAKpJ,KAAL,GAAaA,KAAb;AACA,WAAKD,MAAL,GAAcA,MAAd;AAEA,WAAK6oC,OAAL,GAAe,IAAI5B,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBhnC,KAAnB,EAA0BD,MAA1B,CAAf;AACA,WAAK8oC,WAAL,GAAmB,KAAnB;AAEA,WAAKC,QAAL,GAAgB,IAAI9B,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBhnC,KAAnB,EAA0BD,MAA1B,CAAhB;AAEAqJ,aAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,WAAK2/B,OAAL,GAAe,IAAI9D,OAAJ,CAAanlD,SAAb,EAAwBspB,OAAO,CAAC87B,OAAhC,EAAyC97B,OAAO,CAAC+7B,KAAjD,EAAwD/7B,OAAO,CAACg8B,KAAhE,EAAuEh8B,OAAO,CAACi8B,SAA/E,EAA0Fj8B,OAAO,CAACk8B,SAAlG,EAA6Gl8B,OAAO,CAACm8B,MAArH,EAA6Hn8B,OAAO,CAAChzB,IAArI,EAA2IgzB,OAAO,CAACo8B,UAAnJ,EAA+Jp8B,OAAO,CAACq8B,QAAvK,CAAf;AAEA,WAAKsD,OAAL,CAAaj3D,KAAb,GAAqB,EAArB;AACA,WAAKi3D,OAAL,CAAaj3D,KAAb,CAAmBkuB,KAAnB,GAA2BA,KAA3B;AACA,WAAK+oC,OAAL,CAAaj3D,KAAb,CAAmBiuB,MAAnB,GAA4BA,MAA5B;AAEA,WAAKgpC,OAAL,CAAa/C,eAAb,GAA+B58B,OAAO,CAAC48B,eAAR,KAA4BlmD,SAA5B,GAAwCspB,OAAO,CAAC48B,eAAhD,GAAkE,KAAjG;AACA,WAAK+C,OAAL,CAAazD,SAAb,GAAyBl8B,OAAO,CAACk8B,SAAR,KAAsBxlD,SAAtB,GAAkCspB,OAAO,CAACk8B,SAA1C,GAAsDzS,YAA/E;AAEA,WAAKmW,WAAL,GAAmB5/B,OAAO,CAAC4/B,WAAR,KAAwBlpD,SAAxB,GAAoCspB,OAAO,CAAC4/B,WAA5C,GAA0D,IAA7E;AACA,WAAKC,aAAL,GAAqB7/B,OAAO,CAAC6/B,aAAR,KAA0BnpD,SAA1B,GAAsCspB,OAAO,CAAC6/B,aAA9C,GAA8D,IAAnF;AACA,WAAKC,YAAL,GAAoB9/B,OAAO,CAAC8/B,YAAR,KAAyBppD,SAAzB,GAAqCspB,OAAO,CAAC8/B,YAA7C,GAA4D,IAAhF;AAEA;;AAEDP,qBAAiB,CAAC//C,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAExF0M,iBAAW,EAAEqzC,iBAF2E;AAIxFQ,yBAAmB,EAAE,IAJmE;AAMxFhpC,aAAO,EAAE,iBAAWH,KAAX,EAAkBD,MAAlB,EAA2B;AAEnC,YAAK,KAAKC,KAAL,KAAeA,KAAf,IAAwB,KAAKD,MAAL,KAAgBA,MAA7C,EAAsD;AAErD,eAAKC,KAAL,GAAaA,KAAb;AACA,eAAKD,MAAL,GAAcA,MAAd;AAEA,eAAKgpC,OAAL,CAAaj3D,KAAb,CAAmBkuB,KAAnB,GAA2BA,KAA3B;AACA,eAAK+oC,OAAL,CAAaj3D,KAAb,CAAmBiuB,MAAnB,GAA4BA,MAA5B;AAEA,eAAK1Q,OAAL;AAEA;;AAED,aAAKy5C,QAAL,CAAc/5C,GAAd,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBiR,KAAzB,EAAgCD,MAAhC;AACA,aAAK6oC,OAAL,CAAa75C,GAAb,CAAkB,CAAlB,EAAqB,CAArB,EAAwBiR,KAAxB,EAA+BD,MAA/B;AAEA,OAvBuF;AAyBxF/T,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OA7BuF;AA+BxFA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAKruB,KAAL,GAAaquB,MAAM,CAACruB,KAApB;AACA,aAAKD,MAAL,GAAcsuB,MAAM,CAACtuB,MAArB;AAEA,aAAK+oC,QAAL,CAAcl8C,IAAd,CAAoByhC,MAAM,CAACya,QAA3B;AAEA,aAAKC,OAAL,GAAe1a,MAAM,CAAC0a,OAAP,CAAe/8C,KAAf,EAAf;AAEA,aAAKg9C,WAAL,GAAmB3a,MAAM,CAAC2a,WAA1B;AACA,aAAKC,aAAL,GAAqB5a,MAAM,CAAC4a,aAA5B;AACA,aAAKC,YAAL,GAAoB7a,MAAM,CAAC6a,YAA3B;AAEA,eAAO,IAAP;AAEA,OA9CuF;AAgDxF75C,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA;AApDuF,KAA3D,CAA9B;;AAwDA,aAASgzD,4BAAT,CAAuCppC,KAAvC,EAA8CD,MAA9C,EAAsDqJ,OAAtD,EAAgE;AAE/Du/B,uBAAiB,CAAC5iD,IAAlB,CAAwB,IAAxB,EAA8Bia,KAA9B,EAAqCD,MAArC,EAA6CqJ,OAA7C;AAEA,WAAKigC,OAAL,GAAe,CAAf;AAEA;;AAEDD,gCAA4B,CAACxgD,SAA7B,GAAyC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeyhD,iBAAiB,CAAC//C,SAAjC,CAAf,EAA6D;AAErG0M,iBAAW,EAAE8zC,4BAFwF;AAIrGE,oCAA8B,EAAE,IAJqE;AAMrG18C,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBsa,yBAAiB,CAAC//C,SAAlB,CAA4BgE,IAA5B,CAAiC7G,IAAjC,CAAuC,IAAvC,EAA6CsoC,MAA7C;AAEA,aAAKgb,OAAL,GAAehb,MAAM,CAACgb,OAAtB;AAEA,eAAO,IAAP;AAEA;AAdoG,KAA7D,CAAzC;;AAkBA,aAASE,UAAT,GAAkD;AAAA,UAA7BltD,CAA6B,uEAAzB,CAAyB;AAAA,UAAtB+W,CAAsB,uEAAlB,CAAkB;AAAA,UAAfuL,CAAe,uEAAX,CAAW;AAAA,UAAR4H,CAAQ,uEAAJ,CAAI;AAEjD,WAAKijC,EAAL,GAAUntD,CAAV;AACA,WAAKotD,EAAL,GAAUr2C,CAAV;AACA,WAAKs2C,EAAL,GAAU/qC,CAAV;AACA,WAAKgrC,EAAL,GAAUpjC,CAAV;AAEA;;AAEDtzB,UAAM,CAACiiC,MAAP,CAAeq0B,UAAf,EAA2B;AAE1BK,WAAK,EAAE,eAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBtyC,CAAvB,EAA2B;AAEjC,eAAOsyC,EAAE,CAACn9C,IAAH,CAASi9C,EAAT,EAAcD,KAAd,CAAqBE,EAArB,EAAyBryC,CAAzB,CAAP;AAEA,OANyB;AAQ1BuyC,eAAS,EAAE,mBAAWC,GAAX,EAAgBC,SAAhB,EAA2BC,IAA3B,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,UAAnD,EAA+D7yC,CAA/D,EAAmE;AAE7E;AAEA,YAAI8yC,EAAE,GAAGJ,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAb;AAAA,YACCI,EAAE,GAAGL,IAAI,CAAEC,UAAU,GAAG,CAAf,CADV;AAAA,YAECK,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAFV;AAAA,YAGCM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAHV;AAKA,YAAMO,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAAA,YACCM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CADV;AAAA,YAECO,EAAE,GAAGR,IAAI,CAAEC,UAAU,GAAG,CAAf,CAFV;AAAA,YAGCQ,EAAE,GAAGT,IAAI,CAAEC,UAAU,GAAG,CAAf,CAHV;;AAKA,YAAKI,EAAE,KAAKI,EAAP,IAAaP,EAAE,KAAKI,EAApB,IAA0BH,EAAE,KAAKI,EAAjC,IAAuCH,EAAE,KAAKI,EAAnD,EAAwD;AAEvD,cAAI7oC,CAAC,GAAG,IAAIvK,CAAZ;AAAA,cAEC+1B,GAAG,GAAG+c,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGI,EAAf,GAAoBH,EAAE,GAAGI,EAAzB,GAA8BH,EAAE,GAAGI,EAF1C;AAAA,cAICjjD,GAAG,GAAK2lC,GAAG,IAAI,CAAP,GAAW,CAAX,GAAe,CAAE,CAJ1B;AAAA,cAKCud,MAAM,GAAG,IAAIvd,GAAG,GAAGA,GALpB,CAFuD,CASvD;;AACA,cAAKud,MAAM,GAAGjd,MAAM,CAACC,OAArB,EAA+B;AAE9B,gBAAMN,GAAG,GAAGxjC,IAAI,CAACmK,IAAL,CAAW22C,MAAX,CAAZ;AAAA,gBACCC,GAAG,GAAG/gD,IAAI,CAACq1C,KAAL,CAAY7R,GAAZ,EAAiBD,GAAG,GAAG3lC,GAAvB,CADP;AAGAma,aAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUzrB,CAAC,GAAGgpC,GAAd,IAAsBvd,GAA1B;AACAh2B,aAAC,GAAGxN,IAAI,CAACwjC,GAAL,CAAUh2B,CAAC,GAAGuzC,GAAd,IAAsBvd,GAA1B;AAEA;;AAED,cAAMwd,IAAI,GAAGxzC,CAAC,GAAG5P,GAAjB;AAEA0iD,YAAE,GAAGA,EAAE,GAAGvoC,CAAL,GAAS2oC,EAAE,GAAGM,IAAnB;AACAT,YAAE,GAAGA,EAAE,GAAGxoC,CAAL,GAAS4oC,EAAE,GAAGK,IAAnB;AACAR,YAAE,GAAGA,EAAE,GAAGzoC,CAAL,GAAS6oC,EAAE,GAAGI,IAAnB;AACAP,YAAE,GAAGA,EAAE,GAAG1oC,CAAL,GAAS8oC,EAAE,GAAGG,IAAnB,CAzBuD,CA2BvD;;AACA,cAAKjpC,CAAC,KAAK,IAAIvK,CAAf,EAAmB;AAElB,gBAAMiL,CAAC,GAAG,IAAIzY,IAAI,CAACmK,IAAL,CAAWm2C,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoBC,EAAE,GAAGA,EAAzB,GAA8BC,EAAE,GAAGA,EAA9C,CAAd;AAEAH,cAAE,IAAI7nC,CAAN;AACA8nC,cAAE,IAAI9nC,CAAN;AACA+nC,cAAE,IAAI/nC,CAAN;AACAgoC,cAAE,IAAIhoC,CAAN;AAEA;AAED;;AAEDunC,WAAG,CAAEC,SAAF,CAAH,GAAmBK,EAAnB;AACAN,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBM,EAAvB;AACAP,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBO,EAAvB;AACAR,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBQ,EAAvB;AAEA,OApEyB;AAsE1BQ,6BAAuB,EAAE,iCAAWjB,GAAX,EAAgBC,SAAhB,EAA2BC,IAA3B,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,UAAnD,EAAgE;AAExF,YAAMC,EAAE,GAAGJ,IAAI,CAAEC,UAAF,CAAf;AACA,YAAMI,EAAE,GAAGL,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,YAAMK,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,YAAMM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAEA,YAAMO,EAAE,GAAGN,IAAI,CAAEC,UAAF,CAAf;AACA,YAAMM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,YAAMO,EAAE,GAAGR,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,YAAMQ,EAAE,GAAGT,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAEAL,WAAG,CAAEC,SAAF,CAAH,GAAmBK,EAAE,GAAGO,EAAL,GAAUJ,EAAE,GAAGC,EAAf,GAAoBH,EAAE,GAAGK,EAAzB,GAA8BJ,EAAE,GAAGG,EAAtD;AACAX,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBM,EAAE,GAAGM,EAAL,GAAUJ,EAAE,GAAGE,EAAf,GAAoBH,EAAE,GAAGE,EAAzB,GAA8BJ,EAAE,GAAGM,EAA1D;AACAZ,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBO,EAAE,GAAGK,EAAL,GAAUJ,EAAE,GAAGG,EAAf,GAAoBN,EAAE,GAAGK,EAAzB,GAA8BJ,EAAE,GAAGG,EAA1D;AACAV,WAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBQ,EAAE,GAAGI,EAAL,GAAUP,EAAE,GAAGI,EAAf,GAAoBH,EAAE,GAAGI,EAAzB,GAA8BH,EAAE,GAAGI,EAA1D;AAEA,eAAOZ,GAAP;AAEA;AAzFyB,KAA3B;AA6FAh3D,UAAM,CAAC0qD,gBAAP,CAAyB4L,UAAU,CAAC3gD,SAApC,EAA+C;AAE9CvM,OAAC,EAAE;AAEFkG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKinD,EAAZ;AAEA,SANC;AAQFz6C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKguD,EAAL,GAAUhuD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OAF2C;AAmB9C/3C,OAAC,EAAE;AAEF7Q,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKknD,EAAZ;AAEA,SANC;AAQF16C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKiuD,EAAL,GAAUjuD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OAnB2C;AAoC9CxsC,OAAC,EAAE;AAEFpc,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKmnD,EAAZ;AAEA,SANC;AAQF36C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKkuD,EAAL,GAAUluD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OApC2C;AAqD9C5kC,OAAC,EAAE;AAEFhkB,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKonD,EAAZ;AAEA,SANC;AAQF56C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKmuD,EAAL,GAAUnuD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC;AArD2C,KAA/C;AAwEAl4D,UAAM,CAACiiC,MAAP,CAAeq0B,UAAU,CAAC3gD,SAA1B,EAAqC;AAEpCwiD,kBAAY,EAAE,IAFsB;AAIpCr8C,SAAG,EAAE,aAAW1S,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAoB4H,CAApB,EAAwB;AAE5B,aAAKijC,EAAL,GAAUntD,CAAV;AACA,aAAKotD,EAAL,GAAUr2C,CAAV;AACA,aAAKs2C,EAAL,GAAU/qC,CAAV;AACA,aAAKgrC,EAAL,GAAUpjC,CAAV;;AAEA,aAAK4kC,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAfmC;AAiBpCn/C,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKk0C,EAA3B,EAA+B,KAAKC,EAApC,EAAwC,KAAKC,EAA7C,EAAiD,KAAKC,EAAtD,CAAP;AAEA,OArBmC;AAuBpC/8C,UAAI,EAAE,cAAWwC,UAAX,EAAwB;AAE7B,aAAKo6C,EAAL,GAAUp6C,UAAU,CAAC/S,CAArB;AACA,aAAKotD,EAAL,GAAUr6C,UAAU,CAACgE,CAArB;AACA,aAAKs2C,EAAL,GAAUt6C,UAAU,CAACuP,CAArB;AACA,aAAKgrC,EAAL,GAAUv6C,UAAU,CAACmX,CAArB;;AAEA,aAAK4kC,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAlCmC;AAoCpCE,kBAAY,EAAE,sBAAWC,KAAX,EAAkBt+C,MAAlB,EAA2B;AAExC,YAAK,EAAIs+C,KAAK,IAAIA,KAAK,CAACC,OAAnB,CAAL,EAAoC;AAEnC,gBAAM,IAAIt8D,KAAJ,CAAW,kGAAX,CAAN;AAEA;;AAED,YAAMoN,CAAC,GAAGivD,KAAK,CAAC9B,EAAhB;AAAA,YAAoBp2C,CAAC,GAAGk4C,KAAK,CAAC7B,EAA9B;AAAA,YAAkC9qC,CAAC,GAAG2sC,KAAK,CAAC5B,EAA5C;AAAA,YAAgDzM,KAAK,GAAGqO,KAAK,CAACrO,KAA9D,CARwC,CAUxC;AACA;AACA;;AAEA,YAAMzP,GAAG,GAAGvjC,IAAI,CAACujC,GAAjB;AACA,YAAMC,GAAG,GAAGxjC,IAAI,CAACwjC,GAAjB;AAEA,YAAM+d,EAAE,GAAGhe,GAAG,CAAEnxC,CAAC,GAAG,CAAN,CAAd;AACA,YAAM6gD,EAAE,GAAG1P,GAAG,CAAEp6B,CAAC,GAAG,CAAN,CAAd;AACA,YAAMq4C,EAAE,GAAGje,GAAG,CAAE7uB,CAAC,GAAG,CAAN,CAAd;AAEA,YAAM+sC,EAAE,GAAGje,GAAG,CAAEpxC,CAAC,GAAG,CAAN,CAAd;AACA,YAAM8gD,EAAE,GAAG1P,GAAG,CAAEr6B,CAAC,GAAG,CAAN,CAAd;AACA,YAAMu4C,EAAE,GAAGle,GAAG,CAAE9uB,CAAC,GAAG,CAAN,CAAd;;AAEA,gBAASs+B,KAAT;AAEC,eAAK,KAAL;AACC,iBAAKuM,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED,eAAK,KAAL;AACC,iBAAKnC,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED,eAAK,KAAL;AACC,iBAAKnC,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED,eAAK,KAAL;AACC,iBAAKnC,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED,eAAK,KAAL;AACC,iBAAKnC,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED,eAAK,KAAL;AACC,iBAAKnC,EAAL,GAAUkC,EAAE,GAAGxO,EAAL,GAAUuO,EAAV,GAAeD,EAAE,GAAGrO,EAAL,GAAUwO,EAAnC;AACA,iBAAKlC,EAAL,GAAU+B,EAAE,GAAGrO,EAAL,GAAUsO,EAAV,GAAeC,EAAE,GAAGxO,EAAL,GAAUyO,EAAnC;AACA,iBAAKjC,EAAL,GAAU8B,EAAE,GAAGtO,EAAL,GAAUyO,EAAV,GAAeD,EAAE,GAAGvO,EAAL,GAAUsO,EAAnC;AACA,iBAAK9B,EAAL,GAAU6B,EAAE,GAAGtO,EAAL,GAAUuO,EAAV,GAAeC,EAAE,GAAGvO,EAAL,GAAUwO,EAAnC;AACA;;AAED;AACC94D,mBAAO,CAAC2W,IAAR,CAAc,qEAAqEyzC,KAAnF;AA7CF;;AAiDA,YAAKjwC,MAAM,KAAK,KAAhB,EAAwB,KAAKm+C,iBAAL;AAExB,eAAO,IAAP;AAEA,OAlHmC;AAoHpCS,sBAAgB,EAAE,0BAAWC,IAAX,EAAiB56C,KAAjB,EAAyB;AAE1C;AAEA;AAEA,YAAM66C,SAAS,GAAG76C,KAAK,GAAG,CAA1B;AAAA,YAA6B+Q,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUqe,SAAV,CAAjC;AAEA,aAAKtC,EAAL,GAAUqC,IAAI,CAACxvD,CAAL,GAAS2lB,CAAnB;AACA,aAAKynC,EAAL,GAAUoC,IAAI,CAACz4C,CAAL,GAAS4O,CAAnB;AACA,aAAK0nC,EAAL,GAAUmC,IAAI,CAACltC,CAAL,GAASqD,CAAnB;AACA,aAAK2nC,EAAL,GAAU1/C,IAAI,CAACujC,GAAL,CAAUse,SAAV,CAAV;;AAEA,aAAKX,iBAAL;;AAEA,eAAO,IAAP;AAEA,OArImC;AAuIpCY,2BAAqB,EAAE,+BAAW3lC,CAAX,EAAe;AAErC;AAEA;AAEA,YAAM66B,EAAE,GAAG76B,CAAC,CAACs4B,QAAb;AAAA,YAECgJ,GAAG,GAAGzG,EAAE,CAAE,CAAF,CAFT;AAAA,YAEgB0G,GAAG,GAAG1G,EAAE,CAAE,CAAF,CAFxB;AAAA,YAE+B2G,GAAG,GAAG3G,EAAE,CAAE,CAAF,CAFvC;AAAA,YAGC4G,GAAG,GAAG5G,EAAE,CAAE,CAAF,CAHT;AAAA,YAGgB6G,GAAG,GAAG7G,EAAE,CAAE,CAAF,CAHxB;AAAA,YAG+B8G,GAAG,GAAG9G,EAAE,CAAE,CAAF,CAHvC;AAAA,YAIC+G,GAAG,GAAG/G,EAAE,CAAE,CAAF,CAJT;AAAA,YAIgBgH,GAAG,GAAGhH,EAAE,CAAE,CAAF,CAJxB;AAAA,YAI+BiH,GAAG,GAAGjH,EAAE,CAAE,EAAF,CAJvC;AAAA,YAMC+K,KAAK,GAAGtE,GAAG,GAAGI,GAAN,GAAYI,GANrB;;AAQA,YAAK8D,KAAK,GAAG,CAAb,EAAiB;AAEhB,cAAMhqC,CAAC,GAAG,MAAM/X,IAAI,CAACmK,IAAL,CAAW43C,KAAK,GAAG,GAAnB,CAAhB;AAEA,eAAKrC,EAAL,GAAU,OAAO3nC,CAAjB;AACA,eAAKwnC,EAAL,GAAU,CAAEvB,GAAG,GAAGF,GAAR,IAAgB/lC,CAA1B;AACA,eAAKynC,EAAL,GAAU,CAAE7B,GAAG,GAAGI,GAAR,IAAgBhmC,CAA1B;AACA,eAAK0nC,EAAL,GAAU,CAAE7B,GAAG,GAAGF,GAAR,IAAgB3lC,CAA1B;AAEA,SATD,MASO,IAAK0lC,GAAG,GAAGI,GAAN,IAAaJ,GAAG,GAAGQ,GAAxB,EAA8B;AAEpC,cAAMlmC,EAAC,GAAG,MAAM/X,IAAI,CAACmK,IAAL,CAAW,MAAMszC,GAAN,GAAYI,GAAZ,GAAkBI,GAA7B,CAAhB;;AAEA,eAAKyB,EAAL,GAAU,CAAE1B,GAAG,GAAGF,GAAR,IAAgB/lC,EAA1B;AACA,eAAKwnC,EAAL,GAAU,OAAOxnC,EAAjB;AACA,eAAKynC,EAAL,GAAU,CAAE9B,GAAG,GAAGE,GAAR,IAAgB7lC,EAA1B;AACA,eAAK0nC,EAAL,GAAU,CAAE9B,GAAG,GAAGI,GAAR,IAAgBhmC,EAA1B;AAEA,SATM,MASA,IAAK8lC,GAAG,GAAGI,GAAX,EAAiB;AAEvB,cAAMlmC,GAAC,GAAG,MAAM/X,IAAI,CAACmK,IAAL,CAAW,MAAM0zC,GAAN,GAAYJ,GAAZ,GAAkBQ,GAA7B,CAAhB;;AAEA,eAAKyB,EAAL,GAAU,CAAE/B,GAAG,GAAGI,GAAR,IAAgBhmC,GAA1B;AACA,eAAKwnC,EAAL,GAAU,CAAE7B,GAAG,GAAGE,GAAR,IAAgB7lC,GAA1B;AACA,eAAKynC,EAAL,GAAU,OAAOznC,GAAjB;AACA,eAAK0nC,EAAL,GAAU,CAAE3B,GAAG,GAAGE,GAAR,IAAgBjmC,GAA1B;AAEA,SATM,MASA;AAEN,cAAMA,GAAC,GAAG,MAAM/X,IAAI,CAACmK,IAAL,CAAW,MAAM8zC,GAAN,GAAYR,GAAZ,GAAkBI,GAA7B,CAAhB;;AAEA,eAAK6B,EAAL,GAAU,CAAE9B,GAAG,GAAGF,GAAR,IAAgB3lC,GAA1B;AACA,eAAKwnC,EAAL,GAAU,CAAE5B,GAAG,GAAGI,GAAR,IAAgBhmC,GAA1B;AACA,eAAKynC,EAAL,GAAU,CAAE1B,GAAG,GAAGE,GAAR,IAAgBjmC,GAA1B;AACA,eAAK0nC,EAAL,GAAU,OAAO1nC,GAAjB;AAEA;;AAED,aAAKmpC,iBAAL;;AAEA,eAAO,IAAP;AAEA,OA/LmC;AAiMpC79C,wBAAkB,EAAE,4BAAW2+C,KAAX,EAAkBC,GAAlB,EAAwB;AAE3C;AAEA,YAAMh9C,GAAG,GAAG,QAAZ;AAEA,YAAIiT,CAAC,GAAG8pC,KAAK,CAAC98C,GAAN,CAAW+8C,GAAX,IAAmB,CAA3B;;AAEA,YAAK/pC,CAAC,GAAGjT,GAAT,EAAe;AAEdiT,WAAC,GAAG,CAAJ;;AAEA,cAAKlY,IAAI,CAAC4nB,GAAL,CAAUo6B,KAAK,CAAC5vD,CAAhB,IAAsB4N,IAAI,CAAC4nB,GAAL,CAAUo6B,KAAK,CAACttC,CAAhB,CAA3B,EAAiD;AAEhD,iBAAK6qC,EAAL,GAAU,CAAEyC,KAAK,CAAC74C,CAAlB;AACA,iBAAKq2C,EAAL,GAAUwC,KAAK,CAAC5vD,CAAhB;AACA,iBAAKqtD,EAAL,GAAU,CAAV;AACA,iBAAKC,EAAL,GAAUxnC,CAAV;AAEA,WAPD,MAOO;AAEN,iBAAKqnC,EAAL,GAAU,CAAV;AACA,iBAAKC,EAAL,GAAU,CAAEwC,KAAK,CAACttC,CAAlB;AACA,iBAAK+qC,EAAL,GAAUuC,KAAK,CAAC74C,CAAhB;AACA,iBAAKu2C,EAAL,GAAUxnC,CAAV;AAEA;AAED,SApBD,MAoBO;AAEN;AAEA,eAAKqnC,EAAL,GAAUyC,KAAK,CAAC74C,CAAN,GAAU84C,GAAG,CAACvtC,CAAd,GAAkBstC,KAAK,CAACttC,CAAN,GAAUutC,GAAG,CAAC94C,CAA1C;AACA,eAAKq2C,EAAL,GAAUwC,KAAK,CAACttC,CAAN,GAAUutC,GAAG,CAAC7vD,CAAd,GAAkB4vD,KAAK,CAAC5vD,CAAN,GAAU6vD,GAAG,CAACvtC,CAA1C;AACA,eAAK+qC,EAAL,GAAUuC,KAAK,CAAC5vD,CAAN,GAAU6vD,GAAG,CAAC94C,CAAd,GAAkB64C,KAAK,CAAC74C,CAAN,GAAU84C,GAAG,CAAC7vD,CAA1C;AACA,eAAKstD,EAAL,GAAUxnC,CAAV;AAEA;;AAED,eAAO,KAAKk9B,SAAL,EAAP;AAEA,OA1OmC;AA4OpC8M,aAAO,EAAE,iBAAW9pB,CAAX,EAAe;AAEvB,eAAO,IAAIp4B,IAAI,CAACq9C,IAAL,CAAWr9C,IAAI,CAAC4nB,GAAL,CAAUgpB,SAAS,CAACS,KAAV,CAAiB,KAAKnsC,GAAL,CAAUkzB,CAAV,CAAjB,EAAgC,CAAE,CAAlC,EAAqC,CAArC,CAAV,CAAX,CAAX;AAEA,OAhPmC;AAkPpC+pB,mBAAa,EAAE,uBAAW/pB,CAAX,EAAc3oB,IAAd,EAAqB;AAEnC,YAAMzI,KAAK,GAAG,KAAKk7C,OAAL,CAAc9pB,CAAd,CAAd;AAEA,YAAKpxB,KAAK,KAAK,CAAf,EAAmB,OAAO,IAAP;AAEnB,YAAMwG,CAAC,GAAGxN,IAAI,CAACkE,GAAL,CAAU,CAAV,EAAauL,IAAI,GAAGzI,KAApB,CAAV;AAEA,aAAK24C,KAAL,CAAYvnB,CAAZ,EAAe5qB,CAAf;AAEA,eAAO,IAAP;AAEA,OA9PmC;AAgQpCypC,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAKnyC,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAP;AAEA,OApQmC;AAsQpCtB,aAAO,EAAE,mBAAY;AAEpB;AAEA,eAAO,KAAK4+C,SAAL,EAAP;AAEA,OA5QmC;AA8QpCA,eAAS,EAAE,qBAAY;AAEtB,aAAK7C,EAAL,IAAW,CAAE,CAAb;AACA,aAAKC,EAAL,IAAW,CAAE,CAAb;AACA,aAAKC,EAAL,IAAW,CAAE,CAAb;;AAEA,aAAKyB,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAxRmC;AA0RpCh8C,SAAG,EAAE,aAAWiC,CAAX,EAAe;AAEnB,eAAO,KAAKo4C,EAAL,GAAUp4C,CAAC,CAACo4C,EAAZ,GAAiB,KAAKC,EAAL,GAAUr4C,CAAC,CAACq4C,EAA7B,GAAkC,KAAKC,EAAL,GAAUt4C,CAAC,CAACs4C,EAA9C,GAAmD,KAAKC,EAAL,GAAUv4C,CAAC,CAACu4C,EAAtE;AAEA,OA9RmC;AAgSpCxK,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAKqK,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKC,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAAlF;AAEA,OApSmC;AAsSpC54D,YAAM,EAAE,kBAAY;AAEnB,eAAOkZ,IAAI,CAACmK,IAAL,CAAW,KAAKo1C,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKC,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAAtF,CAAP;AAEA,OA1SmC;AA4SpCtK,eAAS,EAAE,qBAAY;AAEtB,YAAIljD,CAAC,GAAG,KAAKpL,MAAL,EAAR;;AAEA,YAAKoL,CAAC,KAAK,CAAX,EAAe;AAEd,eAAKqtD,EAAL,GAAU,CAAV;AACA,eAAKC,EAAL,GAAU,CAAV;AACA,eAAKC,EAAL,GAAU,CAAV;AACA,eAAKC,EAAL,GAAU,CAAV;AAEA,SAPD,MAOO;AAENxtD,WAAC,GAAG,IAAIA,CAAR;AAEA,eAAKqtD,EAAL,GAAU,KAAKA,EAAL,GAAUrtD,CAApB;AACA,eAAKstD,EAAL,GAAU,KAAKA,EAAL,GAAUttD,CAApB;AACA,eAAKutD,EAAL,GAAU,KAAKA,EAAL,GAAUvtD,CAApB;AACA,eAAKwtD,EAAL,GAAU,KAAKA,EAAL,GAAUxtD,CAApB;AAEA;;AAED,aAAKgvD,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAtUmC;AAwUpC7M,cAAQ,EAAE,kBAAWjc,CAAX,EAAc7f,CAAd,EAAkB;AAE3B,YAAKA,CAAC,KAAK1iB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,wGAAd;AACA,iBAAO,KAAK8iD,mBAAL,CAA0BjqB,CAA1B,EAA6B7f,CAA7B,CAAP;AAEA;;AAED,eAAO,KAAK8pC,mBAAL,CAA0B,IAA1B,EAAgCjqB,CAAhC,CAAP;AAEA,OAnVmC;AAqVpCsf,iBAAW,EAAE,qBAAWtf,CAAX,EAAe;AAE3B,eAAO,KAAKiqB,mBAAL,CAA0BjqB,CAA1B,EAA6B,IAA7B,CAAP;AAEA,OAzVmC;AA2VpCiqB,yBAAmB,EAAE,6BAAWr7D,CAAX,EAAcC,CAAd,EAAkB;AAEtC;AAEA,YAAMq7D,GAAG,GAAGt7D,CAAC,CAACu4D,EAAd;AAAA,YAAkBgD,GAAG,GAAGv7D,CAAC,CAACw4D,EAA1B;AAAA,YAA8BgD,GAAG,GAAGx7D,CAAC,CAACy4D,EAAtC;AAAA,YAA0CgD,GAAG,GAAGz7D,CAAC,CAAC04D,EAAlD;AACA,YAAMgD,GAAG,GAAGz7D,CAAC,CAACs4D,EAAd;AAAA,YAAkBoD,GAAG,GAAG17D,CAAC,CAACu4D,EAA1B;AAAA,YAA8BoD,GAAG,GAAG37D,CAAC,CAACw4D,EAAtC;AAAA,YAA0CoD,GAAG,GAAG57D,CAAC,CAACy4D,EAAlD;AAEA,aAAKH,EAAL,GAAU+C,GAAG,GAAGO,GAAN,GAAYJ,GAAG,GAAGC,GAAlB,GAAwBH,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;AACA,aAAKnD,EAAL,GAAU+C,GAAG,GAAGM,GAAN,GAAYJ,GAAG,GAAGE,GAAlB,GAAwBH,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAApD;AACA,aAAKnD,EAAL,GAAU+C,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGG,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;AACA,aAAKhD,EAAL,GAAU+C,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAApD;;AAEA,aAAK1B,iBAAL;;AAEA,eAAO,IAAP;AAEA,OA3WmC;AA6WpCvB,WAAK,EAAE,eAAWE,EAAX,EAAeryC,CAAf,EAAmB;AAEzB,YAAKA,CAAC,KAAK,CAAX,EAAe,OAAO,IAAP;AACf,YAAKA,CAAC,KAAK,CAAX,EAAe,OAAO,KAAK7K,IAAL,CAAWk9C,EAAX,CAAP;AAEf,YAAMztD,CAAC,GAAG,KAAKmtD,EAAf;AAAA,YAAmBp2C,CAAC,GAAG,KAAKq2C,EAA5B;AAAA,YAAgC9qC,CAAC,GAAG,KAAK+qC,EAAzC;AAAA,YAA6CnjC,CAAC,GAAG,KAAKojC,EAAtD,CALyB,CAOzB;;AAEA,YAAIoD,YAAY,GAAGxmC,CAAC,GAAGujC,EAAE,CAACH,EAAP,GAAYttD,CAAC,GAAGytD,EAAE,CAACN,EAAnB,GAAwBp2C,CAAC,GAAG02C,EAAE,CAACL,EAA/B,GAAoC9qC,CAAC,GAAGmrC,EAAE,CAACJ,EAA9D;;AAEA,YAAKqD,YAAY,GAAG,CAApB,EAAwB;AAEvB,eAAKpD,EAAL,GAAU,CAAEG,EAAE,CAACH,EAAf;AACA,eAAKH,EAAL,GAAU,CAAEM,EAAE,CAACN,EAAf;AACA,eAAKC,EAAL,GAAU,CAAEK,EAAE,CAACL,EAAf;AACA,eAAKC,EAAL,GAAU,CAAEI,EAAE,CAACJ,EAAf;AAEAqD,sBAAY,GAAG,CAAEA,YAAjB;AAEA,SATD,MASO;AAEN,eAAKngD,IAAL,CAAWk9C,EAAX;AAEA;;AAED,YAAKiD,YAAY,IAAI,GAArB,EAA2B;AAE1B,eAAKpD,EAAL,GAAUpjC,CAAV;AACA,eAAKijC,EAAL,GAAUntD,CAAV;AACA,eAAKotD,EAAL,GAAUr2C,CAAV;AACA,eAAKs2C,EAAL,GAAU/qC,CAAV;AAEA,iBAAO,IAAP;AAEA;;AAED,YAAMquC,eAAe,GAAG,MAAMD,YAAY,GAAGA,YAA7C;;AAEA,YAAKC,eAAe,IAAIlf,MAAM,CAACC,OAA/B,EAAyC;AAExC,cAAM/rB,CAAC,GAAG,IAAIvK,CAAd;AACA,eAAKkyC,EAAL,GAAU3nC,CAAC,GAAGuE,CAAJ,GAAQ9O,CAAC,GAAG,KAAKkyC,EAA3B;AACA,eAAKH,EAAL,GAAUxnC,CAAC,GAAG3lB,CAAJ,GAAQob,CAAC,GAAG,KAAK+xC,EAA3B;AACA,eAAKC,EAAL,GAAUznC,CAAC,GAAG5O,CAAJ,GAAQqE,CAAC,GAAG,KAAKgyC,EAA3B;AACA,eAAKC,EAAL,GAAU1nC,CAAC,GAAGrD,CAAJ,GAAQlH,CAAC,GAAG,KAAKiyC,EAA3B;AAEA,eAAKrK,SAAL;;AACA,eAAK8L,iBAAL;;AAEA,iBAAO,IAAP;AAEA;;AAED,YAAM8B,YAAY,GAAGhjD,IAAI,CAACmK,IAAL,CAAW44C,eAAX,CAArB;AACA,YAAME,SAAS,GAAGjjD,IAAI,CAACq1C,KAAL,CAAY2N,YAAZ,EAA0BF,YAA1B,CAAlB;AACA,YAAMI,MAAM,GAAGljD,IAAI,CAACwjC,GAAL,CAAU,CAAE,IAAIh2B,CAAN,IAAYy1C,SAAtB,IAAoCD,YAAnD;AAAA,YACCG,MAAM,GAAGnjD,IAAI,CAACwjC,GAAL,CAAUh2B,CAAC,GAAGy1C,SAAd,IAA4BD,YADtC;AAGA,aAAKtD,EAAL,GAAYpjC,CAAC,GAAG4mC,MAAJ,GAAa,KAAKxD,EAAL,GAAUyD,MAAnC;AACA,aAAK5D,EAAL,GAAYntD,CAAC,GAAG8wD,MAAJ,GAAa,KAAK3D,EAAL,GAAU4D,MAAnC;AACA,aAAK3D,EAAL,GAAYr2C,CAAC,GAAG+5C,MAAJ,GAAa,KAAK1D,EAAL,GAAU2D,MAAnC;AACA,aAAK1D,EAAL,GAAY/qC,CAAC,GAAGwuC,MAAJ,GAAa,KAAKzD,EAAL,GAAU0D,MAAnC;;AAEA,aAAKjC,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAjbmC;AAmbpCrL,YAAM,EAAE,gBAAW1wC,UAAX,EAAwB;AAE/B,eAASA,UAAU,CAACo6C,EAAX,KAAkB,KAAKA,EAAzB,IAAmCp6C,UAAU,CAACq6C,EAAX,KAAkB,KAAKA,EAA1D,IAAoEr6C,UAAU,CAACs6C,EAAX,KAAkB,KAAKA,EAA3F,IAAqGt6C,UAAU,CAACu6C,EAAX,KAAkB,KAAKA,EAAnI;AAEA,OAvbmC;AAybpC5J,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAKo8C,EAAL,GAAUl7B,KAAK,CAAElhB,MAAF,CAAf;AACA,aAAKq8C,EAAL,GAAUn7B,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAf;AACA,aAAKs8C,EAAL,GAAUp7B,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAf;AACA,aAAKu8C,EAAL,GAAUr7B,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAf;;AAEA,aAAK+9C,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAtcmC;AAwcpCnL,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAKo8C,EAAvB;AACAl7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKq8C,EAA3B;AACAn7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKs8C,EAA3B;AACAp7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKu8C,EAA3B;AAEA,eAAOr7B,KAAP;AAEA,OApdmC;AAsdpC2xB,yBAAmB,EAAE,6BAAWC,SAAX,EAAsB1nC,KAAtB,EAA8B;AAElD,aAAKgxC,EAAL,GAAUtJ,SAAS,CAACC,IAAV,CAAgB3nC,KAAhB,CAAV;AACA,aAAKixC,EAAL,GAAUvJ,SAAS,CAACE,IAAV,CAAgB5nC,KAAhB,CAAV;AACA,aAAKkxC,EAAL,GAAUxJ,SAAS,CAACuI,IAAV,CAAgBjwC,KAAhB,CAAV;AACA,aAAKmxC,EAAL,GAAUzJ,SAAS,CAACwI,IAAV,CAAgBlwC,KAAhB,CAAV;AAEA,eAAO,IAAP;AAEA,OA/dmC;AAiepC60C,eAAS,EAAE,mBAAWC,QAAX,EAAsB;AAEhC,aAAKnC,iBAAL,GAAyBmC,QAAzB;AAEA,eAAO,IAAP;AAEA,OAvemC;AAyepCnC,uBAAiB,EAAE,6BAAY,CAAE;AAzeG,KAArC;;AA6eA,QAAMoC,OAAO,GAAG,IAAIC,OAAJ,EAAhB;;AACA,QAAMC,WAAW,GAAG,IAAIlE,UAAJ,EAApB;;AAEA,aAASiE,OAAT,GAAwC;AAAA,UAAtBnxD,CAAsB,uEAAlB,CAAkB;AAAA,UAAf+W,CAAe,uEAAX,CAAW;AAAA,UAARuL,CAAQ,uEAAJ,CAAI;AAEvC,WAAKtiB,CAAL,GAASA,CAAT;AACA,WAAK+W,CAAL,GAASA,CAAT;AACA,WAAKuL,CAAL,GAASA,CAAT;AAEA;;AAED1rB,UAAM,CAACiiC,MAAP,CAAes4B,OAAO,CAAC5kD,SAAvB,EAAkC;AAEjC8kD,eAAS,EAAE,IAFsB;AAIjC3+C,SAAG,EAAE,aAAW1S,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAEzB,YAAKA,CAAC,KAAK7e,SAAX,EAAuB6e,CAAC,GAAG,KAAKA,CAAT,CAFE,CAEU;;AAEnC,aAAKtiB,CAAL,GAASA,CAAT;AACA,aAAK+W,CAAL,GAASA,CAAT;AACA,aAAKuL,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAdgC;AAgBjCk/B,eAAS,EAAE,mBAAWC,MAAX,EAAoB;AAE9B,aAAKzhD,CAAL,GAASyhD,MAAT;AACA,aAAK1qC,CAAL,GAAS0qC,MAAT;AACA,aAAKn/B,CAAL,GAASm/B,MAAT;AAEA,eAAO,IAAP;AAEA,OAxBgC;AA0BjCC,UAAI,EAAE,cAAW1hD,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAhCgC;AAkCjC2hD,UAAI,EAAE,cAAW5qC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAxCgC;AA0CjC8zC,UAAI,EAAE,cAAWvoC,CAAX,EAAe;AAEpB,aAAKA,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAhDgC;AAkDjCs/B,kBAAY,EAAE,sBAAWzlC,KAAX,EAAkBhd,KAAlB,EAA0B;AAEvC,gBAASgd,KAAT;AAEC,eAAK,CAAL;AAAQ,iBAAKnc,CAAL,GAASb,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAK4X,CAAL,GAAS5X,KAAT;AAAgB;;AACxB,eAAK,CAAL;AAAQ,iBAAKmjB,CAAL,GAASnjB,KAAT;AAAgB;;AACxB;AAAS,kBAAM,IAAIvM,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AALV;;AASA,eAAO,IAAP;AAEA,OA/DgC;AAiEjC0lC,kBAAY,EAAE,sBAAW1lC,KAAX,EAAmB;AAEhC,gBAASA,KAAT;AAEC,eAAK,CAAL;AAAQ,mBAAO,KAAKnc,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAK+W,CAAZ;;AACR,eAAK,CAAL;AAAQ,mBAAO,KAAKuL,CAAZ;;AACR;AAAS,kBAAM,IAAI1vB,KAAJ,CAAW,4BAA4BupB,KAAvC,CAAN;AALV;AASA,OA5EgC;AA8EjCxM,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKjZ,CAA3B,EAA8B,KAAK+W,CAAnC,EAAsC,KAAKuL,CAA3C,CAAP;AAEA,OAlFgC;AAoFjC/R,UAAI,EAAE,cAAWwE,CAAX,EAAe;AAEpB,aAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX;AACA,aAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAAX;AACA,aAAKuL,CAAL,GAASvN,CAAC,CAACuN,CAAX;AAEA,eAAO,IAAP;AAEA,OA5FgC;AA8FjChQ,SAAG,EAAE,aAAWyC,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK20C,UAAL,CAAiB/sC,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AAEA,eAAO,IAAP;AAEA,OA7GgC;AA+GjCy/B,eAAS,EAAE,mBAAWp8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AACA,aAAKrD,CAAL,IAAUqD,CAAV;AAEA,eAAO,IAAP;AAEA,OAvHgC;AAyHjCm8B,gBAAU,EAAE,oBAAWltD,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AACA,aAAKuL,CAAL,GAAS1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAjB;AAEA,eAAO,IAAP;AAEA,OAjIgC;AAmIjClQ,qBAAe,EAAE,yBAAW2C,CAAX,EAAc4Q,CAAd,EAAkB;AAElC,aAAK3lB,CAAL,IAAU+U,CAAC,CAAC/U,CAAF,GAAM2lB,CAAhB;AACA,aAAK5O,CAAL,IAAUhC,CAAC,CAACgC,CAAF,GAAM4O,CAAhB;AACA,aAAKrD,CAAL,IAAUvN,CAAC,CAACuN,CAAF,GAAMqD,CAAhB;AAEA,eAAO,IAAP;AAEA,OA3IgC;AA6IjCnU,SAAG,EAAE,aAAWuD,CAAX,EAAcmV,CAAd,EAAkB;AAEtB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK2J,UAAL,CAAiB/B,CAAjB,EAAoBmV,CAApB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AAEA,eAAO,IAAP;AAEA,OA5JgC;AA8JjC0/B,eAAS,EAAE,mBAAWr8B,CAAX,EAAe;AAEzB,aAAK3lB,CAAL,IAAU2lB,CAAV;AACA,aAAK5O,CAAL,IAAU4O,CAAV;AACA,aAAKrD,CAAL,IAAUqD,CAAV;AAEA,eAAO,IAAP;AAEA,OAtKgC;AAwKjC7O,gBAAU,EAAE,oBAAWliB,CAAX,EAAcC,CAAd,EAAkB;AAE7B,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AACA,aAAKuL,CAAL,GAAS1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAjB;AAEA,eAAO,IAAP;AAEA,OAhLgC;AAkLjC2/B,cAAQ,EAAE,kBAAWltC,CAAX,EAAcmV,CAAd,EAAkB;AAE3B,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,iGAAd;AACA,iBAAO,KAAKmkD,eAAL,CAAsBv8C,CAAtB,EAAyBmV,CAAzB,CAAP;AAEA;;AAED,aAAKlqB,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AAEA,eAAO,IAAP;AAEA,OAjMgC;AAmMjC7P,oBAAc,EAAE,wBAAWgvC,MAAX,EAAoB;AAEnC,aAAKzhD,CAAL,IAAUyhD,MAAV;AACA,aAAK1qC,CAAL,IAAU0qC,MAAV;AACA,aAAKn/B,CAAL,IAAUm/B,MAAV;AAEA,eAAO,IAAP;AAEA,OA3MgC;AA6MjC6P,qBAAe,EAAE,yBAAW18D,CAAX,EAAcC,CAAd,EAAkB;AAElC,aAAKmL,CAAL,GAASpL,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAjB;AACA,aAAK+W,CAAL,GAASniB,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAjB;AACA,aAAKuL,CAAL,GAAS1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAjB;AAEA,eAAO,IAAP;AAEA,OArNgC;AAuNjCivC,gBAAU,EAAE,oBAAWtC,KAAX,EAAmB;AAE9B,YAAK,EAAIA,KAAK,IAAIA,KAAK,CAACC,OAAnB,CAAL,EAAoC;AAEnC14D,iBAAO,CAACD,KAAR,CAAe,6FAAf;AAEA;;AAED,eAAO,KAAKkb,eAAL,CAAsB2/C,WAAW,CAACpC,YAAZ,CAA0BC,KAA1B,CAAtB,CAAP;AAEA,OAjOgC;AAmOjCuC,oBAAc,EAAE,wBAAWhC,IAAX,EAAiB56C,KAAjB,EAAyB;AAExC,eAAO,KAAKnD,eAAL,CAAsB2/C,WAAW,CAAC7B,gBAAZ,CAA8BC,IAA9B,EAAoC56C,KAApC,CAAtB,CAAP;AAEA,OAvOgC;AAyOjCwtC,kBAAY,EAAE,sBAAWr4B,CAAX,EAAe;AAE5B,YAAM/pB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BuL,CAAC,GAAG,KAAKA,CAAvC;AACA,YAAM3vB,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,aAAKriD,CAAL,GAASrN,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAA5C;AACA,aAAKvL,CAAL,GAASpkB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAA5C;AACA,aAAKA,CAAL,GAAS3vB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAA5C;AAEA,eAAO,IAAP;AAEA,OApPgC;AAsPjCmvC,uBAAiB,EAAE,2BAAW1nC,CAAX,EAAe;AAEjC,eAAO,KAAKq4B,YAAL,CAAmBr4B,CAAnB,EAAuBi5B,SAAvB,EAAP;AAEA,OA1PgC;AA4PjC+H,kBAAY,EAAE,sBAAWhhC,CAAX,EAAe;AAE5B,YAAM/pB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BuL,CAAC,GAAG,KAAKA,CAAvC;AACA,YAAM3vB,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,YAAMn4B,CAAC,GAAG,KAAMv3B,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,EAAF,CAAD,GAAU2vB,CAApC,GAAwC3vB,CAAC,CAAE,EAAF,CAA/C,CAAV;AAEA,aAAKqN,CAAL,GAAS,CAAErN,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAAnC,GAAuC3vB,CAAC,CAAE,EAAF,CAA1C,IAAqDu3B,CAA9D;AACA,aAAKnT,CAAL,GAAS,CAAEpkB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAAnC,GAAuC3vB,CAAC,CAAE,EAAF,CAA1C,IAAqDu3B,CAA9D;AACA,aAAK5H,CAAL,GAAS,CAAE3vB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,EAAF,CAAD,GAAU2vB,CAApC,GAAwC3vB,CAAC,CAAE,EAAF,CAA3C,IAAsDu3B,CAA/D;AAEA,eAAO,IAAP;AAEA,OAzQgC;AA2QjCzY,qBAAe,EAAE,yBAAWu0B,CAAX,EAAe;AAE/B,YAAMhmC,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BuL,CAAC,GAAG,KAAKA,CAAvC;AACA,YAAMovC,EAAE,GAAG1rB,CAAC,CAAChmC,CAAb;AAAA,YAAgB2xD,EAAE,GAAG3rB,CAAC,CAACjvB,CAAvB;AAAA,YAA0B66C,EAAE,GAAG5rB,CAAC,CAAC1jB,CAAjC;AAAA,YAAoCuvC,EAAE,GAAG7rB,CAAC,CAAC9b,CAA3C,CAH+B,CAK/B;;AAEA,YAAM4nC,EAAE,GAAGD,EAAE,GAAG7xD,CAAL,GAAS2xD,EAAE,GAAGrvC,CAAd,GAAkBsvC,EAAE,GAAG76C,CAAlC;AACA,YAAMg7C,EAAE,GAAGF,EAAE,GAAG96C,CAAL,GAAS66C,EAAE,GAAG5xD,CAAd,GAAkB0xD,EAAE,GAAGpvC,CAAlC;AACA,YAAM0vC,EAAE,GAAGH,EAAE,GAAGvvC,CAAL,GAASovC,EAAE,GAAG36C,CAAd,GAAkB46C,EAAE,GAAG3xD,CAAlC;AACA,YAAMiyD,EAAE,GAAG,CAAEP,EAAF,GAAO1xD,CAAP,GAAW2xD,EAAE,GAAG56C,CAAhB,GAAoB66C,EAAE,GAAGtvC,CAApC,CAV+B,CAY/B;;AAEA,aAAKtiB,CAAL,GAAS8xD,EAAE,GAAGD,EAAL,GAAUI,EAAE,GAAG,CAAEP,EAAjB,GAAsBK,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;AACA,aAAK56C,CAAL,GAASg7C,EAAE,GAAGF,EAAL,GAAUI,EAAE,GAAG,CAAEN,EAAjB,GAAsBK,EAAE,GAAG,CAAEN,EAA7B,GAAkCI,EAAE,GAAG,CAAEF,EAAlD;AACA,aAAKtvC,CAAL,GAAS0vC,EAAE,GAAGH,EAAL,GAAUI,EAAE,GAAG,CAAEL,EAAjB,GAAsBE,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;AAEA,eAAO,IAAP;AAEA,OA/RgC;AAiSjCQ,aAAO,EAAE,iBAAWjvC,MAAX,EAAoB;AAE5B,eAAO,KAAK8nC,YAAL,CAAmB9nC,MAAM,CAACkvC,kBAA1B,EAA+CpH,YAA/C,CAA6D9nC,MAAM,CAACmvC,gBAApE,CAAP;AAEA,OArSgC;AAuSjCC,eAAS,EAAE,mBAAWpvC,MAAX,EAAoB;AAE9B,eAAO,KAAK8nC,YAAL,CAAmB9nC,MAAM,CAACqvC,uBAA1B,EAAoDvH,YAApD,CAAkE9nC,MAAM,CAACsvC,WAAzE,CAAP;AAEA,OA3SgC;AA6SjCC,wBAAkB,EAAE,4BAAWzoC,CAAX,EAAe;AAElC;AACA;AAEA,YAAM/pB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkB+W,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BuL,CAAC,GAAG,KAAKA,CAAvC;AACA,YAAM3vB,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,aAAKriD,CAAL,GAASrN,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAA5C;AACA,aAAKvL,CAAL,GAASpkB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,CAAF,CAAD,GAAS2vB,CAA5C;AACA,aAAKA,CAAL,GAAS3vB,CAAC,CAAE,CAAF,CAAD,GAASqN,CAAT,GAAarN,CAAC,CAAE,CAAF,CAAD,GAASokB,CAAtB,GAA0BpkB,CAAC,CAAE,EAAF,CAAD,GAAU2vB,CAA7C;AAEA,eAAO,KAAK0gC,SAAL,EAAP;AAEA,OA3TgC;AA6TjCd,YAAM,EAAE,gBAAWntC,CAAX,EAAe;AAEtB,aAAK/U,CAAL,IAAU+U,CAAC,CAAC/U,CAAZ;AACA,aAAK+W,CAAL,IAAUhC,CAAC,CAACgC,CAAZ;AACA,aAAKuL,CAAL,IAAUvN,CAAC,CAACuN,CAAZ;AAEA,eAAO,IAAP;AAEA,OArUgC;AAuUjC6/B,kBAAY,EAAE,sBAAWV,MAAX,EAAoB;AAEjC,eAAO,KAAKhvC,cAAL,CAAqB,IAAIgvC,MAAzB,CAAP;AAEA,OA3UgC;AA6UjC3vC,SAAG,EAAE,aAAWiD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACkE,GAAL,CAAU,KAAK9R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACkE,GAAL,CAAU,KAAKiF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACkE,GAAL,CAAU,KAAKwQ,CAAf,EAAkBvN,CAAC,CAACuN,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OArVgC;AAuVjCvQ,SAAG,EAAE,aAAWgD,CAAX,EAAe;AAEnB,aAAK/U,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAU,KAAK/R,CAAf,EAAkB+U,CAAC,CAAC/U,CAApB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAU,KAAKgF,CAAf,EAAkBhC,CAAC,CAACgC,CAApB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAU,KAAKuQ,CAAf,EAAkBvN,CAAC,CAACuN,CAApB,CAAT;AAEA,eAAO,IAAP;AAEA,OA/VgC;AAiWjC28B,WAAK,EAAE,eAAWntC,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,aAAK/R,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAAC9R,CAAd,EAAiB4N,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAAC/R,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACiF,CAAd,EAAiBnJ,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACgF,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAUD,GAAG,CAACwQ,CAAd,EAAiB1U,IAAI,CAACkE,GAAL,CAAUC,GAAG,CAACuQ,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OA3WgC;AA6WjCggC,iBAAW,EAAE,qBAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,aAAKxiD,CAAL,GAAS4N,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKxiD,CAAvB,CAAlB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKzrC,CAAvB,CAAlB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAACmE,GAAL,CAAUwwC,MAAV,EAAkB30C,IAAI,CAACkE,GAAL,CAAU0wC,MAAV,EAAkB,KAAKlgC,CAAvB,CAAlB,CAAT;AAEA,eAAO,IAAP;AAEA,OArXgC;AAuXjCmgC,iBAAW,EAAE,qBAAW3wC,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,YAAMrd,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,eAAO,KAAKytD,YAAL,CAAmBztD,MAAM,IAAI,CAA7B,EAAiC+d,cAAjC,CAAiD7E,IAAI,CAACmE,GAAL,CAAUD,GAAV,EAAelE,IAAI,CAACkE,GAAL,CAAUC,GAAV,EAAerd,MAAf,CAAf,CAAjD,CAAP;AAEA,OA7XgC;AA+XjC8mB,WAAK,EAAE,iBAAY;AAElB,aAAKxb,CAAL,GAAS4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC4N,KAAL,CAAY,KAAK8G,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OAvYgC;AAyYjCk+B,UAAI,EAAE,gBAAY;AAEjB,aAAKxgD,CAAL,GAAS4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC4yC,IAAL,CAAW,KAAKl+B,CAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OAjZgC;AAmZjCogC,WAAK,EAAE,iBAAY;AAElB,aAAK1iD,CAAL,GAAS4N,IAAI,CAAC80C,KAAL,CAAY,KAAK1iD,CAAjB,CAAT;AACA,aAAK+W,CAAL,GAASnJ,IAAI,CAAC80C,KAAL,CAAY,KAAK3rC,CAAjB,CAAT;AACA,aAAKuL,CAAL,GAAS1U,IAAI,CAAC80C,KAAL,CAAY,KAAKpgC,CAAjB,CAAT;AAEA,eAAO,IAAP;AAEA,OA3ZgC;AA6ZjCqgC,iBAAW,EAAE,uBAAY;AAExB,aAAK3iD,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB4N,IAAI,CAAC4yC,IAAL,CAAW,KAAKxgD,CAAhB,CAAjB,GAAuC4N,IAAI,CAAC4N,KAAL,CAAY,KAAKxb,CAAjB,CAAhD;AACA,aAAK+W,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBnJ,IAAI,CAAC4yC,IAAL,CAAW,KAAKzpC,CAAhB,CAAjB,GAAuCnJ,IAAI,CAAC4N,KAAL,CAAY,KAAKzE,CAAjB,CAAhD;AACA,aAAKuL,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB1U,IAAI,CAAC4yC,IAAL,CAAW,KAAKl+B,CAAhB,CAAjB,GAAuC1U,IAAI,CAAC4N,KAAL,CAAY,KAAK8G,CAAjB,CAAhD;AAEA,eAAO,IAAP;AAEA,OAragC;AAuajCsgC,YAAM,EAAE,kBAAY;AAEnB,aAAK5iD,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAK+W,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,aAAKuL,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,eAAO,IAAP;AAEA,OA/agC;AAibjCxP,SAAG,EAAE,aAAWiC,CAAX,EAAe;AAEnB,eAAO,KAAK/U,CAAL,GAAS+U,CAAC,CAAC/U,CAAX,GAAe,KAAK+W,CAAL,GAAShC,CAAC,CAACgC,CAA1B,GAA8B,KAAKuL,CAAL,GAASvN,CAAC,CAACuN,CAAhD;AAEA,OArbgC;AAubjC;AAEAwgC,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAK9iD,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKuL,CAAL,GAAS,KAAKA,CAAzD;AAEA,OA7bgC;AA+bjC5tB,YAAM,EAAE,kBAAY;AAEnB,eAAOkZ,IAAI,CAACmK,IAAL,CAAW,KAAK/X,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAK+W,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKuL,CAAL,GAAS,KAAKA,CAA7D,CAAP;AAEA,OAncgC;AAqcjCygC,qBAAe,EAAE,2BAAY;AAE5B,eAAOn1C,IAAI,CAAC4nB,GAAL,CAAU,KAAKx1B,CAAf,IAAqB4N,IAAI,CAAC4nB,GAAL,CAAU,KAAKze,CAAf,CAArB,GAA0CnJ,IAAI,CAAC4nB,GAAL,CAAU,KAAKlT,CAAf,CAAjD;AAEA,OAzcgC;AA2cjC0gC,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKb,YAAL,CAAmB,KAAKztD,MAAL,MAAiB,CAApC,CAAP;AAEA,OA/cgC;AAidjC0uD,eAAS,EAAE,mBAAW1uD,MAAX,EAAoB;AAE9B,eAAO,KAAKsuD,SAAL,GAAiBvwC,cAAjB,CAAiC/d,MAAjC,CAAP;AAEA,OArdgC;AAudjC8qD,UAAI,EAAE,cAAWzqC,CAAX,EAAcsuC,KAAd,EAAsB;AAE3B,aAAKrjD,CAAL,IAAU,CAAE+U,CAAC,CAAC/U,CAAF,GAAM,KAAKA,CAAb,IAAmBqjD,KAA7B;AACA,aAAKtsC,CAAL,IAAU,CAAEhC,CAAC,CAACgC,CAAF,GAAM,KAAKA,CAAb,IAAmBssC,KAA7B;AACA,aAAK/gC,CAAL,IAAU,CAAEvN,CAAC,CAACuN,CAAF,GAAM,KAAKA,CAAb,IAAmB+gC,KAA7B;AAEA,eAAO,IAAP;AAEA,OA/dgC;AAiejCC,iBAAW,EAAE,qBAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,aAAKrjD,CAAL,GAASujD,EAAE,CAACvjD,CAAH,GAAO,CAAEwjD,EAAE,CAACxjD,CAAH,GAAOujD,EAAE,CAACvjD,CAAZ,IAAkBqjD,KAAlC;AACA,aAAKtsC,CAAL,GAASwsC,EAAE,CAACxsC,CAAH,GAAO,CAAEysC,EAAE,CAACzsC,CAAH,GAAOwsC,EAAE,CAACxsC,CAAZ,IAAkBssC,KAAlC;AACA,aAAK/gC,CAAL,GAASihC,EAAE,CAACjhC,CAAH,GAAO,CAAEkhC,EAAE,CAAClhC,CAAH,GAAOihC,EAAE,CAACjhC,CAAZ,IAAkB+gC,KAAlC;AAEA,eAAO,IAAP;AAEA,OAzegC;AA2ejCR,WAAK,EAAE,eAAW9tC,CAAX,EAAcmV,CAAd,EAAkB;AAExB,YAAKA,CAAC,KAAKzmB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,2FAAd;AACA,iBAAO,KAAKiI,YAAL,CAAmBL,CAAnB,EAAsBmV,CAAtB,CAAP;AAEA;;AAED,eAAO,KAAK9U,YAAL,CAAmB,IAAnB,EAAyBL,CAAzB,CAAP;AAEA,OAtfgC;AAwfjCK,kBAAY,EAAE,sBAAWxgB,CAAX,EAAcC,CAAd,EAAkB;AAE/B,YAAM49D,EAAE,GAAG79D,CAAC,CAACoL,CAAb;AAAA,YAAgB0yD,EAAE,GAAG99D,CAAC,CAACmiB,CAAvB;AAAA,YAA0B47C,EAAE,GAAG/9D,CAAC,CAAC0tB,CAAjC;AACA,YAAMswC,EAAE,GAAG/9D,CAAC,CAACmL,CAAb;AAAA,YAAgB6yD,EAAE,GAAGh+D,CAAC,CAACkiB,CAAvB;AAAA,YAA0B+7C,EAAE,GAAGj+D,CAAC,CAACytB,CAAjC;AAEA,aAAKtiB,CAAL,GAAS0yD,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;AACA,aAAK97C,CAAL,GAAS47C,EAAE,GAAGC,EAAL,GAAUH,EAAE,GAAGK,EAAxB;AACA,aAAKxwC,CAAL,GAASmwC,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;AAEA,eAAO,IAAP;AAEA,OAngBgC;AAqgBjCG,qBAAe,EAAE,yBAAWh+C,CAAX,EAAe;AAE/B,YAAMi+C,WAAW,GAAGj+C,CAAC,CAAC+tC,QAAF,EAApB;AAEA,YAAKkQ,WAAW,KAAK,CAArB,EAAyB,OAAO,KAAKtgD,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAP;AAEzB,YAAM+uC,MAAM,GAAG1sC,CAAC,CAACjC,GAAF,CAAO,IAAP,IAAgBkgD,WAA/B;AAEA,eAAO,KAAKziD,IAAL,CAAWwE,CAAX,EAAetC,cAAf,CAA+BgvC,MAA/B,CAAP;AAEA,OA/gBgC;AAihBjCwR,oBAAc,EAAE,wBAAWC,WAAX,EAAyB;AAExChC,eAAO,CAAC3gD,IAAR,CAAc,IAAd,EAAqBwiD,eAArB,CAAsCG,WAAtC;;AAEA,eAAO,KAAK1hD,GAAL,CAAU0/C,OAAV,CAAP;AAEA,OAvhBgC;AAyhBjCiC,aAAO,EAAE,iBAAWC,MAAX,EAAoB;AAE5B;AACA;AAEA,eAAO,KAAK5hD,GAAL,CAAU0/C,OAAO,CAAC3gD,IAAR,CAAc6iD,MAAd,EAAuB3gD,cAAvB,CAAuC,IAAI,KAAKK,GAAL,CAAUsgD,MAAV,CAA3C,CAAV,CAAP;AAEA,OAhiBgC;AAkiBjCtD,aAAO,EAAE,iBAAW/6C,CAAX,EAAe;AAEvB,YAAMi+C,WAAW,GAAGplD,IAAI,CAACmK,IAAL,CAAW,KAAK+qC,QAAL,KAAkB/tC,CAAC,CAAC+tC,QAAF,EAA7B,CAApB;AAEA,YAAKkQ,WAAW,KAAK,CAArB,EAAyB,OAAOplD,IAAI,CAACC,EAAL,GAAU,CAAjB;AAEzB,YAAMuC,KAAK,GAAG,KAAK0C,GAAL,CAAUiC,CAAV,IAAgBi+C,WAA9B,CANuB,CAQvB;;AAEA,eAAOplD,IAAI,CAACq9C,IAAL,CAAWzM,SAAS,CAACS,KAAV,CAAiB7uC,KAAjB,EAAwB,CAAE,CAA1B,EAA6B,CAA7B,CAAX,CAAP;AAEA,OA9iBgC;AAgjBjC8yC,gBAAU,EAAE,oBAAWnuC,CAAX,EAAe;AAE1B,eAAOnH,IAAI,CAACmK,IAAL,CAAW,KAAKnF,iBAAL,CAAwBmC,CAAxB,CAAX,CAAP;AAEA,OApjBgC;AAsjBjCnC,uBAAiB,EAAE,2BAAWmC,CAAX,EAAe;AAEjC,YAAM8C,EAAE,GAAG,KAAK7X,CAAL,GAAS+U,CAAC,CAAC/U,CAAtB;AAAA,YAAyB8X,EAAE,GAAG,KAAKf,CAAL,GAAShC,CAAC,CAACgC,CAAzC;AAAA,YAA4Cs8C,EAAE,GAAG,KAAK/wC,CAAL,GAASvN,CAAC,CAACuN,CAA5D;AAEA,eAAOzK,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoBu7C,EAAE,GAAGA,EAAhC;AAEA,OA5jBgC;AA8jBjClQ,yBAAmB,EAAE,6BAAWpuC,CAAX,EAAe;AAEnC,eAAOnH,IAAI,CAAC4nB,GAAL,CAAU,KAAKx1B,CAAL,GAAS+U,CAAC,CAAC/U,CAArB,IAA2B4N,IAAI,CAAC4nB,GAAL,CAAU,KAAKze,CAAL,GAAShC,CAAC,CAACgC,CAArB,CAA3B,GAAsDnJ,IAAI,CAAC4nB,GAAL,CAAU,KAAKlT,CAAL,GAASvN,CAAC,CAACuN,CAArB,CAA7D;AAEA,OAlkBgC;AAokBjC/P,sBAAgB,EAAE,0BAAWoT,CAAX,EAAe;AAEhC,eAAO,KAAK2tC,sBAAL,CAA6B3tC,CAAC,CAACzT,MAA/B,EAAuCyT,CAAC,CAACzV,GAAzC,EAA8CyV,CAAC,CAACvV,KAAhD,CAAP;AAEA,OAxkBgC;AA0kBjCkjD,4BAAsB,EAAE,gCAAWphD,MAAX,EAAmBhC,GAAnB,EAAwBE,KAAxB,EAAgC;AAEvD,YAAMmjD,YAAY,GAAG3lD,IAAI,CAACwjC,GAAL,CAAUlhC,GAAV,IAAkBgC,MAAvC;AAEA,aAAKlS,CAAL,GAASuzD,YAAY,GAAG3lD,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAxB;AACA,aAAK2G,CAAL,GAASnJ,IAAI,CAACujC,GAAL,CAAUjhC,GAAV,IAAkBgC,MAA3B;AACA,aAAKoQ,CAAL,GAASixC,YAAY,GAAG3lD,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAxB;AAEA,eAAO,IAAP;AAEA,OAplBgC;AAslBjCojD,wBAAkB,EAAE,4BAAWvtC,CAAX,EAAe;AAElC,eAAO,KAAKwtC,wBAAL,CAA+BxtC,CAAC,CAAC/T,MAAjC,EAAyC+T,CAAC,CAAC7V,KAA3C,EAAkD6V,CAAC,CAAClP,CAApD,CAAP;AAEA,OA1lBgC;AA4lBjC08C,8BAAwB,EAAE,kCAAWvhD,MAAX,EAAmB9B,KAAnB,EAA0B2G,CAA1B,EAA8B;AAEvD,aAAK/W,CAAL,GAASkS,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAlB;AACA,aAAK2G,CAAL,GAASA,CAAT;AACA,aAAKuL,CAAL,GAASpQ,MAAM,GAAGtE,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAlB;AAEA,eAAO,IAAP;AAEA,OApmBgC;AAsmBjCsjD,2BAAqB,EAAE,+BAAW3pC,CAAX,EAAe;AAErC,YAAMp3B,CAAC,GAAGo3B,CAAC,CAACs4B,QAAZ;AAEA,aAAKriD,CAAL,GAASrN,CAAC,CAAE,EAAF,CAAV;AACA,aAAKokB,CAAL,GAASpkB,CAAC,CAAE,EAAF,CAAV;AACA,aAAK2vB,CAAL,GAAS3vB,CAAC,CAAE,EAAF,CAAV;AAEA,eAAO,IAAP;AAEA,OAhnBgC;AAknBjCghE,wBAAkB,EAAE,4BAAW5pC,CAAX,EAAe;AAElC,YAAM49B,EAAE,GAAG,KAAKzyC,mBAAL,CAA0B6U,CAA1B,EAA6B,CAA7B,EAAiCr1B,MAAjC,EAAX;AACA,YAAMkzD,EAAE,GAAG,KAAK1yC,mBAAL,CAA0B6U,CAA1B,EAA6B,CAA7B,EAAiCr1B,MAAjC,EAAX;AACA,YAAMk/D,EAAE,GAAG,KAAK1+C,mBAAL,CAA0B6U,CAA1B,EAA6B,CAA7B,EAAiCr1B,MAAjC,EAAX;AAEA,aAAKsL,CAAL,GAAS2nD,EAAT;AACA,aAAK5wC,CAAL,GAAS6wC,EAAT;AACA,aAAKtlC,CAAL,GAASsxC,EAAT;AAEA,eAAO,IAAP;AAEA,OA9nBgC;AAgoBjC1+C,yBAAmB,EAAE,6BAAW6U,CAAX,EAAc5N,KAAd,EAAsB;AAE1C,eAAO,KAAKunC,SAAL,CAAgB35B,CAAC,CAACs4B,QAAlB,EAA4BlmC,KAAK,GAAG,CAApC,CAAP;AAEA,OApoBgC;AAsoBjCgpC,0BAAoB,EAAE,8BAAWp7B,CAAX,EAAc5N,KAAd,EAAsB;AAE3C,eAAO,KAAKunC,SAAL,CAAgB35B,CAAC,CAACs4B,QAAlB,EAA4BlmC,KAAK,GAAG,CAApC,CAAP;AAEA,OA1oBgC;AA4oBjCsnC,YAAM,EAAE,gBAAW1uC,CAAX,EAAe;AAEtB,eAAWA,CAAC,CAAC/U,CAAF,KAAQ,KAAKA,CAAf,IAAwB+U,CAAC,CAACgC,CAAF,KAAQ,KAAKA,CAArC,IAA8ChC,CAAC,CAACuN,CAAF,KAAQ,KAAKA,CAApE;AAEA,OAhpBgC;AAkpBjCohC,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAK/Q,CAAL,GAASiyB,KAAK,CAAElhB,MAAF,CAAd;AACA,aAAKgG,CAAL,GAASkb,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AACA,aAAKuR,CAAL,GAAS2P,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AAEA,eAAO,IAAP;AAEA,OA5pBgC;AA8pBjC4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAK/Q,CAAvB;AACAiyB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKgG,CAA3B;AACAkb,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKuR,CAA3B;AAEA,eAAO2P,KAAP;AAEA,OAzqBgC;AA2qBjC2xB,yBAAmB,EAAE,6BAAWC,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAE1D,YAAKA,MAAM,KAAKtN,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,qEAAd;AAEA;;AAED,aAAKnN,CAAL,GAAS6jD,SAAS,CAACC,IAAV,CAAgB3nC,KAAhB,CAAT;AACA,aAAKpF,CAAL,GAAS8sC,SAAS,CAACE,IAAV,CAAgB5nC,KAAhB,CAAT;AACA,aAAKmG,CAAL,GAASuhC,SAAS,CAACuI,IAAV,CAAgBjwC,KAAhB,CAAT;AAEA,eAAO,IAAP;AAEA,OAzrBgC;AA2rBjCZ,YAAM,EAAE,kBAAY;AAEnB,aAAKvb,CAAL,GAAS4N,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAKxE,CAAL,GAASnJ,IAAI,CAAC2N,MAAL,EAAT;AACA,aAAK+G,CAAL,GAAS1U,IAAI,CAAC2N,MAAL,EAAT;AAEA,eAAO,IAAP;AAEA;AAnsBgC,KAAlC;;AAusBA,QAAMs4C,GAAG,GAAG,IAAI1C,OAAJ,EAAZ;;AACA,QAAM2C,GAAG,GAAG,IAAIC,OAAJ,EAAZ;;AACA,QAAMC,KAAK,GAAG,IAAI7C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AACA,QAAM8C,IAAI,GAAG,IAAI9C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAb;;AACA,QAAMhE,EAAE,GAAG,IAAIgE,OAAJ,EAAX;;AACA,QAAM/D,EAAE,GAAG,IAAI+D,OAAJ,EAAX;;AACA,QAAM9D,EAAE,GAAG,IAAI8D,OAAJ,EAAX;;AAEA,aAAS4C,OAAT,GAAmB;AAElB,WAAK1R,QAAL,GAAgB,CAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAIf,CAJe,EAIZ,CAJY,EAIT,CAJS,EAIN,CAJM,EAKf,CALe,EAKZ,CALY,EAKT,CALS,EAKN,CALM,CAAhB;;AASA,UAAK13C,SAAS,CAACjW,MAAV,GAAmB,CAAxB,EAA4B;AAE3B8B,eAAO,CAACD,KAAR,CAAe,+EAAf;AAEA;AAED;;AAEDK,UAAM,CAACiiC,MAAP,CAAek7B,OAAO,CAACxnD,SAAvB,EAAkC;AAEjC2nD,eAAS,EAAE,IAFsB;AAIjCxhD,SAAG,EAAE,aAAWyxC,GAAX,EAAgBC,GAAhB,EAAqBC,GAArB,EAA0B8P,GAA1B,EAA+B7P,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,EAA8C4P,GAA9C,EAAmD3P,GAAnD,EAAwDC,GAAxD,EAA6DC,GAA7D,EAAkE0P,GAAlE,EAAuEC,GAAvE,EAA4EC,GAA5E,EAAiFC,GAAjF,EAAsFC,GAAtF,EAA4F;AAEhG,YAAM7P,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,GAAUT,GAAV;AAAeS,UAAE,CAAE,CAAF,CAAF,GAAUR,GAAV;AAAeQ,UAAE,CAAE,CAAF,CAAF,GAAUP,GAAV;AAAeO,UAAE,CAAE,EAAF,CAAF,GAAWuP,GAAX;AAC7CvP,UAAE,CAAE,CAAF,CAAF,GAAUN,GAAV;AAAeM,UAAE,CAAE,CAAF,CAAF,GAAUL,GAAV;AAAeK,UAAE,CAAE,CAAF,CAAF,GAAUJ,GAAV;AAAeI,UAAE,CAAE,EAAF,CAAF,GAAWwP,GAAX;AAC7CxP,UAAE,CAAE,CAAF,CAAF,GAAUH,GAAV;AAAeG,UAAE,CAAE,CAAF,CAAF,GAAUF,GAAV;AAAeE,UAAE,CAAE,EAAF,CAAF,GAAWD,GAAX;AAAgBC,UAAE,CAAE,EAAF,CAAF,GAAWyP,GAAX;AAC9CzP,UAAE,CAAE,CAAF,CAAF,GAAU0P,GAAV;AAAe1P,UAAE,CAAE,CAAF,CAAF,GAAU2P,GAAV;AAAe3P,UAAE,CAAE,EAAF,CAAF,GAAW4P,GAAX;AAAgB5P,UAAE,CAAE,EAAF,CAAF,GAAW6P,GAAX;AAE9C,eAAO,IAAP;AAEA,OAfgC;AAiBjC5P,cAAQ,EAAE,oBAAY;AAErB,aAAKnyC,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OA9BgC;AAgCjC/C,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAIokD,OAAJ,GAAcrQ,SAAd,CAAyB,KAAKrB,QAA9B,CAAP;AAEA,OApCgC;AAsCjC9xC,UAAI,EAAE,cAAWwZ,CAAX,EAAe;AAEpB,YAAM66B,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMyC,EAAE,GAAG/6B,CAAC,CAACs4B,QAAb;AAEAuC,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACzDF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACzDF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAC3DF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAE/D,eAAO,IAAP;AAEA,OAlDgC;AAoDjC4P,kBAAY,EAAE,sBAAW3qC,CAAX,EAAe;AAE5B,YAAM66B,EAAE,GAAG,KAAKvC,QAAhB;AAAA,YAA0ByC,EAAE,GAAG/6B,CAAC,CAACs4B,QAAjC;AAEAuC,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AACAF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AACAF,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAEA,eAAO,IAAP;AAEA,OA9DgC;AAgEjCC,kBAAY,EAAE,sBAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE9CF,aAAK,CAAC9vC,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AACA+vC,aAAK,CAAC/vC,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AACAgwC,aAAK,CAAChwC,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AAEA,eAAO,IAAP;AAEA,OAxEgC;AA0EjCy/C,eAAS,EAAE,mBAAW3P,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE3C,aAAKxyC,GAAL,CACCsyC,KAAK,CAAChlD,CADP,EACUilD,KAAK,CAACjlD,CADhB,EACmBklD,KAAK,CAACllD,CADzB,EAC4B,CAD5B,EAECglD,KAAK,CAACjuC,CAFP,EAEUkuC,KAAK,CAACluC,CAFhB,EAEmBmuC,KAAK,CAACnuC,CAFzB,EAE4B,CAF5B,EAGCiuC,KAAK,CAAC1iC,CAHP,EAGU2iC,KAAK,CAAC3iC,CAHhB,EAGmB4iC,KAAK,CAAC5iC,CAHzB,EAG4B,CAH5B,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV;AAOA,eAAO,IAAP;AAEA,OArFgC;AAuFjCsyC,qBAAe,EAAE,yBAAW7qC,CAAX,EAAe;AAE/B;AAEA,YAAM66B,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMyC,EAAE,GAAG/6B,CAAC,CAACs4B,QAAb;;AAEA,YAAMwS,MAAM,GAAG,IAAIhB,GAAG,CAAC3+C,mBAAJ,CAAyB6U,CAAzB,EAA4B,CAA5B,EAAgCr1B,MAAhC,EAAnB;;AACA,YAAMogE,MAAM,GAAG,IAAIjB,GAAG,CAAC3+C,mBAAJ,CAAyB6U,CAAzB,EAA4B,CAA5B,EAAgCr1B,MAAhC,EAAnB;;AACA,YAAMqgE,MAAM,GAAG,IAAIlB,GAAG,CAAC3+C,mBAAJ,CAAyB6U,CAAzB,EAA4B,CAA5B,EAAgCr1B,MAAhC,EAAnB;;AAEAkwD,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU+P,MAApB;AACAjQ,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU+P,MAApB;AACAjQ,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU+P,MAApB;AACAjQ,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUgQ,MAApB;AACAlQ,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUgQ,MAApB;AACAlQ,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUgQ,MAApB;AACAlQ,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUiQ,MAApB;AACAnQ,UAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUiQ,MAApB;AACAnQ,UAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAF,GAAWiQ,MAAtB;AACAnQ,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,eAAO,IAAP;AAEA,OAxHgC;AA0HjCoQ,2BAAqB,EAAE,+BAAW/F,KAAX,EAAmB;AAEzC,YAAK,EAAIA,KAAK,IAAIA,KAAK,CAACC,OAAnB,CAAL,EAAoC;AAEnC14D,iBAAO,CAACD,KAAR,CAAe,uGAAf;AAEA;;AAED,YAAMquD,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMriD,CAAC,GAAGivD,KAAK,CAACjvD,CAAhB;AAAA,YAAmB+W,CAAC,GAAGk4C,KAAK,CAACl4C,CAA7B;AAAA,YAAgCuL,CAAC,GAAG2sC,KAAK,CAAC3sC,CAA1C;AACA,YAAM1tB,CAAC,GAAGgZ,IAAI,CAACujC,GAAL,CAAUnxC,CAAV,CAAV;AAAA,YAAyBnL,CAAC,GAAG+Y,IAAI,CAACwjC,GAAL,CAAUpxC,CAAV,CAA7B;AACA,YAAMimB,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAUp6B,CAAV,CAAV;AAAA,YAAyBmP,CAAC,GAAGtY,IAAI,CAACwjC,GAAL,CAAUr6B,CAAV,CAA7B;AACA,YAAMpkB,CAAC,GAAGib,IAAI,CAACujC,GAAL,CAAU7uB,CAAV,CAAV;AAAA,YAAyB+D,CAAC,GAAGzY,IAAI,CAACwjC,GAAL,CAAU9uB,CAAV,CAA7B;;AAEA,YAAK2sC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAE5B,cAAM2E,EAAE,GAAG3wD,CAAC,GAAGjC,CAAf;AAAA,cAAkBsiE,EAAE,GAAGrgE,CAAC,GAAGyxB,CAA3B;AAAA,cAA8Bm/B,EAAE,GAAG3wD,CAAC,GAAGlC,CAAvC;AAAA,cAA0CuiE,EAAE,GAAGrgE,CAAC,GAAGwxB,CAAnD;AAEAu+B,YAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGtzB,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE3+B,CAAF,GAAMI,CAAhB;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAU1+B,CAAV;AAEA0+B,YAAE,CAAE,CAAF,CAAF,GAAUqQ,EAAE,GAAGzP,EAAE,GAAGt/B,CAApB;AACA0+B,YAAE,CAAE,CAAF,CAAF,GAAUW,EAAE,GAAG2P,EAAE,GAAGhvC,CAApB;AACA0+B,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE/vD,CAAF,GAAMoxB,CAAhB;AAEA2+B,YAAE,CAAE,CAAF,CAAF,GAAUsQ,EAAE,GAAG3P,EAAE,GAAGr/B,CAApB;AACA0+B,YAAE,CAAE,CAAF,CAAF,GAAUY,EAAE,GAAGyP,EAAE,GAAG/uC,CAApB;AACA0+B,YAAE,CAAE,EAAF,CAAF,GAAWhwD,CAAC,GAAGqxB,CAAf;AAEA,SAhBD,MAgBO,IAAKgpC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAEnC,cAAMuU,EAAE,GAAGlvC,CAAC,GAAGtzB,CAAf;AAAA,cAAkByiE,EAAE,GAAGnvC,CAAC,GAAGI,CAA3B;AAAA,cAA8BgvC,EAAE,GAAGnvC,CAAC,GAAGvzB,CAAvC;AAAA,cAA0C2iE,EAAE,GAAGpvC,CAAC,GAAGG,CAAnD;AAEAu+B,YAAE,CAAE,CAAF,CAAF,GAAUuQ,EAAE,GAAGG,EAAE,GAAGzgE,CAApB;AACA+vD,YAAE,CAAE,CAAF,CAAF,GAAUyQ,EAAE,GAAGxgE,CAAL,GAASugE,EAAnB;AACAxQ,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGsxB,CAAd;AAEA0+B,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGyxB,CAAd;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGjC,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE/vD,CAAZ;AAEA+vD,YAAE,CAAE,CAAF,CAAF,GAAUwQ,EAAE,GAAGvgE,CAAL,GAASwgE,EAAnB;AACAzQ,YAAE,CAAE,CAAF,CAAF,GAAU0Q,EAAE,GAAGH,EAAE,GAAGtgE,CAApB;AACA+vD,YAAE,CAAE,EAAF,CAAF,GAAWhwD,CAAC,GAAGqxB,CAAf;AAEA,SAhBM,MAgBA,IAAKgpC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAEnC,cAAMuU,GAAE,GAAGlvC,CAAC,GAAGtzB,CAAf;AAAA,cAAkByiE,GAAE,GAAGnvC,CAAC,GAAGI,CAA3B;AAAA,cAA8BgvC,GAAE,GAAGnvC,CAAC,GAAGvzB,CAAvC;AAAA,cAA0C2iE,GAAE,GAAGpvC,CAAC,GAAGG,CAAnD;;AAEAu+B,YAAE,CAAE,CAAF,CAAF,GAAUuQ,GAAE,GAAGG,GAAE,GAAGzgE,CAApB;AACA+vD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAEhwD,CAAF,GAAMyxB,CAAhB;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAUyQ,GAAE,GAAGD,GAAE,GAAGvgE,CAApB;AAEA+vD,YAAE,CAAE,CAAF,CAAF,GAAUwQ,GAAE,GAAGC,GAAE,GAAGxgE,CAApB;AACA+vD,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGjC,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU0Q,GAAE,GAAGH,GAAE,GAAGtgE,CAApB;AAEA+vD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAEhwD,CAAF,GAAMsxB,CAAhB;AACA0+B,YAAE,CAAE,CAAF,CAAF,GAAU/vD,CAAV;AACA+vD,YAAE,CAAE,EAAF,CAAF,GAAWhwD,CAAC,GAAGqxB,CAAf;AAEA,SAhBM,MAgBA,IAAKgpC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAEnC,cAAM2E,GAAE,GAAG3wD,CAAC,GAAGjC,CAAf;AAAA,cAAkBsiE,GAAE,GAAGrgE,CAAC,GAAGyxB,CAA3B;AAAA,cAA8Bm/B,GAAE,GAAG3wD,CAAC,GAAGlC,CAAvC;AAAA,cAA0CuiE,GAAE,GAAGrgE,CAAC,GAAGwxB,CAAnD;;AAEAu+B,YAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGtzB,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAUY,GAAE,GAAGt/B,CAAL,GAAS+uC,GAAnB;AACArQ,YAAE,CAAE,CAAF,CAAF,GAAUW,GAAE,GAAGr/B,CAAL,GAASgvC,GAAnB;AAEAtQ,YAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGI,CAAd;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAUsQ,GAAE,GAAGhvC,CAAL,GAASq/B,GAAnB;AACAX,YAAE,CAAE,CAAF,CAAF,GAAUqQ,GAAE,GAAG/uC,CAAL,GAASs/B,GAAnB;AAEAZ,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE1+B,CAAZ;AACA0+B,YAAE,CAAE,CAAF,CAAF,GAAU/vD,CAAC,GAAGoxB,CAAd;AACA2+B,YAAE,CAAE,EAAF,CAAF,GAAWhwD,CAAC,GAAGqxB,CAAf;AAEA,SAhBM,MAgBA,IAAKgpC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAEnC,cAAM2U,EAAE,GAAG3gE,CAAC,GAAGqxB,CAAf;AAAA,cAAkBuvC,EAAE,GAAG5gE,CAAC,GAAGsxB,CAA3B;AAAA,cAA8BuvC,EAAE,GAAG5gE,CAAC,GAAGoxB,CAAvC;AAAA,cAA0CyvC,EAAE,GAAG7gE,CAAC,GAAGqxB,CAAnD;AAEA0+B,YAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGtzB,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU8Q,EAAE,GAAGH,EAAE,GAAGlvC,CAApB;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAU6Q,EAAE,GAAGpvC,CAAL,GAASmvC,EAAnB;AAEA5Q,YAAE,CAAE,CAAF,CAAF,GAAUv+B,CAAV;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGjC,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE/vD,CAAF,GAAMlC,CAAhB;AAEAiyD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAE1+B,CAAF,GAAMvzB,CAAhB;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU4Q,EAAE,GAAGnvC,CAAL,GAASovC,EAAnB;AACA7Q,YAAE,CAAE,EAAF,CAAF,GAAW2Q,EAAE,GAAGG,EAAE,GAAGrvC,CAArB;AAEA,SAhBM,MAgBA,IAAK4oC,KAAK,CAACrO,KAAN,KAAgB,KAArB,EAA6B;AAEnC,cAAM2U,GAAE,GAAG3gE,CAAC,GAAGqxB,CAAf;AAAA,cAAkBuvC,GAAE,GAAG5gE,CAAC,GAAGsxB,CAA3B;AAAA,cAA8BuvC,GAAE,GAAG5gE,CAAC,GAAGoxB,CAAvC;AAAA,cAA0CyvC,GAAE,GAAG7gE,CAAC,GAAGqxB,CAAnD;;AAEA0+B,YAAE,CAAE,CAAF,CAAF,GAAU3+B,CAAC,GAAGtzB,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU,CAAEv+B,CAAZ;AACAu+B,YAAE,CAAE,CAAF,CAAF,GAAU1+B,CAAC,GAAGvzB,CAAd;AAEAiyD,YAAE,CAAE,CAAF,CAAF,GAAU2Q,GAAE,GAAGlvC,CAAL,GAASqvC,GAAnB;AACA9Q,YAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAC,GAAGjC,CAAd;AACAiyD,YAAE,CAAE,CAAF,CAAF,GAAU4Q,GAAE,GAAGnvC,CAAL,GAASovC,GAAnB;AAEA7Q,YAAE,CAAE,CAAF,CAAF,GAAU6Q,GAAE,GAAGpvC,CAAL,GAASmvC,GAAnB;AACA5Q,YAAE,CAAE,CAAF,CAAF,GAAU/vD,CAAC,GAAGlC,CAAd;AACAiyD,YAAE,CAAE,EAAF,CAAF,GAAW8Q,GAAE,GAAGrvC,CAAL,GAASkvC,GAApB;AAEA,SA/GwC,CAiHzC;;;AACA3Q,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AACAA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX,CApHyC,CAsHzC;;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,eAAO,IAAP;AAEA,OAxPgC;AA0PjC+Q,gCAA0B,EAAE,oCAAW3vB,CAAX,EAAe;AAE1C,eAAO,KAAK4vB,OAAL,CAAc5B,KAAd,EAAqBhuB,CAArB,EAAwBiuB,IAAxB,CAAP;AAEA,OA9PgC;AAgQjCzhD,YAAM,EAAE,gBAAWqjD,GAAX,EAAgB32D,MAAhB,EAAwBgS,EAAxB,EAA6B;AAEpC,YAAM0zC,EAAE,GAAG,KAAKvC,QAAhB;;AAEAgL,UAAE,CAACv2C,UAAH,CAAe++C,GAAf,EAAoB32D,MAApB;;AAEA,YAAKmuD,EAAE,CAACvK,QAAH,OAAkB,CAAvB,EAA2B;AAE1B;AAEAuK,YAAE,CAAC/qC,CAAH,GAAO,CAAP;AAEA;;AAED+qC,UAAE,CAACrK,SAAH;;AACAmK,UAAE,CAAC/3C,YAAH,CAAiBlE,EAAjB,EAAqBm8C,EAArB;;AAEA,YAAKF,EAAE,CAACrK,QAAH,OAAkB,CAAvB,EAA2B;AAE1B;AAEA,cAAKl1C,IAAI,CAAC4nB,GAAL,CAAUtkB,EAAE,CAACoR,CAAb,MAAqB,CAA1B,EAA8B;AAE7B+qC,cAAE,CAACrtD,CAAH,IAAQ,MAAR;AAEA,WAJD,MAIO;AAENqtD,cAAE,CAAC/qC,CAAH,IAAQ,MAAR;AAEA;;AAED+qC,YAAE,CAACrK,SAAH;;AACAmK,YAAE,CAAC/3C,YAAH,CAAiBlE,EAAjB,EAAqBm8C,EAArB;AAEA;;AAEDF,UAAE,CAACnK,SAAH;;AACAoK,UAAE,CAACh4C,YAAH,CAAiBi4C,EAAjB,EAAqBF,EAArB;;AAEAvI,UAAE,CAAE,CAAF,CAAF,GAAUuI,EAAE,CAACntD,CAAb;AAAgB4kD,UAAE,CAAE,CAAF,CAAF,GAAUwI,EAAE,CAACptD,CAAb;AAAgB4kD,UAAE,CAAE,CAAF,CAAF,GAAUyI,EAAE,CAACrtD,CAAb;AAChC4kD,UAAE,CAAE,CAAF,CAAF,GAAUuI,EAAE,CAACp2C,CAAb;AAAgB6tC,UAAE,CAAE,CAAF,CAAF,GAAUwI,EAAE,CAACr2C,CAAb;AAAgB6tC,UAAE,CAAE,CAAF,CAAF,GAAUyI,EAAE,CAACt2C,CAAb;AAChC6tC,UAAE,CAAE,CAAF,CAAF,GAAUuI,EAAE,CAAC7qC,CAAb;AAAgBsiC,UAAE,CAAE,CAAF,CAAF,GAAUwI,EAAE,CAAC9qC,CAAb;AAAgBsiC,UAAE,CAAE,EAAF,CAAF,GAAWyI,EAAE,CAAC/qC,CAAd;AAEhC,eAAO,IAAP;AAEA,OA7SgC;AA+SjC2/B,cAAQ,EAAE,kBAAWl4B,CAAX,EAAc/D,CAAd,EAAkB;AAE3B,YAAKA,CAAC,KAAKviB,SAAX,EAAuB;AAEtBjN,iBAAO,CAAC2W,IAAR,CAAc,kGAAd;AACA,iBAAO,KAAKk4C,gBAAL,CAAuBt7B,CAAvB,EAA0B/D,CAA1B,CAAP;AAEA;;AAED,eAAO,KAAKq/B,gBAAL,CAAuB,IAAvB,EAA6Bt7B,CAA7B,CAAP;AAEA,OA1TgC;AA4TjCu7B,iBAAW,EAAE,qBAAWv7B,CAAX,EAAe;AAE3B,eAAO,KAAKs7B,gBAAL,CAAuBt7B,CAAvB,EAA0B,IAA1B,CAAP;AAEA,OAhUgC;AAkUjCs7B,sBAAgB,EAAE,0BAAWzwD,CAAX,EAAcC,CAAd,EAAkB;AAEnC,YAAM0wD,EAAE,GAAG3wD,CAAC,CAACytD,QAAb;AACA,YAAMmD,EAAE,GAAG3wD,CAAC,CAACwtD,QAAb;AACA,YAAMuC,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMoD,GAAG,GAAGF,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBG,GAAG,GAAGH,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCI,GAAG,GAAGJ,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmDuQ,GAAG,GAAGvQ,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMK,GAAG,GAAGL,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBM,GAAG,GAAGN,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCO,GAAG,GAAGP,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmDwQ,GAAG,GAAGxQ,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMQ,GAAG,GAAGR,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBS,GAAG,GAAGT,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCU,GAAG,GAAGV,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoDyQ,GAAG,GAAGzQ,EAAE,CAAE,EAAF,CAA5D;AACA,YAAM0Q,GAAG,GAAG1Q,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqB2Q,GAAG,GAAG3Q,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC4Q,GAAG,GAAG5Q,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoD6Q,GAAG,GAAG7Q,EAAE,CAAE,EAAF,CAA5D;AAEA,YAAMW,GAAG,GAAGV,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBW,GAAG,GAAGX,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCY,GAAG,GAAGZ,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmD6Q,GAAG,GAAG7Q,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMa,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmD8Q,GAAG,GAAG9Q,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCkB,GAAG,GAAGlB,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoD+Q,GAAG,GAAG/Q,EAAE,CAAE,EAAF,CAA5D;AACA,YAAMgR,GAAG,GAAGhR,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBiR,GAAG,GAAGjR,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCkR,GAAG,GAAGlR,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoDmR,GAAG,GAAGnR,EAAE,CAAE,EAAF,CAA5D;AAEAZ,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGa,GAA9B,GAAoCsP,GAAG,GAAGU,GAApD;AACA5R,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGc,GAA9B,GAAoCqP,GAAG,GAAGW,GAApD;AACA7R,UAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGW,GAAN,GAAYV,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGe,GAA9B,GAAoCoP,GAAG,GAAGY,GAApD;AACA9R,UAAE,CAAE,EAAF,CAAF,GAAWa,GAAG,GAAG4Q,GAAN,GAAY3Q,GAAG,GAAG4Q,GAAlB,GAAwB3Q,GAAG,GAAG4Q,GAA9B,GAAoCT,GAAG,GAAGa,GAArD;AAEA/R,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGM,GAAN,GAAYL,GAAG,GAAGQ,GAAlB,GAAwBP,GAAG,GAAGU,GAA9B,GAAoCuP,GAAG,GAAGS,GAApD;AACA5R,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGO,GAAN,GAAYN,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGW,GAA9B,GAAoCsP,GAAG,GAAGU,GAApD;AACA7R,UAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGU,GAAlB,GAAwBT,GAAG,GAAGY,GAA9B,GAAoCqP,GAAG,GAAGW,GAApD;AACA9R,UAAE,CAAE,EAAF,CAAF,GAAWgB,GAAG,GAAGyQ,GAAN,GAAYxQ,GAAG,GAAGyQ,GAAlB,GAAwBxQ,GAAG,GAAGyQ,GAA9B,GAAoCR,GAAG,GAAGY,GAArD;AAEA/R,UAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGG,GAAN,GAAYF,GAAG,GAAGK,GAAlB,GAAwBJ,GAAG,GAAGO,GAA9B,GAAoCwP,GAAG,GAAGQ,GAApD;AACA5R,UAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGM,GAAlB,GAAwBL,GAAG,GAAGQ,GAA9B,GAAoCuP,GAAG,GAAGS,GAApD;AACA7R,UAAE,CAAE,EAAF,CAAF,GAAWmB,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGS,GAA9B,GAAoCsP,GAAG,GAAGU,GAArD;AACA9R,UAAE,CAAE,EAAF,CAAF,GAAWmB,GAAG,GAAGsQ,GAAN,GAAYrQ,GAAG,GAAGsQ,GAAlB,GAAwBrQ,GAAG,GAAGsQ,GAA9B,GAAoCP,GAAG,GAAGW,GAArD;AAEA/R,UAAE,CAAE,CAAF,CAAF,GAAUqR,GAAG,GAAG/P,GAAN,GAAYgQ,GAAG,GAAG7P,GAAlB,GAAwB8P,GAAG,GAAG3P,GAA9B,GAAoC4P,GAAG,GAAGI,GAApD;AACA5R,UAAE,CAAE,CAAF,CAAF,GAAUqR,GAAG,GAAG9P,GAAN,GAAY+P,GAAG,GAAG5P,GAAlB,GAAwB6P,GAAG,GAAG1P,GAA9B,GAAoC2P,GAAG,GAAGK,GAApD;AACA7R,UAAE,CAAE,EAAF,CAAF,GAAWqR,GAAG,GAAG7P,GAAN,GAAY8P,GAAG,GAAG3P,GAAlB,GAAwB4P,GAAG,GAAGzP,GAA9B,GAAoC0P,GAAG,GAAGM,GAArD;AACA9R,UAAE,CAAE,EAAF,CAAF,GAAWqR,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGO,GAArD;AAEA,eAAO,IAAP;AAEA,OAxWgC;AA0WjClkD,oBAAc,EAAE,wBAAWkT,CAAX,EAAe;AAE9B,YAAMi/B,EAAE,GAAG,KAAKvC,QAAhB;AAEAuC,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAC1Ci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAC1Ci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAAei/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAC3Ci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,CAAF,CAAF,IAAWj/B,CAAX;AAAci/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAAei/B,UAAE,CAAE,EAAF,CAAF,IAAYj/B,CAAZ;AAE3C,eAAO,IAAP;AAEA,OArXgC;AAuXjCghC,iBAAW,EAAE,uBAAY;AAExB,YAAM/B,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAM8B,GAAG,GAAGS,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmDuP,GAAG,GAAGvP,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMN,GAAG,GAAGM,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmDwP,GAAG,GAAGxP,EAAE,CAAE,EAAF,CAA3D;AACA,YAAMH,GAAG,GAAGG,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBF,GAAG,GAAGE,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCD,GAAG,GAAGC,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoDyP,GAAG,GAAGzP,EAAE,CAAE,EAAF,CAA5D;AACA,YAAM0P,GAAG,GAAG1P,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqB2P,GAAG,GAAG3P,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC4P,GAAG,GAAG5P,EAAE,CAAE,EAAF,CAA5C;AAAA,YAAoD6P,GAAG,GAAG7P,EAAE,CAAE,EAAF,CAA5D,CAPwB,CASxB;AACA;;AAEA,eACC0P,GAAG,IACF,CAAEH,GAAF,GAAQ3P,GAAR,GAAcE,GAAd,GACGL,GAAG,GAAG+P,GAAN,GAAY1P,GADf,GAEGyP,GAAG,GAAG5P,GAAN,GAAYI,GAFf,GAGGP,GAAG,GAAGgQ,GAAN,GAAYzP,GAHf,GAIGN,GAAG,GAAGE,GAAN,GAAY8P,GAJf,GAKGjQ,GAAG,GAAGI,GAAN,GAAY6P,GANb,CAAH,GAQAE,GAAG,IACF,CAAEpQ,GAAF,GAAQK,GAAR,GAAc6P,GAAd,GACGlQ,GAAG,GAAGiQ,GAAN,GAAYzP,GADf,GAEGwP,GAAG,GAAG7P,GAAN,GAAYK,GAFf,GAGGN,GAAG,GAAGC,GAAN,GAAY+P,GAHf,GAIGhQ,GAAG,GAAG+P,GAAN,GAAY3P,GAJf,GAKG0P,GAAG,GAAG3P,GAAN,GAAYC,GANb,CARH,GAgBA+P,GAAG,IACF,CAAErQ,GAAF,GAAQiQ,GAAR,GAAc1P,GAAd,GACGP,GAAG,GAAGI,GAAN,GAAY8P,GADf,GAEGF,GAAG,GAAG7P,GAAN,GAAYI,GAFf,GAGGN,GAAG,GAAGE,GAAN,GAAY+P,GAHf,GAIGF,GAAG,GAAG5P,GAAN,GAAYE,GAJf,GAKGL,GAAG,GAAGgQ,GAAN,GAAY3P,GANb,CAhBH,GAwBAgQ,GAAG,IACF,CAAEpQ,GAAF,GAAQE,GAAR,GAAcE,GAAd,GACGN,GAAG,GAAGK,GAAN,GAAYE,GADf,GAEGP,GAAG,GAAGI,GAAN,GAAYI,GAFf,GAGGN,GAAG,GAAGC,GAAN,GAAYI,GAHf,GAIGN,GAAG,GAAGE,GAAN,GAAYK,GAJf,GAKGP,GAAG,GAAGI,GAAN,GAAYC,GANb,CAzBJ;AAoCA,OAvagC;AAyajC0C,eAAS,EAAE,qBAAY;AAEtB,YAAMvC,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAI+E,GAAJ;AAEAA,WAAG,GAAGxC,EAAE,CAAE,CAAF,CAAR;AAAeA,UAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,UAAE,CAAE,CAAF,CAAF,GAAUwC,GAAV;AAClCA,WAAG,GAAGxC,EAAE,CAAE,CAAF,CAAR;AAAeA,UAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,UAAE,CAAE,CAAF,CAAF,GAAUwC,GAAV;AAClCA,WAAG,GAAGxC,EAAE,CAAE,CAAF,CAAR;AAAeA,UAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,UAAE,CAAE,CAAF,CAAF,GAAUwC,GAAV;AAElCA,WAAG,GAAGxC,EAAE,CAAE,CAAF,CAAR;AAAeA,UAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,EAAF,CAAZ;AAAoBA,UAAE,CAAE,EAAF,CAAF,GAAWwC,GAAX;AACnCA,WAAG,GAAGxC,EAAE,CAAE,CAAF,CAAR;AAAeA,UAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,EAAF,CAAZ;AAAoBA,UAAE,CAAE,EAAF,CAAF,GAAWwC,GAAX;AACnCA,WAAG,GAAGxC,EAAE,CAAE,EAAF,CAAR;AAAgBA,UAAE,CAAE,EAAF,CAAF,GAAWA,EAAE,CAAE,EAAF,CAAb;AAAqBA,UAAE,CAAE,EAAF,CAAF,GAAWwC,GAAX;AAErC,eAAO,IAAP;AAEA,OAxbgC;AA0bjCwP,iBAAW,EAAE,qBAAW52D,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAEjC,YAAMsiC,EAAE,GAAG,KAAKvC,QAAhB;;AAEA,YAAKriD,CAAC,CAACqxD,SAAP,EAAmB;AAElBzM,YAAE,CAAE,EAAF,CAAF,GAAW5kD,CAAC,CAACA,CAAb;AACA4kD,YAAE,CAAE,EAAF,CAAF,GAAW5kD,CAAC,CAAC+W,CAAb;AACA6tC,YAAE,CAAE,EAAF,CAAF,GAAW5kD,CAAC,CAACsiB,CAAb;AAEA,SAND,MAMO;AAENsiC,YAAE,CAAE,EAAF,CAAF,GAAW5kD,CAAX;AACA4kD,YAAE,CAAE,EAAF,CAAF,GAAW7tC,CAAX;AACA6tC,YAAE,CAAE,EAAF,CAAF,GAAWtiC,CAAX;AAEA;;AAED,eAAO,IAAP;AAEA,OA9cgC;AAgdjCskC,gBAAU,EAAE,oBAAW78B,CAAX,EAAc88B,iBAAd,EAAkC;AAE7C,YAAKA,iBAAiB,KAAKpjD,SAA3B,EAAuC;AAEtCjN,iBAAO,CAAC2W,IAAR,CAAc,kFAAd;AAEA,SAN4C,CAQ7C;;;AACA,YAAMy3C,EAAE,GAAG,KAAKvC,QAAhB;AAAA,YACCyC,EAAE,GAAG/6B,CAAC,CAACs4B,QADR;AAAA,YAGC8B,GAAG,GAAGW,EAAE,CAAE,CAAF,CAHT;AAAA,YAGgBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAHxB;AAAA,YAG+BL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAHvC;AAAA,YAG8CwP,GAAG,GAAGxP,EAAE,CAAE,CAAF,CAHtD;AAAA,YAICV,GAAG,GAAGU,EAAE,CAAE,CAAF,CAJT;AAAA,YAIgBP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAJxB;AAAA,YAI+BJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAJvC;AAAA,YAI8CyP,GAAG,GAAGzP,EAAE,CAAE,CAAF,CAJtD;AAAA,YAKCT,GAAG,GAAGS,EAAE,CAAE,CAAF,CALT;AAAA,YAKgBN,GAAG,GAAGM,EAAE,CAAE,CAAF,CALxB;AAAA,YAK+BH,GAAG,GAAGG,EAAE,CAAE,EAAF,CALvC;AAAA,YAK+C0P,GAAG,GAAG1P,EAAE,CAAE,EAAF,CALvD;AAAA,YAMCqP,GAAG,GAAGrP,EAAE,CAAE,EAAF,CANT;AAAA,YAMiBsP,GAAG,GAAGtP,EAAE,CAAE,EAAF,CANzB;AAAA,YAMiCuP,GAAG,GAAGvP,EAAE,CAAE,EAAF,CANzC;AAAA,YAMiD2P,GAAG,GAAG3P,EAAE,CAAE,EAAF,CANzD;AAAA,YAQCgC,GAAG,GAAGtC,GAAG,GAAG6P,GAAN,GAAYE,GAAZ,GAAkBH,GAAG,GAAGzP,GAAN,GAAY4P,GAA9B,GAAoCH,GAAG,GAAG1P,GAAN,GAAY8P,GAAhD,GAAsDjQ,GAAG,GAAG8P,GAAN,GAAYG,GAAlE,GAAwEhQ,GAAG,GAAGE,GAAN,GAAY+P,GAApF,GAA0FlQ,GAAG,GAAGI,GAAN,GAAY8P,GAR7G;AAAA,YASC1N,GAAG,GAAGoN,GAAG,GAAGxP,GAAN,GAAY4P,GAAZ,GAAkBlQ,GAAG,GAAGgQ,GAAN,GAAYE,GAA9B,GAAoCJ,GAAG,GAAGzP,GAAN,GAAY8P,GAAhD,GAAsDpQ,GAAG,GAAGiQ,GAAN,GAAYG,GAAlE,GAAwEnQ,GAAG,GAAGK,GAAN,GAAY+P,GAApF,GAA0FrQ,GAAG,GAAGO,GAAN,GAAY8P,GAT7G;AAAA,YAUCzN,GAAG,GAAG3C,GAAG,GAAG+P,GAAN,GAAYG,GAAZ,GAAkBJ,GAAG,GAAG3P,GAAN,GAAY+P,GAA9B,GAAoCJ,GAAG,GAAG5P,GAAN,GAAYiQ,GAAhD,GAAsDpQ,GAAG,GAAGgQ,GAAN,GAAYI,GAAlE,GAAwEnQ,GAAG,GAAGE,GAAN,GAAYkQ,GAApF,GAA0FrQ,GAAG,GAAGI,GAAN,GAAYiQ,GAV7G;AAAA,YAWCoC,GAAG,GAAG1C,GAAG,GAAG3P,GAAN,GAAYE,GAAZ,GAAkBL,GAAG,GAAG+P,GAAN,GAAY1P,GAA9B,GAAoCyP,GAAG,GAAG5P,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAGgQ,GAAN,GAAYzP,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAY8P,GAApF,GAA0FjQ,GAAG,GAAGI,GAAN,GAAY6P,GAX7G;AAaA,YAAMpN,GAAG,GAAG9C,GAAG,GAAG2C,GAAN,GAAYxC,GAAG,GAAGyC,GAAlB,GAAwBtC,GAAG,GAAGuC,GAA9B,GAAoCsN,GAAG,GAAGuC,GAAtD;AAEA,YAAK5P,GAAG,KAAK,CAAb,EAAiB,OAAO,KAAKv0C,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAApD,EAAuD,CAAvD,CAAP;AAEjB,YAAMw0C,MAAM,GAAG,IAAID,GAAnB;AAEArC,UAAE,CAAE,CAAF,CAAF,GAAUkC,GAAG,GAAGI,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEwP,GAAG,GAAGzP,GAAN,GAAY2P,GAAZ,GAAkB9P,GAAG,GAAG6P,GAAN,GAAYC,GAA9B,GAAoCF,GAAG,GAAG3P,GAAN,GAAY+P,GAAhD,GAAsDlQ,GAAG,GAAG+P,GAAN,GAAYG,GAAlE,GAAwEhQ,GAAG,GAAGC,GAAN,GAAYgQ,GAApF,GAA0FnQ,GAAG,GAAGK,GAAN,GAAY8P,GAAxG,IAAgHvN,MAA1H;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEL,GAAG,GAAG8P,GAAN,GAAYC,GAAZ,GAAkBF,GAAG,GAAG1P,GAAN,GAAY4P,GAA9B,GAAoCF,GAAG,GAAG3P,GAAN,GAAY8P,GAAhD,GAAsDjQ,GAAG,GAAG+P,GAAN,GAAYE,GAAlE,GAAwEhQ,GAAG,GAAGE,GAAN,GAAYgQ,GAApF,GAA0FnQ,GAAG,GAAGI,GAAN,GAAY+P,GAAxG,IAAgHvN,MAA1H;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEJ,GAAG,GAAGE,GAAN,GAAY4P,GAAZ,GAAkB/P,GAAG,GAAGI,GAAN,GAAY2P,GAA9B,GAAoC9P,GAAG,GAAGC,GAAN,GAAY8P,GAAhD,GAAsDjQ,GAAG,GAAGK,GAAN,GAAY4P,GAAlE,GAAwEhQ,GAAG,GAAGE,GAAN,GAAY+P,GAApF,GAA0FlQ,GAAG,GAAGI,GAAN,GAAY8P,GAAxG,IAAgHtN,MAA1H;AAEAtC,UAAE,CAAE,CAAF,CAAF,GAAUmC,GAAG,GAAGG,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEP,GAAG,GAAGgQ,GAAN,GAAYC,GAAZ,GAAkBH,GAAG,GAAGxP,GAAN,GAAY2P,GAA9B,GAAoCH,GAAG,GAAG1P,GAAN,GAAY+P,GAAhD,GAAsDrQ,GAAG,GAAGkQ,GAAN,GAAYG,GAAlE,GAAwEnQ,GAAG,GAAGI,GAAN,GAAYgQ,GAApF,GAA0FtQ,GAAG,GAAGQ,GAAN,GAAY8P,GAAxG,IAAgHvN,MAA1H;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEuP,GAAG,GAAGzP,GAAN,GAAY4P,GAAZ,GAAkBlQ,GAAG,GAAGiQ,GAAN,GAAYC,GAA9B,GAAoCH,GAAG,GAAG1P,GAAN,GAAY8P,GAAhD,GAAsDpQ,GAAG,GAAGkQ,GAAN,GAAYE,GAAlE,GAAwEnQ,GAAG,GAAGK,GAAN,GAAYgQ,GAApF,GAA0FtQ,GAAG,GAAGO,GAAN,GAAY+P,GAAxG,IAAgHvN,MAA1H;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAER,GAAG,GAAGO,GAAN,GAAY2P,GAAZ,GAAkBjQ,GAAG,GAAGK,GAAN,GAAY4P,GAA9B,GAAoCjQ,GAAG,GAAGI,GAAN,GAAY8P,GAAhD,GAAsDpQ,GAAG,GAAGQ,GAAN,GAAY4P,GAAlE,GAAwEnQ,GAAG,GAAGK,GAAN,GAAY+P,GAApF,GAA0FrQ,GAAG,GAAGO,GAAN,GAAY8P,GAAxG,IAAgHtN,MAA1H;AAEAtC,UAAE,CAAE,CAAF,CAAF,GAAUoC,GAAG,GAAGE,MAAhB;AACAtC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEuP,GAAG,GAAG3P,GAAN,GAAY8P,GAAZ,GAAkBjQ,GAAG,GAAG+P,GAAN,GAAYE,GAA9B,GAAoCH,GAAG,GAAG7P,GAAN,GAAYkQ,GAAhD,GAAsDrQ,GAAG,GAAGiQ,GAAN,GAAYI,GAAlE,GAAwEnQ,GAAG,GAAGC,GAAN,GAAYmQ,GAApF,GAA0FtQ,GAAG,GAAGK,GAAN,GAAYiQ,GAAxG,IAAgHvN,MAA1H;AACAtC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAER,GAAG,GAAGgQ,GAAN,GAAYE,GAAZ,GAAkBH,GAAG,GAAG5P,GAAN,GAAY+P,GAA9B,GAAoCH,GAAG,GAAG7P,GAAN,GAAYiQ,GAAhD,GAAsDpQ,GAAG,GAAGiQ,GAAN,GAAYG,GAAlE,GAAwEnQ,GAAG,GAAGE,GAAN,GAAYmQ,GAApF,GAA0FtQ,GAAG,GAAGI,GAAN,GAAYkQ,GAAxG,IAAgHvN,MAA3H;AACAtC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAEP,GAAG,GAAGE,GAAN,GAAY+P,GAAZ,GAAkBlQ,GAAG,GAAGI,GAAN,GAAY8P,GAA9B,GAAoCjQ,GAAG,GAAGC,GAAN,GAAYiQ,GAAhD,GAAsDpQ,GAAG,GAAGK,GAAN,GAAY+P,GAAlE,GAAwEnQ,GAAG,GAAGE,GAAN,GAAYkQ,GAApF,GAA0FrQ,GAAG,GAAGI,GAAN,GAAYiQ,GAAxG,IAAgHtN,MAA3H;AAEAtC,UAAE,CAAE,EAAF,CAAF,GAAWiS,GAAG,GAAG3P,MAAjB;AACAtC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAEP,GAAG,GAAG+P,GAAN,GAAY3P,GAAZ,GAAkB0P,GAAG,GAAG3P,GAAN,GAAYC,GAA9B,GAAoC0P,GAAG,GAAG7P,GAAN,GAAYK,GAAhD,GAAsDR,GAAG,GAAGiQ,GAAN,GAAYzP,GAAlE,GAAwEN,GAAG,GAAGC,GAAN,GAAY+P,GAApF,GAA0FlQ,GAAG,GAAGK,GAAN,GAAY6P,GAAxG,IAAgHnN,MAA3H;AACAtC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAEuP,GAAG,GAAG5P,GAAN,GAAYE,GAAZ,GAAkBL,GAAG,GAAGgQ,GAAN,GAAY3P,GAA9B,GAAoC0P,GAAG,GAAG7P,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAGiQ,GAAN,GAAY1P,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAY+P,GAApF,GAA0FlQ,GAAG,GAAGI,GAAN,GAAY8P,GAAxG,IAAgHnN,MAA3H;AACAtC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAER,GAAG,GAAGI,GAAN,GAAYC,GAAZ,GAAkBJ,GAAG,GAAGE,GAAN,GAAYE,GAA9B,GAAoCJ,GAAG,GAAGC,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAGK,GAAN,GAAYE,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAYK,GAApF,GAA0FR,GAAG,GAAGI,GAAN,GAAYI,GAAxG,IAAgHuC,MAA3H;AAEA,eAAO,IAAP;AAEA,OAlgBgC;AAogBjC/0C,WAAK,EAAE,eAAW4C,CAAX,EAAe;AAErB,YAAM6vC,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMriD,CAAC,GAAG+U,CAAC,CAAC/U,CAAZ;AAAA,YAAe+W,CAAC,GAAGhC,CAAC,CAACgC,CAArB;AAAA,YAAwBuL,CAAC,GAAGvN,CAAC,CAACuN,CAA9B;AAEAsiC,UAAE,CAAE,CAAF,CAAF,IAAW5kD,CAAX;AAAc4kD,UAAE,CAAE,CAAF,CAAF,IAAW7tC,CAAX;AAAc6tC,UAAE,CAAE,CAAF,CAAF,IAAWtiC,CAAX;AAC5BsiC,UAAE,CAAE,CAAF,CAAF,IAAW5kD,CAAX;AAAc4kD,UAAE,CAAE,CAAF,CAAF,IAAW7tC,CAAX;AAAc6tC,UAAE,CAAE,CAAF,CAAF,IAAWtiC,CAAX;AAC5BsiC,UAAE,CAAE,CAAF,CAAF,IAAW5kD,CAAX;AAAc4kD,UAAE,CAAE,CAAF,CAAF,IAAW7tC,CAAX;AAAc6tC,UAAE,CAAE,EAAF,CAAF,IAAYtiC,CAAZ;AAC5BsiC,UAAE,CAAE,CAAF,CAAF,IAAW5kD,CAAX;AAAc4kD,UAAE,CAAE,CAAF,CAAF,IAAW7tC,CAAX;AAAc6tC,UAAE,CAAE,EAAF,CAAF,IAAYtiC,CAAZ;AAE5B,eAAO,IAAP;AAEA,OAhhBgC;AAkhBjCw0C,uBAAiB,EAAE,6BAAY;AAE9B,YAAMlS,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAM0U,QAAQ,GAAGnS,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAArE;AACA,YAAMoS,QAAQ,GAAGpS,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAArE;AACA,YAAMqS,QAAQ,GAAGrS,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,EAAF,CAAF,GAAWA,EAAE,CAAE,EAAF,CAAtE;AAEA,eAAOh3C,IAAI,CAACmK,IAAL,CAAWnK,IAAI,CAACmE,GAAL,CAAUglD,QAAV,EAAoBC,QAApB,EAA8BC,QAA9B,CAAX,CAAP;AAEA,OA5hBgC;AA8hBjCC,qBAAe,EAAE,yBAAWl3D,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAErC,aAAK5P,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU1S,CAFV,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAGU+W,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIUuL,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OA3iBgC;AA6iBjC60C,mBAAa,EAAE,uBAAW/mD,KAAX,EAAmB;AAEjC,YAAM6V,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAV;AAAA,YAA6BuV,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAjC;AAEA,aAAKsC,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGIuT,CAHJ,EAGO,CAAEN,CAHT,EAGY,CAHZ,EAIC,CAJD,EAIIA,CAJJ,EAIOM,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OA5jBgC;AA8jBjCmxC,mBAAa,EAAE,uBAAWhnD,KAAX,EAAmB;AAEjC,YAAM6V,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAV;AAAA,YAA6BuV,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAjC;AAEA,aAAKsC,GAAL,CAEEuT,CAFF,EAEK,CAFL,EAEQN,CAFR,EAEW,CAFX,EAGE,CAHF,EAGK,CAHL,EAGQ,CAHR,EAGW,CAHX,EAIC,CAAEA,CAJH,EAIM,CAJN,EAISM,CAJT,EAIY,CAJZ,EAKE,CALF,EAKK,CALL,EAKQ,CALR,EAKW,CALX;AASA,eAAO,IAAP;AAEA,OA7kBgC;AA+kBjCoxC,mBAAa,EAAE,uBAAWjnD,KAAX,EAAmB;AAEjC,YAAM6V,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAV;AAAA,YAA6BuV,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAjC;AAEA,aAAKsC,GAAL,CAECuT,CAFD,EAEI,CAAEN,CAFN,EAES,CAFT,EAEY,CAFZ,EAGCA,CAHD,EAGIM,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OA9lBgC;AAgmBjCqxC,sBAAgB,EAAE,0BAAW9H,IAAX,EAAiB56C,KAAjB,EAAyB;AAE1C;AAEA,YAAMqR,CAAC,GAAGrY,IAAI,CAACujC,GAAL,CAAUv8B,KAAV,CAAV;AACA,YAAM+Q,CAAC,GAAG/X,IAAI,CAACwjC,GAAL,CAAUx8B,KAAV,CAAV;AACA,YAAMwG,CAAC,GAAG,IAAI6K,CAAd;AACA,YAAMjmB,CAAC,GAAGwvD,IAAI,CAACxvD,CAAf;AAAA,YAAkB+W,CAAC,GAAGy4C,IAAI,CAACz4C,CAA3B;AAAA,YAA8BuL,CAAC,GAAGktC,IAAI,CAACltC,CAAvC;AACA,YAAMmlC,EAAE,GAAGrsC,CAAC,GAAGpb,CAAf;AAAA,YAAkB0nD,EAAE,GAAGtsC,CAAC,GAAGrE,CAA3B;AAEA,aAAKrE,GAAL,CAEC+0C,EAAE,GAAGznD,CAAL,GAASimB,CAFV,EAEawhC,EAAE,GAAG1wC,CAAL,GAAS4O,CAAC,GAAGrD,CAF1B,EAE6BmlC,EAAE,GAAGnlC,CAAL,GAASqD,CAAC,GAAG5O,CAF1C,EAE6C,CAF7C,EAGC0wC,EAAE,GAAG1wC,CAAL,GAAS4O,CAAC,GAAGrD,CAHd,EAGiBolC,EAAE,GAAG3wC,CAAL,GAASkP,CAH1B,EAG6ByhC,EAAE,GAAGplC,CAAL,GAASqD,CAAC,GAAG3lB,CAH1C,EAG6C,CAH7C,EAICynD,EAAE,GAAGnlC,CAAL,GAASqD,CAAC,GAAG5O,CAJd,EAIiB2wC,EAAE,GAAGplC,CAAL,GAASqD,CAAC,GAAG3lB,CAJ9B,EAIiCob,CAAC,GAAGkH,CAAJ,GAAQA,CAAR,GAAY2D,CAJ7C,EAIgD,CAJhD,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASC,eAAO,IAAP;AAED,OArnBgC;AAunBjCsxC,eAAS,EAAE,mBAAWv3D,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE/B,aAAK5P,GAAL,CAEC1S,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGI+W,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIOuL,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OApoBgC;AAsoBjCk1C,eAAS,EAAE,mBAAWx3D,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE/B,aAAK5P,GAAL,CAEC,CAFD,EAEIqE,CAFJ,EAEOuL,CAFP,EAEU,CAFV,EAGCtiB,CAHD,EAGI,CAHJ,EAGOsiB,CAHP,EAGU,CAHV,EAICtiB,CAJD,EAII+W,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,eAAO,IAAP;AAEA,OAnpBgC;AAqpBjC6+C,aAAO,EAAE,iBAAW/lD,QAAX,EAAqBkD,UAArB,EAAiCZ,KAAjC,EAAyC;AAEjD,YAAMyyC,EAAE,GAAG,KAAKvC,QAAhB;AAEA,YAAMriD,CAAC,GAAG+S,UAAU,CAACo6C,EAArB;AAAA,YAAyBp2C,CAAC,GAAGhE,UAAU,CAACq6C,EAAxC;AAAA,YAA4C9qC,CAAC,GAAGvP,UAAU,CAACs6C,EAA3D;AAAA,YAA+DnjC,CAAC,GAAGnX,UAAU,CAACu6C,EAA9E;AACA,YAAMmK,EAAE,GAAGz3D,CAAC,GAAGA,CAAf;AAAA,YAAkB03D,EAAE,GAAG3gD,CAAC,GAAGA,CAA3B;AAAA,YAA8B4gD,EAAE,GAAGr1C,CAAC,GAAGA,CAAvC;AACA,YAAMwpC,EAAE,GAAG9rD,CAAC,GAAGy3D,EAAf;AAAA,YAAmBxL,EAAE,GAAGjsD,CAAC,GAAG03D,EAA5B;AAAA,YAAgCxL,EAAE,GAAGlsD,CAAC,GAAG23D,EAAzC;AACA,YAAM5L,EAAE,GAAGh1C,CAAC,GAAG2gD,EAAf;AAAA,YAAmBvL,EAAE,GAAGp1C,CAAC,GAAG4gD,EAA5B;AAAA,YAAgC3L,EAAE,GAAG1pC,CAAC,GAAGq1C,EAAzC;AACA,YAAMC,EAAE,GAAG1tC,CAAC,GAAGutC,EAAf;AAAA,YAAmBI,EAAE,GAAG3tC,CAAC,GAAGwtC,EAA5B;AAAA,YAAgCI,EAAE,GAAG5tC,CAAC,GAAGytC,EAAzC;AAEA,YAAMhQ,EAAE,GAAGx1C,KAAK,CAACnS,CAAjB;AAAA,YAAoB4nD,EAAE,GAAGz1C,KAAK,CAAC4E,CAA/B;AAAA,YAAkC68C,EAAE,GAAGzhD,KAAK,CAACmQ,CAA7C;AAEAsiC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAE,KAAMmH,EAAE,GAAGC,EAAX,CAAF,IAAsBrE,EAAhC;AACA/C,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEqH,EAAE,GAAG6L,EAAP,IAAcnQ,EAAxB;AACA/C,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEsH,EAAE,GAAG2L,EAAP,IAAclQ,EAAxB;AACA/C,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEqH,EAAE,GAAG6L,EAAP,IAAclQ,EAAxB;AACAhD,UAAE,CAAE,CAAF,CAAF,GAAU,CAAE,KAAMkH,EAAE,GAAGE,EAAX,CAAF,IAAsBpE,EAAhC;AACAhD,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEuH,EAAE,GAAGyL,EAAP,IAAchQ,EAAxB;AACAhD,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEsH,EAAE,GAAG2L,EAAP,IAAcjE,EAAxB;AACAhP,UAAE,CAAE,CAAF,CAAF,GAAU,CAAEuH,EAAE,GAAGyL,EAAP,IAAchE,EAAxB;AACAhP,UAAE,CAAE,EAAF,CAAF,GAAW,CAAE,KAAMkH,EAAE,GAAGC,EAAX,CAAF,IAAsB6H,EAAjC;AACAhP,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEAA,UAAE,CAAE,EAAF,CAAF,GAAW/0C,QAAQ,CAAC7P,CAApB;AACA4kD,UAAE,CAAE,EAAF,CAAF,GAAW/0C,QAAQ,CAACkH,CAApB;AACA6tC,UAAE,CAAE,EAAF,CAAF,GAAW/0C,QAAQ,CAACyS,CAApB;AACAsiC,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,eAAO,IAAP;AAEA,OAvrBgC;AAyrBjCmT,eAAS,EAAE,mBAAWloD,QAAX,EAAqBkD,UAArB,EAAiCZ,KAAjC,EAAyC;AAEnD,YAAMyyC,EAAE,GAAG,KAAKvC,QAAhB;;AAEA,YAAIsF,EAAE,GAAGkM,GAAG,CAACnhD,GAAJ,CAASkyC,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,CAAF,CAA7B,EAAqClwD,MAArC,EAAT;;AACA,YAAIkzD,EAAE,GAAGiM,GAAG,CAACnhD,GAAJ,CAASkyC,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,CAAF,CAA7B,EAAqClwD,MAArC,EAAT;;AACA,YAAIk/D,EAAE,GAAGC,GAAG,CAACnhD,GAAJ,CAASkyC,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,EAAF,CAA7B,EAAsClwD,MAAtC,EAAT,CANmD,CAQnD;;;AACA,YAAMuyD,GAAG,GAAG,KAAKN,WAAL,EAAZ;AACA,YAAKM,GAAG,GAAG,CAAX,EAAeU,EAAE,GAAG,CAAEA,EAAP;AAEf93C,gBAAQ,CAAC7P,CAAT,GAAa4kD,EAAE,CAAE,EAAF,CAAf;AACA/0C,gBAAQ,CAACkH,CAAT,GAAa6tC,EAAE,CAAE,EAAF,CAAf;AACA/0C,gBAAQ,CAACyS,CAAT,GAAasiC,EAAE,CAAE,EAAF,CAAf,CAdmD,CAgBnD;;AACAkP,WAAG,CAACvjD,IAAJ,CAAU,IAAV;;AAEA,YAAMynD,KAAK,GAAG,IAAIrQ,EAAlB;AACA,YAAMsQ,KAAK,GAAG,IAAIrQ,EAAlB;AACA,YAAMsQ,KAAK,GAAG,IAAItE,EAAlB;AAEAE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB2V,KAArB;AACAlE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB2V,KAArB;AACAlE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB2V,KAArB;AAEAlE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB4V,KAArB;AACAnE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB4V,KAArB;AACAnE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB4V,KAArB;AAEAnE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB6V,KAArB;AACApE,WAAG,CAACzR,QAAJ,CAAc,CAAd,KAAqB6V,KAArB;AACApE,WAAG,CAACzR,QAAJ,CAAc,EAAd,KAAsB6V,KAAtB;AAEAnlD,kBAAU,CAAC28C,qBAAX,CAAkCoE,GAAlC;AAEA3hD,aAAK,CAACnS,CAAN,GAAU2nD,EAAV;AACAx1C,aAAK,CAAC4E,CAAN,GAAU6wC,EAAV;AACAz1C,aAAK,CAACmQ,CAAN,GAAUsxC,EAAV;AAEA,eAAO,IAAP;AAEA,OApuBgC;AAsuBjCuE,qBAAe,EAAE,yBAAWliD,IAAX,EAAiBD,KAAjB,EAAwBG,GAAxB,EAA6BC,MAA7B,EAAqCgiD,IAArC,EAA2CC,GAA3C,EAAiD;AAEjE,YAAKA,GAAG,KAAK50D,SAAb,EAAyB;AAExBjN,iBAAO,CAAC2W,IAAR,CAAc,sGAAd;AAEA;;AAED,YAAMy3C,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMriD,CAAC,GAAG,IAAIo4D,IAAJ,IAAapiD,KAAK,GAAGC,IAArB,CAAV;AACA,YAAMc,CAAC,GAAG,IAAIqhD,IAAJ,IAAajiD,GAAG,GAAGC,MAAnB,CAAV;AAEA,YAAMxhB,CAAC,GAAG,CAAEohB,KAAK,GAAGC,IAAV,KAAqBD,KAAK,GAAGC,IAA7B,CAAV;AACA,YAAMphB,CAAC,GAAG,CAAEshB,GAAG,GAAGC,MAAR,KAAqBD,GAAG,GAAGC,MAA3B,CAAV;AACA,YAAM6P,CAAC,GAAG,EAAIoyC,GAAG,GAAGD,IAAV,KAAqBC,GAAG,GAAGD,IAA3B,CAAV;AACA,YAAMlyC,CAAC,GAAG,CAAE,CAAF,GAAMmyC,GAAN,GAAYD,IAAZ,IAAqBC,GAAG,GAAGD,IAA3B,CAAV;AAEAxT,UAAE,CAAE,CAAF,CAAF,GAAU5kD,CAAV;AAAa4kD,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAUhwD,CAAV;AAAagwD,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACvCA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU7tC,CAAV;AAAa6tC,UAAE,CAAE,CAAF,CAAF,GAAU/vD,CAAV;AAAa+vD,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACvCA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW3+B,CAAX;AAAc2+B,UAAE,CAAE,EAAF,CAAF,GAAW1+B,CAAX;AACxC0+B,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAE,CAAb;AAAgBA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAE1C,eAAO,IAAP;AAEA,OA9vBgC;AAgwBjC0T,sBAAgB,EAAE,0BAAWriD,IAAX,EAAiBD,KAAjB,EAAwBG,GAAxB,EAA6BC,MAA7B,EAAqCgiD,IAArC,EAA2CC,GAA3C,EAAiD;AAElE,YAAMzT,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMn4B,CAAC,GAAG,OAAQlU,KAAK,GAAGC,IAAhB,CAAV;AACA,YAAM+E,CAAC,GAAG,OAAQ7E,GAAG,GAAGC,MAAd,CAAV;AACA,YAAM+P,CAAC,GAAG,OAAQkyC,GAAG,GAAGD,IAAd,CAAV;AAEA,YAAMp4D,CAAC,GAAG,CAAEgW,KAAK,GAAGC,IAAV,IAAmBiU,CAA7B;AACA,YAAMnT,CAAC,GAAG,CAAEZ,GAAG,GAAGC,MAAR,IAAmB4E,CAA7B;AACA,YAAMsH,CAAC,GAAG,CAAE+1C,GAAG,GAAGD,IAAR,IAAiBjyC,CAA3B;AAEAy+B,UAAE,CAAE,CAAF,CAAF,GAAU,IAAI16B,CAAd;AAAiB06B,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAE5kD,CAAb;AAC3C4kD,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,IAAI5pC,CAAd;AAAiB4pC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAE7tC,CAAb;AAC3C6tC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAE,CAAF,GAAMz+B,CAAjB;AAAoBy+B,UAAE,CAAE,EAAF,CAAF,GAAW,CAAEtiC,CAAb;AAC9CsiC,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAAcA,UAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAExC,eAAO,IAAP;AAEA,OAlxBgC;AAoxBjCnB,YAAM,EAAE,gBAAW3tC,MAAX,EAAoB;AAE3B,YAAM8uC,EAAE,GAAG,KAAKvC,QAAhB;AACA,YAAMyC,EAAE,GAAGhvC,MAAM,CAACusC,QAAlB;;AAEA,aAAM,IAAIhtD,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG,EAArB,EAAyBA,GAAC,EAA1B,EAAgC;AAE/B,cAAKuvD,EAAE,CAAEvvD,GAAF,CAAF,KAAYyvD,EAAE,CAAEzvD,GAAF,CAAnB,EAA2B,OAAO,KAAP;AAE3B;;AAED,eAAO,IAAP;AAEA,OAjyBgC;AAmyBjCquD,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;;AAE5B,aAAM,IAAI1b,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG,EAArB,EAAyBA,GAAC,EAA1B,EAAgC;AAE/B,eAAKgtD,QAAL,CAAehtD,GAAf,IAAqB48B,KAAK,CAAE58B,GAAC,GAAG0b,MAAN,CAA1B;AAEA;;AAED,eAAO,IAAP;AAEA,OA/yBgC;AAizBjC4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,YAAM6zC,EAAE,GAAG,KAAKvC,QAAhB;AAEApwB,aAAK,CAAElhB,MAAF,CAAL,GAAkB6zC,EAAE,CAAE,CAAF,CAApB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AAEA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AAEA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB6zC,EAAE,CAAE,CAAF,CAAxB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AAEA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AACA3yB,aAAK,CAAElhB,MAAM,GAAG,EAAX,CAAL,GAAuB6zC,EAAE,CAAE,EAAF,CAAzB;AAEA,eAAO3yB,KAAP;AAEA;AA90BgC,KAAlC;;AAk1BA,QAAMsmC,OAAO,GAAG,IAAIxE,OAAJ,EAAhB;;AACA,QAAMyE,aAAa,GAAG,IAAItL,UAAJ,EAAtB;;AAEA,aAASuL,KAAT,GAAkE;AAAA,UAAlDz4D,CAAkD,uEAA9C,CAA8C;AAAA,UAA3C+W,CAA2C,uEAAvC,CAAuC;AAAA,UAApCuL,CAAoC,uEAAhC,CAAgC;AAAA,UAA7Bs+B,KAA6B,uEAArB6X,KAAK,CAACC,YAAe;AAEjE,WAAKvL,EAAL,GAAUntD,CAAV;AACA,WAAKotD,EAAL,GAAUr2C,CAAV;AACA,WAAKs2C,EAAL,GAAU/qC,CAAV;AACA,WAAKq2C,MAAL,GAAc/X,KAAd;AAEA;;AAED6X,SAAK,CAACG,cAAN,GAAuB,CAAE,KAAF,EAAS,KAAT,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,KAArC,CAAvB;AAEAH,SAAK,CAACC,YAAN,GAAqB,KAArB;AAEA9hE,UAAM,CAAC0qD,gBAAP,CAAyBmX,KAAK,CAAClsD,SAA/B,EAA0C;AAEzCvM,OAAC,EAAE;AAEFkG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKinD,EAAZ;AAEA,SANC;AAQFz6C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKguD,EAAL,GAAUhuD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OAFsC;AAmBzC/3C,OAAC,EAAE;AAEF7Q,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKknD,EAAZ;AAEA,SANC;AAQF16C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKiuD,EAAL,GAAUjuD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OAnBsC;AAoCzCxsC,OAAC,EAAE;AAEFpc,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKmnD,EAAZ;AAEA,SANC;AAQF36C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKkuD,EAAL,GAAUluD,KAAV;;AACA,eAAK2vD,iBAAL;AAEA;AAbC,OApCsC;AAqDzClO,WAAK,EAAE;AAEN16C,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKyyD,MAAZ;AAEA,SANK;AAQNjmD,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKw5D,MAAL,GAAcx5D,KAAd;;AACA,eAAK2vD,iBAAL;AAEA;AAbK;AArDkC,KAA1C;AAwEAl4D,UAAM,CAACiiC,MAAP,CAAe4/B,KAAK,CAAClsD,SAArB,EAAgC;AAE/B2iD,aAAO,EAAE,IAFsB;AAI/Bx8C,SAAG,EAAE,aAAW1S,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAoBs+B,KAApB,EAA4B;AAEhC,aAAKuM,EAAL,GAAUntD,CAAV;AACA,aAAKotD,EAAL,GAAUr2C,CAAV;AACA,aAAKs2C,EAAL,GAAU/qC,CAAV;AACA,aAAKq2C,MAAL,GAAc/X,KAAK,IAAI,KAAK+X,MAA5B;;AAEA,aAAK7J,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAf8B;AAiB/Bn/C,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKk0C,EAA3B,EAA+B,KAAKC,EAApC,EAAwC,KAAKC,EAA7C,EAAiD,KAAKsL,MAAtD,CAAP;AAEA,OArB8B;AAuB/BpoD,UAAI,EAAE,cAAW0+C,KAAX,EAAmB;AAExB,aAAK9B,EAAL,GAAU8B,KAAK,CAAC9B,EAAhB;AACA,aAAKC,EAAL,GAAU6B,KAAK,CAAC7B,EAAhB;AACA,aAAKC,EAAL,GAAU4B,KAAK,CAAC5B,EAAhB;AACA,aAAKsL,MAAL,GAAc1J,KAAK,CAAC0J,MAApB;;AAEA,aAAK7J,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAlC8B;AAoC/BY,2BAAqB,EAAE,+BAAW3lC,CAAX,EAAc62B,KAAd,EAAqBjwC,MAArB,EAA8B;AAEpD,YAAMsuC,KAAK,GAAGT,SAAS,CAACS,KAAxB,CAFoD,CAIpD;;AAEA,YAAM2F,EAAE,GAAG76B,CAAC,CAACs4B,QAAb;AACA,YAAMgJ,GAAG,GAAGzG,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqB0G,GAAG,GAAG1G,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC2G,GAAG,GAAG3G,EAAE,CAAE,CAAF,CAA5C;AACA,YAAM4G,GAAG,GAAG5G,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqB6G,GAAG,GAAG7G,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC8G,GAAG,GAAG9G,EAAE,CAAE,CAAF,CAA5C;AACA,YAAM+G,GAAG,GAAG/G,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBgH,GAAG,GAAGhH,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCiH,GAAG,GAAGjH,EAAE,CAAE,EAAF,CAA5C;AAEAhE,aAAK,GAAGA,KAAK,IAAI,KAAK+X,MAAtB;;AAEA,gBAAS/X,KAAT;AAEC,eAAK,KAAL;AAEC,iBAAKwM,EAAL,GAAUx/C,IAAI,CAACirD,IAAL,CAAW5Z,KAAK,CAAEsM,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,gBAAK39C,IAAI,CAAC4nB,GAAL,CAAU+1B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAK4B,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY,CAAEyI,GAAd,EAAmBG,GAAnB,CAAV;AACA,mBAAKwB,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAY,CAAEqI,GAAd,EAAmBD,GAAnB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK8B,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY2I,GAAZ,EAAiBH,GAAjB,CAAV;AACA,mBAAK4B,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED,eAAK,KAAL;AAEC,iBAAKF,EAAL,GAAUv/C,IAAI,CAACirD,IAAL,CAAW,CAAE5Z,KAAK,CAAEyM,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,gBAAK99C,IAAI,CAAC4nB,GAAL,CAAUk2B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAK0B,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAYsI,GAAZ,EAAiBM,GAAjB,CAAV;AACA,mBAAKwB,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAYuI,GAAZ,EAAiBC,GAAjB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK2B,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAY,CAAE0I,GAAd,EAAmBN,GAAnB,CAAV;AACA,mBAAKgC,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED,eAAK,KAAL;AAEC,iBAAKF,EAAL,GAAUv/C,IAAI,CAACirD,IAAL,CAAW5Z,KAAK,CAAE2M,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,gBAAKh+C,IAAI,CAAC4nB,GAAL,CAAUo2B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAKwB,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAY,CAAE0I,GAAd,EAAmBE,GAAnB,CAAV;AACA,mBAAKwB,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAY,CAAEqI,GAAd,EAAmBG,GAAnB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK2B,EAAL,GAAU,CAAV;AACA,mBAAKC,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAYuI,GAAZ,EAAiBH,GAAjB,CAAV;AAEA;;AAED;;AAED,eAAK,KAAL;AAEC,iBAAK+B,EAAL,GAAUx/C,IAAI,CAACirD,IAAL,CAAW,CAAE5Z,KAAK,CAAE0M,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,gBAAK/9C,IAAI,CAAC4nB,GAAL,CAAUm2B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAKwB,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY2I,GAAZ,EAAiBC,GAAjB,CAAV;AACA,mBAAKwB,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAYuI,GAAZ,EAAiBH,GAAjB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK8B,EAAL,GAAU,CAAV;AACA,mBAAKE,EAAL,GAAUz/C,IAAI,CAACq1C,KAAL,CAAY,CAAEqI,GAAd,EAAmBG,GAAnB,CAAV;AAEA;;AAED;;AAED,eAAK,KAAL;AAEC,iBAAK4B,EAAL,GAAUz/C,IAAI,CAACirD,IAAL,CAAW5Z,KAAK,CAAEuM,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,gBAAK59C,IAAI,CAAC4nB,GAAL,CAAUg2B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAK2B,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY,CAAEyI,GAAd,EAAmBD,GAAnB,CAAV;AACA,mBAAK2B,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAY,CAAE0I,GAAd,EAAmBN,GAAnB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK8B,EAAL,GAAU,CAAV;AACA,mBAAKC,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAYsI,GAAZ,EAAiBM,GAAjB,CAAV;AAEA;;AAED;;AAED,eAAK,KAAL;AAEC,iBAAKwB,EAAL,GAAUz/C,IAAI,CAACirD,IAAL,CAAW,CAAE5Z,KAAK,CAAEqM,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,gBAAK19C,IAAI,CAAC4nB,GAAL,CAAU81B,GAAV,IAAkB,SAAvB,EAAmC;AAElC,mBAAK6B,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY2I,GAAZ,EAAiBH,GAAjB,CAAV;AACA,mBAAK2B,EAAL,GAAUx/C,IAAI,CAACq1C,KAAL,CAAYsI,GAAZ,EAAiBF,GAAjB,CAAV;AAEA,aALD,MAKO;AAEN,mBAAK8B,EAAL,GAAUv/C,IAAI,CAACq1C,KAAL,CAAY,CAAEyI,GAAd,EAAmBG,GAAnB,CAAV;AACA,mBAAKuB,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED;AAEC52D,mBAAO,CAAC2W,IAAR,CAAc,yEAAyEyzC,KAAvF;AAhHF;;AAoHA,aAAK+X,MAAL,GAAc/X,KAAd;AAEA,YAAKjwC,MAAM,KAAK,KAAhB,EAAwB,KAAKm+C,iBAAL;AAExB,eAAO,IAAP;AAEA,OA3K8B;AA6K/BgK,uBAAiB,EAAE,2BAAW9yB,CAAX,EAAc4a,KAAd,EAAqBjwC,MAArB,EAA8B;AAEhD4nD,eAAO,CAAC5C,0BAAR,CAAoC3vB,CAApC;;AAEA,eAAO,KAAK0pB,qBAAL,CAA4B6I,OAA5B,EAAqC3X,KAArC,EAA4CjwC,MAA5C,CAAP;AAEA,OAnL8B;AAqL/Be,oBAAc,EAAE,wBAAWqD,CAAX,EAAc6rC,KAAd,EAAsB;AAErC,eAAO,KAAKluC,GAAL,CAAUqC,CAAC,CAAC/U,CAAZ,EAAe+U,CAAC,CAACgC,CAAjB,EAAoBhC,CAAC,CAACuN,CAAtB,EAAyBs+B,KAAK,IAAI,KAAK+X,MAAvC,CAAP;AAEA,OAzL8B;AA2L/BI,aAAO,EAAE,iBAAWC,QAAX,EAAsB;AAE9B;AAEAR,qBAAa,CAACxJ,YAAd,CAA4B,IAA5B;;AAEA,eAAO,KAAK8J,iBAAL,CAAwBN,aAAxB,EAAuCQ,QAAvC,CAAP;AAEA,OAnM8B;AAqM/BvV,YAAM,EAAE,gBAAWwL,KAAX,EAAmB;AAE1B,eAASA,KAAK,CAAC9B,EAAN,KAAa,KAAKA,EAApB,IAA8B8B,KAAK,CAAC7B,EAAN,KAAa,KAAKA,EAAhD,IAA0D6B,KAAK,CAAC5B,EAAN,KAAa,KAAKA,EAA5E,IAAsF4B,KAAK,CAAC0J,MAAN,KAAiB,KAAKA,MAAnH;AAEA,OAzM8B;AA2M/BjV,eAAS,EAAE,mBAAWzxB,KAAX,EAAmB;AAE7B,aAAKk7B,EAAL,GAAUl7B,KAAK,CAAE,CAAF,CAAf;AACA,aAAKm7B,EAAL,GAAUn7B,KAAK,CAAE,CAAF,CAAf;AACA,aAAKo7B,EAAL,GAAUp7B,KAAK,CAAE,CAAF,CAAf;AACA,YAAKA,KAAK,CAAE,CAAF,CAAL,KAAexuB,SAApB,EAAgC,KAAKk1D,MAAL,GAAc1mC,KAAK,CAAE,CAAF,CAAnB;;AAEhC,aAAK68B,iBAAL;;AAEA,eAAO,IAAP;AAEA,OAtN8B;AAwN/BnL,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAKo8C,EAAvB;AACAl7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKq8C,EAA3B;AACAn7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKs8C,EAA3B;AACAp7B,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAK4nD,MAA3B;AAEA,eAAO1mC,KAAP;AAEA,OApO8B;AAsO/BgnC,eAAS,EAAE,mBAAWC,cAAX,EAA4B;AAEtC,YAAKA,cAAL,EAAsB;AAErB,iBAAOA,cAAc,CAACxmD,GAAf,CAAoB,KAAKy6C,EAAzB,EAA6B,KAAKC,EAAlC,EAAsC,KAAKC,EAA3C,CAAP;AAEA,SAJD,MAIO;AAEN,iBAAO,IAAI8D,OAAJ,CAAa,KAAKhE,EAAlB,EAAsB,KAAKC,EAA3B,EAA+B,KAAKC,EAApC,CAAP;AAEA;AAED,OAlP8B;AAoP/B2D,eAAS,EAAE,mBAAWC,QAAX,EAAsB;AAEhC,aAAKnC,iBAAL,GAAyBmC,QAAzB;AAEA,eAAO,IAAP;AAEA,OA1P8B;AA4P/BnC,uBAAiB,EAAE,6BAAY,CAAE;AA5PF,KAAhC;;AAgQA,aAASqK,MAAT,GAAkB;AAEjB,WAAKC,IAAL,GAAY,IAAI,CAAhB;AAEA;;AAEDxiE,UAAM,CAACiiC,MAAP,CAAesgC,MAAM,CAAC5sD,SAAtB,EAAiC;AAEhCmG,SAAG,EAAE,aAAW2mD,OAAX,EAAqB;AAEzB,aAAKD,IAAL,GAAY,KAAKC,OAAL,GAAe,CAA3B;AAEA,OAN+B;AAQhCC,YAAM,EAAE,gBAAWD,OAAX,EAAqB;AAE5B,aAAKD,IAAL,IAAa,KAAKC,OAAL,GAAe,CAA5B;AAEA,OAZ+B;AAchCE,eAAS,EAAE,qBAAY;AAEtB,aAAKH,IAAL,GAAY,aAAa,CAAzB;AAEA,OAlB+B;AAoBhCI,YAAM,EAAE,gBAAWH,OAAX,EAAqB;AAE5B,aAAKD,IAAL,IAAa,KAAKC,OAAL,GAAe,CAA5B;AAEA,OAxB+B;AA0BhCI,aAAO,EAAE,iBAAWJ,OAAX,EAAqB;AAE7B,aAAKD,IAAL,IAAa,EAAI,KAAKC,OAAL,GAAe,CAAnB,CAAb;AAEA,OA9B+B;AAgChCK,gBAAU,EAAE,sBAAY;AAEvB,aAAKN,IAAL,GAAY,CAAZ;AAEA,OApC+B;AAsChC9xD,UAAI,EAAE,cAAWqyD,MAAX,EAAoB;AAEzB,eAAO,CAAE,KAAKP,IAAL,GAAYO,MAAM,CAACP,IAArB,MAAgC,CAAvC;AAEA;AA1C+B,KAAjC;AA8CA,QAAIQ,WAAW,GAAG,CAAlB;;AAEA,QAAMC,KAAK,GAAG,IAAI1I,OAAJ,EAAd;;AACA,QAAM2I,GAAG,GAAG,IAAI5M,UAAJ,EAAZ;;AACA,QAAM6M,KAAK,GAAG,IAAIhG,OAAJ,EAAd;;AACA,QAAMiG,OAAO,GAAG,IAAI7I,OAAJ,EAAhB;;AAEA,QAAM8I,SAAS,GAAG,IAAI9I,OAAJ,EAAlB;;AACA,QAAM+I,MAAM,GAAG,IAAI/I,OAAJ,EAAf;;AACA,QAAMgJ,aAAa,GAAG,IAAIjN,UAAJ,EAAtB;;AAEA,QAAMkN,MAAM,GAAG,IAAIjJ,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AACA,QAAMkJ,MAAM,GAAG,IAAIlJ,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AACA,QAAMmJ,MAAM,GAAG,IAAInJ,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AAEA,QAAMoJ,WAAW,GAAG;AAAExgE,UAAI,EAAE;AAAR,KAApB;AACA,QAAMygE,aAAa,GAAG;AAAEzgE,UAAI,EAAE;AAAR,KAAtB;;AAEA,aAAS0gE,QAAT,GAAoB;AAEnB7jE,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAE3yC,aAAK,EAAEy6D,WAAW;AAApB,OAAnC;AAEA,WAAK5a,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAKvqD,IAAL,GAAY,EAAZ;AACA,WAAK2F,IAAL,GAAY,UAAZ;AAEA,WAAK2gE,MAAL,GAAc,IAAd;AACA,WAAKv8C,QAAL,GAAgB,EAAhB;AAEA,WAAKjN,EAAL,GAAUupD,QAAQ,CAACE,SAAT,CAAmBhrD,KAAnB,EAAV;AAEA,UAAME,QAAQ,GAAG,IAAIshD,OAAJ,EAAjB;AACA,UAAM5hB,QAAQ,GAAG,IAAIkpB,KAAJ,EAAjB;AACA,UAAM1lD,UAAU,GAAG,IAAIm6C,UAAJ,EAAnB;AACA,UAAM/6C,KAAK,GAAG,IAAIg/C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AAEA,eAASyJ,gBAAT,GAA4B;AAE3B7nD,kBAAU,CAACi8C,YAAX,CAAyBzf,QAAzB,EAAmC,KAAnC;AAEA;;AAED,eAASsrB,kBAAT,GAA8B;AAE7BtrB,gBAAQ,CAACupB,iBAAT,CAA4B/lD,UAA5B,EAAwCtP,SAAxC,EAAmD,KAAnD;AAEA;;AAED8rC,cAAQ,CAACyhB,SAAT,CAAoB4J,gBAApB;;AACA7nD,gBAAU,CAACi+C,SAAX,CAAsB6J,kBAAtB;;AAEAjkE,YAAM,CAAC0qD,gBAAP,CAAyB,IAAzB,EAA+B;AAC9BzxC,gBAAQ,EAAE;AACTirD,sBAAY,EAAE,IADL;AAETC,oBAAU,EAAE,IAFH;AAGT57D,eAAK,EAAE0Q;AAHE,SADoB;AAM9B0/B,gBAAQ,EAAE;AACTurB,sBAAY,EAAE,IADL;AAETC,oBAAU,EAAE,IAFH;AAGT57D,eAAK,EAAEowC;AAHE,SANoB;AAW9Bx8B,kBAAU,EAAE;AACX+nD,sBAAY,EAAE,IADH;AAEXC,oBAAU,EAAE,IAFD;AAGX57D,eAAK,EAAE4T;AAHI,SAXkB;AAgB9BZ,aAAK,EAAE;AACN2oD,sBAAY,EAAE,IADR;AAENC,oBAAU,EAAE,IAFN;AAGN57D,eAAK,EAAEgT;AAHD,SAhBuB;AAqB9B6oD,uBAAe,EAAE;AAChB77D,eAAK,EAAE,IAAI40D,OAAJ;AADS,SArBa;AAwB9BkH,oBAAY,EAAE;AACb97D,eAAK,EAAE,IAAI8kD,OAAJ;AADM;AAxBgB,OAA/B;AA6BA,WAAKnuC,MAAL,GAAc,IAAIi+C,OAAJ,EAAd;AACA,WAAKxB,WAAL,GAAmB,IAAIwB,OAAJ,EAAnB;AAEA,WAAKrK,gBAAL,GAAwB+Q,QAAQ,CAACS,uBAAjC;AACA,WAAKC,sBAAL,GAA8B,KAA9B;AAEA,WAAKxB,MAAL,GAAc,IAAIR,MAAJ,EAAd;AACA,WAAKiC,OAAL,GAAe,IAAf;AAEA,WAAKC,UAAL,GAAkB,KAAlB;AACA,WAAKC,aAAL,GAAqB,KAArB;AAEA,WAAK32C,aAAL,GAAqB,IAArB;AACA,WAAK42C,WAAL,GAAmB,CAAnB;AAEA,WAAKC,QAAL,GAAgB,EAAhB;AAEA;;AAEDf,YAAQ,CAACE,SAAT,GAAqB,IAAIxJ,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAArB;AACAsJ,YAAQ,CAACS,uBAAT,GAAmC,IAAnC;AAEAT,YAAQ,CAACluD,SAAT,GAAqB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAE/E0M,iBAAW,EAAEwhD,QAFkE;AAI/EgB,gBAAU,EAAE,IAJmE;AAM/EC,oBAAc,EAAE,0BAAY,CAAE,CANiD;AAO/EC,mBAAa,EAAE,yBAAY,CAAE,CAPkD;AAS/E5Q,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC,YAAK,KAAK4zC,gBAAV,EAA6B,KAAKO,YAAL;AAE7B,aAAKn0C,MAAL,CAAYwvC,WAAZ,CAAyBxvC,MAAzB;AAEA,aAAKA,MAAL,CAAYiiD,SAAZ,CAAuB,KAAKloD,QAA5B,EAAsC,KAAKkD,UAA3C,EAAuD,KAAKZ,KAA5D;AAEA,OAjB8E;AAmB/EV,qBAAe,EAAE,yBAAWu0B,CAAX,EAAe;AAE/B,aAAKjzB,UAAL,CAAgBuyC,WAAhB,CAA6Btf,CAA7B;AAEA,eAAO,IAAP;AAEA,OAzB8E;AA2B/E41B,8BAAwB,EAAE,kCAAWpM,IAAX,EAAiB56C,KAAjB,EAAyB;AAElD;AAEA,aAAK7B,UAAL,CAAgBw8C,gBAAhB,CAAkCC,IAAlC,EAAwC56C,KAAxC;AAEA,OAjC8E;AAmC/EinD,0BAAoB,EAAE,8BAAW5M,KAAX,EAAmB;AAExC,aAAKl8C,UAAL,CAAgBi8C,YAAhB,CAA8BC,KAA9B,EAAqC,IAArC;AAEA,OAvC8E;AAyC/E6M,2BAAqB,EAAE,+BAAW/xC,CAAX,EAAe;AAErC;AAEA,aAAKhX,UAAL,CAAgB28C,qBAAhB,CAAuC3lC,CAAvC;AAEA,OA/C8E;AAiD/EgyC,+BAAyB,EAAE,mCAAW/1B,CAAX,EAAe;AAEzC;AAEA,aAAKjzB,UAAL,CAAgBxC,IAAhB,CAAsBy1B,CAAtB;AAEA,OAvD8E;AAyD/Eg2B,kBAAY,EAAE,sBAAWxM,IAAX,EAAiB56C,KAAjB,EAAyB;AAEtC;AACA;AAEAklD,WAAG,CAACvK,gBAAJ,CAAsBC,IAAtB,EAA4B56C,KAA5B;;AAEA,aAAK7B,UAAL,CAAgBkvC,QAAhB,CAA0B6X,GAA1B;AAEA,eAAO,IAAP;AAEA,OApE8E;AAsE/EmC,uBAAiB,EAAE,2BAAWzM,IAAX,EAAiB56C,KAAjB,EAAyB;AAE3C;AACA;AACA;AAEAklD,WAAG,CAACvK,gBAAJ,CAAsBC,IAAtB,EAA4B56C,KAA5B;;AAEA,aAAK7B,UAAL,CAAgBuyC,WAAhB,CAA6BwU,GAA7B;AAEA,eAAO,IAAP;AAEA,OAlF8E;AAoF/EoC,aAAO,EAAE,iBAAWtnD,KAAX,EAAmB;AAE3B,eAAO,KAAKonD,YAAL,CAAmB5B,MAAnB,EAA2BxlD,KAA3B,CAAP;AAEA,OAxF8E;AA0F/EunD,aAAO,EAAE,iBAAWvnD,KAAX,EAAmB;AAE3B,eAAO,KAAKonD,YAAL,CAAmB3B,MAAnB,EAA2BzlD,KAA3B,CAAP;AAEA,OA9F8E;AAgG/EwnD,aAAO,EAAE,iBAAWxnD,KAAX,EAAmB;AAE3B,eAAO,KAAKonD,YAAL,CAAmB1B,MAAnB,EAA2B1lD,KAA3B,CAAP;AAEA,OApG8E;AAsG/EynD,qBAAe,EAAE,yBAAW7M,IAAX,EAAiBx6C,QAAjB,EAA4B;AAE5C;AACA;AAEA6kD,aAAK,CAACtpD,IAAN,CAAYi/C,IAAZ,EAAmB/9C,eAAnB,CAAoC,KAAKsB,UAAzC;;AAEA,aAAKlD,QAAL,CAAcyC,GAAd,CAAmBunD,KAAK,CAACpnD,cAAN,CAAsBuC,QAAtB,CAAnB;AAEA,eAAO,IAAP;AAEA,OAjH8E;AAmH/EsnD,gBAAU,EAAE,oBAAWtnD,QAAX,EAAsB;AAEjC,eAAO,KAAKqnD,eAAL,CAAsBjC,MAAtB,EAA8BplD,QAA9B,CAAP;AAEA,OAvH8E;AAyH/EunD,gBAAU,EAAE,oBAAWvnD,QAAX,EAAsB;AAEjC,eAAO,KAAKqnD,eAAL,CAAsBhC,MAAtB,EAA8BrlD,QAA9B,CAAP;AAEA,OA7H8E;AA+H/EwnD,gBAAU,EAAE,oBAAWxnD,QAAX,EAAsB;AAEjC,eAAO,KAAKqnD,eAAL,CAAsB/B,MAAtB,EAA8BtlD,QAA9B,CAAP;AAEA,OAnI8E;AAqI/EynD,kBAAY,EAAE,sBAAWC,MAAX,EAAoB;AAEjC,eAAOA,MAAM,CAAC3R,YAAP,CAAqB,KAAKwH,WAA1B,CAAP;AAEA,OAzI8E;AA2I/EoK,kBAAY,EAAE,sBAAWD,MAAX,EAAoB;AAEjC,eAAOA,MAAM,CAAC3R,YAAP,CAAqBgP,KAAK,CAACnT,UAAN,CAAkB,KAAK2L,WAAvB,CAArB,CAAP;AAEA,OA/I8E;AAiJ/E//C,YAAM,EAAE,gBAAWxS,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE5B;AAEA,YAAKtiB,CAAC,CAACqxD,SAAP,EAAmB;AAElB2I,iBAAO,CAACzpD,IAAR,CAAcvQ,CAAd;AAEA,SAJD,MAIO;AAENg6D,iBAAO,CAACtnD,GAAR,CAAa1S,CAAb,EAAgB+W,CAAhB,EAAmBuL,CAAnB;AAEA;;AAED,YAAMo4C,MAAM,GAAG,KAAKA,MAApB;AAEA,aAAKkC,iBAAL,CAAwB,IAAxB,EAA8B,KAA9B;;AAEA3C,iBAAS,CAACvG,qBAAV,CAAiC,KAAKnB,WAAtC;;AAEA,YAAK,KAAKsK,QAAL,IAAiB,KAAKC,OAA3B,EAAqC;AAEpC/C,eAAK,CAACvnD,MAAN,CAAcynD,SAAd,EAAyBD,OAAzB,EAAkC,KAAK9oD,EAAvC;AAEA,SAJD,MAIO;AAEN6oD,eAAK,CAACvnD,MAAN,CAAcwnD,OAAd,EAAuBC,SAAvB,EAAkC,KAAK/oD,EAAvC;AAEA;;AAED,aAAK6B,UAAL,CAAgB28C,qBAAhB,CAAuCqK,KAAvC;;AAEA,YAAKW,MAAL,EAAc;AAEbX,eAAK,CAACnF,eAAN,CAAuB8F,MAAM,CAACnI,WAA9B;;AACAuH,aAAG,CAACpK,qBAAJ,CAA2BqK,KAA3B;;AACA,eAAKhnD,UAAL,CAAgBuyC,WAAhB,CAA6BwU,GAAG,CAAC1oD,OAAJ,EAA7B;AAEA;AAED,OAzL8E;AA2L/EkB,SAAG,EAAE,aAAWvO,MAAX,EAAoB;AAExB,YAAK4G,SAAS,CAACjW,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,eAAM,IAAIW,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAGsV,SAAS,CAACjW,MAA/B,EAAuCW,GAAC,EAAxC,EAA8C;AAE7C,iBAAKid,GAAL,CAAU3H,SAAS,CAAEtV,GAAF,CAAnB;AAEA;;AAED,iBAAO,IAAP;AAEA;;AAED,YAAK0O,MAAM,KAAK,IAAhB,EAAuB;AAEtBvN,iBAAO,CAACD,KAAR,CAAe,iEAAf,EAAkFwN,MAAlF;AACA,iBAAO,IAAP;AAEA;;AAED,YAAOA,MAAM,IAAIA,MAAM,CAAC03D,UAAxB,EAAuC;AAEtC,cAAK13D,MAAM,CAAC22D,MAAP,KAAkB,IAAvB,EAA8B;AAE7B32D,kBAAM,CAAC22D,MAAP,CAActxD,MAAd,CAAsBrF,MAAtB;AAEA;;AAEDA,gBAAM,CAAC22D,MAAP,GAAgB,IAAhB;AACA,eAAKv8C,QAAL,CAAcpoB,IAAd,CAAoBgO,MAApB;AAEAA,gBAAM,CAACsE,aAAP,CAAsBkyD,WAAtB;AAEA,SAbD,MAaO;AAEN/jE,iBAAO,CAACD,KAAR,CAAe,+DAAf,EAAgFwN,MAAhF;AAEA;;AAED,eAAO,IAAP;AAEA,OArO8E;AAuO/EqF,YAAM,EAAE,gBAAWrF,MAAX,EAAoB;AAE3B,YAAK4G,SAAS,CAACjW,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,eAAM,IAAIW,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGsV,SAAS,CAACjW,MAA/B,EAAuCW,IAAC,EAAxC,EAA8C;AAE7C,iBAAK+T,MAAL,CAAauB,SAAS,CAAEtV,IAAF,CAAtB;AAEA;;AAED,iBAAO,IAAP;AAEA;;AAED,YAAM8mB,KAAK,GAAG,KAAKgC,QAAL,CAAc4I,OAAd,CAAuBhjB,MAAvB,CAAd;;AAEA,YAAKoY,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpBpY,gBAAM,CAAC22D,MAAP,GAAgB,IAAhB;AACA,eAAKv8C,QAAL,CAAc+nB,MAAd,CAAsB/pB,KAAtB,EAA6B,CAA7B;AAEApY,gBAAM,CAACsE,aAAP,CAAsBmyD,aAAtB;AAEA;;AAED,eAAO,IAAP;AAEA,OAlQ8E;AAoQ/EuC,YAAM,EAAE,gBAAWh5D,MAAX,EAAoB;AAE3B;AAEA,aAAK64D,iBAAL,CAAwB,IAAxB,EAA8B,KAA9B;;AAEA7C,aAAK,CAACnT,UAAN,CAAkB,KAAK2L,WAAvB;;AAEA,YAAKxuD,MAAM,CAAC22D,MAAP,KAAkB,IAAvB,EAA8B;AAE7B32D,gBAAM,CAAC22D,MAAP,CAAckC,iBAAd,CAAiC,IAAjC,EAAuC,KAAvC;;AAEA7C,eAAK,CAAC9X,QAAN,CAAgBl+C,MAAM,CAAC22D,MAAP,CAAcnI,WAA9B;AAEA;;AAEDxuD,cAAM,CAACgnD,YAAP,CAAqBgP,KAArB;AAEAh2D,cAAM,CAAC64D,iBAAP,CAA0B,KAA1B,EAAiC,KAAjC;AAEA,aAAKtqD,GAAL,CAAUvO,MAAV;AAEA,eAAO,IAAP;AAEA,OA5R8E;AA8R/Ei5D,mBAAa,EAAE,uBAAW/pE,EAAX,EAAgB;AAE9B,eAAO,KAAKgqE,mBAAL,CAA0B,IAA1B,EAAgChqE,EAAhC,CAAP;AAEA,OAlS8E;AAoS/EiqE,qBAAe,EAAE,yBAAW9oE,IAAX,EAAkB;AAElC,eAAO,KAAK6oE,mBAAL,CAA0B,MAA1B,EAAkC7oE,IAAlC,CAAP;AAEA,OAxS8E;AA0S/E6oE,yBAAmB,EAAE,6BAAW7oE,IAAX,EAAiB+K,KAAjB,EAAyB;AAE7C,YAAK,KAAM/K,IAAN,MAAiB+K,KAAtB,EAA8B,OAAO,IAAP;;AAE9B,aAAM,IAAI9J,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKqe,QAAL,CAAczpB,MAAnC,EAA2CW,IAAC,GAAGyK,CAA/C,EAAkDzK,IAAC,EAAnD,EAAyD;AAExD,cAAM8nE,KAAK,GAAG,KAAKh/C,QAAL,CAAe9oB,IAAf,CAAd;AACA,cAAM0O,MAAM,GAAGo5D,KAAK,CAACF,mBAAN,CAA2B7oE,IAA3B,EAAiC+K,KAAjC,CAAf;;AAEA,cAAK4E,MAAM,KAAKN,SAAhB,EAA4B;AAE3B,mBAAOM,MAAP;AAEA;AAED;;AAED,eAAON,SAAP;AAEA,OA7T8E;AA+T/E25D,sBAAgB,EAAE,0BAAWl+D,MAAX,EAAoB;AAErC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,aAAKkM,iBAAL,CAAwB,IAAxB;AAEA,eAAOn+D,MAAM,CAACw0D,qBAAP,CAA8B,KAAKnB,WAAnC,CAAP;AAEA,OA5U8E;AA8U/E+K,wBAAkB,EAAE,4BAAWp+D,MAAX,EAAoB;AAEvC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,8DAAd;AACAjO,gBAAM,GAAG,IAAIguD,UAAJ,EAAT;AAEA;;AAED,aAAKmQ,iBAAL,CAAwB,IAAxB;AAEA,aAAK9K,WAAL,CAAiBwF,SAAjB,CAA4BkC,SAA5B,EAAuC/6D,MAAvC,EAA+Cg7D,MAA/C;AAEA,eAAOh7D,MAAP;AAEA,OA7V8E;AA+V/Eq+D,mBAAa,EAAE,uBAAWr+D,MAAX,EAAoB;AAElC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,yDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,aAAKkM,iBAAL,CAAwB,IAAxB;AAEA,aAAK9K,WAAL,CAAiBwF,SAAjB,CAA4BkC,SAA5B,EAAuCE,aAAvC,EAAsDj7D,MAAtD;AAEA,eAAOA,MAAP;AAEA,OA9W8E;AAgX/Es+D,uBAAiB,EAAE,2BAAWt+D,MAAX,EAAoB;AAEtC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,6DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,aAAKkM,iBAAL,CAAwB,IAAxB;AAEA,YAAM1qE,CAAC,GAAG,KAAK4/D,WAAL,CAAiBlQ,QAA3B;AAEA,eAAOnjD,MAAM,CAACwT,GAAP,CAAY/f,CAAC,CAAE,CAAF,CAAb,EAAoBA,CAAC,CAAE,CAAF,CAArB,EAA4BA,CAAC,CAAE,EAAF,CAA7B,EAAsCqwD,SAAtC,EAAP;AAEA,OA/X8E;AAiY/Eya,aAAO,EAAE,mBAAY,CAAE,CAjYwD;AAmY/EC,cAAQ,EAAE,kBAAWzM,QAAX,EAAsB;AAE/BA,gBAAQ,CAAE,IAAF,CAAR;AAEA,YAAM9yC,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,aAAM,IAAI9oB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD8oB,kBAAQ,CAAE9oB,IAAF,CAAR,CAAcqoE,QAAd,CAAwBzM,QAAxB;AAEA;AAED,OA/Y8E;AAiZ/E0M,qBAAe,EAAE,yBAAW1M,QAAX,EAAsB;AAEtC,YAAK,KAAKmK,OAAL,KAAiB,KAAtB,EAA8B;AAE9BnK,gBAAQ,CAAE,IAAF,CAAR;AAEA,YAAM9yC,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,aAAM,IAAI9oB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD8oB,kBAAQ,CAAE9oB,IAAF,CAAR,CAAcsoE,eAAd,CAA+B1M,QAA/B;AAEA;AAED,OA/Z8E;AAia/E2M,uBAAiB,EAAE,2BAAW3M,QAAX,EAAsB;AAExC,YAAMyJ,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,KAAK,IAAhB,EAAuB;AAEtBzJ,kBAAQ,CAAEyJ,MAAF,CAAR;AAEAA,gBAAM,CAACkD,iBAAP,CAA0B3M,QAA1B;AAEA;AAED,OA7a8E;AA+a/EhH,kBAAY,EAAE,wBAAY;AAEzB,aAAKn0C,MAAL,CAAY8/C,OAAZ,CAAqB,KAAK/lD,QAA1B,EAAoC,KAAKkD,UAAzC,EAAqD,KAAKZ,KAA1D;AAEA,aAAKgpD,sBAAL,GAA8B,IAA9B;AAEA,OArb8E;AAub/EkC,uBAAiB,EAAE,2BAAWQ,KAAX,EAAmB;AAErC,YAAK,KAAKnU,gBAAV,EAA6B,KAAKO,YAAL;;AAE7B,YAAK,KAAKkR,sBAAL,IAA+B0C,KAApC,EAA4C;AAE3C,cAAK,KAAKnD,MAAL,KAAgB,IAArB,EAA4B;AAE3B,iBAAKnI,WAAL,CAAiBhiD,IAAjB,CAAuB,KAAKuF,MAA5B;AAEA,WAJD,MAIO;AAEN,iBAAKy8C,WAAL,CAAiBlN,gBAAjB,CAAmC,KAAKqV,MAAL,CAAYnI,WAA/C,EAA4D,KAAKz8C,MAAjE;AAEA;;AAED,eAAKqlD,sBAAL,GAA8B,KAA9B;AAEA0C,eAAK,GAAG,IAAR;AAEA,SApBoC,CAsBrC;;;AAEA,YAAM1/C,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,aAAM,IAAI9oB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD8oB,kBAAQ,CAAE9oB,IAAF,CAAR,CAAcgoE,iBAAd,CAAiCQ,KAAjC;AAEA;AAED,OAvd8E;AAyd/EjB,uBAAiB,EAAE,2BAAWkB,aAAX,EAA0BC,cAA1B,EAA2C;AAE7D,YAAMrD,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKoD,aAAa,KAAK,IAAlB,IAA0BpD,MAAM,KAAK,IAA1C,EAAiD;AAEhDA,gBAAM,CAACkC,iBAAP,CAA0B,IAA1B,EAAgC,KAAhC;AAEA;;AAED,YAAK,KAAKlT,gBAAV,EAA6B,KAAKO,YAAL;;AAE7B,YAAK,KAAKyQ,MAAL,KAAgB,IAArB,EAA4B;AAE3B,eAAKnI,WAAL,CAAiBhiD,IAAjB,CAAuB,KAAKuF,MAA5B;AAEA,SAJD,MAIO;AAEN,eAAKy8C,WAAL,CAAiBlN,gBAAjB,CAAmC,KAAKqV,MAAL,CAAYnI,WAA/C,EAA4D,KAAKz8C,MAAjE;AAEA,SApB4D,CAsB7D;;;AAEA,YAAKioD,cAAc,KAAK,IAAxB,EAA+B;AAE9B,cAAM5/C,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,eAAM,IAAI9oB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD8oB,oBAAQ,CAAE9oB,IAAF,CAAR,CAAcunE,iBAAd,CAAiC,KAAjC,EAAwC,IAAxC;AAEA;AAED;AAED,OA7f8E;AA+f/E1S,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB;AACA,YAAMqhC,YAAY,GAAKrhC,IAAI,KAAKrlB,SAAT,IAAsB,OAAOqlB,IAAP,KAAgB,QAA7D;AAEA,YAAMsR,MAAM,GAAG,EAAf,CALyB,CAOzB;AACA;AACA;;AACA,YAAK+vB,YAAL,EAAoB;AAEnB;AACArhC,cAAI,GAAG;AACNk1C,sBAAU,EAAE,EADN;AAENC,qBAAS,EAAE,EAFL;AAGN7T,oBAAQ,EAAE,EAHJ;AAING,kBAAM,EAAE,EAJF;AAKN2T,kBAAM,EAAE;AALF,WAAP;AAQA9jC,gBAAM,CAACiwB,QAAP,GAAkB;AACjBh9B,mBAAO,EAAE,GADQ;AAEjBtzB,gBAAI,EAAE,QAFW;AAGjBuwD,qBAAS,EAAE;AAHM,WAAlB;AAMA,SA3BwB,CA6BzB;;;AAEA,YAAMvmD,MAAM,GAAG,EAAf;AAEAA,cAAM,CAACi7C,IAAP,GAAc,KAAKA,IAAnB;AACAj7C,cAAM,CAAChK,IAAP,GAAc,KAAKA,IAAnB;AAEA,YAAK,KAAK3F,IAAL,KAAc,EAAnB,EAAwB2P,MAAM,CAAC3P,IAAP,GAAc,KAAKA,IAAnB;AACxB,YAAK,KAAKinE,UAAL,KAAoB,IAAzB,EAAgCt3D,MAAM,CAACs3D,UAAP,GAAoB,IAApB;AAChC,YAAK,KAAKC,aAAL,KAAuB,IAA5B,EAAmCv3D,MAAM,CAACu3D,aAAP,GAAuB,IAAvB;AACnC,YAAK,KAAKF,OAAL,KAAiB,KAAtB,EAA8Br3D,MAAM,CAACq3D,OAAP,GAAiB,KAAjB;AAC9B,YAAK,KAAKz2C,aAAL,KAAuB,KAA5B,EAAoC5gB,MAAM,CAAC4gB,aAAP,GAAuB,KAAvB;AACpC,YAAK,KAAK42C,WAAL,KAAqB,CAA1B,EAA8Bx3D,MAAM,CAACw3D,WAAP,GAAqB,KAAKA,WAA1B;AAC9B,YAAK3gD,IAAI,CAACE,SAAL,CAAgB,KAAK0gD,QAArB,MAAoC,IAAzC,EAAgDz3D,MAAM,CAACy3D,QAAP,GAAkB,KAAKA,QAAvB;AAEhDz3D,cAAM,CAAC41D,MAAP,GAAgB,KAAKA,MAAL,CAAYP,IAA5B;AACAr1D,cAAM,CAAC+R,MAAP,GAAgB,KAAKA,MAAL,CAAY6tC,OAAZ,EAAhB;AAEA,YAAK,KAAK+F,gBAAL,KAA0B,KAA/B,EAAuC3lD,MAAM,CAAC2lD,gBAAP,GAA0B,KAA1B,CA/Cd,CAiDzB;;AAEA,YAAK,KAAKyU,eAAV,EAA4B;AAE3Bp6D,gBAAM,CAAChK,IAAP,GAAc,eAAd;AACAgK,gBAAM,CAACq6D,KAAP,GAAe,KAAKA,KAApB;AACAr6D,gBAAM,CAACs6D,cAAP,GAAwB,KAAKA,cAAL,CAAoBnU,MAApB,EAAxB;AAEA,SAzDwB,CA2DzB;;;AAEA,iBAASoU,SAAT,CAAoBC,OAApB,EAA6B/oD,OAA7B,EAAuC;AAEtC,cAAK+oD,OAAO,CAAE/oD,OAAO,CAACwpC,IAAV,CAAP,KAA4Bv7C,SAAjC,EAA6C;AAE5C86D,mBAAO,CAAE/oD,OAAO,CAACwpC,IAAV,CAAP,GAA0BxpC,OAAO,CAAC00C,MAAR,CAAgBphC,IAAhB,CAA1B;AAEA;;AAED,iBAAOtT,OAAO,CAACwpC,IAAf;AAEA;;AAED,YAAK,KAAKwf,MAAL,IAAe,KAAKC,MAApB,IAA8B,KAAKC,QAAxC,EAAmD;AAElD36D,gBAAM,CAAC46D,QAAP,GAAkBL,SAAS,CAAEx1C,IAAI,CAACk1C,UAAP,EAAmB,KAAKW,QAAxB,CAA3B;AAEA,cAAMC,UAAU,GAAG,KAAKD,QAAL,CAAcC,UAAjC;;AAEA,cAAKA,UAAU,KAAKn7D,SAAf,IAA4Bm7D,UAAU,CAACV,MAAX,KAAsBz6D,SAAvD,EAAmE;AAElE,gBAAMy6D,MAAM,GAAGU,UAAU,CAACV,MAA1B;;AAEA,gBAAKp3C,KAAK,CAAC0jC,OAAN,CAAe0T,MAAf,CAAL,EAA+B;AAE9B,mBAAM,IAAI7oE,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo+D,MAAM,CAACxpE,MAA5B,EAAoCW,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,oBAAMg6C,KAAK,GAAG6uB,MAAM,CAAE7oE,IAAF,CAApB;AAEAipE,yBAAS,CAAEx1C,IAAI,CAACo1C,MAAP,EAAe7uB,KAAf,CAAT;AAEA;AAED,aAVD,MAUO;AAENivB,uBAAS,CAAEx1C,IAAI,CAACo1C,MAAP,EAAeA,MAAf,CAAT;AAEA;AAED;AAED;;AAED,YAAK,KAAKr5C,QAAL,KAAkBphB,SAAvB,EAAmC;AAElC,cAAKqjB,KAAK,CAAC0jC,OAAN,CAAe,KAAK3lC,QAApB,CAAL,EAAsC;AAErC,gBAAMg6C,KAAK,GAAG,EAAd;;AAEA,iBAAM,IAAIxpE,IAAC,GAAG,CAAR,EAAWyK,EAAC,GAAG,KAAK+kB,QAAL,CAAcnwB,MAAnC,EAA2CW,IAAC,GAAGyK,EAA/C,EAAkDzK,IAAC,EAAnD,EAAyD;AAExDwpE,mBAAK,CAAC9oE,IAAN,CAAYuoE,SAAS,CAAEx1C,IAAI,CAACm1C,SAAP,EAAkB,KAAKp5C,QAAL,CAAexvB,IAAf,CAAlB,CAArB;AAEA;;AAED0O,kBAAM,CAAC8gB,QAAP,GAAkBg6C,KAAlB;AAEA,WAZD,MAYO;AAEN96D,kBAAM,CAAC8gB,QAAP,GAAkBy5C,SAAS,CAAEx1C,IAAI,CAACm1C,SAAP,EAAkB,KAAKp5C,QAAvB,CAA3B;AAEA;AAED,SA3HwB,CA6HzB;;;AAEA,YAAK,KAAK1G,QAAL,CAAczpB,MAAd,GAAuB,CAA5B,EAAgC;AAE/BqP,gBAAM,CAACoa,QAAP,GAAkB,EAAlB;;AAEA,eAAM,IAAI9oB,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,KAAK8oB,QAAL,CAAczpB,MAAnC,EAA2CW,IAAC,EAA5C,EAAkD;AAEjD0O,kBAAM,CAACoa,QAAP,CAAgBpoB,IAAhB,CAAsB,KAAKooB,QAAL,CAAe9oB,IAAf,EAAmB60D,MAAnB,CAA2BphC,IAA3B,EAAkC/kB,MAAxD;AAEA;AAED;;AAED,YAAKomD,YAAL,EAAoB;AAEnB,cAAM6T,UAAU,GAAGc,gBAAgB,CAAEh2C,IAAI,CAACk1C,UAAP,CAAnC;AACA,cAAMC,SAAS,GAAGa,gBAAgB,CAAEh2C,IAAI,CAACm1C,SAAP,CAAlC;AACA,cAAM7T,QAAQ,GAAG0U,gBAAgB,CAAEh2C,IAAI,CAACshC,QAAP,CAAjC;AACA,cAAMG,MAAM,GAAGuU,gBAAgB,CAAEh2C,IAAI,CAACyhC,MAAP,CAA/B;;AACA,cAAM2T,OAAM,GAAGY,gBAAgB,CAAEh2C,IAAI,CAACo1C,MAAP,CAA/B;;AAEA,cAAKF,UAAU,CAACtpE,MAAX,GAAoB,CAAzB,EAA6B0lC,MAAM,CAAC4jC,UAAP,GAAoBA,UAApB;AAC7B,cAAKC,SAAS,CAACvpE,MAAV,GAAmB,CAAxB,EAA4B0lC,MAAM,CAAC6jC,SAAP,GAAmBA,SAAnB;AAC5B,cAAK7T,QAAQ,CAAC11D,MAAT,GAAkB,CAAvB,EAA2B0lC,MAAM,CAACgwB,QAAP,GAAkBA,QAAlB;AAC3B,cAAKG,MAAM,CAAC71D,MAAP,GAAgB,CAArB,EAAyB0lC,MAAM,CAACmwB,MAAP,GAAgBA,MAAhB;AACzB,cAAK2T,OAAM,CAACxpE,MAAP,GAAgB,CAArB,EAAyB0lC,MAAM,CAAC8jC,MAAP,GAAgBA,OAAhB;AAEzB;;AAED9jC,cAAM,CAACr2B,MAAP,GAAgBA,MAAhB;AAEA,eAAOq2B,MAAP,CA7JyB,CA+JzB;AACA;AACA;;AACA,iBAAS0kC,gBAAT,CAA2BC,KAA3B,EAAmC;AAElC,cAAMC,MAAM,GAAG,EAAf;;AACA,eAAM,IAAMC,GAAZ,IAAmBF,KAAnB,EAA2B;AAE1B,gBAAM7qE,IAAI,GAAG6qE,KAAK,CAAEE,GAAF,CAAlB;AACA,mBAAO/qE,IAAI,CAACm2D,QAAZ;AACA2U,kBAAM,CAACjpE,IAAP,CAAa7B,IAAb;AAEA;;AAED,iBAAO8qE,MAAP;AAEA;AAED,OAhrB8E;AAkrB/ErvD,WAAK,EAAE,eAAWuvD,SAAX,EAAuB;AAE7B,eAAO,IAAI,KAAKjmD,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,EAAmC2uD,SAAnC,CAAP;AAEA,OAtrB8E;AAwrB/E3uD,UAAI,EAAE,cAAWyhC,MAAX,EAAmBktB,SAAnB,EAA+B;AAEpC,YAAKA,SAAS,KAAKz7D,SAAnB,EAA+By7D,SAAS,GAAG,IAAZ;AAE/B,aAAK9qE,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB;AAEA,aAAK8c,EAAL,CAAQX,IAAR,CAAcyhC,MAAM,CAAC9gC,EAArB;AAEA,aAAKrB,QAAL,CAAcU,IAAd,CAAoByhC,MAAM,CAACniC,QAA3B;AACA,aAAK0/B,QAAL,CAAcqR,KAAd,GAAsB5O,MAAM,CAACzC,QAAP,CAAgBqR,KAAtC;AACA,aAAK7tC,UAAL,CAAgBxC,IAAhB,CAAsByhC,MAAM,CAACj/B,UAA7B;AACA,aAAKZ,KAAL,CAAW5B,IAAX,CAAiByhC,MAAM,CAAC7/B,KAAxB;AAEA,aAAK2D,MAAL,CAAYvF,IAAZ,CAAkByhC,MAAM,CAACl8B,MAAzB;AACA,aAAKy8C,WAAL,CAAiBhiD,IAAjB,CAAuByhC,MAAM,CAACugB,WAA9B;AAEA,aAAK7I,gBAAL,GAAwB1X,MAAM,CAAC0X,gBAA/B;AACA,aAAKyR,sBAAL,GAA8BnpB,MAAM,CAACmpB,sBAArC;AAEA,aAAKxB,MAAL,CAAYP,IAAZ,GAAmBpnB,MAAM,CAAC2nB,MAAP,CAAcP,IAAjC;AACA,aAAKgC,OAAL,GAAeppB,MAAM,CAACopB,OAAtB;AAEA,aAAKC,UAAL,GAAkBrpB,MAAM,CAACqpB,UAAzB;AACA,aAAKC,aAAL,GAAqBtpB,MAAM,CAACspB,aAA5B;AAEA,aAAK32C,aAAL,GAAqBqtB,MAAM,CAACrtB,aAA5B;AACA,aAAK42C,WAAL,GAAmBvpB,MAAM,CAACupB,WAA1B;AAEA,aAAKC,QAAL,GAAgB5gD,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,SAAL,CAAgBk3B,MAAM,CAACwpB,QAAvB,CAAZ,CAAhB;;AAEA,YAAK0D,SAAS,KAAK,IAAnB,EAA0B;AAEzB,eAAM,IAAI7pE,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG28C,MAAM,CAAC7zB,QAAP,CAAgBzpB,MAArC,EAA6CW,IAAC,EAA9C,EAAoD;AAEnD,gBAAM8nE,KAAK,GAAGnrB,MAAM,CAAC7zB,QAAP,CAAiB9oB,IAAjB,CAAd;AACA,iBAAKid,GAAL,CAAU6qD,KAAK,CAACxtD,KAAN,EAAV;AAEA;AAED;;AAED,eAAO,IAAP;AAEA;AAnuB8E,KAA3D,CAArB;;AAuuBA,aAASwvD,KAAT,GAAiB;AAEhB1E,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,OAAZ;AAEA,WAAK6pB,UAAL,GAAkB,IAAlB;AACA,WAAKw7C,WAAL,GAAmB,IAAnB;AACA,WAAKC,GAAL,GAAW,IAAX;AAEA,WAAKC,gBAAL,GAAwB,IAAxB;AAEA,WAAKC,UAAL,GAAkB,IAAlB,CAZgB,CAYQ;;AAExB,UAAK,OAAOC,kBAAP,KAA8B,WAAnC,EAAiD;AAEhDA,0BAAkB,CAACn3D,aAAnB,CAAkC,IAAIo3D,WAAJ,CAAiB,SAAjB,EAA4B;AAAEC,gBAAM,EAAE;AAAV,SAA5B,CAAlC,EAFgD,CAEoC;;AAEpF;AAED;;AAEDP,SAAK,CAAC5yD,SAAN,GAAkB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAErE0M,iBAAW,EAAEkmD,KAFwD;AAIrEQ,aAAO,EAAE,IAJ4D;AAMrEpvD,UAAI,EAAE,cAAWyhC,MAAX,EAAmBktB,SAAnB,EAA+B;AAEpCzE,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC,EAA4CktB,SAA5C;AAEA,YAAKltB,MAAM,CAACpuB,UAAP,KAAsB,IAA3B,EAAkC,KAAKA,UAAL,GAAkBouB,MAAM,CAACpuB,UAAP,CAAkBjU,KAAlB,EAAlB;AAClC,YAAKqiC,MAAM,CAACotB,WAAP,KAAuB,IAA5B,EAAmC,KAAKA,WAAL,GAAmBptB,MAAM,CAACotB,WAAP,CAAmBzvD,KAAnB,EAAnB;AACnC,YAAKqiC,MAAM,CAACqtB,GAAP,KAAe,IAApB,EAA2B,KAAKA,GAAL,GAAWrtB,MAAM,CAACqtB,GAAP,CAAW1vD,KAAX,EAAX;AAE3B,YAAKqiC,MAAM,CAACstB,gBAAP,KAA4B,IAAjC,EAAwC,KAAKA,gBAAL,GAAwBttB,MAAM,CAACstB,gBAAP,CAAwB3vD,KAAxB,EAAxB;AAExC,aAAK4vD,UAAL,GAAkBvtB,MAAM,CAACutB,UAAzB;AACA,aAAK7V,gBAAL,GAAwB1X,MAAM,CAAC0X,gBAA/B;AAEA,eAAO,IAAP;AAEA,OArBoE;AAuBrEQ,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGumE,QAAQ,CAACluD,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA,YAAK,KAAKlF,UAAL,KAAoB,IAAzB,EAAgC1vB,IAAI,CAAC6P,MAAL,CAAY6f,UAAZ,GAAyB,KAAKA,UAAL,CAAgBsmC,MAAhB,CAAwBphC,IAAxB,CAAzB;AAChC,YAAK,KAAKs2C,WAAL,KAAqB,IAA1B,EAAiClrE,IAAI,CAAC6P,MAAL,CAAYq7D,WAAZ,GAA0B,KAAKA,WAAL,CAAiBlV,MAAjB,CAAyBphC,IAAzB,CAA1B;AACjC,YAAK,KAAKu2C,GAAL,KAAa,IAAlB,EAAyBnrE,IAAI,CAAC6P,MAAL,CAAYs7D,GAAZ,GAAkB,KAAKA,GAAL,CAASnV,MAAT,EAAlB;AAEzB,eAAOh2D,IAAP;AAEA,OAjCoE;AAmCrE8e,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA;AAvCoE,KAApD,CAAlB;AA2CA,QAAM6lE,OAAO,GAAG,CACf,IAAIzO,OAAJ,EADe,EAEf,IAAIA,OAAJ,EAFe,EAGf,IAAIA,OAAJ,EAHe,EAIf,IAAIA,OAAJ,EAJe,EAKf,IAAIA,OAAJ,EALe,EAMf,IAAIA,OAAJ,EANe,EAOf,IAAIA,OAAJ,EAPe,EAQf,IAAIA,OAAJ,EARe,CAAhB;;AAWA,QAAM0O,SAAS,GAAG,IAAI1O,OAAJ,EAAlB;;AAEA,QAAM2O,IAAI,GAAG,IAAIC,IAAJ,EAAb,C,CAEA;;;AAEA,QAAMC,GAAG,GAAG,IAAI7O,OAAJ,EAAZ;;AACA,QAAM8O,KAAK,GAAG,IAAI9O,OAAJ,EAAd;;AACA,QAAM+O,GAAG,GAAG,IAAI/O,OAAJ,EAAZ,C,CAEA;;;AAEA,QAAMgP,GAAG,GAAG,IAAIhP,OAAJ,EAAZ;;AACA,QAAMiP,GAAG,GAAG,IAAIjP,OAAJ,EAAZ;;AACA,QAAMkP,GAAG,GAAG,IAAIlP,OAAJ,EAAZ;;AAEA,QAAMmP,OAAO,GAAG,IAAInP,OAAJ,EAAhB;;AACA,QAAMoP,QAAQ,GAAG,IAAIpP,OAAJ,EAAjB;;AACA,QAAMqP,eAAe,GAAG,IAAIrP,OAAJ,EAAxB;;AACA,QAAMsP,SAAS,GAAG,IAAItP,OAAJ,EAAlB;;AAEA,aAAS4O,IAAT,CAAejuD,GAAf,EAAoBC,GAApB,EAA0B;AAEzB,WAAKD,GAAL,GAAaA,GAAG,KAAKrO,SAAV,GAAwBqO,GAAxB,GAA8B,IAAIq/C,OAAJ,CAAa,CAAE5jD,QAAf,EAAyB,CAAEA,QAA3B,EAAqC,CAAEA,QAAvC,CAAzC;AACA,WAAKwE,GAAL,GAAaA,GAAG,KAAKtO,SAAV,GAAwBsO,GAAxB,GAA8B,IAAIo/C,OAAJ,CAAa,CAAE5jD,QAAf,EAAyB,CAAEA,QAA3B,EAAqC,CAAEA,QAAvC,CAAzC;AAEA;;AAGD3W,UAAM,CAACiiC,MAAP,CAAeknC,IAAI,CAACxzD,SAApB,EAA+B;AAE9Bm0D,YAAM,EAAE,IAFsB;AAI9BhuD,SAAG,EAAE,aAAWZ,GAAX,EAAgBC,GAAhB,EAAsB;AAE1B,aAAKD,GAAL,CAASvB,IAAT,CAAeuB,GAAf;AACA,aAAKC,GAAL,CAASxB,IAAT,CAAewB,GAAf;AAEA,eAAO,IAAP;AAEA,OAX6B;AAa9B4uD,kBAAY,EAAE,sBAAW1uC,KAAX,EAAmB;AAEhC,YAAIse,IAAI,GAAG,CAAEhjC,QAAb;AACA,YAAIshC,IAAI,GAAG,CAAEthC,QAAb;AACA,YAAIqzD,IAAI,GAAG,CAAErzD,QAAb;AAEA,YAAIijC,IAAI,GAAG,CAAEjjC,QAAb;AACA,YAAIszD,IAAI,GAAG,CAAEtzD,QAAb;AACA,YAAIuzD,IAAI,GAAG,CAAEvzD,QAAb;;AAEA,aAAM,IAAIlY,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGmyB,KAAK,CAACv9B,MAA3B,EAAmCW,IAAC,GAAGyK,CAAvC,EAA0CzK,IAAC,IAAI,CAA/C,EAAmD;AAElD,cAAM2K,CAAC,GAAGiyB,KAAK,CAAE58B,IAAF,CAAf;AACA,cAAM0hB,CAAC,GAAGkb,KAAK,CAAE58B,IAAC,GAAG,CAAN,CAAf;AACA,cAAMitB,CAAC,GAAG2P,KAAK,CAAE58B,IAAC,GAAG,CAAN,CAAf;AAEA,cAAK2K,CAAC,GAAGuwC,IAAT,EAAgBA,IAAI,GAAGvwC,CAAP;AAChB,cAAK+W,CAAC,GAAG83B,IAAT,EAAgBA,IAAI,GAAG93B,CAAP;AAChB,cAAKuL,CAAC,GAAGs+C,IAAT,EAAgBA,IAAI,GAAGt+C,CAAP;AAEhB,cAAKtiB,CAAC,GAAGwwC,IAAT,EAAgBA,IAAI,GAAGxwC,CAAP;AAChB,cAAK+W,CAAC,GAAG8pD,IAAT,EAAgBA,IAAI,GAAG9pD,CAAP;AAChB,cAAKuL,CAAC,GAAGw+C,IAAT,EAAgBA,IAAI,GAAGx+C,CAAP;AAEhB;;AAED,aAAKxQ,GAAL,CAASY,GAAT,CAAc69B,IAAd,EAAoB1B,IAApB,EAA0B+xB,IAA1B;AACA,aAAK7uD,GAAL,CAASW,GAAT,CAAc89B,IAAd,EAAoBqwB,IAApB,EAA0BC,IAA1B;AAEA,eAAO,IAAP;AAEA,OA5C6B;AA8C9BC,4BAAsB,EAAE,gCAAWld,SAAX,EAAuB;AAE9C,YAAItT,IAAI,GAAG,CAAEhjC,QAAb;AACA,YAAIshC,IAAI,GAAG,CAAEthC,QAAb;AACA,YAAIqzD,IAAI,GAAG,CAAErzD,QAAb;AAEA,YAAIijC,IAAI,GAAG,CAAEjjC,QAAb;AACA,YAAIszD,IAAI,GAAG,CAAEtzD,QAAb;AACA,YAAIuzD,IAAI,GAAG,CAAEvzD,QAAb;;AAEA,aAAM,IAAIlY,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG+jD,SAAS,CAACua,KAA/B,EAAsC/oE,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD,cAAM2K,CAAC,GAAG6jD,SAAS,CAACC,IAAV,CAAgBzuD,IAAhB,CAAV;AACA,cAAM0hB,CAAC,GAAG8sC,SAAS,CAACE,IAAV,CAAgB1uD,IAAhB,CAAV;AACA,cAAMitB,CAAC,GAAGuhC,SAAS,CAACuI,IAAV,CAAgB/2D,IAAhB,CAAV;AAEA,cAAK2K,CAAC,GAAGuwC,IAAT,EAAgBA,IAAI,GAAGvwC,CAAP;AAChB,cAAK+W,CAAC,GAAG83B,IAAT,EAAgBA,IAAI,GAAG93B,CAAP;AAChB,cAAKuL,CAAC,GAAGs+C,IAAT,EAAgBA,IAAI,GAAGt+C,CAAP;AAEhB,cAAKtiB,CAAC,GAAGwwC,IAAT,EAAgBA,IAAI,GAAGxwC,CAAP;AAChB,cAAK+W,CAAC,GAAG8pD,IAAT,EAAgBA,IAAI,GAAG9pD,CAAP;AAChB,cAAKuL,CAAC,GAAGw+C,IAAT,EAAgBA,IAAI,GAAGx+C,CAAP;AAEhB;;AAED,aAAKxQ,GAAL,CAASY,GAAT,CAAc69B,IAAd,EAAoB1B,IAApB,EAA0B+xB,IAA1B;AACA,aAAK7uD,GAAL,CAASW,GAAT,CAAc89B,IAAd,EAAoBqwB,IAApB,EAA0BC,IAA1B;AAEA,eAAO,IAAP;AAEA,OA7E6B;AA+E9BE,mBAAa,EAAE,uBAAW59C,MAAX,EAAoB;AAElC,aAAK69C,SAAL;;AAEA,aAAM,IAAI5rE,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG99C,MAAM,CAAC1uB,MAA7B,EAAqCW,IAAC,GAAG6rE,EAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD,eAAK8rE,aAAL,CAAoB/9C,MAAM,CAAE/tB,IAAF,CAA1B;AAEA;;AAED,eAAO,IAAP;AAEA,OA3F6B;AA6F9B+rE,0BAAoB,EAAE,8BAAW7vB,MAAX,EAAmBpmC,IAAnB,EAA0B;AAE/C,YAAMk2D,QAAQ,GAAGxB,SAAS,CAACtvD,IAAV,CAAgBpF,IAAhB,EAAuBsH,cAAvB,CAAuC,GAAvC,CAAjB;;AAEA,aAAKX,GAAL,CAASvB,IAAT,CAAeghC,MAAf,EAAwB//B,GAAxB,CAA6B6vD,QAA7B;AACA,aAAKtvD,GAAL,CAASxB,IAAT,CAAeghC,MAAf,EAAwBj/B,GAAxB,CAA6B+uD,QAA7B;AAEA,eAAO,IAAP;AAEA,OAtG6B;AAwG9BC,mBAAa,EAAE,uBAAWv9D,MAAX,EAAoB;AAElC,aAAKk9D,SAAL;AAEA,eAAO,KAAKM,cAAL,CAAqBx9D,MAArB,CAAP;AAEA,OA9G6B;AAgH9B4L,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OApH6B;AAsH9BA,UAAI,EAAE,cAAWixD,GAAX,EAAiB;AAEtB,aAAK1vD,GAAL,CAASvB,IAAT,CAAeixD,GAAG,CAAC1vD,GAAnB;AACA,aAAKC,GAAL,CAASxB,IAAT,CAAeixD,GAAG,CAACzvD,GAAnB;AAEA,eAAO,IAAP;AAEA,OA7H6B;AA+H9BkvD,eAAS,EAAE,qBAAY;AAEtB,aAAKnvD,GAAL,CAAS9R,CAAT,GAAa,KAAK8R,GAAL,CAASiF,CAAT,GAAa,KAAKjF,GAAL,CAASwQ,CAAT,GAAa,CAAE/U,QAAzC;AACA,aAAKwE,GAAL,CAAS/R,CAAT,GAAa,KAAK+R,GAAL,CAASgF,CAAT,GAAa,KAAKhF,GAAL,CAASuQ,CAAT,GAAa,CAAE/U,QAAzC;AAEA,eAAO,IAAP;AAEA,OAtI6B;AAwI9Bk0D,aAAO,EAAE,mBAAY;AAEpB;AAEA,eAAS,KAAK1vD,GAAL,CAAS/R,CAAT,GAAa,KAAK8R,GAAL,CAAS9R,CAAxB,IAAiC,KAAK+R,GAAL,CAASgF,CAAT,GAAa,KAAKjF,GAAL,CAASiF,CAAvD,IAAgE,KAAKhF,GAAL,CAASuQ,CAAT,GAAa,KAAKxQ,GAAL,CAASwQ,CAA7F;AAEA,OA9I6B;AAgJ9BkvB,eAAS,EAAE,mBAAWtyC,MAAX,EAAoB;AAE9B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,iDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAKsQ,OAAL,KAAiBviE,MAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB,GAAyCxT,MAAM,CAAC4iD,UAAP,CAAmB,KAAKhwC,GAAxB,EAA6B,KAAKC,GAAlC,EAAwCU,cAAxC,CAAwD,GAAxD,CAAhD;AAEA,OA3J6B;AA6J9BivD,aAAO,EAAE,iBAAWxiE,MAAX,EAAoB;AAE5B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAKsQ,OAAL,KAAiBviE,MAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB,GAAyCxT,MAAM,CAAC4X,UAAP,CAAmB,KAAK/E,GAAxB,EAA6B,KAAKD,GAAlC,CAAhD;AAEA,OAxK6B;AA0K9BqvD,mBAAa,EAAE,uBAAW14B,KAAX,EAAmB;AAEjC,aAAK32B,GAAL,CAASA,GAAT,CAAc22B,KAAd;AACA,aAAK12B,GAAL,CAASA,GAAT,CAAc02B,KAAd;AAEA,eAAO,IAAP;AAEA,OAjL6B;AAmL9Bk5B,oBAAc,EAAE,wBAAWjF,MAAX,EAAoB;AAEnC,aAAK5qD,GAAL,CAASN,GAAT,CAAckrD,MAAd;AACA,aAAK3qD,GAAL,CAASO,GAAT,CAAcoqD,MAAd;AAEA,eAAO,IAAP;AAEA,OA1L6B;AA4L9BkF,oBAAc,EAAE,wBAAWngB,MAAX,EAAoB;AAEnC,aAAK3vC,GAAL,CAASiwC,SAAT,CAAoB,CAAEN,MAAtB;AACA,aAAK1vC,GAAL,CAASgwC,SAAT,CAAoBN,MAApB;AAEA,eAAO,IAAP;AAEA,OAnM6B;AAqM9B8f,oBAAc,EAAE,wBAAWx9D,MAAX,EAAoB;AAEnC;AACA;AAEAA,cAAM,CAAC64D,iBAAP,CAA0B,KAA1B,EAAiC,KAAjC;AAEA,YAAM+B,QAAQ,GAAG56D,MAAM,CAAC46D,QAAxB;;AAEA,YAAKA,QAAQ,KAAKl7D,SAAlB,EAA8B;AAE7B,cAAKk7D,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpClD,oBAAQ,CAACmD,kBAAT;AAEA;;AAEDhC,cAAI,CAACvvD,IAAL,CAAWouD,QAAQ,CAACkD,WAApB;;AACA/B,cAAI,CAAC/U,YAAL,CAAmBhnD,MAAM,CAACwuD,WAA1B;;AAEA,eAAKwP,KAAL,CAAYjC,IAAZ;AAEA;;AAED,YAAM3hD,QAAQ,GAAGpa,MAAM,CAACoa,QAAxB;;AAEA,aAAM,IAAI9oB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,IAAC,GAAGyK,CAA1C,EAA6CzK,IAAC,EAA9C,EAAoD;AAEnD,eAAKksE,cAAL,CAAqBpjD,QAAQ,CAAE9oB,IAAF,CAA7B;AAEA;;AAED,eAAO,IAAP;AAEA,OAvO6B;AAyO9B2sE,mBAAa,EAAE,uBAAWv5B,KAAX,EAAmB;AAEjC,eAAOA,KAAK,CAACzoC,CAAN,GAAU,KAAK8R,GAAL,CAAS9R,CAAnB,IAAwByoC,KAAK,CAACzoC,CAAN,GAAU,KAAK+R,GAAL,CAAS/R,CAA3C,IACNyoC,KAAK,CAAC1xB,CAAN,GAAU,KAAKjF,GAAL,CAASiF,CADb,IACkB0xB,KAAK,CAAC1xB,CAAN,GAAU,KAAKhF,GAAL,CAASgF,CADrC,IAEN0xB,KAAK,CAACnmB,CAAN,GAAU,KAAKxQ,GAAL,CAASwQ,CAFb,IAEkBmmB,KAAK,CAACnmB,CAAN,GAAU,KAAKvQ,GAAL,CAASuQ,CAFrC,GAEyC,KAFzC,GAEiD,IAFxD;AAIA,OA/O6B;AAiP9B2/C,iBAAW,EAAE,qBAAWT,GAAX,EAAiB;AAE7B,eAAO,KAAK1vD,GAAL,CAAS9R,CAAT,IAAcwhE,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAtB,IAA2BwhE,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,IAAa,KAAK+R,GAAL,CAAS/R,CAAjD,IACN,KAAK8R,GAAL,CAASiF,CAAT,IAAcyqD,GAAG,CAAC1vD,GAAJ,CAAQiF,CADhB,IACqByqD,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,IAAa,KAAKhF,GAAL,CAASgF,CAD3C,IAEN,KAAKjF,GAAL,CAASwQ,CAAT,IAAck/C,GAAG,CAAC1vD,GAAJ,CAAQwQ,CAFhB,IAEqBk/C,GAAG,CAACzvD,GAAJ,CAAQuQ,CAAR,IAAa,KAAKvQ,GAAL,CAASuQ,CAFlD;AAIA,OAvP6B;AAyP9B4/C,kBAAY,EAAE,sBAAWz5B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAExC;AACA;AAEA,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,oDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAACwT,GAAP,CACN,CAAE+1B,KAAK,CAACzoC,CAAN,GAAU,KAAK8R,GAAL,CAAS9R,CAArB,KAA6B,KAAK+R,GAAL,CAAS/R,CAAT,GAAa,KAAK8R,GAAL,CAAS9R,CAAnD,CADM,EAEN,CAAEyoC,KAAK,CAAC1xB,CAAN,GAAU,KAAKjF,GAAL,CAASiF,CAArB,KAA6B,KAAKhF,GAAL,CAASgF,CAAT,GAAa,KAAKjF,GAAL,CAASiF,CAAnD,CAFM,EAGN,CAAE0xB,KAAK,CAACnmB,CAAN,GAAU,KAAKxQ,GAAL,CAASwQ,CAArB,KAA6B,KAAKvQ,GAAL,CAASuQ,CAAT,GAAa,KAAKxQ,GAAL,CAASwQ,CAAnD,CAHM,CAAP;AAMA,OA3Q6B;AA6Q9B6/C,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B;AACA,eAAOA,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,GAAY,KAAK8R,GAAL,CAAS9R,CAArB,IAA0BwhE,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAR,GAAY,KAAK+R,GAAL,CAAS/R,CAA/C,IACNwhE,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,GAAY,KAAKjF,GAAL,CAASiF,CADf,IACoByqD,GAAG,CAAC1vD,GAAJ,CAAQiF,CAAR,GAAY,KAAKhF,GAAL,CAASgF,CADzC,IAENyqD,GAAG,CAACzvD,GAAJ,CAAQuQ,CAAR,GAAY,KAAKxQ,GAAL,CAASwQ,CAFf,IAEoBk/C,GAAG,CAAC1vD,GAAJ,CAAQwQ,CAAR,GAAY,KAAKvQ,GAAL,CAASuQ,CAFzC,GAE6C,KAF7C,GAEqD,IAF5D;AAIA,OApR6B;AAsR9B8/C,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC;AACA,aAAKC,UAAL,CAAiBD,MAAM,CAAC9wB,MAAxB,EAAgCsuB,SAAhC,EAHqC,CAKrC;;AACA,eAAOA,SAAS,CAACjtD,iBAAV,CAA6ByvD,MAAM,CAAC9wB,MAApC,KAAkD8wB,MAAM,CAACnwD,MAAP,GAAgBmwD,MAAM,CAACnwD,MAAhF;AAEA,OA9R6B;AAgS9BqwD,qBAAe,EAAE,yBAAWC,KAAX,EAAmB;AAEnC;AACA;AAEA,YAAI1wD,GAAJ,EAASC,GAAT;;AAEA,YAAKywD,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,CAAtB,EAA0B;AAEzB8R,aAAG,GAAG0wD,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,KAAK8R,GAAL,CAAS9R,CAAhC;AACA+R,aAAG,GAAGywD,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,KAAK+R,GAAL,CAAS/R,CAAhC;AAEA,SALD,MAKO;AAEN8R,aAAG,GAAG0wD,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,KAAK+R,GAAL,CAAS/R,CAAhC;AACA+R,aAAG,GAAGywD,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,KAAK8R,GAAL,CAAS9R,CAAhC;AAEA;;AAED,YAAKwiE,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,CAAtB,EAA0B;AAEzBjF,aAAG,IAAI0wD,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,KAAKjF,GAAL,CAASiF,CAAjC;AACAhF,aAAG,IAAIywD,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,KAAKhF,GAAL,CAASgF,CAAjC;AAEA,SALD,MAKO;AAENjF,aAAG,IAAI0wD,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,KAAKhF,GAAL,CAASgF,CAAjC;AACAhF,aAAG,IAAIywD,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,KAAKjF,GAAL,CAASiF,CAAjC;AAEA;;AAED,YAAKyrD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,CAAtB,EAA0B;AAEzBxQ,aAAG,IAAI0wD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,KAAKxQ,GAAL,CAASwQ,CAAjC;AACAvQ,aAAG,IAAIywD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,KAAKvQ,GAAL,CAASuQ,CAAjC;AAEA,SALD,MAKO;AAENxQ,aAAG,IAAI0wD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,KAAKvQ,GAAL,CAASuQ,CAAjC;AACAvQ,aAAG,IAAIywD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,KAAKxQ,GAAL,CAASwQ,CAAjC;AAEA;;AAED,eAASxQ,GAAG,IAAI,CAAE0wD,KAAK,CAACC,QAAf,IAA2B1wD,GAAG,IAAI,CAAEywD,KAAK,CAACC,QAAnD;AAEA,OA7U6B;AA+U9BC,wBAAkB,EAAE,4BAAWC,QAAX,EAAsB;AAEzC,YAAK,KAAKlB,OAAL,EAAL,EAAsB;AAErB,iBAAO,KAAP;AAEA,SANwC,CAQzC;;;AACA,aAAKjwB,SAAL,CAAgB8uB,OAAhB;;AACAC,gBAAQ,CAACzpD,UAAT,CAAqB,KAAK/E,GAA1B,EAA+BuuD,OAA/B,EAVyC,CAYzC;;;AACAN,WAAG,CAAClpD,UAAJ,CAAgB6rD,QAAQ,CAAC/tE,CAAzB,EAA4B0rE,OAA5B;;AACAL,aAAK,CAACnpD,UAAN,CAAkB6rD,QAAQ,CAAC9tE,CAA3B,EAA8ByrE,OAA9B;;AACAJ,WAAG,CAACppD,UAAJ,CAAgB6rD,QAAQ,CAAC18C,CAAzB,EAA4Bq6C,OAA5B,EAfyC,CAiBzC;;;AACAH,WAAG,CAACrpD,UAAJ,CAAgBmpD,KAAhB,EAAuBD,GAAvB;;AACAI,WAAG,CAACtpD,UAAJ,CAAgBopD,GAAhB,EAAqBD,KAArB;;AACAI,WAAG,CAACvpD,UAAJ,CAAgBkpD,GAAhB,EAAqBE,GAArB,EApByC,CAsBzC;AACA;AACA;;;AACA,YAAI0C,IAAI,GAAG,CACV,CADU,EACP,CAAEzC,GAAG,CAAC79C,CADC,EACE69C,GAAG,CAACppD,CADN,EACS,CADT,EACY,CAAEqpD,GAAG,CAAC99C,CADlB,EACqB89C,GAAG,CAACrpD,CADzB,EAC4B,CAD5B,EAC+B,CAAEspD,GAAG,CAAC/9C,CADrC,EACwC+9C,GAAG,CAACtpD,CAD5C,EAEVopD,GAAG,CAAC79C,CAFM,EAEH,CAFG,EAEA,CAAE69C,GAAG,CAACngE,CAFN,EAESogE,GAAG,CAAC99C,CAFb,EAEgB,CAFhB,EAEmB,CAAE89C,GAAG,CAACpgE,CAFzB,EAE4BqgE,GAAG,CAAC/9C,CAFhC,EAEmC,CAFnC,EAEsC,CAAE+9C,GAAG,CAACrgE,CAF5C,EAGV,CAAEmgE,GAAG,CAACppD,CAHI,EAGDopD,GAAG,CAACngE,CAHH,EAGM,CAHN,EAGS,CAAEogE,GAAG,CAACrpD,CAHf,EAGkBqpD,GAAG,CAACpgE,CAHtB,EAGyB,CAHzB,EAG4B,CAAEqgE,GAAG,CAACtpD,CAHlC,EAGqCspD,GAAG,CAACrgE,CAHzC,EAG4C,CAH5C,CAAX;;AAKA,YAAK,CAAE6iE,UAAU,CAAED,IAAF,EAAQ5C,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB,EAAuD;AAEtD,iBAAO,KAAP;AAEA,SAlCwC,CAoCzC;;;AACAqC,YAAI,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,CAAP;;AACA,YAAK,CAAEC,UAAU,CAAED,IAAF,EAAQ5C,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB,EAAuD;AAEtD,iBAAO,KAAP;AAEA,SA1CwC,CA4CzC;AACA;;;AACAC,uBAAe,CAACprD,YAAhB,CAA8B+qD,GAA9B,EAAmCC,GAAnC;;AACAwC,YAAI,GAAG,CAAEpC,eAAe,CAACxgE,CAAlB,EAAqBwgE,eAAe,CAACzpD,CAArC,EAAwCypD,eAAe,CAACl+C,CAAxD,CAAP;AAEA,eAAOugD,UAAU,CAAED,IAAF,EAAQ5C,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB;AAEA,OAlY6B;AAoY9B+B,gBAAU,EAAE,oBAAW75B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAEtC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAACqR,IAAP,CAAak4B,KAAb,EAAqBwW,KAArB,CAA4B,KAAKntC,GAAjC,EAAsC,KAAKC,GAA3C,CAAP;AAEA,OA/Y6B;AAiZ9B+wD,qBAAe,EAAE,yBAAWr6B,KAAX,EAAmB;AAEnC,YAAMs6B,YAAY,GAAGlD,SAAS,CAACtvD,IAAV,CAAgBk4B,KAAhB,EAAwBwW,KAAxB,CAA+B,KAAKntC,GAApC,EAAyC,KAAKC,GAA9C,CAArB;;AAEA,eAAOgxD,YAAY,CAACvxD,GAAb,CAAkBi3B,KAAlB,EAA0B/zC,MAA1B,EAAP;AAEA,OAvZ6B;AAyZ9BsuE,uBAAiB,EAAE,2BAAW9jE,MAAX,EAAoB;AAEtC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAACD,KAAR,CAAe,yDAAf,EAF2B,CAG3B;AAEA;;AAED,aAAKi7C,SAAL,CAAgBtyC,MAAM,CAACqyC,MAAvB;AAEAryC,cAAM,CAACgT,MAAP,GAAgB,KAAKwvD,OAAL,CAAc7B,SAAd,EAA0BnrE,MAA1B,KAAqC,GAArD;AAEA,eAAOwK,MAAP;AAEA,OAxa6B;AA0a9B+jE,eAAS,EAAE,mBAAWzB,GAAX,EAAiB;AAE3B,aAAK1vD,GAAL,CAASC,GAAT,CAAcyvD,GAAG,CAAC1vD,GAAlB;AACA,aAAKC,GAAL,CAASD,GAAT,CAAc0vD,GAAG,CAACzvD,GAAlB,EAH2B,CAK3B;;AACA,YAAK,KAAK0vD,OAAL,EAAL,EAAsB,KAAKR,SAAL;AAEtB,eAAO,IAAP;AAEA,OApb6B;AAsb9Bc,WAAK,EAAE,eAAWP,GAAX,EAAiB;AAEvB,aAAK1vD,GAAL,CAASA,GAAT,CAAc0vD,GAAG,CAAC1vD,GAAlB;AACA,aAAKC,GAAL,CAASA,GAAT,CAAcyvD,GAAG,CAACzvD,GAAlB;AAEA,eAAO,IAAP;AAEA,OA7b6B;AA+b9Bg5C,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC;AACA,YAAK,KAAK2rD,OAAL,EAAL,EAAsB,OAAO,IAAP,CAHW,CAKjC;;AACA7B,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKZ,GAAL,CAAS9R,CAA3B,EAA8B,KAAK8R,GAAL,CAASiF,CAAvC,EAA0C,KAAKjF,GAAL,CAASwQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EANiC,CAM8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKZ,GAAL,CAAS9R,CAA3B,EAA8B,KAAK8R,GAAL,CAASiF,CAAvC,EAA0C,KAAKhF,GAAL,CAASuQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EAPiC,CAO8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKZ,GAAL,CAAS9R,CAA3B,EAA8B,KAAK+R,GAAL,CAASgF,CAAvC,EAA0C,KAAKjF,GAAL,CAASwQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EARiC,CAQ8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKZ,GAAL,CAAS9R,CAA3B,EAA8B,KAAK+R,GAAL,CAASgF,CAAvC,EAA0C,KAAKhF,GAAL,CAASuQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EATiC,CAS8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKX,GAAL,CAAS/R,CAA3B,EAA8B,KAAK8R,GAAL,CAASiF,CAAvC,EAA0C,KAAKjF,GAAL,CAASwQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EAViC,CAU8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKX,GAAL,CAAS/R,CAA3B,EAA8B,KAAK8R,GAAL,CAASiF,CAAvC,EAA0C,KAAKhF,GAAL,CAASuQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EAXiC,CAW8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKX,GAAL,CAAS/R,CAA3B,EAA8B,KAAK+R,GAAL,CAASgF,CAAvC,EAA0C,KAAKjF,GAAL,CAASwQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EAZiC,CAY8C;;;AAC/E8pD,eAAO,CAAE,CAAF,CAAP,CAAaltD,GAAb,CAAkB,KAAKX,GAAL,CAAS/R,CAA3B,EAA8B,KAAK+R,GAAL,CAASgF,CAAvC,EAA0C,KAAKhF,GAAL,CAASuQ,CAAnD,EAAuDyoC,YAAvD,CAAqEj1C,MAArE,EAbiC,CAa8C;;;AAE/E,aAAKkrD,aAAL,CAAoBpB,OAApB;AAEA,eAAO,IAAP;AAEA,OAld6B;AAod9B5X,eAAS,EAAE,mBAAWj3C,MAAX,EAAoB;AAE9B,aAAKe,GAAL,CAASQ,GAAT,CAAcvB,MAAd;AACA,aAAKgB,GAAL,CAASO,GAAT,CAAcvB,MAAd;AAEA,eAAO,IAAP;AAEA,OA3d6B;AA6d9B0yC,YAAM,EAAE,gBAAW+d,GAAX,EAAiB;AAExB,eAAOA,GAAG,CAAC1vD,GAAJ,CAAQ2xC,MAAR,CAAgB,KAAK3xC,GAArB,KAA8B0vD,GAAG,CAACzvD,GAAJ,CAAQ0xC,MAAR,CAAgB,KAAK1xC,GAArB,CAArC;AAEA;AAje6B,KAA/B;;AAqeA,aAAS8wD,UAAT,CAAqBD,IAArB,EAA2BM,EAA3B,EAA+B3f,EAA/B,EAAmCC,EAAnC,EAAuC2f,OAAvC,EAAiD;AAEhD,WAAM,IAAI9tE,IAAC,GAAG,CAAR,EAAWM,CAAC,GAAGitE,IAAI,CAACluE,MAAL,GAAc,CAAnC,EAAsCW,IAAC,IAAIM,CAA3C,EAA8CN,IAAC,IAAI,CAAnD,EAAuD;AAEtDorE,iBAAS,CAAC/c,SAAV,CAAqBkf,IAArB,EAA2BvtE,IAA3B,EAFsD,CAGtD;;;AACA,YAAMywB,CAAC,GAAGq9C,OAAO,CAACnjE,CAAR,GAAY4N,IAAI,CAAC4nB,GAAL,CAAUirC,SAAS,CAACzgE,CAApB,CAAZ,GAAsCmjE,OAAO,CAACpsD,CAAR,GAAYnJ,IAAI,CAAC4nB,GAAL,CAAUirC,SAAS,CAAC1pD,CAApB,CAAlD,GAA4EosD,OAAO,CAAC7gD,CAAR,GAAY1U,IAAI,CAAC4nB,GAAL,CAAUirC,SAAS,CAACn+C,CAApB,CAAlG,CAJsD,CAKtD;;AACA,YAAM8gD,EAAE,GAAGF,EAAE,CAACpwD,GAAH,CAAQ2tD,SAAR,CAAX;AACA,YAAM4C,EAAE,GAAG9f,EAAE,CAACzwC,GAAH,CAAQ2tD,SAAR,CAAX;AACA,YAAM6C,EAAE,GAAG9f,EAAE,CAAC1wC,GAAH,CAAQ2tD,SAAR,CAAX,CARsD,CAStD;;AACA,YAAK7yD,IAAI,CAACmE,GAAL,CAAU,CAAEnE,IAAI,CAACmE,GAAL,CAAUqxD,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,CAAZ,EAAoC11D,IAAI,CAACkE,GAAL,CAAUsxD,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,CAApC,IAA+Dx9C,CAApE,EAAwE;AAEvE;AACA;AACA,iBAAO,KAAP;AAEA;AAED;;AAED,aAAO,IAAP;AAEA;;AAED,QAAMy9C,MAAM,GAAG,IAAIxD,IAAJ,EAAf;;AAEA,aAASyD,MAAT,CAAiBjyB,MAAjB,EAAyBr/B,MAAzB,EAAkC;AAEjC,WAAKq/B,MAAL,GAAgBA,MAAM,KAAK9tC,SAAb,GAA2B8tC,MAA3B,GAAoC,IAAI4f,OAAJ,EAAlD;AACA,WAAKj/C,MAAL,GAAgBA,MAAM,KAAKzO,SAAb,GAA2ByO,MAA3B,GAAoC,CAAE,CAApD;AAEA;;AAEDtb,UAAM,CAACiiC,MAAP,CAAe2qC,MAAM,CAACj3D,SAAtB,EAAiC;AAEhCmG,SAAG,EAAE,aAAW6+B,MAAX,EAAmBr/B,MAAnB,EAA4B;AAEhC,aAAKq/B,MAAL,CAAYhhC,IAAZ,CAAkBghC,MAAlB;AACA,aAAKr/B,MAAL,GAAcA,MAAd;AAEA,eAAO,IAAP;AAEA,OAT+B;AAWhC8uD,mBAAa,EAAE,uBAAW59C,MAAX,EAAmBqgD,cAAnB,EAAoC;AAElD,YAAMlyB,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKkyB,cAAc,KAAKhgE,SAAxB,EAAoC;AAEnC8tC,gBAAM,CAAChhC,IAAP,CAAakzD,cAAb;AAEA,SAJD,MAIO;AAENF,gBAAM,CAACvC,aAAP,CAAsB59C,MAAtB,EAA+BouB,SAA/B,CAA0CD,MAA1C;AAEA;;AAED,YAAImyB,WAAW,GAAG,CAAlB;;AAEA,aAAM,IAAIruE,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG99C,MAAM,CAAC1uB,MAA7B,EAAqCW,IAAC,GAAG6rE,EAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnDquE,qBAAW,GAAG91D,IAAI,CAACmE,GAAL,CAAU2xD,WAAV,EAAuBnyB,MAAM,CAAC3+B,iBAAP,CAA0BwQ,MAAM,CAAE/tB,IAAF,CAAhC,CAAvB,CAAd;AAEA;;AAED,aAAK6c,MAAL,GAActE,IAAI,CAACmK,IAAL,CAAW2rD,WAAX,CAAd;AAEA,eAAO,IAAP;AAEA,OArC+B;AAuChC/zD,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OA3C+B;AA6ChCA,UAAI,EAAE,cAAW8xD,MAAX,EAAoB;AAEzB,aAAK9wB,MAAL,CAAYhhC,IAAZ,CAAkB8xD,MAAM,CAAC9wB,MAAzB;AACA,aAAKr/B,MAAL,GAAcmwD,MAAM,CAACnwD,MAArB;AAEA,eAAO,IAAP;AAEA,OApD+B;AAsDhCuvD,aAAO,EAAE,mBAAY;AAEpB,eAAS,KAAKvvD,MAAL,GAAc,CAAvB;AAEA,OA1D+B;AA4DhC+uD,eAAS,EAAE,qBAAY;AAEtB,aAAK1vB,MAAL,CAAY7+B,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;AACA,aAAKR,MAAL,GAAc,CAAE,CAAhB;AAEA,eAAO,IAAP;AAEA,OAnE+B;AAqEhC8vD,mBAAa,EAAE,uBAAWv5B,KAAX,EAAmB;AAEjC,eAASA,KAAK,CAAC71B,iBAAN,CAAyB,KAAK2+B,MAA9B,KAA4C,KAAKr/B,MAAL,GAAc,KAAKA,MAAxE;AAEA,OAzE+B;AA2EhC4wD,qBAAe,EAAE,yBAAWr6B,KAAX,EAAmB;AAEnC,eAASA,KAAK,CAACya,UAAN,CAAkB,KAAK3R,MAAvB,IAAkC,KAAKr/B,MAAhD;AAEA,OA/E+B;AAiFhCkwD,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC,YAAMsB,SAAS,GAAG,KAAKzxD,MAAL,GAAcmwD,MAAM,CAACnwD,MAAvC;AAEA,eAAOmwD,MAAM,CAAC9wB,MAAP,CAAc3+B,iBAAd,CAAiC,KAAK2+B,MAAtC,KAAoDoyB,SAAS,GAAGA,SAAvE;AAEA,OAvF+B;AAyFhCxB,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B,eAAOA,GAAG,CAACY,gBAAJ,CAAsB,IAAtB,CAAP;AAEA,OA7F+B;AA+FhCG,qBAAe,EAAE,yBAAWC,KAAX,EAAmB;AAEnC,eAAO50D,IAAI,CAAC4nB,GAAL,CAAUgtC,KAAK,CAACM,eAAN,CAAuB,KAAKvxB,MAA5B,CAAV,KAAoD,KAAKr/B,MAAhE;AAEA,OAnG+B;AAqGhCowD,gBAAU,EAAE,oBAAW75B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAEtC,YAAM0kE,aAAa,GAAG,KAAKryB,MAAL,CAAY3+B,iBAAZ,CAA+B61B,KAA/B,CAAtB;;AAEA,YAAKvpC,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,oDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAEDjyD,cAAM,CAACqR,IAAP,CAAak4B,KAAb;;AAEA,YAAKm7B,aAAa,GAAK,KAAK1xD,MAAL,GAAc,KAAKA,MAA1C,EAAqD;AAEpDhT,gBAAM,CAACsS,GAAP,CAAY,KAAK+/B,MAAjB,EAA0ByR,SAA1B;AACA9jD,gBAAM,CAACuT,cAAP,CAAuB,KAAKP,MAA5B,EAAqCI,GAArC,CAA0C,KAAKi/B,MAA/C;AAEA;;AAED,eAAOryC,MAAP;AAEA,OA3H+B;AA6HhC2kE,oBAAc,EAAE,wBAAW3kE,MAAX,EAAoB;AAEnC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACAjO,gBAAM,GAAG,IAAI6gE,IAAJ,EAAT;AAEA;;AAED,YAAK,KAAK0B,OAAL,EAAL,EAAsB;AAErB;AACAviE,gBAAM,CAAC+hE,SAAP;AACA,iBAAO/hE,MAAP;AAEA;;AAEDA,cAAM,CAACwT,GAAP,CAAY,KAAK6+B,MAAjB,EAAyB,KAAKA,MAA9B;AACAryC,cAAM,CAAC0iE,cAAP,CAAuB,KAAK1vD,MAA5B;AAEA,eAAOhT,MAAP;AAEA,OAnJ+B;AAqJhC6rD,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC,aAAKy7B,MAAL,CAAYwZ,YAAZ,CAA0Bj1C,MAA1B;AACA,aAAK5D,MAAL,GAAc,KAAKA,MAAL,GAAc4D,MAAM,CAACghD,iBAAP,EAA5B;AAEA,eAAO,IAAP;AAEA,OA5J+B;AA8JhC9O,eAAS,EAAE,mBAAWj3C,MAAX,EAAoB;AAE9B,aAAKwgC,MAAL,CAAYj/B,GAAZ,CAAiBvB,MAAjB;AAEA,eAAO,IAAP;AAEA,OApK+B;AAsKhC0yC,YAAM,EAAE,gBAAW4e,MAAX,EAAoB;AAE3B,eAAOA,MAAM,CAAC9wB,MAAP,CAAckS,MAAd,CAAsB,KAAKlS,MAA3B,KAAyC8wB,MAAM,CAACnwD,MAAP,KAAkB,KAAKA,MAAvE;AAEA;AA1K+B,KAAjC;;AA8KA,QAAM4xD,SAAS,GAAG,IAAI3S,OAAJ,EAAlB;;AACA,QAAM4S,UAAU,GAAG,IAAI5S,OAAJ,EAAnB;;AACA,QAAM6S,OAAO,GAAG,IAAI7S,OAAJ,EAAhB;;AACA,QAAM8S,KAAK,GAAG,IAAI9S,OAAJ,EAAd;;AAEA,QAAM+S,MAAM,GAAG,IAAI/S,OAAJ,EAAf;;AACA,QAAMgT,MAAM,GAAG,IAAIhT,OAAJ,EAAf;;AACA,QAAMiT,OAAO,GAAG,IAAIjT,OAAJ,EAAhB;;AAEA,aAASkT,GAAT,CAAcC,MAAd,EAAsBC,SAAtB,EAAkC;AAEjC,WAAKD,MAAL,GAAgBA,MAAM,KAAK7gE,SAAb,GAA2B6gE,MAA3B,GAAoC,IAAInT,OAAJ,EAAlD;AACA,WAAKoT,SAAL,GAAmBA,SAAS,KAAK9gE,SAAhB,GAA8B8gE,SAA9B,GAA0C,IAAIpT,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAA3D;AAEA;;AAEDv6D,UAAM,CAACiiC,MAAP,CAAewrC,GAAG,CAAC93D,SAAnB,EAA8B;AAE7BmG,SAAG,EAAE,aAAW4xD,MAAX,EAAmBC,SAAnB,EAA+B;AAEnC,aAAKD,MAAL,CAAY/zD,IAAZ,CAAkB+zD,MAAlB;AACA,aAAKC,SAAL,CAAeh0D,IAAf,CAAqBg0D,SAArB;AAEA,eAAO,IAAP;AAEA,OAT4B;AAW7B50D,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAf4B;AAiB7BA,UAAI,EAAE,cAAWi0D,GAAX,EAAiB;AAEtB,aAAKF,MAAL,CAAY/zD,IAAZ,CAAkBi0D,GAAG,CAACF,MAAtB;AACA,aAAKC,SAAL,CAAeh0D,IAAf,CAAqBi0D,GAAG,CAACD,SAAzB;AAEA,eAAO,IAAP;AAEA,OAxB4B;AA0B7BE,QAAE,EAAE,YAAWrpD,CAAX,EAAclc,MAAd,EAAuB;AAE1B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,yCAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAACqR,IAAP,CAAa,KAAKg0D,SAAlB,EAA8B9xD,cAA9B,CAA8C2I,CAA9C,EAAkD9I,GAAlD,CAAuD,KAAKgyD,MAA5D,CAAP;AAEA,OArC4B;AAuC7B9xD,YAAM,EAAE,gBAAWuC,CAAX,EAAe;AAEtB,aAAKwvD,SAAL,CAAeh0D,IAAf,CAAqBwE,CAArB,EAAyBvD,GAAzB,CAA8B,KAAK8yD,MAAnC,EAA4CthB,SAA5C;AAEA,eAAO,IAAP;AAEA,OA7C4B;AA+C7B0hB,YAAM,EAAE,gBAAWtpD,CAAX,EAAe;AAEtB,aAAKkpD,MAAL,CAAY/zD,IAAZ,CAAkB,KAAKk0D,EAAL,CAASrpD,CAAT,EAAY0oD,SAAZ,CAAlB;AAEA,eAAO,IAAP;AAEA,OArD4B;AAuD7Ba,yBAAmB,EAAE,6BAAWl8B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAE/C,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAEDjyD,cAAM,CAAC4X,UAAP,CAAmB2xB,KAAnB,EAA0B,KAAK67B,MAA/B;AAEA,YAAMM,iBAAiB,GAAG1lE,MAAM,CAAC4T,GAAP,CAAY,KAAKyxD,SAAjB,CAA1B;;AAEA,YAAKK,iBAAiB,GAAG,CAAzB,EAA6B;AAE5B,iBAAO1lE,MAAM,CAACqR,IAAP,CAAa,KAAK+zD,MAAlB,CAAP;AAEA;;AAED,eAAOplE,MAAM,CAACqR,IAAP,CAAa,KAAKg0D,SAAlB,EAA8B9xD,cAA9B,CAA8CmyD,iBAA9C,EAAkEtyD,GAAlE,CAAuE,KAAKgyD,MAA5E,CAAP;AAEA,OA5E4B;AA8E7BxB,qBAAe,EAAE,yBAAWr6B,KAAX,EAAmB;AAEnC,eAAO76B,IAAI,CAACmK,IAAL,CAAW,KAAK8sD,iBAAL,CAAwBp8B,KAAxB,CAAX,CAAP;AAEA,OAlF4B;AAoF7Bo8B,uBAAiB,EAAE,2BAAWp8B,KAAX,EAAmB;AAErC,YAAMm8B,iBAAiB,GAAGd,SAAS,CAAChtD,UAAV,CAAsB2xB,KAAtB,EAA6B,KAAK67B,MAAlC,EAA2CxxD,GAA3C,CAAgD,KAAKyxD,SAArD,CAA1B,CAFqC,CAIrC;;;AAEA,YAAKK,iBAAiB,GAAG,CAAzB,EAA6B;AAE5B,iBAAO,KAAKN,MAAL,CAAY1xD,iBAAZ,CAA+B61B,KAA/B,CAAP;AAEA;;AAEDq7B,iBAAS,CAACvzD,IAAV,CAAgB,KAAKg0D,SAArB,EAAiC9xD,cAAjC,CAAiDmyD,iBAAjD,EAAqEtyD,GAArE,CAA0E,KAAKgyD,MAA/E;;AAEA,eAAOR,SAAS,CAAClxD,iBAAV,CAA6B61B,KAA7B,CAAP;AAEA,OApG4B;AAsG7Bq8B,yBAAmB,EAAE,6BAAW5B,EAAX,EAAe3f,EAAf,EAAmBwhB,kBAAnB,EAAuCC,sBAAvC,EAAgE;AAEpF;AACA;AACA;AACA;AACA;AACA;AAEAjB,kBAAU,CAACxzD,IAAX,CAAiB2yD,EAAjB,EAAsB5wD,GAAtB,CAA2BixC,EAA3B,EAAgC9wC,cAAhC,CAAgD,GAAhD;;AACAuxD,eAAO,CAACzzD,IAAR,CAAcgzC,EAAd,EAAmB/xC,GAAnB,CAAwB0xD,EAAxB,EAA6BlgB,SAA7B;;AACAihB,aAAK,CAAC1zD,IAAN,CAAY,KAAK+zD,MAAjB,EAA0B9yD,GAA1B,CAA+BuyD,UAA/B;;AAEA,YAAMkB,SAAS,GAAG/B,EAAE,CAAChgB,UAAH,CAAeK,EAAf,IAAsB,GAAxC;AACA,YAAM2hB,GAAG,GAAG,CAAE,KAAKX,SAAL,CAAezxD,GAAf,CAAoBkxD,OAApB,CAAd;;AACA,YAAMmB,EAAE,GAAGlB,KAAK,CAACnxD,GAAN,CAAW,KAAKyxD,SAAhB,CAAX;;AACA,YAAMjlB,EAAE,GAAG,CAAE2kB,KAAK,CAACnxD,GAAN,CAAWkxD,OAAX,CAAb;;AACA,YAAM/9C,CAAC,GAAGg+C,KAAK,CAACnhB,QAAN,EAAV;;AACA,YAAMmE,GAAG,GAAGr5C,IAAI,CAAC4nB,GAAL,CAAU,IAAI0vC,GAAG,GAAGA,GAApB,CAAZ;AACA,YAAIE,EAAJ,EAAQ/V,EAAR,EAAYgW,OAAZ,EAAqBC,MAArB;;AAEA,YAAKre,GAAG,GAAG,CAAX,EAAe;AAEd;AAEAme,YAAE,GAAGF,GAAG,GAAG5lB,EAAN,GAAW6lB,EAAhB;AACA9V,YAAE,GAAG6V,GAAG,GAAGC,EAAN,GAAW7lB,EAAhB;AACAgmB,gBAAM,GAAGL,SAAS,GAAGhe,GAArB;;AAEA,cAAKme,EAAE,IAAI,CAAX,EAAe;AAEd,gBAAK/V,EAAE,IAAI,CAAEiW,MAAb,EAAsB;AAErB,kBAAKjW,EAAE,IAAIiW,MAAX,EAAoB;AAEnB;AACA;AAEA,oBAAMC,MAAM,GAAG,IAAIte,GAAnB;AACAme,kBAAE,IAAIG,MAAN;AACAlW,kBAAE,IAAIkW,MAAN;AACAF,uBAAO,GAAGD,EAAE,IAAKA,EAAE,GAAGF,GAAG,GAAG7V,EAAX,GAAgB,IAAI8V,EAAzB,CAAF,GAAkC9V,EAAE,IAAK6V,GAAG,GAAGE,EAAN,GAAW/V,EAAX,GAAgB,IAAI/P,EAAzB,CAApC,GAAoEr5B,CAA9E;AAEA,eAVD,MAUO;AAEN;AAEAopC,kBAAE,GAAG4V,SAAL;AACAG,kBAAE,GAAGx3D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,EAAImzD,GAAG,GAAG7V,EAAN,GAAW8V,EAAf,CAAb,CAAL;AACAE,uBAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY/V,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAd,GAAmCr5B,CAA7C;AAEA;AAED,aAtBD,MAsBO;AAEN;AAEAopC,gBAAE,GAAG,CAAE4V,SAAP;AACAG,gBAAE,GAAGx3D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,EAAImzD,GAAG,GAAG7V,EAAN,GAAW8V,EAAf,CAAb,CAAL;AACAE,qBAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY/V,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAd,GAAmCr5B,CAA7C;AAEA;AAED,WAlCD,MAkCO;AAEN,gBAAKopC,EAAE,IAAI,CAAEiW,MAAb,EAAsB;AAErB;AAEAF,gBAAE,GAAGx3D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,EAAI,CAAEmzD,GAAF,GAAQD,SAAR,GAAoBE,EAAxB,CAAb,CAAL;AACA9V,gBAAE,GAAK+V,EAAE,GAAG,CAAP,GAAa,CAAEH,SAAf,GAA2Br3D,IAAI,CAACkE,GAAL,CAAUlE,IAAI,CAACmE,GAAL,CAAU,CAAEkzD,SAAZ,EAAuB,CAAE3lB,EAAzB,CAAV,EAAyC2lB,SAAzC,CAAhC;AACAI,qBAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY/V,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAd,GAAmCr5B,CAA7C;AAEA,aARD,MAQO,IAAKopC,EAAE,IAAIiW,MAAX,EAAoB;AAE1B;AAEAF,gBAAE,GAAG,CAAL;AACA/V,gBAAE,GAAGzhD,IAAI,CAACkE,GAAL,CAAUlE,IAAI,CAACmE,GAAL,CAAU,CAAEkzD,SAAZ,EAAuB,CAAE3lB,EAAzB,CAAV,EAAyC2lB,SAAzC,CAAL;AACAI,qBAAO,GAAGhW,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAF,GAAuBr5B,CAAjC;AAEA,aARM,MAQA;AAEN;AAEAm/C,gBAAE,GAAGx3D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,EAAImzD,GAAG,GAAGD,SAAN,GAAkBE,EAAtB,CAAb,CAAL;AACA9V,gBAAE,GAAK+V,EAAE,GAAG,CAAP,GAAaH,SAAb,GAAyBr3D,IAAI,CAACkE,GAAL,CAAUlE,IAAI,CAACmE,GAAL,CAAU,CAAEkzD,SAAZ,EAAuB,CAAE3lB,EAAzB,CAAV,EAAyC2lB,SAAzC,CAA9B;AACAI,qBAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY/V,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAd,GAAmCr5B,CAA7C;AAEA;AAED;AAED,SAxED,MAwEO;AAEN;AAEAopC,YAAE,GAAK6V,GAAG,GAAG,CAAR,GAAc,CAAED,SAAhB,GAA4BA,SAAjC;AACAG,YAAE,GAAGx3D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,EAAImzD,GAAG,GAAG7V,EAAN,GAAW8V,EAAf,CAAb,CAAL;AACAE,iBAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY/V,EAAE,IAAKA,EAAE,GAAG,IAAI/P,EAAd,CAAd,GAAmCr5B,CAA7C;AAEA;;AAED,YAAK8+C,kBAAL,EAA0B;AAEzBA,4BAAkB,CAACx0D,IAAnB,CAAyB,KAAKg0D,SAA9B,EAA0C9xD,cAA1C,CAA0D2yD,EAA1D,EAA+D9yD,GAA/D,CAAoE,KAAKgyD,MAAzE;AAEA;;AAED,YAAKU,sBAAL,EAA8B;AAE7BA,gCAAsB,CAACz0D,IAAvB,CAA6ByzD,OAA7B,EAAuCvxD,cAAvC,CAAuD48C,EAAvD,EAA4D/8C,GAA5D,CAAiEyxD,UAAjE;AAEA;;AAED,eAAOsB,OAAP;AAEA,OA3N4B;AA6N7BG,qBAAe,EAAE,yBAAWnD,MAAX,EAAmBnjE,MAAnB,EAA4B;AAE5C4kE,iBAAS,CAAChtD,UAAV,CAAsBurD,MAAM,CAAC9wB,MAA7B,EAAqC,KAAK+yB,MAA1C;;AACA,YAAMmB,GAAG,GAAG3B,SAAS,CAAChxD,GAAV,CAAe,KAAKyxD,SAApB,CAAZ;;AACA,YAAMzlB,EAAE,GAAGglB,SAAS,CAAChxD,GAAV,CAAegxD,SAAf,IAA6B2B,GAAG,GAAGA,GAA9C;AACA,YAAMC,OAAO,GAAGrD,MAAM,CAACnwD,MAAP,GAAgBmwD,MAAM,CAACnwD,MAAvC;AAEA,YAAK4sC,EAAE,GAAG4mB,OAAV,EAAoB,OAAO,IAAP;AAEpB,YAAMC,GAAG,GAAG/3D,IAAI,CAACmK,IAAL,CAAW2tD,OAAO,GAAG5mB,EAArB,CAAZ,CAT4C,CAW5C;;AACA,YAAM8mB,EAAE,GAAGH,GAAG,GAAGE,GAAjB,CAZ4C,CAc5C;;AACA,YAAME,EAAE,GAAGJ,GAAG,GAAGE,GAAjB,CAf4C,CAiB5C;;AACA,YAAKC,EAAE,GAAG,CAAL,IAAUC,EAAE,GAAG,CAApB,EAAwB,OAAO,IAAP,CAlBoB,CAoB5C;AACA;AACA;;AACA,YAAKD,EAAE,GAAG,CAAV,EAAc,OAAO,KAAKnB,EAAL,CAASoB,EAAT,EAAa3mE,MAAb,CAAP,CAvB8B,CAyB5C;;AACA,eAAO,KAAKulE,EAAL,CAASmB,EAAT,EAAa1mE,MAAb,CAAP;AAEA,OAzP4B;AA2P7BkjE,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC,eAAO,KAAKwC,iBAAL,CAAwBxC,MAAM,CAAC9wB,MAA/B,KAA6C8wB,MAAM,CAACnwD,MAAP,GAAgBmwD,MAAM,CAACnwD,MAA3E;AAEA,OA/P4B;AAiQ7B4zD,qBAAe,EAAE,yBAAWtD,KAAX,EAAmB;AAEnC,YAAMxP,WAAW,GAAGwP,KAAK,CAACpP,MAAN,CAAatgD,GAAb,CAAkB,KAAKyxD,SAAvB,CAApB;;AAEA,YAAKvR,WAAW,KAAK,CAArB,EAAyB;AAExB;AACA,cAAKwP,KAAK,CAACM,eAAN,CAAuB,KAAKwB,MAA5B,MAAyC,CAA9C,EAAkD;AAEjD,mBAAO,CAAP;AAEA,WAPuB,CASxB;;;AAEA,iBAAO,IAAP;AAEA;;AAED,YAAMlpD,CAAC,GAAG,EAAI,KAAKkpD,MAAL,CAAYxxD,GAAZ,CAAiB0vD,KAAK,CAACpP,MAAvB,IAAkCoP,KAAK,CAACC,QAA5C,IAAyDzP,WAAnE,CAnBmC,CAqBnC;;AAEA,eAAO53C,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,IAApB;AAEA,OA1R4B;AA4R7B2qD,oBAAc,EAAE,wBAAWvD,KAAX,EAAkBtjE,MAAlB,EAA2B;AAE1C,YAAMkc,CAAC,GAAG,KAAK0qD,eAAL,CAAsBtD,KAAtB,CAAV;;AAEA,YAAKpnD,CAAC,KAAK,IAAX,EAAkB;AAEjB,iBAAO,IAAP;AAEA;;AAED,eAAO,KAAKqpD,EAAL,CAASrpD,CAAT,EAAYlc,MAAZ,CAAP;AAEA,OAxS4B;AA0S7BqjE,qBAAe,EAAE,yBAAWC,KAAX,EAAmB;AAEnC;AAEA,YAAMwD,WAAW,GAAGxD,KAAK,CAACM,eAAN,CAAuB,KAAKwB,MAA5B,CAApB;;AAEA,YAAK0B,WAAW,KAAK,CAArB,EAAyB;AAExB,iBAAO,IAAP;AAEA;;AAED,YAAMhT,WAAW,GAAGwP,KAAK,CAACpP,MAAN,CAAatgD,GAAb,CAAkB,KAAKyxD,SAAvB,CAApB;;AAEA,YAAKvR,WAAW,GAAGgT,WAAd,GAA4B,CAAjC,EAAqC;AAEpC,iBAAO,IAAP;AAEA,SAlBkC,CAoBnC;;;AAEA,eAAO,KAAP;AAEA,OAlU4B;AAoU7BC,kBAAY,EAAE,sBAAWzE,GAAX,EAAgBtiE,MAAhB,EAAyB;AAEtC,YAAIgnE,IAAJ,EAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,KAAvB,EAA8BC,KAA9B,EAAqCC,KAArC;AAEA,YAAMC,OAAO,GAAG,IAAI,KAAKjC,SAAL,CAAevkE,CAAnC;AAAA,YACCymE,OAAO,GAAG,IAAI,KAAKlC,SAAL,CAAextD,CAD9B;AAAA,YAEC2vD,OAAO,GAAG,IAAI,KAAKnC,SAAL,CAAejiD,CAF9B;AAIA,YAAMgiD,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKkC,OAAO,IAAI,CAAhB,EAAoB;AAEnBN,cAAI,GAAG,CAAE1E,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAR,GAAYskE,MAAM,CAACtkE,CAArB,IAA2BwmE,OAAlC;AACAL,cAAI,GAAG,CAAE3E,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,GAAYskE,MAAM,CAACtkE,CAArB,IAA2BwmE,OAAlC;AAEA,SALD,MAKO;AAENN,cAAI,GAAG,CAAE1E,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,GAAYskE,MAAM,CAACtkE,CAArB,IAA2BwmE,OAAlC;AACAL,cAAI,GAAG,CAAE3E,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAR,GAAYskE,MAAM,CAACtkE,CAArB,IAA2BwmE,OAAlC;AAEA;;AAED,YAAKC,OAAO,IAAI,CAAhB,EAAoB;AAEnBL,eAAK,GAAG,CAAE5E,GAAG,CAAC1vD,GAAJ,CAAQiF,CAAR,GAAYutD,MAAM,CAACvtD,CAArB,IAA2B0vD,OAAnC;AACAJ,eAAK,GAAG,CAAE7E,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,GAAYutD,MAAM,CAACvtD,CAArB,IAA2B0vD,OAAnC;AAEA,SALD,MAKO;AAENL,eAAK,GAAG,CAAE5E,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,GAAYutD,MAAM,CAACvtD,CAArB,IAA2B0vD,OAAnC;AACAJ,eAAK,GAAG,CAAE7E,GAAG,CAAC1vD,GAAJ,CAAQiF,CAAR,GAAYutD,MAAM,CAACvtD,CAArB,IAA2B0vD,OAAnC;AAEA;;AAED,YAAOP,IAAI,GAAGG,KAAT,IAAsBD,KAAK,GAAGD,IAAnC,EAA4C,OAAO,IAAP,CAlCN,CAoCtC;AACA;;AAEA,YAAKC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGE,KAAP;AAErC,YAAKC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGE,KAAP;;AAErC,YAAKK,OAAO,IAAI,CAAhB,EAAoB;AAEnBJ,eAAK,GAAG,CAAE9E,GAAG,CAAC1vD,GAAJ,CAAQwQ,CAAR,GAAYgiD,MAAM,CAAChiD,CAArB,IAA2BokD,OAAnC;AACAH,eAAK,GAAG,CAAE/E,GAAG,CAACzvD,GAAJ,CAAQuQ,CAAR,GAAYgiD,MAAM,CAAChiD,CAArB,IAA2BokD,OAAnC;AAEA,SALD,MAKO;AAENJ,eAAK,GAAG,CAAE9E,GAAG,CAACzvD,GAAJ,CAAQuQ,CAAR,GAAYgiD,MAAM,CAAChiD,CAArB,IAA2BokD,OAAnC;AACAH,eAAK,GAAG,CAAE/E,GAAG,CAAC1vD,GAAJ,CAAQwQ,CAAR,GAAYgiD,MAAM,CAAChiD,CAArB,IAA2BokD,OAAnC;AAEA;;AAED,YAAOR,IAAI,GAAGK,KAAT,IAAsBD,KAAK,GAAGH,IAAnC,EAA4C,OAAO,IAAP;AAE5C,YAAKG,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGI,KAAP;AAErC,YAAKC,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGI,KAAP,CA3DC,CA6DtC;;AAEA,YAAKJ,IAAI,GAAG,CAAZ,EAAgB,OAAO,IAAP;AAEhB,eAAO,KAAK1B,EAAL,CAASyB,IAAI,IAAI,CAAR,GAAYA,IAAZ,GAAmBC,IAA5B,EAAkCjnE,MAAlC,CAAP;AAEA,OAvY4B;AAyY7BijE,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B,eAAO,KAAKyE,YAAL,CAAmBzE,GAAnB,EAAwBsC,SAAxB,MAAwC,IAA/C;AAEA,OA7Y4B;AA+Y7B6C,uBAAiB,EAAE,2BAAW/xE,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoB2gD,eAApB,EAAqC1nE,MAArC,EAA8C;AAEhE;AAEA;AAEAglE,cAAM,CAACptD,UAAP,CAAmBjiB,CAAnB,EAAsBD,CAAtB;;AACAuvE,cAAM,CAACrtD,UAAP,CAAmBmP,CAAnB,EAAsBrxB,CAAtB;;AACAwvE,eAAO,CAAChvD,YAAR,CAAsB8uD,MAAtB,EAA8BC,MAA9B,EARgE,CAUhE;AACA;AACA;AACA;AACA;;;AACA,YAAI0C,GAAG,GAAG,KAAKtC,SAAL,CAAezxD,GAAf,CAAoBsxD,OAApB,CAAV;AACA,YAAIxyB,IAAJ;;AAEA,YAAKi1B,GAAG,GAAG,CAAX,EAAe;AAEd,cAAKD,eAAL,EAAuB,OAAO,IAAP;AACvBh1B,cAAI,GAAG,CAAP;AAEA,SALD,MAKO,IAAKi1B,GAAG,GAAG,CAAX,EAAe;AAErBj1B,cAAI,GAAG,CAAE,CAAT;AACAi1B,aAAG,GAAG,CAAEA,GAAR;AAEA,SALM,MAKA;AAEN,iBAAO,IAAP;AAEA;;AAED5C,aAAK,CAACntD,UAAN,CAAkB,KAAKwtD,MAAvB,EAA+B1vE,CAA/B;;AACA,YAAMkyE,MAAM,GAAGl1B,IAAI,GAAG,KAAK2yB,SAAL,CAAezxD,GAAf,CAAoBqxD,MAAM,CAAC/uD,YAAP,CAAqB6uD,KAArB,EAA4BE,MAA5B,CAApB,CAAtB,CAnCgE,CAqChE;;AACA,YAAK2C,MAAM,GAAG,CAAd,EAAkB;AAEjB,iBAAO,IAAP;AAEA;;AAED,YAAMC,MAAM,GAAGn1B,IAAI,GAAG,KAAK2yB,SAAL,CAAezxD,GAAf,CAAoBoxD,MAAM,CAACrhB,KAAP,CAAcohB,KAAd,CAApB,CAAtB,CA5CgE,CA8ChE;;AACA,YAAK8C,MAAM,GAAG,CAAd,EAAkB;AAEjB,iBAAO,IAAP;AAEA,SAnD+D,CAqDhE;;;AACA,YAAKD,MAAM,GAAGC,MAAT,GAAkBF,GAAvB,EAA6B;AAE5B,iBAAO,IAAP;AAEA,SA1D+D,CA4DhE;;;AACA,YAAMG,GAAG,GAAG,CAAEp1B,IAAF,GAASqyB,KAAK,CAACnxD,GAAN,CAAWsxD,OAAX,CAArB,CA7DgE,CA+DhE;;;AACA,YAAK4C,GAAG,GAAG,CAAX,EAAe;AAEd,iBAAO,IAAP;AAEA,SApE+D,CAsEhE;;;AACA,eAAO,KAAKvC,EAAL,CAASuC,GAAG,GAAGH,GAAf,EAAoB3nE,MAApB,CAAP;AAEA,OAxd4B;AA0d7B6rD,kBAAY,EAAE,sBAAWzD,OAAX,EAAqB;AAElC,aAAKgd,MAAL,CAAYvZ,YAAZ,CAA0BzD,OAA1B;AACA,aAAKid,SAAL,CAAe/R,kBAAf,CAAmClL,OAAnC;AAEA,eAAO,IAAP;AAEA,OAje4B;AAme7B7D,YAAM,EAAE,gBAAW+gB,GAAX,EAAiB;AAExB,eAAOA,GAAG,CAACF,MAAJ,CAAW7gB,MAAX,CAAmB,KAAK6gB,MAAxB,KAAoCE,GAAG,CAACD,SAAJ,CAAc9gB,MAAd,CAAsB,KAAK8gB,SAA3B,CAA3C;AAEA;AAve4B,KAA9B;;AA2eA,QAAM0C,QAAQ,GAAG,IAAI9V,OAAJ,EAAjB;;AACA,QAAM+V,QAAQ,GAAG,IAAI/V,OAAJ,EAAjB;;AACA,QAAMgW,aAAa,GAAG,IAAIljB,OAAJ,EAAtB;;AAEA,aAASmjB,KAAT,CAAgBhU,MAAhB,EAAwBqP,QAAxB,EAAmC;AAElC;AAEA,WAAKrP,MAAL,GAAgBA,MAAM,KAAK3vD,SAAb,GAA2B2vD,MAA3B,GAAoC,IAAIjC,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAlD;AACA,WAAKsR,QAAL,GAAkBA,QAAQ,KAAKh/D,SAAf,GAA6Bg/D,QAA7B,GAAwC,CAAxD;AAEA;;AAED7rE,UAAM,CAACiiC,MAAP,CAAeuuC,KAAK,CAAC76D,SAArB,EAAgC;AAE/B86D,aAAO,EAAE,IAFsB;AAI/B30D,SAAG,EAAE,aAAW0gD,MAAX,EAAmBqP,QAAnB,EAA8B;AAElC,aAAKrP,MAAL,CAAY7iD,IAAZ,CAAkB6iD,MAAlB;AACA,aAAKqP,QAAL,GAAgBA,QAAhB;AAEA,eAAO,IAAP;AAEA,OAX8B;AAa/B6E,mBAAa,EAAE,uBAAWtnE,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAoB4H,CAApB,EAAwB;AAEtC,aAAKkpC,MAAL,CAAY1gD,GAAZ,CAAiB1S,CAAjB,EAAoB+W,CAApB,EAAuBuL,CAAvB;AACA,aAAKmgD,QAAL,GAAgBv4C,CAAhB;AAEA,eAAO,IAAP;AAEA,OApB8B;AAsB/Bq9C,mCAA6B,EAAE,uCAAWnU,MAAX,EAAmB3qB,KAAnB,EAA2B;AAEzD,aAAK2qB,MAAL,CAAY7iD,IAAZ,CAAkB6iD,MAAlB;AACA,aAAKqP,QAAL,GAAgB,CAAEh6B,KAAK,CAAC31B,GAAN,CAAW,KAAKsgD,MAAhB,CAAlB;AAEA,eAAO,IAAP;AAEA,OA7B8B;AA+B/BoU,2BAAqB,EAAE,+BAAW5yE,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAqB;AAE3C,YAAMmtC,MAAM,GAAG6T,QAAQ,CAACnwD,UAAT,CAAqBmP,CAArB,EAAwBpxB,CAAxB,EAA4BguD,KAA5B,CAAmCqkB,QAAQ,CAACpwD,UAAT,CAAqBliB,CAArB,EAAwBC,CAAxB,CAAnC,EAAiEmuD,SAAjE,EAAf,CAF2C,CAI3C;;;AAEA,aAAKukB,6BAAL,CAAoCnU,MAApC,EAA4Cx+D,CAA5C;AAEA,eAAO,IAAP;AAEA,OAzC8B;AA2C/B+a,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OA/C8B;AAiD/BA,UAAI,EAAE,cAAWiyD,KAAX,EAAmB;AAExB,aAAKpP,MAAL,CAAY7iD,IAAZ,CAAkBiyD,KAAK,CAACpP,MAAxB;AACA,aAAKqP,QAAL,GAAgBD,KAAK,CAACC,QAAtB;AAEA,eAAO,IAAP;AAEA,OAxD8B;AA0D/Bzf,eAAS,EAAE,qBAAY;AAEtB;AAEA,YAAMykB,mBAAmB,GAAG,MAAM,KAAKrU,MAAL,CAAY1+D,MAAZ,EAAlC;AACA,aAAK0+D,MAAL,CAAY3gD,cAAZ,CAA4Bg1D,mBAA5B;AACA,aAAKhF,QAAL,IAAiBgF,mBAAjB;AAEA,eAAO,IAAP;AAEA,OApE8B;AAsE/B7kB,YAAM,EAAE,kBAAY;AAEnB,aAAK6f,QAAL,IAAiB,CAAE,CAAnB;AACA,aAAKrP,MAAL,CAAYxQ,MAAZ;AAEA,eAAO,IAAP;AAEA,OA7E8B;AA+E/BkgB,qBAAe,EAAE,yBAAWr6B,KAAX,EAAmB;AAEnC,eAAO,KAAK2qB,MAAL,CAAYtgD,GAAZ,CAAiB21B,KAAjB,IAA2B,KAAKg6B,QAAvC;AAEA,OAnF8B;AAqF/BiF,sBAAgB,EAAE,0BAAWrF,MAAX,EAAoB;AAErC,eAAO,KAAKS,eAAL,CAAsBT,MAAM,CAAC9wB,MAA7B,IAAwC8wB,MAAM,CAACnwD,MAAtD;AAEA,OAzF8B;AA2F/By1D,kBAAY,EAAE,sBAAWl/B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAExC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,qDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAACqR,IAAP,CAAa,KAAK6iD,MAAlB,EAA2B3gD,cAA3B,CAA2C,CAAE,KAAKqwD,eAAL,CAAsBr6B,KAAtB,CAA7C,EAA6En2B,GAA7E,CAAkFm2B,KAAlF,CAAP;AAEA,OAtG8B;AAwG/Bm/B,mBAAa,EAAE,uBAAWzkD,IAAX,EAAiBjkB,MAAjB,EAA0B;AAExC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,sDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,YAAMoT,SAAS,GAAGphD,IAAI,CAAC0kD,KAAL,CAAYZ,QAAZ,CAAlB;AAEA,YAAMjU,WAAW,GAAG,KAAKI,MAAL,CAAYtgD,GAAZ,CAAiByxD,SAAjB,CAApB;;AAEA,YAAKvR,WAAW,KAAK,CAArB,EAAyB;AAExB;AACA,cAAK,KAAK8P,eAAL,CAAsB3/C,IAAI,CAAC2kD,KAA3B,MAAuC,CAA5C,EAAgD;AAE/C,mBAAO5oE,MAAM,CAACqR,IAAP,CAAa4S,IAAI,CAAC2kD,KAAlB,CAAP;AAEA,WAPuB,CASxB;;;AACA,iBAAOrkE,SAAP;AAEA;;AAED,YAAM2X,CAAC,GAAG,EAAI+H,IAAI,CAAC2kD,KAAL,CAAWh1D,GAAX,CAAgB,KAAKsgD,MAArB,IAAgC,KAAKqP,QAAzC,IAAsDzP,WAAhE;;AAEA,YAAK53C,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAG,CAAlB,EAAsB;AAErB,iBAAO3X,SAAP;AAEA;;AAED,eAAOvE,MAAM,CAACqR,IAAP,CAAag0D,SAAb,EAAyB9xD,cAAzB,CAAyC2I,CAAzC,EAA6C9I,GAA7C,CAAkD6Q,IAAI,CAAC2kD,KAAvD,CAAP;AAEA,OA7I8B;AA+I/BC,oBAAc,EAAE,wBAAW5kD,IAAX,EAAkB;AAEjC;AAEA,YAAM6kD,SAAS,GAAG,KAAKlF,eAAL,CAAsB3/C,IAAI,CAAC2kD,KAA3B,CAAlB;AACA,YAAMG,OAAO,GAAG,KAAKnF,eAAL,CAAsB3/C,IAAI,CAACuJ,GAA3B,CAAhB;AAEA,eAASs7C,SAAS,GAAG,CAAZ,IAAiBC,OAAO,GAAG,CAA7B,IAAsCA,OAAO,GAAG,CAAV,IAAeD,SAAS,GAAG,CAAxE;AAEA,OAxJ8B;AA0J/B7F,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B,eAAOA,GAAG,CAACe,eAAJ,CAAqB,IAArB,CAAP;AAEA,OA9J8B;AAgK/BH,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC,eAAOA,MAAM,CAACE,eAAP,CAAwB,IAAxB,CAAP;AAEA,OApK8B;AAsK/B2F,mBAAa,EAAE,uBAAWhpE,MAAX,EAAoB;AAElC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,sDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAACqR,IAAP,CAAa,KAAK6iD,MAAlB,EAA2B3gD,cAA3B,CAA2C,CAAE,KAAKgwD,QAAlD,CAAP;AAEA,OAjL8B;AAmL/B1X,kBAAY,EAAE,sBAAWj1C,MAAX,EAAmBqyD,oBAAnB,EAA0C;AAEvD,YAAMlN,YAAY,GAAGkN,oBAAoB,IAAIhB,aAAa,CAAC9f,eAAd,CAA+BvxC,MAA/B,CAA7C;;AAEA,YAAMsyD,cAAc,GAAG,KAAKF,aAAL,CAAoBjB,QAApB,EAA+Blc,YAA/B,CAA6Cj1C,MAA7C,CAAvB;AAEA,YAAMs9C,MAAM,GAAG,KAAKA,MAAL,CAAYhR,YAAZ,CAA0B6Y,YAA1B,EAAyCjY,SAAzC,EAAf;AAEA,aAAKyf,QAAL,GAAgB,CAAE2F,cAAc,CAACt1D,GAAf,CAAoBsgD,MAApB,CAAlB;AAEA,eAAO,IAAP;AAEA,OA/L8B;AAiM/BpL,eAAS,EAAE,mBAAWj3C,MAAX,EAAoB;AAE9B,aAAK0xD,QAAL,IAAiB1xD,MAAM,CAAC+B,GAAP,CAAY,KAAKsgD,MAAjB,CAAjB;AAEA,eAAO,IAAP;AAEA,OAvM8B;AAyM/B3P,YAAM,EAAE,gBAAW+e,KAAX,EAAmB;AAE1B,eAAOA,KAAK,CAACpP,MAAN,CAAa3P,MAAb,CAAqB,KAAK2P,MAA1B,KAAwCoP,KAAK,CAACC,QAAN,KAAmB,KAAKA,QAAvE;AAEA;AA7M8B,KAAhC;;AAiNA,QAAM4F,KAAK,GAAG,IAAIlX,OAAJ,EAAd;;AACA,QAAMmX,KAAK,GAAG,IAAInX,OAAJ,EAAd;;AACA,QAAMoX,KAAK,GAAG,IAAIpX,OAAJ,EAAd;;AACA,QAAMqX,GAAG,GAAG,IAAIrX,OAAJ,EAAZ;;AAEA,QAAMsX,IAAI,GAAG,IAAItX,OAAJ,EAAb;;AACA,QAAMuX,IAAI,GAAG,IAAIvX,OAAJ,EAAb;;AACA,QAAMwX,IAAI,GAAG,IAAIxX,OAAJ,EAAb;;AACA,QAAMyX,IAAI,GAAG,IAAIzX,OAAJ,EAAb;;AACA,QAAM0X,IAAI,GAAG,IAAI1X,OAAJ,EAAb;;AACA,QAAM2X,IAAI,GAAG,IAAI3X,OAAJ,EAAb;;AAEA,aAAS4X,QAAT,CAAmBn0E,CAAnB,EAAsBC,CAAtB,EAAyBoxB,CAAzB,EAA6B;AAE5B,WAAKrxB,CAAL,GAAWA,CAAC,KAAK6O,SAAR,GAAsB7O,CAAtB,GAA0B,IAAIu8D,OAAJ,EAAnC;AACA,WAAKt8D,CAAL,GAAWA,CAAC,KAAK4O,SAAR,GAAsB5O,CAAtB,GAA0B,IAAIs8D,OAAJ,EAAnC;AACA,WAAKlrC,CAAL,GAAWA,CAAC,KAAKxiB,SAAR,GAAsBwiB,CAAtB,GAA0B,IAAIkrC,OAAJ,EAAnC;AAEA;;AAEDv6D,UAAM,CAACiiC,MAAP,CAAekwC,QAAf,EAAyB;AAExBC,eAAS,EAAE,mBAAWp0E,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoB/mB,MAApB,EAA6B;AAEvC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,qDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAEDjyD,cAAM,CAAC4X,UAAP,CAAmBmP,CAAnB,EAAsBpxB,CAAtB;;AACAwzE,aAAK,CAACvxD,UAAN,CAAkBliB,CAAlB,EAAqBC,CAArB;;AACAqK,cAAM,CAAC2jD,KAAP,CAAcwlB,KAAd;AAEA,YAAMY,cAAc,GAAG/pE,MAAM,CAAC4jD,QAAP,EAAvB;;AACA,YAAKmmB,cAAc,GAAG,CAAtB,EAA0B;AAEzB,iBAAO/pE,MAAM,CAACuT,cAAP,CAAuB,IAAI7E,IAAI,CAACmK,IAAL,CAAWkxD,cAAX,CAA3B,CAAP;AAEA;;AAED,eAAO/pE,MAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAP;AAEA,OAxBuB;AA0BxB;AACA;AACAw2D,kBAAY,EAAE,sBAAWzgC,KAAX,EAAkB7zC,CAAlB,EAAqBC,CAArB,EAAwBoxB,CAAxB,EAA2B/mB,MAA3B,EAAoC;AAEjDmpE,aAAK,CAACvxD,UAAN,CAAkBmP,CAAlB,EAAqBrxB,CAArB;;AACA0zE,aAAK,CAACxxD,UAAN,CAAkBjiB,CAAlB,EAAqBD,CAArB;;AACA2zE,aAAK,CAACzxD,UAAN,CAAkB2xB,KAAlB,EAAyB7zC,CAAzB;;AAEA,YAAMu0E,KAAK,GAAGd,KAAK,CAACv1D,GAAN,CAAWu1D,KAAX,CAAd;;AACA,YAAMe,KAAK,GAAGf,KAAK,CAACv1D,GAAN,CAAWw1D,KAAX,CAAd;;AACA,YAAMe,KAAK,GAAGhB,KAAK,CAACv1D,GAAN,CAAWy1D,KAAX,CAAd;;AACA,YAAMe,KAAK,GAAGhB,KAAK,CAACx1D,GAAN,CAAWw1D,KAAX,CAAd;;AACA,YAAMiB,KAAK,GAAGjB,KAAK,CAACx1D,GAAN,CAAWy1D,KAAX,CAAd;;AAEA,YAAMiB,KAAK,GAAKL,KAAK,GAAGG,KAAR,GAAgBF,KAAK,GAAGA,KAAxC;;AAEA,YAAKlqE,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA,SAnBgD,CAqBjD;;;AACA,YAAKqY,KAAK,KAAK,CAAf,EAAmB;AAElB;AACA;AACA,iBAAOtqE,MAAM,CAACwT,GAAP,CAAY,CAAE,CAAd,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,CAAP;AAEA;;AAED,YAAM+2D,QAAQ,GAAG,IAAID,KAArB;AACA,YAAM3jD,CAAC,GAAG,CAAEyjD,KAAK,GAAGD,KAAR,GAAgBD,KAAK,GAAGG,KAA1B,IAAoCE,QAA9C;AACA,YAAM10D,CAAC,GAAG,CAAEo0D,KAAK,GAAGI,KAAR,GAAgBH,KAAK,GAAGC,KAA1B,IAAoCI,QAA9C,CAhCiD,CAkCjD;;AACA,eAAOvqE,MAAM,CAACwT,GAAP,CAAY,IAAImT,CAAJ,GAAQ9Q,CAApB,EAAuBA,CAAvB,EAA0B8Q,CAA1B,CAAP;AAEA,OAjEuB;AAmExBm8C,mBAAa,EAAE,uBAAWv5B,KAAX,EAAkB7zC,CAAlB,EAAqBC,CAArB,EAAwBoxB,CAAxB,EAA4B;AAE1C8iD,gBAAQ,CAACG,YAAT,CAAuBzgC,KAAvB,EAA8B7zC,CAA9B,EAAiCC,CAAjC,EAAoCoxB,CAApC,EAAuCuiD,GAAvC;AAEA,eAASA,GAAG,CAACxoE,CAAJ,IAAS,CAAX,IAAoBwoE,GAAG,CAACzxD,CAAJ,IAAS,CAA7B,IAAwCyxD,GAAG,CAACxoE,CAAJ,GAAQwoE,GAAG,CAACzxD,CAAd,IAAqB,CAAlE;AAEA,OAzEuB;AA2ExB2yD,WAAK,EAAE,eAAWjhC,KAAX,EAAkB46B,EAAlB,EAAsBC,EAAtB,EAA0BqG,EAA1B,EAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,GAAxC,EAA6C5qE,MAA7C,EAAsD;AAE5D,aAAKgqE,YAAL,CAAmBzgC,KAAnB,EAA0B46B,EAA1B,EAA8BC,EAA9B,EAAkCqG,EAAlC,EAAsCnB,GAAtC;AAEAtpE,cAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf;AACAxT,cAAM,CAACkT,eAAP,CAAwBw3D,GAAxB,EAA6BpB,GAAG,CAACxoE,CAAjC;AACAd,cAAM,CAACkT,eAAP,CAAwBy3D,GAAxB,EAA6BrB,GAAG,CAACzxD,CAAjC;AACA7X,cAAM,CAACkT,eAAP,CAAwB03D,GAAxB,EAA6BtB,GAAG,CAAClmD,CAAjC;AAEA,eAAOpjB,MAAP;AAEA,OAtFuB;AAwFxB6qE,mBAAa,EAAE,uBAAWn1E,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoBs+C,SAApB,EAAgC;AAE9C8D,aAAK,CAACvxD,UAAN,CAAkBmP,CAAlB,EAAqBpxB,CAArB;;AACAyzE,aAAK,CAACxxD,UAAN,CAAkBliB,CAAlB,EAAqBC,CAArB,EAH8C,CAK9C;;;AACA,eAASwzE,KAAK,CAACxlB,KAAN,CAAaylB,KAAb,EAAqBx1D,GAArB,CAA0ByxD,SAA1B,IAAwC,CAA1C,GAAgD,IAAhD,GAAuD,KAA9D;AAEA;AAhGuB,KAAzB;AAoGA3tE,UAAM,CAACiiC,MAAP,CAAekwC,QAAQ,CAACx8D,SAAxB,EAAmC;AAElCmG,SAAG,EAAE,aAAW9d,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAqB;AAEzB,aAAKrxB,CAAL,CAAO2b,IAAP,CAAa3b,CAAb;AACA,aAAKC,CAAL,CAAO0b,IAAP,CAAa1b,CAAb;AACA,aAAKoxB,CAAL,CAAO1V,IAAP,CAAa0V,CAAb;AAEA,eAAO,IAAP;AAEA,OAViC;AAYlC+jD,6BAAuB,EAAE,iCAAW5mD,MAAX,EAAmB6mD,EAAnB,EAAuBC,EAAvB,EAA2BC,EAA3B,EAAgC;AAExD,aAAKv1E,CAAL,CAAO2b,IAAP,CAAa6S,MAAM,CAAE6mD,EAAF,CAAnB;AACA,aAAKp1E,CAAL,CAAO0b,IAAP,CAAa6S,MAAM,CAAE8mD,EAAF,CAAnB;AACA,aAAKjkD,CAAL,CAAO1V,IAAP,CAAa6S,MAAM,CAAE+mD,EAAF,CAAnB;AAEA,eAAO,IAAP;AAEA,OApBiC;AAsBlCx6D,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OA1BiC;AA4BlCA,UAAI,EAAE,cAAWoyD,QAAX,EAAsB;AAE3B,aAAK/tE,CAAL,CAAO2b,IAAP,CAAaoyD,QAAQ,CAAC/tE,CAAtB;AACA,aAAKC,CAAL,CAAO0b,IAAP,CAAaoyD,QAAQ,CAAC9tE,CAAtB;AACA,aAAKoxB,CAAL,CAAO1V,IAAP,CAAaoyD,QAAQ,CAAC18C,CAAtB;AAEA,eAAO,IAAP;AAEA,OApCiC;AAsClCmkD,aAAO,EAAE,mBAAY;AAEpB/B,aAAK,CAACvxD,UAAN,CAAkB,KAAKmP,CAAvB,EAA0B,KAAKpxB,CAA/B;;AACAyzE,aAAK,CAACxxD,UAAN,CAAkB,KAAKliB,CAAvB,EAA0B,KAAKC,CAA/B;;AAEA,eAAOwzE,KAAK,CAACxlB,KAAN,CAAaylB,KAAb,EAAqB5zE,MAArB,KAAgC,GAAvC;AAEA,OA7CiC;AA+ClC21E,iBAAW,EAAE,qBAAWnrE,MAAX,EAAoB;AAEhC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,uDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAAC4iD,UAAP,CAAmB,KAAKltD,CAAxB,EAA2B,KAAKC,CAAhC,EAAoCyd,GAApC,CAAyC,KAAK2T,CAA9C,EAAkDxT,cAAlD,CAAkE,IAAI,CAAtE,CAAP;AAEA,OA1DiC;AA4DlCu2D,eAAS,EAAE,mBAAW9pE,MAAX,EAAoB;AAE9B,eAAO6pE,QAAQ,CAACC,SAAT,CAAoB,KAAKp0E,CAAzB,EAA4B,KAAKC,CAAjC,EAAoC,KAAKoxB,CAAzC,EAA4C/mB,MAA5C,CAAP;AAEA,OAhEiC;AAkElCorE,cAAQ,EAAE,kBAAWprE,MAAX,EAAoB;AAE7B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,oDAAd;AACAjO,gBAAM,GAAG,IAAIkoE,KAAJ,EAAT;AAEA;;AAED,eAAOloE,MAAM,CAACsoE,qBAAP,CAA8B,KAAK5yE,CAAnC,EAAsC,KAAKC,CAA3C,EAA8C,KAAKoxB,CAAnD,CAAP;AAEA,OA7EiC;AA+ElCijD,kBAAY,EAAE,sBAAWzgC,KAAX,EAAkBvpC,MAAlB,EAA2B;AAExC,eAAO6pE,QAAQ,CAACG,YAAT,CAAuBzgC,KAAvB,EAA8B,KAAK7zC,CAAnC,EAAsC,KAAKC,CAA3C,EAA8C,KAAKoxB,CAAnD,EAAsD/mB,MAAtD,CAAP;AAEA,OAnFiC;AAqFlCwqE,WAAK,EAAE,eAAWjhC,KAAX,EAAkBmhC,GAAlB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC5qE,MAAjC,EAA0C;AAEhD,eAAO6pE,QAAQ,CAACW,KAAT,CAAgBjhC,KAAhB,EAAuB,KAAK7zC,CAA5B,EAA+B,KAAKC,CAApC,EAAuC,KAAKoxB,CAA5C,EAA+C2jD,GAA/C,EAAoDC,GAApD,EAAyDC,GAAzD,EAA8D5qE,MAA9D,CAAP;AAEA,OAzFiC;AA2FlC8iE,mBAAa,EAAE,uBAAWv5B,KAAX,EAAmB;AAEjC,eAAOsgC,QAAQ,CAAC/G,aAAT,CAAwBv5B,KAAxB,EAA+B,KAAK7zC,CAApC,EAAuC,KAAKC,CAA5C,EAA+C,KAAKoxB,CAApD,CAAP;AAEA,OA/FiC;AAiGlC8jD,mBAAa,EAAE,uBAAWxF,SAAX,EAAuB;AAErC,eAAOwE,QAAQ,CAACgB,aAAT,CAAwB,KAAKn1E,CAA7B,EAAgC,KAAKC,CAArC,EAAwC,KAAKoxB,CAA7C,EAAgDs+C,SAAhD,CAAP;AAEA,OArGiC;AAuGlCpC,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B,eAAOA,GAAG,CAACkB,kBAAJ,CAAwB,IAAxB,CAAP;AAEA,OA3GiC;AA6GlCiC,yBAAmB,EAAE,6BAAWx+C,CAAX,EAAcjnB,MAAd,EAAuB;AAE3C,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,+DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,YAAMv8D,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkBC,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8BoxB,CAAC,GAAG,KAAKA,CAAvC;AACA,YAAIlR,CAAJ,EAAOmV,CAAP,CAV2C,CAY3C;AACA;AACA;AACA;AACA;;AAEAu+C,YAAI,CAAC3xD,UAAL,CAAiBjiB,CAAjB,EAAoBD,CAApB;;AACA8zE,YAAI,CAAC5xD,UAAL,CAAiBmP,CAAjB,EAAoBrxB,CAApB;;AACAg0E,YAAI,CAAC9xD,UAAL,CAAiBqP,CAAjB,EAAoBvxB,CAApB;;AACA,YAAMiqD,EAAE,GAAG4pB,IAAI,CAAC31D,GAAL,CAAU81D,IAAV,CAAX;;AACA,YAAM9pB,EAAE,GAAG4pB,IAAI,CAAC51D,GAAL,CAAU81D,IAAV,CAAX;;AACA,YAAK/pB,EAAE,IAAI,CAAN,IAAWC,EAAE,IAAI,CAAtB,EAA0B;AAEzB;AACA,iBAAO5/C,MAAM,CAACqR,IAAP,CAAa3b,CAAb,CAAP;AAEA;;AAEDi0E,YAAI,CAAC/xD,UAAL,CAAiBqP,CAAjB,EAAoBtxB,CAApB;;AACA,YAAMkqD,EAAE,GAAG0pB,IAAI,CAAC31D,GAAL,CAAU+1D,IAAV,CAAX;;AACA,YAAM0B,EAAE,GAAG7B,IAAI,CAAC51D,GAAL,CAAU+1D,IAAV,CAAX;;AACA,YAAK9pB,EAAE,IAAI,CAAN,IAAWwrB,EAAE,IAAIxrB,EAAtB,EAA2B;AAE1B;AACA,iBAAO7/C,MAAM,CAACqR,IAAP,CAAa1b,CAAb,CAAP;AAEA;;AAED,YAAM21E,EAAE,GAAG3rB,EAAE,GAAG0rB,EAAL,GAAUxrB,EAAE,GAAGD,EAA1B;;AACA,YAAK0rB,EAAE,IAAI,CAAN,IAAW3rB,EAAE,IAAI,CAAjB,IAAsBE,EAAE,IAAI,CAAjC,EAAqC;AAEpChqC,WAAC,GAAG8pC,EAAE,IAAKA,EAAE,GAAGE,EAAV,CAAN,CAFoC,CAGpC;;AACA,iBAAO7/C,MAAM,CAACqR,IAAP,CAAa3b,CAAb,EAAiBwd,eAAjB,CAAkCq2D,IAAlC,EAAwC1zD,CAAxC,CAAP;AAEA;;AAED+zD,YAAI,CAAChyD,UAAL,CAAiBqP,CAAjB,EAAoBF,CAApB;;AACA,YAAMwkD,EAAE,GAAGhC,IAAI,CAAC31D,GAAL,CAAUg2D,IAAV,CAAX;;AACA,YAAM4B,EAAE,GAAGhC,IAAI,CAAC51D,GAAL,CAAUg2D,IAAV,CAAX;;AACA,YAAK4B,EAAE,IAAI,CAAN,IAAWD,EAAE,IAAIC,EAAtB,EAA2B;AAE1B;AACA,iBAAOxrE,MAAM,CAACqR,IAAP,CAAa0V,CAAb,CAAP;AAEA;;AAED,YAAM0kD,EAAE,GAAGF,EAAE,GAAG3rB,EAAL,GAAUD,EAAE,GAAG6rB,EAA1B;;AACA,YAAKC,EAAE,IAAI,CAAN,IAAW7rB,EAAE,IAAI,CAAjB,IAAsB4rB,EAAE,IAAI,CAAjC,EAAqC;AAEpCxgD,WAAC,GAAG40B,EAAE,IAAKA,EAAE,GAAG4rB,EAAV,CAAN,CAFoC,CAGpC;;AACA,iBAAOxrE,MAAM,CAACqR,IAAP,CAAa3b,CAAb,EAAiBwd,eAAjB,CAAkCs2D,IAAlC,EAAwCx+C,CAAxC,CAAP;AAEA;;AAED,YAAM0gD,EAAE,GAAG7rB,EAAE,GAAG2rB,EAAL,GAAUD,EAAE,GAAGF,EAA1B;;AACA,YAAKK,EAAE,IAAI,CAAN,IAAaL,EAAE,GAAGxrB,EAAP,IAAe,CAA1B,IAAiC0rB,EAAE,GAAGC,EAAP,IAAe,CAAnD,EAAuD;AAEtD/B,cAAI,CAAC7xD,UAAL,CAAiBmP,CAAjB,EAAoBpxB,CAApB;;AACAq1B,WAAC,GAAG,CAAEqgD,EAAE,GAAGxrB,EAAP,KAAkBwrB,EAAE,GAAGxrB,EAAP,IAAgB0rB,EAAE,GAAGC,EAArB,CAAhB,CAAJ,CAHsD,CAItD;;AACA,iBAAOxrE,MAAM,CAACqR,IAAP,CAAa1b,CAAb,EAAiBud,eAAjB,CAAkCu2D,IAAlC,EAAwCz+C,CAAxC,CAAP,CALsD,CAKF;AAEpD,SA5E0C,CA8E3C;;;AACA,YAAMs/C,KAAK,GAAG,KAAMoB,EAAE,GAAGD,EAAL,GAAUH,EAAhB,CAAd,CA/E2C,CAgF3C;;AACAz1D,SAAC,GAAG41D,EAAE,GAAGnB,KAAT;AACAt/C,SAAC,GAAGsgD,EAAE,GAAGhB,KAAT;AAEA,eAAOtqE,MAAM,CAACqR,IAAP,CAAa3b,CAAb,EAAiBwd,eAAjB,CAAkCq2D,IAAlC,EAAwC1zD,CAAxC,EAA4C3C,eAA5C,CAA6Ds2D,IAA7D,EAAmEx+C,CAAnE,CAAP;AAEA,OAnMiC;AAqMlCu5B,YAAM,EAAE,gBAAWkf,QAAX,EAAsB;AAE7B,eAAOA,QAAQ,CAAC/tE,CAAT,CAAW6uD,MAAX,CAAmB,KAAK7uD,CAAxB,KAA+B+tE,QAAQ,CAAC9tE,CAAT,CAAW4uD,MAAX,CAAmB,KAAK5uD,CAAxB,CAA/B,IAA8D8tE,QAAQ,CAAC18C,CAAT,CAAWw9B,MAAX,CAAmB,KAAKx9B,CAAxB,CAArE;AAEA;AAzMiC,KAAnC;AA6MA,QAAM4kD,cAAc,GAAG;AAAE,mBAAa,QAAf;AAAyB,sBAAgB,QAAzC;AAAmD,cAAQ,QAA3D;AAAqE,oBAAc,QAAnF;AAA6F,eAAS,QAAtG;AACtB,eAAS,QADa;AACH,gBAAU,QADP;AACiB,eAAS,QAD1B;AACoC,wBAAkB,QADtD;AACgE,cAAQ,QADxE;AACkF,oBAAc,QADhG;AAEtB,eAAS,QAFa;AAEH,mBAAa,QAFV;AAEoB,mBAAa,QAFjC;AAE2C,oBAAc,QAFzD;AAEmE,mBAAa,QAFhF;AAE0F,eAAS,QAFnG;AAGtB,wBAAkB,QAHI;AAGM,kBAAY,QAHlB;AAG4B,iBAAW,QAHvC;AAGiD,cAAQ,QAHzD;AAGmE,kBAAY,QAH/E;AAGyF,kBAAY,QAHrG;AAItB,uBAAiB,QAJK;AAIK,kBAAY,QAJjB;AAI2B,mBAAa,QAJxC;AAIkD,kBAAY,QAJ9D;AAIwE,mBAAa,QAJrF;AAI+F,qBAAe,QAJ9G;AAKtB,wBAAkB,QALI;AAKM,oBAAc,QALpB;AAK8B,oBAAc,QAL5C;AAKsD,iBAAW,QALjE;AAK2E,oBAAc,QALzF;AAKmG,sBAAgB,QALnH;AAMtB,uBAAiB,QANK;AAMK,uBAAiB,QANtB;AAMgC,uBAAiB,QANjD;AAM2D,uBAAiB,QAN5E;AAMsF,oBAAc,QANpG;AAOtB,kBAAY,QAPU;AAOA,qBAAe,QAPf;AAOyB,iBAAW,QAPpC;AAO8C,iBAAW,QAPzD;AAOmE,oBAAc,QAPjF;AAO2F,mBAAa,QAPxG;AAQtB,qBAAe,QARO;AAQG,qBAAe,QARlB;AAQ4B,iBAAW,QARvC;AAQiD,mBAAa,QAR9D;AAQwE,oBAAc,QARtF;AAQgG,cAAQ,QARxG;AAStB,mBAAa,QATS;AASC,cAAQ,QATT;AASmB,eAAS,QAT5B;AASsC,qBAAe,QATrD;AAS+D,cAAQ,QATvE;AASiF,kBAAY,QAT7F;AASuG,iBAAW,QATlH;AAUtB,mBAAa,QAVS;AAUC,gBAAU,QAVX;AAUqB,eAAS,QAV9B;AAUwC,eAAS,QAVjD;AAU2D,kBAAY,QAVvE;AAUiF,uBAAiB,QAVlG;AAU4G,mBAAa,QAVzH;AAWtB,sBAAgB,QAXM;AAWI,mBAAa,QAXjB;AAW2B,oBAAc,QAXzC;AAWmD,mBAAa,QAXhE;AAW0E,8BAAwB,QAXlG;AAW4G,mBAAa,QAXzH;AAYtB,oBAAc,QAZQ;AAYE,mBAAa,QAZf;AAYyB,mBAAa,QAZtC;AAYgD,qBAAe,QAZ/D;AAYyE,uBAAiB,QAZ1F;AAYoG,sBAAgB,QAZpH;AAatB,wBAAkB,QAbI;AAaM,wBAAkB,QAbxB;AAakC,wBAAkB,QAbpD;AAa8D,qBAAe,QAb7E;AAauF,cAAQ,QAb/F;AAayG,mBAAa,QAbtH;AActB,eAAS,QAda;AAcH,iBAAW,QAdR;AAckB,gBAAU,QAd5B;AAcsC,0BAAoB,QAd1D;AAcoE,oBAAc,QAdlF;AAc4F,sBAAgB,QAd5G;AAetB,sBAAgB,QAfM;AAeI,wBAAkB,QAftB;AAegC,yBAAmB,QAfnD;AAe6D,2BAAqB,QAflF;AAe4F,yBAAmB,QAf/G;AAgBtB,yBAAmB,QAhBG;AAgBO,sBAAgB,QAhBvB;AAgBiC,mBAAa,QAhB9C;AAgBwD,mBAAa,QAhBrE;AAgB+E,kBAAY,QAhB3F;AAgBqG,qBAAe,QAhBpH;AAiBtB,cAAQ,QAjBc;AAiBJ,iBAAW,QAjBP;AAiBiB,eAAS,QAjB1B;AAiBoC,mBAAa,QAjBjD;AAiB2D,gBAAU,QAjBrE;AAiB+E,mBAAa,QAjB5F;AAiBsG,gBAAU,QAjBhH;AAkBtB,uBAAiB,QAlBK;AAkBK,mBAAa,QAlBlB;AAkB4B,uBAAiB,QAlB7C;AAkBuD,uBAAiB,QAlBxE;AAkBkF,oBAAc,QAlBhG;AAkB0G,mBAAa,QAlBvH;AAmBtB,cAAQ,QAnBc;AAmBJ,cAAQ,QAnBJ;AAmBc,cAAQ,QAnBtB;AAmBgC,oBAAc,QAnB9C;AAmBwD,gBAAU,QAnBlE;AAmB4E,uBAAiB,QAnB7F;AAmBuG,aAAO,QAnB9G;AAmBwH,mBAAa,QAnBrI;AAoBtB,mBAAa,QApBS;AAoBC,qBAAe,QApBhB;AAoB0B,gBAAU,QApBpC;AAoB8C,oBAAc,QApB5D;AAoBsE,kBAAY,QApBlF;AAoB4F,kBAAY,QApBxG;AAqBtB,gBAAU,QArBY;AAqBF,gBAAU,QArBR;AAqBkB,iBAAW,QArB7B;AAqBuC,mBAAa,QArBpD;AAqB8D,mBAAa,QArB3E;AAqBqF,mBAAa,QArBlG;AAqB4G,cAAQ,QArBpH;AAsBtB,qBAAe,QAtBO;AAsBG,mBAAa,QAtBhB;AAsB0B,aAAO,QAtBjC;AAsB2C,cAAQ,QAtBnD;AAsB6D,iBAAW,QAtBxE;AAsBkF,gBAAU,QAtB5F;AAsBsG,mBAAa,QAtBnH;AAuBtB,gBAAU,QAvBY;AAuBF,eAAS,QAvBP;AAuBiB,eAAS,QAvB1B;AAuBoC,oBAAc,QAvBlD;AAuB4D,gBAAU,QAvBtE;AAuBgF,qBAAe;AAvB/F,KAAvB;AAyBA,QAAMC,KAAK,GAAG;AAAE9vD,OAAC,EAAE,CAAL;AAAQ2K,OAAC,EAAE,CAAX;AAAc7lB,OAAC,EAAE;AAAjB,KAAd;AACA,QAAMirE,KAAK,GAAG;AAAE/vD,OAAC,EAAE,CAAL;AAAQ2K,OAAC,EAAE,CAAX;AAAc7lB,OAAC,EAAE;AAAjB,KAAd;;AAEA,aAASkrE,KAAT,CAAgBllD,CAAhB,EAAmBmE,CAAnB,EAAsBp1B,CAAtB,EAA0B;AAEzB,UAAKo1B,CAAC,KAAKxmB,SAAN,IAAmB5O,CAAC,KAAK4O,SAA9B,EAA0C;AAEzC;AACA,eAAO,KAAKiP,GAAL,CAAUoT,CAAV,CAAP;AAEA;;AAED,aAAO,KAAKmlD,MAAL,CAAanlD,CAAb,EAAgBmE,CAAhB,EAAmBp1B,CAAnB,CAAP;AAEA;;AAED,aAASq2E,OAAT,CAAkB/kD,CAAlB,EAAqB6f,CAArB,EAAwB5qB,CAAxB,EAA4B;AAE3B,UAAKA,CAAC,GAAG,CAAT,EAAaA,CAAC,IAAI,CAAL;AACb,UAAKA,CAAC,GAAG,CAAT,EAAaA,CAAC,IAAI,CAAL;AACb,UAAKA,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAO+K,CAAC,GAAG,CAAE6f,CAAC,GAAG7f,CAAN,IAAY,CAAZ,GAAgB/K,CAA3B;AACjB,UAAKA,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAO4qB,CAAP;AACjB,UAAK5qB,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAO+K,CAAC,GAAG,CAAE6f,CAAC,GAAG7f,CAAN,IAAY,CAAZ,IAAkB,IAAI,CAAJ,GAAQ/K,CAA1B,CAAX;AACjB,aAAO+K,CAAP;AAEA;;AAED,aAASglD,YAAT,CAAuBllD,CAAvB,EAA2B;AAE1B,aAASA,CAAC,GAAG,OAAN,GAAkBA,CAAC,GAAG,YAAtB,GAAqCrY,IAAI,CAAC+G,GAAL,CAAUsR,CAAC,GAAG,YAAJ,GAAmB,YAA7B,EAA2C,GAA3C,CAA5C;AAEA;;AAED,aAASmlD,YAAT,CAAuBnlD,CAAvB,EAA2B;AAE1B,aAASA,CAAC,GAAG,SAAN,GAAoBA,CAAC,GAAG,KAAxB,GAAgC,QAAUrY,IAAI,CAAC+G,GAAL,CAAUsR,CAAV,EAAa,OAAb,CAAV,GAAqC,KAA5E;AAEA;;AAEDrvB,UAAM,CAACiiC,MAAP,CAAemyC,KAAK,CAACz+D,SAArB,EAAgC;AAE/B8+D,aAAO,EAAE,IAFsB;AAI/BvlD,OAAC,EAAE,CAJ4B;AAIzBmE,OAAC,EAAE,CAJsB;AAInBp1B,OAAC,EAAE,CAJgB;AAM/B6d,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,YAAKA,KAAK,IAAIA,KAAK,CAACksE,OAApB,EAA8B;AAE7B,eAAK96D,IAAL,CAAWpR,KAAX;AAEA,SAJD,MAIO,IAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEvC,eAAKmsE,MAAL,CAAansE,KAAb;AAEA,SAJM,MAIA,IAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEvC,eAAKosE,QAAL,CAAepsE,KAAf;AAEA;;AAED,eAAO,IAAP;AAEA,OAxB8B;AA0B/BqiD,eAAS,EAAE,mBAAWC,MAAX,EAAoB;AAE9B,aAAK37B,CAAL,GAAS27B,MAAT;AACA,aAAKx3B,CAAL,GAASw3B,MAAT;AACA,aAAK5sD,CAAL,GAAS4sD,MAAT;AAEA,eAAO,IAAP;AAEA,OAlC8B;AAoC/B6pB,YAAM,EAAE,gBAAWE,GAAX,EAAiB;AAExBA,WAAG,GAAG59D,IAAI,CAAC4N,KAAL,CAAYgwD,GAAZ,CAAN;AAEA,aAAK1lD,CAAL,GAAS,CAAE0lD,GAAG,IAAI,EAAP,GAAY,GAAd,IAAsB,GAA/B;AACA,aAAKvhD,CAAL,GAAS,CAAEuhD,GAAG,IAAI,CAAP,GAAW,GAAb,IAAqB,GAA9B;AACA,aAAK32E,CAAL,GAAS,CAAE22E,GAAG,GAAG,GAAR,IAAgB,GAAzB;AAEA,eAAO,IAAP;AAEA,OA9C8B;AAgD/BP,YAAM,EAAE,gBAAWnlD,CAAX,EAAcmE,CAAd,EAAiBp1B,CAAjB,EAAqB;AAE5B,aAAKixB,CAAL,GAASA,CAAT;AACA,aAAKmE,CAAL,GAASA,CAAT;AACA,aAAKp1B,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAxD8B;AA0D/B42E,YAAM,EAAE,gBAAWzwD,CAAX,EAAc2K,CAAd,EAAiB7lB,CAAjB,EAAqB;AAE5B;AACAkb,SAAC,GAAGwjC,SAAS,CAACU,eAAV,CAA2BlkC,CAA3B,EAA8B,CAA9B,CAAJ;AACA2K,SAAC,GAAG64B,SAAS,CAACS,KAAV,CAAiBt5B,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;AACA7lB,SAAC,GAAG0+C,SAAS,CAACS,KAAV,CAAiBn/C,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;;AAEA,YAAK6lB,CAAC,KAAK,CAAX,EAAe;AAEd,eAAKG,CAAL,GAAS,KAAKmE,CAAL,GAAS,KAAKp1B,CAAL,GAASiL,CAA3B;AAEA,SAJD,MAIO;AAEN,cAAMqmB,CAAC,GAAGrmB,CAAC,IAAI,GAAL,GAAWA,CAAC,IAAK,IAAI6lB,CAAT,CAAZ,GAA2B7lB,CAAC,GAAG6lB,CAAJ,GAAU7lB,CAAC,GAAG6lB,CAAnD;AACA,cAAMqgB,CAAC,GAAK,IAAIlmC,CAAN,GAAYqmB,CAAtB;AAEA,eAAKL,CAAL,GAASolD,OAAO,CAAEllC,CAAF,EAAK7f,CAAL,EAAQnL,CAAC,GAAG,IAAI,CAAhB,CAAhB;AACA,eAAKiP,CAAL,GAASihD,OAAO,CAAEllC,CAAF,EAAK7f,CAAL,EAAQnL,CAAR,CAAhB;AACA,eAAKnmB,CAAL,GAASq2E,OAAO,CAAEllC,CAAF,EAAK7f,CAAL,EAAQnL,CAAC,GAAG,IAAI,CAAhB,CAAhB;AAEA;;AAED,eAAO,IAAP;AAEA,OAlF8B;AAoF/BuwD,cAAQ,EAAE,kBAAWxvD,KAAX,EAAmB;AAE5B,iBAAS2vD,WAAT,CAAsBx5C,MAAtB,EAA+B;AAE9B,cAAKA,MAAM,KAAKzuB,SAAhB,EAA4B;;AAE5B,cAAKka,UAAU,CAAEuU,MAAF,CAAV,GAAuB,CAA5B,EAAgC;AAE/B17B,mBAAO,CAAC2W,IAAR,CAAc,qCAAqC4O,KAArC,GAA6C,mBAA3D;AAEA;AAED;;AAGD,YAAIgO,CAAJ;;AAEA,YAAKA,CAAC,GAAG,kCAAkC4hD,IAAlC,CAAwC5vD,KAAxC,CAAT,EAA2D;AAE1D;AAEA,cAAIiJ,KAAJ;AACA,cAAM5wB,IAAI,GAAG21B,CAAC,CAAE,CAAF,CAAd;AACA,cAAM6hD,UAAU,GAAG7hD,CAAC,CAAE,CAAF,CAApB;;AAEA,kBAAS31B,IAAT;AAEC,iBAAK,KAAL;AACA,iBAAK,MAAL;AAEC,kBAAK4wB,KAAK,GAAG,gEAAgE2mD,IAAhE,CAAsEC,UAAtE,CAAb,EAAkG;AAEjG;AACA,qBAAK9lD,CAAL,GAASlY,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,qBAAKiF,CAAL,GAASrc,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,qBAAKnwB,CAAL,GAAS+Y,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AAEA0mD,2BAAW,CAAE1mD,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,uBAAO,IAAP;AAEA;;AAED,kBAAKA,KAAK,GAAG,sEAAsE2mD,IAAtE,CAA4EC,UAA5E,CAAb,EAAwG;AAEvG;AACA,qBAAK9lD,CAAL,GAASlY,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,qBAAKiF,CAAL,GAASrc,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,qBAAKnwB,CAAL,GAAS+Y,IAAI,CAACkE,GAAL,CAAU,GAAV,EAAehW,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AAEA0mD,2BAAW,CAAE1mD,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,uBAAO,IAAP;AAEA;;AAED;;AAED,iBAAK,KAAL;AACA,iBAAK,MAAL;AAEC,kBAAKA,KAAK,GAAG,gFAAgF2mD,IAAhF,CAAsFC,UAAtF,CAAb,EAAkH;AAEjH;AACA,oBAAM5wD,CAAC,GAAG2C,UAAU,CAAEqH,KAAK,CAAE,CAAF,CAAP,CAAV,GAA2B,GAArC;AACA,oBAAMW,CAAC,GAAG7pB,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAR,GAA6B,GAAvC;AACA,oBAAMllB,CAAC,GAAGhE,QAAQ,CAAEkpB,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAR,GAA6B,GAAvC;AAEA0mD,2BAAW,CAAE1mD,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,uBAAO,KAAKymD,MAAL,CAAazwD,CAAb,EAAgB2K,CAAhB,EAAmB7lB,CAAnB,CAAP;AAEA;;AAED;AAjDF;AAqDA,SA7DD,MA6DO,IAAKiqB,CAAC,GAAG,qBAAqB4hD,IAArB,CAA2B5vD,KAA3B,CAAT,EAA8C;AAEpD;AAEA,cAAMyvD,GAAG,GAAGzhD,CAAC,CAAE,CAAF,CAAb;AACA,cAAM5e,IAAI,GAAGqgE,GAAG,CAAC92E,MAAjB;;AAEA,cAAKyW,IAAI,KAAK,CAAd,EAAkB;AAEjB;AACA,iBAAK2a,CAAL,GAAShqB,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,iBAAK0D,CAAL,GAASnuB,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,iBAAK1xB,CAAL,GAASiH,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AAEA,mBAAO,IAAP;AAEA,WATD,MASO,IAAKpb,IAAI,KAAK,CAAd,EAAkB;AAExB;AACA,iBAAK2a,CAAL,GAAShqB,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,iBAAK0D,CAAL,GAASnuB,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,iBAAK1xB,CAAL,GAASiH,QAAQ,CAAE0vE,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,IAAkBilD,GAAG,CAACjlD,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AAEA,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKxK,KAAK,IAAIA,KAAK,CAACrnB,MAAN,GAAe,CAA7B,EAAiC;AAEhC,iBAAO,KAAKm3E,YAAL,CAAmB9vD,KAAnB,CAAP;AAEA;;AAED,eAAO,IAAP;AAEA,OAvM8B;AAyM/B8vD,kBAAY,EAAE,sBAAW9vD,KAAX,EAAmB;AAEhC;AACA,YAAMyvD,GAAG,GAAGX,cAAc,CAAE9uD,KAAF,CAA1B;;AAEA,YAAKyvD,GAAG,KAAK/nE,SAAb,EAAyB;AAExB;AACA,eAAK6nE,MAAL,CAAaE,GAAb;AAEA,SALD,MAKO;AAEN;AACAh1E,iBAAO,CAAC2W,IAAR,CAAc,gCAAgC4O,KAA9C;AAEA;;AAED,eAAO,IAAP;AAEA,OA5N8B;AA8N/BpM,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAK6M,CAA3B,EAA8B,KAAKmE,CAAnC,EAAsC,KAAKp1B,CAA3C,CAAP;AAEA,OAlO8B;AAoO/B0b,UAAI,EAAE,cAAWyU,KAAX,EAAmB;AAExB,aAAKc,CAAL,GAASd,KAAK,CAACc,CAAf;AACA,aAAKmE,CAAL,GAASjF,KAAK,CAACiF,CAAf;AACA,aAAKp1B,CAAL,GAASmwB,KAAK,CAACnwB,CAAf;AAEA,eAAO,IAAP;AAEA,OA5O8B;AA8O/Bi3E,uBAAiB,EAAE,2BAAW9mD,KAAX,EAAkB+mD,WAAlB,EAAgC;AAElD,YAAKA,WAAW,KAAKtoE,SAArB,EAAiCsoE,WAAW,GAAG,GAAd;AAEjC,aAAKjmD,CAAL,GAASlY,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACc,CAAhB,EAAmBimD,WAAnB,CAAT;AACA,aAAK9hD,CAAL,GAASrc,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACiF,CAAhB,EAAmB8hD,WAAnB,CAAT;AACA,aAAKl3E,CAAL,GAAS+Y,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACnwB,CAAhB,EAAmBk3E,WAAnB,CAAT;AAEA,eAAO,IAAP;AAEA,OAxP8B;AA0P/BC,uBAAiB,EAAE,2BAAWhnD,KAAX,EAAkB+mD,WAAlB,EAAgC;AAElD,YAAKA,WAAW,KAAKtoE,SAArB,EAAiCsoE,WAAW,GAAG,GAAd;AAEjC,YAAME,WAAW,GAAKF,WAAW,GAAG,CAAhB,GAAwB,MAAMA,WAA9B,GAA8C,GAAlE;AAEA,aAAKjmD,CAAL,GAASlY,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACc,CAAhB,EAAmBmmD,WAAnB,CAAT;AACA,aAAKhiD,CAAL,GAASrc,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACiF,CAAhB,EAAmBgiD,WAAnB,CAAT;AACA,aAAKp3E,CAAL,GAAS+Y,IAAI,CAAC+G,GAAL,CAAUqQ,KAAK,CAACnwB,CAAhB,EAAmBo3E,WAAnB,CAAT;AAEA,eAAO,IAAP;AAEA,OAtQ8B;AAwQ/BC,0BAAoB,EAAE,8BAAWH,WAAX,EAAyB;AAE9C,aAAKD,iBAAL,CAAwB,IAAxB,EAA8BC,WAA9B;AAEA,eAAO,IAAP;AAEA,OA9Q8B;AAgR/BI,0BAAoB,EAAE,8BAAWJ,WAAX,EAAyB;AAE9C,aAAKC,iBAAL,CAAwB,IAAxB,EAA8BD,WAA9B;AAEA,eAAO,IAAP;AAEA,OAtR8B;AAwR/BK,sBAAgB,EAAE,0BAAWpnD,KAAX,EAAmB;AAEpC,aAAKc,CAAL,GAASqlD,YAAY,CAAEnmD,KAAK,CAACc,CAAR,CAArB;AACA,aAAKmE,CAAL,GAASkhD,YAAY,CAAEnmD,KAAK,CAACiF,CAAR,CAArB;AACA,aAAKp1B,CAAL,GAASs2E,YAAY,CAAEnmD,KAAK,CAACnwB,CAAR,CAArB;AAEA,eAAO,IAAP;AAEA,OAhS8B;AAkS/Bw3E,sBAAgB,EAAE,0BAAWrnD,KAAX,EAAmB;AAEpC,aAAKc,CAAL,GAASslD,YAAY,CAAEpmD,KAAK,CAACc,CAAR,CAArB;AACA,aAAKmE,CAAL,GAASmhD,YAAY,CAAEpmD,KAAK,CAACiF,CAAR,CAArB;AACA,aAAKp1B,CAAL,GAASu2E,YAAY,CAAEpmD,KAAK,CAACnwB,CAAR,CAArB;AAEA,eAAO,IAAP;AAEA,OA1S8B;AA4S/By3E,yBAAmB,EAAE,+BAAY;AAEhC,aAAKF,gBAAL,CAAuB,IAAvB;AAEA,eAAO,IAAP;AAEA,OAlT8B;AAoT/BG,yBAAmB,EAAE,+BAAY;AAEhC,aAAKF,gBAAL,CAAuB,IAAvB;AAEA,eAAO,IAAP;AAEA,OA1T8B;AA4T/BG,YAAM,EAAE,kBAAY;AAEnB,eAAS,KAAK1mD,CAAL,GAAS,GAAX,IAAoB,EAApB,GAA2B,KAAKmE,CAAL,GAAS,GAAX,IAAoB,CAA7C,GAAmD,KAAKp1B,CAAL,GAAS,GAAX,IAAoB,CAA5E;AAEA,OAhU8B;AAkU/B43E,kBAAY,EAAE,wBAAY;AAEzB,eAAO,CAAE,WAAW,KAAKD,MAAL,GAAcl9C,QAAd,CAAwB,EAAxB,CAAb,EAA4Cx7B,KAA5C,CAAmD,CAAE,CAArD,CAAP;AAEA,OAtU8B;AAwU/B44E,YAAM,EAAE,gBAAWxtE,MAAX,EAAoB;AAE3B;AAEA,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AACAjO,gBAAM,GAAG;AAAE8b,aAAC,EAAE,CAAL;AAAQ2K,aAAC,EAAE,CAAX;AAAc7lB,aAAC,EAAE;AAAjB,WAAT;AAEA;;AAED,YAAMgmB,CAAC,GAAG,KAAKA,CAAf;AAAA,YAAkBmE,CAAC,GAAG,KAAKA,CAA3B;AAAA,YAA8Bp1B,CAAC,GAAG,KAAKA,CAAvC;AAEA,YAAMkd,GAAG,GAAGnE,IAAI,CAACmE,GAAL,CAAU+T,CAAV,EAAamE,CAAb,EAAgBp1B,CAAhB,CAAZ;AACA,YAAMid,GAAG,GAAGlE,IAAI,CAACkE,GAAL,CAAUgU,CAAV,EAAamE,CAAb,EAAgBp1B,CAAhB,CAAZ;AAEA,YAAI83E,GAAJ,EAASC,UAAT;AACA,YAAMC,SAAS,GAAG,CAAE/6D,GAAG,GAAGC,GAAR,IAAgB,GAAlC;;AAEA,YAAKD,GAAG,KAAKC,GAAb,EAAmB;AAElB46D,aAAG,GAAG,CAAN;AACAC,oBAAU,GAAG,CAAb;AAEA,SALD,MAKO;AAEN,cAAM/E,KAAK,GAAG91D,GAAG,GAAGD,GAApB;AAEA86D,oBAAU,GAAGC,SAAS,IAAI,GAAb,GAAmBhF,KAAK,IAAK91D,GAAG,GAAGD,GAAX,CAAxB,GAA2C+1D,KAAK,IAAK,IAAI91D,GAAJ,GAAUD,GAAf,CAA7D;;AAEA,kBAASC,GAAT;AAEC,iBAAK+T,CAAL;AAAQ6mD,iBAAG,GAAG,CAAE1iD,CAAC,GAAGp1B,CAAN,IAAYgzE,KAAZ,IAAsB59C,CAAC,GAAGp1B,CAAJ,GAAQ,CAAR,GAAY,CAAlC,CAAN;AAA6C;;AACrD,iBAAKo1B,CAAL;AAAQ0iD,iBAAG,GAAG,CAAE93E,CAAC,GAAGixB,CAAN,IAAY+hD,KAAZ,GAAoB,CAA1B;AAA6B;;AACrC,iBAAKhzE,CAAL;AAAQ83E,iBAAG,GAAG,CAAE7mD,CAAC,GAAGmE,CAAN,IAAY49C,KAAZ,GAAoB,CAA1B;AAA6B;AAJtC;;AAQA8E,aAAG,IAAI,CAAP;AAEA;;AAEDztE,cAAM,CAAC8b,CAAP,GAAW2xD,GAAX;AACAztE,cAAM,CAACymB,CAAP,GAAWinD,UAAX;AACA1tE,cAAM,CAACY,CAAP,GAAW+sE,SAAX;AAEA,eAAO3tE,MAAP;AAEA,OAxX8B;AA0X/B4tE,cAAQ,EAAE,oBAAY;AAErB,eAAO,UAAa,KAAKhnD,CAAL,GAAS,GAAX,GAAmB,CAA9B,IAAoC,GAApC,IAA8C,KAAKmE,CAAL,GAAS,GAAX,GAAmB,CAA/D,IAAqE,GAArE,IAA+E,KAAKp1B,CAAL,GAAS,GAAX,GAAmB,CAAhG,IAAsG,GAA7G;AAEA,OA9X8B;AAgY/Bk4E,eAAS,EAAE,mBAAW/xD,CAAX,EAAc2K,CAAd,EAAiB7lB,CAAjB,EAAqB;AAE/B,aAAK4sE,MAAL,CAAa5B,KAAb;AAEAA,aAAK,CAAC9vD,CAAN,IAAWA,CAAX;AAAc8vD,aAAK,CAACnlD,CAAN,IAAWA,CAAX;AAAcmlD,aAAK,CAAChrE,CAAN,IAAWA,CAAX;AAE5B,aAAK2rE,MAAL,CAAaX,KAAK,CAAC9vD,CAAnB,EAAsB8vD,KAAK,CAACnlD,CAA5B,EAA+BmlD,KAAK,CAAChrE,CAArC;AAEA,eAAO,IAAP;AAEA,OA1Y8B;AA4Y/BwS,SAAG,EAAE,aAAW0S,KAAX,EAAmB;AAEvB,aAAKc,CAAL,IAAUd,KAAK,CAACc,CAAhB;AACA,aAAKmE,CAAL,IAAUjF,KAAK,CAACiF,CAAhB;AACA,aAAKp1B,CAAL,IAAUmwB,KAAK,CAACnwB,CAAhB;AAEA,eAAO,IAAP;AAEA,OApZ8B;AAsZ/Bm4E,eAAS,EAAE,mBAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAEtC,aAAKpnD,CAAL,GAASmnD,MAAM,CAACnnD,CAAP,GAAWonD,MAAM,CAACpnD,CAA3B;AACA,aAAKmE,CAAL,GAASgjD,MAAM,CAAChjD,CAAP,GAAWijD,MAAM,CAACjjD,CAA3B;AACA,aAAKp1B,CAAL,GAASo4E,MAAM,CAACp4E,CAAP,GAAWq4E,MAAM,CAACr4E,CAA3B;AAEA,eAAO,IAAP;AAEA,OA9Z8B;AAga/BktD,eAAS,EAAE,mBAAWp8B,CAAX,EAAe;AAEzB,aAAKG,CAAL,IAAUH,CAAV;AACA,aAAKsE,CAAL,IAAUtE,CAAV;AACA,aAAK9wB,CAAL,IAAU8wB,CAAV;AAEA,eAAO,IAAP;AAEA,OAxa8B;AA0a/BnU,SAAG,EAAE,aAAWwT,KAAX,EAAmB;AAEvB,aAAKc,CAAL,GAASlY,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,KAAK+T,CAAL,GAASd,KAAK,CAACc,CAA5B,CAAT;AACA,aAAKmE,CAAL,GAASrc,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,KAAKkY,CAAL,GAASjF,KAAK,CAACiF,CAA5B,CAAT;AACA,aAAKp1B,CAAL,GAAS+Y,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa,KAAKld,CAAL,GAASmwB,KAAK,CAACnwB,CAA5B,CAAT;AAEA,eAAO,IAAP;AAEA,OAlb8B;AAob/BotD,cAAQ,EAAE,kBAAWj9B,KAAX,EAAmB;AAE5B,aAAKc,CAAL,IAAUd,KAAK,CAACc,CAAhB;AACA,aAAKmE,CAAL,IAAUjF,KAAK,CAACiF,CAAhB;AACA,aAAKp1B,CAAL,IAAUmwB,KAAK,CAACnwB,CAAhB;AAEA,eAAO,IAAP;AAEA,OA5b8B;AA8b/B4d,oBAAc,EAAE,wBAAWkT,CAAX,EAAe;AAE9B,aAAKG,CAAL,IAAUH,CAAV;AACA,aAAKsE,CAAL,IAAUtE,CAAV;AACA,aAAK9wB,CAAL,IAAU8wB,CAAV;AAEA,eAAO,IAAP;AAEA,OAtc8B;AAwc/B65B,UAAI,EAAE,cAAWx6B,KAAX,EAAkBq+B,KAAlB,EAA0B;AAE/B,aAAKv9B,CAAL,IAAU,CAAEd,KAAK,CAACc,CAAN,GAAU,KAAKA,CAAjB,IAAuBu9B,KAAjC;AACA,aAAKp5B,CAAL,IAAU,CAAEjF,KAAK,CAACiF,CAAN,GAAU,KAAKA,CAAjB,IAAuBo5B,KAAjC;AACA,aAAKxuD,CAAL,IAAU,CAAEmwB,KAAK,CAACnwB,CAAN,GAAU,KAAKA,CAAjB,IAAuBwuD,KAAjC;AAEA,eAAO,IAAP;AAEA,OAhd8B;AAkd/B8pB,aAAO,EAAE,iBAAWnoD,KAAX,EAAkBq+B,KAAlB,EAA0B;AAElC,aAAKqpB,MAAL,CAAa5B,KAAb;AACA9lD,aAAK,CAAC0nD,MAAN,CAAc3B,KAAd;AAEA,YAAM/vD,CAAC,GAAGwjC,SAAS,CAACgB,IAAV,CAAgBsrB,KAAK,CAAC9vD,CAAtB,EAAyB+vD,KAAK,CAAC/vD,CAA/B,EAAkCqoC,KAAlC,CAAV;AACA,YAAM19B,CAAC,GAAG64B,SAAS,CAACgB,IAAV,CAAgBsrB,KAAK,CAACnlD,CAAtB,EAAyBolD,KAAK,CAACplD,CAA/B,EAAkC09B,KAAlC,CAAV;AACA,YAAMvjD,CAAC,GAAG0+C,SAAS,CAACgB,IAAV,CAAgBsrB,KAAK,CAAChrE,CAAtB,EAAyBirE,KAAK,CAACjrE,CAA/B,EAAkCujD,KAAlC,CAAV;AAEA,aAAKooB,MAAL,CAAazwD,CAAb,EAAgB2K,CAAhB,EAAmB7lB,CAAnB;AAEA,eAAO,IAAP;AAEA,OA/d8B;AAie/B2jD,YAAM,EAAE,gBAAWx9B,CAAX,EAAe;AAEtB,eAASA,CAAC,CAACH,CAAF,KAAQ,KAAKA,CAAf,IAAwBG,CAAC,CAACgE,CAAF,KAAQ,KAAKA,CAArC,IAA8ChE,CAAC,CAACpxB,CAAF,KAAQ,KAAKA,CAAlE;AAEA,OAre8B;AAue/B6uD,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAK+U,CAAL,GAASmM,KAAK,CAAElhB,MAAF,CAAd;AACA,aAAKkZ,CAAL,GAASgI,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AACA,aAAKlc,CAAL,GAASo9B,KAAK,CAAElhB,MAAM,GAAG,CAAX,CAAd;AAEA,eAAO,IAAP;AAEA,OAjf8B;AAmf/B4yC,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5BkhB,aAAK,CAAElhB,MAAF,CAAL,GAAkB,KAAK+U,CAAvB;AACAmM,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKkZ,CAA3B;AACAgI,aAAK,CAAElhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKlc,CAA3B;AAEA,eAAOo9B,KAAP;AAEA,OA9f8B;AAggB/B2xB,yBAAmB,EAAE,6BAAWC,SAAX,EAAsB1nC,KAAtB,EAA8B;AAElD,aAAK2J,CAAL,GAAS+9B,SAAS,CAACC,IAAV,CAAgB3nC,KAAhB,CAAT;AACA,aAAK8N,CAAL,GAAS45B,SAAS,CAACE,IAAV,CAAgB5nC,KAAhB,CAAT;AACA,aAAKtnB,CAAL,GAASgvD,SAAS,CAACuI,IAAV,CAAgBjwC,KAAhB,CAAT;;AAEA,YAAK0nC,SAAS,CAACupB,UAAV,KAAyB,IAA9B,EAAqC;AAEpC;AAEA,eAAKtnD,CAAL,IAAU,GAAV;AACA,eAAKmE,CAAL,IAAU,GAAV;AACA,eAAKp1B,CAAL,IAAU,GAAV;AAEA;;AAED,eAAO,IAAP;AAEA,OAlhB8B;AAohB/Bq1D,YAAM,EAAE,kBAAY;AAEnB,eAAO,KAAKsiB,MAAL,EAAP;AAEA;AAxhB8B,KAAhC;AA4hBAxB,SAAK,CAACqC,KAAN,GAAcxC,cAAd;;AAEA,aAASyC,KAAT,CAAgB14E,CAAhB,EAAmBC,CAAnB,EAAsBoxB,CAAtB,EAAyBmtC,MAAzB,EAAiCpuC,KAAjC,EAAwCuoD,aAAxC,EAAwD;AAEvD,WAAK34E,CAAL,GAASA,CAAT;AACA,WAAKC,CAAL,GAASA,CAAT;AACA,WAAKoxB,CAAL,GAASA,CAAT;AAEA,WAAKmtC,MAAL,GAAgBA,MAAM,IAAIA,MAAM,CAAC/B,SAAnB,GAAiC+B,MAAjC,GAA0C,IAAIjC,OAAJ,EAAxD;AACA,WAAKqc,aAAL,GAAqB1mD,KAAK,CAAC0jC,OAAN,CAAe4I,MAAf,IAA0BA,MAA1B,GAAmC,EAAxD;AAEA,WAAKpuC,KAAL,GAAeA,KAAK,IAAIA,KAAK,CAACqmD,OAAjB,GAA6BrmD,KAA7B,GAAqC,IAAIgmD,KAAJ,EAAlD;AACA,WAAKyC,YAAL,GAAoB3mD,KAAK,CAAC0jC,OAAN,CAAexlC,KAAf,IAAyBA,KAAzB,GAAiC,EAArD;AAEA,WAAKuoD,aAAL,GAAqBA,aAAa,KAAK9pE,SAAlB,GAA8B8pE,aAA9B,GAA8C,CAAnE;AAEA;;AAED32E,UAAM,CAACiiC,MAAP,CAAey0C,KAAK,CAAC/gE,SAArB,EAAgC;AAE/BoD,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAN8B;AAQ/BA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAKp9C,CAAL,GAASo9C,MAAM,CAACp9C,CAAhB;AACA,aAAKC,CAAL,GAASm9C,MAAM,CAACn9C,CAAhB;AACA,aAAKoxB,CAAL,GAAS+rB,MAAM,CAAC/rB,CAAhB;AAEA,aAAKmtC,MAAL,CAAY7iD,IAAZ,CAAkByhC,MAAM,CAACohB,MAAzB;AACA,aAAKpuC,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,aAAKuoD,aAAL,GAAqBv7B,MAAM,CAACu7B,aAA5B;;AAEA,aAAM,IAAIl4E,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGlvB,MAAM,CAACw7B,aAAP,CAAqB94E,MAA3C,EAAmDW,IAAC,GAAG6rE,EAAvD,EAA2D7rE,IAAC,EAA5D,EAAkE;AAEjE,eAAKm4E,aAAL,CAAoBn4E,IAApB,IAA0B28C,MAAM,CAACw7B,aAAP,CAAsBn4E,IAAtB,EAA0Bsa,KAA1B,EAA1B;AAEA;;AAED,aAAM,IAAIta,IAAC,GAAG,CAAR,EAAW6rE,GAAE,GAAGlvB,MAAM,CAACy7B,YAAP,CAAoB/4E,MAA1C,EAAkDW,IAAC,GAAG6rE,GAAtD,EAA0D7rE,IAAC,EAA3D,EAAiE;AAEhE,eAAKo4E,YAAL,CAAmBp4E,IAAnB,IAAyB28C,MAAM,CAACy7B,YAAP,CAAqBp4E,IAArB,EAAyBsa,KAAzB,EAAzB;AAEA;;AAED,eAAO,IAAP;AAEA;AAjC8B,KAAhC;AAqCA,QAAI+9D,UAAU,GAAG,CAAjB;;AAEA,aAASC,QAAT,GAAoB;AAEnB/2E,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAE3yC,aAAK,EAAEuuE,UAAU;AAAnB,OAAnC;AAEA,WAAK1uB,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAKvqD,IAAL,GAAY,EAAZ;AACA,WAAK2F,IAAL,GAAY,UAAZ;AAEA,WAAKslE,GAAL,GAAW,IAAX;AAEA,WAAKuO,QAAL,GAAgBz6B,cAAhB;AACA,WAAK06B,IAAL,GAAYh7B,SAAZ;AACA,WAAKi7B,WAAL,GAAmB,KAAnB;AACA,WAAKL,YAAL,GAAoB,KAApB;AAEA,WAAKM,OAAL,GAAe,CAAf;AACA,WAAKC,WAAL,GAAmB,KAAnB;AAEA,WAAKC,QAAL,GAAgBh6B,cAAhB;AACA,WAAKi6B,QAAL,GAAgBh6B,sBAAhB;AACA,WAAKi6B,aAAL,GAAqB36B,WAArB;AACA,WAAK46B,aAAL,GAAqB,IAArB;AACA,WAAKC,aAAL,GAAqB,IAArB;AACA,WAAKC,kBAAL,GAA0B,IAA1B;AAEA,WAAKC,SAAL,GAAiB55B,cAAjB;AACA,WAAK65B,SAAL,GAAiB,IAAjB;AACA,WAAKC,UAAL,GAAkB,IAAlB;AAEA,WAAKC,gBAAL,GAAwB,IAAxB;AACA,WAAKC,WAAL,GAAmBnxB,iBAAnB;AACA,WAAKoxB,UAAL,GAAkB,CAAlB;AACA,WAAKC,eAAL,GAAuB,IAAvB;AACA,WAAKC,WAAL,GAAmBpyB,aAAnB;AACA,WAAKqyB,YAAL,GAAoBryB,aAApB;AACA,WAAKsyB,YAAL,GAAoBtyB,aAApB;AACA,WAAKuyB,YAAL,GAAoB,KAApB;AAEA,WAAKC,cAAL,GAAsB,IAAtB;AACA,WAAKC,gBAAL,GAAwB,KAAxB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AAEA,WAAKC,UAAL,GAAkB,IAAlB;AAEA,WAAKC,UAAL,GAAkB,IAAlB;AAEA,WAAKC,SAAL,GAAiB,IAAjB,CA/CmB,CA+CI;;AAEvB,WAAKC,aAAL,GAAqB,KAArB;AACA,WAAKC,mBAAL,GAA2B,CAA3B;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AAEA,WAAKC,SAAL,GAAiB,KAAjB;AAEA,WAAKC,SAAL,GAAiB,CAAjB;AACA,WAAKC,kBAAL,GAA0B,KAA1B;AAEA,WAAKzU,OAAL,GAAe,IAAf;AAEA,WAAK0U,UAAL,GAAkB,IAAlB;AAEA,WAAKtU,QAAL,GAAgB,EAAhB;AAEA,WAAKnuC,OAAL,GAAe,CAAf;AAEA;;AAEDsgD,YAAQ,CAACphE,SAAT,GAAqB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAE/E0M,iBAAW,EAAE00D,QAFkE;AAI/EoC,gBAAU,EAAE,IAJmE;AAM/EC,qBAAe,EAAE;AAAW;AAA+B,OAAE,CANkB;AAQ/EC,2BAAqB,EAAE,iCAAY;AAElC,eAAO,KAAKD,eAAL,CAAqB1gD,QAArB,EAAP;AAEA,OAZ8E;AAc/E4gD,eAAS,EAAE,mBAAWlR,MAAX,EAAoB;AAE9B,YAAKA,MAAM,KAAKv7D,SAAhB,EAA4B;;AAE5B,aAAM,IAAMw7D,GAAZ,IAAmBD,MAAnB,EAA4B;AAE3B,cAAMmR,QAAQ,GAAGnR,MAAM,CAAEC,GAAF,CAAvB;;AAEA,cAAKkR,QAAQ,KAAK1sE,SAAlB,EAA8B;AAE7BjN,mBAAO,CAAC2W,IAAR,CAAc,sBAAsB8xD,GAAtB,GAA4B,2BAA1C;AACA;AAEA,WAT0B,CAW3B;;;AACA,cAAKA,GAAG,KAAK,SAAb,EAAyB;AAExBzoE,mBAAO,CAAC2W,IAAR,CAAc,WAAW,KAAKpT,IAAhB,GAAuB,oEAArC;AACA,iBAAK+zE,WAAL,GAAqBqC,QAAQ,KAAKn9B,WAAf,GAA+B,IAA/B,GAAsC,KAAzD;AACA;AAEA;;AAED,cAAMo9B,YAAY,GAAG,KAAMnR,GAAN,CAArB;;AAEA,cAAKmR,YAAY,KAAK3sE,SAAtB,EAAkC;AAEjCjN,mBAAO,CAAC2W,IAAR,CAAc,WAAW,KAAKpT,IAAhB,GAAuB,KAAvB,GAA+BklE,GAA/B,GAAqC,uCAAnD;AACA;AAEA;;AAED,cAAKmR,YAAY,IAAIA,YAAY,CAAC/E,OAAlC,EAA4C;AAE3C+E,wBAAY,CAAC19D,GAAb,CAAkBy9D,QAAlB;AAEA,WAJD,MAIO,IAAOC,YAAY,IAAIA,YAAY,CAAC/e,SAA/B,IAAgD8e,QAAQ,IAAIA,QAAQ,CAAC9e,SAA1E,EAAwF;AAE9F+e,wBAAY,CAAC7/D,IAAb,CAAmB4/D,QAAnB;AAEA,WAJM,MAIA;AAEN,iBAAMlR,GAAN,IAAckR,QAAd;AAEA;AAED;AAED,OA/D8E;AAiE/EjmB,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAMunD,MAAM,GAAKvnD,IAAI,KAAKrlB,SAAT,IAAsB,OAAOqlB,IAAP,KAAgB,QAAvD;;AAEA,YAAKunD,MAAL,EAAc;AAEbvnD,cAAI,GAAG;AACNshC,oBAAQ,EAAE,EADJ;AAENG,kBAAM,EAAE;AAFF,WAAP;AAKA;;AAED,YAAMr2D,IAAI,GAAG;AACZm2D,kBAAQ,EAAE;AACTh9B,mBAAO,EAAE,GADA;AAETtzB,gBAAI,EAAE,UAFG;AAGTuwD,qBAAS,EAAE;AAHF;AADE,SAAb,CAbyB,CAqBzB;;AACAp2D,YAAI,CAAC8qD,IAAL,GAAY,KAAKA,IAAjB;AACA9qD,YAAI,CAAC6F,IAAL,GAAY,KAAKA,IAAjB;AAEA,YAAK,KAAK3F,IAAL,KAAc,EAAnB,EAAwBF,IAAI,CAACE,IAAL,GAAY,KAAKA,IAAjB;AAExB,YAAK,KAAK4wB,KAAL,IAAc,KAAKA,KAAL,CAAWqmD,OAA9B,EAAwCn3E,IAAI,CAAC8wB,KAAL,GAAa,KAAKA,KAAL,CAAWwnD,MAAX,EAAb;AAExC,YAAK,KAAK8D,SAAL,KAAmB7sE,SAAxB,EAAoCvP,IAAI,CAACo8E,SAAL,GAAiB,KAAKA,SAAtB;AACpC,YAAK,KAAKC,SAAL,KAAmB9sE,SAAxB,EAAoCvP,IAAI,CAACq8E,SAAL,GAAiB,KAAKA,SAAtB;AAEpC,YAAK,KAAKC,KAAL,IAAc,KAAKA,KAAL,CAAWnF,OAA9B,EAAwCn3E,IAAI,CAACs8E,KAAL,GAAa,KAAKA,KAAL,CAAWhE,MAAX,EAAb;AACxC,YAAK,KAAKiE,QAAL,IAAiB,KAAKA,QAAL,CAAcpF,OAApC,EAA8Cn3E,IAAI,CAACu8E,QAAL,GAAgB,KAAKA,QAAL,CAAcjE,MAAd,EAAhB;AAC9C,YAAK,KAAKkE,iBAAL,IAA0B,KAAKA,iBAAL,KAA2B,CAA1D,EAA8Dx8E,IAAI,CAACw8E,iBAAL,GAAyB,KAAKA,iBAA9B;AAE9D,YAAK,KAAKC,QAAL,IAAiB,KAAKA,QAAL,CAActF,OAApC,EAA8Cn3E,IAAI,CAACy8E,QAAL,GAAgB,KAAKA,QAAL,CAAcnE,MAAd,EAAhB;AAC9C,YAAK,KAAKoE,SAAL,KAAmBntE,SAAxB,EAAoCvP,IAAI,CAAC08E,SAAL,GAAiB,KAAKA,SAAtB;AACpC,YAAK,KAAKC,SAAL,KAAmBptE,SAAxB,EAAoCvP,IAAI,CAAC28E,SAAL,GAAiB,KAAKA,SAAtB;AACpC,YAAK,KAAKC,kBAAL,KAA4BrtE,SAAjC,EAA6CvP,IAAI,CAAC48E,kBAAL,GAA0B,KAAKA,kBAA/B;;AAE7C,YAAK,KAAKC,YAAL,IAAqB,KAAKA,YAAL,CAAkB/mB,SAA5C,EAAwD;AAEvD91D,cAAI,CAAC68E,YAAL,GAAoB,KAAKA,YAAL,CAAkB7mB,MAAlB,CAA0BphC,IAA1B,EAAiCk2B,IAArD;AAEA;;AAED,YAAK,KAAKgyB,qBAAL,IAA8B,KAAKA,qBAAL,CAA2BhnB,SAA9D,EAA0E;AAEzE91D,cAAI,CAAC88E,qBAAL,GAA6B,KAAKA,qBAAL,CAA2B9mB,MAA3B,CAAmCphC,IAAnC,EAA0Ck2B,IAAvE;AAEA;;AAED,YAAK,KAAKiyB,kBAAL,IAA2B,KAAKA,kBAAL,CAAwBjnB,SAAxD,EAAoE;AAEnE91D,cAAI,CAAC+8E,kBAAL,GAA0B,KAAKA,kBAAL,CAAwB/mB,MAAxB,CAAgCphC,IAAhC,EAAuCk2B,IAAjE;AACA9qD,cAAI,CAACg9E,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BvtB,OAA1B,EAA5B;AAEA;;AAED,YAAK,KAAKthD,GAAL,IAAY,KAAKA,GAAL,CAAS2nD,SAA1B,EAAsC91D,IAAI,CAACmO,GAAL,GAAW,KAAKA,GAAL,CAAS6nD,MAAT,CAAiBphC,IAAjB,EAAwBk2B,IAAnC;AACtC,YAAK,KAAKmyB,MAAL,IAAe,KAAKA,MAAL,CAAYnnB,SAAhC,EAA4C91D,IAAI,CAACi9E,MAAL,GAAc,KAAKA,MAAL,CAAYjnB,MAAZ,CAAoBphC,IAApB,EAA2Bk2B,IAAzC;AAC5C,YAAK,KAAKoyB,QAAL,IAAiB,KAAKA,QAAL,CAAcpnB,SAApC,EAAgD91D,IAAI,CAACk9E,QAAL,GAAgB,KAAKA,QAAL,CAAclnB,MAAd,CAAsBphC,IAAtB,EAA6Bk2B,IAA7C;AAChD,YAAK,KAAKqyB,QAAL,IAAiB,KAAKA,QAAL,CAAcrnB,SAApC,EAAgD91D,IAAI,CAACm9E,QAAL,GAAgB,KAAKA,QAAL,CAAcnnB,MAAd,CAAsBphC,IAAtB,EAA6Bk2B,IAA7C;;AAEhD,YAAK,KAAKsyB,KAAL,IAAc,KAAKA,KAAL,CAAWtnB,SAA9B,EAA0C;AAEzC91D,cAAI,CAACo9E,KAAL,GAAa,KAAKA,KAAL,CAAWpnB,MAAX,CAAmBphC,IAAnB,EAA0Bk2B,IAAvC;AACA9qD,cAAI,CAACq9E,cAAL,GAAsB,KAAKA,cAA3B;AAEA;;AAED,YAAK,KAAKC,OAAL,IAAgB,KAAKA,OAAL,CAAaxnB,SAAlC,EAA8C;AAE7C91D,cAAI,CAACs9E,OAAL,GAAe,KAAKA,OAAL,CAAatnB,MAAb,CAAqBphC,IAArB,EAA4Bk2B,IAA3C;AACA9qD,cAAI,CAACu9E,SAAL,GAAiB,KAAKA,SAAtB;AAEA;;AAED,YAAK,KAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAe1nB,SAAtC,EAAkD;AAEjD91D,cAAI,CAACw9E,SAAL,GAAiB,KAAKA,SAAL,CAAexnB,MAAf,CAAuBphC,IAAvB,EAA8Bk2B,IAA/C;AACA9qD,cAAI,CAACy9E,aAAL,GAAqB,KAAKA,aAA1B;AACAz9E,cAAI,CAAC09E,WAAL,GAAmB,KAAKA,WAAL,CAAiBjuB,OAAjB,EAAnB;AAEA;;AAED,YAAK,KAAKkuB,eAAL,IAAwB,KAAKA,eAAL,CAAqB7nB,SAAlD,EAA8D;AAE7D91D,cAAI,CAAC29E,eAAL,GAAuB,KAAKA,eAAL,CAAqB3nB,MAArB,CAA6BphC,IAA7B,EAAoCk2B,IAA3D;AACA9qD,cAAI,CAAC49E,iBAAL,GAAyB,KAAKA,iBAA9B;AACA59E,cAAI,CAAC69E,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA;;AAED,YAAK,KAAKC,YAAL,IAAqB,KAAKA,YAAL,CAAkBhoB,SAA5C,EAAwD91D,IAAI,CAAC89E,YAAL,GAAoB,KAAKA,YAAL,CAAkB9nB,MAAlB,CAA0BphC,IAA1B,EAAiCk2B,IAArD;AACxD,YAAK,KAAKizB,YAAL,IAAqB,KAAKA,YAAL,CAAkBjoB,SAA5C,EAAwD91D,IAAI,CAAC+9E,YAAL,GAAoB,KAAKA,YAAL,CAAkB/nB,MAAlB,CAA0BphC,IAA1B,EAAiCk2B,IAArD;AAExD,YAAK,KAAKkzB,WAAL,IAAoB,KAAKA,WAAL,CAAiBloB,SAA1C,EAAsD91D,IAAI,CAACg+E,WAAL,GAAmB,KAAKA,WAAL,CAAiBhoB,MAAjB,CAAyBphC,IAAzB,EAAgCk2B,IAAnD;AACtD,YAAK,KAAKmzB,WAAL,IAAoB,KAAKA,WAAL,CAAiBnoB,SAA1C,EAAsD91D,IAAI,CAACi+E,WAAL,GAAmB,KAAKA,WAAL,CAAiBjoB,MAAjB,CAAyBphC,IAAzB,EAAgCk2B,IAAnD;;AAEtD,YAAK,KAAKozB,MAAL,IAAe,KAAKA,MAAL,CAAYpoB,SAAhC,EAA4C;AAE3C91D,cAAI,CAACk+E,MAAL,GAAc,KAAKA,MAAL,CAAYloB,MAAZ,CAAoBphC,IAApB,EAA2Bk2B,IAAzC;AACA9qD,cAAI,CAACm+E,YAAL,GAAoB,KAAKA,YAAzB,CAH2C,CAGJ;;AACvCn+E,cAAI,CAACo+E,eAAL,GAAuB,KAAKA,eAA5B;AAEA,cAAK,KAAKC,OAAL,KAAiB9uE,SAAtB,EAAkCvP,IAAI,CAACq+E,OAAL,GAAe,KAAKA,OAApB;AAClC,cAAK,KAAKC,eAAL,KAAyB/uE,SAA9B,EAA0CvP,IAAI,CAACs+E,eAAL,GAAuB,KAAKA,eAA5B;AAE1C;;AAED,YAAK,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBzoB,SAA1C,EAAsD;AAErD91D,cAAI,CAACu+E,WAAL,GAAmB,KAAKA,WAAL,CAAiBvoB,MAAjB,CAAyBphC,IAAzB,EAAgCk2B,IAAnD;AAEA;;AAED,YAAK,KAAK7zC,IAAL,KAAc1H,SAAnB,EAA+BvP,IAAI,CAACiX,IAAL,GAAY,KAAKA,IAAjB;AAC/B,YAAK,KAAKunE,eAAL,KAAyBjvE,SAA9B,EAA0CvP,IAAI,CAACw+E,eAAL,GAAuB,KAAKA,eAA5B;AAE1C,YAAK,KAAK9E,QAAL,KAAkBz6B,cAAvB,EAAwCj/C,IAAI,CAAC05E,QAAL,GAAgB,KAAKA,QAArB;AACxC,YAAK,KAAKE,WAAL,KAAqB,IAA1B,EAAiC55E,IAAI,CAAC45E,WAAL,GAAmB,KAAKA,WAAxB;AACjC,YAAK,KAAKD,IAAL,KAAch7B,SAAnB,EAA+B3+C,IAAI,CAAC25E,IAAL,GAAY,KAAKA,IAAjB;AAC/B,YAAK,KAAKJ,YAAV,EAAyBv5E,IAAI,CAACu5E,YAAL,GAAoB,IAApB;AAEzB,YAAK,KAAKM,OAAL,GAAe,CAApB,EAAwB75E,IAAI,CAAC65E,OAAL,GAAe,KAAKA,OAApB;AACxB,YAAK,KAAKC,WAAL,KAAqB,IAA1B,EAAiC95E,IAAI,CAAC85E,WAAL,GAAmB,KAAKA,WAAxB;AAEjC95E,YAAI,CAACq6E,SAAL,GAAiB,KAAKA,SAAtB;AACAr6E,YAAI,CAACs6E,SAAL,GAAiB,KAAKA,SAAtB;AACAt6E,YAAI,CAACu6E,UAAL,GAAkB,KAAKA,UAAvB;AAEAv6E,YAAI,CAAC+6E,YAAL,GAAoB,KAAKA,YAAzB;AACA/6E,YAAI,CAACw6E,gBAAL,GAAwB,KAAKA,gBAA7B;AACAx6E,YAAI,CAACy6E,WAAL,GAAmB,KAAKA,WAAxB;AACAz6E,YAAI,CAAC06E,UAAL,GAAkB,KAAKA,UAAvB;AACA16E,YAAI,CAAC26E,eAAL,GAAuB,KAAKA,eAA5B;AACA36E,YAAI,CAAC46E,WAAL,GAAmB,KAAKA,WAAxB;AACA56E,YAAI,CAAC66E,YAAL,GAAoB,KAAKA,YAAzB;AACA76E,YAAI,CAAC86E,YAAL,GAAoB,KAAKA,YAAzB,CA5IyB,CA8IzB;;AACA,YAAK,KAAKz/B,QAAL,IAAiB,KAAKA,QAAL,KAAkB,CAAxC,EAA4Cr7C,IAAI,CAACq7C,QAAL,GAAgB,KAAKA,QAArB;AAE5C,YAAK,KAAKigC,aAAL,KAAuB,IAA5B,EAAmCt7E,IAAI,CAACs7E,aAAL,GAAqB,IAArB;AACnC,YAAK,KAAKC,mBAAL,KAA6B,CAAlC,EAAsCv7E,IAAI,CAACu7E,mBAAL,GAA2B,KAAKA,mBAAhC;AACtC,YAAK,KAAKC,kBAAL,KAA4B,CAAjC,EAAqCx7E,IAAI,CAACw7E,kBAAL,GAA0B,KAAKA,kBAA/B;AAErC,YAAK,KAAKiD,SAAL,IAAkB,KAAKA,SAAL,KAAmB,CAA1C,EAA8Cz+E,IAAI,CAACy+E,SAAL,GAAiB,KAAKA,SAAtB;AAC9C,YAAK,KAAKC,QAAL,KAAkBnvE,SAAvB,EAAmCvP,IAAI,CAAC0+E,QAAL,GAAgB,KAAKA,QAArB;AACnC,YAAK,KAAKC,OAAL,KAAiBpvE,SAAtB,EAAkCvP,IAAI,CAAC2+E,OAAL,GAAe,KAAKA,OAApB;AAClC,YAAK,KAAK1gE,KAAL,KAAe1O,SAApB,EAAgCvP,IAAI,CAACie,KAAL,GAAa,KAAKA,KAAlB;AAEhC,YAAK,KAAKw9D,SAAL,KAAmB,IAAxB,EAA+Bz7E,IAAI,CAACy7E,SAAL,GAAiB,IAAjB;AAE/B,YAAK,KAAKC,SAAL,GAAiB,CAAtB,EAA0B17E,IAAI,CAAC07E,SAAL,GAAiB,KAAKA,SAAtB;AAC1B,YAAK,KAAKC,kBAAL,KAA4B,IAAjC,EAAwC37E,IAAI,CAAC27E,kBAAL,GAA0B,KAAKA,kBAA/B;AAExC,YAAK,KAAKiD,SAAL,KAAmB,IAAxB,EAA+B5+E,IAAI,CAAC4+E,SAAL,GAAiB,KAAKA,SAAtB;AAC/B,YAAK,KAAKC,kBAAL,GAA0B,CAA/B,EAAmC7+E,IAAI,CAAC6+E,kBAAL,GAA0B,KAAKA,kBAA/B;AACnC,YAAK,KAAKC,gBAAL,KAA0B,OAA/B,EAAyC9+E,IAAI,CAAC8+E,gBAAL,GAAwB,KAAKA,gBAA7B;AACzC,YAAK,KAAKC,iBAAL,KAA2B,OAAhC,EAA0C/+E,IAAI,CAAC++E,iBAAL,GAAyB,KAAKA,iBAA9B;AAE1C,YAAK,KAAKC,YAAL,KAAsB,IAA3B,EAAkCh/E,IAAI,CAACg/E,YAAL,GAAoB,IAApB;AAClC,YAAK,KAAKC,YAAL,KAAsB,IAA3B,EAAkCj/E,IAAI,CAACi/E,YAAL,GAAoB,IAApB;AAClC,YAAK,KAAKC,QAAL,KAAkB,IAAvB,EAA8Bl/E,IAAI,CAACk/E,QAAL,GAAgB,IAAhB;AAE9B,YAAK,KAAKhY,OAAL,KAAiB,KAAtB,EAA8BlnE,IAAI,CAACknE,OAAL,GAAe,KAAf;AAE9B,YAAK,KAAK0U,UAAL,KAAoB,KAAzB,EAAiC57E,IAAI,CAAC47E,UAAL,GAAkB,KAAlB;AAEjC,YAAKl1D,IAAI,CAACE,SAAL,CAAgB,KAAK0gD,QAArB,MAAoC,IAAzC,EAAgDtnE,IAAI,CAACsnE,QAAL,GAAgB,KAAKA,QAArB,CA5KvB,CA8KzB;;AAEA,iBAASsD,gBAAT,CAA2BC,KAA3B,EAAmC;AAElC,cAAMC,MAAM,GAAG,EAAf;;AAEA,eAAM,IAAMC,GAAZ,IAAmBF,KAAnB,EAA2B;AAE1B,gBAAM7qE,KAAI,GAAG6qE,KAAK,CAAEE,GAAF,CAAlB;AACA,mBAAO/qE,KAAI,CAACm2D,QAAZ;AACA2U,kBAAM,CAACjpE,IAAP,CAAa7B,KAAb;AAEA;;AAED,iBAAO8qE,MAAP;AAEA;;AAED,YAAKqR,MAAL,EAAc;AAEb,cAAMjmB,QAAQ,GAAG0U,gBAAgB,CAAEh2C,IAAI,CAACshC,QAAP,CAAjC;AACA,cAAMG,MAAM,GAAGuU,gBAAgB,CAAEh2C,IAAI,CAACyhC,MAAP,CAA/B;AAEA,cAAKH,QAAQ,CAAC11D,MAAT,GAAkB,CAAvB,EAA2BR,IAAI,CAACk2D,QAAL,GAAgBA,QAAhB;AAC3B,cAAKG,MAAM,CAAC71D,MAAP,GAAgB,CAArB,EAAyBR,IAAI,CAACq2D,MAAL,GAAcA,MAAd;AAEzB;;AAED,eAAOr2D,IAAP;AAEA,OA7Q8E;AA+Q/Eyb,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAnR8E;AAqR/EA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAK59C,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB;AAEA,aAAKirE,GAAL,GAAWrtB,MAAM,CAACqtB,GAAlB;AAEA,aAAKuO,QAAL,GAAgB57B,MAAM,CAAC47B,QAAvB;AACA,aAAKC,IAAL,GAAY77B,MAAM,CAAC67B,IAAnB;AACA,aAAKC,WAAL,GAAmB97B,MAAM,CAAC87B,WAA1B;AACA,aAAKL,YAAL,GAAoBz7B,MAAM,CAACy7B,YAA3B;AAEA,aAAKM,OAAL,GAAe/7B,MAAM,CAAC+7B,OAAtB;AACA,aAAKC,WAAL,GAAmBh8B,MAAM,CAACg8B,WAA1B;AAEA,aAAKC,QAAL,GAAgBj8B,MAAM,CAACi8B,QAAvB;AACA,aAAKC,QAAL,GAAgBl8B,MAAM,CAACk8B,QAAvB;AACA,aAAKC,aAAL,GAAqBn8B,MAAM,CAACm8B,aAA5B;AACA,aAAKC,aAAL,GAAqBp8B,MAAM,CAACo8B,aAA5B;AACA,aAAKC,aAAL,GAAqBr8B,MAAM,CAACq8B,aAA5B;AACA,aAAKC,kBAAL,GAA0Bt8B,MAAM,CAACs8B,kBAAjC;AAEA,aAAKC,SAAL,GAAiBv8B,MAAM,CAACu8B,SAAxB;AACA,aAAKC,SAAL,GAAiBx8B,MAAM,CAACw8B,SAAxB;AACA,aAAKC,UAAL,GAAkBz8B,MAAM,CAACy8B,UAAzB;AAEA,aAAKC,gBAAL,GAAwB18B,MAAM,CAAC08B,gBAA/B;AACA,aAAKC,WAAL,GAAmB38B,MAAM,CAAC28B,WAA1B;AACA,aAAKC,UAAL,GAAkB58B,MAAM,CAAC48B,UAAzB;AACA,aAAKC,eAAL,GAAuB78B,MAAM,CAAC68B,eAA9B;AACA,aAAKC,WAAL,GAAmB98B,MAAM,CAAC88B,WAA1B;AACA,aAAKC,YAAL,GAAoB/8B,MAAM,CAAC+8B,YAA3B;AACA,aAAKC,YAAL,GAAoBh9B,MAAM,CAACg9B,YAA3B;AACA,aAAKC,YAAL,GAAoBj9B,MAAM,CAACi9B,YAA3B;AAEA,YAAMoE,SAAS,GAAGrhC,MAAM,CAACk9B,cAAzB;AACA,YAAIoE,SAAS,GAAG,IAAhB;;AAEA,YAAKD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,cAAMrtD,CAAC,GAAGqtD,SAAS,CAAC3+E,MAApB;AACA4+E,mBAAS,GAAG,IAAIxsD,KAAJ,CAAWd,CAAX,CAAZ;;AAEA,eAAM,IAAI3wB,IAAC,GAAG,CAAd,EAAiBA,IAAC,KAAK2wB,CAAvB,EAA0B,EAAG3wB,IAA7B,EAAiC;AAEhCi+E,qBAAS,CAAEj+E,IAAF,CAAT,GAAiBg+E,SAAS,CAAEh+E,IAAF,CAAT,CAAesa,KAAf,EAAjB;AAEA;AAED;;AAED,aAAKu/D,cAAL,GAAsBoE,SAAtB;AACA,aAAKnE,gBAAL,GAAwBn9B,MAAM,CAACm9B,gBAA/B;AACA,aAAKC,WAAL,GAAmBp9B,MAAM,CAACo9B,WAA1B;AAEA,aAAKC,UAAL,GAAkBr9B,MAAM,CAACq9B,UAAzB;AAEA,aAAKC,UAAL,GAAkBt9B,MAAM,CAACs9B,UAAzB;AAEA,aAAKC,SAAL,GAAiBv9B,MAAM,CAACu9B,SAAxB;AAEA,aAAKC,aAAL,GAAqBx9B,MAAM,CAACw9B,aAA5B;AACA,aAAKC,mBAAL,GAA2Bz9B,MAAM,CAACy9B,mBAAlC;AACA,aAAKC,kBAAL,GAA0B19B,MAAM,CAAC09B,kBAAjC;AAEA,aAAKC,SAAL,GAAiB39B,MAAM,CAAC29B,SAAxB;AAEA,aAAKC,SAAL,GAAiB59B,MAAM,CAAC49B,SAAxB;AACA,aAAKC,kBAAL,GAA0B79B,MAAM,CAAC69B,kBAAjC;AAEA,aAAKzU,OAAL,GAAeppB,MAAM,CAACopB,OAAtB;AAEA,aAAK0U,UAAL,GAAkB99B,MAAM,CAAC89B,UAAzB;AAEA,aAAKtU,QAAL,GAAgB5gD,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,SAAL,CAAgBk3B,MAAM,CAACwpB,QAAvB,CAAZ,CAAhB;AAEA,eAAO,IAAP;AAEA,OAlW8E;AAoW/ExoD,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA;AAxW8E,KAA3D,CAArB;AA4WAnD,UAAM,CAACk7C,cAAP,CAAuB67B,QAAQ,CAACphE,SAAhC,EAA2C,aAA3C,EAA0D;AAEzDmG,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,YAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKkuB,OAAL;AAEtB;AANwD,KAA1D;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,aAASkmD,iBAAT,CAA4B3U,UAA5B,EAAyC;AAExC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb,CANwC,CAMJ;;AAEpC,WAAK3oE,GAAL,GAAW,IAAX;AAEA,WAAKgvE,QAAL,GAAgB,IAAhB;AACA,WAAKmC,iBAAL,GAAyB,GAAzB;AAEA,WAAKlC,KAAL,GAAa,IAAb;AACA,WAAKC,cAAL,GAAsB,GAAtB;AAEA,WAAKY,WAAL,GAAmB,IAAnB;AAEA,WAAKf,QAAL,GAAgB,IAAhB;AAEA,WAAKgB,MAAL,GAAc,IAAd;AACA,WAAKG,OAAL,GAAev9B,iBAAf;AACA,WAAKq9B,YAAL,GAAoB,CAApB;AACA,WAAKC,eAAL,GAAuB,IAAvB;AAEA,WAAKQ,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AACA,WAAKC,gBAAL,GAAwB,OAAxB;AACA,WAAKC,iBAAL,GAAyB,OAAzB;AAEA,WAAKG,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AAEA,WAAKhD,SAAL,CAAgBtR,UAAhB;AAEA;;AAED2U,qBAAiB,CAAChnE,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA9B;AACAgnE,qBAAiB,CAAChnE,SAAlB,CAA4B0M,WAA5B,GAA0Cs6D,iBAA1C;AAEAA,qBAAiB,CAAChnE,SAAlB,CAA4BknE,mBAA5B,GAAkD,IAAlD;;AAEAF,qBAAiB,CAAChnE,SAAlB,CAA4BgE,IAA5B,GAAmC,UAAWyhC,MAAX,EAAoB;AAEtD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK3iB,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAKgvE,QAAL,GAAgBr/B,MAAM,CAACq/B,QAAvB;AACA,WAAKmC,iBAAL,GAAyBxhC,MAAM,CAACwhC,iBAAhC;AAEA,WAAKlC,KAAL,GAAat/B,MAAM,CAACs/B,KAApB;AACA,WAAKC,cAAL,GAAsBv/B,MAAM,CAACu/B,cAA7B;AAEA,WAAKY,WAAL,GAAmBngC,MAAM,CAACmgC,WAA1B;AAEA,WAAKf,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKgB,MAAL,GAAcpgC,MAAM,CAACogC,MAArB;AACA,WAAKG,OAAL,GAAevgC,MAAM,CAACugC,OAAtB;AACA,WAAKF,YAAL,GAAoBrgC,MAAM,CAACqgC,YAA3B;AACA,WAAKC,eAAL,GAAuBtgC,MAAM,CAACsgC,eAA9B;AAEA,WAAKQ,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AACA,WAAKC,gBAAL,GAAwBhhC,MAAM,CAACghC,gBAA/B;AACA,WAAKC,iBAAL,GAAyBjhC,MAAM,CAACihC,iBAAhC;AAEA,WAAKG,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAjCD;;AAmCA,QAAMQ,SAAS,GAAG,IAAIviB,OAAJ,EAAlB;;AACA,QAAMwiB,UAAU,GAAG,IAAItyB,OAAJ,EAAnB;;AAEA,aAASuyB,eAAT,CAA0B3hD,KAA1B,EAAiC4hD,QAAjC,EAA2CzG,UAA3C,EAAwD;AAEvD,UAAKtmD,KAAK,CAAC0jC,OAAN,CAAev4B,KAAf,CAAL,EAA8B;AAE7B,cAAM,IAAIgG,SAAJ,CAAe,uDAAf,CAAN;AAEA;;AAED,WAAK7jC,IAAL,GAAY,EAAZ;AAEA,WAAK69B,KAAL,GAAaA,KAAb;AACA,WAAK4hD,QAAL,GAAgBA,QAAhB;AACA,WAAKzV,KAAL,GAAansC,KAAK,KAAKxuB,SAAV,GAAsBwuB,KAAK,CAACv9B,MAAN,GAAem/E,QAArC,GAAgD,CAA7D;AACA,WAAKzG,UAAL,GAAkBA,UAAU,KAAK,IAAjC;AAEA,WAAK0G,KAAL,GAAar2B,eAAb;AACA,WAAKs2B,WAAL,GAAmB;AAAEhjE,cAAM,EAAE,CAAV;AAAaqtD,aAAK,EAAE,CAAE;AAAtB,OAAnB;AAEA,WAAK/wC,OAAL,GAAe,CAAf;AAEA;;AAEDz2B,UAAM,CAACk7C,cAAP,CAAuB8hC,eAAe,CAACrnE,SAAvC,EAAkD,aAAlD,EAAiE;AAEhEmG,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,YAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKkuB,OAAL;AAEtB;AAN+D,KAAjE;AAUAz2B,UAAM,CAACiiC,MAAP,CAAe+6C,eAAe,CAACrnE,SAA/B,EAA0C;AAEzCynE,uBAAiB,EAAE,IAFsB;AAIzCC,sBAAgB,EAAE,4BAAY,CAAE,CAJS;AAMzCC,cAAQ,EAAE,kBAAW/0E,KAAX,EAAmB;AAE5B,aAAK20E,KAAL,GAAa30E,KAAb;AAEA,eAAO,IAAP;AAEA,OAZwC;AAczCoR,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAK59C,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB;AACA,aAAK69B,KAAL,GAAa,IAAI+f,MAAM,CAAC/f,KAAP,CAAahZ,WAAjB,CAA8B+4B,MAAM,CAAC/f,KAArC,CAAb;AACA,aAAK4hD,QAAL,GAAgB7hC,MAAM,CAAC6hC,QAAvB;AACA,aAAKzV,KAAL,GAAapsB,MAAM,CAACosB,KAApB;AACA,aAAKgP,UAAL,GAAkBp7B,MAAM,CAACo7B,UAAzB;AAEA,aAAK0G,KAAL,GAAa9hC,MAAM,CAAC8hC,KAApB;AAEA,eAAO,IAAP;AAEA,OA1BwC;AA4BzCK,YAAM,EAAE,gBAAWC,MAAX,EAAmBvwB,SAAnB,EAA8BwwB,MAA9B,EAAuC;AAE9CD,cAAM,IAAI,KAAKP,QAAf;AACAQ,cAAM,IAAIxwB,SAAS,CAACgwB,QAApB;;AAEA,aAAM,IAAIx+E,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAK+zE,QAA1B,EAAoCx+E,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,eAAK48B,KAAL,CAAYmiD,MAAM,GAAG/+E,IAArB,IAA2BwuD,SAAS,CAAC5xB,KAAV,CAAiBoiD,MAAM,GAAGh/E,IAA1B,CAA3B;AAEA;;AAED,eAAO,IAAP;AAEA,OAzCwC;AA2CzCi/E,eAAS,EAAE,mBAAWriD,KAAX,EAAmB;AAE7B,aAAKA,KAAL,CAAWvf,GAAX,CAAgBuf,KAAhB;AAEA,eAAO,IAAP;AAEA,OAjDwC;AAmDzCsiD,qBAAe,EAAE,yBAAWlwD,MAAX,EAAoB;AAEpC,YAAM4N,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAIlhB,MAAM,GAAG,CAAb;;AAEA,aAAM,IAAI1b,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGukB,MAAM,CAAC3vB,MAA5B,EAAoCW,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,cAAI2vB,KAAK,GAAGX,MAAM,CAAEhvB,IAAF,CAAlB;;AAEA,cAAK2vB,KAAK,KAAKvhB,SAAf,EAA2B;AAE1BjN,mBAAO,CAAC2W,IAAR,CAAc,6DAAd,EAA6E9X,IAA7E;AACA2vB,iBAAK,GAAG,IAAIgmD,KAAJ,EAAR;AAEA;;AAED/4C,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqBiU,KAAK,CAACc,CAA3B;AACAmM,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqBiU,KAAK,CAACiF,CAA3B;AACAgI,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqBiU,KAAK,CAACnwB,CAA3B;AAEA;;AAED,eAAO,IAAP;AAEA,OA3EwC;AA6EzC2/E,uBAAiB,EAAE,2BAAWC,OAAX,EAAqB;AAEvC,YAAMxiD,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAIlhB,MAAM,GAAG,CAAb;;AAEA,aAAM,IAAI1b,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG20E,OAAO,CAAC//E,MAA7B,EAAqCW,IAAC,GAAGyK,CAAzC,EAA4CzK,IAAC,EAA7C,EAAmD;AAElD,cAAIqnE,MAAM,GAAG+X,OAAO,CAAEp/E,IAAF,CAApB;;AAEA,cAAKqnE,MAAM,KAAKj5D,SAAhB,EAA4B;AAE3BjN,mBAAO,CAAC2W,IAAR,CAAc,gEAAd,EAAgF9X,IAAhF;AACAqnE,kBAAM,GAAG,IAAIrb,OAAJ,EAAT;AAEA;;AAEDpvB,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC18D,CAA5B;AACAiyB,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC3lD,CAA5B;AAEA;;AAED,eAAO,IAAP;AAEA,OApGwC;AAsGzC29D,uBAAiB,EAAE,2BAAWD,OAAX,EAAqB;AAEvC,YAAMxiD,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAIlhB,MAAM,GAAG,CAAb;;AAEA,aAAM,IAAI1b,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG20E,OAAO,CAAC//E,MAA7B,EAAqCW,IAAC,GAAGyK,CAAzC,EAA4CzK,IAAC,EAA7C,EAAmD;AAElD,cAAIqnE,MAAM,GAAG+X,OAAO,CAAEp/E,IAAF,CAApB;;AAEA,cAAKqnE,MAAM,KAAKj5D,SAAhB,EAA4B;AAE3BjN,mBAAO,CAAC2W,IAAR,CAAc,gEAAd,EAAgF9X,IAAhF;AACAqnE,kBAAM,GAAG,IAAIvL,OAAJ,EAAT;AAEA;;AAEDl/B,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC18D,CAA5B;AACAiyB,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC3lD,CAA5B;AACAkb,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAACp6C,CAA5B;AAEA;;AAED,eAAO,IAAP;AAEA,OA9HwC;AAgIzCqyD,uBAAiB,EAAE,2BAAWF,OAAX,EAAqB;AAEvC,YAAMxiD,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAIlhB,MAAM,GAAG,CAAb;;AAEA,aAAM,IAAI1b,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG20E,OAAO,CAAC//E,MAA7B,EAAqCW,IAAC,GAAGyK,CAAzC,EAA4CzK,IAAC,EAA7C,EAAmD;AAElD,cAAIqnE,MAAM,GAAG+X,OAAO,CAAEp/E,IAAF,CAApB;;AAEA,cAAKqnE,MAAM,KAAKj5D,SAAhB,EAA4B;AAE3BjN,mBAAO,CAAC2W,IAAR,CAAc,gEAAd,EAAgF9X,IAAhF;AACAqnE,kBAAM,GAAG,IAAI/R,OAAJ,EAAT;AAEA;;AAED14B,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC18D,CAA5B;AACAiyB,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAAC3lD,CAA5B;AACAkb,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAACp6C,CAA5B;AACA2P,eAAK,CAAElhB,MAAM,EAAR,CAAL,GAAqB2rD,MAAM,CAACxyC,CAA5B;AAEA;;AAED,eAAO,IAAP;AAEA,OAzJwC;AA2JzCk4B,kBAAY,EAAE,sBAAWr4B,CAAX,EAAe;AAE5B,YAAK,KAAK8pD,QAAL,KAAkB,CAAvB,EAA2B;AAE1B,eAAM,IAAIx+E,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKs+D,KAA1B,EAAiC/oE,IAAC,GAAGyK,CAArC,EAAwCzK,IAAC,EAAzC,EAA+C;AAE9Cs+E,sBAAU,CAAC/vB,mBAAX,CAAgC,IAAhC,EAAsCvuD,IAAtC;;AACAs+E,sBAAU,CAACvxB,YAAX,CAAyBr4B,CAAzB;;AAEA,iBAAK6qD,KAAL,CAAYv/E,IAAZ,EAAes+E,UAAU,CAAC3zE,CAA1B,EAA6B2zE,UAAU,CAAC58D,CAAxC;AAEA;AAED,SAXD,MAWO,IAAK,KAAK88D,QAAL,KAAkB,CAAvB,EAA2B;AAEjC,eAAM,IAAIx+E,IAAC,GAAG,CAAR,EAAWyK,GAAC,GAAG,KAAKs+D,KAA1B,EAAiC/oE,IAAC,GAAGyK,GAArC,EAAwCzK,IAAC,EAAzC,EAA+C;AAE9Cq+E,qBAAS,CAAC9vB,mBAAV,CAA+B,IAA/B,EAAqCvuD,IAArC;;AACAq+E,qBAAS,CAACtxB,YAAV,CAAwBr4B,CAAxB;;AAEA,iBAAK8qD,MAAL,CAAax/E,IAAb,EAAgBq+E,SAAS,CAAC1zE,CAA1B,EAA6B0zE,SAAS,CAAC38D,CAAvC,EAA0C28D,SAAS,CAACpxD,CAApD;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAvLwC;AAyLzCyoC,kBAAY,EAAE,sBAAWhhC,CAAX,EAAe;AAE5B,aAAM,IAAI10B,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKs+D,KAA1B,EAAiC/oE,IAAC,GAAGyK,CAArC,EAAwCzK,IAAC,EAAzC,EAA+C;AAE9Cq+E,mBAAS,CAAC1zE,CAAV,GAAc,KAAK8jD,IAAL,CAAWzuD,IAAX,CAAd;AACAq+E,mBAAS,CAAC38D,CAAV,GAAc,KAAKgtC,IAAL,CAAW1uD,IAAX,CAAd;AACAq+E,mBAAS,CAACpxD,CAAV,GAAc,KAAK8pC,IAAL,CAAW/2D,IAAX,CAAd;;AAEAq+E,mBAAS,CAAC3oB,YAAV,CAAwBhhC,CAAxB;;AAEA,eAAK8qD,MAAL,CAAax/E,IAAb,EAAgBq+E,SAAS,CAAC1zE,CAA1B,EAA6B0zE,SAAS,CAAC38D,CAAvC,EAA0C28D,SAAS,CAACpxD,CAApD;AAEA;;AAED,eAAO,IAAP;AAEA,OAzMwC;AA2MzCmvC,uBAAiB,EAAE,2BAAW1nC,CAAX,EAAe;AAEjC,aAAM,IAAI10B,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKs+D,KAA1B,EAAiC/oE,IAAC,GAAGyK,CAArC,EAAwCzK,IAAC,EAAzC,EAA+C;AAE9Cq+E,mBAAS,CAAC1zE,CAAV,GAAc,KAAK8jD,IAAL,CAAWzuD,IAAX,CAAd;AACAq+E,mBAAS,CAAC38D,CAAV,GAAc,KAAKgtC,IAAL,CAAW1uD,IAAX,CAAd;AACAq+E,mBAAS,CAACpxD,CAAV,GAAc,KAAK8pC,IAAL,CAAW/2D,IAAX,CAAd;;AAEAq+E,mBAAS,CAACjiB,iBAAV,CAA6B1nC,CAA7B;;AAEA,eAAK8qD,MAAL,CAAax/E,IAAb,EAAgBq+E,SAAS,CAAC1zE,CAA1B,EAA6B0zE,SAAS,CAAC38D,CAAvC,EAA0C28D,SAAS,CAACpxD,CAApD;AAEA;;AAED,eAAO,IAAP;AAEA,OA3NwC;AA6NzCkwC,wBAAkB,EAAE,4BAAWzoC,CAAX,EAAe;AAElC,aAAM,IAAI10B,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKs+D,KAA1B,EAAiC/oE,IAAC,GAAGyK,CAArC,EAAwCzK,IAAC,EAAzC,EAA+C;AAE9Cq+E,mBAAS,CAAC1zE,CAAV,GAAc,KAAK8jD,IAAL,CAAWzuD,IAAX,CAAd;AACAq+E,mBAAS,CAAC38D,CAAV,GAAc,KAAKgtC,IAAL,CAAW1uD,IAAX,CAAd;AACAq+E,mBAAS,CAACpxD,CAAV,GAAc,KAAK8pC,IAAL,CAAW/2D,IAAX,CAAd;;AAEAq+E,mBAAS,CAAClhB,kBAAV,CAA8BzoC,CAA9B;;AAEA,eAAK8qD,MAAL,CAAax/E,IAAb,EAAgBq+E,SAAS,CAAC1zE,CAA1B,EAA6B0zE,SAAS,CAAC38D,CAAvC,EAA0C28D,SAAS,CAACpxD,CAApD;AAEA;;AAED,eAAO,IAAP;AAEA,OA7OwC;AA+OzC5P,SAAG,EAAE,aAAWvT,KAAX,EAAkB4R,MAAlB,EAA2B;AAE/B,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAKkhB,KAAL,CAAWvf,GAAX,CAAgBvT,KAAhB,EAAuB4R,MAAvB;AAEA,eAAO,IAAP;AAEA,OAvPwC;AAyPzC+yC,UAAI,EAAE,cAAW3nC,KAAX,EAAmB;AAExB,eAAO,KAAK8V,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAzB,CAAP;AAEA,OA7PwC;AA+PzCnyB,UAAI,EAAE,cAAWvlC,KAAX,EAAkBnc,CAAlB,EAAsB;AAE3B,aAAKiyB,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAzB,IAAsC7zE,CAAtC;AAEA,eAAO,IAAP;AAEA,OArQwC;AAuQzC+jD,UAAI,EAAE,cAAW5nC,KAAX,EAAmB;AAExB,eAAO,KAAK8V,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,CAAP;AAEA,OA3QwC;AA6QzClyB,UAAI,EAAE,cAAWxlC,KAAX,EAAkBpF,CAAlB,EAAsB;AAE3B,aAAKkb,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,IAA0C98D,CAA1C;AAEA,eAAO,IAAP;AAEA,OAnRwC;AAqRzCq1C,UAAI,EAAE,cAAWjwC,KAAX,EAAmB;AAExB,eAAO,KAAK8V,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,CAAP;AAEA,OAzRwC;AA2RzChpB,UAAI,EAAE,cAAW1uC,KAAX,EAAkBmG,CAAlB,EAAsB;AAE3B,aAAK2P,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,IAA0CvxD,CAA1C;AAEA,eAAO,IAAP;AAEA,OAjSwC;AAmSzC+pC,UAAI,EAAE,cAAWlwC,KAAX,EAAmB;AAExB,eAAO,KAAK8V,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,CAAP;AAEA,OAvSwC;AAySzC/oB,UAAI,EAAE,cAAW3uC,KAAX,EAAkB+N,CAAlB,EAAsB;AAE3B,aAAK+H,KAAL,CAAY9V,KAAK,GAAG,KAAK03D,QAAb,GAAwB,CAApC,IAA0C3pD,CAA1C;AAEA,eAAO,IAAP;AAEA,OA/SwC;AAiTzC0qD,WAAK,EAAE,eAAWz4D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAyB;AAE/BoF,aAAK,IAAI,KAAK03D,QAAd;AAEA,aAAK5hD,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0Bnc,CAA1B;AACA,aAAKiyB,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0BpF,CAA1B;AAEA,eAAO,IAAP;AAEA,OA1TwC;AA4TzC89D,YAAM,EAAE,gBAAW14D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAwBuL,CAAxB,EAA4B;AAEnCnG,aAAK,IAAI,KAAK03D,QAAd;AAEA,aAAK5hD,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0Bnc,CAA1B;AACA,aAAKiyB,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0BpF,CAA1B;AACA,aAAKkb,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0BmG,CAA1B;AAEA,eAAO,IAAP;AAEA,OAtUwC;AAwUzCwyD,aAAO,EAAE,iBAAW34D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAwBuL,CAAxB,EAA2B4H,CAA3B,EAA+B;AAEvC/N,aAAK,IAAI,KAAK03D,QAAd;AAEA,aAAK5hD,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0Bnc,CAA1B;AACA,aAAKiyB,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0BpF,CAA1B;AACA,aAAKkb,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0BmG,CAA1B;AACA,aAAK2P,KAAL,CAAY9V,KAAK,GAAG,CAApB,IAA0B+N,CAA1B;AAEA,eAAO,IAAP;AAEA,OAnVwC;AAqVzC6qD,cAAQ,EAAE,kBAAW9jB,QAAX,EAAsB;AAE/B,aAAKgjB,gBAAL,GAAwBhjB,QAAxB;AAEA,eAAO,IAAP;AAEA,OA3VwC;AA6VzCthD,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,CAAsB,KAAKgZ,KAA3B,EAAkC,KAAK4hD,QAAvC,EAAkDtjE,IAAlD,CAAwD,IAAxD,CAAP;AAEA,OAjWwC;AAmWzC25C,YAAM,EAAE,kBAAY;AAEnB,eAAO;AACN2pB,kBAAQ,EAAE,KAAKA,QADT;AAEN95E,cAAI,EAAE,KAAKk4B,KAAL,CAAWhZ,WAAX,CAAuB7kB,IAFvB;AAGN69B,eAAK,EAAEnL,KAAK,CAACva,SAAN,CAAgBzY,KAAhB,CAAsB4V,IAAtB,CAA4B,KAAKuoB,KAAjC,CAHD;AAINm7C,oBAAU,EAAE,KAAKA;AAJX,SAAP;AAOA;AA5WwC,KAA1C,E,CAgXA;;AAEA,aAAS4H,mBAAT,CAA8B/iD,KAA9B,EAAqC4hD,QAArC,EAA+CzG,UAA/C,EAA4D;AAE3DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAIurE,SAAJ,CAAehjD,KAAf,CAA5B,EAAoD4hD,QAApD,EAA8DzG,UAA9D;AAEA;;AAED4H,uBAAmB,CAACzoE,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAhC;AACAyoE,uBAAmB,CAACzoE,SAApB,CAA8B0M,WAA9B,GAA4C+7D,mBAA5C;;AAGA,aAASE,oBAAT,CAA+BjjD,KAA/B,EAAsC4hD,QAAtC,EAAgDzG,UAAhD,EAA6D;AAE5DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAImd,UAAJ,CAAgBoL,KAAhB,CAA5B,EAAqD4hD,QAArD,EAA+DzG,UAA/D;AAEA;;AAED8H,wBAAoB,CAAC3oE,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAjC;AACA2oE,wBAAoB,CAAC3oE,SAArB,CAA+B0M,WAA/B,GAA6Ci8D,oBAA7C;;AAGA,aAASC,2BAAT,CAAsCljD,KAAtC,EAA6C4hD,QAA7C,EAAuDzG,UAAvD,EAAoE;AAEnEwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAI0rE,iBAAJ,CAAuBnjD,KAAvB,CAA5B,EAA4D4hD,QAA5D,EAAsEzG,UAAtE;AAEA;;AAED+H,+BAA2B,CAAC5oE,SAA5B,GAAwC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAxC;AACA4oE,+BAA2B,CAAC5oE,SAA5B,CAAsC0M,WAAtC,GAAoDk8D,2BAApD;;AAGA,aAASE,oBAAT,CAA+BpjD,KAA/B,EAAsC4hD,QAAtC,EAAgDzG,UAAhD,EAA6D;AAE5DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAI4rE,UAAJ,CAAgBrjD,KAAhB,CAA5B,EAAqD4hD,QAArD,EAA+DzG,UAA/D;AAEA;;AAEDiI,wBAAoB,CAAC9oE,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAjC;AACA8oE,wBAAoB,CAAC9oE,SAArB,CAA+B0M,WAA/B,GAA6Co8D,oBAA7C;;AAGA,aAASE,qBAAT,CAAgCtjD,KAAhC,EAAuC4hD,QAAvC,EAAiDzG,UAAjD,EAA8D;AAE7DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAI+e,WAAJ,CAAiBwJ,KAAjB,CAA5B,EAAsD4hD,QAAtD,EAAgEzG,UAAhE;AAEA;;AAEDmI,yBAAqB,CAAChpE,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAlC;AACAgpE,yBAAqB,CAAChpE,SAAtB,CAAgC0M,WAAhC,GAA8Cs8D,qBAA9C;;AAGA,aAASC,oBAAT,CAA+BvjD,KAA/B,EAAsC4hD,QAAtC,EAAgDzG,UAAhD,EAA6D;AAE5DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAIwyB,UAAJ,CAAgBjK,KAAhB,CAA5B,EAAqD4hD,QAArD,EAA+DzG,UAA/D;AAEA;;AAEDoI,wBAAoB,CAACjpE,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAjC;AACAipE,wBAAoB,CAACjpE,SAArB,CAA+B0M,WAA/B,GAA6Cu8D,oBAA7C;;AAGA,aAASC,qBAAT,CAAgCxjD,KAAhC,EAAuC4hD,QAAvC,EAAiDzG,UAAjD,EAA8D;AAE7DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAIgf,WAAJ,CAAiBuJ,KAAjB,CAA5B,EAAsD4hD,QAAtD,EAAgEzG,UAAhE;AAEA;;AAEDqI,yBAAqB,CAAClpE,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAlC;AACAkpE,yBAAqB,CAAClpE,SAAtB,CAAgC0M,WAAhC,GAA8Cw8D,qBAA9C;;AAGA,aAASC,sBAAT,CAAiCzjD,KAAjC,EAAwC4hD,QAAxC,EAAkDzG,UAAlD,EAA+D;AAE9DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAIisE,YAAJ,CAAkB1jD,KAAlB,CAA5B,EAAuD4hD,QAAvD,EAAiEzG,UAAjE;AAEA;;AAEDsI,0BAAsB,CAACnpE,SAAvB,GAAmC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAnC;AACAmpE,0BAAsB,CAACnpE,SAAvB,CAAiC0M,WAAjC,GAA+Cy8D,sBAA/C;;AAGA,aAASE,sBAAT,CAAiC3jD,KAAjC,EAAwC4hD,QAAxC,EAAkDzG,UAAlD,EAA+D;AAE9DwG,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4B,IAAImsE,YAAJ,CAAkB5jD,KAAlB,CAA5B,EAAuD4hD,QAAvD,EAAiEzG,UAAjE;AAEA;;AAEDwI,0BAAsB,CAACrpE,SAAvB,GAAmC3V,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAnC;AACAqpE,0BAAsB,CAACrpE,SAAvB,CAAiC0M,WAAjC,GAA+C28D,sBAA/C;;AAEA,aAASE,cAAT,GAA0B;AAEzB,WAAK3wD,QAAL,GAAgB,EAAhB;AACA,WAAK4wD,OAAL,GAAe,EAAf;AACA,WAAK1xD,MAAL,GAAc,EAAd;AACA,WAAK2xD,GAAL,GAAW,EAAX;AACA,WAAKC,IAAL,GAAY,EAAZ;AAEA,WAAKC,MAAL,GAAc,EAAd;AAEA,WAAKhD,YAAL,GAAoB,EAApB;AAEA,WAAKiD,WAAL,GAAmB,EAAnB;AACA,WAAKC,WAAL,GAAmB,EAAnB,CAbyB,CAezB;;AAEA,WAAKvU,WAAL,GAAmB,IAAnB;AACA,WAAKwU,cAAL,GAAsB,IAAtB,CAlByB,CAoBzB;;AAEA,WAAKC,kBAAL,GAA0B,KAA1B;AACA,WAAKC,iBAAL,GAAyB,KAAzB;AACA,WAAKC,gBAAL,GAAwB,KAAxB;AACA,WAAKC,aAAL,GAAqB,KAArB;AACA,WAAKC,gBAAL,GAAwB,KAAxB;AAEA;;AAED9/E,UAAM,CAACiiC,MAAP,CAAei9C,cAAc,CAACvpE,SAA9B,EAAyC;AAExCoqE,mBAAa,EAAE,uBAAWhY,QAAX,EAAsB;AAEpC,YAAMuX,MAAM,GAAG,EAAf;AAEA,YAAI77E,KAAJ,EAAWhF,CAAX;AACA,YAAIk4E,aAAa,GAAG9pE,SAApB;AAEA,YAAM+hB,KAAK,GAAGm5C,QAAQ,CAACn5C,KAAvB;;AAEA,aAAMnwB,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGmwB,KAAK,CAAC9wB,MAAvB,EAA+BW,CAAC,EAAhC,EAAsC;AAErC,cAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,CAAF,CAAlB,CAFqC,CAIrC;;AAEA,cAAKuhF,IAAI,CAACrJ,aAAL,KAAuBA,aAA5B,EAA4C;AAE3CA,yBAAa,GAAGqJ,IAAI,CAACrJ,aAArB;;AAEA,gBAAKlzE,KAAK,KAAKoJ,SAAf,EAA2B;AAE1BpJ,mBAAK,CAAC+jE,KAAN,GAAgB/oE,CAAC,GAAG,CAAN,GAAYgF,KAAK,CAACytE,KAAhC;AACAoO,oBAAM,CAACngF,IAAP,CAAasE,KAAb;AAEA;;AAEDA,iBAAK,GAAG;AACPytE,mBAAK,EAAEzyE,CAAC,GAAG,CADJ;AAEPk4E,2BAAa,EAAEA;AAFR,aAAR;AAKA;AAED;;AAED,YAAKlzE,KAAK,KAAKoJ,SAAf,EAA2B;AAE1BpJ,eAAK,CAAC+jE,KAAN,GAAgB/oE,CAAC,GAAG,CAAN,GAAYgF,KAAK,CAACytE,KAAhC;AACAoO,gBAAM,CAACngF,IAAP,CAAasE,KAAb;AAEA;;AAED,aAAK67E,MAAL,GAAcA,MAAd;AAEA,OA9CuC;AAgDxCW,kBAAY,EAAE,sBAAWlY,QAAX,EAAsB;AAEnC,YAAMn5C,KAAK,GAAGm5C,QAAQ,CAACn5C,KAAvB;AACA,YAAML,QAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;AACA,YAAM2xD,aAAa,GAAGnY,QAAQ,CAACmY,aAA/B;AAEA,YAAMC,eAAe,GAAGD,aAAa,CAAE,CAAF,CAAb,IAAsBA,aAAa,CAAE,CAAF,CAAb,CAAmBpiF,MAAnB,GAA4B,CAA1E;AACA,YAAMsiF,gBAAgB,GAAGF,aAAa,CAAE,CAAF,CAAb,IAAsBA,aAAa,CAAE,CAAF,CAAb,CAAmBpiF,MAAnB,GAA4B,CAA3E,CAPmC,CASnC;;AAEA,YAAMw+E,YAAY,GAAGvU,QAAQ,CAACuU,YAA9B;AACA,YAAM+D,kBAAkB,GAAG/D,YAAY,CAACx+E,MAAxC;AAEA,YAAIwiF,oBAAJ;;AAEA,YAAKD,kBAAkB,GAAG,CAA1B,EAA8B;AAE7BC,8BAAoB,GAAG,EAAvB;;AAEA,eAAM,IAAI7hF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG4hF,kBAArB,EAAyC5hF,IAAC,EAA1C,EAAgD;AAE/C6hF,gCAAoB,CAAE7hF,IAAF,CAApB,GAA4B;AAC3BjB,kBAAI,EAAE8+E,YAAY,CAAE79E,IAAF,CAAZ,CAAkBjB,IADG;AAE1BF,kBAAI,EAAE;AAFoB,aAA5B;AAKA;;AAED,eAAKg/E,YAAL,CAAkBrjE,QAAlB,GAA6BqnE,oBAA7B;AAEA;;AAED,YAAM/D,YAAY,GAAGxU,QAAQ,CAACwU,YAA9B;AACA,YAAMgE,kBAAkB,GAAGhE,YAAY,CAACz+E,MAAxC;AAEA,YAAI0iF,kBAAJ;;AAEA,YAAKD,kBAAkB,GAAG,CAA1B,EAA8B;AAE7BC,4BAAkB,GAAG,EAArB;;AAEA,eAAM,IAAI/hF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG8hF,kBAArB,EAAyC9hF,IAAC,EAA1C,EAAgD;AAE/C+hF,8BAAkB,CAAE/hF,IAAF,CAAlB,GAA0B;AACzBjB,kBAAI,EAAE++E,YAAY,CAAE99E,IAAF,CAAZ,CAAkBjB,IADC;AAExBF,kBAAI,EAAE;AAFkB,aAA1B;AAKA;;AAED,eAAKg/E,YAAL,CAAkB9f,MAAlB,GAA2BgkB,kBAA3B;AAEA,SArDkC,CAuDnC;;;AAEA,YAAMhB,WAAW,GAAGzX,QAAQ,CAACyX,WAA7B;AACA,YAAMD,WAAW,GAAGxX,QAAQ,CAACwX,WAA7B;AAEA,YAAMkB,cAAc,GAAGjB,WAAW,CAAC1hF,MAAZ,KAAuBywB,QAAQ,CAACzwB,MAAvD;AACA,YAAM4iF,cAAc,GAAGnB,WAAW,CAACzhF,MAAZ,KAAuBywB,QAAQ,CAACzwB,MAAvD,CA7DmC,CA+DnC;;AAEA,YAAKywB,QAAQ,CAACzwB,MAAT,GAAkB,CAAlB,IAAuB8wB,KAAK,CAAC9wB,MAAN,KAAiB,CAA7C,EAAiD;AAEhD8B,iBAAO,CAACD,KAAR,CAAe,8DAAf;AAEA;;AAED,aAAM,IAAIlB,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGmwB,KAAK,CAAC9wB,MAA3B,EAAmCW,IAAC,EAApC,EAA0C;AAEzC,cAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,IAAF,CAAlB;AAEA,eAAK8vB,QAAL,CAAcpvB,IAAd,CAAoBovB,QAAQ,CAAEyxD,IAAI,CAAChiF,CAAP,CAA5B,EAAwCuwB,QAAQ,CAAEyxD,IAAI,CAAC/hF,CAAP,CAAhD,EAA4DswB,QAAQ,CAAEyxD,IAAI,CAAC3wD,CAAP,CAApE;AAEA,cAAMunD,aAAa,GAAGoJ,IAAI,CAACpJ,aAA3B;;AAEA,cAAKA,aAAa,CAAC94E,MAAd,KAAyB,CAA9B,EAAkC;AAEjC,iBAAKqhF,OAAL,CAAahgF,IAAb,CAAmBy3E,aAAa,CAAE,CAAF,CAAhC,EAAuCA,aAAa,CAAE,CAAF,CAApD,EAA2DA,aAAa,CAAE,CAAF,CAAxE;AAEA,WAJD,MAIO;AAEN,gBAAMpa,MAAM,GAAGwjB,IAAI,CAACxjB,MAApB;AAEA,iBAAK2iB,OAAL,CAAahgF,IAAb,CAAmBq9D,MAAnB,EAA2BA,MAA3B,EAAmCA,MAAnC;AAEA;;AAED,cAAMqa,YAAY,GAAGmJ,IAAI,CAACnJ,YAA1B;;AAEA,cAAKA,YAAY,CAAC/4E,MAAb,KAAwB,CAA7B,EAAiC;AAEhC,iBAAK2vB,MAAL,CAAYtuB,IAAZ,CAAkB03E,YAAY,CAAE,CAAF,CAA9B,EAAqCA,YAAY,CAAE,CAAF,CAAjD,EAAwDA,YAAY,CAAE,CAAF,CAApE;AAEA,WAJD,MAIO;AAEN,gBAAMzoD,KAAK,GAAG4xD,IAAI,CAAC5xD,KAAnB;AAEA,iBAAKX,MAAL,CAAYtuB,IAAZ,CAAkBivB,KAAlB,EAAyBA,KAAzB,EAAgCA,KAAhC;AAEA;;AAED,cAAK+xD,eAAe,KAAK,IAAzB,EAAgC;AAE/B,gBAAMQ,SAAS,GAAGT,aAAa,CAAE,CAAF,CAAb,CAAoBzhF,IAApB,CAAlB;;AAEA,gBAAKkiF,SAAS,KAAK9zE,SAAnB,EAA+B;AAE9B,mBAAKuyE,GAAL,CAASjgF,IAAT,CAAewhF,SAAS,CAAE,CAAF,CAAxB,EAA+BA,SAAS,CAAE,CAAF,CAAxC,EAA+CA,SAAS,CAAE,CAAF,CAAxD;AAEA,aAJD,MAIO;AAEN/gF,qBAAO,CAAC2W,IAAR,CAAc,0DAAd,EAA0E9X,IAA1E;AAEA,mBAAK2gF,GAAL,CAASjgF,IAAT,CAAe,IAAIsrD,OAAJ,EAAf,EAA8B,IAAIA,OAAJ,EAA9B,EAA6C,IAAIA,OAAJ,EAA7C;AAEA;AAED;;AAED,cAAK21B,gBAAgB,KAAK,IAA1B,EAAiC;AAEhC,gBAAMO,UAAS,GAAGT,aAAa,CAAE,CAAF,CAAb,CAAoBzhF,IAApB,CAAlB;;AAEA,gBAAKkiF,UAAS,KAAK9zE,SAAnB,EAA+B;AAE9B,mBAAKwyE,IAAL,CAAUlgF,IAAV,CAAgBwhF,UAAS,CAAE,CAAF,CAAzB,EAAgCA,UAAS,CAAE,CAAF,CAAzC,EAAgDA,UAAS,CAAE,CAAF,CAAzD;AAEA,aAJD,MAIO;AAEN/gF,qBAAO,CAAC2W,IAAR,CAAc,2DAAd,EAA2E9X,IAA3E;AAEA,mBAAK4gF,IAAL,CAAUlgF,IAAV,CAAgB,IAAIsrD,OAAJ,EAAhB,EAA+B,IAAIA,OAAJ,EAA/B,EAA8C,IAAIA,OAAJ,EAA9C;AAEA;AAED,WApEwC,CAsEzC;;;AAEA,eAAM,IAAI1rD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGshF,kBAArB,EAAyCthF,CAAC,EAA1C,EAAgD;AAE/C,gBAAM6hF,WAAW,GAAGtE,YAAY,CAAEv9E,CAAF,CAAZ,CAAkBwvB,QAAtC;AAEA+xD,gCAAoB,CAAEvhF,CAAF,CAApB,CAA0BzB,IAA1B,CAA+B6B,IAA/B,CAAqCyhF,WAAW,CAAEZ,IAAI,CAAChiF,CAAP,CAAhD,EAA4D4iF,WAAW,CAAEZ,IAAI,CAAC/hF,CAAP,CAAvE,EAAmF2iF,WAAW,CAAEZ,IAAI,CAAC3wD,CAAP,CAA9F;AAEA;;AAED,eAAM,IAAItwB,EAAC,GAAG,CAAd,EAAiBA,EAAC,GAAGwhF,kBAArB,EAAyCxhF,EAAC,EAA1C,EAAgD;AAE/C,gBAAM8hF,WAAW,GAAGtE,YAAY,CAAEx9E,EAAF,CAAZ,CAAkB63E,aAAlB,CAAiCn4E,IAAjC,CAApB;;AAEA+hF,8BAAkB,CAAEzhF,EAAF,CAAlB,CAAwBzB,IAAxB,CAA6B6B,IAA7B,CAAmC0hF,WAAW,CAAC7iF,CAA/C,EAAkD6iF,WAAW,CAAC5iF,CAA9D,EAAiE4iF,WAAW,CAACxxD,CAA7E;AAEA,WAtFwC,CAwFzC;;;AAEA,cAAKoxD,cAAL,EAAsB;AAErB,iBAAKjB,WAAL,CAAiBrgF,IAAjB,CAAuBqgF,WAAW,CAAEQ,IAAI,CAAChiF,CAAP,CAAlC,EAA8CwhF,WAAW,CAAEQ,IAAI,CAAC/hF,CAAP,CAAzD,EAAqEuhF,WAAW,CAAEQ,IAAI,CAAC3wD,CAAP,CAAhF;AAEA;;AAED,cAAKqxD,cAAL,EAAsB;AAErB,iBAAKnB,WAAL,CAAiBpgF,IAAjB,CAAuBogF,WAAW,CAAES,IAAI,CAAChiF,CAAP,CAAlC,EAA8CuhF,WAAW,CAAES,IAAI,CAAC/hF,CAAP,CAAzD,EAAqEshF,WAAW,CAAES,IAAI,CAAC3wD,CAAP,CAAhF;AAEA;AAED;;AAED,aAAK0wD,aAAL,CAAoBhY,QAApB;AAEA,aAAK2X,kBAAL,GAA0B3X,QAAQ,CAAC2X,kBAAnC;AACA,aAAKC,iBAAL,GAAyB5X,QAAQ,CAAC4X,iBAAlC;AACA,aAAKC,gBAAL,GAAwB7X,QAAQ,CAAC6X,gBAAjC;AACA,aAAKC,aAAL,GAAqB9X,QAAQ,CAAC8X,aAA9B;AACA,aAAKC,gBAAL,GAAwB/X,QAAQ,CAAC+X,gBAAjC;;AAEA,YAAK/X,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,eAAKA,cAAL,GAAsB1X,QAAQ,CAAC0X,cAAT,CAAwB1mE,KAAxB,EAAtB;AAEA;;AAED,YAAKgvD,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,eAAKA,WAAL,GAAmBlD,QAAQ,CAACkD,WAAT,CAAqBlyD,KAArB,EAAnB;AAEA;;AAED,eAAO,IAAP;AAEA;AArPuC,KAAzC;;AAyPA,aAAS+nE,QAAT,CAAmBzlD,KAAnB,EAA2B;AAE1B,UAAKA,KAAK,CAACv9B,MAAN,KAAiB,CAAtB,EAA0B,OAAO,CAAE6Y,QAAT;AAE1B,UAAIwE,GAAG,GAAGkgB,KAAK,CAAE,CAAF,CAAf;;AAEA,WAAM,IAAI58B,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGmyB,KAAK,CAACv9B,MAA3B,EAAmCW,IAAC,GAAGyK,CAAvC,EAA0C,EAAGzK,IAA7C,EAAiD;AAEhD,YAAK48B,KAAK,CAAE58B,IAAF,CAAL,GAAa0c,GAAlB,EAAwBA,GAAG,GAAGkgB,KAAK,CAAE58B,IAAF,CAAX;AAExB;;AAED,aAAO0c,GAAP;AAEA;;AAED,QAAI4lE,iBAAiB,GAAG,CAAxB,C,CAA2B;;AAE3B,QAAMC,KAAK,GAAG,IAAI7jB,OAAJ,EAAd;;AACA,QAAM8jB,IAAI,GAAG,IAAIpd,QAAJ,EAAb;;AACA,QAAMqd,OAAO,GAAG,IAAI3mB,OAAJ,EAAhB;;AACA,QAAM4mB,MAAM,GAAG,IAAIhY,IAAJ,EAAf;;AACA,QAAMiY,gBAAgB,GAAG,IAAIjY,IAAJ,EAAzB;;AACA,QAAMkY,SAAS,GAAG,IAAI9mB,OAAJ,EAAlB;;AAEA,aAAS+mB,cAAT,GAA0B;AAEzBthF,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAE3yC,aAAK,EAAEw4E,iBAAiB,IAAI;AAA9B,OAAnC;AAEA,WAAK34B,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAKvqD,IAAL,GAAY,EAAZ;AACA,WAAK2F,IAAL,GAAY,gBAAZ;AAEA,WAAKoiB,KAAL,GAAa,IAAb;AACA,WAAKgzB,UAAL,GAAkB,EAAlB;AAEA,WAAKgpC,eAAL,GAAuB,EAAvB;AACA,WAAKC,oBAAL,GAA4B,KAA5B;AAEA,WAAKlC,MAAL,GAAc,EAAd;AAEA,WAAKrU,WAAL,GAAmB,IAAnB;AACA,WAAKwU,cAAL,GAAsB,IAAtB;AAEA,WAAKgC,SAAL,GAAiB;AAAEvQ,aAAK,EAAE,CAAT;AAAY1J,aAAK,EAAE7wD;AAAnB,OAAjB;AAEA,WAAKiuD,QAAL,GAAgB,EAAhB;AAEA;;AAED0c,kBAAc,CAAC3rE,SAAf,GAA2B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAErF0M,iBAAW,EAAEi/D,cAFwE;AAIrFI,sBAAgB,EAAE,IAJmE;AAMrFC,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAKp8D,KAAZ;AAEA,OAVoF;AAYrFmU,cAAQ,EAAE,kBAAWnU,KAAX,EAAmB;AAE5B,YAAK2K,KAAK,CAAC0jC,OAAN,CAAeruC,KAAf,CAAL,EAA8B;AAE7B,eAAKA,KAAL,GAAa,KAAMu7D,QAAQ,CAAEv7D,KAAF,CAAR,GAAoB,KAApB,GAA4Bs5D,qBAA5B,GAAoDF,qBAA1D,EAAmFp5D,KAAnF,EAA0F,CAA1F,CAAb;AAEA,SAJD,MAIO;AAEN,eAAKA,KAAL,GAAaA,KAAb;AAEA;AAED,OAxBoF;AA0BrF8sB,kBAAY,EAAE,sBAAW70C,IAAX,EAAkB;AAE/B,eAAO,KAAK+6C,UAAL,CAAiB/6C,IAAjB,CAAP;AAEA,OA9BoF;AAgCrFokF,kBAAY,EAAE,sBAAWpkF,IAAX,EAAiByvD,SAAjB,EAA6B;AAE1C,aAAK1U,UAAL,CAAiB/6C,IAAjB,IAA0ByvD,SAA1B;AAEA,eAAO,IAAP;AAEA,OAtCoF;AAwCrF40B,qBAAe,EAAE,yBAAWrkF,IAAX,EAAkB;AAElC,eAAO,KAAK+6C,UAAL,CAAiB/6C,IAAjB,CAAP;AAEA,eAAO,IAAP;AAEA,OA9CoF;AAgDrFskF,cAAQ,EAAE,kBAAW5Q,KAAX,EAAkB1J,KAAlB,EAAyBmP,aAAzB,EAAyC;AAElD,aAAK2I,MAAL,CAAYngF,IAAZ,CAAkB;AAEjB+xE,eAAK,EAAEA,KAFU;AAGjB1J,eAAK,EAAEA,KAHU;AAIjBmP,uBAAa,EAAEA,aAAa,KAAK9pE,SAAlB,GAA8B8pE,aAA9B,GAA8C;AAJ5C,SAAlB;AAQA,OA1DoF;AA4DrFoL,iBAAW,EAAE,uBAAY;AAExB,aAAKzC,MAAL,GAAc,EAAd;AAEA,OAhEoF;AAkErF0C,kBAAY,EAAE,sBAAW9Q,KAAX,EAAkB1J,KAAlB,EAA0B;AAEvC,aAAKia,SAAL,CAAevQ,KAAf,GAAuBA,KAAvB;AACA,aAAKuQ,SAAL,CAAeja,KAAf,GAAuBA,KAAvB;AAEA,OAvEoF;AAyErFrT,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC,YAAMjG,QAAQ,GAAG,KAAKs/B,UAAL,CAAgBt/B,QAAjC;;AAEA,YAAKA,QAAQ,KAAKpM,SAAlB,EAA8B;AAE7BoM,kBAAQ,CAACk7C,YAAT,CAAuBj1C,MAAvB;AAEAjG,kBAAQ,CAACwH,WAAT,GAAuB,IAAvB;AAEA;;AAED,YAAM+7C,MAAM,GAAG,KAAKjkB,UAAL,CAAgBikB,MAA/B;;AAEA,YAAKA,MAAM,KAAK3vD,SAAhB,EAA4B;AAE3B,cAAMw3D,YAAY,GAAG,IAAIhX,OAAJ,GAAcoD,eAAd,CAA+BvxC,MAA/B,CAArB;AAEAs9C,gBAAM,CAAC3B,iBAAP,CAA0BwJ,YAA1B;AAEA7H,gBAAM,CAAC/7C,WAAP,GAAqB,IAArB;AAEA;;AAED,YAAMwhE,OAAO,GAAG,KAAK1pC,UAAL,CAAgB0pC,OAAhC;;AAEA,YAAKA,OAAO,KAAKp1E,SAAjB,EAA6B;AAE5Bo1E,iBAAO,CAACrmB,kBAAR,CAA4B18C,MAA5B;AAEA+iE,iBAAO,CAACxhE,WAAR,GAAsB,IAAtB;AAEA;;AAED,YAAK,KAAKwqD,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,eAAKC,kBAAL;AAEA;;AAED,YAAK,KAAKuU,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,eAAKyC,qBAAL;AAEA;;AAED,eAAO,IAAP;AAEA,OAzHoF;AA2HrF5c,aAAO,EAAE,iBAAWtnD,KAAX,EAAmB;AAE3B;AAEAgjE,aAAK,CAACzgB,aAAN,CAAqBviD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmB6sB,KAAnB;AAEA,eAAO,IAAP;AAEA,OArIoF;AAuIrFzb,aAAO,EAAE,iBAAWvnD,KAAX,EAAmB;AAE3B;AAEAgjE,aAAK,CAACxgB,aAAN,CAAqBxiD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmB6sB,KAAnB;AAEA,eAAO,IAAP;AAEA,OAjJoF;AAmJrFxb,aAAO,EAAE,iBAAWxnD,KAAX,EAAmB;AAE3B;AAEAgjE,aAAK,CAACvgB,aAAN,CAAqBziD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmB6sB,KAAnB;AAEA,eAAO,IAAP;AAEA,OA7JoF;AA+JrF5vB,eAAS,EAAE,mBAAWhoD,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE/B;AAEAs1D,aAAK,CAAC1gB,eAAN,CAAuBl3D,CAAvB,EAA0B+W,CAA1B,EAA6BuL,CAA7B;;AAEA,aAAKyoC,YAAL,CAAmB6sB,KAAnB;AAEA,eAAO,IAAP;AAEA,OAzKoF;AA2KrFzlE,WAAK,EAAE,eAAWnS,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE3B;AAEAs1D,aAAK,CAACrgB,SAAN,CAAiBv3D,CAAjB,EAAoB+W,CAApB,EAAuBuL,CAAvB;;AAEA,aAAKyoC,YAAL,CAAmB6sB,KAAnB;AAEA,eAAO,IAAP;AAEA,OArLoF;AAuLrFplE,YAAM,EAAE,gBAAWkqD,MAAX,EAAoB;AAE3Bmb,YAAI,CAACrlE,MAAL,CAAakqD,MAAb;;AAEAmb,YAAI,CAAC5tB,YAAL;;AAEA,aAAKc,YAAL,CAAmB8sB,IAAI,CAAC/hE,MAAxB;AAEA,eAAO,IAAP;AAEA,OAjMoF;AAmMrFy7B,YAAM,EAAE,kBAAY;AAEnB,aAAKuwB,kBAAL;AAEA,aAAKD,WAAL,CAAiBrwB,SAAjB,CAA4BsmC,OAA5B,EAAsCl1B,MAAtC;AAEA,aAAKoF,SAAL,CAAgB8vB,OAAO,CAAC93E,CAAxB,EAA2B83E,OAAO,CAAC/gE,CAAnC,EAAsC+gE,OAAO,CAACx1D,CAA9C;AAEA,eAAO,IAAP;AAEA,OA7MoF;AA+MrFg/C,mBAAa,EAAE,uBAAWv9D,MAAX,EAAoB;AAElC;AAEA,YAAM46D,QAAQ,GAAG56D,MAAM,CAAC46D,QAAxB;;AAEA,YAAK56D,MAAM,CAAC26D,QAAP,IAAmB36D,MAAM,CAAC06D,MAA/B,EAAwC;AAEvC,cAAMsa,SAAS,GAAG,IAAIrD,sBAAJ,CAA4B/W,QAAQ,CAACx5C,QAAT,CAAkBzwB,MAAlB,GAA2B,CAAvD,EAA0D,CAA1D,CAAlB;AACA,cAAM2vB,MAAM,GAAG,IAAIqxD,sBAAJ,CAA4B/W,QAAQ,CAACt6C,MAAT,CAAgB3vB,MAAhB,GAAyB,CAArD,EAAwD,CAAxD,CAAf;AAEA,eAAK8jF,YAAL,CAAmB,UAAnB,EAA+BO,SAAS,CAACrE,iBAAV,CAA6B/V,QAAQ,CAACx5C,QAAtC,CAA/B;AACA,eAAKqzD,YAAL,CAAmB,OAAnB,EAA4Bn0D,MAAM,CAACkwD,eAAP,CAAwB5V,QAAQ,CAACt6C,MAAjC,CAA5B;;AAEA,cAAKs6C,QAAQ,CAACqa,aAAT,IAA0Bra,QAAQ,CAACqa,aAAT,CAAuBtkF,MAAvB,KAAkCiqE,QAAQ,CAACx5C,QAAT,CAAkBzwB,MAAnF,EAA4F;AAE3F,gBAAMskF,aAAa,GAAG,IAAItD,sBAAJ,CAA4B/W,QAAQ,CAACqa,aAAT,CAAuBtkF,MAAnD,EAA2D,CAA3D,CAAtB;AAEA,iBAAK8jF,YAAL,CAAmB,cAAnB,EAAmCQ,aAAa,CAAC1E,SAAd,CAAyB3V,QAAQ,CAACqa,aAAlC,CAAnC;AAEA;;AAED,cAAKra,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,iBAAKA,cAAL,GAAsB1X,QAAQ,CAAC0X,cAAT,CAAwB1mE,KAAxB,EAAtB;AAEA;;AAED,cAAKgvD,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,iBAAKA,WAAL,GAAmBlD,QAAQ,CAACkD,WAAT,CAAqBlyD,KAArB,EAAnB;AAEA;AAED,SA5BD,MA4BO,IAAK5L,MAAM,CAACy6D,MAAZ,EAAqB;AAE3B,cAAKG,QAAQ,IAAIA,QAAQ,CAACsa,UAA1B,EAAuC;AAEtC,iBAAKpC,YAAL,CAAmBlY,QAAnB;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OA7PoF;AA+PrFqC,mBAAa,EAAE,uBAAW59C,MAAX,EAAoB;AAElC,YAAMvT,QAAQ,GAAG,EAAjB;;AAEA,aAAM,IAAIxa,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGsjB,MAAM,CAAC1uB,MAA5B,EAAoCW,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,cAAMozC,KAAK,GAAGrlB,MAAM,CAAE/tB,IAAF,CAApB;AACAwa,kBAAQ,CAAC9Z,IAAT,CAAe0yC,KAAK,CAACzoC,CAArB,EAAwByoC,KAAK,CAAC1xB,CAA9B,EAAiC0xB,KAAK,CAACnmB,CAAN,IAAW,CAA5C;AAEA;;AAED,aAAKk2D,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4B7lE,QAA5B,EAAsC,CAAtC,CAA/B;AAEA,eAAO,IAAP;AAEA,OA9QoF;AAgRrFqpE,sBAAgB,EAAE,0BAAWn1E,MAAX,EAAoB;AAErC,YAAI46D,QAAQ,GAAG56D,MAAM,CAAC46D,QAAtB;;AAEA,YAAK56D,MAAM,CAACy6D,MAAZ,EAAqB;AAEpB,cAAI2a,MAAM,GAAGxa,QAAQ,CAACya,gBAAtB;;AAEA,cAAKza,QAAQ,CAAC0a,kBAAT,KAAgC,IAArC,EAA4C;AAE3CF,kBAAM,GAAG11E,SAAT;AACAk7D,oBAAQ,CAAC0a,kBAAT,GAA8B,KAA9B;AAEA;;AAED,cAAKF,MAAM,KAAK11E,SAAhB,EAA4B;AAE3B,mBAAO,KAAKozE,YAAL,CAAmBlY,QAAnB,CAAP;AAEA;;AAEDwa,gBAAM,CAAC7C,kBAAP,GAA4B3X,QAAQ,CAAC2X,kBAArC;AACA6C,gBAAM,CAAC5C,iBAAP,GAA2B5X,QAAQ,CAAC4X,iBAApC;AACA4C,gBAAM,CAAC3C,gBAAP,GAA0B7X,QAAQ,CAAC6X,gBAAnC;AACA2C,gBAAM,CAAC1C,aAAP,GAAuB9X,QAAQ,CAAC8X,aAAhC;AACA0C,gBAAM,CAACzC,gBAAP,GAA0B/X,QAAQ,CAAC+X,gBAAnC;AAEA/X,kBAAQ,CAAC2X,kBAAT,GAA8B,KAA9B;AACA3X,kBAAQ,CAAC4X,iBAAT,GAA6B,KAA7B;AACA5X,kBAAQ,CAAC6X,gBAAT,GAA4B,KAA5B;AACA7X,kBAAQ,CAAC8X,aAAT,GAAyB,KAAzB;AACA9X,kBAAQ,CAAC+X,gBAAT,GAA4B,KAA5B;AAEA/X,kBAAQ,GAAGwa,MAAX;AAEA;;AAED,YAAKxa,QAAQ,CAAC2X,kBAAT,KAAgC,IAArC,EAA4C;AAE3C,cAAMzyB,SAAS,GAAG,KAAK1U,UAAL,CAAgBt/B,QAAlC;;AAEA,cAAKg0C,SAAS,KAAKpgD,SAAnB,EAA+B;AAE9BogD,qBAAS,CAAC6wB,iBAAV,CAA6B/V,QAAQ,CAACx5C,QAAtC;AACA0+B,qBAAS,CAACxsC,WAAV,GAAwB,IAAxB;AAEA;;AAEDsnD,kBAAQ,CAAC2X,kBAAT,GAA8B,KAA9B;AAEA;;AAED,YAAK3X,QAAQ,CAAC4X,iBAAT,KAA+B,IAApC,EAA2C;AAE1C,cAAM1yB,UAAS,GAAG,KAAK1U,UAAL,CAAgBikB,MAAlC;;AAEA,cAAKvP,UAAS,KAAKpgD,SAAnB,EAA+B;AAE9BogD,sBAAS,CAAC6wB,iBAAV,CAA6B/V,QAAQ,CAACoX,OAAtC;;AACAlyB,sBAAS,CAACxsC,WAAV,GAAwB,IAAxB;AAEA;;AAEDsnD,kBAAQ,CAAC4X,iBAAT,GAA6B,KAA7B;AAEA;;AAED,YAAK5X,QAAQ,CAAC6X,gBAAT,KAA8B,IAAnC,EAA0C;AAEzC,cAAM3yB,WAAS,GAAG,KAAK1U,UAAL,CAAgBnqB,KAAlC;;AAEA,cAAK6+B,WAAS,KAAKpgD,SAAnB,EAA+B;AAE9BogD,uBAAS,CAAC0wB,eAAV,CAA2B5V,QAAQ,CAACt6C,MAApC;;AACAw/B,uBAAS,CAACxsC,WAAV,GAAwB,IAAxB;AAEA;;AAEDsnD,kBAAQ,CAAC6X,gBAAT,GAA4B,KAA5B;AAEA;;AAED,YAAK7X,QAAQ,CAAC8X,aAAd,EAA8B;AAE7B,cAAM5yB,WAAS,GAAG,KAAK1U,UAAL,CAAgBub,EAAlC;;AAEA,cAAK7G,WAAS,KAAKpgD,SAAnB,EAA+B;AAE9BogD,uBAAS,CAAC2wB,iBAAV,CAA6B7V,QAAQ,CAACqX,GAAtC;;AACAnyB,uBAAS,CAACxsC,WAAV,GAAwB,IAAxB;AAEA;;AAEDsnD,kBAAQ,CAAC8X,aAAT,GAAyB,KAAzB;AAEA;;AAED,YAAK9X,QAAQ,CAAC2a,uBAAd,EAAwC;AAEvC,cAAMz1B,WAAS,GAAG,KAAK1U,UAAL,CAAgBoqC,YAAlC;;AAEA,cAAK11B,WAAS,KAAKpgD,SAAnB,EAA+B;AAE9BogD,uBAAS,CAACywB,SAAV,CAAqB3V,QAAQ,CAACqa,aAA9B;;AACAn1B,uBAAS,CAACxsC,WAAV,GAAwB,IAAxB;AAEA;;AAEDsnD,kBAAQ,CAAC2a,uBAAT,GAAmC,KAAnC;AAEA;;AAED,YAAK3a,QAAQ,CAAC+X,gBAAd,EAAiC;AAEhC/X,kBAAQ,CAACgY,aAAT,CAAwB5yE,MAAM,CAAC46D,QAA/B;AACA,eAAKuX,MAAL,GAAcvX,QAAQ,CAACuX,MAAvB;AAEAvX,kBAAQ,CAAC+X,gBAAT,GAA4B,KAA5B;AAEA;;AAED,eAAO,IAAP;AAEA,OA3YoF;AA6YrFG,kBAAY,EAAE,sBAAWlY,QAAX,EAAsB;AAEnCA,gBAAQ,CAACya,gBAAT,GAA4B,IAAItD,cAAJ,GAAqBe,YAArB,CAAmClY,QAAnC,CAA5B;AAEA,eAAO,KAAK6a,kBAAL,CAAyB7a,QAAQ,CAACya,gBAAlC,CAAP;AAEA,OAnZoF;AAqZrFI,wBAAkB,EAAE,4BAAW7a,QAAX,EAAsB;AAEzC,YAAMoa,SAAS,GAAG,IAAIpD,YAAJ,CAAkBhX,QAAQ,CAACx5C,QAAT,CAAkBzwB,MAAlB,GAA2B,CAA7C,CAAlB;AACA,aAAK8jF,YAAL,CAAmB,UAAnB,EAA+B,IAAI5E,eAAJ,CAAqBmF,SAArB,EAAgC,CAAhC,EAAoCrE,iBAApC,CAAuD/V,QAAQ,CAACx5C,QAAhE,CAA/B;;AAEA,YAAKw5C,QAAQ,CAACoX,OAAT,CAAiBrhF,MAAjB,GAA0B,CAA/B,EAAmC;AAElC,cAAMqhF,OAAO,GAAG,IAAIJ,YAAJ,CAAkBhX,QAAQ,CAACoX,OAAT,CAAiBrhF,MAAjB,GAA0B,CAA5C,CAAhB;AACA,eAAK8jF,YAAL,CAAmB,QAAnB,EAA6B,IAAI5E,eAAJ,CAAqBmC,OAArB,EAA8B,CAA9B,EAAkCrB,iBAAlC,CAAqD/V,QAAQ,CAACoX,OAA9D,CAA7B;AAEA;;AAED,YAAKpX,QAAQ,CAACt6C,MAAT,CAAgB3vB,MAAhB,GAAyB,CAA9B,EAAkC;AAEjC,cAAM2vB,MAAM,GAAG,IAAIsxD,YAAJ,CAAkBhX,QAAQ,CAACt6C,MAAT,CAAgB3vB,MAAhB,GAAyB,CAA3C,CAAf;AACA,eAAK8jF,YAAL,CAAmB,OAAnB,EAA4B,IAAI5E,eAAJ,CAAqBvvD,MAArB,EAA6B,CAA7B,EAAiCkwD,eAAjC,CAAkD5V,QAAQ,CAACt6C,MAA3D,CAA5B;AAEA;;AAED,YAAKs6C,QAAQ,CAACqX,GAAT,CAAathF,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,cAAMshF,GAAG,GAAG,IAAIL,YAAJ,CAAkBhX,QAAQ,CAACqX,GAAT,CAAathF,MAAb,GAAsB,CAAxC,CAAZ;AACA,eAAK8jF,YAAL,CAAmB,IAAnB,EAAyB,IAAI5E,eAAJ,CAAqBoC,GAArB,EAA0B,CAA1B,EAA8BxB,iBAA9B,CAAiD7V,QAAQ,CAACqX,GAA1D,CAAzB;AAEA;;AAED,YAAKrX,QAAQ,CAACsX,IAAT,CAAcvhF,MAAd,GAAuB,CAA5B,EAAgC;AAE/B,cAAMuhF,IAAI,GAAG,IAAIN,YAAJ,CAAkBhX,QAAQ,CAACsX,IAAT,CAAcvhF,MAAd,GAAuB,CAAzC,CAAb;AACA,eAAK8jF,YAAL,CAAmB,KAAnB,EAA0B,IAAI5E,eAAJ,CAAqBqC,IAArB,EAA2B,CAA3B,EAA+BzB,iBAA/B,CAAkD7V,QAAQ,CAACsX,IAA3D,CAA1B;AAEA,SA/BwC,CAiCzC;;;AAEA,aAAKC,MAAL,GAAcvX,QAAQ,CAACuX,MAAvB,CAnCyC,CAqCzC;;AAEA,aAAM,IAAM9hF,IAAZ,IAAoBuqE,QAAQ,CAACuU,YAA7B,EAA4C;AAE3C,cAAMjhD,KAAK,GAAG,EAAd;AACA,cAAMihD,YAAY,GAAGvU,QAAQ,CAACuU,YAAT,CAAuB9+E,IAAvB,CAArB;;AAEA,eAAM,IAAIiB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGozE,YAAY,CAACx+E,MAAlC,EAA0CW,IAAC,GAAGyK,CAA9C,EAAiDzK,IAAC,EAAlD,EAAwD;AAEvD,gBAAMmiF,WAAW,GAAGtE,YAAY,CAAE79E,IAAF,CAAhC;AAEA,gBAAMwuD,SAAS,GAAG,IAAI6xB,sBAAJ,CAA4B8B,WAAW,CAACtjF,IAAZ,CAAiBQ,MAAjB,GAA0B,CAAtD,EAAyD,CAAzD,CAAlB;AACAmvD,qBAAS,CAACzvD,IAAV,GAAiBojF,WAAW,CAACpjF,IAA7B;AAEA69B,iBAAK,CAACl8B,IAAN,CAAY8tD,SAAS,CAAC6wB,iBAAV,CAA6B8C,WAAW,CAACtjF,IAAzC,CAAZ;AAEA;;AAED,eAAKikF,eAAL,CAAsB/jF,IAAtB,IAA+B69B,KAA/B;AAEA,SAzDwC,CA2DzC;;;AAEA,YAAK0sC,QAAQ,CAACyX,WAAT,CAAqB1hF,MAArB,GAA8B,CAAnC,EAAuC;AAEtC,cAAM0hF,WAAW,GAAG,IAAIV,sBAAJ,CAA4B/W,QAAQ,CAACyX,WAAT,CAAqB1hF,MAArB,GAA8B,CAA1D,EAA6D,CAA7D,CAApB;AACA,eAAK8jF,YAAL,CAAmB,WAAnB,EAAgCpC,WAAW,CAACzB,iBAAZ,CAA+BhW,QAAQ,CAACyX,WAAxC,CAAhC;AAEA;;AAED,YAAKzX,QAAQ,CAACwX,WAAT,CAAqBzhF,MAArB,GAA8B,CAAnC,EAAuC;AAEtC,cAAMyhF,WAAW,GAAG,IAAIT,sBAAJ,CAA4B/W,QAAQ,CAACwX,WAAT,CAAqBzhF,MAArB,GAA8B,CAA1D,EAA6D,CAA7D,CAApB;AACA,eAAK8jF,YAAL,CAAmB,YAAnB,EAAiCrC,WAAW,CAACxB,iBAAZ,CAA+BhW,QAAQ,CAACwX,WAAxC,CAAjC;AAEA,SAzEwC,CA2EzC;;;AAEA,YAAKxX,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,eAAKA,cAAL,GAAsB1X,QAAQ,CAAC0X,cAAT,CAAwB1mE,KAAxB,EAAtB;AAEA;;AAED,YAAKgvD,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,eAAKA,WAAL,GAAmBlD,QAAQ,CAACkD,WAAT,CAAqBlyD,KAArB,EAAnB;AAEA;;AAED,eAAO,IAAP;AAEA,OAhfoF;AAkfrFmyD,wBAAkB,EAAE,8BAAY;AAE/B,YAAK,KAAKD,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,eAAKA,WAAL,GAAmB,IAAI9B,IAAJ,EAAnB;AAEA;;AAED,YAAMlwD,QAAQ,GAAG,KAAKs/B,UAAL,CAAgBt/B,QAAjC;AACA,YAAM4pE,uBAAuB,GAAG,KAAKtB,eAAL,CAAqBtoE,QAArD;;AAEA,YAAKA,QAAQ,KAAKpM,SAAlB,EAA8B;AAE7B,eAAKo+D,WAAL,CAAiBd,sBAAjB,CAAyClxD,QAAzC,EAF6B,CAI7B;;AAEA,cAAK4pE,uBAAL,EAA+B;AAE9B,iBAAM,IAAIpkF,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGuY,uBAAuB,CAAC/kF,MAA9C,EAAsDW,IAAC,GAAG6rE,EAA1D,EAA8D7rE,IAAC,EAA/D,EAAqE;AAEpE,kBAAMqkF,cAAc,GAAGD,uBAAuB,CAAEpkF,IAAF,CAA9C;;AACA0iF,oBAAM,CAAChX,sBAAP,CAA+B2Y,cAA/B;;AAEA,kBAAK,KAAKtB,oBAAV,EAAiC;AAEhCH,yBAAS,CAACn2B,UAAV,CAAsB,KAAK+f,WAAL,CAAiB/vD,GAAvC,EAA4CimE,MAAM,CAACjmE,GAAnD;;AACA,qBAAK+vD,WAAL,CAAiBV,aAAjB,CAAgC8W,SAAhC;;AAEAA,yBAAS,CAACn2B,UAAV,CAAsB,KAAK+f,WAAL,CAAiB9vD,GAAvC,EAA4CgmE,MAAM,CAAChmE,GAAnD;;AACA,qBAAK8vD,WAAL,CAAiBV,aAAjB,CAAgC8W,SAAhC;AAEA,eARD,MAQO;AAEN,qBAAKpW,WAAL,CAAiBV,aAAjB,CAAgC4W,MAAM,CAACjmE,GAAvC;AACA,qBAAK+vD,WAAL,CAAiBV,aAAjB,CAAgC4W,MAAM,CAAChmE,GAAvC;AAEA;AAED;AAED;AAED,SAhCD,MAgCO;AAEN,eAAK8vD,WAAL,CAAiBZ,SAAjB;AAEA;;AAED,YAAK0Y,KAAK,CAAE,KAAK9X,WAAL,CAAiB/vD,GAAjB,CAAqB9R,CAAvB,CAAL,IAAmC25E,KAAK,CAAE,KAAK9X,WAAL,CAAiB/vD,GAAjB,CAAqBiF,CAAvB,CAAxC,IAAsE4iE,KAAK,CAAE,KAAK9X,WAAL,CAAiB/vD,GAAjB,CAAqBwQ,CAAvB,CAAhF,EAA6G;AAE5G9rB,iBAAO,CAACD,KAAR,CAAe,mIAAf,EAAoJ,IAApJ;AAEA;AAED,OAziBoF;AA2iBrFuiF,2BAAqB,EAAE,iCAAY;AAElC,YAAK,KAAKzC,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,eAAKA,cAAL,GAAsB,IAAI7S,MAAJ,EAAtB;AAEA;;AAED,YAAM3zD,QAAQ,GAAG,KAAKs/B,UAAL,CAAgBt/B,QAAjC;AACA,YAAM4pE,uBAAuB,GAAG,KAAKtB,eAAL,CAAqBtoE,QAArD;;AAEA,YAAKA,QAAL,EAAgB;AAEf;AAEA,cAAM0hC,MAAM,GAAG,KAAK8kC,cAAL,CAAoB9kC,MAAnC;;AAEAwmC,gBAAM,CAAChX,sBAAP,CAA+BlxD,QAA/B,EANe,CAQf;;;AAEA,cAAK4pE,uBAAL,EAA+B;AAE9B,iBAAM,IAAIpkF,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGuY,uBAAuB,CAAC/kF,MAA9C,EAAsDW,IAAC,GAAG6rE,EAA1D,EAA8D7rE,IAAC,EAA/D,EAAqE;AAEpE,kBAAMqkF,cAAc,GAAGD,uBAAuB,CAAEpkF,IAAF,CAA9C;;AACA2iF,8BAAgB,CAACjX,sBAAjB,CAAyC2Y,cAAzC;;AAEA,kBAAK,KAAKtB,oBAAV,EAAiC;AAEhCH,yBAAS,CAACn2B,UAAV,CAAsBi2B,MAAM,CAACjmE,GAA7B,EAAkCkmE,gBAAgB,CAAClmE,GAAnD;;AACAimE,sBAAM,CAAC5W,aAAP,CAAsB8W,SAAtB;;AAEAA,yBAAS,CAACn2B,UAAV,CAAsBi2B,MAAM,CAAChmE,GAA7B,EAAkCimE,gBAAgB,CAACjmE,GAAnD;;AACAgmE,sBAAM,CAAC5W,aAAP,CAAsB8W,SAAtB;AAEA,eARD,MAQO;AAENF,sBAAM,CAAC5W,aAAP,CAAsB6W,gBAAgB,CAAClmE,GAAvC;;AACAimE,sBAAM,CAAC5W,aAAP,CAAsB6W,gBAAgB,CAACjmE,GAAvC;AAEA;AAED;AAED;;AAEDgmE,gBAAM,CAACvmC,SAAP,CAAkBD,MAAlB,EApCe,CAsCf;AACA;;;AAEA,cAAImyB,WAAW,GAAG,CAAlB;;AAEA,eAAM,IAAIruE,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAGrxD,QAAQ,CAACuuD,KAA/B,EAAsC/oE,IAAC,GAAG6rE,IAA1C,EAA8C7rE,IAAC,EAA/C,EAAqD;AAEpD4iF,qBAAS,CAACr0B,mBAAV,CAA+B/zC,QAA/B,EAAyCxa,IAAzC;;AAEAquE,uBAAW,GAAG91D,IAAI,CAACmE,GAAL,CAAU2xD,WAAV,EAAuBnyB,MAAM,CAAC3+B,iBAAP,CAA0BqlE,SAA1B,CAAvB,CAAd;AAEA,WAjDc,CAmDf;;;AAEA,cAAKwB,uBAAL,EAA+B;AAE9B,iBAAM,IAAIpkF,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAGuY,uBAAuB,CAAC/kF,MAA9C,EAAsDW,IAAC,GAAG6rE,IAA1D,EAA8D7rE,IAAC,EAA/D,EAAqE;AAEpE,kBAAMqkF,eAAc,GAAGD,uBAAuB,CAAEpkF,IAAF,CAA9C;AACA,kBAAM+iF,oBAAoB,GAAG,KAAKA,oBAAlC;;AAEA,mBAAM,IAAIziF,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAGF,eAAc,CAACtb,KAArC,EAA4CzoE,CAAC,GAAGikF,EAAhD,EAAoDjkF,CAAC,EAArD,EAA2D;AAE1DsiF,yBAAS,CAACr0B,mBAAV,CAA+B81B,eAA/B,EAA+C/jF,CAA/C;;AAEA,oBAAKyiF,oBAAL,EAA4B;AAE3BN,yBAAO,CAACl0B,mBAAR,CAA6B/zC,QAA7B,EAAuCla,CAAvC;;AACAsiF,2BAAS,CAAC3lE,GAAV,CAAewlE,OAAf;AAEA;;AAEDpU,2BAAW,GAAG91D,IAAI,CAACmE,GAAL,CAAU2xD,WAAV,EAAuBnyB,MAAM,CAAC3+B,iBAAP,CAA0BqlE,SAA1B,CAAvB,CAAd;AAEA;AAED;AAED;;AAED,eAAK5B,cAAL,CAAoBnkE,MAApB,GAA6BtE,IAAI,CAACmK,IAAL,CAAW2rD,WAAX,CAA7B;;AAEA,cAAKiW,KAAK,CAAE,KAAKtD,cAAL,CAAoBnkE,MAAtB,CAAV,EAA2C;AAE1C1b,mBAAO,CAACD,KAAR,CAAe,8HAAf,EAA+I,IAA/I;AAEA;AAED;AAED,OA/oBoF;AAipBrFsjF,wBAAkB,EAAE,8BAAY,CAE/B;AAEA,OArpBoF;AAupBrFC,0BAAoB,EAAE,gCAAY;AAEjC,YAAM39D,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM49D,iBAAiB,GAAG,KAAK9wC,YAAL,CAAmB,UAAnB,CAA1B;;AAEA,YAAK8wC,iBAAiB,KAAKt2E,SAA3B,EAAuC;AAEtC,cAAIu2E,eAAe,GAAG,KAAK/wC,YAAL,CAAmB,QAAnB,CAAtB;;AAEA,cAAK+wC,eAAe,KAAKv2E,SAAzB,EAAqC;AAEpCu2E,2BAAe,GAAG,IAAIpG,eAAJ,CAAqB,IAAI+B,YAAJ,CAAkBoE,iBAAiB,CAAC3b,KAAlB,GAA0B,CAA5C,CAArB,EAAsE,CAAtE,CAAlB;AACA,iBAAKoa,YAAL,CAAmB,QAAnB,EAA6BwB,eAA7B;AAEA,WALD,MAKO;AAEN;AAEA,iBAAM,IAAI3kF,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG8Y,eAAe,CAAC5b,KAAtC,EAA6C/oE,IAAC,GAAG6rE,EAAjD,EAAqD7rE,IAAC,EAAtD,EAA4D;AAE3D2kF,6BAAe,CAACnF,MAAhB,CAAwBx/E,IAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC;AAEA;AAED;;AAED,cAAM4kF,EAAE,GAAG,IAAI9oB,OAAJ,EAAX;AAAA,cAA0B+oB,EAAE,GAAG,IAAI/oB,OAAJ,EAA/B;AAAA,cAA8CgpB,EAAE,GAAG,IAAIhpB,OAAJ,EAAnD;AACA,cAAMipB,EAAE,GAAG,IAAIjpB,OAAJ,EAAX;AAAA,cAA0BkpB,EAAE,GAAG,IAAIlpB,OAAJ,EAA/B;AAAA,cAA8CmpB,EAAE,GAAG,IAAInpB,OAAJ,EAAnD;AACA,cAAMopB,EAAE,GAAG,IAAIppB,OAAJ,EAAX;AAAA,cAA0BqpB,EAAE,GAAG,IAAIrpB,OAAJ,EAA/B,CAvBsC,CAyBtC;;AAEA,cAAKh1C,KAAL,EAAa;AAEZ,iBAAM,IAAI9mB,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAG/kD,KAAK,CAACiiD,KAA5B,EAAmC/oE,IAAC,GAAG6rE,IAAvC,EAA2C7rE,IAAC,IAAI,CAAhD,EAAoD;AAEnD,kBAAMolF,EAAE,GAAGt+D,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAX;AACA,kBAAMqlF,EAAE,GAAGv+D,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAX;AACA,kBAAMslF,EAAE,GAAGx+D,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAX;AAEA4kF,gBAAE,CAACr2B,mBAAH,CAAwBm2B,iBAAxB,EAA2CU,EAA3C;AACAP,gBAAE,CAACt2B,mBAAH,CAAwBm2B,iBAAxB,EAA2CW,EAA3C;AACAP,gBAAE,CAACv2B,mBAAH,CAAwBm2B,iBAAxB,EAA2CY,EAA3C;AAEAJ,gBAAE,CAACzjE,UAAH,CAAeqjE,EAAf,EAAmBD,EAAnB;AACAM,gBAAE,CAAC1jE,UAAH,CAAemjE,EAAf,EAAmBC,EAAnB;AACAK,gBAAE,CAAC13B,KAAH,CAAU23B,EAAV;AAEAJ,gBAAE,CAACx2B,mBAAH,CAAwBo2B,eAAxB,EAAyCS,EAAzC;AACAJ,gBAAE,CAACz2B,mBAAH,CAAwBo2B,eAAxB,EAAyCU,EAAzC;AACAJ,gBAAE,CAAC12B,mBAAH,CAAwBo2B,eAAxB,EAAyCW,EAAzC;AAEAP,gBAAE,CAAC9nE,GAAH,CAAQioE,EAAR;AACAF,gBAAE,CAAC/nE,GAAH,CAAQioE,EAAR;AACAD,gBAAE,CAAChoE,GAAH,CAAQioE,EAAR;AAEAP,6BAAe,CAACnF,MAAhB,CAAwB4F,EAAxB,EAA4BL,EAAE,CAACp6E,CAA/B,EAAkCo6E,EAAE,CAACrjE,CAArC,EAAwCqjE,EAAE,CAAC93D,CAA3C;AACA03D,6BAAe,CAACnF,MAAhB,CAAwB6F,EAAxB,EAA4BL,EAAE,CAACr6E,CAA/B,EAAkCq6E,EAAE,CAACtjE,CAArC,EAAwCsjE,EAAE,CAAC/3D,CAA3C;AACA03D,6BAAe,CAACnF,MAAhB,CAAwB8F,EAAxB,EAA4BL,EAAE,CAACt6E,CAA/B,EAAkCs6E,EAAE,CAACvjE,CAArC,EAAwCujE,EAAE,CAACh4D,CAA3C;AAEA;AAED,WA9BD,MA8BO;AAEN;AAEA,iBAAM,IAAIjtB,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAG6Y,iBAAiB,CAAC3b,KAAxC,EAA+C/oE,IAAC,GAAG6rE,IAAnD,EAAuD7rE,IAAC,IAAI,CAA5D,EAAgE;AAE/D4kF,gBAAE,CAACr2B,mBAAH,CAAwBm2B,iBAAxB,EAA2C1kF,IAAC,GAAG,CAA/C;AACA6kF,gBAAE,CAACt2B,mBAAH,CAAwBm2B,iBAAxB,EAA2C1kF,IAAC,GAAG,CAA/C;AACA8kF,gBAAE,CAACv2B,mBAAH,CAAwBm2B,iBAAxB,EAA2C1kF,IAAC,GAAG,CAA/C;AAEAklF,gBAAE,CAACzjE,UAAH,CAAeqjE,EAAf,EAAmBD,EAAnB;AACAM,gBAAE,CAAC1jE,UAAH,CAAemjE,EAAf,EAAmBC,EAAnB;AACAK,gBAAE,CAAC13B,KAAH,CAAU23B,EAAV;AAEAR,6BAAe,CAACnF,MAAhB,CAAwBx/E,IAAC,GAAG,CAA5B,EAA+BklF,EAAE,CAACv6E,CAAlC,EAAqCu6E,EAAE,CAACxjE,CAAxC,EAA2CwjE,EAAE,CAACj4D,CAA9C;AACA03D,6BAAe,CAACnF,MAAhB,CAAwBx/E,IAAC,GAAG,CAA5B,EAA+BklF,EAAE,CAACv6E,CAAlC,EAAqCu6E,EAAE,CAACxjE,CAAxC,EAA2CwjE,EAAE,CAACj4D,CAA9C;AACA03D,6BAAe,CAACnF,MAAhB,CAAwBx/E,IAAC,GAAG,CAA5B,EAA+BklF,EAAE,CAACv6E,CAAlC,EAAqCu6E,EAAE,CAACxjE,CAAxC,EAA2CwjE,EAAE,CAACj4D,CAA9C;AAEA;AAED;;AAED,eAAKs4D,gBAAL;AAEAZ,yBAAe,CAAC3iE,WAAhB,GAA8B,IAA9B;AAEA;AAED,OAjvBoF;AAmvBrFwjE,WAAK,EAAE,eAAWlc,QAAX,EAAqB5tD,MAArB,EAA8B;AAEpC,YAAK,EAAI4tD,QAAQ,IAAIA,QAAQ,CAAC2Z,gBAAzB,CAAL,EAAmD;AAElD9hF,iBAAO,CAACD,KAAR,CAAe,iFAAf,EAAkGooE,QAAlG;AACA;AAEA;;AAED,YAAK5tD,MAAM,KAAKtN,SAAhB,EAA4B;AAE3BsN,gBAAM,GAAG,CAAT;AAEAva,iBAAO,CAAC2W,IAAR,CACC,wFACE,qEAFH;AAKA;;AAED,YAAMgiC,UAAU,GAAG,KAAKA,UAAxB;;AAEA,aAAM,IAAM8vB,GAAZ,IAAmB9vB,UAAnB,EAAgC;AAE/B,cAAKwvB,QAAQ,CAACxvB,UAAT,CAAqB8vB,GAArB,MAA+Bx7D,SAApC,EAAgD;AAEhD,cAAMq3E,UAAU,GAAG3rC,UAAU,CAAE8vB,GAAF,CAA7B;AACA,cAAM8b,eAAe,GAAGD,UAAU,CAAC7oD,KAAnC;AAEA,cAAM+oD,UAAU,GAAGrc,QAAQ,CAACxvB,UAAT,CAAqB8vB,GAArB,CAAnB;AACA,cAAMgc,eAAe,GAAGD,UAAU,CAAC/oD,KAAnC;AAEA,cAAMipD,eAAe,GAAGF,UAAU,CAACnH,QAAX,GAAsB9iE,MAA9C;AACA,cAAMrc,MAAM,GAAGkZ,IAAI,CAACkE,GAAL,CAAUmpE,eAAe,CAACvmF,MAA1B,EAAkCqmF,eAAe,CAACrmF,MAAhB,GAAyBwmF,eAA3D,CAAf;;AAEA,eAAM,IAAI7lF,IAAC,GAAG,CAAR,EAAWM,CAAC,GAAGulF,eAArB,EAAsC7lF,IAAC,GAAGX,MAA1C,EAAkDW,IAAC,IAAKM,CAAC,EAAzD,EAA+D;AAE9DolF,2BAAe,CAAEplF,CAAF,CAAf,GAAuBslF,eAAe,CAAE5lF,IAAF,CAAtC;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAhyBoF;AAkyBrFulF,sBAAgB,EAAE,4BAAY;AAE7B,YAAM7E,OAAO,GAAG,KAAK5mC,UAAL,CAAgBikB,MAAhC;;AAEA,aAAM,IAAI/9D,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG6U,OAAO,CAAC3X,KAA9B,EAAqC/oE,IAAC,GAAG6rE,EAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD4iF,mBAAS,CAACr0B,mBAAV,CAA+BmyB,OAA/B,EAAwC1gF,IAAxC;;AAEA4iF,mBAAS,CAACj1B,SAAV;;AAEA+yB,iBAAO,CAAClB,MAAR,CAAgBx/E,IAAhB,EAAmB4iF,SAAS,CAACj4E,CAA7B,EAAgCi4E,SAAS,CAAClhE,CAA1C,EAA6CkhE,SAAS,CAAC31D,CAAvD;AAEA;AAED,OAhzBoF;AAkzBrF64D,kBAAY,EAAE,wBAAY;AAEzB,iBAASC,sBAAT,CAAiCv3B,SAAjC,EAA4Cw3B,OAA5C,EAAsD;AAErD,cAAMppD,KAAK,GAAG4xB,SAAS,CAAC5xB,KAAxB;AACA,cAAM4hD,QAAQ,GAAGhwB,SAAS,CAACgwB,QAA3B;AACA,cAAMzG,UAAU,GAAGvpB,SAAS,CAACupB,UAA7B;AAEA,cAAMkO,MAAM,GAAG,IAAIrpD,KAAK,CAAChZ,WAAV,CAAuBoiE,OAAO,CAAC3mF,MAAR,GAAiBm/E,QAAxC,CAAf;AAEA,cAAI13D,KAAK,GAAG,CAAZ;AAAA,cAAek4D,MAAM,GAAG,CAAxB;;AAEA,eAAM,IAAIh/E,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGu7E,OAAO,CAAC3mF,MAA7B,EAAqCW,IAAC,GAAGyK,CAAzC,EAA4CzK,IAAC,EAA7C,EAAmD;AAElD8mB,iBAAK,GAAGk/D,OAAO,CAAEhmF,IAAF,CAAP,GAAew+E,QAAvB;;AAEA,iBAAM,IAAIl+E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGk+E,QAArB,EAA+Bl+E,CAAC,EAAhC,EAAsC;AAErC2lF,oBAAM,CAAEjH,MAAM,EAAR,CAAN,GAAsBpiD,KAAK,CAAE9V,KAAK,EAAP,CAA3B;AAEA;AAED;;AAED,iBAAO,IAAIy3D,eAAJ,CAAqB0H,MAArB,EAA6BzH,QAA7B,EAAuCzG,UAAvC,CAAP;AAEA,SA1BwB,CA4BzB;;;AAEA,YAAK,KAAKjxD,KAAL,KAAe,IAApB,EAA2B;AAE1B3lB,iBAAO,CAAC2W,IAAR,CAAc,uEAAd;AACA,iBAAO,IAAP;AAEA;;AAED,YAAMouE,SAAS,GAAG,IAAIrD,cAAJ,EAAlB;AAEA,YAAMmD,OAAO,GAAG,KAAKl/D,KAAL,CAAW8V,KAA3B;AACA,YAAMkd,UAAU,GAAG,KAAKA,UAAxB,CAxCyB,CA0CzB;;AAEA,aAAM,IAAM/6C,IAAZ,IAAoB+6C,UAApB,EAAiC;AAEhC,cAAM0U,SAAS,GAAG1U,UAAU,CAAE/6C,IAAF,CAA5B;AAEA,cAAMonF,YAAY,GAAGJ,sBAAsB,CAAEv3B,SAAF,EAAaw3B,OAAb,CAA3C;AAEAE,mBAAS,CAAC/C,YAAV,CAAwBpkF,IAAxB,EAA8BonF,YAA9B;AAEA,SApDwB,CAsDzB;;;AAEA,YAAMrD,eAAe,GAAG,KAAKA,eAA7B;;AAEA,aAAM,IAAM/jF,KAAZ,IAAoB+jF,eAApB,EAAsC;AAErC,cAAMsD,UAAU,GAAG,EAAnB;AACA,cAAM/B,cAAc,GAAGvB,eAAe,CAAE/jF,KAAF,CAAtC,CAHqC,CAGW;;AAEhD,eAAM,IAAIiB,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGwY,cAAc,CAAChlF,MAArC,EAA6CW,IAAC,GAAG6rE,EAAjD,EAAqD7rE,IAAC,EAAtD,EAA4D;AAE3D,gBAAMwuD,WAAS,GAAG61B,cAAc,CAAErkF,IAAF,CAAhC;;AAEA,gBAAMmmF,aAAY,GAAGJ,sBAAsB,CAAEv3B,WAAF,EAAaw3B,OAAb,CAA3C;;AAEAI,sBAAU,CAAC1lF,IAAX,CAAiBylF,aAAjB;AAEA;;AAEDD,mBAAS,CAACpD,eAAV,CAA2B/jF,KAA3B,IAAoCqnF,UAApC;AAEA;;AAEDF,iBAAS,CAACnD,oBAAV,GAAiC,KAAKA,oBAAtC,CA7EyB,CA+EzB;;AAEA,YAAMlC,MAAM,GAAG,KAAKA,MAApB;;AAEA,aAAM,IAAI7gF,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo2E,MAAM,CAACxhF,MAA5B,EAAoCW,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,cAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,IAAF,CAApB;AACAkmF,mBAAS,CAAC7C,QAAV,CAAoBr+E,KAAK,CAACytE,KAA1B,EAAiCztE,KAAK,CAAC+jE,KAAvC,EAA8C/jE,KAAK,CAACkzE,aAApD;AAEA;;AAED,eAAOgO,SAAP;AAEA,OA94BoF;AAg5BrFrxB,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAG;AACZm2D,kBAAQ,EAAE;AACTh9B,mBAAO,EAAE,GADA;AAETtzB,gBAAI,EAAE,gBAFG;AAGTuwD,qBAAS,EAAE;AAHF;AADE,SAAb,CAFmB,CAUnB;;AAEAp2D,YAAI,CAAC8qD,IAAL,GAAY,KAAKA,IAAjB;AACA9qD,YAAI,CAAC6F,IAAL,GAAY,KAAKA,IAAjB;AACA,YAAK,KAAK3F,IAAL,KAAc,EAAnB,EAAwBF,IAAI,CAACE,IAAL,GAAY,KAAKA,IAAjB;AACxB,YAAKwC,MAAM,CAAC9D,IAAP,CAAa,KAAK0oE,QAAlB,EAA6B9mE,MAA7B,GAAsC,CAA3C,EAA+CR,IAAI,CAACsnE,QAAL,GAAgB,KAAKA,QAArB;;AAE/C,YAAK,KAAKoD,UAAL,KAAoBn7D,SAAzB,EAAqC;AAEpC,cAAMm7D,UAAU,GAAG,KAAKA,UAAxB;;AAEA,eAAM,IAAMK,GAAZ,IAAmBL,UAAnB,EAAgC;AAE/B,gBAAKA,UAAU,CAAEK,GAAF,CAAV,KAAsBx7D,SAA3B,EAAuCvP,IAAI,CAAE+qE,GAAF,CAAJ,GAAcL,UAAU,CAAEK,GAAF,CAAxB;AAEvC;;AAED,iBAAO/qE,IAAP;AAEA;;AAEDA,YAAI,CAACA,IAAL,GAAY;AAAEi7C,oBAAU,EAAE;AAAd,SAAZ;AAEA,YAAMhzB,KAAK,GAAG,KAAKA,KAAnB;;AAEA,YAAKA,KAAK,KAAK,IAAf,EAAsB;AAErBjoB,cAAI,CAACA,IAAL,CAAUioB,KAAV,GAAkB;AACjBpiB,gBAAI,EAAEoiB,KAAK,CAAC8V,KAAN,CAAYhZ,WAAZ,CAAwB7kB,IADb;AAEjB69B,iBAAK,EAAEnL,KAAK,CAACva,SAAN,CAAgBzY,KAAhB,CAAsB4V,IAAtB,CAA4ByS,KAAK,CAAC8V,KAAlC;AAFU,WAAlB;AAKA;;AAED,YAAMkd,UAAU,GAAG,KAAKA,UAAxB;;AAEA,aAAM,IAAM8vB,IAAZ,IAAmB9vB,UAAnB,EAAgC;AAE/B,cAAM0U,SAAS,GAAG1U,UAAU,CAAE8vB,IAAF,CAA5B;AAEA,cAAMyc,aAAa,GAAG73B,SAAS,CAACqG,MAAV,CAAkBh2D,IAAI,CAACA,IAAvB,CAAtB;AAEA,cAAK2vD,SAAS,CAACzvD,IAAV,KAAmB,EAAxB,EAA6BsnF,aAAa,CAACtnF,IAAd,GAAqByvD,SAAS,CAACzvD,IAA/B;AAE7BF,cAAI,CAACA,IAAL,CAAUi7C,UAAV,CAAsB8vB,IAAtB,IAA8Byc,aAA9B;AAEA;;AAED,YAAMvD,eAAe,GAAG,EAAxB;AACA,YAAIwD,kBAAkB,GAAG,KAAzB;;AAEA,aAAM,IAAM1c,KAAZ,IAAmB,KAAKkZ,eAAxB,EAA0C;AAEzC,cAAMyD,cAAc,GAAG,KAAKzD,eAAL,CAAsBlZ,KAAtB,CAAvB;AAEA,cAAMhtC,KAAK,GAAG,EAAd;;AAEA,eAAM,IAAI58B,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG0a,cAAc,CAAClnF,MAArC,EAA6CW,IAAC,GAAG6rE,EAAjD,EAAqD7rE,IAAC,EAAtD,EAA4D;AAE3D,gBAAMwuD,WAAS,GAAG+3B,cAAc,CAAEvmF,IAAF,CAAhC;;AAEA,gBAAMqmF,cAAa,GAAG73B,WAAS,CAACqG,MAAV,CAAkBh2D,IAAI,CAACA,IAAvB,CAAtB;;AAEA,gBAAK2vD,WAAS,CAACzvD,IAAV,KAAmB,EAAxB,EAA6BsnF,cAAa,CAACtnF,IAAd,GAAqByvD,WAAS,CAACzvD,IAA/B;AAE7B69B,iBAAK,CAACl8B,IAAN,CAAY2lF,cAAZ;AAEA;;AAED,cAAKzpD,KAAK,CAACv9B,MAAN,GAAe,CAApB,EAAwB;AAEvByjF,2BAAe,CAAElZ,KAAF,CAAf,GAAyBhtC,KAAzB;AAEA0pD,8BAAkB,GAAG,IAArB;AAEA;AAED;;AAED,YAAKA,kBAAL,EAA0B;AAEzBznF,cAAI,CAACA,IAAL,CAAUikF,eAAV,GAA4BA,eAA5B;AACAjkF,cAAI,CAACA,IAAL,CAAUkkF,oBAAV,GAAiC,KAAKA,oBAAtC;AAEA;;AAED,YAAMlC,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,CAACxhF,MAAP,GAAgB,CAArB,EAAyB;AAExBR,cAAI,CAACA,IAAL,CAAUgiF,MAAV,GAAmBt7D,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,SAAL,CAAgBo7D,MAAhB,CAAZ,CAAnB;AAEA;;AAED,YAAMG,cAAc,GAAG,KAAKA,cAA5B;;AAEA,YAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9BniF,cAAI,CAACA,IAAL,CAAUmiF,cAAV,GAA2B;AAC1B9kC,kBAAM,EAAE8kC,cAAc,CAAC9kC,MAAf,CAAsBoS,OAAtB,EADkB;AAE1BzxC,kBAAM,EAAEmkE,cAAc,CAACnkE;AAFG,WAA3B;AAKA;;AAED,eAAOhe,IAAP;AAEA,OArgCoF;AAugCrFyb,WAAK,EAAE,iBAAY;AAElB;;;;;;;;;;;;;;AAwBA,eAAO,IAAIuoE,cAAJ,GAAqB3nE,IAArB,CAA2B,IAA3B,CAAP;AAEA,OAniCoF;AAqiCrFA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB;AAEA,aAAK71B,KAAL,GAAa,IAAb;AACA,aAAKgzB,UAAL,GAAkB,EAAlB;AACA,aAAKgpC,eAAL,GAAuB,EAAvB;AACA,aAAKjC,MAAL,GAAc,EAAd;AACA,aAAKrU,WAAL,GAAmB,IAAnB;AACA,aAAKwU,cAAL,GAAsB,IAAtB,CATyB,CAWzB;;AAEA,YAAMniF,IAAI,GAAG,EAAb,CAbyB,CAezB;;AAEA,aAAKE,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB,CAjByB,CAmBzB;;AAEA,YAAM+nB,KAAK,GAAG61B,MAAM,CAAC71B,KAArB;;AAEA,YAAKA,KAAK,KAAK,IAAf,EAAsB;AAErB,eAAKmU,QAAL,CAAenU,KAAK,CAACxM,KAAN,CAAazb,IAAb,CAAf;AAEA,SA3BwB,CA6BzB;;;AAEA,YAAMi7C,UAAU,GAAG6C,MAAM,CAAC7C,UAA1B;;AAEA,aAAM,IAAM/6C,IAAZ,IAAoB+6C,UAApB,EAAiC;AAEhC,cAAM0U,SAAS,GAAG1U,UAAU,CAAE/6C,IAAF,CAA5B;AACA,eAAKokF,YAAL,CAAmBpkF,IAAnB,EAAyByvD,SAAS,CAACl0C,KAAV,CAAiBzb,IAAjB,CAAzB;AAEA,SAtCwB,CAwCzB;;;AAEA,YAAMikF,eAAe,GAAGnmC,MAAM,CAACmmC,eAA/B;;AAEA,aAAM,IAAM/jF,MAAZ,IAAoB+jF,eAApB,EAAsC;AAErC,cAAMlmD,KAAK,GAAG,EAAd;AACA,cAAMynD,cAAc,GAAGvB,eAAe,CAAE/jF,MAAF,CAAtC,CAHqC,CAGW;;AAEhD,eAAM,IAAIiB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG45E,cAAc,CAAChlF,MAApC,EAA4CW,IAAC,GAAGyK,CAAhD,EAAmDzK,IAAC,EAApD,EAA0D;AAEzD48B,iBAAK,CAACl8B,IAAN,CAAY2jF,cAAc,CAAErkF,IAAF,CAAd,CAAoBsa,KAApB,CAA2Bzb,IAA3B,CAAZ;AAEA;;AAED,eAAKikF,eAAL,CAAsB/jF,MAAtB,IAA+B69B,KAA/B;AAEA;;AAED,aAAKmmD,oBAAL,GAA4BpmC,MAAM,CAAComC,oBAAnC,CA3DyB,CA6DzB;;AAEA,YAAMlC,MAAM,GAAGlkC,MAAM,CAACkkC,MAAtB;;AAEA,aAAM,IAAI7gF,IAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGo2E,MAAM,CAACxhF,MAA5B,EAAoCW,IAAC,GAAGyK,GAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,cAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,IAAF,CAApB;AACA,eAAKqjF,QAAL,CAAer+E,KAAK,CAACytE,KAArB,EAA4BztE,KAAK,CAAC+jE,KAAlC,EAAyC/jE,KAAK,CAACkzE,aAA/C;AAEA,SAtEwB,CAwEzB;;;AAEA,YAAM1L,WAAW,GAAG7vB,MAAM,CAAC6vB,WAA3B;;AAEA,YAAKA,WAAW,KAAK,IAArB,EAA4B;AAE3B,eAAKA,WAAL,GAAmBA,WAAW,CAAClyD,KAAZ,EAAnB;AAEA,SAhFwB,CAkFzB;;;AAEA,YAAM0mE,cAAc,GAAGrkC,MAAM,CAACqkC,cAA9B;;AAEA,YAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9B,eAAKA,cAAL,GAAsBA,cAAc,CAAC1mE,KAAf,EAAtB;AAEA,SA1FwB,CA4FzB;;;AAEA,aAAK0oE,SAAL,CAAevQ,KAAf,GAAuB91B,MAAM,CAACqmC,SAAP,CAAiBvQ,KAAxC;AACA,aAAKuQ,SAAL,CAAeja,KAAf,GAAuBpsB,MAAM,CAACqmC,SAAP,CAAiBja,KAAxC,CA/FyB,CAiGzB;;AAEA,aAAK5C,QAAL,GAAgBxpB,MAAM,CAACwpB,QAAvB;AAEA,eAAO,IAAP;AAEA,OA5oCoF;AA8oCrFxoD,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA;AAlpCoF,KAA3D,CAA3B;;AAspCA,QAAM8hF,cAAc,GAAG,IAAI9nB,OAAJ,EAAvB;;AACA,QAAM+nB,IAAI,GAAG,IAAIzX,GAAJ,EAAb;;AACA,QAAM0X,OAAO,GAAG,IAAIvY,MAAJ,EAAhB;;AAEA,QAAMwY,GAAG,GAAG,IAAI7qB,OAAJ,EAAZ;;AACA,QAAM8qB,GAAG,GAAG,IAAI9qB,OAAJ,EAAZ;;AACA,QAAM+qB,GAAG,GAAG,IAAI/qB,OAAJ,EAAZ;;AAEA,QAAMgrB,MAAM,GAAG,IAAIhrB,OAAJ,EAAf;;AACA,QAAMirB,MAAM,GAAG,IAAIjrB,OAAJ,EAAf;;AACA,QAAMkrB,MAAM,GAAG,IAAIlrB,OAAJ,EAAf;;AAEA,QAAMmrB,OAAO,GAAG,IAAInrB,OAAJ,EAAhB;;AACA,QAAMorB,OAAO,GAAG,IAAIprB,OAAJ,EAAhB;;AACA,QAAMqrB,OAAO,GAAG,IAAIrrB,OAAJ,EAAhB;;AAEA,QAAMsrB,IAAI,GAAG,IAAIp7B,OAAJ,EAAb;;AACA,QAAMq7B,IAAI,GAAG,IAAIr7B,OAAJ,EAAb;;AACA,QAAMs7B,IAAI,GAAG,IAAIt7B,OAAJ,EAAb;;AAEA,QAAMu7B,kBAAkB,GAAG,IAAIzrB,OAAJ,EAA3B;;AACA,QAAM0rB,uBAAuB,GAAG,IAAI1rB,OAAJ,EAAhC;;AAEA,aAAS2rB,IAAT,CAAene,QAAf,EAAyB95C,QAAzB,EAAoC;AAEnC41C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,MAAZ;AAEA,WAAK4kE,QAAL,GAAgBA,QAAQ,KAAKl7D,SAAb,GAAyBk7D,QAAzB,GAAoC,IAAIuZ,cAAJ,EAApD;AACA,WAAKrzD,QAAL,GAAgBA,QAAQ,KAAKphB,SAAb,GAAyBohB,QAAzB,GAAoC,IAAI0uD,iBAAJ,EAApD;AAEA,WAAKwJ,kBAAL;AAEA;;AAEDD,QAAI,CAACvwE,SAAL,GAAiB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEpE0M,iBAAW,EAAE6jE,IAFuD;AAIpEte,YAAM,EAAE,IAJ4D;AAMpEjuD,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;;AAEA,YAAKA,MAAM,CAACgrC,qBAAP,KAAiCv5E,SAAtC,EAAkD;AAEjD,eAAKu5E,qBAAL,GAA6BhrC,MAAM,CAACgrC,qBAAP,CAA6BlpF,KAA7B,EAA7B;AAEA;;AAED,YAAKk+C,MAAM,CAACirC,qBAAP,KAAiCx5E,SAAtC,EAAkD;AAEjD,eAAKw5E,qBAAL,GAA6BrmF,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmBmZ,MAAM,CAACirC,qBAA1B,CAA7B;AAEA;;AAED,aAAKp4D,QAAL,GAAgBmtB,MAAM,CAACntB,QAAvB;AACA,aAAK85C,QAAL,GAAgB3sB,MAAM,CAAC2sB,QAAvB;AAEA,eAAO,IAAP;AAEA,OA3BmE;AA6BpEoe,wBAAkB,EAAE,8BAAY;AAE/B,YAAMpe,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,YAAKA,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMH,eAAe,GAAGxZ,QAAQ,CAACwZ,eAAjC;AACA,cAAMrlF,IAAI,GAAG8D,MAAM,CAAC9D,IAAP,CAAaqlF,eAAb,CAAb;;AAEA,cAAKrlF,IAAI,CAAC4B,MAAL,GAAc,CAAnB,EAAuB;AAEtB,gBAAMglF,cAAc,GAAGvB,eAAe,CAAErlF,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,gBAAK4mF,cAAc,KAAKj2E,SAAxB,EAAoC;AAEnC,mBAAKu5E,qBAAL,GAA6B,EAA7B;AACA,mBAAKC,qBAAL,GAA6B,EAA7B;;AAEA,mBAAM,IAAIlzD,CAAC,GAAG,CAAR,EAAWmzD,EAAE,GAAGxD,cAAc,CAAChlF,MAArC,EAA6Cq1B,CAAC,GAAGmzD,EAAjD,EAAqDnzD,CAAC,EAAtD,EAA4D;AAE3D,oBAAM31B,IAAI,GAAGslF,cAAc,CAAE3vD,CAAF,CAAd,CAAoB31B,IAApB,IAA4Bs1B,MAAM,CAAEK,CAAF,CAA/C;AAEA,qBAAKizD,qBAAL,CAA2BjnF,IAA3B,CAAiC,CAAjC;AACA,qBAAKknF,qBAAL,CAA4B7oF,IAA5B,IAAqC21B,CAArC;AAEA;AAED;AAED;AAED,SA3BD,MA2BO;AAEN,cAAMmpD,YAAY,GAAGvU,QAAQ,CAACuU,YAA9B;;AAEA,cAAKA,YAAY,KAAKzvE,SAAjB,IAA8ByvE,YAAY,CAACx+E,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8B,mBAAO,CAACD,KAAR,CAAe,sGAAf;AAEA;AAED;AAED,OAxEmE;AA0EpEknE,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAMze,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAM95C,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAM0tC,WAAW,GAAG,KAAKA,WAAzB;AAEA,YAAK1tC,QAAQ,KAAKphB,SAAlB,EAA8B,OANa,CAQ3C;;AAEA,YAAKk7D,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC1X,QAAQ,CAACma,qBAAT;;AAExCiD,eAAO,CAACxrE,IAAR,CAAcouD,QAAQ,CAAC0X,cAAvB;;AACA0F,eAAO,CAAChxB,YAAR,CAAsBwH,WAAtB;;AAEA,YAAK4qB,SAAS,CAAC3Y,GAAV,CAAcpC,gBAAd,CAAgC2Z,OAAhC,MAA8C,KAAnD,EAA2D,OAfhB,CAiB3C;;AAEAF,sBAAc,CAACj1B,UAAf,CAA2B2L,WAA3B;;AACAupB,YAAI,CAACvrE,IAAL,CAAW4sE,SAAS,CAAC3Y,GAArB,EAA2BzZ,YAA3B,CAAyC8wB,cAAzC,EApB2C,CAsB3C;;;AAEA,YAAKld,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,cAAKia,IAAI,CAAC3Z,aAAL,CAAoBxD,QAAQ,CAACkD,WAA7B,MAA+C,KAApD,EAA4D;AAE5D;;AAED,YAAIwb,YAAJ;;AAEA,YAAK1e,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMn8D,KAAK,GAAGwiD,QAAQ,CAACxiD,KAAvB;AACA,cAAMtM,QAAQ,GAAG8uD,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAArC;AACA,cAAMytE,aAAa,GAAG3e,QAAQ,CAACwZ,eAAT,CAAyBtoE,QAA/C;AACA,cAAMuoE,oBAAoB,GAAGzZ,QAAQ,CAACyZ,oBAAtC;AACA,cAAM1tB,EAAE,GAAGiU,QAAQ,CAACxvB,UAAT,CAAoBub,EAA/B;AACA,cAAMmf,GAAG,GAAGlL,QAAQ,CAACxvB,UAAT,CAAoB06B,GAAhC;AACA,cAAMqM,MAAM,GAAGvX,QAAQ,CAACuX,MAAxB;AACA,cAAMmC,SAAS,GAAG1Z,QAAQ,CAAC0Z,SAA3B;;AAEA,cAAKl8D,KAAK,KAAK,IAAf,EAAsB;AAErB;AAEA,gBAAK2K,KAAK,CAAC0jC,OAAN,CAAe3lC,QAAf,CAAL,EAAiC;AAEhC,mBAAM,IAAIxvB,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGgV,MAAM,CAACxhF,MAA7B,EAAqCW,IAAC,GAAG6rE,EAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD,oBAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,IAAF,CAApB;AACA,oBAAMkoF,aAAa,GAAG14D,QAAQ,CAAExqB,KAAK,CAACkzE,aAAR,CAA9B;AAEA,oBAAMzF,KAAK,GAAGl6D,IAAI,CAACmE,GAAL,CAAU1X,KAAK,CAACytE,KAAhB,EAAuBuQ,SAAS,CAACvQ,KAAjC,CAAd;AACA,oBAAMp7C,GAAG,GAAG9e,IAAI,CAACkE,GAAL,CAAYzX,KAAK,CAACytE,KAAN,GAAcztE,KAAK,CAAC+jE,KAAhC,EAA2Cia,SAAS,CAACvQ,KAAV,GAAkBuQ,SAAS,CAACja,KAAvE,CAAZ;;AAEA,qBAAM,IAAIzoE,CAAC,GAAGmyE,KAAR,EAAe8R,EAAE,GAAGltD,GAA1B,EAA+B/2B,CAAC,GAAGikF,EAAnC,EAAuCjkF,CAAC,IAAI,CAA5C,EAAgD;AAE/C,sBAAMf,CAAC,GAAGunB,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAZ,CAAV;AACA,sBAAMd,CAAC,GAAGsnB,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAC,GAAG,CAAhB,CAAV;AACA,sBAAMswB,CAAC,GAAG9J,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAC,GAAG,CAAhB,CAAV;AAEA0nF,8BAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQD,aAAR,EAAuBJ,SAAvB,EAAkCrB,IAAlC,EAAwCjsE,QAAxC,EAAkDytE,aAAlD,EAAiElF,oBAAjE,EAAuF1tB,EAAvF,EAA2Fmf,GAA3F,EAAgGj1E,CAAhG,EAAmGC,CAAnG,EAAsGoxB,CAAtG,CAA9C;;AAEA,sBAAKo3D,YAAL,EAAoB;AAEnBA,gCAAY,CAACI,SAAb,GAAyB7vE,IAAI,CAAC4N,KAAL,CAAY7lB,CAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C0nF,gCAAY,CAACzG,IAAb,CAAkBrJ,aAAlB,GAAkClzE,KAAK,CAACkzE,aAAxC;AACA6P,8BAAU,CAACrnF,IAAX,CAAiBsnF,YAAjB;AAEA;AAED;AAED;AAED,aA9BD,MA8BO;AAEN,kBAAMvV,OAAK,GAAGl6D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAasmE,SAAS,CAACvQ,KAAvB,CAAd;;AACA,kBAAMp7C,KAAG,GAAG9e,IAAI,CAACkE,GAAL,CAAUqK,KAAK,CAACiiD,KAAhB,EAAyBia,SAAS,CAACvQ,KAAV,GAAkBuQ,SAAS,CAACja,KAArD,CAAZ;;AAEA,mBAAM,IAAI/oE,IAAC,GAAGyyE,OAAR,EAAe5G,IAAE,GAAGx0C,KAA1B,EAA+Br3B,IAAC,GAAG6rE,IAAnC,EAAuC7rE,IAAC,IAAI,CAA5C,EAAgD;AAE/C,oBAAMT,EAAC,GAAGunB,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAZ,CAAV;;AACA,oBAAMR,EAAC,GAAGsnB,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAV;;AACA,oBAAM4wB,EAAC,GAAG9J,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAV;;AAEAgoF,4BAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQ34D,QAAR,EAAkBs4D,SAAlB,EAA6BrB,IAA7B,EAAmCjsE,QAAnC,EAA6CytE,aAA7C,EAA4DlF,oBAA5D,EAAkF1tB,EAAlF,EAAsFmf,GAAtF,EAA2Fj1E,EAA3F,EAA8FC,EAA9F,EAAiGoxB,EAAjG,CAA9C;;AAEA,oBAAKo3D,YAAL,EAAoB;AAEnBA,8BAAY,CAACI,SAAb,GAAyB7vE,IAAI,CAAC4N,KAAL,CAAYnmB,IAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C+nF,4BAAU,CAACrnF,IAAX,CAAiBsnF,YAAjB;AAEA;AAED;AAED;AAED,WA1DD,MA0DO,IAAKxtE,QAAQ,KAAKpM,SAAlB,EAA8B;AAEpC;AAEA,gBAAKqjB,KAAK,CAAC0jC,OAAN,CAAe3lC,QAAf,CAAL,EAAiC;AAEhC,mBAAM,IAAIxvB,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAGgV,MAAM,CAACxhF,MAA7B,EAAqCW,IAAC,GAAG6rE,IAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD,oBAAMgF,MAAK,GAAG67E,MAAM,CAAE7gF,IAAF,CAApB;AACA,oBAAMkoF,cAAa,GAAG14D,QAAQ,CAAExqB,MAAK,CAACkzE,aAAR,CAA9B;;AAEA,oBAAMzF,OAAK,GAAGl6D,IAAI,CAACmE,GAAL,CAAU1X,MAAK,CAACytE,KAAhB,EAAuBuQ,SAAS,CAACvQ,KAAjC,CAAd;;AACA,oBAAMp7C,KAAG,GAAG9e,IAAI,CAACkE,GAAL,CAAYzX,MAAK,CAACytE,KAAN,GAAcztE,MAAK,CAAC+jE,KAAhC,EAA2Cia,SAAS,CAACvQ,KAAV,GAAkBuQ,SAAS,CAACja,KAAvE,CAAZ;;AAEA,qBAAM,IAAIzoE,GAAC,GAAGmyE,OAAR,EAAe8R,GAAE,GAAGltD,KAA1B,EAA+B/2B,GAAC,GAAGikF,GAAnC,EAAuCjkF,GAAC,IAAI,CAA5C,EAAgD;AAE/C,sBAAMf,GAAC,GAAGe,GAAV;;AACA,sBAAMd,GAAC,GAAGc,GAAC,GAAG,CAAd;;AACA,sBAAMswB,GAAC,GAAGtwB,GAAC,GAAG,CAAd;;AAEA0nF,8BAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQD,cAAR,EAAuBJ,SAAvB,EAAkCrB,IAAlC,EAAwCjsE,QAAxC,EAAkDytE,aAAlD,EAAiElF,oBAAjE,EAAuF1tB,EAAvF,EAA2Fmf,GAA3F,EAAgGj1E,GAAhG,EAAmGC,GAAnG,EAAsGoxB,GAAtG,CAA9C;;AAEA,sBAAKo3D,YAAL,EAAoB;AAEnBA,gCAAY,CAACI,SAAb,GAAyB7vE,IAAI,CAAC4N,KAAL,CAAY7lB,GAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C0nF,gCAAY,CAACzG,IAAb,CAAkBrJ,aAAlB,GAAkClzE,MAAK,CAACkzE,aAAxC;AACA6P,8BAAU,CAACrnF,IAAX,CAAiBsnF,YAAjB;AAEA;AAED;AAED;AAED,aA9BD,MA8BO;AAEN,kBAAMvV,OAAK,GAAGl6D,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAasmE,SAAS,CAACvQ,KAAvB,CAAd;;AACA,kBAAMp7C,KAAG,GAAG9e,IAAI,CAACkE,GAAL,CAAUjC,QAAQ,CAACuuD,KAAnB,EAA4Bia,SAAS,CAACvQ,KAAV,GAAkBuQ,SAAS,CAACja,KAAxD,CAAZ;;AAEA,mBAAM,IAAI/oE,IAAC,GAAGyyE,OAAR,EAAe5G,IAAE,GAAGx0C,KAA1B,EAA+Br3B,IAAC,GAAG6rE,IAAnC,EAAuC7rE,IAAC,IAAI,CAA5C,EAAgD;AAE/C,oBAAMT,GAAC,GAAGS,IAAV;;AACA,oBAAMR,GAAC,GAAGQ,IAAC,GAAG,CAAd;;AACA,oBAAM4wB,GAAC,GAAG5wB,IAAC,GAAG,CAAd;;AAEAgoF,4BAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQ34D,QAAR,EAAkBs4D,SAAlB,EAA6BrB,IAA7B,EAAmCjsE,QAAnC,EAA6CytE,aAA7C,EAA4DlF,oBAA5D,EAAkF1tB,EAAlF,EAAsFmf,GAAtF,EAA2Fj1E,GAA3F,EAA8FC,GAA9F,EAAiGoxB,GAAjG,CAA9C;;AAEA,oBAAKo3D,YAAL,EAAoB;AAEnBA,8BAAY,CAACI,SAAb,GAAyB7vE,IAAI,CAAC4N,KAAL,CAAYnmB,IAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C+nF,4BAAU,CAACrnF,IAAX,CAAiBsnF,YAAjB;AAEA;AAED;AAED;AAED;AAED,SAjID,MAiIO,IAAK1e,QAAQ,CAACsa,UAAd,EAA2B;AAEjC,cAAMyE,eAAe,GAAG52D,KAAK,CAAC0jC,OAAN,CAAe3lC,QAAf,CAAxB;AAEA,cAAMM,QAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;AACA,cAAMK,KAAK,GAAGm5C,QAAQ,CAACn5C,KAAvB;AACA,cAAIwwD,GAAJ;AAEA,cAAMc,aAAa,GAAGnY,QAAQ,CAACmY,aAAT,CAAwB,CAAxB,CAAtB;AACA,cAAKA,aAAa,CAACpiF,MAAd,GAAuB,CAA5B,EAAgCshF,GAAG,GAAGc,aAAN;;AAEhC,eAAM,IAAIzwD,CAAC,GAAG,CAAR,EAAWs3D,EAAE,GAAGn4D,KAAK,CAAC9wB,MAA5B,EAAoC2xB,CAAC,GAAGs3D,EAAxC,EAA4Ct3D,CAAC,EAA7C,EAAmD;AAElD,gBAAMuwD,IAAI,GAAGpxD,KAAK,CAAEa,CAAF,CAAlB;AACA,gBAAMu3D,YAAY,GAAGF,eAAe,GAAG74D,QAAQ,CAAE+xD,IAAI,CAACrJ,aAAP,CAAX,GAAoC1oD,QAAxE;AAEA,gBAAK+4D,YAAY,KAAKn6E,SAAtB,EAAkC;AAElC,gBAAMo6E,GAAG,GAAG14D,QAAQ,CAAEyxD,IAAI,CAAChiF,CAAP,CAApB;AACA,gBAAMkpF,GAAG,GAAG34D,QAAQ,CAAEyxD,IAAI,CAAC/hF,CAAP,CAApB;AACA,gBAAMkpF,GAAG,GAAG54D,QAAQ,CAAEyxD,IAAI,CAAC3wD,CAAP,CAApB;AAEAo3D,wBAAY,GAAGW,iBAAiB,CAAE,IAAF,EAAQJ,YAAR,EAAsBT,SAAtB,EAAiCrB,IAAjC,EAAuC+B,GAAvC,EAA4CC,GAA5C,EAAiDC,GAAjD,EAAsDnB,kBAAtD,CAAhC;;AAEA,gBAAKS,YAAL,EAAoB;AAEnB,kBAAKrH,GAAG,IAAIA,GAAG,CAAE3vD,CAAF,CAAf,EAAuB;AAEtB,oBAAM43D,KAAK,GAAGjI,GAAG,CAAE3vD,CAAF,CAAjB;;AACAo2D,oBAAI,CAAClsE,IAAL,CAAW0tE,KAAK,CAAE,CAAF,CAAhB;;AACAvB,oBAAI,CAACnsE,IAAL,CAAW0tE,KAAK,CAAE,CAAF,CAAhB;;AACAtB,oBAAI,CAACpsE,IAAL,CAAW0tE,KAAK,CAAE,CAAF,CAAhB;;AAEAZ,4BAAY,CAAC3yB,EAAb,GAAkBqe,QAAQ,CAACW,KAAT,CAAgBkT,kBAAhB,EAAoCiB,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDtB,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIt7B,OAAJ,EAArE,CAAlB;AAEA;;AAEDg8B,0BAAY,CAACzG,IAAb,GAAoBA,IAApB;AACAyG,0BAAY,CAACI,SAAb,GAAyBp3D,CAAzB;AACA+2D,wBAAU,CAACrnF,IAAX,CAAiBsnF,YAAjB;AAEA;AAED;AAED;AAED;AA1RmE,KAApD,CAAjB;;AA8RA,aAASW,iBAAT,CAA4Bj6E,MAA5B,EAAoC8gB,QAApC,EAA8Cs4D,SAA9C,EAAyD3Y,GAAzD,EAA8DyV,EAA9D,EAAkEC,EAAlE,EAAsEC,EAAtE,EAA0E1xC,KAA1E,EAAkF;AAEjF,UAAIw6B,SAAJ;;AAEA,UAAKp+C,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkC;AAEjCmwB,iBAAS,GAAGuB,GAAG,CAACmC,iBAAJ,CAAuBwT,EAAvB,EAA2BD,EAA3B,EAA+BD,EAA/B,EAAmC,IAAnC,EAAyCxxC,KAAzC,CAAZ;AAEA,OAJD,MAIO;AAENw6B,iBAAS,GAAGuB,GAAG,CAACmC,iBAAJ,CAAuBsT,EAAvB,EAA2BC,EAA3B,EAA+BC,EAA/B,EAAmCt1D,QAAQ,CAACgpD,IAAT,KAAkB96B,UAArD,EAAiEtK,KAAjE,CAAZ;AAEA;;AAED,UAAKw6B,SAAS,KAAK,IAAnB,EAA0B,OAAO,IAAP;;AAE1B4Z,6BAAuB,CAACtsE,IAAxB,CAA8Bk4B,KAA9B;;AACAo0C,6BAAuB,CAAC9xB,YAAxB,CAAsChnD,MAAM,CAACwuD,WAA7C;;AAEA,UAAMv9C,QAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiC25B,uBAAjC,CAAjB;AAEA,UAAK7nE,QAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,QAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D,OAAO,IAAP;AAE7D,aAAO;AACNrjD,gBAAQ,EAAEA,QADJ;AAENyzB,aAAK,EAAEo0C,uBAAuB,CAACltE,KAAxB,EAFD;AAGN5L,cAAM,EAAEA;AAHF,OAAP;AAMA;;AAED,aAASy5E,+BAAT,CAA0Cz5E,MAA1C,EAAkD8gB,QAAlD,EAA4Ds4D,SAA5D,EAAuE3Y,GAAvE,EAA4E30D,QAA5E,EAAsFytE,aAAtF,EAAqGlF,oBAArG,EAA2H1tB,EAA3H,EAA+Hmf,GAA/H,EAAoIj1E,CAApI,EAAuIC,CAAvI,EAA0IoxB,CAA1I,EAA8I;AAE7I+1D,SAAG,CAACp4B,mBAAJ,CAAyB/zC,QAAzB,EAAmCjb,CAAnC;;AACAqnF,SAAG,CAACr4B,mBAAJ,CAAyB/zC,QAAzB,EAAmChb,CAAnC;;AACAqnF,SAAG,CAACt4B,mBAAJ,CAAyB/zC,QAAzB,EAAmCoW,CAAnC;;AAEA,UAAMi4D,eAAe,GAAGn6E,MAAM,CAACi5E,qBAA/B;;AAEA,UAAKn4D,QAAQ,CAACquD,YAAT,IAAyBoK,aAAzB,IAA0CY,eAA/C,EAAiE;AAEhE5B,eAAO,CAAC5pE,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AACA6pE,eAAO,CAAC7pE,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AACA8pE,eAAO,CAAC9pE,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AAEA,aAAM,IAAIrd,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGoc,aAAa,CAAC5oF,MAApC,EAA4CW,IAAC,GAAG6rE,EAAhD,EAAoD7rE,IAAC,EAArD,EAA2D;AAE1D,cAAM8oF,SAAS,GAAGD,eAAe,CAAE7oF,IAAF,CAAjC;AACA,cAAMqkF,cAAc,GAAG4D,aAAa,CAAEjoF,IAAF,CAApC;AAEA,cAAK8oF,SAAS,KAAK,CAAnB,EAAuB;;AAEvBhC,gBAAM,CAACv4B,mBAAP,CAA4B81B,cAA5B,EAA4C9kF,CAA5C;;AACAwnF,gBAAM,CAACx4B,mBAAP,CAA4B81B,cAA5B,EAA4C7kF,CAA5C;;AACAwnF,gBAAM,CAACz4B,mBAAP,CAA4B81B,cAA5B,EAA4CzzD,CAA5C;;AAEA,cAAKmyD,oBAAL,EAA4B;AAE3BkE,mBAAO,CAAClqE,eAAR,CAAyB+pE,MAAzB,EAAiCgC,SAAjC;;AACA5B,mBAAO,CAACnqE,eAAR,CAAyBgqE,MAAzB,EAAiC+B,SAAjC;;AACA3B,mBAAO,CAACpqE,eAAR,CAAyBiqE,MAAzB,EAAiC8B,SAAjC;AAEA,WAND,MAMO;AAEN7B,mBAAO,CAAClqE,eAAR,CAAyB+pE,MAAM,CAAC3qE,GAAP,CAAYwqE,GAAZ,CAAzB,EAA4CmC,SAA5C;;AACA5B,mBAAO,CAACnqE,eAAR,CAAyBgqE,MAAM,CAAC5qE,GAAP,CAAYyqE,GAAZ,CAAzB,EAA4CkC,SAA5C;;AACA3B,mBAAO,CAACpqE,eAAR,CAAyBiqE,MAAM,CAAC7qE,GAAP,CAAY0qE,GAAZ,CAAzB,EAA4CiC,SAA5C;AAEA;AAED;;AAEDnC,WAAG,CAAC1pE,GAAJ,CAASgqE,OAAT;;AACAL,WAAG,CAAC3pE,GAAJ,CAASiqE,OAAT;;AACAL,WAAG,CAAC5pE,GAAJ,CAASkqE,OAAT;AAEA;;AAED,UAAKz4E,MAAM,CAACq6E,aAAZ,EAA4B;AAE3Br6E,cAAM,CAACs6E,aAAP,CAAsBzpF,CAAtB,EAAyBonF,GAAzB;AACAj4E,cAAM,CAACs6E,aAAP,CAAsBxpF,CAAtB,EAAyBonF,GAAzB;AACAl4E,cAAM,CAACs6E,aAAP,CAAsBp4D,CAAtB,EAAyBi2D,GAAzB;AAEA;;AAED,UAAMmB,YAAY,GAAGW,iBAAiB,CAAEj6E,MAAF,EAAU8gB,QAAV,EAAoBs4D,SAApB,EAA+B3Y,GAA/B,EAAoCwX,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDU,kBAAnD,CAAtC;;AAEA,UAAKS,YAAL,EAAoB;AAEnB,YAAK3yB,EAAL,EAAU;AAET+xB,cAAI,CAAC74B,mBAAL,CAA0B8G,EAA1B,EAA8B91D,CAA9B;;AACA8nF,cAAI,CAAC94B,mBAAL,CAA0B8G,EAA1B,EAA8B71D,CAA9B;;AACA8nF,cAAI,CAAC/4B,mBAAL,CAA0B8G,EAA1B,EAA8BzkC,CAA9B;;AAEAo3D,sBAAY,CAAC3yB,EAAb,GAAkBqe,QAAQ,CAACW,KAAT,CAAgBkT,kBAAhB,EAAoCZ,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDO,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIt7B,OAAJ,EAArE,CAAlB;AAEA;;AAED,YAAKwoB,GAAL,EAAW;AAEV4S,cAAI,CAAC74B,mBAAL,CAA0BimB,GAA1B,EAA+Bj1E,CAA/B;;AACA8nF,cAAI,CAAC94B,mBAAL,CAA0BimB,GAA1B,EAA+Bh1E,CAA/B;;AACA8nF,cAAI,CAAC/4B,mBAAL,CAA0BimB,GAA1B,EAA+B5jD,CAA/B;;AAEAo3D,sBAAY,CAACxT,GAAb,GAAmBd,QAAQ,CAACW,KAAT,CAAgBkT,kBAAhB,EAAoCZ,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDO,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIt7B,OAAJ,EAArE,CAAnB;AAEA;;AAED,YAAMu1B,IAAI,GAAG,IAAItJ,KAAJ,CAAW14E,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,CAAb;AACA8iD,gBAAQ,CAACC,SAAT,CAAoBgT,GAApB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCtF,IAAI,CAACxjB,MAAxC;AAEAiqB,oBAAY,CAACzG,IAAb,GAAoBA,IAApB;AAEA;;AAED,aAAOyG,YAAP;AAEA;;AAED,QAAIiB,WAAW,GAAG,CAAlB,C,CAAqB;;AACrB,QAAMC,KAAK,GAAG,IAAIxqB,OAAJ,EAAd;;AACA,QAAMyqB,MAAM,GAAG,IAAI/jB,QAAJ,EAAf;;AACA,QAAMgkB,SAAS,GAAG,IAAIttB,OAAJ,EAAlB;;AAEA,aAASutB,QAAT,GAAoB;AAEnB9nF,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAE3yC,aAAK,EAAEm/E,WAAW,IAAI;AAAxB,OAAnC;AAEA,WAAKt/B,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAKvqD,IAAL,GAAY,EAAZ;AACA,WAAK2F,IAAL,GAAY,UAAZ;AAEA,WAAKorB,QAAL,GAAgB,EAAhB;AACA,WAAKd,MAAL,GAAc,EAAd;AACA,WAAKmB,KAAL,GAAa,EAAb;AACA,WAAKsxD,aAAL,GAAqB,CAAC,EAAD,CAArB;AAEA,WAAK5D,YAAL,GAAoB,EAApB;AACA,WAAKC,YAAL,GAAoB,EAApB;AAEA,WAAKgD,WAAL,GAAmB,EAAnB;AACA,WAAKC,WAAL,GAAmB,EAAnB;AAEA,WAAK4C,aAAL,GAAqB,EAArB;AAEA,WAAKnX,WAAL,GAAmB,IAAnB;AACA,WAAKwU,cAAL,GAAsB,IAAtB,CAvBmB,CAyBnB;;AAEA,WAAKgD,kBAAL,GAA0B,KAA1B;AACA,WAAK/C,kBAAL,GAA0B,KAA1B;AACA,WAAKG,aAAL,GAAqB,KAArB;AACA,WAAKF,iBAAL,GAAyB,KAAzB;AACA,WAAKC,gBAAL,GAAwB,KAAxB;AACA,WAAK8C,uBAAL,GAA+B,KAA/B;AACA,WAAK5C,gBAAL,GAAwB,KAAxB;AAEA;;AAEDgI,YAAQ,CAACnyE,SAAT,GAAqB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAE/E0M,iBAAW,EAAEylE,QAFkE;AAI/EzF,gBAAU,EAAE,IAJmE;AAM/EluB,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC,YAAMmlD,YAAY,GAAG,IAAIhX,OAAJ,GAAcoD,eAAd,CAA+BvxC,MAA/B,CAArB;;AAEA,aAAM,IAAIzgB,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK/7C,QAAL,CAAczwB,MAApC,EAA4CW,IAAC,GAAG6rE,EAAhD,EAAoD7rE,IAAC,EAArD,EAA2D;AAE1D,cAAMspF,MAAM,GAAG,KAAKx5D,QAAL,CAAe9vB,IAAf,CAAf;AACAspF,gBAAM,CAAC5zB,YAAP,CAAqBj1C,MAArB;AAEA;;AAED,aAAM,IAAIzgB,IAAC,GAAG,CAAR,EAAW6rE,IAAE,GAAG,KAAK17C,KAAL,CAAW9wB,MAAjC,EAAyCW,IAAC,GAAG6rE,IAA7C,EAAiD7rE,IAAC,EAAlD,EAAwD;AAEvD,cAAMuhF,IAAI,GAAG,KAAKpxD,KAAL,CAAYnwB,IAAZ,CAAb;AACAuhF,cAAI,CAACxjB,MAAL,CAAYhR,YAAZ,CAA0B6Y,YAA1B,EAAyCjY,SAAzC;;AAEA,eAAM,IAAIrtD,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAGhD,IAAI,CAACpJ,aAAL,CAAmB94E,MAAzC,EAAiDiB,CAAC,GAAGikF,EAArD,EAAyDjkF,CAAC,EAA1D,EAAgE;AAE/DihF,gBAAI,CAACpJ,aAAL,CAAoB73E,CAApB,EAAwBysD,YAAxB,CAAsC6Y,YAAtC,EAAqDjY,SAArD;AAEA;AAED;;AAED,YAAK,KAAK6e,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,eAAKC,kBAAL;AAEA;;AAED,YAAK,KAAKuU,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,eAAKyC,qBAAL;AAEA;;AAED,aAAKxC,kBAAL,GAA0B,IAA1B;AACA,aAAKC,iBAAL,GAAyB,IAAzB;AAEA,eAAO,IAAP;AAEA,OA/C8E;AAiD/Era,aAAO,EAAE,iBAAWtnD,KAAX,EAAmB;AAE3B;AAEA2pE,aAAK,CAACpnB,aAAN,CAAqBviD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmBwzB,KAAnB;AAEA,eAAO,IAAP;AAEA,OA3D8E;AA6D/EpiB,aAAO,EAAE,iBAAWvnD,KAAX,EAAmB;AAE3B;AAEA2pE,aAAK,CAACnnB,aAAN,CAAqBxiD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmBwzB,KAAnB;AAEA,eAAO,IAAP;AAEA,OAvE8E;AAyE/EniB,aAAO,EAAE,iBAAWxnD,KAAX,EAAmB;AAE3B;AAEA2pE,aAAK,CAAClnB,aAAN,CAAqBziD,KAArB;;AAEA,aAAKm2C,YAAL,CAAmBwzB,KAAnB;AAEA,eAAO,IAAP;AAEA,OAnF8E;AAqF/Ev2B,eAAS,EAAE,mBAAWhoD,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE/B;AAEAi8D,aAAK,CAACrnB,eAAN,CAAuBl3D,CAAvB,EAA0B+W,CAA1B,EAA6BuL,CAA7B;;AAEA,aAAKyoC,YAAL,CAAmBwzB,KAAnB;AAEA,eAAO,IAAP;AAEA,OA/F8E;AAiG/EpsE,WAAK,EAAE,eAAWnS,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE3B;AAEAi8D,aAAK,CAAChnB,SAAN,CAAiBv3D,CAAjB,EAAoB+W,CAApB,EAAuBuL,CAAvB;;AAEA,aAAKyoC,YAAL,CAAmBwzB,KAAnB;AAEA,eAAO,IAAP;AAEA,OA3G8E;AA6G/E/rE,YAAM,EAAE,gBAAWkqD,MAAX,EAAoB;AAE3B8hB,cAAM,CAAChsE,MAAP,CAAekqD,MAAf;;AAEA8hB,cAAM,CAACv0B,YAAP;;AAEA,aAAKc,YAAL,CAAmByzB,MAAM,CAAC1oE,MAA1B;AAEA,eAAO,IAAP;AAEA,OAvH8E;AAyH/E8oE,wBAAkB,EAAE,4BAAWjgB,QAAX,EAAsB;AAEzC,YAAMruD,KAAK,GAAG,IAAd;AAEA,YAAM6L,KAAK,GAAGwiD,QAAQ,CAACxiD,KAAT,KAAmB,IAAnB,GAA0BwiD,QAAQ,CAACxiD,KAAnC,GAA2C1Y,SAAzD;AACA,YAAM0rC,UAAU,GAAGwvB,QAAQ,CAACxvB,UAA5B;;AAEA,YAAKA,UAAU,CAACt/B,QAAX,KAAwBpM,SAA7B,EAAyC;AAExCjN,iBAAO,CAACD,KAAR,CAAe,kFAAf;AACA,iBAAO,IAAP;AAEA;;AAED,YAAMsZ,QAAQ,GAAGs/B,UAAU,CAACt/B,QAA5B;AACA,YAAMujD,MAAM,GAAGjkB,UAAU,CAACikB,MAA1B;AACA,YAAMpuC,KAAK,GAAGmqB,UAAU,CAACnqB,KAAzB;AACA,YAAM0lC,EAAE,GAAGvb,UAAU,CAACub,EAAtB;AACA,YAAMmf,GAAG,GAAG16B,UAAU,CAAC06B,GAAvB;AAEA,YAAKA,GAAG,KAAKpmE,SAAb,EAAyB,KAAKqzE,aAAL,CAAoB,CAApB,IAA0B,EAA1B;;AAEzB,aAAM,IAAIzhF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGwa,QAAQ,CAACuuD,KAA9B,EAAqC/oE,IAAC,EAAtC,EAA4C;AAE3Cib,eAAK,CAAC6U,QAAN,CAAepvB,IAAf,CAAqB,IAAIo7D,OAAJ,GAAcvN,mBAAd,CAAmC/zC,QAAnC,EAA6Cxa,IAA7C,CAArB;;AAEA,cAAK2vB,KAAK,KAAKvhB,SAAf,EAA2B;AAE1B6M,iBAAK,CAAC+T,MAAN,CAAatuB,IAAb,CAAmB,IAAIi1E,KAAJ,GAAYpnB,mBAAZ,CAAiC5+B,KAAjC,EAAwC3vB,IAAxC,CAAnB;AAEA;AAED;;AAED,iBAASwpF,OAAT,CAAkBjqF,CAAlB,EAAqBC,CAArB,EAAwBoxB,CAAxB,EAA2BsnD,aAA3B,EAA2C;AAE1C,cAAME,YAAY,GAAKzoD,KAAK,KAAKvhB,SAAZ,GAA0B,EAA1B,GAA+B,CACnD6M,KAAK,CAAC+T,MAAN,CAAczvB,CAAd,EAAkB+a,KAAlB,EADmD,EAEnDW,KAAK,CAAC+T,MAAN,CAAcxvB,CAAd,EAAkB8a,KAAlB,EAFmD,EAGnDW,KAAK,CAAC+T,MAAN,CAAc4B,CAAd,EAAkBtW,KAAlB,EAHmD,CAApD;AAMA,cAAM69D,aAAa,GAAKpa,MAAM,KAAK3vD,SAAb,GAA2B,EAA3B,GAAgC,CACrD,IAAI0tD,OAAJ,GAAcvN,mBAAd,CAAmCwP,MAAnC,EAA2Cx+D,CAA3C,CADqD,EAErD,IAAIu8D,OAAJ,GAAcvN,mBAAd,CAAmCwP,MAAnC,EAA2Cv+D,CAA3C,CAFqD,EAGrD,IAAIs8D,OAAJ,GAAcvN,mBAAd,CAAmCwP,MAAnC,EAA2CntC,CAA3C,CAHqD,CAAtD;AAMA,cAAM2wD,IAAI,GAAG,IAAItJ,KAAJ,CAAW14E,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoBunD,aAApB,EAAmCC,YAAnC,EAAiDF,aAAjD,CAAb;AAEAj9D,eAAK,CAACkV,KAAN,CAAYzvB,IAAZ,CAAkB6gF,IAAlB;;AAEA,cAAKlsB,EAAE,KAAKjnD,SAAZ,EAAwB;AAEvB6M,iBAAK,CAACwmE,aAAN,CAAqB,CAArB,EAAyB/gF,IAAzB,CAA+B,CAC9B,IAAIsrD,OAAJ,GAAcuC,mBAAd,CAAmC8G,EAAnC,EAAuC91D,CAAvC,CAD8B,EAE9B,IAAIysD,OAAJ,GAAcuC,mBAAd,CAAmC8G,EAAnC,EAAuC71D,CAAvC,CAF8B,EAG9B,IAAIwsD,OAAJ,GAAcuC,mBAAd,CAAmC8G,EAAnC,EAAuCzkC,CAAvC,CAH8B,CAA/B;AAMA;;AAED,cAAK4jD,GAAG,KAAKpmE,SAAb,EAAyB;AAExB6M,iBAAK,CAACwmE,aAAN,CAAqB,CAArB,EAAyB/gF,IAAzB,CAA+B,CAC9B,IAAIsrD,OAAJ,GAAcuC,mBAAd,CAAmCimB,GAAnC,EAAwCj1E,CAAxC,CAD8B,EAE9B,IAAIysD,OAAJ,GAAcuC,mBAAd,CAAmCimB,GAAnC,EAAwCh1E,CAAxC,CAF8B,EAG9B,IAAIwsD,OAAJ,GAAcuC,mBAAd,CAAmCimB,GAAnC,EAAwC5jD,CAAxC,CAH8B,CAA/B;AAMA;AAED;;AAED,YAAMiwD,MAAM,GAAGvX,QAAQ,CAACuX,MAAxB;;AAEA,YAAKA,MAAM,CAACxhF,MAAP,GAAgB,CAArB,EAAyB;AAExB,eAAM,IAAIW,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG6gF,MAAM,CAACxhF,MAA5B,EAAoCW,IAAC,EAArC,EAA2C;AAE1C,gBAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,IAAF,CAApB;AAEA,gBAAMyyE,KAAK,GAAGztE,KAAK,CAACytE,KAApB;AACA,gBAAM1J,KAAK,GAAG/jE,KAAK,CAAC+jE,KAApB;;AAEA,iBAAM,IAAIzoE,CAAC,GAAGmyE,KAAR,EAAe8R,EAAE,GAAG9R,KAAK,GAAG1J,KAAlC,EAAyCzoE,CAAC,GAAGikF,EAA7C,EAAiDjkF,CAAC,IAAI,CAAtD,EAA0D;AAEzD,kBAAKwmB,KAAK,KAAK1Y,SAAf,EAA2B;AAE1Bo7E,uBAAO,CAAE1iE,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAZ,CAAF,EAAmBwmB,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAC,GAAG,CAAhB,CAAnB,EAAwCwmB,KAAK,CAAC2nC,IAAN,CAAYnuD,CAAC,GAAG,CAAhB,CAAxC,EAA6D0E,KAAK,CAACkzE,aAAnE,CAAP;AAEA,eAJD,MAIO;AAENsR,uBAAO,CAAElpF,CAAF,EAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmB0E,KAAK,CAACkzE,aAAzB,CAAP;AAEA;AAED;AAED;AAED,SAzBD,MAyBO;AAEN,cAAKpxD,KAAK,KAAK1Y,SAAf,EAA2B;AAE1B,iBAAM,IAAIpO,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG8mB,KAAK,CAACiiD,KAA3B,EAAkC/oE,IAAC,IAAI,CAAvC,EAA2C;AAE1CwpF,qBAAO,CAAE1iE,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAZ,CAAF,EAAmB8mB,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAnB,EAAwC8mB,KAAK,CAAC2nC,IAAN,CAAYzuD,IAAC,GAAG,CAAhB,CAAxC,CAAP;AAEA;AAED,WARD,MAQO;AAEN,iBAAM,IAAIA,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGwa,QAAQ,CAACuuD,KAA9B,EAAqC/oE,IAAC,IAAI,CAA1C,EAA8C;AAE7CwpF,qBAAO,CAAExpF,IAAF,EAAKA,IAAC,GAAG,CAAT,EAAYA,IAAC,GAAG,CAAhB,CAAP;AAEA;AAED;AAED;;AAED,aAAKwkF,kBAAL;;AAEA,YAAKlb,QAAQ,CAACkD,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,eAAKA,WAAL,GAAmBlD,QAAQ,CAACkD,WAAT,CAAqBlyD,KAArB,EAAnB;AAEA;;AAED,YAAKgvD,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,eAAKA,cAAL,GAAsB1X,QAAQ,CAAC0X,cAAT,CAAwB1mE,KAAxB,EAAtB;AAEA;;AAED,eAAO,IAAP;AAEA,OApQ8E;AAsQ/E4hC,YAAM,EAAE,kBAAY;AAEnB,aAAKuwB,kBAAL;AAEA,aAAKD,WAAL,CAAiBrwB,SAAjB,CAA4BitC,SAA5B,EAAwC77B,MAAxC;AAEA,aAAKoF,SAAL,CAAgBy2B,SAAS,CAACz+E,CAA1B,EAA6By+E,SAAS,CAAC1nE,CAAvC,EAA0C0nE,SAAS,CAACn8D,CAApD;AAEA,eAAO,IAAP;AAEA,OAhR8E;AAkR/E0gC,eAAS,EAAE,qBAAY;AAEtB,aAAK81B,qBAAL;AAEA,YAAMvnC,MAAM,GAAG,KAAK8kC,cAAL,CAAoB9kC,MAAnC;AACA,YAAMr/B,MAAM,GAAG,KAAKmkE,cAAL,CAAoBnkE,MAAnC;AAEA,YAAMyT,CAAC,GAAGzT,MAAM,KAAK,CAAX,GAAe,CAAf,GAAmB,MAAMA,MAAnC;AAEA,YAAM4D,MAAM,GAAG,IAAIi+C,OAAJ,EAAf;AACAj+C,cAAM,CAACpD,GAAP,CACCiT,CADD,EACI,CADJ,EACO,CADP,EACU,CAAEA,CAAF,GAAM4rB,MAAM,CAACvxC,CADvB,EAEC,CAFD,EAEI2lB,CAFJ,EAEO,CAFP,EAEU,CAAEA,CAAF,GAAM4rB,MAAM,CAACx6B,CAFvB,EAGC,CAHD,EAGI,CAHJ,EAGO4O,CAHP,EAGU,CAAEA,CAAF,GAAM4rB,MAAM,CAACjvB,CAHvB,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV;AAOA,aAAKyoC,YAAL,CAAmBj1C,MAAnB;AAEA,eAAO,IAAP;AAEA,OAvS8E;AAyS/E+jE,wBAAkB,EAAE,8BAAY;AAE/B,YAAMU,EAAE,GAAG,IAAIppB,OAAJ,EAAX;AAAA,YAA0BqpB,EAAE,GAAG,IAAIrpB,OAAJ,EAA/B;;AAEA,aAAM,IAAI9qC,CAAC,GAAG,CAAR,EAAWs3D,EAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,CAAC,GAAGs3D,EAA7C,EAAiDt3D,CAAC,EAAlD,EAAwD;AAEvD,cAAMuwD,IAAI,GAAG,KAAKpxD,KAAL,CAAYa,CAAZ,CAAb;AAEA,cAAMo0D,EAAE,GAAG,KAAKt1D,QAAL,CAAeyxD,IAAI,CAAChiF,CAApB,CAAX;AACA,cAAM8lF,EAAE,GAAG,KAAKv1D,QAAL,CAAeyxD,IAAI,CAAC/hF,CAApB,CAAX;AACA,cAAM8lF,EAAE,GAAG,KAAKx1D,QAAL,CAAeyxD,IAAI,CAAC3wD,CAApB,CAAX;AAEAs0D,YAAE,CAACzjE,UAAH,CAAe6jE,EAAf,EAAmBD,EAAnB;AACAF,YAAE,CAAC1jE,UAAH,CAAe2jE,EAAf,EAAmBC,EAAnB;AACAH,YAAE,CAAC13B,KAAH,CAAU23B,EAAV;AAEAD,YAAE,CAACv3B,SAAH;AAEA4zB,cAAI,CAACxjB,MAAL,CAAY7iD,IAAZ,CAAkBgqE,EAAlB;AAEA;AAED,OA/T8E;AAiU/ET,0BAAoB,EAAE,8BAAWgF,YAAX,EAA0B;AAE/C,YAAKA,YAAY,KAAKr7E,SAAtB,EAAkCq7E,YAAY,GAAG,IAAf;AAElC,YAAM35D,QAAQ,GAAG,IAAI2B,KAAJ,CAAW,KAAK3B,QAAL,CAAczwB,MAAzB,CAAjB;;AAEA,aAAM,IAAIqgB,CAAC,GAAG,CAAR,EAAWgqE,EAAE,GAAG,KAAK55D,QAAL,CAAczwB,MAApC,EAA4CqgB,CAAC,GAAGgqE,EAAhD,EAAoDhqE,CAAC,EAArD,EAA2D;AAE1DoQ,kBAAQ,CAAEpQ,CAAF,CAAR,GAAgB,IAAIo8C,OAAJ,EAAhB;AAEA;;AAED,YAAK2tB,YAAL,EAAoB;AAEnB;AACA;AAEA,cAAMvE,EAAE,GAAG,IAAIppB,OAAJ,EAAX;AAAA,cAA0BqpB,EAAE,GAAG,IAAIrpB,OAAJ,EAA/B;;AAEA,eAAM,IAAI9qC,CAAC,GAAG,CAAR,EAAWs3D,EAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,CAAC,GAAGs3D,EAA7C,EAAiDt3D,CAAC,EAAlD,EAAwD;AAEvD,gBAAMuwD,IAAI,GAAG,KAAKpxD,KAAL,CAAYa,CAAZ,CAAb;AAEA,gBAAMo0D,EAAE,GAAG,KAAKt1D,QAAL,CAAeyxD,IAAI,CAAChiF,CAApB,CAAX;AACA,gBAAM8lF,EAAE,GAAG,KAAKv1D,QAAL,CAAeyxD,IAAI,CAAC/hF,CAApB,CAAX;AACA,gBAAM8lF,EAAE,GAAG,KAAKx1D,QAAL,CAAeyxD,IAAI,CAAC3wD,CAApB,CAAX;AAEAs0D,cAAE,CAACzjE,UAAH,CAAe6jE,EAAf,EAAmBD,EAAnB;AACAF,cAAE,CAAC1jE,UAAH,CAAe2jE,EAAf,EAAmBC,EAAnB;AACAH,cAAE,CAAC13B,KAAH,CAAU23B,EAAV;AAEAr1D,oBAAQ,CAAEyxD,IAAI,CAAChiF,CAAP,CAAR,CAAmB0d,GAAnB,CAAwBioE,EAAxB;AACAp1D,oBAAQ,CAAEyxD,IAAI,CAAC/hF,CAAP,CAAR,CAAmByd,GAAnB,CAAwBioE,EAAxB;AACAp1D,oBAAQ,CAAEyxD,IAAI,CAAC3wD,CAAP,CAAR,CAAmB3T,GAAnB,CAAwBioE,EAAxB;AAEA;AAED,SAzBD,MAyBO;AAEN,eAAKV,kBAAL;;AAEA,eAAM,IAAIxzD,EAAC,GAAG,CAAR,EAAWs3D,GAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,EAAC,GAAGs3D,GAA7C,EAAiDt3D,EAAC,EAAlD,EAAwD;AAEvD,gBAAMuwD,KAAI,GAAG,KAAKpxD,KAAL,CAAYa,EAAZ,CAAb;;AAEAlB,oBAAQ,CAAEyxD,KAAI,CAAChiF,CAAP,CAAR,CAAmB0d,GAAnB,CAAwBskE,KAAI,CAACxjB,MAA7B;;AACAjuC,oBAAQ,CAAEyxD,KAAI,CAAC/hF,CAAP,CAAR,CAAmByd,GAAnB,CAAwBskE,KAAI,CAACxjB,MAA7B;;AACAjuC,oBAAQ,CAAEyxD,KAAI,CAAC3wD,CAAP,CAAR,CAAmB3T,GAAnB,CAAwBskE,KAAI,CAACxjB,MAA7B;AAEA;AAED;;AAED,aAAM,IAAIr+C,EAAC,GAAG,CAAR,EAAWgqE,GAAE,GAAG,KAAK55D,QAAL,CAAczwB,MAApC,EAA4CqgB,EAAC,GAAGgqE,GAAhD,EAAoDhqE,EAAC,EAArD,EAA2D;AAE1DoQ,kBAAQ,CAAEpQ,EAAF,CAAR,CAAciuC,SAAd;AAEA;;AAED,aAAM,IAAI38B,GAAC,GAAG,CAAR,EAAWs3D,IAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,GAAC,GAAGs3D,IAA7C,EAAiDt3D,GAAC,EAAlD,EAAwD;AAEvD,cAAMuwD,MAAI,GAAG,KAAKpxD,KAAL,CAAYa,GAAZ,CAAb;AAEA,cAAMmnD,aAAa,GAAGoJ,MAAI,CAACpJ,aAA3B;;AAEA,cAAKA,aAAa,CAAC94E,MAAd,KAAyB,CAA9B,EAAkC;AAEjC84E,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyB4U,QAAQ,CAAEyxD,MAAI,CAAChiF,CAAP,CAAjC;AACA44E,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyB4U,QAAQ,CAAEyxD,MAAI,CAAC/hF,CAAP,CAAjC;AACA24E,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyB4U,QAAQ,CAAEyxD,MAAI,CAAC3wD,CAAP,CAAjC;AAEA,WAND,MAMO;AAENunD,yBAAa,CAAE,CAAF,CAAb,GAAqBroD,QAAQ,CAAEyxD,MAAI,CAAChiF,CAAP,CAAR,CAAmB+a,KAAnB,EAArB;AACA69D,yBAAa,CAAE,CAAF,CAAb,GAAqBroD,QAAQ,CAAEyxD,MAAI,CAAC/hF,CAAP,CAAR,CAAmB8a,KAAnB,EAArB;AACA69D,yBAAa,CAAE,CAAF,CAAb,GAAqBroD,QAAQ,CAAEyxD,MAAI,CAAC3wD,CAAP,CAAR,CAAmBtW,KAAnB,EAArB;AAEA;AAED;;AAED,YAAK,KAAK6V,KAAL,CAAW9wB,MAAX,GAAoB,CAAzB,EAA6B;AAE5B,eAAK6hF,iBAAL,GAAyB,IAAzB;AAEA;AAED,OAxZ8E;AA0Z/EyI,8BAAwB,EAAE,oCAAY;AAErC,aAAKnF,kBAAL;;AAEA,aAAM,IAAIxzD,CAAC,GAAG,CAAR,EAAWs3D,EAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,CAAC,GAAGs3D,EAA7C,EAAiDt3D,CAAC,EAAlD,EAAwD;AAEvD,cAAMuwD,IAAI,GAAG,KAAKpxD,KAAL,CAAYa,CAAZ,CAAb;AAEA,cAAMmnD,aAAa,GAAGoJ,IAAI,CAACpJ,aAA3B;;AAEA,cAAKA,aAAa,CAAC94E,MAAd,KAAyB,CAA9B,EAAkC;AAEjC84E,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyBqmE,IAAI,CAACxjB,MAA9B;AACAoa,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyBqmE,IAAI,CAACxjB,MAA9B;AACAoa,yBAAa,CAAE,CAAF,CAAb,CAAmBj9D,IAAnB,CAAyBqmE,IAAI,CAACxjB,MAA9B;AAEA,WAND,MAMO;AAENoa,yBAAa,CAAE,CAAF,CAAb,GAAqBoJ,IAAI,CAACxjB,MAAL,CAAYzjD,KAAZ,EAArB;AACA69D,yBAAa,CAAE,CAAF,CAAb,GAAqBoJ,IAAI,CAACxjB,MAAL,CAAYzjD,KAAZ,EAArB;AACA69D,yBAAa,CAAE,CAAF,CAAb,GAAqBoJ,IAAI,CAACxjB,MAAL,CAAYzjD,KAAZ,EAArB;AAEA;AAED;;AAED,YAAK,KAAK6V,KAAL,CAAW9wB,MAAX,GAAoB,CAAzB,EAA6B;AAE5B,eAAK6hF,iBAAL,GAAyB,IAAzB;AAEA;AAED,OA1b8E;AA4b/E0I,yBAAmB,EAAE,+BAAY;AAEhC;AACA;AACA;AAEA,aAAM,IAAI54D,CAAC,GAAG,CAAR,EAAWs3D,EAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,CAAC,GAAGs3D,EAA7C,EAAiDt3D,CAAC,EAAlD,EAAwD;AAEvD,cAAMuwD,IAAI,GAAG,KAAKpxD,KAAL,CAAYa,CAAZ,CAAb;;AAEA,cAAK,CAAEuwD,IAAI,CAACsI,oBAAZ,EAAmC;AAElCtI,gBAAI,CAACsI,oBAAL,GAA4BtI,IAAI,CAACxjB,MAAL,CAAYzjD,KAAZ,EAA5B;AAEA,WAJD,MAIO;AAENinE,gBAAI,CAACsI,oBAAL,CAA0B3uE,IAA1B,CAAgCqmE,IAAI,CAACxjB,MAArC;AAEA;;AAED,cAAK,CAAEwjB,IAAI,CAACuI,uBAAZ,EAAsCvI,IAAI,CAACuI,uBAAL,GAA+B,EAA/B;;AAEtC,eAAM,IAAI9pF,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG0V,IAAI,CAACpJ,aAAL,CAAmB94E,MAAzC,EAAiDW,IAAC,GAAG6rE,EAArD,EAAyD7rE,IAAC,EAA1D,EAAgE;AAE/D,gBAAK,CAAEuhF,IAAI,CAACuI,uBAAL,CAA8B9pF,IAA9B,CAAP,EAA2C;AAE1CuhF,kBAAI,CAACuI,uBAAL,CAA8B9pF,IAA9B,IAAoCuhF,IAAI,CAACpJ,aAAL,CAAoBn4E,IAApB,EAAwBsa,KAAxB,EAApC;AAEA,aAJD,MAIO;AAENinE,kBAAI,CAACuI,uBAAL,CAA8B9pF,IAA9B,EAAkCkb,IAAlC,CAAwCqmE,IAAI,CAACpJ,aAAL,CAAoBn4E,IAApB,CAAxC;AAEA;AAED;AAED,SApC+B,CAsChC;;;AAEA,YAAM+pF,MAAM,GAAG,IAAIV,QAAJ,EAAf;AACAU,cAAM,CAAC55D,KAAP,GAAe,KAAKA,KAApB;;AAEA,aAAM,IAAInwB,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG,KAAKgS,YAAL,CAAkBx+E,MAAxC,EAAgDW,IAAC,GAAG6rE,KAApD,EAAwD7rE,IAAC,EAAzD,EAA+D;AAE9D;AAEA,cAAK,CAAE,KAAK89E,YAAL,CAAmB99E,IAAnB,CAAP,EAAgC;AAE/B,iBAAK89E,YAAL,CAAmB99E,IAAnB,IAAyB,EAAzB;AACA,iBAAK89E,YAAL,CAAmB99E,IAAnB,EAAuBgqF,WAAvB,GAAqC,EAArC;AACA,iBAAKlM,YAAL,CAAmB99E,IAAnB,EAAuBm4E,aAAvB,GAAuC,EAAvC;AAEA,gBAAM8R,cAAc,GAAG,KAAKnM,YAAL,CAAmB99E,IAAnB,EAAuBgqF,WAA9C;AACA,gBAAME,gBAAgB,GAAG,KAAKpM,YAAL,CAAmB99E,IAAnB,EAAuBm4E,aAAhD;;AAEA,iBAAM,IAAInnD,GAAC,GAAG,CAAR,EAAWs3D,IAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,GAAC,GAAGs3D,IAA7C,EAAiDt3D,GAAC,EAAlD,EAAwD;AAEvD,kBAAMm5D,UAAU,GAAG,IAAIruB,OAAJ,EAAnB;AACA,kBAAMqc,aAAa,GAAG;AAAE54E,iBAAC,EAAE,IAAIu8D,OAAJ,EAAL;AAAoBt8D,iBAAC,EAAE,IAAIs8D,OAAJ,EAAvB;AAAsClrC,iBAAC,EAAE,IAAIkrC,OAAJ;AAAzC,eAAtB;AAEAmuB,4BAAc,CAACvpF,IAAf,CAAqBypF,UAArB;AACAD,8BAAgB,CAACxpF,IAAjB,CAAuBy3E,aAAvB;AAEA;AAED;;AAED,cAAM2F,YAAY,GAAG,KAAKA,YAAL,CAAmB99E,IAAnB,CAArB,CAzB8D,CA2B9D;;AAEA+pF,gBAAM,CAACj6D,QAAP,GAAkB,KAAK+tD,YAAL,CAAmB79E,IAAnB,EAAuB8vB,QAAzC,CA7B8D,CA+B9D;;AAEAi6D,gBAAM,CAACvF,kBAAP;AACAuF,gBAAM,CAACtF,oBAAP,GAlC8D,CAoC9D;;AAEA,eAAM,IAAIzzD,GAAC,GAAG,CAAR,EAAWs3D,IAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,GAAC,GAAGs3D,IAA7C,EAAiDt3D,GAAC,EAAlD,EAAwD;AAEvD,gBAAMuwD,MAAI,GAAG,KAAKpxD,KAAL,CAAYa,GAAZ,CAAb;AAEA,gBAAMm5D,WAAU,GAAGrM,YAAY,CAACkM,WAAb,CAA0Bh5D,GAA1B,CAAnB;AACA,gBAAMmnD,cAAa,GAAG2F,YAAY,CAAC3F,aAAb,CAA4BnnD,GAA5B,CAAtB;;AAEAm5D,uBAAU,CAACjvE,IAAX,CAAiBqmE,MAAI,CAACxjB,MAAtB;;AAEAoa,0BAAa,CAAC54E,CAAd,CAAgB2b,IAAhB,CAAsBqmE,MAAI,CAACpJ,aAAL,CAAoB,CAApB,CAAtB;;AACAA,0BAAa,CAAC34E,CAAd,CAAgB0b,IAAhB,CAAsBqmE,MAAI,CAACpJ,aAAL,CAAoB,CAApB,CAAtB;;AACAA,0BAAa,CAACvnD,CAAd,CAAgB1V,IAAhB,CAAsBqmE,MAAI,CAACpJ,aAAL,CAAoB,CAApB,CAAtB;AAEA;AAED,SAhG+B,CAkGhC;;;AAEA,aAAM,IAAInnD,GAAC,GAAG,CAAR,EAAWs3D,IAAE,GAAG,KAAKn4D,KAAL,CAAW9wB,MAAjC,EAAyC2xB,GAAC,GAAGs3D,IAA7C,EAAiDt3D,GAAC,EAAlD,EAAwD;AAEvD,cAAMuwD,MAAI,GAAG,KAAKpxD,KAAL,CAAYa,GAAZ,CAAb;AAEAuwD,gBAAI,CAACxjB,MAAL,GAAcwjB,MAAI,CAACsI,oBAAnB;AACAtI,gBAAI,CAACpJ,aAAL,GAAqBoJ,MAAI,CAACuI,uBAA1B;AAEA;AAED,OAziB8E;AA2iB/Erd,wBAAkB,EAAE,8BAAY;AAE/B,YAAK,KAAKD,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,eAAKA,WAAL,GAAmB,IAAI9B,IAAJ,EAAnB;AAEA;;AAED,aAAK8B,WAAL,CAAiBb,aAAjB,CAAgC,KAAK77C,QAArC;AAEA,OArjB8E;AAujB/E2zD,2BAAqB,EAAE,iCAAY;AAElC,YAAK,KAAKzC,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,eAAKA,cAAL,GAAsB,IAAI7S,MAAJ,EAAtB;AAEA;;AAED,aAAK6S,cAAL,CAAoBrV,aAApB,CAAmC,KAAK77C,QAAxC;AAEA,OAjkB8E;AAmkB/E01D,WAAK,EAAE,eAAWlc,QAAX,EAAqB7oD,MAArB,EAA6B2pE,mBAA7B,EAAmD;AAEzD,YAAK,EAAI9gB,QAAQ,IAAIA,QAAQ,CAACsa,UAAzB,CAAL,EAA6C;AAE5CziF,iBAAO,CAACD,KAAR,CAAe,qEAAf,EAAsFooE,QAAtF;AACA;AAEA;;AAED,YAAI1D,YAAJ;AAAA,YACCykB,YAAY,GAAG,KAAKv6D,QAAL,CAAczwB,MAD9B;AAAA,YAECirF,SAAS,GAAG,KAAKx6D,QAFlB;AAAA,YAGCy6D,SAAS,GAAGjhB,QAAQ,CAACx5C,QAHtB;AAAA,YAIC06D,MAAM,GAAG,KAAKr6D,KAJf;AAAA,YAKCs6D,MAAM,GAAGnhB,QAAQ,CAACn5C,KALnB;AAAA,YAMCu6D,OAAO,GAAG,KAAK17D,MANhB;AAAA,YAOC27D,OAAO,GAAGrhB,QAAQ,CAACt6C,MAPpB;AASA,YAAKo7D,mBAAmB,KAAKh8E,SAA7B,EAAyCg8E,mBAAmB,GAAG,CAAtB;;AAEzC,YAAK3pE,MAAM,KAAKrS,SAAhB,EAA4B;AAE3Bw3D,sBAAY,GAAG,IAAIhX,OAAJ,GAAcoD,eAAd,CAA+BvxC,MAA/B,CAAf;AAEA,SAxBwD,CA0BzD;;;AAEA,aAAM,IAAIzgB,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG0e,SAAS,CAAClrF,MAAhC,EAAwCW,IAAC,GAAG6rE,EAA5C,EAAgD7rE,IAAC,EAAjD,EAAuD;AAEtD,cAAMspF,MAAM,GAAGiB,SAAS,CAAEvqF,IAAF,CAAxB;AAEA,cAAM4qF,UAAU,GAAGtB,MAAM,CAAChvE,KAAP,EAAnB;AAEA,cAAKmG,MAAM,KAAKrS,SAAhB,EAA4Bw8E,UAAU,CAACl1B,YAAX,CAAyBj1C,MAAzB;AAE5B6pE,mBAAS,CAAC5pF,IAAV,CAAgBkqF,UAAhB;AAEA,SAtCwD,CAwCzD;;;AAEA,aAAM,IAAI5qF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG8e,OAAO,CAACtrF,MAA9B,EAAsCW,IAAC,GAAG6rE,KAA1C,EAA8C7rE,IAAC,EAA/C,EAAqD;AAEpD0qF,iBAAO,CAAChqF,IAAR,CAAciqF,OAAO,CAAE3qF,IAAF,CAAP,CAAasa,KAAb,EAAd;AAEA,SA9CwD,CAgDzD;;;AAEA,aAAM,IAAIta,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG4e,MAAM,CAACprF,MAA7B,EAAqCW,IAAC,GAAG6rE,KAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD,cAAIuhF,IAAI,GAAGkJ,MAAM,CAAEzqF,IAAF,CAAjB;AAAA,cAAwB6qF,QAAQ,SAAhC;AAAA,cAAkC9sB,MAAM,SAAxC;AAAA,cAA0CpuC,KAAK,SAA/C;AAAA,cACCm7D,iBAAiB,GAAGvJ,IAAI,CAACpJ,aAD1B;AAAA,cAEC4S,gBAAgB,GAAGxJ,IAAI,CAACnJ,YAFzB;AAIAyS,kBAAQ,GAAG,IAAI5S,KAAJ,CAAWsJ,IAAI,CAAChiF,CAAL,GAAS8qF,YAApB,EAAkC9I,IAAI,CAAC/hF,CAAL,GAAS6qF,YAA3C,EAAyD9I,IAAI,CAAC3wD,CAAL,GAASy5D,YAAlE,CAAX;AACAQ,kBAAQ,CAAC9sB,MAAT,CAAgB7iD,IAAhB,CAAsBqmE,IAAI,CAACxjB,MAA3B;;AAEA,cAAK6H,YAAY,KAAKx3D,SAAtB,EAAkC;AAEjCy8E,oBAAQ,CAAC9sB,MAAT,CAAgBhR,YAAhB,CAA8B6Y,YAA9B,EAA6CjY,SAA7C;AAEA;;AAED,eAAM,IAAIrtD,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAGuG,iBAAiB,CAACzrF,MAAxC,EAAgDiB,CAAC,GAAGikF,EAApD,EAAwDjkF,CAAC,EAAzD,EAA+D;AAE9Dy9D,kBAAM,GAAG+sB,iBAAiB,CAAExqF,CAAF,CAAjB,CAAuBga,KAAvB,EAAT;;AAEA,gBAAKsrD,YAAY,KAAKx3D,SAAtB,EAAkC;AAEjC2vD,oBAAM,CAAChR,YAAP,CAAqB6Y,YAArB,EAAoCjY,SAApC;AAEA;;AAEDk9B,oBAAQ,CAAC1S,aAAT,CAAuBz3E,IAAvB,CAA6Bq9D,MAA7B;AAEA;;AAED8sB,kBAAQ,CAACl7D,KAAT,CAAezU,IAAf,CAAqBqmE,IAAI,CAAC5xD,KAA1B;;AAEA,eAAM,IAAIrvB,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAGwG,gBAAgB,CAAC1rF,MAAvC,EAA+CiB,GAAC,GAAGikF,IAAnD,EAAuDjkF,GAAC,EAAxD,EAA8D;AAE7DqvB,iBAAK,GAAGo7D,gBAAgB,CAAEzqF,GAAF,CAAxB;AACAuqF,oBAAQ,CAACzS,YAAT,CAAsB13E,IAAtB,CAA4BivB,KAAK,CAACrV,KAAN,EAA5B;AAEA;;AAEDuwE,kBAAQ,CAAC3S,aAAT,GAAyBqJ,IAAI,CAACrJ,aAAL,GAAqBkS,mBAA9C;AAEAI,gBAAM,CAAC9pF,IAAP,CAAamqF,QAAb;AAEA,SA5FwD,CA8FzD;;;AAEA,aAAM,IAAI7qF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGvC,QAAQ,CAACmY,aAAT,CAAuBpiF,MAA7C,EAAqDW,IAAC,GAAG6rE,KAAzD,EAA6D7rE,IAAC,EAA9D,EAAoE;AAEnE,cAAMgrF,cAAc,GAAG1hB,QAAQ,CAACmY,aAAT,CAAwBzhF,IAAxB,CAAvB;AAEA,cAAK,KAAKyhF,aAAL,CAAoBzhF,IAApB,MAA4BoO,SAAjC,EAA6C,KAAKqzE,aAAL,CAAoBzhF,IAApB,IAA0B,EAA1B;;AAE7C,eAAM,IAAIM,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAGyG,cAAc,CAAC3rF,MAArC,EAA6CiB,GAAC,GAAGikF,IAAjD,EAAqDjkF,GAAC,EAAtD,EAA4D;AAE3D,gBAAMsgF,IAAI,GAAGoK,cAAc,CAAE1qF,GAAF,CAA3B;AAAA,gBAAkC2qF,OAAO,GAAG,EAA5C;;AAEA,iBAAM,IAAIzqF,CAAC,GAAG,CAAR,EAAW0qF,EAAE,GAAGtK,IAAI,CAACvhF,MAA3B,EAAmCmB,CAAC,GAAG0qF,EAAvC,EAA2C1qF,CAAC,EAA5C,EAAkD;AAEjDyqF,qBAAO,CAACvqF,IAAR,CAAckgF,IAAI,CAAEpgF,CAAF,CAAJ,CAAU8Z,KAAV,EAAd;AAEA;;AAED,iBAAKmnE,aAAL,CAAoBzhF,IAApB,EAAwBU,IAAxB,CAA8BuqF,OAA9B;AAEA;AAED;AAED,OAzrB8E;AA2rB/EE,eAAS,EAAE,mBAAW97D,IAAX,EAAkB;AAE5B,YAAK,EAAIA,IAAI,IAAIA,IAAI,CAAC85C,MAAjB,CAAL,EAAiC;AAEhChoE,iBAAO,CAACD,KAAR,CAAe,iEAAf,EAAkFmuB,IAAlF;AACA;AAEA;;AAED,YAAKA,IAAI,CAACglC,gBAAV,EAA6BhlC,IAAI,CAACulC,YAAL;AAE7B,aAAK4wB,KAAL,CAAYn2D,IAAI,CAACi6C,QAAjB,EAA2Bj6C,IAAI,CAAC5O,MAAhC;AAEA,OAxsB8E;;AA0sB/E;;;;;AAMA2qE,mBAAa,EAAE,yBAAY;AAE1B,YAAMC,WAAW,GAAG,EAApB,CAF0B,CAEF;;AACxB,YAAMC,MAAM,GAAG,EAAf;AAAA,YAAmBC,OAAO,GAAG,EAA7B;AAEA,YAAMC,eAAe,GAAG,CAAxB,CAL0B,CAKC;;AAC3B,YAAMtR,SAAS,GAAG3hE,IAAI,CAAC+G,GAAL,CAAU,EAAV,EAAcksE,eAAd,CAAlB;;AAEA,aAAM,IAAIxrF,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK/7C,QAAL,CAAczwB,MAApC,EAA4CW,IAAC,GAAG6rE,EAAhD,EAAoD7rE,IAAC,EAArD,EAA2D;AAE1D,cAAM0f,CAAC,GAAG,KAAKoQ,QAAL,CAAe9vB,IAAf,CAAV;AACA,cAAM4pE,GAAG,GAAGrxD,IAAI,CAAC80C,KAAL,CAAY3tC,CAAC,CAAC/U,CAAF,GAAMuvE,SAAlB,IAAgC,GAAhC,GAAsC3hE,IAAI,CAAC80C,KAAL,CAAY3tC,CAAC,CAACgC,CAAF,GAAMw4D,SAAlB,CAAtC,GAAsE,GAAtE,GAA4E3hE,IAAI,CAAC80C,KAAL,CAAY3tC,CAAC,CAACuN,CAAF,GAAMitD,SAAlB,CAAxF;;AAEA,cAAKmR,WAAW,CAAEzhB,GAAF,CAAX,KAAuBx7D,SAA5B,EAAwC;AAEvCi9E,uBAAW,CAAEzhB,GAAF,CAAX,GAAqB5pE,IAArB;AACAsrF,kBAAM,CAAC5qF,IAAP,CAAa,KAAKovB,QAAL,CAAe9vB,IAAf,CAAb;AACAurF,mBAAO,CAAEvrF,IAAF,CAAP,GAAesrF,MAAM,CAACjsF,MAAP,GAAgB,CAA/B;AAEA,WAND,MAMO;AAEN;AACAksF,mBAAO,CAAEvrF,IAAF,CAAP,GAAeurF,OAAO,CAAEF,WAAW,CAAEzhB,GAAF,CAAb,CAAtB;AAEA;AAED,SA1ByB,CA6B1B;AACA;;;AACA,YAAM6hB,mBAAmB,GAAG,EAA5B;;AAEA,aAAM,IAAIzrF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG,KAAK17C,KAAL,CAAW9wB,MAAjC,EAAyCW,IAAC,GAAG6rE,KAA7C,EAAiD7rE,IAAC,EAAlD,EAAwD;AAEvD,cAAMuhF,IAAI,GAAG,KAAKpxD,KAAL,CAAYnwB,IAAZ,CAAb;AAEAuhF,cAAI,CAAChiF,CAAL,GAASgsF,OAAO,CAAEhK,IAAI,CAAChiF,CAAP,CAAhB;AACAgiF,cAAI,CAAC/hF,CAAL,GAAS+rF,OAAO,CAAEhK,IAAI,CAAC/hF,CAAP,CAAhB;AACA+hF,cAAI,CAAC3wD,CAAL,GAAS26D,OAAO,CAAEhK,IAAI,CAAC3wD,CAAP,CAAhB;AAEA,cAAMo1D,OAAO,GAAG,CAAEzE,IAAI,CAAChiF,CAAP,EAAUgiF,IAAI,CAAC/hF,CAAf,EAAkB+hF,IAAI,CAAC3wD,CAAvB,CAAhB,CARuD,CAUvD;AACA;;AACA,eAAM,IAAID,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,gBAAKq1D,OAAO,CAAEr1D,CAAF,CAAP,KAAiBq1D,OAAO,CAAE,CAAEr1D,CAAC,GAAG,CAAN,IAAY,CAAd,CAA7B,EAAiD;AAEhD86D,iCAAmB,CAAC/qF,IAApB,CAA0BV,IAA1B;AACA;AAEA;AAED;AAED;;AAED,aAAM,IAAIA,IAAC,GAAGyrF,mBAAmB,CAACpsF,MAApB,GAA6B,CAA3C,EAA8CW,IAAC,IAAI,CAAnD,EAAsDA,IAAC,EAAvD,EAA6D;AAE5D,cAAM0rF,GAAG,GAAGD,mBAAmB,CAAEzrF,IAAF,CAA/B;AAEA,eAAKmwB,KAAL,CAAW0gB,MAAX,CAAmB66C,GAAnB,EAAwB,CAAxB;;AAEA,eAAM,IAAIprF,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAG,KAAK9C,aAAL,CAAmBpiF,MAAzC,EAAiDiB,CAAC,GAAGikF,EAArD,EAAyDjkF,CAAC,EAA1D,EAAgE;AAE/D,iBAAKmhF,aAAL,CAAoBnhF,CAApB,EAAwBuwC,MAAxB,CAAgC66C,GAAhC,EAAqC,CAArC;AAEA;AAED,SAtEyB,CAwE1B;;;AAEA,YAAMC,IAAI,GAAG,KAAK77D,QAAL,CAAczwB,MAAd,GAAuBisF,MAAM,CAACjsF,MAA3C;AACA,aAAKywB,QAAL,GAAgBw7D,MAAhB;AACA,eAAOK,IAAP;AAEA,OA9xB8E;AAgyB/EhgB,mBAAa,EAAE,uBAAW59C,MAAX,EAAoB;AAElC,aAAK+B,QAAL,GAAgB,EAAhB;;AAEA,aAAM,IAAI9vB,IAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGsjB,MAAM,CAAC1uB,MAA5B,EAAoCW,IAAC,GAAGyK,CAAxC,EAA2CzK,IAAC,EAA5C,EAAkD;AAEjD,cAAMozC,KAAK,GAAGrlB,MAAM,CAAE/tB,IAAF,CAApB;AACA,eAAK8vB,QAAL,CAAcpvB,IAAd,CAAoB,IAAIo7D,OAAJ,CAAa1oB,KAAK,CAACzoC,CAAnB,EAAsByoC,KAAK,CAAC1xB,CAA5B,EAA+B0xB,KAAK,CAACnmB,CAAN,IAAW,CAA1C,CAApB;AAEA;;AAED,eAAO,IAAP;AAEA,OA7yB8E;AA+yB/E2+D,8BAAwB,EAAE,oCAAY;AAErC,YAAMz7D,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM9wB,MAAM,GAAG8wB,KAAK,CAAC9wB,MAArB,CAHqC,CAKrC;;AAEA,aAAM,IAAIW,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGX,MAArB,EAA6BW,IAAC,EAA9B,EAAoC;AAEnCmwB,eAAK,CAAEnwB,IAAF,CAAL,CAAW6rF,GAAX,GAAiB7rF,IAAjB;AAEA,SAXoC,CAarC;;;AAEA,iBAAS8rF,iBAAT,CAA4BvsF,CAA5B,EAA+BC,CAA/B,EAAmC;AAElC,iBAAOD,CAAC,CAAC24E,aAAF,GAAkB14E,CAAC,CAAC04E,aAA3B;AAEA;;AAED/nD,aAAK,CAAC7wB,IAAN,CAAYwsF,iBAAZ,EArBqC,CAuBrC;;AAEA,YAAMC,IAAI,GAAG,KAAKtK,aAAL,CAAoB,CAApB,CAAb;AACA,YAAMb,IAAI,GAAG,KAAKa,aAAL,CAAoB,CAApB,CAAb;AAEA,YAAIuK,OAAJ,EAAaC,OAAb;AAEA,YAAKF,IAAI,IAAIA,IAAI,CAAC1sF,MAAL,KAAgBA,MAA7B,EAAsC2sF,OAAO,GAAG,EAAV;AACtC,YAAKpL,IAAI,IAAIA,IAAI,CAACvhF,MAAL,KAAgBA,MAA7B,EAAsC4sF,OAAO,GAAG,EAAV;;AAEtC,aAAM,IAAIjsF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGX,MAArB,EAA6BW,IAAC,EAA9B,EAAoC;AAEnC,cAAMpC,EAAE,GAAGuyB,KAAK,CAAEnwB,IAAF,CAAL,CAAW6rF,GAAtB;AAEA,cAAKG,OAAL,EAAeA,OAAO,CAACtrF,IAAR,CAAcqrF,IAAI,CAAEnuF,EAAF,CAAlB;AACf,cAAKquF,OAAL,EAAeA,OAAO,CAACvrF,IAAR,CAAckgF,IAAI,CAAEhjF,EAAF,CAAlB;AAEf;;AAED,YAAKouF,OAAL,EAAe,KAAKvK,aAAL,CAAoB,CAApB,IAA0BuK,OAA1B;AACf,YAAKC,OAAL,EAAe,KAAKxK,aAAL,CAAoB,CAApB,IAA0BwK,OAA1B;AAEf,OA51B8E;AA81B/Ep3B,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAG;AACZm2D,kBAAQ,EAAE;AACTh9B,mBAAO,EAAE,GADA;AAETtzB,gBAAI,EAAE,UAFG;AAGTuwD,qBAAS,EAAE;AAHF;AADE,SAAb,CAFmB,CAUnB;;AAEAp2D,YAAI,CAAC8qD,IAAL,GAAY,KAAKA,IAAjB;AACA9qD,YAAI,CAAC6F,IAAL,GAAY,KAAKA,IAAjB;AACA,YAAK,KAAK3F,IAAL,KAAc,EAAnB,EAAwBF,IAAI,CAACE,IAAL,GAAY,KAAKA,IAAjB;;AAExB,YAAK,KAAKwqE,UAAL,KAAoBn7D,SAAzB,EAAqC;AAEpC,cAAMm7D,UAAU,GAAG,KAAKA,UAAxB;;AAEA,eAAM,IAAMK,GAAZ,IAAmBL,UAAnB,EAAgC;AAE/B,gBAAKA,UAAU,CAAEK,GAAF,CAAV,KAAsBx7D,SAA3B,EAAuCvP,IAAI,CAAE+qE,GAAF,CAAJ,GAAcL,UAAU,CAAEK,GAAF,CAAxB;AAEvC;;AAED,iBAAO/qE,IAAP;AAEA;;AAED,YAAMixB,QAAQ,GAAG,EAAjB;;AAEA,aAAM,IAAI9vB,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,KAAK8vB,QAAL,CAAczwB,MAAnC,EAA2CW,IAAC,EAA5C,EAAkD;AAEjD,cAAMspF,MAAM,GAAG,KAAKx5D,QAAL,CAAe9vB,IAAf,CAAf;AACA8vB,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEA;;AAED,YAAMkD,KAAK,GAAG,EAAd;AACA,YAAMuwD,OAAO,GAAG,EAAhB;AACA,YAAMwL,WAAW,GAAG,EAApB;AACA,YAAMl9D,MAAM,GAAG,EAAf;AACA,YAAMm9D,UAAU,GAAG,EAAnB;AACA,YAAMxL,GAAG,GAAG,EAAZ;AACA,YAAMyL,OAAO,GAAG,EAAhB;;AAEA,aAAM,IAAIpsF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,KAAKmwB,KAAL,CAAW9wB,MAAhC,EAAwCW,IAAC,EAAzC,EAA+C;AAE9C,cAAMuhF,IAAI,GAAG,KAAKpxD,KAAL,CAAYnwB,IAAZ,CAAb;AAEA,cAAMqsF,WAAW,GAAG,IAApB;AACA,cAAMC,SAAS,GAAG,KAAlB,CAL8C,CAKrB;;AACzB,cAAM5K,eAAe,GAAG,KAAKD,aAAL,CAAoB,CAApB,EAAyBzhF,IAAzB,MAAiCoO,SAAzD;AACA,cAAMm+E,aAAa,GAAGhL,IAAI,CAACxjB,MAAL,CAAY1+D,MAAZ,KAAuB,CAA7C;AACA,cAAMmtF,mBAAmB,GAAGjL,IAAI,CAACpJ,aAAL,CAAmB94E,MAAnB,GAA4B,CAAxD;AACA,cAAMotF,YAAY,GAAGlL,IAAI,CAAC5xD,KAAL,CAAWc,CAAX,KAAiB,CAAjB,IAAsB8wD,IAAI,CAAC5xD,KAAL,CAAWiF,CAAX,KAAiB,CAAvC,IAA4C2sD,IAAI,CAAC5xD,KAAL,CAAWnwB,CAAX,KAAiB,CAAlF;AACA,cAAMktF,kBAAkB,GAAGnL,IAAI,CAACnJ,YAAL,CAAkB/4E,MAAlB,GAA2B,CAAtD;AAEA,cAAIstF,QAAQ,GAAG,CAAf;AAEAA,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAe,CAAf,CAAjB,CAd8C,CAcT;;AACrCA,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeN,WAAf,CAAjB;AACAM,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeL,SAAf,CAAjB;AACAK,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAejL,eAAf,CAAjB;AACAiL,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeJ,aAAf,CAAjB;AACAI,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeH,mBAAf,CAAjB;AACAG,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeF,YAAf,CAAjB;AACAE,kBAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeD,kBAAf,CAAjB;AAEAv8D,eAAK,CAACzvB,IAAN,CAAYisF,QAAZ;AACAx8D,eAAK,CAACzvB,IAAN,CAAY6gF,IAAI,CAAChiF,CAAjB,EAAoBgiF,IAAI,CAAC/hF,CAAzB,EAA4B+hF,IAAI,CAAC3wD,CAAjC;AACAT,eAAK,CAACzvB,IAAN,CAAY6gF,IAAI,CAACrJ,aAAjB;;AAEA,cAAKwJ,eAAL,EAAuB;AAEtB,gBAAMD,aAAa,GAAG,KAAKA,aAAL,CAAoB,CAApB,EAAyBzhF,IAAzB,CAAtB;AAEAmwB,iBAAK,CAACzvB,IAAN,CACCmsF,UAAU,CAAEpL,aAAa,CAAE,CAAF,CAAf,CADX,EAECoL,UAAU,CAAEpL,aAAa,CAAE,CAAF,CAAf,CAFX,EAGCoL,UAAU,CAAEpL,aAAa,CAAE,CAAF,CAAf,CAHX;AAMA;;AAED,cAAK8K,aAAL,EAAqB;AAEpBp8D,iBAAK,CAACzvB,IAAN,CAAYosF,cAAc,CAAEvL,IAAI,CAACxjB,MAAP,CAA1B;AAEA;;AAED,cAAKyuB,mBAAL,EAA2B;AAE1B,gBAAMrU,aAAa,GAAGoJ,IAAI,CAACpJ,aAA3B;AAEAhoD,iBAAK,CAACzvB,IAAN,CACCosF,cAAc,CAAE3U,aAAa,CAAE,CAAF,CAAf,CADf,EAEC2U,cAAc,CAAE3U,aAAa,CAAE,CAAF,CAAf,CAFf,EAGC2U,cAAc,CAAE3U,aAAa,CAAE,CAAF,CAAf,CAHf;AAMA;;AAED,cAAKsU,YAAL,EAAoB;AAEnBt8D,iBAAK,CAACzvB,IAAN,CAAYqsF,aAAa,CAAExL,IAAI,CAAC5xD,KAAP,CAAzB;AAEA;;AAED,cAAK+8D,kBAAL,EAA0B;AAEzB,gBAAMtU,YAAY,GAAGmJ,IAAI,CAACnJ,YAA1B;AAEAjoD,iBAAK,CAACzvB,IAAN,CACCqsF,aAAa,CAAE3U,YAAY,CAAE,CAAF,CAAd,CADd,EAEC2U,aAAa,CAAE3U,YAAY,CAAE,CAAF,CAAd,CAFd,EAGC2U,aAAa,CAAE3U,YAAY,CAAE,CAAF,CAAd,CAHd;AAMA;AAED;;AAED,iBAASwU,MAAT,CAAiB9iF,KAAjB,EAAwB0Q,QAAxB,EAAkCzC,OAAlC,EAA4C;AAE3C,iBAAOA,OAAO,GAAGjO,KAAK,GAAK,KAAK0Q,QAAlB,GAA+B1Q,KAAK,GAAK,EAAI,KAAK0Q,QAAT,CAAvD;AAEA;;AAED,iBAASsyE,cAAT,CAAyB/uB,MAAzB,EAAkC;AAEjC,cAAMivB,IAAI,GAAGjvB,MAAM,CAACpzD,CAAP,CAASsvB,QAAT,KAAsB8jC,MAAM,CAACr8C,CAAP,CAASuY,QAAT,EAAtB,GAA4C8jC,MAAM,CAAC9wC,CAAP,CAASgN,QAAT,EAAzD;;AAEA,cAAKiyD,WAAW,CAAEc,IAAF,CAAX,KAAwB5+E,SAA7B,EAAyC;AAExC,mBAAO89E,WAAW,CAAEc,IAAF,CAAlB;AAEA;;AAEDd,qBAAW,CAAEc,IAAF,CAAX,GAAsBtM,OAAO,CAACrhF,MAAR,GAAiB,CAAvC;AACAqhF,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC;AAEA,iBAAOi/D,WAAW,CAAEc,IAAF,CAAlB;AAEA;;AAED,iBAASD,aAAT,CAAwBp9D,KAAxB,EAAgC;AAE/B,cAAMq9D,IAAI,GAAGr9D,KAAK,CAACc,CAAN,CAAQwJ,QAAR,KAAqBtK,KAAK,CAACiF,CAAN,CAAQqF,QAAR,EAArB,GAA0CtK,KAAK,CAACnwB,CAAN,CAAQy6B,QAAR,EAAvD;;AAEA,cAAKkyD,UAAU,CAAEa,IAAF,CAAV,KAAuB5+E,SAA5B,EAAwC;AAEvC,mBAAO+9E,UAAU,CAAEa,IAAF,CAAjB;AAEA;;AAEDb,oBAAU,CAAEa,IAAF,CAAV,GAAqBh+D,MAAM,CAAC3vB,MAA5B;AACA2vB,gBAAM,CAACtuB,IAAP,CAAaivB,KAAK,CAACwnD,MAAN,EAAb;AAEA,iBAAOgV,UAAU,CAAEa,IAAF,CAAjB;AAEA;;AAED,iBAASH,UAAT,CAAqBx3B,EAArB,EAA0B;AAEzB,cAAM23B,IAAI,GAAG33B,EAAE,CAAC1qD,CAAH,CAAKsvB,QAAL,KAAkBo7B,EAAE,CAAC3zC,CAAH,CAAKuY,QAAL,EAA/B;;AAEA,cAAKmyD,OAAO,CAAEY,IAAF,CAAP,KAAoB5+E,SAAzB,EAAqC;AAEpC,mBAAOg+E,OAAO,CAAEY,IAAF,CAAd;AAEA;;AAEDZ,iBAAO,CAAEY,IAAF,CAAP,GAAkBrM,GAAG,CAACthF,MAAJ,GAAa,CAA/B;AACAshF,aAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB;AAEA,iBAAO0qE,OAAO,CAAEY,IAAF,CAAd;AAEA;;AAEDnuF,YAAI,CAACA,IAAL,GAAY,EAAZ;AAEAA,YAAI,CAACA,IAAL,CAAUixB,QAAV,GAAqBA,QAArB;AACAjxB,YAAI,CAACA,IAAL,CAAU6hF,OAAV,GAAoBA,OAApB;AACA,YAAK1xD,MAAM,CAAC3vB,MAAP,GAAgB,CAArB,EAAyBR,IAAI,CAACA,IAAL,CAAUmwB,MAAV,GAAmBA,MAAnB;AACzB,YAAK2xD,GAAG,CAACthF,MAAJ,GAAa,CAAlB,EAAsBR,IAAI,CAACA,IAAL,CAAU8hF,GAAV,GAAgB,CAAEA,GAAF,CAAhB,CA1LH,CA0L4B;;AAC/C9hF,YAAI,CAACA,IAAL,CAAUsxB,KAAV,GAAkBA,KAAlB;AAEA,eAAOtxB,IAAP;AAEA,OA7hC8E;AA+hC/Eyb,WAAK,EAAE,iBAAY;AAElB;;;;;;;;;;;;;;AAwBA,eAAO,IAAI+uE,QAAJ,GAAenuE,IAAf,CAAqB,IAArB,CAAP;AAEA,OA3jC8E;AA6jC/EA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB;AAEA,aAAK7sB,QAAL,GAAgB,EAAhB;AACA,aAAKd,MAAL,GAAc,EAAd;AACA,aAAKmB,KAAL,GAAa,EAAb;AACA,aAAKsxD,aAAL,GAAqB,CAAC,EAAD,CAArB;AACA,aAAK5D,YAAL,GAAoB,EAApB;AACA,aAAKC,YAAL,GAAoB,EAApB;AACA,aAAKgD,WAAL,GAAmB,EAAnB;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAK4C,aAAL,GAAqB,EAArB;AACA,aAAKnX,WAAL,GAAmB,IAAnB;AACA,aAAKwU,cAAL,GAAsB,IAAtB,CAdyB,CAgBzB;;AAEA,aAAKjiF,IAAL,GAAY49C,MAAM,CAAC59C,IAAnB,CAlByB,CAoBzB;;AAEA,YAAM+wB,QAAQ,GAAG6sB,MAAM,CAAC7sB,QAAxB;;AAEA,aAAM,IAAI9vB,IAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG/7C,QAAQ,CAACzwB,MAA/B,EAAuCW,IAAC,GAAG6rE,EAA3C,EAA+C7rE,IAAC,EAAhD,EAAsD;AAErD,eAAK8vB,QAAL,CAAcpvB,IAAd,CAAoBovB,QAAQ,CAAE9vB,IAAF,CAAR,CAAcsa,KAAd,EAApB;AAEA,SA5BwB,CA8BzB;;;AAEA,YAAM0U,MAAM,GAAG2tB,MAAM,CAAC3tB,MAAtB;;AAEA,aAAM,IAAIhvB,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG78C,MAAM,CAAC3vB,MAA7B,EAAqCW,IAAC,GAAG6rE,KAAzC,EAA6C7rE,IAAC,EAA9C,EAAoD;AAEnD,eAAKgvB,MAAL,CAAYtuB,IAAZ,CAAkBsuB,MAAM,CAAEhvB,IAAF,CAAN,CAAYsa,KAAZ,EAAlB;AAEA,SAtCwB,CAwCzB;;;AAEA,YAAM6V,KAAK,GAAGwsB,MAAM,CAACxsB,KAArB;;AAEA,aAAM,IAAInwB,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG17C,KAAK,CAAC9wB,MAA5B,EAAoCW,IAAC,GAAG6rE,KAAxC,EAA4C7rE,IAAC,EAA7C,EAAmD;AAElD,eAAKmwB,KAAL,CAAWzvB,IAAX,CAAiByvB,KAAK,CAAEnwB,IAAF,CAAL,CAAWsa,KAAX,EAAjB;AAEA,SAhDwB,CAkDzB;;;AAEA,aAAM,IAAIta,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGlvB,MAAM,CAAC8kC,aAAP,CAAqBpiF,MAA3C,EAAmDW,IAAC,GAAG6rE,KAAvD,EAA2D7rE,IAAC,EAA5D,EAAkE;AAEjE,cAAMyhF,aAAa,GAAG9kC,MAAM,CAAC8kC,aAAP,CAAsBzhF,IAAtB,CAAtB;;AAEA,cAAK,KAAKyhF,aAAL,CAAoBzhF,IAApB,MAA4BoO,SAAjC,EAA6C;AAE5C,iBAAKqzE,aAAL,CAAoBzhF,IAApB,IAA0B,EAA1B;AAEA;;AAED,eAAM,IAAIM,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAG9C,aAAa,CAACpiF,MAApC,EAA4CiB,CAAC,GAAGikF,EAAhD,EAAoDjkF,CAAC,EAArD,EAA2D;AAE1D,gBAAMqgF,GAAG,GAAGc,aAAa,CAAEnhF,CAAF,CAAzB;AAAA,gBAAgC2qF,OAAO,GAAG,EAA1C;;AAEA,iBAAM,IAAIzqF,CAAC,GAAG,CAAR,EAAW0qF,EAAE,GAAGvK,GAAG,CAACthF,MAA1B,EAAkCmB,CAAC,GAAG0qF,EAAtC,EAA0C1qF,CAAC,EAA3C,EAAiD;AAEhD,kBAAM60D,EAAE,GAAGsrB,GAAG,CAAEngF,CAAF,CAAd;AAEAyqF,qBAAO,CAACvqF,IAAR,CAAc20D,EAAE,CAAC/6C,KAAH,EAAd;AAEA;;AAED,iBAAKmnE,aAAL,CAAoBzhF,IAApB,EAAwBU,IAAxB,CAA8BuqF,OAA9B;AAEA;AAED,SA9EwB,CAgFzB;;;AAEA,YAAMpN,YAAY,GAAGlhC,MAAM,CAACkhC,YAA5B;;AAEA,aAAM,IAAI79E,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGgS,YAAY,CAACx+E,MAAnC,EAA2CW,IAAC,GAAG6rE,KAA/C,EAAmD7rE,IAAC,EAApD,EAA0D;AAEzD,cAAMmiF,WAAW,GAAG,EAApB;AACAA,qBAAW,CAACpjF,IAAZ,GAAmB8+E,YAAY,CAAE79E,IAAF,CAAZ,CAAkBjB,IAArC,CAHyD,CAKzD;;AAEA,cAAK8+E,YAAY,CAAE79E,IAAF,CAAZ,CAAkB8vB,QAAlB,KAA+B1hB,SAApC,EAAgD;AAE/C+zE,uBAAW,CAACryD,QAAZ,GAAuB,EAAvB;;AAEA,iBAAM,IAAIxvB,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAG1G,YAAY,CAAE79E,IAAF,CAAZ,CAAkB8vB,QAAlB,CAA2BzwB,MAAjD,EAAyDiB,GAAC,GAAGikF,IAA7D,EAAiEjkF,GAAC,EAAlE,EAAwE;AAEvE6hF,yBAAW,CAACryD,QAAZ,CAAqBpvB,IAArB,CAA2Bm9E,YAAY,CAAE79E,IAAF,CAAZ,CAAkB8vB,QAAlB,CAA4BxvB,GAA5B,EAAgCga,KAAhC,EAA3B;AAEA;AAED,WAjBwD,CAmBzD;;;AAEA,cAAKujE,YAAY,CAAE79E,IAAF,CAAZ,CAAkB0gF,OAAlB,KAA8BtyE,SAAnC,EAA+C;AAE9C+zE,uBAAW,CAACzB,OAAZ,GAAsB,EAAtB;;AAEA,iBAAM,IAAIpgF,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAG1G,YAAY,CAAE79E,IAAF,CAAZ,CAAkB0gF,OAAlB,CAA0BrhF,MAAhD,EAAwDiB,GAAC,GAAGikF,IAA5D,EAAgEjkF,GAAC,EAAjE,EAAuE;AAEtE6hF,yBAAW,CAACzB,OAAZ,CAAoBhgF,IAApB,CAA0Bm9E,YAAY,CAAE79E,IAAF,CAAZ,CAAkB0gF,OAAlB,CAA2BpgF,GAA3B,EAA+Bga,KAA/B,EAA1B;AAEA;AAED;;AAED,eAAKujE,YAAL,CAAkBn9E,IAAlB,CAAwByhF,WAAxB;AAEA,SAvHwB,CAyHzB;;;AAEA,YAAMrE,YAAY,GAAGnhC,MAAM,CAACmhC,YAA5B;;AAEA,aAAM,IAAI99E,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGiS,YAAY,CAACz+E,MAAnC,EAA2CW,IAAC,GAAG6rE,KAA/C,EAAmD7rE,IAAC,EAApD,EAA0D;AAEzD,cAAMoiF,WAAW,GAAG,EAApB,CAFyD,CAIzD;;AAEA,cAAKtE,YAAY,CAAE99E,IAAF,CAAZ,CAAkBm4E,aAAlB,KAAoC/pE,SAAzC,EAAqD;AAEpDg0E,uBAAW,CAACjK,aAAZ,GAA4B,EAA5B;;AAEA,iBAAM,IAAI73E,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAGzG,YAAY,CAAE99E,IAAF,CAAZ,CAAkBm4E,aAAlB,CAAgC94E,MAAtD,EAA8DiB,GAAC,GAAGikF,IAAlE,EAAsEjkF,GAAC,EAAvE,EAA6E;AAE5E,kBAAM2sF,eAAe,GAAGnP,YAAY,CAAE99E,IAAF,CAAZ,CAAkBm4E,aAAlB,CAAiC73E,GAAjC,CAAxB;AACA,kBAAM4sF,gBAAgB,GAAG,EAAzB;AAEAA,8BAAgB,CAAC3tF,CAAjB,GAAqB0tF,eAAe,CAAC1tF,CAAhB,CAAkB+a,KAAlB,EAArB;AACA4yE,8BAAgB,CAAC1tF,CAAjB,GAAqBytF,eAAe,CAACztF,CAAhB,CAAkB8a,KAAlB,EAArB;AACA4yE,8BAAgB,CAACt8D,CAAjB,GAAqBq8D,eAAe,CAACr8D,CAAhB,CAAkBtW,KAAlB,EAArB;AAEA8nE,yBAAW,CAACjK,aAAZ,CAA0Bz3E,IAA1B,CAAgCwsF,gBAAhC;AAEA;AAED,WAvBwD,CAyBzD;;;AAEA,cAAKpP,YAAY,CAAE99E,IAAF,CAAZ,CAAkBgqF,WAAlB,KAAkC57E,SAAvC,EAAmD;AAElDg0E,uBAAW,CAAC4H,WAAZ,GAA0B,EAA1B;;AAEA,iBAAM,IAAI1pF,GAAC,GAAG,CAAR,EAAWikF,IAAE,GAAGzG,YAAY,CAAE99E,IAAF,CAAZ,CAAkBgqF,WAAlB,CAA8B3qF,MAApD,EAA4DiB,GAAC,GAAGikF,IAAhE,EAAoEjkF,GAAC,EAArE,EAA2E;AAE1E8hF,yBAAW,CAAC4H,WAAZ,CAAwBtpF,IAAxB,CAA8Bo9E,YAAY,CAAE99E,IAAF,CAAZ,CAAkBgqF,WAAlB,CAA+B1pF,GAA/B,EAAmCga,KAAnC,EAA9B;AAEA;AAED;;AAED,eAAKwjE,YAAL,CAAkBp9E,IAAlB,CAAwB0hF,WAAxB;AAEA,SAtKwB,CAwKzB;;;AAEA,YAAMtB,WAAW,GAAGnkC,MAAM,CAACmkC,WAA3B;;AAEA,aAAM,IAAI9gF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGiV,WAAW,CAACzhF,MAAlC,EAA0CW,IAAC,GAAG6rE,KAA9C,EAAkD7rE,IAAC,EAAnD,EAAyD;AAExD,eAAK8gF,WAAL,CAAiBpgF,IAAjB,CAAuBogF,WAAW,CAAE9gF,IAAF,CAAX,CAAiBsa,KAAjB,EAAvB;AAEA,SAhLwB,CAkLzB;;;AAEA,YAAMymE,WAAW,GAAGpkC,MAAM,CAACokC,WAA3B;;AAEA,aAAM,IAAI/gF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGkV,WAAW,CAAC1hF,MAAlC,EAA0CW,IAAC,GAAG6rE,KAA9C,EAAkD7rE,IAAC,EAAnD,EAAyD;AAExD,eAAK+gF,WAAL,CAAiBrgF,IAAjB,CAAuBqgF,WAAW,CAAE/gF,IAAF,CAAX,CAAiBsa,KAAjB,EAAvB;AAEA,SA1LwB,CA4LzB;;;AAEA,YAAMqpE,aAAa,GAAGhnC,MAAM,CAACgnC,aAA7B;;AAEA,aAAM,IAAI3jF,IAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG8X,aAAa,CAACtkF,MAApC,EAA4CW,IAAC,GAAG6rE,KAAhD,EAAoD7rE,IAAC,EAArD,EAA2D;AAE1D,eAAK2jF,aAAL,CAAmBjjF,IAAnB,CAAyBijF,aAAa,CAAE3jF,IAAF,CAAtC;AAEA,SApMwB,CAsMzB;;;AAEA,YAAMwsE,WAAW,GAAG7vB,MAAM,CAAC6vB,WAA3B;;AAEA,YAAKA,WAAW,KAAK,IAArB,EAA4B;AAE3B,eAAKA,WAAL,GAAmBA,WAAW,CAAClyD,KAAZ,EAAnB;AAEA,SA9MwB,CAgNzB;;;AAEA,YAAM0mE,cAAc,GAAGrkC,MAAM,CAACqkC,cAA9B;;AAEA,YAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9B,eAAKA,cAAL,GAAsBA,cAAc,CAAC1mE,KAAf,EAAtB;AAEA,SAxNwB,CA0NzB;;;AAEA,aAAK0pE,kBAAL,GAA0BrnC,MAAM,CAACqnC,kBAAjC;AACA,aAAK/C,kBAAL,GAA0BtkC,MAAM,CAACskC,kBAAjC;AACA,aAAKG,aAAL,GAAqBzkC,MAAM,CAACykC,aAA5B;AACA,aAAKF,iBAAL,GAAyBvkC,MAAM,CAACukC,iBAAhC;AACA,aAAKC,gBAAL,GAAwBxkC,MAAM,CAACwkC,gBAA/B;AACA,aAAK8C,uBAAL,GAA+BtnC,MAAM,CAACsnC,uBAAtC;AACA,aAAK5C,gBAAL,GAAwB1kC,MAAM,CAAC0kC,gBAA/B;AAEA,eAAO,IAAP;AAEA,OAnyC8E;AAqyC/E1jE,aAAO,EAAE,mBAAY;AAEpB,aAAK3K,aAAL,CAAoB;AAAEtO,cAAI,EAAE;AAAR,SAApB;AAEA;AAzyC8E,KAA3D,CAArB,C,CA6yCA;;QAEMyoF,W;;;;;AAEL,2BAAa7+D,KAAb,EAAoBD,MAApB,EAA4B+d,KAA5B,EAAmCghD,aAAnC,EAAkDC,cAAlD,EAAkEC,aAAlE,EAAkF;AAAA;;AAAA;;AAEjF;AAEA,gBAAK5oF,IAAL,GAAY,aAAZ;AAEA,gBAAK6kE,UAAL,GAAkB;AACjBj7C,eAAK,EAAEA,KADU;AAEjBD,gBAAM,EAAEA,MAFS;AAGjB+d,eAAK,EAAEA,KAHU;AAIjBghD,uBAAa,EAAEA,aAJE;AAKjBC,wBAAc,EAAEA,cALC;AAMjBC,uBAAa,EAAEA;AANE,SAAlB;;AASA,gBAAK/D,kBAAL,CAAyB,IAAIgE,iBAAJ,CAAuBj/D,KAAvB,EAA8BD,MAA9B,EAAsC+d,KAAtC,EAA6CghD,aAA7C,EAA4DC,cAA5D,EAA4EC,aAA5E,CAAzB;;AACA,gBAAKlC,aAAL;;AAhBiF;AAkBjF;;;MApBwB/B,Q,GAwB1B;;;QAEMkE,iB;;;;;AAEL,mCAA0G;AAAA;;AAAA,YAA7Fj/D,KAA6F,uEAArF,CAAqF;AAAA,YAAlFD,MAAkF,uEAAzE,CAAyE;AAAA,YAAtE+d,KAAsE,uEAA9D,CAA8D;AAAA,YAA3DghD,aAA2D,uEAA3C,CAA2C;AAAA,YAAxCC,cAAwC,uEAAvB,CAAuB;AAAA,YAApBC,aAAoB,uEAAJ,CAAI;;AAAA;;AAEzG;AAEA,gBAAK5oF,IAAL,GAAY,mBAAZ;AAEA,gBAAK6kE,UAAL,GAAkB;AACjBj7C,eAAK,EAAEA,KADU;AAEjBD,gBAAM,EAAEA,MAFS;AAGjB+d,eAAK,EAAEA,KAHU;AAIjBghD,uBAAa,EAAEA,aAJE;AAKjBC,wBAAc,EAAEA,cALC;AAMjBC,uBAAa,EAAEA;AANE,SAAlB;;AASA,YAAMryE,KAAK,kCAAX,CAfyG,CAiBzG;;;AAEAmyE,qBAAa,GAAG70E,IAAI,CAAC4N,KAAL,CAAYinE,aAAZ,CAAhB;AACAC,sBAAc,GAAG90E,IAAI,CAAC4N,KAAL,CAAYknE,cAAZ,CAAjB;AACAC,qBAAa,GAAG/0E,IAAI,CAAC4N,KAAL,CAAYmnE,aAAZ,CAAhB,CArByG,CAuBzG;;AAEA,YAAMtH,OAAO,GAAG,EAAhB;AACA,YAAMl2D,QAAQ,GAAG,EAAjB;AACA,YAAM4wD,OAAO,GAAG,EAAhB;AACA,YAAMC,GAAG,GAAG,EAAZ,CA5ByG,CA8BzG;;AAEA,YAAI6M,gBAAgB,GAAG,CAAvB;AACA,YAAIC,UAAU,GAAG,CAAjB,CAjCyG,CAmCzG;;AAEAC,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,EAA2BthD,KAA3B,EAAkC/d,MAAlC,EAA0CC,KAA1C,EAAiDg/D,aAAjD,EAAgED,cAAhE,EAAgF,CAAhF,CAAV,CArCyG,CAqCV;;AAC/FK,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyBthD,KAAzB,EAAgC/d,MAAhC,EAAwC,CAAEC,KAA1C,EAAiDg/D,aAAjD,EAAgED,cAAhE,EAAgF,CAAhF,CAAV,CAtCyG,CAsCV;;AAC/FK,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,EAAuBp/D,KAAvB,EAA8B8d,KAA9B,EAAqC/d,MAArC,EAA6C++D,aAA7C,EAA4DE,aAA5D,EAA2E,CAA3E,CAAV,CAvCyG,CAuCf;;AAC1FI,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyBp/D,KAAzB,EAAgC8d,KAAhC,EAAuC,CAAE/d,MAAzC,EAAiD++D,aAAjD,EAAgEE,aAAhE,EAA+E,CAA/E,CAAV,CAxCyG,CAwCX;;AAC9FI,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyBp/D,KAAzB,EAAgCD,MAAhC,EAAwC+d,KAAxC,EAA+CghD,aAA/C,EAA8DC,cAA9D,EAA8E,CAA9E,CAAV,CAzCyG,CAyCZ;;AAC7FK,kBAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,EAA2Bp/D,KAA3B,EAAkCD,MAAlC,EAA0C,CAAE+d,KAA5C,EAAmDghD,aAAnD,EAAkEC,cAAlE,EAAkF,CAAlF,CAAV,CA1CyG,CA0CR;AAEjG;;AAEA,gBAAKpyD,QAAL,CAAe+qD,OAAf;;AACA,gBAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;;AACA,gBAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;;AACA,gBAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;;AAEA,iBAAS+M,UAAT,CAAqBl9D,CAArB,EAAwB9Q,CAAxB,EAA2BmV,CAA3B,EAA8B84D,IAA9B,EAAoCC,IAApC,EAA0Ct/D,KAA1C,EAAiDD,MAAjD,EAAyD+d,KAAzD,EAAgEyhD,KAAhE,EAAuEC,KAAvE,EAA8E5V,aAA9E,EAA8F;AAE7F,cAAM6V,YAAY,GAAGz/D,KAAK,GAAGu/D,KAA7B;AACA,cAAMG,aAAa,GAAG3/D,MAAM,GAAGy/D,KAA/B;AAEA,cAAMG,SAAS,GAAG3/D,KAAK,GAAG,CAA1B;AACA,cAAM4/D,UAAU,GAAG7/D,MAAM,GAAG,CAA5B;AACA,cAAM8/D,SAAS,GAAG/hD,KAAK,GAAG,CAA1B;AAEA,cAAMgiD,MAAM,GAAGP,KAAK,GAAG,CAAvB;AACA,cAAMQ,MAAM,GAAGP,KAAK,GAAG,CAAvB;AAEA,cAAIQ,aAAa,GAAG,CAApB;AACA,cAAIC,UAAU,GAAG,CAAjB;AAEA,cAAMlnB,MAAM,GAAG,IAAIvL,OAAJ,EAAf,CAf6F,CAiB7F;;AAEA,eAAM,IAAIY,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG2xB,MAAvB,EAA+B3xB,EAAE,EAAjC,EAAuC;AAEtC,gBAAMh7C,CAAC,GAAGg7C,EAAE,GAAGsxB,aAAL,GAAqBE,UAA/B;;AAEA,iBAAM,IAAIzxB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG2xB,MAAvB,EAA+B3xB,EAAE,EAAjC,EAAuC;AAEtC,kBAAM9xD,CAAC,GAAG8xD,EAAE,GAAGsxB,YAAL,GAAoBE,SAA9B,CAFsC,CAItC;;AAEA5mB,oBAAM,CAAE72C,CAAF,CAAN,GAAc7lB,CAAC,GAAGgjF,IAAlB;AACAtmB,oBAAM,CAAE3nD,CAAF,CAAN,GAAcgC,CAAC,GAAGksE,IAAlB;AACAvmB,oBAAM,CAAExyC,CAAF,CAAN,GAAcs5D,SAAd,CARsC,CAUtC;;AAEAr+D,sBAAQ,CAACpvB,IAAT,CAAe2mE,MAAM,CAAC18D,CAAtB,EAAyB08D,MAAM,CAAC3lD,CAAhC,EAAmC2lD,MAAM,CAACp6C,CAA1C,EAZsC,CActC;;AAEAo6C,oBAAM,CAAE72C,CAAF,CAAN,GAAc,CAAd;AACA62C,oBAAM,CAAE3nD,CAAF,CAAN,GAAc,CAAd;AACA2nD,oBAAM,CAAExyC,CAAF,CAAN,GAAcuX,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgB,CAAE,CAAhC,CAlBsC,CAoBtC;;AAEAs0C,qBAAO,CAAChgF,IAAR,CAAc2mE,MAAM,CAAC18D,CAArB,EAAwB08D,MAAM,CAAC3lD,CAA/B,EAAkC2lD,MAAM,CAACp6C,CAAzC,EAtBsC,CAwBtC;;AAEA0zD,iBAAG,CAACjgF,IAAJ,CAAU+7D,EAAE,GAAGoxB,KAAf;AACAlN,iBAAG,CAACjgF,IAAJ,CAAU,IAAMg8D,EAAE,GAAGoxB,KAArB,EA3BsC,CA6BtC;;AAEAQ,2BAAa,IAAI,CAAjB;AAEA;AAED,WA1D4F,CA4D7F;AAEA;AACA;AACA;;;AAEA,eAAM,IAAI5xB,GAAE,GAAG,CAAf,EAAkBA,GAAE,GAAGoxB,KAAvB,EAA8BpxB,GAAE,EAAhC,EAAsC;AAErC,iBAAM,IAAID,GAAE,GAAG,CAAf,EAAkBA,GAAE,GAAGoxB,KAAvB,EAA8BpxB,GAAE,EAAhC,EAAsC;AAErC,kBAAMl9D,CAAC,GAAGiuF,gBAAgB,GAAG/wB,GAAnB,GAAwB2xB,MAAM,GAAG1xB,GAA3C;AACA,kBAAMl9D,CAAC,GAAGguF,gBAAgB,GAAG/wB,GAAnB,GAAwB2xB,MAAM,IAAK1xB,GAAE,GAAG,CAAV,CAAxC;AACA,kBAAM9rC,CAAC,GAAG48D,gBAAgB,IAAK/wB,GAAE,GAAG,CAAV,CAAhB,GAAgC2xB,MAAM,IAAK1xB,GAAE,GAAG,CAAV,CAAhD;AACA,kBAAM7rC,CAAC,GAAG28D,gBAAgB,IAAK/wB,GAAE,GAAG,CAAV,CAAhB,GAAgC2xB,MAAM,GAAG1xB,GAAnD,CALqC,CAOrC;;AAEAspB,qBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,qBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB,EAVqC,CAYrC;;AAEA09D,wBAAU,IAAI,CAAd;AAEA;AAED,WAtF4F,CAwF7F;;;AAEAtzE,eAAK,CAACooE,QAAN,CAAgBoK,UAAhB,EAA4Bc,UAA5B,EAAwCrW,aAAxC,EA1F6F,CA4F7F;;AAEAuV,oBAAU,IAAIc,UAAd,CA9F6F,CAgG7F;;AAEAf,0BAAgB,IAAIc,aAApB;AAEA;;AAvJwG;AAyJzG;;;MA3J8BzL,c;AA+JhC;;;;;AAIA,aAAS2L,aAAT,CAAwBz7B,GAAxB,EAA8B;AAE7B,UAAMwF,GAAG,GAAG,EAAZ;;AAEA,WAAM,IAAM/nC,CAAZ,IAAiBuiC,GAAjB,EAAuB;AAEtBwF,WAAG,CAAE/nC,CAAF,CAAH,GAAW,EAAX;;AAEA,aAAM,IAAMM,CAAZ,IAAiBiiC,GAAG,CAAEviC,CAAF,CAApB,EAA4B;AAE3B,cAAMi+D,QAAQ,GAAG17B,GAAG,CAAEviC,CAAF,CAAH,CAAUM,CAAV,CAAjB;;AAEA,cAAK29D,QAAQ,KAAMA,QAAQ,CAACzY,OAAT,IAClByY,QAAQ,CAAC5/B,SADS,IACI4/B,QAAQ,CAAC5vB,SADb,IAElB4vB,QAAQ,CAACviC,SAFS,IAEIuiC,QAAQ,CAACzyB,SAFb,IAE0ByyB,QAAQ,CAACl5B,SAFnC,IAGlBk5B,QAAQ,CAAC95B,SAHG,CAAb,EAGwB;AAEvB4D,eAAG,CAAE/nC,CAAF,CAAH,CAAUM,CAAV,IAAgB29D,QAAQ,CAACn0E,KAAT,EAAhB;AAEA,WAPD,MAOO,IAAKmX,KAAK,CAAC0jC,OAAN,CAAes5B,QAAf,CAAL,EAAiC;AAEvCl2B,eAAG,CAAE/nC,CAAF,CAAH,CAAUM,CAAV,IAAgB29D,QAAQ,CAAChwF,KAAT,EAAhB;AAEA,WAJM,MAIA;AAEN85D,eAAG,CAAE/nC,CAAF,CAAH,CAAUM,CAAV,IAAgB29D,QAAhB;AAEA;AAED;AAED;;AAED,aAAOl2B,GAAP;AAEA;;AAED,aAASm2B,aAAT,CAAwBC,QAAxB,EAAmC;AAElC,UAAMC,MAAM,GAAG,EAAf;;AAEA,WAAM,IAAIp+D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGm+D,QAAQ,CAACtvF,MAA9B,EAAsCmxB,CAAC,EAAvC,EAA6C;AAE5C,YAAMuhC,IAAG,GAAGy8B,aAAa,CAAEG,QAAQ,CAAEn+D,CAAF,CAAV,CAAzB;;AAEA,aAAM,IAAMM,CAAZ,IAAiBihC,IAAjB,EAAuB;AAEtB68B,gBAAM,CAAE99D,CAAF,CAAN,GAAcihC,IAAG,CAAEjhC,CAAF,CAAjB;AAEA;AAED;;AAED,aAAO89D,MAAP;AAEA,K,CAED;;;AAEA,QAAMC,aAAa,GAAG;AAAEv0E,WAAK,EAAEk0E,aAAT;AAAwBhJ,WAAK,EAAEkJ;AAA/B,KAAtB;AAEA,QAAII,cAAc,GAAG,+FAArB;AAEA,QAAIC,gBAAgB,GAAG,gEAAvB;AAEA;;;;;;;;;;;;;;;;;;;AAmBA,aAASC,cAAT,CAAyBzlB,UAAzB,EAAsC;AAErC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAKuqF,OAAL,GAAe,EAAf;AACA,WAAKN,QAAL,GAAgB,EAAhB;AAEA,WAAKO,YAAL,GAAoBJ,cAApB;AACA,WAAKK,cAAL,GAAsBJ,gBAAtB;AAEA,WAAKzR,SAAL,GAAiB,CAAjB;AAEA,WAAKG,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AAEA,WAAK1T,GAAL,GAAW,KAAX,CAjBqC,CAiBnB;;AAClB,WAAKolB,MAAL,GAAc,KAAd,CAlBqC,CAkBhB;;AACrB,WAAKC,QAAL,GAAgB,KAAhB,CAnBqC,CAmBd;;AAEvB,WAAKtR,QAAL,GAAgB,KAAhB,CArBqC,CAqBd;;AACvB,WAAKF,YAAL,GAAoB,KAApB,CAtBqC,CAsBV;;AAC3B,WAAKC,YAAL,GAAoB,KAApB,CAvBqC,CAuBV;;AAE3B,WAAKwR,UAAL,GAAkB;AACjBC,mBAAW,EAAE,KADI;AACG;AACpBC,iBAAS,EAAE,KAFM;AAEC;AAClBC,mBAAW,EAAE,KAHI;AAGG;AACpBC,wBAAgB,EAAE,KAJD,CAIO;;AAJP,OAAlB,CAzBqC,CAgCrC;AACA;;AACA,WAAKC,sBAAL,GAA8B;AAC7B,iBAAS,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,CADoB;AAE7B,cAAM,CAAE,CAAF,EAAK,CAAL,CAFuB;AAG7B,eAAO,CAAE,CAAF,EAAK,CAAL;AAHsB,OAA9B;AAMA,WAAKC,mBAAL,GAA2BxhF,SAA3B;AACA,WAAKyhF,kBAAL,GAA0B,KAA1B;;AAEA,UAAKtmB,UAAU,KAAKn7D,SAApB,EAAgC;AAE/B,YAAKm7D,UAAU,CAACzvB,UAAX,KAA0B1rC,SAA/B,EAA2C;AAE1CjN,iBAAO,CAACD,KAAR,CAAe,yFAAf;AAEA;;AAED,aAAK25E,SAAL,CAAgBtR,UAAhB;AAEA;AAED;;AAEDylB,kBAAc,CAAC93E,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA3B;AACA83E,kBAAc,CAAC93E,SAAf,CAAyB0M,WAAzB,GAAuCorE,cAAvC;AAEAA,kBAAc,CAAC93E,SAAf,CAAyB44E,gBAAzB,GAA4C,IAA5C;;AAEAd,kBAAc,CAAC93E,SAAf,CAAyBgE,IAAzB,GAAgC,UAAWyhC,MAAX,EAAoB;AAEnD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKwyC,cAAL,GAAsBxyC,MAAM,CAACwyC,cAA7B;AACA,WAAKD,YAAL,GAAoBvyC,MAAM,CAACuyC,YAA3B;AAEA,WAAKP,QAAL,GAAgBH,aAAa,CAAE7xC,MAAM,CAACgyC,QAAT,CAA7B;AAEA,WAAKM,OAAL,GAAe1tF,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmBmZ,MAAM,CAACsyC,OAA1B,CAAf;AAEA,WAAKxR,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AAEA,WAAK0R,MAAL,GAAczyC,MAAM,CAACyyC,MAArB;AACA,WAAKC,QAAL,GAAgB1yC,MAAM,CAAC0yC,QAAvB;AAEA,WAAKtR,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AAEA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,WAAKwR,UAAL,GAAkB/tF,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmBmZ,MAAM,CAAC2yC,UAA1B,CAAlB;AAEA,aAAO,IAAP;AAEA,KA1BD;;AA4BAN,kBAAc,CAAC93E,SAAf,CAAyB29C,MAAzB,GAAkC,UAAWphC,IAAX,EAAkB;AAEnD,UAAM50B,IAAI,GAAGy5E,QAAQ,CAACphE,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA50B,UAAI,CAAC8vF,QAAL,GAAgB,EAAhB;;AAEA,WAAM,IAAM5vF,IAAZ,IAAoB,KAAK4vF,QAAzB,EAAoC;AAEnC,YAAMoB,OAAO,GAAG,KAAKpB,QAAL,CAAe5vF,IAAf,CAAhB;AACA,YAAM+K,KAAK,GAAGimF,OAAO,CAACjmF,KAAtB;;AAEA,YAAKA,KAAK,IAAIA,KAAK,CAAC6qD,SAApB,EAAgC;AAE/B91D,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,GADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAAC+qD,MAAN,CAAcphC,IAAd,EAAqBk2B;AAFL,WAAxB;AAKA,SAPD,MAOO,IAAK7/C,KAAK,IAAIA,KAAK,CAACksE,OAApB,EAA8B;AAEpCn3E,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,GADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACqtE,MAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA,IAAKrtE,KAAK,IAAIA,KAAK,CAACoiD,SAApB,EAAgC;AAEtCrtD,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,IADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACwkD,OAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA,IAAKxkD,KAAK,IAAIA,KAAK,CAACkyD,SAApB,EAAgC;AAEtCn9D,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,IADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACwkD,OAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA,IAAKxkD,KAAK,IAAIA,KAAK,CAACyrD,SAApB,EAAgC;AAEtC12D,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,IADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACwkD,OAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA,IAAKxkD,KAAK,IAAIA,KAAK,CAAC+kD,SAApB,EAAgC;AAEtChwD,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,IADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACwkD,OAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA,IAAKxkD,KAAK,IAAIA,KAAK,CAAC+0D,SAApB,EAAgC;AAEtChgE,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB2F,gBAAI,EAAE,IADiB;AAEvBoF,iBAAK,EAAEA,KAAK,CAACwkD,OAAN;AAFgB,WAAxB;AAKA,SAPM,MAOA;AAENzvD,cAAI,CAAC8vF,QAAL,CAAe5vF,IAAf,IAAwB;AACvB+K,iBAAK,EAAEA;AADgB,WAAxB,CAFM,CAMN;AAEA;AAED;;AAED,UAAKvI,MAAM,CAAC9D,IAAP,CAAa,KAAKwxF,OAAlB,EAA4B5vF,MAA5B,GAAqC,CAA1C,EAA8CR,IAAI,CAACowF,OAAL,GAAe,KAAKA,OAApB;AAE9CpwF,UAAI,CAACqwF,YAAL,GAAoB,KAAKA,YAAzB;AACArwF,UAAI,CAACswF,cAAL,GAAsB,KAAKA,cAA3B;AAEA,UAAMG,UAAU,GAAG,EAAnB;;AAEA,WAAM,IAAM1lB,GAAZ,IAAmB,KAAK0lB,UAAxB,EAAqC;AAEpC,YAAK,KAAKA,UAAL,CAAiB1lB,GAAjB,MAA2B,IAAhC,EAAuC0lB,UAAU,CAAE1lB,GAAF,CAAV,GAAoB,IAApB;AAEvC;;AAED,UAAKroE,MAAM,CAAC9D,IAAP,CAAa6xF,UAAb,EAA0BjwF,MAA1B,GAAmC,CAAxC,EAA4CR,IAAI,CAACywF,UAAL,GAAkBA,UAAlB;AAE5C,aAAOzwF,IAAP;AAEA,KAzFD;;AA2FA,aAASmxF,MAAT,GAAkB;AAEjB5qB,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,QAAZ;AAEA,WAAKo4D,kBAAL,GAA0B,IAAI4B,OAAJ,EAA1B;AAEA,WAAK3B,gBAAL,GAAwB,IAAI2B,OAAJ,EAAxB;AACA,WAAKzB,uBAAL,GAA+B,IAAIyB,OAAJ,EAA/B;AAEA;;AAEDsxB,UAAM,CAAC94E,SAAP,GAAmB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEtE0M,iBAAW,EAAEosE,MAFyD;AAItExoB,cAAQ,EAAE,IAJ4D;AAMtEtsD,UAAI,EAAE,cAAWyhC,MAAX,EAAmBktB,SAAnB,EAA+B;AAEpCzE,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC,EAA4CktB,SAA5C;AAEA,aAAK/M,kBAAL,CAAwB5hD,IAAxB,CAA8ByhC,MAAM,CAACmgB,kBAArC;AAEA,aAAKC,gBAAL,CAAsB7hD,IAAtB,CAA4ByhC,MAAM,CAACogB,gBAAnC;AACA,aAAKE,uBAAL,CAA6B/hD,IAA7B,CAAmCyhC,MAAM,CAACsgB,uBAA1C;AAEA,eAAO,IAAP;AAEA,OAjBqE;AAmBtEkL,uBAAiB,EAAE,2BAAWt+D,MAAX,EAAoB;AAEtC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,2DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,aAAKkM,iBAAL,CAAwB,IAAxB;AAEA,YAAM1qE,CAAC,GAAG,KAAK4/D,WAAL,CAAiBlQ,QAA3B;AAEA,eAAOnjD,MAAM,CAACwT,GAAP,CAAY,CAAE/f,CAAC,CAAE,CAAF,CAAf,EAAsB,CAAEA,CAAC,CAAE,CAAF,CAAzB,EAAgC,CAAEA,CAAC,CAAE,EAAF,CAAnC,EAA4CqwD,SAA5C,EAAP;AAEA,OAlCqE;AAoCtEqa,uBAAiB,EAAE,2BAAWQ,KAAX,EAAmB;AAErCpD,gBAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,aAAK1L,kBAAL,CAAwBvL,UAAxB,CAAoC,KAAK2L,WAAzC;AAEA,OA1CqE;AA4CtEqK,uBAAiB,EAAE,2BAAWkB,aAAX,EAA0BC,cAA1B,EAA2C;AAE7DtD,gBAAQ,CAACluD,SAAT,CAAmBqwD,iBAAnB,CAAqClzD,IAArC,CAA2C,IAA3C,EAAiDo0D,aAAjD,EAAgEC,cAAhE;AAEA,aAAK5L,kBAAL,CAAwBvL,UAAxB,CAAoC,KAAK2L,WAAzC;AAEA,OAlDqE;AAoDtE5iD,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA;AAxDqE,KAApD,CAAnB;;AA4DA,aAAS+0E,iBAAT,CAA4B1vE,GAA5B,EAAiC2vE,MAAjC,EAAyCntB,IAAzC,EAA+CC,GAA/C,EAAqD;AAEpDgtB,YAAM,CAAC37E,IAAP,CAAa,IAAb;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAK6b,GAAL,GAAWA,GAAG,KAAKnS,SAAR,GAAoBmS,GAApB,GAA0B,EAArC;AACA,WAAK7F,IAAL,GAAY,CAAZ;AAEA,WAAKqoD,IAAL,GAAYA,IAAI,KAAK30D,SAAT,GAAqB20D,IAArB,GAA4B,GAAxC;AACA,WAAKC,GAAL,GAAWA,GAAG,KAAK50D,SAAR,GAAoB40D,GAApB,GAA0B,IAArC;AACA,WAAK7/C,KAAL,GAAa,EAAb;AAEA,WAAK+sE,MAAL,GAAcA,MAAM,KAAK9hF,SAAX,GAAuB8hF,MAAvB,GAAgC,CAA9C;AACA,WAAKl+E,IAAL,GAAY,IAAZ;AAEA,WAAKm+E,SAAL,GAAiB,EAAjB,CAhBoD,CAgB/B;;AACrB,WAAKC,UAAL,GAAkB,CAAlB,CAjBoD,CAiB/B;;AAErB,WAAKh1E,sBAAL;AAEA;;AAED60E,qBAAiB,CAAC/4E,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAew6E,MAAM,CAAC94E,SAAtB,CAAf,EAAkD;AAE/E0M,iBAAW,EAAEqsE,iBAFkE;AAI/E7vE,yBAAmB,EAAE,IAJ0D;AAM/ElF,UAAI,EAAE,cAAWyhC,MAAX,EAAmBktB,SAAnB,EAA+B;AAEpCmmB,cAAM,CAAC94E,SAAP,CAAiBgE,IAAjB,CAAsB7G,IAAtB,CAA4B,IAA5B,EAAkCsoC,MAAlC,EAA0CktB,SAA1C;AAEA,aAAKtpD,GAAL,GAAWo8B,MAAM,CAACp8B,GAAlB;AACA,aAAK7F,IAAL,GAAYiiC,MAAM,CAACjiC,IAAnB;AAEA,aAAKqoD,IAAL,GAAYpmB,MAAM,CAAComB,IAAnB;AACA,aAAKC,GAAL,GAAWrmB,MAAM,CAACqmB,GAAlB;AACA,aAAK7/C,KAAL,GAAaw5B,MAAM,CAACx5B,KAApB;AAEA,aAAK+sE,MAAL,GAAcvzC,MAAM,CAACuzC,MAArB;AACA,aAAKl+E,IAAL,GAAY2qC,MAAM,CAAC3qC,IAAP,KAAgB,IAAhB,GAAuB,IAAvB,GAA8BzQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmBmZ,MAAM,CAAC3qC,IAA1B,CAA1C;AAEA,aAAKm+E,SAAL,GAAiBxzC,MAAM,CAACwzC,SAAxB;AACA,aAAKC,UAAL,GAAkBzzC,MAAM,CAACyzC,UAAzB;AAEA,eAAO,IAAP;AAEA,OAzB8E;;AA2B/E;;;;;;;;AAQAC,oBAAc,EAAE,wBAAWC,WAAX,EAAyB;AAExC;AACA,YAAMC,YAAY,GAAG,MAAM,KAAKC,aAAL,EAAN,GAA6BF,WAAlD;AAEA,aAAK/vE,GAAL,GAAW4oC,SAAS,CAACE,OAAV,GAAoB,CAApB,GAAwB9wC,IAAI,CAACk4E,IAAL,CAAWF,YAAX,CAAnC;AACA,aAAKn1E,sBAAL;AAEA,OA3C8E;;AA6C/E;;;AAGAs1E,oBAAc,EAAE,0BAAY;AAE3B,YAAMH,YAAY,GAAGh4E,IAAI,CAAC+H,GAAL,CAAU6oC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAK7oC,GAAzC,CAArB;AAEA,eAAO,MAAM,KAAKiwE,aAAL,EAAN,GAA6BD,YAApC;AAEA,OAtD8E;AAwD/EI,qBAAe,EAAE,2BAAY;AAE5B,eAAOxnC,SAAS,CAACE,OAAV,GAAoB,CAApB,GAAwB9wC,IAAI,CAACk4E,IAAL,CAC9Bl4E,IAAI,CAAC+H,GAAL,CAAU6oC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAK7oC,GAAzC,IAAiD,KAAK7F,IADxB,CAA/B;AAGA,OA7D8E;AA+D/Ek2E,kBAAY,EAAE,wBAAY;AAEzB;AACA,eAAO,KAAKT,SAAL,GAAiB53E,IAAI,CAACkE,GAAL,CAAU,KAAKyzE,MAAf,EAAuB,CAAvB,CAAxB;AAEA,OApE8E;AAsE/EM,mBAAa,EAAE,yBAAY;AAE1B;AACA,eAAO,KAAKL,SAAL,GAAiB53E,IAAI,CAACmE,GAAL,CAAU,KAAKwzE,MAAf,EAAuB,CAAvB,CAAxB;AAEA,OA3E8E;;AA6E/E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCAW,mBAAa,EAAE,uBAAWC,SAAX,EAAsBC,UAAtB,EAAkCpmF,CAAlC,EAAqC+W,CAArC,EAAwC4M,KAAxC,EAA+CD,MAA/C,EAAwD;AAEtE,aAAK6hE,MAAL,GAAcY,SAAS,GAAGC,UAA1B;;AAEA,YAAK,KAAK/+E,IAAL,KAAc,IAAnB,EAA0B;AAEzB,eAAKA,IAAL,GAAY;AACX+F,mBAAO,EAAE,IADE;AAEX+4E,qBAAS,EAAE,CAFA;AAGXC,sBAAU,EAAE,CAHD;AAIX53C,mBAAO,EAAE,CAJE;AAKXE,mBAAO,EAAE,CALE;AAMX/qB,iBAAK,EAAE,CANI;AAOXD,kBAAM,EAAE;AAPG,WAAZ;AAUA;;AAED,aAAKrc,IAAL,CAAU+F,OAAV,GAAoB,IAApB;AACA,aAAK/F,IAAL,CAAU8+E,SAAV,GAAsBA,SAAtB;AACA,aAAK9+E,IAAL,CAAU++E,UAAV,GAAuBA,UAAvB;AACA,aAAK/+E,IAAL,CAAUmnC,OAAV,GAAoBxuC,CAApB;AACA,aAAKqH,IAAL,CAAUqnC,OAAV,GAAoB33B,CAApB;AACA,aAAK1P,IAAL,CAAUsc,KAAV,GAAkBA,KAAlB;AACA,aAAKtc,IAAL,CAAUqc,MAAV,GAAmBA,MAAnB;AAEA,aAAKjT,sBAAL;AAEA,OA5I8E;AA8I/E41E,qBAAe,EAAE,2BAAY;AAE5B,YAAK,KAAKh/E,IAAL,KAAc,IAAnB,EAA0B;AAEzB,eAAKA,IAAL,CAAU+F,OAAV,GAAoB,KAApB;AAEA;;AAED,aAAKqD,sBAAL;AAEA,OAxJ8E;AA0J/EA,4BAAsB,EAAE,kCAAY;AAEnC,YAAI2nD,IAAI,GAAG,KAAKA,IAAhB;AAAA,YACCjiD,GAAG,GAAGiiD,IAAI,GAAGxqD,IAAI,CAAC+H,GAAL,CAAU6oC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAK7oC,GAAzC,CAAP,GAAwD,KAAK7F,IADpE;AAAA,YAEC2T,MAAM,GAAG,IAAIvN,GAFd;AAAA,YAGCwN,KAAK,GAAG,KAAK4hE,MAAL,GAAc7hE,MAHvB;AAAA,YAICzN,IAAI,GAAG,CAAE,GAAF,GAAQ0N,KAJhB;AAAA,YAKCtc,IAAI,GAAG,KAAKA,IALb;;AAOA,YAAK,KAAKA,IAAL,KAAc,IAAd,IAAsB,KAAKA,IAAL,CAAU+F,OAArC,EAA+C;AAE9C,cAAM+4E,SAAS,GAAG9+E,IAAI,CAAC8+E,SAAvB;AAAA,cACCC,UAAU,GAAG/+E,IAAI,CAAC++E,UADnB;AAGAnwE,cAAI,IAAI5O,IAAI,CAACmnC,OAAL,GAAe7qB,KAAf,GAAuBwiE,SAA/B;AACAhwE,aAAG,IAAI9O,IAAI,CAACqnC,OAAL,GAAehrB,MAAf,GAAwB0iE,UAA/B;AACAziE,eAAK,IAAItc,IAAI,CAACsc,KAAL,GAAawiE,SAAtB;AACAziE,gBAAM,IAAIrc,IAAI,CAACqc,MAAL,GAAc0iE,UAAxB;AAEA;;AAED,YAAME,IAAI,GAAG,KAAKb,UAAlB;AACA,YAAKa,IAAI,KAAK,CAAd,EAAkBrwE,IAAI,IAAImiD,IAAI,GAAGkuB,IAAP,GAAc,KAAKL,YAAL,EAAtB;AAElB,aAAK7zB,gBAAL,CAAsB+F,eAAtB,CAAuCliD,IAAvC,EAA6CA,IAAI,GAAG0N,KAApD,EAA2DxN,GAA3D,EAAgEA,GAAG,GAAGuN,MAAtE,EAA8E00C,IAA9E,EAAoF,KAAKC,GAAzF;AAEA,aAAK/F,uBAAL,CAA6B1L,UAA7B,CAAyC,KAAKwL,gBAA9C;AAEA,OAtL8E;AAwL/ElI,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGumE,QAAQ,CAACluD,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA50B,YAAI,CAAC6P,MAAL,CAAY6R,GAAZ,GAAkB,KAAKA,GAAvB;AACA1hB,YAAI,CAAC6P,MAAL,CAAYgM,IAAZ,GAAmB,KAAKA,IAAxB;AAEA7b,YAAI,CAAC6P,MAAL,CAAYq0D,IAAZ,GAAmB,KAAKA,IAAxB;AACAlkE,YAAI,CAAC6P,MAAL,CAAYs0D,GAAZ,GAAkB,KAAKA,GAAvB;AACAnkE,YAAI,CAAC6P,MAAL,CAAYyU,KAAZ,GAAoB,KAAKA,KAAzB;AAEAtkB,YAAI,CAAC6P,MAAL,CAAYwhF,MAAZ,GAAqB,KAAKA,MAA1B;AAEA,YAAK,KAAKl+E,IAAL,KAAc,IAAnB,EAA0BnT,IAAI,CAAC6P,MAAL,CAAYsD,IAAZ,GAAmBzQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmB,KAAKxxB,IAAxB,CAAnB;AAE1BnT,YAAI,CAAC6P,MAAL,CAAYyhF,SAAZ,GAAwB,KAAKA,SAA7B;AACAtxF,YAAI,CAAC6P,MAAL,CAAY0hF,UAAZ,GAAyB,KAAKA,UAA9B;AAEA,eAAOvxF,IAAP;AAEA;AA5M8E,KAAlD,CAA9B;AAgNA,QAAM0hB,GAAG,GAAG,EAAZ;AAAA,QAAgB2vE,MAAM,GAAG,CAAzB;;AAEA,aAASgB,UAAT,CAAqBnuB,IAArB,EAA2BC,GAA3B,EAAgCmuB,YAAhC,EAA+C;AAE9C/rB,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,YAAZ;;AAEA,UAAKysF,YAAY,CAACC,uBAAb,KAAyC,IAA9C,EAAqD;AAEpDjwF,eAAO,CAACD,KAAR,CAAe,wGAAf;AACA;AAEA;;AAED,WAAKiwF,YAAL,GAAoBA,YAApB;AAEA,UAAME,QAAQ,GAAG,IAAIpB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACAquB,cAAQ,CAAC/sB,MAAT,GAAkB,KAAKA,MAAvB;AACA+sB,cAAQ,CAACx1E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAg0E,cAAQ,CAACl0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,WAAK7+C,GAAL,CAAUo0E,QAAV;AAEA,UAAMC,QAAQ,GAAG,IAAIrB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACAsuB,cAAQ,CAAChtB,MAAT,GAAkB,KAAKA,MAAvB;AACAgtB,cAAQ,CAACz1E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAi0E,cAAQ,CAACn0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAjB;AACA,WAAK7+C,GAAL,CAAUq0E,QAAV;AAEA,UAAMC,QAAQ,GAAG,IAAItB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACAuuB,cAAQ,CAACjtB,MAAT,GAAkB,KAAKA,MAAvB;AACAitB,cAAQ,CAAC11E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;AACAk0E,cAAQ,CAACp0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,WAAK7+C,GAAL,CAAUs0E,QAAV;AAEA,UAAMC,QAAQ,GAAG,IAAIvB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACAwuB,cAAQ,CAACltB,MAAT,GAAkB,KAAKA,MAAvB;AACAktB,cAAQ,CAAC31E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAE,CAAzB;AACAm0E,cAAQ,CAACr0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAArB,CAAjB;AACA,WAAK7+C,GAAL,CAAUu0E,QAAV;AAEA,UAAMC,QAAQ,GAAG,IAAIxB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACAyuB,cAAQ,CAACntB,MAAT,GAAkB,KAAKA,MAAvB;AACAmtB,cAAQ,CAAC51E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAo0E,cAAQ,CAACt0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,WAAK7+C,GAAL,CAAUw0E,QAAV;AAEA,UAAMC,QAAQ,GAAG,IAAIzB,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAjB;AACA0uB,cAAQ,CAACptB,MAAT,GAAkB,KAAKA,MAAvB;AACAotB,cAAQ,CAAC71E,EAAT,CAAYwB,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAq0E,cAAQ,CAACv0E,MAAT,CAAiB,IAAI2+C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAAjB;AACA,WAAK7+C,GAAL,CAAUy0E,QAAV;;AAEA,WAAKp2E,MAAL,GAAc,UAAWuS,QAAX,EAAqBF,KAArB,EAA6B;AAE1C,YAAK,KAAK03C,MAAL,KAAgB,IAArB,EAA4B,KAAK2C,iBAAL;AAE5B,YAAM2pB,gBAAgB,GAAG9jE,QAAQ,CAAC+jE,EAAT,CAAY75E,OAArC;AACA,YAAM85E,mBAAmB,GAAGhkE,QAAQ,CAACikE,eAAT,EAA5B;AAEAjkE,gBAAQ,CAAC+jE,EAAT,CAAY75E,OAAZ,GAAsB,KAAtB;AAEA,YAAMu8C,eAAe,GAAG68B,YAAY,CAAC95B,OAAb,CAAqB/C,eAA7C;AAEA68B,oBAAY,CAAC95B,OAAb,CAAqB/C,eAArB,GAAuC,KAAvC;AAEAzmC,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB0jE,QAAxB;AAEAxjE,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB2jE,QAAxB;AAEAzjE,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB4jE,QAAxB;AAEA1jE,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB6jE,QAAxB;AAEA3jE,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB8jE,QAAxB;AAEAN,oBAAY,CAAC95B,OAAb,CAAqB/C,eAArB,GAAuCA,eAAvC;AAEAzmC,gBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwC,CAAxC;AACAtjE,gBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB+jE,QAAxB;AAEA7jE,gBAAQ,CAACkkE,eAAT,CAA0BF,mBAA1B;AAEAhkE,gBAAQ,CAAC+jE,EAAT,CAAY75E,OAAZ,GAAsB45E,gBAAtB;AAEA,OArCD;;AAuCA,WAAKK,KAAL,GAAa,UAAWnkE,QAAX,EAAqB8B,KAArB,EAA4Byc,KAA5B,EAAmC6lD,OAAnC,EAA6C;AAEzD,YAAMJ,mBAAmB,GAAGhkE,QAAQ,CAACikE,eAAT,EAA5B;;AAEA,aAAM,IAAI9xF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B6tB,kBAAQ,CAACkkE,eAAT,CAA0BZ,YAA1B,EAAwCnxF,IAAxC;AAEA6tB,kBAAQ,CAACmkE,KAAT,CAAgBriE,KAAhB,EAAuByc,KAAvB,EAA8B6lD,OAA9B;AAEA;;AAEDpkE,gBAAQ,CAACkkE,eAAT,CAA0BF,mBAA1B;AAEA,OAdD;AAgBA;;AAEDX,cAAU,CAACh6E,SAAX,GAAuB3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAvB;AACAg6E,cAAU,CAACh6E,SAAX,CAAqB0M,WAArB,GAAmCstE,UAAnC;;AAEA,aAASgB,qBAAT,CAAgCp8E,IAAhC,EAAsC4hB,OAAtC,EAA+Cy6D,KAA/C,EAAuD;AAEtD,UAAK/1C,MAAM,CAACE,SAAP,CAAkB5kB,OAAlB,CAAL,EAAmC;AAElCv2B,eAAO,CAAC2W,IAAR,CAAc,kGAAd;AAEA4f,eAAO,GAAGy6D,KAAV;AAEA;;AAEDl7B,uBAAiB,CAAC5iD,IAAlB,CAAwB,IAAxB,EAA8ByB,IAA9B,EAAoCA,IAApC,EAA0C4hB,OAA1C;AAEA;;AAEDw6D,yBAAqB,CAACh7E,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAeyhD,iBAAiB,CAAC//C,SAAjC,CAAlC;AACAg7E,yBAAqB,CAACh7E,SAAtB,CAAgC0M,WAAhC,GAA8CsuE,qBAA9C;AAEAA,yBAAqB,CAACh7E,SAAtB,CAAgCk6E,uBAAhC,GAA0D,IAA1D;;AAEAc,yBAAqB,CAACh7E,SAAtB,CAAgCk7E,0BAAhC,GAA6D,UAAWvkE,QAAX,EAAqBwpC,OAArB,EAA+B;AAE3F,WAAKA,OAAL,CAAa3yD,IAAb,GAAoB2yD,OAAO,CAAC3yD,IAA5B;AACA,WAAK2yD,OAAL,CAAaxD,MAAb,GAAsBvR,UAAtB,CAH2F,CAGzD;;AAClC,WAAK+U,OAAL,CAAatD,QAAb,GAAwBsD,OAAO,CAACtD,QAAhC;AAEA,WAAKsD,OAAL,CAAa/C,eAAb,GAA+B+C,OAAO,CAAC/C,eAAvC;AACA,WAAK+C,OAAL,CAAazD,SAAb,GAAyByD,OAAO,CAACzD,SAAjC;AACA,WAAKyD,OAAL,CAAa1D,SAAb,GAAyB0D,OAAO,CAAC1D,SAAjC;AAEA,UAAMhmC,KAAK,GAAG,IAAIm8C,KAAJ,EAAd;AAEA,UAAMuoB,MAAM,GAAG;AAEd1D,gBAAQ,EAAE;AACT2D,mBAAS,EAAE;AAAExoF,iBAAK,EAAE;AAAT;AADF,SAFI;AAMdolF,oBAAY;AAAE;AAAF,wXANE;AA0BdC,sBAAc;AAAE;AAAF;AA1BA,OAAf;AA8CA,UAAM3/D,QAAQ,GAAG,IAAIw/D,cAAJ,CAAoB;AAEpCjwF,YAAI,EAAE,qBAF8B;AAIpC4vF,gBAAQ,EAAEH,aAAa,CAAE6D,MAAM,CAAC1D,QAAT,CAJa;AAKpCO,oBAAY,EAAEmD,MAAM,CAACnD,YALe;AAMpCC,sBAAc,EAAEkD,MAAM,CAAClD,cANa;AAOpC3W,YAAI,EAAE/6B,QAP8B;AAQpC86B,gBAAQ,EAAE16B;AAR0B,OAApB,CAAjB;AAYAruB,cAAQ,CAACm/D,QAAT,CAAkB2D,SAAlB,CAA4BxoF,KAA5B,GAAoCutD,OAApC;AAEA,UAAMhoC,IAAI,GAAG,IAAIo4D,IAAJ,CAAU,IAAI8F,iBAAJ,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAV,EAA4C/9D,QAA5C,CAAb;AAEA7B,WAAK,CAAC1Q,GAAN,CAAWoS,IAAX;AAEA,UAAMzB,MAAM,GAAG,IAAIsjE,UAAJ,CAAgB,CAAhB,EAAmB,EAAnB,EAAuB,IAAvB,CAAf;AACAtjE,YAAM,CAACtS,MAAP,CAAeuS,QAAf,EAAyBF,KAAzB;AAEA0B,UAAI,CAACi6C,QAAL,CAAc3rD,OAAd;AACA0R,UAAI,CAACG,QAAL,CAAc7R,OAAd;AAEA,aAAO,IAAP;AAEA,KApFD;;AAsFA,aAAS40E,WAAT,CAAsB1zF,IAAtB,EAA4ByvB,KAA5B,EAAmCD,MAAnC,EAA2CwlC,MAA3C,EAAmDnvD,IAAnD,EAAyD8uD,OAAzD,EAAkEC,KAAlE,EAAyEC,KAAzE,EAAgFC,SAAhF,EAA2FC,SAA3F,EAAsGE,UAAtG,EAAkHC,QAAlH,EAA6H;AAE5HR,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bm/C,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EnvD,IAA/E,EAAqFovD,UAArF,EAAiGC,QAAjG;AAEA,WAAK3zD,KAAL,GAAa;AAAEvB,YAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsByvB,aAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCD,cAAM,EAAEA,MAAM,IAAI;AAA3D,OAAb;AAEA,WAAKslC,SAAL,GAAiBA,SAAS,KAAKvlD,SAAd,GAA0BulD,SAA1B,GAAsC7S,aAAvD;AACA,WAAK8S,SAAL,GAAiBA,SAAS,KAAKxlD,SAAd,GAA0BwlD,SAA1B,GAAsC9S,aAAvD;AAEA,WAAKwT,eAAL,GAAuB,KAAvB;AACA,WAAKE,KAAL,GAAa,KAAb;AACA,WAAKC,eAAL,GAAuB,CAAvB;AAEA,WAAKzyC,WAAL,GAAmB,IAAnB;AAEA;;AAEDuwE,eAAW,CAACr7E,SAAZ,GAAwB3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAAxB;AACAq7E,eAAW,CAACr7E,SAAZ,CAAsB0M,WAAtB,GAAoC2uE,WAApC;AAEAA,eAAW,CAACr7E,SAAZ,CAAsBs7E,aAAtB,GAAsC,IAAtC;;AAEA,QAAMC,SAAS,GAAG,IAAItkB,MAAJ,EAAlB;;AACA,QAAMukB,SAAS,GAAG,IAAI52B,OAAJ,EAAlB;;AAEA,aAAS62B,OAAT,CAAkB5kB,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BqG,EAA9B,EAAkCse,EAAlC,EAAsCC,EAAtC,EAA2C;AAE1C,WAAKC,MAAL,GAAc,CAEX/kB,EAAE,KAAK3/D,SAAT,GAAuB2/D,EAAvB,GAA4B,IAAIgE,KAAJ,EAFf,EAGX/D,EAAE,KAAK5/D,SAAT,GAAuB4/D,EAAvB,GAA4B,IAAI+D,KAAJ,EAHf,EAIX9D,EAAE,KAAK7/D,SAAT,GAAuB6/D,EAAvB,GAA4B,IAAI8D,KAAJ,EAJf,EAKXuC,EAAE,KAAKlmE,SAAT,GAAuBkmE,EAAvB,GAA4B,IAAIvC,KAAJ,EALf,EAMX6gB,EAAE,KAAKxkF,SAAT,GAAuBwkF,EAAvB,GAA4B,IAAI7gB,KAAJ,EANf,EAOX8gB,EAAE,KAAKzkF,SAAT,GAAuBykF,EAAvB,GAA4B,IAAI9gB,KAAJ,EAPf,CAAd;AAWA;;AAEDxwE,UAAM,CAACiiC,MAAP,CAAemvD,OAAO,CAACz7E,SAAvB,EAAkC;AAEjCmG,SAAG,EAAE,aAAW0wD,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBqG,EAAvB,EAA2Bse,EAA3B,EAA+BC,EAA/B,EAAoC;AAExC,YAAMC,MAAM,GAAG,KAAKA,MAApB;AAEAA,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkB6yD,EAAlB;AACA+kB,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkB8yD,EAAlB;AACA8kB,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkB+yD,EAAlB;AACA6kB,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkBo5D,EAAlB;AACAwe,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkB03E,EAAlB;AACAE,cAAM,CAAE,CAAF,CAAN,CAAY53E,IAAZ,CAAkB23E,EAAlB;AAEA,eAAO,IAAP;AAEA,OAfgC;AAiBjCv4E,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OArBgC;AAuBjCA,UAAI,EAAE,cAAW63E,OAAX,EAAqB;AAE1B,YAAMD,MAAM,GAAG,KAAKA,MAApB;;AAEA,aAAM,IAAI9yF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B8yF,gBAAM,CAAE9yF,IAAF,CAAN,CAAYkb,IAAZ,CAAkB63E,OAAO,CAACD,MAAR,CAAgB9yF,IAAhB,CAAlB;AAEA;;AAED,eAAO,IAAP;AAEA,OAnCgC;AAqCjCgzF,6BAAuB,EAAE,iCAAWt+D,CAAX,EAAe;AAEvC,YAAMo+D,MAAM,GAAG,KAAKA,MAApB;AACA,YAAMrjC,EAAE,GAAG/6B,CAAC,CAACs4B,QAAb;AACA,YAAMimC,GAAG,GAAGxjC,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqByjC,GAAG,GAAGzjC,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC0jC,GAAG,GAAG1jC,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmD2jC,GAAG,GAAG3jC,EAAE,CAAE,CAAF,CAA3D;AACA,YAAM4jC,GAAG,GAAG5jC,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqB6jC,GAAG,GAAG7jC,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoC8jC,GAAG,GAAG9jC,EAAE,CAAE,CAAF,CAA5C;AAAA,YAAmD+jC,GAAG,GAAG/jC,EAAE,CAAE,CAAF,CAA3D;AACA,YAAMgkC,GAAG,GAAGhkC,EAAE,CAAE,CAAF,CAAd;AAAA,YAAqBikC,GAAG,GAAGjkC,EAAE,CAAE,CAAF,CAA7B;AAAA,YAAoCkkC,IAAI,GAAGlkC,EAAE,CAAE,EAAF,CAA7C;AAAA,YAAqDmkC,IAAI,GAAGnkC,EAAE,CAAE,EAAF,CAA9D;AACA,YAAMokC,IAAI,GAAGpkC,EAAE,CAAE,EAAF,CAAf;AAAA,YAAuBqkC,IAAI,GAAGrkC,EAAE,CAAE,EAAF,CAAhC;AAAA,YAAwCskC,IAAI,GAAGtkC,EAAE,CAAE,EAAF,CAAjD;AAAA,YAAyDukC,IAAI,GAAGvkC,EAAE,CAAE,EAAF,CAAlE;AAEAqjC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGH,GAAjC,EAAsCO,GAAG,GAAGH,GAA5C,EAAiDO,IAAI,GAAGH,GAAxD,EAA6DO,IAAI,GAAGH,IAApE,EAA2ElmC,SAA3E;AACAmlC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGH,GAAjC,EAAsCO,GAAG,GAAGH,GAA5C,EAAiDO,IAAI,GAAGH,GAAxD,EAA6DO,IAAI,GAAGH,IAApE,EAA2ElmC,SAA3E;AACAmlC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGF,GAAjC,EAAsCM,GAAG,GAAGF,GAA5C,EAAiDM,IAAI,GAAGF,GAAxD,EAA6DM,IAAI,GAAGF,IAApE,EAA2EnmC,SAA3E;AACAmlC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGF,GAAjC,EAAsCM,GAAG,GAAGF,GAA5C,EAAiDM,IAAI,GAAGF,GAAxD,EAA6DM,IAAI,GAAGF,IAApE,EAA2EnmC,SAA3E;AACAmlC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGD,GAAjC,EAAsCK,GAAG,GAAGD,GAA5C,EAAiDK,IAAI,GAAGD,IAAxD,EAA8DK,IAAI,GAAGD,IAArE,EAA4EpmC,SAA5E;AACAmlC,cAAM,CAAE,CAAF,CAAN,CAAY7gB,aAAZ,CAA2BmhB,GAAG,GAAGD,GAAjC,EAAsCK,GAAG,GAAGD,GAA5C,EAAiDK,IAAI,GAAGD,IAAxD,EAA8DK,IAAI,GAAGD,IAArE,EAA4EpmC,SAA5E;AAEA,eAAO,IAAP;AAEA,OAvDgC;AAyDjCsmC,sBAAgB,EAAE,0BAAWvlF,MAAX,EAAoB;AAErC,YAAM46D,QAAQ,GAAG56D,MAAM,CAAC46D,QAAxB;AAEA,YAAKA,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC1X,QAAQ,CAACma,qBAAT;;AAExCgP,iBAAS,CAACv3E,IAAV,CAAgBouD,QAAQ,CAAC0X,cAAzB,EAA0CtrB,YAA1C,CAAwDhnD,MAAM,CAACwuD,WAA/D;;AAEA,eAAO,KAAK6P,gBAAL,CAAuB0lB,SAAvB,CAAP;AAEA,OAnEgC;AAqEjCyB,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC1B,iBAAS,CAACv2C,MAAV,CAAiB7+B,GAAjB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;;AACAo1E,iBAAS,CAAC51E,MAAV,GAAmB,kBAAnB;;AACA41E,iBAAS,CAAC/8B,YAAV,CAAwBy+B,MAAM,CAACj3B,WAA/B;;AAEA,eAAO,KAAK6P,gBAAL,CAAuB0lB,SAAvB,CAAP;AAEA,OA7EgC;AA+EjC1lB,sBAAgB,EAAE,0BAAWC,MAAX,EAAoB;AAErC,YAAM8lB,MAAM,GAAG,KAAKA,MAApB;AACA,YAAM52C,MAAM,GAAG8wB,MAAM,CAAC9wB,MAAtB;AACA,YAAMk4C,SAAS,GAAG,CAAEpnB,MAAM,CAACnwD,MAA3B;;AAEA,aAAM,IAAI7c,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B,cAAM2f,QAAQ,GAAGmzE,MAAM,CAAE9yF,IAAF,CAAN,CAAYytE,eAAZ,CAA6BvxB,MAA7B,CAAjB;;AAEA,cAAKv8B,QAAQ,GAAGy0E,SAAhB,EAA4B;AAE3B,mBAAO,KAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAnGgC;AAqGjCtnB,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B,YAAM2mB,MAAM,GAAG,KAAKA,MAApB;;AAEA,aAAM,IAAI9yF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B,cAAMmtE,KAAK,GAAG2lB,MAAM,CAAE9yF,IAAF,CAApB,CAF8B,CAI9B;;AAEA0yF,mBAAS,CAAC/nF,CAAV,GAAcwiE,KAAK,CAACpP,MAAN,CAAapzD,CAAb,GAAiB,CAAjB,GAAqBwhE,GAAG,CAACzvD,GAAJ,CAAQ/R,CAA7B,GAAiCwhE,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAvD;AACA+nF,mBAAS,CAAChxE,CAAV,GAAcyrD,KAAK,CAACpP,MAAN,CAAar8C,CAAb,GAAiB,CAAjB,GAAqByqD,GAAG,CAACzvD,GAAJ,CAAQgF,CAA7B,GAAiCyqD,GAAG,CAAC1vD,GAAJ,CAAQiF,CAAvD;AACAgxE,mBAAS,CAACzlE,CAAV,GAAckgD,KAAK,CAACpP,MAAN,CAAa9wC,CAAb,GAAiB,CAAjB,GAAqBk/C,GAAG,CAACzvD,GAAJ,CAAQuQ,CAA7B,GAAiCk/C,GAAG,CAAC1vD,GAAJ,CAAQwQ,CAAvD;;AAEA,cAAKkgD,KAAK,CAACM,eAAN,CAAuBilB,SAAvB,IAAqC,CAA1C,EAA8C;AAE7C,mBAAO,KAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OA7HgC;AA+HjC/lB,mBAAa,EAAE,uBAAWv5B,KAAX,EAAmB;AAEjC,YAAM0/C,MAAM,GAAG,KAAKA,MAApB;;AAEA,aAAM,IAAI9yF,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B,cAAK8yF,MAAM,CAAE9yF,IAAF,CAAN,CAAYytE,eAAZ,CAA6Br6B,KAA7B,IAAuC,CAA5C,EAAgD;AAE/C,mBAAO,KAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA;AA/IgC,KAAlC;AAmJA;;;;AAIA,QAAMihD,WAAW,GAAG;AAEnBC,YAAM,EAAE;AAEPC,eAAO,EAAE;AAAEzqF,eAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,SAFF;AAGP+C,eAAO,EAAE;AAAE5uE,eAAK,EAAE;AAAT,SAHF;AAKPkD,WAAG,EAAE;AAAElD,eAAK,EAAE;AAAT,SALE;AAMP0qF,mBAAW,EAAE;AAAE1qF,eAAK,EAAE,IAAI8kD,OAAJ;AAAT,SANN;AAOP6lC,oBAAY,EAAE;AAAE3qF,eAAK,EAAE,IAAI8kD,OAAJ;AAAT,SAPP;AASPmtB,gBAAQ,EAAE;AAAEjyE,eAAK,EAAE;AAAT;AATH,OAFW;AAenB4qF,iBAAW,EAAE;AAEZ5X,mBAAW,EAAE;AAAEhzE,eAAK,EAAE;AAAT;AAFD,OAfM;AAqBnB6qF,YAAM,EAAE;AAEP5X,cAAM,EAAE;AAAEjzE,eAAK,EAAE;AAAT,SAFD;AAGP8qF,kBAAU,EAAE;AAAE9qF,eAAK,EAAE,CAAE;AAAX,SAHL;AAIPkzE,oBAAY,EAAE;AAAElzE,eAAK,EAAE;AAAT,SAJP;AAKPmzE,uBAAe,EAAE;AAAEnzE,eAAK,EAAE;AAAT,SALV;AAMP+qF,mBAAW,EAAE;AAAE/qF,eAAK,EAAE;AAAT;AANN,OArBW;AA+BnBgrF,WAAK,EAAE;AAEN7Y,aAAK,EAAE;AAAEnyE,eAAK,EAAE;AAAT,SAFD;AAGNoyE,sBAAc,EAAE;AAAEpyE,eAAK,EAAE;AAAT;AAHV,OA/BY;AAsCnBirF,cAAQ,EAAE;AAET/Y,gBAAQ,EAAE;AAAElyE,eAAK,EAAE;AAAT,SAFD;AAGTq0E,yBAAiB,EAAE;AAAEr0E,eAAK,EAAE;AAAT;AAHV,OAtCS;AA6CnBkrF,iBAAW,EAAE;AAEZnY,mBAAW,EAAE;AAAE/yE,eAAK,EAAE;AAAT;AAFD,OA7CM;AAmDnBmrF,aAAO,EAAE;AAER9Y,eAAO,EAAE;AAAEryE,eAAK,EAAE;AAAT,SAFD;AAGRsyE,iBAAS,EAAE;AAAEtyE,eAAK,EAAE;AAAT;AAHH,OAnDU;AA0DnBorF,eAAS,EAAE;AAEV7Y,iBAAS,EAAE;AAAEvyE,eAAK,EAAE;AAAT,SAFD;AAGVyyE,mBAAW,EAAE;AAAEzyE,eAAK,EAAE,IAAIkiD,OAAJ,CAAa,CAAb,EAAgB,CAAhB;AAAT;AAHH,OA1DQ;AAiEnBmpC,qBAAe,EAAE;AAEhB3Y,uBAAe,EAAE;AAAE1yE,eAAK,EAAE;AAAT,SAFD;AAGhB2yE,yBAAiB,EAAE;AAAE3yE,eAAK,EAAE;AAAT,SAHH;AAIhB4yE,wBAAgB,EAAE;AAAE5yE,eAAK,EAAE;AAAT;AAJF,OAjEE;AAyEnBsrF,kBAAY,EAAE;AAEbzY,oBAAY,EAAE;AAAE7yE,eAAK,EAAE;AAAT;AAFD,OAzEK;AA+EnBurF,kBAAY,EAAE;AAEbzY,oBAAY,EAAE;AAAE9yE,eAAK,EAAE;AAAT;AAFD,OA/EK;AAqFnBwrF,iBAAW,EAAE;AAEZlY,mBAAW,EAAE;AAAEtzE,eAAK,EAAE;AAAT;AAFD,OArFM;AA2FnBkgE,SAAG,EAAE;AAEJurB,kBAAU,EAAE;AAAEzrF,eAAK,EAAE;AAAT,SAFR;AAGJ0rF,eAAO,EAAE;AAAE1rF,eAAK,EAAE;AAAT,SAHL;AAIJ2rF,cAAM,EAAE;AAAE3rF,eAAK,EAAE;AAAT,SAJJ;AAKJ4rF,gBAAQ,EAAE;AAAE5rF,eAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT;AALN,OA3Fc;AAoGnByZ,YAAM,EAAE;AAEPuG,yBAAiB,EAAE;AAAE7rF,eAAK,EAAE;AAAT,SAFZ;AAIP8rF,kBAAU,EAAE;AAAE9rF,eAAK,EAAE;AAAT,SAJL;AAMP+rF,yBAAiB,EAAE;AAAE/rF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AAC3C5mB,qBAAS,EAAE,EADgC;AAE3Cv/C,iBAAK,EAAE;AAFoC;AAAzB,SANZ;AAWPomE,+BAAuB,EAAE;AAAEjsF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AACjDE,sBAAU,EAAE,EADqC;AAEjDC,4BAAgB,EAAE,EAF+B;AAGjDC,wBAAY,EAAE,EAHmC;AAIjDC,yBAAa,EAAE;AAJkC;AAAzB,SAXlB;AAkBPC,4BAAoB,EAAE;AAAEtsF,eAAK,EAAE;AAAT,SAlBf;AAmBPusF,+BAAuB,EAAE;AAAEvsF,eAAK,EAAE;AAAT,SAnBlB;AAqBPwsF,kBAAU,EAAE;AAAExsF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AACpCnmE,iBAAK,EAAE,EAD6B;AAEpCnV,oBAAQ,EAAE,EAF0B;AAGpC00D,qBAAS,EAAE,EAHyB;AAIpCvvD,oBAAQ,EAAE,EAJ0B;AAKpC42E,mBAAO,EAAE,EAL2B;AAMpCC,uBAAW,EAAE,EANuB;AAOpCC,iBAAK,EAAE;AAP6B;AAAzB,SArBL;AA+BPC,wBAAgB,EAAE;AAAE5sF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AAC1CE,sBAAU,EAAE,EAD8B;AAE1CC,4BAAgB,EAAE,EAFwB;AAG1CC,wBAAY,EAAE,EAH4B;AAI1CC,yBAAa,EAAE;AAJ2B;AAAzB,SA/BX;AAsCPQ,qBAAa,EAAE;AAAE7sF,eAAK,EAAE;AAAT,SAtCR;AAuCP8sF,wBAAgB,EAAE;AAAE9sF,eAAK,EAAE;AAAT,SAvCX;AAyCP+sF,mBAAW,EAAE;AAAE/sF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AACrCnmE,iBAAK,EAAE,EAD8B;AAErCnV,oBAAQ,EAAE,EAF2B;AAGrCi8E,iBAAK,EAAE,EAH8B;AAIrC92E,oBAAQ,EAAE;AAJ2B;AAAzB,SAzCN;AAgDPm3E,yBAAiB,EAAE;AAAEhtF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AAC3CE,sBAAU,EAAE,EAD+B;AAE3CC,4BAAgB,EAAE,EAFyB;AAG3CC,wBAAY,EAAE,EAH6B;AAI3CC,yBAAa,EAAE,EAJ4B;AAK3CY,4BAAgB,EAAE,EALyB;AAM3CC,2BAAe,EAAE;AAN0B;AAAzB,SAhDZ;AAyDPC,sBAAc,EAAE;AAAEntF,eAAK,EAAE;AAAT,SAzDT;AA0DPotF,yBAAiB,EAAE;AAAEptF,eAAK,EAAE;AAAT,SA1DZ;AA4DPqtF,wBAAgB,EAAE;AAAErtF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AAC1C5mB,qBAAS,EAAE,EAD+B;AAE1CkoB,oBAAQ,EAAE,EAFgC;AAG1CC,uBAAW,EAAE;AAH6B;AAAzB,SA5DX;AAkEP;AACAC,sBAAc,EAAE;AAAExtF,eAAK,EAAE,EAAT;AAAagsF,oBAAU,EAAE;AACxCnmE,iBAAK,EAAE,EADiC;AAExCnV,oBAAQ,EAAE,EAF8B;AAGxC8T,iBAAK,EAAE,EAHiC;AAIxCD,kBAAM,EAAE;AAJgC;AAAzB;AAnET,OApGW;AAgLnBN,YAAM,EAAE;AAEPwmE,eAAO,EAAE;AAAEzqF,eAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,SAFF;AAGP+C,eAAO,EAAE;AAAE5uE,eAAK,EAAE;AAAT,SAHF;AAIPgM,YAAI,EAAE;AAAEhM,eAAK,EAAE;AAAT,SAJC;AAKPgT,aAAK,EAAE;AAAEhT,eAAK,EAAE;AAAT,SALA;AAMPkD,WAAG,EAAE;AAAElD,eAAK,EAAE;AAAT,SANE;AAOPiyE,gBAAQ,EAAE;AAAEjyE,eAAK,EAAE;AAAT,SAPH;AAQP0qF,mBAAW,EAAE;AAAE1qF,eAAK,EAAE,IAAI8kD,OAAJ;AAAT;AARN,OAhLW;AA4LnBulC,YAAM,EAAE;AAEPI,eAAO,EAAE;AAAEzqF,eAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,SAFF;AAGP+C,eAAO,EAAE;AAAE5uE,eAAK,EAAE;AAAT,SAHF;AAIPoyC,cAAM,EAAE;AAAEpyC,eAAK,EAAE,IAAIkiD,OAAJ,CAAa,GAAb,EAAkB,GAAlB;AAAT,SAJD;AAKP9R,gBAAQ,EAAE;AAAEpwC,eAAK,EAAE;AAAT,SALH;AAMPkD,WAAG,EAAE;AAAElD,eAAK,EAAE;AAAT,SANE;AAOPiyE,gBAAQ,EAAE;AAAEjyE,eAAK,EAAE;AAAT,SAPH;AAQP0qF,mBAAW,EAAE;AAAE1qF,eAAK,EAAE,IAAI8kD,OAAJ;AAAT;AARN;AA5LW,KAApB;;AA0MA,aAAS2oC,cAAT,GAA0B;AAEzB,UAAItkC,OAAO,GAAG,IAAd;AACA,UAAIukC,WAAW,GAAG,KAAlB;AACA,UAAIC,aAAa,GAAG,IAApB;AACA,UAAIC,SAAS,GAAG,IAAhB;;AAEA,eAASC,gBAAT,CAA2BpqD,IAA3B,EAAiCqqD,KAAjC,EAAyC;AAExCH,qBAAa,CAAElqD,IAAF,EAAQqqD,KAAR,CAAb;AAEAF,iBAAS,GAAGzkC,OAAO,CAAC7iC,qBAAR,CAA+BunE,gBAA/B,CAAZ;AAEA;;AAED,aAAO;AAENllB,aAAK,EAAE,iBAAY;AAElB,cAAK+kB,WAAW,KAAK,IAArB,EAA4B;AAC5B,cAAKC,aAAa,KAAK,IAAvB,EAA8B;AAE9BC,mBAAS,GAAGzkC,OAAO,CAAC7iC,qBAAR,CAA+BunE,gBAA/B,CAAZ;AAEAH,qBAAW,GAAG,IAAd;AAEA,SAXK;AAaN5wF,YAAI,EAAE,gBAAY;AAEjBqsD,iBAAO,CAAC4kC,oBAAR,CAA8BH,SAA9B;AAEAF,qBAAW,GAAG,KAAd;AAEA,SAnBK;AAqBNM,wBAAgB,EAAE,0BAAWl8B,QAAX,EAAsB;AAEvC67B,uBAAa,GAAG77B,QAAhB;AAEA,SAzBK;AA2BNm8B,kBAAU,EAAE,oBAAWjuF,KAAX,EAAmB;AAE9BmpD,iBAAO,GAAGnpD,KAAV;AAEA;AA/BK,OAAP;AAmCA;;AAED,aAASkuF,eAAT,CAA0BC,EAA1B,EAA8BC,YAA9B,EAA6C;AAE5C,UAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,UAAMC,OAAO,GAAG,IAAIC,OAAJ,EAAhB;;AAEA,eAASC,YAAT,CAAuB9pC,SAAvB,EAAkC+pC,UAAlC,EAA+C;AAE9C,YAAM37D,KAAK,GAAG4xB,SAAS,CAAC5xB,KAAxB;AACA,YAAM6hD,KAAK,GAAGjwB,SAAS,CAACiwB,KAAxB;AAEA,YAAM1gD,MAAM,GAAGk6D,EAAE,CAACK,YAAH,EAAf;AAEAL,UAAE,CAACO,UAAH,CAAeD,UAAf,EAA2Bx6D,MAA3B;AACAk6D,UAAE,CAACQ,UAAH,CAAeF,UAAf,EAA2B37D,KAA3B,EAAkC6hD,KAAlC;AAEAjwB,iBAAS,CAACowB,gBAAV;AAEA,YAAIl6E,IAAI,GAAG,IAAX;;AAEA,YAAKk4B,KAAK,YAAY0jD,YAAtB,EAAqC;AAEpC57E,cAAI,GAAG,IAAP;AAEA,SAJD,MAIO,IAAKk4B,KAAK,YAAY4jD,YAAtB,EAAqC;AAE3Cr/E,iBAAO,CAAC2W,IAAR,CAAc,sEAAd;AAEA,SAJM,MAIA,IAAK8kB,KAAK,YAAYxJ,WAAtB,EAAoC;AAE1C1uB,cAAI,GAAG,IAAP;AAEA,SAJM,MAIA,IAAKk4B,KAAK,YAAYqjD,UAAtB,EAAmC;AAEzCv7E,cAAI,GAAG,IAAP;AAEA,SAJM,MAIA,IAAKk4B,KAAK,YAAYvJ,WAAtB,EAAoC;AAE1C3uB,cAAI,GAAG,IAAP;AAEA,SAJM,MAIA,IAAKk4B,KAAK,YAAYiK,UAAtB,EAAmC;AAEzCniC,cAAI,GAAG,IAAP;AAEA,SAJM,MAIA,IAAKk4B,KAAK,YAAYgjD,SAAtB,EAAkC;AAExCl7E,cAAI,GAAG,IAAP;AAEA,SAJM,MAIA,IAAKk4B,KAAK,YAAYpL,UAAtB,EAAmC;AAEzC9sB,cAAI,GAAG,IAAP;AAEA;;AAED,eAAO;AACNq5B,gBAAM,EAAEA,MADF;AAENr5B,cAAI,EAAEA,IAFA;AAGNg0F,yBAAe,EAAE97D,KAAK,CAAC+7D,iBAHjB;AAIN3gE,iBAAO,EAAEw2B,SAAS,CAACx2B;AAJb,SAAP;AAOA;;AAED,eAAS4gE,YAAT,CAAuB76D,MAAvB,EAA+BywB,SAA/B,EAA0C+pC,UAA1C,EAAuD;AAEtD,YAAM37D,KAAK,GAAG4xB,SAAS,CAAC5xB,KAAxB;AACA,YAAM8hD,WAAW,GAAGlwB,SAAS,CAACkwB,WAA9B;AAEAuZ,UAAE,CAACO,UAAH,CAAeD,UAAf,EAA2Bx6D,MAA3B;;AAEA,YAAK2gD,WAAW,CAAC3V,KAAZ,KAAsB,CAAE,CAA7B,EAAiC;AAEhC;AAEAkvB,YAAE,CAACY,aAAH,CAAkBN,UAAlB,EAA8B,CAA9B,EAAiC37D,KAAjC;AAEA,SAND,MAMO;AAEN,cAAKu7D,QAAL,EAAgB;AAEfF,cAAE,CAACY,aAAH,CAAkBN,UAAlB,EAA8B7Z,WAAW,CAAChjE,MAAZ,GAAqBkhB,KAAK,CAAC+7D,iBAAzD,EACC/7D,KADD,EACQ8hD,WAAW,CAAChjE,MADpB,EAC4BgjE,WAAW,CAAC3V,KADxC;AAGA,WALD,MAKO;AAENkvB,cAAE,CAACY,aAAH,CAAkBN,UAAlB,EAA8B7Z,WAAW,CAAChjE,MAAZ,GAAqBkhB,KAAK,CAAC+7D,iBAAzD,EACC/7D,KAAK,CAACrB,QAAN,CAAgBmjD,WAAW,CAAChjE,MAA5B,EAAoCgjE,WAAW,CAAChjE,MAAZ,GAAqBgjE,WAAW,CAAC3V,KAArE,CADD;AAGA;;AAED2V,qBAAW,CAAC3V,KAAZ,GAAoB,CAAE,CAAtB,CAdM,CAcmB;AAEzB;AAED,OA9F2C,CAgG5C;;;AAEA,eAASl4D,GAAT,CAAc29C,SAAd,EAA0B;AAEzB,YAAKA,SAAS,CAACsqC,4BAAf,EAA8CtqC,SAAS,GAAGA,SAAS,CAAC3vD,IAAtB;AAE9C,eAAOu5F,OAAO,CAACvnF,GAAR,CAAa29C,SAAb,CAAP;AAEA;;AAED,eAASz6C,MAAT,CAAiBy6C,SAAjB,EAA6B;AAE5B,YAAKA,SAAS,CAACsqC,4BAAf,EAA8CtqC,SAAS,GAAGA,SAAS,CAAC3vD,IAAtB;AAE9C,YAAMA,IAAI,GAAGu5F,OAAO,CAACvnF,GAAR,CAAa29C,SAAb,CAAb;;AAEA,YAAK3vD,IAAL,EAAY;AAEXo5F,YAAE,CAACc,YAAH,CAAiBl6F,IAAI,CAACk/B,MAAtB;AAEAq6D,iBAAO,UAAP,CAAgB5pC,SAAhB;AAEA;AAED;;AAED,eAASlzC,MAAT,CAAiBkzC,SAAjB,EAA4B+pC,UAA5B,EAAyC;AAExC,YAAK/pC,SAAS,CAACsqC,4BAAf,EAA8CtqC,SAAS,GAAGA,SAAS,CAAC3vD,IAAtB;AAE9C,YAAMA,IAAI,GAAGu5F,OAAO,CAACvnF,GAAR,CAAa29C,SAAb,CAAb;;AAEA,YAAK3vD,IAAI,KAAKuP,SAAd,EAA0B;AAEzBgqF,iBAAO,CAAC/6E,GAAR,CAAamxC,SAAb,EAAwB8pC,YAAY,CAAE9pC,SAAF,EAAa+pC,UAAb,CAApC;AAEA,SAJD,MAIO,IAAK15F,IAAI,CAACm5B,OAAL,GAAew2B,SAAS,CAACx2B,OAA9B,EAAwC;AAE9C4gE,sBAAY,CAAE/5F,IAAI,CAACk/B,MAAP,EAAeywB,SAAf,EAA0B+pC,UAA1B,CAAZ;AAEA15F,cAAI,CAACm5B,OAAL,GAAew2B,SAAS,CAACx2B,OAAzB;AAEA;AAED;;AAED,aAAO;AAENnnB,WAAG,EAAEA,GAFC;AAGNkD,cAAM,EAAEA,MAHF;AAINuH,cAAM,EAAEA;AAJF,OAAP;AAQA,K,CAED;;;AAEA,aAAS09E,aAAT,CAAwB1qE,KAAxB,EAA+BD,MAA/B,EAAuC++D,aAAvC,EAAsDC,cAAtD,EAAuE;AAEtEhE,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,eAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBj7C,aAAK,EAAEA,KADU;AAEjBD,cAAM,EAAEA,MAFS;AAGjB++D,qBAAa,EAAEA,aAHE;AAIjBC,sBAAc,EAAEA;AAJC,OAAlB;AAOA,WAAK9D,kBAAL,CAAyB,IAAI0P,mBAAJ,CAAyB3qE,KAAzB,EAAgCD,MAAhC,EAAwC++D,aAAxC,EAAuDC,cAAvD,CAAzB;AACA,WAAKjC,aAAL;AAEA;;AAED4N,iBAAa,CAAC9hF,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA1B;AACA8hF,iBAAa,CAAC9hF,SAAd,CAAwB0M,WAAxB,GAAsCo1E,aAAtC,C,CAEA;;AAEA,aAASC,mBAAT,CAA8B3qE,KAA9B,EAAqCD,MAArC,EAA6C++D,aAA7C,EAA4DC,cAA5D,EAA6E;AAE5ExK,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBj7C,aAAK,EAAEA,KADU;AAEjBD,cAAM,EAAEA,MAFS;AAGjB++D,qBAAa,EAAEA,aAHE;AAIjBC,sBAAc,EAAEA;AAJC,OAAlB;AAOA/+D,WAAK,GAAGA,KAAK,IAAI,CAAjB;AACAD,YAAM,GAAGA,MAAM,IAAI,CAAnB;AAEA,UAAM6qE,UAAU,GAAG5qE,KAAK,GAAG,CAA3B;AACA,UAAM6qE,WAAW,GAAG9qE,MAAM,GAAG,CAA7B;AAEA,UAAMw/D,KAAK,GAAGt1E,IAAI,CAAC4N,KAAL,CAAYinE,aAAZ,KAA+B,CAA7C;AACA,UAAMU,KAAK,GAAGv1E,IAAI,CAAC4N,KAAL,CAAYknE,cAAZ,KAAgC,CAA9C;AAEA,UAAMe,MAAM,GAAGP,KAAK,GAAG,CAAvB;AACA,UAAMQ,MAAM,GAAGP,KAAK,GAAG,CAAvB;AAEA,UAAMsL,aAAa,GAAG9qE,KAAK,GAAGu/D,KAA9B;AACA,UAAMwL,cAAc,GAAGhrE,MAAM,GAAGy/D,KAAhC,CA1B4E,CA4B5E;;AAEA,UAAM9H,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAjC4E,CAmC5E;;AAEA,WAAM,IAAIjkB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG2xB,MAAvB,EAA+B3xB,EAAE,EAAjC,EAAuC;AAEtC,YAAMh7C,CAAC,GAAGg7C,EAAE,GAAG28B,cAAL,GAAsBF,WAAhC;;AAEA,aAAM,IAAI18B,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG2xB,MAAvB,EAA+B3xB,EAAE,EAAjC,EAAuC;AAEtC,cAAM9xD,CAAC,GAAG8xD,EAAE,GAAG28B,aAAL,GAAqBF,UAA/B;AAEAppE,kBAAQ,CAACpvB,IAAT,CAAeiK,CAAf,EAAkB,CAAE+W,CAApB,EAAuB,CAAvB;AAEAg/D,iBAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AAEAigF,aAAG,CAACjgF,IAAJ,CAAU+7D,EAAE,GAAGoxB,KAAf;AACAlN,aAAG,CAACjgF,IAAJ,CAAU,IAAMg8D,EAAE,GAAGoxB,KAArB;AAEA;AAED,OAtD2E,CAwD5E;;;AAEA,WAAM,IAAIpxB,IAAE,GAAG,CAAf,EAAkBA,IAAE,GAAGoxB,KAAvB,EAA8BpxB,IAAE,EAAhC,EAAsC;AAErC,aAAM,IAAID,IAAE,GAAG,CAAf,EAAkBA,IAAE,GAAGoxB,KAAvB,EAA8BpxB,IAAE,EAAhC,EAAsC;AAErC,cAAMl9D,CAAC,GAAGk9D,IAAE,GAAG2xB,MAAM,GAAG1xB,IAAxB;AACA,cAAMl9D,CAAC,GAAGi9D,IAAE,GAAG2xB,MAAM,IAAK1xB,IAAE,GAAG,CAAV,CAArB;AACA,cAAM9rC,CAAC,GAAK6rC,IAAE,GAAG,CAAP,GAAa2xB,MAAM,IAAK1xB,IAAE,GAAG,CAAV,CAA7B;AACA,cAAM7rC,CAAC,GAAK4rC,IAAE,GAAG,CAAP,GAAa2xB,MAAM,GAAG1xB,IAAhC,CALqC,CAOrC;;AAEAspB,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OA1E2E,CA4E5E;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDsY,uBAAmB,CAAC/hF,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAhC;AACA+hF,uBAAmB,CAAC/hF,SAApB,CAA8B0M,WAA9B,GAA4Cq1E,mBAA5C;AAEA,QAAIK,iBAAiB,GAAG,gFAAxB;AAEA,QAAIC,sBAAsB,GAAG,4DAA7B;AAEA,QAAIC,kBAAkB,GAAG,wEAAzB;AAEA,QAAIC,cAAc,GAAG,0aAArB;AAEA,QAAIC,mBAAmB,GAAG,uFAA1B;AAEA,QAAIC,YAAY,GAAG,sCAAnB;AAEA,QAAIC,kBAAkB,GAAG,8GAAzB;AAEA,QAAIC,KAAK,GAAG,8pPAAZ;AAEA,QAAIC,qBAAqB,GAAG,g9BAA5B;AAEA,QAAIC,wBAAwB,GAAG,4nBAA/B;AAEA,QAAIC,6BAA6B,GAAG,2HAApC;AAEA,QAAIC,2BAA2B,GAAG,oEAAlC;AAEA,QAAIC,sBAAsB,GAAG,0EAA7B;AAEA,QAAIC,cAAc,GAAG,yDAArB;AAEA,QAAIC,mBAAmB,GAAG,kDAA1B;AAEA,QAAIC,iBAAiB,GAAG,kDAAxB;AAEA,QAAIC,YAAY,GAAG,qDAAnB;AAEA,QAAIhG,MAAM,GAAG,q0FAAb;AAEA,QAAIiG,2BAA2B,GAAG,ygHAAlC;AAEA,QAAIC,oBAAoB,GAAG,0jBAA3B;AAEA,QAAIC,2BAA2B,GAAG,iJAAlC;AAEA,QAAIC,sBAAsB,GAAG,kKAA7B;AAEA,QAAIC,oBAAoB,GAAG,4MAA3B;AAEA,QAAIC,yBAAyB,GAAG,kEAAhC;AAEA,QAAIC,kBAAkB,GAAG,qDAAzB;AAEA,QAAIC,uBAAuB,GAAG,4uFAA9B;AAEA,QAAIC,eAAe,GAAG,4iDAAtB;AAEA,QAAIC,2BAA2B,GAAG,wOAAlC;AAEA,QAAIC,oBAAoB,GAAG,wTAA3B;AAEA,QAAIC,kBAAkB,GAAG,8RAAzB;AAEA,QAAIC,aAAa,GAAG,2oBAApB;AAEA,QAAIC,UAAU,GAAG,sDAAjB;AAEA,QAAIC,eAAe,GAAG,mDAAtB;AAEA,QAAIC,YAAY,GAAG,uRAAnB;AAEA,QAAIC,iBAAiB,GAAG,yMAAxB;AAEA,QAAIC,yBAAyB,GAAG,gYAAhC;AAEA,QAAIC,iBAAiB,GAAG,2LAAxB;AAEA,QAAIC,sBAAsB,GAAG,gGAA7B;AAEA,QAAIC,qBAAqB,GAAG,uwFAA5B;AAEA,QAAIC,iBAAiB,GAAG,szIAAxB;AAEA,QAAIC,6BAA6B,GAAG,8tFAApC;AAEA,QAAIC,oBAAoB,GAAG,mEAA3B;AAEA,QAAIC,yBAAyB,GAAG,s9BAAhC;AAEA,QAAIC,qBAAqB,GAAG,qMAA5B;AAEA,QAAIC,0BAA0B,GAAG,oxCAAjC;AAEA,QAAIC,wBAAwB,GAAG,u0CAA/B;AAEA,QAAIC,6BAA6B,GAAG,ujLAApC;AAEA,QAAIC,qBAAqB,GAAG,42HAA5B;AAEA,QAAIC,oBAAoB,GAAG,43BAA3B;AAEA,QAAIC,mBAAmB,GAAG,0QAA1B;AAEA,QAAIC,oBAAoB,GAAG,kLAA3B;AAEA,QAAIC,yBAAyB,GAAG,wKAAhC;AAEA,QAAIC,uBAAuB,GAAG,qLAA9B;AAEA,QAAIC,kBAAkB,GAAG,8XAAzB;AAEA,QAAIC,YAAY,GAAG,mJAAnB;AAEA,QAAIC,iBAAiB,GAAG,kDAAxB;AAEA,QAAIC,qBAAqB,GAAG,iVAA5B;AAEA,QAAIC,0BAA0B,GAAG,sMAAjC;AAEA,QAAIC,qBAAqB,GAAG,sKAA5B;AAEA,QAAIC,0BAA0B,GAAG,oEAAjC;AAEA,QAAIC,kBAAkB,GAAG,sUAAzB;AAEA,QAAIC,uBAAuB,GAAG,yNAA9B;AAEA,QAAIC,kBAAkB,GAAG,mmBAAzB;AAEA,QAAIC,qBAAqB,GAAG,43BAA5B;AAEA,QAAIC,oBAAoB,GAAG,4pBAA3B;AAEA,QAAIC,uBAAuB,GAAG,o6BAA9B;AAEA,QAAIC,+BAA+B,GAAG,oEAAtC;AAEA,QAAIC,8BAA8B,GAAG,mWAArC;AAEA,QAAIC,uBAAuB,GAAG,kRAA9B;AAEA,QAAIC,OAAO,GAAG,wjDAAd;AAEA,QAAIC,4BAA4B,GAAG,2EAAnC;AAEA,QAAIC,cAAc,GAAG,mNAArB;AAEA,QAAIC,kBAAkB,GAAG,+EAAzB;AAEA,QAAIC,uBAAuB,GAAG,0UAA9B;AAEA,QAAIC,qBAAqB,GAAG,sKAA5B;AAEA,QAAIC,0BAA0B,GAAG,oEAAjC;AAEA,QAAIC,uBAAuB,GAAG,06RAA9B;AAEA,QAAIC,qBAAqB,GAAG,kxCAA5B;AAEA,QAAIC,gBAAgB,GAAG,izCAAvB;AAEA,QAAIC,wBAAwB,GAAG,i5CAA/B;AAEA,QAAIC,eAAe,GAAG,iOAAtB;AAEA,QAAIC,oBAAoB,GAAG,+gCAA3B;AAEA,QAAIC,eAAe,GAAG,8XAAtB;AAEA,QAAIC,iBAAiB,GAAG,qdAAxB;AAEA,QAAIC,oBAAoB,GAAG,yLAA3B;AAEA,QAAIC,yBAAyB,GAAG,kEAAhC;AAEA,QAAIC,oBAAoB,GAAG,4FAA3B;AAEA,QAAIC,yBAAyB,GAAG,iyCAAhC;AAEA,QAAIC,wBAAwB,GAAG,iGAA/B;AAEA,QAAIC,6BAA6B,GAAG,0EAApC;AAEA,QAAIC,gBAAgB,GAAG,wFAAvB;AAEA,QAAIC,cAAc,GAAG,uIAArB;AAEA,QAAIC,SAAS,GAAG,oEAAhB;AAEA,QAAIC,iBAAiB,GAAG,mFAAxB;AAEA,QAAIC,eAAe,GAAG,wIAAtB;AAEA,QAAIC,UAAU,GAAG,6GAAjB;AAEA,QAAIC,eAAe,GAAG,iRAAtB;AAEA,QAAIC,eAAe,GAAG,2NAAtB;AAEA,QAAIC,eAAe,GAAG,6JAAtB;AAEA,QAAIC,SAAS,GAAG,yVAAhB;AAEA,QAAIC,SAAS,GAAG,gOAAhB;AAEA,QAAIC,UAAU,GAAG,y1BAAjB;AAEA,QAAIC,UAAU,GAAG,uuBAAjB;AAEA,QAAIC,iBAAiB,GAAG,4rBAAxB;AAEA,QAAIC,iBAAiB,GAAG,itBAAxB;AAEA,QAAIC,aAAa,GAAG,yWAApB;AAEA,QAAIC,aAAa,GAAG,8LAApB;AAEA,QAAIC,eAAe,GAAG,kyBAAtB;AAEA,QAAIC,eAAe,GAAG,8hBAAtB;AAEA,QAAIC,cAAc,GAAG,+pDAArB;AAEA,QAAIC,cAAc,GAAG,o2BAArB;AAEA,QAAIC,gBAAgB,GAAG,40EAAvB;AAEA,QAAIC,gBAAgB,GAAG,4nCAAvB;AAEA,QAAIC,eAAe,GAAG,4gDAAtB;AAEA,QAAIC,eAAe,GAAG,49BAAtB;AAEA,QAAIC,aAAa,GAAG,wvDAApB;AAEA,QAAIC,aAAa,GAAG,wmCAApB;AAEA,QAAIC,cAAc,GAAG,iiEAArB;AAEA,QAAIC,cAAc,GAAG,oqCAArB;AAEA,QAAIC,iBAAiB,GAAG,4kGAAxB;AAEA,QAAIC,iBAAiB,GAAG,81CAAxB;AAEA,QAAIC,WAAW,GAAG,kuBAAlB;AAEA,QAAIC,WAAW,GAAG,kyCAAlB;AAEA,QAAIC,WAAW,GAAG,mvBAAlB;AAEA,QAAIC,WAAW,GAAG,orBAAlB;AAEA,QAAIC,WAAW,GAAG,kaAAlB;AAEA,QAAIC,WAAW,GAAG,oZAAlB;AAEA,QAAIC,WAAW,GAAG,ytBAAlB;AAEA,QAAIC,WAAW,GAAG,qnCAAlB;AAEA,QAAMC,WAAW,GAAG;AACnBhI,uBAAiB,EAAEA,iBADA;AAEnBC,4BAAsB,EAAEA,sBAFL;AAGnBC,wBAAkB,EAAEA,kBAHD;AAInBC,oBAAc,EAAEA,cAJG;AAKnBC,yBAAmB,EAAEA,mBALF;AAMnBC,kBAAY,EAAEA,YANK;AAOnBC,wBAAkB,EAAEA,kBAPD;AAQnBC,WAAK,EAAEA,KARY;AASnBC,2BAAqB,EAAEA,qBATJ;AAUnBC,8BAAwB,EAAEA,wBAVP;AAWnBC,mCAA6B,EAAEA,6BAXZ;AAYnBC,iCAA2B,EAAEA,2BAZV;AAanBC,4BAAsB,EAAEA,sBAbL;AAcnBC,oBAAc,EAAEA,cAdG;AAenBC,yBAAmB,EAAEA,mBAfF;AAgBnBC,uBAAiB,EAAEA,iBAhBA;AAiBnBC,kBAAY,EAAEA,YAjBK;AAkBnBhG,YAAM,EAAEA,MAlBW;AAmBnBiG,iCAA2B,EAAEA,2BAnBV;AAoBnBC,0BAAoB,EAAEA,oBApBH;AAqBnBC,iCAA2B,EAAEA,2BArBV;AAsBnBC,4BAAsB,EAAEA,sBAtBL;AAuBnBC,0BAAoB,EAAEA,oBAvBH;AAwBnBC,+BAAyB,EAAEA,yBAxBR;AAyBnBC,wBAAkB,EAAEA,kBAzBD;AA0BnBC,6BAAuB,EAAEA,uBA1BN;AA2BnBC,qBAAe,EAAEA,eA3BE;AA4BnBC,iCAA2B,EAAEA,2BA5BV;AA6BnBC,0BAAoB,EAAEA,oBA7BH;AA8BnBC,wBAAkB,EAAEA,kBA9BD;AA+BnBW,mCAA6B,EAAEA,6BA/BZ;AAgCnBV,mBAAa,EAAEA,aAhCI;AAiCnBC,gBAAU,EAAEA,UAjCO;AAkCnBC,qBAAe,EAAEA,eAlCE;AAmCnBC,kBAAY,EAAEA,YAnCK;AAoCnBC,uBAAiB,EAAEA,iBApCA;AAqCnBC,+BAAyB,EAAEA,yBArCR;AAsCnBC,uBAAiB,EAAEA,iBAtCA;AAuCnBC,4BAAsB,EAAEA,sBAvCL;AAwCnBC,2BAAqB,EAAEA,qBAxCJ;AAyCnBC,uBAAiB,EAAEA,iBAzCA;AA0CnBE,0BAAoB,EAAEA,oBA1CH;AA2CnBC,+BAAyB,EAAEA,yBA3CR;AA4CnBC,2BAAqB,EAAEA,qBA5CJ;AA6CnBC,gCAA0B,EAAEA,0BA7CT;AA8CnBC,8BAAwB,EAAEA,wBA9CP;AA+CnBC,mCAA6B,EAAEA,6BA/CZ;AAgDnBC,2BAAqB,EAAEA,qBAhDJ;AAiDnBC,0BAAoB,EAAEA,oBAjDH;AAkDnBC,yBAAmB,EAAEA,mBAlDF;AAmDnBC,0BAAoB,EAAEA,oBAnDH;AAoDnBC,+BAAyB,EAAEA,yBApDR;AAqDnBC,6BAAuB,EAAEA,uBArDN;AAsDnBC,wBAAkB,EAAEA,kBAtDD;AAuDnBC,kBAAY,EAAEA,YAvDK;AAwDnBC,uBAAiB,EAAEA,iBAxDA;AAyDnBC,2BAAqB,EAAEA,qBAzDJ;AA0DnBC,gCAA0B,EAAEA,0BA1DT;AA2DnBC,2BAAqB,EAAEA,qBA3DJ;AA4DnBC,gCAA0B,EAAEA,0BA5DT;AA6DnBC,wBAAkB,EAAEA,kBA7DD;AA8DnBC,6BAAuB,EAAEA,uBA9DN;AA+DnBC,wBAAkB,EAAEA,kBA/DD;AAgEnBC,2BAAqB,EAAEA,qBAhEJ;AAiEnBC,0BAAoB,EAAEA,oBAjEH;AAkEnBC,6BAAuB,EAAEA,uBAlEN;AAmEnBC,qCAA+B,EAAEA,+BAnEd;AAoEnBC,oCAA8B,EAAEA,8BApEb;AAqEnBC,6BAAuB,EAAEA,uBArEN;AAsEnBC,aAAO,EAAEA,OAtEU;AAuEnBC,kCAA4B,EAAEA,4BAvEX;AAwEnBC,oBAAc,EAAEA,cAxEG;AAyEnBC,wBAAkB,EAAEA,kBAzED;AA0EnBC,6BAAuB,EAAEA,uBA1EN;AA2EnBC,2BAAqB,EAAEA,qBA3EJ;AA4EnBC,gCAA0B,EAAEA,0BA5ET;AA6EnBC,6BAAuB,EAAEA,uBA7EN;AA8EnBC,2BAAqB,EAAEA,qBA9EJ;AA+EnBC,sBAAgB,EAAEA,gBA/EC;AAgFnBC,8BAAwB,EAAEA,wBAhFP;AAiFnBC,qBAAe,EAAEA,eAjFE;AAkFnBC,0BAAoB,EAAEA,oBAlFH;AAmFnBC,qBAAe,EAAEA,eAnFE;AAoFnBC,uBAAiB,EAAEA,iBApFA;AAqFnBC,0BAAoB,EAAEA,oBArFH;AAsFnBC,+BAAyB,EAAEA,yBAtFR;AAuFnBC,0BAAoB,EAAEA,oBAvFH;AAwFnBC,+BAAyB,EAAEA,yBAxFR;AAyFnBC,8BAAwB,EAAEA,wBAzFP;AA0FnBC,mCAA6B,EAAEA,6BA1FZ;AA2FnBC,sBAAgB,EAAEA,gBA3FC;AA4FnBC,oBAAc,EAAEA,cA5FG;AA6FnBC,eAAS,EAAEA,SA7FQ;AA8FnBC,uBAAiB,EAAEA,iBA9FA;AA+FnBC,qBAAe,EAAEA,eA/FE;AAgGnBC,gBAAU,EAAEA,UAhGO;AAiGnBC,qBAAe,EAAEA,eAjGE;AAmGnBC,qBAAe,EAAEA,eAnGE;AAoGnBC,qBAAe,EAAEA,eApGE;AAqGnBC,eAAS,EAAEA,SArGQ;AAsGnBC,eAAS,EAAEA,SAtGQ;AAuGnBC,gBAAU,EAAEA,UAvGO;AAwGnBC,gBAAU,EAAEA,UAxGO;AAyGnBC,uBAAiB,EAAEA,iBAzGA;AA0GnBC,uBAAiB,EAAEA,iBA1GA;AA2GnBC,mBAAa,EAAEA,aA3GI;AA4GnBC,mBAAa,EAAEA,aA5GI;AA6GnBC,qBAAe,EAAEA,eA7GE;AA8GnBC,qBAAe,EAAEA,eA9GE;AA+GnBC,oBAAc,EAAEA,cA/GG;AAgHnBC,oBAAc,EAAEA,cAhHG;AAiHnBC,sBAAgB,EAAEA,gBAjHC;AAkHnBC,sBAAgB,EAAEA,gBAlHC;AAmHnBC,qBAAe,EAAEA,eAnHE;AAoHnBC,qBAAe,EAAEA,eApHE;AAqHnBC,mBAAa,EAAEA,aArHI;AAsHnBC,mBAAa,EAAEA,aAtHI;AAuHnBC,oBAAc,EAAEA,cAvHG;AAwHnBC,oBAAc,EAAEA,cAxHG;AAyHnBC,uBAAiB,EAAEA,iBAzHA;AA0HnBC,uBAAiB,EAAEA,iBA1HA;AA2HnBC,iBAAW,EAAEA,WA3HM;AA4HnBC,iBAAW,EAAEA,WA5HM;AA6HnBC,iBAAW,EAAEA,WA7HM;AA8HnBC,iBAAW,EAAEA,WA9HM;AA+HnBC,iBAAW,EAAEA,WA/HM;AAgInBC,iBAAW,EAAEA,WAhIM;AAiInBC,iBAAW,EAAEA,WAjIM;AAkInBC,iBAAW,EAAEA;AAlIM,KAApB;AAqIA,QAAME,SAAS,GAAG;AAEjBC,WAAK,EAAE;AAEN7S,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACK,WAFY,EAGxBL,WAAW,CAACM,MAHY,EAIxBN,WAAW,CAACS,KAJY,EAKxBT,WAAW,CAACU,QALY,EAMxBV,WAAW,CAACrqB,GANY,CAAF,CAFjB;AAWNklB,oBAAY,EAAEoS,WAAW,CAACnB,cAXpB;AAYNhR,sBAAc,EAAEmS,WAAW,CAACpB;AAZtB,OAFU;AAkBjBuB,aAAO,EAAE;AAER9S,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACK,WAFY,EAGxBL,WAAW,CAACM,MAHY,EAIxBN,WAAW,CAACS,KAJY,EAKxBT,WAAW,CAACU,QALY,EAMxBV,WAAW,CAACW,WANY,EAOxBX,WAAW,CAACrqB,GAPY,EAQxBqqB,WAAW,CAACjF,MARY,EASxB;AACChU,kBAAQ,EAAE;AAAEtxE,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT;AADX,SATwB,CAAF,CAFf;AAgBRuZ,oBAAY,EAAEoS,WAAW,CAACjB,gBAhBlB;AAiBRlR,sBAAc,EAAEmS,WAAW,CAAClB;AAjBpB,OAlBQ;AAuCjBsB,WAAK,EAAE;AAEN/S,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACK,WAFY,EAGxBL,WAAW,CAACM,MAHY,EAIxBN,WAAW,CAACS,KAJY,EAKxBT,WAAW,CAACU,QALY,EAMxBV,WAAW,CAACW,WANY,EAOxBX,WAAW,CAACY,OAPY,EAQxBZ,WAAW,CAACa,SARY,EASxBb,WAAW,CAACc,eATY,EAUxBd,WAAW,CAACrqB,GAVY,EAWxBqqB,WAAW,CAACjF,MAXY,EAYxB;AACChU,kBAAQ,EAAE;AAAEtxE,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,WADX;AAEC2F,kBAAQ,EAAE;AAAExxE,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,WAFX;AAGC4F,mBAAS,EAAE;AAAEzxE,iBAAK,EAAE;AAAT;AAHZ,SAZwB,CAAF,CAFjB;AAqBNolF,oBAAY,EAAEoS,WAAW,CAACX,cArBpB;AAsBNxR,sBAAc,EAAEmS,WAAW,CAACZ;AAtBtB,OAvCU;AAiEjBiB,cAAQ,EAAE;AAEThT,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACM,MAFY,EAGxBN,WAAW,CAACS,KAHY,EAIxBT,WAAW,CAACU,QAJY,EAKxBV,WAAW,CAACW,WALY,EAMxBX,WAAW,CAACY,OANY,EAOxBZ,WAAW,CAACa,SAPY,EAQxBb,WAAW,CAACc,eARY,EASxBd,WAAW,CAACe,YATY,EAUxBf,WAAW,CAACgB,YAVY,EAWxBhB,WAAW,CAACrqB,GAXY,EAYxBqqB,WAAW,CAACjF,MAZY,EAaxB;AACChU,kBAAQ,EAAE;AAAEtxE,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,WADX;AAECsF,mBAAS,EAAE;AAAEnxE,iBAAK,EAAE;AAAT,WAFZ;AAGCoxE,mBAAS,EAAE;AAAEpxE,iBAAK,EAAE;AAAT,WAHZ;AAICqzE,yBAAe,EAAE;AAAErzE,iBAAK,EAAE;AAAT,WAJlB,CAI+B;;AAJ/B,SAbwB,CAAF,CAFd;AAuBTolF,oBAAY,EAAEoS,WAAW,CAACT,iBAvBjB;AAwBT1R,sBAAc,EAAEmS,WAAW,CAACV;AAxBnB,OAjEO;AA6FjBgB,UAAI,EAAE;AAELjT,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACS,KAFY,EAGxBT,WAAW,CAACU,QAHY,EAIxBV,WAAW,CAACW,WAJY,EAKxBX,WAAW,CAACY,OALY,EAMxBZ,WAAW,CAACa,SANY,EAOxBb,WAAW,CAACc,eAPY,EAQxBd,WAAW,CAACiB,WARY,EASxBjB,WAAW,CAACrqB,GATY,EAUxBqqB,WAAW,CAACjF,MAVY,EAWxB;AACChU,kBAAQ,EAAE;AAAEtxE,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT;AADX,SAXwB,CAAF,CAFlB;AAkBLuZ,oBAAY,EAAEoS,WAAW,CAACb,aAlBrB;AAmBLtR,sBAAc,EAAEmS,WAAW,CAACd;AAnBvB,OA7FW;AAoHjB1kB,YAAM,EAAE;AAEP6S,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACY,OAFY,EAGxBZ,WAAW,CAACa,SAHY,EAIxBb,WAAW,CAACc,eAJY,EAKxBd,WAAW,CAACrqB,GALY,EAMxB;AACC8R,gBAAM,EAAE;AAAEhyE,iBAAK,EAAE;AAAT;AADT,SANwB,CAAF,CAFhB;AAaPolF,oBAAY,EAAEoS,WAAW,CAACf,eAbnB;AAcPpR,sBAAc,EAAEmS,WAAW,CAAChB;AAdrB,OApHS;AAsIjBvyE,YAAM,EAAE;AAEP4gE,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACtmE,MADY,EAExBsmE,WAAW,CAACrqB,GAFY,CAAF,CAFhB;AAOPklB,oBAAY,EAAEoS,WAAW,CAACL,WAPnB;AAQP9R,sBAAc,EAAEmS,WAAW,CAACN;AARrB,OAtIS;AAkJjBa,YAAM,EAAE;AAEPlT,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACrqB,GAFY,EAGxB;AACCltD,eAAK,EAAE;AAAEhT,iBAAK,EAAE;AAAT,WADR;AAECyzE,kBAAQ,EAAE;AAAEzzE,iBAAK,EAAE;AAAT,WAFX;AAGCg4F,mBAAS,EAAE;AAAEh4F,iBAAK,EAAE;AAAT;AAHZ,SAHwB,CAAF,CAFhB;AAYPolF,oBAAY,EAAEoS,WAAW,CAACrB,eAZnB;AAaP9Q,sBAAc,EAAEmS,WAAW,CAACtB;AAbrB,OAlJS;AAmKjB5zD,WAAK,EAAE;AAENuiD,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACc,eAFY,CAAF,CAFjB;AAONjG,oBAAY,EAAEoS,WAAW,CAAC3B,UAPpB;AAQNxQ,sBAAc,EAAEmS,WAAW,CAAC5B;AARtB,OAnKU;AA+KjB3hC,YAAM,EAAE;AAEP4wB,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACY,OAFY,EAGxBZ,WAAW,CAACa,SAHY,EAIxBb,WAAW,CAACc,eAJY,EAKxB;AACCzc,iBAAO,EAAE;AAAE5uE,iBAAK,EAAE;AAAT;AADV,SALwB,CAAF,CAFhB;AAYPolF,oBAAY,EAAEoS,WAAW,CAACP,WAZnB;AAaP5R,sBAAc,EAAEmS,WAAW,CAACR;AAbrB,OA/KS;AAgMjB3M,YAAM,EAAE;AAEPxF,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACF,MADY,EAExBE,WAAW,CAACrqB,GAFY,CAAF,CAFhB;AAOPklB,oBAAY,EAAEoS,WAAW,CAACD,WAPnB;AAQPlS,sBAAc,EAAEmS,WAAW,CAACF;AARrB,OAhMS;AA4MjB7yE,gBAAU,EAAE;AAEXogE,gBAAQ,EAAE;AACT6F,qBAAW,EAAE;AAAE1qF,iBAAK,EAAE,IAAI8kD,OAAJ;AAAT,WADJ;AAETmzC,aAAG,EAAE;AAAEj4F,iBAAK,EAAE;AAAT;AAFI,SAFC;AAOXolF,oBAAY,EAAEoS,WAAW,CAAC/B,eAPf;AAQXpQ,sBAAc,EAAEmS,WAAW,CAAChC;AARjB,OA5MK;;AAuNjB;;;AAIA0C,UAAI,EAAE;AAELrT,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACM,MADY,EAExB;AACCjc,iBAAO,EAAE;AAAE5uE,iBAAK,EAAE;AAAT;AADV,SAFwB,CAAF,CAFlB;AASLolF,oBAAY,EAAEoS,WAAW,CAAC7B,SATrB;AAULtQ,sBAAc,EAAEmS,WAAW,CAAC9B;AAVvB,OA3NW;AAyOjByC,cAAQ,EAAE;AAETtT,gBAAQ,EAAE;AACT2D,mBAAS,EAAE;AAAExoF,iBAAK,EAAE;AAAT;AADF,SAFD;AAMTolF,oBAAY,EAAEoS,WAAW,CAACvB,aANjB;AAOT5Q,sBAAc,EAAEmS,WAAW,CAACxB;AAPnB,OAzOO;AAoPjBoC,kBAAY,EAAE;AAEbvT,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACC,MADY,EAExBD,WAAW,CAACc,eAFY,EAGxB;AACCgN,2BAAiB,EAAE;AAAEr4F,iBAAK,EAAE,IAAIgyD,OAAJ;AAAT,WADpB;AAECsmC,sBAAY,EAAE;AAAEt4F,iBAAK,EAAE;AAAT,WAFf;AAGCu4F,qBAAW,EAAE;AAAEv4F,iBAAK,EAAE;AAAT;AAHd,SAHwB,CAAF,CAFV;AAYbolF,oBAAY,EAAEoS,WAAW,CAACzB,iBAZb;AAab1Q,sBAAc,EAAEmS,WAAW,CAAC1B;AAbf,OApPG;AAqQjB0C,YAAM,EAAE;AAEP3T,gBAAQ,EAAED,aAAa,CAAE,CACxB2F,WAAW,CAACjF,MADY,EAExBiF,WAAW,CAACrqB,GAFY,EAGxB;AACCr6C,eAAK,EAAE;AAAE7lB,iBAAK,EAAE,IAAI6rE,KAAJ,CAAW,OAAX;AAAT,WADR;AAEC+C,iBAAO,EAAE;AAAE5uE,iBAAK,EAAE;AAAT;AAFV,SAHwB,CAAF,CAFhB;AAWPolF,oBAAY,EAAEoS,WAAW,CAACH,WAXnB;AAYPhS,sBAAc,EAAEmS,WAAW,CAACJ;AAZrB;AArQS,KAAlB;AAuRAK,aAAS,CAACgB,QAAV,GAAqB;AAEpB5T,cAAQ,EAAED,aAAa,CAAE,CACxB6S,SAAS,CAACI,QAAV,CAAmBhT,QADK,EAExB;AACCnT,iBAAS,EAAE;AAAE1xE,eAAK,EAAE;AAAT,SADZ;AAEC4xE,oBAAY,EAAE;AAAE5xE,eAAK,EAAE;AAAT,SAFf;AAGC2xE,0BAAkB,EAAE;AAAE3xE,eAAK,EAAE;AAAT,SAHrB;AAIC6xE,6BAAqB,EAAE;AAAE7xE,eAAK,EAAE;AAAT,SAJxB;AAKC+xE,4BAAoB,EAAE;AAAE/xE,eAAK,EAAE,IAAIkiD,OAAJ,CAAa,CAAb,EAAgB,CAAhB;AAAT,SALvB;AAMC4vB,0BAAkB,EAAE;AAAE9xE,eAAK,EAAE;AAAT,SANrB;AAOCqxE,aAAK,EAAE;AAAErxE,eAAK,EAAE,IAAI6rE,KAAJ,CAAW,QAAX;AAAT,SAPR;AAQC6sB,oBAAY,EAAE;AAAE14F,eAAK,EAAE;AAAT,SARf;AASC24F,uBAAe,EAAE;AAAE34F,eAAK,EAAE;AAAT;AATlB,OAFwB,CAAF,CAFH;AAiBpBolF,kBAAY,EAAEoS,WAAW,CAACT,iBAjBN;AAkBpB1R,oBAAc,EAAEmS,WAAW,CAACV;AAlBR,KAArB;;AAsBA,aAAS8B,eAAT,CAA0B70E,QAA1B,EAAoCtS,KAApC,EAA2ConF,OAA3C,EAAoDnoB,kBAApD,EAAyE;AAExE,UAAMooB,UAAU,GAAG,IAAIjtB,KAAJ,CAAW,QAAX,CAAnB;AACA,UAAIktB,UAAU,GAAG,CAAjB;AAEA,UAAIC,SAAJ;AACA,UAAIC,OAAJ;AAEA,UAAIC,iBAAiB,GAAG,IAAxB;AACA,UAAIC,wBAAwB,GAAG,CAA/B;AACA,UAAIC,kBAAkB,GAAG,IAAzB;;AAEA,eAAS7yE,MAAT,CAAiB8yE,UAAjB,EAA6Bx1E,KAA7B,EAAoCC,MAApC,EAA4Cw1E,UAA5C,EAAyD;AAExD,YAAI70E,UAAU,GAAGZ,KAAK,CAAC28C,OAAN,KAAkB,IAAlB,GAAyB38C,KAAK,CAACY,UAA/B,GAA4C,IAA7D,CAFwD,CAIxD;AACA;;AAEA,YAAMqjE,EAAE,GAAG/jE,QAAQ,CAAC+jE,EAApB;AACA,YAAMyR,OAAO,GAAGzR,EAAE,CAAC0R,UAAH,IAAiB1R,EAAE,CAAC0R,UAAH,EAAjC;;AAEA,YAAKD,OAAO,IAAIA,OAAO,CAACE,oBAAR,KAAiC,UAAjD,EAA8D;AAE7Dh1E,oBAAU,GAAG,IAAb;AAEA;;AAED,YAAKA,UAAU,KAAK,IAApB,EAA2B;AAE1Bi1E,kBAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,SAJD,MAIO,IAAKt0E,UAAU,IAAIA,UAAU,CAACynD,OAA9B,EAAwC;AAE9CwtB,kBAAQ,CAAEj1E,UAAF,EAAc,CAAd,CAAR;AACA60E,oBAAU,GAAG,IAAb;AAEA;;AAED,YAAKv1E,QAAQ,CAAC41E,SAAT,IAAsBL,UAA3B,EAAwC;AAEvCv1E,kBAAQ,CAACmkE,KAAT,CAAgBnkE,QAAQ,CAAC61E,cAAzB,EAAyC71E,QAAQ,CAAC81E,cAAlD,EAAkE91E,QAAQ,CAAC+1E,gBAA3E;AAEA;;AAED,YAAKr1E,UAAU,KAAMA,UAAU,CAACs1E,aAAX,IAA4Bt1E,UAAU,CAAC6iE,uBAAvC,IAAkE7iE,UAAU,CAACilC,OAAX,KAAuB/S,uBAA/F,CAAf,EAA0I;AAEzI,cAAKsiD,OAAO,KAAK30F,SAAjB,EAA6B;AAE5B20F,mBAAO,GAAG,IAAItb,IAAJ,CACT,IAAI8F,iBAAJ,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CADS,EAET,IAAIyB,cAAJ,CAAoB;AACnBjwF,kBAAI,EAAE,wBADa;AAEnB4vF,sBAAQ,EAAEH,aAAa,CAAE+S,SAAS,CAACS,IAAV,CAAerT,QAAjB,CAFJ;AAGnBO,0BAAY,EAAEqS,SAAS,CAACS,IAAV,CAAe9S,YAHV;AAInBC,4BAAc,EAAEoS,SAAS,CAACS,IAAV,CAAe7S,cAJZ;AAKnB3W,kBAAI,EAAE/6B,QALa;AAMnB07B,uBAAS,EAAE,KANQ;AAOnBC,wBAAU,EAAE,KAPO;AAQnBpP,iBAAG,EAAE;AARc,aAApB,CAFS,CAAV;AAcA+4B,mBAAO,CAACz5B,QAAR,CAAiB8Z,eAAjB,CAAkC,QAAlC;AACA2f,mBAAO,CAACz5B,QAAR,CAAiB8Z,eAAjB,CAAkC,IAAlC;;AAEA2f,mBAAO,CAAC18B,cAAR,GAAyB,UAAWx4C,QAAX,EAAqBF,KAArB,EAA4BC,MAA5B,EAAqC;AAE7D,mBAAKsvC,WAAL,CAAiBmC,YAAjB,CAA+BzxC,MAAM,CAACsvC,WAAtC;AAEA,aAJD,CAnB4B,CAyB5B;;;AACA37D,kBAAM,CAACk7C,cAAP,CAAuBsmD,OAAO,CAACvzE,QAA/B,EAAyC,QAAzC,EAAmD;AAElD3e,iBAAG,EAAE,eAAY;AAEhB,uBAAO,KAAK89E,QAAL,CAAc5R,MAAd,CAAqBjzE,KAA5B;AAEA;AANiD,aAAnD;AAUA64F,mBAAO,CAACrnF,MAAR,CAAgBynF,OAAhB;AAEA;;AAED,cAAM1rC,OAAO,GAAG9oC,UAAU,CAAC6iE,uBAAX,GAAqC7iE,UAAU,CAAC8oC,OAAhD,GAA0D9oC,UAA1E;AAEAw0E,iBAAO,CAACvzE,QAAR,CAAiBm/D,QAAjB,CAA0B5R,MAA1B,CAAiCjzE,KAAjC,GAAyCutD,OAAzC;AACA0rC,iBAAO,CAACvzE,QAAR,CAAiBm/D,QAAjB,CAA0BiG,UAA1B,CAAqC9qF,KAArC,GAA6CutD,OAAO,CAACwsC,aAAR,GAAwB,CAAE,CAA1B,GAA8B,CAA3E;;AAEA,cAAKb,iBAAiB,KAAKz0E,UAAtB,IACJ00E,wBAAwB,KAAK5rC,OAAO,CAACr/B,OADjC,IAEJkrE,kBAAkB,KAAKr1E,QAAQ,CAACi2E,WAFjC,EAE+C;AAE9Cf,mBAAO,CAACvzE,QAAR,CAAiBxN,WAAjB,GAA+B,IAA/B;AAEAghF,6BAAiB,GAAGz0E,UAApB;AACA00E,oCAAwB,GAAG5rC,OAAO,CAACr/B,OAAnC;AACAkrE,8BAAkB,GAAGr1E,QAAQ,CAACi2E,WAA9B;AAEA,WAzDwI,CA2DzI;;;AACAX,oBAAU,CAACY,OAAX,CAAoBhB,OAApB,EAA6BA,OAAO,CAACz5B,QAArC,EAA+Cy5B,OAAO,CAACvzE,QAAvD,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,IAAvE;AAEA,SA9DD,MA8DO,IAAKjB,UAAU,IAAIA,UAAU,CAAComC,SAA9B,EAA0C;AAEhD,cAAKmuC,SAAS,KAAK10F,SAAnB,EAA+B;AAE9B00F,qBAAS,GAAG,IAAIrb,IAAJ,CACX,IAAIwR,mBAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CADW,EAEX,IAAIjK,cAAJ,CAAoB;AACnBjwF,kBAAI,EAAE,oBADa;AAEnB4vF,sBAAQ,EAAEH,aAAa,CAAE+S,SAAS,CAAChzE,UAAV,CAAqBogE,QAAvB,CAFJ;AAGnBO,0BAAY,EAAEqS,SAAS,CAAChzE,UAAV,CAAqB2gE,YAHhB;AAInBC,4BAAc,EAAEoS,SAAS,CAAChzE,UAAV,CAAqB4gE,cAJlB;AAKnB3W,kBAAI,EAAEh7B,SALa;AAMnB27B,uBAAS,EAAE,KANQ;AAOnBC,wBAAU,EAAE,KAPO;AAQnBpP,iBAAG,EAAE;AARc,aAApB,CAFW,CAAZ;AAcA84B,qBAAS,CAACx5B,QAAV,CAAmB8Z,eAAnB,CAAoC,QAApC,EAhB8B,CAkB9B;;AACA7hF,kBAAM,CAACk7C,cAAP,CAAuBqmD,SAAS,CAACtzE,QAAjC,EAA2C,KAA3C,EAAkD;AAEjD3e,iBAAG,EAAE,eAAY;AAEhB,uBAAO,KAAK89E,QAAL,CAAcoT,GAAd,CAAkBj4F,KAAzB;AAEA;AANgD,aAAlD;AAUA64F,mBAAO,CAACrnF,MAAR,CAAgBwnF,SAAhB;AAEA;;AAEDA,mBAAS,CAACtzE,QAAV,CAAmBm/D,QAAnB,CAA4BoT,GAA5B,CAAgCj4F,KAAhC,GAAwCykB,UAAxC;;AAEA,cAAKA,UAAU,CAAC8lC,gBAAX,KAAgC,IAArC,EAA4C;AAE3C9lC,sBAAU,CAACqmC,YAAX;AAEA;;AAEDkuC,mBAAS,CAACtzE,QAAV,CAAmBm/D,QAAnB,CAA4B6F,WAA5B,CAAwC1qF,KAAxC,CAA8CoR,IAA9C,CAAoDqT,UAAU,CAAC9N,MAA/D;;AAEA,cAAKuiF,iBAAiB,KAAKz0E,UAAtB,IACJ00E,wBAAwB,KAAK10E,UAAU,CAACyJ,OADpC,IAEJkrE,kBAAkB,KAAKr1E,QAAQ,CAACi2E,WAFjC,EAE+C;AAE9ChB,qBAAS,CAACtzE,QAAV,CAAmBxN,WAAnB,GAAiC,IAAjC;AAEAghF,6BAAiB,GAAGz0E,UAApB;AACA00E,oCAAwB,GAAG10E,UAAU,CAACyJ,OAAtC;AACAkrE,8BAAkB,GAAGr1E,QAAQ,CAACi2E,WAA9B;AAEA,WAvD+C,CA0DhD;;;AACAX,oBAAU,CAACY,OAAX,CAAoBjB,SAApB,EAA+BA,SAAS,CAACx5B,QAAzC,EAAmDw5B,SAAS,CAACtzE,QAA7D,EAAuE,CAAvE,EAA0E,CAA1E,EAA6E,IAA7E;AAEA;AAED;;AAED,eAASg0E,QAAT,CAAmB7zE,KAAnB,EAA0Bq+B,KAA1B,EAAkC;AAEjCzyC,aAAK,CAAC68E,OAAN,CAAczoE,KAAd,CAAoB6zE,QAApB,CAA8B7zE,KAAK,CAACc,CAApC,EAAuCd,KAAK,CAACiF,CAA7C,EAAgDjF,KAAK,CAACnwB,CAAtD,EAAyDwuD,KAAzD,EAAgEwsB,kBAAhE;AAEA;;AAED,aAAO;AAENwpB,qBAAa,EAAE,yBAAY;AAE1B,iBAAOpB,UAAP;AAEA,SANK;AAONqB,qBAAa,EAAE,uBAAWt0E,KAAX,EAAkBq+B,KAAlB,EAA0B;AAExC40C,oBAAU,CAACvlF,GAAX,CAAgBsS,KAAhB;AACAkzE,oBAAU,GAAG70C,KAAK,KAAK5/C,SAAV,GAAsB4/C,KAAtB,GAA8B,CAA3C;AACAw1C,kBAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,SAbK;AAcNqB,qBAAa,EAAE,yBAAY;AAE1B,iBAAOrB,UAAP;AAEA,SAlBK;AAmBNsB,qBAAa,EAAE,uBAAWn2C,KAAX,EAAmB;AAEjC60C,oBAAU,GAAG70C,KAAb;AACAw1C,kBAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,SAxBK;AAyBNxyE,cAAM,EAAEA;AAzBF,OAAP;AA6BA;;AAED,aAAS+zE,kBAAT,CAA6BnM,EAA7B,EAAiC3I,UAAjC,EAA6Cx1C,UAA7C,EAAyDo+C,YAAzD,EAAwE;AAEvE,UAAMmM,mBAAmB,GAAGpM,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAA5B;AAEA,UAAMy3B,SAAS,GAAGpM,YAAY,CAACC,QAAb,GAAwB,IAAxB,GAA+B7I,UAAU,CAACz+E,GAAX,CAAgB,yBAAhB,CAAjD;AACA,UAAM0zF,YAAY,GAAGrM,YAAY,CAACC,QAAb,IAAyBmM,SAAS,KAAK,IAA5D;AAEA,UAAME,aAAa,GAAG,EAAtB;AAEA,UAAMC,YAAY,GAAGC,kBAAkB,CAAE,IAAF,CAAvC;AACA,UAAIC,YAAY,GAAGF,YAAnB;;AAEA,eAASG,KAAT,CAAgBl2F,MAAhB,EAAwB8gB,QAAxB,EAAkCq1E,OAAlC,EAA2Cv7B,QAA3C,EAAqDxiD,KAArD,EAA6D;AAE5D,YAAIg+E,aAAa,GAAG,KAApB;;AAEA,YAAKP,YAAL,EAAoB;AAEnB,cAAMhpF,KAAK,GAAGwpF,eAAe,CAAEz7B,QAAF,EAAYu7B,OAAZ,EAAqBr1E,QAArB,CAA7B;;AAEA,cAAKm1E,YAAY,KAAKppF,KAAtB,EAA8B;AAE7BopF,wBAAY,GAAGppF,KAAf;AACAypF,iCAAqB,CAAEL,YAAY,CAACj2F,MAAf,CAArB;AAEA;;AAEDo2F,uBAAa,GAAG9iF,WAAW,CAAEsnD,QAAF,CAA3B;AAEA,cAAKw7B,aAAL,EAAqBG,SAAS,CAAE37B,QAAF,CAAT;AAErB,SAfD,MAeO;AAEN,cAAMmU,SAAS,GAAKjuD,QAAQ,CAACiuD,SAAT,KAAuB,IAA3C;;AAEA,cAAKknB,YAAY,CAACr7B,QAAb,KAA0BA,QAAQ,CAAC1rE,EAAnC,IACJ+mG,YAAY,CAACE,OAAb,KAAyBA,OAAO,CAACjnG,EAD7B,IAEJ+mG,YAAY,CAAClnB,SAAb,KAA2BA,SAF5B,EAEwC;AAEvCknB,wBAAY,CAACr7B,QAAb,GAAwBA,QAAQ,CAAC1rE,EAAjC;AACA+mG,wBAAY,CAACE,OAAb,GAAuBA,OAAO,CAACjnG,EAA/B;AACA+mG,wBAAY,CAAClnB,SAAb,GAAyBA,SAAzB;AAEAqnB,yBAAa,GAAG,IAAhB;AAEA;AAED;;AAED,YAAKp2F,MAAM,CAACo6D,eAAP,KAA2B,IAAhC,EAAuC;AAEtCg8B,uBAAa,GAAG,IAAhB;AAEA;;AAED,YAAKh+E,KAAK,KAAK,IAAf,EAAsB;AAErBgzB,oBAAU,CAACx+B,MAAX,CAAmBwL,KAAnB,EAA0B,KAA1B;AAEA;;AAED,YAAKg+E,aAAL,EAAqB;AAEpBI,+BAAqB,CAAEx2F,MAAF,EAAU8gB,QAAV,EAAoBq1E,OAApB,EAA6Bv7B,QAA7B,CAArB;;AAEA,cAAKxiD,KAAK,KAAK,IAAf,EAAsB;AAErBmxE,cAAE,CAACO,UAAH,CAAe,KAAf,EAAsB1+C,UAAU,CAACjpC,GAAX,CAAgBiW,KAAhB,EAAwBiX,MAA9C;AAEA;AAED;AAED;;AAED,eAASonE,uBAAT,GAAmC;AAElC,YAAKjN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAACmN,iBAAH,EAAP;AAE7B,eAAOd,SAAS,CAACe,oBAAV,EAAP;AAEA;;AAED,eAASL,qBAAT,CAAgCM,GAAhC,EAAsC;AAErC,YAAKpN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAACsN,eAAH,CAAoBD,GAApB,CAAP;AAE7B,eAAOhB,SAAS,CAACkB,kBAAV,CAA8BF,GAA9B,CAAP;AAEA;;AAED,eAASG,uBAAT,CAAkCH,GAAlC,EAAwC;AAEvC,YAAKpN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAACyN,iBAAH,CAAsBJ,GAAtB,CAAP;AAE7B,eAAOhB,SAAS,CAACqB,oBAAV,CAAgCL,GAAhC,CAAP;AAEA;;AAED,eAASP,eAAT,CAA0Bz7B,QAA1B,EAAoCu7B,OAApC,EAA6Cr1E,QAA7C,EAAwD;AAEvD,YAAMiuD,SAAS,GAAKjuD,QAAQ,CAACiuD,SAAT,KAAuB,IAA3C;AAEA,YAAImoB,UAAU,GAAGpB,aAAa,CAAEl7B,QAAQ,CAAC1rE,EAAX,CAA9B;;AAEA,YAAKgoG,UAAU,KAAKx3F,SAApB,EAAgC;AAE/Bw3F,oBAAU,GAAG,EAAb;AACApB,uBAAa,CAAEl7B,QAAQ,CAAC1rE,EAAX,CAAb,GAA+BgoG,UAA/B;AAEA;;AAED,YAAIC,QAAQ,GAAGD,UAAU,CAAEf,OAAO,CAACjnG,EAAV,CAAzB;;AAEA,YAAKioG,QAAQ,KAAKz3F,SAAlB,EAA8B;AAE7By3F,kBAAQ,GAAG,EAAX;AACAD,oBAAU,CAAEf,OAAO,CAACjnG,EAAV,CAAV,GAA2BioG,QAA3B;AAEA;;AAED,YAAItqF,KAAK,GAAGsqF,QAAQ,CAAEpoB,SAAF,CAApB;;AAEA,YAAKliE,KAAK,KAAKnN,SAAf,EAA2B;AAE1BmN,eAAK,GAAGmpF,kBAAkB,CAAES,uBAAuB,EAAzB,CAA1B;AACAU,kBAAQ,CAAEpoB,SAAF,CAAR,GAAwBliE,KAAxB;AAEA;;AAED,eAAOA,KAAP;AAEA;;AAED,eAASmpF,kBAAT,CAA6BY,GAA7B,EAAmC;AAElC,YAAMQ,aAAa,GAAG,EAAtB;AACA,YAAMC,iBAAiB,GAAG,EAA1B;AACA,YAAMC,iBAAiB,GAAG,EAA1B;;AAEA,aAAM,IAAIhmG,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAGqkG,mBAArB,EAA0CrkG,IAAC,EAA3C,EAAiD;AAEhD8lG,uBAAa,CAAE9lG,IAAF,CAAb,GAAqB,CAArB;AACA+lG,2BAAiB,CAAE/lG,IAAF,CAAjB,GAAyB,CAAzB;AACAgmG,2BAAiB,CAAEhmG,IAAF,CAAjB,GAAyB,CAAzB;AAEA;;AAED,eAAO;AAEN;AACAspE,kBAAQ,EAAE,IAHJ;AAINu7B,iBAAO,EAAE,IAJH;AAKNpnB,mBAAS,EAAE,KALL;AAONqoB,uBAAa,EAAEA,aAPT;AAQNC,2BAAiB,EAAEA,iBARb;AASNC,2BAAiB,EAAEA,iBATb;AAUNt3F,gBAAM,EAAE42F,GAVF;AAWNxrD,oBAAU,EAAE;AAXN,SAAP;AAeA;;AAED,eAAS93B,WAAT,CAAsBsnD,QAAtB,EAAiC;AAEhC,YAAM28B,gBAAgB,GAAGtB,YAAY,CAAC7qD,UAAtC;AACA,YAAMosD,kBAAkB,GAAG58B,QAAQ,CAACxvB,UAApC;AAEA,YAAKv4C,MAAM,CAAC9D,IAAP,CAAawoG,gBAAb,EAAgC5mG,MAAhC,KAA2CkC,MAAM,CAAC9D,IAAP,CAAayoG,kBAAb,EAAkC7mG,MAAlF,EAA2F,OAAO,IAAP;;AAE3F,aAAM,IAAMuqE,GAAZ,IAAmBs8B,kBAAnB,EAAwC;AAEvC,cAAMC,eAAe,GAAGF,gBAAgB,CAAEr8B,GAAF,CAAxC;AACA,cAAMw8B,iBAAiB,GAAGF,kBAAkB,CAAEt8B,GAAF,CAA5C;AAEA,cAAKu8B,eAAe,CAAC33C,SAAhB,KAA8B43C,iBAAnC,EAAuD,OAAO,IAAP;AAEvD,cAAKD,eAAe,CAACtnG,IAAhB,KAAyBunG,iBAAiB,CAACvnG,IAAhD,EAAuD,OAAO,IAAP;AAEvD;;AAED,eAAO,KAAP;AAEA;;AAED,eAASomG,SAAT,CAAoB37B,QAApB,EAA+B;AAE9B,YAAMI,KAAK,GAAG,EAAd;AACA,YAAM5vB,UAAU,GAAGwvB,QAAQ,CAACxvB,UAA5B;;AAEA,aAAM,IAAM8vB,GAAZ,IAAmB9vB,UAAnB,EAAgC;AAE/B,cAAM0U,SAAS,GAAG1U,UAAU,CAAE8vB,GAAF,CAA5B;AAEA,cAAM/qE,IAAI,GAAG,EAAb;AACAA,cAAI,CAAC2vD,SAAL,GAAiBA,SAAjB;;AAEA,cAAKA,SAAS,CAAC3vD,IAAf,EAAsB;AAErBA,gBAAI,CAACA,IAAL,GAAY2vD,SAAS,CAAC3vD,IAAtB;AAEA;;AAED6qE,eAAK,CAAEE,GAAF,CAAL,GAAe/qE,IAAf;AAEA;;AAED8lG,oBAAY,CAAC7qD,UAAb,GAA0B4vB,KAA1B;AAEA;;AAED,eAAS28B,cAAT,GAA0B;AAEzB,YAAMP,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;;AAEA,aAAM,IAAI9lG,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGi6B,aAAa,CAACzmG,MAApC,EAA4CW,KAAC,GAAG6rE,EAAhD,EAAoD7rE,KAAC,EAArD,EAA2D;AAE1D8lG,uBAAa,CAAE9lG,KAAF,CAAb,GAAqB,CAArB;AAEA;AAED;;AAED,eAASsmG,eAAT,CAA0B93C,SAA1B,EAAsC;AAErC+3C,iCAAyB,CAAE/3C,SAAF,EAAa,CAAb,CAAzB;AAEA;;AAED,eAAS+3C,yBAAT,CAAoC/3C,SAApC,EAA+Cg4C,gBAA/C,EAAkE;AAEjE,YAAMV,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;AACA,YAAMC,iBAAiB,GAAGpB,YAAY,CAACoB,iBAAvC;AACA,YAAMC,iBAAiB,GAAGrB,YAAY,CAACqB,iBAAvC;AAEAF,qBAAa,CAAEt3C,SAAF,CAAb,GAA6B,CAA7B;;AAEA,YAAKu3C,iBAAiB,CAAEv3C,SAAF,CAAjB,KAAmC,CAAxC,EAA4C;AAE3CypC,YAAE,CAACwO,uBAAH,CAA4Bj4C,SAA5B;AACAu3C,2BAAiB,CAAEv3C,SAAF,CAAjB,GAAiC,CAAjC;AAEA;;AAED,YAAKw3C,iBAAiB,CAAEx3C,SAAF,CAAjB,KAAmCg4C,gBAAxC,EAA2D;AAE1D,cAAMlC,UAAS,GAAGpM,YAAY,CAACC,QAAb,GAAwBF,EAAxB,GAA6B3I,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,CAA/C;;AAEAyzF,oBAAS,CAAEpM,YAAY,CAACC,QAAb,GAAwB,qBAAxB,GAAgD,0BAAlD,CAAT,CAAyF3pC,SAAzF,EAAoGg4C,gBAApG;;AACAR,2BAAiB,CAAEx3C,SAAF,CAAjB,GAAiCg4C,gBAAjC;AAEA;AAED;;AAED,eAASE,uBAAT,GAAmC;AAElC,YAAMZ,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;AACA,YAAMC,iBAAiB,GAAGpB,YAAY,CAACoB,iBAAvC;;AAEA,aAAM,IAAI/lG,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGk6B,iBAAiB,CAAC1mG,MAAxC,EAAgDW,KAAC,GAAG6rE,EAApD,EAAwD7rE,KAAC,EAAzD,EAA+D;AAE9D,cAAK+lG,iBAAiB,CAAE/lG,KAAF,CAAjB,KAA2B8lG,aAAa,CAAE9lG,KAAF,CAA7C,EAAqD;AAEpDi4F,cAAE,CAAC0O,wBAAH,CAA6B3mG,KAA7B;AACA+lG,6BAAiB,CAAE/lG,KAAF,CAAjB,GAAyB,CAAzB;AAEA;AAED;AAED;;AAED,eAAS4mG,mBAAT,CAA8B9/E,KAA9B,EAAqChR,IAArC,EAA2CpR,IAA3C,EAAiDqzE,UAAjD,EAA6D8uB,MAA7D,EAAqEnrF,MAArE,EAA8E;AAE7E,YAAKw8E,YAAY,CAACC,QAAb,KAA0B,IAA1B,KAAoCzzF,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,IAA9D,CAAL,EAA4E;AAE3EuzF,YAAE,CAAC6O,oBAAH,CAAyBhgF,KAAzB,EAAgChR,IAAhC,EAAsCpR,IAAtC,EAA4CmiG,MAA5C,EAAoDnrF,MAApD;AAEA,SAJD,MAIO;AAENu8E,YAAE,CAAC2O,mBAAH,CAAwB9/E,KAAxB,EAA+BhR,IAA/B,EAAqCpR,IAArC,EAA2CqzE,UAA3C,EAAuD8uB,MAAvD,EAA+DnrF,MAA/D;AAEA;AAED;;AAED,eAASwpF,qBAAT,CAAgCx2F,MAAhC,EAAwC8gB,QAAxC,EAAkDq1E,OAAlD,EAA2Dv7B,QAA3D,EAAsE;AAErE,YAAK4uB,YAAY,CAACC,QAAb,KAA0B,KAA1B,KAAqCzpF,MAAM,CAACo6D,eAAP,IAA0BQ,QAAQ,CAACy9B,yBAAxE,CAAL,EAA2G;AAE1G,cAAKzX,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,MAA+C,IAApD,EAA2D;AAE3D;;AAEDw1F,sBAAc;AAEd,YAAMH,kBAAkB,GAAG58B,QAAQ,CAACxvB,UAApC;AAEA,YAAMktD,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;AAEA,YAAMC,8BAA8B,GAAG13E,QAAQ,CAACmgE,sBAAhD;;AAEA,aAAM,IAAM5wF,IAAZ,IAAoBioG,iBAApB,EAAwC;AAEvC,cAAMG,gBAAgB,GAAGH,iBAAiB,CAAEjoG,IAAF,CAA1C;;AAEA,cAAKooG,gBAAgB,IAAI,CAAzB,EAA6B;AAE5B,gBAAMf,iBAAiB,GAAGF,kBAAkB,CAAEnnG,IAAF,CAA5C;;AAEA,gBAAKqnG,iBAAiB,KAAKh4F,SAA3B,EAAuC;AAEtC,kBAAM2pE,UAAU,GAAGquB,iBAAiB,CAACruB,UAArC;AACA,kBAAMjiE,IAAI,GAAGswF,iBAAiB,CAAC5nB,QAA/B;AAEA,kBAAMhwB,SAAS,GAAG1U,UAAU,CAACjpC,GAAX,CAAgBu1F,iBAAhB,CAAlB,CALsC,CAOtC;;AAEA,kBAAK53C,SAAS,KAAKpgD,SAAnB,EAA+B;AAE/B,kBAAM2vB,MAAM,GAAGywB,SAAS,CAACzwB,MAAzB;AACA,kBAAMr5B,IAAI,GAAG8pD,SAAS,CAAC9pD,IAAvB;AACA,kBAAMg0F,eAAe,GAAGlqC,SAAS,CAACkqC,eAAlC;;AAEA,kBAAK0N,iBAAiB,CAACtN,4BAAvB,EAAsD;AAErD,oBAAMj6F,IAAI,GAAGunG,iBAAiB,CAACvnG,IAA/B;AACA,oBAAMgoG,MAAM,GAAGhoG,IAAI,CAACgoG,MAApB;AACA,oBAAMnrF,MAAM,GAAG0qF,iBAAiB,CAAC1qF,MAAjC;;AAEA,oBAAK7c,IAAI,IAAIA,IAAI,CAACuoG,4BAAlB,EAAiD;AAEhDb,2CAAyB,CAAEY,gBAAF,EAAoBtoG,IAAI,CAAC2nG,gBAAzB,CAAzB;;AAEA,sBAAKl9B,QAAQ,CAAC+9B,iBAAT,KAA+Bj5F,SAApC,EAAgD;AAE/Ck7D,4BAAQ,CAAC+9B,iBAAT,GAA6BxoG,IAAI,CAAC2nG,gBAAL,GAAwB3nG,IAAI,CAACkqE,KAA1D;AAEA;AAED,iBAVD,MAUO;AAENu9B,iCAAe,CAAEa,gBAAF,CAAf;AAEA;;AAEDlP,kBAAE,CAACO,UAAH,CAAe,KAAf,EAAsBz6D,MAAtB;AACA6oE,mCAAmB,CAAEO,gBAAF,EAAoBrxF,IAApB,EAA0BpR,IAA1B,EAAgCqzE,UAAhC,EAA4C8uB,MAAM,GAAGnO,eAArD,EAAsEh9E,MAAM,GAAGg9E,eAA/E,CAAnB;AAEA,eAzBD,MAyBO;AAEN,oBAAK0N,iBAAiB,CAACkB,0BAAvB,EAAoD;AAEnDf,2CAAyB,CAAEY,gBAAF,EAAoBf,iBAAiB,CAACI,gBAAtC,CAAzB;;AAEA,sBAAKl9B,QAAQ,CAAC+9B,iBAAT,KAA+Bj5F,SAApC,EAAgD;AAE/Ck7D,4BAAQ,CAAC+9B,iBAAT,GAA6BjB,iBAAiB,CAACI,gBAAlB,GAAqCJ,iBAAiB,CAACr9B,KAApF;AAEA;AAED,iBAVD,MAUO;AAENu9B,iCAAe,CAAEa,gBAAF,CAAf;AAEA;;AAEDlP,kBAAE,CAACO,UAAH,CAAe,KAAf,EAAsBz6D,MAAtB;AACA6oE,mCAAmB,CAAEO,gBAAF,EAAoBrxF,IAApB,EAA0BpR,IAA1B,EAAgCqzE,UAAhC,EAA4C,CAA5C,EAA+C,CAA/C,CAAnB;AAEA;AAED,aA/DD,MA+DO,IAAKh5E,IAAI,KAAK,gBAAd,EAAiC;AAEvC,kBAAMyvD,WAAS,GAAG1U,UAAU,CAACjpC,GAAX,CAAgBnC,MAAM,CAACs6D,cAAvB,CAAlB,CAFuC,CAIvC;;;AAEA,kBAAKxa,WAAS,KAAKpgD,SAAnB,EAA+B;AAE/B,kBAAM2vB,OAAM,GAAGywB,WAAS,CAACzwB,MAAzB;AACA,kBAAMr5B,KAAI,GAAG8pD,WAAS,CAAC9pD,IAAvB;AAEA6hG,uCAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,uCAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,uCAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,uCAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AAEAlP,gBAAE,CAACO,UAAH,CAAe,KAAf,EAAsBz6D,OAAtB;AAEAk6D,gBAAE,CAAC2O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDziG,KAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,CAAlE;AACAuzF,gBAAE,CAAC2O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDziG,KAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AACAuzF,gBAAE,CAAC2O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDziG,KAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AACAuzF,gBAAE,CAAC2O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDziG,KAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AAEA,aAvBM,MAuBA,IAAKwiG,8BAA8B,KAAK94F,SAAxC,EAAoD;AAE1D,kBAAMtE,KAAK,GAAGo9F,8BAA8B,CAAEnoG,IAAF,CAA5C;;AAEA,kBAAK+K,KAAK,KAAKsE,SAAf,EAA2B;AAE1B,wBAAStE,KAAK,CAACzK,MAAf;AAEC,uBAAK,CAAL;AACC44F,sBAAE,CAACsP,eAAH,CAAoBJ,gBAApB,EAAsCr9F,KAAtC;AACA;;AAED,uBAAK,CAAL;AACCmuF,sBAAE,CAACuP,eAAH,CAAoBL,gBAApB,EAAsCr9F,KAAtC;AACA;;AAED,uBAAK,CAAL;AACCmuF,sBAAE,CAACwP,eAAH,CAAoBN,gBAApB,EAAsCr9F,KAAtC;AACA;;AAED;AACCmuF,sBAAE,CAACyP,eAAH,CAAoBP,gBAApB,EAAsCr9F,KAAtC;AAfF;AAmBA;AAED;AAED;AAED;;AAED48F,+BAAuB;AAEvB;;AAED,eAAS/oF,OAAT,GAAmB;AAElBxC,aAAK;;AAEL,aAAM,IAAMwsF,UAAZ,IAA0BnD,aAA1B,EAA0C;AAEzC,cAAMoB,UAAU,GAAGpB,aAAa,CAAEmD,UAAF,CAAhC;;AAEA,eAAM,IAAMC,SAAZ,IAAyBhC,UAAzB,EAAsC;AAErC,gBAAMC,QAAQ,GAAGD,UAAU,CAAEgC,SAAF,CAA3B;;AAEA,iBAAM,IAAMnqB,SAAZ,IAAyBooB,QAAzB,EAAoC;AAEnCJ,qCAAuB,CAAEI,QAAQ,CAAEpoB,SAAF,CAAR,CAAsB/uE,MAAxB,CAAvB;AAEA,qBAAOm3F,QAAQ,CAAEpoB,SAAF,CAAf;AAEA;;AAED,mBAAOmoB,UAAU,CAAEgC,SAAF,CAAjB;AAEA;;AAED,iBAAOpD,aAAa,CAAEmD,UAAF,CAApB;AAEA;AAED;;AAED,eAASE,uBAAT,CAAkCv+B,QAAlC,EAA6C;AAE5C,YAAKk7B,aAAa,CAAEl7B,QAAQ,CAAC1rE,EAAX,CAAb,KAAiCwQ,SAAtC,EAAkD;AAElD,YAAMw3F,UAAU,GAAGpB,aAAa,CAAEl7B,QAAQ,CAAC1rE,EAAX,CAAhC;;AAEA,aAAM,IAAMgqG,SAAZ,IAAyBhC,UAAzB,EAAsC;AAErC,cAAMC,QAAQ,GAAGD,UAAU,CAAEgC,SAAF,CAA3B;;AAEA,eAAM,IAAMnqB,SAAZ,IAAyBooB,QAAzB,EAAoC;AAEnCJ,mCAAuB,CAAEI,QAAQ,CAAEpoB,SAAF,CAAR,CAAsB/uE,MAAxB,CAAvB;AAEA,mBAAOm3F,QAAQ,CAAEpoB,SAAF,CAAf;AAEA;;AAED,iBAAOmoB,UAAU,CAAEgC,SAAF,CAAjB;AAEA;;AAED,eAAOpD,aAAa,CAAEl7B,QAAQ,CAAC1rE,EAAX,CAApB;AAEA;;AAED,eAASkqG,sBAAT,CAAiCjD,OAAjC,EAA2C;AAE1C,aAAM,IAAM8C,UAAZ,IAA0BnD,aAA1B,EAA0C;AAEzC,cAAMoB,UAAU,GAAGpB,aAAa,CAAEmD,UAAF,CAAhC;AAEA,cAAK/B,UAAU,CAAEf,OAAO,CAACjnG,EAAV,CAAV,KAA6BwQ,SAAlC,EAA8C;AAE9C,cAAMy3F,QAAQ,GAAGD,UAAU,CAAEf,OAAO,CAACjnG,EAAV,CAA3B;;AAEA,eAAM,IAAM6/E,SAAZ,IAAyBooB,QAAzB,EAAoC;AAEnCJ,mCAAuB,CAAEI,QAAQ,CAAEpoB,SAAF,CAAR,CAAsB/uE,MAAxB,CAAvB;AAEA,mBAAOm3F,QAAQ,CAAEpoB,SAAF,CAAf;AAEA;;AAED,iBAAOmoB,UAAU,CAAEf,OAAO,CAACjnG,EAAV,CAAjB;AAEA;AAED;;AAED,eAASud,KAAT,GAAiB;AAEhB4sF,yBAAiB;AAEjB,YAAKpD,YAAY,KAAKF,YAAtB,EAAqC;AAErCE,oBAAY,GAAGF,YAAf;AACAO,6BAAqB,CAAEL,YAAY,CAACj2F,MAAf,CAArB;AAEA,OA7gBsE,CA+gBvE;;;AAEA,eAASq5F,iBAAT,GAA6B;AAE5BtD,oBAAY,CAACn7B,QAAb,GAAwB,IAAxB;AACAm7B,oBAAY,CAACI,OAAb,GAAuB,IAAvB;AACAJ,oBAAY,CAAChnB,SAAb,GAAyB,KAAzB;AAEA;;AAED,aAAO;AAENmnB,aAAK,EAAEA,KAFD;AAGNzpF,aAAK,EAAEA,KAHD;AAIN4sF,yBAAiB,EAAEA,iBAJb;AAKNpqF,eAAO,EAAEA,OALH;AAMNkqF,+BAAuB,EAAEA,uBANnB;AAONC,8BAAsB,EAAEA,sBAPlB;AASNzB,sBAAc,EAAEA,cATV;AAUNC,uBAAe,EAAEA,eAVX;AAWNI,+BAAuB,EAAEA;AAXnB,OAAP;AAeA;;AAED,aAASsB,mBAAT,CAA8B/P,EAA9B,EAAkC3I,UAAlC,EAA8C2Y,IAA9C,EAAoD/P,YAApD,EAAmE;AAElE,UAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,UAAI1pD,IAAJ;;AAEA,eAASy5D,OAAT,CAAkBp+F,KAAlB,EAA0B;AAEzB2kC,YAAI,GAAG3kC,KAAP;AAEA;;AAED,eAASumB,MAAT,CAAiBoiD,KAAjB,EAAwB1J,KAAxB,EAAgC;AAE/BkvB,UAAE,CAACkQ,UAAH,CAAe15D,IAAf,EAAqBgkC,KAArB,EAA4B1J,KAA5B;AAEAk/B,YAAI,CAAC3sF,MAAL,CAAaytD,KAAb,EAAoBt6B,IAApB,EAA0B,CAA1B;AAEA;;AAED,eAAS25D,eAAT,CAA0B31B,KAA1B,EAAiC1J,KAAjC,EAAwCs/B,SAAxC,EAAoD;AAEnD,YAAKA,SAAS,KAAK,CAAnB,EAAuB;AAEvB,YAAI/D,SAAJ,EAAegE,UAAf;;AAEA,YAAKnQ,QAAL,EAAgB;AAEfmM,mBAAS,GAAGrM,EAAZ;AACAqQ,oBAAU,GAAG,qBAAb;AAEA,SALD,MAKO;AAENhE,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,CAAZ;AACAy3F,oBAAU,GAAG,0BAAb;;AAEA,cAAKhE,SAAS,KAAK,IAAnB,EAA0B;AAEzBnjG,mBAAO,CAACD,KAAR,CAAe,gIAAf;AACA;AAEA;AAED;;AAEDojG,iBAAS,CAAEgE,UAAF,CAAT,CAAyB75D,IAAzB,EAA+BgkC,KAA/B,EAAsC1J,KAAtC,EAA6Cs/B,SAA7C;AAEAJ,YAAI,CAAC3sF,MAAL,CAAaytD,KAAb,EAAoBt6B,IAApB,EAA0B45D,SAA1B;AAEA,OAjDiE,CAmDlE;;;AAEA,WAAKH,OAAL,GAAeA,OAAf;AACA,WAAK73E,MAAL,GAAcA,MAAd;AACA,WAAK+3E,eAAL,GAAuBA,eAAvB;AAEA;;AAED,aAASG,iBAAT,CAA4BtQ,EAA5B,EAAgC3I,UAAhC,EAA4C/lB,UAA5C,EAAyD;AAExD,UAAIi/B,aAAJ;;AAEA,eAASC,gBAAT,GAA4B;AAE3B,YAAKD,aAAa,KAAKp6F,SAAvB,EAAmC,OAAOo6F,aAAP;AAEnC,YAAMlE,SAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,gCAAhB,CAAlB;;AAEA,YAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzBkE,uBAAa,GAAGvQ,EAAE,CAACprB,YAAH,CAAiBy3B,SAAS,CAACoE,8BAA3B,CAAhB;AAEA,SAJD,MAIO;AAENF,uBAAa,GAAG,CAAhB;AAEA;;AAED,eAAOA,aAAP;AAEA;;AAED,eAASG,eAAT,CAA0BzuB,SAA1B,EAAsC;AAErC,YAAKA,SAAS,KAAK,OAAnB,EAA6B;AAE5B,cAAK+d,EAAE,CAAC2Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4C1uB,SAA5C,GAAwD,CAAxD,IACJ+d,EAAE,CAAC2Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4C1uB,SAA5C,GAAwD,CADzD,EAC6D;AAE5D,mBAAO,OAAP;AAEA;;AAEDA,mBAAS,GAAG,SAAZ;AAEA;;AAED,YAAKA,SAAS,KAAK,SAAnB,EAA+B;AAE9B,cAAK+d,EAAE,CAAC2Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4C1uB,SAA5C,GAAwD,CAAxD,IACJ+d,EAAE,CAAC2Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4C1uB,SAA5C,GAAwD,CADzD,EAC6D;AAE5D,mBAAO,SAAP;AAEA;AAED;;AAED,eAAO,MAAP;AAEA;AAED;;;AACA,UAAMie,QAAQ,GAAK,OAAO0Q,sBAAP,KAAkC,WAAlC,IAAiD5Q,EAAE,YAAY4Q,sBAAjE,IACd,OAAOC,6BAAP,KAAyC,WAAzC,IAAwD7Q,EAAE,YAAY6Q,6BADzE;AAEA;;AAEA,UAAI5uB,SAAS,GAAG3Q,UAAU,CAAC2Q,SAAX,KAAyB9rE,SAAzB,GAAqCm7D,UAAU,CAAC2Q,SAAhD,GAA4D,OAA5E;AACA,UAAM6uB,YAAY,GAAGJ,eAAe,CAAEzuB,SAAF,CAApC;;AAEA,UAAK6uB,YAAY,KAAK7uB,SAAtB,EAAkC;AAEjC/4E,eAAO,CAAC2W,IAAR,CAAc,sBAAd,EAAsCoiE,SAAtC,EAAiD,sBAAjD,EAAyE6uB,YAAzE,EAAuF,UAAvF;AACA7uB,iBAAS,GAAG6uB,YAAZ;AAEA;;AAED,UAAMC,sBAAsB,GAAGz/B,UAAU,CAACy/B,sBAAX,KAAsC,IAArE;AAEA,UAAMC,WAAW,GAAGhR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAApB;AACA,UAAMq8B,iBAAiB,GAAGjR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAA1B;AACA,UAAMs8B,cAAc,GAAGlR,EAAE,CAACprB,YAAH,CAAiB,IAAjB,CAAvB;AACA,UAAMu8B,cAAc,GAAGnR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAAvB;AAEA,UAAMw8B,aAAa,GAAGpR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAAtB;AACA,UAAMy8B,iBAAiB,GAAGrR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAA1B;AACA,UAAM08B,WAAW,GAAGtR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAApB;AACA,UAAM28B,mBAAmB,GAAGvR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAA5B;AAEA,UAAM48B,cAAc,GAAGP,iBAAiB,GAAG,CAA3C;AACA,UAAMQ,qBAAqB,GAAGvR,QAAQ,IAAI,CAAC,CAAE7I,UAAU,CAACz+E,GAAX,CAAgB,mBAAhB,CAA7C;AACA,UAAM84F,mBAAmB,GAAGF,cAAc,IAAIC,qBAA9C;AAEA,UAAME,UAAU,GAAGzR,QAAQ,GAAGF,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAAH,GAA8B,CAAzD;AAEA,aAAO;AAENsrB,gBAAQ,EAAEA,QAFJ;AAINsQ,wBAAgB,EAAEA,gBAJZ;AAKNE,uBAAe,EAAEA,eALX;AAONzuB,iBAAS,EAAEA,SAPL;AAQN8uB,8BAAsB,EAAEA,sBARlB;AAUNC,mBAAW,EAAEA,WAVP;AAWNC,yBAAiB,EAAEA,iBAXb;AAYNC,sBAAc,EAAEA,cAZV;AAaNC,sBAAc,EAAEA,cAbV;AAeNC,qBAAa,EAAEA,aAfT;AAgBNC,yBAAiB,EAAEA,iBAhBb;AAiBNC,mBAAW,EAAEA,WAjBP;AAkBNC,2BAAmB,EAAEA,mBAlBf;AAoBNC,sBAAc,EAAEA,cApBV;AAqBNC,6BAAqB,EAAEA,qBArBjB;AAsBNC,2BAAmB,EAAEA,mBAtBf;AAwBNC,kBAAU,EAAEA;AAxBN,OAAP;AA4BA;;AAED,aAASC,aAAT,GAAyB;AAExB,UAAM5uF,KAAK,GAAG,IAAd;AAEA,UAAI6uF,WAAW,GAAG,IAAlB;AAAA,UACCC,eAAe,GAAG,CADnB;AAAA,UAECC,oBAAoB,GAAG,KAFxB;AAAA,UAGCC,gBAAgB,GAAG,KAHpB;AAKA,UAAM98B,KAAK,GAAG,IAAI4E,KAAJ,EAAd;AAAA,UACCm4B,gBAAgB,GAAG,IAAIt7C,OAAJ,EADpB;AAAA,UAGCmhC,OAAO,GAAG;AAAEjmF,aAAK,EAAE,IAAT;AAAekY,mBAAW,EAAE;AAA5B,OAHX;AAKA,WAAK+tE,OAAL,GAAeA,OAAf;AACA,WAAKoa,SAAL,GAAiB,CAAjB;AACA,WAAKC,eAAL,GAAuB,CAAvB;;AAEA,WAAKC,IAAL,GAAY,UAAWvX,MAAX,EAAmBwX,mBAAnB,EAAwC18E,MAAxC,EAAiD;AAE5D,YAAM7V,OAAO,GACZ+6E,MAAM,CAACzzF,MAAP,KAAkB,CAAlB,IACAirG,mBADA,IAEA;AACA;AACAP,uBAAe,KAAK,CAJpB,IAKAC,oBAND;AAQAA,4BAAoB,GAAGM,mBAAvB;AAEAR,mBAAW,GAAGS,aAAa,CAAEzX,MAAF,EAAUllE,MAAV,EAAkB,CAAlB,CAA3B;AACAm8E,uBAAe,GAAGjX,MAAM,CAACzzF,MAAzB;AAEA,eAAO0Y,OAAP;AAEA,OAjBD;;AAmBA,WAAKyyF,YAAL,GAAoB,YAAY;AAE/BP,wBAAgB,GAAG,IAAnB;AACAM,qBAAa,CAAE,IAAF,CAAb;AAEA,OALD;;AAOA,WAAKE,UAAL,GAAkB,YAAY;AAE7BR,wBAAgB,GAAG,KAAnB;AACAS,wBAAgB;AAEhB,OALD;;AAOA,WAAKC,QAAL,GAAgB,UAAW7X,MAAX,EAAmBhZ,gBAAnB,EAAqCC,WAArC,EAAkDnsD,MAAlD,EAA0D87C,KAA1D,EAAiEkhC,SAAjE,EAA6E;AAE5F,YAAK,CAAEZ,oBAAF,IAA0BlX,MAAM,KAAK,IAArC,IAA6CA,MAAM,CAACzzF,MAAP,KAAkB,CAA/D,IAAoE4qG,gBAAgB,IAAI,CAAElwB,WAA/F,EAA6G;AAE5G;AAEA,cAAKkwB,gBAAL,EAAwB;AAEvB;AAEAM,yBAAa,CAAE,IAAF,CAAb;AAEA,WAND,MAMO;AAENG,4BAAgB;AAEhB;AAED,SAhBD,MAgBO;AAEN,cAAMG,OAAO,GAAGZ,gBAAgB,GAAG,CAAH,GAAOF,eAAvC;AAAA,cACCe,OAAO,GAAGD,OAAO,GAAG,CADrB;AAGA,cAAIE,QAAQ,GAAGrhC,KAAK,CAACshC,aAAN,IAAuB,IAAtC;AAEAjb,iBAAO,CAACjmF,KAAR,GAAgBihG,QAAhB,CAPM,CAOoB;;AAE1BA,kBAAQ,GAAGR,aAAa,CAAEzX,MAAF,EAAUllE,MAAV,EAAkBk9E,OAAlB,EAA2BF,SAA3B,CAAxB;;AAEA,eAAM,IAAI5qG,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK8qG,OAAvB,EAAgC,EAAG9qG,KAAnC,EAAuC;AAEtC+qG,oBAAQ,CAAE/qG,KAAF,CAAR,GAAgB8pG,WAAW,CAAE9pG,KAAF,CAA3B;AAEA;;AAED0pE,eAAK,CAACshC,aAAN,GAAsBD,QAAtB;AACA,eAAKX,eAAL,GAAuBtwB,gBAAgB,GAAG,KAAKqwB,SAAR,GAAoB,CAA3D;AACA,eAAKA,SAAL,IAAkBU,OAAlB;AAEA;AAGD,OA1CD;;AA4CA,eAASH,gBAAT,GAA4B;AAE3B,YAAK3a,OAAO,CAACjmF,KAAR,KAAkBggG,WAAvB,EAAqC;AAEpC/Z,iBAAO,CAACjmF,KAAR,GAAgBggG,WAAhB;AACA/Z,iBAAO,CAAC/tE,WAAR,GAAsB+nF,eAAe,GAAG,CAAxC;AAEA;;AAED9uF,aAAK,CAACkvF,SAAN,GAAkBJ,eAAlB;AACA9uF,aAAK,CAACmvF,eAAN,GAAwB,CAAxB;AAEA;;AAED,eAASG,aAAT,CAAwBzX,MAAxB,EAAgCllE,MAAhC,EAAwC4qC,SAAxC,EAAmDyyC,aAAnD,EAAmE;AAElE,YAAIC,OAAO,GAAGpY,MAAM,KAAK,IAAX,GAAkBA,MAAM,CAACzzF,MAAzB,GAAkC,CAAhD;AAAA,YACC0rG,QAAQ,GAAG,IADZ;;AAGA,YAAKG,OAAO,KAAK,CAAjB,EAAqB;AAEpBH,kBAAQ,GAAGhb,OAAO,CAACjmF,KAAnB;;AAEA,cAAKmhG,aAAa,KAAK,IAAlB,IAA0BF,QAAQ,KAAK,IAA5C,EAAmD;AAElD,gBAAMI,QAAQ,GAAG3yC,SAAS,GAAG0yC,OAAO,GAAG,CAAvC;AAAA,gBACCE,UAAU,GAAGx9E,MAAM,CAACkvC,kBADrB;AAGAotC,4BAAgB,CAACl4C,eAAjB,CAAkCo5C,UAAlC;;AAEA,gBAAKL,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,CAAC1rG,MAAT,GAAkB8rG,QAA5C,EAAuD;AAEtDJ,sBAAQ,GAAG,IAAIzqB,YAAJ,CAAkB6qB,QAAlB,CAAX;AAEA;;AAED,iBAAM,IAAInrG,KAAC,GAAG,CAAR,EAAWqrG,EAAE,GAAG7yC,SAAtB,EAAiCx4D,KAAC,KAAKkrG,OAAvC,EAAgD,EAAGlrG,KAAH,EAAMqrG,EAAE,IAAI,CAA5D,EAAgE;AAE/Dl+B,mBAAK,CAACjyD,IAAN,CAAY43E,MAAM,CAAE9yF,KAAF,CAAlB,EAA0B01D,YAA1B,CAAwC01C,UAAxC,EAAoDlB,gBAApD;AAEA/8B,mBAAK,CAACpP,MAAN,CAAazP,OAAb,CAAsBy8C,QAAtB,EAAgCM,EAAhC;AACAN,sBAAQ,CAAEM,EAAE,GAAG,CAAP,CAAR,GAAqBl+B,KAAK,CAACC,QAA3B;AAEA;AAED;;AAED2iB,iBAAO,CAACjmF,KAAR,GAAgBihG,QAAhB;AACAhb,iBAAO,CAAC/tE,WAAR,GAAsB,IAAtB;AAEA;;AAED/G,aAAK,CAACkvF,SAAN,GAAkBe,OAAlB;AACAjwF,aAAK,CAACmvF,eAAN,GAAwB,CAAxB;AAEA,eAAOW,QAAP;AAEA;AAED;;AAED,aAASO,eAAT,CAA0BrT,EAA1B,EAA+B;AAE9B,UAAM3I,UAAU,GAAG,EAAnB;AAEA,aAAO;AAENic,WAAG,EAAE,aAAWxsG,IAAX,EAAkB;AAEtB,cAAKuwF,UAAU,CAAEvwF,IAAF,CAAV,KAAuBqP,SAA5B,EAAwC;AAEvC,mBAAOkhF,UAAU,CAAEvwF,IAAF,CAAjB;AAEA;;AAED,cAAIulG,SAAJ;;AAEA,kBAASvlG,IAAT;AAEC,iBAAK,qBAAL;AACCulG,uBAAS,GAAGrM,EAAE,CAACuT,YAAH,CAAiB,qBAAjB,KAA4CvT,EAAE,CAACuT,YAAH,CAAiB,yBAAjB,CAA5C,IAA4FvT,EAAE,CAACuT,YAAH,CAAiB,4BAAjB,CAAxG;AACA;;AAED,iBAAK,gCAAL;AACClH,uBAAS,GAAGrM,EAAE,CAACuT,YAAH,CAAiB,gCAAjB,KAAuDvT,EAAE,CAACuT,YAAH,CAAiB,oCAAjB,CAAvD,IAAkHvT,EAAE,CAACuT,YAAH,CAAiB,uCAAjB,CAA9H;AACA;;AAED,iBAAK,+BAAL;AACClH,uBAAS,GAAGrM,EAAE,CAACuT,YAAH,CAAiB,+BAAjB,KAAsDvT,EAAE,CAACuT,YAAH,CAAiB,mCAAjB,CAAtD,IAAgHvT,EAAE,CAACuT,YAAH,CAAiB,sCAAjB,CAA5H;AACA;;AAED,iBAAK,gCAAL;AACClH,uBAAS,GAAGrM,EAAE,CAACuT,YAAH,CAAiB,gCAAjB,KAAuDvT,EAAE,CAACuT,YAAH,CAAiB,uCAAjB,CAAnE;AACA;;AAED;AACClH,uBAAS,GAAGrM,EAAE,CAACuT,YAAH,CAAiBzsG,IAAjB,CAAZ;AAnBF;;AAuBAuwF,oBAAU,CAAEvwF,IAAF,CAAV,GAAqBulG,SAArB;AAEA,iBAAO,CAAC,CAAEA,SAAV;AAEA,SAvCK;AAyCNzzF,WAAG,EAAE,aAAW9R,IAAX,EAAkB;AAEtB,cAAK,CAAE,KAAKwsG,GAAL,CAAUxsG,IAAV,CAAP,EAA0B;AAEzBoC,mBAAO,CAAC2W,IAAR,CAAc,0BAA0B/Y,IAA1B,GAAiC,2BAA/C;AAEA;;AAED,iBAAOuwF,UAAU,CAAEvwF,IAAF,CAAjB;AAEA;AAnDK,OAAP;AAuDA;;AAED,aAAS0sG,eAAT,CAA0BxT,EAA1B,EAA8Bn+C,UAA9B,EAA0CmuD,IAA1C,EAAgDzD,aAAhD,EAAgE;AAE/D,UAAM77B,UAAU,GAAG,IAAI0vB,OAAJ,EAAnB;AACA,UAAMqT,mBAAmB,GAAG,IAAIrT,OAAJ,EAA5B;;AAEA,eAASsT,iBAAT,CAA4BrtG,KAA5B,EAAoC;AAEnC,YAAMgrE,QAAQ,GAAGhrE,KAAK,CAACuL,MAAvB;AACA,YAAM+hG,cAAc,GAAGjjC,UAAU,CAAC93D,GAAX,CAAgBy4D,QAAhB,CAAvB;;AAEA,YAAKsiC,cAAc,CAAC9kF,KAAf,KAAyB,IAA9B,EAAqC;AAEpCgzB,oBAAU,CAAC/lC,MAAX,CAAmB63F,cAAc,CAAC9kF,KAAlC;AAEA;;AAED,aAAM,IAAM/nB,IAAZ,IAAoB6sG,cAAc,CAAC9xD,UAAnC,EAAgD;AAE/CA,oBAAU,CAAC/lC,MAAX,CAAmB63F,cAAc,CAAC9xD,UAAf,CAA2B/6C,IAA3B,CAAnB;AAEA;;AAEDuqE,gBAAQ,CAAC7xD,mBAAT,CAA8B,SAA9B,EAAyCk0F,iBAAzC;AAEAhjC,kBAAU,UAAV,CAAmBW,QAAnB;AAEA,YAAM9a,SAAS,GAAGk9C,mBAAmB,CAAC76F,GAApB,CAAyB+6F,cAAzB,CAAlB;;AAEA,YAAKp9C,SAAL,EAAiB;AAEhB1U,oBAAU,CAAC/lC,MAAX,CAAmBy6C,SAAnB;AACAk9C,6BAAmB,UAAnB,CAA4BE,cAA5B;AAEA;;AAEDpH,qBAAa,CAACqD,uBAAd,CAAuCv+B,QAAvC;;AAEA,YAAKA,QAAQ,CAACy9B,yBAAT,KAAuC,IAA5C,EAAmD;AAElD,iBAAOz9B,QAAQ,CAAC+9B,iBAAhB;AAEA,SApCkC,CAsCnC;;;AAEAY,YAAI,CAAC4D,MAAL,CAAYljC,UAAZ;AAEA;;AAED,eAAS93D,GAAT,CAAcnC,MAAd,EAAsB46D,QAAtB,EAAiC;AAEhC,YAAIsiC,cAAc,GAAGjjC,UAAU,CAAC93D,GAAX,CAAgBy4D,QAAhB,CAArB;AAEA,YAAKsiC,cAAL,EAAsB,OAAOA,cAAP;AAEtBtiC,gBAAQ,CAAC/xD,gBAAT,CAA2B,SAA3B,EAAsCo0F,iBAAtC;;AAEA,YAAKriC,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC2oB,wBAAc,GAAGtiC,QAAjB;AAEA,SAJD,MAIO,IAAKA,QAAQ,CAACsa,UAAd,EAA2B;AAEjC,cAAKta,QAAQ,CAACwiC,eAAT,KAA6B19F,SAAlC,EAA8C;AAE7Ck7D,oBAAQ,CAACwiC,eAAT,GAA2B,IAAIjpB,cAAJ,GAAqB5W,aAArB,CAAoCv9D,MAApC,CAA3B;AAEA;;AAEDk9F,wBAAc,GAAGtiC,QAAQ,CAACwiC,eAA1B;AAEA;;AAEDnjC,kBAAU,CAACtrD,GAAX,CAAgBisD,QAAhB,EAA0BsiC,cAA1B;AAEA3D,YAAI,CAAC4D,MAAL,CAAYljC,UAAZ;AAEA,eAAOijC,cAAP;AAEA;;AAED,eAAStwF,MAAT,CAAiBguD,QAAjB,EAA4B;AAE3B,YAAM48B,kBAAkB,GAAG58B,QAAQ,CAACxvB,UAApC,CAF2B,CAI3B;;AAEA,aAAM,IAAM/6C,IAAZ,IAAoBmnG,kBAApB,EAAyC;AAExCpsD,oBAAU,CAACx+B,MAAX,CAAmB4qF,kBAAkB,CAAEnnG,IAAF,CAArC,EAA+C,KAA/C;AAEA,SAV0B,CAY3B;;;AAEA,YAAM+jF,eAAe,GAAGxZ,QAAQ,CAACwZ,eAAjC;;AAEA,aAAM,IAAM/jF,MAAZ,IAAoB+jF,eAApB,EAAsC;AAErC,cAAMlmD,KAAK,GAAGkmD,eAAe,CAAE/jF,MAAF,CAA7B;;AAEA,eAAM,IAAIiB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGmyB,KAAK,CAACv9B,MAA3B,EAAmCW,KAAC,GAAGyK,CAAvC,EAA0CzK,KAAC,EAA3C,EAAiD;AAEhD85C,sBAAU,CAACx+B,MAAX,CAAmBshB,KAAK,CAAE58B,KAAF,CAAxB,EAA+B,KAA/B;AAEA;AAED;AAED;;AAED,eAAS+rG,wBAAT,CAAmCziC,QAAnC,EAA8C;AAE7C,YAAM0c,OAAO,GAAG,EAAhB;AAEA,YAAMgmB,aAAa,GAAG1iC,QAAQ,CAACxiD,KAA/B;AACA,YAAMmlF,gBAAgB,GAAG3iC,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAA7C;AACA,YAAIwd,OAAO,GAAG,CAAd;;AAEA,YAAKg0E,aAAa,KAAK,IAAvB,EAA8B;AAE7B,cAAMpvE,KAAK,GAAGovE,aAAa,CAACpvE,KAA5B;AACA5E,iBAAO,GAAGg0E,aAAa,CAACh0E,OAAxB;;AAEA,eAAM,IAAIh4B,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGmyB,KAAK,CAACv9B,MAA3B,EAAmCW,KAAC,GAAGyK,CAAvC,EAA0CzK,KAAC,IAAI,CAA/C,EAAmD;AAElD,gBAAMT,CAAC,GAAGq9B,KAAK,CAAE58B,KAAC,GAAG,CAAN,CAAf;AACA,gBAAMR,CAAC,GAAGo9B,KAAK,CAAE58B,KAAC,GAAG,CAAN,CAAf;AACA,gBAAM4wB,CAAC,GAAGgM,KAAK,CAAE58B,KAAC,GAAG,CAAN,CAAf;AAEAgmF,mBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBA,CAApB,EAAuBoxB,CAAvB,EAA0BA,CAA1B,EAA6BrxB,CAA7B;AAEA;AAED,SAfD,MAeO;AAEN,cAAMq9B,MAAK,GAAGqvE,gBAAgB,CAACrvE,KAA/B;AACA5E,iBAAO,GAAGi0E,gBAAgB,CAACj0E,OAA3B;;AAEA,eAAM,IAAIh4B,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAKmyB,MAAK,CAACv9B,MAAN,GAAe,CAAjB,GAAuB,CAA5C,EAA+CW,KAAC,GAAGyK,GAAnD,EAAsDzK,KAAC,IAAI,CAA3D,EAA+D;AAE9D,gBAAMT,GAAC,GAAGS,KAAC,GAAG,CAAd;;AACA,gBAAMR,GAAC,GAAGQ,KAAC,GAAG,CAAd;;AACA,gBAAM4wB,GAAC,GAAG5wB,KAAC,GAAG,CAAd;;AAEAgmF,mBAAO,CAACtlF,IAAR,CAAcnB,GAAd,EAAiBC,GAAjB,EAAoBA,GAApB,EAAuBoxB,GAAvB,EAA0BA,GAA1B,EAA6BrxB,GAA7B;AAEA;AAED;;AAED,YAAMivD,SAAS,GAAG,KAAM6zB,QAAQ,CAAE2D,OAAF,CAAR,GAAsB,KAAtB,GAA8B5F,qBAA9B,GAAsDF,qBAA5D,EAAqF8F,OAArF,EAA8F,CAA9F,CAAlB;AACAx3B,iBAAS,CAACx2B,OAAV,GAAoBA,OAApB,CAzC6C,CA2C7C;AAEA;;AAEA,YAAMk0E,iBAAiB,GAAGR,mBAAmB,CAAC76F,GAApB,CAAyBy4D,QAAzB,CAA1B;AAEA,YAAK4iC,iBAAL,EAAyBpyD,UAAU,CAAC/lC,MAAX,CAAmBm4F,iBAAnB,EAjDoB,CAmD7C;;AAEAR,2BAAmB,CAACruF,GAApB,CAAyBisD,QAAzB,EAAmC9a,SAAnC;AAEA;;AAED,eAAS29C,qBAAT,CAAgC7iC,QAAhC,EAA2C;AAE1C,YAAM8iC,gBAAgB,GAAGV,mBAAmB,CAAC76F,GAApB,CAAyBy4D,QAAzB,CAAzB;;AAEA,YAAK8iC,gBAAL,EAAwB;AAEvB,cAAMJ,aAAa,GAAG1iC,QAAQ,CAACxiD,KAA/B;;AAEA,cAAKklF,aAAa,KAAK,IAAvB,EAA8B;AAE7B;AAEA,gBAAKI,gBAAgB,CAACp0E,OAAjB,GAA2Bg0E,aAAa,CAACh0E,OAA9C,EAAwD;AAEvD+zE,sCAAwB,CAAEziC,QAAF,CAAxB;AAEA;AAED;AAED,SAhBD,MAgBO;AAENyiC,kCAAwB,CAAEziC,QAAF,CAAxB;AAEA;;AAED,eAAOoiC,mBAAmB,CAAC76F,GAApB,CAAyBy4D,QAAzB,CAAP;AAEA;;AAED,aAAO;AAENz4D,WAAG,EAAEA,GAFC;AAGNyK,cAAM,EAAEA,MAHF;AAKN6wF,6BAAqB,EAAEA;AALjB,OAAP;AASA;;AAED,aAASE,0BAAT,CAAqCpU,EAArC,EAAyC3I,UAAzC,EAAqD2Y,IAArD,EAA2D/P,YAA3D,EAA0E;AAEzE,UAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,UAAI1pD,IAAJ;;AAEA,eAASy5D,OAAT,CAAkBp+F,KAAlB,EAA0B;AAEzB2kC,YAAI,GAAG3kC,KAAP;AAEA;;AAED,UAAIpF,IAAJ,EAAUg0F,eAAV;;AAEA,eAASz9D,QAAT,CAAmBnxB,KAAnB,EAA2B;AAE1BpF,YAAI,GAAGoF,KAAK,CAACpF,IAAb;AACAg0F,uBAAe,GAAG5uF,KAAK,CAAC4uF,eAAxB;AAEA;;AAED,eAASroE,MAAT,CAAiBoiD,KAAjB,EAAwB1J,KAAxB,EAAgC;AAE/BkvB,UAAE,CAACqU,YAAH,CAAiB79D,IAAjB,EAAuBs6B,KAAvB,EAA8BrkE,IAA9B,EAAoC+tE,KAAK,GAAGimB,eAA5C;AAEAuP,YAAI,CAAC3sF,MAAL,CAAaytD,KAAb,EAAoBt6B,IAApB,EAA0B,CAA1B;AAEA;;AAED,eAAS25D,eAAT,CAA0B31B,KAA1B,EAAiC1J,KAAjC,EAAwCs/B,SAAxC,EAAoD;AAEnD,YAAKA,SAAS,KAAK,CAAnB,EAAuB;AAEvB,YAAI/D,SAAJ,EAAegE,UAAf;;AAEA,YAAKnQ,QAAL,EAAgB;AAEfmM,mBAAS,GAAGrM,EAAZ;AACAqQ,oBAAU,GAAG,uBAAb;AAEA,SALD,MAKO;AAENhE,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,CAAZ;AACAy3F,oBAAU,GAAG,4BAAb;;AAEA,cAAKhE,SAAS,KAAK,IAAnB,EAA0B;AAEzBnjG,mBAAO,CAACD,KAAR,CAAe,uIAAf;AACA;AAEA;AAED;;AAEDojG,iBAAS,CAAEgE,UAAF,CAAT,CAAyB75D,IAAzB,EAA+Bs6B,KAA/B,EAAsCrkE,IAAtC,EAA4C+tE,KAAK,GAAGimB,eAApD,EAAqE2P,SAArE;AAEAJ,YAAI,CAAC3sF,MAAL,CAAaytD,KAAb,EAAoBt6B,IAApB,EAA0B45D,SAA1B;AAEA,OA1DwE,CA4DzE;;;AAEA,WAAKH,OAAL,GAAeA,OAAf;AACA,WAAKjtE,QAAL,GAAgBA,QAAhB;AACA,WAAK5K,MAAL,GAAcA,MAAd;AACA,WAAK+3E,eAAL,GAAuBA,eAAvB;AAEA;;AAED,aAASmE,SAAT,CAAoBtU,EAApB,EAAyB;AAExB,UAAM4T,MAAM,GAAG;AACdljC,kBAAU,EAAE,CADE;AAEd5T,gBAAQ,EAAE;AAFI,OAAf;AAKA,UAAM1kC,MAAM,GAAG;AACdunE,aAAK,EAAE,CADO;AAEd4U,aAAK,EAAE,CAFO;AAGdC,iBAAS,EAAE,CAHG;AAId1+E,cAAM,EAAE,CAJM;AAKd2+E,aAAK,EAAE;AALO,OAAf;;AAQA,eAASpxF,MAAT,CAAiBytD,KAAjB,EAAwBt6B,IAAxB,EAA8Bk+D,aAA9B,EAA8C;AAE7Ct8E,cAAM,CAACm8E,KAAP;;AAEA,gBAAS/9D,IAAT;AAEC,eAAK,CAAL;AACCpe,kBAAM,CAACo8E,SAAP,IAAoBE,aAAa,IAAK5jC,KAAK,GAAG,CAAb,CAAjC;AACA;;AAED,eAAK,CAAL;AACC14C,kBAAM,CAACq8E,KAAP,IAAgBC,aAAa,IAAK5jC,KAAK,GAAG,CAAb,CAA7B;AACA;;AAED,eAAK,CAAL;AACC14C,kBAAM,CAACq8E,KAAP,IAAgBC,aAAa,IAAK5jC,KAAK,GAAG,CAAb,CAA7B;AACA;;AAED,eAAK,CAAL;AACC14C,kBAAM,CAACq8E,KAAP,IAAgBC,aAAa,GAAG5jC,KAAhC;AACA;;AAED,eAAK,CAAL;AACC14C,kBAAM,CAACtC,MAAP,IAAiB4+E,aAAa,GAAG5jC,KAAjC;AACA;;AAED;AACC5nE,mBAAO,CAACD,KAAR,CAAe,qCAAf,EAAsDutC,IAAtD;AACA;AAxBF;AA4BA;;AAED,eAAStzB,KAAT,GAAiB;AAEhBkV,cAAM,CAACunE,KAAP;AACAvnE,cAAM,CAACm8E,KAAP,GAAe,CAAf;AACAn8E,cAAM,CAACo8E,SAAP,GAAmB,CAAnB;AACAp8E,cAAM,CAACtC,MAAP,GAAgB,CAAhB;AACAsC,cAAM,CAACq8E,KAAP,GAAe,CAAf;AAEA;;AAED,aAAO;AACNb,cAAM,EAAEA,MADF;AAENx7E,cAAM,EAAEA,MAFF;AAGNu8E,gBAAQ,EAAE,IAHJ;AAINC,iBAAS,EAAE,IAJL;AAKN1xF,aAAK,EAAEA,KALD;AAMNG,cAAM,EAAEA;AANF,OAAP;AASA;;AAED,aAASwxF,aAAT,CAAwBvtG,CAAxB,EAA2BC,CAA3B,EAA+B;AAE9B,aAAOD,CAAC,CAAE,CAAF,CAAD,GAASC,CAAC,CAAE,CAAF,CAAjB;AAEA;;AAED,aAASutG,gBAAT,CAA2BxtG,CAA3B,EAA8BC,CAA9B,EAAkC;AAEjC,aAAO+Y,IAAI,CAAC4nB,GAAL,CAAU3gC,CAAC,CAAE,CAAF,CAAX,IAAqB+Y,IAAI,CAAC4nB,GAAL,CAAU5gC,CAAC,CAAE,CAAF,CAAX,CAA5B;AAEA;;AAED,aAASytG,iBAAT,CAA4B/U,EAA5B,EAAiC;AAEhC,UAAMgV,cAAc,GAAG,EAAvB;AACA,UAAMpkB,eAAe,GAAG,IAAIvI,YAAJ,CAAkB,CAAlB,CAAxB;AAEA,UAAM4sB,cAAc,GAAG,EAAvB;;AAEA,WAAM,IAAIltG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BktG,sBAAc,CAAEltG,KAAF,CAAd,GAAsB,CAAEA,KAAF,EAAK,CAAL,CAAtB;AAEA;;AAED,eAASsb,MAAT,CAAiB5M,MAAjB,EAAyB46D,QAAzB,EAAmC95C,QAAnC,EAA6Cq1E,OAA7C,EAAuD;AAEtD,YAAMsI,gBAAgB,GAAGz+F,MAAM,CAACi5E,qBAAhC,CAFsD,CAItD;AACA;;AAEA,YAAMtoF,MAAM,GAAG8tG,gBAAgB,KAAK/+F,SAArB,GAAiC,CAAjC,GAAqC++F,gBAAgB,CAAC9tG,MAArE;AAEA,YAAI+tG,UAAU,GAAGH,cAAc,CAAE3jC,QAAQ,CAAC1rE,EAAX,CAA/B;;AAEA,YAAKwvG,UAAU,KAAKh/F,SAApB,EAAgC;AAE/B;AAEAg/F,oBAAU,GAAG,EAAb;;AAEA,eAAM,IAAIptG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGX,MAArB,EAA6BW,KAAC,EAA9B,EAAoC;AAEnCotG,sBAAU,CAAEptG,KAAF,CAAV,GAAkB,CAAEA,KAAF,EAAK,CAAL,CAAlB;AAEA;;AAEDitG,wBAAc,CAAE3jC,QAAQ,CAAC1rE,EAAX,CAAd,GAAgCwvG,UAAhC;AAEA,SAzBqD,CA2BtD;;;AAEA,aAAM,IAAIptG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGX,MAArB,EAA6BW,KAAC,EAA9B,EAAoC;AAEnC,cAAM8oF,SAAS,GAAGskB,UAAU,CAAEptG,KAAF,CAA5B;AAEA8oF,mBAAS,CAAE,CAAF,CAAT,GAAiB9oF,KAAjB;AACA8oF,mBAAS,CAAE,CAAF,CAAT,GAAiBqkB,gBAAgB,CAAEntG,KAAF,CAAjC;AAEA;;AAEDotG,kBAAU,CAAC9tG,IAAX,CAAiBytG,gBAAjB;;AAEA,aAAM,IAAI/sG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,cAAKA,KAAC,GAAGX,MAAJ,IAAc+tG,UAAU,CAAEptG,KAAF,CAAV,CAAiB,CAAjB,CAAnB,EAA0C;AAEzCktG,0BAAc,CAAEltG,KAAF,CAAd,CAAqB,CAArB,IAA2BotG,UAAU,CAAEptG,KAAF,CAAV,CAAiB,CAAjB,CAA3B;AACAktG,0BAAc,CAAEltG,KAAF,CAAd,CAAqB,CAArB,IAA2BotG,UAAU,CAAEptG,KAAF,CAAV,CAAiB,CAAjB,CAA3B;AAEA,WALD,MAKO;AAENktG,0BAAc,CAAEltG,KAAF,CAAd,CAAqB,CAArB,IAA2Bo8C,MAAM,CAACixD,gBAAlC;AACAH,0BAAc,CAAEltG,KAAF,CAAd,CAAqB,CAArB,IAA2B,CAA3B;AAEA;AAED;;AAEDktG,sBAAc,CAAC5tG,IAAf,CAAqBwtG,aAArB;AAEA,YAAMjvB,YAAY,GAAGruD,QAAQ,CAACquD,YAAT,IAAyBvU,QAAQ,CAACwZ,eAAT,CAAyBtoE,QAAvE;AACA,YAAMsjE,YAAY,GAAGtuD,QAAQ,CAACsuD,YAAT,IAAyBxU,QAAQ,CAACwZ,eAAT,CAAyB/kB,MAAvE;AAEA,YAAIuvC,kBAAkB,GAAG,CAAzB;;AAEA,aAAM,IAAIttG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,cAAM8oF,UAAS,GAAGokB,cAAc,CAAEltG,KAAF,CAAhC;AACA,cAAM8mB,KAAK,GAAGgiE,UAAS,CAAE,CAAF,CAAvB;AACA,cAAMh/E,KAAK,GAAGg/E,UAAS,CAAE,CAAF,CAAvB;;AAEA,cAAKhiE,KAAK,KAAKs1B,MAAM,CAACixD,gBAAjB,IAAqCvjG,KAA1C,EAAkD;AAEjD,gBAAK+zE,YAAY,IAAIvU,QAAQ,CAAC11B,YAAT,CAAuB,gBAAgB5zC,KAAvC,MAA+C69E,YAAY,CAAE/2D,KAAF,CAAhF,EAA4F;AAE3FwiD,sBAAQ,CAAC6Z,YAAT,CAAuB,gBAAgBnjF,KAAvC,EAA0C69E,YAAY,CAAE/2D,KAAF,CAAtD;AAEA;;AAED,gBAAKg3D,YAAY,IAAIxU,QAAQ,CAAC11B,YAAT,CAAuB,gBAAgB5zC,KAAvC,MAA+C89E,YAAY,CAAEh3D,KAAF,CAAhF,EAA4F;AAE3FwiD,sBAAQ,CAAC6Z,YAAT,CAAuB,gBAAgBnjF,KAAvC,EAA0C89E,YAAY,CAAEh3D,KAAF,CAAtD;AAEA;;AAED+hE,2BAAe,CAAE7oF,KAAF,CAAf,GAAuB8J,KAAvB;AACAwjG,8BAAkB,IAAIxjG,KAAtB;AAEA,WAjBD,MAiBO;AAEN,gBAAK+zE,YAAY,IAAIvU,QAAQ,CAAC11B,YAAT,CAAuB,gBAAgB5zC,KAAvC,MAA+CoO,SAApE,EAAgF;AAE/Ek7D,sBAAQ,CAAC8Z,eAAT,CAA0B,gBAAgBpjF,KAA1C;AAEA;;AAED,gBAAK89E,YAAY,IAAIxU,QAAQ,CAAC11B,YAAT,CAAuB,gBAAgB5zC,KAAvC,MAA+CoO,SAApE,EAAgF;AAE/Ek7D,sBAAQ,CAAC8Z,eAAT,CAA0B,gBAAgBpjF,KAA1C;AAEA;;AAED6oF,2BAAe,CAAE7oF,KAAF,CAAf,GAAuB,CAAvB;AAEA;AAED,SAxGqD,CA0GtD;AACA;AACA;;;AACA,YAAMutG,kBAAkB,GAAGjkC,QAAQ,CAACyZ,oBAAT,GAAgC,CAAhC,GAAoC,IAAIuqB,kBAAnE;AAEAzI,eAAO,CAAC2I,WAAR,GAAsBC,QAAtB,CAAgCxV,EAAhC,EAAoC,0BAApC,EAAgEsV,kBAAhE;AACA1I,eAAO,CAAC2I,WAAR,GAAsBC,QAAtB,CAAgCxV,EAAhC,EAAoC,uBAApC,EAA6DpP,eAA7D;AAEA;;AAED,aAAO;AAENvtE,cAAM,EAAEA;AAFF,OAAP;AAMA;;AAED,aAASoyF,YAAT,CAAuBzV,EAAvB,EAA2BtvB,UAA3B,EAAuC7uB,UAAvC,EAAmDmuD,IAAnD,EAA0D;AAEzD,UAAI0F,SAAS,GAAG,IAAItV,OAAJ,EAAhB;;AAEA,eAAS/8E,MAAT,CAAiB5M,MAAjB,EAA0B;AAEzB,YAAMkpF,KAAK,GAAGqQ,IAAI,CAAC53E,MAAL,CAAYunE,KAA1B;AAEA,YAAMtuB,QAAQ,GAAG56D,MAAM,CAAC46D,QAAxB;AACA,YAAMsiC,cAAc,GAAGjjC,UAAU,CAAC93D,GAAX,CAAgBnC,MAAhB,EAAwB46D,QAAxB,CAAvB,CALyB,CAOzB;;AAEA,YAAKqkC,SAAS,CAAC98F,GAAV,CAAe+6F,cAAf,MAAoChU,KAAzC,EAAiD;AAEhD,cAAKtuB,QAAQ,CAACsa,UAAd,EAA2B;AAE1BgoB,0BAAc,CAAC/nB,gBAAf,CAAiCn1E,MAAjC;AAEA;;AAEDi6D,oBAAU,CAACrtD,MAAX,CAAmBswF,cAAnB;AAEA+B,mBAAS,CAACtwF,GAAV,CAAeuuF,cAAf,EAA+BhU,KAA/B;AAEA;;AAED,YAAKlpF,MAAM,CAACo6D,eAAZ,EAA8B;AAE7BhvB,oBAAU,CAACx+B,MAAX,CAAmB5M,MAAM,CAACs6D,cAA1B,EAA0C,KAA1C;AAEA;;AAED,eAAO4iC,cAAP;AAEA;;AAED,eAASjuF,OAAT,GAAmB;AAElBgwF,iBAAS,GAAG,IAAItV,OAAJ,EAAZ;AAEA;;AAED,aAAO;AAEN/8E,cAAM,EAAEA,MAFF;AAGNqC,eAAO,EAAEA;AAHH,OAAP;AAOA;;AAED,aAASiwF,WAAT,CAAsB14C,MAAtB,EAA8B1B,OAA9B,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,SAArD,EAAgEC,SAAhE,EAA2EC,MAA3E,EAAmFnvD,IAAnF,EAAyFovD,UAAzF,EAAqGC,QAArG,EAAgH;AAE/GmB,YAAM,GAAGA,MAAM,KAAK9mD,SAAX,GAAuB8mD,MAAvB,GAAgC,EAAzC;AACA1B,aAAO,GAAGA,OAAO,KAAKplD,SAAZ,GAAwBolD,OAAxB,GAAkCnT,qBAA5C;AACAwT,YAAM,GAAGA,MAAM,KAAKzlD,SAAX,GAAuBylD,MAAvB,GAAgCxR,SAAzC;AAEAkR,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB6gD,MAApB,EAA4B1B,OAA5B,EAAqCC,KAArC,EAA4CC,KAA5C,EAAmDC,SAAnD,EAA8DC,SAA9D,EAAyEC,MAAzE,EAAiFnvD,IAAjF,EAAuFovD,UAAvF,EAAmGC,QAAnG;AAEA,WAAKS,KAAL,GAAa,KAAb;AAEA;;AAEDo5C,eAAW,CAAC12F,SAAZ,GAAwB3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAAxB;AACA02F,eAAW,CAAC12F,SAAZ,CAAsB0M,WAAtB,GAAoCgqF,WAApC;AAEAA,eAAW,CAAC12F,SAAZ,CAAsB2sF,aAAtB,GAAsC,IAAtC;AAEAtiG,UAAM,CAACk7C,cAAP,CAAuBmxD,WAAW,CAAC12F,SAAnC,EAA8C,QAA9C,EAAwD;AAEvDrG,SAAG,EAAE,eAAY;AAEhB,eAAO,KAAKzQ,KAAZ;AAEA,OANsD;AAQvDid,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,aAAK1J,KAAL,GAAa0J,KAAb;AAEA;AAZsD,KAAxD;;AAgBA,aAAS+jG,kBAAT,CAA6BhvG,IAA7B,EAAmCyvB,KAAnC,EAA0CD,MAA1C,EAAkD+d,KAAlD,EAA0D;AAEzDmnB,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB,IAApB;AAEA,WAAKjU,KAAL,GAAa;AAAEvB,YAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsByvB,aAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCD,cAAM,EAAEA,MAAM,IAAI,CAA3D;AAA8D+d,aAAK,EAAEA,KAAK,IAAI;AAA9E,OAAb;AAEA,WAAKunB,SAAL,GAAiB7S,aAAjB;AACA,WAAK8S,SAAL,GAAiB9S,aAAjB;AAEA,WAAKgtD,KAAL,GAAaltD,mBAAb;AAEA,WAAK0T,eAAL,GAAuB,KAAvB;AACA,WAAKE,KAAL,GAAa,KAAb;AAEA,WAAKxyC,WAAL,GAAmB,IAAnB;AAEA;;AAED6rF,sBAAkB,CAAC32F,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAA/B;AACA22F,sBAAkB,CAAC32F,SAAnB,CAA6B0M,WAA7B,GAA2CiqF,kBAA3C;AACAA,sBAAkB,CAAC32F,SAAnB,CAA6B62F,oBAA7B,GAAoD,IAApD;;AAEA,aAASC,aAAT,CAAwBnvG,IAAxB,EAA8ByvB,KAA9B,EAAqCD,MAArC,EAA6C+d,KAA7C,EAAqD;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AAEAmnB,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB,IAApB;AAEA,WAAKjU,KAAL,GAAa;AAAEvB,YAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsByvB,aAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCD,cAAM,EAAEA,MAAM,IAAI,CAA3D;AAA8D+d,aAAK,EAAEA,KAAK,IAAI;AAA9E,OAAb;AAEA,WAAKunB,SAAL,GAAiB7S,aAAjB;AACA,WAAK8S,SAAL,GAAiB9S,aAAjB;AAEA,WAAKgtD,KAAL,GAAaltD,mBAAb;AAEA,WAAK0T,eAAL,GAAuB,KAAvB;AACA,WAAKE,KAAL,GAAa,KAAb;AAEA,WAAKxyC,WAAL,GAAmB,IAAnB;AAGA;;AAEDgsF,iBAAa,CAAC92F,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAA1B;AACA82F,iBAAa,CAAC92F,SAAd,CAAwB0M,WAAxB,GAAsCoqF,aAAtC;AACAA,iBAAa,CAAC92F,SAAd,CAAwB+2F,eAAxB,GAA0C,IAA1C;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,QAAMC,YAAY,GAAG,IAAI36C,OAAJ,EAArB;AACA,QAAM46C,mBAAmB,GAAG,IAAIN,kBAAJ,EAA5B;AACA,QAAMO,cAAc,GAAG,IAAIJ,aAAJ,EAAvB;AACA,QAAMK,gBAAgB,GAAG,IAAIT,WAAJ,EAAzB,C,CAEA;AAEA;;AAEA,QAAMU,aAAa,GAAG,EAAtB;AACA,QAAMC,aAAa,GAAG,EAAtB,C,CAEA;;AAEA,QAAMC,SAAS,GAAG,IAAIluB,YAAJ,CAAkB,EAAlB,CAAlB;AACA,QAAMmuB,SAAS,GAAG,IAAInuB,YAAJ,CAAkB,CAAlB,CAAlB;AACA,QAAMouB,SAAS,GAAG,IAAIpuB,YAAJ,CAAkB,CAAlB,CAAlB,C,CAEA;;AAEA,aAASquB,OAAT,CAAkB/xE,KAAlB,EAAyBgyE,OAAzB,EAAkCC,SAAlC,EAA8C;AAE7C,UAAMC,SAAS,GAAGlyE,KAAK,CAAE,CAAF,CAAvB;AAEA,UAAKkyE,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAG,CAAnC,EAAuC,OAAOlyE,KAAP,CAJM,CAK7C;AACA;;AAEA,UAAIjM,CAAC,GAAGi+E,OAAO,GAAGC,SAAlB;AAAA,UACCp+E,CAAC,GAAG69E,aAAa,CAAE39E,CAAF,CADlB;;AAGA,UAAKF,CAAC,KAAKriB,SAAX,EAAuB;AAEtBqiB,SAAC,GAAG,IAAI6vD,YAAJ,CAAkB3vD,CAAlB,CAAJ;AACA29E,qBAAa,CAAE39E,CAAF,CAAb,GAAqBF,CAArB;AAEA;;AAED,UAAKm+E,OAAO,KAAK,CAAjB,EAAqB;AAEpBE,iBAAS,CAACxgD,OAAV,CAAmB79B,CAAnB,EAAsB,CAAtB;;AAEA,aAAM,IAAIzwB,KAAC,GAAG,CAAR,EAAW0b,MAAM,GAAG,CAA1B,EAA6B1b,KAAC,KAAK4uG,OAAnC,EAA4C,EAAG5uG,KAA/C,EAAmD;AAElD0b,gBAAM,IAAImzF,SAAV;;AACAjyE,eAAK,CAAE58B,KAAF,CAAL,CAAWsuD,OAAX,CAAoB79B,CAApB,EAAuB/U,MAAvB;AAEA;AAED;;AAED,aAAO+U,CAAP;AAEA;;AAED,aAASs+E,WAAT,CAAsBxvG,CAAtB,EAAyBC,CAAzB,EAA6B;AAE5B,UAAKD,CAAC,CAACF,MAAF,KAAaG,CAAC,CAACH,MAApB,EAA6B,OAAO,KAAP;;AAE7B,WAAM,IAAIW,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGlL,CAAC,CAACF,MAAvB,EAA+BW,KAAC,GAAGyK,CAAnC,EAAsCzK,KAAC,EAAvC,EAA6C;AAE5C,YAAKT,CAAC,CAAES,KAAF,CAAD,KAAWR,CAAC,CAAEQ,KAAF,CAAjB,EAAyB,OAAO,KAAP;AAEzB;;AAED,aAAO,IAAP;AAEA;;AAED,aAASi/E,SAAT,CAAoB1/E,CAApB,EAAuBC,CAAvB,EAA2B;AAE1B,WAAM,IAAIQ,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGjL,CAAC,CAACH,MAAvB,EAA+BW,KAAC,GAAGyK,CAAnC,EAAsCzK,KAAC,EAAvC,EAA6C;AAE5CT,SAAC,CAAES,KAAF,CAAD,GAASR,CAAC,CAAEQ,KAAF,CAAV;AAEA;AAED,K,CAED;;;AAEA,aAASgvG,aAAT,CAAwBj6C,QAAxB,EAAkCpkC,CAAlC,EAAsC;AAErC,UAAIF,CAAC,GAAG89E,aAAa,CAAE59E,CAAF,CAArB;;AAEA,UAAKF,CAAC,KAAKriB,SAAX,EAAuB;AAEtBqiB,SAAC,GAAG,IAAIoW,UAAJ,CAAgBlW,CAAhB,CAAJ;AACA49E,qBAAa,CAAE59E,CAAF,CAAb,GAAqBF,CAArB;AAEA;;AAED,WAAM,IAAIzwB,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK2wB,CAAvB,EAA0B,EAAG3wB,KAA7B,EAAiC;AAEhCywB,SAAC,CAAEzwB,KAAF,CAAD,GAAS+0D,QAAQ,CAACk6C,mBAAT,EAAT;AAEA;;AAED,aAAOx+E,CAAP;AAEA,K,CAED;AAEA;AACA;AAEA;;;AAEA,aAASy+E,WAAT,CAAsBjX,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKA,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAApB,EAAwB;AAExBu4E,QAAE,CAACkX,SAAH,CAAc,KAAKC,IAAnB,EAAyB1vF,CAAzB;AAEAgqD,WAAK,CAAE,CAAF,CAAL,GAAahqD,CAAb;AAEA,K,CAED;;;AAEA,aAAS2vF,WAAT,CAAsBpX,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAKhqD,CAAC,CAAC/U,CAAF,KAAQyD,SAAb,EAAyB;AAExB,YAAKs7D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAAC/U,CAAjB,IAAsB++D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACgC,CAA5C,EAAgD;AAE/Cu2E,YAAE,CAACqX,SAAH,CAAc,KAAKF,IAAnB,EAAyB1vF,CAAC,CAAC/U,CAA3B,EAA8B+U,CAAC,CAACgC,CAAhC;AAEAgoD,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAAC/U,CAAf;AACA++D,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACgC,CAAf;AAEA;AAED,OAXD,MAWO;AAEN,YAAKqtF,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAACsX,UAAH,CAAe,KAAKH,IAApB,EAA0B1vF,CAA1B;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA;AAED;;AAED,aAAS8vF,WAAT,CAAsBvX,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAKhqD,CAAC,CAAC/U,CAAF,KAAQyD,SAAb,EAAyB;AAExB,YAAKs7D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAAC/U,CAAjB,IAAsB++D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACgC,CAAvC,IAA4CgoD,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACuN,CAAlE,EAAsE;AAErEgrE,YAAE,CAACwX,SAAH,CAAc,KAAKL,IAAnB,EAAyB1vF,CAAC,CAAC/U,CAA3B,EAA8B+U,CAAC,CAACgC,CAAhC,EAAmChC,CAAC,CAACuN,CAArC;AAEAy8C,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAAC/U,CAAf;AACA++D,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACgC,CAAf;AACAgoD,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACuN,CAAf;AAEA;AAED,OAZD,MAYO,IAAKvN,CAAC,CAAC+Q,CAAF,KAAQriB,SAAb,EAAyB;AAE/B,YAAKs7D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAAC+Q,CAAjB,IAAsBi5C,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACkV,CAAvC,IAA4C80C,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAAClgB,CAAlE,EAAsE;AAErEy4F,YAAE,CAACwX,SAAH,CAAc,KAAKL,IAAnB,EAAyB1vF,CAAC,CAAC+Q,CAA3B,EAA8B/Q,CAAC,CAACkV,CAAhC,EAAmClV,CAAC,CAAClgB,CAArC;AAEAkqE,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAAC+Q,CAAf;AACAi5C,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACkV,CAAf;AACA80C,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAAClgB,CAAf;AAEA;AAED,OAZM,MAYA;AAEN,YAAKuvG,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAACyX,UAAH,CAAe,KAAKN,IAApB,EAA0B1vF,CAA1B;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA;AAED;;AAED,aAASiwF,WAAT,CAAsB1X,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAKhqD,CAAC,CAAC/U,CAAF,KAAQyD,SAAb,EAAyB;AAExB,YAAKs7D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAAC/U,CAAjB,IAAsB++D,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACgC,CAAvC,IAA4CgoD,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACuN,CAA7D,IAAkEy8C,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAAC,CAACmV,CAAxF,EAA4F;AAE3FojE,YAAE,CAAC2X,SAAH,CAAc,KAAKR,IAAnB,EAAyB1vF,CAAC,CAAC/U,CAA3B,EAA8B+U,CAAC,CAACgC,CAAhC,EAAmChC,CAAC,CAACuN,CAArC,EAAwCvN,CAAC,CAACmV,CAA1C;AAEA60C,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAAC/U,CAAf;AACA++D,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACgC,CAAf;AACAgoD,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACuN,CAAf;AACAy8C,eAAK,CAAE,CAAF,CAAL,GAAahqD,CAAC,CAACmV,CAAf;AAEA;AAED,OAbD,MAaO;AAEN,YAAKk6E,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAAC4X,UAAH,CAAe,KAAKT,IAApB,EAA0B1vF,CAA1B;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA;AAED,K,CAED;;;AAEA,aAASowF,UAAT,CAAqB7X,EAArB,EAAyBv4E,CAAzB,EAA6B;AAE5B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM1c,QAAQ,GAAGttC,CAAC,CAACstC,QAAnB;;AAEA,UAAKA,QAAQ,KAAK5+C,SAAlB,EAA8B;AAE7B,YAAK2gG,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuC1vF,CAAvC;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA,OARD,MAQO;AAEN,YAAKqvF,WAAW,CAAErlC,KAAF,EAAS1c,QAAT,CAAhB,EAAsC;AAEtC0hD,iBAAS,CAACrxF,GAAV,CAAe2vC,QAAf;AAEAirC,UAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuCV,SAAvC;AAEAzvB,iBAAS,CAAEvV,KAAF,EAAS1c,QAAT,CAAT;AAEA;AAED;;AAED,aAASgjD,UAAT,CAAqB/X,EAArB,EAAyBv4E,CAAzB,EAA6B;AAE5B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM1c,QAAQ,GAAGttC,CAAC,CAACstC,QAAnB;;AAEA,UAAKA,QAAQ,KAAK5+C,SAAlB,EAA8B;AAE7B,YAAK2gG,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuC1vF,CAAvC;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA,OARD,MAQO;AAEN,YAAKqvF,WAAW,CAAErlC,KAAF,EAAS1c,QAAT,CAAhB,EAAsC;AAEtCyhD,iBAAS,CAACpxF,GAAV,CAAe2vC,QAAf;AAEAirC,UAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuCX,SAAvC;AAEAxvB,iBAAS,CAAEvV,KAAF,EAAS1c,QAAT,CAAT;AAEA;AAED;;AAED,aAASkjD,UAAT,CAAqBjY,EAArB,EAAyBv4E,CAAzB,EAA6B;AAE5B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM1c,QAAQ,GAAGttC,CAAC,CAACstC,QAAnB;;AAEA,UAAKA,QAAQ,KAAK5+C,SAAlB,EAA8B;AAE7B,YAAK2gG,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,UAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuC1vF,CAAvC;AAEAu/D,iBAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA,OARD,MAQO;AAEN,YAAKqvF,WAAW,CAAErlC,KAAF,EAAS1c,QAAT,CAAhB,EAAsC;AAEtCwhD,iBAAS,CAACnxF,GAAV,CAAe2vC,QAAf;AAEAirC,UAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuCZ,SAAvC;AAEAvvB,iBAAS,CAAEvV,KAAF,EAAS1c,QAAT,CAAT;AAEA;AAED,K,CAED;;;AAEA,aAASojD,UAAT,CAAqBnY,EAArB,EAAyBv4E,CAAzB,EAA4Bq1C,QAA5B,EAAuC;AAEtC,UAAM2U,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM2mC,IAAI,GAAGt7C,QAAQ,CAACk6C,mBAAT,EAAb;;AAEA,UAAKvlC,KAAK,CAAE,CAAF,CAAL,KAAe2mC,IAApB,EAA2B;AAE1BpY,UAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA3mC,aAAK,CAAE,CAAF,CAAL,GAAa2mC,IAAb;AAEA;;AAEDt7C,cAAQ,CAACw7C,gBAAT,CAA2B7wF,CAAC,IAAIwuF,YAAhC,EAA8CmC,IAA9C;AAEA;;AAED,aAASG,iBAAT,CAA4BvY,EAA5B,EAAgCv4E,CAAhC,EAAmCq1C,QAAnC,EAA8C;AAE7C,UAAM2U,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM2mC,IAAI,GAAGt7C,QAAQ,CAACk6C,mBAAT,EAAb;;AAEA,UAAKvlC,KAAK,CAAE,CAAF,CAAL,KAAe2mC,IAApB,EAA2B;AAE1BpY,UAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA3mC,aAAK,CAAE,CAAF,CAAL,GAAa2mC,IAAb;AAEA;;AAEDt7C,cAAQ,CAAC07C,iBAAT,CAA4B/wF,CAAC,IAAIyuF,mBAAjC,EAAsDkC,IAAtD;AAEA;;AAED,aAASK,YAAT,CAAuBzY,EAAvB,EAA2Bv4E,CAA3B,EAA8Bq1C,QAA9B,EAAyC;AAExC,UAAM2U,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM2mC,IAAI,GAAGt7C,QAAQ,CAACk6C,mBAAT,EAAb;;AAEA,UAAKvlC,KAAK,CAAE,CAAF,CAAL,KAAe2mC,IAApB,EAA2B;AAE1BpY,UAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA3mC,aAAK,CAAE,CAAF,CAAL,GAAa2mC,IAAb;AAEA;;AAEDt7C,cAAQ,CAAC47C,YAAT,CAAuBjxF,CAAC,IAAI0uF,cAA5B,EAA4CiC,IAA5C;AAEA;;AAED,aAASO,UAAT,CAAqB3Y,EAArB,EAAyBv4E,CAAzB,EAA4Bq1C,QAA5B,EAAuC;AAEtC,UAAM2U,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM2mC,IAAI,GAAGt7C,QAAQ,CAACk6C,mBAAT,EAAb;;AAEA,UAAKvlC,KAAK,CAAE,CAAF,CAAL,KAAe2mC,IAApB,EAA2B;AAE1BpY,UAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA3mC,aAAK,CAAE,CAAF,CAAL,GAAa2mC,IAAb;AAEA;;AAEDt7C,cAAQ,CAAC87C,kBAAT,CAA6BnxF,CAAC,IAAI2uF,gBAAlC,EAAoDgC,IAApD;AAEA,K,CAED;;;AAEA,aAASS,WAAT,CAAsB7Y,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKA,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAApB,EAAwB;AAExBu4E,QAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyB1vF,CAAzB;AAEAgqD,WAAK,CAAE,CAAF,CAAL,GAAahqD,CAAb;AAEA;;AAED,aAASqxF,WAAT,CAAsB9Y,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKqlC,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,QAAE,CAAC+Y,UAAH,CAAe,KAAK5B,IAApB,EAA0B1vF,CAA1B;AAEAu/D,eAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA;;AAED,aAASuxF,WAAT,CAAsBhZ,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKqlC,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,QAAE,CAACiZ,UAAH,CAAe,KAAK9B,IAApB,EAA0B1vF,CAA1B;AAEAu/D,eAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA;;AAED,aAASyxF,WAAT,CAAsBlZ,EAAtB,EAA0Bv4E,CAA1B,EAA8B;AAE7B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKqlC,WAAW,CAAErlC,KAAF,EAAShqD,CAAT,CAAhB,EAA+B;AAE/Bu4E,QAAE,CAACmZ,UAAH,CAAe,KAAKhC,IAApB,EAA0B1vF,CAA1B;AAEAu/D,eAAS,CAAEvV,KAAF,EAAShqD,CAAT,CAAT;AAEA,K,CAED;;;AAEA,aAAS2xF,YAAT,CAAuBpZ,EAAvB,EAA2Bv4E,CAA3B,EAA+B;AAE9B,UAAMgqD,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAKA,KAAK,CAAE,CAAF,CAAL,KAAehqD,CAApB,EAAwB;AAExBu4E,QAAE,CAACqZ,UAAH,CAAe,KAAKlC,IAApB,EAA0B1vF,CAA1B;AAEAgqD,WAAK,CAAE,CAAF,CAAL,GAAahqD,CAAb;AAEA,K,CAED;;;AAEA,aAAS6xF,iBAAT,CAA4B7sG,IAA5B,EAAmC;AAElC,cAASA,IAAT;AAEC,aAAK,MAAL;AAAa,iBAAOwqG,WAAP;AAAoB;;AACjC,aAAK,MAAL;AAAa,iBAAOG,WAAP;AAAoB;;AACjC,aAAK,MAAL;AAAa,iBAAOG,WAAP;AAAoB;;AACjC,aAAK,MAAL;AAAa,iBAAOG,WAAP;AAAoB;;AAEjC,aAAK,MAAL;AAAa,iBAAOG,UAAP;AAAmB;;AAChC,aAAK,MAAL;AAAa,iBAAOE,UAAP;AAAmB;;AAChC,aAAK,MAAL;AAAa,iBAAOE,UAAP;AAAmB;;AAEhC,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOY,WAAP;AAAoB;;AAC9C,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOC,WAAP;AAAoB;;AAC9C,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOE,WAAP;AAAoB;;AAC9C,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOE,WAAP;AAAoB;;AAE9C,aAAK,MAAL;AAAa,iBAAOE,YAAP;AAAqB;;AAElC,aAAK,MAAL,CAlBD,CAkBc;;AACb,aAAK,MAAL,CAnBD,CAmBc;;AACb,aAAK,MAAL,CApBD,CAoBc;;AACb,aAAK,MAAL,CArBD,CAqBc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOjB,UAAP;;AAED,aAAK,MAAL,CAzBD,CAyBc;;AACb,aAAK,MAAL,CA1BD,CA0Bc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOM,YAAP;;AAED,aAAK,MAAL,CA9BD,CA8Bc;;AACb,aAAK,MAAL,CA/BD,CA+Bc;;AACb,aAAK,MAAL,CAhCD,CAgCc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOE,UAAP;;AAED,aAAK,MAAL,CApCD,CAoCc;;AACb,aAAK,MAAL,CArCD,CAqCc;;AACb,aAAK,MAAL,CAtCD,CAsCc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOJ,iBAAP;AAxCF;AA4CA,K,CAED;;;AACA,aAASgB,gBAAT,CAA2BvZ,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElCu4E,QAAE,CAACwZ,UAAH,CAAe,KAAKrC,IAApB,EAA0B1vF,CAA1B;AAEA,K,CAED;;;AACA,aAASgyF,gBAAT,CAA2BzZ,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElCu4E,QAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0B1vF,CAA1B;AAEA;;AAED,aAASkyF,gBAAT,CAA2B3Z,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElCu4E,QAAE,CAAC+Y,UAAH,CAAe,KAAK5B,IAApB,EAA0B1vF,CAA1B;AAEA;;AAED,aAASmyF,gBAAT,CAA2B5Z,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElCu4E,QAAE,CAACiZ,UAAH,CAAe,KAAK9B,IAApB,EAA0B1vF,CAA1B;AAEA;;AAED,aAASoyF,gBAAT,CAA2B7Z,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElCu4E,QAAE,CAACmZ,UAAH,CAAe,KAAKhC,IAApB,EAA0B1vF,CAA1B;AAEA,K,CAGD;;;AAEA,aAASqyF,gBAAT,CAA2B9Z,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,CAAhB,CAApB;AAEAmiF,QAAE,CAACsX,UAAH,CAAe,KAAKH,IAApB,EAA0BvwG,IAA1B;AAEA;;AAED,aAASmzG,gBAAT,CAA2B/Z,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,CAAhB,CAApB;AAEAmiF,QAAE,CAACyX,UAAH,CAAe,KAAKN,IAApB,EAA0BvwG,IAA1B;AAEA;;AAED,aAASozG,gBAAT,CAA2Bha,EAA3B,EAA+Bv4E,CAA/B,EAAmC;AAElC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,CAAhB,CAApB;AAEAmiF,QAAE,CAAC4X,UAAH,CAAe,KAAKT,IAApB,EAA0BvwG,IAA1B;AAEA,K,CAED;;;AAEA,aAASqzG,eAAT,CAA0Bja,EAA1B,EAA8Bv4E,CAA9B,EAAkC;AAEjC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,CAAhB,CAApB;AAEAmiF,QAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuCvwG,IAAvC;AAEA;;AAED,aAASszG,eAAT,CAA0Bla,EAA1B,EAA8Bv4E,CAA9B,EAAkC;AAEjC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,CAAhB,CAApB;AAEAmiF,QAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuCvwG,IAAvC;AAEA;;AAED,aAASuzG,eAAT,CAA0Bna,EAA1B,EAA8Bv4E,CAA9B,EAAkC;AAEjC,UAAM7gB,IAAI,GAAG8vG,OAAO,CAAEjvF,CAAF,EAAK,KAAK5J,IAAV,EAAgB,EAAhB,CAApB;AAEAmiF,QAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuCvwG,IAAvC;AAEA,K,CAED;;;AAEA,aAASwzG,eAAT,CAA0Bpa,EAA1B,EAA8Bv4E,CAA9B,EAAiCq1C,QAAjC,EAA4C;AAE3C,UAAMpkC,CAAC,GAAGjR,CAAC,CAACrgB,MAAZ;AAEA,UAAMizG,KAAK,GAAGtD,aAAa,CAAEj6C,QAAF,EAAYpkC,CAAZ,CAA3B;AAEAsnE,QAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0BkD,KAA1B;;AAEA,WAAM,IAAItyG,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK2wB,CAAvB,EAA0B,EAAG3wB,KAA7B,EAAiC;AAEhC+0D,gBAAQ,CAACw7C,gBAAT,CAA2B7wF,CAAC,CAAE1f,KAAF,CAAD,IAAUkuG,YAArC,EAAmDoE,KAAK,CAAEtyG,KAAF,CAAxD;AAEA;AAED;;AAED,aAASuyG,eAAT,CAA0Bta,EAA1B,EAA8Bv4E,CAA9B,EAAiCq1C,QAAjC,EAA4C;AAE3C,UAAMpkC,CAAC,GAAGjR,CAAC,CAACrgB,MAAZ;AAEA,UAAMizG,KAAK,GAAGtD,aAAa,CAAEj6C,QAAF,EAAYpkC,CAAZ,CAA3B;AAEAsnE,QAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0BkD,KAA1B;;AAEA,WAAM,IAAItyG,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK2wB,CAAvB,EAA0B,EAAG3wB,KAA7B,EAAiC;AAEhC+0D,gBAAQ,CAAC87C,kBAAT,CAA6BnxF,CAAC,CAAE1f,KAAF,CAAD,IAAUquG,gBAAvC,EAAyDiE,KAAK,CAAEtyG,KAAF,CAA9D;AAEA;AAED,K,CAED;;;AAEA,aAASwyG,kBAAT,CAA6B9tG,IAA7B,EAAoC;AAEnC,cAASA,IAAT;AAEC,aAAK,MAAL;AAAa,iBAAO8sG,gBAAP;AAAyB;;AACtC,aAAK,MAAL;AAAa,iBAAOO,gBAAP;AAAyB;;AACtC,aAAK,MAAL;AAAa,iBAAOC,gBAAP;AAAyB;;AACtC,aAAK,MAAL;AAAa,iBAAOC,gBAAP;AAAyB;;AAEtC,aAAK,MAAL;AAAa,iBAAOC,eAAP;AAAwB;;AACrC,aAAK,MAAL;AAAa,iBAAOC,eAAP;AAAwB;;AACrC,aAAK,MAAL;AAAa,iBAAOC,eAAP;AAAwB;;AAErC,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOV,gBAAP;AAAyB;;AACnD,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOE,gBAAP;AAAyB;;AACnD,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOC,gBAAP;AAAyB;;AACnD,aAAK,MAAL;AAAa,aAAK,MAAL;AAAa,iBAAOC,gBAAP;AAAyB;;AAEnD,aAAK,MAAL,CAhBD,CAgBc;;AACb,aAAK,MAAL,CAjBD,CAiBc;;AACb,aAAK,MAAL,CAlBD,CAkBc;;AACb,aAAK,MAAL,CAnBD,CAmBc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOO,eAAP;;AAED,aAAK,MAAL,CAvBD,CAuBc;;AACb,aAAK,MAAL,CAxBD,CAwBc;;AACb,aAAK,MAAL,CAzBD,CAyBc;;AACb,aAAK,MAAL;AAAa;AACZ,iBAAOE,eAAP;AA3BF;AA+BA,K,CAED;;;AAEA,aAASE,aAAT,CAAwB70G,EAAxB,EAA4B80G,UAA5B,EAAwCtD,IAAxC,EAA+C;AAE9C,WAAKxxG,EAAL,GAAUA,EAAV;AACA,WAAKwxG,IAAL,GAAYA,IAAZ;AACA,WAAK1lC,KAAL,GAAa,EAAb;AACA,WAAK+jC,QAAL,GAAgB8D,iBAAiB,CAAEmB,UAAU,CAAChuG,IAAb,CAAjC,CAL8C,CAO9C;AAEA;;AAED,aAASiuG,gBAAT,CAA2B/0G,EAA3B,EAA+B80G,UAA/B,EAA2CtD,IAA3C,EAAkD;AAEjD,WAAKxxG,EAAL,GAAUA,EAAV;AACA,WAAKwxG,IAAL,GAAYA,IAAZ;AACA,WAAK1lC,KAAL,GAAa,EAAb;AACA,WAAK5zD,IAAL,GAAY48F,UAAU,CAAC58F,IAAvB;AACA,WAAK23F,QAAL,GAAgB+E,kBAAkB,CAAEE,UAAU,CAAChuG,IAAb,CAAlC,CANiD,CAQjD;AAEA;;AAEDiuG,oBAAgB,CAACz7F,SAAjB,CAA2B07F,WAA3B,GAAyC,UAAW/zG,IAAX,EAAkB;AAE1D,UAAI6qE,KAAK,GAAG,KAAKA,KAAjB;;AAEA,UAAK7qE,IAAI,YAAYyhF,YAAhB,IAAgC5W,KAAK,CAACrqE,MAAN,KAAiBR,IAAI,CAACQ,MAA3D,EAAoE;AAEnE,aAAKqqE,KAAL,GAAa,IAAI4W,YAAJ,CAAkBzhF,IAAI,CAACQ,MAAvB,CAAb;AAEA;;AAED4/E,eAAS,CAAEvV,KAAF,EAAS7qE,IAAT,CAAT;AAEA,KAZD;;AAcA,aAASg0G,iBAAT,CAA4Bj1G,EAA5B,EAAiC;AAEhC,WAAKA,EAAL,GAAUA,EAAV;AAEA,WAAKk1G,GAAL,GAAW,EAAX;AACA,WAAK9lG,GAAL,GAAW,EAAX;AAEA;;AAED6lG,qBAAiB,CAAC37F,SAAlB,CAA4Bu2F,QAA5B,GAAuC,UAAWxV,EAAX,EAAenuF,KAAf,EAAsBirD,QAAtB,EAAiC;AAEvE,UAAM+9C,GAAG,GAAG,KAAKA,GAAjB;;AAEA,WAAM,IAAI9yG,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGmiF,GAAG,CAACzzG,MAAzB,EAAiCW,KAAC,KAAK2wB,CAAvC,EAA0C,EAAG3wB,KAA7C,EAAiD;AAEhD,YAAMwwB,CAAC,GAAGsiF,GAAG,CAAE9yG,KAAF,CAAb;AACAwwB,SAAC,CAACi9E,QAAF,CAAYxV,EAAZ,EAAgBnuF,KAAK,CAAE0mB,CAAC,CAAC5yB,EAAJ,CAArB,EAA+Bm3D,QAA/B;AAEA;AAED,KAXD,C,CAaA;AAEA;;;AAEA,QAAMg+C,UAAU,GAAG,0BAAnB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAASC,UAAT,CAAqB//D,SAArB,EAAgCggE,aAAhC,EAAgD;AAE/ChgE,eAAS,CAAC6/D,GAAV,CAAcpyG,IAAd,CAAoBuyG,aAApB;AACAhgE,eAAS,CAACjmC,GAAV,CAAeimG,aAAa,CAACr1G,EAA7B,IAAoCq1G,aAApC;AAEA;;AAED,aAASC,YAAT,CAAuBR,UAAvB,EAAmCtD,IAAnC,EAAyCn8D,SAAzC,EAAqD;AAEpD,UAAM5vC,IAAI,GAAGqvG,UAAU,CAAC3zG,IAAxB;AAAA,UACCo0G,UAAU,GAAG9vG,IAAI,CAAChE,MADnB,CAFoD,CAKpD;;AACA0zG,gBAAU,CAACK,SAAX,GAAuB,CAAvB;;AAEA,aAAQ,IAAR,EAAe;AAEd,YAAM12D,KAAK,GAAGq2D,UAAU,CAACz8B,IAAX,CAAiBjzE,IAAjB,CAAd;AAAA,YACCgwG,QAAQ,GAAGN,UAAU,CAACK,SADvB;AAGA,YAAIx1G,EAAE,GAAG8+C,KAAK,CAAE,CAAF,CAAd;AAAA,YACC42D,SAAS,GAAG52D,KAAK,CAAE,CAAF,CAAL,KAAe,GAD5B;AAAA,YAEC62D,SAAS,GAAG72D,KAAK,CAAE,CAAF,CAFlB;AAIA,YAAK42D,SAAL,EAAiB11G,EAAE,GAAGA,EAAE,GAAG,CAAV,CATH,CASgB;;AAE9B,YAAK21G,SAAS,KAAKnlG,SAAd,IAA2BmlG,SAAS,KAAK,GAAd,IAAqBF,QAAQ,GAAG,CAAX,KAAiBF,UAAtE,EAAmF;AAElF;AAEAH,oBAAU,CAAE//D,SAAF,EAAasgE,SAAS,KAAKnlG,SAAd,GACtB,IAAIqkG,aAAJ,CAAmB70G,EAAnB,EAAuB80G,UAAvB,EAAmCtD,IAAnC,CADsB,GAEtB,IAAIuD,gBAAJ,CAAsB/0G,EAAtB,EAA0B80G,UAA1B,EAAsCtD,IAAtC,CAFS,CAAV;AAIA;AAEA,SAVD,MAUO;AAEN;AAEA,cAAMpiG,GAAG,GAAGimC,SAAS,CAACjmC,GAAtB;AACA,cAAIoiC,IAAI,GAAGpiC,GAAG,CAAEpP,EAAF,CAAd;;AAEA,cAAKwxC,IAAI,KAAKhhC,SAAd,EAA0B;AAEzBghC,gBAAI,GAAG,IAAIyjE,iBAAJ,CAAuBj1G,EAAvB,CAAP;AACAo1G,sBAAU,CAAE//D,SAAF,EAAa7D,IAAb,CAAV;AAEA;;AAED6D,mBAAS,GAAG7D,IAAZ;AAEA;AAED;AAED,K,CAED;;;AAEA,aAASokE,aAAT,CAAwBvb,EAAxB,EAA4B4M,OAA5B,EAAsC;AAErC,WAAKiO,GAAL,GAAW,EAAX;AACA,WAAK9lG,GAAL,GAAW,EAAX;AAEA,UAAM2jB,CAAC,GAAGsnE,EAAE,CAACwb,mBAAH,CAAwB5O,OAAxB,EAAiC,KAAjC,CAAV;;AAEA,WAAM,IAAI7kG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG2wB,CAArB,EAAwB,EAAG3wB,KAA3B,EAA+B;AAE9B,YAAMioG,IAAI,GAAGhQ,EAAE,CAACyb,gBAAH,CAAqB7O,OAArB,EAA8B7kG,KAA9B,CAAb;AAAA,YACCovG,IAAI,GAAGnX,EAAE,CAAC0b,kBAAH,CAAuB9O,OAAvB,EAAgCoD,IAAI,CAAClpG,IAArC,CADR;AAGAm0G,oBAAY,CAAEjL,IAAF,EAAQmH,IAAR,EAAc,IAAd,CAAZ;AAEA;AAED;;AAEDoE,iBAAa,CAACt8F,SAAd,CAAwBu2F,QAAxB,GAAmC,UAAWxV,EAAX,EAAel5F,IAAf,EAAqB+K,KAArB,EAA4BirD,QAA5B,EAAuC;AAEzE,UAAMvkC,CAAC,GAAG,KAAKxjB,GAAL,CAAUjO,IAAV,CAAV;AAEA,UAAKyxB,CAAC,KAAKpiB,SAAX,EAAuBoiB,CAAC,CAACi9E,QAAF,CAAYxV,EAAZ,EAAgBnuF,KAAhB,EAAuBirD,QAAvB;AAEvB,KAND;;AAQAy+C,iBAAa,CAACt8F,SAAd,CAAwB08F,WAAxB,GAAsC,UAAW3b,EAAX,EAAevpF,MAAf,EAAuB3P,IAAvB,EAA8B;AAEnE,UAAM2gB,CAAC,GAAGhR,MAAM,CAAE3P,IAAF,CAAhB;AAEA,UAAK2gB,CAAC,KAAKtR,SAAX,EAAuB,KAAKq/F,QAAL,CAAexV,EAAf,EAAmBl5F,IAAnB,EAAyB2gB,CAAzB;AAEvB,KAND,C,CASA;;;AAEA8zF,iBAAa,CAACK,MAAd,GAAuB,UAAW5b,EAAX,EAAe6a,GAAf,EAAoBnpC,MAApB,EAA4B5U,QAA5B,EAAuC;AAE7D,WAAM,IAAI/0D,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGmiF,GAAG,CAACzzG,MAAzB,EAAiCW,KAAC,KAAK2wB,CAAvC,EAA0C,EAAG3wB,KAA7C,EAAiD;AAEhD,YAAMwwB,CAAC,GAAGsiF,GAAG,CAAE9yG,KAAF,CAAb;AAAA,YACC0f,CAAC,GAAGiqD,MAAM,CAAEn5C,CAAC,CAAC5yB,EAAJ,CADX;;AAGA,YAAK8hB,CAAC,CAACsC,WAAF,KAAkB,KAAvB,EAA+B;AAE9B;AACAwO,WAAC,CAACi9E,QAAF,CAAYxV,EAAZ,EAAgBv4E,CAAC,CAAC5V,KAAlB,EAAyBirD,QAAzB;AAEA;AAED;AAED,KAhBD;;AAkBAy+C,iBAAa,CAACM,YAAd,GAA6B,UAAWhB,GAAX,EAAgBnpC,MAAhB,EAAyB;AAErD,UAAMl5C,CAAC,GAAG,EAAV;;AAEA,WAAM,IAAIzwB,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGmiF,GAAG,CAACzzG,MAAzB,EAAiCW,KAAC,KAAK2wB,CAAvC,EAA0C,EAAG3wB,KAA7C,EAAiD;AAEhD,YAAMwwB,CAAC,GAAGsiF,GAAG,CAAE9yG,KAAF,CAAb;AACA,YAAKwwB,CAAC,CAAC5yB,EAAF,IAAQ+rE,MAAb,EAAsBl5C,CAAC,CAAC/vB,IAAF,CAAQ8vB,CAAR;AAEtB;;AAED,aAAOC,CAAP;AAEA,KAbD;;AAeA,aAASsjF,WAAT,CAAsB9b,EAAtB,EAA0BvzF,IAA1B,EAAgCm4B,MAAhC,EAAyC;AAExC,UAAMw1D,MAAM,GAAG4F,EAAE,CAAC+b,YAAH,CAAiBtvG,IAAjB,CAAf;AAEAuzF,QAAE,CAACgc,YAAH,CAAiB5hB,MAAjB,EAAyBx1D,MAAzB;AACAo7D,QAAE,CAACic,aAAH,CAAkB7hB,MAAlB;AAEA,aAAOA,MAAP;AAEA;;AAED,QAAI8hB,cAAc,GAAG,CAArB;;AAEA,aAASC,cAAT,CAAyBv3E,MAAzB,EAAkC;AAEjC,UAAM6vE,KAAK,GAAG7vE,MAAM,CAAC9vB,KAAP,CAAc,IAAd,CAAd;;AAEA,WAAM,IAAI/M,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG0sG,KAAK,CAACrtG,MAA3B,EAAmCW,KAAC,EAApC,EAA0C;AAEzC0sG,aAAK,CAAE1sG,KAAF,CAAL,GAAeA,KAAC,GAAG,CAAN,GAAY,IAAZ,GAAmB0sG,KAAK,CAAE1sG,KAAF,CAArC;AAEA;;AAED,aAAO0sG,KAAK,CAACv7E,IAAN,CAAY,IAAZ,CAAP;AAEA;;AAED,aAASkjF,qBAAT,CAAgCtgD,QAAhC,EAA2C;AAE1C,cAASA,QAAT;AAEC,aAAKvN,cAAL;AACC,iBAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;;AACD,aAAKC,YAAL;AACC,iBAAO,CAAE,MAAF,EAAU,WAAV,CAAP;;AACD,aAAKE,YAAL;AACC,iBAAO,CAAE,MAAF,EAAU,WAAV,CAAP;;AACD,aAAKE,aAAL;AACC,iBAAO,CAAE,MAAF,EAAU,gBAAV,CAAP;;AACD,aAAKC,cAAL;AACC,iBAAO,CAAE,MAAF,EAAU,iBAAV,CAAP;;AACD,aAAKC,YAAL;AACC,iBAAO,CAAE,MAAF,EAAU,kBAAV,CAAP;;AACD,aAAKL,aAAL;AACC,iBAAO,CAAE,OAAF,EAAW,kCAAX,CAAP;;AACD,aAAKE,cAAL;AACC,iBAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;;AACD;AACCzlD,iBAAO,CAAC2W,IAAR,CAAc,2CAAd,EAA2Di8C,QAA3D;AACA,iBAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;AApBF;AAwBA;;AAED,aAASugD,eAAT,CAA0Brc,EAA1B,EAA8B5F,MAA9B,EAAsC3tF,IAAtC,EAA6C;AAE5C,UAAM6G,MAAM,GAAG0sF,EAAE,CAACsc,kBAAH,CAAuBliB,MAAvB,EAA+B,KAA/B,CAAf;AACA,UAAMjxF,GAAG,GAAG62F,EAAE,CAACuc,gBAAH,CAAqBniB,MAArB,EAA8BlzF,IAA9B,EAAZ;AAEA,UAAKoM,MAAM,IAAInK,GAAG,KAAK,EAAvB,EAA4B,OAAO,EAAP,CALgB,CAO5C;AACA;;AAEA,UAAMu7C,MAAM,GAAGs7C,EAAE,CAACwc,eAAH,CAAoBpiB,MAApB,CAAf;AAEA,aAAO,8CAA8C3tF,IAA9C,GAAqD,IAArD,GAA4DtD,GAA5D,GAAkEgzG,cAAc,CAAEz3D,MAAF,CAAvF;AAEA;;AAED,aAAS+3D,wBAAT,CAAmCC,YAAnC,EAAiD5gD,QAAjD,EAA4D;AAE3D,UAAMwiB,UAAU,GAAG89B,qBAAqB,CAAEtgD,QAAF,CAAxC;AACA,aAAO,UAAU4gD,YAAV,GAAyB,0BAAzB,GAAsDp+B,UAAU,CAAE,CAAF,CAAhE,GAAwE,UAAxE,GAAqFA,UAAU,CAAE,CAAF,CAA/F,GAAuG,KAA9G;AAEA;;AAED,aAASq+B,wBAAT,CAAmCD,YAAnC,EAAiD5gD,QAAjD,EAA4D;AAE3D,UAAMwiB,UAAU,GAAG89B,qBAAqB,CAAEtgD,QAAF,CAAxC;AACA,aAAO,UAAU4gD,YAAV,GAAyB,kCAAzB,GAA8Dp+B,UAAU,CAAE,CAAF,CAAxE,GAAgFA,UAAU,CAAE,CAAF,CAA1F,GAAkG,KAAzG;AAEA;;AAED,aAASs+B,sBAAT,CAAiCF,YAAjC,EAA+C7Q,WAA/C,EAA6D;AAE5D,UAAIgR,eAAJ;;AAEA,cAAShR,WAAT;AAEC,aAAK/jD,iBAAL;AACC+0D,yBAAe,GAAG,QAAlB;AACA;;AAED,aAAK90D,mBAAL;AACC80D,yBAAe,GAAG,UAAlB;AACA;;AAED,aAAK70D,iBAAL;AACC60D,yBAAe,GAAG,iBAAlB;AACA;;AAED,aAAK50D,qBAAL;AACC40D,yBAAe,GAAG,YAAlB;AACA;;AAED,aAAK30D,iBAAL;AACC20D,yBAAe,GAAG,QAAlB;AACA;;AAED;AACC3zG,iBAAO,CAAC2W,IAAR,CAAc,8CAAd,EAA8DgsF,WAA9D;AACAgR,yBAAe,GAAG,QAAlB;AAxBF;;AA4BA,aAAO,UAAUH,YAAV,GAAyB,0BAAzB,GAAsDG,eAAtD,GAAwE,yBAA/E;AAEA;;AAED,aAASC,kBAAT,CAA6BxrC,UAA7B,EAA0C;AAEzC,UAAMplC,MAAM,GAAG,CACZolC,UAAU,CAACyrC,oBAAX,IAAmCzrC,UAAU,CAAC0rC,YAA9C,IAA8D1rC,UAAU,CAAC4S,OAAzE,IAAoF5S,UAAU,CAAC2rC,qBAA/F,IAAwH3rC,UAAU,CAACqS,kBAAnI,IAAyJrS,UAAU,CAACkP,WAApK,IAAmLlP,UAAU,CAAC4rC,QAAX,KAAwB,UAA7M,GAA4N,iDAA5N,GAAgR,EADlQ,EAEd,CAAE5rC,UAAU,CAAC6rC,kBAAX,IAAiC7rC,UAAU,CAACy/B,sBAA9C,KAA0Ez/B,UAAU,CAAC8rC,0BAArF,GAAkH,uCAAlH,GAA4J,EAF9I,EAGZ9rC,UAAU,CAAC+rC,oBAAX,IAAmC/rC,UAAU,CAACgsC,4BAAhD,GAAiF,0CAAjF,GAA8H,EAHhH,EAId,CAAEhsC,UAAU,CAACisC,yBAAX,IAAwCjsC,UAAU,CAACwT,MAArD,KAAiExT,UAAU,CAACksC,iCAA5E,GAAgH,+CAAhH,GAAkK,EAJpJ,CAAf;AAOA,aAAOtxE,MAAM,CAACrlC,MAAP,CAAe42G,eAAf,EAAiCvkF,IAAjC,CAAuC,IAAvC,CAAP;AAEA;;AAED,aAASwkF,eAAT,CAA0B1mB,OAA1B,EAAoC;AAEnC,UAAM9qD,MAAM,GAAG,EAAf;;AAEA,WAAM,IAAMplC,IAAZ,IAAoBkwF,OAApB,EAA8B;AAE7B,YAAMnlF,KAAK,GAAGmlF,OAAO,CAAElwF,IAAF,CAArB;AAEA,YAAK+K,KAAK,KAAK,KAAf,EAAuB;AAEvBq6B,cAAM,CAACzjC,IAAP,CAAa,aAAa3B,IAAb,GAAoB,GAApB,GAA0B+K,KAAvC;AAEA;;AAED,aAAOq6B,MAAM,CAAChT,IAAP,CAAa,IAAb,CAAP;AAEA;;AAED,aAASykF,uBAAT,CAAkC3d,EAAlC,EAAsC4M,OAAtC,EAAgD;AAE/C,UAAM/qD,UAAU,GAAG,EAAnB;AAEA,UAAMnpB,CAAC,GAAGsnE,EAAE,CAACwb,mBAAH,CAAwB5O,OAAxB,EAAiC,KAAjC,CAAV;;AAEA,WAAM,IAAI7kG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG2wB,CAArB,EAAwB3wB,KAAC,EAAzB,EAA+B;AAE9B,YAAMioG,IAAI,GAAGhQ,EAAE,CAAC4d,eAAH,CAAoBhR,OAApB,EAA6B7kG,KAA7B,CAAb;AACA,YAAMjB,IAAI,GAAGkpG,IAAI,CAAClpG,IAAlB,CAH8B,CAK9B;;AAEA+6C,kBAAU,CAAE/6C,IAAF,CAAV,GAAqBk5F,EAAE,CAAC6d,iBAAH,CAAsBjR,OAAtB,EAA+B9lG,IAA/B,CAArB;AAEA;;AAED,aAAO+6C,UAAP;AAEA;;AAED,aAAS47D,eAAT,CAA0B74E,MAA1B,EAAmC;AAElC,aAAOA,MAAM,KAAK,EAAlB;AAEA;;AAED,aAASk5E,gBAAT,CAA2Bl5E,MAA3B,EAAmC0sC,UAAnC,EAAgD;AAE/C,aAAO1sC,MAAM,CACXvL,OADK,CACI,iBADJ,EACuBi4C,UAAU,CAACysC,YADlC,EAEL1kF,OAFK,CAEI,kBAFJ,EAEwBi4C,UAAU,CAAC0sC,aAFnC,EAGL3kF,OAHK,CAGI,uBAHJ,EAG6Bi4C,UAAU,CAAC2sC,iBAHxC,EAIL5kF,OAJK,CAII,mBAJJ,EAIyBi4C,UAAU,CAAC4sC,cAJpC,EAKL7kF,OALK,CAKI,kBALJ,EAKwBi4C,UAAU,CAAC6sC,aALnC,EAML9kF,OANK,CAMI,wBANJ,EAM8Bi4C,UAAU,CAAC8sC,kBANzC,EAOL/kF,OAPK,CAOI,yBAPJ,EAO+Bi4C,UAAU,CAAC+sC,mBAP1C,EAQLhlF,OARK,CAQI,0BARJ,EAQgCi4C,UAAU,CAACgtC,oBAR3C,CAAP;AAUA;;AAED,aAASC,wBAAT,CAAmC35E,MAAnC,EAA2C0sC,UAA3C,EAAwD;AAEvD,aAAO1sC,MAAM,CACXvL,OADK,CACI,sBADJ,EAC4Bi4C,UAAU,CAACktC,iBADvC,EAELnlF,OAFK,CAEI,wBAFJ,EAEgCi4C,UAAU,CAACktC,iBAAX,GAA+BltC,UAAU,CAACmtC,mBAF1E,CAAP;AAIA,K,CAED;;;AAEA,QAAMC,cAAc,GAAG,kCAAvB;;AAEA,aAASC,eAAT,CAA0B/5E,MAA1B,EAAmC;AAElC,aAAOA,MAAM,CAACvL,OAAP,CAAgBqlF,cAAhB,EAAgCE,eAAhC,CAAP;AAEA;;AAED,aAASA,eAAT,CAA0Bn6D,KAA1B,EAAiCo6D,OAAjC,EAA2C;AAE1C,UAAMj6E,MAAM,GAAGykE,WAAW,CAAEwV,OAAF,CAA1B;;AAEA,UAAKj6E,MAAM,KAAKzuB,SAAhB,EAA4B;AAE3B,cAAM,IAAI7Q,KAAJ,CAAW,+BAA+Bu5G,OAA/B,GAAyC,GAApD,CAAN;AAEA;;AAED,aAAOF,eAAe,CAAE/5E,MAAF,CAAtB;AAEA,K,CAED;;;AAEA,QAAMk6E,2BAA2B,GAAG,8FAApC;AACA,QAAMC,iBAAiB,GAAG,iIAA1B;;AAEA,aAASC,WAAT,CAAsBp6E,MAAtB,EAA+B;AAE9B,aAAOA,MAAM,CACXvL,OADK,CACI0lF,iBADJ,EACuBE,YADvB,EAEL5lF,OAFK,CAEIylF,2BAFJ,EAEiCI,sBAFjC,CAAP;AAIA;;AAED,aAASA,sBAAT,CAAiCz6D,KAAjC,EAAwC+1B,KAAxC,EAA+Cp7C,GAA/C,EAAoD+/E,OAApD,EAA8D;AAE7Dj2G,aAAO,CAAC2W,IAAR,CAAc,qHAAd;AACA,aAAOo/F,YAAY,CAAEx6D,KAAF,EAAS+1B,KAAT,EAAgBp7C,GAAhB,EAAqB+/E,OAArB,CAAnB;AAEA;;AAED,aAASF,YAAT,CAAuBx6D,KAAvB,EAA8B+1B,KAA9B,EAAqCp7C,GAArC,EAA0C+/E,OAA1C,EAAoD;AAEnD,UAAIv6E,MAAM,GAAG,EAAb;;AAEA,WAAM,IAAI78B,KAAC,GAAGyG,QAAQ,CAAEgsE,KAAF,CAAtB,EAAiCzyE,KAAC,GAAGyG,QAAQ,CAAE4wB,GAAF,CAA7C,EAAsDr3B,KAAC,EAAvD,EAA6D;AAE5D68B,cAAM,IAAIu6E,OAAO,CACf9lF,OADQ,CACC,UADD,EACa,OAAOtxB,KAAP,GAAW,IADxB,EAERsxB,OAFQ,CAEC,sBAFD,EAEyBtxB,KAFzB,CAAV;AAIA;;AAED,aAAO68B,MAAP;AAEA,K,CAED;;;AAEA,aAASw6E,iBAAT,CAA4B9tC,UAA5B,EAAyC;AAExC,UAAI+tC,eAAe,GAAG,eAAe/tC,UAAU,CAAC2Q,SAA1B,GAAsC,qBAAtC,GAA8D3Q,UAAU,CAAC2Q,SAAzE,GAAqF,OAA3G;;AAEA,UAAK3Q,UAAU,CAAC2Q,SAAX,KAAyB,OAA9B,EAAwC;AAEvCo9B,uBAAe,IAAI,0BAAnB;AAEA,OAJD,MAIO,IAAK/tC,UAAU,CAAC2Q,SAAX,KAAyB,SAA9B,EAA0C;AAEhDo9B,uBAAe,IAAI,4BAAnB;AAEA,OAJM,MAIA,IAAK/tC,UAAU,CAAC2Q,SAAX,KAAyB,MAA9B,EAAuC;AAE7Co9B,uBAAe,IAAI,yBAAnB;AAEA;;AAED,aAAOA,eAAP;AAEA;;AAED,aAASC,2BAAT,CAAsChuC,UAAtC,EAAmD;AAElD,UAAIiuC,mBAAmB,GAAG,sBAA1B;;AAEA,UAAKjuC,UAAU,CAACkuC,aAAX,KAA6Bp6D,YAAlC,EAAiD;AAEhDm6D,2BAAmB,GAAG,oBAAtB;AAEA,OAJD,MAIO,IAAKjuC,UAAU,CAACkuC,aAAX,KAA6Bn6D,gBAAlC,EAAqD;AAE3Dk6D,2BAAmB,GAAG,yBAAtB;AAEA,OAJM,MAIA,IAAKjuC,UAAU,CAACkuC,aAAX,KAA6Bl6D,YAAlC,EAAiD;AAEvDi6D,2BAAmB,GAAG,oBAAtB;AAEA;;AAED,aAAOA,mBAAP;AAEA;;AAED,aAASE,wBAAT,CAAmCnuC,UAAnC,EAAgD;AAE/C,UAAIouC,gBAAgB,GAAG,kBAAvB;;AAEA,UAAKpuC,UAAU,CAACwT,MAAhB,EAAyB;AAExB,gBAASxT,UAAU,CAACquC,UAApB;AAEC,eAAKv3D,qBAAL;AACA,eAAKC,qBAAL;AACCq3D,4BAAgB,GAAG,kBAAnB;AACA;;AAED,eAAKl3D,uBAAL;AACA,eAAKC,uBAAL;AACCi3D,4BAAgB,GAAG,qBAAnB;AACA;;AAED,eAAKp3D,gCAAL;AACA,eAAKC,gCAAL;AACCm3D,4BAAgB,GAAG,qBAAnB;AACA;AAfF;AAmBA;;AAED,aAAOA,gBAAP;AAEA;;AAED,aAASE,wBAAT,CAAmCtuC,UAAnC,EAAgD;AAE/C,UAAIuuC,gBAAgB,GAAG,wBAAvB;;AAEA,UAAKvuC,UAAU,CAACwT,MAAhB,EAAyB;AAExB,gBAASxT,UAAU,CAACquC,UAApB;AAEC,eAAKt3D,qBAAL;AACA,eAAKE,gCAAL;AACA,eAAKE,uBAAL;AAECo3D,4BAAgB,GAAG,wBAAnB;AACA;AAPF;AAWA;;AAED,aAAOA,gBAAP;AAEA;;AAED,aAASC,4BAAT,CAAuCxuC,UAAvC,EAAoD;AAEnD,UAAIyuC,oBAAoB,GAAG,sBAA3B;;AAEA,UAAKzuC,UAAU,CAACwT,MAAhB,EAAyB;AAExB,gBAASxT,UAAU,CAAC2T,OAApB;AAEC,eAAKv9B,iBAAL;AACCq4D,gCAAoB,GAAG,0BAAvB;AACA;;AAED,eAAKp4D,YAAL;AACCo4D,gCAAoB,GAAG,qBAAvB;AACA;;AAED,eAAKn4D,YAAL;AACCm4D,gCAAoB,GAAG,qBAAvB;AACA;AAZF;AAgBA;;AAED,aAAOA,oBAAP;AAEA;;AAED,aAASC,YAAT,CAAuBpqF,QAAvB,EAAiCqqF,QAAjC,EAA2C3uC,UAA3C,EAAuDi7B,aAAvD,EAAuE;AAEtE,UAAMvM,EAAE,GAAGpqE,QAAQ,CAACqlC,UAAT,EAAX;AAEA,UAAM+7B,OAAO,GAAG1lB,UAAU,CAAC0lB,OAA3B;AAEA,UAAIC,YAAY,GAAG3lB,UAAU,CAAC2lB,YAA9B;AACA,UAAIC,cAAc,GAAG5lB,UAAU,CAAC4lB,cAAhC;AAEA,UAAMqoB,mBAAmB,GAAGD,2BAA2B,CAAEhuC,UAAF,CAAvD;AACA,UAAMouC,gBAAgB,GAAGD,wBAAwB,CAAEnuC,UAAF,CAAjD;AACA,UAAMuuC,gBAAgB,GAAGD,wBAAwB,CAAEtuC,UAAF,CAAjD;AACA,UAAMyuC,oBAAoB,GAAGD,4BAA4B,CAAExuC,UAAF,CAAzD;AAGA,UAAM4uC,iBAAiB,GAAKtqF,QAAQ,CAAC6oD,WAAT,GAAuB,CAAzB,GAA+B7oD,QAAQ,CAAC6oD,WAAxC,GAAsD,GAAhF;AAEA,UAAM0hC,gBAAgB,GAAG7uC,UAAU,CAAC4uB,QAAX,GAAsB,EAAtB,GAA2B4c,kBAAkB,CAAExrC,UAAF,CAAtE;AAEA,UAAM8uC,aAAa,GAAG1C,eAAe,CAAE1mB,OAAF,CAArC;AAEA,UAAM4V,OAAO,GAAG5M,EAAE,CAACqgB,aAAH,EAAhB;AAEA,UAAIC,YAAJ,EAAkBC,cAAlB;;AAEA,UAAKjvC,UAAU,CAACkvC,mBAAhB,EAAsC;AAErCF,oBAAY,GAAG,CAEdF,aAFc,EAIbv5G,MAJa,CAIL42G,eAJK,EAIavkF,IAJb,CAImB,IAJnB,CAAf;;AAMA,YAAKonF,YAAY,CAACl5G,MAAb,GAAsB,CAA3B,EAA+B;AAE9Bk5G,sBAAY,IAAI,IAAhB;AAEA;;AAEDC,sBAAc,GAAG,CAEhBJ,gBAFgB,EAGhBC,aAHgB,EAKfv5G,MALe,CAKP42G,eALO,EAKWvkF,IALX,CAKiB,IALjB,CAAjB;;AAOA,YAAKqnF,cAAc,CAACn5G,MAAf,GAAwB,CAA7B,EAAiC;AAEhCm5G,wBAAc,IAAI,IAAlB;AAEA;AAED,OA3BD,MA2BO;AAEND,oBAAY,GAAG,CAEdlB,iBAAiB,CAAE9tC,UAAF,CAFH,EAId,yBAAyBA,UAAU,CAACmvC,UAJtB,EAMdL,aANc,EAQd9uC,UAAU,CAACovC,UAAX,GAAwB,wBAAxB,GAAmD,EARrC,EASdpvC,UAAU,CAACqvC,sBAAX,GAAoC,yBAApC,GAAgE,EATlD,EAWd,0BAA0BT,iBAXZ,EAad,uBAAuB5uC,UAAU,CAACsvC,QAbpB,EAcZtvC,UAAU,CAACuvC,MAAX,IAAqBvvC,UAAU,CAACS,GAAlC,GAA0C,iBAA1C,GAA8D,EAdhD,EAeZT,UAAU,CAACuvC,MAAX,IAAqBvvC,UAAU,CAACwvC,OAAlC,GAA8C,kBAA9C,GAAmE,EAfrD,EAiBdxvC,UAAU,CAACv8D,GAAX,GAAiB,iBAAjB,GAAqC,EAjBvB,EAkBdu8D,UAAU,CAACwT,MAAX,GAAoB,oBAApB,GAA2C,EAlB7B,EAmBdxT,UAAU,CAACwT,MAAX,GAAoB,aAAa+6B,gBAAjC,GAAoD,EAnBtC,EAoBdvuC,UAAU,CAACyS,QAAX,GAAsB,sBAAtB,GAA+C,EApBjC,EAqBdzS,UAAU,CAAC0S,KAAX,GAAmB,mBAAnB,GAAyC,EArB3B,EAsBd1S,UAAU,CAACsT,WAAX,GAAyB,yBAAzB,GAAqD,EAtBvC,EAuBdtT,UAAU,CAAC4S,OAAX,GAAqB,qBAArB,GAA6C,EAvB/B,EAwBd5S,UAAU,CAAC8S,SAAX,GAAuB,uBAAvB,GAAiD,EAxBnC,EAyBZ9S,UAAU,CAAC8S,SAAX,IAAwB9S,UAAU,CAACyvC,oBAArC,GAA8D,+BAA9D,GAAgG,EAzBlF,EA0BZzvC,UAAU,CAAC8S,SAAX,IAAwB9S,UAAU,CAAC2rC,qBAArC,GAA+D,gCAA/D,GAAkG,EA1BpF,EA4Bd3rC,UAAU,CAACmS,YAAX,GAA0B,0BAA1B,GAAuD,EA5BzC,EA6BdnS,UAAU,CAACoS,qBAAX,GAAmC,oCAAnC,GAA0E,EA7B5D,EA8BdpS,UAAU,CAACqS,kBAAX,GAAgC,iCAAhC,GAAoE,EA9BtD,EA+BdrS,UAAU,CAACiT,eAAX,IAA8BjT,UAAU,CAACqvC,sBAAzC,GAAkE,6BAAlE,GAAkG,EA/BpF,EAgCdrvC,UAAU,CAACuT,WAAX,GAAyB,yBAAzB,GAAqD,EAhCvC,EAiCdvT,UAAU,CAACoT,YAAX,GAA0B,0BAA1B,GAAuD,EAjCzC,EAkCdpT,UAAU,CAACqT,YAAX,GAA0B,0BAA1B,GAAuD,EAlCzC,EAmCdrT,UAAU,CAACwS,QAAX,GAAsB,sBAAtB,GAA+C,EAnCjC,EAoCdxS,UAAU,CAACk5B,eAAX,GAA6B,6BAA7B,GAA6D,EApC/C,EAsCdl5B,UAAU,CAAC0vC,cAAX,GAA4B,qBAA5B,GAAoD,EAtCtC,EAuCd1vC,UAAU,CAAC6O,YAAX,GAA0B,mBAA1B,GAAgD,EAvClC,EAwCd7O,UAAU,CAAC2Y,SAAX,GAAuB,gBAAvB,GAA0C,EAxC5B,EAyCd3Y,UAAU,CAAC2vC,aAAX,GAA2B,yBAA3B,GAAuD,EAzCzC,EA2Cd3vC,UAAU,CAACkP,WAAX,GAAyB,qBAAzB,GAAiD,EA3CnC,EA6CdlP,UAAU,CAACwU,QAAX,GAAsB,sBAAtB,GAA+C,EA7CjC,EA8CdxU,UAAU,CAAC4vC,gBAAX,GAA8B,sBAA9B,GAAuD,EA9CzC,EAgDd5vC,UAAU,CAACsU,YAAX,GAA0B,0BAA1B,GAAuD,EAhDzC,EAiDdtU,UAAU,CAACuU,YAAX,IAA2BvU,UAAU,CAACkP,WAAX,KAA2B,KAAtD,GAA8D,0BAA9D,GAA2F,EAjD7E,EAkDdlP,UAAU,CAAC6vC,WAAX,GAAyB,sBAAzB,GAAkD,EAlDpC,EAmDd7vC,UAAU,CAAC8vC,SAAX,GAAuB,oBAAvB,GAA8C,EAnDhC,EAqDd9vC,UAAU,CAAC+vC,gBAAX,GAA8B,uBAA9B,GAAwD,EArD1C,EAsDd/vC,UAAU,CAAC+vC,gBAAX,GAA8B,aAAa9B,mBAA3C,GAAiE,EAtDnD,EAwDdjuC,UAAU,CAAC8T,eAAX,GAA6B,6BAA7B,GAA6D,EAxD/C,EA0Dd9T,UAAU,CAACy/B,sBAAX,GAAoC,yBAApC,GAAgE,EA1DlD,EA2DZz/B,UAAU,CAACy/B,sBAAX,IAAqCz/B,UAAU,CAAC8rC,0BAAlD,GAAiF,6BAAjF,GAAiH,EA3DnG,EA6Dd,2BA7Dc,EA8Dd,+BA9Dc,EA+Dd,gCA/Dc,EAgEd,0BAhEc,EAiEd,4BAjEc,EAkEd,8BAlEc,EAmEd,8BAnEc,EAqEd,uBArEc,EAuEd,iCAvEc,EAyEd,QAzEc,EA2Ed,0BA3Ec,EA4Ed,wBA5Ec,EA6Ed,oBA7Ec,EA+Ed,oBA/Ec,EAiFd,0BAjFc,EAmFd,QAnFc,EAqFd,kBArFc,EAuFd,wBAvFc,EAyFd,QAzFc,EA2Fd,yBA3Fc,EA6Fd,+BA7Fc,EA8Fd,+BA9Fc,EA+Fd,+BA/Fc,EAgGd,+BAhGc,EAkGd,0BAlGc,EAoGd,gCApGc,EAqGd,gCArGc,EAsGd,gCAtGc,EAuGd,gCAvGc,EAyGd,QAzGc,EA2Gd,gCA3Gc,EA4Gd,gCA5Gc,EA6Gd,gCA7Gc,EA8Gd,gCA9Gc,EAgHd,SAhHc,EAkHd,QAlHc,EAoHd,qBApHc,EAsHd,4BAtHc,EAuHd,6BAvHc,EAyHd,QAzHc,EA2Hd,IA3Hc,EA6Hbv2G,MA7Ha,CA6HL42G,eA7HK,EA6HavkF,IA7Hb,CA6HmB,IA7HnB,CAAf;AA+HAqnF,sBAAc,GAAG,CAEhBJ,gBAFgB,EAIhBf,iBAAiB,CAAE9tC,UAAF,CAJD,EAMhB,yBAAyBA,UAAU,CAACmvC,UANpB,EAQhBL,aARgB,EAUhB9uC,UAAU,CAACgR,SAAX,GAAuB,uBAAuBhR,UAAU,CAACgR,SAAlC,IAAgDhR,UAAU,CAACgR,SAAX,GAAuB,CAAvB,GAA2B,EAA3B,GAAgC,IAAhF,CAAvB,GAAgH,EAVhG,EAUoG;AAEpH,kCAA0B49B,iBAZV,EAcd5uC,UAAU,CAACuvC,MAAX,IAAqBvvC,UAAU,CAACS,GAAlC,GAA0C,iBAA1C,GAA8D,EAd9C,EAedT,UAAU,CAACuvC,MAAX,IAAqBvvC,UAAU,CAACwvC,OAAlC,GAA8C,kBAA9C,GAAmE,EAfnD,EAiBhBxvC,UAAU,CAACv8D,GAAX,GAAiB,iBAAjB,GAAqC,EAjBrB,EAkBhBu8D,UAAU,CAACuS,MAAX,GAAoB,oBAApB,GAA2C,EAlB3B,EAmBhBvS,UAAU,CAACwT,MAAX,GAAoB,oBAApB,GAA2C,EAnB3B,EAoBhBxT,UAAU,CAACwT,MAAX,GAAoB,aAAa46B,gBAAjC,GAAoD,EApBpC,EAqBhBpuC,UAAU,CAACwT,MAAX,GAAoB,aAAa+6B,gBAAjC,GAAoD,EArBpC,EAsBhBvuC,UAAU,CAACwT,MAAX,GAAoB,aAAai7B,oBAAjC,GAAwD,EAtBxC,EAuBhBzuC,UAAU,CAACyS,QAAX,GAAsB,sBAAtB,GAA+C,EAvB/B,EAwBhBzS,UAAU,CAAC0S,KAAX,GAAmB,mBAAnB,GAAyC,EAxBzB,EAyBhB1S,UAAU,CAACsT,WAAX,GAAyB,yBAAzB,GAAqD,EAzBrC,EA0BhBtT,UAAU,CAAC4S,OAAX,GAAqB,qBAArB,GAA6C,EA1B7B,EA2BhB5S,UAAU,CAAC8S,SAAX,GAAuB,uBAAvB,GAAiD,EA3BjC,EA4Bd9S,UAAU,CAAC8S,SAAX,IAAwB9S,UAAU,CAACyvC,oBAArC,GAA8D,+BAA9D,GAAgG,EA5BhF,EA6BdzvC,UAAU,CAAC8S,SAAX,IAAwB9S,UAAU,CAAC2rC,qBAArC,GAA+D,gCAA/D,GAAkG,EA7BlF,EA8BhB3rC,UAAU,CAACmS,YAAX,GAA0B,0BAA1B,GAAuD,EA9BvC,EA+BhBnS,UAAU,CAACoS,qBAAX,GAAmC,oCAAnC,GAA0E,EA/B1D,EAgChBpS,UAAU,CAACqS,kBAAX,GAAgC,iCAAhC,GAAoE,EAhCpD,EAiChBrS,UAAU,CAACuT,WAAX,GAAyB,yBAAzB,GAAqD,EAjCrC,EAkChBvT,UAAU,CAACoT,YAAX,GAA0B,0BAA1B,GAAuD,EAlCvC,EAmChBpT,UAAU,CAACqT,YAAX,GAA0B,0BAA1B,GAAuD,EAnCvC,EAoChBrT,UAAU,CAACwS,QAAX,GAAsB,sBAAtB,GAA+C,EApC/B,EAsChBxS,UAAU,CAAC4R,KAAX,GAAmB,mBAAnB,GAAyC,EAtCzB,EAuChB5R,UAAU,CAACk5B,eAAX,GAA6B,6BAA7B,GAA6D,EAvC7C,EAyChBl5B,UAAU,CAAC0vC,cAAX,GAA4B,qBAA5B,GAAoD,EAzCpC,EA0ChB1vC,UAAU,CAAC6O,YAAX,GAA0B,mBAA1B,GAAgD,EA1ChC,EA2ChB7O,UAAU,CAAC2Y,SAAX,GAAuB,gBAAvB,GAA0C,EA3C1B,EA4ChB3Y,UAAU,CAAC2vC,aAAX,GAA2B,yBAA3B,GAAuD,EA5CvC,EA8ChB3vC,UAAU,CAAC6T,WAAX,GAAyB,yBAAzB,GAAqD,EA9CrC,EAgDhB7T,UAAU,CAACkP,WAAX,GAAyB,qBAAzB,GAAiD,EAhDjC,EAkDhBlP,UAAU,CAAC6vC,WAAX,GAAyB,sBAAzB,GAAkD,EAlDlC,EAmDhB7vC,UAAU,CAAC8vC,SAAX,GAAuB,oBAAvB,GAA8C,EAnD9B,EAqDhB9vC,UAAU,CAAC+vC,gBAAX,GAA8B,uBAA9B,GAAwD,EArDxC,EAsDhB/vC,UAAU,CAAC+vC,gBAAX,GAA8B,aAAa9B,mBAA3C,GAAiE,EAtDjD,EAwDhBjuC,UAAU,CAACiR,kBAAX,GAAgC,6BAAhC,GAAgE,EAxDhD,EA0DhBjR,UAAU,CAACgwC,uBAAX,GAAqC,mCAArC,GAA2E,EA1D3D,EA4DhBhwC,UAAU,CAACy/B,sBAAX,GAAoC,yBAApC,GAAgE,EA5DhD,EA6Ddz/B,UAAU,CAACy/B,sBAAX,IAAqCz/B,UAAU,CAAC8rC,0BAAlD,GAAiF,6BAAjF,GAAiH,EA7DjG,EA+Dd,CAAE9rC,UAAU,CAACisC,yBAAX,IAAwCjsC,UAAU,CAACwT,MAArD,KAAiExT,UAAU,CAACksC,iCAA9E,GAAoH,yBAApH,GAAgJ,EA/DhI,EAiEhB,0BAjEgB,EAkEhB,8BAlEgB,EAmEhB,8BAnEgB,EAqEdlsC,UAAU,CAACu6B,WAAX,KAA2BhkD,aAA7B,GAA+C,sBAA/C,GAAwE,EArExD,EAsEdypB,UAAU,CAACu6B,WAAX,KAA2BhkD,aAA7B,GAA+CwhD,WAAW,CAAE,2BAAF,CAA1D,GAA4F,EAtE5E,EAsEgF;AAC9F/3B,kBAAU,CAACu6B,WAAX,KAA2BhkD,aAA7B,GAA+C+0D,sBAAsB,CAAE,aAAF,EAAiBtrC,UAAU,CAACu6B,WAA5B,CAArE,GAAiH,EAvEjG,EAyEhBv6B,UAAU,CAAC+Q,SAAX,GAAuB,mBAAvB,GAA6C,EAzE7B,EA2EhBgnB,WAAW,CAAE,yBAAF,CA3EK,EA2E0B;AAC1C/3B,kBAAU,CAACv8D,GAAX,GAAiB0nG,wBAAwB,CAAE,kBAAF,EAAsBnrC,UAAU,CAACiwC,WAAjC,CAAzC,GAA0F,EA5E1E,EA6EhBjwC,UAAU,CAACuS,MAAX,GAAoB44B,wBAAwB,CAAE,qBAAF,EAAyBnrC,UAAU,CAACkwC,cAApC,CAA5C,GAAmG,EA7EnF,EA8EhBlwC,UAAU,CAACwT,MAAX,GAAoB23B,wBAAwB,CAAE,qBAAF,EAAyBnrC,UAAU,CAACmwC,cAApC,CAA5C,GAAmG,EA9EnF,EA+EhBnwC,UAAU,CAACsT,WAAX,GAAyB63B,wBAAwB,CAAE,0BAAF,EAA8BnrC,UAAU,CAACowC,mBAAzC,CAAjD,GAAkH,EA/ElG,EAgFhBpwC,UAAU,CAACyS,QAAX,GAAsB04B,wBAAwB,CAAE,uBAAF,EAA2BnrC,UAAU,CAACqwC,gBAAtC,CAA9C,GAAyG,EAhFzF,EAiFhBhF,wBAAwB,CAAE,qBAAF,EAAyBrrC,UAAU,CAACswC,cAApC,CAjFR,EAmFhBtwC,UAAU,CAACuwC,YAAX,GAA0B,2BAA2BvwC,UAAU,CAACuwC,YAAhE,GAA+E,EAnF/D,EAqFhB,IArFgB,EAuFfh7G,MAvFe,CAuFP42G,eAvFO,EAuFWvkF,IAvFX,CAuFiB,IAvFjB,CAAjB;AAyFA;;AAED+9D,kBAAY,GAAG0nB,eAAe,CAAE1nB,YAAF,CAA9B;AACAA,kBAAY,GAAG6mB,gBAAgB,CAAE7mB,YAAF,EAAgB3lB,UAAhB,CAA/B;AACA2lB,kBAAY,GAAGsnB,wBAAwB,CAAEtnB,YAAF,EAAgB3lB,UAAhB,CAAvC;AAEA4lB,oBAAc,GAAGynB,eAAe,CAAEznB,cAAF,CAAhC;AACAA,oBAAc,GAAG4mB,gBAAgB,CAAE5mB,cAAF,EAAkB5lB,UAAlB,CAAjC;AACA4lB,oBAAc,GAAGqnB,wBAAwB,CAAErnB,cAAF,EAAkB5lB,UAAlB,CAAzC;AAEA2lB,kBAAY,GAAG+nB,WAAW,CAAE/nB,YAAF,CAA1B;AACAC,oBAAc,GAAG8nB,WAAW,CAAE9nB,cAAF,CAA5B;;AAEA,UAAK5lB,UAAU,CAAC4uB,QAAX,IAAuB,CAAE5uB,UAAU,CAACkvC,mBAAzC,EAA+D;AAE9D;AAEAF,oBAAY,GAAG,CACd,mBADc,EAEd,sBAFc,EAGd,qBAHc,EAId,2BAJc,EAKbpnF,IALa,CAKP,IALO,IAKE,IALF,GAKSonF,YALxB;AAOAC,sBAAc,GAAG,CAChB,mBADgB,EAEhB,oBAFgB,EAGhB,8BAHgB,EAIhB,mCAJgB,EAKhB,sCALgB,EAMhB,2BANgB,EAOhB,6BAPgB,EAQhB,mCARgB,EAShB,oCATgB,EAUhB,4CAVgB,EAWhB,sCAXgB,EAYhB,sCAZgB,EAahB,8CAbgB,EAchB,wCAdgB,EAefrnF,IAfe,CAeT,IAfS,IAeA,IAfA,GAeOqnF,cAfxB;AAiBA;;AAED,UAAMuB,UAAU,GAAGxB,YAAY,GAAGrpB,YAAlC;AACA,UAAM8qB,YAAY,GAAGxB,cAAc,GAAGrpB,cAAtC,CA1TsE,CA4TtE;AACA;;AAEA,UAAM8qB,cAAc,GAAGlG,WAAW,CAAE9b,EAAF,EAAM,KAAN,EAAa8hB,UAAb,CAAlC;AACA,UAAMG,gBAAgB,GAAGnG,WAAW,CAAE9b,EAAF,EAAM,KAAN,EAAa+hB,YAAb,CAApC;AAEA/hB,QAAE,CAACkiB,YAAH,CAAiBtV,OAAjB,EAA0BoV,cAA1B;AACAhiB,QAAE,CAACkiB,YAAH,CAAiBtV,OAAjB,EAA0BqV,gBAA1B,EAnUsE,CAqUtE;;AAEA,UAAK3wC,UAAU,CAACqmB,mBAAX,KAAmCxhF,SAAxC,EAAoD;AAEnD6pF,UAAE,CAACmiB,kBAAH,CAAuBvV,OAAvB,EAAgC,CAAhC,EAAmCt7B,UAAU,CAACqmB,mBAA9C;AAEA,OAJD,MAIO,IAAKrmB,UAAU,CAACsU,YAAX,KAA4B,IAAjC,EAAwC;AAE9C;AACAoa,UAAE,CAACmiB,kBAAH,CAAuBvV,OAAvB,EAAgC,CAAhC,EAAmC,UAAnC;AAEA;;AAED5M,QAAE,CAACoiB,WAAH,CAAgBxV,OAAhB,EAlVsE,CAoVtE;;AACA,UAAKh3E,QAAQ,CAACysF,KAAT,CAAeC,iBAApB,EAAwC;AAEvC,YAAMC,UAAU,GAAGviB,EAAE,CAACwiB,iBAAH,CAAsB5V,OAAtB,EAAgC1lG,IAAhC,EAAnB;AACA,YAAMu7G,SAAS,GAAGziB,EAAE,CAACuc,gBAAH,CAAqByF,cAArB,EAAsC96G,IAAtC,EAAlB;AACA,YAAMw7G,WAAW,GAAG1iB,EAAE,CAACuc,gBAAH,CAAqB0F,gBAArB,EAAwC/6G,IAAxC,EAApB;AAEA,YAAIy7G,QAAQ,GAAG,IAAf;AACA,YAAIC,eAAe,GAAG,IAAtB;;AAEA,YAAK5iB,EAAE,CAACwb,mBAAH,CAAwB5O,OAAxB,EAAiC,KAAjC,MAA6C,KAAlD,EAA0D;AAEzD+V,kBAAQ,GAAG,KAAX;AAEA,cAAME,YAAY,GAAGxG,eAAe,CAAErc,EAAF,EAAMgiB,cAAN,EAAsB,QAAtB,CAApC;AACA,cAAMc,cAAc,GAAGzG,eAAe,CAAErc,EAAF,EAAMiiB,gBAAN,EAAwB,UAAxB,CAAtC;AAEA/4G,iBAAO,CAACD,KAAR,CAAe,oCAAf,EAAqD+2F,EAAE,CAAC+iB,QAAH,EAArD,EAAoE,OAApE,EAA6E/iB,EAAE,CAACwb,mBAAH,CAAwB5O,OAAxB,EAAiC,KAAjC,CAA7E,EAAuH,sBAAvH,EAA+I2V,UAA/I,EAA2JM,YAA3J,EAAyKC,cAAzK;AAEA,SATD,MASO,IAAKP,UAAU,KAAK,EAApB,EAAyB;AAE/Br5G,iBAAO,CAAC2W,IAAR,CAAc,4CAAd,EAA4D0iG,UAA5D;AAEA,SAJM,MAIA,IAAKE,SAAS,KAAK,EAAd,IAAoBC,WAAW,KAAK,EAAzC,EAA8C;AAEpDE,yBAAe,GAAG,KAAlB;AAEA;;AAED,YAAKA,eAAL,EAAuB;AAEtB,eAAKI,WAAL,GAAmB;AAElBL,oBAAQ,EAAEA,QAFQ;AAIlBJ,sBAAU,EAAEA,UAJM;AAMlBtrB,wBAAY,EAAE;AAEb9tF,iBAAG,EAAEs5G,SAFQ;AAGbQ,oBAAM,EAAE3C;AAHK,aANI;AAalBppB,0BAAc,EAAE;AAEf/tF,iBAAG,EAAEu5G,WAFU;AAGfO,oBAAM,EAAE1C;AAHO;AAbE,WAAnB;AAsBA;AAED,OA3YqE,CA6YtE;AAEA;AACA;AACA;;;AAEAvgB,QAAE,CAACkjB,YAAH,CAAiBlB,cAAjB;AACAhiB,QAAE,CAACkjB,YAAH,CAAiBjB,gBAAjB,EApZsE,CAsZtE;;AAEA,UAAIkB,cAAJ;;AAEA,WAAK5N,WAAL,GAAmB,YAAY;AAE9B,YAAK4N,cAAc,KAAKhtG,SAAxB,EAAoC;AAEnCgtG,wBAAc,GAAG,IAAI5H,aAAJ,CAAmBvb,EAAnB,EAAuB4M,OAAvB,CAAjB;AAEA;;AAED,eAAOuW,cAAP;AAEA,OAVD,CA1ZsE,CAsatE;;;AAEA,UAAInV,gBAAJ;;AAEA,WAAKgB,aAAL,GAAqB,YAAY;AAEhC,YAAKhB,gBAAgB,KAAK73F,SAA1B,EAAsC;AAErC63F,0BAAgB,GAAG2P,uBAAuB,CAAE3d,EAAF,EAAM4M,OAAN,CAA1C;AAEA;;AAED,eAAOoB,gBAAP;AAEA,OAVD,CA1asE,CAsbtE;;;AAEA,WAAK/wD,OAAL,GAAe,YAAY;AAE1BsvD,qBAAa,CAACsD,sBAAd,CAAsC,IAAtC;AAEA7P,UAAE,CAACojB,aAAH,CAAkBxW,OAAlB;AACA,aAAKA,OAAL,GAAez2F,SAAf;AAEA,OAPD,CAxbsE,CAictE;;;AAEA,WAAKrP,IAAL,GAAYwqE,UAAU,CAACmvC,UAAvB;AACA,WAAK96G,EAAL,GAAUu2G,cAAc,EAAxB;AACA,WAAK+D,QAAL,GAAgBA,QAAhB;AACA,WAAKoD,SAAL,GAAiB,CAAjB;AACA,WAAKzW,OAAL,GAAeA,OAAf;AACA,WAAK3V,YAAL,GAAoB+qB,cAApB;AACA,WAAK9qB,cAAL,GAAsB+qB,gBAAtB;AAEA,aAAO,IAAP;AAEA;;AAED,aAASqB,aAAT,CAAwB1tF,QAAxB,EAAkCyhE,UAAlC,EAA8C4I,YAA9C,EAA4DsM,aAA5D,EAA4E;AAE3E,UAAMoI,QAAQ,GAAG,EAAjB;AAEA,UAAMzU,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AACA,UAAM6Q,sBAAsB,GAAG9Q,YAAY,CAAC8Q,sBAA5C;AACA,UAAMW,mBAAmB,GAAGzR,YAAY,CAACyR,mBAAzC;AACA,UAAML,iBAAiB,GAAGpR,YAAY,CAACoR,iBAAvC;AACA,UAAMG,cAAc,GAAGvR,YAAY,CAACuR,cAApC;AAEA,UAAIvvB,SAAS,GAAGge,YAAY,CAAChe,SAA7B;AAEA,UAAMshC,SAAS,GAAG;AACjBC,yBAAiB,EAAE,OADF;AAEjBC,4BAAoB,EAAE,cAFL;AAGjBC,0BAAkB,EAAE,QAHH;AAIjBz9B,yBAAiB,EAAE,OAJF;AAKjB09B,2BAAmB,EAAE,SALJ;AAMjBC,yBAAiB,EAAE,OANF;AAOjBC,wBAAgB,EAAE,MAPD;AAQjBC,4BAAoB,EAAE,UARL;AASjBC,4BAAoB,EAAE,UATL;AAUjBC,0BAAkB,EAAE,QAVH;AAWjBC,yBAAiB,EAAE,OAXF;AAYjBC,0BAAkB,EAAE,QAZH;AAajBC,sBAAc,EAAE,QAbC;AAcjBC,sBAAc,EAAE,QAdC;AAejBC,sBAAc,EAAE;AAfC,OAAlB;AAkBA,UAAMC,cAAc,GAAG,CACtB,WADsB,EACT,UADS,EACG,wBADH,EAC6B,gBAD7B,EAC+C,YAD/C,EAEtB,KAFsB,EAEf,aAFe,EAEA,QAFA,EAEU,gBAFV,EAE4B,QAF5B,EAEsC,YAFtC,EAEoD,gBAFpD,EAEsE,cAFtE,EAGtB,UAHsB,EAGV,kBAHU,EAGU,OAHV,EAGmB,aAHnB,EAGkC,qBAHlC,EAGyD,SAHzD,EAGoE,WAHpE,EAGiF,sBAHjF,EAGyG,uBAHzG,EAGkI,cAHlI,EAGkJ,uBAHlJ,EAG2K,oBAH3K,EAGiM,iBAHjM,EAGoN,aAHpN,EAItB,cAJsB,EAIN,cAJM,EAIU,aAJV,EAKtB,UALsB,EAKV,SALU,EAKC,cALD,EAKiB,gBALjB,EAKmC,WALnC,EAKgD,eALhD,EAKiE,KALjE,EAKwE,QALxE,EAKkF,SALlF,EAMtB,aANsB,EAMP,iBANO,EAMY,wBANZ,EAMsC,UANtC,EAOtB,UAPsB,EAOV,kBAPU,EAOU,cAPV,EAO0B,cAP1B,EAQtB,iBARsB,EAQH,iBARG,EAQgB,oBARhB,EAStB,cATsB,EASN,gBATM,EASY,eATZ,EAS6B,eAT7B,EAS8C,mBAT9C,EAUtB,oBAVsB,EAUA,sBAVA,EAUwB,qBAVxB,EAWtB,kBAXsB,EAWF,eAXE,EAWe,aAXf,EAW8B,yBAX9B,EAYtB,WAZsB,EAYT,aAZS,EAYM,WAZN,EAYmB,mBAZnB,EAYwC,qBAZxC,EAY+D,cAZ/D,EAY+E,WAZ/E,EAatB,OAbsB,EAab,iBAba,CAAvB;;AAgBA,eAASC,aAAT,CAAwB9tG,MAAxB,EAAiC;AAEhC,YAAM+tG,QAAQ,GAAG/tG,MAAM,CAAC+tG,QAAxB;AACA,YAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;AAEA,YAAK/S,mBAAL,EAA2B;AAE1B,iBAAO,IAAP;AAEA,SAJD,MAIO;AAEN;AACA;AACA;AACA;AACA;AACA;AAEA,cAAMgT,eAAe,GAAGrT,iBAAxB;AACA,cAAMsT,eAAe,GAAGrkG,IAAI,CAAC4N,KAAL,CAAY,CAAEw2F,eAAe,GAAG,EAApB,IAA2B,CAAvC,CAAxB;AAEA,cAAM9D,QAAQ,GAAGtgG,IAAI,CAACkE,GAAL,CAAUmgG,eAAV,EAA2BF,KAAK,CAACr9G,MAAjC,CAAjB;;AAEA,cAAKw5G,QAAQ,GAAG6D,KAAK,CAACr9G,MAAtB,EAA+B;AAE9B8B,mBAAO,CAAC2W,IAAR,CAAc,uCAAuC4kG,KAAK,CAACr9G,MAA7C,GAAsD,4BAAtD,GAAqFw5G,QAArF,GAAgG,GAA9G;AACA,mBAAO,CAAP;AAEA;;AAED,iBAAOA,QAAP;AAEA;AAED;;AAED,eAASgE,yBAAT,CAAoC7vG,GAApC,EAA0C;AAEzC,YAAI+mD,QAAJ;;AAEA,YAAK,CAAE/mD,GAAP,EAAa;AAEZ+mD,kBAAQ,GAAGvN,cAAX;AAEA,SAJD,MAIO,IAAKx5C,GAAG,CAAC2nD,SAAT,EAAqB;AAE3BZ,kBAAQ,GAAG/mD,GAAG,CAAC+mD,QAAf;AAEA,SAJM,MAIA,IAAK/mD,GAAG,CAACyqD,mBAAT,EAA+B;AAErCt2D,iBAAO,CAAC2W,IAAR,CAAc,2HAAd;AACAi8C,kBAAQ,GAAG/mD,GAAG,CAACqqD,OAAJ,CAAYtD,QAAvB;AAEA;;AAED,eAAOA,QAAP;AAEA;;AAED,eAAS+oD,aAAT,CAAwBttF,QAAxB,EAAkC4/D,MAAlC,EAA0C2tB,OAA1C,EAAmDpvF,KAAnD,EAA0DqvF,WAA1D,EAAuEC,iBAAvE,EAA0FvuG,MAA1F,EAAmG;AAElG,YAAMs7D,GAAG,GAAGr8C,KAAK,CAACq8C,GAAlB;AACA,YAAMD,WAAW,GAAGv6C,QAAQ,CAAC0tF,sBAAT,GAAkCvvF,KAAK,CAACo8C,WAAxC,GAAsD,IAA1E;AAEA,YAAMgT,MAAM,GAAGvtD,QAAQ,CAACutD,MAAT,IAAmBhT,WAAlC;AAEA,YAAMorC,QAAQ,GAAGqG,SAAS,CAAEhsF,QAAQ,CAAC9qB,IAAX,CAA1B,CAPkG,CASlG;AACA;;AAEA,YAAMm0G,QAAQ,GAAGnqG,MAAM,CAACq6E,aAAP,GAAuByzB,aAAa,CAAE9tG,MAAF,CAApC,GAAiD,CAAlE;;AAEA,YAAK8gB,QAAQ,CAAC0qD,SAAT,KAAuB,IAA5B,EAAmC;AAElCA,mBAAS,GAAGge,YAAY,CAACyQ,eAAb,CAA8Bn5E,QAAQ,CAAC0qD,SAAvC,CAAZ;;AAEA,cAAKA,SAAS,KAAK1qD,QAAQ,CAAC0qD,SAA5B,EAAwC;AAEvC/4E,mBAAO,CAAC2W,IAAR,CAAc,mCAAd,EAAmD0X,QAAQ,CAAC0qD,SAA5D,EAAuE,sBAAvE,EAA+FA,SAA/F,EAA0G,UAA1G;AAEA;AAED;;AAED,YAAIgV,YAAJ,EAAkBC,cAAlB;;AAEA,YAAKgmB,QAAL,EAAgB;AAEf,cAAM9iB,MAAM,GAAGkP,SAAS,CAAE4T,QAAF,CAAxB;AAEAjmB,sBAAY,GAAGmD,MAAM,CAACnD,YAAtB;AACAC,wBAAc,GAAGkD,MAAM,CAAClD,cAAxB;AAEA,SAPD,MAOO;AAEND,sBAAY,GAAG1/D,QAAQ,CAAC0/D,YAAxB;AACAC,wBAAc,GAAG3/D,QAAQ,CAAC2/D,cAA1B;AAEA;;AAED,YAAM0C,mBAAmB,GAAGhkE,QAAQ,CAACikE,eAAT,EAA5B;AAEA,YAAMvoB,UAAU,GAAG;AAElB4uB,kBAAQ,EAAEA,QAFQ;AAIlBgd,kBAAQ,EAAEA,QAJQ;AAKlBuD,oBAAU,EAAElpF,QAAQ,CAAC9qB,IALH;AAOlBwqF,sBAAY,EAAEA,YAPI;AAQlBC,wBAAc,EAAEA,cARE;AASlBF,iBAAO,EAAEz/D,QAAQ,CAACy/D,OATA;AAWlBwpB,6BAAmB,EAAEjpF,QAAQ,CAACipF,mBAXZ;AAYlB3oB,0BAAgB,EAAEtgE,QAAQ,CAACsgE,gBAZT;AAclB5V,mBAAS,EAAEA,SAdO;AAgBlBy+B,oBAAU,EAAEjqG,MAAM,CAACo6D,eAAP,KAA2B,IAhBrB;AAkBlB8vC,gCAAsB,EAAEnP,cAlBN;AAmBlBoQ,wBAAc,EAAIhoB,mBAAmB,KAAK,IAA1B,GAAmCgrB,yBAAyB,CAAEhrB,mBAAmB,CAACx6B,OAAtB,CAA5D,GAA8FxpC,QAAQ,CAACgsF,cAnBrG;AAoBlB7sG,aAAG,EAAE,CAAC,CAAEwiB,QAAQ,CAACxiB,GApBC;AAqBlBwsG,qBAAW,EAAEqD,yBAAyB,CAAErtF,QAAQ,CAACxiB,GAAX,CArBpB;AAsBlB8uE,gBAAM,EAAE,CAAC,CAAEtsD,QAAQ,CAACssD,MAtBF;AAuBlB29B,wBAAc,EAAEoD,yBAAyB,CAAErtF,QAAQ,CAACssD,MAAX,CAvBvB;AAwBlBiB,gBAAM,EAAE,CAAC,CAAEA,MAxBO;AAyBlB66B,oBAAU,EAAE76B,MAAM,IAAIA,MAAM,CAACvpB,OAzBX;AA0BlBkmD,wBAAc,EAAEmD,yBAAyB,CAAE9/B,MAAF,CA1BvB;AA2BlBk4B,sBAAY,EAAI,CAAC,CAAEl4B,MAAL,KAAqBA,MAAM,CAACvpB,OAAP,KAAmB/S,uBAArB,IAAoDs8B,MAAM,CAACvpB,OAAP,KAAmB9S,uBAA1F,CA3BI;AA4BlBs7B,kBAAQ,EAAE,CAAC,CAAExsD,QAAQ,CAACwsD,QA5BJ;AA6BlB49B,0BAAgB,EAAEiD,yBAAyB,CAAErtF,QAAQ,CAACwsD,QAAX,CA7BzB;AA8BlBC,eAAK,EAAE,CAAC,CAAEzsD,QAAQ,CAACysD,KA9BD;AA+BlBY,qBAAW,EAAE,CAAC,CAAErtD,QAAQ,CAACqtD,WA/BP;AAgClB88B,6BAAmB,EAAEkD,yBAAyB,CAAErtF,QAAQ,CAACqtD,WAAX,CAhC5B;AAiClBV,iBAAO,EAAE,CAAC,CAAE3sD,QAAQ,CAAC2sD,OAjCH;AAkClBE,mBAAS,EAAE,CAAC,CAAE7sD,QAAQ,CAAC6sD,SAlCL;AAmClB28B,8BAAoB,EAAExpF,QAAQ,CAAC8sD,aAAT,KAA2Bn1B,oBAnC/B;AAoClB+tD,+BAAqB,EAAE1lF,QAAQ,CAAC8sD,aAAT,KAA2Bp1B,qBApChC;AAqClBw0B,sBAAY,EAAE,CAAC,CAAElsD,QAAQ,CAACksD,YArCR;AAsClBC,+BAAqB,EAAE,CAAC,CAAEnsD,QAAQ,CAACmsD,qBAtCjB;AAuClBC,4BAAkB,EAAE,CAAC,CAAEpsD,QAAQ,CAACosD,kBAvCd;AAwClBY,yBAAe,EAAE,CAAC,CAAEhtD,QAAQ,CAACgtD,eAxCX;AAyClBG,sBAAY,EAAE,CAAC,CAAEntD,QAAQ,CAACmtD,YAzCR;AA0ClBC,sBAAY,EAAE,CAAC,CAAEptD,QAAQ,CAACotD,YA1CR;AA2ClBE,qBAAW,EAAE,CAAC,CAAEttD,QAAQ,CAACstD,WA3CP;AA4ClBf,kBAAQ,EAAE,CAAC,CAAEvsD,QAAQ,CAACusD,QA5CJ;AA8ClBqB,qBAAW,EAAE,CAAC,CAAE5tD,QAAQ,CAAC4tD,WA9CP;AAgDlBjC,eAAK,EAAE,CAAC,CAAE3rD,QAAQ,CAAC2rD,KAhDD;AAkDlBsnB,yBAAe,EAAE,CAAC,CAAEjzE,QAAQ,CAACizE,eAlDX;AAoDlBvlB,iBAAO,EAAE1tD,QAAQ,CAAC0tD,OApDA;AAsDlB+7B,wBAAc,EAAIzpF,QAAQ,CAAC6sD,SAAT,IAAsB7sD,QAAQ,CAACypF,cAtD/B;AAuDlB7gC,sBAAY,EAAE5oD,QAAQ,CAAC4oD,YAvDL;AAwDlB8J,mBAAS,EAAE,CAAC,CAAE1yD,QAAQ,CAACxiB,GAAZ,IAAmB,CAAC,CAAEwiB,QAAQ,CAAC2sD,OAA/B,IAA0C,CAAC,CAAE3sD,QAAQ,CAAC6sD,SAAtD,IAAmE,CAAC,CAAE7sD,QAAQ,CAACstD,WAA/E,IAA8F,CAAC,CAAEttD,QAAQ,CAACusD,QAA1G,IAAsH,CAAC,CAAEvsD,QAAQ,CAACqtD,WAAlI,IAAiJ,CAAC,CAAErtD,QAAQ,CAACmtD,YAA7J,IAA6K,CAAC,CAAEntD,QAAQ,CAACotD,YAAzL,IAAyM,CAAC,CAAEptD,QAAQ,CAACksD,YAArN,IAAqO,CAAC,CAAElsD,QAAQ,CAACmsD,qBAAjP,IAA0Q,CAAC,CAAEnsD,QAAQ,CAACosD,kBAAtR,IAA4S,CAAC,CAAEpsD,QAAQ,CAACgtD,eAAxT,IAA2U,CAAC,CAAEhtD,QAAQ,CAACizE,eAxDhV;AAyDlByW,uBAAa,EAAE,EAAI,CAAC,CAAE1pF,QAAQ,CAACxiB,GAAZ,IAAmB,CAAC,CAAEwiB,QAAQ,CAAC2sD,OAA/B,IAA0C,CAAC,CAAE3sD,QAAQ,CAAC6sD,SAAtD,IAAmE,CAAC,CAAE7sD,QAAQ,CAACstD,WAA/E,IAA8F,CAAC,CAAEttD,QAAQ,CAACusD,QAA1G,IAAsH,CAAC,CAAEvsD,QAAQ,CAACqtD,WAAlI,IAAiJ,CAAC,CAAErtD,QAAQ,CAACmtD,YAA7J,IAA6K,CAAC,CAAEntD,QAAQ,CAACotD,YAAzL,IAAyM,CAAC,CAAEptD,QAAQ,CAACosD,kBAArN,IAA2O,CAAC,CAAEpsD,QAAQ,CAACizE,eAA3P,KAAgR,CAAC,CAAEjzE,QAAQ,CAACgtD,eAzDzR;AA2DlBxS,aAAG,EAAE,CAAC,CAAEA,GA3DU;AA4DlB8uC,gBAAM,EAAEtpF,QAAQ,CAACw6C,GA5DC;AA6DlB+uC,iBAAO,EAAI/uC,GAAG,IAAIA,GAAG,CAACmzC,SA7DJ;AA+DlB1kC,qBAAW,EAAEjpD,QAAQ,CAACipD,WA/DJ;AAiElB4E,yBAAe,EAAE7tD,QAAQ,CAAC6tD,eAjER;AAkElB2rB,gCAAsB,EAAEA,sBAlEN;AAoElBjrB,kBAAQ,EAAEvuD,QAAQ,CAACuuD,QAAT,IAAqB86B,QAAQ,GAAG,CApExB;AAqElBA,kBAAQ,EAAEA,QArEQ;AAsElBM,0BAAgB,EAAExP,mBAtEA;AAwElB9rB,sBAAY,EAAEruD,QAAQ,CAACquD,YAxEL;AAyElBC,sBAAY,EAAEtuD,QAAQ,CAACsuD,YAzEL;AA0ElBs/B,yBAAe,EAAEvvF,QAAQ,CAACuvF,eA1ER;AA2ElBC,yBAAe,EAAExvF,QAAQ,CAACwvF,eA3ER;AA6ElBrH,sBAAY,EAAE5mB,MAAM,CAACkuB,WAAP,CAAmBj+G,MA7Ef;AA8ElB82G,wBAAc,EAAE/mB,MAAM,CAACh8C,KAAP,CAAa/zC,MA9EX;AA+ElB42G,uBAAa,EAAE7mB,MAAM,CAACmuB,IAAP,CAAYl+G,MA/ET;AAgFlB62G,2BAAiB,EAAE9mB,MAAM,CAACouB,QAAP,CAAgBn+G,MAhFjB;AAiFlB+2G,uBAAa,EAAEhnB,MAAM,CAACquB,IAAP,CAAYp+G,MAjFT;AAmFlBg3G,4BAAkB,EAAEjnB,MAAM,CAACgH,oBAAP,CAA4B/2F,MAnF9B;AAoFlBk3G,8BAAoB,EAAEnnB,MAAM,CAAC6H,cAAP,CAAsB53F,MApF1B;AAqFlBi3G,6BAAmB,EAAElnB,MAAM,CAACuH,aAAP,CAAqBt3F,MArFxB;AAuFlBo3G,2BAAiB,EAAEuG,WAvFD;AAwFlBtG,6BAAmB,EAAEuG,iBAxFH;AA0FlB3iC,mBAAS,EAAE9qD,QAAQ,CAAC8qD,SA1FF;AA4FlBg/B,0BAAgB,EAAEzrF,QAAQ,CAAC6vF,SAAT,CAAmB3lG,OAAnB,IAA8BglG,OAAO,CAAC19G,MAAR,GAAiB,CA5F/C;AA6FlBo4G,uBAAa,EAAE5pF,QAAQ,CAAC6vF,SAAT,CAAmBh5G,IA7FhB;AA+FlBo/F,qBAAW,EAAEt0E,QAAQ,CAACirD,UAAT,GAAsB5sD,QAAQ,CAACi2E,WAA/B,GAA6ChkD,aA/FxC;AAgGlBy5D,iCAAuB,EAAE1rF,QAAQ,CAAC0rF,uBAhGhB;AAkGlB/+B,4BAAkB,EAAEhrD,QAAQ,CAACgrD,kBAlGX;AAoGlBD,mBAAS,EAAE/qD,QAAQ,CAAC+qD,SApGF;AAqGlB6+B,qBAAW,EAAE5pF,QAAQ,CAACgpD,IAAT,KAAkB96B,UArGb;AAsGlB27D,mBAAS,EAAE7pF,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAtGX;AAwGlBq8D,sBAAY,EAAItqF,QAAQ,CAACsqF,YAAT,KAA0B1rG,SAA5B,GAA0CohB,QAAQ,CAACsqF,YAAnD,GAAkE,KAxG9D;AA0GlBlqB,6BAAmB,EAAEpgE,QAAQ,CAACogE,mBA1GZ;AA4GlBolB,8BAAoB,EAAExlF,QAAQ,CAAC8/D,UAAT,IAAuB9/D,QAAQ,CAAC8/D,UAAT,CAAoBC,WA5G/C;AA6GlB6lB,4BAAkB,EAAE5lF,QAAQ,CAAC8/D,UAAT,IAAuB9/D,QAAQ,CAAC8/D,UAAT,CAAoBE,SA7G7C;AA8GlB8lB,8BAAoB,EAAE9lF,QAAQ,CAAC8/D,UAAT,IAAuB9/D,QAAQ,CAAC8/D,UAAT,CAAoBG,WA9G/C;AA+GlB+lB,mCAAyB,EAAEhmF,QAAQ,CAAC8/D,UAAT,IAAuB9/D,QAAQ,CAAC8/D,UAAT,CAAoBI,gBA/GpD;AAiHlB2lB,oCAA0B,EAAEld,QAAQ,IAAI7I,UAAU,CAACz+E,GAAX,CAAgB,gBAAhB,MAAuC,IAjH7D;AAkHlB0kG,sCAA4B,EAAEpd,QAAQ,IAAI7I,UAAU,CAACz+E,GAAX,CAAgB,oBAAhB,MAA2C,IAlHnE;AAmHlB4kG,2CAAiC,EAAEtd,QAAQ,IAAI7I,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,MAA+C,IAnH5E;AAqHlB+pE,+BAAqB,EAAEprD,QAAQ,CAACorD,qBAAT;AArHL,SAAnB;AAyHA,eAAOrR,UAAP;AAEA;;AAED,eAASo0C,kBAAT,CAA6Bp0C,UAA7B,EAA0C;AAEzC,YAAM3sC,KAAK,GAAG,EAAd;;AAEA,YAAK2sC,UAAU,CAAC4rC,QAAhB,EAA2B;AAE1Bv4E,eAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAAC4rC,QAAvB;AAEA,SAJD,MAIO;AAENv4E,eAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAAC4lB,cAAvB;AACAvyD,eAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAAC2lB,YAAvB;AAEA;;AAED,YAAK3lB,UAAU,CAAC0lB,OAAX,KAAuB7gF,SAA5B,EAAwC;AAEvC,eAAM,IAAMrP,IAAZ,IAAoBwqE,UAAU,CAAC0lB,OAA/B,EAAyC;AAExCryD,iBAAK,CAACl8B,IAAN,CAAY3B,IAAZ;AACA69B,iBAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAAC0lB,OAAX,CAAoBlwF,IAApB,CAAZ;AAEA;AAED;;AAED,YAAKwqE,UAAU,CAACkvC,mBAAX,KAAmCrqG,SAAxC,EAAoD;AAEnD,eAAM,IAAIpO,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGu8G,cAAc,CAACl9G,MAApC,EAA4CW,KAAC,EAA7C,EAAmD;AAElD48B,iBAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAAEgzC,cAAc,CAAEv8G,KAAF,CAAhB,CAAtB;AAEA;;AAED48B,eAAK,CAACl8B,IAAN,CAAYmtB,QAAQ,CAACgsF,cAArB;AACAj9E,eAAK,CAACl8B,IAAN,CAAYmtB,QAAQ,CAAC6oD,WAArB;AAEA;;AAED95C,aAAK,CAACl8B,IAAN,CAAY6oE,UAAU,CAACqR,qBAAvB;AAEA,eAAOh+C,KAAK,CAACzL,IAAN,EAAP;AAEA;;AAED,eAASq8E,WAAT,CAAsBh+E,QAAtB,EAAiC;AAEhC,YAAM2lF,QAAQ,GAAGqG,SAAS,CAAEhsF,QAAQ,CAAC9qB,IAAX,CAA1B;AACA,YAAIiqF,QAAJ;;AAEA,YAAKwmB,QAAL,EAAgB;AAEf,cAAM9iB,MAAM,GAAGkP,SAAS,CAAE4T,QAAF,CAAxB;AACAxmB,kBAAQ,GAAGE,aAAa,CAACv0E,KAAd,CAAqB+3E,MAAM,CAAC1D,QAA5B,CAAX;AAEA,SALD,MAKO;AAENA,kBAAQ,GAAGn/D,QAAQ,CAACm/D,QAApB;AAEA;;AAED,eAAOA,QAAP;AAEA;;AAED,eAASivB,cAAT,CAAyBr0C,UAAzB,EAAqC2uC,QAArC,EAAgD;AAE/C,YAAIrT,OAAJ,CAF+C,CAI/C;;AACA,aAAM,IAAI/zE,CAAC,GAAG,CAAR,EAAW+sF,EAAE,GAAGjR,QAAQ,CAACvtG,MAA/B,EAAuCyxB,CAAC,GAAG+sF,EAA3C,EAA+C/sF,CAAC,EAAhD,EAAsD;AAErD,cAAMgtF,kBAAkB,GAAGlR,QAAQ,CAAE97E,CAAF,CAAnC;;AAEA,cAAKgtF,kBAAkB,CAAC5F,QAAnB,KAAgCA,QAArC,EAAgD;AAE/CrT,mBAAO,GAAGiZ,kBAAV;AACA,cAAGjZ,OAAO,CAACyW,SAAX;AAEA;AAEA;AAED;;AAED,YAAKzW,OAAO,KAAKz2F,SAAjB,EAA6B;AAE5By2F,iBAAO,GAAG,IAAIoT,YAAJ,CAAkBpqF,QAAlB,EAA4BqqF,QAA5B,EAAsC3uC,UAAtC,EAAkDi7B,aAAlD,CAAV;AACAoI,kBAAQ,CAAClsG,IAAT,CAAemkG,OAAf;AAEA;;AAED,eAAOA,OAAP;AAEA;;AAED,eAASkZ,cAAT,CAAyBlZ,OAAzB,EAAmC;AAElC,YAAK,EAAGA,OAAO,CAACyW,SAAX,KAAyB,CAA9B,EAAkC;AAEjC;AACA,cAAMt7G,KAAC,GAAG4sG,QAAQ,CAACl7E,OAAT,CAAkBmzE,OAAlB,CAAV;;AACA+H,kBAAQ,CAAE5sG,KAAF,CAAR,GAAgB4sG,QAAQ,CAAEA,QAAQ,CAACvtG,MAAT,GAAkB,CAApB,CAAxB;AACAutG,kBAAQ,CAACoR,GAAT,GALiC,CAOjC;;AACAnZ,iBAAO,CAAC3vD,OAAR;AAEA;AAED;;AAED,aAAO;AACN4nE,qBAAa,EAAEA,aADT;AAENa,0BAAkB,EAAEA,kBAFd;AAGNnQ,mBAAW,EAAEA,WAHP;AAINoQ,sBAAc,EAAEA,cAJV;AAKNG,sBAAc,EAAEA,cALV;AAMN;AACAnR,gBAAQ,EAAEA;AAPJ,OAAP;AAUA;;AAED,aAASqR,eAAT,GAA2B;AAE1B,UAAInoB,UAAU,GAAG,IAAIuC,OAAJ,EAAjB;;AAEA,eAASxnF,GAAT,CAAcnC,MAAd,EAAuB;AAEtB,YAAI1B,GAAG,GAAG8oF,UAAU,CAACjlF,GAAX,CAAgBnC,MAAhB,CAAV;;AAEA,YAAK1B,GAAG,KAAKoB,SAAb,EAAyB;AAExBpB,aAAG,GAAG,EAAN;AACA8oF,oBAAU,CAACz4E,GAAX,CAAgB3O,MAAhB,EAAwB1B,GAAxB;AAEA;;AAED,eAAOA,GAAP;AAEA;;AAED,eAAS+G,MAAT,CAAiBrF,MAAjB,EAA0B;AAEzBonF,kBAAU,UAAV,CAAmBpnF,MAAnB;AAEA;;AAED,eAAS4M,MAAT,CAAiB5M,MAAjB,EAAyBk7D,GAAzB,EAA8B9/D,KAA9B,EAAsC;AAErCgsF,kBAAU,CAACjlF,GAAX,CAAgBnC,MAAhB,EAA0Bk7D,GAA1B,IAAkC9/D,KAAlC;AAEA;;AAED,eAAS6T,OAAT,GAAmB;AAElBm4E,kBAAU,GAAG,IAAIuC,OAAJ,EAAb;AAEA;;AAED,aAAO;AACNxnF,WAAG,EAAEA,GADC;AAENkD,cAAM,EAAEA,MAFF;AAGNuH,cAAM,EAAEA,MAHF;AAINqC,eAAO,EAAEA;AAJH,OAAP;AAOA;;AAED,aAASugG,iBAAT,CAA4B3+G,CAA5B,EAA+BC,CAA/B,EAAmC;AAElC,UAAKD,CAAC,CAAC4+G,UAAF,KAAiB3+G,CAAC,CAAC2+G,UAAxB,EAAqC;AAEpC,eAAO5+G,CAAC,CAAC4+G,UAAF,GAAe3+G,CAAC,CAAC2+G,UAAxB;AAEA,OAJD,MAIO,IAAK5+G,CAAC,CAAC2mE,WAAF,KAAkB1mE,CAAC,CAAC0mE,WAAzB,EAAuC;AAE7C,eAAO3mE,CAAC,CAAC2mE,WAAF,GAAgB1mE,CAAC,CAAC0mE,WAAzB;AAEA,OAJM,MAIA,IAAK3mE,CAAC,CAACslG,OAAF,KAAcrlG,CAAC,CAACqlG,OAArB,EAA+B;AAErC,eAAOtlG,CAAC,CAACslG,OAAF,CAAUjnG,EAAV,GAAe4B,CAAC,CAACqlG,OAAF,CAAUjnG,EAAhC;AAEA,OAJM,MAIA,IAAK2B,CAAC,CAACiwB,QAAF,CAAW5xB,EAAX,KAAkB4B,CAAC,CAACgwB,QAAF,CAAW5xB,EAAlC,EAAuC;AAE7C,eAAO2B,CAAC,CAACiwB,QAAF,CAAW5xB,EAAX,GAAgB4B,CAAC,CAACgwB,QAAF,CAAW5xB,EAAlC;AAEA,OAJM,MAIA,IAAK2B,CAAC,CAAC0tB,CAAF,KAAQztB,CAAC,CAACytB,CAAf,EAAmB;AAEzB,eAAO1tB,CAAC,CAAC0tB,CAAF,GAAMztB,CAAC,CAACytB,CAAf;AAEA,OAJM,MAIA;AAEN,eAAO1tB,CAAC,CAAC3B,EAAF,GAAO4B,CAAC,CAAC5B,EAAhB;AAEA;AAED;;AAED,aAASwgH,wBAAT,CAAmC7+G,CAAnC,EAAsCC,CAAtC,EAA0C;AAEzC,UAAKD,CAAC,CAAC4+G,UAAF,KAAiB3+G,CAAC,CAAC2+G,UAAxB,EAAqC;AAEpC,eAAO5+G,CAAC,CAAC4+G,UAAF,GAAe3+G,CAAC,CAAC2+G,UAAxB;AAEA,OAJD,MAIO,IAAK5+G,CAAC,CAAC2mE,WAAF,KAAkB1mE,CAAC,CAAC0mE,WAAzB,EAAuC;AAE7C,eAAO3mE,CAAC,CAAC2mE,WAAF,GAAgB1mE,CAAC,CAAC0mE,WAAzB;AAEA,OAJM,MAIA,IAAK3mE,CAAC,CAAC0tB,CAAF,KAAQztB,CAAC,CAACytB,CAAf,EAAmB;AAEzB,eAAOztB,CAAC,CAACytB,CAAF,GAAM1tB,CAAC,CAAC0tB,CAAf;AAEA,OAJM,MAIA;AAEN,eAAO1tB,CAAC,CAAC3B,EAAF,GAAO4B,CAAC,CAAC5B,EAAhB;AAEA;AAED;;AAGD,aAASygH,eAAT,CAA0BvoB,UAA1B,EAAuC;AAEtC,UAAMwoB,WAAW,GAAG,EAApB;AACA,UAAIC,gBAAgB,GAAG,CAAvB;AAEA,UAAMC,MAAM,GAAG,EAAf;AACA,UAAM7lC,WAAW,GAAG,EAApB;AAEA,UAAM8lC,cAAc,GAAG;AAAE7gH,UAAE,EAAE,CAAE;AAAR,OAAvB;;AAEA,eAASysG,IAAT,GAAgB;AAEfkU,wBAAgB,GAAG,CAAnB;AAEAC,cAAM,CAACn/G,MAAP,GAAgB,CAAhB;AACAs5E,mBAAW,CAACt5E,MAAZ,GAAqB,CAArB;AAEA;;AAED,eAASq/G,iBAAT,CAA4BhwG,MAA5B,EAAoC46D,QAApC,EAA8C95C,QAA9C,EAAwD2uF,UAAxD,EAAoElxF,CAApE,EAAuEjoB,KAAvE,EAA+E;AAE9E,YAAI25G,UAAU,GAAGL,WAAW,CAAEC,gBAAF,CAA5B;AACA,YAAMK,kBAAkB,GAAG9oB,UAAU,CAACjlF,GAAX,CAAgB2e,QAAhB,CAA3B;;AAEA,YAAKmvF,UAAU,KAAKvwG,SAApB,EAAgC;AAE/BuwG,oBAAU,GAAG;AACZ/gH,cAAE,EAAE8Q,MAAM,CAAC9Q,EADC;AAEZ8Q,kBAAM,EAAEA,MAFI;AAGZ46D,oBAAQ,EAAEA,QAHE;AAIZ95C,oBAAQ,EAAEA,QAJE;AAKZq1E,mBAAO,EAAE+Z,kBAAkB,CAAC/Z,OAAnB,IAA8B4Z,cAL3B;AAMZN,sBAAU,EAAEA,UANA;AAOZj4C,uBAAW,EAAEx3D,MAAM,CAACw3D,WAPR;AAQZj5C,aAAC,EAAEA,CARS;AASZjoB,iBAAK,EAAEA;AATK,WAAb;AAYAs5G,qBAAW,CAAEC,gBAAF,CAAX,GAAkCI,UAAlC;AAEA,SAhBD,MAgBO;AAENA,oBAAU,CAAC/gH,EAAX,GAAgB8Q,MAAM,CAAC9Q,EAAvB;AACA+gH,oBAAU,CAACjwG,MAAX,GAAoBA,MAApB;AACAiwG,oBAAU,CAACr1C,QAAX,GAAsBA,QAAtB;AACAq1C,oBAAU,CAACnvF,QAAX,GAAsBA,QAAtB;AACAmvF,oBAAU,CAAC9Z,OAAX,GAAqB+Z,kBAAkB,CAAC/Z,OAAnB,IAA8B4Z,cAAnD;AACAE,oBAAU,CAACR,UAAX,GAAwBA,UAAxB;AACAQ,oBAAU,CAACz4C,WAAX,GAAyBx3D,MAAM,CAACw3D,WAAhC;AACAy4C,oBAAU,CAAC1xF,CAAX,GAAeA,CAAf;AACA0xF,oBAAU,CAAC35G,KAAX,GAAmBA,KAAnB;AAEA;;AAEDu5G,wBAAgB;AAEhB,eAAOI,UAAP;AAEA;;AAED,eAASj+G,IAAT,CAAegO,MAAf,EAAuB46D,QAAvB,EAAiC95C,QAAjC,EAA2C2uF,UAA3C,EAAuDlxF,CAAvD,EAA0DjoB,KAA1D,EAAkE;AAEjE,YAAM25G,UAAU,GAAGD,iBAAiB,CAAEhwG,MAAF,EAAU46D,QAAV,EAAoB95C,QAApB,EAA8B2uF,UAA9B,EAA0ClxF,CAA1C,EAA6CjoB,KAA7C,CAApC;AAEA,SAAEwqB,QAAQ,CAACmpD,WAAT,KAAyB,IAAzB,GAAgCA,WAAhC,GAA8C6lC,MAAhD,EAAyD99G,IAAzD,CAA+Di+G,UAA/D;AAEA;;AAED,eAAS5a,OAAT,CAAkBr1F,MAAlB,EAA0B46D,QAA1B,EAAoC95C,QAApC,EAA8C2uF,UAA9C,EAA0DlxF,CAA1D,EAA6DjoB,KAA7D,EAAqE;AAEpE,YAAM25G,UAAU,GAAGD,iBAAiB,CAAEhwG,MAAF,EAAU46D,QAAV,EAAoB95C,QAApB,EAA8B2uF,UAA9B,EAA0ClxF,CAA1C,EAA6CjoB,KAA7C,CAApC;AAEA,SAAEwqB,QAAQ,CAACmpD,WAAT,KAAyB,IAAzB,GAAgCA,WAAhC,GAA8C6lC,MAAhD,EAAyDza,OAAzD,CAAkE4a,UAAlE;AAEA;;AAED,eAASr/G,IAAT,CAAeu/G,gBAAf,EAAiCC,qBAAjC,EAAyD;AAExD,YAAKN,MAAM,CAACn/G,MAAP,GAAgB,CAArB,EAAyBm/G,MAAM,CAACl/G,IAAP,CAAau/G,gBAAgB,IAAIX,iBAAjC;AACzB,YAAKvlC,WAAW,CAACt5E,MAAZ,GAAqB,CAA1B,EAA8Bs5E,WAAW,CAACr5E,IAAZ,CAAkBw/G,qBAAqB,IAAIV,wBAA3C;AAE9B;;AAED,eAASW,MAAT,GAAkB;AAEjB;AAEA,aAAM,IAAI/+G,KAAC,GAAGu+G,gBAAR,EAA0B1yC,EAAE,GAAGyyC,WAAW,CAACj/G,MAAjD,EAAyDW,KAAC,GAAG6rE,EAA7D,EAAiE7rE,KAAC,EAAlE,EAAwE;AAEvE,cAAM2+G,UAAU,GAAGL,WAAW,CAAEt+G,KAAF,CAA9B;AAEA,cAAK2+G,UAAU,CAAC/gH,EAAX,KAAkB,IAAvB,EAA8B;AAE9B+gH,oBAAU,CAAC/gH,EAAX,GAAgB,IAAhB;AACA+gH,oBAAU,CAACjwG,MAAX,GAAoB,IAApB;AACAiwG,oBAAU,CAACr1C,QAAX,GAAsB,IAAtB;AACAq1C,oBAAU,CAACnvF,QAAX,GAAsB,IAAtB;AACAmvF,oBAAU,CAAC9Z,OAAX,GAAqB,IAArB;AACA8Z,oBAAU,CAAC35G,KAAX,GAAmB,IAAnB;AAEA;AAED;;AAED,aAAO;AAENw5G,cAAM,EAAEA,MAFF;AAGN7lC,mBAAW,EAAEA,WAHP;AAKN0xB,YAAI,EAAEA,IALA;AAMN3pG,YAAI,EAAEA,IANA;AAONqjG,eAAO,EAAEA,OAPH;AAQNgb,cAAM,EAAEA,MARF;AAUNz/G,YAAI,EAAEA;AAVA,OAAP;AAaA;;AAED,aAAS0/G,gBAAT,CAA2BlpB,UAA3B,EAAwC;AAEvC,UAAImpB,KAAK,GAAG,IAAI5mB,OAAJ,EAAZ;;AAEA,eAAS6mB,cAAT,CAAyB5gH,KAAzB,EAAiC;AAEhC,YAAMqvB,KAAK,GAAGrvB,KAAK,CAACuL,MAApB;AAEA8jB,aAAK,CAAClW,mBAAN,CAA2B,SAA3B,EAAsCynG,cAAtC;AAEAD,aAAK,UAAL,CAActxF,KAAd;AAEA;;AAED,eAAS9c,GAAT,CAAc8c,KAAd,EAAqBC,MAArB,EAA8B;AAE7B,YAAMuxF,OAAO,GAAGF,KAAK,CAACpuG,GAAN,CAAW8c,KAAX,CAAhB;AACA,YAAIyxF,IAAJ;;AAEA,YAAKD,OAAO,KAAK/wG,SAAjB,EAA6B;AAE5BgxG,cAAI,GAAG,IAAIf,eAAJ,CAAqBvoB,UAArB,CAAP;AACAmpB,eAAK,CAAC5hG,GAAN,CAAWsQ,KAAX,EAAkB,IAAI0qE,OAAJ,EAAlB;AACA4mB,eAAK,CAACpuG,GAAN,CAAW8c,KAAX,EAAmBtQ,GAAnB,CAAwBuQ,MAAxB,EAAgCwxF,IAAhC;AAEAzxF,eAAK,CAACpW,gBAAN,CAAwB,SAAxB,EAAmC2nG,cAAnC;AAEA,SARD,MAQO;AAENE,cAAI,GAAGD,OAAO,CAACtuG,GAAR,CAAa+c,MAAb,CAAP;;AACA,cAAKwxF,IAAI,KAAKhxG,SAAd,EAA0B;AAEzBgxG,gBAAI,GAAG,IAAIf,eAAJ,CAAqBvoB,UAArB,CAAP;AACAqpB,mBAAO,CAAC9hG,GAAR,CAAauQ,MAAb,EAAqBwxF,IAArB;AAEA;AAED;;AAED,eAAOA,IAAP;AAEA;;AAED,eAASzhG,OAAT,GAAmB;AAElBshG,aAAK,GAAG,IAAI5mB,OAAJ,EAAR;AAEA;;AAED,aAAO;AACNxnF,WAAG,EAAEA,GADC;AAEN8M,eAAO,EAAEA;AAFH,OAAP;AAKA;;AAED,aAAS0hG,aAAT,GAAyB;AAExB,UAAMjwB,MAAM,GAAG,EAAf;AAEA,aAAO;AAENv+E,WAAG,EAAE,aAAWyuG,KAAX,EAAmB;AAEvB,cAAKlwB,MAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAN,KAAuBwQ,SAA5B,EAAwC;AAEvC,mBAAOghF,MAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAb;AAEA;;AAED,cAAI+wF,QAAJ;;AAEA,kBAAS2wB,KAAK,CAAC56G,IAAf;AAEC,iBAAK,kBAAL;AACCiqF,sBAAQ,GAAG;AACVzf,yBAAS,EAAE,IAAIpT,OAAJ,EADD;AAEVnsC,qBAAK,EAAE,IAAIgmD,KAAJ;AAFG,eAAX;AAIA;;AAED,iBAAK,WAAL;AACCgZ,sBAAQ,GAAG;AACVn0E,wBAAQ,EAAE,IAAIshD,OAAJ,EADA;AAEVoT,yBAAS,EAAE,IAAIpT,OAAJ,EAFD;AAGVnsC,qBAAK,EAAE,IAAIgmD,KAAJ,EAHG;AAIVh2D,wBAAQ,EAAE,CAJA;AAKV42E,uBAAO,EAAE,CALC;AAMVC,2BAAW,EAAE,CANH;AAOVC,qBAAK,EAAE;AAPG,eAAX;AASA;;AAED,iBAAK,YAAL;AACC9H,sBAAQ,GAAG;AACVn0E,wBAAQ,EAAE,IAAIshD,OAAJ,EADA;AAEVnsC,qBAAK,EAAE,IAAIgmD,KAAJ,EAFG;AAGVh2D,wBAAQ,EAAE,CAHA;AAIV82E,qBAAK,EAAE;AAJG,eAAX;AAMA;;AAED,iBAAK,iBAAL;AACC9H,sBAAQ,GAAG;AACVzf,yBAAS,EAAE,IAAIpT,OAAJ,EADD;AAEVs7B,wBAAQ,EAAE,IAAIzhB,KAAJ,EAFA;AAGV0hB,2BAAW,EAAE,IAAI1hB,KAAJ;AAHH,eAAX;AAKA;;AAED,iBAAK,eAAL;AACCgZ,sBAAQ,GAAG;AACVh/D,qBAAK,EAAE,IAAIgmD,KAAJ,EADG;AAEVn7D,wBAAQ,EAAE,IAAIshD,OAAJ,EAFA;AAGVyjD,yBAAS,EAAE,IAAIzjD,OAAJ,EAHD;AAIV0jD,0BAAU,EAAE,IAAI1jD,OAAJ;AAJF,eAAX;AAMA;AA7CF;;AAiDAszB,gBAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAN,GAAqB+wF,QAArB;AAEA,iBAAOA,QAAP;AAEA;AAjEK,OAAP;AAqEA;;AAED,aAAS8wB,mBAAT,GAA+B;AAE9B,UAAMrwB,MAAM,GAAG,EAAf;AAEA,aAAO;AAENv+E,WAAG,EAAE,aAAWyuG,KAAX,EAAmB;AAEvB,cAAKlwB,MAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAN,KAAuBwQ,SAA5B,EAAwC;AAEvC,mBAAOghF,MAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAb;AAEA;;AAED,cAAI+wF,QAAJ;;AAEA,kBAAS2wB,KAAK,CAAC56G,IAAf;AAEC,iBAAK,kBAAL;AACCiqF,sBAAQ,GAAG;AACVqH,0BAAU,EAAE,CADF;AAEVC,gCAAgB,EAAE,CAFR;AAGVC,4BAAY,EAAE,CAHJ;AAIVC,6BAAa,EAAE,IAAInqC,OAAJ;AAJL,eAAX;AAMA;;AAED,iBAAK,WAAL;AACC2iC,sBAAQ,GAAG;AACVqH,0BAAU,EAAE,CADF;AAEVC,gCAAgB,EAAE,CAFR;AAGVC,4BAAY,EAAE,CAHJ;AAIVC,6BAAa,EAAE,IAAInqC,OAAJ;AAJL,eAAX;AAMA;;AAED,iBAAK,YAAL;AACC2iC,sBAAQ,GAAG;AACVqH,0BAAU,EAAE,CADF;AAEVC,gCAAgB,EAAE,CAFR;AAGVC,4BAAY,EAAE,CAHJ;AAIVC,6BAAa,EAAE,IAAInqC,OAAJ,EAJL;AAKV+qC,gCAAgB,EAAE,CALR;AAMVC,+BAAe,EAAE;AANP,eAAX;AAQA;AAED;AA/BD;;AAmCA5H,gBAAM,CAAEkwB,KAAK,CAAC1hH,EAAR,CAAN,GAAqB+wF,QAArB;AAEA,iBAAOA,QAAP;AAEA;AAnDK,OAAP;AAuDA;;AAID,QAAI+wB,WAAW,GAAG,CAAlB;;AAEA,aAASC,wBAAT,CAAmCC,MAAnC,EAA2CC,MAA3C,EAAoD;AAEnD,aAAO,CAAEA,MAAM,CAAC75C,UAAP,GAAoB,CAApB,GAAwB,CAA1B,KAAkC45C,MAAM,CAAC55C,UAAP,GAAoB,CAApB,GAAwB,CAA1D,CAAP;AAEA;;AAED,aAAS85C,WAAT,GAAuB;AAEtB,UAAMp2C,KAAK,GAAG,IAAI21C,aAAJ,EAAd;AAEA,UAAMU,WAAW,GAAGN,mBAAmB,EAAvC;AAEA,UAAMlkG,KAAK,GAAG;AAEbyc,eAAO,EAAE,CAFI;AAIbg1D,YAAI,EAAE;AACLgzB,2BAAiB,EAAE,CAAE,CADhB;AAELC,qBAAW,EAAE,CAAE,CAFV;AAGLC,oBAAU,EAAE,CAAE,CAHT;AAILC,wBAAc,EAAE,CAAE,CAJb;AAKLC,oBAAU,EAAE,CAAE,CALT;AAOLC,+BAAqB,EAAE,CAAE,CAPpB;AAQLC,yBAAe,EAAE,CAAE,CARd;AASLC,wBAAc,EAAE,CAAE;AATb,SAJO;AAgBbC,eAAO,EAAE,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,CAhBI;AAiBbC,aAAK,EAAE,EAjBM;AAkBbnD,mBAAW,EAAE,EAlBA;AAmBboD,yBAAiB,EAAE,EAnBN;AAoBbtqB,4BAAoB,EAAE,EApBT;AAqBbC,+BAAuB,EAAE,EArBZ;AAsBbknB,YAAI,EAAE,EAtBO;AAuBboD,kBAAU,EAAE,EAvBC;AAwBbhqB,qBAAa,EAAE,EAxBF;AAyBbC,wBAAgB,EAAE,EAzBL;AA0Bb4mB,gBAAQ,EAAE,EA1BG;AA2BbpqE,aAAK,EAAE,EA3BM;AA4BbwtE,mBAAW,EAAE,EA5BA;AA6Bb3pB,sBAAc,EAAE,EA7BH;AA8BbC,yBAAiB,EAAE,EA9BN;AA+BbumB,YAAI,EAAE;AA/BO,OAAd;;AAmCA,WAAM,IAAIz9G,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB;AAA+Bub,aAAK,CAACklG,KAAN,CAAY//G,IAAZ,CAAkB,IAAIo7D,OAAJ,EAAlB;AAA/B;;AAEA,UAAM+kD,OAAO,GAAG,IAAI/kD,OAAJ,EAAhB;AACA,UAAM7J,OAAO,GAAG,IAAIyM,OAAJ,EAAhB;AACA,UAAMoiD,QAAQ,GAAG,IAAIpiD,OAAJ,EAAjB;;AAEA,eAASkmC,KAAT,CAAgBxV,MAAhB,EAAwB2tB,OAAxB,EAAiCnvF,MAAjC,EAA0C;AAEzC,YAAI6C,CAAC,GAAG,CAAR;AAAA,YAAWmE,CAAC,GAAG,CAAf;AAAA,YAAkBp1B,CAAC,GAAG,CAAtB;;AAEA,aAAM,IAAIQ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB;AAA+Bub,eAAK,CAACklG,KAAN,CAAazgH,KAAb,EAAiBqd,GAAjB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;AAA/B;;AAEA,YAAI2iG,iBAAiB,GAAG,CAAxB;AACA,YAAIC,WAAW,GAAG,CAAlB;AACA,YAAIC,UAAU,GAAG,CAAjB;AACA,YAAIC,cAAc,GAAG,CAArB;AACA,YAAIC,UAAU,GAAG,CAAjB;AAEA,YAAIC,qBAAqB,GAAG,CAA5B;AACA,YAAIC,eAAe,GAAG,CAAtB;AACA,YAAIC,cAAc,GAAG,CAArB;AAEA,YAAMnV,UAAU,GAAGx9E,MAAM,CAACkvC,kBAA1B;AAEAsyB,cAAM,CAAC9vF,IAAP,CAAaqgH,wBAAb;;AAEA,aAAM,IAAI3/G,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG2kF,MAAM,CAAC/vF,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMs/G,KAAK,GAAGlwB,MAAM,CAAEpvF,KAAF,CAApB;AAEA,cAAM2vB,KAAK,GAAG2vF,KAAK,CAAC3vF,KAApB;AACA,cAAMoxF,SAAS,GAAGzB,KAAK,CAACyB,SAAxB;AACA,cAAMphG,QAAQ,GAAG2/F,KAAK,CAAC3/F,QAAvB;AAEA,cAAM+9F,SAAS,GAAK4B,KAAK,CAAChd,MAAN,IAAgBgd,KAAK,CAAChd,MAAN,CAAat1F,GAA/B,GAAuCsyG,KAAK,CAAChd,MAAN,CAAat1F,GAAb,CAAiBqqD,OAAxD,GAAkE,IAApF;;AAEA,cAAKioD,KAAK,CAAC0B,cAAX,EAA4B;AAE3BvwF,aAAC,IAAId,KAAK,CAACc,CAAN,GAAUswF,SAAf;AACAnsF,aAAC,IAAIjF,KAAK,CAACiF,CAAN,GAAUmsF,SAAf;AACAvhH,aAAC,IAAImwB,KAAK,CAACnwB,CAAN,GAAUuhH,SAAf;AAEA,WAND,MAMO,IAAKzB,KAAK,CAAC2B,YAAX,EAA0B;AAEhC,iBAAM,IAAI3gH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9Bib,mBAAK,CAACklG,KAAN,CAAangH,CAAb,EAAiByc,eAAjB,CAAkCuiG,KAAK,CAAC4B,EAAN,CAASC,YAAT,CAAuB7gH,CAAvB,CAAlC,EAA8DygH,SAA9D;AAEA;AAED,WARM,MAQA,IAAKzB,KAAK,CAAC8B,kBAAX,EAAgC;AAEtC,gBAAMzyB,QAAQ,GAAGjlB,KAAK,CAAC74D,GAAN,CAAWyuG,KAAX,CAAjB;AAEA3wB,oBAAQ,CAACh/D,KAAT,CAAezU,IAAf,CAAqBokG,KAAK,CAAC3vF,KAA3B,EAAmCvS,cAAnC,CAAmDkiG,KAAK,CAACyB,SAAzD;AACApyB,oBAAQ,CAACzf,SAAT,CAAmB7Q,qBAAnB,CAA0CihD,KAAK,CAACpiD,WAAhD;AACA2jD,mBAAO,CAACxiD,qBAAR,CAA+BihD,KAAK,CAACz1G,MAAN,CAAaqzD,WAA5C;AACAyxB,oBAAQ,CAACzf,SAAT,CAAmB/yD,GAAnB,CAAwB0kG,OAAxB;AACAlyB,oBAAQ,CAACzf,SAAT,CAAmB/R,kBAAnB,CAAuCiuC,UAAvC;;AAEA,gBAAKkU,KAAK,CAACt5C,UAAX,EAAwB;AAEvB,kBAAMs8B,MAAM,GAAGgd,KAAK,CAAChd,MAArB;AAEA,kBAAM+e,cAAc,GAAGtB,WAAW,CAAClvG,GAAZ,CAAiByuG,KAAjB,CAAvB;AAEA+B,4BAAc,CAACrrB,UAAf,GAA4BsM,MAAM,CAACgf,IAAnC;AACAD,4BAAc,CAACprB,gBAAf,GAAkCqM,MAAM,CAACif,UAAzC;AACAF,4BAAc,CAACnrB,YAAf,GAA8BoM,MAAM,CAACzlF,MAArC;AACAwkG,4BAAc,CAAClrB,aAAf,GAA+BmM,MAAM,CAACkf,OAAtC;AAEAjmG,mBAAK,CAACmlG,iBAAN,CAAyBV,iBAAzB,IAA+CqB,cAA/C;AACA9lG,mBAAK,CAAC66E,oBAAN,CAA4B4pB,iBAA5B,IAAkDtC,SAAlD;AACAniG,mBAAK,CAAC86E,uBAAN,CAA+B2pB,iBAA/B,IAAqDV,KAAK,CAAChd,MAAN,CAAa7hF,MAAlE;AAEA4/F,mCAAqB;AAErB;;AAED9kG,iBAAK,CAAC+hG,WAAN,CAAmB0C,iBAAnB,IAAyCrxB,QAAzC;AAEAqxB,6BAAiB;AAEjB,WAjCM,MAiCA,IAAKV,KAAK,CAACmC,WAAX,EAAyB;AAE/B,gBAAM9yB,SAAQ,GAAGjlB,KAAK,CAAC74D,GAAN,CAAWyuG,KAAX,CAAjB;;AAEA3wB,qBAAQ,CAACn0E,QAAT,CAAkB6jD,qBAAlB,CAAyCihD,KAAK,CAACpiD,WAA/C;;AACAyxB,qBAAQ,CAACn0E,QAAT,CAAkBk7C,YAAlB,CAAgC01C,UAAhC;;AAEAzc,qBAAQ,CAACh/D,KAAT,CAAezU,IAAf,CAAqByU,KAArB,EAA6BvS,cAA7B,CAA6C2jG,SAA7C;;AACApyB,qBAAQ,CAAChvE,QAAT,GAAoBA,QAApB;;AAEAgvE,qBAAQ,CAACzf,SAAT,CAAmB7Q,qBAAnB,CAA0CihD,KAAK,CAACpiD,WAAhD;;AACA2jD,mBAAO,CAACxiD,qBAAR,CAA+BihD,KAAK,CAACz1G,MAAN,CAAaqzD,WAA5C;;AACAyxB,qBAAQ,CAACzf,SAAT,CAAmB/yD,GAAnB,CAAwB0kG,OAAxB;;AACAlyB,qBAAQ,CAACzf,SAAT,CAAmB/R,kBAAnB,CAAuCiuC,UAAvC;;AAEAzc,qBAAQ,CAAC4H,OAAT,GAAmBh+E,IAAI,CAACujC,GAAL,CAAUwjE,KAAK,CAAC//F,KAAhB,CAAnB;AACAovE,qBAAQ,CAAC6H,WAAT,GAAuBj+E,IAAI,CAACujC,GAAL,CAAUwjE,KAAK,CAAC//F,KAAN,IAAgB,IAAI+/F,KAAK,CAACoC,QAA1B,CAAV,CAAvB;AACA/yB,qBAAQ,CAAC8H,KAAT,GAAiB6oB,KAAK,CAAC7oB,KAAvB;;AAEA,gBAAK6oB,KAAK,CAACt5C,UAAX,EAAwB;AAEvB,kBAAMs8B,OAAM,GAAGgd,KAAK,CAAChd,MAArB;;AAEA,kBAAM+e,eAAc,GAAGtB,WAAW,CAAClvG,GAAZ,CAAiByuG,KAAjB,CAAvB;;AAEA+B,6BAAc,CAACrrB,UAAf,GAA4BsM,OAAM,CAACgf,IAAnC;AACAD,6BAAc,CAACprB,gBAAf,GAAkCqM,OAAM,CAACif,UAAzC;AACAF,6BAAc,CAACnrB,YAAf,GAA8BoM,OAAM,CAACzlF,MAArC;AACAwkG,6BAAc,CAAClrB,aAAf,GAA+BmM,OAAM,CAACkf,OAAtC;AAEAjmG,mBAAK,CAAColG,UAAN,CAAkBT,UAAlB,IAAiCmB,eAAjC;AACA9lG,mBAAK,CAACo7E,aAAN,CAAqBupB,UAArB,IAAoCxC,SAApC;AACAniG,mBAAK,CAACq7E,gBAAN,CAAwBspB,UAAxB,IAAuCZ,KAAK,CAAChd,MAAN,CAAa7hF,MAApD;AAEA8/F,4BAAc;AAEd;;AAEDhlG,iBAAK,CAACgiG,IAAN,CAAY2C,UAAZ,IAA2BvxB,SAA3B;AAEAuxB,sBAAU;AAEV,WA1CM,MA0CA,IAAKZ,KAAK,CAACqC,eAAX,EAA6B;AAEnC,gBAAMhzB,UAAQ,GAAGjlB,KAAK,CAAC74D,GAAN,CAAWyuG,KAAX,CAAjB,CAFmC,CAInC;AACA;AAEA;;;AACA3wB,sBAAQ,CAACh/D,KAAT,CAAezU,IAAf,CAAqByU,KAArB,EAA6BvS,cAA7B,CAA6C2jG,SAA7C;;AAEApyB,sBAAQ,CAACn0E,QAAT,CAAkB6jD,qBAAlB,CAAyCihD,KAAK,CAACpiD,WAA/C;;AACAyxB,sBAAQ,CAACn0E,QAAT,CAAkBk7C,YAAlB,CAAgC01C,UAAhC,EAXmC,CAanC;;;AACA0V,oBAAQ,CAACtxD,QAAT;AACAyC,mBAAO,CAAC/2C,IAAR,CAAcokG,KAAK,CAACpiD,WAApB;AACAjL,mBAAO,CAAChC,WAAR,CAAqBm7C,UAArB;AACA0V,oBAAQ,CAACvhD,eAAT,CAA0BtN,OAA1B;;AAEA08B,sBAAQ,CAAC4wB,SAAT,CAAmBliG,GAAnB,CAAwBiiG,KAAK,CAAChxF,KAAN,GAAc,GAAtC,EAA2C,GAA3C,EAAgD,GAAhD;;AACAqgE,sBAAQ,CAAC6wB,UAAT,CAAoBniG,GAApB,CAAyB,GAAzB,EAA8BiiG,KAAK,CAACjxF,MAAN,GAAe,GAA7C,EAAkD,GAAlD;;AAEAsgE,sBAAQ,CAAC4wB,SAAT,CAAmB7pD,YAAnB,CAAiCorD,QAAjC;;AACAnyB,sBAAQ,CAAC6wB,UAAT,CAAoB9pD,YAApB,CAAkCorD,QAAlC,EAvBmC,CAyBnC;AACA;;;AAEAvlG,iBAAK,CAACiiG,QAAN,CAAgB2C,cAAhB,IAAmCxxB,UAAnC;AAEAwxB,0BAAc;AAEd,WAhCM,MAgCA,IAAKb,KAAK,CAACsC,YAAX,EAA0B;AAEhC,gBAAMjzB,UAAQ,GAAGjlB,KAAK,CAAC74D,GAAN,CAAWyuG,KAAX,CAAjB;;AAEA3wB,sBAAQ,CAACn0E,QAAT,CAAkB6jD,qBAAlB,CAAyCihD,KAAK,CAACpiD,WAA/C;;AACAyxB,sBAAQ,CAACn0E,QAAT,CAAkBk7C,YAAlB,CAAgC01C,UAAhC;;AAEAzc,sBAAQ,CAACh/D,KAAT,CAAezU,IAAf,CAAqBokG,KAAK,CAAC3vF,KAA3B,EAAmCvS,cAAnC,CAAmDkiG,KAAK,CAACyB,SAAzD;;AACApyB,sBAAQ,CAAChvE,QAAT,GAAoB2/F,KAAK,CAAC3/F,QAA1B;AACAgvE,sBAAQ,CAAC8H,KAAT,GAAiB6oB,KAAK,CAAC7oB,KAAvB;;AAEA,gBAAK6oB,KAAK,CAACt5C,UAAX,EAAwB;AAEvB,kBAAMs8B,QAAM,GAAGgd,KAAK,CAAChd,MAArB;;AAEA,kBAAM+e,gBAAc,GAAGtB,WAAW,CAAClvG,GAAZ,CAAiByuG,KAAjB,CAAvB;;AAEA+B,8BAAc,CAACrrB,UAAf,GAA4BsM,QAAM,CAACgf,IAAnC;AACAD,8BAAc,CAACprB,gBAAf,GAAkCqM,QAAM,CAACif,UAAzC;AACAF,8BAAc,CAACnrB,YAAf,GAA8BoM,QAAM,CAACzlF,MAArC;AACAwkG,8BAAc,CAAClrB,aAAf,GAA+BmM,QAAM,CAACkf,OAAtC;AACAH,8BAAc,CAACtqB,gBAAf,GAAkCuL,QAAM,CAAC10E,MAAP,CAAcm1C,IAAhD;AACAs+C,8BAAc,CAACrqB,eAAf,GAAiCsL,QAAM,CAAC10E,MAAP,CAAco1C,GAA/C;AAEAznD,mBAAK,CAACqlG,WAAN,CAAmBX,WAAnB,IAAmCoB,gBAAnC;AACA9lG,mBAAK,CAAC07E,cAAN,CAAsBgpB,WAAtB,IAAsCvC,SAAtC;AACAniG,mBAAK,CAAC27E,iBAAN,CAAyB+oB,WAAzB,IAAyCX,KAAK,CAAChd,MAAN,CAAa7hF,MAAtD;AAEA6/F,6BAAe;AAEf;;AAED/kG,iBAAK,CAAC63B,KAAN,CAAa6sE,WAAb,IAA6BtxB,UAA7B;AAEAsxB,uBAAW;AAEX,WApCM,MAoCA,IAAKX,KAAK,CAACuC,iBAAX,EAA+B;AAErC,gBAAMlzB,UAAQ,GAAGjlB,KAAK,CAAC74D,GAAN,CAAWyuG,KAAX,CAAjB;;AAEA3wB,sBAAQ,CAACzf,SAAT,CAAmB7Q,qBAAnB,CAA0CihD,KAAK,CAACpiD,WAAhD;;AACAyxB,sBAAQ,CAACzf,SAAT,CAAmB/R,kBAAnB,CAAuCiuC,UAAvC;;AACAzc,sBAAQ,CAACzf,SAAT,CAAmBvhB,SAAnB;;AAEAghC,sBAAQ,CAACyI,QAAT,CAAkBl8E,IAAlB,CAAwBokG,KAAK,CAAC3vF,KAA9B,EAAsCvS,cAAtC,CAAsD2jG,SAAtD;;AACApyB,sBAAQ,CAAC0I,WAAT,CAAqBn8E,IAArB,CAA2BokG,KAAK,CAACjoB,WAAjC,EAA+Cj6E,cAA/C,CAA+D2jG,SAA/D;;AAEAxlG,iBAAK,CAACkiG,IAAN,CAAY2C,UAAZ,IAA2BzxB,UAA3B;AAEAyxB,sBAAU;AAEV;AAED;;AAED7kG,aAAK,CAACilG,OAAN,CAAe,CAAf,IAAqB/vF,CAArB;AACAlV,aAAK,CAACilG,OAAN,CAAe,CAAf,IAAqB5rF,CAArB;AACArZ,aAAK,CAACilG,OAAN,CAAe,CAAf,IAAqBhhH,CAArB;AAEA,YAAMwtF,IAAI,GAAGzxE,KAAK,CAACyxE,IAAnB;;AAEA,YAAKA,IAAI,CAACgzB,iBAAL,KAA2BA,iBAA3B,IACJhzB,IAAI,CAACizB,WAAL,KAAqBA,WADjB,IAEJjzB,IAAI,CAACkzB,UAAL,KAAoBA,UAFhB,IAGJlzB,IAAI,CAACmzB,cAAL,KAAwBA,cAHpB,IAIJnzB,IAAI,CAACozB,UAAL,KAAoBA,UAJhB,IAKJpzB,IAAI,CAACqzB,qBAAL,KAA+BA,qBAL3B,IAMJrzB,IAAI,CAACszB,eAAL,KAAyBA,eANrB,IAOJtzB,IAAI,CAACuzB,cAAL,KAAwBA,cAPzB,EAO0C;AAEzChlG,eAAK,CAAC+hG,WAAN,CAAkBj+G,MAAlB,GAA2B2gH,iBAA3B;AACAzkG,eAAK,CAACgiG,IAAN,CAAWl+G,MAAX,GAAoB6gH,UAApB;AACA3kG,eAAK,CAACiiG,QAAN,CAAen+G,MAAf,GAAwB8gH,cAAxB;AACA5kG,eAAK,CAAC63B,KAAN,CAAY/zC,MAAZ,GAAqB4gH,WAArB;AACA1kG,eAAK,CAACkiG,IAAN,CAAWp+G,MAAX,GAAoB+gH,UAApB;AAEA7kG,eAAK,CAACmlG,iBAAN,CAAwBrhH,MAAxB,GAAiCghH,qBAAjC;AACA9kG,eAAK,CAAC66E,oBAAN,CAA2B/2F,MAA3B,GAAoCghH,qBAApC;AACA9kG,eAAK,CAACqlG,WAAN,CAAkBvhH,MAAlB,GAA2BihH,eAA3B;AACA/kG,eAAK,CAAC07E,cAAN,CAAqB53F,MAArB,GAA8BihH,eAA9B;AACA/kG,eAAK,CAAColG,UAAN,CAAiBthH,MAAjB,GAA0BkhH,cAA1B;AACAhlG,eAAK,CAACo7E,aAAN,CAAoBt3F,MAApB,GAA6BkhH,cAA7B;AACAhlG,eAAK,CAAC86E,uBAAN,CAA8Bh3F,MAA9B,GAAuCghH,qBAAvC;AACA9kG,eAAK,CAAC27E,iBAAN,CAAwB73F,MAAxB,GAAiCihH,eAAjC;AACA/kG,eAAK,CAACq7E,gBAAN,CAAuBv3F,MAAvB,GAAgCkhH,cAAhC;AAEAvzB,cAAI,CAACgzB,iBAAL,GAAyBA,iBAAzB;AACAhzB,cAAI,CAACizB,WAAL,GAAmBA,WAAnB;AACAjzB,cAAI,CAACkzB,UAAL,GAAkBA,UAAlB;AACAlzB,cAAI,CAACmzB,cAAL,GAAsBA,cAAtB;AACAnzB,cAAI,CAACozB,UAAL,GAAkBA,UAAlB;AAEApzB,cAAI,CAACqzB,qBAAL,GAA6BA,qBAA7B;AACArzB,cAAI,CAACszB,eAAL,GAAuBA,eAAvB;AACAtzB,cAAI,CAACuzB,cAAL,GAAsBA,cAAtB;AAEAhlG,eAAK,CAACyc,OAAN,GAAgB0nF,WAAW,EAA3B;AAEA;AAED;;AAED,aAAO;AACN9a,aAAK,EAAEA,KADD;AAENrpF,aAAK,EAAEA;AAFD,OAAP;AAKA;;AAED,aAASumG,gBAAT,GAA4B;AAE3B,UAAM1yB,MAAM,GAAG,IAAI0wB,WAAJ,EAAf;AAEA,UAAMiC,WAAW,GAAG,EAApB;AACA,UAAMC,YAAY,GAAG,EAArB;;AAEA,eAAS3X,IAAT,GAAgB;AAEf0X,mBAAW,CAAC1iH,MAAZ,GAAqB,CAArB;AACA2iH,oBAAY,CAAC3iH,MAAb,GAAsB,CAAtB;AAEA;;AAED,eAAS4iH,SAAT,CAAoB3C,KAApB,EAA4B;AAE3ByC,mBAAW,CAACrhH,IAAZ,CAAkB4+G,KAAlB;AAEA;;AAED,eAAS4C,UAAT,CAAqBC,WAArB,EAAmC;AAElCH,oBAAY,CAACthH,IAAb,CAAmByhH,WAAnB;AAEA;;AAED,eAASC,WAAT,CAAsBx0F,MAAtB,EAA+B;AAE9BwhE,cAAM,CAACwV,KAAP,CAAcmd,WAAd,EAA2BC,YAA3B,EAAyCp0F,MAAzC;AAEA;;AAED,UAAMrS,KAAK,GAAG;AACbwmG,mBAAW,EAAEA,WADA;AAEbC,oBAAY,EAAEA,YAFD;AAIb5yB,cAAM,EAAEA;AAJK,OAAd;AAOA,aAAO;AACNib,YAAI,EAAEA,IADA;AAEN9uF,aAAK,EAAEA,KAFD;AAGN6mG,mBAAW,EAAEA,WAHP;AAKNH,iBAAS,EAAEA,SALL;AAMNC,kBAAU,EAAEA;AANN,OAAP;AASA;;AAED,aAASG,iBAAT,GAA6B;AAE5B,UAAIC,YAAY,GAAG,IAAIjqB,OAAJ,EAAnB;;AAEA,eAAS6mB,cAAT,CAAyB5gH,KAAzB,EAAiC;AAEhC,YAAMqvB,KAAK,GAAGrvB,KAAK,CAACuL,MAApB;AAEA8jB,aAAK,CAAClW,mBAAN,CAA2B,SAA3B,EAAsCynG,cAAtC;AAEAoD,oBAAY,UAAZ,CAAqB30F,KAArB;AAEA;;AAED,eAAS9c,GAAT,CAAc8c,KAAd,EAAqBC,MAArB,EAA8B;AAE7B,YAAI20F,WAAJ;;AAEA,YAAKD,YAAY,CAAC/W,GAAb,CAAkB59E,KAAlB,MAA8B,KAAnC,EAA2C;AAE1C40F,qBAAW,GAAG,IAAIT,gBAAJ,EAAd;AACAQ,sBAAY,CAACjlG,GAAb,CAAkBsQ,KAAlB,EAAyB,IAAI0qE,OAAJ,EAAzB;AACAiqB,sBAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAA0BtQ,GAA1B,CAA+BuQ,MAA/B,EAAuC20F,WAAvC;AAEA50F,eAAK,CAACpW,gBAAN,CAAwB,SAAxB,EAAmC2nG,cAAnC;AAEA,SARD,MAQO;AAEN,cAAKoD,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAA0B49E,GAA1B,CAA+B39E,MAA/B,MAA4C,KAAjD,EAAyD;AAExD20F,uBAAW,GAAG,IAAIT,gBAAJ,EAAd;AACAQ,wBAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAA0BtQ,GAA1B,CAA+BuQ,MAA/B,EAAuC20F,WAAvC;AAEA,WALD,MAKO;AAENA,uBAAW,GAAGD,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAA0B9c,GAA1B,CAA+B+c,MAA/B,CAAd;AAEA;AAED;;AAED,eAAO20F,WAAP;AAEA;;AAED,eAAS5kG,OAAT,GAAmB;AAElB2kG,oBAAY,GAAG,IAAIjqB,OAAJ,EAAf;AAEA;;AAED,aAAO;AACNxnF,WAAG,EAAEA,GADC;AAEN8M,eAAO,EAAEA;AAFH,OAAP;AAKA;AAED;;;;;;;;;;;;;;;;;;;AAkBA,aAAS89F,iBAAT,CAA4BlyC,UAA5B,EAAyC;AAExC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAKo1G,YAAL,GAAoB9yD,iBAApB;AAEA,WAAK+2B,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AAEA,WAAK7wE,GAAL,GAAW,IAAX;AAEA,WAAK+uE,QAAL,GAAgB,IAAhB;AAEA,WAAKS,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKe,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AAEA,WAAK1T,GAAL,GAAW,KAAX;AAEA,WAAK6Q,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDkyC,qBAAiB,CAACvkG,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA9B;AACAukG,qBAAiB,CAACvkG,SAAlB,CAA4B0M,WAA5B,GAA0C63F,iBAA1C;AAEAA,qBAAiB,CAACvkG,SAAlB,CAA4BsrG,mBAA5B,GAAkD,IAAlD;;AAEA/G,qBAAiB,CAACvkG,SAAlB,CAA4BgE,IAA5B,GAAmC,UAAWyhC,MAAX,EAAoB;AAEtD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKm9D,YAAL,GAAoBn9D,MAAM,CAACm9D,YAA3B;AAEA,WAAK/7B,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AAEA,WAAK7wE,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAK+uE,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKS,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKe,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AAEA,aAAO,IAAP;AAEA,KAtBD;AAwBA;;;;;;;;;;;;;;;;;;;;;;AAqBA,aAASg+B,oBAAT,CAA+BnyC,UAA/B,EAA4C;AAE3C+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,sBAAZ;AAEA,WAAKy9F,iBAAL,GAAyB,IAAIrmC,OAAJ,EAAzB;AACA,WAAKsmC,YAAL,GAAoB,CAApB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AAEA,WAAKtkB,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AAEA,WAAK7wE,GAAL,GAAW,IAAX;AAEA,WAAK+uE,QAAL,GAAgB,IAAhB;AAEA,WAAKS,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAK1S,GAAL,GAAW,KAAX;AAEA,WAAK6Q,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDmyC,wBAAoB,CAACxkG,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAAjC;AACAwkG,wBAAoB,CAACxkG,SAArB,CAA+B0M,WAA/B,GAA6C83F,oBAA7C;AAEAA,wBAAoB,CAACxkG,SAArB,CAA+BurG,sBAA/B,GAAwD,IAAxD;;AAEA/G,wBAAoB,CAACxkG,SAArB,CAA+BgE,IAA/B,GAAsC,UAAWyhC,MAAX,EAAoB;AAEzD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKwlD,iBAAL,CAAuBjnF,IAAvB,CAA6ByhC,MAAM,CAACwlD,iBAApC;AACA,WAAKC,YAAL,GAAoBzlD,MAAM,CAACylD,YAA3B;AACA,WAAKC,WAAL,GAAmB1lD,MAAM,CAAC0lD,WAA1B;AAEA,WAAKtkB,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AAEA,WAAK7wE,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAK+uE,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKS,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,aAAO,IAAP;AAEA,KArBD;;AAuBA,QAAIgmC,QAAQ,GAAG,ggCAAf;AAEA,QAAIC,QAAQ,GAAG,0DAAf;;AAEA,aAASC,cAAT,CAAyBC,SAAzB,EAAoCC,QAApC,EAA8C3Z,cAA9C,EAA+D;AAE9D,UAAI4Z,QAAQ,GAAG,IAAIpwB,OAAJ,EAAf;;AAEA,UAAMqwB,cAAc,GAAG,IAAIh3D,OAAJ,EAAvB;AAAA,UACCi3D,aAAa,GAAG,IAAIj3D,OAAJ,EADjB;AAAA,UAGCk3D,SAAS,GAAG,IAAI5tD,OAAJ,EAHb;AAAA,UAKC6tD,eAAe,GAAG,EALnB;AAAA,UAMCC,kBAAkB,GAAG,EANtB;AAAA,UAQCC,cAAc,GAAG,EARlB;;AAUA,UAAMrpC,UAAU,GAAG;AAAE,WAAGv8B,QAAL;AAAe,WAAGD,SAAlB;AAA6B,WAAGE;AAAhC,OAAnB;AAEA,UAAM4lE,sBAAsB,GAAG,IAAIt0B,cAAJ,CAAoB;AAElDC,eAAO,EAAE;AACRs0B,qBAAW,EAAE,MAAM,GADX;AAERC,0BAAgB,EAAE,MAAM;AAFhB,SAFyC;AAOlD70B,gBAAQ,EAAE;AACT80B,qBAAW,EAAE;AAAE35G,iBAAK,EAAE;AAAT,WADJ;AAET45G,oBAAU,EAAE;AAAE55G,iBAAK,EAAE,IAAIkiD,OAAJ;AAAT,WAFH;AAGTnvC,gBAAM,EAAE;AAAE/S,iBAAK,EAAE;AAAT;AAHC,SAPwC;AAalDolF,oBAAY,EAAEyzB,QAboC;AAelDxzB,sBAAc,EAAEuzB;AAfkC,OAApB,CAA/B;AAmBA,UAAMiB,uBAAuB,GAAGL,sBAAsB,CAAChpG,KAAvB,EAAhC;AACAqpG,6BAAuB,CAAC10B,OAAxB,CAAgC20B,cAAhC,GAAiD,CAAjD;AAEA,UAAMC,aAAa,GAAG,IAAIhhC,cAAJ,EAAtB;AACAghC,mBAAa,CAAC1gC,YAAd,CACC,UADD,EAEC,IAAI5E,eAAJ,CACC,IAAI+B,YAAJ,CAAkB,CAAE,CAAE,CAAJ,EAAO,CAAE,CAAT,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,GAAzB,EAA8B,CAAE,CAAhC,EAAmC,CAAnC,EAAsC,GAAtC,CAAlB,CADD,EAEC,CAFD,CAFD;AAQA,UAAMwjC,cAAc,GAAG,IAAIr8B,IAAJ,CAAUo8B,aAAV,EAAyBP,sBAAzB,CAAvB;AAEA,UAAMroG,KAAK,GAAG,IAAd;AAEA,WAAKlD,OAAL,GAAe,KAAf;AAEA,WAAKmyD,UAAL,GAAkB,IAAlB;AACA,WAAKloD,WAAL,GAAmB,KAAnB;AAEA,WAAKtd,IAAL,GAAY24C,YAAZ;;AAEA,WAAKhtB,MAAL,GAAc,UAAW++D,MAAX,EAAmBzhE,KAAnB,EAA0BC,MAA1B,EAAmC;AAEhD,YAAK3S,KAAK,CAAClD,OAAN,KAAkB,KAAvB,EAA+B;AAC/B,YAAKkD,KAAK,CAACivD,UAAN,KAAqB,KAArB,IAA8BjvD,KAAK,CAAC+G,WAAN,KAAsB,KAAzD,EAAiE;AAEjE,YAAKotE,MAAM,CAAC/vF,MAAP,KAAkB,CAAvB,EAA2B;;AAE3B,YAAMwyF,mBAAmB,GAAGgxB,SAAS,CAAC/wB,eAAV,EAA5B;;AACA,YAAMiyB,cAAc,GAAGlB,SAAS,CAACmB,iBAAV,EAAvB;;AACA,YAAMC,iBAAiB,GAAGpB,SAAS,CAACqB,oBAAV,EAA1B;;AAEA,YAAMC,MAAM,GAAGtB,SAAS,CAACtnG,KAAzB,CAXgD,CAahD;;AACA4oG,cAAM,CAACC,WAAP,CAAoBvmE,UAApB;;AACAsmE,cAAM,CAAC/rB,OAAP,CAAezoE,KAAf,CAAqB6zE,QAArB,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC;;AACA2gB,cAAM,CAAC/rB,OAAP,CAAehsD,KAAf,CAAqBi4E,OAArB,CAA8B,IAA9B;;AACAF,cAAM,CAACG,cAAP,CAAuB,KAAvB,EAjBgD,CAmBhD;;;AAEA,aAAM,IAAItkH,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGujB,MAAM,CAAC/vF,MAA7B,EAAqCW,KAAC,GAAG6rE,EAAzC,EAA6C7rE,KAAC,EAA9C,EAAoD;AAEnD,cAAMs/G,KAAK,GAAGlwB,MAAM,CAAEpvF,KAAF,CAApB;AACA,cAAMsiG,MAAM,GAAGgd,KAAK,CAAChd,MAArB;AAEA,cAAKA,MAAM,CAACp4B,UAAP,KAAsB,KAAtB,IAA+Bo4B,MAAM,CAACtgF,WAAP,KAAuB,KAA3D,EAAmE;;AAEnE,cAAKsgF,MAAM,KAAKl0F,SAAhB,EAA4B;AAE3BjN,mBAAO,CAAC2W,IAAR,CAAc,uBAAd,EAAuCwnG,KAAvC,EAA8C,gBAA9C;AACA;AAEA;;AAED0D,wBAAc,CAAC9nG,IAAf,CAAqBonF,MAAM,CAACkf,OAA5B;;AAEA,cAAM+C,kBAAkB,GAAGjiB,MAAM,CAACkiB,eAAP,EAA3B;;AAEAxB,wBAAc,CAACp2D,QAAf,CAAyB23D,kBAAzB;;AAEAtB,uBAAa,CAAC/nG,IAAd,CAAoBonF,MAAM,CAACkf,OAA3B;;AAEA,cAAKwB,cAAc,CAACr4G,CAAf,GAAmBw+F,cAAnB,IAAqC6Z,cAAc,CAACthG,CAAf,GAAmBynF,cAA7D,EAA8E;AAE7E,gBAAK6Z,cAAc,CAACr4G,CAAf,GAAmBw+F,cAAxB,EAAyC;AAExC8Z,2BAAa,CAACt4G,CAAd,GAAkB4N,IAAI,CAAC4N,KAAL,CAAYgjF,cAAc,GAAGob,kBAAkB,CAAC55G,CAAhD,CAAlB;AACAq4G,4BAAc,CAACr4G,CAAf,GAAmBs4G,aAAa,CAACt4G,CAAd,GAAkB45G,kBAAkB,CAAC55G,CAAxD;AACA23F,oBAAM,CAACkf,OAAP,CAAe72G,CAAf,GAAmBs4G,aAAa,CAACt4G,CAAjC;AAEA;;AAED,gBAAKq4G,cAAc,CAACthG,CAAf,GAAmBynF,cAAxB,EAAyC;AAExC8Z,2BAAa,CAACvhG,CAAd,GAAkBnJ,IAAI,CAAC4N,KAAL,CAAYgjF,cAAc,GAAGob,kBAAkB,CAAC7iG,CAAhD,CAAlB;AACAshG,4BAAc,CAACthG,CAAf,GAAmBuhG,aAAa,CAACvhG,CAAd,GAAkB6iG,kBAAkB,CAAC7iG,CAAxD;AACA4gF,oBAAM,CAACkf,OAAP,CAAe9/F,CAAf,GAAmBuhG,aAAa,CAACvhG,CAAjC;AAEA;AAED;;AAED,cAAK4gF,MAAM,CAACt1F,GAAP,KAAe,IAAf,IAAuB,CAAEs1F,MAAM,CAACmiB,kBAAhC,IAAsD,KAAK//G,IAAL,KAAc64C,YAAzE,EAAwF;AAEvF,gBAAMmnE,IAAI,GAAG;AAAE9wD,uBAAS,EAAEzS,YAAb;AAA2BwS,uBAAS,EAAExS,YAAtC;AAAoD0S,oBAAM,EAAEvR,UAA5D;AAAwEiV,2BAAa,EAAE;AAAvF,aAAb;AAEA+qC,kBAAM,CAACt1F,GAAP,GAAa,IAAIiqD,iBAAJ,CAAuB+rD,cAAc,CAACr4G,CAAtC,EAAyCq4G,cAAc,CAACthG,CAAxD,EAA2DgjG,IAA3D,CAAb;AACApiB,kBAAM,CAACt1F,GAAP,CAAWqqD,OAAX,CAAmBt4D,IAAnB,GAA0BugH,KAAK,CAACvgH,IAAN,GAAa,YAAvC;AAEAujG,kBAAM,CAACqiB,OAAP,GAAiB,IAAI1tD,iBAAJ,CAAuB+rD,cAAc,CAACr4G,CAAtC,EAAyCq4G,cAAc,CAACthG,CAAxD,EAA2DgjG,IAA3D,CAAjB;AAEApiB,kBAAM,CAAC10E,MAAP,CAAcxS,sBAAd;AAEA;;AAED,cAAKknF,MAAM,CAACt1F,GAAP,KAAe,IAApB,EAA2B;AAE1B,gBAAM03G,KAAI,GAAG;AAAE9wD,uBAAS,EAAE9S,aAAb;AAA4B6S,uBAAS,EAAE7S,aAAvC;AAAsD+S,oBAAM,EAAEvR,UAA9D;AAA0EiV,2BAAa,EAAE;AAAzF,aAAb;AAEA+qC,kBAAM,CAACt1F,GAAP,GAAa,IAAIiqD,iBAAJ,CAAuB+rD,cAAc,CAACr4G,CAAtC,EAAyCq4G,cAAc,CAACthG,CAAxD,EAA2DgjG,KAA3D,CAAb;AACApiB,kBAAM,CAACt1F,GAAP,CAAWqqD,OAAX,CAAmBt4D,IAAnB,GAA0BugH,KAAK,CAACvgH,IAAN,GAAa,YAAvC;AAEAujG,kBAAM,CAAC10E,MAAP,CAAcxS,sBAAd;AAEA;;AAEDynG,mBAAS,CAAC9wB,eAAV,CAA2BuQ,MAAM,CAACt1F,GAAlC;;AACA61G,mBAAS,CAAC7wB,KAAV;;AAEA,cAAM4yB,aAAa,GAAGtiB,MAAM,CAACuiB,gBAAP,EAAtB;;AAEA,eAAM,IAAIC,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGF,aAAvB,EAAsCE,EAAE,EAAxC,EAA8C;AAE7C,gBAAM1tD,QAAQ,GAAGkrC,MAAM,CAACyiB,WAAP,CAAoBD,EAApB,CAAjB;;AAEA5B,qBAAS,CAAC7lG,GAAV,CACC4lG,aAAa,CAACt4G,CAAd,GAAkBysD,QAAQ,CAACzsD,CAD5B,EAECs4G,aAAa,CAACvhG,CAAd,GAAkB01C,QAAQ,CAAC11C,CAF5B,EAGCuhG,aAAa,CAACt4G,CAAd,GAAkBysD,QAAQ,CAACnqC,CAH5B,EAICg2F,aAAa,CAACvhG,CAAd,GAAkB01C,QAAQ,CAACviC,CAJ5B;;AAOAsvF,kBAAM,CAAC/sD,QAAP,CAAiB8rD,SAAjB;;AAEA5gB,kBAAM,CAAC0iB,cAAP,CAAuB1F,KAAvB,EAA8BwF,EAA9B;AAEA/B,oBAAQ,GAAGzgB,MAAM,CAAC2iB,UAAP,EAAX;AAEAC,wBAAY,CAAEv3F,KAAF,EAASC,MAAT,EAAiB00E,MAAM,CAAC10E,MAAxB,EAAgC0xF,KAAhC,EAAuC,KAAK56G,IAA5C,CAAZ;AAEA,WA1FkD,CA4FnD;;;AAEA,cAAK,CAAE49F,MAAM,CAACmiB,kBAAT,IAA+B,KAAK//G,IAAL,KAAc64C,YAAlD,EAAiE;AAEhE4nE,mBAAO,CAAE7iB,MAAF,EAAU10E,MAAV,CAAP;AAEA;;AAED00E,gBAAM,CAACtgF,WAAP,GAAqB,KAArB;AAEA;;AAED/G,aAAK,CAAC+G,WAAN,GAAoB,KAApB;;AAEA6gG,iBAAS,CAAC9wB,eAAV,CAA2BF,mBAA3B,EAAgDkyB,cAAhD,EAAgEE,iBAAhE;AAEA,OAjID;;AAmIA,eAASkB,OAAT,CAAkB7iB,MAAlB,EAA0B10E,MAA1B,EAAmC;AAElC,YAAM07C,QAAQ,GAAGw5C,QAAQ,CAACxnG,MAAT,CAAiBwoG,cAAjB,CAAjB,CAFkC,CAIlC;;;AAEAR,8BAAsB,CAAC30B,QAAvB,CAAgC80B,WAAhC,CAA4C35G,KAA5C,GAAoDw4F,MAAM,CAACt1F,GAAP,CAAWqqD,OAA/D;AACAisD,8BAAsB,CAAC30B,QAAvB,CAAgC+0B,UAAhC,CAA2C55G,KAA3C,GAAmDw4F,MAAM,CAACkf,OAA1D;AACA8B,8BAAsB,CAAC30B,QAAvB,CAAgC9xE,MAAhC,CAAuC/S,KAAvC,GAA+Cw4F,MAAM,CAACzlF,MAAtD;;AACAgmG,iBAAS,CAAC9wB,eAAV,CAA2BuQ,MAAM,CAACqiB,OAAlC;;AACA9B,iBAAS,CAAC7wB,KAAV;;AACA6wB,iBAAS,CAACuC,kBAAV,CAA8Bx3F,MAA9B,EAAsC,IAAtC,EAA4C07C,QAA5C,EAAsDg6C,sBAAtD,EAA8EQ,cAA9E,EAA8F,IAA9F,EAXkC,CAalC;;;AAEAH,+BAAuB,CAACh1B,QAAxB,CAAiC80B,WAAjC,CAA6C35G,KAA7C,GAAqDw4F,MAAM,CAACqiB,OAAP,CAAettD,OAApE;AACAssD,+BAAuB,CAACh1B,QAAxB,CAAiC+0B,UAAjC,CAA4C55G,KAA5C,GAAoDw4F,MAAM,CAACkf,OAA3D;AACAmC,+BAAuB,CAACh1B,QAAxB,CAAiC9xE,MAAjC,CAAwC/S,KAAxC,GAAgDw4F,MAAM,CAACzlF,MAAvD;;AACAgmG,iBAAS,CAAC9wB,eAAV,CAA2BuQ,MAAM,CAACt1F,GAAlC;;AACA61G,iBAAS,CAAC7wB,KAAV;;AACA6wB,iBAAS,CAACuC,kBAAV,CAA8Bx3F,MAA9B,EAAsC,IAAtC,EAA4C07C,QAA5C,EAAsDq6C,uBAAtD,EAA+EG,cAA/E,EAA+F,IAA/F;AAEA;;AAED,eAASuB,uBAAT,CAAkCC,WAAlC,EAA+CC,WAA/C,EAA4DC,aAA5D,EAA4E;AAE3E,YAAM1+F,KAAK,GAAGw+F,WAAW,IAAI,CAAf,GAAmBC,WAAW,IAAI,CAAlC,GAAsCC,aAAa,IAAI,CAArE;AAEA,YAAIh2F,QAAQ,GAAG2zF,eAAe,CAAEr8F,KAAF,CAA9B;;AAEA,YAAK0I,QAAQ,KAAKphB,SAAlB,EAA8B;AAE7BohB,kBAAQ,GAAG,IAAIisF,iBAAJ,CAAuB;AAEjC3B,wBAAY,EAAE7yD,gBAFmB;AAIjC42B,wBAAY,EAAEynC,WAJmB;AAKjCvnC,oBAAQ,EAAEwnC;AALuB,WAAvB,CAAX;AASApC,yBAAe,CAAEr8F,KAAF,CAAf,GAA2B0I,QAA3B;AAEA;;AAED,eAAOA,QAAP;AAEA;;AAED,eAASi2F,0BAAT,CAAqCH,WAArC,EAAkDC,WAAlD,EAA+DC,aAA/D,EAA+E;AAE9E,YAAM1+F,KAAK,GAAGw+F,WAAW,IAAI,CAAf,GAAmBC,WAAW,IAAI,CAAlC,GAAsCC,aAAa,IAAI,CAArE;AAEA,YAAIh2F,QAAQ,GAAG4zF,kBAAkB,CAAEt8F,KAAF,CAAjC;;AAEA,YAAK0I,QAAQ,KAAKphB,SAAlB,EAA8B;AAE7BohB,kBAAQ,GAAG,IAAIksF,oBAAJ,CAA0B;AAEpC79B,wBAAY,EAAEynC,WAFsB;AAGpCvnC,oBAAQ,EAAEwnC;AAH0B,WAA1B,CAAX;AAOAnC,4BAAkB,CAAEt8F,KAAF,CAAlB,GAA8B0I,QAA9B;AAEA;;AAED,eAAOA,QAAP;AAEA;;AAED,eAASk2F,gBAAT,CAA2Bh3G,MAA3B,EAAmC46D,QAAnC,EAA6C95C,QAA7C,EAAuD8vF,KAAvD,EAA8DvoB,gBAA9D,EAAgFC,eAAhF,EAAiGtyF,IAAjG,EAAwG;AAEvG,YAAIgH,MAAM,GAAG,IAAb;AAEA,YAAIi6G,kBAAkB,GAAGN,uBAAzB;AACA,YAAIO,cAAc,GAAGl3G,MAAM,CAACm3G,mBAA5B;;AAEA,YAAKvG,KAAK,CAACsC,YAAN,KAAuB,IAA5B,EAAmC;AAElC+D,4BAAkB,GAAGF,0BAArB;AACAG,wBAAc,GAAGl3G,MAAM,CAACo3G,sBAAxB;AAEA;;AAED,YAAKF,cAAc,KAAKx3G,SAAxB,EAAoC;AAEnC,cAAIk3G,WAAW,GAAG,KAAlB;;AAEA,cAAK91F,QAAQ,CAACquD,YAAT,KAA0B,IAA/B,EAAsC;AAErCynC,uBAAW,GAAGh8C,QAAQ,CAACwZ,eAAT,IAA4BxZ,QAAQ,CAACwZ,eAAT,CAAyBtoE,QAArD,IAAiE8uD,QAAQ,CAACwZ,eAAT,CAAyBtoE,QAAzB,CAAkCnb,MAAlC,GAA2C,CAA1H;AAEA;;AAED,cAAIkmH,WAAW,GAAG,KAAlB;;AAEA,cAAK72G,MAAM,CAACq6E,aAAP,KAAyB,IAA9B,EAAqC;AAEpC,gBAAKv5D,QAAQ,CAACuuD,QAAT,KAAsB,IAA3B,EAAkC;AAEjCwnC,yBAAW,GAAG,IAAd;AAEA,aAJD,MAIO;AAENpkH,qBAAO,CAAC2W,IAAR,CAAc,8EAAd,EAA8FpJ,MAA9F;AAEA;AAED;;AAED,cAAM82G,aAAa,GAAG92G,MAAM,CAACo6D,eAAP,KAA2B,IAAjD;AAEAp9D,gBAAM,GAAGi6G,kBAAkB,CAAEL,WAAF,EAAeC,WAAf,EAA4BC,aAA5B,CAA3B;AAEA,SA9BD,MA8BO;AAEN95G,gBAAM,GAAGk6G,cAAT;AAEA;;AAED,YAAK/C,SAAS,CAAC7Y,oBAAV,IACHx6E,QAAQ,CAACuqD,WAAT,KAAyB,IADtB,IAEHvqD,QAAQ,CAACqqD,cAAT,CAAwBx6E,MAAxB,KAAmC,CAFrC,EAEyC;AAExC;AACA;AAEA,cAAM0mH,IAAI,GAAGr6G,MAAM,CAACi+C,IAApB;AAAA,cAA0Bq8D,IAAI,GAAGx2F,QAAQ,CAACm6B,IAA1C;AAEA,cAAIs8D,mBAAmB,GAAG5C,cAAc,CAAE0C,IAAF,CAAxC;;AAEA,cAAKE,mBAAmB,KAAK73G,SAA7B,EAAyC;AAExC63G,+BAAmB,GAAG,EAAtB;AACA5C,0BAAc,CAAE0C,IAAF,CAAd,GAAyBE,mBAAzB;AAEA;;AAED,cAAIC,cAAc,GAAGD,mBAAmB,CAAED,IAAF,CAAxC;;AAEA,cAAKE,cAAc,KAAK93G,SAAxB,EAAoC;AAEnC83G,0BAAc,GAAGx6G,MAAM,CAAC4O,KAAP,EAAjB;AACA2rG,+BAAmB,CAAED,IAAF,CAAnB,GAA8BE,cAA9B;AAEA;;AAEDx6G,gBAAM,GAAGw6G,cAAT;AAEA;;AAEDx6G,cAAM,CAACq6D,OAAP,GAAiBv2C,QAAQ,CAACu2C,OAA1B;AACAr6D,cAAM,CAAC+xE,SAAP,GAAmBjuD,QAAQ,CAACiuD,SAA5B;;AAEA,YAAK/4E,IAAI,KAAK64C,YAAd,EAA6B;AAE5B7xC,gBAAM,CAAC8sE,IAAP,GAAgBhpD,QAAQ,CAACwqD,UAAT,KAAwB,IAA1B,GAAmCxqD,QAAQ,CAACwqD,UAA5C,GAAyDxqD,QAAQ,CAACgpD,IAAhF;AAEA,SAJD,MAIO;AAEN9sE,gBAAM,CAAC8sE,IAAP,GAAgBhpD,QAAQ,CAACwqD,UAAT,KAAwB,IAA1B,GAAmCxqD,QAAQ,CAACwqD,UAA5C,GAAyDA,UAAU,CAAExqD,QAAQ,CAACgpD,IAAX,CAAjF;AAEA;;AAED9sE,cAAM,CAACquE,WAAP,GAAqBvqD,QAAQ,CAACuqD,WAA9B;AACAruE,cAAM,CAACmuE,cAAP,GAAwBrqD,QAAQ,CAACqqD,cAAjC;AACAnuE,cAAM,CAACouE,gBAAP,GAA0BtqD,QAAQ,CAACsqD,gBAAnC;AAEApuE,cAAM,CAACgyE,kBAAP,GAA4BluD,QAAQ,CAACkuD,kBAArC;AACAhyE,cAAM,CAAC4xE,SAAP,GAAmB9tD,QAAQ,CAAC8tD,SAA5B;;AAEA,YAAKgiC,KAAK,CAACsC,YAAN,KAAuB,IAAvB,IAA+Bl2G,MAAM,CAAC+2G,sBAAP,KAAkC,IAAtE,EAA6E;AAE5E/2G,gBAAM,CAACy2F,iBAAP,CAAyB9jC,qBAAzB,CAAgDihD,KAAK,CAACpiD,WAAtD;AACAxxD,gBAAM,CAAC02F,YAAP,GAAsBrL,gBAAtB;AACArrF,gBAAM,CAAC22F,WAAP,GAAqBrL,eAArB;AAEA;;AAED,eAAOtrF,MAAP;AAEA;;AAED,eAASw5G,YAAT,CAAuBx2G,MAAvB,EAA+Bkf,MAA/B,EAAuCu4F,YAAvC,EAAqD7G,KAArD,EAA4D56G,IAA5D,EAAmE;AAElE,YAAKgK,MAAM,CAACq3D,OAAP,KAAmB,KAAxB,EAAgC;AAEhC,YAAMA,OAAO,GAAGr3D,MAAM,CAAC41D,MAAP,CAAcryD,IAAd,CAAoB2b,MAAM,CAAC02C,MAA3B,CAAhB;;AAEA,YAAKyB,OAAO,KAAMr3D,MAAM,CAACy6D,MAAP,IAAiBz6D,MAAM,CAAC06D,MAAxB,IAAkC16D,MAAM,CAAC26D,QAA/C,CAAZ,EAAwE;AAEvE,cAAK,CAAE36D,MAAM,CAACs3D,UAAP,IAAuBt3D,MAAM,CAACu3D,aAAP,IAAwBvhE,IAAI,KAAK64C,YAA1D,MAAgF,CAAE7uC,MAAM,CAAC4gB,aAAT,IAA0ByzF,QAAQ,CAAC9uB,gBAAT,CAA2BvlF,MAA3B,CAA1G,CAAL,EAAuJ;AAEtJA,kBAAM,CAACi3D,eAAP,CAAuB3V,gBAAvB,CAAyCm2D,YAAY,CAACrpD,kBAAtD,EAA0EpuD,MAAM,CAACwuD,WAAjF;;AAEA,gBAAMoM,QAAQ,GAAGw5C,QAAQ,CAACxnG,MAAT,CAAiB5M,MAAjB,CAAjB;;AACA,gBAAM8gB,QAAQ,GAAG9gB,MAAM,CAAC8gB,QAAxB;;AAEA,gBAAKiC,KAAK,CAAC0jC,OAAN,CAAe3lC,QAAf,CAAL,EAAiC;AAEhC,kBAAMqxD,MAAM,GAAGvX,QAAQ,CAACuX,MAAxB;;AAEA,mBAAM,IAAIrgF,CAAC,GAAG,CAAR,EAAW0qF,EAAE,GAAGrK,MAAM,CAACxhF,MAA7B,EAAqCmB,CAAC,GAAG0qF,EAAzC,EAA6C1qF,CAAC,EAA9C,EAAoD;AAEnD,oBAAMwE,KAAK,GAAG67E,MAAM,CAAErgF,CAAF,CAApB;AACA,oBAAM0nF,aAAa,GAAG14D,QAAQ,CAAExqB,KAAK,CAACkzE,aAAR,CAA9B;;AAEA,oBAAKgQ,aAAa,IAAIA,aAAa,CAACniB,OAApC,EAA8C;AAE7C,sBAAMqgD,aAAa,GAAGV,gBAAgB,CAAEh3G,MAAF,EAAU46D,QAAV,EAAoB4e,aAApB,EAAmCo3B,KAAnC,EAA0C6G,YAAY,CAACpjD,IAAvD,EAA6DojD,YAAY,CAACnjD,GAA1E,EAA+Et+D,IAA/E,CAAtC;;AAEAm+G,2BAAS,CAACuC,kBAAV,CAA8Be,YAA9B,EAA4C,IAA5C,EAAkD78C,QAAlD,EAA4D88C,aAA5D,EAA2E13G,MAA3E,EAAmF1J,KAAnF;AAEA;AAED;AAED,aAnBD,MAmBO,IAAKwqB,QAAQ,CAACu2C,OAAd,EAAwB;AAE9B,kBAAMqgD,cAAa,GAAGV,gBAAgB,CAAEh3G,MAAF,EAAU46D,QAAV,EAAoB95C,QAApB,EAA8B8vF,KAA9B,EAAqC6G,YAAY,CAACpjD,IAAlD,EAAwDojD,YAAY,CAACnjD,GAArE,EAA0Et+D,IAA1E,CAAtC;;AAEAm+G,uBAAS,CAACuC,kBAAV,CAA8Be,YAA9B,EAA4C,IAA5C,EAAkD78C,QAAlD,EAA4D88C,cAA5D,EAA2E13G,MAA3E,EAAmF,IAAnF;AAEA;AAED;AAED;;AAED,YAAMoa,QAAQ,GAAGpa,MAAM,CAACoa,QAAxB;;AAEA,aAAM,IAAI9oB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnDklH,sBAAY,CAAEp8F,QAAQ,CAAE9oB,KAAF,CAAV,EAAiB4tB,MAAjB,EAAyBu4F,YAAzB,EAAuC7G,KAAvC,EAA8C56G,IAA9C,CAAZ;AAEA;AAED;AAED;;AAED,aAAS2hH,UAAT,CAAqBpuB,EAArB,EAAyB3I,UAAzB,EAAqC4I,YAArC,EAAoD;AAAA;;AAEnD,UAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;;AAEA,eAASmuB,WAAT,GAAuB;AAEtB,YAAIC,MAAM,GAAG,KAAb;AAEA,YAAM52F,KAAK,GAAG,IAAI2lC,OAAJ,EAAd;AACA,YAAIkxD,gBAAgB,GAAG,IAAvB;AACA,YAAMC,iBAAiB,GAAG,IAAInxD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA1B;AAEA,eAAO;AAENoxD,iBAAO,EAAE,iBAAWC,SAAX,EAAuB;AAE/B,gBAAKH,gBAAgB,KAAKG,SAArB,IAAkC,CAAEJ,MAAzC,EAAkD;AAEjDtuB,gBAAE,CAAC0uB,SAAH,CAAcA,SAAd,EAAyBA,SAAzB,EAAoCA,SAApC,EAA+CA,SAA/C;AACAH,8BAAgB,GAAGG,SAAnB;AAEA;AAED,WAXK;AAaNC,mBAAS,EAAE,mBAAWrvF,IAAX,EAAkB;AAE5BgvF,kBAAM,GAAGhvF,IAAT;AAEA,WAjBK;AAmBNisE,kBAAQ,EAAE,kBAAW/yE,CAAX,EAAcmE,CAAd,EAAiBp1B,CAAjB,EAAoBD,CAApB,EAAuBi7E,kBAAvB,EAA4C;AAErD,gBAAKA,kBAAkB,KAAK,IAA5B,EAAmC;AAElC/pD,eAAC,IAAIlxB,CAAL;AAAQq1B,eAAC,IAAIr1B,CAAL;AAAQC,eAAC,IAAID,CAAL;AAEhB;;AAEDowB,iBAAK,CAACtS,GAAN,CAAWoT,CAAX,EAAcmE,CAAd,EAAiBp1B,CAAjB,EAAoBD,CAApB;;AAEA,gBAAKknH,iBAAiB,CAACr4D,MAAlB,CAA0Bz+B,KAA1B,MAAsC,KAA3C,EAAmD;AAElDsoE,gBAAE,CAAC2K,UAAH,CAAenyE,CAAf,EAAkBmE,CAAlB,EAAqBp1B,CAArB,EAAwBD,CAAxB;AACAknH,+BAAiB,CAACvrG,IAAlB,CAAwByU,KAAxB;AAEA;AAED,WApCK;AAsCNxU,eAAK,EAAE,iBAAY;AAElBorG,kBAAM,GAAG,KAAT;AAEAC,4BAAgB,GAAG,IAAnB;AACAC,6BAAiB,CAACppG,GAAlB,CAAuB,CAAE,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EALkB,CAKqB;AAEvC;AA7CK,SAAP;AAiDA;;AAED,eAASwpG,WAAT,GAAuB;AAEtB,YAAIN,MAAM,GAAG,KAAb;AAEA,YAAIO,gBAAgB,GAAG,IAAvB;AACA,YAAIC,gBAAgB,GAAG,IAAvB;AACA,YAAIC,iBAAiB,GAAG,IAAxB;AAEA,eAAO;AAEN3C,iBAAO,EAAE,iBAAWlrC,SAAX,EAAuB;AAE/B,gBAAKA,SAAL,EAAiB;AAEhBlV,oBAAM,CAAE,IAAF,CAAN;AAEA,aAJD,MAIO;AAENG,qBAAO,CAAE,IAAF,CAAP;AAEA;AAED,WAdK;AAgBNsiD,iBAAO,EAAE,iBAAWO,SAAX,EAAuB;AAE/B,gBAAKH,gBAAgB,KAAKG,SAArB,IAAkC,CAAEV,MAAzC,EAAkD;AAEjDtuB,gBAAE,CAACgvB,SAAH,CAAcA,SAAd;AACAH,8BAAgB,GAAGG,SAAnB;AAEA;AAED,WAzBK;AA2BNC,iBAAO,EAAE,iBAAWhuC,SAAX,EAAuB;AAE/B,gBAAK6tC,gBAAgB,KAAK7tC,SAA1B,EAAsC;AAErC,kBAAKA,SAAL,EAAiB;AAEhB,wBAASA,SAAT;AAEC,uBAAK/5B,UAAL;AAEC84C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAK95B,WAAL;AAEC64C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAK75B,SAAL;AAEC44C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAK55B,cAAL;AAEC24C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAK35B,UAAL;AAEC04C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAK15B,iBAAL;AAECy4C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAKz5B,YAAL;AAECw4C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED,uBAAKx5B,aAAL;AAECu4C,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AACA;;AAED;AAEC+e,sBAAE,CAAC/e,SAAH,CAAc,GAAd;AA5CF;AAgDA,eAlDD,MAkDO;AAEN+e,kBAAE,CAAC/e,SAAH,CAAc,GAAd;AAEA;;AAED6tC,8BAAgB,GAAG7tC,SAAnB;AAEA;AAED,WA3FK;AA6FN0tC,mBAAS,EAAE,mBAAWrvF,IAAX,EAAkB;AAE5BgvF,kBAAM,GAAGhvF,IAAT;AAEA,WAjGK;AAmGNisE,kBAAQ,EAAE,kBAAWp3D,KAAX,EAAmB;AAE5B,gBAAK46E,iBAAiB,KAAK56E,KAA3B,EAAmC;AAElC6rD,gBAAE,CAACkvB,UAAH,CAAe/6E,KAAf;AACA46E,+BAAiB,GAAG56E,KAApB;AAEA;AAED,WA5GK;AA8GNjxB,eAAK,EAAE,iBAAY;AAElBorG,kBAAM,GAAG,KAAT;AAEAO,4BAAgB,GAAG,IAAnB;AACAC,4BAAgB,GAAG,IAAnB;AACAC,6BAAiB,GAAG,IAApB;AAEA;AAtHK,SAAP;AA0HA;;AAED,eAASI,aAAT,GAAyB;AAExB,YAAIb,MAAM,GAAG,KAAb;AAEA,YAAIc,kBAAkB,GAAG,IAAzB;AACA,YAAIC,kBAAkB,GAAG,IAAzB;AACA,YAAIC,iBAAiB,GAAG,IAAxB;AACA,YAAIC,sBAAsB,GAAG,IAA7B;AACA,YAAIC,kBAAkB,GAAG,IAAzB;AACA,YAAIC,mBAAmB,GAAG,IAA1B;AACA,YAAIC,mBAAmB,GAAG,IAA1B;AACA,YAAIC,mBAAmB,GAAG,IAA1B;AAEA,eAAO;AAENvD,iBAAO,EAAE,iBAAWwD,WAAX,EAAyB;AAEjC,gBAAK,CAAEtB,MAAP,EAAgB;AAEf,kBAAKsB,WAAL,EAAmB;AAElB5jD,sBAAM,CAAE,IAAF,CAAN;AAEA,eAJD,MAIO;AAENG,uBAAO,CAAE,IAAF,CAAP;AAEA;AAED;AAED,WAlBK;AAoBNsiD,iBAAO,EAAE,iBAAWoB,WAAX,EAAyB;AAEjC,gBAAKT,kBAAkB,KAAKS,WAAvB,IAAsC,CAAEvB,MAA7C,EAAsD;AAErDtuB,gBAAE,CAAC6vB,WAAH,CAAgBA,WAAhB;AACAT,gCAAkB,GAAGS,WAArB;AAEA;AAED,WA7BK;AA+BNZ,iBAAO,EAAE,iBAAW5tC,WAAX,EAAwBC,UAAxB,EAAoCuuC,WAApC,EAAkD;AAE1D,gBAAKR,kBAAkB,KAAKhuC,WAAvB,IACAiuC,iBAAiB,KAAMhuC,UADvB,IAEAiuC,sBAAsB,KAAKM,WAFhC,EAE8C;AAE7C7vB,gBAAE,CAAC3e,WAAH,CAAgBA,WAAhB,EAA6BC,UAA7B,EAAyCuuC,WAAzC;AAEAR,gCAAkB,GAAGhuC,WAArB;AACAiuC,+BAAiB,GAAGhuC,UAApB;AACAiuC,oCAAsB,GAAGM,WAAzB;AAEA;AAED,WA7CK;AA+CNC,eAAK,EAAE,eAAWtuC,WAAX,EAAwBC,YAAxB,EAAsCC,YAAtC,EAAqD;AAE3D,gBAAK8tC,kBAAkB,KAAMhuC,WAAxB,IACAiuC,mBAAmB,KAAKhuC,YADxB,IAEAiuC,mBAAmB,KAAKhuC,YAF7B,EAE4C;AAE3Cse,gBAAE,CAAC+vB,SAAH,CAAcvuC,WAAd,EAA2BC,YAA3B,EAAyCC,YAAzC;AAEA8tC,gCAAkB,GAAGhuC,WAArB;AACAiuC,iCAAmB,GAAGhuC,YAAtB;AACAiuC,iCAAmB,GAAGhuC,YAAtB;AAEA;AAED,WA7DK;AA+DNitC,mBAAS,EAAE,mBAAWrvF,IAAX,EAAkB;AAE5BgvF,kBAAM,GAAGhvF,IAAT;AAEA,WAnEK;AAqENisE,kBAAQ,EAAE,kBAAWvR,OAAX,EAAqB;AAE9B,gBAAK21B,mBAAmB,KAAK31B,OAA7B,EAAuC;AAEtCgG,gBAAE,CAACgwB,YAAH,CAAiBh2B,OAAjB;AACA21B,iCAAmB,GAAG31B,OAAtB;AAEA;AAED,WA9EK;AAgFN92E,eAAK,EAAE,iBAAY;AAElBorG,kBAAM,GAAG,KAAT;AAEAc,8BAAkB,GAAG,IAArB;AACAC,8BAAkB,GAAG,IAArB;AACAC,6BAAiB,GAAG,IAApB;AACAC,kCAAsB,GAAG,IAAzB;AACAC,8BAAkB,GAAG,IAArB;AACAC,+BAAmB,GAAG,IAAtB;AACAC,+BAAmB,GAAG,IAAtB;AACAC,+BAAmB,GAAG,IAAtB;AAEA;AA7FK,SAAP;AAiGA,OAjTkD,CAmTnD;;;AAEA,UAAMM,WAAW,GAAG,IAAI5B,WAAJ,EAApB;AACA,UAAMhvD,WAAW,GAAG,IAAIuvD,WAAJ,EAApB;AACA,UAAMtvD,aAAa,GAAG,IAAI6vD,aAAJ,EAAtB;AAEA,UAAIe,mBAAmB,GAAG,EAA1B;AAEA,UAAIC,cAAc,GAAG,IAArB;AAEA,UAAIC,sBAAsB,GAAG,IAA7B;AACA,UAAIC,eAAe,GAAG,IAAtB;AACA,UAAIC,oBAAoB,GAAG,IAA3B;AACA,UAAIC,eAAe,GAAG,IAAtB;AACA,UAAIC,eAAe,GAAG,IAAtB;AACA,UAAIC,yBAAyB,GAAG,IAAhC;AACA,UAAIC,oBAAoB,GAAG,IAA3B;AACA,UAAIC,oBAAoB,GAAG,IAA3B;AACA,UAAIC,wBAAwB,GAAG,KAA/B;AAEA,UAAIC,gBAAgB,GAAG,IAAvB;AACA,UAAIC,eAAe,GAAG,IAAtB;AAEA,UAAIC,gBAAgB,GAAG,IAAvB;AAEA,UAAIC,0BAA0B,GAAG,IAAjC;AACA,UAAIC,yBAAyB,GAAG,IAAhC;AAEA,UAAMjgB,WAAW,GAAGhR,EAAE,CAACprB,YAAH,CAAiB,KAAjB,CAApB;AAEA,UAAIs8C,kBAAkB,GAAG,KAAzB;AACA,UAAInxF,OAAO,GAAG,CAAd;AACA,UAAMoxF,SAAS,GAAGnxB,EAAE,CAACprB,YAAH,CAAiB,IAAjB,CAAlB;;AAEA,UAAKu8C,SAAS,CAAC13F,OAAV,CAAmB,OAAnB,MAAiC,CAAE,CAAxC,EAA4C;AAE3CsG,eAAO,GAAG1P,UAAU,CAAE,kBAAkBguD,IAAlB,CAAwB8yC,SAAxB,EAAqC,CAArC,CAAF,CAApB;AACAD,0BAAkB,GAAKnxF,OAAO,IAAI,GAAlC;AAEA,OALD,MAKO,IAAKoxF,SAAS,CAAC13F,OAAV,CAAmB,WAAnB,MAAqC,CAAE,CAA5C,EAAgD;AAEtDsG,eAAO,GAAG1P,UAAU,CAAE,uBAAuBguD,IAAvB,CAA6B8yC,SAA7B,EAA0C,CAA1C,CAAF,CAApB;AACAD,0BAAkB,GAAKnxF,OAAO,IAAI,GAAlC;AAEA;;AAED,UAAIqxF,kBAAkB,GAAG,IAAzB;AACA,UAAIC,oBAAoB,GAAG,EAA3B;AAEA,UAAMC,cAAc,GAAG,IAAIj0D,OAAJ,EAAvB;AACA,UAAMk0D,eAAe,GAAG,IAAIl0D,OAAJ,EAAxB;;AAEA,eAASm0D,aAAT,CAAwB/kH,IAAxB,EAA8BmF,MAA9B,EAAsCk/D,KAAtC,EAA8C;AAE7C,YAAMlqE,IAAI,GAAG,IAAI2yB,UAAJ,CAAgB,CAAhB,CAAb,CAF6C,CAEX;;AAClC,YAAM6lC,OAAO,GAAG4gC,EAAE,CAACwxB,aAAH,EAAhB;AAEAxxB,UAAE,CAACyxB,WAAH,CAAgBhlH,IAAhB,EAAsB2yD,OAAtB;AACA4gC,UAAE,CAAC0xB,aAAH,CAAkBjlH,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B;AACAuzF,UAAE,CAAC0xB,aAAH,CAAkBjlH,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B;;AAEA,aAAM,IAAI1E,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG+oE,KAArB,EAA4B/oE,KAAC,EAA7B,EAAmC;AAElCi4F,YAAE,CAAC2xB,UAAH,CAAe//G,MAAM,GAAG7J,KAAxB,EAA2B,CAA3B,EAA8B,IAA9B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,IAA7C,EAAmD,IAAnD,EAAyDnB,IAAzD;AAEA;;AAED,eAAOw4D,OAAP;AAEA;;AAED,UAAMwyD,aAAa,GAAG,EAAtB;AACAA,mBAAa,CAAE,IAAF,CAAb,GAAwBJ,aAAa,CAAE,IAAF,EAAQ,IAAR,EAAc,CAAd,CAArC;AACAI,mBAAa,CAAE,KAAF,CAAb,GAAyBJ,aAAa,CAAE,KAAF,EAAS,KAAT,EAAgB,CAAhB,CAAtC,CA5XmD,CA8XnD;;AAEAvB,iBAAW,CAAC1kB,QAAZ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B;AACAlsC,iBAAW,CAACksC,QAAZ,CAAsB,CAAtB;AACAjsC,mBAAa,CAACisC,QAAd,CAAwB,CAAxB;AAEAv/B,YAAM,CAAE,IAAF,CAAN;AACA3M,iBAAW,CAAC4vD,OAAZ,CAAqB5nE,cAArB;AAEAwqE,kBAAY,CAAE,KAAF,CAAZ;AACAC,iBAAW,CAAE9sE,YAAF,CAAX;AACAgnB,YAAM,CAAE,IAAF,CAAN;AAEAmgD,iBAAW,CAAEvmE,UAAF,CAAX,CA3YmD,CA6YnD;;AAEA,eAASomB,MAAT,CAAiBrmE,EAAjB,EAAsB;AAErB,YAAKuqH,mBAAmB,CAAEvqH,EAAF,CAAnB,KAA8B,IAAnC,EAA0C;AAEzCq6F,YAAE,CAACh0B,MAAH,CAAWrmE,EAAX;AACAuqH,6BAAmB,CAAEvqH,EAAF,CAAnB,GAA4B,IAA5B;AAEA;AAED;;AAED,eAASwmE,OAAT,CAAkBxmE,EAAlB,EAAuB;AAEtB,YAAKuqH,mBAAmB,CAAEvqH,EAAF,CAAnB,KAA8B,KAAnC,EAA2C;AAE1Cq6F,YAAE,CAAC7zB,OAAH,CAAYxmE,EAAZ;AACAuqH,6BAAmB,CAAEvqH,EAAF,CAAnB,GAA4B,KAA5B;AAEA;AAED;;AAED,eAASosH,UAAT,CAAqBnlB,OAArB,EAA+B;AAE9B,YAAKujB,cAAc,KAAKvjB,OAAxB,EAAkC;AAEjC5M,YAAE,CAAC+xB,UAAH,CAAenlB,OAAf;AAEAujB,wBAAc,GAAGvjB,OAAjB;AAEA,iBAAO,IAAP;AAEA;;AAED,eAAO,KAAP;AAEA;;AAED,UAAMolB,YAAY,uDACf9rE,WADe,EACA,KADA,kCAEfC,gBAFe,EAEK,KAFL,kCAGfC,uBAHe,EAGY,KAHZ,iBAAlB;;AAMA,UAAK85C,QAAL,EAAgB;AAEf8xB,oBAAY,CAAE3rE,WAAF,CAAZ,GAA8B,KAA9B;AACA2rE,oBAAY,CAAE1rE,WAAF,CAAZ,GAA8B,KAA9B;AAEA,OALD,MAKO;AAEN,YAAM+lD,SAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,kBAAhB,CAAlB;;AAEA,YAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB2lB,sBAAY,CAAE3rE,WAAF,CAAZ,GAA8BgmD,SAAS,CAAC4lB,OAAxC;AACAD,sBAAY,CAAE1rE,WAAF,CAAZ,GAA8B+lD,SAAS,CAAC6lB,OAAxC;AAEA;AAED;;AAED,UAAMC,UAAU,mDACb5rE,UADa,EACC,CADD,gCAEbC,SAFa,EAEA,CAFA,gCAGbC,cAHa,EAGK,GAHL,gCAIbE,cAJa,EAIK,GAJL,gCAKbM,sBALa,EAKa,GALb,gCAMbF,cANa,EAMK,GANL,gCAObF,cAPa,EAOK,GAPL,gCAQbH,sBARa,EAQa,GARb,gCASbE,sBATa,EASa,GATb,gCAUbI,sBAVa,EAUa,GAVb,gCAWbF,sBAXa,EAWa,GAXb,eAAhB;;AAcA,eAASqlE,WAAT,CAAsB7rC,QAAtB,EAAgCO,aAAhC,EAA+CF,QAA/C,EAAyDC,QAAzD,EAAmEI,kBAAnE,EAAuFF,aAAvF,EAAsGC,aAAtG,EAAqHwB,kBAArH,EAA0I;AAEzI,YAAKjC,QAAQ,KAAK16B,UAAlB,EAA+B;AAE9B,cAAKwqE,sBAAL,EAA8B;AAE7BjkD,mBAAO,CAAE,IAAF,CAAP;AACAikD,kCAAsB,GAAG,KAAzB;AAEA;;AAED;AAEA;;AAED,YAAK,CAAEA,sBAAP,EAAgC;AAE/BpkD,gBAAM,CAAE,IAAF,CAAN;AACAokD,gCAAsB,GAAG,IAAzB;AAEA;;AAED,YAAK9vC,QAAQ,KAAKr6B,cAAlB,EAAmC;AAElC,cAAKq6B,QAAQ,KAAK+vC,eAAb,IAAgC9tC,kBAAkB,KAAKquC,wBAA5D,EAAuF;AAEtF,gBAAKN,oBAAoB,KAAKpqE,WAAzB,IAAwCuqE,yBAAyB,KAAKvqE,WAA3E,EAAyF;AAExF85C,gBAAE,CAACnf,aAAH,CAAkB,KAAlB;AAEAyvC,kCAAoB,GAAGpqE,WAAvB;AACAuqE,uCAAyB,GAAGvqE,WAA5B;AAEA;;AAED,gBAAKq8B,kBAAL,EAA0B;AAEzB,sBAASjC,QAAT;AAEC,qBAAKz6B,cAAL;AACCm6C,oBAAE,CAACoyB,iBAAH,CAAsB,CAAtB,EAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC;AACA;;AAED,qBAAKtsE,gBAAL;AACCk6C,oBAAE,CAACqyB,SAAH,CAAc,CAAd,EAAiB,CAAjB;AACA;;AAED,qBAAKtsE,mBAAL;AACCi6C,oBAAE,CAACoyB,iBAAH,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,GAA5B,EAAiC,GAAjC;AACA;;AAED,qBAAKpsE,gBAAL;AACCg6C,oBAAE,CAACoyB,iBAAH,CAAsB,CAAtB,EAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC;AACA;;AAED;AACClpH,yBAAO,CAACD,KAAR,CAAe,sCAAf,EAAuDq3E,QAAvD;AACA;AApBF;AAwBA,aA1BD,MA0BO;AAEN,sBAASA,QAAT;AAEC,qBAAKz6B,cAAL;AACCm6C,oBAAE,CAACoyB,iBAAH,CAAsB,GAAtB,EAA2B,GAA3B,EAAgC,CAAhC,EAAmC,GAAnC;AACA;;AAED,qBAAKtsE,gBAAL;AACCk6C,oBAAE,CAACqyB,SAAH,CAAc,GAAd,EAAmB,CAAnB;AACA;;AAED,qBAAKtsE,mBAAL;AACCi6C,oBAAE,CAACqyB,SAAH,CAAc,CAAd,EAAiB,GAAjB;AACA;;AAED,qBAAKrsE,gBAAL;AACCg6C,oBAAE,CAACqyB,SAAH,CAAc,CAAd,EAAiB,GAAjB;AACA;;AAED;AACCnpH,yBAAO,CAACD,KAAR,CAAe,sCAAf,EAAuDq3E,QAAvD;AACA;AApBF;AAwBA;;AAEDiwC,2BAAe,GAAG,IAAlB;AACAC,2BAAe,GAAG,IAAlB;AACAE,gCAAoB,GAAG,IAAvB;AACAC,gCAAoB,GAAG,IAAvB;AAEAN,2BAAe,GAAG/vC,QAAlB;AACAswC,oCAAwB,GAAGruC,kBAA3B;AAEA;;AAED;AAEA,SArGwI,CAuGzI;;;AAEAvB,0BAAkB,GAAGA,kBAAkB,IAAIH,aAA3C;AACAC,qBAAa,GAAGA,aAAa,IAAIH,QAAjC;AACAI,qBAAa,GAAGA,aAAa,IAAIH,QAAjC;;AAEA,YAAKC,aAAa,KAAKyvC,oBAAlB,IAA0CtvC,kBAAkB,KAAKyvC,yBAAtE,EAAkG;AAEjGzwB,YAAE,CAACsyB,qBAAH,CAA0BN,YAAY,CAAEnxC,aAAF,CAAtC,EAAyDmxC,YAAY,CAAEhxC,kBAAF,CAArE;AAEAsvC,8BAAoB,GAAGzvC,aAAvB;AACA4vC,mCAAyB,GAAGzvC,kBAA5B;AAEA;;AAED,YAAKL,QAAQ,KAAK4vC,eAAb,IAAgC3vC,QAAQ,KAAK4vC,eAA7C,IAAgE1vC,aAAa,KAAK4vC,oBAAlF,IAA0G3vC,aAAa,KAAK4vC,oBAAjI,EAAwJ;AAEvJ3wB,YAAE,CAACoyB,iBAAH,CAAsBD,UAAU,CAAExxC,QAAF,CAAhC,EAA8CwxC,UAAU,CAAEvxC,QAAF,CAAxD,EAAsEuxC,UAAU,CAAErxC,aAAF,CAAhF,EAAmGqxC,UAAU,CAAEpxC,aAAF,CAA7G;AAEAwvC,yBAAe,GAAG5vC,QAAlB;AACA6vC,yBAAe,GAAG5vC,QAAlB;AACA8vC,8BAAoB,GAAG5vC,aAAvB;AACA6vC,8BAAoB,GAAG5vC,aAAvB;AAEA;;AAEDsvC,uBAAe,GAAG/vC,QAAlB;AACAswC,gCAAwB,GAAG,IAA3B;AAEA;;AAED,eAAS2B,WAAT,CAAsBh7F,QAAtB,EAAgCi7F,WAAhC,EAA8C;AAE7Cj7F,gBAAQ,CAACgpD,IAAT,KAAkB96B,UAAlB,GACG0mB,OAAO,CAAE,IAAF,CADV,GAEGH,MAAM,CAAE,IAAF,CAFT;AAIA,YAAIo1C,SAAS,GAAK7pF,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAApC;AACA,YAAKgtE,WAAL,EAAmBpR,SAAS,GAAG,CAAEA,SAAd;AAEnByQ,oBAAY,CAAEzQ,SAAF,CAAZ;AAEE7pF,gBAAQ,CAAC+oD,QAAT,KAAsBz6B,cAAtB,IAAwCtuB,QAAQ,CAACmpD,WAAT,KAAyB,KAAnE,GACGyrC,WAAW,CAAEvmE,UAAF,CADd,GAEGumE,WAAW,CAAE50F,QAAQ,CAAC+oD,QAAX,EAAqB/oD,QAAQ,CAACspD,aAA9B,EAA6CtpD,QAAQ,CAACopD,QAAtD,EAAgEppD,QAAQ,CAACqpD,QAAzE,EAAmFrpD,QAAQ,CAACypD,kBAA5F,EAAgHzpD,QAAQ,CAACupD,aAAzH,EAAwIvpD,QAAQ,CAACwpD,aAAjJ,EAAgKxpD,QAAQ,CAACgrD,kBAAzK,CAFd;AAIAljB,mBAAW,CAAC4vD,OAAZ,CAAqB13F,QAAQ,CAAC0pD,SAA9B;AACA5hB,mBAAW,CAAC+sD,OAAZ,CAAqB70F,QAAQ,CAAC2pD,SAA9B;AACA7hB,mBAAW,CAACovD,OAAZ,CAAqBl3F,QAAQ,CAAC4pD,UAA9B;AACA8uC,mBAAW,CAACxB,OAAZ,CAAqBl3F,QAAQ,CAACyqD,UAA9B;AAEA,YAAML,YAAY,GAAGpqD,QAAQ,CAACoqD,YAA9B;AACAriB,qBAAa,CAAC8sD,OAAd,CAAuBzqC,YAAvB;;AACA,YAAKA,YAAL,EAAoB;AAEnBriB,uBAAa,CAACmvD,OAAd,CAAuBl3F,QAAQ,CAAC6pD,gBAAhC;AACA9hB,uBAAa,CAAC2vD,OAAd,CAAuB13F,QAAQ,CAAC8pD,WAAhC,EAA6C9pD,QAAQ,CAAC+pD,UAAtD,EAAkE/pD,QAAQ,CAACgqD,eAA3E;AACAjiB,uBAAa,CAACwwD,KAAd,CAAqBv4F,QAAQ,CAACiqD,WAA9B,EAA2CjqD,QAAQ,CAACkqD,YAApD,EAAkElqD,QAAQ,CAACmqD,YAA3E;AAEA;;AAED+wC,wBAAgB,CAAEl7F,QAAQ,CAAC2qD,aAAX,EAA0B3qD,QAAQ,CAAC4qD,mBAAnC,EAAwD5qD,QAAQ,CAAC6qD,kBAAjE,CAAhB;AAEA,OAjoBkD,CAmoBnD;;;AAEA,eAASyvC,YAAT,CAAuBzQ,SAAvB,EAAmC;AAElC,YAAKyP,gBAAgB,KAAKzP,SAA1B,EAAsC;AAErC,cAAKA,SAAL,EAAiB;AAEhBphB,cAAE,CAAC0yB,SAAH,CAAc,IAAd;AAEA,WAJD,MAIO;AAEN1yB,cAAE,CAAC0yB,SAAH,CAAc,IAAd;AAEA;;AAED7B,0BAAgB,GAAGzP,SAAnB;AAEA;AAED;;AAED,eAAS0Q,WAAT,CAAsBa,QAAtB,EAAiC;AAEhC,YAAKA,QAAQ,KAAK5tE,YAAlB,EAAiC;AAEhCinB,gBAAM,CAAE,IAAF,CAAN;;AAEA,cAAK2mD,QAAQ,KAAK7B,eAAlB,EAAoC;AAEnC,gBAAK6B,QAAQ,KAAK3tE,YAAlB,EAAiC;AAEhCg7C,gBAAE,CAAC2yB,QAAH,CAAa,IAAb;AAEA,aAJD,MAIO,IAAKA,QAAQ,KAAK1tE,aAAlB,EAAkC;AAExC+6C,gBAAE,CAAC2yB,QAAH,CAAa,IAAb;AAEA,aAJM,MAIA;AAEN3yB,gBAAE,CAAC2yB,QAAH,CAAa,IAAb;AAEA;AAED;AAED,SAtBD,MAsBO;AAENxmD,iBAAO,CAAE,IAAF,CAAP;AAEA;;AAED2kD,uBAAe,GAAG6B,QAAlB;AAEA;;AAED,eAASC,YAAT,CAAuBv8F,KAAvB,EAA+B;AAE9B,YAAKA,KAAK,KAAK06F,gBAAf,EAAkC;AAEjC,cAAKG,kBAAL,EAA0BlxB,EAAE,CAAC6yB,SAAH,CAAcx8F,KAAd;AAE1B06F,0BAAgB,GAAG16F,KAAnB;AAEA;AAED;;AAED,eAASo8F,gBAAT,CAA2BvwC,aAA3B,EAA0C9zD,MAA1C,EAAkDisF,KAAlD,EAA0D;AAEzD,YAAKn4B,aAAL,EAAqB;AAEpBlW,gBAAM,CAAE,KAAF,CAAN;;AAEA,cAAKglD,0BAA0B,KAAK5iG,MAA/B,IAAyC6iG,yBAAyB,KAAK5W,KAA5E,EAAoF;AAEnFra,cAAE,CAAC9d,aAAH,CAAkB9zD,MAAlB,EAA0BisF,KAA1B;AAEA2W,sCAA0B,GAAG5iG,MAA7B;AACA6iG,qCAAyB,GAAG5W,KAA5B;AAEA;AAED,SAbD,MAaO;AAENluC,iBAAO,CAAE,KAAF,CAAP;AAEA;AAED;;AAED,eAASkgD,cAAT,CAAyBntD,WAAzB,EAAuC;AAEtC,YAAKA,WAAL,EAAmB;AAElB8M,gBAAM,CAAE,IAAF,CAAN;AAEA,SAJD,MAIO;AAENG,iBAAO,CAAE,IAAF,CAAP;AAEA;AAED,OA1uBkD,CA4uBnD;;;AAEA,eAAS2mD,aAAT,CAAwBC,SAAxB,EAAoC;AAEnC,YAAKA,SAAS,KAAK58G,SAAnB,EAA+B48G,SAAS,GAAG,QAAQ/hB,WAAR,GAAsB,CAAlC;;AAE/B,YAAKogB,kBAAkB,KAAK2B,SAA5B,EAAwC;AAEvC/yB,YAAE,CAAC8yB,aAAH,CAAkBC,SAAlB;AACA3B,4BAAkB,GAAG2B,SAArB;AAEA;AAED;;AAED,eAAStB,WAAT,CAAsBuB,SAAtB,EAAiCC,YAAjC,EAAgD;AAE/C,YAAK7B,kBAAkB,KAAK,IAA5B,EAAmC;AAElC0B,uBAAa;AAEb;;AAED,YAAII,YAAY,GAAG7B,oBAAoB,CAAED,kBAAF,CAAvC;;AAEA,YAAK8B,YAAY,KAAK/8G,SAAtB,EAAkC;AAEjC+8G,sBAAY,GAAG;AAAEzmH,gBAAI,EAAE0J,SAAR;AAAmBipD,mBAAO,EAAEjpD;AAA5B,WAAf;AACAk7G,8BAAoB,CAAED,kBAAF,CAApB,GAA6C8B,YAA7C;AAEA;;AAED,YAAKA,YAAY,CAACzmH,IAAb,KAAsBumH,SAAtB,IAAmCE,YAAY,CAAC9zD,OAAb,KAAyB6zD,YAAjE,EAAgF;AAE/EjzB,YAAE,CAACyxB,WAAH,CAAgBuB,SAAhB,EAA2BC,YAAY,IAAIrB,aAAa,CAAEoB,SAAF,CAAxD;AAEAE,sBAAY,CAACzmH,IAAb,GAAoBumH,SAApB;AACAE,sBAAY,CAAC9zD,OAAb,GAAuB6zD,YAAvB;AAEA;AAED;;AAED,eAASE,aAAT,GAAyB;AAExB,YAAMD,YAAY,GAAG7B,oBAAoB,CAAED,kBAAF,CAAzC;;AAEA,YAAK8B,YAAY,KAAK/8G,SAAjB,IAA8B+8G,YAAY,CAACzmH,IAAb,KAAsB0J,SAAzD,EAAqE;AAEpE6pF,YAAE,CAACyxB,WAAH,CAAgByB,YAAY,CAACzmH,IAA7B,EAAmC,IAAnC;AAEAymH,sBAAY,CAACzmH,IAAb,GAAoB0J,SAApB;AACA+8G,sBAAY,CAAC9zD,OAAb,GAAuBjpD,SAAvB;AAEA;AAED;;AAED,eAASi9G,oBAAT,GAAgC;AAE/B,YAAI;AAEHpzB,YAAE,CAACozB,oBAAH,CAAwBh2G,KAAxB,CAA+B4iF,EAA/B,EAAmC3iF,SAAnC;AAEA,SAJD,CAIE,OAAQpU,KAAR,EAAgB;AAEjBC,iBAAO,CAACD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED;;AAED,eAAS0oH,UAAT,GAAsB;AAErB,YAAI;AAEH3xB,YAAE,CAAC2xB,UAAH,CAAcv0G,KAAd,CAAqB4iF,EAArB,EAAyB3iF,SAAzB;AAEA,SAJD,CAIE,OAAQpU,KAAR,EAAgB;AAEjBC,iBAAO,CAACD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED;;AAED,eAASoqH,UAAT,GAAsB;AAErB,YAAI;AAEHrzB,YAAE,CAACqzB,UAAH,CAAcj2G,KAAd,CAAqB4iF,EAArB,EAAyB3iF,SAAzB;AAEA,SAJD,CAIE,OAAQpU,KAAR,EAAgB;AAEjBC,iBAAO,CAACD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED,OA90BkD,CAg1BnD;;;AAEA,eAASg2D,OAAT,CAAkBA,OAAlB,EAA4B;AAE3B,YAAKqyD,cAAc,CAACn7D,MAAf,CAAuB8I,OAAvB,MAAqC,KAA1C,EAAkD;AAEjD+gC,YAAE,CAAC/gC,OAAH,CAAYA,OAAO,CAACvsD,CAApB,EAAuBusD,OAAO,CAACx1C,CAA/B,EAAkCw1C,OAAO,CAACjqC,CAA1C,EAA6CiqC,OAAO,CAACriC,CAArD;AACA00F,wBAAc,CAACruG,IAAf,CAAqBg8C,OAArB;AAEA;AAED;;AAED,eAASE,QAAT,CAAmBA,QAAnB,EAA8B;AAE7B,YAAKoyD,eAAe,CAACp7D,MAAhB,CAAwBgJ,QAAxB,MAAuC,KAA5C,EAAoD;AAEnD6gC,YAAE,CAAC7gC,QAAH,CAAaA,QAAQ,CAACzsD,CAAtB,EAAyBysD,QAAQ,CAAC11C,CAAlC,EAAqC01C,QAAQ,CAACnqC,CAA9C,EAAiDmqC,QAAQ,CAACviC,CAA1D;AACA20F,yBAAe,CAACtuG,IAAhB,CAAsBk8C,QAAtB;AAEA;AAED,OAt2BkD,CAw2BnD;;;AAEA,eAASj8C,KAAT,GAAiB;AAEhBgtG,2BAAmB,GAAG,EAAtB;AAEAkB,0BAAkB,GAAG,IAArB;AACAC,4BAAoB,GAAG,EAAvB;AAEAlB,sBAAc,GAAG,IAAjB;AAEAE,uBAAe,GAAG,IAAlB;AAEAQ,wBAAgB,GAAG,IAAnB;AACAC,uBAAe,GAAG,IAAlB;AAEAb,mBAAW,CAAC/sG,KAAZ;AACAm8C,mBAAW,CAACn8C,KAAZ;AACAo8C,qBAAa,CAACp8C,KAAd;AAEA;;AAED,aAAO;AAENi9E,eAAO,EAAE;AACRzoE,eAAK,EAAEu4F,WADC;AAER97E,eAAK,EAAEkrB,WAFC;AAGR26B,iBAAO,EAAE16B;AAHD,SAFH;AAQN0M,cAAM,EAAEA,MARF;AASNG,eAAO,EAAEA,OATH;AAWN4lD,kBAAU,EAAEA,UAXN;AAaN5F,mBAAW,EAAEA,WAbP;AAcNoG,mBAAW,EAAEA,WAdP;AAgBNV,oBAAY,EAAEA,YAhBR;AAiBNC,mBAAW,EAAEA,WAjBP;AAmBNc,oBAAY,EAAEA,YAnBR;AAoBNH,wBAAgB,EAAEA,gBApBZ;AAsBNpG,sBAAc,EAAEA,cAtBV;AAwBNyG,qBAAa,EAAEA,aAxBT;AAyBNrB,mBAAW,EAAEA,WAzBP;AA0BN0B,qBAAa,EAAEA,aA1BT;AA2BNC,4BAAoB,EAAEA,oBA3BhB;AA4BNzB,kBAAU,EAAEA,UA5BN;AA6BN0B,kBAAU,EAAEA,UA7BN;AA+BNp0D,eAAO,EAAEA,OA/BH;AAgCNE,gBAAQ,EAAEA,QAhCJ;AAkCNj8C,aAAK,EAAEA;AAlCD,OAAP;AAsCA;;AAED,aAASowG,aAAT,CAAwBC,GAAxB,EAA6Bl8B,UAA7B,EAAyC/zE,KAAzC,EAAgDu6E,UAAhD,EAA4DoC,YAA5D,EAA0EuzB,KAA1E,EAAiFxjB,IAAjF,EAAwF;AAAA;;AAEvF,UAAM9P,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AACA,UAAM8Q,WAAW,GAAG/Q,YAAY,CAAC+Q,WAAjC;AACA,UAAMG,cAAc,GAAGlR,YAAY,CAACkR,cAApC;AACA,UAAMD,cAAc,GAAGjR,YAAY,CAACiR,cAApC;AACA,UAAMS,UAAU,GAAG1R,YAAY,CAAC0R,UAAhC;;AAEA,UAAM8hB,cAAc,GAAG,IAAIrzB,OAAJ,EAAvB;;AACA,UAAIzlC,OAAJ,CATuF,CAWvF;AACA;AACA;;;AAEA,UAAI+4D,kBAAkB,GAAG,KAAzB;;AAEA,UAAI;AAEHA,0BAAkB,GAAG,OAAOC,eAAP,KAA2B,WAA3B,IACf,IAAIA,eAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA4B14D,UAA5B,CAAwC,IAAxC,CAAF,KAAuD,IAD3D;AAGA,OALD,CAKE,OAAQlvB,GAAR,EAAc,CAEf;AAEA;;AAED,eAAS6nF,YAAT,CAAuBv9F,KAAvB,EAA8BD,MAA9B,EAAuC;AAEtC;AAEA,eAAOs9F,kBAAkB,GACxB,IAAIC,eAAJ,CAAqBt9F,KAArB,EAA4BD,MAA5B,CADwB,GAExBjc,QAAQ,CAACK,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAFD;AAIA;;AAED,eAASq5G,WAAT,CAAsB1rH,KAAtB,EAA6B2rH,eAA7B,EAA8CC,cAA9C,EAA8DC,OAA9D,EAAwE;AAEvE,YAAInvG,KAAK,GAAG,CAAZ,CAFuE,CAIvE;;AAEA,YAAK1c,KAAK,CAACkuB,KAAN,GAAc29F,OAAd,IAAyB7rH,KAAK,CAACiuB,MAAN,GAAe49F,OAA7C,EAAuD;AAEtDnvG,eAAK,GAAGmvG,OAAO,GAAG1zG,IAAI,CAACmE,GAAL,CAAUtc,KAAK,CAACkuB,KAAhB,EAAuBluB,KAAK,CAACiuB,MAA7B,CAAlB;AAEA,SAVsE,CAYvE;;;AAEA,YAAKvR,KAAK,GAAG,CAAR,IAAaivG,eAAe,KAAK,IAAtC,EAA6C;AAE5C;AAEA,cAAO,OAAOG,gBAAP,KAA4B,WAA5B,IAA2C9rH,KAAK,YAAY8rH,gBAA9D,IACF,OAAOl5D,iBAAP,KAA6B,WAA7B,IAA4C5yD,KAAK,YAAY4yD,iBAD3D,IAEF,OAAOm5D,WAAP,KAAuB,WAAvB,IAAsC/rH,KAAK,YAAY+rH,WAF1D,EAE0E;AAEzE,gBAAMhmG,KAAK,GAAG4lG,eAAe,GAAG5iE,SAAS,CAACkC,eAAb,GAA+B9yC,IAAI,CAAC4N,KAAjE;AAEA,gBAAMmI,KAAK,GAAGnI,KAAK,CAAErJ,KAAK,GAAG1c,KAAK,CAACkuB,KAAhB,CAAnB;AACA,gBAAMD,MAAM,GAAGlI,KAAK,CAAErJ,KAAK,GAAG1c,KAAK,CAACiuB,MAAhB,CAApB;AAEA,gBAAKukC,OAAO,KAAKxkD,SAAjB,EAA6BwkD,OAAO,GAAGi5D,YAAY,CAAEv9F,KAAF,EAASD,MAAT,CAAtB,CAP4C,CASzE;;AAEA,gBAAM2iB,MAAM,GAAGg7E,cAAc,GAAGH,YAAY,CAAEv9F,KAAF,EAASD,MAAT,CAAf,GAAmCukC,OAAhE;AAEA5hB,kBAAM,CAAC1iB,KAAP,GAAeA,KAAf;AACA0iB,kBAAM,CAAC3iB,MAAP,GAAgBA,MAAhB;AAEA,gBAAM4kC,OAAO,GAAGjiB,MAAM,CAACkiB,UAAP,CAAmB,IAAnB,CAAhB;AACAD,mBAAO,CAACI,SAAR,CAAmBjzD,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgCkuB,KAAhC,EAAuCD,MAAvC;AAEAltB,mBAAO,CAAC2W,IAAR,CAAc,yDAAyD1X,KAAK,CAACkuB,KAA/D,GAAuE,GAAvE,GAA6EluB,KAAK,CAACiuB,MAAnF,GAA4F,QAA5F,GAAuGC,KAAvG,GAA+G,GAA/G,GAAqHD,MAArH,GAA8H,IAA5I;AAEA,mBAAO2iB,MAAP;AAEA,WAzBD,MAyBO;AAEN,gBAAK,UAAU5wC,KAAf,EAAuB;AAEtBe,qBAAO,CAAC2W,IAAR,CAAc,2DAA2D1X,KAAK,CAACkuB,KAAjE,GAAyE,GAAzE,GAA+EluB,KAAK,CAACiuB,MAArF,GAA8F,IAA5G;AAEA;;AAED,mBAAOjuB,KAAP;AAEA;AAED;;AAED,eAAOA,KAAP;AAEA;;AAED,eAAS6qD,YAAT,CAAuB7qD,KAAvB,EAA+B;AAE9B,eAAO+oD,SAAS,CAAC8B,YAAV,CAAwB7qD,KAAK,CAACkuB,KAA9B,KAAyC66B,SAAS,CAAC8B,YAAV,CAAwB7qD,KAAK,CAACiuB,MAA9B,CAAhD;AAEA;;AAED,eAAS+9F,sBAAT,CAAiC/0D,OAAjC,EAA2C;AAE1C,YAAK8gC,QAAL,EAAgB,OAAO,KAAP;AAEhB,eAAS9gC,OAAO,CAAC5D,KAAR,KAAkB7S,mBAAlB,IAAyCyW,OAAO,CAAC3D,KAAR,KAAkB9S,mBAA7D,IACJyW,OAAO,CAACzD,SAAR,KAAsB9S,aAAtB,IAAuCuW,OAAO,CAACzD,SAAR,KAAsBzS,YADhE;AAGA;;AAED,eAASkrE,2BAAT,CAAsCh1D,OAAtC,EAA+Ci1D,YAA/C,EAA8D;AAE7D,eAAOj1D,OAAO,CAAC/C,eAAR,IAA2Bg4D,YAA3B,IACNj1D,OAAO,CAACzD,SAAR,KAAsB9S,aADhB,IACiCuW,OAAO,CAACzD,SAAR,KAAsBzS,YAD9D;AAGA;;AAED,eAASorE,cAAT,CAAyB1iH,MAAzB,EAAiCwtD,OAAjC,EAA0C/oC,KAA1C,EAAiDD,MAAjD,EAA0D;AAEzDm9F,WAAG,CAACe,cAAJ,CAAoB1iH,MAApB;;AAEA,YAAM2iH,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B,CAJyD,CAMzD;;AACAm1D,yBAAiB,CAACC,aAAlB,GAAkCl0G,IAAI,CAACnX,GAAL,CAAUmX,IAAI,CAACmE,GAAL,CAAU4R,KAAV,EAAiBD,MAAjB,CAAV,IAAwC9V,IAAI,CAACm0G,KAA/E;AAEA;;AAED,eAASC,iBAAT,CAA4BC,kBAA5B,EAAgDC,QAAhD,EAA0DC,MAA1D,EAAmE;AAElE,YAAK30B,QAAQ,KAAK,KAAlB,EAA0B,OAAO00B,QAAP;;AAE1B,YAAKD,kBAAkB,KAAK,IAA5B,EAAmC;AAElC,cAAKpB,GAAG,CAAEoB,kBAAF,CAAH,KAA8Bx+G,SAAnC,EAA+C,OAAOo9G,GAAG,CAAEoB,kBAAF,CAAV;AAE/CzrH,iBAAO,CAAC2W,IAAR,CAAc,8EAA8E80G,kBAA9E,GAAmG,IAAjH;AAEA;;AAED,YAAIz4D,cAAc,GAAG04D,QAArB;;AAEA,YAAKA,QAAQ,KAAK,IAAlB,EAAyB;AAExB,cAAKC,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AAEvB;;AAED,YAAK04D,QAAQ,KAAK,IAAlB,EAAyB;AAExB,cAAKC,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AAEvB;;AAED,YAAK04D,QAAQ,KAAK,IAAlB,EAAyB;AAExB,cAAKC,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AACvB,cAAK24D,MAAM,KAAK,IAAhB,EAAuB34D,cAAc,GAAG,KAAjB;AAEvB;;AAED,YAAKA,cAAc,KAAK,KAAnB,IAA4BA,cAAc,KAAK,KAA/C,IACJA,cAAc,KAAK,KADf,IACwBA,cAAc,KAAK,KADhD,EACwD;AAEvDm7B,oBAAU,CAACz+E,GAAX,CAAgB,wBAAhB;AAEA;;AAED,eAAOsjD,cAAP;AAEA,OAnLsF,CAqLvF;;;AAEA,eAAS44D,cAAT,CAAyB/7F,CAAzB,EAA6B;AAE5B,YAAKA,CAAC,KAAK8vB,aAAN,IAAuB9vB,CAAC,KAAK+vB,0BAA7B,IAA2D/vB,CAAC,KAAKiwB,yBAAtE,EAAkG;AAEjG,iBAAO,IAAP;AAEA;;AAED,eAAO,IAAP;AAEA,OAjMsF,CAmMvF;;;AAEA,eAAS+rE,gBAAT,CAA2B1uH,KAA3B,EAAmC;AAElC,YAAM+4D,OAAO,GAAG/4D,KAAK,CAACuL,MAAtB;AAEAwtD,eAAO,CAAC5/C,mBAAR,CAA6B,SAA7B,EAAwCu1G,gBAAxC;AAEAC,yBAAiB,CAAE51D,OAAF,CAAjB;;AAEA,YAAKA,OAAO,CAAC61D,cAAb,EAA8B;AAE7BxB,wBAAc,UAAd,CAAuBr0D,OAAvB;AAEA;;AAED4wC,YAAI,CAAC4D,MAAL,CAAY92C,QAAZ;AAEA;;AAED,eAASo4D,qBAAT,CAAgC7uH,KAAhC,EAAwC;AAEvC,YAAM6yF,YAAY,GAAG7yF,KAAK,CAACuL,MAA3B;AAEAsnF,oBAAY,CAAC15E,mBAAb,CAAkC,SAAlC,EAA6C01G,qBAA7C;AAEAC,8BAAsB,CAAEj8B,YAAF,CAAtB;AAEA8W,YAAI,CAAC4D,MAAL,CAAY92C,QAAZ;AAEA,OAjOsF,CAmOvF;;;AAEA,eAASk4D,iBAAT,CAA4B51D,OAA5B,EAAsC;AAErC,YAAMm1D,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B;AAEA,YAAKm1D,iBAAiB,CAACa,WAAlB,KAAkCj/G,SAAvC,EAAmD;;AAEnDo9G,WAAG,CAAC8B,aAAJ,CAAmBd,iBAAiB,CAACe,cAArC;;AAEAz3B,kBAAU,CAAC/hF,MAAX,CAAmBsjD,OAAnB;AAEA;;AAED,eAAS+1D,sBAAT,CAAiCj8B,YAAjC,EAAgD;AAE/C,YAAMq8B,sBAAsB,GAAG13B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,CAA/B;AACA,YAAMq7B,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC95B,OAA7B,CAA1B;AAEA,YAAK,CAAE85B,YAAP,EAAsB;;AAEtB,YAAKq7B,iBAAiB,CAACe,cAAlB,KAAqCn/G,SAA1C,EAAsD;AAErDo9G,aAAG,CAAC8B,aAAJ,CAAmBd,iBAAiB,CAACe,cAArC;AAEA;;AAED,YAAKp8B,YAAY,CAAC35B,YAAlB,EAAiC;AAEhC25B,sBAAY,CAAC35B,YAAb,CAA0B75C,OAA1B;AAEA;;AAED,YAAKwzE,YAAY,CAACC,uBAAlB,EAA4C;AAE3C,eAAM,IAAIpxF,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BwrH,eAAG,CAACiC,iBAAJ,CAAuBD,sBAAsB,CAACE,kBAAvB,CAA2C1tH,KAA3C,CAAvB;;AACA,gBAAKwtH,sBAAsB,CAACG,kBAA5B,EAAiDnC,GAAG,CAACoC,kBAAJ,CAAwBJ,sBAAsB,CAACG,kBAAvB,CAA2C3tH,KAA3C,CAAxB;AAEjD;AAED,SATD,MASO;AAENwrH,aAAG,CAACiC,iBAAJ,CAAuBD,sBAAsB,CAACE,kBAA9C;;AACA,cAAKF,sBAAsB,CAACG,kBAA5B,EAAiDnC,GAAG,CAACoC,kBAAJ,CAAwBJ,sBAAsB,CAACG,kBAA/C;AACjD,cAAKH,sBAAsB,CAACK,8BAA5B,EAA6DrC,GAAG,CAACiC,iBAAJ,CAAuBD,sBAAsB,CAACK,8BAA9C;AAC7D,cAAKL,sBAAsB,CAACM,wBAA5B,EAAuDtC,GAAG,CAACoC,kBAAJ,CAAwBJ,sBAAsB,CAACM,wBAA/C;AACvD,cAAKN,sBAAsB,CAACO,wBAA5B,EAAuDvC,GAAG,CAACoC,kBAAJ,CAAwBJ,sBAAsB,CAACO,wBAA/C;AAEvD;;AAEDj4B,kBAAU,CAAC/hF,MAAX,CAAmBo9E,YAAY,CAAC95B,OAAhC;AACAy+B,kBAAU,CAAC/hF,MAAX,CAAmBo9E,YAAnB;AAEA,OA1RsF,CA4RvF;;;AAEA,UAAI68B,YAAY,GAAG,CAAnB;;AAEA,eAASC,iBAAT,GAA6B;AAE5BD,oBAAY,GAAG,CAAf;AAEA;;AAED,eAAS/e,mBAAT,GAA+B;AAE9B,YAAMif,WAAW,GAAGF,YAApB;;AAEA,YAAKE,WAAW,IAAIjlB,WAApB,EAAkC;AAEjC9nG,iBAAO,CAAC2W,IAAR,CAAc,wCAAwCo2G,WAAxC,GAAsD,8CAAtD,GAAuGjlB,WAArH;AAEA;;AAED+kB,oBAAY,IAAI,CAAhB;AAEA,eAAOE,WAAP;AAEA,OApTsF,CAsTvF;;;AAEA,eAASC,YAAT,CAAuB92D,OAAvB,EAAgC+2D,IAAhC,EAAuC;AAEtC,YAAM5B,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B;AAEA,YAAKA,OAAO,CAAC61D,cAAb,EAA8BmB,kBAAkB,CAAEh3D,OAAF,CAAlB;;AAE9B,YAAKA,OAAO,CAACr/B,OAAR,GAAkB,CAAlB,IAAuBw0F,iBAAiB,CAAC8B,SAAlB,KAAgCj3D,OAAO,CAACr/B,OAApE,EAA8E;AAE7E,cAAM53B,KAAK,GAAGi3D,OAAO,CAACj3D,KAAtB;;AAEA,cAAKA,KAAK,KAAKgO,SAAf,EAA2B;AAE1BjN,mBAAO,CAAC2W,IAAR,CAAc,uEAAd;AAEA,WAJD,MAIO,IAAK1X,KAAK,CAACmuH,QAAN,KAAmB,KAAxB,EAAgC;AAEtCptH,mBAAO,CAAC2W,IAAR,CAAc,wEAAd;AAEA,WAJM,MAIA;AAEN02G,yBAAa,CAAEhC,iBAAF,EAAqBn1D,OAArB,EAA8B+2D,IAA9B,CAAb;AACA;AAEA;AAED;;AAED7yG,aAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,aAAK,CAACmuG,WAAN,CAAmB,IAAnB,EAAyB8C,iBAAiB,CAACe,cAA3C;AAEA;;AAED,eAAS9c,iBAAT,CAA4Bp5C,OAA5B,EAAqC+2D,IAArC,EAA4C;AAE3C,YAAM5B,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B;;AAEA,YAAKA,OAAO,CAACr/B,OAAR,GAAkB,CAAlB,IAAuBw0F,iBAAiB,CAAC8B,SAAlB,KAAgCj3D,OAAO,CAACr/B,OAApE,EAA8E;AAE7Ew2F,uBAAa,CAAEhC,iBAAF,EAAqBn1D,OAArB,EAA8B+2D,IAA9B,CAAb;AACA;AAEA;;AAED7yG,aAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,aAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B8C,iBAAiB,CAACe,cAA5C;AAEA;;AAED,eAAS5c,YAAT,CAAuBt5C,OAAvB,EAAgC+2D,IAAhC,EAAuC;AAEtC,YAAM5B,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B;;AAEA,YAAKA,OAAO,CAACr/B,OAAR,GAAkB,CAAlB,IAAuBw0F,iBAAiB,CAAC8B,SAAlB,KAAgCj3D,OAAO,CAACr/B,OAApE,EAA8E;AAE7Ew2F,uBAAa,CAAEhC,iBAAF,EAAqBn1D,OAArB,EAA8B+2D,IAA9B,CAAb;AACA;AAEA;;AAED7yG,aAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,aAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B8C,iBAAiB,CAACe,cAA5C;AAEA;;AAED,eAASkB,cAAT,CAAyBp3D,OAAzB,EAAkC+2D,IAAlC,EAAyC;AAExC,YAAK/2D,OAAO,CAACj3D,KAAR,CAAcf,MAAd,KAAyB,CAA9B,EAAkC;AAElC,YAAMmtH,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,CAA1B;;AAEA,YAAKA,OAAO,CAACr/B,OAAR,GAAkB,CAAlB,IAAuBw0F,iBAAiB,CAAC8B,SAAlB,KAAgCj3D,OAAO,CAACr/B,OAApE,EAA8E;AAE7E02F,qBAAW,CAAElC,iBAAF,EAAqBn1D,OAArB,CAAX;AAEA97C,eAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,eAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B8C,iBAAiB,CAACe,cAA5C;;AAEA/B,aAAG,CAACmD,WAAJ,CAAiB,KAAjB,EAAwBt3D,OAAO,CAAC7C,KAAhC;;AAEA,cAAMo6D,YAAY,GAAKv3D,OAAO,KAAMA,OAAO,CAACw3D,mBAAR,IAA+Bx3D,OAAO,CAACj3D,KAAR,CAAe,CAAf,EAAmByuH,mBAAxD,CAA9B;AACA,cAAMr8B,aAAa,GAAKn7B,OAAO,CAACj3D,KAAR,CAAe,CAAf,KAAsBi3D,OAAO,CAACj3D,KAAR,CAAe,CAAf,EAAmBoyF,aAAjE;AAEA,cAAMs8B,SAAS,GAAG,EAAlB;;AAEA,eAAM,IAAI9uH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,gBAAK,CAAE4uH,YAAF,IAAkB,CAAEp8B,aAAzB,EAAyC;AAExCs8B,uBAAS,CAAE9uH,KAAF,CAAT,GAAiB8rH,WAAW,CAAEz0D,OAAO,CAACj3D,KAAR,CAAeJ,KAAf,CAAF,EAAsB,KAAtB,EAA6B,IAA7B,EAAmCopG,cAAnC,CAA5B;AAEA,aAJD,MAIO;AAEN0lB,uBAAS,CAAE9uH,KAAF,CAAT,GAAiBwyF,aAAa,GAAGn7B,OAAO,CAACj3D,KAAR,CAAeJ,KAAf,EAAmBI,KAAtB,GAA8Bi3D,OAAO,CAACj3D,KAAR,CAAeJ,KAAf,CAA5D;AAEA;AAED;;AAED,cAAMI,KAAK,GAAG0uH,SAAS,CAAE,CAAF,CAAvB;AAAA,cACCxC,YAAY,GAAGrhE,YAAY,CAAE7qD,KAAF,CAAZ,IAAyB+3F,QADzC;AAAA,cAEC00B,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAACxD,MAAvB,CAFZ;AAAA,cAGCi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAAC3yD,IAAvB,CAHV;AAAA,cAICsqH,gBAAgB,GAAGrC,iBAAiB,CAAEt1D,OAAO,CAAClD,cAAV,EAA0B04D,QAA1B,EAAoCC,MAApC,CAJrC;AAMAmC,8BAAoB,CAAE,KAAF,EAAS53D,OAAT,EAAkBi1D,YAAlB,CAApB;AAEA,cAAIr4D,OAAJ;;AAEA,cAAK26D,YAAL,EAAoB;AAEnB,iBAAM,IAAI5uH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9Bi0D,qBAAO,GAAG66D,SAAS,CAAE9uH,KAAF,CAAT,CAAei0D,OAAzB;;AAEA,mBAAM,IAAI3zD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2zD,OAAO,CAAC50D,MAA7B,EAAqCiB,CAAC,EAAtC,EAA4C;AAE3C,oBAAM4uH,MAAM,GAAGj7D,OAAO,CAAE3zD,CAAF,CAAtB;;AAEA,oBAAK+2D,OAAO,CAACxD,MAAR,KAAmBvR,UAAnB,IAAiC+U,OAAO,CAACxD,MAAR,KAAmBxR,SAAzD,EAAqE;AAEpE,sBAAKwqE,QAAQ,KAAK,IAAlB,EAAyB;AAExBtxG,yBAAK,CAAC8vG,oBAAN,CAA4B,QAAQrrH,KAApC,EAAuCM,CAAvC,EAA0C0uH,gBAA1C,EAA4DE,MAAM,CAAC5gG,KAAnE,EAA0E4gG,MAAM,CAAC7gG,MAAjF,EAAyF,CAAzF,EAA4F6gG,MAAM,CAACrwH,IAAnG;AAEA,mBAJD,MAIO;AAENsC,2BAAO,CAAC2W,IAAR,CAAc,iGAAd;AAEA;AAED,iBAZD,MAYO;AAENyD,uBAAK,CAACquG,UAAN,CAAkB,QAAQ5pH,KAA1B,EAA6BM,CAA7B,EAAgC0uH,gBAAhC,EAAkDE,MAAM,CAAC5gG,KAAzD,EAAgE4gG,MAAM,CAAC7gG,MAAvE,EAA+E,CAA/E,EAAkFw+F,QAAlF,EAA4FC,MAA5F,EAAoGoC,MAAM,CAACrwH,IAA3G;AAEA;AAED;AAED;;AAED2tH,6BAAiB,CAACC,aAAlB,GAAkCx4D,OAAO,CAAC50D,MAAR,GAAiB,CAAnD;AAEA,WAlCD,MAkCO;AAEN40D,mBAAO,GAAGoD,OAAO,CAACpD,OAAlB;;AAEA,iBAAM,IAAIj0D,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,kBAAKwyF,aAAL,EAAqB;AAEpBj3E,qBAAK,CAACquG,UAAN,CAAkB,QAAQ5pH,KAA1B,EAA6B,CAA7B,EAAgCgvH,gBAAhC,EAAkDF,SAAS,CAAE9uH,KAAF,CAAT,CAAesuB,KAAjE,EAAwEwgG,SAAS,CAAE9uH,KAAF,CAAT,CAAequB,MAAvF,EAA+F,CAA/F,EAAkGw+F,QAAlG,EAA4GC,MAA5G,EAAoHgC,SAAS,CAAE9uH,KAAF,CAAT,CAAenB,IAAnI;;AAEA,qBAAM,IAAIyB,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG2zD,OAAO,CAAC50D,MAA7B,EAAqCiB,GAAC,EAAtC,EAA4C;AAE3C,sBAAM4uH,OAAM,GAAGj7D,OAAO,CAAE3zD,GAAF,CAAtB;AACA,sBAAM6uH,WAAW,GAAGD,OAAM,CAAC9uH,KAAP,CAAcJ,KAAd,EAAkBI,KAAtC;AAEAmb,uBAAK,CAACquG,UAAN,CAAkB,QAAQ5pH,KAA1B,EAA6BM,GAAC,GAAG,CAAjC,EAAoC0uH,gBAApC,EAAsDG,WAAW,CAAC7gG,KAAlE,EAAyE6gG,WAAW,CAAC9gG,MAArF,EAA6F,CAA7F,EAAgGw+F,QAAhG,EAA0GC,MAA1G,EAAkHqC,WAAW,CAACtwH,IAA9H;AAEA;AAED,eAbD,MAaO;AAEN0c,qBAAK,CAACquG,UAAN,CAAkB,QAAQ5pH,KAA1B,EAA6B,CAA7B,EAAgCgvH,gBAAhC,EAAkDnC,QAAlD,EAA4DC,MAA5D,EAAoEgC,SAAS,CAAE9uH,KAAF,CAA7E;;AAEA,qBAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG2zD,OAAO,CAAC50D,MAA7B,EAAqCiB,IAAC,EAAtC,EAA4C;AAE3C,sBAAM4uH,QAAM,GAAGj7D,OAAO,CAAE3zD,IAAF,CAAtB;AAEAib,uBAAK,CAACquG,UAAN,CAAkB,QAAQ5pH,KAA1B,EAA6BM,IAAC,GAAG,CAAjC,EAAoC0uH,gBAApC,EAAsDnC,QAAtD,EAAgEC,MAAhE,EAAwEoC,QAAM,CAAC9uH,KAAP,CAAcJ,KAAd,CAAxE;AAEA;AAED;AAED;;AAEDwsH,6BAAiB,CAACC,aAAlB,GAAkCx4D,OAAO,CAAC50D,MAA1C;AAEA;;AAED,cAAKgtH,2BAA2B,CAAEh1D,OAAF,EAAWi1D,YAAX,CAAhC,EAA4D;AAE3D;AACAC,0BAAc,CAAE,KAAF,EAASl1D,OAAT,EAAkBj3D,KAAK,CAACkuB,KAAxB,EAA+BluB,KAAK,CAACiuB,MAArC,CAAd;AAEA;;AAEDm+F,2BAAiB,CAAC8B,SAAlB,GAA8Bj3D,OAAO,CAACr/B,OAAtC;AAEA,cAAKq/B,OAAO,CAAC3C,QAAb,EAAwB2C,OAAO,CAAC3C,QAAR,CAAkB2C,OAAlB;AAExB,SA1HD,MA0HO;AAEN97C,eAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,eAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B8C,iBAAiB,CAACe,cAA5C;AAEA;AAED;;AAED,eAAS6B,qBAAT,CAAgC/3D,OAAhC,EAAyC+2D,IAAzC,EAAgD;AAE/C7yG,aAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,aAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B5zB,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,EAA0Bk2D,cAApD;AAEA;;AAED,UAAM8B,YAAY,uDACf1uE,cADe,EACG,KADH,kCAEfC,mBAFe,EAEQ,KAFR,kCAGfC,sBAHe,EAGW,KAHX,iBAAlB;AAMA,UAAMyuE,UAAU,mDACbxuE,aADa,EACI,IADJ,gCAEbC,0BAFa,EAEiB,IAFjB,gCAGbE,yBAHa,EAGgB,IAHhB,gCAKbE,YALa,EAKG,IALH,gCAMbC,yBANa,EAMgB,IANhB,gCAObE,wBAPa,EAOe,IAPf,eAAhB;;AAUA,eAAS2tE,oBAAT,CAA+BM,WAA/B,EAA4Cl4D,OAA5C,EAAqDi1D,YAArD,EAAoE;AAEnE,YAAKA,YAAL,EAAoB;AAEnBd,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAEh4D,OAAO,CAAC5D,KAAV,CAAnD;;AACA+3D,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAEh4D,OAAO,CAAC3D,KAAV,CAAnD;;AAEA,cAAK67D,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,KAA9C,EAAsD;AAErD/D,eAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAEh4D,OAAO,CAACy2C,KAAV,CAAnD;AAEA;;AAED0d,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCD,UAAU,CAAEj4D,OAAO,CAAC1D,SAAV,CAAjD;;AACA63D,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCD,UAAU,CAAEj4D,OAAO,CAACzD,SAAV,CAAjD;AAEA,SAdD,MAcO;AAEN43D,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;;AACA/D,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;;AAEA,cAAKA,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,KAA9C,EAAsD;AAErD/D,eAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;AAEA;;AAED,cAAKl4D,OAAO,CAAC5D,KAAR,KAAkB7S,mBAAlB,IAAyCyW,OAAO,CAAC3D,KAAR,KAAkB9S,mBAAhE,EAAsF;AAErFz/C,mBAAO,CAAC2W,IAAR,CAAc,+HAAd;AAEA;;AAED0zG,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCxC,cAAc,CAAE11D,OAAO,CAAC1D,SAAV,CAArD;;AACA63D,aAAG,CAAC7B,aAAJ,CAAmB4F,WAAnB,EAAgC,KAAhC,EAAuCxC,cAAc,CAAE11D,OAAO,CAACzD,SAAV,CAArD;;AAEA,cAAKyD,OAAO,CAACzD,SAAR,KAAsB9S,aAAtB,IAAuCuW,OAAO,CAACzD,SAAR,KAAsBzS,YAAlE,EAAiF;AAEhFhgD,mBAAO,CAAC2W,IAAR,CAAc,iIAAd;AAEA;AAED;;AAED,YAAMwsF,SAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,gCAAhB,CAAlB;;AAEA,YAAKyzF,SAAL,EAAiB;AAEhB,cAAKjtC,OAAO,CAAC3yD,IAAR,KAAiBo9C,SAAjB,IAA8BwtC,UAAU,CAACz+E,GAAX,CAAgB,0BAAhB,MAAiD,IAApF,EAA2F;AAC3F,cAAKwmD,OAAO,CAAC3yD,IAAR,KAAiBq9C,aAAjB,IAAkC,CAAEo2C,QAAQ,IAAI7I,UAAU,CAACz+E,GAAX,CAAgB,+BAAhB,CAAd,MAAsE,IAA7G,EAAoH;;AAEpH,cAAKwmD,OAAO,CAACvD,UAAR,GAAqB,CAArB,IAA0BgiC,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,EAA0Bm4D,mBAAzD,EAA+E;AAE9EhE,eAAG,CAACiE,aAAJ,CAAmBF,WAAnB,EAAgCjrB,SAAS,CAACorB,0BAA1C,EAAsEn3G,IAAI,CAACkE,GAAL,CAAU46C,OAAO,CAACvD,UAAlB,EAA8BokC,YAAY,CAACuQ,gBAAb,EAA9B,CAAtE;;AACA3S,sBAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,EAA0Bm4D,mBAA1B,GAAgDn4D,OAAO,CAACvD,UAAxD;AAEA;AAED;AAED;;AAED,eAAS46D,WAAT,CAAsBlC,iBAAtB,EAAyCn1D,OAAzC,EAAmD;AAElD,YAAKm1D,iBAAiB,CAACa,WAAlB,KAAkCj/G,SAAvC,EAAmD;AAElDo+G,2BAAiB,CAACa,WAAlB,GAAgC,IAAhC;AAEAh2D,iBAAO,CAAC9/C,gBAAR,CAA0B,SAA1B,EAAqCy1G,gBAArC;AAEAR,2BAAiB,CAACe,cAAlB,GAAmC/B,GAAG,CAAC/B,aAAJ,EAAnC;AAEAxhB,cAAI,CAAC4D,MAAL,CAAY92C,QAAZ;AAEA;AAED;;AAED,eAASy5D,aAAT,CAAwBhC,iBAAxB,EAA2Cn1D,OAA3C,EAAoD+2D,IAApD,EAA2D;AAE1D,YAAImB,WAAW,GAAG,IAAlB;AAEA,YAAKl4D,OAAO,CAAC02C,oBAAb,EAAoCwhB,WAAW,GAAG,KAAd;AACpC,YAAKl4D,OAAO,CAAC42C,eAAb,EAA+BshB,WAAW,GAAG,KAAd;AAE/Bb,mBAAW,CAAElC,iBAAF,EAAqBn1D,OAArB,CAAX;AAEA97C,aAAK,CAACwvG,aAAN,CAAqB,QAAQqD,IAA7B;AACA7yG,aAAK,CAACmuG,WAAN,CAAmB6F,WAAnB,EAAgC/C,iBAAiB,CAACe,cAAlD;;AAEA/B,WAAG,CAACmD,WAAJ,CAAiB,KAAjB,EAAwBt3D,OAAO,CAAC7C,KAAhC;;AACAg3D,WAAG,CAACmD,WAAJ,CAAiB,KAAjB,EAAwBt3D,OAAO,CAAC9C,gBAAhC;;AACAi3D,WAAG,CAACmD,WAAJ,CAAiB,IAAjB,EAAuBt3D,OAAO,CAAC5C,eAA/B;;AAEA,YAAMs3D,eAAe,GAAGK,sBAAsB,CAAE/0D,OAAF,CAAtB,IAAqCpM,YAAY,CAAEoM,OAAO,CAACj3D,KAAV,CAAZ,KAAkC,KAA/F;AACA,YAAMA,KAAK,GAAG0rH,WAAW,CAAEz0D,OAAO,CAACj3D,KAAV,EAAiB2rH,eAAjB,EAAkC,KAAlC,EAAyC5iB,cAAzC,CAAzB;AAEA,YAAMmjB,YAAY,GAAGrhE,YAAY,CAAE7qD,KAAF,CAAZ,IAAyB+3F,QAA9C;AAAA,YACC00B,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAACxD,MAAvB,CADZ;AAGA,YAAIi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAAC3yD,IAAvB,CAAb;AAAA,YACCsqH,gBAAgB,GAAGrC,iBAAiB,CAAEt1D,OAAO,CAAClD,cAAV,EAA0B04D,QAA1B,EAAoCC,MAApC,CADrC;AAGAmC,4BAAoB,CAAEM,WAAF,EAAel4D,OAAf,EAAwBi1D,YAAxB,CAApB;AAEA,YAAI4C,MAAJ;AACA,YAAMj7D,OAAO,GAAGoD,OAAO,CAACpD,OAAxB;;AAEA,YAAKoD,OAAO,CAACs4D,cAAb,EAA8B;AAE7B;AAEAX,0BAAgB,GAAG,IAAnB;;AAEA,cAAK72B,QAAL,EAAgB;AAEf,gBAAK9gC,OAAO,CAAC3yD,IAAR,KAAiBo9C,SAAtB,EAAkC;AAEjCktE,8BAAgB,GAAG,KAAnB;AAEA,aAJD,MAIO,IAAK33D,OAAO,CAAC3yD,IAAR,KAAiBm9C,eAAtB,EAAwC;AAE9CmtE,8BAAgB,GAAG,KAAnB;AAEA,aAJM,MAIA,IAAK33D,OAAO,CAAC3yD,IAAR,KAAiBy9C,kBAAtB,EAA2C;AAEjD6sE,8BAAgB,GAAG,KAAnB;AAEA,aAJM,MAIA;AAENA,8BAAgB,GAAG,KAAnB,CAFM,CAEoB;AAE1B;AAED,WApBD,MAoBO;AAEN,gBAAK33D,OAAO,CAAC3yD,IAAR,KAAiBo9C,SAAtB,EAAkC;AAEjC3gD,qBAAO,CAACD,KAAR,CAAe,8DAAf;AAEA;AAED,WAlC4B,CAoC7B;;;AAEA,cAAKm2D,OAAO,CAACxD,MAAR,KAAmBnR,WAAnB,IAAkCssE,gBAAgB,KAAK,IAA5D,EAAmE;AAElE;AACA;AACA;AACA,gBAAK33D,OAAO,CAAC3yD,IAAR,KAAiBi9C,iBAAjB,IAAsC0V,OAAO,CAAC3yD,IAAR,KAAiBm9C,eAA5D,EAA8E;AAE7E1gD,qBAAO,CAAC2W,IAAR,CAAc,6FAAd;AAEAu/C,qBAAO,CAAC3yD,IAAR,GAAei9C,iBAAf;AACAmrE,oBAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAAC3yD,IAAvB,CAAT;AAEA;AAED;;AAED,cAAK2yD,OAAO,CAACxD,MAAR,KAAmBlR,kBAAnB,IAAyCqsE,gBAAgB,KAAK,IAAnE,EAA0E;AAEzE;AACA;AACAA,4BAAgB,GAAG,KAAnB,CAJyE,CAMzE;AACA;AACA;;AACA,gBAAK33D,OAAO,CAAC3yD,IAAR,KAAiBy9C,kBAAtB,EAA2C;AAE1ChhD,qBAAO,CAAC2W,IAAR,CAAc,kFAAd;AAEAu/C,qBAAO,CAAC3yD,IAAR,GAAey9C,kBAAf;AACA2qE,oBAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAAC3yD,IAAvB,CAAT;AAEA;AAED,WAxE4B,CA0E7B;;;AAEA6W,eAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BoF,gBAA3B,EAA6C5uH,KAAK,CAACkuB,KAAnD,EAA0DluB,KAAK,CAACiuB,MAAhE,EAAwE,CAAxE,EAA2Ew+F,QAA3E,EAAqFC,MAArF,EAA6F,IAA7F;AAEA,SA9ED,MA8EO,IAAKz1D,OAAO,CAACm7B,aAAb,EAA6B;AAEnC;AACA;AACA;AAEA,cAAKv+B,OAAO,CAAC50D,MAAR,GAAiB,CAAjB,IAAsBitH,YAA3B,EAA0C;AAEzC,iBAAM,IAAItsH,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG5X,OAAO,CAAC50D,MAA9B,EAAsCW,KAAC,GAAG6rE,EAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpDkvH,oBAAM,GAAGj7D,OAAO,CAAEj0D,KAAF,CAAhB;AACAub,mBAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB5pH,KAAxB,EAA2BgvH,gBAA3B,EAA6CE,MAAM,CAAC5gG,KAApD,EAA2D4gG,MAAM,CAAC7gG,MAAlE,EAA0E,CAA1E,EAA6Ew+F,QAA7E,EAAuFC,MAAvF,EAA+FoC,MAAM,CAACrwH,IAAtG;AAEA;;AAEDw4D,mBAAO,CAAC/C,eAAR,GAA0B,KAA1B;AACAk4D,6BAAiB,CAACC,aAAlB,GAAkCx4D,OAAO,CAAC50D,MAAR,GAAiB,CAAnD;AAEA,WAZD,MAYO;AAENkc,iBAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BoF,gBAA3B,EAA6C5uH,KAAK,CAACkuB,KAAnD,EAA0DluB,KAAK,CAACiuB,MAAhE,EAAwE,CAAxE,EAA2Ew+F,QAA3E,EAAqFC,MAArF,EAA6F1sH,KAAK,CAACvB,IAAnG;AACA2tH,6BAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA;AAED,SAzBM,MAyBA,IAAKp1D,OAAO,CAACw3D,mBAAb,EAAmC;AAEzC,eAAM,IAAI7uH,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG5X,OAAO,CAAC50D,MAA9B,EAAsCW,KAAC,GAAG6rE,KAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpDkvH,kBAAM,GAAGj7D,OAAO,CAAEj0D,KAAF,CAAhB;;AAEA,gBAAKq3D,OAAO,CAACxD,MAAR,KAAmBvR,UAAnB,IAAiC+U,OAAO,CAACxD,MAAR,KAAmBxR,SAAzD,EAAqE;AAEpE,kBAAKwqE,QAAQ,KAAK,IAAlB,EAAyB;AAExBtxG,qBAAK,CAAC8vG,oBAAN,CAA4B,IAA5B,EAAkCrrH,KAAlC,EAAqCgvH,gBAArC,EAAuDE,MAAM,CAAC5gG,KAA9D,EAAqE4gG,MAAM,CAAC7gG,MAA5E,EAAoF,CAApF,EAAuF6gG,MAAM,CAACrwH,IAA9F;AAEA,eAJD,MAIO;AAENsC,uBAAO,CAAC2W,IAAR,CAAc,gGAAd;AAEA;AAED,aAZD,MAYO;AAENyD,mBAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB5pH,KAAxB,EAA2BgvH,gBAA3B,EAA6CE,MAAM,CAAC5gG,KAApD,EAA2D4gG,MAAM,CAAC7gG,MAAlE,EAA0E,CAA1E,EAA6Ew+F,QAA7E,EAAuFC,MAAvF,EAA+FoC,MAAM,CAACrwH,IAAtG;AAEA;AAED;;AAED2tH,2BAAiB,CAACC,aAAlB,GAAkCx4D,OAAO,CAAC50D,MAAR,GAAiB,CAAnD;AAEA,SA5BM,MA4BA,IAAKg4D,OAAO,CAAC02C,oBAAb,EAAoC;AAE1CxyF,eAAK,CAAC+vG,UAAN,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B0D,gBAA5B,EAA8C5uH,KAAK,CAACkuB,KAApD,EAA2DluB,KAAK,CAACiuB,MAAjE,EAAyEjuB,KAAK,CAACgsC,KAA/E,EAAsF,CAAtF,EAAyFygF,QAAzF,EAAmGC,MAAnG,EAA2G1sH,KAAK,CAACvB,IAAjH;AACA2tH,2BAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA,SALM,MAKA,IAAKp1D,OAAO,CAAC42C,eAAb,EAA+B;AAErC1yF,eAAK,CAAC+vG,UAAN,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B0D,gBAA5B,EAA8C5uH,KAAK,CAACkuB,KAApD,EAA2DluB,KAAK,CAACiuB,MAAjE,EAAyEjuB,KAAK,CAACgsC,KAA/E,EAAsF,CAAtF,EAAyFygF,QAAzF,EAAmGC,MAAnG,EAA2G1sH,KAAK,CAACvB,IAAjH;AACA2tH,2BAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA,SALM,MAKA;AAEN;AAEA;AACA;AACA;AAEA,cAAKx4D,OAAO,CAAC50D,MAAR,GAAiB,CAAjB,IAAsBitH,YAA3B,EAA0C;AAEzC,iBAAM,IAAItsH,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG5X,OAAO,CAAC50D,MAA9B,EAAsCW,KAAC,GAAG6rE,KAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpDkvH,oBAAM,GAAGj7D,OAAO,CAAEj0D,KAAF,CAAhB;AACAub,mBAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB5pH,KAAxB,EAA2BgvH,gBAA3B,EAA6CnC,QAA7C,EAAuDC,MAAvD,EAA+DoC,MAA/D;AAEA;;AAED73D,mBAAO,CAAC/C,eAAR,GAA0B,KAA1B;AACAk4D,6BAAiB,CAACC,aAAlB,GAAkCx4D,OAAO,CAAC50D,MAAR,GAAiB,CAAnD;AAEA,WAZD,MAYO;AAENkc,iBAAK,CAACquG,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BoF,gBAA3B,EAA6CnC,QAA7C,EAAuDC,MAAvD,EAA+D1sH,KAA/D;AACAosH,6BAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA;AAED;;AAED,YAAKJ,2BAA2B,CAAEh1D,OAAF,EAAWi1D,YAAX,CAAhC,EAA4D;AAE3DC,wBAAc,CAAEgD,WAAF,EAAel4D,OAAf,EAAwBj3D,KAAK,CAACkuB,KAA9B,EAAqCluB,KAAK,CAACiuB,MAA3C,CAAd;AAEA;;AAEDm+F,yBAAiB,CAAC8B,SAAlB,GAA8Bj3D,OAAO,CAACr/B,OAAtC;AAEA,YAAKq/B,OAAO,CAAC3C,QAAb,EAAwB2C,OAAO,CAAC3C,QAAR,CAAkB2C,OAAlB;AAExB,OAxzBsF,CA0zBvF;AAEA;;;AACA,eAASu4D,uBAAT,CAAkCC,WAAlC,EAA+C1+B,YAA/C,EAA6D2+B,UAA7D,EAAyEC,aAAzE,EAAyF;AAExF,YAAMlD,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqBxD,MAApC,CAAjB;AACA,YAAMi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqB3yD,IAApC,CAAf;AACA,YAAMsqH,gBAAgB,GAAGrC,iBAAiB,CAAEx7B,YAAY,CAAC95B,OAAb,CAAqBlD,cAAvB,EAAuC04D,QAAvC,EAAiDC,MAAjD,CAA1C;AACAvxG,aAAK,CAACquG,UAAN,CAAkBmG,aAAlB,EAAiC,CAAjC,EAAoCf,gBAApC,EAAsD79B,YAAY,CAAC7iE,KAAnE,EAA0E6iE,YAAY,CAAC9iE,MAAvF,EAA+F,CAA/F,EAAkGw+F,QAAlG,EAA4GC,MAA5G,EAAoH,IAApH;;AACAtB,WAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AACArE,WAAG,CAACyE,oBAAJ,CAA0B,KAA1B,EAAiCH,UAAjC,EAA6CC,aAA7C,EAA4Dj6B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC95B,OAA7B,EAAuCk2D,cAAnG,EAAmH,CAAnH;;AACA/B,WAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAEA,OAv0BsF,CAy0BvF;;;AACA,eAASE,wBAAT,CAAmCC,YAAnC,EAAiDh/B,YAAjD,EAA+Di/B,aAA/D,EAA+E;AAE9E5E,WAAG,CAAC6E,gBAAJ,CAAsB,KAAtB,EAA6BF,YAA7B;;AAEA,YAAKh/B,YAAY,CAAC75B,WAAb,IAA4B,CAAE65B,YAAY,CAAC55B,aAAhD,EAAgE;AAE/D,cAAIy3D,gBAAgB,GAAG,KAAvB;;AAEA,cAAKoB,aAAL,EAAqB;AAEpB,gBAAM54D,YAAY,GAAG25B,YAAY,CAAC35B,YAAlC;;AAEA,gBAAKA,YAAY,IAAIA,YAAY,CAACm4D,cAAlC,EAAmD;AAElD,kBAAKn4D,YAAY,CAAC9yD,IAAb,KAAsBo9C,SAA3B,EAAuC;AAEtCktE,gCAAgB,GAAG,KAAnB;AAEA,eAJD,MAIO,IAAKx3D,YAAY,CAAC9yD,IAAb,KAAsBm9C,eAA3B,EAA6C;AAEnDmtE,gCAAgB,GAAG,KAAnB;AAEA;AAED;;AAED,gBAAMr3D,OAAO,GAAG24D,sBAAsB,CAAEn/B,YAAF,CAAtC;;AAEAq6B,eAAG,CAAC+E,8BAAJ,CAAoC,KAApC,EAA2C54D,OAA3C,EAAoDq3D,gBAApD,EAAsE79B,YAAY,CAAC7iE,KAAnF,EAA0F6iE,YAAY,CAAC9iE,MAAvG;AAEA,WAtBD,MAsBO;AAENm9F,eAAG,CAACgF,mBAAJ,CAAyB,KAAzB,EAAgCxB,gBAAhC,EAAkD79B,YAAY,CAAC7iE,KAA/D,EAAsE6iE,YAAY,CAAC9iE,MAAnF;AAEA;;AAEDm9F,aAAG,CAACiF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDN,YAAlD;AAEA,SAlCD,MAkCO,IAAKh/B,YAAY,CAAC75B,WAAb,IAA4B65B,YAAY,CAAC55B,aAA9C,EAA8D;AAEpE,cAAK64D,aAAL,EAAqB;AAEpB,gBAAMz4D,QAAO,GAAG24D,sBAAsB,CAAEn/B,YAAF,CAAtC;;AAEAq6B,eAAG,CAAC+E,8BAAJ,CAAoC,KAApC,EAA2C54D,QAA3C,EAAoD,KAApD,EAA2Dw5B,YAAY,CAAC7iE,KAAxE,EAA+E6iE,YAAY,CAAC9iE,MAA5F;AAEA,WAND,MAMO;AAENm9F,eAAG,CAACgF,mBAAJ,CAAyB,KAAzB,EAAgC,KAAhC,EAAuCr/B,YAAY,CAAC7iE,KAApD,EAA2D6iE,YAAY,CAAC9iE,MAAxE;AAEA;;AAGDm9F,aAAG,CAACiF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDN,YAAlD;AAEA,SAjBM,MAiBA;AAEN,cAAMtD,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqBxD,MAApC,CAAjB;AACA,cAAMi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqB3yD,IAApC,CAAf;;AACA,cAAMsqH,iBAAgB,GAAGrC,iBAAiB,CAAEx7B,YAAY,CAAC95B,OAAb,CAAqBlD,cAAvB,EAAuC04D,QAAvC,EAAiDC,MAAjD,CAA1C;;AAEA,cAAKsD,aAAL,EAAqB;AAEpB,gBAAMz4D,SAAO,GAAG24D,sBAAsB,CAAEn/B,YAAF,CAAtC;;AAEAq6B,eAAG,CAAC+E,8BAAJ,CAAoC,KAApC,EAA2C54D,SAA3C,EAAoDq3D,iBAApD,EAAsE79B,YAAY,CAAC7iE,KAAnF,EAA0F6iE,YAAY,CAAC9iE,MAAvG;AAEA,WAND,MAMO;AAENm9F,eAAG,CAACgF,mBAAJ,CAAyB,KAAzB,EAAgCxB,iBAAhC,EAAkD79B,YAAY,CAAC7iE,KAA/D,EAAsE6iE,YAAY,CAAC9iE,MAAnF;AAEA;AAED;;AAEDm9F,WAAG,CAAC6E,gBAAJ,CAAsB,KAAtB,EAA6B,IAA7B;AAEA,OAv5BsF,CAy5BvF;;;AACA,eAASK,iBAAT,CAA4Bb,WAA5B,EAAyC1+B,YAAzC,EAAwD;AAEvD,YAAMw/B,MAAM,GAAKx/B,YAAY,IAAIA,YAAY,CAACC,uBAA9C;AACA,YAAKu/B,MAAL,EAAc,MAAM,IAAIpzH,KAAJ,CAAW,yDAAX,CAAN;;AAEdiuH,WAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AAEA,YAAK,EAAI1+B,YAAY,CAAC35B,YAAb,IAA6B25B,YAAY,CAAC35B,YAAb,CAA0Bm4D,cAA3D,CAAL,EAAmF;AAElF,gBAAM,IAAIpyH,KAAJ,CAAW,qEAAX,CAAN;AAEA,SAXsD,CAavD;;;AACA,YAAK,CAAEu4F,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC35B,YAA7B,EAA4C+1D,cAA9C,IACHp8B,YAAY,CAAC35B,YAAb,CAA0Bp3D,KAA1B,CAAgCkuB,KAAhC,KAA0C6iE,YAAY,CAAC7iE,KADpD,IAEH6iE,YAAY,CAAC35B,YAAb,CAA0Bp3D,KAA1B,CAAgCiuB,MAAhC,KAA2C8iE,YAAY,CAAC9iE,MAF1D,EAEmE;AAElE8iE,sBAAY,CAAC35B,YAAb,CAA0Bp3D,KAA1B,CAAgCkuB,KAAhC,GAAwC6iE,YAAY,CAAC7iE,KAArD;AACA6iE,sBAAY,CAAC35B,YAAb,CAA0Bp3D,KAA1B,CAAgCiuB,MAAhC,GAAyC8iE,YAAY,CAAC9iE,MAAtD;AACA8iE,sBAAY,CAAC35B,YAAb,CAA0Bx1C,WAA1B,GAAwC,IAAxC;AAEA;;AAEDmsG,oBAAY,CAAEh9B,YAAY,CAAC35B,YAAf,EAA6B,CAA7B,CAAZ;;AAEA,YAAMo5D,iBAAiB,GAAG96B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC35B,YAA7B,EAA4C+1D,cAAtE;;AAEA,YAAKp8B,YAAY,CAAC35B,YAAb,CAA0B3D,MAA1B,KAAqCnR,WAA1C,EAAwD;AAEvD8oE,aAAG,CAACyE,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8CW,iBAA9C,EAAiE,CAAjE;AAEA,SAJD,MAIO,IAAKz/B,YAAY,CAAC35B,YAAb,CAA0B3D,MAA1B,KAAqClR,kBAA1C,EAA+D;AAErE6oE,aAAG,CAACyE,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8CW,iBAA9C,EAAiE,CAAjE;AAEA,SAJM,MAIA;AAEN,gBAAM,IAAIrzH,KAAJ,CAAW,6BAAX,CAAN;AAEA;AAED,OAp8BsF,CAs8BvF;;;AACA,eAASszH,sBAAT,CAAiC1/B,YAAjC,EAAgD;AAE/C,YAAMq8B,sBAAsB,GAAG13B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,CAA/B;AAEA,YAAMw/B,MAAM,GAAKx/B,YAAY,CAACC,uBAAb,KAAyC,IAA1D;;AAEA,YAAKD,YAAY,CAAC35B,YAAlB,EAAiC;AAEhC,cAAKm5D,MAAL,EAAc,MAAM,IAAIpzH,KAAJ,CAAW,0DAAX,CAAN;AAEdmzH,2BAAiB,CAAElD,sBAAsB,CAACE,kBAAzB,EAA6Cv8B,YAA7C,CAAjB;AAEA,SAND,MAMO;AAEN,cAAKw/B,MAAL,EAAc;AAEbnD,kCAAsB,CAACG,kBAAvB,GAA4C,EAA5C;;AAEA,iBAAM,IAAI3tH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BwrH,iBAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAvB,CAA2C1tH,KAA3C,CAA5B;;AACAwtH,oCAAsB,CAACG,kBAAvB,CAA2C3tH,KAA3C,IAAiDwrH,GAAG,CAACsF,kBAAJ,EAAjD;AACAZ,sCAAwB,CAAE1C,sBAAsB,CAACG,kBAAvB,CAA2C3tH,KAA3C,CAAF,EAAkDmxF,YAAlD,EAAgE,KAAhE,CAAxB;AAEA;AAED,WAZD,MAYO;AAENq6B,eAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAnD;;AACAF,kCAAsB,CAACG,kBAAvB,GAA4CnC,GAAG,CAACsF,kBAAJ,EAA5C;AACAZ,oCAAwB,CAAE1C,sBAAsB,CAACG,kBAAzB,EAA6Cx8B,YAA7C,EAA2D,KAA3D,CAAxB;AAEA;AAED;;AAEDq6B,WAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAEA,OA7+BsF,CA++BvF;;;AACA,eAASe,iBAAT,CAA4B5/B,YAA5B,EAA2C;AAE1C,YAAMq8B,sBAAsB,GAAG13B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,CAA/B;AACA,YAAMq7B,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC95B,OAA7B,CAA1B;AAEA85B,oBAAY,CAAC55E,gBAAb,CAA+B,SAA/B,EAA0C41G,qBAA1C;AAEAX,yBAAiB,CAACe,cAAlB,GAAmC/B,GAAG,CAAC/B,aAAJ,EAAnC;AAEAxhB,YAAI,CAAC4D,MAAL,CAAY92C,QAAZ;AAEA,YAAM47D,MAAM,GAAKx/B,YAAY,CAACC,uBAAb,KAAyC,IAA1D;AACA,YAAMg/B,aAAa,GAAKj/B,YAAY,CAACv5B,8BAAb,KAAgD,IAAxE;AACA,YAAM00D,YAAY,GAAGrhE,YAAY,CAAEkmC,YAAF,CAAZ,IAAgCgH,QAArD,CAb0C,CAe1C;;AAEA,YAAKA,QAAQ,IAAIhH,YAAY,CAAC95B,OAAb,CAAqBxD,MAArB,KAAgCxR,SAA5C,KAA2D8uC,YAAY,CAAC95B,OAAb,CAAqB3yD,IAArB,KAA8Bo9C,SAA9B,IAA2CqvC,YAAY,CAAC95B,OAAb,CAAqB3yD,IAArB,KAA8Bq9C,aAApI,CAAL,EAA2J;AAE1JovC,sBAAY,CAAC95B,OAAb,CAAqBxD,MAArB,GAA8BvR,UAA9B;AAEAnhD,iBAAO,CAAC2W,IAAR,CAAc,yGAAd;AAEA,SAvByC,CAyB1C;;;AAEA,YAAK64G,MAAL,EAAc;AAEbnD,gCAAsB,CAACE,kBAAvB,GAA4C,EAA5C;;AAEA,eAAM,IAAI1tH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BwtH,kCAAsB,CAACE,kBAAvB,CAA2C1tH,KAA3C,IAAiDwrH,GAAG,CAACwF,iBAAJ,EAAjD;AAEA;AAED,SAVD,MAUO;AAENxD,gCAAsB,CAACE,kBAAvB,GAA4ClC,GAAG,CAACwF,iBAAJ,EAA5C;;AAEA,cAAKZ,aAAL,EAAqB;AAEpB,gBAAKj4B,QAAL,EAAgB;AAEfq1B,oCAAsB,CAACK,8BAAvB,GAAwDrC,GAAG,CAACwF,iBAAJ,EAAxD;AACAxD,oCAAsB,CAACM,wBAAvB,GAAkDtC,GAAG,CAACsF,kBAAJ,EAAlD;;AAEAtF,iBAAG,CAAC6E,gBAAJ,CAAsB,KAAtB,EAA6B7C,sBAAsB,CAACM,wBAApD;;AAEA,kBAAMjB,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqBxD,MAApC,CAAjB;AACA,kBAAMi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe59B,YAAY,CAAC95B,OAAb,CAAqB3yD,IAApC,CAAf;AACA,kBAAMsqH,gBAAgB,GAAGrC,iBAAiB,CAAEx7B,YAAY,CAAC95B,OAAb,CAAqBlD,cAAvB,EAAuC04D,QAAvC,EAAiDC,MAAjD,CAA1C;AACA,kBAAMn1D,OAAO,GAAG24D,sBAAsB,CAAEn/B,YAAF,CAAtC;;AACAq6B,iBAAG,CAAC+E,8BAAJ,CAAoC,KAApC,EAA2C54D,OAA3C,EAAoDq3D,gBAApD,EAAsE79B,YAAY,CAAC7iE,KAAnF,EAA0F6iE,YAAY,CAAC9iE,MAAvG;;AAEAm9F,iBAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD;;AACArC,iBAAG,CAACiF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDjD,sBAAsB,CAACM,wBAAzE;;AACAtC,iBAAG,CAAC6E,gBAAJ,CAAsB,KAAtB,EAA6B,IAA7B;;AAEA,kBAAKl/B,YAAY,CAAC75B,WAAlB,EAAgC;AAE/Bk2D,sCAAsB,CAACO,wBAAvB,GAAkDvC,GAAG,CAACsF,kBAAJ,EAAlD;AACAZ,wCAAwB,CAAE1C,sBAAsB,CAACO,wBAAzB,EAAmD58B,YAAnD,EAAiE,IAAjE,CAAxB;AAEA;;AAEDq6B,iBAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAGA,aA3BD,MA2BO;AAEN7uH,qBAAO,CAAC2W,IAAR,CAAc,iFAAd;AAEA;AAED;AAED,SA9EyC,CAgF1C;;;AAEA,YAAK64G,MAAL,EAAc;AAEbp1G,eAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B8C,iBAAiB,CAACe,cAA5C;AACA0B,8BAAoB,CAAE,KAAF,EAAS99B,YAAY,CAAC95B,OAAtB,EAA+Bi1D,YAA/B,CAApB;;AAEA,eAAM,IAAItsH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B4vH,mCAAuB,CAAEpC,sBAAsB,CAACE,kBAAvB,CAA2C1tH,KAA3C,CAAF,EAAkDmxF,YAAlD,EAAgE,KAAhE,EAAuE,QAAQnxF,KAA/E,CAAvB;AAEA;;AAED,cAAKqsH,2BAA2B,CAAEl7B,YAAY,CAAC95B,OAAf,EAAwBi1D,YAAxB,CAAhC,EAAyE;AAExEC,0BAAc,CAAE,KAAF,EAASp7B,YAAY,CAAC95B,OAAtB,EAA+B85B,YAAY,CAAC7iE,KAA5C,EAAmD6iE,YAAY,CAAC9iE,MAAhE,CAAd;AAEA;;AAED9S,eAAK,CAACmuG,WAAN,CAAmB,KAAnB,EAA0B,IAA1B;AAEA,SAnBD,MAmBO;AAENnuG,eAAK,CAACmuG,WAAN,CAAmB,IAAnB,EAAyB8C,iBAAiB,CAACe,cAA3C;AACA0B,8BAAoB,CAAE,IAAF,EAAQ99B,YAAY,CAAC95B,OAArB,EAA8Bi1D,YAA9B,CAApB;AACAsD,iCAAuB,CAAEpC,sBAAsB,CAACE,kBAAzB,EAA6Cv8B,YAA7C,EAA2D,KAA3D,EAAkE,IAAlE,CAAvB;;AAEA,cAAKk7B,2BAA2B,CAAEl7B,YAAY,CAAC95B,OAAf,EAAwBi1D,YAAxB,CAAhC,EAAyE;AAExEC,0BAAc,CAAE,IAAF,EAAQp7B,YAAY,CAAC95B,OAArB,EAA8B85B,YAAY,CAAC7iE,KAA3C,EAAkD6iE,YAAY,CAAC9iE,MAA/D,CAAd;AAEA;;AAED9S,eAAK,CAACmuG,WAAN,CAAmB,IAAnB,EAAyB,IAAzB;AAEA,SAnHyC,CAqH1C;;;AAEA,YAAKv4B,YAAY,CAAC75B,WAAlB,EAAgC;AAE/Bu5D,gCAAsB,CAAE1/B,YAAF,CAAtB;AAEA;AAED;;AAED,eAAS8/B,wBAAT,CAAmC9/B,YAAnC,EAAkD;AAEjD,YAAM95B,OAAO,GAAG85B,YAAY,CAAC95B,OAA7B;AACA,YAAMi1D,YAAY,GAAGrhE,YAAY,CAAEkmC,YAAF,CAAZ,IAAgCgH,QAArD;;AAEA,YAAKk0B,2BAA2B,CAAEh1D,OAAF,EAAWi1D,YAAX,CAAhC,EAA4D;AAE3D,cAAMziH,MAAM,GAAGsnF,YAAY,CAACC,uBAAb,GAAuC,KAAvC,GAA+C,IAA9D;;AACA,cAAM85B,YAAY,GAAGp1B,UAAU,CAACjlF,GAAX,CAAgBwmD,OAAhB,EAA0Bk2D,cAA/C;;AAEAhyG,eAAK,CAACmuG,WAAN,CAAmB7/G,MAAnB,EAA2BqhH,YAA3B;AACAqB,wBAAc,CAAE1iH,MAAF,EAAUwtD,OAAV,EAAmB85B,YAAY,CAAC7iE,KAAhC,EAAuC6iE,YAAY,CAAC9iE,MAApD,CAAd;AACA9S,eAAK,CAACmuG,WAAN,CAAmB7/G,MAAnB,EAA2B,IAA3B;AAEA;AAED;;AAED,eAASqnH,6BAAT,CAAwC//B,YAAxC,EAAuD;AAEtD,YAAKA,YAAY,CAACv5B,8BAAlB,EAAmD;AAElD,cAAKugC,QAAL,EAAgB;AAEf,gBAAMq1B,sBAAsB,GAAG13B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,CAA/B;;AAEAq6B,eAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD;;AACArC,eAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAnD;;AAEA,gBAAMp/F,KAAK,GAAG6iE,YAAY,CAAC7iE,KAA3B;AACA,gBAAMD,MAAM,GAAG8iE,YAAY,CAAC9iE,MAA5B;AACA,gBAAI01C,IAAI,GAAG,KAAX;AAEA,gBAAKotB,YAAY,CAAC75B,WAAlB,EAAgCyM,IAAI,IAAI,GAAR;AAChC,gBAAKotB,YAAY,CAAC55B,aAAlB,EAAkCwM,IAAI,IAAI,IAAR;;AAElCynD,eAAG,CAAC2F,eAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA2B7iG,KAA3B,EAAkCD,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C,EAAgDC,KAAhD,EAAuDD,MAAvD,EAA+D01C,IAA/D,EAAqE,IAArE;;AAEAynD,eAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD,EAhBe,CAgBsE;;AAErF,WAlBD,MAkBO;AAEN1sH,mBAAO,CAAC2W,IAAR,CAAc,iFAAd;AAEA;AAED;AAED;;AAED,eAASw4G,sBAAT,CAAiCn/B,YAAjC,EAAgD;AAE/C,eAASgH,QAAQ,IAAIhH,YAAY,CAACv5B,8BAA3B,GACNr/C,IAAI,CAACkE,GAAL,CAAUmtF,UAAV,EAAsBzY,YAAY,CAACx5B,OAAnC,CADM,GACyC,CADhD;AAGA;;AAED,eAAS02D,kBAAT,CAA6Bh3D,OAA7B,EAAuC;AAEtC,YAAMugC,KAAK,GAAGqQ,IAAI,CAAC53E,MAAL,CAAYunE,KAA1B,CAFsC,CAItC;;AAEA,YAAK8zB,cAAc,CAAC76G,GAAf,CAAoBwmD,OAApB,MAAkCugC,KAAvC,EAA+C;AAE9C8zB,wBAAc,CAACruG,GAAf,CAAoBg6C,OAApB,EAA6BugC,KAA7B;;AACAvgC,iBAAO,CAAC/7C,MAAR;AAEA;AAED,OArrCsF,CAurCvF;;;AAEA,UAAI81G,eAAe,GAAG,KAAtB;AACA,UAAIC,iBAAiB,GAAG,KAAxB;;AAEA,eAAS9gB,gBAAT,CAA2Bl5C,OAA3B,EAAoC+2D,IAApC,EAA2C;AAE1C,YAAK/2D,OAAO,IAAIA,OAAO,CAACI,mBAAxB,EAA8C;AAE7C,cAAK25D,eAAe,KAAK,KAAzB,EAAiC;AAEhCjwH,mBAAO,CAAC2W,IAAR,CAAc,kHAAd;AACAs5G,2BAAe,GAAG,IAAlB;AAEA;;AAED/5D,iBAAO,GAAGA,OAAO,CAACA,OAAlB;AAEA;;AAED82D,oBAAY,CAAE92D,OAAF,EAAW+2D,IAAX,CAAZ;AAEA;;AAED,eAASvd,kBAAT,CAA6Bx5C,OAA7B,EAAsC+2D,IAAtC,EAA6C;AAE5C,YAAK/2D,OAAO,IAAIA,OAAO,CAAC+5B,uBAAxB,EAAkD;AAEjD,cAAKigC,iBAAiB,KAAK,KAA3B,EAAmC;AAElClwH,mBAAO,CAAC2W,IAAR,CAAc,yHAAd;AACAu5G,6BAAiB,GAAG,IAApB;AAEA;;AAEDh6D,iBAAO,GAAGA,OAAO,CAACA,OAAlB;AAEA,SAb2C,CAe5C;AACA;;;AACA,YAAOA,OAAO,IAAIA,OAAO,CAACwsC,aAArB,IACFpyE,KAAK,CAAC0jC,OAAN,CAAekC,OAAO,CAACj3D,KAAvB,KAAkCi3D,OAAO,CAACj3D,KAAR,CAAcf,MAAd,KAAyB,CAD9D,EACoE;AAEnE;AAEA;AACAovH,wBAAc,CAAEp3D,OAAF,EAAW+2D,IAAX,CAAd;AAEA,SARD,MAQO;AAEN;AACAgB,+BAAqB,CAAE/3D,OAAF,EAAW+2D,IAAX,CAArB;AAEA;AAED,OA/uCsF,CAivCvF;;;AAEA,WAAKnf,mBAAL,GAA2BA,mBAA3B;AACA,WAAKgf,iBAAL,GAAyBA,iBAAzB;AAEA,WAAKE,YAAL,GAAoBA,YAApB;AACA,WAAK1d,iBAAL,GAAyBA,iBAAzB;AACA,WAAKE,YAAL,GAAoBA,YAApB;AACA,WAAK8d,cAAL,GAAsBA,cAAtB;AACA,WAAKW,qBAAL,GAA6BA,qBAA7B;AACA,WAAK2B,iBAAL,GAAyBA,iBAAzB;AACA,WAAKE,wBAAL,GAAgCA,wBAAhC;AACA,WAAKC,6BAAL,GAAqCA,6BAArC;AAEA,WAAK3gB,gBAAL,GAAwBA,gBAAxB;AACA,WAAKM,kBAAL,GAA0BA,kBAA1B;AAEA;;AAED,aAASygB,UAAT,CAAqBr5B,EAArB,EAAyB3I,UAAzB,EAAqC4I,YAArC,EAAoD;AAEnD,UAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;;AAEA,eAAS42B,OAAT,CAAkBj+F,CAAlB,EAAsB;AAErB,YAAIwzE,SAAJ;AAEA,YAAKxzE,CAAC,KAAK0wB,gBAAX,EAA8B,OAAO,IAAP;AAC9B,YAAK1wB,CAAC,KAAKkxB,qBAAX,EAAmC,OAAO,KAAP;AACnC,YAAKlxB,CAAC,KAAKmxB,qBAAX,EAAmC,OAAO,KAAP;AACnC,YAAKnxB,CAAC,KAAKoxB,oBAAX,EAAkC,OAAO,KAAP;AAElC,YAAKpxB,CAAC,KAAK2wB,QAAX,EAAsB,OAAO,IAAP;AACtB,YAAK3wB,CAAC,KAAK4wB,SAAX,EAAuB,OAAO,IAAP;AACvB,YAAK5wB,CAAC,KAAK6wB,iBAAX,EAA+B,OAAO,IAAP;AAC/B,YAAK7wB,CAAC,KAAK8wB,OAAX,EAAqB,OAAO,IAAP;AACrB,YAAK9wB,CAAC,KAAK+wB,eAAX,EAA6B,OAAO,IAAP;AAC7B,YAAK/wB,CAAC,KAAKgxB,SAAX,EAAuB,OAAO,IAAP;;AAEvB,YAAKhxB,CAAC,KAAKixB,aAAX,EAA2B;AAE1B,cAAKo2C,QAAL,EAAgB,OAAO,IAAP;AAEhBmM,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,mBAAOA,SAAS,CAACitB,cAAjB;AAEA,WAJD,MAIO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKzgG,CAAC,KAAKsxB,WAAX,EAAyB,OAAO,IAAP;AACzB,YAAKtxB,CAAC,KAAKuxB,SAAX,EAAuB,OAAO,IAAP;AACvB,YAAKvxB,CAAC,KAAKwxB,UAAX,EAAwB,OAAO,IAAP;AACxB,YAAKxxB,CAAC,KAAKyxB,eAAX,EAA6B,OAAO,IAAP;AAC7B,YAAKzxB,CAAC,KAAK0xB,oBAAX,EAAkC,OAAO,IAAP;AAClC,YAAK1xB,CAAC,KAAK4xB,WAAX,EAAyB,OAAO,IAAP;AACzB,YAAK5xB,CAAC,KAAK6xB,kBAAX,EAAgC,OAAO,KAAP;AAChC,YAAK7xB,CAAC,KAAK8xB,SAAX,EAAuB,OAAO,IAAP,CAzCF,CA2CrB;;AAEA,YAAK9xB,CAAC,KAAK+xB,gBAAX,EAA8B,OAAO,KAAP;AAC9B,YAAK/xB,CAAC,KAAKgyB,QAAX,EAAsB,OAAO,KAAP;AACtB,YAAKhyB,CAAC,KAAKiyB,eAAX,EAA6B,OAAO,KAAP;AAC7B,YAAKjyB,CAAC,KAAKkyB,gBAAX,EAA8B,OAAO,KAAP;AAC9B,YAAKlyB,CAAC,KAAKmyB,iBAAX,EAA+B,OAAO,KAAP;;AAE/B,YAAKnyB,CAAC,KAAKoyB,oBAAN,IAA8BpyB,CAAC,KAAKqyB,qBAApC,IACJryB,CAAC,KAAKsyB,qBADF,IAC2BtyB,CAAC,KAAKuyB,qBADtC,EAC8D;AAE7DihD,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,gBAAKxzE,CAAC,KAAKoyB,oBAAX,EAAkC,OAAOohD,SAAS,CAACktB,4BAAjB;AAClC,gBAAK1gG,CAAC,KAAKqyB,qBAAX,EAAmC,OAAOmhD,SAAS,CAACmtB,6BAAjB;AACnC,gBAAK3gG,CAAC,KAAKsyB,qBAAX,EAAmC,OAAOkhD,SAAS,CAACotB,6BAAjB;AACnC,gBAAK5gG,CAAC,KAAKuyB,qBAAX,EAAmC,OAAOihD,SAAS,CAACqtB,6BAAjB;AAEnC,WAPD,MAOO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAK7gG,CAAC,KAAKwyB,uBAAN,IAAiCxyB,CAAC,KAAKyyB,uBAAvC,IACJzyB,CAAC,KAAK0yB,wBADF,IAC8B1yB,CAAC,KAAK2yB,wBADzC,EACoE;AAEnE6gD,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,gCAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,gBAAKxzE,CAAC,KAAKwyB,uBAAX,EAAqC,OAAOghD,SAAS,CAACstB,+BAAjB;AACrC,gBAAK9gG,CAAC,KAAKyyB,uBAAX,EAAqC,OAAO+gD,SAAS,CAACutB,+BAAjB;AACrC,gBAAK/gG,CAAC,KAAK0yB,wBAAX,EAAsC,OAAO8gD,SAAS,CAACwtB,gCAAjB;AACtC,gBAAKhhG,CAAC,KAAK2yB,wBAAX,EAAsC,OAAO6gD,SAAS,CAACytB,gCAAjB;AAEtC,WAPD,MAOO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKjhG,CAAC,KAAK4yB,eAAX,EAA6B;AAE5B4gD,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,mBAAOA,SAAS,CAAC0tB,yBAAjB;AAEA,WAJD,MAIO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKlhG,CAAC,KAAK6yB,eAAN,IAAyB7yB,CAAC,KAAK8yB,oBAApC,EAA2D;AAE1D0gD,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,8BAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,gBAAKxzE,CAAC,KAAK6yB,eAAX,EAA6B,OAAO2gD,SAAS,CAAC2tB,oBAAjB;AAC7B,gBAAKnhG,CAAC,KAAK8yB,oBAAX,EAAkC,OAAO0gD,SAAS,CAAC4tB,yBAAjB;AAElC;AAED;;AAED,YAAKphG,CAAC,KAAK+yB,oBAAN,IAA8B/yB,CAAC,KAAKgzB,oBAApC,IAA4DhzB,CAAC,KAAKizB,oBAAlE,IACJjzB,CAAC,KAAKkzB,oBADF,IAC0BlzB,CAAC,KAAKmzB,oBADhC,IACwDnzB,CAAC,KAAKozB,oBAD9D,IAEJpzB,CAAC,KAAKqzB,oBAFF,IAE0BrzB,CAAC,KAAKszB,oBAFhC,IAEwDtzB,CAAC,KAAKuzB,qBAF9D,IAGJvzB,CAAC,KAAKwzB,qBAHF,IAG2BxzB,CAAC,KAAKyzB,qBAHjC,IAG0DzzB,CAAC,KAAK0zB,sBAHhE,IAIJ1zB,CAAC,KAAK2zB,sBAJF,IAI4B3zB,CAAC,KAAK4zB,sBAJlC,IAKJ5zB,CAAC,KAAK8zB,4BALF,IAKkC9zB,CAAC,KAAK+zB,4BALxC,IAKwE/zB,CAAC,KAAKg0B,4BAL9E,IAMJh0B,CAAC,KAAKi0B,4BANF,IAMkCj0B,CAAC,KAAKk0B,4BANxC,IAMwEl0B,CAAC,KAAKm0B,4BAN9E,IAOJn0B,CAAC,KAAKo0B,4BAPF,IAOkCp0B,CAAC,KAAKq0B,4BAPxC,IAOwEr0B,CAAC,KAAKs0B,6BAP9E,IAQJt0B,CAAC,KAAKu0B,6BARF,IAQmCv0B,CAAC,KAAKw0B,6BARzC,IAQ0Ex0B,CAAC,KAAKy0B,8BARhF,IASJz0B,CAAC,KAAK00B,8BATF,IASoC10B,CAAC,KAAK20B,8BAT/C,EASgF;AAE/E6+C,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,mBAAOxzE,CAAP;AAEA,WAND,MAMO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKA,CAAC,KAAK6zB,gBAAX,EAA8B;AAE7B2/C,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,8BAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,mBAAOxzE,CAAP;AAEA,WAND,MAMO;AAEN,mBAAO,IAAP;AAEA;AAED;;AAED,YAAKA,CAAC,KAAKqxB,kBAAX,EAAgC;AAE/B,cAAKg2C,QAAL,EAAgB,OAAO,KAAP;AAEhBmM,mBAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,qBAAhB,CAAZ;;AAEA,cAAKyzF,SAAS,KAAK,IAAnB,EAA0B;AAEzB,mBAAOA,SAAS,CAAC6tB,uBAAjB;AAEA,WAJD,MAIO;AAEN,mBAAO,IAAP;AAEA;AAED;AAED;;AAED,aAAO;AAAEpD,eAAO,EAAEA;AAAX,OAAP;AAEA;;AAED,aAASqD,WAAT,CAAsBx1F,KAAtB,EAA8B;AAE7BqzD,uBAAiB,CAAC57E,IAAlB,CAAwB,IAAxB;AAEA,WAAK8qG,OAAL,GAAeviF,KAAK,IAAI,EAAxB;AAEA;;AAEDw1F,eAAW,CAACl7G,SAAZ,GAAwB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAey6E,iBAAiB,CAAC/4E,SAAjC,CAAf,EAA6D;AAEpF0M,iBAAW,EAAEwuG,WAFuE;AAIpFC,mBAAa,EAAE;AAJqE,KAA7D,CAAxB;;AAQA,aAAS54E,KAAT,GAAiB;AAEhB2rB,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,OAAZ;AAEA;;AAED+0C,SAAK,CAACviC,SAAN,GAAkB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAErE0M,iBAAW,EAAE61B,KAFwD;AAIrE64E,aAAO,EAAE;AAJ4D,KAApD,CAAlB;;AAQA,aAASC,eAAT,GAA2B;AAE1B,WAAKC,UAAL,GAAkB,IAAlB;AACA,WAAKC,KAAL,GAAa,IAAb;AACA,WAAKC,KAAL,GAAa,IAAb;AAEA;;AAEDnxH,UAAM,CAACiiC,MAAP,CAAe+uF,eAAe,CAACr7G,SAA/B,EAA0C;AAEzC0M,iBAAW,EAAE2uG,eAF4B;AAIzCI,kBAAY,EAAE,wBAAY;AAEzB,YAAK,KAAKD,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,GAAa,IAAIj5E,KAAJ,EAAb;AACA,eAAKi5E,KAAL,CAAWr+D,gBAAX,GAA8B,KAA9B;AACA,eAAKq+D,KAAL,CAAW3sD,OAAX,GAAqB,KAArB;AAEA,eAAK2sD,KAAL,CAAWE,MAAX,GAAoB,EAApB;AACA,eAAKF,KAAL,CAAWG,UAAX,GAAwB;AAAEC,oBAAQ,EAAE;AAAZ,WAAxB;;AAEA,cAAK99G,MAAM,CAAC+9G,MAAZ,EAAqB;AAEpB,iBAAM,IAAI/yH,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIgV,MAAM,CAAC+9G,MAAP,CAAcC,kBAApC,EAAwDhzH,KAAC,EAAzD,EAA+D;AAE9D;AACA,kBAAIizH,KAAK,GAAG,IAAIx5E,KAAJ,EAAZ;AACAw5E,mBAAK,CAAC5+D,gBAAN,GAAyB,KAAzB;AACA4+D,mBAAK,CAACltD,OAAN,GAAgB,KAAhB;;AACA,mBAAK2sD,KAAL,CAAWE,MAAX,CAAkBlyH,IAAlB,CAAwBuyH,KAAxB,EAN8D,CAO9D;;;AACA,mBAAKP,KAAL,CAAWz1G,GAAX,CAAgBg2G,KAAhB;AAEA;AAED;AAED;;AAED,eAAO,KAAKP,KAAZ;AAEA,OAnCwC;AAqCzCQ,uBAAiB,EAAE,6BAAY;AAE9B,YAAK,KAAKV,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,eAAKA,UAAL,GAAkB,IAAI/4E,KAAJ,EAAlB;AACA,eAAK+4E,UAAL,CAAgBn+D,gBAAhB,GAAmC,KAAnC;AACA,eAAKm+D,UAAL,CAAgBzsD,OAAhB,GAA0B,KAA1B;AAEA;;AAED,eAAO,KAAKysD,UAAZ;AAEA,OAjDwC;AAmDzCW,kBAAY,EAAE,wBAAY;AAEzB,YAAK,KAAKV,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,GAAa,IAAIh5E,KAAJ,EAAb;AACA,eAAKg5E,KAAL,CAAWp+D,gBAAX,GAA8B,KAA9B;AACA,eAAKo+D,KAAL,CAAW1sD,OAAX,GAAqB,KAArB;AAEA;;AAED,eAAO,KAAK0sD,KAAZ;AAEA,OA/DwC;AAiEzCz/G,mBAAa,EAAE,uBAAW1U,KAAX,EAAmB;AAEjC,YAAK,KAAKk0H,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,eAAKA,UAAL,CAAgBx/G,aAAhB,CAA+B1U,KAA/B;AAEA;;AAED,YAAK,KAAKm0H,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,CAAWz/G,aAAX,CAA0B1U,KAA1B;AAEA;;AAED,YAAK,KAAKo0H,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,CAAW1/G,aAAX,CAA0B1U,KAA1B;AAEA;;AAED,eAAO,IAAP;AAEA,OAvFwC;AAyFzC80H,gBAAU,EAAE,oBAAWC,WAAX,EAAyB;AAEpC,aAAKrgH,aAAL,CAAoB;AAAEtO,cAAI,EAAE,cAAR;AAAwB7F,cAAI,EAAEw0H;AAA9B,SAApB;;AAEA,YAAK,KAAKb,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,eAAKA,UAAL,CAAgBzsD,OAAhB,GAA0B,KAA1B;AAEA;;AAED,YAAK,KAAK0sD,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,CAAW1sD,OAAX,GAAqB,KAArB;AAEA;;AAED,YAAK,KAAK2sD,KAAL,KAAe,IAApB,EAA2B;AAE1B,eAAKA,KAAL,CAAW3sD,OAAX,GAAqB,KAArB;AAEA;;AAED,eAAO,IAAP;AAEA,OAjHwC;AAmHzCzqD,YAAM,EAAE,gBAAW+3G,WAAX,EAAwBz7B,KAAxB,EAA+B07B,cAA/B,EAAgD;AAEvD,YAAIC,SAAS,GAAG,IAAhB;AACA,YAAIC,QAAQ,GAAG,IAAf;AACA,YAAIC,QAAQ,GAAG,IAAf;AAEA,YAAMC,SAAS,GAAG,KAAKlB,UAAvB;AACA,YAAMmB,IAAI,GAAG,KAAKlB,KAAlB;AACA,YAAMmB,IAAI,GAAG,KAAKlB,KAAlB;;AAEA,YAAKW,WAAL,EAAmB;AAElB,cAAKA,WAAW,CAACO,IAAjB,EAAwB;AAEvBH,oBAAQ,GAAG,IAAX;;AAEA,iBAAM,IAAIzzH,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIgV,MAAM,CAAC+9G,MAAP,CAAcC,kBAApC,EAAwDhzH,KAAC,EAAzD,EAA+D;AAE9D,kBAAKqzH,WAAW,CAACO,IAAZ,CAAkB5zH,KAAlB,CAAL,EAA6B;AAE5B;AACA,oBAAI6zH,SAAS,GAAGj8B,KAAK,CAACk8B,YAAN,CAAoBT,WAAW,CAACO,IAAZ,CAAkB5zH,KAAlB,CAApB,EAA2CszH,cAA3C,CAAhB;AACA,oBAAML,KAAK,GAAGW,IAAI,CAAChB,MAAL,CAAa5yH,KAAb,CAAd;;AAEA,oBAAK6zH,SAAS,KAAK,IAAnB,EAA0B;AAEzBZ,uBAAK,CAACxyG,MAAN,CAAa4tC,SAAb,CAAwBwlE,SAAS,CAACE,SAAV,CAAoBtzG,MAA5C;AACAwyG,uBAAK,CAACxyG,MAAN,CAAaiiD,SAAb,CAAwBuwD,KAAK,CAACz4G,QAA9B,EAAwCy4G,KAAK,CAAC/4E,QAA9C,EAAwD+4E,KAAK,CAACn2G,KAA9D;AACAm2G,uBAAK,CAACe,WAAN,GAAoBH,SAAS,CAACh3G,MAA9B;AAEA;;AAEDo2G,qBAAK,CAACltD,OAAN,GAAgB8tD,SAAS,KAAK,IAA9B,CAd4B,CAgB5B;AAEA;;AACA,oBAAMI,QAAQ,GAAGL,IAAI,CAAChB,MAAL,CAAa59G,MAAM,CAAC+9G,MAAP,CAAcmB,iBAA3B,CAAjB;AACA,oBAAMC,QAAQ,GAAGP,IAAI,CAAChB,MAAL,CAAa59G,MAAM,CAAC+9G,MAAP,CAAcqB,iBAA3B,CAAjB;AACA,oBAAMz0G,QAAQ,GAAGs0G,QAAQ,CAACz5G,QAAT,CAAkBqzC,UAAlB,CAA8BsmE,QAAQ,CAAC35G,QAAvC,CAAjB;AAEA,oBAAM65G,eAAe,GAAG,IAAxB;AACA,oBAAMC,SAAS,GAAG,KAAlB;;AAEA,oBAAKV,IAAI,CAACf,UAAL,CAAgBC,QAAhB,IAA4BnzG,QAAQ,GAAG00G,eAAe,GAAGC,SAA9D,EAA0E;AAEzEV,sBAAI,CAACf,UAAL,CAAgBC,QAAhB,GAA2B,KAA3B;AACA,uBAAK9/G,aAAL,CAAoB;AACnBtO,wBAAI,EAAE,UADa;AAEnB6vH,8BAAU,EAAElB,WAAW,CAACkB,UAFL;AAGnB1qH,0BAAM,EAAE;AAHW,mBAApB;AAMA,iBATD,MASO,IAAK,CAAE+pH,IAAI,CAACf,UAAL,CAAgBC,QAAlB,IAA8BnzG,QAAQ,IAAI00G,eAAe,GAAGC,SAAjE,EAA6E;AAEnFV,sBAAI,CAACf,UAAL,CAAgBC,QAAhB,GAA2B,IAA3B;AACA,uBAAK9/G,aAAL,CAAoB;AACnBtO,wBAAI,EAAE,YADa;AAEnB6vH,8BAAU,EAAElB,WAAW,CAACkB,UAFL;AAGnB1qH,0BAAM,EAAE;AAHW,mBAApB;AAMA;AAED;AAED;AAED,WAxDD,MAwDO;AAEN,gBAAK6pH,SAAS,KAAK,IAAnB,EAA0B;AAEzBH,uBAAS,GAAG37B,KAAK,CAAC48B,OAAN,CAAenB,WAAW,CAACoB,cAA3B,EAA2CnB,cAA3C,CAAZ;;AAEA,kBAAKC,SAAS,KAAK,IAAnB,EAA0B;AAEzBG,yBAAS,CAACjzG,MAAV,CAAiB4tC,SAAjB,CAA4BklE,SAAS,CAACQ,SAAV,CAAoBtzG,MAAhD;AACAizG,yBAAS,CAACjzG,MAAV,CAAiBiiD,SAAjB,CAA4BgxD,SAAS,CAACl5G,QAAtC,EAAgDk5G,SAAS,CAACx5E,QAA1D,EAAoEw5E,SAAS,CAAC52G,KAA9E;AAEA;AAED;;AAED,gBAAK62G,IAAI,KAAK,IAAT,IAAiBN,WAAW,CAACqB,SAAlC,EAA8C;AAE7ClB,sBAAQ,GAAG57B,KAAK,CAAC48B,OAAN,CAAenB,WAAW,CAACqB,SAA3B,EAAsCpB,cAAtC,CAAX;;AAEA,kBAAKE,QAAQ,KAAK,IAAlB,EAAyB;AAExBG,oBAAI,CAAClzG,MAAL,CAAY4tC,SAAZ,CAAuBmlE,QAAQ,CAACO,SAAT,CAAmBtzG,MAA1C;AACAkzG,oBAAI,CAAClzG,MAAL,CAAYiiD,SAAZ,CAAuBixD,IAAI,CAACn5G,QAA5B,EAAsCm5G,IAAI,CAACz5E,QAA3C,EAAqDy5E,IAAI,CAAC72G,KAA1D;AAEA;AAED;AAED;AAED;;AAED,YAAK42G,SAAS,KAAK,IAAnB,EAA0B;AAEzBA,mBAAS,CAAC3tD,OAAV,GAAsBwtD,SAAS,KAAK,IAApC;AAEA;;AAED,YAAKI,IAAI,KAAK,IAAd,EAAqB;AAEpBA,cAAI,CAAC5tD,OAAL,GAAiBytD,QAAQ,KAAK,IAA9B;AAEA;;AAED,YAAKI,IAAI,KAAK,IAAd,EAAqB;AAEpBA,cAAI,CAAC7tD,OAAL,GAAiB0tD,QAAQ,KAAK,IAA9B;AAEA;;AAED,eAAO,IAAP;AAEA;AA3OwC,KAA1C;;AA+OA,aAASkB,YAAT,CAAuB9mG,QAAvB,EAAiCoqE,EAAjC,EAAsC;AAErC,UAAMh9E,KAAK,GAAG,IAAd;AAEA,UAAIooF,OAAO,GAAG,IAAd;AAEA,UAAIuxB,sBAAsB,GAAG,GAA7B;AAEA,UAAItB,cAAc,GAAG,IAArB;AACA,UAAIuB,kBAAkB,GAAG,aAAzB;AAEA,UAAIC,IAAI,GAAG,IAAX;AAEA,UAAMC,WAAW,GAAG,EAApB;AACA,UAAMC,eAAe,GAAG,IAAIC,GAAJ,EAAxB,CAdqC,CAgBrC;;AAEA,UAAMC,OAAO,GAAG,IAAIjlC,iBAAJ,EAAhB;AACAilC,aAAO,CAAC5wD,MAAR,CAAeL,MAAf,CAAuB,CAAvB;AACAixD,aAAO,CAAC99D,QAAR,GAAmB,IAAI9B,OAAJ,EAAnB;AAEA,UAAM6/D,OAAO,GAAG,IAAIllC,iBAAJ,EAAhB;AACAklC,aAAO,CAAC7wD,MAAR,CAAeL,MAAf,CAAuB,CAAvB;AACAkxD,aAAO,CAAC/9D,QAAR,GAAmB,IAAI9B,OAAJ,EAAnB;AAEA,UAAM6pD,OAAO,GAAG,CAAE+V,OAAF,EAAWC,OAAX,CAAhB;AAEA,UAAMC,QAAQ,GAAG,IAAIhD,WAAJ,EAAjB;AACAgD,cAAQ,CAAC9wD,MAAT,CAAgBL,MAAhB,CAAwB,CAAxB;AACAmxD,cAAQ,CAAC9wD,MAAT,CAAgBL,MAAhB,CAAwB,CAAxB;AAEA,UAAIoxD,iBAAiB,GAAG,IAAxB;AACA,UAAIC,gBAAgB,GAAG,IAAvB,CAjCqC,CAmCrC;;AAEA,WAAKv9G,OAAL,GAAe,KAAf;AAEA,WAAKw9G,YAAL,GAAoB,KAApB;;AAEA,WAAKC,aAAL,GAAqB,UAAW1uG,KAAX,EAAmB;AAEvC,YAAI2uG,UAAU,GAAGV,WAAW,CAAEjuG,KAAF,CAA5B;;AAEA,YAAK2uG,UAAU,KAAKrnH,SAApB,EAAgC;AAE/BqnH,oBAAU,GAAG,IAAIlD,eAAJ,EAAb;AACAwC,qBAAW,CAAEjuG,KAAF,CAAX,GAAuB2uG,UAAvB;AAEA;;AAED,eAAOA,UAAU,CAACvC,iBAAX,EAAP;AAEA,OAbD;;AAeA,WAAKwC,iBAAL,GAAyB,UAAW5uG,KAAX,EAAmB;AAE3C,YAAI2uG,UAAU,GAAGV,WAAW,CAAEjuG,KAAF,CAA5B;;AAEA,YAAK2uG,UAAU,KAAKrnH,SAApB,EAAgC;AAE/BqnH,oBAAU,GAAG,IAAIlD,eAAJ,EAAb;AACAwC,qBAAW,CAAEjuG,KAAF,CAAX,GAAuB2uG,UAAvB;AAEA;;AAED,eAAOA,UAAU,CAACtC,YAAX,EAAP;AAEA,OAbD;;AAeA,WAAKwC,OAAL,GAAe,UAAW7uG,KAAX,EAAmB;AAEjC,YAAI2uG,UAAU,GAAGV,WAAW,CAAEjuG,KAAF,CAA5B;;AAEA,YAAK2uG,UAAU,KAAKrnH,SAApB,EAAgC;AAE/BqnH,oBAAU,GAAG,IAAIlD,eAAJ,EAAb;AACAwC,qBAAW,CAAEjuG,KAAF,CAAX,GAAuB2uG,UAAvB;AAEA;;AAED,eAAOA,UAAU,CAAC9C,YAAX,EAAP;AAEA,OAbD,CAvEqC,CAsFrC;;;AAEA,eAASiD,cAAT,CAAyBt3H,KAAzB,EAAiC;AAEhC,YAAMm3H,UAAU,GAAGT,eAAe,CAACnkH,GAAhB,CAAqBvS,KAAK,CAAC+0H,WAA3B,CAAnB;;AAEA,YAAKoC,UAAL,EAAkB;AAEjBA,oBAAU,CAACziH,aAAX,CAA0B;AAAEtO,gBAAI,EAAEpG,KAAK,CAACoG;AAAd,WAA1B;AAEA;AAED;;AAED,eAASmxH,YAAT,GAAwB;AAEvBb,uBAAe,CAACp+G,OAAhB,CAAyB,UAAW6+G,UAAX,EAAuBpC,WAAvB,EAAqC;AAE7DoC,oBAAU,CAACrC,UAAX,CAAuBC,WAAvB;AAEA,SAJD;AAMA2B,uBAAe,CAAChjC,KAAhB,GARuB,CAUvB;;AAEAnkE,gBAAQ,CAACioG,cAAT,CAAyB,IAAzB;AACAjoG,gBAAQ,CAACkkE,eAAT,CAA0BlkE,QAAQ,CAACikE,eAAT,EAA1B,EAbuB,CAaiC;;AACxDikC,iBAAS,CAACnvH,IAAV;AAEAqU,aAAK,CAACs6G,YAAN,GAAqB,KAArB;AAEAt6G,aAAK,CAACjI,aAAN,CAAqB;AAAEtO,cAAI,EAAE;AAAR,SAArB;AAEA;;AAED,eAASsxH,uBAAT,CAAkClsH,KAAlC,EAA0C;AAEzCwpH,sBAAc,GAAGxpH,KAAjB;AAEAisH,iBAAS,CAACh+B,UAAV,CAAsBsL,OAAtB;AACA0yB,iBAAS,CAACtjD,KAAV;AAEAx3D,aAAK,CAACs6G,YAAN,GAAqB,IAArB;AAEAt6G,aAAK,CAACjI,aAAN,CAAqB;AAAEtO,cAAI,EAAE;AAAR,SAArB;AAEA;;AAED,WAAKuxH,yBAAL,GAAiC,UAAWnsH,KAAX,EAAmB;AAEnD8qH,8BAAsB,GAAG9qH,KAAzB;;AAEA,YAAKmR,KAAK,CAACs6G,YAAN,KAAuB,IAA5B,EAAmC;AAElCp0H,iBAAO,CAAC2W,IAAR,CAAc,uEAAd;AAEA;AAED,OAVD;;AAYA,WAAKo+G,qBAAL,GAA6B,UAAWpsH,KAAX,EAAmB;AAE/C+qH,0BAAkB,GAAG/qH,KAArB;;AAEA,YAAKmR,KAAK,CAACs6G,YAAN,KAAuB,IAA5B,EAAmC;AAElCp0H,iBAAO,CAAC2W,IAAR,CAAc,0EAAd;AAEA;AAED,OAVD;;AAYA,WAAKq+G,iBAAL,GAAyB,YAAY;AAEpC,eAAO7C,cAAP;AAEA,OAJD;;AAMA,WAAKhwB,UAAL,GAAkB,YAAY;AAE7B,eAAOD,OAAP;AAEA,OAJD;;AAMA,WAAK+yB,UAAL,GAAkB,UAAWtsH,KAAX,EAAmB;AAEpCu5F,eAAO,GAAGv5F,KAAV;;AAEA,YAAKu5F,OAAO,KAAK,IAAjB,EAAwB;AAEvBA,iBAAO,CAAC9rF,gBAAR,CAA0B,QAA1B,EAAoCq+G,cAApC;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,aAA1B,EAAyCq+G,cAAzC;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,WAA1B,EAAuCq+G,cAAvC;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,SAA1B,EAAqCq+G,cAArC;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,cAA1B,EAA0Cq+G,cAA1C;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,YAA1B,EAAwCq+G,cAAxC;AACAvyB,iBAAO,CAAC9rF,gBAAR,CAA0B,KAA1B,EAAiCs+G,YAAjC;AAEA,cAAM/7E,UAAU,GAAGm+C,EAAE,CAACo+B,oBAAH,EAAnB;;AAEA,cAAKv8E,UAAU,CAACw8E,YAAX,KAA4B,IAAjC,EAAwC;AAEvCr+B,cAAE,CAACs+B,gBAAH;AAEA;;AAED,cAAMC,SAAS,GAAG;AACjBhoG,qBAAS,EAAEsrB,UAAU,CAACtrB,SADL;AAEjBw/B,iBAAK,EAAElU,UAAU,CAACkU,KAFD;AAGjB5hB,iBAAK,EAAE0N,UAAU,CAAC1N,KAHD;AAIjB6lD,mBAAO,EAAEn4C,UAAU,CAACm4C,OAJH;AAKjB2iC,kCAAsB,EAAEA;AALP,WAAlB,CAlBuB,CA0BvB;;AACA,cAAM6B,SAAS,GAAG,IAAIC,YAAJ,CAAkBrzB,OAAlB,EAA2BpL,EAA3B,EAA+Bu+B,SAA/B,CAAlB;AAEAnzB,iBAAO,CAACszB,iBAAR,CAA2B;AAAEF,qBAAS,EAAEA;AAAb,WAA3B;AAEApzB,iBAAO,CAACuzB,qBAAR,CAA+B/B,kBAA/B,EAAoDx3H,IAApD,CAA0D24H,uBAA1D,EA/BuB,CAiCvB;;AAEA3yB,iBAAO,CAAC9rF,gBAAR,CAA0B,oBAA1B,EAAgDs/G,kBAAhD;AAEA;AAED,OA3CD;;AA6CA,eAASA,kBAAT,CAA6Bv4H,KAA7B,EAAqC;AAEpC,YAAMw4H,YAAY,GAAGzzB,OAAO,CAACyzB,YAA7B,CAFoC,CAIpC;;AAEA,aAAM,IAAI92H,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG+0H,WAAW,CAAC11H,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/Cg1H,yBAAe,CAAC33G,GAAhB,CAAqBy5G,YAAY,CAAE92H,KAAF,CAAjC,EAAwC+0H,WAAW,CAAE/0H,KAAF,CAAnD;AAEA,SAVmC,CAYpC;;;AAEA,aAAM,IAAIA,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG1B,KAAK,CAACy4H,OAAN,CAAc13H,MAAnC,EAA2CW,KAAC,EAA5C,EAAkD;AAEjD,cAAMqzH,WAAW,GAAG/0H,KAAK,CAACy4H,OAAN,CAAe/2H,KAAf,CAApB;AACA,cAAMy1H,UAAU,GAAGT,eAAe,CAACnkH,GAAhB,CAAqBwiH,WAArB,CAAnB;;AAEA,cAAKoC,UAAL,EAAkB;AAEjBA,sBAAU,CAACziH,aAAX,CAA0B;AAAEtO,kBAAI,EAAE,cAAR;AAAwB7F,kBAAI,EAAEw0H;AAA9B,aAA1B;AACA2B,2BAAe,UAAf,CAAwB3B,WAAxB;AAEA;AAED,SA1BmC,CA4BpC;;;AAEA,aAAM,IAAIrzH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG1B,KAAK,CAAC04H,KAAN,CAAY33H,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/C,cAAMqzH,YAAW,GAAG/0H,KAAK,CAAC04H,KAAN,CAAah3H,KAAb,CAApB;;AACA,cAAMy1H,WAAU,GAAGT,eAAe,CAACnkH,GAAhB,CAAqBwiH,YAArB,CAAnB;;AAEA,cAAKoC,WAAL,EAAkB;AAEjBA,uBAAU,CAACziH,aAAX,CAA0B;AAAEtO,kBAAI,EAAE,WAAR;AAAqB7F,kBAAI,EAAEw0H;AAA3B,aAA1B;AAEA;AAED;AAED,OAnQoC,CAqQrC;;;AAEA,UAAM4D,UAAU,GAAG,IAAIn7D,OAAJ,EAAnB;AACA,UAAMo7D,UAAU,GAAG,IAAIp7D,OAAJ,EAAnB;AAEA;;;;;;;AAMA,eAASq7D,sBAAT,CAAiCvpG,MAAjC,EAAyCsnG,OAAzC,EAAkDC,OAAlD,EAA4D;AAE3D8B,kBAAU,CAAC54D,qBAAX,CAAkC62D,OAAO,CAACh4D,WAA1C;AACAg6D,kBAAU,CAAC74D,qBAAX,CAAkC82D,OAAO,CAACj4D,WAA1C;AAEA,YAAMk6D,GAAG,GAAGH,UAAU,CAACppE,UAAX,CAAuBqpE,UAAvB,CAAZ;AAEA,YAAMG,KAAK,GAAGnC,OAAO,CAACn4D,gBAAR,CAAyB/P,QAAvC;AACA,YAAMsqE,KAAK,GAAGnC,OAAO,CAACp4D,gBAAR,CAAyB/P,QAAvC,CAR2D,CAU3D;AACA;AACA;;AACA,YAAM+V,IAAI,GAAGs0D,KAAK,CAAE,EAAF,CAAL,IAAgBA,KAAK,CAAE,EAAF,CAAL,GAAc,CAA9B,CAAb;AACA,YAAMr0D,GAAG,GAAGq0D,KAAK,CAAE,EAAF,CAAL,IAAgBA,KAAK,CAAE,EAAF,CAAL,GAAc,CAA9B,CAAZ;AACA,YAAME,MAAM,GAAG,CAAEF,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAAzC;AACA,YAAMG,SAAS,GAAG,CAAEH,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA5C;AAEA,YAAMI,OAAO,GAAG,CAAEJ,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA1C;AACA,YAAMK,QAAQ,GAAG,CAAEJ,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA3C;AACA,YAAM12G,IAAI,GAAGmiD,IAAI,GAAG00D,OAApB;AACA,YAAM92G,KAAK,GAAGoiD,IAAI,GAAG20D,QAArB,CArB2D,CAuB3D;AACA;;AACA,YAAMC,OAAO,GAAGP,GAAG,IAAK,CAAEK,OAAF,GAAYC,QAAjB,CAAnB;AACA,YAAME,OAAO,GAAGD,OAAO,GAAG,CAAEF,OAA5B,CA1B2D,CA4B3D;;AACAvC,eAAO,CAACh4D,WAAR,CAAoBwF,SAApB,CAA+B90C,MAAM,CAACpT,QAAtC,EAAgDoT,MAAM,CAAClQ,UAAvD,EAAmEkQ,MAAM,CAAC9Q,KAA1E;AACA8Q,cAAM,CAACq5C,UAAP,CAAmB2wD,OAAnB;AACAhqG,cAAM,CAACu5C,UAAP,CAAmBwwD,OAAnB;AACA/pG,cAAM,CAACsvC,WAAP,CAAmBqD,OAAnB,CAA4B3yC,MAAM,CAACpT,QAAnC,EAA6CoT,MAAM,CAAClQ,UAApD,EAAgEkQ,MAAM,CAAC9Q,KAAvE;AACA8Q,cAAM,CAACkvC,kBAAP,CAA0BvL,UAA1B,CAAsC3jC,MAAM,CAACsvC,WAA7C,EAjC2D,CAmC3D;AACA;AACA;;AACA,YAAM26D,KAAK,GAAG90D,IAAI,GAAG40D,OAArB;AACA,YAAMG,IAAI,GAAG90D,GAAG,GAAG20D,OAAnB;AACA,YAAMI,KAAK,GAAGn3G,IAAI,GAAGg3G,OAArB;AACA,YAAMI,MAAM,GAAGr3G,KAAK,IAAKy2G,GAAG,GAAGQ,OAAX,CAApB;AACA,YAAMK,IAAI,GAAGV,MAAM,GAAGv0D,GAAT,GAAe80D,IAAf,GAAsBD,KAAnC;AACA,YAAMK,OAAO,GAAGV,SAAS,GAAGx0D,GAAZ,GAAkB80D,IAAlB,GAAyBD,KAAzC;AAEAjqG,cAAM,CAACmvC,gBAAP,CAAwB+F,eAAxB,CAAyCi1D,KAAzC,EAAgDC,MAAhD,EAAwDC,IAAxD,EAA8DC,OAA9D,EAAuEL,KAAvE,EAA8EC,IAA9E;AAEA;;AAED,eAASK,YAAT,CAAuBvqG,MAAvB,EAA+By3C,MAA/B,EAAwC;AAEvC,YAAKA,MAAM,KAAK,IAAhB,EAAuB;AAEtBz3C,gBAAM,CAACsvC,WAAP,CAAmBhiD,IAAnB,CAAyB0S,MAAM,CAACnN,MAAhC;AAEA,SAJD,MAIO;AAENmN,gBAAM,CAACsvC,WAAP,CAAmBlN,gBAAnB,CAAqCqV,MAAM,CAACnI,WAA5C,EAAyDtvC,MAAM,CAACnN,MAAhE;AAEA;;AAEDmN,cAAM,CAACkvC,kBAAP,CAA0BvL,UAA1B,CAAsC3jC,MAAM,CAACsvC,WAA7C;AAEA;;AAED,WAAKk7D,SAAL,GAAiB,UAAWxqG,MAAX,EAAoB;AAEpCwnG,gBAAQ,CAACryD,IAAT,GAAgBoyD,OAAO,CAACpyD,IAAR,GAAemyD,OAAO,CAACnyD,IAAR,GAAen1C,MAAM,CAACm1C,IAArD;AACAqyD,gBAAQ,CAACpyD,GAAT,GAAemyD,OAAO,CAACnyD,GAAR,GAAckyD,OAAO,CAAClyD,GAAR,GAAcp1C,MAAM,CAACo1C,GAAlD;;AAEA,YAAKqyD,iBAAiB,KAAKD,QAAQ,CAACryD,IAA/B,IAAuCuyD,gBAAgB,KAAKF,QAAQ,CAACpyD,GAA1E,EAAgF;AAE/E;AAEAqgC,iBAAO,CAACszB,iBAAR,CAA2B;AAC1B0B,qBAAS,EAAEjD,QAAQ,CAACryD,IADM;AAE1Bu1D,oBAAQ,EAAElD,QAAQ,CAACpyD;AAFO,WAA3B;AAKAqyD,2BAAiB,GAAGD,QAAQ,CAACryD,IAA7B;AACAuyD,0BAAgB,GAAGF,QAAQ,CAACpyD,GAA5B;AAEA;;AAED,YAAMqC,MAAM,GAAGz3C,MAAM,CAACy3C,MAAtB;AACA,YAAM85C,OAAO,GAAGiW,QAAQ,CAACjW,OAAzB;AAEAgZ,oBAAY,CAAE/C,QAAF,EAAY/vD,MAAZ,CAAZ;;AAEA,aAAM,IAAIrlE,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGm/G,OAAO,CAAC9/G,MAA7B,EAAqCW,KAAC,EAAtC,EAA4C;AAE3Cm4H,sBAAY,CAAEhZ,OAAO,CAAEn/G,KAAF,CAAT,EAAgBqlE,MAAhB,CAAZ;AAEA,SA5BmC,CA8BpC;;;AAEAz3C,cAAM,CAACsvC,WAAP,CAAmBhiD,IAAnB,CAAyBk6G,QAAQ,CAACl4D,WAAlC;AAEA,YAAMp0C,QAAQ,GAAG8E,MAAM,CAAC9E,QAAxB;;AAEA,aAAM,IAAI9oB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnD8oB,kBAAQ,CAAE9oB,KAAF,CAAR,CAAcgoE,iBAAd,CAAiC,IAAjC;AAEA,SAxCmC,CA0CpC;;;AAEA,YAAKm3C,OAAO,CAAC9/G,MAAR,KAAmB,CAAxB,EAA4B;AAE3B83H,gCAAsB,CAAE/B,QAAF,EAAYF,OAAZ,EAAqBC,OAArB,CAAtB;AAEA,SAJD,MAIO;AAEN;AAEAC,kBAAQ,CAACr4D,gBAAT,CAA0B7hD,IAA1B,CAAgCg6G,OAAO,CAACn4D,gBAAxC;AAEA;;AAED,eAAOq4D,QAAP;AAEA,OA1DD,CAjVqC,CA6YrC;;;AAEA,UAAImD,wBAAwB,GAAG,IAA/B;;AAEA,eAAS5gC,gBAAT,CAA2BpqD,IAA3B,EAAiCqqD,KAAjC,EAAyC;AAExCk9B,YAAI,GAAGl9B,KAAK,CAAC4gC,aAAN,CAAqBlF,cAArB,CAAP;;AAEA,YAAKwB,IAAI,KAAK,IAAd,EAAqB;AAEpB,cAAM2D,KAAK,GAAG3D,IAAI,CAAC2D,KAAnB;AACA,cAAMhC,SAAS,GAAGpzB,OAAO,CAACkf,WAAR,CAAoBkU,SAAtC;AAEA5oG,kBAAQ,CAACioG,cAAT,CAAyBW,SAAS,CAAC5G,WAAnC;AAEA,cAAI6I,mBAAmB,GAAG,KAA1B,CAPoB,CASpB;;AAEA,cAAKD,KAAK,CAACp5H,MAAN,KAAiB+1H,QAAQ,CAACjW,OAAT,CAAiB9/G,MAAvC,EAAgD;AAE/C+1H,oBAAQ,CAACjW,OAAT,CAAiB9/G,MAAjB,GAA0B,CAA1B;AACAq5H,+BAAmB,GAAG,IAAtB;AAEA;;AAED,eAAM,IAAI14H,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGy4H,KAAK,CAACp5H,MAA3B,EAAmCW,KAAC,EAApC,EAA0C;AAEzC,gBAAMgS,IAAI,GAAGymH,KAAK,CAAEz4H,KAAF,CAAlB;AACA,gBAAMo3D,QAAQ,GAAGq/D,SAAS,CAAC1R,WAAV,CAAuB/yG,IAAvB,CAAjB;AAEA,gBAAM4b,MAAM,GAAGuxF,OAAO,CAAEn/G,KAAF,CAAtB;AACA4tB,kBAAM,CAACnN,MAAP,CAAc4tC,SAAd,CAAyBr8C,IAAI,CAAC+hH,SAAL,CAAetzG,MAAxC;AACAmN,kBAAM,CAACmvC,gBAAP,CAAwB1O,SAAxB,CAAmCr8C,IAAI,CAAC+qD,gBAAxC;AACAnvC,kBAAM,CAACwpC,QAAP,CAAgB/5C,GAAhB,CAAqB+5C,QAAQ,CAACzsD,CAA9B,EAAiCysD,QAAQ,CAAC11C,CAA1C,EAA6C01C,QAAQ,CAAC9oC,KAAtD,EAA6D8oC,QAAQ,CAAC/oC,MAAtE;;AAEA,gBAAKruB,KAAC,KAAK,CAAX,EAAe;AAEdo1H,sBAAQ,CAAC30G,MAAT,CAAgBvF,IAAhB,CAAsB0S,MAAM,CAACnN,MAA7B;AAEA;;AAED,gBAAKi4G,mBAAmB,KAAK,IAA7B,EAAoC;AAEnCtD,sBAAQ,CAACjW,OAAT,CAAiBz+G,IAAjB,CAAuBktB,MAAvB;AAEA;AAED;AAED,SA9CuC,CAgDxC;;;AAEA,YAAMkpG,YAAY,GAAGzzB,OAAO,CAACyzB,YAA7B;;AAEA,aAAM,IAAI92H,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG+0H,WAAW,CAAC11H,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/C,cAAMy1H,UAAU,GAAGV,WAAW,CAAE/0H,KAAF,CAA9B;AACA,cAAMqzH,WAAW,GAAGyD,YAAY,CAAE92H,KAAF,CAAhC;AAEAy1H,oBAAU,CAACn6G,MAAX,CAAmB+3G,WAAnB,EAAgCz7B,KAAhC,EAAuC07B,cAAvC;AAEA;;AAED,YAAKiF,wBAAL,EAAgCA,wBAAwB,CAAEhrF,IAAF,EAAQqqD,KAAR,CAAxB;AAEhC;;AAED,UAAMm+B,SAAS,GAAG,IAAIx+B,cAAJ,EAAlB;AACAw+B,eAAS,CAACj+B,gBAAV,CAA4BH,gBAA5B;;AAEA,WAAKG,gBAAL,GAAwB,UAAWl8B,QAAX,EAAsB;AAE7C28D,gCAAwB,GAAG38D,QAA3B;AAEA,OAJD;;AAMA,WAAKj+C,OAAL,GAAe,YAAY,CAAE,CAA7B;AAEA;;AAEDpc,UAAM,CAACiiC,MAAP,CAAemxF,YAAY,CAACz9G,SAA5B,EAAuC2xC,eAAe,CAAC3xC,SAAvD;;AAEA,aAASyhH,cAAT,CAAyB7iC,UAAzB,EAAsC;AAErC,eAAS8iC,kBAAT,CAA6BjqC,QAA7B,EAAuC3kB,GAAvC,EAA6C;AAE5C2kB,gBAAQ,CAAC+G,QAAT,CAAkB5rF,KAAlB,CAAwBoR,IAAxB,CAA8B8uD,GAAG,CAACr6C,KAAlC;;AAEA,YAAKq6C,GAAG,CAAC6uD,KAAT,EAAiB;AAEhBlqC,kBAAQ,CAAC6G,OAAT,CAAiB1rF,KAAjB,GAAyBkgE,GAAG,CAACjH,IAA7B;AACA4rB,kBAAQ,CAAC8G,MAAT,CAAgB3rF,KAAhB,GAAwBkgE,GAAG,CAAChH,GAA5B;AAEA,SALD,MAKO,IAAKgH,GAAG,CAACmzC,SAAT,EAAqB;AAE3BxuB,kBAAQ,CAAC4G,UAAT,CAAoBzrF,KAApB,GAA4BkgE,GAAG,CAAC8uD,OAAhC;AAEA;AAED;;AAED,eAASC,uBAAT,CAAkCpqC,QAAlC,EAA4Cn/D,QAA5C,EAAsDu6C,WAAtD,EAAmE/1B,UAAnE,EAA+E3lB,MAA/E,EAAwF;AAEvF,YAAKmB,QAAQ,CAAC4uD,mBAAd,EAAoC;AAEnC46C,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AAEA,SAJD,MAIO,IAAKA,QAAQ,CAACypG,qBAAd,EAAsC;AAE5CD,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACA0pG,gCAAsB,CAAEvqC,QAAF,EAAYn/D,QAAZ,CAAtB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAAC2pG,kBAAd,EAAmC;AAEzCH,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACA4pG,6BAAmB,CAAEzqC,QAAF,EAAYn/D,QAAZ,CAAnB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAAC6pG,mBAAd,EAAoC;AAE1CL,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACA8pG,8BAAoB,CAAE3qC,QAAF,EAAYn/D,QAAZ,CAApB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAAC0tF,sBAAd,EAAuC;AAE7C8b,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,EAAsBu6C,WAAtB,CAArB;;AAEA,cAAKv6C,QAAQ,CAAC+pG,sBAAd,EAAuC;AAEtCC,mCAAuB,CAAE7qC,QAAF,EAAYn/D,QAAZ,EAAsBu6C,WAAtB,CAAvB;AAEA,WAJD,MAIO;AAEN0vD,mCAAuB,CAAE9qC,QAAF,EAAYn/D,QAAZ,EAAsBu6C,WAAtB,CAAvB;AAEA;AAED,SAdM,MAcA,IAAKv6C,QAAQ,CAACkqG,oBAAd,EAAqC;AAE3CV,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACAmqG,+BAAqB,CAAEhrC,QAAF,EAAYn/D,QAAZ,CAArB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAACgzF,mBAAd,EAAoC;AAE1CwW,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACAoqG,8BAAoB,CAAEjrC,QAAF,EAAYn/D,QAAZ,CAApB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAACizF,sBAAd,EAAuC;AAE7CuW,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACAqqG,iCAAuB,CAAElrC,QAAF,EAAYn/D,QAAZ,CAAvB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAACsqG,oBAAd,EAAqC;AAE3Cd,+BAAqB,CAAErqC,QAAF,EAAYn/D,QAAZ,CAArB;AACAuqG,+BAAqB,CAAEprC,QAAF,EAAYn/D,QAAZ,CAArB;AAEA,SALM,MAKA,IAAKA,QAAQ,CAACwqG,mBAAd,EAAoC;AAE1CC,6BAAmB,CAAEtrC,QAAF,EAAYn/D,QAAZ,CAAnB;;AAEA,cAAKA,QAAQ,CAAC0qG,oBAAd,EAAqC;AAEpCC,+BAAmB,CAAExrC,QAAF,EAAYn/D,QAAZ,CAAnB;AAEA;AAED,SAVM,MAUA,IAAKA,QAAQ,CAAC4qG,gBAAd,EAAiC;AAEvCC,+BAAqB,CAAE1rC,QAAF,EAAYn/D,QAAZ,EAAsBwkB,UAAtB,EAAkC3lB,MAAlC,CAArB;AAEA,SAJM,MAIA,IAAKmB,QAAQ,CAAC8qG,gBAAd,EAAiC;AAEvCC,gCAAsB,CAAE5rC,QAAF,EAAYn/D,QAAZ,CAAtB;AAEA,SAJM,MAIA,IAAKA,QAAQ,CAACgrG,gBAAd,EAAiC;AAEvC7rC,kBAAQ,CAACh/D,KAAT,CAAe7lB,KAAf,CAAqBoR,IAArB,CAA2BsU,QAAQ,CAACG,KAApC;AACAg/D,kBAAQ,CAACjW,OAAT,CAAiB5uE,KAAjB,GAAyB0lB,QAAQ,CAACkpD,OAAlC;AAEA,SALM,MAKA,IAAKlpD,QAAQ,CAACsgE,gBAAd,EAAiC;AAEvCtgE,kBAAQ,CAACqgE,kBAAT,GAA8B,KAA9B,CAFuC,CAEF;AAErC;AAED;;AAED,eAASmpC,qBAAT,CAAgCrqC,QAAhC,EAA0Cn/D,QAA1C,EAAoDu6C,WAApD,EAAkE;AAEjE4kB,gBAAQ,CAACjW,OAAT,CAAiB5uE,KAAjB,GAAyB0lB,QAAQ,CAACkpD,OAAlC;;AAEA,YAAKlpD,QAAQ,CAACG,KAAd,EAAsB;AAErBg/D,kBAAQ,CAAC4F,OAAT,CAAiBzqF,KAAjB,CAAuBoR,IAAvB,CAA6BsU,QAAQ,CAACG,KAAtC;AAEA;;AAED,YAAKH,QAAQ,CAAC4rD,QAAd,EAAyB;AAExBuT,kBAAQ,CAACvT,QAAT,CAAkBtxE,KAAlB,CAAwBoR,IAAxB,CAA8BsU,QAAQ,CAAC4rD,QAAvC,EAAkDh+D,cAAlD,CAAkEoS,QAAQ,CAAC6rD,iBAA3E;AAEA;;AAED,YAAK7rD,QAAQ,CAACxiB,GAAd,EAAoB;AAEnB2hF,kBAAQ,CAAC3hF,GAAT,CAAalD,KAAb,GAAqB0lB,QAAQ,CAACxiB,GAA9B;AAEA;;AAED,YAAKwiB,QAAQ,CAACusD,QAAd,EAAyB;AAExB4S,kBAAQ,CAAC5S,QAAT,CAAkBjyE,KAAlB,GAA0B0lB,QAAQ,CAACusD,QAAnC;AAEA;;AAED,YAAKvsD,QAAQ,CAACstD,WAAd,EAA4B;AAE3B6R,kBAAQ,CAAC7R,WAAT,CAAqBhzE,KAArB,GAA6B0lB,QAAQ,CAACstD,WAAtC;AAEA;;AAED,YAAMC,MAAM,GAAGvtD,QAAQ,CAACutD,MAAT,IAAmBhT,WAAlC;;AAEA,YAAKgT,MAAL,EAAc;AAEb4R,kBAAQ,CAAC5R,MAAT,CAAgBjzE,KAAhB,GAAwBizE,MAAxB;AAEA4R,kBAAQ,CAACiG,UAAT,CAAoB9qF,KAApB,GAA4BizE,MAAM,CAAC8mB,aAAP,GAAuB,CAAE,CAAzB,GAA6B,CAAzD;AAEAlV,kBAAQ,CAAC3R,YAAT,CAAsBlzE,KAAtB,GAA8B0lB,QAAQ,CAACwtD,YAAvC;AACA2R,kBAAQ,CAAC1R,eAAT,CAAyBnzE,KAAzB,GAAiC0lB,QAAQ,CAACytD,eAA1C;;AAEA,cAAI4X,WAAW,GAAGiB,UAAU,CAACjlF,GAAX,CAAgBksE,MAAhB,EAAyB0vC,aAA3C;;AAEA,cAAK53B,WAAW,KAAKzmF,SAArB,EAAiC;AAEhCugF,oBAAQ,CAACkG,WAAT,CAAqB/qF,KAArB,GAA6B+qF,WAA7B;AAEA;AAED;;AAED,YAAKrlE,QAAQ,CAACwsD,QAAd,EAAyB;AAExB2S,kBAAQ,CAAC3S,QAAT,CAAkBlyE,KAAlB,GAA0B0lB,QAAQ,CAACwsD,QAAnC;AACA2S,kBAAQ,CAACxQ,iBAAT,CAA2Br0E,KAA3B,GAAmC0lB,QAAQ,CAAC2uD,iBAA5C;AAEA;;AAED,YAAK3uD,QAAQ,CAACysD,KAAd,EAAsB;AAErB0S,kBAAQ,CAAC1S,KAAT,CAAenyE,KAAf,GAAuB0lB,QAAQ,CAACysD,KAAhC;AACA0S,kBAAQ,CAACzS,cAAT,CAAwBpyE,KAAxB,GAAgC0lB,QAAQ,CAAC0sD,cAAzC;AAEA,SAnEgE,CAqEjE;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,YAAIu+C,UAAJ;;AAEA,YAAKjrG,QAAQ,CAACxiB,GAAd,EAAoB;AAEnBytH,oBAAU,GAAGjrG,QAAQ,CAACxiB,GAAtB;AAEA,SAJD,MAIO,IAAKwiB,QAAQ,CAACstD,WAAd,EAA4B;AAElC29C,oBAAU,GAAGjrG,QAAQ,CAACstD,WAAtB;AAEA,SAJM,MAIA,IAAKttD,QAAQ,CAACgtD,eAAd,EAAgC;AAEtCi+C,oBAAU,GAAGjrG,QAAQ,CAACgtD,eAAtB;AAEA,SAJM,MAIA,IAAKhtD,QAAQ,CAAC6sD,SAAd,EAA0B;AAEhCo+C,oBAAU,GAAGjrG,QAAQ,CAAC6sD,SAAtB;AAEA,SAJM,MAIA,IAAK7sD,QAAQ,CAAC2sD,OAAd,EAAwB;AAE9Bs+C,oBAAU,GAAGjrG,QAAQ,CAAC2sD,OAAtB;AAEA,SAJM,MAIA,IAAK3sD,QAAQ,CAACmtD,YAAd,EAA6B;AAEnC89C,oBAAU,GAAGjrG,QAAQ,CAACmtD,YAAtB;AAEA,SAJM,MAIA,IAAKntD,QAAQ,CAACotD,YAAd,EAA6B;AAEnC69C,oBAAU,GAAGjrG,QAAQ,CAACotD,YAAtB;AAEA,SAJM,MAIA,IAAKptD,QAAQ,CAACusD,QAAd,EAAyB;AAE/B0+C,oBAAU,GAAGjrG,QAAQ,CAACusD,QAAtB;AAEA,SAJM,MAIA,IAAKvsD,QAAQ,CAACqtD,WAAd,EAA4B;AAElC49C,oBAAU,GAAGjrG,QAAQ,CAACqtD,WAAtB;AAEA;;AAED,YAAK49C,UAAU,KAAKrsH,SAApB,EAAgC;AAE/B;AACA,cAAKqsH,UAAU,CAAChjE,mBAAhB,EAAsC;AAErCgjE,sBAAU,GAAGA,UAAU,CAACpjE,OAAxB;AAEA;;AAED,cAAKojE,UAAU,CAACpmE,gBAAX,KAAgC,IAArC,EAA4C;AAE3ComE,sBAAU,CAAC7lE,YAAX;AAEA;;AAED+5B,kBAAQ,CAAC6F,WAAT,CAAqB1qF,KAArB,CAA2BoR,IAA3B,CAAiCu/G,UAAU,CAACh6G,MAA5C;AAEA,SAtIgE,CAwIjE;AACA;AACA;;;AAEA,YAAIi6G,WAAJ;;AAEA,YAAKlrG,QAAQ,CAACysD,KAAd,EAAsB;AAErBy+C,qBAAW,GAAGlrG,QAAQ,CAACysD,KAAvB;AAEA,SAJD,MAIO,IAAKzsD,QAAQ,CAACwsD,QAAd,EAAyB;AAE/B0+C,qBAAW,GAAGlrG,QAAQ,CAACwsD,QAAvB;AAEA;;AAED,YAAK0+C,WAAW,KAAKtsH,SAArB,EAAiC;AAEhC;AACA,cAAKssH,WAAW,CAACjjE,mBAAjB,EAAuC;AAEtCijE,uBAAW,GAAGA,WAAW,CAACrjE,OAA1B;AAEA;;AAED,cAAKqjE,WAAW,CAACrmE,gBAAZ,KAAiC,IAAtC,EAA6C;AAE5CqmE,uBAAW,CAAC9lE,YAAZ;AAEA;;AAED+5B,kBAAQ,CAAC8F,YAAT,CAAsB3qF,KAAtB,CAA4BoR,IAA5B,CAAkCw/G,WAAW,CAACj6G,MAA9C;AAEA;AAED;;AAED,eAASw5G,mBAAT,CAA8BtrC,QAA9B,EAAwCn/D,QAAxC,EAAmD;AAElDm/D,gBAAQ,CAAC4F,OAAT,CAAiBzqF,KAAjB,CAAuBoR,IAAvB,CAA6BsU,QAAQ,CAACG,KAAtC;AACAg/D,gBAAQ,CAACjW,OAAT,CAAiB5uE,KAAjB,GAAyB0lB,QAAQ,CAACkpD,OAAlC;AAEA;;AAED,eAASyhD,mBAAT,CAA8BxrC,QAA9B,EAAwCn/D,QAAxC,EAAmD;AAElDm/D,gBAAQ,CAACpR,QAAT,CAAkBzzE,KAAlB,GAA0B0lB,QAAQ,CAAC+tD,QAAnC;AACAoR,gBAAQ,CAACmT,SAAT,CAAmBh4F,KAAnB,GAA2B0lB,QAAQ,CAAC+tD,QAAT,GAAoB/tD,QAAQ,CAACguD,OAAxD;AACAmR,gBAAQ,CAAC7xE,KAAT,CAAehT,KAAf,GAAuB0lB,QAAQ,CAAC1S,KAAhC;AAEA;;AAED,eAASu9G,qBAAT,CAAgC1rC,QAAhC,EAA0Cn/D,QAA1C,EAAoDwkB,UAApD,EAAgE3lB,MAAhE,EAAyE;AAExEsgE,gBAAQ,CAAC4F,OAAT,CAAiBzqF,KAAjB,CAAuBoR,IAAvB,CAA6BsU,QAAQ,CAACG,KAAtC;AACAg/D,gBAAQ,CAACjW,OAAT,CAAiB5uE,KAAjB,GAAyB0lB,QAAQ,CAACkpD,OAAlC;AACAiW,gBAAQ,CAAC74E,IAAT,CAAchM,KAAd,GAAsB0lB,QAAQ,CAAC1Z,IAAT,GAAgBk+B,UAAtC;AACA26C,gBAAQ,CAAC7xE,KAAT,CAAehT,KAAf,GAAuBukB,MAAM,GAAG,GAAhC;;AAEA,YAAKmB,QAAQ,CAACxiB,GAAd,EAAoB;AAEnB2hF,kBAAQ,CAAC3hF,GAAT,CAAalD,KAAb,GAAqB0lB,QAAQ,CAACxiB,GAA9B;AAEA;;AAED,YAAKwiB,QAAQ,CAACusD,QAAd,EAAyB;AAExB4S,kBAAQ,CAAC5S,QAAT,CAAkBjyE,KAAlB,GAA0B0lB,QAAQ,CAACusD,QAAnC;AAEA,SAjBuE,CAmBxE;AACA;AACA;;;AAEA,YAAI0+C,UAAJ;;AAEA,YAAKjrG,QAAQ,CAACxiB,GAAd,EAAoB;AAEnBytH,oBAAU,GAAGjrG,QAAQ,CAACxiB,GAAtB;AAEA,SAJD,MAIO,IAAKwiB,QAAQ,CAACusD,QAAd,EAAyB;AAE/B0+C,oBAAU,GAAGjrG,QAAQ,CAACusD,QAAtB;AAEA;;AAED,YAAK0+C,UAAU,KAAKrsH,SAApB,EAAgC;AAE/B,cAAKqsH,UAAU,CAACpmE,gBAAX,KAAgC,IAArC,EAA4C;AAE3ComE,sBAAU,CAAC7lE,YAAX;AAEA;;AAED+5B,kBAAQ,CAAC6F,WAAT,CAAqB1qF,KAArB,CAA2BoR,IAA3B,CAAiCu/G,UAAU,CAACh6G,MAA5C;AAEA;AAED;;AAED,eAAS85G,sBAAT,CAAiC5rC,QAAjC,EAA2Cn/D,QAA3C,EAAsD;AAErDm/D,gBAAQ,CAAC4F,OAAT,CAAiBzqF,KAAjB,CAAuBoR,IAAvB,CAA6BsU,QAAQ,CAACG,KAAtC;AACAg/D,gBAAQ,CAACjW,OAAT,CAAiB5uE,KAAjB,GAAyB0lB,QAAQ,CAACkpD,OAAlC;AACAiW,gBAAQ,CAACz0C,QAAT,CAAkBpwC,KAAlB,GAA0B0lB,QAAQ,CAAC0qB,QAAnC;;AAEA,YAAK1qB,QAAQ,CAACxiB,GAAd,EAAoB;AAEnB2hF,kBAAQ,CAAC3hF,GAAT,CAAalD,KAAb,GAAqB0lB,QAAQ,CAACxiB,GAA9B;AAEA;;AAED,YAAKwiB,QAAQ,CAACusD,QAAd,EAAyB;AAExB4S,kBAAQ,CAAC5S,QAAT,CAAkBjyE,KAAlB,GAA0B0lB,QAAQ,CAACusD,QAAnC;AAEA,SAhBoD,CAkBrD;AACA;AACA;;;AAEA,YAAI0+C,UAAJ;;AAEA,YAAKjrG,QAAQ,CAACxiB,GAAd,EAAoB;AAEnBytH,oBAAU,GAAGjrG,QAAQ,CAACxiB,GAAtB;AAEA,SAJD,MAIO,IAAKwiB,QAAQ,CAACusD,QAAd,EAAyB;AAE/B0+C,oBAAU,GAAGjrG,QAAQ,CAACusD,QAAtB;AAEA;;AAED,YAAK0+C,UAAU,KAAKrsH,SAApB,EAAgC;AAE/B,cAAKqsH,UAAU,CAACpmE,gBAAX,KAAgC,IAArC,EAA4C;AAE3ComE,sBAAU,CAAC7lE,YAAX;AAEA;;AAED+5B,kBAAQ,CAAC6F,WAAT,CAAqB1qF,KAArB,CAA2BoR,IAA3B,CAAiCu/G,UAAU,CAACh6G,MAA5C;AAEA;AAED;;AAED,eAASy4G,sBAAT,CAAiCvqC,QAAjC,EAA2Cn/D,QAA3C,EAAsD;AAErD,YAAKA,QAAQ,CAACqtD,WAAd,EAA4B;AAE3B8R,kBAAQ,CAAC9R,WAAT,CAAqB/yE,KAArB,GAA6B0lB,QAAQ,CAACqtD,WAAtC;AAEA;AAED;;AAED,eAASy8C,oBAAT,CAA+B3qC,QAA/B,EAAyCn/D,QAAzC,EAAoD;AAEnDm/D,gBAAQ,CAACrT,QAAT,CAAkBxxE,KAAlB,CAAwBoR,IAAxB,CAA8BsU,QAAQ,CAAC8rD,QAAvC;AACAqT,gBAAQ,CAACpT,SAAT,CAAmBzxE,KAAnB,GAA2ByO,IAAI,CAACmE,GAAL,CAAU8S,QAAQ,CAAC+rD,SAAnB,EAA8B,IAA9B,CAA3B,CAHmD,CAGc;;AAEjE,YAAK/rD,QAAQ,CAACqtD,WAAd,EAA4B;AAE3B8R,kBAAQ,CAAC9R,WAAT,CAAqB/yE,KAArB,GAA6B0lB,QAAQ,CAACqtD,WAAtC;AAEA;;AAED,YAAKrtD,QAAQ,CAAC2sD,OAAd,EAAwB;AAEvBwS,kBAAQ,CAACxS,OAAT,CAAiBryE,KAAjB,GAAyB0lB,QAAQ,CAAC2sD,OAAlC;AACAwS,kBAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,GAA2B0lB,QAAQ,CAAC4sD,SAApC;AACA,cAAK5sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,YAAK0lB,QAAQ,CAAC6sD,SAAd,EAA0B;AAEzBsS,kBAAQ,CAACtS,SAAT,CAAmBvyE,KAAnB,GAA2B0lB,QAAQ,CAAC6sD,SAApC;AACAsS,kBAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2BoR,IAA3B,CAAiCsU,QAAQ,CAAC+sD,WAA1C;AACA,cAAK/sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2ByjD,MAA3B;AAElC;;AAED,YAAK/9B,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;AAED;;AAED,eAAS08C,mBAAT,CAA8BzqC,QAA9B,EAAwCn/D,QAAxC,EAAmD;AAElD,YAAKA,QAAQ,CAAC4tD,WAAd,EAA4B;AAE3BuR,kBAAQ,CAACvR,WAAT,CAAqBtzE,KAArB,GAA6B0lB,QAAQ,CAAC4tD,WAAtC;AAEA;;AAED,YAAK5tD,QAAQ,CAACqtD,WAAd,EAA4B;AAE3B8R,kBAAQ,CAAC9R,WAAT,CAAqB/yE,KAArB,GAA6B0lB,QAAQ,CAACqtD,WAAtC;AAEA;;AAED,YAAKrtD,QAAQ,CAAC2sD,OAAd,EAAwB;AAEvBwS,kBAAQ,CAACxS,OAAT,CAAiBryE,KAAjB,GAAyB0lB,QAAQ,CAAC2sD,OAAlC;AACAwS,kBAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,GAA2B0lB,QAAQ,CAAC4sD,SAApC;AACA,cAAK5sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,YAAK0lB,QAAQ,CAAC6sD,SAAd,EAA0B;AAEzBsS,kBAAQ,CAACtS,SAAT,CAAmBvyE,KAAnB,GAA2B0lB,QAAQ,CAAC6sD,SAApC;AACAsS,kBAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2BoR,IAA3B,CAAiCsU,QAAQ,CAAC+sD,WAA1C;AACA,cAAK/sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2ByjD,MAA3B;AAElC;;AAED,YAAK/9B,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;AAED;;AAED,eAAS+8C,uBAAT,CAAkC9qC,QAAlC,EAA4Cn/D,QAA5C,EAAsDu6C,WAAtD,EAAoE;AAEnE4kB,gBAAQ,CAAC1T,SAAT,CAAmBnxE,KAAnB,GAA2B0lB,QAAQ,CAACyrD,SAApC;AACA0T,gBAAQ,CAACzT,SAAT,CAAmBpxE,KAAnB,GAA2B0lB,QAAQ,CAAC0rD,SAApC;;AAEA,YAAK1rD,QAAQ,CAACmtD,YAAd,EAA6B;AAE5BgS,kBAAQ,CAAChS,YAAT,CAAsB7yE,KAAtB,GAA8B0lB,QAAQ,CAACmtD,YAAvC;AAEA;;AAED,YAAKntD,QAAQ,CAACotD,YAAd,EAA6B;AAE5B+R,kBAAQ,CAAC/R,YAAT,CAAsB9yE,KAAtB,GAA8B0lB,QAAQ,CAACotD,YAAvC;AAEA;;AAED,YAAKptD,QAAQ,CAACqtD,WAAd,EAA4B;AAE3B8R,kBAAQ,CAAC9R,WAAT,CAAqB/yE,KAArB,GAA6B0lB,QAAQ,CAACqtD,WAAtC;AAEA;;AAED,YAAKrtD,QAAQ,CAAC2sD,OAAd,EAAwB;AAEvBwS,kBAAQ,CAACxS,OAAT,CAAiBryE,KAAjB,GAAyB0lB,QAAQ,CAAC2sD,OAAlC;AACAwS,kBAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,GAA2B0lB,QAAQ,CAAC4sD,SAApC;AACA,cAAK5sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,YAAK0lB,QAAQ,CAAC6sD,SAAd,EAA0B;AAEzBsS,kBAAQ,CAACtS,SAAT,CAAmBvyE,KAAnB,GAA2B0lB,QAAQ,CAAC6sD,SAApC;AACAsS,kBAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2BoR,IAA3B,CAAiCsU,QAAQ,CAAC+sD,WAA1C;AACA,cAAK/sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2ByjD,MAA3B;AAElC;;AAED,YAAK/9B,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;;AAED,YAAKltD,QAAQ,CAACutD,MAAT,IAAmBhT,WAAxB,EAAsC;AAErC;AACA4kB,kBAAQ,CAACxR,eAAT,CAAyBrzE,KAAzB,GAAiC0lB,QAAQ,CAAC2tD,eAA1C;AAEA;AAED;;AAED,eAASq8C,uBAAT,CAAkC7qC,QAAlC,EAA4Cn/D,QAA5C,EAAsDu6C,WAAtD,EAAoE;AAEnE0vD,+BAAuB,CAAE9qC,QAAF,EAAYn/D,QAAZ,EAAsBu6C,WAAtB,CAAvB;AAEA4kB,gBAAQ,CAAC3R,YAAT,CAAsBlzE,KAAtB,GAA8B0lB,QAAQ,CAACwtD,YAAvC,CAJmE,CAId;;AAErD2R,gBAAQ,CAACnT,SAAT,CAAmB1xE,KAAnB,GAA2B0lB,QAAQ,CAACgsD,SAApC;AACAmT,gBAAQ,CAAClT,kBAAT,CAA4B3xE,KAA5B,GAAoC0lB,QAAQ,CAACisD,kBAA7C;AACA,YAAKjsD,QAAQ,CAAC2rD,KAAd,EAAsBwT,QAAQ,CAACxT,KAAT,CAAerxE,KAAf,CAAqBoR,IAArB,CAA2BsU,QAAQ,CAAC2rD,KAApC;;AAEtB,YAAK3rD,QAAQ,CAACksD,YAAd,EAA6B;AAE5BiT,kBAAQ,CAACjT,YAAT,CAAsB5xE,KAAtB,GAA8B0lB,QAAQ,CAACksD,YAAvC;AAEA;;AAED,YAAKlsD,QAAQ,CAACmsD,qBAAd,EAAsC;AAErCgT,kBAAQ,CAAChT,qBAAT,CAA+B7xE,KAA/B,GAAuC0lB,QAAQ,CAACmsD,qBAAhD;AAEA;;AAED,YAAKnsD,QAAQ,CAACosD,kBAAd,EAAmC;AAElC+S,kBAAQ,CAAC9S,oBAAT,CAA8B/xE,KAA9B,CAAoCoR,IAApC,CAA0CsU,QAAQ,CAACqsD,oBAAnD;AACA8S,kBAAQ,CAAC/S,kBAAT,CAA4B9xE,KAA5B,GAAoC0lB,QAAQ,CAACosD,kBAA7C;;AAEA,cAAKpsD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkC;AAEjCkxC,oBAAQ,CAAC9S,oBAAT,CAA8B/xE,KAA9B,CAAoCyjD,MAApC;AAEA;AAED;;AAEDohC,gBAAQ,CAAC6T,YAAT,CAAsB14F,KAAtB,GAA8B0lB,QAAQ,CAACgzE,YAAvC;;AAEA,YAAKhzE,QAAQ,CAACizE,eAAd,EAAgC;AAE/B9T,kBAAQ,CAAC8T,eAAT,CAAyB34F,KAAzB,GAAiC0lB,QAAQ,CAACizE,eAA1C;AAEA;AAED;;AAED,eAASk3B,qBAAT,CAAgChrC,QAAhC,EAA0Cn/D,QAA1C,EAAqD;AAEpD,YAAKA,QAAQ,CAACssD,MAAd,EAAuB;AAEtB6S,kBAAQ,CAAC7S,MAAT,CAAgBhyE,KAAhB,GAAwB0lB,QAAQ,CAACssD,MAAjC;AAEA;;AAED,YAAKtsD,QAAQ,CAAC2sD,OAAd,EAAwB;AAEvBwS,kBAAQ,CAACxS,OAAT,CAAiBryE,KAAjB,GAAyB0lB,QAAQ,CAAC2sD,OAAlC;AACAwS,kBAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,GAA2B0lB,QAAQ,CAAC4sD,SAApC;AACA,cAAK5sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,YAAK0lB,QAAQ,CAAC6sD,SAAd,EAA0B;AAEzBsS,kBAAQ,CAACtS,SAAT,CAAmBvyE,KAAnB,GAA2B0lB,QAAQ,CAAC6sD,SAApC;AACAsS,kBAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2BoR,IAA3B,CAAiCsU,QAAQ,CAAC+sD,WAA1C;AACA,cAAK/sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2ByjD,MAA3B;AAElC;;AAED,YAAK/9B,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;AAED;;AAED,eAASk9C,oBAAT,CAA+BjrC,QAA/B,EAAyCn/D,QAAzC,EAAoD;AAEnD,YAAKA,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;AAED;;AAED,eAASm9C,uBAAT,CAAkClrC,QAAlC,EAA4Cn/D,QAA5C,EAAuD;AAEtD,YAAKA,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;;AAEDiS,gBAAQ,CAACwT,iBAAT,CAA2Br4F,KAA3B,CAAiCoR,IAAjC,CAAuCsU,QAAQ,CAAC2yE,iBAAhD;AACAxT,gBAAQ,CAACyT,YAAT,CAAsBt4F,KAAtB,GAA8B0lB,QAAQ,CAAC4yE,YAAvC;AACAzT,gBAAQ,CAAC0T,WAAT,CAAqBv4F,KAArB,GAA6B0lB,QAAQ,CAAC6yE,WAAtC;AAEA;;AAED,eAAS03B,qBAAT,CAAgCprC,QAAhC,EAA0Cn/D,QAA1C,EAAqD;AAEpD,YAAKA,QAAQ,CAAC2sD,OAAd,EAAwB;AAEvBwS,kBAAQ,CAACxS,OAAT,CAAiBryE,KAAjB,GAAyB0lB,QAAQ,CAAC2sD,OAAlC;AACAwS,kBAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,GAA2B0lB,QAAQ,CAAC4sD,SAApC;AACA,cAAK5sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACvS,SAAT,CAAmBtyE,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,YAAK0lB,QAAQ,CAAC6sD,SAAd,EAA0B;AAEzBsS,kBAAQ,CAACtS,SAAT,CAAmBvyE,KAAnB,GAA2B0lB,QAAQ,CAAC6sD,SAApC;AACAsS,kBAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2BoR,IAA3B,CAAiCsU,QAAQ,CAAC+sD,WAA1C;AACA,cAAK/sD,QAAQ,CAACgpD,IAAT,KAAkB/6B,QAAvB,EAAkCkxC,QAAQ,CAACpS,WAAT,CAAqBzyE,KAArB,CAA2ByjD,MAA3B;AAElC;;AAED,YAAK/9B,QAAQ,CAACgtD,eAAd,EAAgC;AAE/BmS,kBAAQ,CAACnS,eAAT,CAAyB1yE,KAAzB,GAAiC0lB,QAAQ,CAACgtD,eAA1C;AACAmS,kBAAQ,CAAClS,iBAAT,CAA2B3yE,KAA3B,GAAmC0lB,QAAQ,CAACitD,iBAA5C;AACAkS,kBAAQ,CAACjS,gBAAT,CAA0B5yE,KAA1B,GAAkC0lB,QAAQ,CAACktD,gBAA3C;AAEA;AAED;;AAED,aAAO;AACNk8C,0BAAkB,EAAEA,kBADd;AAENG,+BAAuB,EAAEA;AAFnB,OAAP;AAKA;;AAED,aAAS4B,aAAT,CAAwBpxD,UAAxB,EAAqC;AAEpCA,gBAAU,GAAGA,UAAU,IAAI,EAA3B;;AAEA,UAAM3W,OAAO,GAAG2W,UAAU,CAACv4B,MAAX,KAAsB5iC,SAAtB,GAAkCm7D,UAAU,CAACv4B,MAA7C,GAAsD5+B,QAAQ,CAACK,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAAtE;AAAA,UACCmoH,QAAQ,GAAGrxD,UAAU,CAACtW,OAAX,KAAuB7kD,SAAvB,GAAmCm7D,UAAU,CAACtW,OAA9C,GAAwD,IADpE;AAAA,UAGC4nE,MAAM,GAAGtxD,UAAU,CAACvb,KAAX,KAAqB5/C,SAArB,GAAiCm7D,UAAU,CAACvb,KAA5C,GAAoD,KAH9D;AAAA,UAIC8sE,MAAM,GAAGvxD,UAAU,CAACn9B,KAAX,KAAqBh+B,SAArB,GAAiCm7D,UAAU,CAACn9B,KAA5C,GAAoD,IAJ9D;AAAA,UAKC2uF,QAAQ,GAAGxxD,UAAU,CAAC0oB,OAAX,KAAuB7jF,SAAvB,GAAmCm7D,UAAU,CAAC0oB,OAA9C,GAAwD,IALpE;AAAA,UAMC+oC,UAAU,GAAGzxD,UAAU,CAAC/6C,SAAX,KAAyBpgB,SAAzB,GAAqCm7D,UAAU,CAAC/6C,SAAhD,GAA4D,KAN1E;AAAA,UAOCysG,mBAAmB,GAAG1xD,UAAU,CAACiR,kBAAX,KAAkCpsE,SAAlC,GAA8Cm7D,UAAU,CAACiR,kBAAzD,GAA8E,IAPrG;AAAA,UAQC0gD,sBAAsB,GAAG3xD,UAAU,CAAC4xD,qBAAX,KAAqC/sH,SAArC,GAAiDm7D,UAAU,CAAC4xD,qBAA5D,GAAoF,KAR9G;AAAA,UASCC,gBAAgB,GAAG7xD,UAAU,CAAC8xD,eAAX,KAA+BjtH,SAA/B,GAA2Cm7D,UAAU,CAAC8xD,eAAtD,GAAwE,SAT5F;AAAA,UAUCC,6BAA6B,GAAG/xD,UAAU,CAACgyD,4BAAX,KAA4CntH,SAA5C,GAAwDm7D,UAAU,CAACgyD,4BAAnE,GAAkG,KAVnI;;AAYA,UAAIC,iBAAiB,GAAG,IAAxB;AACA,UAAIC,kBAAkB,GAAG,IAAzB,CAjBoC,CAmBpC;;AAEA,WAAK5jH,UAAL,GAAkB+6C,OAAlB,CArBoC,CAuBpC;;AACA,WAAK0nD,KAAL,GAAa;AAEZ;;;;AAIAC,yBAAiB,EAAE;AANP,OAAb,CAxBoC,CAiCpC;;AAEA,WAAK9W,SAAL,GAAiB,IAAjB;AACA,WAAKC,cAAL,GAAsB,IAAtB;AACA,WAAKC,cAAL,GAAsB,IAAtB;AACA,WAAKC,gBAAL,GAAwB,IAAxB,CAtCoC,CAwCpC;;AAEA,WAAK83B,WAAL,GAAmB,IAAnB,CA1CoC,CA4CpC;;AAEA,WAAK7hD,cAAL,GAAsB,EAAtB;AACA,WAAKmwB,oBAAL,GAA4B,KAA5B,CA/CoC,CAiDpC;;AAEA,WAAKtzB,WAAL,GAAmB,GAAnB,CAnDoC,CAmDZ;;AACxB,WAAKmjC,cAAL,GAAsBrzD,cAAtB,CApDoC,CAsDpC;;AAEA,WAAK+yD,uBAAL,GAA+B,KAA/B,CAxDoC,CA0DpC;;AAEA,WAAKzV,WAAL,GAAmBhkD,aAAnB;AACA,WAAK67E,mBAAL,GAA2B,GAA3B,CA7DoC,CA+DpC;;AAEA,WAAKve,eAAL,GAAuB,CAAvB;AACA,WAAKC,eAAL,GAAuB,CAAvB,CAlEoC,CAoEpC;;AAEA,UAAMue,KAAK,GAAG,IAAd;;AAEA,UAAIC,cAAc,GAAG,KAArB,CAxEoC,CA0EpC;;AAEA,UAAIC,YAAY,GAAG,IAAnB;AAEA,UAAIC,sBAAsB,GAAG,CAA7B;AACA,UAAIC,yBAAyB,GAAG,CAAhC;AACA,UAAIC,oBAAoB,GAAG,IAA3B;AACA,UAAIC,mBAAmB,GAAG,IAA1B;;AACA,UAAIC,kBAAkB,GAAG,CAAE,CAA3B;;AAEA,UAAIC,cAAc,GAAG,IAArB;AACA,UAAIC,mBAAmB,GAAG,IAA1B;;AAEA,UAAMC,gBAAgB,GAAG,IAAIhnE,OAAJ,EAAzB;;AACA,UAAMinE,eAAe,GAAG,IAAIjnE,OAAJ,EAAxB;;AACA,UAAIknE,mBAAmB,GAAG,IAA1B,CAzFoC,CA2FpC;;AAEA,UAAIC,MAAM,GAAG7pE,OAAO,CAACtkC,KAArB;AACA,UAAIouG,OAAO,GAAG9pE,OAAO,CAACvkC,MAAtB;AAEA,UAAIsuG,WAAW,GAAG,CAAlB;AACA,UAAIC,WAAW,GAAG,IAAlB;AACA,UAAIC,gBAAgB,GAAG,IAAvB;;AAEA,UAAM3Z,SAAS,GAAG,IAAI5tD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBmnE,MAAnB,EAA2BC,OAA3B,CAAlB;;AACA,UAAMI,QAAQ,GAAG,IAAIxnE,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBmnE,MAAnB,EAA2BC,OAA3B,CAAjB;;AACA,UAAIK,YAAY,GAAG,KAAnB,CAtGoC,CAwGpC;;AAEA,UAAMha,QAAQ,GAAG,IAAIpwB,OAAJ,EAAjB,CA1GoC,CA4GpC;;;AAEA,UAAMqqC,SAAS,GAAG,IAAInzB,aAAJ,EAAlB;;AACA,UAAIozB,gBAAgB,GAAG,KAAvB;AACA,UAAIC,qBAAqB,GAAG,KAA5B,CAhHoC,CAkHpC;;AAEA,UAAMC,iBAAiB,GAAG,IAAIz+D,OAAJ,EAA1B;;AAEA,UAAM0+D,QAAQ,GAAG,IAAIthE,OAAJ,EAAjB;;AAEA,UAAMuhE,WAAW,GAAG;AAAE9uG,kBAAU,EAAE,IAAd;AAAoBy7C,WAAG,EAAE,IAAzB;AAA+BD,mBAAW,EAAE,IAA5C;AAAkDE,wBAAgB,EAAE,IAApE;AAA0EK,eAAO,EAAE;AAAnF,OAApB;;AAEA,eAASgzD,mBAAT,GAA+B;AAE9B,eAAOrB,oBAAoB,KAAK,IAAzB,GAAgCU,WAAhC,GAA8C,CAArD;AAEA,OA9HmC,CAgIpC;;;AAEA,UAAInR,GAAG,GAAGoP,QAAV;;AAEA,eAAS1nE,UAAT,CAAqBqqE,YAArB,EAAmCC,iBAAnC,EAAuD;AAEtD,aAAM,IAAIx9H,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGu9H,YAAY,CAACl+H,MAAlC,EAA0CW,KAAC,EAA3C,EAAiD;AAEhD,cAAMy9H,WAAW,GAAGF,YAAY,CAAEv9H,KAAF,CAAhC;;AACA,cAAMizD,OAAO,GAAGL,OAAO,CAACM,UAAR,CAAoBuqE,WAApB,EAAiCD,iBAAjC,CAAhB;;AACA,cAAKvqE,OAAO,KAAK,IAAjB,EAAwB,OAAOA,OAAP;AAExB;;AAED,eAAO,IAAP;AAEA;;AAED,UAAI;AAEH,YAAMuqE,iBAAiB,GAAG;AACzBxvE,eAAK,EAAE6sE,MADkB;AAEzBzuF,eAAK,EAAE0uF,MAFkB;AAGzB7oC,iBAAO,EAAE8oC,QAHgB;AAIzBvsG,mBAAS,EAAEwsG,UAJc;AAKzBxgD,4BAAkB,EAAEygD,mBALK;AAMzBE,+BAAqB,EAAED,sBANE;AAOzBG,yBAAe,EAAED,gBAPQ;AAQzBG,sCAA4B,EAAED;AARL,SAA1B,CAFG,CAaH;;AAEA1oE,eAAO,CAACr7C,gBAAR,CAA0B,kBAA1B,EAA8CmmH,aAA9C,EAA6D,KAA7D;;AACA9qE,eAAO,CAACr7C,gBAAR,CAA0B,sBAA1B,EAAkDomH,gBAAlD,EAAoE,KAApE;;AAEA,YAAKnS,GAAG,KAAK,IAAb,EAAoB;AAEnB,cAAM+R,YAAY,GAAG,CAAE,QAAF,EAAY,OAAZ,EAAqB,oBAArB,CAArB;;AAEA,cAAK3B,KAAK,CAACgC,gBAAN,KAA2B,IAAhC,EAAuC;AAEtCL,wBAAY,CAAC1mG,KAAb;AAEA;;AAED20F,aAAG,GAAGt4D,UAAU,CAAEqqE,YAAF,EAAgBC,iBAAhB,CAAhB;;AAEA,cAAKhS,GAAG,KAAK,IAAb,EAAoB;AAEnB,gBAAKt4D,UAAU,CAAEqqE,YAAF,CAAf,EAAkC;AAEjC,oBAAM,IAAIhgI,KAAJ,CAAW,6DAAX,CAAN;AAEA,aAJD,MAIO;AAEN,oBAAM,IAAIA,KAAJ,CAAW,+BAAX,CAAN;AAEA;AAED;AAED,SA5CE,CA8CH;;;AAEA,YAAKiuH,GAAG,CAAC5iB,wBAAJ,KAAiCx6F,SAAtC,EAAkD;AAEjDo9G,aAAG,CAAC5iB,wBAAJ,GAA+B,YAAY;AAE1C,mBAAO;AAAE,0BAAY,CAAd;AAAiB,0BAAY,CAA7B;AAAgC,2BAAa;AAA7C,aAAP;AAEA,WAJD;AAMA;AAED,OA1DD,CA0DE,OAAQ1nG,KAAR,EAAgB;AAEjBC,eAAO,CAACD,KAAR,CAAe,0BAA0BA,KAAK,CAACyD,OAA/C;AACA,cAAMzD,KAAN;AAEA;;AAED,UAAIouF,UAAJ,EAAgB4I,YAAhB,EAA8B38E,KAA9B,EAAqC0sF,IAArC;AACA,UAAInS,UAAJ,EAAgB/gC,QAAhB,EAA0Bjb,UAA1B,EAAsC6uB,UAAtC,EAAkDg6B,OAAlD;AACA,UAAIk7B,YAAJ,EAAkBj1D,SAAlB,EAA6Bk1D,WAA7B,EAA0Cxb,YAA1C;AAEA,UAAI/zF,UAAJ,EAAgBwvG,YAAhB,EAA8BC,cAA9B,EAA8CC,qBAA9C;AAEA,UAAIxS,KAAJ,EAAWjnB,aAAX;;AAEA,eAAS05B,aAAT,GAAyB;AAExB5uC,kBAAU,GAAG,IAAIgc,eAAJ,CAAqBkgB,GAArB,CAAb;AAEAtzB,oBAAY,GAAG,IAAIqQ,iBAAJ,CAAuBijB,GAAvB,EAA4Bl8B,UAA5B,EAAwC/lB,UAAxC,CAAf;;AAEA,YAAK2uB,YAAY,CAACC,QAAb,KAA0B,KAA/B,EAAuC;AAEtC7I,oBAAU,CAACz+E,GAAX,CAAgB,qBAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,mBAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,wBAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,+BAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,0BAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,wBAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,yBAAhB;AACAy+E,oBAAU,CAACz+E,GAAX,CAAgB,wBAAhB;AAEA;;AAEDy+E,kBAAU,CAACz+E,GAAX,CAAgB,0BAAhB;AAEA46G,aAAK,GAAG,IAAI6F,UAAJ,CAAgB9F,GAAhB,EAAqBl8B,UAArB,EAAiC4I,YAAjC,CAAR;AAEA38E,aAAK,GAAG,IAAI8qG,UAAJ,CAAgBmF,GAAhB,EAAqBl8B,UAArB,EAAiC4I,YAAjC,CAAR;AACA38E,aAAK,CAAC27C,OAAN,CAAeqlE,eAAe,CAACrhH,IAAhB,CAAsB4hH,QAAtB,EAAiC1/G,cAAjC,CAAiDu/G,WAAjD,EAA+Dx2G,KAA/D,EAAf;AACA5K,aAAK,CAAC67C,QAAN,CAAgBklE,gBAAgB,CAACphH,IAAjB,CAAuBgoG,SAAvB,EAAmC9lG,cAAnC,CAAmDu/G,WAAnD,EAAiEx2G,KAAjE,EAAhB;AAEA8hF,YAAI,GAAG,IAAIsE,SAAJ,CAAeif,GAAf,CAAP;AACA11B,kBAAU,GAAG,IAAImoB,eAAJ,EAAb;AACAlpD,gBAAQ,GAAG,IAAIw2D,aAAJ,CAAmBC,GAAnB,EAAwBl8B,UAAxB,EAAoC/zE,KAApC,EAA2Cu6E,UAA3C,EAAuDoC,YAAvD,EAAqEuzB,KAArE,EAA4ExjB,IAA5E,CAAX;AACAnuD,kBAAU,GAAG,IAAIk+C,eAAJ,CAAqBwzB,GAArB,EAA0BtzB,YAA1B,CAAb;AACAsM,qBAAa,GAAG,IAAIJ,kBAAJ,CAAwBonB,GAAxB,EAA6Bl8B,UAA7B,EAAyCx1C,UAAzC,EAAqDo+C,YAArD,CAAhB;AACAvvB,kBAAU,GAAG,IAAI8iC,eAAJ,CAAqB+f,GAArB,EAA0B1xE,UAA1B,EAAsCmuD,IAAtC,EAA4CzD,aAA5C,CAAb;AACA7B,eAAO,GAAG,IAAI+K,YAAJ,CAAkB8d,GAAlB,EAAuB7iD,UAAvB,EAAmC7uB,UAAnC,EAA+CmuD,IAA/C,CAAV;AACA81B,oBAAY,GAAG,IAAI/wB,iBAAJ,CAAuBwe,GAAvB,CAAf;AACAqS,oBAAY,GAAG,IAAItiB,aAAJ,CAAmBqgB,KAAnB,EAA0BtsC,UAA1B,EAAsC4I,YAAtC,EAAoDsM,aAApD,CAAf;AACA57B,iBAAS,GAAG,IAAI+vD,cAAJ,CAAoB7iC,UAApB,CAAZ;AACAgoC,mBAAW,GAAG,IAAI9e,gBAAJ,CAAsBlpB,UAAtB,CAAd;AACAwsB,oBAAY,GAAG,IAAID,iBAAJ,EAAf;AAEA9zF,kBAAU,GAAG,IAAIm0E,eAAJ,CAAqBk5B,KAArB,EAA4BrgH,KAA5B,EAAmConF,OAAnC,EAA4Cs4B,mBAA5C,CAAb;AAEA+C,sBAAc,GAAG,IAAIh2B,mBAAJ,CAAyBwjB,GAAzB,EAA8Bl8B,UAA9B,EAA0C2Y,IAA1C,EAAgD/P,YAAhD,CAAjB;AACA+lC,6BAAqB,GAAG,IAAI5xB,0BAAJ,CAAgCmf,GAAhC,EAAqCl8B,UAArC,EAAiD2Y,IAAjD,EAAuD/P,YAAvD,CAAxB;AAEA+P,YAAI,CAAC2E,QAAL,GAAgBixB,YAAY,CAACjxB,QAA7B;AAEAgvB,aAAK,CAAC1jC,YAAN,GAAqBA,YAArB;AACA0jC,aAAK,CAACtsC,UAAN,GAAmBA,UAAnB;AACAssC,aAAK,CAAC9lC,UAAN,GAAmBA,UAAnB;AACA8lC,aAAK,CAACkC,WAAN,GAAoBA,WAApB;AACAlC,aAAK,CAACrgH,KAAN,GAAcA,KAAd;AACAqgH,aAAK,CAAC3zB,IAAN,GAAaA,IAAb;AAEA;;AAEDi2B,mBAAa,GAnRuB,CAqRpC;;AAEA,UAAMtsC,EAAE,GAAG,IAAI+iC,YAAJ,CAAkBiH,KAAlB,EAAyBpQ,GAAzB,CAAX;AAEA,WAAK55B,EAAL,GAAUA,EAAV,CAzRoC,CA2RpC;;AAEA,UAAM8rB,SAAS,GAAG,IAAIkF,cAAJ,CAAoBgZ,KAApB,EAA2Bj5B,OAA3B,EAAoCzK,YAAY,CAACiR,cAAjD,CAAlB;AAEA,WAAKuU,SAAL,GAAiBA,SAAjB,CA/RoC,CAiSpC;;AAEA,WAAKxqD,UAAL,GAAkB,YAAY;AAE7B,eAAOs4D,GAAP;AAEA,OAJD;;AAMA,WAAK6K,oBAAL,GAA4B,YAAY;AAEvC,eAAO7K,GAAG,CAAC6K,oBAAJ,EAAP;AAEA,OAJD;;AAMA,WAAK8H,gBAAL,GAAwB,YAAY;AAEnC,YAAM75B,SAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,oBAAhB,CAAlB;AACA,YAAKyzF,SAAL,EAAiBA,SAAS,CAAC85B,WAAV;AAEjB,OALD;;AAOA,WAAKC,mBAAL,GAA2B,YAAY;AAEtC,YAAM/5B,SAAS,GAAGhV,UAAU,CAACz+E,GAAX,CAAgB,oBAAhB,CAAlB;AACA,YAAKyzF,SAAL,EAAiBA,SAAS,CAACg6B,cAAV;AAEjB,OALD;;AAOA,WAAKC,aAAL,GAAqB,YAAY;AAEhC,eAAO5B,WAAP;AAEA,OAJD;;AAMA,WAAK6B,aAAL,GAAqB,UAAW10H,KAAX,EAAmB;AAEvC,YAAKA,KAAK,KAAKsE,SAAf,EAA2B;AAE3BuuH,mBAAW,GAAG7yH,KAAd;AAEA,aAAK2kB,OAAL,CAAcguG,MAAd,EAAsBC,OAAtB,EAA+B,KAA/B;AAEA,OARD;;AAUA,WAAKrwD,OAAL,GAAe,UAAWxiE,MAAX,EAAoB;AAElC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,iEAAd;AAEAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAOniD,MAAM,CAACwT,GAAP,CAAYo/G,MAAZ,EAAoBC,OAApB,CAAP;AAEA,OAZD;;AAcA,WAAKjuG,OAAL,GAAe,UAAWH,KAAX,EAAkBD,MAAlB,EAA0BowG,WAA1B,EAAwC;AAEtD,YAAK7sC,EAAE,CAAC2jC,YAAR,EAAuB;AAEtBp0H,iBAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA;AAEA;;AAED2kH,cAAM,GAAGnuG,KAAT;AACAouG,eAAO,GAAGruG,MAAV;AAEAukC,eAAO,CAACtkC,KAAR,GAAgB/V,IAAI,CAAC4N,KAAL,CAAYmI,KAAK,GAAGquG,WAApB,CAAhB;AACA/pE,eAAO,CAACvkC,MAAR,GAAiB9V,IAAI,CAAC4N,KAAL,CAAYkI,MAAM,GAAGsuG,WAArB,CAAjB;;AAEA,YAAK8B,WAAW,KAAK,KAArB,EAA6B;AAE5B7rE,iBAAO,CAAClsC,KAAR,CAAc4H,KAAd,GAAsBA,KAAK,GAAG,IAA9B;AACAskC,iBAAO,CAAClsC,KAAR,CAAc2H,MAAd,GAAuBA,MAAM,GAAG,IAAhC;AAEA;;AAED,aAAKqwG,WAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwBpwG,KAAxB,EAA+BD,MAA/B;AAEA,OAxBD;;AA0BA,WAAKswG,oBAAL,GAA4B,UAAW90H,MAAX,EAAoB;AAE/C,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,8EAAd;AAEAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAOniD,MAAM,CAACwT,GAAP,CAAYo/G,MAAM,GAAGE,WAArB,EAAkCD,OAAO,GAAGC,WAA5C,EAA0Dx2G,KAA1D,EAAP;AAEA,OAZD;;AAcA,WAAKy4G,oBAAL,GAA4B,UAAWtwG,KAAX,EAAkBD,MAAlB,EAA0B2lB,UAA1B,EAAuC;AAElEyoF,cAAM,GAAGnuG,KAAT;AACAouG,eAAO,GAAGruG,MAAV;AAEAsuG,mBAAW,GAAG3oF,UAAd;AAEA4e,eAAO,CAACtkC,KAAR,GAAgB/V,IAAI,CAAC4N,KAAL,CAAYmI,KAAK,GAAG0lB,UAApB,CAAhB;AACA4e,eAAO,CAACvkC,MAAR,GAAiB9V,IAAI,CAAC4N,KAAL,CAAYkI,MAAM,GAAG2lB,UAArB,CAAjB;AAEA,aAAK0qF,WAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwBpwG,KAAxB,EAA+BD,MAA/B;AAEA,OAZD;;AAcA,WAAKwwG,kBAAL,GAA0B,UAAWh1H,MAAX,EAAoB;AAE7C,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,4EAAd;AAEAjO,gBAAM,GAAG,IAAIyrD,OAAJ,EAAT;AAEA;;AAED,eAAOzrD,MAAM,CAACqR,IAAP,CAAaohH,gBAAb,CAAP;AAEA,OAZD;;AAcA,WAAKvX,WAAL,GAAmB,UAAWl7G,MAAX,EAAoB;AAEtC,eAAOA,MAAM,CAACqR,IAAP,CAAagoG,SAAb,CAAP;AAEA,OAJD;;AAMA,WAAKwb,WAAL,GAAmB,UAAW/zH,CAAX,EAAc+W,CAAd,EAAiB4M,KAAjB,EAAwBD,MAAxB,EAAiC;AAEnD,YAAK1jB,CAAC,CAAC4qD,SAAP,EAAmB;AAElB2tD,mBAAS,CAAC7lG,GAAV,CAAe1S,CAAC,CAACA,CAAjB,EAAoBA,CAAC,CAAC+W,CAAtB,EAAyB/W,CAAC,CAACsiB,CAA3B,EAA8BtiB,CAAC,CAACkqB,CAAhC;AAEA,SAJD,MAIO;AAENquF,mBAAS,CAAC7lG,GAAV,CAAe1S,CAAf,EAAkB+W,CAAlB,EAAqB4M,KAArB,EAA4BD,MAA5B;AAEA;;AAED9S,aAAK,CAAC67C,QAAN,CAAgBklE,gBAAgB,CAACphH,IAAjB,CAAuBgoG,SAAvB,EAAmC9lG,cAAnC,CAAmDu/G,WAAnD,EAAiEx2G,KAAjE,EAAhB;AAEA,OAdD;;AAgBA,WAAK24G,UAAL,GAAkB,UAAWj1H,MAAX,EAAoB;AAErC,eAAOA,MAAM,CAACqR,IAAP,CAAa4hH,QAAb,CAAP;AAEA,OAJD;;AAMA,WAAKiC,UAAL,GAAkB,UAAWp0H,CAAX,EAAc+W,CAAd,EAAiB4M,KAAjB,EAAwBD,MAAxB,EAAiC;AAElD,YAAK1jB,CAAC,CAAC4qD,SAAP,EAAmB;AAElBunE,kBAAQ,CAACz/G,GAAT,CAAc1S,CAAC,CAACA,CAAhB,EAAmBA,CAAC,CAAC+W,CAArB,EAAwB/W,CAAC,CAACsiB,CAA1B,EAA6BtiB,CAAC,CAACkqB,CAA/B;AAEA,SAJD,MAIO;AAENioG,kBAAQ,CAACz/G,GAAT,CAAc1S,CAAd,EAAiB+W,CAAjB,EAAoB4M,KAApB,EAA2BD,MAA3B;AAEA;;AAED9S,aAAK,CAAC27C,OAAN,CAAeqlE,eAAe,CAACrhH,IAAhB,CAAsB4hH,QAAtB,EAAiC1/G,cAAjC,CAAiDu/G,WAAjD,EAA+Dx2G,KAA/D,EAAf;AAEA,OAdD;;AAgBA,WAAK64G,cAAL,GAAsB,YAAY;AAEjC,eAAOjC,YAAP;AAEA,OAJD;;AAMA,WAAKzY,cAAL,GAAsB,UAAW2a,QAAX,EAAqB;AAE1C1jH,aAAK,CAAC+oG,cAAN,CAAsByY,YAAY,GAAGkC,QAArC;AAEA,OAJD;;AAMA,WAAKC,aAAL,GAAqB,UAAWz7F,MAAX,EAAoB;AAExCm5F,mBAAW,GAAGn5F,MAAd;AAEA,OAJD;;AAMA,WAAK07F,kBAAL,GAA0B,UAAW17F,MAAX,EAAoB;AAE7Co5F,wBAAgB,GAAGp5F,MAAnB;AAEA,OAJD,CA7doC,CAmepC;;;AAEA,WAAKugE,aAAL,GAAqB,YAAY;AAEhC,eAAOz1E,UAAU,CAACy1E,aAAX,EAAP;AAEA,OAJD;;AAMA,WAAKC,aAAL,GAAqB,YAAY;AAEhC11E,kBAAU,CAAC01E,aAAX,CAAyB5uF,KAAzB,CAAgCkZ,UAAhC,EAA4CjZ,SAA5C;AAEA,OAJD;;AAMA,WAAK4uF,aAAL,GAAqB,YAAY;AAEhC,eAAO31E,UAAU,CAAC21E,aAAX,EAAP;AAEA,OAJD;;AAMA,WAAKC,aAAL,GAAqB,YAAY;AAEhC51E,kBAAU,CAAC41E,aAAX,CAAyB9uF,KAAzB,CAAgCkZ,UAAhC,EAA4CjZ,SAA5C;AAEA,OAJD;;AAMA,WAAK08E,KAAL,GAAa,UAAWriE,KAAX,EAAkByc,KAAlB,EAAyB6lD,OAAzB,EAAmC;AAE/C,YAAI7jD,IAAI,GAAG,CAAX;AAEA,YAAKze,KAAK,KAAKvhB,SAAV,IAAuBuhB,KAA5B,EAAoCye,IAAI,IAAI,KAAR;AACpC,YAAKhC,KAAK,KAAKh+B,SAAV,IAAuBg+B,KAA5B,EAAoCgC,IAAI,IAAI,GAAR;AACpC,YAAK6jD,OAAO,KAAK7jF,SAAZ,IAAyB6jF,OAA9B,EAAwC7jD,IAAI,IAAI,IAAR;;AAExCo9E,WAAG,CAACx5B,KAAJ,CAAW5jD,IAAX;AAEA,OAVD;;AAYA,WAAKw0D,UAAL,GAAkB,YAAY;AAE7B,aAAK5Q,KAAL,CAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB;AAEA,OAJD;;AAMA,WAAKm1B,UAAL,GAAkB,YAAY;AAE7B,aAAKn1B,KAAL,CAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB;AAEA,OAJD;;AAMA,WAAKi2B,YAAL,GAAoB,YAAY;AAE/B,aAAKj2B,KAAL,CAAY,KAAZ,EAAmB,KAAnB,EAA0B,IAA1B;AAEA,OAJD,CArhBoC,CA2hBpC;;;AAEA,WAAKr0E,OAAL,GAAe,YAAY;AAE1Bi1C,eAAO,CAACn7C,mBAAR,CAA6B,kBAA7B,EAAiDimH,aAAjD,EAAgE,KAAhE;;AACA9qE,eAAO,CAACn7C,mBAAR,CAA6B,sBAA7B,EAAqDkmH,gBAArD,EAAuE,KAAvE;;AAEAG,mBAAW,CAACngH,OAAZ;AACA2kG,oBAAY,CAAC3kG,OAAb;AACAm4E,kBAAU,CAACn4E,OAAX;AACAglF,eAAO,CAAChlF,OAAR;AACA6mF,qBAAa,CAAC7mF,OAAd;AAEAi0E,UAAE,CAACj0E,OAAH;AAEAo4G,iBAAS,CAACnvH,IAAV;AAEA,OAfD,CA7hBoC,CA8iBpC;;;AAEA,eAAS82H,aAAT,CAAwBp/H,KAAxB,EAAgC;AAE/BA,aAAK,CAAC4jB,cAAN;AAEA/gB,eAAO,CAACC,GAAR,CAAa,oCAAb;AAEAy6H,sBAAc,GAAG,IAAjB;AAEA;;AAED,eAAS8B,gBAAT;AAA2B;AAAc;AAExCx8H,eAAO,CAACC,GAAR,CAAa,wCAAb;AAEAy6H,sBAAc,GAAG,KAAjB;AAEAqC,qBAAa;AAEb;;AAED,eAASkB,iBAAT,CAA4B9gI,KAA5B,EAAoC;AAEnC,YAAMkxB,QAAQ,GAAGlxB,KAAK,CAACuL,MAAvB;AAEA2lB,gBAAQ,CAAC/X,mBAAT,CAA8B,SAA9B,EAAyC2nH,iBAAzC;AAEAC,0BAAkB,CAAE7vG,QAAF,CAAlB;AAEA,OA5kBmC,CA8kBpC;;;AAEA,eAAS6vG,kBAAT,CAA6B7vG,QAA7B,EAAwC;AAEvC8vG,uCAA+B,CAAE9vG,QAAF,CAA/B;AAEAsmE,kBAAU,CAAC/hF,MAAX,CAAmByb,QAAnB;AAEA;;AAGD,eAAS8vG,+BAAT,CAA0C9vG,QAA1C,EAAqD;AAEpD,YAAM+vG,WAAW,GAAGzpC,UAAU,CAACjlF,GAAX,CAAgB2e,QAAhB,EAA2Bq1E,OAA/C;;AAEA,YAAK06B,WAAW,KAAKnxH,SAArB,EAAiC;AAEhCyvH,sBAAY,CAAC9f,cAAb,CAA6BwhB,WAA7B;AAEA;AAED,OAnmBmC,CAqmBpC;;;AAEA,eAASC,qBAAT,CAAgC9wH,MAAhC,EAAwCm2F,OAAxC,EAAkD;AAEjDn2F,cAAM,CAAC2hB,MAAP,CAAe,UAAW3hB,MAAX,EAAoB;AAElCktH,eAAK,CAAC6D,qBAAN,CAA6B/wH,MAA7B,EAAqCm2F,OAArC;AAEA,SAJD;AAMA;;AAED,WAAK46B,qBAAL,GAA6B,UAAW/wH,MAAX,EAAmBm2F,OAAnB,EAA6B;AAEzDL,qBAAa,CAAC6B,cAAd;AAEA,YAAMjO,OAAO,GAAGtC,UAAU,CAACjlF,GAAX,CAAgBnC,MAAhB,CAAhB;AAEA,YAAKA,MAAM,CAACgxH,YAAP,IAAuB,CAAEtnC,OAAO,CAAC59E,QAAtC,EAAiD49E,OAAO,CAAC59E,QAAR,GAAmBgxG,GAAG,CAAClzB,YAAJ,EAAnB;AACjD,YAAK5pF,MAAM,CAACixH,UAAP,IAAqB,CAAEvnC,OAAO,CAACr6B,MAApC,EAA6Cq6B,OAAO,CAACr6B,MAAR,GAAiBytD,GAAG,CAAClzB,YAAJ,EAAjB;AAC7C,YAAK5pF,MAAM,CAACkxH,MAAP,IAAiB,CAAExnC,OAAO,CAAC/iC,EAAhC,EAAqC+iC,OAAO,CAAC/iC,EAAR,GAAam2D,GAAG,CAAClzB,YAAJ,EAAb;AACrC,YAAK5pF,MAAM,CAACmxH,SAAP,IAAoB,CAAEznC,OAAO,CAACzoE,KAAnC,EAA2CyoE,OAAO,CAACzoE,KAAR,GAAgB67F,GAAG,CAAClzB,YAAJ,EAAhB;AAE3C,YAAM0O,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;;AAEA,YAAKv4F,MAAM,CAACgxH,YAAZ,EAA2B;AAE1BlU,aAAG,CAAChzB,UAAJ,CAAgB,KAAhB,EAAuBJ,OAAO,CAAC59E,QAA/B;;AACAgxG,aAAG,CAAC/yB,UAAJ,CAAgB,KAAhB,EAAuB/pF,MAAM,CAACoxH,aAA9B,EAA6C,KAA7C;;AAEAt7B,uBAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAACxsF,QAAjD;;AACAgxG,aAAG,CAAC5kB,mBAAJ,CAAyBI,iBAAiB,CAACxsF,QAA3C,EAAqD,CAArD,EAAwD,IAAxD,EAA8D,KAA9D,EAAqE,CAArE,EAAwE,CAAxE;AAEA;;AAED,YAAK9L,MAAM,CAACixH,UAAZ,EAAyB;AAExBnU,aAAG,CAAChzB,UAAJ,CAAgB,KAAhB,EAAuBJ,OAAO,CAACr6B,MAA/B;;AACAytD,aAAG,CAAC/yB,UAAJ,CAAgB,KAAhB,EAAuB/pF,MAAM,CAACqxH,WAA9B,EAA2C,KAA3C;;AAEAv7B,uBAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAACjpC,MAAjD;;AACAytD,aAAG,CAAC5kB,mBAAJ,CAAyBI,iBAAiB,CAACjpC,MAA3C,EAAmD,CAAnD,EAAsD,IAAtD,EAA4D,KAA5D,EAAmE,CAAnE,EAAsE,CAAtE;AAEA;;AAED,YAAKrvD,MAAM,CAACkxH,MAAZ,EAAqB;AAEpBpU,aAAG,CAAChzB,UAAJ,CAAgB,KAAhB,EAAuBJ,OAAO,CAAC/iC,EAA/B;;AACAm2D,aAAG,CAAC/yB,UAAJ,CAAgB,KAAhB,EAAuB/pF,MAAM,CAACsxH,OAA9B,EAAuC,KAAvC;;AAEAx7B,uBAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAAC3xC,EAAjD;;AACAm2D,aAAG,CAAC5kB,mBAAJ,CAAyBI,iBAAiB,CAAC3xC,EAA3C,EAA+C,CAA/C,EAAkD,IAAlD,EAAwD,KAAxD,EAA+D,CAA/D,EAAkE,CAAlE;AAEA;;AAED,YAAK3mD,MAAM,CAACmxH,SAAZ,EAAwB;AAEvBrU,aAAG,CAAChzB,UAAJ,CAAgB,KAAhB,EAAuBJ,OAAO,CAACzoE,KAA/B;;AACA67F,aAAG,CAAC/yB,UAAJ,CAAgB,KAAhB,EAAuB/pF,MAAM,CAACuxH,UAA9B,EAA0C,KAA1C;;AAEAz7B,uBAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAACr3E,KAAjD;;AACA67F,aAAG,CAAC5kB,mBAAJ,CAAyBI,iBAAiB,CAACr3E,KAA3C,EAAkD,CAAlD,EAAqD,IAArD,EAA2D,KAA3D,EAAkE,CAAlE,EAAqE,CAArE;AAEA;;AAED60E,qBAAa,CAACkC,uBAAd;;AAEA8kB,WAAG,CAACrjB,UAAJ,CAAgB,CAAhB,EAAmB,CAAnB,EAAsBz5F,MAAM,CAACq6D,KAA7B;;AAEAr6D,cAAM,CAACq6D,KAAP,GAAe,CAAf;AAEA,OA3DD;;AA6DA,WAAKq8C,kBAAL,GAA0B,UAAWx3F,MAAX,EAAmBD,KAAnB,EAA0B27C,QAA1B,EAAoC95C,QAApC,EAA8C9gB,MAA9C,EAAsD1J,KAAtD,EAA8D;AAEvF,YAAK2oB,KAAK,KAAK,IAAf,EAAsBA,KAAK,GAAG0vG,WAAR,CAFiE,CAE5C;;AAE3C,YAAM5S,WAAW,GAAK/7G,MAAM,CAACy6D,MAAP,IAAiBz6D,MAAM,CAACwuD,WAAP,CAAmB5L,WAAnB,KAAmC,CAA1E;AAEA,YAAMuzC,OAAO,GAAGq7B,UAAU,CAAEtyG,MAAF,EAAUD,KAAV,EAAiB6B,QAAjB,EAA2B9gB,MAA3B,CAA1B;AAEA6M,aAAK,CAACivG,WAAN,CAAmBh7F,QAAnB,EAA6Bi7F,WAA7B,EARuF,CAUvF;;AAEA,YAAI3jG,KAAK,GAAGwiD,QAAQ,CAACxiD,KAArB;AACA,YAAMtM,QAAQ,GAAG8uD,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAArC,CAbuF,CAevF;;AAEA,YAAKsM,KAAK,KAAK,IAAf,EAAsB;AAErB,cAAKtM,QAAQ,KAAKpM,SAAb,IAA0BoM,QAAQ,CAACuuD,KAAT,KAAmB,CAAlD,EAAsD;AAEtD,SAJD,MAIO,IAAKjiD,KAAK,CAACiiD,KAAN,KAAgB,CAArB,EAAyB;AAE/B;AAEA,SAzBsF,CA2BvF;;;AAEA,YAAIo3D,WAAW,GAAG,CAAlB;;AAEA,YAAK3wG,QAAQ,CAACiuD,SAAT,KAAuB,IAA5B,EAAmC;AAElC32D,eAAK,GAAG6hD,UAAU,CAACwjC,qBAAX,CAAkC7iC,QAAlC,CAAR;AACA62D,qBAAW,GAAG,CAAd;AAEA;;AAED,YAAK3wG,QAAQ,CAACquD,YAAT,IAAyBruD,QAAQ,CAACsuD,YAAvC,EAAsD;AAErDigD,sBAAY,CAACziH,MAAb,CAAqB5M,MAArB,EAA6B46D,QAA7B,EAAuC95C,QAAvC,EAAiDq1E,OAAjD;AAEA;;AAEDL,qBAAa,CAACI,KAAd,CAAqBl2F,MAArB,EAA6B8gB,QAA7B,EAAuCq1E,OAAvC,EAAgDv7B,QAAhD,EAA0DxiD,KAA1D;AAEA,YAAI0nC,SAAJ;AACA,YAAI3gC,QAAQ,GAAGmwG,cAAf;;AAEA,YAAKl3G,KAAK,KAAK,IAAf,EAAsB;AAErB0nC,mBAAS,GAAG1U,UAAU,CAACjpC,GAAX,CAAgBiW,KAAhB,CAAZ;AAEA+G,kBAAQ,GAAGowG,qBAAX;AACApwG,kBAAQ,CAACoN,QAAT,CAAmBuzB,SAAnB;AAEA,SAxDsF,CA0DvF;;;AAEA,YAAM4xE,SAAS,GAAKt5G,KAAK,KAAK,IAAZ,GAAqBA,KAAK,CAACiiD,KAA3B,GAAmCvuD,QAAQ,CAACuuD,KAA9D;AAEA,YAAMs3D,UAAU,GAAG/2D,QAAQ,CAAC0Z,SAAT,CAAmBvQ,KAAnB,GAA2B0tD,WAA9C;AACA,YAAMG,UAAU,GAAGh3D,QAAQ,CAAC0Z,SAAT,CAAmBja,KAAnB,GAA2Bo3D,WAA9C;AAEA,YAAM1yC,UAAU,GAAGzoF,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAACytE,KAAN,GAAc0tD,WAA/B,GAA6C,CAAhE;AACA,YAAM5xC,UAAU,GAAGvpF,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAAC+jE,KAAN,GAAco3D,WAA/B,GAA6CjoH,QAAhE;AAEA,YAAMqoH,SAAS,GAAGhoH,IAAI,CAACmE,GAAL,CAAU2jH,UAAV,EAAsB5yC,UAAtB,CAAlB;AACA,YAAM+yC,OAAO,GAAGjoH,IAAI,CAACkE,GAAL,CAAU2jH,SAAV,EAAqBC,UAAU,GAAGC,UAAlC,EAA8C7yC,UAAU,GAAGc,UAA3D,IAA0E,CAA1F;AAEA,YAAMkyC,SAAS,GAAGloH,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa8jH,OAAO,GAAGD,SAAV,GAAsB,CAAnC,CAAlB;AAEA,YAAKE,SAAS,KAAK,CAAnB,EAAuB,OAzEgE,CA2EvF;;AAEA,YAAK/xH,MAAM,CAACy6D,MAAZ,EAAqB;AAEpB,cAAK35C,QAAQ,CAACiuD,SAAT,KAAuB,IAA5B,EAAmC;AAElCliE,iBAAK,CAACsvG,YAAN,CAAoBr7F,QAAQ,CAACkuD,kBAAT,GAA8B4/C,mBAAmB,EAArE;AACAzvG,oBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA,WALD,MAKO;AAENr6E,oBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA;AAED,SAbD,MAaO,IAAKx5F,MAAM,CAAC06D,MAAZ,EAAqB;AAE3B,cAAI0hD,SAAS,GAAGt7F,QAAQ,CAAC8tD,SAAzB;AAEA,cAAKwtC,SAAS,KAAK18G,SAAnB,EAA+B08G,SAAS,GAAG,CAAZ,CAJJ,CAImB;;AAE9CvvG,eAAK,CAACsvG,YAAN,CAAoBC,SAAS,GAAGwS,mBAAmB,EAAnD;;AAEA,cAAK5uH,MAAM,CAACgyH,cAAZ,EAA6B;AAE5B7yG,oBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA,WAJD,MAIO,IAAKx5F,MAAM,CAACiyH,UAAZ,EAAyB;AAE/B9yG,oBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA,WAJM,MAIA;AAENr6E,oBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA;AAED,SAtBM,MAsBA,IAAKx5F,MAAM,CAAC26D,QAAZ,EAAuB;AAE7Bx7C,kBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA,SAJM,MAIA,IAAKx5F,MAAM,CAACkyH,QAAZ,EAAuB;AAE7B/yG,kBAAQ,CAACq6E,OAAT,CAAkB,CAAlB;AAEA;;AAED,YAAKx5F,MAAM,CAACo6D,eAAZ,EAA8B;AAE7Bj7C,kBAAQ,CAACu6E,eAAT,CAA0Bm4B,SAA1B,EAAqCE,SAArC,EAAgD/xH,MAAM,CAACq6D,KAAvD;AAEA,SAJD,MAIO,IAAKO,QAAQ,CAACy9B,yBAAd,EAA0C;AAEhD,cAAM4F,aAAa,GAAGp0F,IAAI,CAACkE,GAAL,CAAU6sD,QAAQ,CAACqjC,aAAnB,EAAkCrjC,QAAQ,CAAC+9B,iBAA3C,CAAtB;AAEAx5E,kBAAQ,CAACu6E,eAAT,CAA0Bm4B,SAA1B,EAAqCE,SAArC,EAAgD9zB,aAAhD;AAEA,SANM,MAMA;AAEN9+E,kBAAQ,CAACwC,MAAT,CAAiBkwG,SAAjB,EAA4BE,SAA5B;AAEA;AAED,OA1ID,CA9qBoC,CA0zBpC;;;AAEA,WAAKI,OAAL,GAAe,UAAWlzG,KAAX,EAAkBC,MAAlB,EAA2B;AAEzC6tG,0BAAkB,GAAGnZ,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAAyBC,MAAzB,CAArB;AACA6tG,0BAAkB,CAACpxB,IAAnB;AAEA18E,aAAK,CAAC06C,QAAN,CAAgB,UAAW35D,MAAX,EAAoB;AAEnC,cAAKA,MAAM,CAAC+4D,OAAZ,EAAsB;AAErBg0D,8BAAkB,CAACxZ,SAAnB,CAA8BvzG,MAA9B;;AAEA,gBAAKA,MAAM,CAACs3D,UAAZ,EAAyB;AAExBy1D,gCAAkB,CAACvZ,UAAnB,CAA+BxzG,MAA/B;AAEA;AAED;AAED,SAdD;AAgBA+sH,0BAAkB,CAACrZ,WAAnB,CAAgCx0F,MAAhC;AAEA,YAAMkzG,QAAQ,GAAG,IAAIzoC,OAAJ,EAAjB;AAEA1qE,aAAK,CAAC06C,QAAN,CAAgB,UAAW35D,MAAX,EAAoB;AAEnC,cAAI8gB,QAAQ,GAAG9gB,MAAM,CAAC8gB,QAAtB;;AAEA,cAAKA,QAAL,EAAgB;AAEf,gBAAKiC,KAAK,CAAC0jC,OAAN,CAAe3lC,QAAf,CAAL,EAAiC;AAEhC,mBAAM,IAAIxvB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGwvB,QAAQ,CAACnwB,MAA9B,EAAsCW,KAAC,EAAvC,EAA6C;AAE5C,oBAAI+gI,SAAS,GAAGvxG,QAAQ,CAAExvB,KAAF,CAAxB;;AAEA,oBAAK8gI,QAAQ,CAACv1B,GAAT,CAAcw1B,SAAd,MAA8B,KAAnC,EAA2C;AAE1CC,8BAAY,CAAED,SAAF,EAAapzG,KAAb,EAAoBjf,MAApB,CAAZ;AACAoyH,0BAAQ,CAACzjH,GAAT,CAAc0jH,SAAd;AAEA;AAED;AAED,aAfD,MAeO,IAAKD,QAAQ,CAACv1B,GAAT,CAAc/7E,QAAd,MAA6B,KAAlC,EAA0C;AAEhDwxG,0BAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AACAoyH,sBAAQ,CAACzjH,GAAT,CAAcmS,QAAd;AAEA;AAED;AAED,SA9BD;AAgCA,OAzDD,CA5zBoC,CAu3BpC;;;AAEA,UAAI+oG,wBAAwB,GAAG,IAA/B;;AAEA,eAAS5gC,gBAAT,CAA2BpqD,IAA3B,EAAkC;AAEjC,YAAKqkD,EAAE,CAAC2jC,YAAR,EAAuB;AACvB,YAAKgD,wBAAL,EAAgCA,wBAAwB,CAAEhrF,IAAF,CAAxB;AAEhC;;AAED,UAAMwoF,SAAS,GAAG,IAAIx+B,cAAJ,EAAlB;AACAw+B,eAAS,CAACj+B,gBAAV,CAA4BH,gBAA5B;AAEA,UAAK,OAAO3iF,MAAP,KAAkB,WAAvB,EAAqC+gH,SAAS,CAACh+B,UAAV,CAAsB/iF,MAAtB;;AAErC,WAAK8iF,gBAAL,GAAwB,UAAWl8B,QAAX,EAAsB;AAE7C28D,gCAAwB,GAAG38D,QAA3B;AACAg2B,UAAE,CAACkG,gBAAH,CAAqBl8B,QAArB;AAEEA,gBAAQ,KAAK,IAAf,GAAwBm6D,SAAS,CAACnvH,IAAV,EAAxB,GAA2CmvH,SAAS,CAACtjD,KAAV,EAA3C;AAEA,OAPD,CAv4BoC,CAg5BpC;;;AAEA,WAAKpiD,MAAL,GAAc,UAAW1C,KAAX,EAAkBC,MAAlB,EAA2B;AAExC,YAAIujE,YAAJ,EAAkBiS,UAAlB;;AAEA,YAAK9tF,SAAS,CAAE,CAAF,CAAT,KAAmBlH,SAAxB,EAAoC;AAEnCjN,iBAAO,CAAC2W,IAAR,CAAc,2GAAd;AACAq5E,sBAAY,GAAG77E,SAAS,CAAE,CAAF,CAAxB;AAEA;;AAED,YAAKA,SAAS,CAAE,CAAF,CAAT,KAAmBlH,SAAxB,EAAoC;AAEnCjN,iBAAO,CAAC2W,IAAR,CAAc,+FAAd;AACAsrF,oBAAU,GAAG9tF,SAAS,CAAE,CAAF,CAAtB;AAEA;;AAED,YAAKsY,MAAM,KAAKxf,SAAX,IAAwBwf,MAAM,CAAC45C,QAAP,KAAoB,IAAjD,EAAwD;AAEvDrmE,iBAAO,CAACD,KAAR,CAAe,wEAAf;AACA;AAEA;;AAED,YAAK26H,cAAc,KAAK,IAAxB,EAA+B,OAzBS,CA2BxC;;AAEAr3B,qBAAa,CAACuD,iBAAd;AACAo0B,0BAAkB,GAAG,CAAE,CAAvB;AACAC,sBAAc,GAAG,IAAjB,CA/BwC,CAiCxC;;AAEA,YAAKzuG,KAAK,CAACu8C,UAAN,KAAqB,IAA1B,EAAiCv8C,KAAK,CAACq6C,iBAAN,GAnCO,CAqCxC;;AAEA,YAAKp6C,MAAM,CAACy3C,MAAP,KAAkB,IAAvB,EAA8Bz3C,MAAM,CAACo6C,iBAAP;;AAE9B,YAAK4pB,EAAE,CAAC75E,OAAH,KAAe,IAAf,IAAuB65E,EAAE,CAAC2jC,YAAH,KAAoB,IAAhD,EAAuD;AAEtD3nG,gBAAM,GAAGgkE,EAAE,CAACwmC,SAAH,CAAcxqG,MAAd,CAAT;AAEA,SA7CuC,CA+CxC;;;AACA,YAAKD,KAAK,CAAC28C,OAAN,KAAkB,IAAvB,EAA8B38C,KAAK,CAAC04C,cAAN,CAAsBu1D,KAAtB,EAA6BjuG,KAA7B,EAAoCC,MAApC,EAA4CujE,YAAY,IAAI8qC,oBAA5D;AAE9BR,0BAAkB,GAAGnZ,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAAyBC,MAAzB,CAArB;AACA6tG,0BAAkB,CAACpxB,IAAnB;;AAEA8yB,yBAAiB,CAACntE,gBAAlB,CAAoCpiC,MAAM,CAACmvC,gBAA3C,EAA6DnvC,MAAM,CAACkvC,kBAApE;;AACAimD,gBAAQ,CAAC/vB,uBAAT,CAAkCmqC,iBAAlC;;AAEAD,6BAAqB,GAAG,KAAKlzB,oBAA7B;AACAizB,wBAAgB,GAAGD,SAAS,CAAC3yB,IAAV,CAAgB,KAAKxwB,cAArB,EAAqCqjD,qBAArC,EAA4DtvG,MAA5D,CAAnB;AAEA4tG,yBAAiB,GAAGsC,WAAW,CAACjtH,GAAZ,CAAiB8c,KAAjB,EAAwBC,MAAxB,CAApB;AACA4tG,yBAAiB,CAACnxB,IAAlB;AAEA42B,qBAAa,CAAEtzG,KAAF,EAASC,MAAT,EAAiB,CAAjB,EAAoBguG,KAAK,CAACF,WAA1B,CAAb;AAEAF,yBAAiB,CAACzc,MAAlB;;AAEA,YAAK6c,KAAK,CAACF,WAAN,KAAsB,IAA3B,EAAkC;AAEjCF,2BAAiB,CAACl8H,IAAlB,CAAwBs9H,WAAxB,EAAqCC,gBAArC;AAEA,SAtEuC,CAwExC;;;AAEA,YAAKI,gBAAgB,KAAK,IAA1B,EAAiCD,SAAS,CAACxyB,YAAV;AAEjC,YAAMwX,YAAY,GAAGyZ,kBAAkB,CAAClgH,KAAnB,CAAyBymG,YAA9C;AAEAtE,iBAAS,CAACrtF,MAAV,CAAkB2xF,YAAlB,EAAgCr0F,KAAhC,EAAuCC,MAAvC;AAEA6tG,0BAAkB,CAACrZ,WAAnB,CAAgCx0F,MAAhC;AAEA,YAAKqvG,gBAAgB,KAAK,IAA1B,EAAiCD,SAAS,CAACvyB,UAAV,GAlFO,CAoFxC;;AAEA,YAAK,KAAKxC,IAAL,CAAU4E,SAAV,KAAwB,IAA7B,EAAoC,KAAK5E,IAAL,CAAU9sF,KAAV;;AAEpC,YAAKg2E,YAAY,KAAK/iF,SAAtB,EAAkC;AAEjC,eAAK2jF,eAAL,CAAsBZ,YAAtB;AAEA,SA5FuC,CA8FxC;;;AAEA5iE,kBAAU,CAAC8B,MAAX,CAAmBmrG,iBAAnB,EAAsC7tG,KAAtC,EAA6CC,MAA7C,EAAqDw1E,UAArD,EAhGwC,CAkGxC;;AAEA,YAAM89B,aAAa,GAAG1F,iBAAiB,CAAChd,MAAxC;AACA,YAAM2iB,kBAAkB,GAAG3F,iBAAiB,CAAC7iD,WAA7C;AAEA,YAAKuoD,aAAa,CAAC7hI,MAAd,GAAuB,CAA5B,EAAgC+hI,aAAa,CAAEF,aAAF,EAAiBvzG,KAAjB,EAAwBC,MAAxB,CAAb;AAChC,YAAKuzG,kBAAkB,CAAC9hI,MAAnB,GAA4B,CAAjC,EAAqC+hI,aAAa,CAAED,kBAAF,EAAsBxzG,KAAtB,EAA6BC,MAA7B,CAAb,CAxGG,CA0GxC;;AAEA,YAAKD,KAAK,CAAC28C,OAAN,KAAkB,IAAvB,EAA8B38C,KAAK,CAAC24C,aAAN,CAAqBs1D,KAArB,EAA4BjuG,KAA5B,EAAmCC,MAAnC,EA5GU,CA8GxC;;AAEA,YAAKquG,oBAAoB,KAAK,IAA9B,EAAqC;AAEpC;AAEAlnE,kBAAQ,CAACk8D,wBAAT,CAAmCgL,oBAAnC,EAJoC,CAMpC;;AAEAlnE,kBAAQ,CAACm8D,6BAAT,CAAwC+K,oBAAxC;AAEA,SA1HuC,CA4HxC;;;AAEA1gH,aAAK,CAAC68E,OAAN,CAAchsD,KAAd,CAAoBi4E,OAApB,CAA6B,IAA7B;AACA9oG,aAAK,CAAC68E,OAAN,CAAchsD,KAAd,CAAoBs6E,OAApB,CAA6B,IAA7B;AACAnrG,aAAK,CAAC68E,OAAN,CAAczoE,KAAd,CAAoB+2F,OAApB,CAA6B,IAA7B;AAEAnrG,aAAK,CAACmvG,gBAAN,CAAwB,KAAxB,EAlIwC,CAoIxC;;AAEA8Q,yBAAiB,GAAG,IAApB;AACAC,0BAAkB,GAAG,IAArB;AAEA,OAzID;;AA2IA,eAASwF,aAAT,CAAwBvyH,MAAxB,EAAgCkf,MAAhC,EAAwCuwF,UAAxC,EAAoDud,WAApD,EAAkE;AAEjE,YAAKhtH,MAAM,CAACq3D,OAAP,KAAmB,KAAxB,EAAgC;AAEhC,YAAMA,OAAO,GAAGr3D,MAAM,CAAC41D,MAAP,CAAcryD,IAAd,CAAoB2b,MAAM,CAAC02C,MAA3B,CAAhB;;AAEA,YAAKyB,OAAL,EAAe;AAEd,cAAKr3D,MAAM,CAAC4jH,OAAZ,EAAsB;AAErBnU,sBAAU,GAAGzvG,MAAM,CAACw3D,WAApB;AAEA,WAJD,MAIO,IAAKx3D,MAAM,CAAC2yH,KAAZ,EAAoB;AAE1B,gBAAK3yH,MAAM,CAACw7D,UAAP,KAAsB,IAA3B,EAAkCx7D,MAAM,CAAC4M,MAAP,CAAesS,MAAf;AAElC,WAJM,MAIA,IAAKlf,MAAM,CAAC+4D,OAAZ,EAAsB;AAE5Bg0D,8BAAkB,CAACxZ,SAAnB,CAA8BvzG,MAA9B;;AAEA,gBAAKA,MAAM,CAACs3D,UAAZ,EAAyB;AAExBy1D,gCAAkB,CAACvZ,UAAnB,CAA+BxzG,MAA/B;AAEA;AAED,WAVM,MAUA,IAAKA,MAAM,CAACkyH,QAAZ,EAAuB;AAE7B,gBAAK,CAAElyH,MAAM,CAAC4gB,aAAT,IAA0ByzF,QAAQ,CAAC7uB,gBAAT,CAA2BxlF,MAA3B,CAA/B,EAAqE;AAEpE,kBAAKgtH,WAAL,EAAmB;AAElB0B,wBAAQ,CAAC/+D,qBAAT,CAAgC3vD,MAAM,CAACwuD,WAAvC,EACExH,YADF,CACgBynE,iBADhB;AAGA;;AAED,kBAAM7zD,QAAQ,GAAGq5B,OAAO,CAACrnF,MAAR,CAAgB5M,MAAhB,CAAjB;AACA,kBAAM8gB,QAAQ,GAAG9gB,MAAM,CAAC8gB,QAAxB;;AAEA,kBAAKA,QAAQ,CAACu2C,OAAd,EAAwB;AAEvBy1D,iCAAiB,CAAC96H,IAAlB,CAAwBgO,MAAxB,EAAgC46D,QAAhC,EAA0C95C,QAA1C,EAAoD2uF,UAApD,EAAgEif,QAAQ,CAACnwG,CAAzE,EAA4E,IAA5E;AAEA;AAED;AAED,WAtBM,MAsBA,IAAKve,MAAM,CAAC4yH,uBAAZ,EAAsC;AAE5C,gBAAK5F,WAAL,EAAmB;AAElB0B,sBAAQ,CAAC/+D,qBAAT,CAAgC3vD,MAAM,CAACwuD,WAAvC,EACExH,YADF,CACgBynE,iBADhB;AAGA;;AAED3B,6BAAiB,CAAC96H,IAAlB,CAAwBgO,MAAxB,EAAgC,IAAhC,EAAsCA,MAAM,CAAC8gB,QAA7C,EAAuD2uF,UAAvD,EAAmEif,QAAQ,CAACnwG,CAA5E,EAA+E,IAA/E;AAEA,WAXM,MAWA,IAAKve,MAAM,CAACy6D,MAAP,IAAiBz6D,MAAM,CAAC06D,MAAxB,IAAkC16D,MAAM,CAAC26D,QAA9C,EAAyD;AAE/D,gBAAK36D,MAAM,CAACq6E,aAAZ,EAA4B;AAE3B;AAEA,kBAAKr6E,MAAM,CAAC+tG,QAAP,CAAgB7kB,KAAhB,KAA0BqQ,IAAI,CAAC53E,MAAL,CAAYunE,KAA3C,EAAmD;AAElDlpF,sBAAM,CAAC+tG,QAAP,CAAgBnhG,MAAhB;AACA5M,sBAAM,CAAC+tG,QAAP,CAAgB7kB,KAAhB,GAAwBqQ,IAAI,CAAC53E,MAAL,CAAYunE,KAApC;AAEA;AAED;;AAED,gBAAK,CAAElpF,MAAM,CAAC4gB,aAAT,IAA0ByzF,QAAQ,CAAC9uB,gBAAT,CAA2BvlF,MAA3B,CAA/B,EAAqE;AAEpE,kBAAKgtH,WAAL,EAAmB;AAElB0B,wBAAQ,CAAC/+D,qBAAT,CAAgC3vD,MAAM,CAACwuD,WAAvC,EACExH,YADF,CACgBynE,iBADhB;AAGA;;AAED,kBAAM7zD,UAAQ,GAAGq5B,OAAO,CAACrnF,MAAR,CAAgB5M,MAAhB,CAAjB;;AACA,kBAAM8gB,SAAQ,GAAG9gB,MAAM,CAAC8gB,QAAxB;;AAEA,kBAAKiC,KAAK,CAAC0jC,OAAN,CAAe3lC,SAAf,CAAL,EAAiC;AAEhC,oBAAMqxD,MAAM,GAAGvX,UAAQ,CAACuX,MAAxB;;AAEA,qBAAM,IAAI7gF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo2E,MAAM,CAACxhF,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,sBAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,KAAF,CAApB;AACA,sBAAMkoF,aAAa,GAAG14D,SAAQ,CAAExqB,KAAK,CAACkzE,aAAR,CAA9B;;AAEA,sBAAKgQ,aAAa,IAAIA,aAAa,CAACniB,OAApC,EAA8C;AAE7Cy1D,qCAAiB,CAAC96H,IAAlB,CAAwBgO,MAAxB,EAAgC46D,UAAhC,EAA0C4e,aAA1C,EAAyDi2B,UAAzD,EAAqEif,QAAQ,CAACnwG,CAA9E,EAAiFjoB,KAAjF;AAEA;AAED;AAED,eAjBD,MAiBO,IAAKwqB,SAAQ,CAACu2C,OAAd,EAAwB;AAE9By1D,iCAAiB,CAAC96H,IAAlB,CAAwBgO,MAAxB,EAAgC46D,UAAhC,EAA0C95C,SAA1C,EAAoD2uF,UAApD,EAAgEif,QAAQ,CAACnwG,CAAzE,EAA4E,IAA5E;AAEA;AAED;AAED;AAED;;AAED,YAAMnE,QAAQ,GAAGpa,MAAM,CAACoa,QAAxB;;AAEA,aAAM,IAAI9oB,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,GAAGyK,GAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnDihI,uBAAa,CAAEn4G,QAAQ,CAAE9oB,KAAF,CAAV,EAAiB4tB,MAAjB,EAAyBuwF,UAAzB,EAAqCud,WAArC,CAAb;AAEA;AAED;;AAED,eAAS0F,aAAT,CAAwBj+B,UAAxB,EAAoCx1E,KAApC,EAA2CC,MAA3C,EAAoD;AAEnD,YAAMq8C,gBAAgB,GAAGt8C,KAAK,CAAC28C,OAAN,KAAkB,IAAlB,GAAyB38C,KAAK,CAACs8C,gBAA/B,GAAkD,IAA3E;;AAEA,aAAM,IAAIjqE,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG04F,UAAU,CAAC9jG,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,cAAM2+G,UAAU,GAAGxb,UAAU,CAAEnjG,KAAF,CAA7B;AAEA,cAAM0O,MAAM,GAAGiwG,UAAU,CAACjwG,MAA1B;AACA,cAAM46D,QAAQ,GAAGq1C,UAAU,CAACr1C,QAA5B;AACA,cAAM95C,QAAQ,GAAGy6C,gBAAgB,KAAK,IAArB,GAA4B00C,UAAU,CAACnvF,QAAvC,GAAkDy6C,gBAAnE;AACA,cAAMjlE,KAAK,GAAG25G,UAAU,CAAC35G,KAAzB;;AAEA,cAAK4oB,MAAM,CAACykG,aAAZ,EAA4B;AAE3BgK,+BAAmB,GAAGzuG,MAAtB;AAEA,gBAAMuxF,OAAO,GAAGvxF,MAAM,CAACuxF,OAAvB;;AAEA,iBAAM,IAAI7+G,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAG46B,OAAO,CAAC9/G,MAA9B,EAAsCiB,CAAC,GAAGikF,EAA1C,EAA8CjkF,CAAC,EAA/C,EAAqD;AAEpD,kBAAMihI,OAAO,GAAGpiB,OAAO,CAAE7+G,CAAF,CAAvB;;AAEA,kBAAKoO,MAAM,CAAC41D,MAAP,CAAcryD,IAAd,CAAoBsvH,OAAO,CAACj9D,MAA5B,CAAL,EAA4C;AAE3C/oD,qBAAK,CAAC67C,QAAN,CAAgBklE,gBAAgB,CAACphH,IAAjB,CAAuBqmH,OAAO,CAACnqE,QAA/B,CAAhB;AAEAqkE,kCAAkB,CAACrZ,WAAnB,CAAgCmf,OAAhC;AAEArc,4BAAY,CAAEx2G,MAAF,EAAUif,KAAV,EAAiB4zG,OAAjB,EAA0Bj4D,QAA1B,EAAoC95C,QAApC,EAA8CxqB,KAA9C,CAAZ;AAEA;AAED;AAED,WAtBD,MAsBO;AAENq3H,+BAAmB,GAAG,IAAtB;AAEAnX,wBAAY,CAAEx2G,MAAF,EAAUif,KAAV,EAAiBC,MAAjB,EAAyB07C,QAAzB,EAAmC95C,QAAnC,EAA6CxqB,KAA7C,CAAZ;AAEA;AAED;AAED;;AAED,eAASkgH,YAAT,CAAuBx2G,MAAvB,EAA+Bif,KAA/B,EAAsCC,MAAtC,EAA8C07C,QAA9C,EAAwD95C,QAAxD,EAAkExqB,KAAlE,EAA0E;AAEzE0J,cAAM,CAAC23D,cAAP,CAAuBu1D,KAAvB,EAA8BjuG,KAA9B,EAAqCC,MAArC,EAA6C07C,QAA7C,EAAuD95C,QAAvD,EAAiExqB,KAAjE;AACAy2H,0BAAkB,GAAGnZ,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAAyB0uG,mBAAmB,IAAIzuG,MAAhD,CAArB;AAEAlf,cAAM,CAACi3D,eAAP,CAAuB3V,gBAAvB,CAAyCpiC,MAAM,CAACkvC,kBAAhD,EAAoEpuD,MAAM,CAACwuD,WAA3E;AACAxuD,cAAM,CAACk3D,YAAP,CAAoB5T,eAApB,CAAqCtjD,MAAM,CAACi3D,eAA5C;;AAEA,YAAKj3D,MAAM,CAAC4yH,uBAAZ,EAAsC;AAErC,cAAMz8B,OAAO,GAAGq7B,UAAU,CAAEtyG,MAAF,EAAUD,KAAV,EAAiB6B,QAAjB,EAA2B9gB,MAA3B,CAA1B;AAEA6M,eAAK,CAACivG,WAAN,CAAmBh7F,QAAnB;AAEAg1E,uBAAa,CAACrpF,KAAd;AAEAqkH,+BAAqB,CAAE9wH,MAAF,EAAUm2F,OAAV,CAArB;AAEA,SAVD,MAUO;AAEN+2B,eAAK,CAACxW,kBAAN,CAA0Bx3F,MAA1B,EAAkCD,KAAlC,EAAyC27C,QAAzC,EAAmD95C,QAAnD,EAA6D9gB,MAA7D,EAAqE1J,KAArE;AAEA;;AAED0J,cAAM,CAAC43D,aAAP,CAAsBs1D,KAAtB,EAA6BjuG,KAA7B,EAAoCC,MAApC,EAA4C07C,QAA5C,EAAsD95C,QAAtD,EAAgExqB,KAAhE;AACAy2H,0BAAkB,GAAGnZ,YAAY,CAACzxG,GAAb,CAAkB8c,KAAlB,EAAyB0uG,mBAAmB,IAAIzuG,MAAhD,CAArB;AAEA;;AAED,eAASozG,YAAT,CAAuBxxG,QAAvB,EAAiC7B,KAAjC,EAAwCjf,MAAxC,EAAiD;AAEhD,YAAKif,KAAK,CAAC28C,OAAN,KAAkB,IAAvB,EAA8B38C,KAAK,GAAG0vG,WAAR,CAFkB,CAEG;;AAEnD,YAAMze,kBAAkB,GAAG9oB,UAAU,CAACjlF,GAAX,CAAgB2e,QAAhB,CAA3B;AAEA,YAAM4/D,MAAM,GAAGqsC,kBAAkB,CAAClgH,KAAnB,CAAyB6zE,MAAxC;AACA,YAAM4yB,YAAY,GAAGyZ,kBAAkB,CAAClgH,KAAnB,CAAyBymG,YAA9C;AAEA,YAAMwf,kBAAkB,GAAGpyC,MAAM,CAAC7zE,KAAP,CAAayc,OAAxC;AAEA,YAAMuxC,UAAU,GAAGs0D,YAAY,CAAC/gB,aAAb,CAA4BttF,QAA5B,EAAsC4/D,MAAM,CAAC7zE,KAA7C,EAAoDymG,YAApD,EAAkEr0F,KAAlE,EAAyEqvG,SAAS,CAAC7yB,SAAnF,EAA8F6yB,SAAS,CAAC5yB,eAAxG,EAAyH17F,MAAzH,CAAnB;AACA,YAAM+yH,eAAe,GAAG5D,YAAY,CAAClgB,kBAAb,CAAiCp0C,UAAjC,CAAxB;AAEA,YAAIs7B,OAAO,GAAG+Z,kBAAkB,CAAC/Z,OAAjC;AACA,YAAI68B,aAAa,GAAG,IAApB;;AAEA,YAAK78B,OAAO,KAAKz2F,SAAjB,EAA6B;AAE5B;AACAohB,kBAAQ,CAACjY,gBAAT,CAA2B,SAA3B,EAAsC6nH,iBAAtC;AAEA,SALD,MAKO,IAAKv6B,OAAO,CAACqT,QAAR,KAAqBupB,eAA1B,EAA4C;AAElD;AACAnC,yCAA+B,CAAE9vG,QAAF,CAA/B;AAEA,SALM,MAKA,IAAKovF,kBAAkB,CAAC4iB,kBAAnB,KAA0CA,kBAA/C,EAAoE;AAE1E5iB,4BAAkB,CAAC4iB,kBAAnB,GAAwCA,kBAAxC;AAEAE,uBAAa,GAAG,KAAhB;AAEA,SANM,MAMA,IAAKn4D,UAAU,CAAC4rC,QAAX,KAAwB/mG,SAA7B,EAAyC;AAE/C;AACA;AAEA,SALM,MAKA;AAEN;AACAszH,uBAAa,GAAG,KAAhB;AAEA;;AAED,YAAKA,aAAL,EAAqB;AAEpBn4D,oBAAU,CAAColB,QAAX,GAAsBkvC,YAAY,CAACrwB,WAAb,CAA0Bh+E,QAA1B,EAAoC+5C,UAApC,CAAtB;AAEA/5C,kBAAQ,CAACmrD,eAAT,CAA0BpR,UAA1B,EAAsCqyD,KAAtC;AAEA/2B,iBAAO,GAAGg5B,YAAY,CAACjgB,cAAb,CAA6Br0C,UAA7B,EAAyCk4D,eAAzC,CAAV;AAEA7iB,4BAAkB,CAAC/Z,OAAnB,GAA6BA,OAA7B;AACA+Z,4BAAkB,CAACjwB,QAAnB,GAA8BplB,UAAU,CAAColB,QAAzC;AACAiwB,4BAAkB,CAAC/E,cAAnB,GAAoCtwC,UAAU,CAACswC,cAA/C;AAEA;;AAED,YAAM7S,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;;AAEA,YAAKz3E,QAAQ,CAACquD,YAAd,EAA6B;AAE5BruD,kBAAQ,CAACmyG,wBAAT,GAAoC,CAApC;;AAEA,eAAM,IAAI3hI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG47H,KAAK,CAACxe,eAA3B,EAA4Cp9G,KAAC,EAA7C,EAAmD;AAElD,gBAAKgnG,iBAAiB,CAAE,gBAAgBhnG,KAAlB,CAAjB,IAA0C,CAA/C,EAAmD;AAElDwvB,sBAAQ,CAACmyG,wBAAT;AAEA;AAED;AAED;;AAED,YAAKnyG,QAAQ,CAACsuD,YAAd,EAA6B;AAE5BtuD,kBAAQ,CAACoyG,wBAAT,GAAoC,CAApC;;AAEA,eAAM,IAAI5hI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG47H,KAAK,CAACve,eAA3B,EAA4Cr9G,KAAC,EAA7C,EAAmD;AAElD,gBAAKgnG,iBAAiB,CAAE,gBAAgBhnG,KAAlB,CAAjB,IAA0C,CAA/C,EAAmD;AAElDwvB,sBAAQ,CAACoyG,wBAAT;AAEA;AAED;AAED;;AAED,YAAMjzC,QAAQ,GAAGiwB,kBAAkB,CAACjwB,QAApC;;AAEA,YAAK,CAAEn/D,QAAQ,CAACsgE,gBAAX,IACJ,CAAEtgE,QAAQ,CAACipF,mBADP,IAEJjpF,QAAQ,CAAC6/D,QAAT,KAAsB,IAFvB,EAE8B;AAE7BuvB,4BAAkB,CAACnI,iBAAnB,GAAuCumB,SAAS,CAAC7yB,SAAjD;AACAyU,4BAAkB,CAACxU,eAAnB,GAAqC4yB,SAAS,CAAC5yB,eAA/C;AACAzb,kBAAQ,CAAC9U,cAAT,GAA0BmjD,SAAS,CAACjtC,OAApC;AAEA;;AAED6uB,0BAAkB,CAAC70C,WAAnB,GAAiCv6C,QAAQ,CAAC0tF,sBAAT,GAAkCvvF,KAAK,CAACo8C,WAAxC,GAAsD,IAAvF;AACA60C,0BAAkB,CAAC50C,GAAnB,GAAyBr8C,KAAK,CAACq8C,GAA/B,CA1GgD,CA4GhD;;AAEA40C,0BAAkB,CAACijB,WAAnB,GAAiCC,mBAAmB,CAAEtyG,QAAF,CAApD;AACAovF,0BAAkB,CAAC4iB,kBAAnB,GAAwCA,kBAAxC;;AAEA,YAAK5iB,kBAAkB,CAACijB,WAAxB,EAAsC;AAErC;AAEAlzC,kBAAQ,CAACgH,iBAAT,CAA2B7rF,KAA3B,GAAmCslF,MAAM,CAAC7zE,KAAP,CAAailG,OAAhD;AACA7xB,kBAAQ,CAACiH,UAAT,CAAoB9rF,KAApB,GAA4BslF,MAAM,CAAC7zE,KAAP,CAAaklG,KAAzC;AACA9xB,kBAAQ,CAACkH,iBAAT,CAA2B/rF,KAA3B,GAAmCslF,MAAM,CAAC7zE,KAAP,CAAa+hG,WAAhD;AACA3uB,kBAAQ,CAACoH,uBAAT,CAAiCjsF,KAAjC,GAAyCslF,MAAM,CAAC7zE,KAAP,CAAamlG,iBAAtD;AACA/xB,kBAAQ,CAAC2H,UAAT,CAAoBxsF,KAApB,GAA4BslF,MAAM,CAAC7zE,KAAP,CAAagiG,IAAzC;AACA5uB,kBAAQ,CAAC+H,gBAAT,CAA0B5sF,KAA1B,GAAkCslF,MAAM,CAAC7zE,KAAP,CAAaolG,UAA/C;AACAhyB,kBAAQ,CAAC2I,cAAT,CAAwBxtF,KAAxB,GAAgCslF,MAAM,CAAC7zE,KAAP,CAAaiiG,QAA7C;AACA7uB,kBAAQ,CAACkI,WAAT,CAAqB/sF,KAArB,GAA6BslF,MAAM,CAAC7zE,KAAP,CAAa63B,KAA1C;AACAu7C,kBAAQ,CAACmI,iBAAT,CAA2BhtF,KAA3B,GAAmCslF,MAAM,CAAC7zE,KAAP,CAAaqlG,WAAhD;AACAjyB,kBAAQ,CAACwI,gBAAT,CAA0BrtF,KAA1B,GAAkCslF,MAAM,CAAC7zE,KAAP,CAAakiG,IAA/C;AAEA9uB,kBAAQ,CAACyH,oBAAT,CAA8BtsF,KAA9B,GAAsCslF,MAAM,CAAC7zE,KAAP,CAAa66E,oBAAnD;AACAzH,kBAAQ,CAAC0H,uBAAT,CAAiCvsF,KAAjC,GAAyCslF,MAAM,CAAC7zE,KAAP,CAAa86E,uBAAtD;AACA1H,kBAAQ,CAACgI,aAAT,CAAuB7sF,KAAvB,GAA+BslF,MAAM,CAAC7zE,KAAP,CAAao7E,aAA5C;AACAhI,kBAAQ,CAACiI,gBAAT,CAA0B9sF,KAA1B,GAAkCslF,MAAM,CAAC7zE,KAAP,CAAaq7E,gBAA/C;AACAjI,kBAAQ,CAACsI,cAAT,CAAwBntF,KAAxB,GAAgCslF,MAAM,CAAC7zE,KAAP,CAAa07E,cAA7C;AACAtI,kBAAQ,CAACuI,iBAAT,CAA2BptF,KAA3B,GAAmCslF,MAAM,CAAC7zE,KAAP,CAAa27E,iBAAhD,CApBqC,CAqBrC;AAEA;;AAED,YAAM6qC,YAAY,GAAGnjB,kBAAkB,CAAC/Z,OAAnB,CAA2B2I,WAA3B,EAArB;AAAA,YACCw0B,YAAY,GACXxuB,aAAa,CAACM,YAAd,CAA4BiuB,YAAY,CAACjvB,GAAzC,EAA8CnkB,QAA9C,CAFF;AAIAiwB,0BAAkB,CAACojB,YAAnB,GAAkCA,YAAlC;AAEA;;AAED,eAAS9B,UAAT,CAAqBtyG,MAArB,EAA6BD,KAA7B,EAAoC6B,QAApC,EAA8C9gB,MAA9C,EAAuD;AAEtD,YAAKif,KAAK,CAAC28C,OAAN,KAAkB,IAAvB,EAA8B38C,KAAK,GAAG0vG,WAAR,CAFwB,CAEH;;AAEnDtoE,gBAAQ,CAACk5D,iBAAT;AAEA,YAAMjkD,GAAG,GAAGr8C,KAAK,CAACq8C,GAAlB;AACA,YAAMD,WAAW,GAAGv6C,QAAQ,CAAC0tF,sBAAT,GAAkCvvF,KAAK,CAACo8C,WAAxC,GAAsD,IAA1E;AACA,YAAMhW,QAAQ,GAAKkoE,oBAAoB,KAAK,IAA3B,GAAoCL,KAAK,CAAC/hB,cAA1C,GAA2DoiB,oBAAoB,CAAC5kE,OAArB,CAA6BtD,QAAzG;AAEA,YAAM6qD,kBAAkB,GAAG9oB,UAAU,CAACjlF,GAAX,CAAgB2e,QAAhB,CAA3B;AACA,YAAM4/D,MAAM,GAAGqsC,kBAAkB,CAAClgH,KAAnB,CAAyB6zE,MAAxC;;AAEA,YAAK6tC,gBAAgB,KAAK,IAA1B,EAAiC;AAEhC,cAAKC,qBAAqB,KAAK,IAA1B,IAAkCtvG,MAAM,KAAKwuG,cAAlD,EAAmE;AAElE,gBAAM6F,QAAQ,GACbr0G,MAAM,KAAKwuG,cAAX,IACA5sG,QAAQ,CAAC5xB,EAAT,KAAgBu+H,kBAFjB,CAFkE,CAMlE;AACA;AACA;;AACAa,qBAAS,CAACryB,QAAV,CACCn7E,QAAQ,CAACqqD,cADV,EAC0BrqD,QAAQ,CAACsqD,gBADnC,EACqDtqD,QAAQ,CAACuqD,WAD9D,EAECnsD,MAFD,EAESgxF,kBAFT,EAE6BqjB,QAF7B;AAIA;AAED;;AAED,YAAKzyG,QAAQ,CAACwI,OAAT,KAAqB4mF,kBAAkB,CAAC0P,SAA7C,EAAyD;AAExD,cAAK1P,kBAAkB,CAAC/Z,OAAnB,KAA+Bz2F,SAApC,EAAgD;AAE/C4yH,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA,WAJD,MAIO,IAAK8gB,QAAQ,CAACw6C,GAAT,IAAgB40C,kBAAkB,CAAC50C,GAAnB,KAA2BA,GAAhD,EAAsD;AAE5Dg3D,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA,WAJM,MAIA,IAAKkwG,kBAAkB,CAAC70C,WAAnB,KAAmCA,WAAxC,EAAsD;AAE5Di3D,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA,WAJM,MAIA,IAAKkwG,kBAAkB,CAACijB,WAAnB,IAAoCjjB,kBAAkB,CAAC4iB,kBAAnB,KAA0CpyC,MAAM,CAAC7zE,KAAP,CAAayc,OAAhG,EAA4G;AAElHgpG,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA,WAJM,MAIA,IAAKkwG,kBAAkB,CAACnI,iBAAnB,KAAyCroG,SAAzC,KACTwwG,kBAAkB,CAACnI,iBAAnB,KAAyCumB,SAAS,CAAC7yB,SAAnD,IACFyU,kBAAkB,CAACxU,eAAnB,KAAuC4yB,SAAS,CAAC5yB,eAFtC,CAAL,EAE+D;AAErE42B,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA,WANM,MAMA,IAAKkwG,kBAAkB,CAAC/E,cAAnB,KAAsC9lD,QAA3C,EAAsD;AAE5DitE,wBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AAEA;AAED,SA9BD,MA8BO;AAENsyH,sBAAY,CAAExxG,QAAF,EAAY7B,KAAZ,EAAmBjf,MAAnB,CAAZ;AACAkwG,4BAAkB,CAAC0P,SAAnB,GAA+B9+F,QAAQ,CAACwI,OAAxC;AAEA;;AAED,YAAIkqG,cAAc,GAAG,KAArB;AACA,YAAIC,eAAe,GAAG,KAAtB;AACA,YAAIC,aAAa,GAAG,KAApB;AAEA,YAAMv9B,OAAO,GAAG+Z,kBAAkB,CAAC/Z,OAAnC;AAAA,YACCw9B,UAAU,GAAGx9B,OAAO,CAAC2I,WAAR,EADd;AAAA,YAEC80B,UAAU,GAAG1jB,kBAAkB,CAACjwB,QAFjC;;AAIA,YAAKpzE,KAAK,CAACyuG,UAAN,CAAkBnlB,OAAO,CAACA,OAA1B,CAAL,EAA2C;AAE1Cq9B,wBAAc,GAAG,IAAjB;AACAC,yBAAe,GAAG,IAAlB;AACAC,uBAAa,GAAG,IAAhB;AAEA;;AAED,YAAK5yG,QAAQ,CAAC5xB,EAAT,KAAgBu+H,kBAArB,EAA0C;AAEzCA,4BAAkB,GAAG3sG,QAAQ,CAAC5xB,EAA9B;AAEAukI,yBAAe,GAAG,IAAlB;AAEA;;AAED,YAAKD,cAAc,IAAI9F,cAAc,KAAKxuG,MAA1C,EAAmD;AAElDy0G,oBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,kBAA1B,EAA8C59F,MAAM,CAACmvC,gBAArD;;AAEA,cAAKm7B,YAAY,CAAC8Q,sBAAlB,EAA2C;AAE1Cq5B,sBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,eAA1B,EACC,OAAQjzG,IAAI,CAACnX,GAAL,CAAUwsB,MAAM,CAACo1C,GAAP,GAAa,GAAvB,IAA+BzqD,IAAI,CAAC6yC,GAA5C,CADD;AAGA;;AAED,cAAKgxE,cAAc,KAAKxuG,MAAxB,EAAiC;AAEhCwuG,0BAAc,GAAGxuG,MAAjB,CAFgC,CAIhC;AACA;AACA;;AAEAu0G,2BAAe,GAAG,IAAlB,CARgC,CAQP;;AACzBC,yBAAa,GAAG,IAAhB,CATgC,CAST;AAEvB,WAtBiD,CAwBlD;AACA;;;AAEA,cAAK5yG,QAAQ,CAACsgE,gBAAT,IACJtgE,QAAQ,CAAC6pG,mBADL,IAEJ7pG,QAAQ,CAAC2pG,kBAFL,IAGJ3pG,QAAQ,CAAC0tF,sBAHL,IAIJ1tF,QAAQ,CAACutD,MAJV,EAImB;AAElB,gBAAMwlD,OAAO,GAAGF,UAAU,CAACr1H,GAAX,CAAew1H,cAA/B;;AAEA,gBAAKD,OAAO,KAAKn0H,SAAjB,EAA6B;AAE5Bm0H,qBAAO,CAAC90B,QAAR,CAAkB+d,GAAlB,EACC4R,QAAQ,CAAC/+D,qBAAT,CAAgCzwC,MAAM,CAACsvC,WAAvC,CADD;AAGA;AAED;;AAED,cAAK1tC,QAAQ,CAAC6pG,mBAAT,IACJ7pG,QAAQ,CAAC2pG,kBADL,IAEJ3pG,QAAQ,CAACypG,qBAFL,IAGJzpG,QAAQ,CAAC4uD,mBAHL,IAIJ5uD,QAAQ,CAAC0tF,sBAJL,IAKJ1tF,QAAQ,CAACsgE,gBALV,EAK6B;AAE5BuyC,sBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,gBAA1B,EAA4C59F,MAAM,CAAClN,oBAAP,KAAgC,IAA5E;AAEA;;AAED,cAAK8O,QAAQ,CAAC6pG,mBAAT,IACJ7pG,QAAQ,CAAC2pG,kBADL,IAEJ3pG,QAAQ,CAACypG,qBAFL,IAGJzpG,QAAQ,CAAC4uD,mBAHL,IAIJ5uD,QAAQ,CAAC0tF,sBAJL,IAKJ1tF,QAAQ,CAACsgE,gBALL,IAMJtgE,QAAQ,CAACgrG,gBANL,IAOJhrG,QAAQ,CAACuuD,QAPV,EAOqB;AAEpBskD,sBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,YAA1B,EAAwC59F,MAAM,CAACkvC,kBAA/C;AAEA;AAED,SAjKqD,CAmKtD;AACA;AACA;;;AAEA,YAAKttC,QAAQ,CAACuuD,QAAd,EAAyB;AAExBskD,oBAAU,CAACzuB,WAAX,CAAwB4X,GAAxB,EAA6B98G,MAA7B,EAAqC,YAArC;AACA2zH,oBAAU,CAACzuB,WAAX,CAAwB4X,GAAxB,EAA6B98G,MAA7B,EAAqC,mBAArC;AAEA,cAAM+tG,QAAQ,GAAG/tG,MAAM,CAAC+tG,QAAxB;;AAEA,cAAKA,QAAL,EAAgB;AAEf,gBAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;AAEA,gBAAKxkB,YAAY,CAACyR,mBAAlB,EAAwC;AAEvC,kBAAK8S,QAAQ,CAACgmB,WAAT,KAAyBr0H,SAA9B,EAA0C;AAEzC;AACA;AACA;AACA;AACA;AACA;AAGA,oBAAI0H,IAAI,GAAGyC,IAAI,CAACmK,IAAL,CAAWg6F,KAAK,CAACr9G,MAAN,GAAe,CAA1B,CAAX,CAVyC,CAUC;;AAC1CyW,oBAAI,GAAGqzC,SAAS,CAAC+B,cAAV,CAA0Bp1C,IAA1B,CAAP;AACAA,oBAAI,GAAGyC,IAAI,CAACmE,GAAL,CAAU5G,IAAV,EAAgB,CAAhB,CAAP;AAEA,oBAAM4sH,YAAY,GAAG,IAAIpiD,YAAJ,CAAkBxqE,IAAI,GAAGA,IAAP,GAAc,CAAhC,CAArB,CAdyC,CAciB;;AAC1D4sH,4BAAY,CAACrlH,GAAb,CAAkBo/F,QAAQ,CAACimB,YAA3B,EAfyC,CAeE;;AAE3C,oBAAMD,WAAW,GAAG,IAAIlwC,WAAJ,CAAiBmwC,YAAjB,EAA+B5sH,IAA/B,EAAqCA,IAArC,EAA2CwsC,UAA3C,EAAuDR,SAAvD,CAApB;AAEA26D,wBAAQ,CAACimB,YAAT,GAAwBA,YAAxB;AACAjmB,wBAAQ,CAACgmB,WAAT,GAAuBA,WAAvB;AACAhmB,wBAAQ,CAACkmB,eAAT,GAA2B7sH,IAA3B;AAEA;;AAEDusH,wBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,aAA1B,EAAyC/O,QAAQ,CAACgmB,WAAlD,EAA+D1tE,QAA/D;AACAstE,wBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,iBAA1B,EAA6C/O,QAAQ,CAACkmB,eAAtD;AAEA,aA9BD,MA8BO;AAENN,wBAAU,CAACzuB,WAAX,CAAwB4X,GAAxB,EAA6B/O,QAA7B,EAAuC,cAAvC;AAEA;AAED;AAED;;AAED,YAAK0lB,eAAe,IAAIvjB,kBAAkB,CAAC34C,aAAnB,KAAqCv3D,MAAM,CAACu3D,aAApE,EAAoF;AAEnF24C,4BAAkB,CAAC34C,aAAnB,GAAmCv3D,MAAM,CAACu3D,aAA1C;AACAo8D,oBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,eAA1B,EAA2C98G,MAAM,CAACu3D,aAAlD;AAEA;;AAED,YAAKk8D,eAAL,EAAuB;AAEtBE,oBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,qBAA1B,EAAiDoQ,KAAK,CAACD,mBAAvD;;AAEA,cAAK/c,kBAAkB,CAACijB,WAAxB,EAAsC;AAErC;AAEA;AACA;AACA;AACA;AACA;AACA;AAEAe,yCAA6B,CAAEN,UAAF,EAAcF,aAAd,CAA7B;AAEA,WAjBqB,CAmBtB;;;AAEA,cAAKp4D,GAAG,IAAIx6C,QAAQ,CAACw6C,GAArB,EAA2B;AAE1BpB,qBAAS,CAACgwD,kBAAV,CAA8B0J,UAA9B,EAA0Ct4D,GAA1C;AAEA;;AAEDpB,mBAAS,CAACmwD,uBAAV,CAAmCuJ,UAAnC,EAA+C9yG,QAA/C,EAAyDu6C,WAAzD,EAAsE4yD,WAAtE,EAAmFD,OAAnF,EA3BsB,CA6BtB;AACA;;AAEA,cAAK4F,UAAU,CAACO,KAAX,KAAqBz0H,SAA1B,EAAsCk0H,UAAU,CAACO,KAAX,CAAiB/4H,KAAjB,GAAyBuqF,WAAW,CAACyuC,KAArC;AACtC,cAAKR,UAAU,CAACS,KAAX,KAAqB30H,SAA1B,EAAsCk0H,UAAU,CAACS,KAAX,CAAiBj5H,KAAjB,GAAyBuqF,WAAW,CAAC2uC,KAArC;AAEtCxvB,uBAAa,CAACK,MAAd,CAAsB2X,GAAtB,EAA2B5M,kBAAkB,CAACojB,YAA9C,EAA4DM,UAA5D,EAAwEvtE,QAAxE;AAEA;;AAED,YAAKvlC,QAAQ,CAACsgE,gBAAT,IAA6BtgE,QAAQ,CAACqgE,kBAAT,KAAgC,IAAlE,EAAyE;AAExE2jB,uBAAa,CAACK,MAAd,CAAsB2X,GAAtB,EAA2B5M,kBAAkB,CAACojB,YAA9C,EAA4DM,UAA5D,EAAwEvtE,QAAxE;AACAvlC,kBAAQ,CAACqgE,kBAAT,GAA8B,KAA9B;AAEA;;AAED,YAAKrgE,QAAQ,CAAC8qG,gBAAd,EAAiC;AAEhC+H,oBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,QAA1B,EAAoC98G,MAAM,CAACwtC,MAA3C;AAEA,SAnRqD,CAqRtD;;;AAEAmmF,kBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,iBAA1B,EAA6C98G,MAAM,CAACi3D,eAApD;AACA08D,kBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,cAA1B,EAA0C98G,MAAM,CAACk3D,YAAjD;AACAy8D,kBAAU,CAAC50B,QAAX,CAAqB+d,GAArB,EAA0B,aAA1B,EAAyC98G,MAAM,CAACwuD,WAAhD;AAEA,eAAO2nC,OAAP;AAEA,OArpDmC,CAupDpC;;;AAEA,eAAS+9B,6BAAT,CAAwCj0C,QAAxC,EAAkD7kF,KAAlD,EAA0D;AAEzD6kF,gBAAQ,CAACgH,iBAAT,CAA2B3zE,WAA3B,GAAyClY,KAAzC;AACA6kF,gBAAQ,CAACiH,UAAT,CAAoB5zE,WAApB,GAAkClY,KAAlC;AAEA6kF,gBAAQ,CAACkH,iBAAT,CAA2B7zE,WAA3B,GAAyClY,KAAzC;AACA6kF,gBAAQ,CAACoH,uBAAT,CAAiC/zE,WAAjC,GAA+ClY,KAA/C;AACA6kF,gBAAQ,CAACkI,WAAT,CAAqB70E,WAArB,GAAmClY,KAAnC;AACA6kF,gBAAQ,CAACmI,iBAAT,CAA2B90E,WAA3B,GAAyClY,KAAzC;AACA6kF,gBAAQ,CAAC2H,UAAT,CAAoBt0E,WAApB,GAAkClY,KAAlC;AACA6kF,gBAAQ,CAAC+H,gBAAT,CAA0B10E,WAA1B,GAAwClY,KAAxC;AACA6kF,gBAAQ,CAAC2I,cAAT,CAAwBt1E,WAAxB,GAAsClY,KAAtC;AACA6kF,gBAAQ,CAACwI,gBAAT,CAA0Bn1E,WAA1B,GAAwClY,KAAxC;AAEA;;AAED,eAASg4H,mBAAT,CAA8BtyG,QAA9B,EAAyC;AAExC,eAAOA,QAAQ,CAACypG,qBAAT,IAAkCzpG,QAAQ,CAAC2pG,kBAA3C,IAAiE3pG,QAAQ,CAAC6pG,mBAA1E,IACN7pG,QAAQ,CAAC0tF,sBADH,IAC6B1tF,QAAQ,CAACgrG,gBADtC,IAEJhrG,QAAQ,CAACsgE,gBAAT,IAA6BtgE,QAAQ,CAAC4/D,MAAT,KAAoB,IAFpD;AAIA,OA/qDmC,CAirDpC;;;AACA,WAAK0mC,cAAL,GAAsB,UAAWhsH,KAAX,EAAmB;AAExC,YAAKgyH,YAAY,KAAKhyH,KAAjB,IAA0BmyH,oBAAoB,KAAK,IAAxD,EAA+DzQ,GAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BlmH,KAA5B;AAE/DgyH,oBAAY,GAAGhyH,KAAf;AAEA,OAND;;AAQA,WAAKk6G,iBAAL,GAAyB,YAAY;AAEpC,eAAO+X,sBAAP;AAEA,OAJD;;AAMA,WAAK7X,oBAAL,GAA4B,YAAY;AAEvC,eAAO8X,yBAAP;AAEA,OAJD;;AAMA,WAAKlqC,eAAL,GAAuB,YAAY;AAElC,eAAOmqC,oBAAP;AAEA,OAJD;;AAMA,WAAKlqC,eAAL,GAAuB,UAAWZ,YAAX,EAAyB4yB,cAAzB,EAAyCE,iBAAzC,EAA6D;AAEnFgY,4BAAoB,GAAG9qC,YAAvB;AACA4qC,8BAAsB,GAAGhY,cAAzB;AACAiY,iCAAyB,GAAG/X,iBAA5B;;AAEA,YAAK9yB,YAAY,IAAI2E,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,EAA+Bu8B,kBAA/B,KAAsDt/G,SAA3E,EAAuF;AAEtF2mD,kBAAQ,CAACg8D,iBAAT,CAA4B5/B,YAA5B;AAEA;;AAED,YAAI0+B,WAAW,GAAGiM,YAAlB;AACA,YAAInL,MAAM,GAAG,KAAb;;AAEA,YAAKx/B,YAAL,EAAoB;AAEnB,cAAMu8B,kBAAkB,GAAG53B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,EAA+Bu8B,kBAA1D;;AAEA,cAAKv8B,YAAY,CAACC,uBAAlB,EAA4C;AAE3Cy+B,uBAAW,GAAGnC,kBAAkB,CAAE3J,cAAc,IAAI,CAApB,CAAhC;AACA4M,kBAAM,GAAG,IAAT;AAEA,WALD,MAKO,IAAKx/B,YAAY,CAACv5B,8BAAlB,EAAmD;AAEzDi4D,uBAAW,GAAG/5B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,EAA+B08B,8BAA7C;AAEA,WAJM,MAIA;AAENgC,uBAAW,GAAGnC,kBAAd;AAEA;;AAED4O,0BAAgB,CAACphH,IAAjB,CAAuBi2E,YAAY,CAAC/5B,QAApC;;AACAmlE,yBAAe,CAACrhH,IAAhB,CAAsBi2E,YAAY,CAACj6B,OAAnC;;AACAslE,6BAAmB,GAAGrrC,YAAY,CAACh6B,WAAnC;AAEA,SAvBD,MAuBO;AAENmlE,0BAAgB,CAACphH,IAAjB,CAAuBgoG,SAAvB,EAAmC9lG,cAAnC,CAAmDu/G,WAAnD,EAAiEx2G,KAAjE;;AACAo2G,yBAAe,CAACrhH,IAAhB,CAAsB4hH,QAAtB,EAAiC1/G,cAAjC,CAAiDu/G,WAAjD,EAA+Dx2G,KAA/D;;AACAq2G,6BAAmB,GAAGO,YAAtB;AAEA;;AAED,YAAKb,mBAAmB,KAAKrM,WAA7B,EAA2C;AAE1CrE,aAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AACAqM,6BAAmB,GAAGrM,WAAtB;AAEA;;AAEDt0G,aAAK,CAAC67C,QAAN,CAAgBklE,gBAAhB;AACA/gH,aAAK,CAAC27C,OAAN,CAAeqlE,eAAf;AACAhhH,aAAK,CAAC+oG,cAAN,CAAsBkY,mBAAtB;;AAEA,YAAK7L,MAAL,EAAc;AAEb,cAAMnE,iBAAiB,GAAG12B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAY,CAAC95B,OAA7B,CAA1B;;AACAm0D,aAAG,CAACyE,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,SAAUlM,cAAc,IAAI,CAA5B,CAAxC,EAAyEyI,iBAAiB,CAACe,cAA3F,EAA2GtJ,iBAAiB,IAAI,CAAhI;AAEA;AAED,OAhED;;AAkEA,WAAKgf,sBAAL,GAA8B,UAAW9xC,YAAX,EAAyBxmF,CAAzB,EAA4B+W,CAA5B,EAA+B4M,KAA/B,EAAsCD,MAAtC,EAA8C0P,MAA9C,EAAsDmlG,mBAAtD,EAA4E;AAEzG,YAAK,EAAI/xC,YAAY,IAAIA,YAAY,CAAC15B,mBAAjC,CAAL,EAA8D;AAE7Dt2D,iBAAO,CAACD,KAAR,CAAe,0FAAf;AACA;AAEA;;AAED,YAAI2uH,WAAW,GAAG/5B,UAAU,CAACjlF,GAAX,CAAgBsgF,YAAhB,EAA+Bu8B,kBAAjD;;AAEA,YAAKv8B,YAAY,CAACC,uBAAb,IAAwC8xC,mBAAmB,KAAK90H,SAArE,EAAiF;AAEhFyhH,qBAAW,GAAGA,WAAW,CAAEqT,mBAAF,CAAzB;AAEA;;AAED,YAAKrT,WAAL,EAAmB;AAElB,cAAIsT,OAAO,GAAG,KAAd;;AAEA,cAAKtT,WAAW,KAAKqM,mBAArB,EAA2C;AAE1C1Q,eAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AAEAsT,mBAAO,GAAG,IAAV;AAEA;;AAED,cAAI;AAEH,gBAAM9rE,OAAO,GAAG85B,YAAY,CAAC95B,OAA7B;AACA,gBAAM+rE,aAAa,GAAG/rE,OAAO,CAACxD,MAA9B;AACA,gBAAM07D,WAAW,GAAGl4D,OAAO,CAAC3yD,IAA5B;;AAEA,gBAAK0+H,aAAa,KAAK9gF,UAAlB,IAAgCmpE,KAAK,CAACsD,OAAN,CAAeqU,aAAf,MAAmC5X,GAAG,CAAC3+C,YAAJ,CAAkB,KAAlB,CAAxE,EAAoG;AAEnG1rE,qBAAO,CAACD,KAAR,CAAe,2GAAf;AACA;AAEA;;AAED,gBAAKquH,WAAW,KAAK/tE,gBAAhB,IAAoCiqE,KAAK,CAACsD,OAAN,CAAeQ,WAAf,MAAiC/D,GAAG,CAAC3+C,YAAJ,CAAkB,KAAlB,CAArE,IAAkG;AACtG,cAAI0iD,WAAW,KAAKztE,SAAhB,KAA+Bo2C,YAAY,CAACC,QAAb,IAAyB7I,UAAU,CAACz+E,GAAX,CAAgB,mBAAhB,CAAzB,IAAkEy+E,UAAU,CAACz+E,GAAX,CAAgB,0BAAhB,CAAjG,CAAJ,CADI,IACqJ;AACzJ,cAAI0+G,WAAW,KAAKxtE,aAAhB,KAAmCm2C,YAAY,CAACC,QAAb,GAAwB7I,UAAU,CAACz+E,GAAX,CAAgB,wBAAhB,CAAxB,GAAqEy+E,UAAU,CAACz+E,GAAX,CAAgB,6BAAhB,CAAxG,CAAJ,CAFD,EAEmK;AAElK1P,qBAAO,CAACD,KAAR,CAAe,qHAAf;AACA;AAEA;;AAED,gBAAKsqH,GAAG,CAAC6X,sBAAJ,CAA4B,KAA5B,MAAwC,KAA7C,EAAqD;AAEpD;AAEA,kBAAO14H,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAMwmF,YAAY,CAAC7iE,KAAb,GAAqBA,KAAxC,IAAuD5M,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAMyvE,YAAY,CAAC9iE,MAAb,GAAsBA,MAAnG,EAAgH;AAE/Gm9F,mBAAG,CAAC8X,UAAJ,CAAgB34H,CAAhB,EAAmB+W,CAAnB,EAAsB4M,KAAtB,EAA6BD,MAA7B,EAAqCo9F,KAAK,CAACsD,OAAN,CAAeqU,aAAf,CAArC,EAAqE3X,KAAK,CAACsD,OAAN,CAAeQ,WAAf,CAArE,EAAmGxxF,MAAnG;AAEA;AAED,aAVD,MAUO;AAEN58B,qBAAO,CAACD,KAAR,CAAe,4GAAf;AAEA;AAED,WAtCD,SAsCU;AAET,gBAAKiiI,OAAL,EAAe;AAEd3X,iBAAG,CAACwE,eAAJ,CAAqB,KAArB,EAA4BkM,mBAA5B;AAEA;AAED;AAED;AAED,OA/ED;;AAiFA,WAAKqH,wBAAL,GAAgC,UAAW/oH,QAAX,EAAqB68C,OAArB,EAA8BpjC,KAA9B,EAAsC;AAErE,YAAKA,KAAK,KAAK7lB,SAAf,EAA2B6lB,KAAK,GAAG,CAAR;AAE3B,YAAMuvG,UAAU,GAAGjrH,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAa,CAAE2U,KAAf,CAAnB;AACA,YAAM3F,KAAK,GAAG/V,IAAI,CAAC4N,KAAL,CAAYkxC,OAAO,CAACj3D,KAAR,CAAckuB,KAAd,GAAsBk1G,UAAlC,CAAd;AACA,YAAMn1G,MAAM,GAAG9V,IAAI,CAAC4N,KAAL,CAAYkxC,OAAO,CAACj3D,KAAR,CAAciuB,MAAd,GAAuBm1G,UAAnC,CAAf;AACA,YAAM3W,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe13D,OAAO,CAACxD,MAAvB,CAAjB;AAEAkB,gBAAQ,CAACo5D,YAAT,CAAuB92D,OAAvB,EAAgC,CAAhC;;AAEAm0D,WAAG,CAACiY,cAAJ,CAAoB,IAApB,EAA0BxvG,KAA1B,EAAiC44F,QAAjC,EAA2CryG,QAAQ,CAAC7P,CAApD,EAAuD6P,QAAQ,CAACkH,CAAhE,EAAmE4M,KAAnE,EAA0ED,MAA1E,EAAkF,CAAlF;;AAEA9S,aAAK,CAAC6vG,aAAN;AAEA,OAfD;;AAiBA,WAAKsY,oBAAL,GAA4B,UAAWlpH,QAAX,EAAqBmpH,UAArB,EAAiCC,UAAjC,EAA6C3vG,KAA7C,EAAqD;AAEhF,YAAKA,KAAK,KAAK7lB,SAAf,EAA2B6lB,KAAK,GAAG,CAAR;AAE3B,YAAM3F,KAAK,GAAGq1G,UAAU,CAACvjI,KAAX,CAAiBkuB,KAA/B;AACA,YAAMD,MAAM,GAAGs1G,UAAU,CAACvjI,KAAX,CAAiBiuB,MAAhC;AACA,YAAMw+F,QAAQ,GAAGpB,KAAK,CAACsD,OAAN,CAAe6U,UAAU,CAAC/vE,MAA1B,CAAjB;AACA,YAAMi5D,MAAM,GAAGrB,KAAK,CAACsD,OAAN,CAAe6U,UAAU,CAACl/H,IAA1B,CAAf;AAEAqwD,gBAAQ,CAACo5D,YAAT,CAAuByV,UAAvB,EAAmC,CAAnC,EATgF,CAWhF;AACA;;AACApY,WAAG,CAACmD,WAAJ,CAAiB,KAAjB,EAAwBiV,UAAU,CAACpvE,KAAnC;;AACAg3D,WAAG,CAACmD,WAAJ,CAAiB,KAAjB,EAAwBiV,UAAU,CAACrvE,gBAAnC;;AACAi3D,WAAG,CAACmD,WAAJ,CAAiB,IAAjB,EAAuBiV,UAAU,CAACnvE,eAAlC;;AAEA,YAAKkvE,UAAU,CAACnxC,aAAhB,EAAgC;AAE/Bg5B,aAAG,CAACqY,aAAJ,CAAmB,IAAnB,EAAyB5vG,KAAzB,EAAgCzZ,QAAQ,CAAC7P,CAAzC,EAA4C6P,QAAQ,CAACkH,CAArD,EAAwD4M,KAAxD,EAA+DD,MAA/D,EAAuEw+F,QAAvE,EAAiFC,MAAjF,EAAyF6W,UAAU,CAACvjI,KAAX,CAAiBvB,IAA1G;AAEA,SAJD,MAIO;AAEN,cAAK8kI,UAAU,CAAC9U,mBAAhB,EAAsC;AAErCrD,eAAG,CAACsY,uBAAJ,CAA6B,IAA7B,EAAmC7vG,KAAnC,EAA0CzZ,QAAQ,CAAC7P,CAAnD,EAAsD6P,QAAQ,CAACkH,CAA/D,EAAkEiiH,UAAU,CAAC1vE,OAAX,CAAoB,CAApB,EAAwB3lC,KAA1F,EAAiGq1G,UAAU,CAAC1vE,OAAX,CAAoB,CAApB,EAAwB5lC,MAAzH,EAAiIw+F,QAAjI,EAA2I8W,UAAU,CAAC1vE,OAAX,CAAoB,CAApB,EAAwBp1D,IAAnK;AAEA,WAJD,MAIO;AAEN2sH,eAAG,CAACqY,aAAJ,CAAmB,IAAnB,EAAyB5vG,KAAzB,EAAgCzZ,QAAQ,CAAC7P,CAAzC,EAA4C6P,QAAQ,CAACkH,CAArD,EAAwDmrG,QAAxD,EAAkEC,MAAlE,EAA0E6W,UAAU,CAACvjI,KAArF;AAEA;AAED,SAjC+E,CAmChF;;;AACA,YAAK6zB,KAAK,KAAK,CAAV,IAAe2vG,UAAU,CAACtvE,eAA/B,EAAiDk3D,GAAG,CAACe,cAAJ,CAAoB,IAApB;AAEjDhxG,aAAK,CAAC6vG,aAAN;AAEA,OAxCD;;AA0CA,WAAKsD,WAAL,GAAmB,UAAWr3D,OAAX,EAAqB;AAEvCtC,gBAAQ,CAACo5D,YAAT,CAAuB92D,OAAvB,EAAgC,CAAhC;AAEA97C,aAAK,CAAC6vG,aAAN;AAEA,OAND;;AAQA,UAAK,OAAOjhD,kBAAP,KAA8B,WAAnC,EAAiD;AAEhDA,0BAAkB,CAACn3D,aAAnB,CAAkC,IAAIo3D,WAAJ,CAAiB,SAAjB,EAA4B;AAAEC,gBAAM,EAAE;AAAV,SAA5B,CAAlC,EAFgD,CAEoC;;AAEpF;AAED;;AAED,aAAS05D,cAAT,CAAyBx6D,UAAzB,EAAsC;AAErCoxD,mBAAa,CAACtmH,IAAd,CAAoB,IAApB,EAA0Bk1D,UAA1B;AAEA;;AAEDw6D,kBAAc,CAAC7sH,SAAf,GAA2B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAemlH,aAAa,CAACzjH,SAA7B,CAAf,EAAyD;AAEnF0M,iBAAW,EAAEmgH,cAFsE;AAInFnG,sBAAgB,EAAE;AAJiE,KAAzD,CAA3B;;AAQA,aAASoG,OAAT,CAAkBr0G,KAAlB,EAAyBmpG,OAAzB,EAAmC;AAElC,WAAK/5H,IAAL,GAAY,EAAZ;AAEA,WAAK4wB,KAAL,GAAa,IAAIgmD,KAAJ,CAAWhmD,KAAX,CAAb;AACA,WAAKmpG,OAAL,GAAiBA,OAAO,KAAK1qH,SAAd,GAA4B0qH,OAA5B,GAAsC,OAArD;AAEA;;AAEDv3H,UAAM,CAACiiC,MAAP,CAAewgG,OAAO,CAAC9sH,SAAvB,EAAkC;AAEjCimG,eAAS,EAAE,IAFsB;AAIjC7iG,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI0pH,OAAJ,CAAa,KAAKr0G,KAAlB,EAAyB,KAAKmpG,OAA9B,CAAP;AAEA,OARgC;AAUjCjkE,YAAM,EAAE;AAAW;AAAa;AAE/B,eAAO;AACNnwD,cAAI,EAAE,SADA;AAENirB,eAAK,EAAE,KAAKA,KAAL,CAAWwnD,MAAX,EAFD;AAGN2hD,iBAAO,EAAE,KAAKA;AAHR,SAAP;AAMA;AAlBgC,KAAlC;;AAsBA,aAASmL,GAAT,CAAct0G,KAAd,EAAqBozC,IAArB,EAA2BC,GAA3B,EAAiC;AAEhC,WAAKjkE,IAAL,GAAY,EAAZ;AAEA,WAAK4wB,KAAL,GAAa,IAAIgmD,KAAJ,CAAWhmD,KAAX,CAAb;AAEA,WAAKozC,IAAL,GAAcA,IAAI,KAAK30D,SAAX,GAAyB20D,IAAzB,GAAgC,CAA5C;AACA,WAAKC,GAAL,GAAaA,GAAG,KAAK50D,SAAV,GAAwB40D,GAAxB,GAA8B,IAAzC;AAEA;;AAEDzhE,UAAM,CAACiiC,MAAP,CAAeygG,GAAG,CAAC/sH,SAAnB,EAA8B;AAE7B2hH,WAAK,EAAE,IAFsB;AAI7Bv+G,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI2pH,GAAJ,CAAS,KAAKt0G,KAAd,EAAqB,KAAKozC,IAA1B,EAAgC,KAAKC,GAArC,CAAP;AAEA,OAR4B;AAU7BnO,YAAM,EAAE;AAAW;AAAa;AAE/B,eAAO;AACNnwD,cAAI,EAAE,KADA;AAENirB,eAAK,EAAE,KAAKA,KAAL,CAAWwnD,MAAX,EAFD;AAGNpU,cAAI,EAAE,KAAKA,IAHL;AAINC,aAAG,EAAE,KAAKA;AAJJ,SAAP;AAOA;AAnB4B,KAA9B;;AAuBA,aAASkhE,iBAAT,CAA4BtnG,KAA5B,EAAmCiqE,MAAnC,EAA4C;AAE3C,WAAKjqE,KAAL,GAAaA,KAAb;AACA,WAAKiqE,MAAL,GAAcA,MAAd;AACA,WAAK99B,KAAL,GAAansC,KAAK,KAAKxuB,SAAV,GAAsBwuB,KAAK,CAACv9B,MAAN,GAAewnG,MAArC,GAA8C,CAA3D;AAEA,WAAKpoB,KAAL,GAAar2B,eAAb;AACA,WAAKs2B,WAAL,GAAmB;AAAEhjE,cAAM,EAAE,CAAV;AAAaqtD,aAAK,EAAE,CAAE;AAAtB,OAAnB;AAEA,WAAK/wC,OAAL,GAAe,CAAf;AAEA,WAAK2xB,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA;;AAED/nD,UAAM,CAACk7C,cAAP,CAAuBynF,iBAAiB,CAAChtH,SAAzC,EAAoD,aAApD,EAAmE;AAElEmG,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,YAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKkuB,OAAL;AAEtB;AANiE,KAAnE;AAUAz2B,UAAM,CAACiiC,MAAP,CAAe0gG,iBAAiB,CAAChtH,SAAjC,EAA4C;AAE3CitH,yBAAmB,EAAE,IAFsB;AAI3CvlD,sBAAgB,EAAE,4BAAY,CAAE,CAJW;AAM3CC,cAAQ,EAAE,kBAAW/0E,KAAX,EAAmB;AAE5B,aAAK20E,KAAL,GAAa30E,KAAb;AAEA,eAAO,IAAP;AAEA,OAZ0C;AAc3CoR,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAK/f,KAAL,GAAa,IAAI+f,MAAM,CAAC/f,KAAP,CAAahZ,WAAjB,CAA8B+4B,MAAM,CAAC/f,KAArC,CAAb;AACA,aAAKmsC,KAAL,GAAapsB,MAAM,CAACosB,KAApB;AACA,aAAK89B,MAAL,GAAclqD,MAAM,CAACkqD,MAArB;AACA,aAAKpoB,KAAL,GAAa9hC,MAAM,CAAC8hC,KAApB;AAEA,eAAO,IAAP;AAEA,OAvB0C;AAyB3CK,YAAM,EAAE,gBAAWC,MAAX,EAAmBvwB,SAAnB,EAA8BwwB,MAA9B,EAAuC;AAE9CD,cAAM,IAAI,KAAK8nB,MAAf;AACA7nB,cAAM,IAAIxwB,SAAS,CAACq4C,MAApB;;AAEA,aAAM,IAAI7mG,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKo8F,MAA1B,EAAkC7mG,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,eAAK48B,KAAL,CAAYmiD,MAAM,GAAG/+E,KAArB,IAA2BwuD,SAAS,CAAC5xB,KAAV,CAAiBoiD,MAAM,GAAGh/E,KAA1B,CAA3B;AAEA;;AAED,eAAO,IAAP;AAEA,OAtC0C;AAwC3Cqd,SAAG,EAAE,aAAWvT,KAAX,EAAkB4R,MAAlB,EAA2B;AAE/B,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,aAAKkhB,KAAL,CAAWvf,GAAX,CAAgBvT,KAAhB,EAAuB4R,MAAvB;AAEA,eAAO,IAAP;AAEA,OAhD0C;AAkD3CpB,WAAK,EAAE,eAAWzb,IAAX,EAAkB;AAExB,YAAKA,IAAI,CAACulI,YAAL,KAAsBh2H,SAA3B,EAAuC;AAEtCvP,cAAI,CAACulI,YAAL,GAAoB,EAApB;AAEA;;AAED,YAAK,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAAlB,KAA4Bj2H,SAAjC,EAA6C;AAE5C,eAAKwuB,KAAL,CAAWmB,MAAX,CAAkBsmG,KAAlB,GAA0Bl7E,SAAS,CAACG,YAAV,EAA1B;AAEA;;AAED,YAAKzqD,IAAI,CAACulI,YAAL,CAAmB,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAArC,MAAiDj2H,SAAtD,EAAkE;AAEjEvP,cAAI,CAACulI,YAAL,CAAmB,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAArC,IAA+C,KAAKznG,KAAL,CAAWn+B,KAAX,CAAkB,CAAlB,EAAsBs/B,MAArE;AAEA;;AAED,YAAMnB,KAAK,GAAG,IAAI,KAAKA,KAAL,CAAWhZ,WAAf,CAA4B/kB,IAAI,CAACulI,YAAL,CAAmB,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAArC,CAA5B,CAAd;AAEA,YAAMC,EAAE,GAAG,IAAIJ,iBAAJ,CAAuBtnG,KAAvB,EAA8B,KAAKiqE,MAAnC,CAAX;AACAy9B,UAAE,CAACzlD,QAAH,CAAa,KAAKJ,KAAlB;AAEA,eAAO6lD,EAAP;AAEA,OA7E0C;AA+E3C5kD,cAAQ,EAAE,kBAAW9jB,QAAX,EAAsB;AAE/B,aAAKgjB,gBAAL,GAAwBhjB,QAAxB;AAEA,eAAO,IAAP;AAEA,OArF0C;AAuF3C/G,YAAM,EAAE,gBAAWh2D,IAAX,EAAkB;AAEzB,YAAKA,IAAI,CAACulI,YAAL,KAAsBh2H,SAA3B,EAAuC;AAEtCvP,cAAI,CAACulI,YAAL,GAAoB,EAApB;AAEA,SANwB,CAQzB;;;AAEA,YAAK,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAAlB,KAA4Bj2H,SAAjC,EAA6C;AAE5C,eAAKwuB,KAAL,CAAWmB,MAAX,CAAkBsmG,KAAlB,GAA0Bl7E,SAAS,CAACG,YAAV,EAA1B;AAEA;;AAED,YAAKzqD,IAAI,CAACulI,YAAL,CAAmB,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAArC,MAAiDj2H,SAAtD,EAAkE;AAEjEvP,cAAI,CAACulI,YAAL,CAAmB,KAAKxnG,KAAL,CAAWmB,MAAX,CAAkBsmG,KAArC,IAA+C5yG,KAAK,CAACva,SAAN,CAAgBzY,KAAhB,CAAsB4V,IAAtB,CAA4B,IAAIgf,WAAJ,CAAiB,KAAKuJ,KAAL,CAAWmB,MAA5B,CAA5B,CAA/C;AAEA,SApBwB,CAsBzB;;;AAEA,eAAO;AACN4rB,cAAI,EAAE,KAAKA,IADL;AAEN5rB,gBAAM,EAAE,KAAKnB,KAAL,CAAWmB,MAAX,CAAkBsmG,KAFpB;AAGN3/H,cAAI,EAAE,KAAKk4B,KAAL,CAAWhZ,WAAX,CAAuB7kB,IAHvB;AAIN8nG,gBAAM,EAAE,KAAKA;AAJP,SAAP;AAOA;AAtH0C,KAA5C;;AA0HA,QAAM09B,SAAS,GAAG,IAAIzoE,OAAJ,EAAlB;;AAEA,aAAS0oE,0BAAT,CAAqCC,iBAArC,EAAwDjmD,QAAxD,EAAkE9iE,MAAlE,EAA0Eq8D,UAA1E,EAAuF;AAEtF,WAAKh5E,IAAL,GAAY,EAAZ;AAEA,WAAKF,IAAL,GAAY4lI,iBAAZ;AACA,WAAKjmD,QAAL,GAAgBA,QAAhB;AACA,WAAK9iE,MAAL,GAAcA,MAAd;AAEA,WAAKq8D,UAAL,GAAkBA,UAAU,KAAK,IAAjC;AAEA;;AAEDx2E,UAAM,CAAC0qD,gBAAP,CAAyBu4E,0BAA0B,CAACttH,SAApD,EAA+D;AAE9D6xD,WAAK,EAAE;AAENl4D,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKhS,IAAL,CAAUkqE,KAAjB;AAEA;AANK,OAFuD;AAY9DnsC,WAAK,EAAE;AAEN/rB,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAKhS,IAAL,CAAU+9B,KAAjB;AAEA;AANK,OAZuD;AAsB9D5a,iBAAW,EAAE;AAEZ3E,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB,eAAKjL,IAAL,CAAUmjB,WAAV,GAAwBlY,KAAxB;AAEA;AANW;AAtBiD,KAA/D;AAkCAvI,UAAM,CAACiiC,MAAP,CAAeghG,0BAA0B,CAACttH,SAA1C,EAAqD;AAEpD4hF,kCAA4B,EAAE,IAFsB;AAIpDpjC,kBAAY,EAAE,sBAAWhhC,CAAX,EAAe;AAE5B,aAAM,IAAI10B,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAK5L,IAAL,CAAUkqE,KAA/B,EAAsC/oE,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnDukI,mBAAS,CAAC55H,CAAV,GAAc,KAAK8jD,IAAL,CAAWzuD,KAAX,CAAd;AACAukI,mBAAS,CAAC7iH,CAAV,GAAc,KAAKgtC,IAAL,CAAW1uD,KAAX,CAAd;AACAukI,mBAAS,CAACt3G,CAAV,GAAc,KAAK8pC,IAAL,CAAW/2D,KAAX,CAAd;;AAEAukI,mBAAS,CAAC7uE,YAAV,CAAwBhhC,CAAxB;;AAEA,eAAK8qD,MAAL,CAAax/E,KAAb,EAAgBukI,SAAS,CAAC55H,CAA1B,EAA6B45H,SAAS,CAAC7iH,CAAvC,EAA0C6iH,SAAS,CAACt3G,CAApD;AAEA;;AAED,eAAO,IAAP;AAEA,OApBmD;AAsBpDo/B,UAAI,EAAE,cAAWvlC,KAAX,EAAkBnc,CAAlB,EAAsB;AAE3B,aAAK9L,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAjD,IAA4D/Q,CAA5D;AAEA,eAAO,IAAP;AAEA,OA5BmD;AA8BpD2hD,UAAI,EAAE,cAAWxlC,KAAX,EAAkBpF,CAAlB,EAAsB;AAE3B,aAAK7iB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,IAAgEgG,CAAhE;AAEA,eAAO,IAAP;AAEA,OApCmD;AAsCpD8zC,UAAI,EAAE,cAAW1uC,KAAX,EAAkBmG,CAAlB,EAAsB;AAE3B,aAAKpuB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,IAAgEuR,CAAhE;AAEA,eAAO,IAAP;AAEA,OA5CmD;AA8CpDwoC,UAAI,EAAE,cAAW3uC,KAAX,EAAkB+N,CAAlB,EAAsB;AAE3B,aAAKh2B,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,IAAgEmZ,CAAhE;AAEA,eAAO,IAAP;AAEA,OApDmD;AAsDpD45B,UAAI,EAAE,cAAW3nC,KAAX,EAAmB;AAExB,eAAO,KAAKjoB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAjD,CAAP;AAEA,OA1DmD;AA4DpDgzC,UAAI,EAAE,cAAW5nC,KAAX,EAAmB;AAExB,eAAO,KAAKjoB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,CAAP;AAEA,OAhEmD;AAkEpDq7C,UAAI,EAAE,cAAWjwC,KAAX,EAAmB;AAExB,eAAO,KAAKjoB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,CAAP;AAEA,OAtEmD;AAwEpDs7C,UAAI,EAAE,cAAWlwC,KAAX,EAAmB;AAExB,eAAO,KAAKjoB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAhC,GAAyC,CAA1D,CAAP;AAEA,OA5EmD;AA8EpD6jE,WAAK,EAAE,eAAWz4D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAyB;AAE/BoF,aAAK,GAAGA,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAxC;AAEA,aAAK7c,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+Bnc,CAA/B;AACA,aAAK9L,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+BpF,CAA/B;AAEA,eAAO,IAAP;AAEA,OAvFmD;AAyFpD89D,YAAM,EAAE,gBAAW14D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAwBuL,CAAxB,EAA4B;AAEnCnG,aAAK,GAAGA,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAxC;AAEA,aAAK7c,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+Bnc,CAA/B;AACA,aAAK9L,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+BpF,CAA/B;AACA,aAAK7iB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+BmG,CAA/B;AAEA,eAAO,IAAP;AAEA,OAnGmD;AAqGpDwyD,aAAO,EAAE,iBAAW34D,KAAX,EAAkBnc,CAAlB,EAAqB+W,CAArB,EAAwBuL,CAAxB,EAA2B4H,CAA3B,EAA+B;AAEvC/N,aAAK,GAAGA,KAAK,GAAG,KAAKjoB,IAAL,CAAUgoG,MAAlB,GAA2B,KAAKnrF,MAAxC;AAEA,aAAK7c,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+Bnc,CAA/B;AACA,aAAK9L,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+BpF,CAA/B;AACA,aAAK7iB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+BmG,CAA/B;AACA,aAAKpuB,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAG,CAAzB,IAA+B+N,CAA/B;AAEA,eAAO,IAAP;AAEA,OAhHmD;AAkHpDva,WAAK,EAAE,eAAWzb,IAAX,EAAkB;AAExB,YAAKA,IAAI,KAAKuP,SAAd,EAA0B;AAEzBjN,iBAAO,CAACC,GAAR,CAAa,iHAAb;AAEA,cAAMw7B,KAAK,GAAG,EAAd;;AAEA,eAAM,IAAI58B,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAK+oE,KAA1B,EAAiC/oE,KAAC,EAAlC,EAAwC;AAEvC,gBAAM8mB,KAAK,GAAG9mB,KAAC,GAAG,KAAKnB,IAAL,CAAUgoG,MAAd,GAAuB,KAAKnrF,MAA1C;;AAEA,iBAAM,IAAIpb,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+E,QAA1B,EAAoCl+E,CAAC,EAArC,EAA2C;AAE1Cs8B,mBAAK,CAACl8B,IAAN,CAAY,KAAK7B,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAGxmB,CAAzB,CAAZ;AAEA;AAED;;AAED,iBAAO,IAAIi+E,eAAJ,CAAqB,IAAI,KAAK3hD,KAAL,CAAWhZ,WAAf,CAA4BgZ,KAA5B,CAArB,EAA0D,KAAK4hD,QAA/D,EAAyE,KAAKzG,UAA9E,CAAP;AAEA,SApBD,MAoBO;AAEN,cAAKl5E,IAAI,CAAC6lI,kBAAL,KAA4Bt2H,SAAjC,EAA6C;AAE5CvP,gBAAI,CAAC6lI,kBAAL,GAA0B,EAA1B;AAEA;;AAED,cAAK7lI,IAAI,CAAC6lI,kBAAL,CAAyB,KAAK7lI,IAAL,CAAU8qD,IAAnC,MAA8Cv7C,SAAnD,EAA+D;AAE9DvP,gBAAI,CAAC6lI,kBAAL,CAAyB,KAAK7lI,IAAL,CAAU8qD,IAAnC,IAA4C,KAAK9qD,IAAL,CAAUyb,KAAV,CAAiBzb,IAAjB,CAA5C;AAEA;;AAED,iBAAO,IAAI2lI,0BAAJ,CAAgC3lI,IAAI,CAAC6lI,kBAAL,CAAyB,KAAK7lI,IAAL,CAAU8qD,IAAnC,CAAhC,EAA2E,KAAK60B,QAAhF,EAA0F,KAAK9iE,MAA/F,EAAuG,KAAKq8D,UAA5G,CAAP;AAEA;AAED,OA1JmD;AA4JpDljB,YAAM,EAAE,gBAAWh2D,IAAX,EAAkB;AAEzB,YAAKA,IAAI,KAAKuP,SAAd,EAA0B;AAEzBjN,iBAAO,CAACC,GAAR,CAAa,sHAAb;AAEA,cAAMw7B,KAAK,GAAG,EAAd;;AAEA,eAAM,IAAI58B,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAK+oE,KAA1B,EAAiC/oE,KAAC,EAAlC,EAAwC;AAEvC,gBAAM8mB,KAAK,GAAG9mB,KAAC,GAAG,KAAKnB,IAAL,CAAUgoG,MAAd,GAAuB,KAAKnrF,MAA1C;;AAEA,iBAAM,IAAIpb,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+E,QAA1B,EAAoCl+E,CAAC,EAArC,EAA2C;AAE1Cs8B,mBAAK,CAACl8B,IAAN,CAAY,KAAK7B,IAAL,CAAU+9B,KAAV,CAAiB9V,KAAK,GAAGxmB,CAAzB,CAAZ;AAEA;AAED,WAhBwB,CAkBzB;;;AAEA,iBAAO;AACNk+E,oBAAQ,EAAE,KAAKA,QADT;AAEN95E,gBAAI,EAAE,KAAKk4B,KAAL,CAAWhZ,WAAX,CAAuB7kB,IAFvB;AAGN69B,iBAAK,EAAEA,KAHD;AAINm7C,sBAAU,EAAE,KAAKA;AAJX,WAAP;AAOA,SA3BD,MA2BO;AAEN;AAEA,cAAKl5E,IAAI,CAAC6lI,kBAAL,KAA4Bt2H,SAAjC,EAA6C;AAE5CvP,gBAAI,CAAC6lI,kBAAL,GAA0B,EAA1B;AAEA;;AAED,cAAK7lI,IAAI,CAAC6lI,kBAAL,CAAyB,KAAK7lI,IAAL,CAAU8qD,IAAnC,MAA8Cv7C,SAAnD,EAA+D;AAE9DvP,gBAAI,CAAC6lI,kBAAL,CAAyB,KAAK7lI,IAAL,CAAU8qD,IAAnC,IAA4C,KAAK9qD,IAAL,CAAUg2D,MAAV,CAAkBh2D,IAAlB,CAA5C;AAEA;;AAED,iBAAO;AACNi6F,wCAA4B,EAAE,IADxB;AAENta,oBAAQ,EAAE,KAAKA,QAFT;AAGN3/E,gBAAI,EAAE,KAAKA,IAAL,CAAU8qD,IAHV;AAINjuC,kBAAM,EAAE,KAAKA,MAJP;AAKNq8D,sBAAU,EAAE,KAAKA;AALX,WAAP;AAQA;AAED;AAnNmD,KAArD;AAuNA;;;;;;;;;;AAUA,aAASukC,cAAT,CAAyB/yC,UAAzB,EAAsC;AAErC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb;AAEA,WAAK3oE,GAAL,GAAW,IAAX;AAEA,WAAK+uE,QAAL,GAAgB,IAAhB;AAEA,WAAK7hC,QAAL,GAAgB,CAAhB;AAEA,WAAKmjC,eAAL,GAAuB,IAAvB;AAEA,WAAK1E,WAAL,GAAmB,IAAnB;AAEA,WAAKkC,SAAL,CAAgBtR,UAAhB;AAEA;;AAED+yC,kBAAc,CAACplG,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA3B;AACAolG,kBAAc,CAACplG,SAAf,CAAyB0M,WAAzB,GAAuC04F,cAAvC;AACAA,kBAAc,CAACplG,SAAf,CAAyBojH,gBAAzB,GAA4C,IAA5C;;AAEAhe,kBAAc,CAACplG,SAAf,CAAyBgE,IAAzB,GAAgC,UAAWyhC,MAAX,EAAoB;AAEnD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK3iB,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAK+uE,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAK7hC,QAAL,GAAgByC,MAAM,CAACzC,QAAvB;AAEA,WAAKmjC,eAAL,GAAuB1gC,MAAM,CAAC0gC,eAA9B;AAEA,aAAO,IAAP;AAEA,KAhBD;;AAkBA,QAAIsnD,SAAJ;;AAEA,QAAMC,eAAe,GAAG,IAAI9oE,OAAJ,EAAxB;;AACA,QAAM+oE,WAAW,GAAG,IAAI/oE,OAAJ,EAApB;;AACA,QAAMgpE,WAAW,GAAG,IAAIhpE,OAAJ,EAApB;;AAEA,QAAMipE,gBAAgB,GAAG,IAAI/4E,OAAJ,EAAzB;;AACA,QAAMg5E,gBAAgB,GAAG,IAAIh5E,OAAJ,EAAzB;;AACA,QAAMi5E,gBAAgB,GAAG,IAAIvmE,OAAJ,EAAzB;;AAEA,QAAMwmE,KAAK,GAAG,IAAIppE,OAAJ,EAAd;;AACA,QAAMqpE,KAAK,GAAG,IAAIrpE,OAAJ,EAAd;;AACA,QAAMspE,KAAK,GAAG,IAAItpE,OAAJ,EAAd;;AAEA,QAAMupE,MAAM,GAAG,IAAIr5E,OAAJ,EAAf;;AACA,QAAMs5E,MAAM,GAAG,IAAIt5E,OAAJ,EAAf;;AACA,QAAMu5E,MAAM,GAAG,IAAIv5E,OAAJ,EAAf;;AAEA,aAASw5E,MAAT,CAAiBh2G,QAAjB,EAA4B;AAE3B41C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,QAAZ;;AAEA,UAAKigI,SAAS,KAAKv2H,SAAnB,EAA+B;AAE9Bu2H,iBAAS,GAAG,IAAI9hD,cAAJ,EAAZ;AAEA,YAAM4iD,YAAY,GAAG,IAAInlD,YAAJ,CAAkB,CACtC,CAAE,GADoC,EAC/B,CAAE,GAD6B,EACxB,CADwB,EACrB,CADqB,EAClB,CADkB,EAEtC,GAFsC,EAEjC,CAAE,GAF+B,EAE1B,CAF0B,EAEvB,CAFuB,EAEpB,CAFoB,EAGtC,GAHsC,EAGjC,GAHiC,EAG5B,CAH4B,EAGzB,CAHyB,EAGtB,CAHsB,EAItC,CAAE,GAJoC,EAI/B,GAJ+B,EAI1B,CAJ0B,EAIvB,CAJuB,EAIpB,CAJoB,CAAlB,CAArB;AAOA,YAAMmkD,iBAAiB,GAAG,IAAIP,iBAAJ,CAAuBuB,YAAvB,EAAqC,CAArC,CAA1B;;AAEAd,iBAAS,CAAC1pG,QAAV,CAAoB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAApB;;AACA0pG,iBAAS,CAACxhD,YAAV,CAAwB,UAAxB,EAAoC,IAAIqhD,0BAAJ,CAAgCC,iBAAhC,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,CAApC;;AACAE,iBAAS,CAACxhD,YAAV,CAAwB,IAAxB,EAA8B,IAAIqhD,0BAAJ,CAAgCC,iBAAhC,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,CAA9B;AAEA;;AAED,WAAKn7D,QAAL,GAAgBq7D,SAAhB;AACA,WAAKn1G,QAAL,GAAkBA,QAAQ,KAAKphB,SAAf,GAA6BohB,QAA7B,GAAwC,IAAI8sF,cAAJ,EAAxD;AAEA,WAAKpgE,MAAL,GAAc,IAAI8P,OAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAd;AAEA;;AAEDw5E,UAAM,CAACtuH,SAAP,GAAmB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEtE0M,iBAAW,EAAE4hH,MAFyD;AAItE5E,cAAQ,EAAE,IAJ4D;AAMtEx4D,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAKD,SAAS,CAACl6D,MAAV,KAAqB,IAA1B,EAAiC;AAEhCzsB,iBAAO,CAACD,KAAR,CAAe,uFAAf;AAEA;;AAED2jI,mBAAW,CAACvmE,kBAAZ,CAAgC,KAAKpB,WAArC;;AAEA+nE,wBAAgB,CAAC/pH,IAAjB,CAAuB4sE,SAAS,CAACl6D,MAAV,CAAiBsvC,WAAxC;;AACA,aAAKyI,eAAL,CAAqB3V,gBAArB,CAAuC83B,SAAS,CAACl6D,MAAV,CAAiBkvC,kBAAxD,EAA4E,KAAKI,WAAjF;;AAEA4nE,mBAAW,CAACzmE,qBAAZ,CAAmC,KAAKsH,eAAxC;;AAEA,YAAKmiB,SAAS,CAACl6D,MAAV,CAAiBxN,mBAAjB,IAAwC,KAAKoP,QAAL,CAAc6tD,eAAd,KAAkC,KAA/E,EAAuF;AAEtFwnD,qBAAW,CAACznH,cAAZ,CAA4B,CAAE0nH,WAAW,CAAC73G,CAA1C;AAEA;;AAED,YAAMitB,QAAQ,GAAG,KAAK1qB,QAAL,CAAc0qB,QAA/B;AACA,YAAI6B,GAAJ,EAASD,GAAT;;AAEA,YAAK5B,QAAQ,KAAK,CAAlB,EAAsB;AAErB4B,aAAG,GAAGvjC,IAAI,CAACujC,GAAL,CAAU5B,QAAV,CAAN;AACA6B,aAAG,GAAGxjC,IAAI,CAACwjC,GAAL,CAAU7B,QAAV,CAAN;AAEA;;AAED,YAAMgC,MAAM,GAAG,KAAKA,MAApB;AAEAwpF,uBAAe,CAAER,KAAK,CAAC7nH,GAAN,CAAW,CAAE,GAAb,EAAkB,CAAE,GAApB,EAAyB,CAAzB,CAAF,EAAgCynH,WAAhC,EAA6C5oF,MAA7C,EAAqD2oF,WAArD,EAAkE9oF,GAAlE,EAAuED,GAAvE,CAAf;AACA4pF,uBAAe,CAAEP,KAAK,CAAC9nH,GAAN,CAAW,GAAX,EAAgB,CAAE,GAAlB,EAAuB,CAAvB,CAAF,EAA8BynH,WAA9B,EAA2C5oF,MAA3C,EAAmD2oF,WAAnD,EAAgE9oF,GAAhE,EAAqED,GAArE,CAAf;AACA4pF,uBAAe,CAAEN,KAAK,CAAC/nH,GAAN,CAAW,GAAX,EAAgB,GAAhB,EAAqB,CAArB,CAAF,EAA4BynH,WAA5B,EAAyC5oF,MAAzC,EAAiD2oF,WAAjD,EAA8D9oF,GAA9D,EAAmED,GAAnE,CAAf;;AAEAupF,cAAM,CAAChoH,GAAP,CAAY,CAAZ,EAAe,CAAf;;AACAioH,cAAM,CAACjoH,GAAP,CAAY,CAAZ,EAAe,CAAf;;AACAkoH,cAAM,CAACloH,GAAP,CAAY,CAAZ,EAAe,CAAf,EAvC2C,CAyC3C;;;AACA,YAAIuwD,SAAS,GAAGka,SAAS,CAAC3Y,GAAV,CAAcmC,iBAAd,CAAiC4zD,KAAjC,EAAwCC,KAAxC,EAA+CC,KAA/C,EAAsD,KAAtD,EAA6DR,eAA7D,CAAhB;;AAEA,YAAKh3D,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AACA83D,yBAAe,CAAEP,KAAK,CAAC9nH,GAAN,CAAW,CAAE,GAAb,EAAkB,GAAlB,EAAuB,CAAvB,CAAF,EAA8BynH,WAA9B,EAA2C5oF,MAA3C,EAAmD2oF,WAAnD,EAAgE9oF,GAAhE,EAAqED,GAArE,CAAf;;AACAwpF,gBAAM,CAACjoH,GAAP,CAAY,CAAZ,EAAe,CAAf;;AAEAuwD,mBAAS,GAAGka,SAAS,CAAC3Y,GAAV,CAAcmC,iBAAd,CAAiC4zD,KAAjC,EAAwCE,KAAxC,EAA+CD,KAA/C,EAAsD,KAAtD,EAA6DP,eAA7D,CAAZ;;AACA,cAAKh3D,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA;AAED;;AAED,YAAMjuD,QAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiC+2E,eAAjC,CAAjB;AAEA,YAAKjlH,QAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,QAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D;AAE7D+kB,kBAAU,CAACrnF,IAAX,CAAiB;AAEhBif,kBAAQ,EAAEA,QAFM;AAGhByzB,eAAK,EAAEwxF,eAAe,CAACtqH,KAAhB,EAHS;AAIhB+6C,YAAE,EAAEqe,QAAQ,CAACW,KAAT,CAAgBuwD,eAAhB,EAAiCM,KAAjC,EAAwCC,KAAxC,EAA+CC,KAA/C,EAAsDC,MAAtD,EAA8DC,MAA9D,EAAsEC,MAAtE,EAA8E,IAAIv5E,OAAJ,EAA9E,CAJY;AAKhBu1B,cAAI,EAAE,IALU;AAMhB7yE,gBAAM,EAAE;AANQ,SAAjB;AAUA,OA/EqE;AAiFtEwM,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,YAAKA,MAAM,CAACT,MAAP,KAAkB9tC,SAAvB,EAAmC,KAAK8tC,MAAL,CAAYhhC,IAAZ,CAAkByhC,MAAM,CAACT,MAAzB;AAEnC,aAAK1sB,QAAL,GAAgBmtB,MAAM,CAACntB,QAAvB;AAEA,eAAO,IAAP;AAEA;AA3FqE,KAApD,CAAnB;;AA+FA,aAASk2G,eAAT,CAA0BC,cAA1B,EAA0CC,UAA1C,EAAsD1pF,MAAtD,EAA8Dp/B,KAA9D,EAAqEi/B,GAArE,EAA0ED,GAA1E,EAAgF;AAE/E;AACAipF,sBAAgB,CAACtjH,UAAjB,CAA6BkkH,cAA7B,EAA6CzpF,MAA7C,EAAsDwQ,SAAtD,CAAiE,GAAjE,EAAuEE,QAAvE,CAAiF9vC,KAAjF,EAH+E,CAK/E;;;AACA,UAAKi/B,GAAG,KAAK3tC,SAAb,EAAyB;AAExB42H,wBAAgB,CAACr6H,CAAjB,GAAuBmxC,GAAG,GAAGipF,gBAAgB,CAACp6H,CAAzB,GAAiCoxC,GAAG,GAAGgpF,gBAAgB,CAACrjH,CAA7E;AACAsjH,wBAAgB,CAACtjH,CAAjB,GAAuBq6B,GAAG,GAAGgpF,gBAAgB,CAACp6H,CAAzB,GAAiCmxC,GAAG,GAAGipF,gBAAgB,CAACrjH,CAA7E;AAEA,OALD,MAKO;AAENsjH,wBAAgB,CAAC9pH,IAAjB,CAAuB6pH,gBAAvB;AAEA;;AAGDY,oBAAc,CAACzqH,IAAf,CAAqB0qH,UAArB;AACAD,oBAAc,CAACh7H,CAAf,IAAoBq6H,gBAAgB,CAACr6H,CAArC;AACAg7H,oBAAc,CAACjkH,CAAf,IAAoBsjH,gBAAgB,CAACtjH,CAArC,CApB+E,CAsB/E;;AACAikH,oBAAc,CAACjwE,YAAf,CAA6BuvE,gBAA7B;AAEA;;AAED,QAAMY,KAAK,GAAG,IAAI/pE,OAAJ,EAAd;;AACA,QAAMgqE,KAAK,GAAG,IAAIhqE,OAAJ,EAAd;;AAEA,aAASiqE,GAAT,GAAe;AAEd3gE,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK2xH,aAAL,GAAqB,CAArB;AAEA,WAAKthI,IAAL,GAAY,KAAZ;AAEAnD,YAAM,CAAC0qD,gBAAP,CAAyB,IAAzB,EAA+B;AAC9Bg6E,cAAM,EAAE;AACPvgE,oBAAU,EAAE,IADL;AAEP57D,eAAK,EAAE;AAFA;AADsB,OAA/B;AAOA,WAAKogE,UAAL,GAAkB,IAAlB;AAEA;;AAED67D,OAAG,CAAC7uH,SAAJ,GAAgB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEnE0M,iBAAW,EAAEmiH,GAFsD;AAInE1E,WAAK,EAAE,IAJ4D;AAMnEnmH,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC,EAA4C,KAA5C;AAEA,YAAMspF,MAAM,GAAGtpF,MAAM,CAACspF,MAAtB;;AAEA,aAAM,IAAIjmI,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGw7H,MAAM,CAAC5mI,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMi0B,KAAK,GAAGgyG,MAAM,CAAEjmI,KAAF,CAApB;AAEA,eAAKkmI,QAAL,CAAejyG,KAAK,CAACvlB,MAAN,CAAa4L,KAAb,EAAf,EAAqC2Z,KAAK,CAACtU,QAA3C;AAEA;;AAED,aAAKuqD,UAAL,GAAkBvtB,MAAM,CAACutB,UAAzB;AAEA,eAAO,IAAP;AAEA,OAxBkE;AA0BnEg8D,cAAQ,EAAE,kBAAWx3H,MAAX,EAAmBiR,QAAnB,EAA8B;AAEvC,YAAKA,QAAQ,KAAKvR,SAAlB,EAA8BuR,QAAQ,GAAG,CAAX;AAE9BA,gBAAQ,GAAGpH,IAAI,CAAC4nB,GAAL,CAAUxgB,QAAV,CAAX;AAEA,YAAMsmH,MAAM,GAAG,KAAKA,MAApB;AAEA,YAAIx7H,CAAJ;;AAEA,aAAMA,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGw7H,MAAM,CAAC5mI,MAAxB,EAAgCoL,CAAC,EAAjC,EAAuC;AAEtC,cAAKkV,QAAQ,GAAGsmH,MAAM,CAAEx7H,CAAF,CAAN,CAAYkV,QAA5B,EAAuC;AAEtC;AAEA;AAED;;AAEDsmH,cAAM,CAACp1F,MAAP,CAAepmC,CAAf,EAAkB,CAAlB,EAAqB;AAAEkV,kBAAQ,EAAEA,QAAZ;AAAsBjR,gBAAM,EAAEA;AAA9B,SAArB;AAEA,aAAKuO,GAAL,CAAUvO,MAAV;AAEA,eAAO,IAAP;AAEA,OApDkE;AAsDnEy3H,qBAAe,EAAE,2BAAY;AAE5B,eAAO,KAAKH,aAAZ;AAEA,OA1DkE;AA4DnEI,0BAAoB,EAAE,8BAAWzmH,QAAX,EAAsB;AAE3C,YAAMsmH,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,CAAC5mI,MAAP,GAAgB,CAArB,EAAyB;AAExB,cAAIW,KAAJ,EAAOyK,CAAP;;AAEA,eAAMzK,KAAC,GAAG,CAAJ,EAAOyK,CAAC,GAAGw7H,MAAM,CAAC5mI,MAAxB,EAAgCW,KAAC,GAAGyK,CAApC,EAAuCzK,KAAC,EAAxC,EAA8C;AAE7C,gBAAK2f,QAAQ,GAAGsmH,MAAM,CAAEjmI,KAAF,CAAN,CAAY2f,QAA5B,EAAuC;AAEtC;AAEA;AAED;;AAED,iBAAOsmH,MAAM,CAAEjmI,KAAC,GAAG,CAAN,CAAN,CAAgB0O,MAAvB;AAEA;;AAED,eAAO,IAAP;AAEA,OApFkE;AAsFnE05D,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAMk+C,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,CAAC5mI,MAAP,GAAgB,CAArB,EAAyB;AAExBwmI,eAAK,CAACxnE,qBAAN,CAA6B,KAAKnB,WAAlC;;AAEA,cAAMv9C,QAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiCg4E,KAAjC,CAAjB;AAEA,eAAKO,oBAAL,CAA2BzmH,QAA3B,EAAsCyoD,OAAtC,CAA+C0f,SAA/C,EAA0DC,UAA1D;AAEA;AAED,OApGkE;AAsGnEzsE,YAAM,EAAE,gBAAWsS,MAAX,EAAoB;AAE3B,YAAMq4G,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,CAAC5mI,MAAP,GAAgB,CAArB,EAAyB;AAExBwmI,eAAK,CAACxnE,qBAAN,CAA6BzwC,MAAM,CAACsvC,WAApC;;AACA4oE,eAAK,CAACznE,qBAAN,CAA6B,KAAKnB,WAAlC;;AAEA,cAAMv9C,QAAQ,GAAGkmH,KAAK,CAACh4E,UAAN,CAAkBi4E,KAAlB,IAA4Bl4G,MAAM,CAAClT,IAApD;AAEAurH,gBAAM,CAAE,CAAF,CAAN,CAAYv3H,MAAZ,CAAmBq3D,OAAnB,GAA6B,IAA7B;;AAEA,cAAI/lE,KAAJ,EAAOyK,CAAP;;AAEA,eAAMzK,KAAC,GAAG,CAAJ,EAAOyK,CAAC,GAAGw7H,MAAM,CAAC5mI,MAAxB,EAAgCW,KAAC,GAAGyK,CAApC,EAAuCzK,KAAC,EAAxC,EAA8C;AAE7C,gBAAK2f,QAAQ,IAAIsmH,MAAM,CAAEjmI,KAAF,CAAN,CAAY2f,QAA7B,EAAwC;AAEvCsmH,oBAAM,CAAEjmI,KAAC,GAAG,CAAN,CAAN,CAAgB0O,MAAhB,CAAuBq3D,OAAvB,GAAiC,KAAjC;AACAkgE,oBAAM,CAAEjmI,KAAF,CAAN,CAAY0O,MAAZ,CAAmBq3D,OAAnB,GAA6B,IAA7B;AAEA,aALD,MAKO;AAEN;AAEA;AAED;;AAED,eAAKigE,aAAL,GAAqBhmI,KAAC,GAAG,CAAzB;;AAEA,iBAAQA,KAAC,GAAGyK,CAAZ,EAAezK,KAAC,EAAhB,EAAsB;AAErBimI,kBAAM,CAAEjmI,KAAF,CAAN,CAAY0O,MAAZ,CAAmBq3D,OAAnB,GAA6B,KAA7B;AAEA;AAED;AAED,OA9IkE;AAgJnElR,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGumE,QAAQ,CAACluD,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA,YAAK,KAAKy2C,UAAL,KAAoB,KAAzB,EAAiCrrE,IAAI,CAAC6P,MAAL,CAAYw7D,UAAZ,GAAyB,KAAzB;AAEjCrrE,YAAI,CAAC6P,MAAL,CAAYu3H,MAAZ,GAAqB,EAArB;AAEA,YAAMA,MAAM,GAAG,KAAKA,MAApB;;AAEA,aAAM,IAAIjmI,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGw7H,MAAM,CAAC5mI,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMi0B,KAAK,GAAGgyG,MAAM,CAAEjmI,KAAF,CAApB;AAEAnB,cAAI,CAAC6P,MAAL,CAAYu3H,MAAZ,CAAmBvlI,IAAnB,CAAyB;AACxBgO,kBAAM,EAAEulB,KAAK,CAACvlB,MAAN,CAAai7C,IADG;AAExBhqC,oBAAQ,EAAEsU,KAAK,CAACtU;AAFQ,WAAzB;AAKA;;AAED,eAAO9gB,IAAP;AAEA;AAvKkE,KAApD,CAAhB;;AA2KA,aAASwnI,WAAT,CAAsB/8D,QAAtB,EAAgC95C,QAAhC,EAA2C;AAE1C,UAAK85C,QAAQ,IAAIA,QAAQ,CAACsa,UAA1B,EAAuC;AAEtCziF,eAAO,CAACD,KAAR,CAAe,wFAAf;AAEA;;AAEDumF,UAAI,CAACpzE,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B95C,QAA3B;AAEA,WAAK9qB,IAAL,GAAY,aAAZ;AAEA,WAAK4hI,QAAL,GAAgB,UAAhB;AACA,WAAKC,UAAL,GAAkB,IAAI7nE,OAAJ,EAAlB;AACA,WAAK8nE,iBAAL,GAAyB,IAAI9nE,OAAJ,EAAzB;AAEA;;AAED2nE,eAAW,CAACnvH,SAAZ,GAAwB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeiyE,IAAI,CAACvwE,SAApB,CAAf,EAAgD;AAEvE0M,iBAAW,EAAEyiH,WAF0D;AAIvEt9C,mBAAa,EAAE,IAJwD;AAMvE7tE,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB8qC,YAAI,CAACvwE,SAAL,CAAegE,IAAf,CAAoB7G,IAApB,CAA0B,IAA1B,EAAgCsoC,MAAhC;AAEA,aAAK2pF,QAAL,GAAgB3pF,MAAM,CAAC2pF,QAAvB;AACA,aAAKC,UAAL,CAAgBrrH,IAAhB,CAAsByhC,MAAM,CAAC4pF,UAA7B;AACA,aAAKC,iBAAL,CAAuBtrH,IAAvB,CAA6ByhC,MAAM,CAAC6pF,iBAApC;AAEA,aAAK/pB,QAAL,GAAgB9/D,MAAM,CAAC8/D,QAAvB;AAEA,eAAO,IAAP;AAEA,OAlBsE;AAoBvE1qG,UAAI,EAAE,cAAW0qG,QAAX,EAAqB8pB,UAArB,EAAkC;AAEvC,aAAK9pB,QAAL,GAAgBA,QAAhB;;AAEA,YAAK8pB,UAAU,KAAKn4H,SAApB,EAAgC;AAE/B,eAAK45D,iBAAL,CAAwB,IAAxB;AAEA,eAAKy0C,QAAL,CAAcgqB,iBAAd;AAEAF,oBAAU,GAAG,KAAKrpE,WAAlB;AAEA;;AAED,aAAKqpE,UAAL,CAAgBrrH,IAAhB,CAAsBqrH,UAAtB;AACA,aAAKC,iBAAL,CAAuBj1E,UAAvB,CAAmCg1E,UAAnC;AAEA,OArCsE;AAuCvEzR,UAAI,EAAE,gBAAY;AAEjB,aAAKrY,QAAL,CAAcqY,IAAd;AAEA,OA3CsE;AA6CvE4R,0BAAoB,EAAE,gCAAY;AAEjC,YAAMr/D,MAAM,GAAG,IAAI/R,OAAJ,EAAf;AAEA,YAAMqxE,UAAU,GAAG,KAAKr9D,QAAL,CAAcxvB,UAAd,CAAyB6sF,UAA5C;;AAEA,aAAM,IAAI3mI,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGk8H,UAAU,CAAC59D,KAAhC,EAAuC/oE,KAAC,GAAGyK,CAA3C,EAA8CzK,KAAC,EAA/C,EAAqD;AAEpDqnE,gBAAM,CAAC18D,CAAP,GAAWg8H,UAAU,CAACl4E,IAAX,CAAiBzuD,KAAjB,CAAX;AACAqnE,gBAAM,CAAC3lD,CAAP,GAAWilH,UAAU,CAACj4E,IAAX,CAAiB1uD,KAAjB,CAAX;AACAqnE,gBAAM,CAACp6C,CAAP,GAAW05G,UAAU,CAAC5vE,IAAX,CAAiB/2D,KAAjB,CAAX;AACAqnE,gBAAM,CAACxyC,CAAP,GAAW8xG,UAAU,CAAC3vE,IAAX,CAAiBh3D,KAAjB,CAAX;AAEA,cAAM8c,KAAK,GAAG,MAAMuqD,MAAM,CAAC3Z,eAAP,EAApB;;AAEA,cAAK5wC,KAAK,KAAK5E,QAAf,EAA0B;AAEzBmvD,kBAAM,CAACjqD,cAAP,CAAuBN,KAAvB;AAEA,WAJD,MAIO;AAENuqD,kBAAM,CAAChqD,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAFM,CAEoB;AAE1B;;AAEDspH,oBAAU,CAAClnD,OAAX,CAAoBz/E,KAApB,EAAuBqnE,MAAM,CAAC18D,CAA9B,EAAiC08D,MAAM,CAAC3lD,CAAxC,EAA2C2lD,MAAM,CAACp6C,CAAlD,EAAqDo6C,MAAM,CAACxyC,CAA5D;AAEA;AAED,OA1EsE;AA4EvEmzC,uBAAiB,EAAE,2BAAWQ,KAAX,EAAmB;AAErCif,YAAI,CAACvwE,SAAL,CAAe8wD,iBAAf,CAAiC3zD,IAAjC,CAAuC,IAAvC,EAA6Cm0D,KAA7C;;AAEA,YAAK,KAAK89D,QAAL,KAAkB,UAAvB,EAAoC;AAEnC,eAAKE,iBAAL,CAAuBj1E,UAAvB,CAAmC,KAAK2L,WAAxC;AAEA,SAJD,MAIO,IAAK,KAAKopE,QAAL,KAAkB,UAAvB,EAAoC;AAE1C,eAAKE,iBAAL,CAAuBj1E,UAAvB,CAAmC,KAAKg1E,UAAxC;AAEA,SAJM,MAIA;AAENplI,iBAAO,CAAC2W,IAAR,CAAc,+CAA+C,KAAKwuH,QAAlE;AAEA;AAED,OA9FsE;AAgGvEt9C,mBAAa,EAAI,YAAY;AAE5B,YAAM49C,YAAY,GAAG,IAAI9qE,OAAJ,EAArB;AAEA,YAAM+qE,SAAS,GAAG,IAAIvxE,OAAJ,EAAlB;AACA,YAAMqxE,UAAU,GAAG,IAAIrxE,OAAJ,EAAnB;AAEA,YAAM+R,MAAM,GAAG,IAAIvL,OAAJ,EAAf;AACA,YAAMr7C,MAAM,GAAG,IAAIi+C,OAAJ,EAAf;AAEA,eAAO,UAAW53C,KAAX,EAAkBjd,MAAlB,EAA2B;AAEjC,cAAM4yG,QAAQ,GAAG,KAAKA,QAAtB;AACA,cAAMnzC,QAAQ,GAAG,KAAKA,QAAtB;AAEAu9D,mBAAS,CAACt4E,mBAAV,CAA+B+a,QAAQ,CAACxvB,UAAT,CAAoB+sF,SAAnD,EAA8D//G,KAA9D;AACA6/G,oBAAU,CAACp4E,mBAAX,CAAgC+a,QAAQ,CAACxvB,UAAT,CAAoB6sF,UAApD,EAAgE7/G,KAAhE;AAEA8/G,sBAAY,CAACr4E,mBAAb,CAAkC+a,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAAtD,EAAgEsM,KAAhE,EAAwE4uC,YAAxE,CAAsF,KAAK6wE,UAA3F;AAEA18H,gBAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;;AAEA,eAAM,IAAIrd,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,gBAAM8mI,MAAM,GAAGH,UAAU,CAACn6E,YAAX,CAAyBxsD,KAAzB,CAAf;;AAEA,gBAAK8mI,MAAM,KAAK,CAAhB,EAAoB;AAEnB,kBAAMC,SAAS,GAAGF,SAAS,CAACr6E,YAAV,CAAwBxsD,KAAxB,CAAlB;AAEAygB,oBAAM,CAACuvC,gBAAP,CAAyBysD,QAAQ,CAACC,KAAT,CAAgBqqB,SAAhB,EAA4B7pE,WAArD,EAAkEu/C,QAAQ,CAACuqB,YAAT,CAAuBD,SAAvB,CAAlE;AAEAl9H,oBAAM,CAACkT,eAAP,CAAwBsqD,MAAM,CAACnsD,IAAP,CAAa0rH,YAAb,EAA4BlxE,YAA5B,CAA0Cj1C,MAA1C,CAAxB,EAA4EqmH,MAA5E;AAEA;AAED;;AAED,iBAAOj9H,MAAM,CAAC6rD,YAAP,CAAqB,KAAK8wE,iBAA1B,CAAP;AAEA,SA9BD;AAgCA,OA1CgB;AAhGsD,KAAhD,CAAxB;;AA8IA,QAAMS,aAAa,GAAG,IAAIvoE,OAAJ,EAAtB;;AACA,QAAMwoE,eAAe,GAAG,IAAIxoE,OAAJ,EAAxB;;AAEA,aAASyoE,QAAT,CAAmBzqB,KAAnB,EAA0BsqB,YAA1B,EAAyC;AAExC;AAEAtqB,WAAK,GAAGA,KAAK,IAAI,EAAjB;AAEA,WAAKA,KAAL,GAAaA,KAAK,CAACj+G,KAAN,CAAa,CAAb,CAAb;AACA,WAAKikI,YAAL,GAAoB,IAAIpiD,YAAJ,CAAkB,KAAKo8B,KAAL,CAAWr9G,MAAX,GAAoB,EAAtC,CAApB;AAEA,WAAKu4F,KAAL,GAAa,CAAE,CAAf,CATwC,CAWxC;;AAEA,UAAKovC,YAAY,KAAK54H,SAAtB,EAAkC;AAEjC,aAAKq4H,iBAAL;AAEA,OAJD,MAIO;AAEN,YAAK,KAAK/pB,KAAL,CAAWr9G,MAAX,KAAsB2nI,YAAY,CAAC3nI,MAAxC,EAAiD;AAEhD,eAAK2nI,YAAL,GAAoBA,YAAY,CAACvoI,KAAb,CAAoB,CAApB,CAApB;AAEA,SAJD,MAIO;AAEN0C,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AAEA,eAAKkvH,YAAL,GAAoB,EAApB;;AAEA,eAAM,IAAIhnI,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK6wC,KAAL,CAAWr9G,MAAjC,EAAyCW,KAAC,GAAG6rE,EAA7C,EAAiD7rE,KAAC,EAAlD,EAAwD;AAEvD,iBAAKgnI,YAAL,CAAkBtmI,IAAlB,CAAwB,IAAIg+D,OAAJ,EAAxB;AAEA;AAED;AAED;AAED;;AAEDn9D,UAAM,CAACiiC,MAAP,CAAe2jG,QAAQ,CAACjwH,SAAxB,EAAmC;AAElCuvH,uBAAiB,EAAE,6BAAY;AAE9B,aAAKO,YAAL,GAAoB,EAApB;;AAEA,aAAM,IAAIhnI,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK6wC,KAAL,CAAWr9G,MAAjC,EAAyCW,KAAC,GAAG6rE,EAA7C,EAAiD7rE,KAAC,EAAlD,EAAwD;AAEvD,cAAM+b,OAAO,GAAG,IAAI2iD,OAAJ,EAAhB;;AAEA,cAAK,KAAKg+C,KAAL,CAAY18G,KAAZ,CAAL,EAAuB;AAEtB+b,mBAAO,CAACw1C,UAAR,CAAoB,KAAKmrD,KAAL,CAAY18G,KAAZ,EAAgBk9D,WAApC;AAEA;;AAED,eAAK8pE,YAAL,CAAkBtmI,IAAlB,CAAwBqb,OAAxB;AAEA;AAED,OApBiC;AAsBlC+4G,UAAI,EAAE,gBAAY;AAEjB;AAEA,aAAM,IAAI90H,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK6wC,KAAL,CAAWr9G,MAAjC,EAAyCW,KAAC,GAAG6rE,EAA7C,EAAiD7rE,KAAC,EAAlD,EAAwD;AAEvD,cAAMonI,IAAI,GAAG,KAAK1qB,KAAL,CAAY18G,KAAZ,CAAb;;AAEA,cAAKonI,IAAL,EAAY;AAEXA,gBAAI,CAAClqE,WAAL,CAAiB3L,UAAjB,CAA6B,KAAKy1E,YAAL,CAAmBhnI,KAAnB,CAA7B;AAEA;AAED,SAdgB,CAgBjB;;;AAEA,aAAM,IAAIA,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG,KAAK6wC,KAAL,CAAWr9G,MAAjC,EAAyCW,KAAC,GAAG6rE,KAA7C,EAAiD7rE,KAAC,EAAlD,EAAwD;AAEvD,cAAMonI,KAAI,GAAG,KAAK1qB,KAAL,CAAY18G,KAAZ,CAAb;;AAEA,cAAKonI,KAAL,EAAY;AAEX,gBAAKA,KAAI,CAAC/hE,MAAL,IAAe+hE,KAAI,CAAC/hE,MAAL,CAAYgiE,MAAhC,EAAyC;AAExCD,mBAAI,CAAC3mH,MAAL,CAAY8wC,UAAZ,CAAwB61E,KAAI,CAAC/hE,MAAL,CAAYnI,WAApC;;AACAkqE,mBAAI,CAAC3mH,MAAL,CAAYmsC,QAAZ,CAAsBw6E,KAAI,CAAClqE,WAA3B;AAEA,aALD,MAKO;AAENkqE,mBAAI,CAAC3mH,MAAL,CAAYvF,IAAZ,CAAkBksH,KAAI,CAAClqE,WAAvB;AAEA;;AAEDkqE,iBAAI,CAAC3mH,MAAL,CAAYiiD,SAAZ,CAAuB0kE,KAAI,CAAC5sH,QAA5B,EAAsC4sH,KAAI,CAAC1pH,UAA3C,EAAuD0pH,KAAI,CAACtqH,KAA5D;AAEA;AAED;AAED,OA/DiC;AAiElCxB,YAAM,EAAE,kBAAY;AAEnB,YAAMohG,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMsqB,YAAY,GAAG,KAAKA,YAA1B;AACA,YAAMtE,YAAY,GAAG,KAAKA,YAA1B;AACA,YAAMD,WAAW,GAAG,KAAKA,WAAzB,CALmB,CAOnB;;AAEA,aAAM,IAAIziI,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG6wC,KAAK,CAACr9G,MAA5B,EAAoCW,KAAC,GAAG6rE,EAAxC,EAA4C7rE,KAAC,EAA7C,EAAmD;AAElD;AAEA,cAAMygB,MAAM,GAAGi8F,KAAK,CAAE18G,KAAF,CAAL,GAAa08G,KAAK,CAAE18G,KAAF,CAAL,CAAWk9D,WAAxB,GAAsCgqE,eAArD;;AAEAD,uBAAa,CAACj3E,gBAAd,CAAgCvvC,MAAhC,EAAwCumH,YAAY,CAAEhnI,KAAF,CAApD;;AACAinI,uBAAa,CAAC34E,OAAd,CAAuBo0E,YAAvB,EAAqC1iI,KAAC,GAAG,EAAzC;AAEA;;AAED,YAAKyiI,WAAW,KAAKr0H,SAArB,EAAiC;AAEhCq0H,qBAAW,CAACzgH,WAAZ,GAA0B,IAA1B;AAEA;AAED,OA3FiC;AA6FlC1H,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI6sH,QAAJ,CAAc,KAAKzqB,KAAnB,EAA0B,KAAKsqB,YAA/B,CAAP;AAEA,OAjGiC;AAmGlCM,mBAAa,EAAE,uBAAWvoI,IAAX,EAAkB;AAEhC,aAAM,IAAIiB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG,KAAK6wC,KAAL,CAAWr9G,MAAjC,EAAyCW,KAAC,GAAG6rE,EAA7C,EAAiD7rE,KAAC,EAAlD,EAAwD;AAEvD,cAAMonI,IAAI,GAAG,KAAK1qB,KAAL,CAAY18G,KAAZ,CAAb;;AAEA,cAAKonI,IAAI,CAACroI,IAAL,KAAcA,IAAnB,EAA0B;AAEzB,mBAAOqoI,IAAP;AAEA;AAED;;AAED,eAAOh5H,SAAP;AAEA,OAnHiC;AAqHlCuP,aAAO,EAAE,mBAAa;AAErB,YAAK,KAAK8kH,WAAV,EAAwB;AAEvB,eAAKA,WAAL,CAAiB9kH,OAAjB;AAEA,eAAK8kH,WAAL,GAAmBr0H,SAAnB;AAEA;AAED;AA/HiC,KAAnC;;AAmIA,aAASm5H,IAAT,GAAgB;AAEfniE,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,MAAZ;AAEA;;AAED6iI,QAAI,CAACrwH,SAAL,GAAiB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEpE0M,iBAAW,EAAE2jH,IAFuD;AAIpEF,YAAM,EAAE;AAJ4D,KAApD,CAAjB;;AAQA,QAAMG,oBAAoB,GAAG,IAAI9oE,OAAJ,EAA7B;;AACA,QAAM+oE,oBAAoB,GAAG,IAAI/oE,OAAJ,EAA7B;;AAEA,QAAMgpE,mBAAmB,GAAG,EAA5B;;AAEA,QAAMC,KAAK,GAAG,IAAIlgD,IAAJ,EAAd;;AAEA,aAASmgD,aAAT,CAAwBt+D,QAAxB,EAAkC95C,QAAlC,EAA4Cu5C,KAA5C,EAAoD;AAEnD0e,UAAI,CAACpzE,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B95C,QAA3B;AAEA,WAAKw5C,cAAL,GAAsB,IAAIuV,eAAJ,CAAqB,IAAI+B,YAAJ,CAAkBvX,KAAK,GAAG,EAA1B,CAArB,EAAqD,EAArD,CAAtB;AAEA,WAAKA,KAAL,GAAaA,KAAb;AAEA,WAAKz5C,aAAL,GAAqB,KAArB;AAEA;;AAEDs4G,iBAAa,CAAC1wH,SAAd,GAA0B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeiyE,IAAI,CAACvwE,SAApB,CAAf,EAAgD;AAEzE0M,iBAAW,EAAEgkH,aAF4D;AAIzE9+D,qBAAe,EAAE,IAJwD;AAMzE5tD,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB8qC,YAAI,CAACvwE,SAAL,CAAegE,IAAf,CAAoB7G,IAApB,CAA0B,IAA1B,EAAgCsoC,MAAhC;AAEA,aAAKqsB,cAAL,CAAoB9tD,IAApB,CAA0ByhC,MAAM,CAACqsB,cAAjC;AACA,aAAKD,KAAL,GAAapsB,MAAM,CAACosB,KAApB;AAEA,eAAO,IAAP;AAEA,OAfwE;AAiBzE8+D,iBAAW,EAAE,qBAAW/gH,KAAX,EAAkBrG,MAAlB,EAA2B;AAEvCA,cAAM,CAAC4tC,SAAP,CAAkB,KAAK2a,cAAL,CAAoBpsC,KAAtC,EAA6C9V,KAAK,GAAG,EAArD;AAEA,OArBwE;AAuBzEshD,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAM7qB,WAAW,GAAG,KAAKA,WAAzB;AACA,YAAM4qE,YAAY,GAAG,KAAK/+D,KAA1B;AAEA4+D,aAAK,CAACr+D,QAAN,GAAiB,KAAKA,QAAtB;AACAq+D,aAAK,CAACn4G,QAAN,GAAiB,KAAKA,QAAtB;AAEA,YAAKm4G,KAAK,CAACn4G,QAAN,KAAmBphB,SAAxB,EAAoC;;AAEpC,aAAM,IAAI25H,UAAU,GAAG,CAAvB,EAA0BA,UAAU,GAAGD,YAAvC,EAAqDC,UAAU,EAA/D,EAAqE;AAEpE;AAEA,eAAKF,WAAL,CAAkBE,UAAlB,EAA8BP,oBAA9B;;AAEAC,8BAAoB,CAACz3E,gBAArB,CAAuCkN,WAAvC,EAAoDsqE,oBAApD,EANoE,CAQpE;;;AAEAG,eAAK,CAACzqE,WAAN,GAAoBuqE,oBAApB;;AAEAE,eAAK,CAACv/D,OAAN,CAAe0f,SAAf,EAA0B4/C,mBAA1B,EAZoE,CAcpE;;;AAEA,eAAM,IAAI1nI,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGi9H,mBAAmB,CAACroI,MAAzC,EAAiDW,KAAC,GAAGyK,CAArD,EAAwDzK,KAAC,EAAzD,EAA+D;AAE9D,gBAAM4tE,SAAS,GAAG85D,mBAAmB,CAAE1nI,KAAF,CAArC;AACA4tE,qBAAS,CAACm6D,UAAV,GAAuBA,UAAvB;AACAn6D,qBAAS,CAACl/D,MAAV,GAAmB,IAAnB;AACAq5E,sBAAU,CAACrnF,IAAX,CAAiBktE,SAAjB;AAEA;;AAED85D,6BAAmB,CAACroI,MAApB,GAA6B,CAA7B;AAEA;AAED,OA9DwE;AAgEzE2oI,iBAAW,EAAE,qBAAWlhH,KAAX,EAAkBrG,MAAlB,EAA2B;AAEvCA,cAAM,CAAC6tC,OAAP,CAAgB,KAAK0a,cAAL,CAAoBpsC,KAApC,EAA2C9V,KAAK,GAAG,EAAnD;AAEA,OApEwE;AAsEzE4gE,wBAAkB,EAAE,8BAAY,CAE/B;AAxEwE,KAAhD,CAA1B;AA4EA;;;;;;;;;;;AAWA,aAASw0B,iBAAT,CAA4B3yC,UAA5B,EAAyC;AAExC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb;AAEA,WAAK2H,SAAL,GAAiB,CAAjB;AACA,WAAK2qD,OAAL,GAAe,OAAf;AACA,WAAKC,QAAL,GAAgB,OAAhB;AAEA,WAAKrqD,YAAL,GAAoB,KAApB;AAEA,WAAKhD,SAAL,CAAgBtR,UAAhB;AAEA;;AAED2yC,qBAAiB,CAAChlG,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA9B;AACAglG,qBAAiB,CAAChlG,SAAlB,CAA4B0M,WAA5B,GAA0Cs4F,iBAA1C;AAEAA,qBAAiB,CAAChlG,SAAlB,CAA4B8iH,mBAA5B,GAAkD,IAAlD;;AAEA9d,qBAAiB,CAAChlG,SAAlB,CAA4BgE,IAA5B,GAAmC,UAAWyhC,MAAX,EAAoB;AAEtD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK2tD,SAAL,GAAiB3gC,MAAM,CAAC2gC,SAAxB;AACA,WAAK2qD,OAAL,GAAetrF,MAAM,CAACsrF,OAAtB;AACA,WAAKC,QAAL,GAAgBvrF,MAAM,CAACurF,QAAvB;AAEA,WAAKrqD,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAdD;;AAgBA,QAAMsqD,MAAM,GAAG,IAAIrsE,OAAJ,EAAf;;AACA,QAAMssE,IAAI,GAAG,IAAItsE,OAAJ,EAAb;;AACA,QAAMusE,gBAAgB,GAAG,IAAI3pE,OAAJ,EAAzB;;AACA,QAAM4pE,MAAM,GAAG,IAAIt5D,GAAJ,EAAf;;AACA,QAAMu5D,SAAS,GAAG,IAAIp6D,MAAJ,EAAlB;;AAEA,aAAS14B,IAAT,CAAe6zB,QAAf,EAAyB95C,QAAzB,EAAmCif,IAAnC,EAA0C;AAEzC,UAAKA,IAAI,KAAK,CAAd,EAAkB;AAEjBttC,eAAO,CAACD,KAAR,CAAe,6FAAf;AAEA;;AAEDkkE,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,MAAZ;AAEA,WAAK4kE,QAAL,GAAgBA,QAAQ,KAAKl7D,SAAb,GAAyBk7D,QAAzB,GAAoC,IAAIuZ,cAAJ,EAApD;AACA,WAAKrzD,QAAL,GAAgBA,QAAQ,KAAKphB,SAAb,GAAyBohB,QAAzB,GAAoC,IAAI0sF,iBAAJ,EAApD;AAEA,WAAKx0B,kBAAL;AAEA;;AAEDjyC,QAAI,CAACv+B,SAAL,GAAiB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEpE0M,iBAAW,EAAE6xB,IAFuD;AAIpE2zB,YAAM,EAAE,IAJ4D;AAMpEluD,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,aAAKntB,QAAL,GAAgBmtB,MAAM,CAACntB,QAAvB;AACA,aAAK85C,QAAL,GAAgB3sB,MAAM,CAAC2sB,QAAvB;AAEA,eAAO,IAAP;AAEA,OAfmE;AAiBpEk/D,0BAAoB,EAAE,gCAAY;AAEjC,YAAMl/D,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,YAAKA,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC;AAEA,cAAK3Z,QAAQ,CAACxiD,KAAT,KAAmB,IAAxB,EAA+B;AAE9B,gBAAM49D,iBAAiB,GAAGpb,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAA9C;AACA,gBAAMmpE,aAAa,GAAG,CAAE,CAAF,CAAtB;;AAEA,iBAAM,IAAI3jF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGi6E,iBAAiB,CAAC3b,KAAvC,EAA8C/oE,KAAC,GAAGyK,CAAlD,EAAqDzK,KAAC,EAAtD,EAA4D;AAE3DmoI,oBAAM,CAAC55E,mBAAP,CAA4Bm2B,iBAA5B,EAA+C1kF,KAAC,GAAG,CAAnD;;AACAooI,kBAAI,CAAC75E,mBAAL,CAA0Bm2B,iBAA1B,EAA6C1kF,KAA7C;;AAEA2jF,2BAAa,CAAE3jF,KAAF,CAAb,GAAqB2jF,aAAa,CAAE3jF,KAAC,GAAG,CAAN,CAAlC;AACA2jF,2BAAa,CAAE3jF,KAAF,CAAb,IAAsBmoI,MAAM,CAACt6E,UAAP,CAAmBu6E,IAAnB,CAAtB;AAEA;;AAED9+D,oBAAQ,CAAC6Z,YAAT,CAAuB,cAAvB,EAAuC,IAAI9C,sBAAJ,CAA4BsD,aAA5B,EAA2C,CAA3C,CAAvC;AAEA,WAjBD,MAiBO;AAENxiF,mBAAO,CAAC2W,IAAR,CAAc,+FAAd;AAEA;AAED,SA3BD,MA2BO,IAAKwxD,QAAQ,CAACsa,UAAd,EAA2B;AAEjC,cAAM9zD,SAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;AACA,cAAM6zD,cAAa,GAAGra,QAAQ,CAACqa,aAA/B;AAEAA,wBAAa,CAAE,CAAF,CAAb,GAAqB,CAArB;;AAEA,eAAM,IAAI3jF,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGqlB,SAAQ,CAACzwB,MAA9B,EAAsCW,KAAC,GAAGyK,GAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnD2jF,0BAAa,CAAE3jF,KAAF,CAAb,GAAqB2jF,cAAa,CAAE3jF,KAAC,GAAG,CAAN,CAAlC;AACA2jF,0BAAa,CAAE3jF,KAAF,CAAb,IAAsB8vB,SAAQ,CAAE9vB,KAAC,GAAG,CAAN,CAAR,CAAkB6tD,UAAlB,CAA8B/9B,SAAQ,CAAE9vB,KAAF,CAAtC,CAAtB;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAlEmE;AAoEpEooE,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAMze,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAMpM,WAAW,GAAG,KAAKA,WAAzB;AACA,YAAMo3D,SAAS,GAAGxsC,SAAS,CAAC2gD,MAAV,CAAiBhzF,IAAjB,CAAsB6+E,SAAxC,CAJ2C,CAM3C;;AAEA,YAAKhrD,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC1X,QAAQ,CAACma,qBAAT;;AAExC8kD,iBAAS,CAACrtH,IAAV,CAAgBouD,QAAQ,CAAC0X,cAAzB;;AACAunD,iBAAS,CAAC7yE,YAAV,CAAwBwH,WAAxB;;AACAqrE,iBAAS,CAAC1rH,MAAV,IAAoBy3G,SAApB;AAEA,YAAKxsC,SAAS,CAAC3Y,GAAV,CAAcpC,gBAAd,CAAgCw7D,SAAhC,MAAgD,KAArD,EAA6D,OAdlB,CAgB3C;;AAEAF,wBAAgB,CAAC92E,UAAjB,CAA6B2L,WAA7B;;AACAorE,cAAM,CAACptH,IAAP,CAAa4sE,SAAS,CAAC3Y,GAAvB,EAA6BzZ,YAA7B,CAA2C2yE,gBAA3C;;AAEA,YAAMK,cAAc,GAAGpU,SAAS,IAAK,CAAE,KAAKx3G,KAAL,CAAWnS,CAAX,GAAe,KAAKmS,KAAL,CAAW4E,CAA1B,GAA8B,KAAK5E,KAAL,CAAWmQ,CAA3C,IAAiD,CAAtD,CAAhC;AACA,YAAM07G,gBAAgB,GAAGD,cAAc,GAAGA,cAA1C;AAEA,YAAME,MAAM,GAAG,IAAI9sE,OAAJ,EAAf;AACA,YAAM+sE,IAAI,GAAG,IAAI/sE,OAAJ,EAAb;AACA,YAAMgtE,YAAY,GAAG,IAAIhtE,OAAJ,EAArB;AACA,YAAMitE,QAAQ,GAAG,IAAIjtE,OAAJ,EAAjB;AACA,YAAM9zC,IAAI,GAAK,QAAQ,KAAK04G,cAAf,GAAkC,CAAlC,GAAsC,CAAnD;;AAEA,YAAKp3D,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMn8D,KAAK,GAAGwiD,QAAQ,CAACxiD,KAAvB;AACA,cAAMgzB,UAAU,GAAGwvB,QAAQ,CAACxvB,UAA5B;AACA,cAAM4pC,SAAS,GAAG5pC,UAAU,CAACt/B,QAAX,CAAoBoiB,KAAtC;;AAEA,cAAK9V,KAAK,KAAK,IAAf,EAAsB;AAErB,gBAAMk/D,QAAO,GAAGl/D,KAAK,CAAC8V,KAAtB;;AAEA,iBAAM,IAAI58B,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGu7E,QAAO,CAAC3mF,MAAR,GAAiB,CAAtC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,IAAIgoB,IAArD,EAA4D;AAE3D,kBAAMzoB,CAAC,GAAGymF,QAAO,CAAEhmF,KAAF,CAAjB;AACA,kBAAMR,CAAC,GAAGwmF,QAAO,CAAEhmF,KAAC,GAAG,CAAN,CAAjB;AAEA4oI,oBAAM,CAACv6E,SAAP,CAAkBq1B,SAAlB,EAA6BnkF,CAAC,GAAG,CAAjC;AACAspI,kBAAI,CAACx6E,SAAL,CAAgBq1B,SAAhB,EAA2BlkF,CAAC,GAAG,CAA/B;;AAEA,kBAAMwpI,MAAM,GAAGV,MAAM,CAAC74D,mBAAP,CAA4Bm5D,MAA5B,EAAoCC,IAApC,EAA0CE,QAA1C,EAAoDD,YAApD,CAAf;;AAEA,kBAAKE,MAAM,GAAGL,gBAAd,EAAiC;AAEjCI,sBAAQ,CAACrzE,YAAT,CAAuB,KAAKwH,WAA5B,EAZ2D,CAYhB;;AAE3C,kBAAMv9C,QAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiCk7E,QAAjC,CAAjB;AAEA,kBAAKppH,QAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,QAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D;AAE7D+kB,wBAAU,CAACrnF,IAAX,CAAiB;AAEhBif,wBAAQ,EAAEA,QAFM;AAGhB;AACA;AACAyzB,qBAAK,EAAE01F,YAAY,CAACxuH,KAAb,GAAqBo7C,YAArB,CAAmC,KAAKwH,WAAxC,CALS;AAMhBp2C,qBAAK,EAAE9mB,KANS;AAOhBuhF,oBAAI,EAAE,IAPU;AAQhB6G,yBAAS,EAAE,IARK;AAShB15E,sBAAM,EAAE;AATQ,eAAjB;AAaA;AAED,WArCD,MAqCO;AAEN,iBAAM,IAAI1O,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGi5E,SAAS,CAACrkF,MAAV,GAAmB,CAAnB,GAAuB,CAA5C,EAA+CW,KAAC,GAAGyK,GAAnD,EAAsDzK,KAAC,IAAIgoB,IAA3D,EAAkE;AAEjE4gH,oBAAM,CAACv6E,SAAP,CAAkBq1B,SAAlB,EAA6B,IAAI1jF,KAAjC;AACA6oI,kBAAI,CAACx6E,SAAL,CAAgBq1B,SAAhB,EAA2B,IAAI1jF,KAAJ,GAAQ,CAAnC;;AAEA,kBAAMgpI,OAAM,GAAGV,MAAM,CAAC74D,mBAAP,CAA4Bm5D,MAA5B,EAAoCC,IAApC,EAA0CE,QAA1C,EAAoDD,YAApD,CAAf;;AAEA,kBAAKE,OAAM,GAAGL,gBAAd,EAAiC;AAEjCI,sBAAQ,CAACrzE,YAAT,CAAuB,KAAKwH,WAA5B,EATiE,CAStB;;AAE3C,kBAAMv9C,SAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiCk7E,QAAjC,CAAjB;;AAEA,kBAAKppH,SAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,SAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D;AAE7D+kB,wBAAU,CAACrnF,IAAX,CAAiB;AAEhBif,wBAAQ,EAAEA,SAFM;AAGhB;AACA;AACAyzB,qBAAK,EAAE01F,YAAY,CAACxuH,KAAb,GAAqBo7C,YAArB,CAAmC,KAAKwH,WAAxC,CALS;AAMhBp2C,qBAAK,EAAE9mB,KANS;AAOhBuhF,oBAAI,EAAE,IAPU;AAQhB6G,yBAAS,EAAE,IARK;AAShB15E,sBAAM,EAAE;AATQ,eAAjB;AAaA;AAED;AAED,SA7ED,MA6EO,IAAK46D,QAAQ,CAACsa,UAAd,EAA2B;AAEjC,cAAM9zD,UAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;AACA,cAAMm5G,UAAU,GAAGn5G,UAAQ,CAACzwB,MAA5B;;AAEA,eAAM,IAAIW,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGipI,UAAU,GAAG,CAAlC,EAAqCjpI,KAAC,IAAIgoB,IAA1C,EAAiD;AAEhD,gBAAMghH,QAAM,GAAGV,MAAM,CAAC74D,mBAAP,CAA4B3/C,UAAQ,CAAE9vB,KAAF,CAApC,EAA2C8vB,UAAQ,CAAE9vB,KAAC,GAAG,CAAN,CAAnD,EAA8D+oI,QAA9D,EAAwED,YAAxE,CAAf;;AAEA,gBAAKE,QAAM,GAAGL,gBAAd,EAAiC;AAEjCI,oBAAQ,CAACrzE,YAAT,CAAuB,KAAKwH,WAA5B,EANgD,CAML;;AAE3C,gBAAMv9C,UAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiCk7E,QAAjC,CAAjB;;AAEA,gBAAKppH,UAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,UAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D;AAE7D+kB,sBAAU,CAACrnF,IAAX,CAAiB;AAEhBif,sBAAQ,EAAEA,UAFM;AAGhB;AACA;AACAyzB,mBAAK,EAAE01F,YAAY,CAACxuH,KAAb,GAAqBo7C,YAArB,CAAmC,KAAKwH,WAAxC,CALS;AAMhBp2C,mBAAK,EAAE9mB,KANS;AAOhBuhF,kBAAI,EAAE,IAPU;AAQhB6G,uBAAS,EAAE,IARK;AAShB15E,oBAAM,EAAE;AATQ,aAAjB;AAaA;AAED;AAED,OAjNmE;AAmNpEg5E,wBAAkB,EAAE,8BAAY;AAE/B,YAAMpe,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,YAAKA,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMH,eAAe,GAAGxZ,QAAQ,CAACwZ,eAAjC;AACA,cAAMrlF,IAAI,GAAG8D,MAAM,CAAC9D,IAAP,CAAaqlF,eAAb,CAAb;;AAEA,cAAKrlF,IAAI,CAAC4B,MAAL,GAAc,CAAnB,EAAuB;AAEtB,gBAAMglF,cAAc,GAAGvB,eAAe,CAAErlF,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,gBAAK4mF,cAAc,KAAKj2E,SAAxB,EAAoC;AAEnC,mBAAKu5E,qBAAL,GAA6B,EAA7B;AACA,mBAAKC,qBAAL,GAA6B,EAA7B;;AAEA,mBAAM,IAAIlzD,CAAC,GAAG,CAAR,EAAWmzD,EAAE,GAAGxD,cAAc,CAAChlF,MAArC,EAA6Cq1B,CAAC,GAAGmzD,EAAjD,EAAqDnzD,CAAC,EAAtD,EAA4D;AAE3D,oBAAM31B,IAAI,GAAGslF,cAAc,CAAE3vD,CAAF,CAAd,CAAoB31B,IAApB,IAA4Bs1B,MAAM,CAAEK,CAAF,CAA/C;AAEA,qBAAKizD,qBAAL,CAA2BjnF,IAA3B,CAAiC,CAAjC;AACA,qBAAKknF,qBAAL,CAA4B7oF,IAA5B,IAAqC21B,CAArC;AAEA;AAED;AAED;AAED,SA3BD,MA2BO;AAEN,cAAMmpD,YAAY,GAAGvU,QAAQ,CAACuU,YAA9B;;AAEA,cAAKA,YAAY,KAAKzvE,SAAjB,IAA8ByvE,YAAY,CAACx+E,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8B,mBAAO,CAACD,KAAR,CAAe,oGAAf;AAEA;AAED;AAED;AA9PmE,KAApD,CAAjB;;AAkQA,QAAMgoI,QAAQ,GAAG,IAAIptE,OAAJ,EAAjB;;AACA,QAAMqtE,MAAM,GAAG,IAAIrtE,OAAJ,EAAf;;AAEA,aAASstE,YAAT,CAAuB9/D,QAAvB,EAAiC95C,QAAjC,EAA4C;AAE3CimB,UAAI,CAACphC,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B95C,QAA3B;AAEA,WAAK9qB,IAAL,GAAY,cAAZ;AAEA;;AAED0kI,gBAAY,CAAClyH,SAAb,GAAyB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeigC,IAAI,CAACv+B,SAApB,CAAf,EAAgD;AAExE0M,iBAAW,EAAEwlH,YAF2D;AAIxE1I,oBAAc,EAAE,IAJwD;AAMxE8H,0BAAoB,EAAE,gCAAY;AAEjC,YAAMl/D,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,YAAKA,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC;AAEA,cAAK3Z,QAAQ,CAACxiD,KAAT,KAAmB,IAAxB,EAA+B;AAE9B,gBAAM49D,iBAAiB,GAAGpb,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAA9C;AACA,gBAAMmpE,aAAa,GAAG,EAAtB;;AAEA,iBAAM,IAAI3jF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGi6E,iBAAiB,CAAC3b,KAAvC,EAA8C/oE,KAAC,GAAGyK,CAAlD,EAAqDzK,KAAC,IAAI,CAA1D,EAA8D;AAE7DkpI,sBAAQ,CAAC36E,mBAAT,CAA8Bm2B,iBAA9B,EAAiD1kF,KAAjD;;AACAmpI,oBAAM,CAAC56E,mBAAP,CAA4Bm2B,iBAA5B,EAA+C1kF,KAAC,GAAG,CAAnD;;AAEA2jF,2BAAa,CAAE3jF,KAAF,CAAb,GAAuBA,KAAC,KAAK,CAAR,GAAc,CAAd,GAAkB2jF,aAAa,CAAE3jF,KAAC,GAAG,CAAN,CAApD;AACA2jF,2BAAa,CAAE3jF,KAAC,GAAG,CAAN,CAAb,GAAyB2jF,aAAa,CAAE3jF,KAAF,CAAb,GAAqBkpI,QAAQ,CAACr7E,UAAT,CAAqBs7E,MAArB,CAA9C;AAEA;;AAED7/D,oBAAQ,CAAC6Z,YAAT,CAAuB,cAAvB,EAAuC,IAAI9C,sBAAJ,CAA4BsD,aAA5B,EAA2C,CAA3C,CAAvC;AAEA,WAjBD,MAiBO;AAENxiF,mBAAO,CAAC2W,IAAR,CAAc,uGAAd;AAEA;AAED,SA3BD,MA2BO,IAAKwxD,QAAQ,CAACsa,UAAd,EAA2B;AAEjC,cAAM9zD,UAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;AACA,cAAM6zD,eAAa,GAAGra,QAAQ,CAACqa,aAA/B;;AAEA,eAAM,IAAI3jF,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGqlB,UAAQ,CAACzwB,MAA9B,EAAsCW,KAAC,GAAGyK,GAA1C,EAA6CzK,KAAC,IAAI,CAAlD,EAAsD;AAErDkpI,oBAAQ,CAAChuH,IAAT,CAAe4U,UAAQ,CAAE9vB,KAAF,CAAvB;;AACAmpI,kBAAM,CAACjuH,IAAP,CAAa4U,UAAQ,CAAE9vB,KAAC,GAAG,CAAN,CAArB;;AAEA2jF,2BAAa,CAAE3jF,KAAF,CAAb,GAAuBA,KAAC,KAAK,CAAR,GAAc,CAAd,GAAkB2jF,eAAa,CAAE3jF,KAAC,GAAG,CAAN,CAApD;AACA2jF,2BAAa,CAAE3jF,KAAC,GAAG,CAAN,CAAb,GAAyB2jF,eAAa,CAAE3jF,KAAF,CAAb,GAAqBkpI,QAAQ,CAACr7E,UAAT,CAAqBs7E,MAArB,CAA9C;AAEA;AAED;;AAED,eAAO,IAAP;AAEA;AAxDuE,KAAhD,CAAzB;;AA4DA,aAASE,QAAT,CAAmB//D,QAAnB,EAA6B95C,QAA7B,EAAwC;AAEvCimB,UAAI,CAACphC,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B95C,QAA3B;AAEA,WAAK9qB,IAAL,GAAY,UAAZ;AAEA;;AAED2kI,YAAQ,CAACnyH,SAAT,GAAqB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeigC,IAAI,CAACv+B,SAApB,CAAf,EAAgD;AAEpE0M,iBAAW,EAAEylH,QAFuD;AAIpE1I,gBAAU,EAAE;AAJwD,KAAhD,CAArB;AAQA;;;;;;;;;;;;;;AAcA,aAASvkB,cAAT,CAAyB7yC,UAAzB,EAAsC;AAErC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb;AAEA,WAAK3oE,GAAL,GAAW,IAAX;AAEA,WAAK+uE,QAAL,GAAgB,IAAhB;AAEA,WAAKjmE,IAAL,GAAY,CAAZ;AACA,WAAKunE,eAAL,GAAuB,IAAvB;AAEA,WAAKQ,YAAL,GAAoB,KAApB;AAEA,WAAKhD,SAAL,CAAgBtR,UAAhB;AAEA;;AAED6yC,kBAAc,CAACllG,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA3B;AACAklG,kBAAc,CAACllG,SAAf,CAAyB0M,WAAzB,GAAuCw4F,cAAvC;AAEAA,kBAAc,CAACllG,SAAf,CAAyBkjH,gBAAzB,GAA4C,IAA5C;;AAEAhe,kBAAc,CAACllG,SAAf,CAAyBgE,IAAzB,GAAgC,UAAWyhC,MAAX,EAAoB;AAEnD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK3iB,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAK+uE,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKjmE,IAAL,GAAY6mC,MAAM,CAAC7mC,IAAnB;AACA,WAAKunE,eAAL,GAAuB1gC,MAAM,CAAC0gC,eAA9B;AAEA,WAAKQ,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAjBD;;AAmBA,QAAMyrD,gBAAgB,GAAG,IAAI5qE,OAAJ,EAAzB;;AACA,QAAM6qE,MAAM,GAAG,IAAIv6D,GAAJ,EAAf;;AACA,QAAMw6D,SAAS,GAAG,IAAIr7D,MAAJ,EAAlB;;AACA,QAAMs7D,WAAW,GAAG,IAAI3tE,OAAJ,EAApB;;AAEA,aAAS4tE,MAAT,CAAiBpgE,QAAjB,EAA2B95C,QAA3B,EAAsC;AAErC41C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,QAAZ;AAEA,WAAK4kE,QAAL,GAAgBA,QAAQ,KAAKl7D,SAAb,GAAyBk7D,QAAzB,GAAoC,IAAIuZ,cAAJ,EAApD;AACA,WAAKrzD,QAAL,GAAgBA,QAAQ,KAAKphB,SAAb,GAAyBohB,QAAzB,GAAoC,IAAI4sF,cAAJ,EAApD;AAEA,WAAK10B,kBAAL;AAEA;;AAEDgiD,UAAM,CAACxyH,SAAP,GAAmB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAEtE0M,iBAAW,EAAE8lH,MAFyD;AAItErgE,cAAQ,EAAE,IAJ4D;AAMtEnuD,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,aAAKntB,QAAL,GAAgBmtB,MAAM,CAACntB,QAAvB;AACA,aAAK85C,QAAL,GAAgB3sB,MAAM,CAAC2sB,QAAvB;AAEA,eAAO,IAAP;AAEA,OAfqE;AAiBtElB,aAAO,EAAE,iBAAW0f,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,YAAMze,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAMpM,WAAW,GAAG,KAAKA,WAAzB;AACA,YAAMo3D,SAAS,GAAGxsC,SAAS,CAAC2gD,MAAV,CAAiBiB,MAAjB,CAAwBpV,SAA1C,CAJ2C,CAM3C;;AAEA,YAAKhrD,QAAQ,CAAC0X,cAAT,KAA4B,IAAjC,EAAwC1X,QAAQ,CAACma,qBAAT;;AAExC+lD,iBAAS,CAACtuH,IAAV,CAAgBouD,QAAQ,CAAC0X,cAAzB;;AACAwoD,iBAAS,CAAC9zE,YAAV,CAAwBwH,WAAxB;;AACAssE,iBAAS,CAAC3sH,MAAV,IAAoBy3G,SAApB;AAEA,YAAKxsC,SAAS,CAAC3Y,GAAV,CAAcpC,gBAAd,CAAgCy8D,SAAhC,MAAgD,KAArD,EAA6D,OAdlB,CAgB3C;;AAEAF,wBAAgB,CAAC/3E,UAAjB,CAA6B2L,WAA7B;;AACAqsE,cAAM,CAACruH,IAAP,CAAa4sE,SAAS,CAAC3Y,GAAvB,EAA6BzZ,YAA7B,CAA2C4zE,gBAA3C;;AAEA,YAAMZ,cAAc,GAAGpU,SAAS,IAAK,CAAE,KAAKx3G,KAAL,CAAWnS,CAAX,GAAe,KAAKmS,KAAL,CAAW4E,CAA1B,GAA8B,KAAK5E,KAAL,CAAWmQ,CAA3C,IAAiD,CAAtD,CAAhC;AACA,YAAM07G,gBAAgB,GAAGD,cAAc,GAAGA,cAA1C;;AAEA,YAAKp/D,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMn8D,KAAK,GAAGwiD,QAAQ,CAACxiD,KAAvB;AACA,cAAMgzB,UAAU,GAAGwvB,QAAQ,CAACxvB,UAA5B;AACA,cAAM4pC,SAAS,GAAG5pC,UAAU,CAACt/B,QAAX,CAAoBoiB,KAAtC;;AAEA,cAAK9V,KAAK,KAAK,IAAf,EAAsB;AAErB,gBAAMk/D,SAAO,GAAGl/D,KAAK,CAAC8V,KAAtB;;AAEA,iBAAM,IAAI58B,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGma,SAAO,CAAC3mF,MAA9B,EAAsCW,KAAC,GAAG6rE,EAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpD,kBAAMT,CAAC,GAAGymF,SAAO,CAAEhmF,KAAF,CAAjB;;AAEAypI,yBAAW,CAACp7E,SAAZ,CAAuBq1B,SAAvB,EAAkCnkF,CAAC,GAAG,CAAtC;;AAEAoqI,uBAAS,CAAEF,WAAF,EAAelqI,CAAf,EAAkBopI,gBAAlB,EAAoCzrE,WAApC,EAAiD4qB,SAAjD,EAA4DC,UAA5D,EAAwE,IAAxE,CAAT;AAEA;AAED,WAdD,MAcO;AAEN,iBAAM,IAAI/nF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGi5E,SAAS,CAACrkF,MAAV,GAAmB,CAAxC,EAA2CW,KAAC,GAAGyK,CAA/C,EAAkDzK,KAAC,EAAnD,EAAyD;AAExDypI,yBAAW,CAACp7E,SAAZ,CAAuBq1B,SAAvB,EAAkC1jF,KAAC,GAAG,CAAtC;;AAEA2pI,uBAAS,CAAEF,WAAF,EAAezpI,KAAf,EAAkB2oI,gBAAlB,EAAoCzrE,WAApC,EAAiD4qB,SAAjD,EAA4DC,UAA5D,EAAwE,IAAxE,CAAT;AAEA;AAED;AAED,SAhCD,MAgCO;AAEN,cAAMj4D,UAAQ,GAAGw5C,QAAQ,CAACx5C,QAA1B;;AAEA,eAAM,IAAI9vB,KAAC,GAAG,CAAR,EAAWyK,GAAC,GAAGqlB,UAAQ,CAACzwB,MAA9B,EAAsCW,KAAC,GAAGyK,GAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnD2pI,qBAAS,CAAE75G,UAAQ,CAAE9vB,KAAF,CAAV,EAAiBA,KAAjB,EAAoB2oI,gBAApB,EAAsCzrE,WAAtC,EAAmD4qB,SAAnD,EAA8DC,UAA9D,EAA0E,IAA1E,CAAT;AAEA;AAED;AAED,OArFqE;AAuFtEL,wBAAkB,EAAE,8BAAY;AAE/B,YAAMpe,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,YAAKA,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhC,cAAMH,eAAe,GAAGxZ,QAAQ,CAACwZ,eAAjC;AACA,cAAMrlF,IAAI,GAAG8D,MAAM,CAAC9D,IAAP,CAAaqlF,eAAb,CAAb;;AAEA,cAAKrlF,IAAI,CAAC4B,MAAL,GAAc,CAAnB,EAAuB;AAEtB,gBAAMglF,cAAc,GAAGvB,eAAe,CAAErlF,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,gBAAK4mF,cAAc,KAAKj2E,SAAxB,EAAoC;AAEnC,mBAAKu5E,qBAAL,GAA6B,EAA7B;AACA,mBAAKC,qBAAL,GAA6B,EAA7B;;AAEA,mBAAM,IAAIlzD,CAAC,GAAG,CAAR,EAAWmzD,EAAE,GAAGxD,cAAc,CAAChlF,MAArC,EAA6Cq1B,CAAC,GAAGmzD,EAAjD,EAAqDnzD,CAAC,EAAtD,EAA4D;AAE3D,oBAAM31B,IAAI,GAAGslF,cAAc,CAAE3vD,CAAF,CAAd,CAAoB31B,IAApB,IAA4Bs1B,MAAM,CAAEK,CAAF,CAA/C;AAEA,qBAAKizD,qBAAL,CAA2BjnF,IAA3B,CAAiC,CAAjC;AACA,qBAAKknF,qBAAL,CAA4B7oF,IAA5B,IAAqC21B,CAArC;AAEA;AAED;AAED;AAED,SA3BD,MA2BO;AAEN,cAAMmpD,YAAY,GAAGvU,QAAQ,CAACuU,YAA9B;;AAEA,cAAKA,YAAY,KAAKzvE,SAAjB,IAA8ByvE,YAAY,CAACx+E,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8B,mBAAO,CAACD,KAAR,CAAe,sGAAf;AAEA;AAED;AAED;AAlIqE,KAApD,CAAnB;;AAsIA,aAASyoI,SAAT,CAAoBv2F,KAApB,EAA2BtsB,KAA3B,EAAkC6hH,gBAAlC,EAAoDzrE,WAApD,EAAiE4qB,SAAjE,EAA4EC,UAA5E,EAAwFr5E,MAAxF,EAAiG;AAEhG,UAAMk7H,kBAAkB,GAAGL,MAAM,CAAC/5D,iBAAP,CAA0Bp8B,KAA1B,CAA3B;;AAEA,UAAKw2F,kBAAkB,GAAGjB,gBAA1B,EAA6C;AAE5C,YAAMkB,cAAc,GAAG,IAAI/tE,OAAJ,EAAvB;;AAEAytE,cAAM,CAACj6D,mBAAP,CAA4Bl8B,KAA5B,EAAmCy2F,cAAnC;;AACAA,sBAAc,CAACn0E,YAAf,CAA6BwH,WAA7B;AAEA,YAAMv9C,QAAQ,GAAGmoE,SAAS,CAAC3Y,GAAV,CAAcF,MAAd,CAAqBphB,UAArB,CAAiCg8E,cAAjC,CAAjB;AAEA,YAAKlqH,QAAQ,GAAGmoE,SAAS,CAAC/kB,IAArB,IAA6BpjD,QAAQ,GAAGmoE,SAAS,CAAC9kB,GAAvD,EAA6D;AAE7D+kB,kBAAU,CAACrnF,IAAX,CAAiB;AAEhBif,kBAAQ,EAAEA,QAFM;AAGhBmqH,uBAAa,EAAEvxH,IAAI,CAACmK,IAAL,CAAWknH,kBAAX,CAHC;AAIhBx2F,eAAK,EAAEy2F,cAJS;AAKhB/iH,eAAK,EAAEA,KALS;AAMhBy6D,cAAI,EAAE,IANU;AAOhB7yE,gBAAM,EAAEA;AAPQ,SAAjB;AAWA;AAED;;AAED,aAASq7H,YAAT,CAAuBC,KAAvB,EAA8Bx2E,OAA9B,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,SAArD,EAAgEC,SAAhE,EAA2EC,MAA3E,EAAmFnvD,IAAnF,EAAyFovD,UAAzF,EAAsG;AAErGP,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB21H,KAApB,EAA2Bx2E,OAA3B,EAAoCC,KAApC,EAA2CC,KAA3C,EAAkDC,SAAlD,EAA6DC,SAA7D,EAAwEC,MAAxE,EAAgFnvD,IAAhF,EAAsFovD,UAAtF;AAEA,WAAKD,MAAL,GAAcA,MAAM,KAAKzlD,SAAX,GAAuBylD,MAAvB,GAAgCxR,SAA9C;AAEA,WAAKuR,SAAL,GAAiBA,SAAS,KAAKxlD,SAAd,GAA0BwlD,SAA1B,GAAsCzS,YAAvD;AACA,WAAKwS,SAAL,GAAiBA,SAAS,KAAKvlD,SAAd,GAA0BulD,SAA1B,GAAsCxS,YAAvD;AAEA,WAAKmT,eAAL,GAAuB,KAAvB;AAEA,UAAMr5C,KAAK,GAAG,IAAd;;AAEA,eAASgvH,WAAT,GAAuB;AAEtBhvH,aAAK,CAAC+G,WAAN,GAAoB,IAApB;AACAgoH,aAAK,CAACE,yBAAN,CAAiCD,WAAjC;AAEA;;AAED,UAAK,+BAA+BD,KAApC,EAA4C;AAE3CA,aAAK,CAACE,yBAAN,CAAiCD,WAAjC;AAEA;AAED;;AAEDF,gBAAY,CAAC7yH,SAAb,GAAyB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAAf,EAAmD;AAE3E0M,iBAAW,EAAEmmH,YAF8D;AAI3E7c,oBAAc,EAAE,IAJ2D;AAM3E5xG,YAAM,EAAE,kBAAY;AAEnB,YAAM0uH,KAAK,GAAG,KAAK5pI,KAAnB;AACA,YAAM+pI,qBAAqB,IAAG,+BAA+BH,KAAlC,CAA3B;;AAEA,YAAKG,qBAAqB,KAAK,KAA1B,IAAmCH,KAAK,CAAC/0H,UAAN,IAAoB+0H,KAAK,CAACI,iBAAlE,EAAsF;AAErF,eAAKpoH,WAAL,GAAmB,IAAnB;AAEA;AAED;AAjB0E,KAAnD,CAAzB;;AAqBA,aAASqoH,iBAAT,CAA4Bp2E,OAA5B,EAAqC3lC,KAArC,EAA4CD,MAA5C,EAAoDwlC,MAApD,EAA4DnvD,IAA5D,EAAkE8uD,OAAlE,EAA2EC,KAA3E,EAAkFC,KAAlF,EAAyFC,SAAzF,EAAoGC,SAApG,EAA+GE,UAA/G,EAA2HC,QAA3H,EAAsI;AAErIR,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bm/C,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EnvD,IAA/E,EAAqFovD,UAArF,EAAiGC,QAAjG;AAEA,WAAK3zD,KAAL,GAAa;AAAEkuB,aAAK,EAAEA,KAAT;AAAgBD,cAAM,EAAEA;AAAxB,OAAb;AACA,WAAK4lC,OAAL,GAAeA,OAAf,CALqI,CAOrI;AACA;;AAEA,WAAKO,KAAL,GAAa,KAAb,CAVqI,CAYrI;AACA;;AAEA,WAAKF,eAAL,GAAuB,KAAvB;AAEA;;AAED+1E,qBAAiB,CAACnzH,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAA9B;AACAmzH,qBAAiB,CAACnzH,SAAlB,CAA4B0M,WAA5B,GAA0CymH,iBAA1C;AAEAA,qBAAiB,CAACnzH,SAAlB,CAA4B23G,mBAA5B,GAAkD,IAAlD;;AAEA,aAASyb,aAAT,CAAwBt5F,MAAxB,EAAgCwiB,OAAhC,EAAyCC,KAAzC,EAAgDC,KAAhD,EAAuDC,SAAvD,EAAkEC,SAAlE,EAA6EC,MAA7E,EAAqFnvD,IAArF,EAA2FovD,UAA3F,EAAwG;AAEvGP,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB28B,MAApB,EAA4BwiB,OAA5B,EAAqCC,KAArC,EAA4CC,KAA5C,EAAmDC,SAAnD,EAA8DC,SAA9D,EAAyEC,MAAzE,EAAiFnvD,IAAjF,EAAuFovD,UAAvF;AAEA,WAAK9xC,WAAL,GAAmB,IAAnB;AAEA;;AAEDsoH,iBAAa,CAACpzH,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAA1B;AACAozH,iBAAa,CAACpzH,SAAd,CAAwB0M,WAAxB,GAAsC0mH,aAAtC;AACAA,iBAAa,CAACpzH,SAAd,CAAwBqzH,eAAxB,GAA0C,IAA1C;;AAEA,aAASC,YAAT,CAAuBl8G,KAAvB,EAA8BD,MAA9B,EAAsC3pB,IAAtC,EAA4C8uD,OAA5C,EAAqDC,KAArD,EAA4DC,KAA5D,EAAmEC,SAAnE,EAA8EC,SAA9E,EAAyFE,UAAzF,EAAqGD,MAArG,EAA8G;AAE7GA,YAAM,GAAGA,MAAM,KAAKzlD,SAAX,GAAuBylD,MAAvB,GAAgCnR,WAAzC;;AAEA,UAAKmR,MAAM,KAAKnR,WAAX,IAA0BmR,MAAM,KAAKlR,kBAA1C,EAA+D;AAE9D,cAAM,IAAIplD,KAAJ,CAAW,kFAAX,CAAN;AAEA;;AAED,UAAKmH,IAAI,KAAK0J,SAAT,IAAsBylD,MAAM,KAAKnR,WAAtC,EAAoDh+C,IAAI,GAAGi9C,iBAAP;AACpD,UAAKj9C,IAAI,KAAK0J,SAAT,IAAsBylD,MAAM,KAAKlR,kBAAtC,EAA2Dj+C,IAAI,GAAGy9C,kBAAP;AAE3DoR,aAAO,CAACl/C,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bm/C,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EnvD,IAA/E,EAAqFovD,UAArF;AAEA,WAAK1zD,KAAL,GAAa;AAAEkuB,aAAK,EAAEA,KAAT;AAAgBD,cAAM,EAAEA;AAAxB,OAAb;AAEA,WAAKslC,SAAL,GAAiBA,SAAS,KAAKvlD,SAAd,GAA0BulD,SAA1B,GAAsC7S,aAAvD;AACA,WAAK8S,SAAL,GAAiBA,SAAS,KAAKxlD,SAAd,GAA0BwlD,SAA1B,GAAsC9S,aAAvD;AAEA,WAAK0T,KAAL,GAAa,KAAb;AACA,WAAKF,eAAL,GAAuB,KAAvB;AAEA;;AAEDk2E,gBAAY,CAACtzH,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe+9C,OAAO,CAACr8C,SAAvB,CAAzB;AACAszH,gBAAY,CAACtzH,SAAb,CAAuB0M,WAAvB,GAAqC4mH,YAArC;AACAA,gBAAY,CAACtzH,SAAb,CAAuBy4G,cAAvB,GAAwC,IAAxC;;AAEA,aAAS8a,iBAAT,CAA4BnhE,QAA5B,EAAuC;AAEtCuZ,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,mBAAZ,CAJsC,CAMtC;;AAEA,UAAMorB,QAAQ,GAAG,EAAjB,CARsC,CAUtC;;AAEA,UAAM46G,IAAI,GAAG,CAAE,CAAF,EAAK,CAAL,CAAb;AAAA,UAAuBC,KAAK,GAAG,EAA/B;AACA,UAAMltI,IAAI,GAAG,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAb,CAbsC,CAetC;;AAEA,UAAK6rE,QAAQ,IAAIA,QAAQ,CAACsa,UAA1B,EAAuC;AAEtC;AAEA,YAAMzzD,KAAK,GAAGm5C,QAAQ,CAACn5C,KAAvB;;AAEA,aAAM,IAAInwB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG0lB,KAAK,CAAC9wB,MAA3B,EAAmCW,KAAC,GAAGyK,CAAvC,EAA0CzK,KAAC,EAA3C,EAAiD;AAEhD,cAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;;AAEA,eAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,gBAAMsqI,KAAK,GAAGrpD,IAAI,CAAE9jF,IAAI,CAAE6C,CAAF,CAAN,CAAlB;AACA,gBAAMuqI,KAAK,GAAGtpD,IAAI,CAAE9jF,IAAI,CAAE,CAAE6C,CAAC,GAAG,CAAN,IAAY,CAAd,CAAN,CAAlB;AACAoqI,gBAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACkE,GAAL,CAAUmuH,KAAV,EAAiBC,KAAjB,CAAZ,CAJ8B,CAIQ;;AACtCH,gBAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACmE,GAAL,CAAUkuH,KAAV,EAAiBC,KAAjB,CAAZ;AAEA,gBAAMjhE,GAAG,GAAG8gE,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAAlC;;AAEA,gBAAKC,KAAK,CAAE/gE,GAAF,CAAL,KAAiBx7D,SAAtB,EAAkC;AAEjCu8H,mBAAK,CAAE/gE,GAAF,CAAL,GAAe;AAAEmV,sBAAM,EAAE2rD,IAAI,CAAE,CAAF,CAAd;AAAqB1rD,sBAAM,EAAE0rD,IAAI,CAAE,CAAF;AAAjC,eAAf;AAEA;AAED;AAED,SA3BqC,CA6BtC;;;AAEA,aAAM,IAAM9gE,KAAZ,IAAmB+gE,KAAnB,EAA2B;AAE1B,cAAMrtI,CAAC,GAAGqtI,KAAK,CAAE/gE,KAAF,CAAf;AAEA,cAAI0f,MAAM,GAAGhgB,QAAQ,CAACx5C,QAAT,CAAmBxyB,CAAC,CAACyhF,MAArB,CAAb;AACAjvD,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEAq8D,gBAAM,GAAGhgB,QAAQ,CAACx5C,QAAT,CAAmBxyB,CAAC,CAAC0hF,MAArB,CAAT;AACAlvD,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEA;AAED,OA3CD,MA2CO,IAAKq8C,QAAQ,IAAIA,QAAQ,CAAC2Z,gBAA1B,EAA6C;AAEnD,YAAIqG,OAAM,GAAG,IAAIxtB,OAAJ,EAAb;;AAEA,YAAKwN,QAAQ,CAACxiD,KAAT,KAAmB,IAAxB,EAA+B;AAE9B;AAEA,cAAMtM,QAAQ,GAAG8uD,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAArC;AACA,cAAMwrE,SAAO,GAAG1c,QAAQ,CAACxiD,KAAzB;AACA,cAAI+5D,MAAM,GAAGvX,QAAQ,CAACuX,MAAtB;;AAEA,cAAKA,MAAM,CAACxhF,MAAP,KAAkB,CAAvB,EAA2B;AAE1BwhF,kBAAM,GAAG,CAAE;AAAEpO,mBAAK,EAAE,CAAT;AAAY1J,mBAAK,EAAEid,SAAO,CAACjd,KAA3B;AAAkCmP,2BAAa,EAAE;AAAjD,aAAF,CAAT;AAEA,WAZ6B,CAc9B;;;AAEA,eAAM,IAAI3nD,CAAC,GAAG,CAAR,EAAWu6G,EAAE,GAAGjqD,MAAM,CAACxhF,MAA7B,EAAqCkxB,CAAC,GAAGu6G,EAAzC,EAA6C,EAAGv6G,CAAhD,EAAoD;AAEnD,gBAAMvrB,KAAK,GAAG67E,MAAM,CAAEtwD,CAAF,CAApB;AAEA,gBAAMkiD,KAAK,GAAGztE,KAAK,CAACytE,KAApB;AACA,gBAAM1J,KAAK,GAAG/jE,KAAK,CAAC+jE,KAApB;;AAEA,iBAAM,IAAI/oE,KAAC,GAAGyyE,KAAR,EAAehoE,IAAC,GAAKgoE,KAAK,GAAG1J,KAAnC,EAA4C/oE,KAAC,GAAGyK,IAAhD,EAAmDzK,KAAC,IAAI,CAAxD,EAA4D;AAE3D,mBAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B,oBAAMsqI,KAAK,GAAG5kD,SAAO,CAACv3B,IAAR,CAAczuD,KAAC,GAAGM,IAAlB,CAAd;;AACA,oBAAMuqI,MAAK,GAAG7kD,SAAO,CAACv3B,IAAR,CAAczuD,KAAC,GAAG,CAAEM,IAAC,GAAG,CAAN,IAAY,CAA9B,CAAd;;AACAoqI,oBAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACkE,GAAL,CAAUmuH,KAAV,EAAiBC,MAAjB,CAAZ,CAJ8B,CAIQ;;AACtCH,oBAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACmE,GAAL,CAAUkuH,KAAV,EAAiBC,MAAjB,CAAZ;;AAEA,oBAAMjhE,KAAG,GAAG8gE,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAAlC;;AAEA,oBAAKC,KAAK,CAAE/gE,KAAF,CAAL,KAAiBx7D,SAAtB,EAAkC;AAEjCu8H,uBAAK,CAAE/gE,KAAF,CAAL,GAAe;AAAEmV,0BAAM,EAAE2rD,IAAI,CAAE,CAAF,CAAd;AAAqB1rD,0BAAM,EAAE0rD,IAAI,CAAE,CAAF;AAAjC,mBAAf;AAEA;AAED;AAED;AAED,WA5C6B,CA8C9B;;;AAEA,eAAM,IAAM9gE,KAAZ,IAAmB+gE,KAAnB,EAA2B;AAE1B,gBAAMrtI,EAAC,GAAGqtI,KAAK,CAAE/gE,KAAF,CAAf;;AAEA0f,mBAAM,CAAC/6B,mBAAP,CAA4B/zC,QAA5B,EAAsCld,EAAC,CAACyhF,MAAxC;;AACAjvD,oBAAQ,CAACpvB,IAAT,CAAe4oF,OAAM,CAAC3+E,CAAtB,EAAyB2+E,OAAM,CAAC5nE,CAAhC,EAAmC4nE,OAAM,CAACr8D,CAA1C;;AAEAq8D,mBAAM,CAAC/6B,mBAAP,CAA4B/zC,QAA5B,EAAsCld,EAAC,CAAC0hF,MAAxC;;AACAlvD,oBAAQ,CAACpvB,IAAT,CAAe4oF,OAAM,CAAC3+E,CAAtB,EAAyB2+E,OAAM,CAAC5nE,CAAhC,EAAmC4nE,OAAM,CAACr8D,CAA1C;AAEA;AAED,SA5DD,MA4DO;AAEN;AAEA,cAAMzS,UAAQ,GAAG8uD,QAAQ,CAACxvB,UAAT,CAAoBt/B,QAArC;;AAEA,eAAM,IAAIxa,KAAC,GAAG,CAAR,EAAWyK,IAAC,GAAK+P,UAAQ,CAACuuD,KAAT,GAAiB,CAAxC,EAA6C/oE,KAAC,GAAGyK,IAAjD,EAAoDzK,KAAC,EAArD,EAA2D;AAE1D,iBAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,CAArB,EAAwBA,IAAC,EAAzB,EAA+B;AAE9B;AACA;AAEA,kBAAMy+E,MAAM,GAAG,IAAI/+E,KAAJ,GAAQM,IAAvB;;AACAgpF,qBAAM,CAAC/6B,mBAAP,CAA4B/zC,UAA5B,EAAsCukE,MAAtC;;AACAjvD,sBAAQ,CAACpvB,IAAT,CAAe4oF,OAAM,CAAC3+E,CAAtB,EAAyB2+E,OAAM,CAAC5nE,CAAhC,EAAmC4nE,OAAM,CAACr8D,CAA1C;AAEA,kBAAM+xD,MAAM,GAAG,IAAIh/E,KAAJ,GAAU,CAAEM,IAAC,GAAG,CAAN,IAAY,CAArC;;AACAgpF,qBAAM,CAAC/6B,mBAAP,CAA4B/zC,UAA5B,EAAsCwkE,MAAtC;;AACAlvD,sBAAQ,CAACpvB,IAAT,CAAe4oF,OAAM,CAAC3+E,CAAtB,EAAyB2+E,OAAM,CAAC5nE,CAAhC,EAAmC4nE,OAAM,CAACr8D,CAA1C;AAEA;AAED;AAED;AAED,OAvJqC,CAyJtC;;;AAEA,WAAKk2D,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AAEA;;AAED26G,qBAAiB,CAACvzH,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAA9B;AACAuzH,qBAAiB,CAACvzH,SAAlB,CAA4B0M,WAA5B,GAA0C6mH,iBAA1C;AAEA;;;;AAKA;;AAEA,aAASM,kBAAT,CAA6B31H,IAA7B,EAAmC41H,MAAnC,EAA2CC,MAA3C,EAAoD;AAEnD5hD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBn0D,YAAI,EAAEA,IADW;AAEjB41H,cAAM,EAAEA,MAFS;AAGjBC,cAAM,EAAEA;AAHS,OAAlB;AAMA,WAAK1hD,kBAAL,CAAyB,IAAI2hD,wBAAJ,CAA8B91H,IAA9B,EAAoC41H,MAApC,EAA4CC,MAA5C,CAAzB;AACA,WAAK7/C,aAAL;AAEA;;AAED2/C,sBAAkB,CAAC7zH,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA/B;AACA6zH,sBAAkB,CAAC7zH,SAAnB,CAA6B0M,WAA7B,GAA2CmnH,kBAA3C,C,CAEA;;AAEA,aAASG,wBAAT,CAAmC91H,IAAnC,EAAyC41H,MAAzC,EAAiDC,MAAjD,EAA0D;AAEzDpoD,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,0BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBn0D,YAAI,EAAEA,IADW;AAEjB41H,cAAM,EAAEA,MAFS;AAGjBC,cAAM,EAAEA;AAHS,OAAlB,CANyD,CAYzD;;AAEA,UAAMjlD,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ;AAEA,UAAMnjE,GAAG,GAAG,OAAZ;AAEA,UAAMugD,MAAM,GAAG,IAAIjC,OAAJ,EAAf;AAEA,UAAMiS,EAAE,GAAG,IAAIjS,OAAJ,EAAX;AAAA,UAA0BkS,EAAE,GAAG,IAAIlS,OAAJ,EAA/B;AACA,UAAMqvE,EAAE,GAAG,IAAIrvE,OAAJ,EAAX;AAAA,UAA0BsvE,EAAE,GAAG,IAAItvE,OAAJ,EAA/B;;AAEA,UAAK1mD,IAAI,CAAC/V,MAAL,GAAc,CAAnB,EAAuB;AAEtB8B,eAAO,CAACD,KAAR,CAAe,kFAAf;AAEA,OA9BwD,CAgCzD;;;AAEA,UAAMmqI,UAAU,GAAGL,MAAM,GAAG,CAA5B;;AAEA,WAAM,IAAIhrI,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIirI,MAAtB,EAA8BjrI,KAAC,EAA/B,EAAqC;AAEpC,YAAM0f,CAAC,GAAG1f,KAAC,GAAGirI,MAAd;;AAEA,aAAM,IAAI3qI,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI0qI,MAAtB,EAA8B1qI,CAAC,EAA/B,EAAqC;AAEpC,cAAMkwB,CAAC,GAAGlwB,CAAC,GAAG0qI,MAAd,CAFoC,CAIpC;;AAEA51H,cAAI,CAAEob,CAAF,EAAK9Q,CAAL,EAAQquD,EAAR,CAAJ;AACAj+C,kBAAQ,CAACpvB,IAAT,CAAeqtE,EAAE,CAACpjE,CAAlB,EAAqBojE,EAAE,CAACrsD,CAAxB,EAA2BqsD,EAAE,CAAC9gD,CAA9B,EAPoC,CASpC;AAEA;;AAEA,cAAKuD,CAAC,GAAGhT,GAAJ,IAAW,CAAhB,EAAoB;AAEnBpI,gBAAI,CAAEob,CAAC,GAAGhT,GAAN,EAAWkC,CAAX,EAAcsuD,EAAd,CAAJ;AACAm9D,cAAE,CAAC1pH,UAAH,CAAessD,EAAf,EAAmBC,EAAnB;AAEA,WALD,MAKO;AAEN54D,gBAAI,CAAEob,CAAC,GAAGhT,GAAN,EAAWkC,CAAX,EAAcsuD,EAAd,CAAJ;AACAm9D,cAAE,CAAC1pH,UAAH,CAAeusD,EAAf,EAAmBD,EAAnB;AAEA;;AAED,cAAKruD,CAAC,GAAGlC,GAAJ,IAAW,CAAhB,EAAoB;AAEnBpI,gBAAI,CAAEob,CAAF,EAAK9Q,CAAC,GAAGlC,GAAT,EAAcwwD,EAAd,CAAJ;AACAo9D,cAAE,CAAC3pH,UAAH,CAAessD,EAAf,EAAmBC,EAAnB;AAEA,WALD,MAKO;AAEN54D,gBAAI,CAAEob,CAAF,EAAK9Q,CAAC,GAAGlC,GAAT,EAAcwwD,EAAd,CAAJ;AACAo9D,cAAE,CAAC3pH,UAAH,CAAeusD,EAAf,EAAmBD,EAAnB;AAEA,WAnCmC,CAqCpC;;;AAEAhQ,gBAAM,CAACh+C,YAAP,CAAqBorH,EAArB,EAAyBC,EAAzB,EAA8Bz9E,SAA9B;AACA+yB,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAxCoC,CA0CpC;;AAEA0zD,aAAG,CAACjgF,IAAJ,CAAU8vB,CAAV,EAAa9Q,CAAb;AAEA;AAED,OAxFwD,CA0FzD;;;AAEA,WAAM,IAAI1f,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGirI,MAArB,EAA6BjrI,KAAC,EAA9B,EAAoC;AAEnC,aAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG0qI,MAArB,EAA6B1qI,IAAC,EAA9B,EAAoC;AAEnC,cAAMf,CAAC,GAAGS,KAAC,GAAGqrI,UAAJ,GAAiB/qI,IAA3B;AACA,cAAMd,CAAC,GAAGQ,KAAC,GAAGqrI,UAAJ,GAAiB/qI,IAAjB,GAAqB,CAA/B;AACA,cAAMswB,CAAC,GAAG,CAAE5wB,KAAC,GAAG,CAAN,IAAYqrI,UAAZ,GAAyB/qI,IAAzB,GAA6B,CAAvC;AACA,cAAMuwB,CAAC,GAAG,CAAE7wB,KAAC,GAAG,CAAN,IAAYqrI,UAAZ,GAAyB/qI,IAAnC,CALmC,CAOnC;;AAEA0lF,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OA5GwD,CA8GzD;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDuqD,4BAAwB,CAACh0H,SAAzB,GAAqC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAArC;AACAg0H,4BAAwB,CAACh0H,SAAzB,CAAmC0M,WAAnC,GAAiDsnH,wBAAjD,C,CAEA;;AAEA,aAASI,kBAAT,CAA6Bx7G,QAA7B,EAAuCk2D,OAAvC,EAAgDnpE,MAAhD,EAAwDwtD,MAAxD,EAAiE;AAEhEgf,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBz5C,gBAAQ,EAAEA,QADO;AAEjBk2D,eAAO,EAAEA,OAFQ;AAGjBnpE,cAAM,EAAEA,MAHS;AAIjBwtD,cAAM,EAAEA;AAJS,OAAlB;AAOA,WAAKkf,kBAAL,CAAyB,IAAIgiD,wBAAJ,CAA8Bz7G,QAA9B,EAAwCk2D,OAAxC,EAAiDnpE,MAAjD,EAAyDwtD,MAAzD,CAAzB;AACA,WAAK+gB,aAAL;AAEA;;AAEDkgD,sBAAkB,CAACp0H,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA/B;AACAo0H,sBAAkB,CAACp0H,SAAnB,CAA6B0M,WAA7B,GAA2C0nH,kBAA3C,C,CAEA;;AAEA,aAASC,wBAAT,CAAmCz7G,QAAnC,EAA6Ck2D,OAA7C,EAAsDnpE,MAAtD,EAA8DwtD,MAA9D,EAAuE;AAEtEwY,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,0BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBz5C,gBAAQ,EAAEA,QADO;AAEjBk2D,eAAO,EAAEA,OAFQ;AAGjBnpE,cAAM,EAAEA,MAHS;AAIjBwtD,cAAM,EAAEA;AAJS,OAAlB;AAOAxtD,YAAM,GAAGA,MAAM,IAAI,CAAnB;AACAwtD,YAAM,GAAGA,MAAM,IAAI,CAAnB,CAdsE,CAgBtE;;AAEA,UAAMmhE,YAAY,GAAG,EAArB;AACA,UAAMC,QAAQ,GAAG,EAAjB,CAnBsE,CAqBtE;;AAEAC,eAAS,CAAErhE,MAAF,CAAT,CAvBsE,CAyBtE;;AAEAshE,iBAAW,CAAE9uH,MAAF,CAAX,CA3BsE,CA6BtE;;AAEA+uH,iBAAW,GA/B2D,CAiCtE;;AAEA,WAAKzoD,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BmrD,YAA5B,EAA0C,CAA1C,CAA/B;AACA,WAAKroD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BmrD,YAAY,CAAC/sI,KAAb,EAA5B,EAAkD,CAAlD,CAA7B;AACA,WAAK0kF,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BorD,QAA5B,EAAsC,CAAtC,CAAzB;;AAEA,UAAKphE,MAAM,KAAK,CAAhB,EAAoB;AAEnB,aAAKoa,oBAAL,GAFmB,CAEU;AAE7B,OAJD,MAIO;AAEN,aAAKc,gBAAL,GAFM,CAEmB;AAEzB,OA/CqE,CAiDtE;;;AAEA,eAASmmD,SAAT,CAAoBrhE,MAApB,EAA6B;AAE5B,YAAM9qE,CAAC,GAAG,IAAIu8D,OAAJ,EAAV;AACA,YAAMt8D,CAAC,GAAG,IAAIs8D,OAAJ,EAAV;AACA,YAAMlrC,CAAC,GAAG,IAAIkrC,OAAJ,EAAV,CAJ4B,CAM5B;;AAEA,aAAM,IAAI97D,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGgmF,OAAO,CAAC3mF,MAA7B,EAAqCW,KAAC,IAAI,CAA1C,EAA8C;AAE7C;AAEA6rI,0BAAgB,CAAE7lD,OAAO,CAAEhmF,KAAC,GAAG,CAAN,CAAT,EAAoBT,CAApB,CAAhB;AACAssI,0BAAgB,CAAE7lD,OAAO,CAAEhmF,KAAC,GAAG,CAAN,CAAT,EAAoBR,CAApB,CAAhB;AACAqsI,0BAAgB,CAAE7lD,OAAO,CAAEhmF,KAAC,GAAG,CAAN,CAAT,EAAoB4wB,CAApB,CAAhB,CAN6C,CAQ7C;;AAEAk7G,uBAAa,CAAEvsI,CAAF,EAAKC,CAAL,EAAQoxB,CAAR,EAAWy5C,MAAX,CAAb;AAEA;AAED;;AAED,eAASyhE,aAAT,CAAwBvsI,CAAxB,EAA2BC,CAA3B,EAA8BoxB,CAA9B,EAAiCy5C,MAAjC,EAA0C;AAEzC,YAAM0hE,IAAI,GAAGxzH,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAa+qD,MAAb,CAAb,CAFyC,CAIzC;;AAEA,YAAM3qD,CAAC,GAAG,EAAV,CANyC,CAQzC;;AAEA,aAAM,IAAI1f,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAI+rI,IAAtB,EAA4B/rI,KAAC,EAA7B,EAAmC;AAElC0f,WAAC,CAAE1f,KAAF,CAAD,GAAS,EAAT;AAEA,cAAMgsI,EAAE,GAAGzsI,CAAC,CAAC+a,KAAF,GAAU6vC,IAAV,CAAgBv5B,CAAhB,EAAmB5wB,KAAC,GAAG+rI,IAAvB,CAAX;AACA,cAAME,EAAE,GAAGzsI,CAAC,CAAC8a,KAAF,GAAU6vC,IAAV,CAAgBv5B,CAAhB,EAAmB5wB,KAAC,GAAG+rI,IAAvB,CAAX;AAEA,cAAMG,IAAI,GAAGH,IAAI,GAAG/rI,KAApB;;AAEA,eAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI4rI,IAAtB,EAA4B5rI,CAAC,EAA7B,EAAmC;AAElC,gBAAKA,CAAC,KAAK,CAAN,IAAWN,KAAC,KAAK+rI,IAAtB,EAA6B;AAE5BrsH,eAAC,CAAE1f,KAAF,CAAD,CAAQM,CAAR,IAAc0rI,EAAd;AAEA,aAJD,MAIO;AAENtsH,eAAC,CAAE1f,KAAF,CAAD,CAAQM,CAAR,IAAc0rI,EAAE,CAAC1xH,KAAH,GAAW6vC,IAAX,CAAiB8hF,EAAjB,EAAqB3rI,CAAC,GAAG4rI,IAAzB,CAAd;AAEA;AAED;AAED,SAjCwC,CAmCzC;;;AAEA,aAAM,IAAIlsI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG+rI,IAArB,EAA2B/rI,KAAC,EAA5B,EAAkC;AAEjC,eAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG,KAAMyrI,IAAI,GAAG/rI,KAAb,IAAmB,CAAxC,EAA2CM,IAAC,EAA5C,EAAkD;AAEjD,gBAAME,CAAC,GAAG+X,IAAI,CAAC4N,KAAL,CAAY7lB,IAAC,GAAG,CAAhB,CAAV;;AAEA,gBAAKA,IAAC,GAAG,CAAJ,KAAU,CAAf,EAAmB;AAElB6rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAF,CAAD,CAAQQ,CAAC,GAAG,CAAZ,CAAF,CAAV;AACA2rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAC,GAAG,CAAN,CAAD,CAAYQ,CAAZ,CAAF,CAAV;AACA2rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAF,CAAD,CAAQQ,CAAR,CAAF,CAAV;AAEA,aAND,MAMO;AAEN2rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAF,CAAD,CAAQQ,CAAC,GAAG,CAAZ,CAAF,CAAV;AACA2rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAC,GAAG,CAAN,CAAD,CAAYQ,CAAC,GAAG,CAAhB,CAAF,CAAV;AACA2rI,wBAAU,CAAEzsH,CAAC,CAAE1f,KAAC,GAAG,CAAN,CAAD,CAAYQ,CAAZ,CAAF,CAAV;AAEA;AAED;AAED;AAED;;AAED,eAASmrI,WAAT,CAAsB9uH,MAAtB,EAA+B;AAE9B,YAAMysE,MAAM,GAAG,IAAIxtB,OAAJ,EAAf,CAF8B,CAI9B;;AAEA,aAAM,IAAI97D,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGwrI,YAAY,CAACnsI,MAAlC,EAA0CW,KAAC,IAAI,CAA/C,EAAmD;AAElDspF,gBAAM,CAAC3+E,CAAP,GAAW6gI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AACAspF,gBAAM,CAAC5nE,CAAP,GAAW8pH,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AACAspF,gBAAM,CAACr8D,CAAP,GAAWu+G,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AAEAspF,gBAAM,CAAC37B,SAAP,GAAmBvwC,cAAnB,CAAmCP,MAAnC;AAEA2uH,sBAAY,CAAExrI,KAAC,GAAG,CAAN,CAAZ,GAAwBspF,MAAM,CAAC3+E,CAA/B;AACA6gI,sBAAY,CAAExrI,KAAC,GAAG,CAAN,CAAZ,GAAwBspF,MAAM,CAAC5nE,CAA/B;AACA8pH,sBAAY,CAAExrI,KAAC,GAAG,CAAN,CAAZ,GAAwBspF,MAAM,CAACr8D,CAA/B;AAEA;AAED;;AAED,eAAS2+G,WAAT,GAAuB;AAEtB,YAAMtiD,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;;AAEA,aAAM,IAAI97D,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGwrI,YAAY,CAACnsI,MAAlC,EAA0CW,KAAC,IAAI,CAA/C,EAAmD;AAElDspF,gBAAM,CAAC3+E,CAAP,GAAW6gI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AACAspF,gBAAM,CAAC5nE,CAAP,GAAW8pH,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AACAspF,gBAAM,CAACr8D,CAAP,GAAWu+G,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAvB;AAEA,cAAMwwB,CAAC,GAAG47G,OAAO,CAAE9iD,MAAF,CAAP,GAAoB,CAApB,GAAwB/wE,IAAI,CAACC,EAA7B,GAAkC,GAA5C;AACA,cAAMkH,CAAC,GAAG2sH,WAAW,CAAE/iD,MAAF,CAAX,GAAwB/wE,IAAI,CAACC,EAA7B,GAAkC,GAA5C;AACAizH,kBAAQ,CAAC/qI,IAAT,CAAe8vB,CAAf,EAAkB,IAAI9Q,CAAtB;AAEA;;AAED4sH,kBAAU;AAEVC,mBAAW;AAEX;;AAED,eAASA,WAAT,GAAuB;AAEtB;AAEA,aAAM,IAAIvsI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGyrI,QAAQ,CAACpsI,MAA9B,EAAsCW,KAAC,IAAI,CAA3C,EAA+C;AAE9C;AAEA,cAAM64D,EAAE,GAAG4yE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAnB;AACA,cAAMi5D,EAAE,GAAGwyE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAnB;AACA,cAAMoiE,EAAE,GAAGqpE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAnB;AAEA,cAAM0c,GAAG,GAAGnE,IAAI,CAACmE,GAAL,CAAUm8C,EAAV,EAAcI,EAAd,EAAkBmJ,EAAlB,CAAZ;AACA,cAAM3lD,GAAG,GAAGlE,IAAI,CAACkE,GAAL,CAAUo8C,EAAV,EAAcI,EAAd,EAAkBmJ,EAAlB,CAAZ,CAT8C,CAW9C;;AAEA,cAAK1lD,GAAG,GAAG,GAAN,IAAaD,GAAG,GAAG,GAAxB,EAA8B;AAE7B,gBAAKo8C,EAAE,GAAG,GAAV,EAAgB4yE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAChB,gBAAKi5D,EAAE,GAAG,GAAV,EAAgBwyE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAChB,gBAAKoiE,EAAE,GAAG,GAAV,EAAgBqpE,QAAQ,CAAEzrI,KAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAEhB;AAED;AAED;;AAED,eAASmsI,UAAT,CAAqB7iD,MAArB,EAA8B;AAE7BkiD,oBAAY,CAAC9qI,IAAb,CAAmB4oF,MAAM,CAAC3+E,CAA1B,EAA6B2+E,MAAM,CAAC5nE,CAApC,EAAuC4nE,MAAM,CAACr8D,CAA9C;AAEA;;AAED,eAAS4+G,gBAAT,CAA2B/kH,KAA3B,EAAkCwiE,MAAlC,EAA2C;AAE1C,YAAMud,MAAM,GAAG//E,KAAK,GAAG,CAAvB;AAEAwiE,cAAM,CAAC3+E,CAAP,GAAWmlB,QAAQ,CAAE+2E,MAAM,GAAG,CAAX,CAAnB;AACAvd,cAAM,CAAC5nE,CAAP,GAAWoO,QAAQ,CAAE+2E,MAAM,GAAG,CAAX,CAAnB;AACAvd,cAAM,CAACr8D,CAAP,GAAW6C,QAAQ,CAAE+2E,MAAM,GAAG,CAAX,CAAnB;AAEA;;AAED,eAASylC,UAAT,GAAsB;AAErB,YAAM/sI,CAAC,GAAG,IAAIu8D,OAAJ,EAAV;AACA,YAAMt8D,CAAC,GAAG,IAAIs8D,OAAJ,EAAV;AACA,YAAMlrC,CAAC,GAAG,IAAIkrC,OAAJ,EAAV;AAEA,YAAM0wE,QAAQ,GAAG,IAAI1wE,OAAJ,EAAjB;AAEA,YAAM2wE,GAAG,GAAG,IAAIzgF,OAAJ,EAAZ;AACA,YAAM0gF,GAAG,GAAG,IAAI1gF,OAAJ,EAAZ;AACA,YAAM2gF,GAAG,GAAG,IAAI3gF,OAAJ,EAAZ;;AAEA,aAAM,IAAIhsD,KAAC,GAAG,CAAR,EAAWM,CAAC,GAAG,CAArB,EAAwBN,KAAC,GAAGwrI,YAAY,CAACnsI,MAAzC,EAAiDW,KAAC,IAAI,CAAL,EAAQM,CAAC,IAAI,CAA9D,EAAkE;AAEjEf,WAAC,CAAC8d,GAAF,CAAOmuH,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAnB,EAA8BwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAA1C,EAAqDwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAjE;AACAR,WAAC,CAAC6d,GAAF,CAAOmuH,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAnB,EAA8BwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAA1C,EAAqDwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAjE;AACA4wB,WAAC,CAACvT,GAAF,CAAOmuH,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAnB,EAA8BwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAA1C,EAAqDwrI,YAAY,CAAExrI,KAAC,GAAG,CAAN,CAAjE;AAEAysI,aAAG,CAACpvH,GAAJ,CAASouH,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAAjB,EAA4BmrI,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAApC;AACAosI,aAAG,CAACrvH,GAAJ,CAASouH,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAAjB,EAA4BmrI,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAApC;AACAqsI,aAAG,CAACtvH,GAAJ,CAASouH,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAAjB,EAA4BmrI,QAAQ,CAAEnrI,CAAC,GAAG,CAAN,CAApC;AAEAksI,kBAAQ,CAACtxH,IAAT,CAAe3b,CAAf,EAAmB0d,GAAnB,CAAwBzd,CAAxB,EAA4Byd,GAA5B,CAAiC2T,CAAjC,EAAqCk8B,YAArC,CAAmD,CAAnD;AAEA,cAAM8/E,GAAG,GAAGR,OAAO,CAAEI,QAAF,CAAnB;AAEAK,mBAAS,CAAEJ,GAAF,EAAOnsI,CAAC,GAAG,CAAX,EAAcf,CAAd,EAAiBqtI,GAAjB,CAAT;AACAC,mBAAS,CAAEH,GAAF,EAAOpsI,CAAC,GAAG,CAAX,EAAcd,CAAd,EAAiBotI,GAAjB,CAAT;AACAC,mBAAS,CAAEF,GAAF,EAAOrsI,CAAC,GAAG,CAAX,EAAcswB,CAAd,EAAiBg8G,GAAjB,CAAT;AAEA;AAED;;AAED,eAASC,SAAT,CAAoBx3E,EAApB,EAAwBwxC,MAAxB,EAAgCx/B,MAAhC,EAAwC+kE,OAAxC,EAAkD;AAEjD,YAAOA,OAAO,GAAG,CAAZ,IAAqB/2E,EAAE,CAAC1qD,CAAH,KAAS,CAAnC,EAAyC;AAExC8gI,kBAAQ,CAAE5kC,MAAF,CAAR,GAAqBxxC,EAAE,CAAC1qD,CAAH,GAAO,CAA5B;AAEA;;AAED,YAAO08D,MAAM,CAAC18D,CAAP,KAAa,CAAf,IAAwB08D,MAAM,CAACp6C,CAAP,KAAa,CAA1C,EAAgD;AAE/Cw+G,kBAAQ,CAAE5kC,MAAF,CAAR,GAAqBulC,OAAO,GAAG,CAAV,GAAc7zH,IAAI,CAACC,EAAnB,GAAwB,GAA7C;AAEA;AAED,OAnRqE,CAqRtE;;;AAEA,eAAS4zH,OAAT,CAAkB/kE,MAAlB,EAA2B;AAE1B,eAAO9uD,IAAI,CAACq1C,KAAL,CAAYyZ,MAAM,CAACp6C,CAAnB,EAAsB,CAAEo6C,MAAM,CAAC18D,CAA/B,CAAP;AAEA,OA3RqE,CA8RtE;;;AAEA,eAAS0hI,WAAT,CAAsBhlE,MAAtB,EAA+B;AAE9B,eAAO9uD,IAAI,CAACq1C,KAAL,CAAY,CAAEyZ,MAAM,CAAC3lD,CAArB,EAAwBnJ,IAAI,CAACmK,IAAL,CAAa2kD,MAAM,CAAC18D,CAAP,GAAW08D,MAAM,CAAC18D,CAApB,GAA4B08D,MAAM,CAACp6C,CAAP,GAAWo6C,MAAM,CAACp6C,CAAzD,CAAxB,CAAP;AAEA;AAED;;AAEDs+G,4BAAwB,CAACr0H,SAAzB,GAAqC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAArC;AACAq0H,4BAAwB,CAACr0H,SAAzB,CAAmC0M,WAAnC,GAAiD2nH,wBAAjD,C,CAEA;;AAEA,aAASuB,mBAAT,CAA8BjwH,MAA9B,EAAsCwtD,MAAtC,EAA+C;AAE9Cgf,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA,WAAKkf,kBAAL,CAAyB,IAAIwjD,yBAAJ,CAA+BlwH,MAA/B,EAAuCwtD,MAAvC,CAAzB;AACA,WAAK+gB,aAAL;AAEA;;AAED0hD,uBAAmB,CAAC51H,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAhC;AACA41H,uBAAmB,CAAC51H,SAApB,CAA8B0M,WAA9B,GAA4CkpH,mBAA5C,C,CAEA;;AAEA,aAASC,yBAAT,CAAoClwH,MAApC,EAA4CwtD,MAA5C,EAAqD;AAEpD,UAAMv6C,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACN,CAAE,CADI,EACD,CAAE,CADD,EACI,CADJ,EACQ,CAAE,CADV,EACa,CADb,EACgB,CAAE,CADlB,EACsB,CADtB,EACyB,CAAE,CAD3B,EAC8B,CAAE,CADhC,CAAjB;AAIA,UAAMk2D,OAAO,GAAG,CACf,CADe,EACZ,CADY,EACT,CADS,EACL,CADK,EACF,CADE,EACC,CADD,EACI,CADJ,EACO,CADP,EACU,CADV,EACa,CADb,EACgB,CADhB,EACmB,CADnB,CAAhB;AAIAulD,8BAAwB,CAACl3H,IAAzB,CAA+B,IAA/B,EAAqCyb,QAArC,EAA+Ck2D,OAA/C,EAAwDnpE,MAAxD,EAAgEwtD,MAAhE;AAEA,WAAK3lE,IAAL,GAAY,2BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA;;AAED0iE,6BAAyB,CAAC71H,SAA1B,GAAsC3V,MAAM,CAACiU,MAAP,CAAe+1H,wBAAwB,CAACr0H,SAAxC,CAAtC;AACA61H,6BAAyB,CAAC71H,SAA1B,CAAoC0M,WAApC,GAAkDmpH,yBAAlD,C,CAEA;;AAEA,aAASC,kBAAT,CAA6BnwH,MAA7B,EAAqCwtD,MAArC,EAA8C;AAE7Cgf,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA,WAAKkf,kBAAL,CAAyB,IAAI0jD,wBAAJ,CAA8BpwH,MAA9B,EAAsCwtD,MAAtC,CAAzB;AACA,WAAK+gB,aAAL;AAEA;;AAED4hD,sBAAkB,CAAC91H,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA/B;AACA81H,sBAAkB,CAAC91H,SAAnB,CAA6B0M,WAA7B,GAA2CopH,kBAA3C,C,CAEA;;AAEA,aAASC,wBAAT,CAAmCpwH,MAAnC,EAA2CwtD,MAA3C,EAAoD;AAEnD,UAAMv6C,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACN,CAAE,CADI,EACD,CADC,EACE,CADF,EACK,CADL,EACQ,CADR,EACW,CADX,EAEhB,CAFgB,EAEb,CAAE,CAFW,EAER,CAFQ,EAEJ,CAFI,EAED,CAFC,EAEE,CAFF,EAEK,CAFL,EAEQ,CAFR,EAEW,CAAE,CAFb,CAAjB;AAKA,UAAMk2D,OAAO,GAAG,CACf,CADe,EACZ,CADY,EACT,CADS,EACN,CADM,EACH,CADG,EACA,CADA,EACG,CADH,EACM,CADN,EACS,CADT,EAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAEH,CAFG,EAEA,CAFA,EAEG,CAFH,EAEM,CAFN,EAES,CAFT,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAGH,CAHG,EAGA,CAHA,CAAhB;AAMAulD,8BAAwB,CAACl3H,IAAzB,CAA+B,IAA/B,EAAqCyb,QAArC,EAA+Ck2D,OAA/C,EAAwDnpE,MAAxD,EAAgEwtD,MAAhE;AAEA,WAAK3lE,IAAL,GAAY,0BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA;;AAED4iE,4BAAwB,CAAC/1H,SAAzB,GAAqC3V,MAAM,CAACiU,MAAP,CAAe+1H,wBAAwB,CAACr0H,SAAxC,CAArC;AACA+1H,4BAAwB,CAAC/1H,SAAzB,CAAmC0M,WAAnC,GAAiDqpH,wBAAjD,C,CAEA;;AAEA,aAASC,mBAAT,CAA8BrwH,MAA9B,EAAsCwtD,MAAtC,EAA+C;AAE9Cgf,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA,WAAKkf,kBAAL,CAAyB,IAAI4jD,yBAAJ,CAA+BtwH,MAA/B,EAAuCwtD,MAAvC,CAAzB;AACA,WAAK+gB,aAAL;AAEA;;AAED8hD,uBAAmB,CAACh2H,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAhC;AACAg2H,uBAAmB,CAACh2H,SAApB,CAA8B0M,WAA9B,GAA4CspH,mBAA5C,C,CAEA;;AAEA,aAASC,yBAAT,CAAoCtwH,MAApC,EAA4CwtD,MAA5C,EAAqD;AAEpD,UAAMtkD,CAAC,GAAG,CAAE,IAAIxN,IAAI,CAACmK,IAAL,CAAW,CAAX,CAAN,IAAyB,CAAnC;AAEA,UAAMoN,QAAQ,GAAG,CAChB,CAAE,CADc,EACX/J,CADW,EACR,CADQ,EACJ,CADI,EACDA,CADC,EACE,CADF,EACM,CAAE,CADR,EACW,CAAEA,CADb,EACgB,CADhB,EACoB,CADpB,EACuB,CAAEA,CADzB,EAC4B,CAD5B,EAEf,CAFe,EAEZ,CAAE,CAFU,EAEPA,CAFO,EAEH,CAFG,EAEA,CAFA,EAEGA,CAFH,EAEM,CAFN,EAES,CAAE,CAFX,EAEc,CAAEA,CAFhB,EAEoB,CAFpB,EAEuB,CAFvB,EAE0B,CAAEA,CAF5B,EAGfA,CAHe,EAGZ,CAHY,EAGT,CAAE,CAHO,EAGHA,CAHG,EAGA,CAHA,EAGG,CAHH,EAGO,CAAEA,CAHT,EAGY,CAHZ,EAGe,CAAE,CAHjB,EAGqB,CAAEA,CAHvB,EAG0B,CAH1B,EAG6B,CAH7B,CAAjB;AAMA,UAAMigE,OAAO,GAAG,CACd,CADc,EACX,EADW,EACP,CADO,EACH,CADG,EACA,CADA,EACG,CADH,EACO,CADP,EACU,CADV,EACa,CADb,EACiB,CADjB,EACoB,CADpB,EACuB,EADvB,EAC4B,CAD5B,EAC+B,EAD/B,EACmC,EADnC,EAEd,CAFc,EAEX,CAFW,EAER,CAFQ,EAEJ,CAFI,EAED,EAFC,EAEG,CAFH,EAEM,EAFN,EAEU,EAFV,EAEc,CAFd,EAEiB,EAFjB,EAEqB,CAFrB,EAEwB,CAFxB,EAE2B,CAF3B,EAE8B,CAF9B,EAEiC,CAFjC,EAGd,CAHc,EAGX,CAHW,EAGR,CAHQ,EAGJ,CAHI,EAGD,CAHC,EAGE,CAHF,EAGK,CAHL,EAGQ,CAHR,EAGW,CAHX,EAGc,CAHd,EAGiB,CAHjB,EAGoB,CAHpB,EAGuB,CAHvB,EAG0B,CAH1B,EAG6B,CAH7B,EAId,CAJc,EAIX,CAJW,EAIR,CAJQ,EAIJ,CAJI,EAID,CAJC,EAIE,EAJF,EAIM,CAJN,EAIS,CAJT,EAIY,EAJZ,EAIgB,CAJhB,EAImB,CAJnB,EAIsB,CAJtB,EAIyB,CAJzB,EAI4B,CAJ5B,EAI+B,CAJ/B,CAAhB;AAOAulD,8BAAwB,CAACl3H,IAAzB,CAA+B,IAA/B,EAAqCyb,QAArC,EAA+Ck2D,OAA/C,EAAwDnpE,MAAxD,EAAgEwtD,MAAhE;AAEA,WAAK3lE,IAAL,GAAY,2BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA;;AAED8iE,6BAAyB,CAACj2H,SAA1B,GAAsC3V,MAAM,CAACiU,MAAP,CAAe+1H,wBAAwB,CAACr0H,SAAxC,CAAtC;AACAi2H,6BAAyB,CAACj2H,SAA1B,CAAoC0M,WAApC,GAAkDupH,yBAAlD,C,CAEA;;AAEA,aAASC,oBAAT,CAA+BvwH,MAA/B,EAAuCwtD,MAAvC,EAAgD;AAE/Cgf,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,sBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA,WAAKkf,kBAAL,CAAyB,IAAI8jD,0BAAJ,CAAgCxwH,MAAhC,EAAwCwtD,MAAxC,CAAzB;AACA,WAAK+gB,aAAL;AAEA;;AAEDgiD,wBAAoB,CAACl2H,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAjC;AACAk2H,wBAAoB,CAACl2H,SAArB,CAA+B0M,WAA/B,GAA6CwpH,oBAA7C,C,CAEA;;AAEA,aAASC,0BAAT,CAAqCxwH,MAArC,EAA6CwtD,MAA7C,EAAsD;AAErD,UAAMtkD,CAAC,GAAG,CAAE,IAAIxN,IAAI,CAACmK,IAAL,CAAW,CAAX,CAAN,IAAyB,CAAnC;AACA,UAAM+N,CAAC,GAAG,IAAI1K,CAAd;AAEA,UAAM+J,QAAQ,GAAG,CAEhB;AACA,OAAE,CAHc,EAGX,CAAE,CAHS,EAGN,CAAE,CAHI,EAGD,CAAE,CAHD,EAGI,CAAE,CAHN,EAGS,CAHT,EAIhB,CAAE,CAJc,EAIX,CAJW,EAIR,CAAE,CAJM,EAIH,CAAE,CAJC,EAIE,CAJF,EAIK,CAJL,EAKhB,CALgB,EAKb,CAAE,CALW,EAKR,CAAE,CALM,EAKH,CALG,EAKA,CAAE,CALF,EAKK,CALL,EAMhB,CANgB,EAMb,CANa,EAMV,CAAE,CANQ,EAML,CANK,EAMF,CANE,EAMC,CAND,EAQhB;AACC,OATe,EASZ,CAAEW,CATU,EASP,CAAE1K,CATK,EASF,CATE,EASC,CAAE0K,CATH,EASM1K,CATN,EAUf,CAVe,EAUZ0K,CAVY,EAUT,CAAE1K,CAVO,EAUJ,CAVI,EAUD0K,CAVC,EAUE1K,CAVF,EAYhB;AACA,OAAE0K,CAbc,EAaX,CAAE1K,CAbS,EAaN,CAbM,EAaH,CAAE0K,CAbC,EAaE1K,CAbF,EAaK,CAbL,EAcf0K,CAde,EAcZ,CAAE1K,CAdU,EAcP,CAdO,EAcJ0K,CAdI,EAcD1K,CAdC,EAcE,CAdF,EAgBhB;AACA,OAAEA,CAjBc,EAiBX,CAjBW,EAiBR,CAAE0K,CAjBM,EAiBH1K,CAjBG,EAiBA,CAjBA,EAiBG,CAAE0K,CAjBL,EAkBhB,CAAE1K,CAlBc,EAkBX,CAlBW,EAkBR0K,CAlBQ,EAkBL1K,CAlBK,EAkBF,CAlBE,EAkBC0K,CAlBD,CAAjB;AAqBA,UAAMu1D,OAAO,GAAG,CACf,CADe,EACZ,EADY,EACR,CADQ,EACJ,CADI,EACD,CADC,EACE,EADF,EACO,CADP,EACU,EADV,EACc,EADd,EAEf,CAFe,EAEZ,EAFY,EAER,EAFQ,EAEH,CAFG,EAEA,EAFA,EAEI,CAFJ,EAEQ,CAFR,EAEW,CAFX,EAEc,EAFd,EAGf,EAHe,EAGX,CAHW,EAGR,CAHQ,EAGJ,EAHI,EAGA,CAHA,EAGG,EAHH,EAGQ,EAHR,EAGY,EAHZ,EAGgB,CAHhB,EAIf,CAJe,EAIZ,CAJY,EAIT,EAJS,EAIJ,CAJI,EAID,EAJC,EAIG,CAJH,EAIO,CAJP,EAIU,CAJV,EAIa,EAJb,EAKf,CALe,EAKZ,EALY,EAKR,CALQ,EAKJ,CALI,EAKD,CALC,EAKE,EALF,EAKO,CALP,EAKU,EALV,EAKc,EALd,EAMf,CANe,EAMZ,EANY,EAMR,CANQ,EAMJ,CANI,EAMD,CANC,EAME,EANF,EAMO,CANP,EAMU,EANV,EAMc,EANd,EAOf,CAPe,EAOZ,EAPY,EAOR,EAPQ,EAOH,CAPG,EAOA,EAPA,EAOI,CAPJ,EAOQ,CAPR,EAOW,CAPX,EAOc,EAPd,EAQf,EARe,EAQX,CARW,EAQR,CARQ,EAQJ,EARI,EAQA,CARA,EAQG,EARH,EAQQ,EARR,EAQY,EARZ,EAQgB,CARhB,EASf,CATe,EASZ,EATY,EASR,EATQ,EASH,CATG,EASA,EATA,EASI,CATJ,EASQ,CATR,EASW,CATX,EASc,CATd,EAUf,EAVe,EAUX,CAVW,EAUR,CAVQ,EAUJ,EAVI,EAUA,CAVA,EAUG,EAVH,EAUQ,EAVR,EAUY,EAVZ,EAUgB,CAVhB,EAWf,EAXe,EAWX,CAXW,EAWR,EAXQ,EAWH,EAXG,EAWC,EAXD,EAWK,CAXL,EAWS,EAXT,EAWa,CAXb,EAWgB,EAXhB,EAYf,CAZe,EAYZ,EAZY,EAYR,EAZQ,EAYH,CAZG,EAYA,EAZA,EAYI,CAZJ,EAYQ,CAZR,EAYW,CAZX,EAYc,CAZd,CAAhB;AAeAulD,8BAAwB,CAACl3H,IAAzB,CAA+B,IAA/B,EAAqCyb,QAArC,EAA+Ck2D,OAA/C,EAAwDnpE,MAAxD,EAAgEwtD,MAAhE;AAEA,WAAK3lE,IAAL,GAAY,4BAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwtD,cAAM,EAAEA;AAFS,OAAlB;AAKA;;AAEDgjE,8BAA0B,CAACn2H,SAA3B,GAAuC3V,MAAM,CAACiU,MAAP,CAAe+1H,wBAAwB,CAACr0H,SAAxC,CAAvC;AACAm2H,8BAA0B,CAACn2H,SAA3B,CAAqC0M,WAArC,GAAmDypH,0BAAnD,C,CAEA;;AAEA,aAASC,YAAT,CAAuBjqI,IAAvB,EAA6BkqI,eAA7B,EAA8C1wH,MAA9C,EAAsD2wH,cAAtD,EAAsEC,MAAtE,EAA8EC,KAA9E,EAAsF;AAErFrkD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,cAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBlmE,YAAI,EAAEA,IADW;AAEjBkqI,uBAAe,EAAEA,eAFA;AAGjB1wH,cAAM,EAAEA,MAHS;AAIjB2wH,sBAAc,EAAEA,cAJC;AAKjBC,cAAM,EAAEA;AALS,OAAlB;AAQA,UAAKC,KAAK,KAAKt/H,SAAf,EAA2BjN,OAAO,CAAC2W,IAAR,CAAc,6CAAd;AAE3B,UAAM61H,cAAc,GAAG,IAAIC,kBAAJ,CAAwBvqI,IAAxB,EAA8BkqI,eAA9B,EAA+C1wH,MAA/C,EAAuD2wH,cAAvD,EAAuEC,MAAvE,CAAvB,CAhBqF,CAkBrF;;AAEA,WAAKI,QAAL,GAAgBF,cAAc,CAACE,QAA/B;AACA,WAAKntD,OAAL,GAAeitD,cAAc,CAACjtD,OAA9B;AACA,WAAKotD,SAAL,GAAiBH,cAAc,CAACG,SAAhC,CAtBqF,CAwBrF;;AAEA,WAAKvkD,kBAAL,CAAyBokD,cAAzB;AACA,WAAKviD,aAAL;AAEA;;AAEDkiD,gBAAY,CAACp2H,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAzB;AACAo2H,gBAAY,CAACp2H,SAAb,CAAuB0M,WAAvB,GAAqC0pH,YAArC,C,CAEA;;AAEA,aAASM,kBAAT,CAA6BvqI,IAA7B,EAAmCkqI,eAAnC,EAAoD1wH,MAApD,EAA4D2wH,cAA5D,EAA4EC,MAA5E,EAAqF;AAEpF5qD,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBlmE,YAAI,EAAEA,IADW;AAEjBkqI,uBAAe,EAAEA,eAFA;AAGjB1wH,cAAM,EAAEA,MAHS;AAIjB2wH,sBAAc,EAAEA,cAJC;AAKjBC,cAAM,EAAEA;AALS,OAAlB;AAQAF,qBAAe,GAAGA,eAAe,IAAI,EAArC;AACA1wH,YAAM,GAAGA,MAAM,IAAI,CAAnB;AACA2wH,oBAAc,GAAGA,cAAc,IAAI,CAAnC;AACAC,YAAM,GAAGA,MAAM,IAAI,KAAnB;AAEA,UAAMM,MAAM,GAAG1qI,IAAI,CAAC2qI,mBAAL,CAA0BT,eAA1B,EAA2CE,MAA3C,CAAf,CAnBoF,CAqBpF;;AAEA,WAAKI,QAAL,GAAgBE,MAAM,CAACF,QAAvB;AACA,WAAKntD,OAAL,GAAeqtD,MAAM,CAACrtD,OAAtB;AACA,WAAKotD,SAAL,GAAiBC,MAAM,CAACD,SAAxB,CAzBoF,CA2BpF;;AAEA,UAAMxkD,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMiC,MAAM,GAAG,IAAIjC,OAAJ,EAAf;AACA,UAAMzG,EAAE,GAAG,IAAIrJ,OAAJ,EAAX;AACA,UAAI/iB,CAAC,GAAG,IAAI6yB,OAAJ,EAAR,CAhCoF,CAkCpF;;AAEA,UAAMhsC,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ;AACA,UAAMqF,OAAO,GAAG,EAAhB,CAvCoF,CAyCpF;;AAEAioD,wBAAkB,GA3CkE,CA6CpF;;AAEA,WAAKhzG,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB,EAlDoF,CAoDpF;;AAEA,eAASstD,kBAAT,GAA8B;AAE7B,aAAM,IAAIjuI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGutI,eAArB,EAAsCvtI,KAAC,EAAvC,EAA6C;AAE5CkuI,yBAAe,CAAEluI,KAAF,CAAf;AAEA,SAN4B,CAQ7B;AACA;AACA;AACA;;;AAEAkuI,uBAAe,CAAIT,MAAM,KAAK,KAAb,GAAuBF,eAAvB,GAAyC,CAA3C,CAAf,CAb6B,CAe7B;AACA;;AAEA3B,mBAAW,GAlBkB,CAoB7B;;AAEAuC,uBAAe;AAEf;;AAED,eAASD,eAAT,CAA0BluI,CAA1B,EAA8B;AAE7B;AAEAipC,SAAC,GAAG5lC,IAAI,CAAC+qI,UAAL,CAAiBpuI,CAAC,GAAGutI,eAArB,EAAsCtkG,CAAtC,CAAJ,CAJ6B,CAM7B;;AAEA,YAAML,CAAC,GAAGmlG,MAAM,CAACrtD,OAAP,CAAgB1gF,CAAhB,CAAV;AACA,YAAMs1B,CAAC,GAAGy4G,MAAM,CAACD,SAAP,CAAkB9tI,CAAlB,CAAV,CAT6B,CAW7B;;AAEA,aAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIktI,cAAtB,EAAsCltI,CAAC,EAAvC,EAA6C;AAE5C,cAAMof,CAAC,GAAGpf,CAAC,GAAGktI,cAAJ,GAAqBj1H,IAAI,CAACC,EAA1B,GAA+B,CAAzC;AAEA,cAAMujC,GAAG,GAAGxjC,IAAI,CAACwjC,GAAL,CAAUr8B,CAAV,CAAZ;AACA,cAAMo8B,GAAG,GAAG,CAAEvjC,IAAI,CAACujC,GAAL,CAAUp8B,CAAV,CAAd,CAL4C,CAO5C;;AAEAq+C,gBAAM,CAACpzD,CAAP,GAAamxC,GAAG,GAAGlT,CAAC,CAACj+B,CAAR,GAAYoxC,GAAG,GAAGzmB,CAAC,CAAC3qB,CAAjC;AACAozD,gBAAM,CAACr8C,CAAP,GAAao6B,GAAG,GAAGlT,CAAC,CAAClnB,CAAR,GAAYq6B,GAAG,GAAGzmB,CAAC,CAAC5T,CAAjC;AACAq8C,gBAAM,CAAC9wC,CAAP,GAAa6uB,GAAG,GAAGlT,CAAC,CAAC3b,CAAR,GAAY8uB,GAAG,GAAGzmB,CAAC,CAACrI,CAAjC;AACA8wC,gBAAM,CAACpQ,SAAP;AAEA+yB,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAd4C,CAgB5C;;AAEAq8D,gBAAM,CAAC3+E,CAAP,GAAWs+B,CAAC,CAACt+B,CAAF,GAAMkS,MAAM,GAAGkhD,MAAM,CAACpzD,CAAjC;AACA2+E,gBAAM,CAAC5nE,CAAP,GAAWunB,CAAC,CAACvnB,CAAF,GAAM7E,MAAM,GAAGkhD,MAAM,CAACr8C,CAAjC;AACA4nE,gBAAM,CAACr8D,CAAP,GAAWgc,CAAC,CAAChc,CAAF,GAAMpQ,MAAM,GAAGkhD,MAAM,CAAC9wC,CAAjC;AAEA6C,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEA;AAED;;AAED,eAASkhH,eAAT,GAA2B;AAE1B,aAAM,IAAI7tI,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIitI,eAAtB,EAAuCjtI,CAAC,EAAxC,EAA8C;AAE7C,eAAM,IAAIN,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIwtI,cAAtB,EAAsCxtI,KAAC,EAAvC,EAA6C;AAE5C,gBAAMT,CAAC,GAAG,CAAEiuI,cAAc,GAAG,CAAnB,KAA2BltI,CAAC,GAAG,CAA/B,KAAuCN,KAAC,GAAG,CAA3C,CAAV;AACA,gBAAMR,CAAC,GAAG,CAAEguI,cAAc,GAAG,CAAnB,IAAyBltI,CAAzB,IAA+BN,KAAC,GAAG,CAAnC,CAAV;AACA,gBAAM4wB,CAAC,GAAG,CAAE48G,cAAc,GAAG,CAAnB,IAAyBltI,CAAzB,GAA6BN,KAAvC;AACA,gBAAM6wB,CAAC,GAAG,CAAE28G,cAAc,GAAG,CAAnB,KAA2BltI,CAAC,GAAG,CAA/B,IAAqCN,KAA/C,CAL4C,CAO5C;;AAEAgmF,mBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,mBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED;AAED;;AAED,eAAS+6G,WAAT,GAAuB;AAEtB,aAAM,IAAI5rI,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIutI,eAAtB,EAAuCvtI,KAAC,EAAxC,EAA8C;AAE7C,eAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIktI,cAAtB,EAAsCltI,CAAC,EAAvC,EAA6C;AAE5C+0D,cAAE,CAAC1qD,CAAH,GAAO3K,KAAC,GAAGutI,eAAX;AACAl4E,cAAE,CAAC3zC,CAAH,GAAOphB,CAAC,GAAGktI,cAAX;AAEA7sD,eAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB;AAEA;AAED;AAED;AAED;;AAEDksH,sBAAkB,CAAC12H,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAA/B;AACA02H,sBAAkB,CAAC12H,SAAnB,CAA6B0M,WAA7B,GAA2CgqH,kBAA3C;;AAEAA,sBAAkB,CAAC12H,SAAnB,CAA6B29C,MAA7B,GAAsC,YAAY;AAEjD,UAAMh2D,IAAI,GAAGgkF,cAAc,CAAC3rE,SAAf,CAAyB29C,MAAzB,CAAgCxgD,IAAhC,CAAsC,IAAtC,CAAb;AAEAxV,UAAI,CAACwE,IAAL,GAAY,KAAKkmE,UAAL,CAAgBlmE,IAAhB,CAAqBwxD,MAArB,EAAZ;AAEA,aAAOh2D,IAAP;AAEA,KARD,C,CAUA;;;AAEA,aAASwvI,iBAAT,CAA4BxxH,MAA5B,EAAoCyxH,IAApC,EAA0Cf,eAA1C,EAA2DC,cAA3D,EAA2E18G,CAA3E,EAA8E6f,CAA9E,EAAiF49F,WAAjF,EAA+F;AAE9FllD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjByxH,YAAI,EAAEA,IAFW;AAGjBf,uBAAe,EAAEA,eAHA;AAIjBC,sBAAc,EAAEA,cAJC;AAKjB18G,SAAC,EAAEA,CALc;AAMjB6f,SAAC,EAAEA;AANc,OAAlB;AASA,UAAK49F,WAAW,KAAKngI,SAArB,EAAiCjN,OAAO,CAAC2W,IAAR,CAAc,0FAAd;AAEjC,WAAKyxE,kBAAL,CAAyB,IAAIilD,uBAAJ,CAA6B3xH,MAA7B,EAAqCyxH,IAArC,EAA2Cf,eAA3C,EAA4DC,cAA5D,EAA4E18G,CAA5E,EAA+E6f,CAA/E,CAAzB;AACA,WAAKy6C,aAAL;AAEA;;AAEDijD,qBAAiB,CAACn3H,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA9B;AACAm3H,qBAAiB,CAACn3H,SAAlB,CAA4B0M,WAA5B,GAA0CyqH,iBAA1C,C,CAEA;;AAEA,aAASG,uBAAT,CAAkC3xH,MAAlC,EAA0CyxH,IAA1C,EAAgDf,eAAhD,EAAiEC,cAAjE,EAAiF18G,CAAjF,EAAoF6f,CAApF,EAAwF;AAEvFkyC,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,yBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjByxH,YAAI,EAAEA,IAFW;AAGjBf,uBAAe,EAAEA,eAHA;AAIjBC,sBAAc,EAAEA,cAJC;AAKjB18G,SAAC,EAAEA,CALc;AAMjB6f,SAAC,EAAEA;AANc,OAAlB;AASA9zB,YAAM,GAAGA,MAAM,IAAI,CAAnB;AACAyxH,UAAI,GAAGA,IAAI,IAAI,GAAf;AACAf,qBAAe,GAAGh1H,IAAI,CAAC4N,KAAL,CAAYonH,eAAZ,KAAiC,EAAnD;AACAC,oBAAc,GAAGj1H,IAAI,CAAC4N,KAAL,CAAYqnH,cAAZ,KAAgC,CAAjD;AACA18G,OAAC,GAAGA,CAAC,IAAI,CAAT;AACA6f,OAAC,GAAGA,CAAC,IAAI,CAAT,CApBuF,CAsBvF;;AAEA,UAAMq1C,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CA3BuF,CA6BvF;;AAEA,UAAM2I,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMiC,MAAM,GAAG,IAAIjC,OAAJ,EAAf;AAEA,UAAM2yE,EAAE,GAAG,IAAI3yE,OAAJ,EAAX;AACA,UAAM4yE,EAAE,GAAG,IAAI5yE,OAAJ,EAAX;AAEA,UAAMxmC,CAAC,GAAG,IAAIwmC,OAAJ,EAAV;AACA,UAAMzzB,CAAC,GAAG,IAAIyzB,OAAJ,EAAV;AACA,UAAMlzB,CAAC,GAAG,IAAIkzB,OAAJ,EAAV,CAvCuF,CAyCvF;;AAEA,WAAM,IAAI97D,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIutI,eAAtB,EAAuC,EAAGvtI,KAA1C,EAA8C;AAE7C;AAEA,YAAMwwB,CAAC,GAAGxwB,KAAC,GAAGutI,eAAJ,GAAsBz8G,CAAtB,GAA0BvY,IAAI,CAACC,EAA/B,GAAoC,CAA9C,CAJ6C,CAM7C;AACA;;AAEAm2H,gCAAwB,CAAEn+G,CAAF,EAAKM,CAAL,EAAQ6f,CAAR,EAAW9zB,MAAX,EAAmB4xH,EAAnB,CAAxB;AACAE,gCAAwB,CAAEn+G,CAAC,GAAG,IAAN,EAAYM,CAAZ,EAAe6f,CAAf,EAAkB9zB,MAAlB,EAA0B6xH,EAA1B,CAAxB,CAV6C,CAY7C;;AAEArmG,SAAC,CAAC5mB,UAAF,CAAcitH,EAAd,EAAkBD,EAAlB;AACA7lG,SAAC,CAAC6jB,UAAF,CAAciiF,EAAd,EAAkBD,EAAlB;AACAn5G,SAAC,CAACvV,YAAF,CAAgBsoB,CAAhB,EAAmBO,CAAnB;AACAA,SAAC,CAAC7oB,YAAF,CAAgBuV,CAAhB,EAAmB+S,CAAnB,EAjB6C,CAmB7C;;AAEA/S,SAAC,CAACq4B,SAAF;AACA/kB,SAAC,CAAC+kB,SAAF;;AAEA,aAAM,IAAIrtD,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIktI,cAAtB,EAAsC,EAAGltI,CAAzC,EAA6C;AAE5C;AACA;AAEA,cAAMof,CAAC,GAAGpf,CAAC,GAAGktI,cAAJ,GAAqBj1H,IAAI,CAACC,EAA1B,GAA+B,CAAzC;AACA,cAAMg6C,EAAE,GAAG,CAAE87E,IAAF,GAAS/1H,IAAI,CAACujC,GAAL,CAAUp8B,CAAV,CAApB;AACA,cAAM+yC,EAAE,GAAG67E,IAAI,GAAG/1H,IAAI,CAACwjC,GAAL,CAAUr8B,CAAV,CAAlB,CAP4C,CAS5C;AACA;;AAEA4pE,gBAAM,CAAC3+E,CAAP,GAAW8jI,EAAE,CAAC9jI,CAAH,IAAS6nD,EAAE,GAAG5pB,CAAC,CAACj+B,CAAP,GAAW8nD,EAAE,GAAGn9B,CAAC,CAAC3qB,CAA3B,CAAX;AACA2+E,gBAAM,CAAC5nE,CAAP,GAAW+sH,EAAE,CAAC/sH,CAAH,IAAS8wC,EAAE,GAAG5pB,CAAC,CAAClnB,CAAP,GAAW+wC,EAAE,GAAGn9B,CAAC,CAAC5T,CAA3B,CAAX;AACA4nE,gBAAM,CAACr8D,CAAP,GAAWwhH,EAAE,CAACxhH,CAAH,IAASulC,EAAE,GAAG5pB,CAAC,CAAC3b,CAAP,GAAWwlC,EAAE,GAAGn9B,CAAC,CAACrI,CAA3B,CAAX;AAEA6C,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAhB4C,CAkB5C;;AAEA8wC,gBAAM,CAACt8C,UAAP,CAAmB6nE,MAAnB,EAA2BmlD,EAA3B,EAAgC9gF,SAAhC;AAEA+yB,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAtB4C,CAwB5C;;AAEA0zD,aAAG,CAACjgF,IAAJ,CAAUV,KAAC,GAAGutI,eAAd;AACA5sD,aAAG,CAACjgF,IAAJ,CAAUJ,CAAC,GAAGktI,cAAd;AAEA;AAED,OAlGsF,CAoGvF;;;AAEA,WAAM,IAAIltI,IAAC,GAAG,CAAd,EAAiBA,IAAC,IAAIitI,eAAtB,EAAuCjtI,IAAC,EAAxC,EAA8C;AAE7C,aAAM,IAAIN,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIwtI,cAAtB,EAAsCxtI,KAAC,EAAvC,EAA6C;AAE5C;AAEA,cAAMT,CAAC,GAAG,CAAEiuI,cAAc,GAAG,CAAnB,KAA2BltI,IAAC,GAAG,CAA/B,KAAuCN,KAAC,GAAG,CAA3C,CAAV;AACA,cAAMR,CAAC,GAAG,CAAEguI,cAAc,GAAG,CAAnB,IAAyBltI,IAAzB,IAA+BN,KAAC,GAAG,CAAnC,CAAV;AACA,cAAM4wB,CAAC,GAAG,CAAE48G,cAAc,GAAG,CAAnB,IAAyBltI,IAAzB,GAA6BN,KAAvC;AACA,cAAM6wB,CAAC,GAAG,CAAE28G,cAAc,GAAG,CAAnB,KAA2BltI,IAAC,GAAG,CAA/B,IAAqCN,KAA/C,CAP4C,CAS5C;;AAEAgmF,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OAxHsF,CA0HvF;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB,EA/HuF,CAiIvF;;AAEA,eAASguD,wBAAT,CAAmCn+G,CAAnC,EAAsCM,CAAtC,EAAyC6f,CAAzC,EAA4C9zB,MAA5C,EAAoDrC,QAApD,EAA+D;AAE9D,YAAMo0H,EAAE,GAAGr2H,IAAI,CAACujC,GAAL,CAAUtrB,CAAV,CAAX;AACA,YAAMq+G,EAAE,GAAGt2H,IAAI,CAACwjC,GAAL,CAAUvrB,CAAV,CAAX;AACA,YAAMs+G,OAAO,GAAGn+F,CAAC,GAAG7f,CAAJ,GAAQN,CAAxB;AACA,YAAMu+G,EAAE,GAAGx2H,IAAI,CAACujC,GAAL,CAAUgzF,OAAV,CAAX;AAEAt0H,gBAAQ,CAAC7P,CAAT,GAAakS,MAAM,IAAK,IAAIkyH,EAAT,CAAN,GAAsB,GAAtB,GAA4BH,EAAzC;AACAp0H,gBAAQ,CAACkH,CAAT,GAAa7E,MAAM,IAAK,IAAIkyH,EAAT,CAAN,GAAsBF,EAAtB,GAA2B,GAAxC;AACAr0H,gBAAQ,CAACyS,CAAT,GAAapQ,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAU+yF,OAAV,CAAT,GAA+B,GAA5C;AAEA;AAED;;AAEDN,2BAAuB,CAACt3H,SAAxB,GAAoC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAApC;AACAs3H,2BAAuB,CAACt3H,SAAxB,CAAkC0M,WAAlC,GAAgD4qH,uBAAhD,C,CAEA;;AAEA,aAASQ,aAAT,CAAwBnyH,MAAxB,EAAgCyxH,IAAhC,EAAsCd,cAAtC,EAAsDD,eAAtD,EAAuE0B,GAAvE,EAA6E;AAE5E5lD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,eAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjByxH,YAAI,EAAEA,IAFW;AAGjBd,sBAAc,EAAEA,cAHC;AAIjBD,uBAAe,EAAEA,eAJA;AAKjB0B,WAAG,EAAEA;AALY,OAAlB;AAQA,WAAK1lD,kBAAL,CAAyB,IAAI2lD,mBAAJ,CAAyBryH,MAAzB,EAAiCyxH,IAAjC,EAAuCd,cAAvC,EAAuDD,eAAvD,EAAwE0B,GAAxE,CAAzB;AACA,WAAK7jD,aAAL;AAEA;;AAED4jD,iBAAa,CAAC93H,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA1B;AACA83H,iBAAa,CAAC93H,SAAd,CAAwB0M,WAAxB,GAAsCorH,aAAtC,C,CAEA;;AAEA,aAASE,mBAAT,CAA8BryH,MAA9B,EAAsCyxH,IAAtC,EAA4Cd,cAA5C,EAA4DD,eAA5D,EAA6E0B,GAA7E,EAAmF;AAElFpsD,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjByxH,YAAI,EAAEA,IAFW;AAGjBd,sBAAc,EAAEA,cAHC;AAIjBD,uBAAe,EAAEA,eAJA;AAKjB0B,WAAG,EAAEA;AALY,OAAlB;AAQApyH,YAAM,GAAGA,MAAM,IAAI,CAAnB;AACAyxH,UAAI,GAAGA,IAAI,IAAI,GAAf;AACAd,oBAAc,GAAGj1H,IAAI,CAAC4N,KAAL,CAAYqnH,cAAZ,KAAgC,CAAjD;AACAD,qBAAe,GAAGh1H,IAAI,CAAC4N,KAAL,CAAYonH,eAAZ,KAAiC,CAAnD;AACA0B,SAAG,GAAGA,GAAG,IAAI12H,IAAI,CAACC,EAAL,GAAU,CAAvB,CAlBkF,CAoBlF;;AAEA,UAAMwtE,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAzBkF,CA2BlF;;AAEA,UAAMzkC,MAAM,GAAG,IAAI4f,OAAJ,EAAf;AACA,UAAMwtB,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMiC,MAAM,GAAG,IAAIjC,OAAJ,EAAf,CA/BkF,CAiClF;;AAEA,WAAM,IAAIx7D,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIktI,cAAtB,EAAsCltI,CAAC,EAAvC,EAA6C;AAE5C,aAAM,IAAIN,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIutI,eAAtB,EAAuCvtI,KAAC,EAAxC,EAA8C;AAE7C,cAAMwwB,CAAC,GAAGxwB,KAAC,GAAGutI,eAAJ,GAAsB0B,GAAhC;AACA,cAAMvvH,CAAC,GAAGpf,CAAC,GAAGktI,cAAJ,GAAqBj1H,IAAI,CAACC,EAA1B,GAA+B,CAAzC,CAH6C,CAK7C;;AAEA8wE,gBAAM,CAAC3+E,CAAP,GAAW,CAAEkS,MAAM,GAAGyxH,IAAI,GAAG/1H,IAAI,CAACujC,GAAL,CAAUp8B,CAAV,CAAlB,IAAoCnH,IAAI,CAACujC,GAAL,CAAUtrB,CAAV,CAA/C;AACA84D,gBAAM,CAAC5nE,CAAP,GAAW,CAAE7E,MAAM,GAAGyxH,IAAI,GAAG/1H,IAAI,CAACujC,GAAL,CAAUp8B,CAAV,CAAlB,IAAoCnH,IAAI,CAACwjC,GAAL,CAAUvrB,CAAV,CAA/C;AACA84D,gBAAM,CAACr8D,CAAP,GAAWqhH,IAAI,GAAG/1H,IAAI,CAACwjC,GAAL,CAAUr8B,CAAV,CAAlB;AAEAoQ,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAX6C,CAa7C;;AAEAivB,gBAAM,CAACvxC,CAAP,GAAWkS,MAAM,GAAGtE,IAAI,CAACujC,GAAL,CAAUtrB,CAAV,CAApB;AACA0rB,gBAAM,CAACx6B,CAAP,GAAW7E,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAUvrB,CAAV,CAApB;AACAutC,gBAAM,CAACt8C,UAAP,CAAmB6nE,MAAnB,EAA2BptC,MAA3B,EAAoCyR,SAApC;AAEA+yB,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAnB6C,CAqB7C;;AAEA0zD,aAAG,CAACjgF,IAAJ,CAAUV,KAAC,GAAGutI,eAAd;AACA5sD,aAAG,CAACjgF,IAAJ,CAAUJ,CAAC,GAAGktI,cAAd;AAEA;AAED,OAjEiF,CAmElF;;;AAEA,WAAM,IAAIltI,IAAC,GAAG,CAAd,EAAiBA,IAAC,IAAIktI,cAAtB,EAAsCltI,IAAC,EAAvC,EAA6C;AAE5C,aAAM,IAAIN,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIutI,eAAtB,EAAuCvtI,KAAC,EAAxC,EAA8C;AAE7C;AAEA,cAAMT,CAAC,GAAG,CAAEguI,eAAe,GAAG,CAApB,IAA0BjtI,IAA1B,GAA8BN,KAA9B,GAAkC,CAA5C;AACA,cAAMR,CAAC,GAAG,CAAE+tI,eAAe,GAAG,CAApB,KAA4BjtI,IAAC,GAAG,CAAhC,IAAsCN,KAAtC,GAA0C,CAApD;AACA,cAAM4wB,CAAC,GAAG,CAAE28G,eAAe,GAAG,CAApB,KAA4BjtI,IAAC,GAAG,CAAhC,IAAsCN,KAAhD;AACA,cAAM6wB,CAAC,GAAG,CAAE08G,eAAe,GAAG,CAApB,IAA0BjtI,IAA1B,GAA8BN,KAAxC,CAP6C,CAS7C;;AAEAgmF,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OAvFiF,CAyFlF;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDuuD,uBAAmB,CAACh4H,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAhC;AACAg4H,uBAAmB,CAACh4H,SAApB,CAA8B0M,WAA9B,GAA4CsrH,mBAA5C;AAEA;;;;AAIA,QAAMC,MAAM,GAAG;AAEdC,iBAAW,EAAE,qBAAWvwI,IAAX,EAAiBwwI,WAAjB,EAA8BC,GAA9B,EAAoC;AAEhDA,WAAG,GAAGA,GAAG,IAAI,CAAb;AAEA,YAAIC,QAAQ,GAAGF,WAAW,IAAIA,WAAW,CAAChwI,MAA1C;AAAA,YACCmwI,QAAQ,GAAGD,QAAQ,GAAGF,WAAW,CAAE,CAAF,CAAX,GAAmBC,GAAtB,GAA4BzwI,IAAI,CAACQ,MADrD;AAAA,YAECowI,SAAS,GAAGC,UAAU,CAAE7wI,IAAF,EAAQ,CAAR,EAAW2wI,QAAX,EAAqBF,GAArB,EAA0B,IAA1B,CAFvB;AAAA,YAGC7iC,SAAS,GAAG,EAHb;AAKA,YAAK,CAAEgjC,SAAF,IAAeA,SAAS,CAACrgG,IAAV,KAAmBqgG,SAAS,CAACjmG,IAAjD,EAAwD,OAAOijE,SAAP;AAExD,YAAIvxD,IAAJ,EAAU1B,IAAV,EAAgB2B,IAAhB,EAAsBqwB,IAAtB,EAA4B7gE,CAA5B,EAA+B+W,CAA/B,EAAkCiuH,OAAlC;AAEA,YAAKJ,QAAL,EAAgBE,SAAS,GAAGG,cAAc,CAAE/wI,IAAF,EAAQwwI,WAAR,EAAqBI,SAArB,EAAgCH,GAAhC,CAA1B,CAbgC,CAehD;;AACA,YAAKzwI,IAAI,CAACQ,MAAL,GAAc,KAAKiwI,GAAxB,EAA8B;AAE7Bp0F,cAAI,GAAGC,IAAI,GAAGt8C,IAAI,CAAE,CAAF,CAAlB;AACA26C,cAAI,GAAGgyB,IAAI,GAAG3sE,IAAI,CAAE,CAAF,CAAlB;;AAEA,eAAM,IAAImB,KAAC,GAAGsvI,GAAd,EAAmBtvI,KAAC,GAAGwvI,QAAvB,EAAiCxvI,KAAC,IAAIsvI,GAAtC,EAA4C;AAE3C3kI,aAAC,GAAG9L,IAAI,CAAEmB,KAAF,CAAR;AACA0hB,aAAC,GAAG7iB,IAAI,CAAEmB,KAAC,GAAG,CAAN,CAAR;AACA,gBAAK2K,CAAC,GAAGuwC,IAAT,EAAgBA,IAAI,GAAGvwC,CAAP;AAChB,gBAAK+W,CAAC,GAAG83B,IAAT,EAAgBA,IAAI,GAAG93B,CAAP;AAChB,gBAAK/W,CAAC,GAAGwwC,IAAT,EAAgBA,IAAI,GAAGxwC,CAAP;AAChB,gBAAK+W,CAAC,GAAG8pD,IAAT,EAAgBA,IAAI,GAAG9pD,CAAP;AAEhB,WAd4B,CAgB7B;;;AACAiuH,iBAAO,GAAGp3H,IAAI,CAACmE,GAAL,CAAUy+B,IAAI,GAAGD,IAAjB,EAAuBswB,IAAI,GAAGhyB,IAA9B,CAAV;AACAm2F,iBAAO,GAAGA,OAAO,KAAK,CAAZ,GAAgB,IAAIA,OAApB,GAA8B,CAAxC;AAEA;;AAEDE,oBAAY,CAAEJ,SAAF,EAAahjC,SAAb,EAAwB6iC,GAAxB,EAA6Bp0F,IAA7B,EAAmC1B,IAAnC,EAAyCm2F,OAAzC,CAAZ;AAEA,eAAOljC,SAAP;AAEA;AA5Ca,KAAf,C,CAgDA;;AACA,aAASijC,UAAT,CAAqB7wI,IAArB,EAA2B4zE,KAA3B,EAAkCp7C,GAAlC,EAAuCi4G,GAAvC,EAA4CQ,SAA5C,EAAwD;AAEvD,UAAI9vI,CAAJ,EAAO2uC,IAAP;;AAEA,UAAKmhG,SAAS,KAAOC,UAAU,CAAElxI,IAAF,EAAQ4zE,KAAR,EAAep7C,GAAf,EAAoBi4G,GAApB,CAAV,GAAsC,CAA3D,EAAiE;AAEhE,aAAMtvI,CAAC,GAAGyyE,KAAV,EAAiBzyE,CAAC,GAAGq3B,GAArB,EAA0Br3B,CAAC,IAAIsvI,GAA/B;AAAqC3gG,cAAI,GAAGqhG,UAAU,CAAEhwI,CAAF,EAAKnB,IAAI,CAAEmB,CAAF,CAAT,EAAgBnB,IAAI,CAAEmB,CAAC,GAAG,CAAN,CAApB,EAA+B2uC,IAA/B,CAAjB;AAArC;AAEA,OAJD,MAIO;AAEN,aAAM3uC,CAAC,GAAGq3B,GAAG,GAAGi4G,GAAhB,EAAqBtvI,CAAC,IAAIyyE,KAA1B,EAAiCzyE,CAAC,IAAIsvI,GAAtC;AAA4C3gG,cAAI,GAAGqhG,UAAU,CAAEhwI,CAAF,EAAKnB,IAAI,CAAEmB,CAAF,CAAT,EAAgBnB,IAAI,CAAEmB,CAAC,GAAG,CAAN,CAApB,EAA+B2uC,IAA/B,CAAjB;AAA5C;AAEA;;AAED,UAAKA,IAAI,IAAIyf,MAAM,CAAEzf,IAAF,EAAQA,IAAI,CAACS,IAAb,CAAnB,EAAyC;AAExC6gG,kBAAU,CAAEthG,IAAF,CAAV;AACAA,YAAI,GAAGA,IAAI,CAACS,IAAZ;AAEA;;AAED,aAAOT,IAAP;AAEA,K,CAED;;;AACA,aAASuhG,YAAT,CAAuBz9D,KAAvB,EAA8Bp7C,GAA9B,EAAoC;AAEnC,UAAK,CAAEo7C,KAAP,EAAe,OAAOA,KAAP;AACf,UAAK,CAAEp7C,GAAP,EAAaA,GAAG,GAAGo7C,KAAN;AAEb,UAAI3hD,CAAC,GAAG2hD,KAAR;AAAA,UACC09D,KADD;;AAEA,SAAG;AAEFA,aAAK,GAAG,KAAR;;AAEA,YAAK,CAAEr/G,CAAC,CAACs/G,OAAJ,KAAiBhiF,MAAM,CAAEt9B,CAAF,EAAKA,CAAC,CAACse,IAAP,CAAN,IAAuBihG,IAAI,CAAEv/G,CAAC,CAAC0Y,IAAJ,EAAU1Y,CAAV,EAAaA,CAAC,CAACse,IAAf,CAAJ,KAA8B,CAAtE,CAAL,EAAiF;AAEhF6gG,oBAAU,CAAEn/G,CAAF,CAAV;AACAA,WAAC,GAAGuG,GAAG,GAAGvG,CAAC,CAAC0Y,IAAZ;AACA,cAAK1Y,CAAC,KAAKA,CAAC,CAACse,IAAb,EAAoB;AACpB+gG,eAAK,GAAG,IAAR;AAEA,SAPD,MAOO;AAENr/G,WAAC,GAAGA,CAAC,CAACse,IAAN;AAEA;AAED,OAjBD,QAiBU+gG,KAAK,IAAIr/G,CAAC,KAAKuG,GAjBzB;;AAmBA,aAAOA,GAAP;AAEA,K,CAED;;;AACA,aAASw4G,YAAT,CAAuBS,GAAvB,EAA4B7jC,SAA5B,EAAuC6iC,GAAvC,EAA4Cp0F,IAA5C,EAAkD1B,IAAlD,EAAwDm2F,OAAxD,EAAiEY,IAAjE,EAAwE;AAEvE,UAAK,CAAED,GAAP,EAAa,OAF0D,CAIvE;;AACA,UAAK,CAAEC,IAAF,IAAUZ,OAAf,EAAyBa,UAAU,CAAEF,GAAF,EAAOp1F,IAAP,EAAa1B,IAAb,EAAmBm2F,OAAnB,CAAV;AAEzB,UAAI/oI,IAAI,GAAG0pI,GAAX;AAAA,UACC9mG,IADD;AAAA,UACO4F,IADP,CAPuE,CAUvE;;AACA,aAAQkhG,GAAG,CAAC9mG,IAAJ,KAAa8mG,GAAG,CAAClhG,IAAzB,EAAgC;AAE/B5F,YAAI,GAAG8mG,GAAG,CAAC9mG,IAAX;AACA4F,YAAI,GAAGkhG,GAAG,CAAClhG,IAAX;;AAEA,YAAKugG,OAAO,GAAGc,WAAW,CAAEH,GAAF,EAAOp1F,IAAP,EAAa1B,IAAb,EAAmBm2F,OAAnB,CAAd,GAA6Ce,KAAK,CAAEJ,GAAF,CAA9D,EAAwE;AAEvE;AACA7jC,mBAAS,CAAC/rG,IAAV,CAAgB8oC,IAAI,CAACxpC,CAAL,GAASsvI,GAAzB;AACA7iC,mBAAS,CAAC/rG,IAAV,CAAgB4vI,GAAG,CAACtwI,CAAJ,GAAQsvI,GAAxB;AACA7iC,mBAAS,CAAC/rG,IAAV,CAAgB0uC,IAAI,CAACpvC,CAAL,GAASsvI,GAAzB;AAEAW,oBAAU,CAAEK,GAAF,CAAV,CAPuE,CASvE;;AACAA,aAAG,GAAGlhG,IAAI,CAACA,IAAX;AACAxoC,cAAI,GAAGwoC,IAAI,CAACA,IAAZ;AAEA;AAEA;;AAEDkhG,WAAG,GAAGlhG,IAAN,CAtB+B,CAwB/B;;AACA,YAAKkhG,GAAG,KAAK1pI,IAAb,EAAoB;AAEnB;AACA,cAAK,CAAE2pI,IAAP,EAAc;AAEbV,wBAAY,CAAEK,YAAY,CAAEI,GAAF,CAAd,EAAuB7jC,SAAvB,EAAkC6iC,GAAlC,EAAuCp0F,IAAvC,EAA6C1B,IAA7C,EAAmDm2F,OAAnD,EAA4D,CAA5D,CAAZ,CAFa,CAIb;AAEA,WAND,MAMO,IAAKY,IAAI,KAAK,CAAd,EAAkB;AAExBD,eAAG,GAAGK,sBAAsB,CAAET,YAAY,CAAEI,GAAF,CAAd,EAAuB7jC,SAAvB,EAAkC6iC,GAAlC,CAA5B;AACAO,wBAAY,CAAES,GAAF,EAAO7jC,SAAP,EAAkB6iC,GAAlB,EAAuBp0F,IAAvB,EAA6B1B,IAA7B,EAAmCm2F,OAAnC,EAA4C,CAA5C,CAAZ,CAHwB,CAKxB;AAEA,WAPM,MAOA,IAAKY,IAAI,KAAK,CAAd,EAAkB;AAExBK,uBAAW,CAAEN,GAAF,EAAO7jC,SAAP,EAAkB6iC,GAAlB,EAAuBp0F,IAAvB,EAA6B1B,IAA7B,EAAmCm2F,OAAnC,CAAX;AAEA;;AAED;AAEA;AAED;AAED,K,CAED;;;AACA,aAASe,KAAT,CAAgBJ,GAAhB,EAAsB;AAErB,UAAI/wI,CAAC,GAAG+wI,GAAG,CAAC9mG,IAAZ;AAAA,UACChqC,CAAC,GAAG8wI,GADL;AAAA,UAEC1/G,CAAC,GAAG0/G,GAAG,CAAClhG,IAFT;AAIA,UAAKihG,IAAI,CAAE9wI,CAAF,EAAKC,CAAL,EAAQoxB,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANP,CAMqB;AAE1C;;AACA,UAAIE,CAAC,GAAGw/G,GAAG,CAAClhG,IAAJ,CAASA,IAAjB;;AAEA,aAAQte,CAAC,KAAKw/G,GAAG,CAAC9mG,IAAlB,EAAyB;AAExB,YAAKqnG,eAAe,CAAEtxI,CAAC,CAACoL,CAAJ,EAAOpL,CAAC,CAACmiB,CAAT,EAAYliB,CAAC,CAACmL,CAAd,EAAiBnL,CAAC,CAACkiB,CAAnB,EAAsBkP,CAAC,CAACjmB,CAAxB,EAA2BimB,CAAC,CAAClP,CAA7B,EAAgCoP,CAAC,CAACnmB,CAAlC,EAAqCmmB,CAAC,CAACpP,CAAvC,CAAf,IACJ2uH,IAAI,CAAEv/G,CAAC,CAAC0Y,IAAJ,EAAU1Y,CAAV,EAAaA,CAAC,CAACse,IAAf,CAAJ,IAA6B,CAD9B,EACkC,OAAO,KAAP;AAClCte,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA;;AAED,aAAO,IAAP;AAEA;;AAED,aAASqhG,WAAT,CAAsBH,GAAtB,EAA2Bp1F,IAA3B,EAAiC1B,IAAjC,EAAuCm2F,OAAvC,EAAiD;AAEhD,UAAIpwI,CAAC,GAAG+wI,GAAG,CAAC9mG,IAAZ;AAAA,UACChqC,CAAC,GAAG8wI,GADL;AAAA,UAEC1/G,CAAC,GAAG0/G,GAAG,CAAClhG,IAFT;AAIA,UAAKihG,IAAI,CAAE9wI,CAAF,EAAKC,CAAL,EAAQoxB,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANoB,CAMN;AAE1C;;AACA,UAAIkgH,KAAK,GAAGvxI,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAR,GAAcpL,CAAC,CAACoL,CAAF,GAAMimB,CAAC,CAACjmB,CAAR,GAAYpL,CAAC,CAACoL,CAAd,GAAkBimB,CAAC,CAACjmB,CAAlC,GAA0CnL,CAAC,CAACmL,CAAF,GAAMimB,CAAC,CAACjmB,CAAR,GAAYnL,CAAC,CAACmL,CAAd,GAAkBimB,CAAC,CAACjmB,CAA1E;AAAA,UACComI,KAAK,GAAGxxI,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAR,GAAcniB,CAAC,CAACmiB,CAAF,GAAMkP,CAAC,CAAClP,CAAR,GAAYniB,CAAC,CAACmiB,CAAd,GAAkBkP,CAAC,CAAClP,CAAlC,GAA0CliB,CAAC,CAACkiB,CAAF,GAAMkP,CAAC,CAAClP,CAAR,GAAYliB,CAAC,CAACkiB,CAAd,GAAkBkP,CAAC,CAAClP,CADvE;AAAA,UAECsvH,KAAK,GAAGzxI,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAR,GAAcpL,CAAC,CAACoL,CAAF,GAAMimB,CAAC,CAACjmB,CAAR,GAAYpL,CAAC,CAACoL,CAAd,GAAkBimB,CAAC,CAACjmB,CAAlC,GAA0CnL,CAAC,CAACmL,CAAF,GAAMimB,CAAC,CAACjmB,CAAR,GAAYnL,CAAC,CAACmL,CAAd,GAAkBimB,CAAC,CAACjmB,CAFvE;AAAA,UAGCsmI,KAAK,GAAG1xI,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAR,GAAcniB,CAAC,CAACmiB,CAAF,GAAMkP,CAAC,CAAClP,CAAR,GAAYniB,CAAC,CAACmiB,CAAd,GAAkBkP,CAAC,CAAClP,CAAlC,GAA0CliB,CAAC,CAACkiB,CAAF,GAAMkP,CAAC,CAAClP,CAAR,GAAYliB,CAAC,CAACkiB,CAAd,GAAkBkP,CAAC,CAAClP,CAHvE,CATgD,CAchD;;AACA,UAAI6pD,IAAI,GAAG2lE,MAAM,CAAEJ,KAAF,EAASC,KAAT,EAAgB71F,IAAhB,EAAsB1B,IAAtB,EAA4Bm2F,OAA5B,CAAjB;AAAA,UACClkE,IAAI,GAAGylE,MAAM,CAAEF,KAAF,EAASC,KAAT,EAAgB/1F,IAAhB,EAAsB1B,IAAtB,EAA4Bm2F,OAA5B,CADd;AAGA,UAAI7+G,CAAC,GAAGw/G,GAAG,CAACa,KAAZ;AAAA,UACCxgH,CAAC,GAAG2/G,GAAG,CAACc,KADT,CAlBgD,CAqBhD;;AACA,aAAQtgH,CAAC,IAAIA,CAAC,CAAC7D,CAAF,IAAOs+C,IAAZ,IAAoB56C,CAApB,IAAyBA,CAAC,CAAC1D,CAAF,IAAOw+C,IAAxC,EAA+C;AAE9C,YAAK36C,CAAC,KAAKw/G,GAAG,CAAC9mG,IAAV,IAAkB1Y,CAAC,KAAKw/G,GAAG,CAAClhG,IAA5B,IACJyhG,eAAe,CAAEtxI,CAAC,CAACoL,CAAJ,EAAOpL,CAAC,CAACmiB,CAAT,EAAYliB,CAAC,CAACmL,CAAd,EAAiBnL,CAAC,CAACkiB,CAAnB,EAAsBkP,CAAC,CAACjmB,CAAxB,EAA2BimB,CAAC,CAAClP,CAA7B,EAAgCoP,CAAC,CAACnmB,CAAlC,EAAqCmmB,CAAC,CAACpP,CAAvC,CADX,IAEJ2uH,IAAI,CAAEv/G,CAAC,CAAC0Y,IAAJ,EAAU1Y,CAAV,EAAaA,CAAC,CAACse,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCte,SAAC,GAAGA,CAAC,CAACqgH,KAAN;AAEA,YAAKxgH,CAAC,KAAK2/G,GAAG,CAAC9mG,IAAV,IAAkB7Y,CAAC,KAAK2/G,GAAG,CAAClhG,IAA5B,IACJyhG,eAAe,CAAEtxI,CAAC,CAACoL,CAAJ,EAAOpL,CAAC,CAACmiB,CAAT,EAAYliB,CAAC,CAACmL,CAAd,EAAiBnL,CAAC,CAACkiB,CAAnB,EAAsBkP,CAAC,CAACjmB,CAAxB,EAA2BimB,CAAC,CAAClP,CAA7B,EAAgCiP,CAAC,CAAChmB,CAAlC,EAAqCgmB,CAAC,CAACjP,CAAvC,CADX,IAEJ2uH,IAAI,CAAE1/G,CAAC,CAAC6Y,IAAJ,EAAU7Y,CAAV,EAAaA,CAAC,CAACye,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCze,SAAC,GAAGA,CAAC,CAACygH,KAAN;AAEA,OAlC+C,CAoChD;;;AACA,aAAQtgH,CAAC,IAAIA,CAAC,CAAC7D,CAAF,IAAOs+C,IAApB,EAA2B;AAE1B,YAAKz6C,CAAC,KAAKw/G,GAAG,CAAC9mG,IAAV,IAAkB1Y,CAAC,KAAKw/G,GAAG,CAAClhG,IAA5B,IACJyhG,eAAe,CAAEtxI,CAAC,CAACoL,CAAJ,EAAOpL,CAAC,CAACmiB,CAAT,EAAYliB,CAAC,CAACmL,CAAd,EAAiBnL,CAAC,CAACkiB,CAAnB,EAAsBkP,CAAC,CAACjmB,CAAxB,EAA2BimB,CAAC,CAAClP,CAA7B,EAAgCoP,CAAC,CAACnmB,CAAlC,EAAqCmmB,CAAC,CAACpP,CAAvC,CADX,IAEJ2uH,IAAI,CAAEv/G,CAAC,CAAC0Y,IAAJ,EAAU1Y,CAAV,EAAaA,CAAC,CAACse,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCte,SAAC,GAAGA,CAAC,CAACqgH,KAAN;AAEA,OA5C+C,CA8ChD;;;AACA,aAAQxgH,CAAC,IAAIA,CAAC,CAAC1D,CAAF,IAAOw+C,IAApB,EAA2B;AAE1B,YAAK96C,CAAC,KAAK2/G,GAAG,CAAC9mG,IAAV,IAAkB7Y,CAAC,KAAK2/G,GAAG,CAAClhG,IAA5B,IACJyhG,eAAe,CAAEtxI,CAAC,CAACoL,CAAJ,EAAOpL,CAAC,CAACmiB,CAAT,EAAYliB,CAAC,CAACmL,CAAd,EAAiBnL,CAAC,CAACkiB,CAAnB,EAAsBkP,CAAC,CAACjmB,CAAxB,EAA2BimB,CAAC,CAAClP,CAA7B,EAAgCiP,CAAC,CAAChmB,CAAlC,EAAqCgmB,CAAC,CAACjP,CAAvC,CADX,IAEJ2uH,IAAI,CAAE1/G,CAAC,CAAC6Y,IAAJ,EAAU7Y,CAAV,EAAaA,CAAC,CAACye,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCze,SAAC,GAAGA,CAAC,CAACygH,KAAN;AAEA;;AAED,aAAO,IAAP;AAEA,K,CAED;;;AACA,aAAST,sBAAT,CAAiCl+D,KAAjC,EAAwCg6B,SAAxC,EAAmD6iC,GAAnD,EAAyD;AAExD,UAAIx+G,CAAC,GAAG2hD,KAAR;;AACA,SAAG;AAEF,YAAIlzE,CAAC,GAAGuxB,CAAC,CAAC0Y,IAAV;AAAA,YACChqC,CAAC,GAAGsxB,CAAC,CAACse,IAAF,CAAOA,IADZ;;AAGA,YAAK,CAAEgf,MAAM,CAAE7uD,CAAF,EAAKC,CAAL,CAAR,IAAoBuoF,UAAU,CAAExoF,CAAF,EAAKuxB,CAAL,EAAQA,CAAC,CAACse,IAAV,EAAgB5vC,CAAhB,CAA9B,IAAqD6xI,aAAa,CAAE9xI,CAAF,EAAKC,CAAL,CAAlE,IAA8E6xI,aAAa,CAAE7xI,CAAF,EAAKD,CAAL,CAAhG,EAA2G;AAE1GktG,mBAAS,CAAC/rG,IAAV,CAAgBnB,CAAC,CAACS,CAAF,GAAMsvI,GAAtB;AACA7iC,mBAAS,CAAC/rG,IAAV,CAAgBowB,CAAC,CAAC9wB,CAAF,GAAMsvI,GAAtB;AACA7iC,mBAAS,CAAC/rG,IAAV,CAAgBlB,CAAC,CAACQ,CAAF,GAAMsvI,GAAtB,EAJ0G,CAM1G;;AACAW,oBAAU,CAAEn/G,CAAF,CAAV;AACAm/G,oBAAU,CAAEn/G,CAAC,CAACse,IAAJ,CAAV;AAEAte,WAAC,GAAG2hD,KAAK,GAAGjzE,CAAZ;AAEA;;AAEDsxB,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OArBD,QAqBUte,CAAC,KAAK2hD,KArBhB;;AAuBA,aAAOy9D,YAAY,CAAEp/G,CAAF,CAAnB;AAEA,K,CAED;;;AACA,aAAS8/G,WAAT,CAAsBn+D,KAAtB,EAA6Bg6B,SAA7B,EAAwC6iC,GAAxC,EAA6Cp0F,IAA7C,EAAmD1B,IAAnD,EAAyDm2F,OAAzD,EAAmE;AAElE;AACA,UAAIpwI,CAAC,GAAGkzE,KAAR;;AACA,SAAG;AAEF,YAAIjzE,CAAC,GAAGD,CAAC,CAAC6vC,IAAF,CAAOA,IAAf;;AACA,eAAQ5vC,CAAC,KAAKD,CAAC,CAACiqC,IAAhB,EAAuB;AAEtB,cAAKjqC,CAAC,CAACS,CAAF,KAAQR,CAAC,CAACQ,CAAV,IAAesxI,eAAe,CAAE/xI,CAAF,EAAKC,CAAL,CAAnC,EAA8C;AAE7C;AACA,gBAAIoxB,CAAC,GAAG2gH,YAAY,CAAEhyI,CAAF,EAAKC,CAAL,CAApB,CAH6C,CAK7C;;AACAD,aAAC,GAAG2wI,YAAY,CAAE3wI,CAAF,EAAKA,CAAC,CAAC6vC,IAAP,CAAhB;AACAxe,aAAC,GAAGs/G,YAAY,CAAEt/G,CAAF,EAAKA,CAAC,CAACwe,IAAP,CAAhB,CAP6C,CAS7C;;AACAygG,wBAAY,CAAEtwI,CAAF,EAAKktG,SAAL,EAAgB6iC,GAAhB,EAAqBp0F,IAArB,EAA2B1B,IAA3B,EAAiCm2F,OAAjC,CAAZ;AACAE,wBAAY,CAAEj/G,CAAF,EAAK67E,SAAL,EAAgB6iC,GAAhB,EAAqBp0F,IAArB,EAA2B1B,IAA3B,EAAiCm2F,OAAjC,CAAZ;AACA;AAEA;;AAEDnwI,WAAC,GAAGA,CAAC,CAAC4vC,IAAN;AAEA;;AAED7vC,SAAC,GAAGA,CAAC,CAAC6vC,IAAN;AAEA,OA3BD,QA2BU7vC,CAAC,KAAKkzE,KA3BhB;AA6BA,K,CAED;;;AACA,aAASm9D,cAAT,CAAyB/wI,IAAzB,EAA+BwwI,WAA/B,EAA4CI,SAA5C,EAAuDH,GAAvD,EAA6D;AAE5D,UAAIzsG,KAAK,GAAG,EAAZ;AAAA,UACC7iC,CADD;AAAA,UACIs5D,GADJ;AAAA,UACSmZ,KADT;AAAA,UACgBp7C,GADhB;AAAA,UACqB+nF,IADrB;;AAGA,WAAMp/G,CAAC,GAAG,CAAJ,EAAOs5D,GAAG,GAAG+1E,WAAW,CAAChwI,MAA/B,EAAuCW,CAAC,GAAGs5D,GAA3C,EAAgDt5D,CAAC,EAAjD,EAAuD;AAEtDyyE,aAAK,GAAG48D,WAAW,CAAErvI,CAAF,CAAX,GAAmBsvI,GAA3B;AACAj4G,WAAG,GAAGr3B,CAAC,GAAGs5D,GAAG,GAAG,CAAV,GAAc+1E,WAAW,CAAErvI,CAAC,GAAG,CAAN,CAAX,GAAuBsvI,GAArC,GAA2CzwI,IAAI,CAACQ,MAAtD;AACA+/G,YAAI,GAAGswB,UAAU,CAAE7wI,IAAF,EAAQ4zE,KAAR,EAAep7C,GAAf,EAAoBi4G,GAApB,EAAyB,KAAzB,CAAjB;AACA,YAAKlwB,IAAI,KAAKA,IAAI,CAAChwE,IAAnB,EAA0BgwE,IAAI,CAACgxB,OAAL,GAAe,IAAf;AAC1BvtG,aAAK,CAACniC,IAAN,CAAY8wI,WAAW,CAAEpyB,IAAF,CAAvB;AAEA;;AAEDv8E,WAAK,CAACvjC,IAAN,CAAYmyI,QAAZ,EAf4D,CAiB5D;;AACA,WAAMzxI,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAG6iC,KAAK,CAACxjC,MAAvB,EAA+BW,CAAC,EAAhC,EAAsC;AAErC0xI,qBAAa,CAAE7uG,KAAK,CAAE7iC,CAAF,CAAP,EAAcyvI,SAAd,CAAb;AACAA,iBAAS,GAAGS,YAAY,CAAET,SAAF,EAAaA,SAAS,CAACrgG,IAAvB,CAAxB;AAEA;;AAED,aAAOqgG,SAAP;AAEA;;AAED,aAASgC,QAAT,CAAmBlyI,CAAnB,EAAsBC,CAAtB,EAA0B;AAEzB,aAAOD,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAf;AAEA,K,CAED;;;AACA,aAAS+mI,aAAT,CAAwBC,IAAxB,EAA8BlC,SAA9B,EAA0C;AAEzCA,eAAS,GAAGmC,cAAc,CAAED,IAAF,EAAQlC,SAAR,CAA1B;;AACA,UAAKA,SAAL,EAAiB;AAEhB,YAAMjwI,CAAC,GAAG+xI,YAAY,CAAE9B,SAAF,EAAakC,IAAb,CAAtB,CAFgB,CAIhB;;AACAzB,oBAAY,CAAET,SAAF,EAAaA,SAAS,CAACrgG,IAAvB,CAAZ;AACA8gG,oBAAY,CAAE1wI,CAAF,EAAKA,CAAC,CAAC4vC,IAAP,CAAZ;AAEA;AAED,K,CAED;;;AACA,aAASwiG,cAAT,CAAyBD,IAAzB,EAA+BlC,SAA/B,EAA2C;AAE1C,UAAI3+G,CAAC,GAAG2+G,SAAR;AAAA,UACCoC,EAAE,GAAGF,IAAI,CAAChnI,CADX;AAAA,UAECmnI,EAAE,GAAGH,IAAI,CAACjwH,CAFX;AAAA,UAGC26C,EAAE,GAAG,CAAEnkD,QAHR;AAAA,UAICwc,CAJD,CAF0C,CAQ1C;AACA;;AACA,SAAG;AAEF,YAAKo9G,EAAE,IAAIhhH,CAAC,CAACpP,CAAR,IAAaowH,EAAE,IAAIhhH,CAAC,CAACse,IAAF,CAAO1tB,CAA1B,IAA+BoP,CAAC,CAACse,IAAF,CAAO1tB,CAAP,KAAaoP,CAAC,CAACpP,CAAnD,EAAuD;AAEtD,cAAI/W,CAAC,GAAGmmB,CAAC,CAACnmB,CAAF,GAAM,CAAEmnI,EAAE,GAAGhhH,CAAC,CAACpP,CAAT,KAAiBoP,CAAC,CAACse,IAAF,CAAOzkC,CAAP,GAAWmmB,CAAC,CAACnmB,CAA9B,KAAsCmmB,CAAC,CAACse,IAAF,CAAO1tB,CAAP,GAAWoP,CAAC,CAACpP,CAAnD,CAAd;;AACA,cAAK/W,CAAC,IAAIknI,EAAL,IAAWlnI,CAAC,GAAG0xD,EAApB,EAAyB;AAExBA,cAAE,GAAG1xD,CAAL;;AACA,gBAAKA,CAAC,KAAKknI,EAAX,EAAgB;AAEf,kBAAKC,EAAE,KAAKhhH,CAAC,CAACpP,CAAd,EAAkB,OAAOoP,CAAP;AAClB,kBAAKghH,EAAE,KAAKhhH,CAAC,CAACse,IAAF,CAAO1tB,CAAnB,EAAuB,OAAOoP,CAAC,CAACse,IAAT;AAEvB;;AAED1a,aAAC,GAAG5D,CAAC,CAACnmB,CAAF,GAAMmmB,CAAC,CAACse,IAAF,CAAOzkC,CAAb,GAAiBmmB,CAAjB,GAAqBA,CAAC,CAACse,IAA3B;AAEA;AAED;;AAEDte,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OAvBD,QAuBUte,CAAC,KAAK2+G,SAvBhB;;AAyBA,UAAK,CAAE/6G,CAAP,EAAW,OAAO,IAAP;AAEX,UAAKm9G,EAAE,KAAKx1E,EAAZ,EAAiB,OAAO3nC,CAAP,CArCyB,CAqCf;AAE3B;AACA;AACA;;AAEA,UAAI9tB,IAAI,GAAG8tB,CAAX;AAAA,UACCq9G,EAAE,GAAGr9G,CAAC,CAAC/pB,CADR;AAAA,UAECqnI,EAAE,GAAGt9G,CAAC,CAAChT,CAFR;AAAA,UAGCuwH,MAAM,GAAG/5H,QAHV;AAAA,UAICoI,GAJD;AAMAwQ,OAAC,GAAG4D,CAAJ;;AAEA,SAAG;AAEF,YAAKm9G,EAAE,IAAI/gH,CAAC,CAACnmB,CAAR,IAAammB,CAAC,CAACnmB,CAAF,IAAOonI,EAApB,IAA0BF,EAAE,KAAK/gH,CAAC,CAACnmB,CAAnC,IACHkmI,eAAe,CAAEiB,EAAE,GAAGE,EAAL,GAAUH,EAAV,GAAex1E,EAAjB,EAAqBy1E,EAArB,EAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCF,EAAE,GAAGE,EAAL,GAAU31E,EAAV,GAAew1E,EAAhD,EAAoDC,EAApD,EAAwDhhH,CAAC,CAACnmB,CAA1D,EAA6DmmB,CAAC,CAACpP,CAA/D,CADjB,EACsF;AAErFpB,aAAG,GAAG/H,IAAI,CAAC4nB,GAAL,CAAU2xG,EAAE,GAAGhhH,CAAC,CAACpP,CAAjB,KAAyBmwH,EAAE,GAAG/gH,CAAC,CAACnmB,CAAhC,CAAN,CAFqF,CAE1C;;AAE3C,cAAK0mI,aAAa,CAAEvgH,CAAF,EAAK6gH,IAAL,CAAb,KAA8BrxH,GAAG,GAAG2xH,MAAN,IAAkB3xH,GAAG,KAAK2xH,MAAR,KAAoBnhH,CAAC,CAACnmB,CAAF,GAAM+pB,CAAC,CAAC/pB,CAAR,IAAemmB,CAAC,CAACnmB,CAAF,KAAQ+pB,CAAC,CAAC/pB,CAAV,IAAeunI,oBAAoB,CAAEx9G,CAAF,EAAK5D,CAAL,CAAtE,CAAhD,CAAL,EAA8I;AAE7I4D,aAAC,GAAG5D,CAAJ;AACAmhH,kBAAM,GAAG3xH,GAAT;AAEA;AAED;;AAEDwQ,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OAlBD,QAkBUte,CAAC,KAAKlqB,IAlBhB;;AAoBA,aAAO8tB,CAAP;AAEA,K,CAED;;;AACA,aAASw9G,oBAAT,CAA+Bx9G,CAA/B,EAAkC5D,CAAlC,EAAsC;AAErC,aAAOu/G,IAAI,CAAE37G,CAAC,CAAC8U,IAAJ,EAAU9U,CAAV,EAAa5D,CAAC,CAAC0Y,IAAf,CAAJ,GAA4B,CAA5B,IAAiC6mG,IAAI,CAAEv/G,CAAC,CAACse,IAAJ,EAAU1a,CAAV,EAAaA,CAAC,CAAC0a,IAAf,CAAJ,GAA4B,CAApE;AAEA,K,CAED;;;AACA,aAASohG,UAAT,CAAqB/9D,KAArB,EAA4Bv3B,IAA5B,EAAkC1B,IAAlC,EAAwCm2F,OAAxC,EAAkD;AAEjD,UAAI7+G,CAAC,GAAG2hD,KAAR;;AACA,SAAG;AAEF,YAAK3hD,CAAC,CAAC7D,CAAF,KAAQ,IAAb,EAAoB6D,CAAC,CAAC7D,CAAF,GAAMikH,MAAM,CAAEpgH,CAAC,CAACnmB,CAAJ,EAAOmmB,CAAC,CAACpP,CAAT,EAAYw5B,IAAZ,EAAkB1B,IAAlB,EAAwBm2F,OAAxB,CAAZ;AACpB7+G,SAAC,CAACqgH,KAAF,GAAUrgH,CAAC,CAAC0Y,IAAZ;AACA1Y,SAAC,CAACsgH,KAAF,GAAUtgH,CAAC,CAACse,IAAZ;AACAte,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OAPD,QAOUte,CAAC,KAAK2hD,KAPhB;;AASA3hD,OAAC,CAACqgH,KAAF,CAAQC,KAAR,GAAgB,IAAhB;AACAtgH,OAAC,CAACqgH,KAAF,GAAU,IAAV;AAEAgB,gBAAU,CAAErhH,CAAF,CAAV;AAEA,K,CAED;AACA;;;AACA,aAASqhH,UAAT,CAAqB/yB,IAArB,EAA4B;AAE3B,UAAIp/G,CAAJ;AAAA,UAAO8wB,CAAP;AAAA,UAAU6f,CAAV;AAAA,UAAarzC,CAAb;AAAA,UAAgB80I,IAAhB;AAAA,UAAsBC,SAAtB;AAAA,UAAiCC,KAAjC;AAAA,UAAwCC,KAAxC;AAAA,UACCC,MAAM,GAAG,CADV;;AAGA,SAAG;AAEF1hH,SAAC,GAAGsuF,IAAJ;AACAA,YAAI,GAAG,IAAP;AACAgzB,YAAI,GAAG,IAAP;AACAC,iBAAS,GAAG,CAAZ;;AAEA,eAAQvhH,CAAR,EAAY;AAEXuhH,mBAAS;AACT1hG,WAAC,GAAG7f,CAAJ;AACAwhH,eAAK,GAAG,CAAR;;AACA,eAAMtyI,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGwyI,MAAjB,EAAyBxyI,CAAC,EAA1B,EAAgC;AAE/BsyI,iBAAK;AACL3hG,aAAC,GAAGA,CAAC,CAACygG,KAAN;AACA,gBAAK,CAAEzgG,CAAP,EAAW;AAEX;;AAED4hG,eAAK,GAAGC,MAAR;;AAEA,iBAAQF,KAAK,GAAG,CAAR,IAAeC,KAAK,GAAG,CAAR,IAAa5hG,CAApC,EAA0C;AAEzC,gBAAK2hG,KAAK,KAAK,CAAV,KAAiBC,KAAK,KAAK,CAAV,IAAe,CAAE5hG,CAAjB,IAAsB7f,CAAC,CAAC7D,CAAF,IAAO0jB,CAAC,CAAC1jB,CAAhD,CAAL,EAA2D;AAE1D3vB,eAAC,GAAGwzB,CAAJ;AACAA,eAAC,GAAGA,CAAC,CAACsgH,KAAN;AACAkB,mBAAK;AAEL,aAND,MAMO;AAENh1I,eAAC,GAAGqzC,CAAJ;AACAA,eAAC,GAAGA,CAAC,CAACygG,KAAN;AACAmB,mBAAK;AAEL;;AAED,gBAAKH,IAAL,EAAYA,IAAI,CAAChB,KAAL,GAAa9zI,CAAb,CAAZ,KACK8hH,IAAI,GAAG9hH,CAAP;AAELA,aAAC,CAAC6zI,KAAF,GAAUiB,IAAV;AACAA,gBAAI,GAAG90I,CAAP;AAEA;;AAEDwzB,WAAC,GAAG6f,CAAJ;AAEA;;AAEDyhG,YAAI,CAAChB,KAAL,GAAa,IAAb;AACAoB,cAAM,IAAI,CAAV;AAEA,OArDD,QAqDUH,SAAS,GAAG,CArDtB;;AAuDA,aAAOjzB,IAAP;AAEA,K,CAED;;;AACA,aAAS8xB,MAAT,CAAiBvmI,CAAjB,EAAoB+W,CAApB,EAAuBw5B,IAAvB,EAA6B1B,IAA7B,EAAmCm2F,OAAnC,EAA6C;AAE5C;AACAhlI,OAAC,GAAG,SAAUA,CAAC,GAAGuwC,IAAd,IAAuBy0F,OAA3B;AACAjuH,OAAC,GAAG,SAAUA,CAAC,GAAG83B,IAAd,IAAuBm2F,OAA3B;AAEAhlI,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AAEA+W,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,OAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AAEA,aAAO/W,CAAC,GAAK+W,CAAC,IAAI,CAAlB;AAEA,K,CAED;;;AACA,aAAS8vH,WAAT,CAAsB/+D,KAAtB,EAA8B;AAE7B,UAAI3hD,CAAC,GAAG2hD,KAAR;AAAA,UACCggE,QAAQ,GAAGhgE,KADZ;;AAEA,SAAG;AAEF,YAAK3hD,CAAC,CAACnmB,CAAF,GAAM8nI,QAAQ,CAAC9nI,CAAf,IAAsBmmB,CAAC,CAACnmB,CAAF,KAAQ8nI,QAAQ,CAAC9nI,CAAjB,IAAsBmmB,CAAC,CAACpP,CAAF,GAAM+wH,QAAQ,CAAC/wH,CAAhE,EAAsE+wH,QAAQ,GAAG3hH,CAAX;AACtEA,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OALD,QAKUte,CAAC,KAAK2hD,KALhB;;AAOA,aAAOggE,QAAP;AAEA,K,CAED;;;AACA,aAAS5B,eAAT,CAA0BzzE,EAA1B,EAA8BC,EAA9B,EAAkCE,EAAlC,EAAsCC,EAAtC,EAA0ChL,EAA1C,EAA8CC,EAA9C,EAAkDigF,EAAlD,EAAsDC,EAAtD,EAA2D;AAE1D,aAAO,CAAEngF,EAAE,GAAGkgF,EAAP,KAAgBr1E,EAAE,GAAGs1E,EAArB,IAA4B,CAAEv1E,EAAE,GAAGs1E,EAAP,KAAgBjgF,EAAE,GAAGkgF,EAArB,CAA5B,IAAyD,CAAzD,IACL,CAAEv1E,EAAE,GAAGs1E,EAAP,KAAgBl1E,EAAE,GAAGm1E,EAArB,IAA4B,CAAEp1E,EAAE,GAAGm1E,EAAP,KAAgBr1E,EAAE,GAAGs1E,EAArB,CAA5B,IAAyD,CADpD,IAEL,CAAEp1E,EAAE,GAAGm1E,EAAP,KAAgBjgF,EAAE,GAAGkgF,EAArB,IAA4B,CAAEngF,EAAE,GAAGkgF,EAAP,KAAgBl1E,EAAE,GAAGm1E,EAArB,CAA5B,IAAyD,CAF3D;AAIA,K,CAED;;;AACA,aAASrB,eAAT,CAA0B/xI,CAA1B,EAA6BC,CAA7B,EAAiC;AAEhC,aAAOD,CAAC,CAAC6vC,IAAF,CAAOpvC,CAAP,KAAaR,CAAC,CAACQ,CAAf,IAAoBT,CAAC,CAACiqC,IAAF,CAAOxpC,CAAP,KAAaR,CAAC,CAACQ,CAAnC,IAAwC,CAAE4yI,iBAAiB,CAAErzI,CAAF,EAAKC,CAAL,CAA3D,MAAuE;AAC3E6xI,mBAAa,CAAE9xI,CAAF,EAAKC,CAAL,CAAb,IAAyB6xI,aAAa,CAAE7xI,CAAF,EAAKD,CAAL,CAAtC,IAAkDszI,YAAY,CAAEtzI,CAAF,EAAKC,CAAL,CAA9D,MAA0E;AAC1E6wI,UAAI,CAAE9wI,CAAC,CAACiqC,IAAJ,EAAUjqC,CAAV,EAAaC,CAAC,CAACgqC,IAAf,CAAJ,IAA6B6mG,IAAI,CAAE9wI,CAAF,EAAKC,CAAC,CAACgqC,IAAP,EAAahqC,CAAb,CADjC,KACuD;AACzD4uD,YAAM,CAAE7uD,CAAF,EAAKC,CAAL,CAAN,IAAkB6wI,IAAI,CAAE9wI,CAAC,CAACiqC,IAAJ,EAAUjqC,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,GAA4B,CAA9C,IAAmDihG,IAAI,CAAE7wI,CAAC,CAACgqC,IAAJ,EAAUhqC,CAAV,EAAaA,CAAC,CAAC4vC,IAAf,CAAJ,GAA4B,CAHzE,CAAP,CAFgC,CAKqD;AAErF,K,CAED;;;AACA,aAASihG,IAAT,CAAev/G,CAAf,EAAkB6f,CAAlB,EAAqBlgB,CAArB,EAAyB;AAExB,aAAO,CAAEkgB,CAAC,CAACjvB,CAAF,GAAMoP,CAAC,CAACpP,CAAV,KAAkB+O,CAAC,CAAC9lB,CAAF,GAAMgmC,CAAC,CAAChmC,CAA1B,IAAgC,CAAEgmC,CAAC,CAAChmC,CAAF,GAAMmmB,CAAC,CAACnmB,CAAV,KAAkB8lB,CAAC,CAAC/O,CAAF,GAAMivB,CAAC,CAACjvB,CAA1B,CAAvC;AAEA,K,CAED;;;AACA,aAAS0sC,MAAT,CAAiB4f,EAAjB,EAAqBC,EAArB,EAA0B;AAEzB,aAAOD,EAAE,CAACrjE,CAAH,KAASsjE,EAAE,CAACtjE,CAAZ,IAAiBqjE,EAAE,CAACtsD,CAAH,KAASusD,EAAE,CAACvsD,CAApC;AAEA,K,CAED;;;AACA,aAASqmE,UAAT,CAAqB/Z,EAArB,EAAyB8kE,EAAzB,EAA6B7kE,EAA7B,EAAiC8kE,EAAjC,EAAsC;AAErC,UAAMC,EAAE,GAAGz2F,IAAI,CAAE8zF,IAAI,CAAEriE,EAAF,EAAM8kE,EAAN,EAAU7kE,EAAV,CAAN,CAAf;AACA,UAAMglE,EAAE,GAAG12F,IAAI,CAAE8zF,IAAI,CAAEriE,EAAF,EAAM8kE,EAAN,EAAUC,EAAV,CAAN,CAAf;AACA,UAAMG,EAAE,GAAG32F,IAAI,CAAE8zF,IAAI,CAAEpiE,EAAF,EAAM8kE,EAAN,EAAU/kE,EAAV,CAAN,CAAf;AACA,UAAMmlE,EAAE,GAAG52F,IAAI,CAAE8zF,IAAI,CAAEpiE,EAAF,EAAM8kE,EAAN,EAAUD,EAAV,CAAN,CAAf;AAEA,UAAKE,EAAE,KAAKC,EAAP,IAAaC,EAAE,KAAKC,EAAzB,EAA8B,OAAO,IAAP,CAPO,CAOM;;AAE3C,UAAKH,EAAE,KAAK,CAAP,IAAYI,SAAS,CAAEplE,EAAF,EAAMC,EAAN,EAAU6kE,EAAV,CAA1B,EAA2C,OAAO,IAAP,CATN,CASmB;;AACxD,UAAKG,EAAE,KAAK,CAAP,IAAYG,SAAS,CAAEplE,EAAF,EAAM+kE,EAAN,EAAUD,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAVN,CAUmB;;AACxD,UAAKI,EAAE,KAAK,CAAP,IAAYE,SAAS,CAAEnlE,EAAF,EAAMD,EAAN,EAAU+kE,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAXN,CAWmB;;AACxD,UAAKI,EAAE,KAAK,CAAP,IAAYC,SAAS,CAAEnlE,EAAF,EAAM6kE,EAAN,EAAUC,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAZN,CAYmB;;AAExD,aAAO,KAAP;AAEA,K,CAED;;;AACA,aAASK,SAAT,CAAoBtiH,CAApB,EAAuB6f,CAAvB,EAA0BlgB,CAA1B,EAA8B;AAE7B,aAAOkgB,CAAC,CAAChmC,CAAF,IAAO4N,IAAI,CAACmE,GAAL,CAAUoU,CAAC,CAACnmB,CAAZ,EAAe8lB,CAAC,CAAC9lB,CAAjB,CAAP,IAA+BgmC,CAAC,CAAChmC,CAAF,IAAO4N,IAAI,CAACkE,GAAL,CAAUqU,CAAC,CAACnmB,CAAZ,EAAe8lB,CAAC,CAAC9lB,CAAjB,CAAtC,IAA8DgmC,CAAC,CAACjvB,CAAF,IAAOnJ,IAAI,CAACmE,GAAL,CAAUoU,CAAC,CAACpP,CAAZ,EAAe+O,CAAC,CAAC/O,CAAjB,CAArE,IAA6FivB,CAAC,CAACjvB,CAAF,IAAOnJ,IAAI,CAACkE,GAAL,CAAUqU,CAAC,CAACpP,CAAZ,EAAe+O,CAAC,CAAC/O,CAAjB,CAA3G;AAEA;;AAED,aAAS66B,IAAT,CAAe82F,GAAf,EAAqB;AAEpB,aAAOA,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcA,GAAG,GAAG,CAAN,GAAU,CAAE,CAAZ,GAAgB,CAArC;AAEA,K,CAED;;;AACA,aAAST,iBAAT,CAA4BrzI,CAA5B,EAA+BC,CAA/B,EAAmC;AAElC,UAAIsxB,CAAC,GAAGvxB,CAAR;;AACA,SAAG;AAEF,YAAKuxB,CAAC,CAAC9wB,CAAF,KAAQT,CAAC,CAACS,CAAV,IAAe8wB,CAAC,CAACse,IAAF,CAAOpvC,CAAP,KAAaT,CAAC,CAACS,CAA9B,IAAmC8wB,CAAC,CAAC9wB,CAAF,KAAQR,CAAC,CAACQ,CAA7C,IAAkD8wB,CAAC,CAACse,IAAF,CAAOpvC,CAAP,KAAaR,CAAC,CAACQ,CAAjE,IACH+nF,UAAU,CAAEj3D,CAAF,EAAKA,CAAC,CAACse,IAAP,EAAa7vC,CAAb,EAAgBC,CAAhB,CADZ,EACkC,OAAO,IAAP;AAClCsxB,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OAND,QAMUte,CAAC,KAAKvxB,CANhB;;AAQA,aAAO,KAAP;AAEA,K,CAED;;;AACA,aAAS8xI,aAAT,CAAwB9xI,CAAxB,EAA2BC,CAA3B,EAA+B;AAE9B,aAAO6wI,IAAI,CAAE9wI,CAAC,CAACiqC,IAAJ,EAAUjqC,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,GAA4B,CAA5B,GACNihG,IAAI,CAAE9wI,CAAF,EAAKC,CAAL,EAAQD,CAAC,CAAC6vC,IAAV,CAAJ,IAAwB,CAAxB,IAA6BihG,IAAI,CAAE9wI,CAAF,EAAKA,CAAC,CAACiqC,IAAP,EAAahqC,CAAb,CAAJ,IAAwB,CAD/C,GAEN6wI,IAAI,CAAE9wI,CAAF,EAAKC,CAAL,EAAQD,CAAC,CAACiqC,IAAV,CAAJ,GAAuB,CAAvB,IAA4B6mG,IAAI,CAAE9wI,CAAF,EAAKA,CAAC,CAAC6vC,IAAP,EAAa5vC,CAAb,CAAJ,GAAuB,CAFpD;AAIA,K,CAED;;;AACA,aAASqzI,YAAT,CAAuBtzI,CAAvB,EAA0BC,CAA1B,EAA8B;AAE7B,UAAIsxB,CAAC,GAAGvxB,CAAR;AAAA,UACC+zI,MAAM,GAAG,KADV;AAAA,UAECZ,EAAE,GAAG,CAAEnzI,CAAC,CAACoL,CAAF,GAAMnL,CAAC,CAACmL,CAAV,IAAgB,CAFtB;AAAA,UAGCgoI,EAAE,GAAG,CAAEpzI,CAAC,CAACmiB,CAAF,GAAMliB,CAAC,CAACkiB,CAAV,IAAgB,CAHtB;;AAIA,SAAG;AAEF,YAASoP,CAAC,CAACpP,CAAF,GAAMixH,EAAR,KAAmB7hH,CAAC,CAACse,IAAF,CAAO1tB,CAAP,GAAWixH,EAAhC,IAA0C7hH,CAAC,CAACse,IAAF,CAAO1tB,CAAP,KAAaoP,CAAC,CAACpP,CAAzD,IACDgxH,EAAE,GAAG,CAAE5hH,CAAC,CAACse,IAAF,CAAOzkC,CAAP,GAAWmmB,CAAC,CAACnmB,CAAf,KAAuBgoI,EAAE,GAAG7hH,CAAC,CAACpP,CAA9B,KAAsCoP,CAAC,CAACse,IAAF,CAAO1tB,CAAP,GAAWoP,CAAC,CAACpP,CAAnD,IAAyDoP,CAAC,CAACnmB,CADpE,EAEC2oI,MAAM,GAAG,CAAEA,MAAX;AACDxiH,SAAC,GAAGA,CAAC,CAACse,IAAN;AAEA,OAPD,QAOUte,CAAC,KAAKvxB,CAPhB;;AASA,aAAO+zI,MAAP;AAEA,K,CAED;AACA;;;AACA,aAAS/B,YAAT,CAAuBhyI,CAAvB,EAA0BC,CAA1B,EAA8B;AAE7B,UAAIwqD,EAAE,GAAG,IAAIupF,IAAJ,CAAUh0I,CAAC,CAACS,CAAZ,EAAeT,CAAC,CAACoL,CAAjB,EAAoBpL,CAAC,CAACmiB,CAAtB,CAAT;AAAA,UACCwoC,EAAE,GAAG,IAAIqpF,IAAJ,CAAU/zI,CAAC,CAACQ,CAAZ,EAAeR,CAAC,CAACmL,CAAjB,EAAoBnL,CAAC,CAACkiB,CAAtB,CADN;AAAA,UAEC8xH,EAAE,GAAGj0I,CAAC,CAAC6vC,IAFR;AAAA,UAGCqkG,EAAE,GAAGj0I,CAAC,CAACgqC,IAHR;AAKAjqC,OAAC,CAAC6vC,IAAF,GAAS5vC,CAAT;AACAA,OAAC,CAACgqC,IAAF,GAASjqC,CAAT;AAEAyqD,QAAE,CAAC5a,IAAH,GAAUokG,EAAV;AACAA,QAAE,CAAChqG,IAAH,GAAUwgB,EAAV;AAEAE,QAAE,CAAC9a,IAAH,GAAU4a,EAAV;AACAA,QAAE,CAACxgB,IAAH,GAAU0gB,EAAV;AAEAupF,QAAE,CAACrkG,IAAH,GAAU8a,EAAV;AACAA,QAAE,CAAC1gB,IAAH,GAAUiqG,EAAV;AAEA,aAAOvpF,EAAP;AAEA,K,CAED;;;AACA,aAAS8lF,UAAT,CAAqBhwI,CAArB,EAAwB2K,CAAxB,EAA2B+W,CAA3B,EAA8BitB,IAA9B,EAAqC;AAEpC,UAAM7d,CAAC,GAAG,IAAIyiH,IAAJ,CAAUvzI,CAAV,EAAa2K,CAAb,EAAgB+W,CAAhB,CAAV;;AAEA,UAAK,CAAEitB,IAAP,EAAc;AAEb7d,SAAC,CAAC0Y,IAAF,GAAS1Y,CAAT;AACAA,SAAC,CAACse,IAAF,GAASte,CAAT;AAEA,OALD,MAKO;AAENA,SAAC,CAACse,IAAF,GAAST,IAAI,CAACS,IAAd;AACAte,SAAC,CAAC0Y,IAAF,GAASmF,IAAT;AACAA,YAAI,CAACS,IAAL,CAAU5F,IAAV,GAAiB1Y,CAAjB;AACA6d,YAAI,CAACS,IAAL,GAAYte,CAAZ;AAEA;;AAED,aAAOA,CAAP;AAEA;;AAED,aAASm/G,UAAT,CAAqBn/G,CAArB,EAAyB;AAExBA,OAAC,CAACse,IAAF,CAAO5F,IAAP,GAAc1Y,CAAC,CAAC0Y,IAAhB;AACA1Y,OAAC,CAAC0Y,IAAF,CAAO4F,IAAP,GAActe,CAAC,CAACse,IAAhB;AAEA,UAAKte,CAAC,CAACqgH,KAAP,EAAergH,CAAC,CAACqgH,KAAF,CAAQC,KAAR,GAAgBtgH,CAAC,CAACsgH,KAAlB;AACf,UAAKtgH,CAAC,CAACsgH,KAAP,EAAetgH,CAAC,CAACsgH,KAAF,CAAQD,KAAR,GAAgBrgH,CAAC,CAACqgH,KAAlB;AAEf;;AAED,aAASoC,IAAT,CAAevzI,CAAf,EAAkB2K,CAAlB,EAAqB+W,CAArB,EAAyB;AAExB;AACA,WAAK1hB,CAAL,GAASA,CAAT,CAHwB,CAKxB;;AACA,WAAK2K,CAAL,GAASA,CAAT;AACA,WAAK+W,CAAL,GAASA,CAAT,CAPwB,CASxB;;AACA,WAAK8nB,IAAL,GAAY,IAAZ;AACA,WAAK4F,IAAL,GAAY,IAAZ,CAXwB,CAaxB;;AACA,WAAKniB,CAAL,GAAS,IAAT,CAdwB,CAgBxB;;AACA,WAAKkkH,KAAL,GAAa,IAAb;AACA,WAAKC,KAAL,GAAa,IAAb,CAlBwB,CAoBxB;;AACA,WAAKhB,OAAL,GAAe,KAAf;AAEA;;AAED,aAASL,UAAT,CAAqBlxI,IAArB,EAA2B4zE,KAA3B,EAAkCp7C,GAAlC,EAAuCi4G,GAAvC,EAA6C;AAE5C,UAAIoE,GAAG,GAAG,CAAV;;AACA,WAAM,IAAI1zI,KAAC,GAAGyyE,KAAR,EAAenyE,CAAC,GAAG+2B,GAAG,GAAGi4G,GAA/B,EAAoCtvI,KAAC,GAAGq3B,GAAxC,EAA6Cr3B,KAAC,IAAIsvI,GAAlD,EAAwD;AAEvDoE,WAAG,IAAI,CAAE70I,IAAI,CAAEyB,CAAF,CAAJ,GAAYzB,IAAI,CAAEmB,KAAF,CAAlB,KAA8BnB,IAAI,CAAEmB,KAAC,GAAG,CAAN,CAAJ,GAAgBnB,IAAI,CAAEyB,CAAC,GAAG,CAAN,CAAlD,CAAP;AACAA,SAAC,GAAGN,KAAJ;AAEA;;AAED,aAAO0zI,GAAP;AAEA;;AAED,QAAMC,UAAU,GAAG;AAElB;AAEAtD,UAAI,EAAE,cAAWuD,OAAX,EAAqB;AAE1B,YAAMjjH,CAAC,GAAGijH,OAAO,CAACv0I,MAAlB;AACA,YAAIE,CAAC,GAAG,GAAR;;AAEA,aAAM,IAAIuxB,CAAC,GAAGH,CAAC,GAAG,CAAZ,EAAeggB,CAAC,GAAG,CAAzB,EAA4BA,CAAC,GAAGhgB,CAAhC,EAAmCG,CAAC,GAAG6f,CAAC,EAAxC,EAA8C;AAE7CpxC,WAAC,IAAIq0I,OAAO,CAAE9iH,CAAF,CAAP,CAAanmB,CAAb,GAAiBipI,OAAO,CAAEjjG,CAAF,CAAP,CAAajvB,CAA9B,GAAkCkyH,OAAO,CAAEjjG,CAAF,CAAP,CAAahmC,CAAb,GAAiBipI,OAAO,CAAE9iH,CAAF,CAAP,CAAapP,CAArE;AAEA;;AAED,eAAOniB,CAAC,GAAG,GAAX;AAEA,OAjBiB;AAmBlBs0I,iBAAW,EAAE,qBAAWC,GAAX,EAAiB;AAE7B,eAAOH,UAAU,CAACtD,IAAX,CAAiByD,GAAjB,IAAyB,CAAhC;AAEA,OAvBiB;AAyBlBC,sBAAgB,EAAE,0BAAWH,OAAX,EAAoBI,KAApB,EAA4B;AAE7C,YAAMlkH,QAAQ,GAAG,EAAjB,CAF6C,CAExB;;AACrB,YAAMu/G,WAAW,GAAG,EAApB,CAH6C,CAGrB;;AACxB,YAAMl/G,KAAK,GAAG,EAAd,CAJ6C,CAI3B;;AAElB8jH,uBAAe,CAAEL,OAAF,CAAf;AACAM,kBAAU,CAAEpkH,QAAF,EAAY8jH,OAAZ,CAAV,CAP6C,CAS7C;;AAEA,YAAIO,SAAS,GAAGP,OAAO,CAACv0I,MAAxB;AAEA20I,aAAK,CAACp9H,OAAN,CAAeq9H,eAAf;;AAEA,aAAM,IAAIj0I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGg0I,KAAK,CAAC30I,MAA3B,EAAmCW,KAAC,EAApC,EAA0C;AAEzCqvI,qBAAW,CAAC3uI,IAAZ,CAAkByzI,SAAlB;AACAA,mBAAS,IAAIH,KAAK,CAAEh0I,KAAF,CAAL,CAAWX,MAAxB;AACA60I,oBAAU,CAAEpkH,QAAF,EAAYkkH,KAAK,CAAEh0I,KAAF,CAAjB,CAAV;AAEA,SArB4C,CAuB7C;;;AAEA,YAAMysG,SAAS,GAAG0iC,MAAM,CAACC,WAAP,CAAoBt/G,QAApB,EAA8Bu/G,WAA9B,CAAlB,CAzB6C,CA2B7C;;AAEA,aAAM,IAAIrvI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGysG,SAAS,CAACptG,MAA/B,EAAuCW,KAAC,IAAI,CAA5C,EAAgD;AAE/CmwB,eAAK,CAACzvB,IAAN,CAAY+rG,SAAS,CAAChuG,KAAV,CAAiBuB,KAAjB,EAAoBA,KAAC,GAAG,CAAxB,CAAZ;AAEA;;AAED,eAAOmwB,KAAP;AAEA;AA9DiB,KAAnB;;AAkEA,aAAS8jH,eAAT,CAA0BlmH,MAA1B,EAAmC;AAElC,UAAMtjB,CAAC,GAAGsjB,MAAM,CAAC1uB,MAAjB;;AAEA,UAAKoL,CAAC,GAAG,CAAJ,IAASsjB,MAAM,CAAEtjB,CAAC,GAAG,CAAN,CAAN,CAAgB2jD,MAAhB,CAAwBrgC,MAAM,CAAE,CAAF,CAA9B,CAAd,EAAsD;AAErDA,cAAM,CAACiwF,GAAP;AAEA;AAED;;AAED,aAASk2B,UAAT,CAAqBpkH,QAArB,EAA+B8jH,OAA/B,EAAyC;AAExC,WAAM,IAAI5zI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG4zI,OAAO,CAACv0I,MAA7B,EAAqCW,KAAC,EAAtC,EAA4C;AAE3C8vB,gBAAQ,CAACpvB,IAAT,CAAekzI,OAAO,CAAE5zI,KAAF,CAAP,CAAa2K,CAA5B;AACAmlB,gBAAQ,CAACpvB,IAAT,CAAekzI,OAAO,CAAE5zI,KAAF,CAAP,CAAa0hB,CAA5B;AAEA;AAED;AAED;;;;;;;;;;;;;;;;;;;;;AAsBA;;;AAEA,aAAS0yH,eAAT,CAA0BvrE,MAA1B,EAAkCnxC,OAAlC,EAA4C;AAE3C2xD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,iBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBV,cAAM,EAAEA,MADS;AAEjBnxC,eAAO,EAAEA;AAFQ,OAAlB;AAKA,WAAK6xD,kBAAL,CAAyB,IAAI8qD,qBAAJ,CAA2BxrE,MAA3B,EAAmCnxC,OAAnC,CAAzB;AACA,WAAK0zD,aAAL;AAEA;;AAEDgpD,mBAAe,CAACl9H,SAAhB,GAA4B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA5B;AACAk9H,mBAAe,CAACl9H,SAAhB,CAA0B0M,WAA1B,GAAwCwwH,eAAxC;;AAEAA,mBAAe,CAACl9H,SAAhB,CAA0B29C,MAA1B,GAAmC,YAAY;AAE9C,UAAMh2D,IAAI,GAAGwqF,QAAQ,CAACnyE,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,CAAb;AAEA,UAAMw0D,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AACA,UAAMnxC,OAAO,GAAG,KAAK6xC,UAAL,CAAgB7xC,OAAhC;AAEA,aAAOm9B,MAAM,CAAEgU,MAAF,EAAUnxC,OAAV,EAAmB74B,IAAnB,CAAb;AAEA,KATD,C,CAWA;;;AAEA,aAASw1I,qBAAT,CAAgCxrE,MAAhC,EAAwCnxC,OAAxC,EAAkD;AAEjDmrD,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,uBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBV,cAAM,EAAEA,MADS;AAEjBnxC,eAAO,EAAEA;AAFQ,OAAlB;AAKAmxC,YAAM,GAAGp3C,KAAK,CAAC0jC,OAAN,CAAe0T,MAAf,IAA0BA,MAA1B,GAAmC,CAAEA,MAAF,CAA5C;AAEA,UAAM5tD,KAAK,GAAG,IAAd;AAEA,UAAMq5H,aAAa,GAAG,EAAtB;AACA,UAAMtU,OAAO,GAAG,EAAhB;;AAEA,WAAM,IAAIhgI,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo+D,MAAM,CAACxpE,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,YAAMg6C,KAAK,GAAG6uB,MAAM,CAAE7oE,KAAF,CAApB;AACAu0I,gBAAQ,CAAEv6F,KAAF,CAAR;AAEA,OAvBgD,CAyBjD;;;AAEA,WAAKmpC,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4Bi0D,aAA5B,EAA2C,CAA3C,CAA/B;AACA,WAAKnxD,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4B2/C,OAA5B,EAAqC,CAArC,CAAzB;AAEA,WAAKv7C,oBAAL,GA9BiD,CAgCjD;;AAEA,eAAS8vD,QAAT,CAAmBv6F,KAAnB,EAA2B;AAE1B,YAAMw6F,WAAW,GAAG,EAApB,CAF0B,CAI1B;;AAEA,YAAMC,aAAa,GAAG/8G,OAAO,CAAC+8G,aAAR,KAA0BrmI,SAA1B,GAAsCspB,OAAO,CAAC+8G,aAA9C,GAA8D,EAApF;AACA,YAAMC,KAAK,GAAGh9G,OAAO,CAACg9G,KAAR,KAAkBtmI,SAAlB,GAA8BspB,OAAO,CAACg9G,KAAtC,GAA8C,CAA5D;AACA,YAAItoG,KAAK,GAAG1U,OAAO,CAAC0U,KAAR,KAAkBh+B,SAAlB,GAA8BspB,OAAO,CAAC0U,KAAtC,GAA8C,GAA1D;AAEA,YAAIuoG,YAAY,GAAGj9G,OAAO,CAACi9G,YAAR,KAAyBvmI,SAAzB,GAAqCspB,OAAO,CAACi9G,YAA7C,GAA4D,IAA/E;AACA,YAAIC,cAAc,GAAGl9G,OAAO,CAACk9G,cAAR,KAA2BxmI,SAA3B,GAAuCspB,OAAO,CAACk9G,cAA/C,GAAgE,CAArF;AACA,YAAIC,SAAS,GAAGn9G,OAAO,CAACm9G,SAAR,KAAsBzmI,SAAtB,GAAkCspB,OAAO,CAACm9G,SAA1C,GAAsDD,cAAc,GAAG,CAAvF;AACA,YAAIE,WAAW,GAAGp9G,OAAO,CAACo9G,WAAR,KAAwB1mI,SAAxB,GAAoCspB,OAAO,CAACo9G,WAA5C,GAA0D,CAA5E;AACA,YAAIC,aAAa,GAAGr9G,OAAO,CAACq9G,aAAR,KAA0B3mI,SAA1B,GAAsCspB,OAAO,CAACq9G,aAA9C,GAA8D,CAAlF;AAEA,YAAMC,WAAW,GAAGt9G,OAAO,CAACs9G,WAA5B;AAEA,YAAMC,KAAK,GAAGv9G,OAAO,CAACw9G,WAAR,KAAwB9mI,SAAxB,GAAoCspB,OAAO,CAACw9G,WAA5C,GAA0DC,gBAAxE,CAlB0B,CAoB1B;;AAEA,YAAKz9G,OAAO,CAAC09G,MAAR,KAAmBhnI,SAAxB,EAAoC;AAEnCjN,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACAs0B,eAAK,GAAG1U,OAAO,CAAC09G,MAAhB;AAEA,SA3ByB,CA6B1B;;;AAEA,YAAIC,UAAJ;AAAA,YAAgBC,aAAa,GAAG,KAAhC;AACA,YAAIC,UAAJ,EAAgBC,QAAhB,EAA0Bz3E,MAA1B,EAAkC03E,SAAlC;;AAEA,YAAKT,WAAL,EAAmB;AAElBK,oBAAU,GAAGL,WAAW,CAACU,eAAZ,CAA6BhB,KAA7B,CAAb;AAEAY,uBAAa,GAAG,IAAhB;AACAX,sBAAY,GAAG,KAAf,CALkB,CAKI;AAEtB;AAEA;;AAEAY,oBAAU,GAAGP,WAAW,CAAChH,mBAAZ,CAAiC0G,KAAjC,EAAwC,KAAxC,CAAb,CAXkB,CAalB;;AAEAc,kBAAQ,GAAG,IAAI15E,OAAJ,EAAX;AACAiC,gBAAM,GAAG,IAAIjC,OAAJ,EAAT;AACA25E,mBAAS,GAAG,IAAI35E,OAAJ,EAAZ;AAEA,SArDyB,CAuD1B;;;AAEA,YAAK,CAAE64E,YAAP,EAAsB;AAErBI,uBAAa,GAAG,CAAhB;AACAH,wBAAc,GAAG,CAAjB;AACAC,mBAAS,GAAG,CAAZ;AACAC,qBAAW,GAAG,CAAd;AAEA,SAhEyB,CAkE1B;;;AAEA,YAAMa,WAAW,GAAG37F,KAAK,CAACnrB,aAAN,CAAqB4lH,aAArB,CAApB;AAEA,YAAI3kH,QAAQ,GAAG6lH,WAAW,CAAC37F,KAA3B;AACA,YAAMg6F,KAAK,GAAG2B,WAAW,CAAC3B,KAA1B;AAEA,YAAM4B,OAAO,GAAG,CAAEjC,UAAU,CAACE,WAAX,CAAwB/jH,QAAxB,CAAlB;;AAEA,YAAK8lH,OAAL,EAAe;AAEd9lH,kBAAQ,GAAGA,QAAQ,CAAC8lH,OAAT,EAAX,CAFc,CAId;;AAEA,eAAM,IAAIjwH,CAAC,GAAG,CAAR,EAAWkwH,EAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,CAAC,GAAGkwH,EAAxC,EAA4ClwH,CAAC,EAA7C,EAAmD;AAElD,gBAAMmwH,KAAK,GAAG9B,KAAK,CAAEruH,CAAF,CAAnB;;AAEA,gBAAKguH,UAAU,CAACE,WAAX,CAAwBiC,KAAxB,CAAL,EAAuC;AAEtC9B,mBAAK,CAAEruH,CAAF,CAAL,GAAamwH,KAAK,CAACF,OAAN,EAAb;AAEA;AAED;AAED;;AAGD,YAAMzlH,KAAK,GAAGwjH,UAAU,CAACI,gBAAX,CAA6BjkH,QAA7B,EAAuCkkH,KAAvC,CAAd;AAEA;;AAEA,YAAMJ,OAAO,GAAG9jH,QAAhB,CApG0B,CAoGA;;AAE1B,aAAM,IAAInK,EAAC,GAAG,CAAR,EAAWkwH,GAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,EAAC,GAAGkwH,GAAxC,EAA4ClwH,EAAC,EAA7C,EAAmD;AAElD,cAAMmwH,MAAK,GAAG9B,KAAK,CAAEruH,EAAF,CAAnB;AAEAmK,kBAAQ,GAAGA,QAAQ,CAAC3b,MAAT,CAAiB2hI,MAAjB,CAAX;AAEA;;AAGD,iBAASC,QAAT,CAAmBC,EAAnB,EAAuBC,GAAvB,EAA4BngI,IAA5B,EAAmC;AAElC,cAAK,CAAEmgI,GAAP,EAAa90I,OAAO,CAACD,KAAR,CAAe,2CAAf;AAEb,iBAAO+0I,GAAG,CAAC37H,KAAJ,GAAY8C,cAAZ,CAA4BtH,IAA5B,EAAmCmH,GAAnC,CAAwC+4H,EAAxC,CAAP;AAEA;;AAED,YAAME,IAAI,GAAGpmH,QAAQ,CAACzwB,MAAtB;AAAA,YAA8B82I,IAAI,GAAGhmH,KAAK,CAAC9wB,MAA3C,CAvH0B,CA0H1B;;AAGA,iBAAS+2I,WAAT,CAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA6C;AAE5C;AACA;AACA;AACA;AACA;AACA;AAEA,cAAIC,SAAJ,EAAeC,SAAf,EAA0BC,SAA1B,CAT4C,CASP;AAErC;AACA;;AAEA,cAAMC,QAAQ,GAAGN,IAAI,CAAC1rI,CAAL,GAAS2rI,MAAM,CAAC3rI,CAAjC;AAAA,cACCisI,QAAQ,GAAGP,IAAI,CAAC30H,CAAL,GAAS40H,MAAM,CAAC50H,CAD5B;AAEA,cAAMm1H,QAAQ,GAAGN,MAAM,CAAC5rI,CAAP,GAAW0rI,IAAI,CAAC1rI,CAAjC;AAAA,cACCmsI,QAAQ,GAAGP,MAAM,CAAC70H,CAAP,GAAW20H,IAAI,CAAC30H,CAD5B;AAGA,cAAMq1H,YAAY,GAAKJ,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAAxD,CAnB4C,CAqB5C;;AACA,cAAMI,UAAU,GAAKL,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAAtD;;AAEA,cAAKt+H,IAAI,CAAC4nB,GAAL,CAAU62G,UAAV,IAAyB56F,MAAM,CAACC,OAArC,EAA+C;AAE9C;AAEA;AAEA,gBAAM46F,UAAU,GAAG1+H,IAAI,CAACmK,IAAL,CAAWq0H,YAAX,CAAnB;AACA,gBAAMG,UAAU,GAAG3+H,IAAI,CAACmK,IAAL,CAAWm0H,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAA5C,CAAnB,CAP8C,CAS9C;;AAEA,gBAAMK,aAAa,GAAKb,MAAM,CAAC3rI,CAAP,GAAWisI,QAAQ,GAAGK,UAA9C;AACA,gBAAMG,aAAa,GAAKd,MAAM,CAAC50H,CAAP,GAAWi1H,QAAQ,GAAGM,UAA9C;AAEA,gBAAMI,aAAa,GAAKd,MAAM,CAAC5rI,CAAP,GAAWmsI,QAAQ,GAAGI,UAA9C;AACA,gBAAMI,aAAa,GAAKf,MAAM,CAAC70H,CAAP,GAAWm1H,QAAQ,GAAGK,UAA9C,CAf8C,CAiB9C;;AAEA,gBAAMK,EAAE,GAAG,CAAE,CAAEF,aAAa,GAAGF,aAAlB,IAAoCL,QAApC,GACX,CAAEQ,aAAa,GAAGF,aAAlB,IAAoCP,QAD3B,KAERF,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAFzB,CAAX,CAnB8C,CAuB9C;;AAEAL,qBAAS,GAAKW,aAAa,GAAGR,QAAQ,GAAGY,EAA3B,GAAgClB,IAAI,CAAC1rI,CAAnD;AACA8rI,qBAAS,GAAKW,aAAa,GAAGR,QAAQ,GAAGW,EAA3B,GAAgClB,IAAI,CAAC30H,CAAnD,CA1B8C,CA4B9C;AACA;;AACA,gBAAM81H,aAAa,GAAKhB,SAAS,GAAGA,SAAZ,GAAwBC,SAAS,GAAGA,SAA5D;;AACA,gBAAKe,aAAa,IAAI,CAAtB,EAA0B;AAEzB,qBAAO,IAAIxrF,OAAJ,CAAawqF,SAAb,EAAwBC,SAAxB,CAAP;AAEA,aAJD,MAIO;AAENC,uBAAS,GAAGn+H,IAAI,CAACmK,IAAL,CAAW80H,aAAa,GAAG,CAA3B,CAAZ;AAEA;AAED,WAzCD,MAyCO;AAEN;AAEA,gBAAIC,YAAY,GAAG,KAAnB,CAJM,CAIoB;;AAE1B,gBAAKd,QAAQ,GAAGv6F,MAAM,CAACC,OAAvB,EAAiC;AAEhC,kBAAKw6F,QAAQ,GAAGz6F,MAAM,CAACC,OAAvB,EAAiC;AAEhCo7F,4BAAY,GAAG,IAAf;AAEA;AAED,aARD,MAQO;AAEN,kBAAKd,QAAQ,GAAG,CAAEv6F,MAAM,CAACC,OAAzB,EAAmC;AAElC,oBAAKw6F,QAAQ,GAAG,CAAEz6F,MAAM,CAACC,OAAzB,EAAmC;AAElCo7F,8BAAY,GAAG,IAAf;AAEA;AAED,eARD,MAQO;AAEN,oBAAKl/H,IAAI,CAACgkC,IAAL,CAAWq6F,QAAX,MAA0Br+H,IAAI,CAACgkC,IAAL,CAAWu6F,QAAX,CAA/B,EAAuD;AAEtDW,8BAAY,GAAG,IAAf;AAEA;AAED;AAED;;AAED,gBAAKA,YAAL,EAAoB;AAEnB;AACAjB,uBAAS,GAAG,CAAEI,QAAd;AACAH,uBAAS,GAAGE,QAAZ;AACAD,uBAAS,GAAGn+H,IAAI,CAACmK,IAAL,CAAWq0H,YAAX,CAAZ;AAEA,aAPD,MAOO;AAEN;AACAP,uBAAS,GAAGG,QAAZ;AACAF,uBAAS,GAAGG,QAAZ;AACAF,uBAAS,GAAGn+H,IAAI,CAACmK,IAAL,CAAWq0H,YAAY,GAAG,CAA1B,CAAZ;AAEA;AAED;;AAED,iBAAO,IAAI/qF,OAAJ,CAAawqF,SAAS,GAAGE,SAAzB,EAAoCD,SAAS,GAAGC,SAAhD,CAAP;AAEA;;AAGD,YAAMgB,gBAAgB,GAAG,EAAzB;;AAEA,aAAM,IAAI13I,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG+nE,OAAO,CAACv0I,MAAxB,EAAgCiB,CAAC,GAAGurE,EAAE,GAAG,CAAzC,EAA4CrrE,CAAC,GAAGR,KAAC,GAAG,CAA1D,EAA6DA,KAAC,GAAG6rE,EAAjE,EAAqE7rE,KAAC,IAAKM,CAAC,EAAN,EAAWE,CAAC,EAAlF,EAAwF;AAEvF,cAAKF,CAAC,KAAKurE,EAAX,EAAgBvrE,CAAC,GAAG,CAAJ;AAChB,cAAKE,CAAC,KAAKqrE,EAAX,EAAgBrrE,CAAC,GAAG,CAAJ,CAHuE,CAKvF;AACA;;AAEAk3I,0BAAgB,CAAE13I,KAAF,CAAhB,GAAwBo2I,WAAW,CAAExC,OAAO,CAAE5zI,KAAF,CAAT,EAAgB4zI,OAAO,CAAEtzI,CAAF,CAAvB,EAA8BszI,OAAO,CAAEpzI,CAAF,CAArC,CAAnC;AAEA;;AAED,YAAMm3I,cAAc,GAAG,EAAvB;AACA,YAAIC,gBAAJ;AAAA,YAAsBC,iBAAiB,GAAGH,gBAAgB,CAACvjI,MAAjB,EAA1C;;AAEA,aAAM,IAAIwR,GAAC,GAAG,CAAR,EAAWkwH,IAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,GAAC,GAAGkwH,IAAxC,EAA4ClwH,GAAC,EAA7C,EAAmD;AAElD,cAAMmwH,OAAK,GAAG9B,KAAK,CAAEruH,GAAF,CAAnB;AAEAiyH,0BAAgB,GAAG,EAAnB;;AAEA,eAAM,IAAI53I,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGiqE,OAAK,CAACz2I,MAAtB,EAA8BiB,IAAC,GAAGurE,KAAE,GAAG,CAAvC,EAA0CrrE,EAAC,GAAGR,KAAC,GAAG,CAAxD,EAA2DA,KAAC,GAAG6rE,KAA/D,EAAmE7rE,KAAC,IAAKM,IAAC,EAAN,EAAWE,EAAC,EAAhF,EAAsF;AAErF,gBAAKF,IAAC,KAAKurE,KAAX,EAAgBvrE,IAAC,GAAG,CAAJ;AAChB,gBAAKE,EAAC,KAAKqrE,KAAX,EAAgBrrE,EAAC,GAAG,CAAJ,CAHqE,CAKrF;;AACAo3I,4BAAgB,CAAE53I,KAAF,CAAhB,GAAwBo2I,WAAW,CAAEN,OAAK,CAAE91I,KAAF,CAAP,EAAc81I,OAAK,CAAEx1I,IAAF,CAAnB,EAA0Bw1I,OAAK,CAAEt1I,EAAF,CAA/B,CAAnC;AAEA;;AAEDm3I,wBAAc,CAACj3I,IAAf,CAAqBk3I,gBAArB;AACAC,2BAAiB,GAAGA,iBAAiB,CAAC1jI,MAAlB,CAA0ByjI,gBAA1B,CAApB;AAEA,SA7RyB,CAgS1B;;;AAEA,aAAM,IAAIp4I,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGu1I,aAArB,EAAoCv1I,CAAC,EAArC,EAA2C;AAE1C;AAEA,cAAMumB,CAAC,GAAGvmB,CAAC,GAAGu1I,aAAd;AACA,cAAM9nH,CAAC,GAAG2nH,cAAc,GAAGr8H,IAAI,CAACujC,GAAL,CAAU/1B,CAAC,GAAGxN,IAAI,CAACC,EAAT,GAAc,CAAxB,CAA3B;;AACA,cAAMs/H,GAAE,GAAGjD,SAAS,GAAGt8H,IAAI,CAACwjC,GAAL,CAAUh2B,CAAC,GAAGxN,IAAI,CAACC,EAAT,GAAc,CAAxB,CAAZ,GAA0Cs8H,WAArD,CAN0C,CAQ1C;;;AAEA,eAAM,IAAI90I,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG+nE,OAAO,CAACv0I,MAA9B,EAAsCW,KAAC,GAAG6rE,KAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpD,gBAAM+3I,IAAI,GAAGhC,QAAQ,CAAEnC,OAAO,CAAE5zI,KAAF,CAAT,EAAgB03I,gBAAgB,CAAE13I,KAAF,CAAhC,EAAuC83I,GAAvC,CAArB;AAEAp4H,aAAC,CAAEq4H,IAAI,CAACptI,CAAP,EAAUotI,IAAI,CAACr2H,CAAf,EAAkB,CAAEuL,CAApB,CAAD;AAEA,WAhByC,CAkB1C;;;AAEA,eAAM,IAAItH,GAAC,GAAG,CAAR,EAAWkwH,IAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,GAAC,GAAGkwH,IAAxC,EAA4ClwH,GAAC,EAA7C,EAAmD;AAElD,gBAAMmwH,OAAK,GAAG9B,KAAK,CAAEruH,GAAF,CAAnB;AACAiyH,4BAAgB,GAAGD,cAAc,CAAEhyH,GAAF,CAAjC;;AAEA,iBAAM,IAAI3lB,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGiqE,OAAK,CAACz2I,MAA5B,EAAoCW,KAAC,GAAG6rE,KAAxC,EAA4C7rE,KAAC,EAA7C,EAAmD;AAElD,kBAAM+3I,KAAI,GAAGhC,QAAQ,CAAED,OAAK,CAAE91I,KAAF,CAAP,EAAc43I,gBAAgB,CAAE53I,KAAF,CAA9B,EAAqC83I,GAArC,CAArB;;AAEAp4H,eAAC,CAAEq4H,KAAI,CAACptI,CAAP,EAAUotI,KAAI,CAACr2H,CAAf,EAAkB,CAAEuL,CAApB,CAAD;AAEA;AAED;AAED;;AAED,YAAM6qH,EAAE,GAAGjD,SAAS,GAAGC,WAAvB,CAvU0B,CAyU1B;;AAEA,aAAM,IAAI90I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGk2I,IAArB,EAA2Bl2I,KAAC,EAA5B,EAAkC;AAEjC,cAAM+3I,MAAI,GAAGpD,YAAY,GAAGoB,QAAQ,CAAEjmH,QAAQ,CAAE9vB,KAAF,CAAV,EAAiB63I,iBAAiB,CAAE73I,KAAF,CAAlC,EAAyC83I,EAAzC,CAAX,GAA2DhoH,QAAQ,CAAE9vB,KAAF,CAA5F;;AAEA,cAAK,CAAEs1I,aAAP,EAAuB;AAEtB51H,aAAC,CAAEq4H,MAAI,CAACptI,CAAP,EAAUotI,MAAI,CAACr2H,CAAf,EAAkB,CAAlB,CAAD;AAEA,WAJD,MAIO;AAEN;AAEAq8C,kBAAM,CAAC7iD,IAAP,CAAaq6H,UAAU,CAAC70D,OAAX,CAAoB,CAApB,CAAb,EAAuCtjE,cAAvC,CAAuD26H,MAAI,CAACptI,CAA5D;AACA6qI,oBAAQ,CAACt6H,IAAT,CAAeq6H,UAAU,CAACzH,SAAX,CAAsB,CAAtB,CAAf,EAA2C1wH,cAA3C,CAA2D26H,MAAI,CAACr2H,CAAhE;AAEA+zH,qBAAS,CAACv6H,IAAV,CAAgBm6H,UAAU,CAAE,CAAF,CAA1B,EAAkCp4H,GAAlC,CAAuC8gD,MAAvC,EAAgD9gD,GAAhD,CAAqDu4H,QAArD;AAEA91H,aAAC,CAAE+1H,SAAS,CAAC9qI,CAAZ,EAAe8qI,SAAS,CAAC/zH,CAAzB,EAA4B+zH,SAAS,CAACxoH,CAAtC,CAAD;AAEA;AAED,SAhWyB,CAkW1B;AACA;;;AAEA,aAAM,IAAIqD,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIokH,KAAtB,EAA6BpkH,CAAC,EAA9B,EAAoC;AAEnC,eAAM,IAAItwB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGk2I,IAArB,EAA2Bl2I,KAAC,EAA5B,EAAkC;AAEjC,gBAAM+3I,MAAI,GAAGpD,YAAY,GAAGoB,QAAQ,CAAEjmH,QAAQ,CAAE9vB,KAAF,CAAV,EAAiB63I,iBAAiB,CAAE73I,KAAF,CAAlC,EAAyC83I,EAAzC,CAAX,GAA2DhoH,QAAQ,CAAE9vB,KAAF,CAA5F;;AAEA,gBAAK,CAAEs1I,aAAP,EAAuB;AAEtB51H,eAAC,CAAEq4H,MAAI,CAACptI,CAAP,EAAUotI,MAAI,CAACr2H,CAAf,EAAkB0qB,KAAK,GAAGsoG,KAAR,GAAgBpkH,CAAlC,CAAD;AAEA,aAJD,MAIO;AAEN;AAEAytC,oBAAM,CAAC7iD,IAAP,CAAaq6H,UAAU,CAAC70D,OAAX,CAAoBpwD,CAApB,CAAb,EAAuClT,cAAvC,CAAuD26H,MAAI,CAACptI,CAA5D;AACA6qI,sBAAQ,CAACt6H,IAAT,CAAeq6H,UAAU,CAACzH,SAAX,CAAsBx9G,CAAtB,CAAf,EAA2ClT,cAA3C,CAA2D26H,MAAI,CAACr2H,CAAhE;AAEA+zH,uBAAS,CAACv6H,IAAV,CAAgBm6H,UAAU,CAAE/kH,CAAF,CAA1B,EAAkCrT,GAAlC,CAAuC8gD,MAAvC,EAAgD9gD,GAAhD,CAAqDu4H,QAArD;AAEA91H,eAAC,CAAE+1H,SAAS,CAAC9qI,CAAZ,EAAe8qI,SAAS,CAAC/zH,CAAzB,EAA4B+zH,SAAS,CAACxoH,CAAtC,CAAD;AAEA;AAED;AAED,SA9XyB,CAiY1B;AAEA;;;AACA,aAAM,IAAIztB,GAAC,GAAGu1I,aAAa,GAAG,CAA9B,EAAiCv1I,GAAC,IAAI,CAAtC,EAAyCA,GAAC,EAA1C,EAAgD;AAE/C,cAAMumB,GAAC,GAAGvmB,GAAC,GAAGu1I,aAAd;;AACA,cAAM9nH,GAAC,GAAG2nH,cAAc,GAAGr8H,IAAI,CAACujC,GAAL,CAAU/1B,GAAC,GAAGxN,IAAI,CAACC,EAAT,GAAc,CAAxB,CAA3B;;AACA,cAAMs/H,IAAE,GAAGjD,SAAS,GAAGt8H,IAAI,CAACwjC,GAAL,CAAUh2B,GAAC,GAAGxN,IAAI,CAACC,EAAT,GAAc,CAAxB,CAAZ,GAA0Cs8H,WAArD,CAJ+C,CAM/C;;;AAEA,eAAM,IAAI90I,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAG+nE,OAAO,CAACv0I,MAA9B,EAAsCW,KAAC,GAAG6rE,KAA1C,EAA8C7rE,KAAC,EAA/C,EAAqD;AAEpD,gBAAM+3I,MAAI,GAAGhC,QAAQ,CAAEnC,OAAO,CAAE5zI,KAAF,CAAT,EAAgB03I,gBAAgB,CAAE13I,KAAF,CAAhC,EAAuC83I,IAAvC,CAArB;;AACAp4H,aAAC,CAAEq4H,MAAI,CAACptI,CAAP,EAAUotI,MAAI,CAACr2H,CAAf,EAAkB0qB,KAAK,GAAGnf,GAA1B,CAAD;AAEA,WAb8C,CAe/C;;;AAEA,eAAM,IAAItH,GAAC,GAAG,CAAR,EAAWkwH,IAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,GAAC,GAAGkwH,IAAxC,EAA4ClwH,GAAC,EAA7C,EAAmD;AAElD,gBAAMmwH,OAAK,GAAG9B,KAAK,CAAEruH,GAAF,CAAnB;AACAiyH,4BAAgB,GAAGD,cAAc,CAAEhyH,GAAF,CAAjC;;AAEA,iBAAM,IAAI3lB,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGiqE,OAAK,CAACz2I,MAA5B,EAAoCW,KAAC,GAAG6rE,KAAxC,EAA4C7rE,KAAC,EAA7C,EAAmD;AAElD,kBAAM+3I,MAAI,GAAGhC,QAAQ,CAAED,OAAK,CAAE91I,KAAF,CAAP,EAAc43I,gBAAgB,CAAE53I,KAAF,CAA9B,EAAqC83I,IAArC,CAArB;;AAEA,kBAAK,CAAExC,aAAP,EAAuB;AAEtB51H,iBAAC,CAAEq4H,MAAI,CAACptI,CAAP,EAAUotI,MAAI,CAACr2H,CAAf,EAAkB0qB,KAAK,GAAGnf,GAA1B,CAAD;AAEA,eAJD,MAIO;AAENvN,iBAAC,CAAEq4H,MAAI,CAACptI,CAAP,EAAUotI,MAAI,CAACr2H,CAAL,GAAS2zH,UAAU,CAAEX,KAAK,GAAG,CAAV,CAAV,CAAwBhzH,CAA3C,EAA8C2zH,UAAU,CAAEX,KAAK,GAAG,CAAV,CAAV,CAAwB/pI,CAAxB,GAA4BsiB,GAA1E,CAAD;AAEA;AAED;AAED;AAED;AAED;AAEA;;;AAEA+qH,qBAAa,GAlba,CAob1B;;AAEAC,sBAAc,GAtbY,CAyb1B;;AAEA,iBAASD,aAAT,GAAyB;AAExB,cAAMvlE,KAAK,GAAG6hE,aAAa,CAACj1I,MAAd,GAAuB,CAArC;;AAEA,cAAKs1I,YAAL,EAAoB;AAEnB,gBAAIxjG,KAAK,GAAG,CAAZ,CAFmB,CAEJ;;AACf,gBAAIz1B,MAAM,GAAGw6H,IAAI,GAAG/kG,KAApB,CAHmB,CAKnB;;AAEA,iBAAM,IAAInxC,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGm2I,IAArB,EAA2Bn2I,KAAC,EAA5B,EAAkC;AAEjC,kBAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;AACAk4I,gBAAE,CAAE32D,IAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAd,EAAsB6lE,IAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAlC,EAA0C6lE,IAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAtD,CAAF;AAEA;;AAEDy1B,iBAAK,GAAGujG,KAAK,GAAGK,aAAa,GAAG,CAAhC;AACAr5H,kBAAM,GAAGw6H,IAAI,GAAG/kG,KAAhB,CAfmB,CAiBnB;;AAEA,iBAAM,IAAInxC,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGm2I,IAArB,EAA2Bn2I,KAAC,EAA5B,EAAkC;AAEjC,kBAAMuhF,MAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;AACAk4I,gBAAE,CAAE32D,MAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAd,EAAsB6lE,MAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAlC,EAA0C6lE,MAAI,CAAE,CAAF,CAAJ,GAAY7lE,MAAtD,CAAF;AAEA;AAED,WA1BD,MA0BO;AAEN;AAEA,iBAAM,IAAI1b,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGm2I,IAArB,EAA2Bn2I,KAAC,EAA5B,EAAkC;AAEjC,kBAAMuhF,MAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;AACAk4I,gBAAE,CAAE32D,MAAI,CAAE,CAAF,CAAN,EAAaA,MAAI,CAAE,CAAF,CAAjB,EAAwBA,MAAI,CAAE,CAAF,CAA5B,CAAF;AAEA,aATK,CAWN;;;AAEA,iBAAM,IAAIvhF,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGm2I,IAArB,EAA2Bn2I,KAAC,EAA5B,EAAkC;AAEjC,kBAAMuhF,MAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;AACAk4I,gBAAE,CAAE32D,MAAI,CAAE,CAAF,CAAJ,GAAY20D,IAAI,GAAGxB,KAArB,EAA4BnzD,MAAI,CAAE,CAAF,CAAJ,GAAY20D,IAAI,GAAGxB,KAA/C,EAAsDnzD,MAAI,CAAE,CAAF,CAAJ,GAAY20D,IAAI,GAAGxB,KAAzE,CAAF;AAEA;AAED;;AAEDz5H,eAAK,CAACooE,QAAN,CAAgB5Q,KAAhB,EAAuB6hE,aAAa,CAACj1I,MAAd,GAAuB,CAAvB,GAA2BozE,KAAlD,EAAyD,CAAzD;AAEA,SAjfyB,CAmf1B;;;AAEA,iBAASwlE,cAAT,GAA0B;AAEzB,cAAMxlE,KAAK,GAAG6hE,aAAa,CAACj1I,MAAd,GAAuB,CAArC;AACA,cAAI84I,WAAW,GAAG,CAAlB;AACAC,mBAAS,CAAExE,OAAF,EAAWuE,WAAX,CAAT;AACAA,qBAAW,IAAIvE,OAAO,CAACv0I,MAAvB;;AAEA,eAAM,IAAIsmB,GAAC,GAAG,CAAR,EAAWkwH,IAAE,GAAG7B,KAAK,CAAC30I,MAA5B,EAAoCsmB,GAAC,GAAGkwH,IAAxC,EAA4ClwH,GAAC,EAA7C,EAAmD;AAElD,gBAAMmwH,OAAK,GAAG9B,KAAK,CAAEruH,GAAF,CAAnB;AACAyyH,qBAAS,CAAEtC,OAAF,EAASqC,WAAT,CAAT,CAHkD,CAKlD;;AACAA,uBAAW,IAAIrC,OAAK,CAACz2I,MAArB;AAEA;;AAGD4b,eAAK,CAACooE,QAAN,CAAgB5Q,KAAhB,EAAuB6hE,aAAa,CAACj1I,MAAd,GAAuB,CAAvB,GAA2BozE,KAAlD,EAAyD,CAAzD;AAGA;;AAED,iBAAS2lE,SAAT,CAAoBxE,OAApB,EAA6BuE,WAA7B,EAA2C;AAE1C,cAAIn4I,CAAC,GAAG4zI,OAAO,CAACv0I,MAAhB;;AAEA,iBAAQ,EAAGW,CAAH,IAAQ,CAAhB,EAAoB;AAEnB,gBAAMM,IAAC,GAAGN,CAAV;;AACA,gBAAIQ,GAAC,GAAGR,CAAC,GAAG,CAAZ;;AACA,gBAAKQ,GAAC,GAAG,CAAT,EAAaA,GAAC,GAAGozI,OAAO,CAACv0I,MAAR,GAAiB,CAArB,CAJM,CAMnB;;AAEA,iBAAM,IAAIixB,GAAC,GAAG,CAAR,EAAW+nH,EAAE,GAAK3D,KAAK,GAAGK,aAAa,GAAG,CAAhD,EAAqDzkH,GAAC,GAAG+nH,EAAzD,EAA6D/nH,GAAC,EAA9D,EAAoE;AAEnE,kBAAMgoH,KAAK,GAAGpC,IAAI,GAAG5lH,GAArB;AACA,kBAAMioH,KAAK,GAAGrC,IAAI,IAAK5lH,GAAC,GAAG,CAAT,CAAlB;;AAEA,kBAAM/wB,CAAC,GAAG44I,WAAW,GAAG73I,IAAd,GAAkBg4I,KAA5B;AAAA,kBACC94I,GAAC,GAAG24I,WAAW,GAAG33I,GAAd,GAAkB83I,KADvB;AAAA,kBAEC1nH,CAAC,GAAGunH,WAAW,GAAG33I,GAAd,GAAkB+3I,KAFvB;AAAA,kBAGC1nH,CAAC,GAAGsnH,WAAW,GAAG73I,IAAd,GAAkBi4I,KAHvB;;AAKAC,gBAAE,CAAEj5I,CAAF,EAAKC,GAAL,EAAQoxB,CAAR,EAAWC,CAAX,CAAF;AAEA;AAED;AAED;;AAED,iBAASnR,CAAT,CAAY/U,CAAZ,EAAe+W,CAAf,EAAkBuL,CAAlB,EAAsB;AAErBunH,qBAAW,CAAC9zI,IAAZ,CAAkBiK,CAAlB;AACA6pI,qBAAW,CAAC9zI,IAAZ,CAAkBghB,CAAlB;AACA8yH,qBAAW,CAAC9zI,IAAZ,CAAkBusB,CAAlB;AAEA;;AAGD,iBAASirH,EAAT,CAAa34I,CAAb,EAAgBC,CAAhB,EAAmBoxB,CAAnB,EAAuB;AAEtB6nH,mBAAS,CAAEl5I,CAAF,CAAT;AACAk5I,mBAAS,CAAEj5I,CAAF,CAAT;AACAi5I,mBAAS,CAAE7nH,CAAF,CAAT;AAEA,cAAM8nH,SAAS,GAAGpE,aAAa,CAACj1I,MAAd,GAAuB,CAAzC;AACA,cAAMshF,GAAG,GAAGs0D,KAAK,CAAC0D,aAAN,CAAqB19H,KAArB,EAA4Bq5H,aAA5B,EAA2CoE,SAAS,GAAG,CAAvD,EAA0DA,SAAS,GAAG,CAAtE,EAAyEA,SAAS,GAAG,CAArF,CAAZ;AAEAE,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEA;;AAED,iBAAS63D,EAAT,CAAaj5I,CAAb,EAAgBC,CAAhB,EAAmBoxB,CAAnB,EAAsBC,CAAtB,EAA0B;AAEzB4nH,mBAAS,CAAEl5I,CAAF,CAAT;AACAk5I,mBAAS,CAAEj5I,CAAF,CAAT;AACAi5I,mBAAS,CAAE5nH,CAAF,CAAT;AAEA4nH,mBAAS,CAAEj5I,CAAF,CAAT;AACAi5I,mBAAS,CAAE7nH,CAAF,CAAT;AACA6nH,mBAAS,CAAE5nH,CAAF,CAAT;AAGA,cAAM6nH,SAAS,GAAGpE,aAAa,CAACj1I,MAAd,GAAuB,CAAzC;AACA,cAAMshF,GAAG,GAAGs0D,KAAK,CAAC4D,kBAAN,CAA0B59H,KAA1B,EAAiCq5H,aAAjC,EAAgDoE,SAAS,GAAG,CAA5D,EAA+DA,SAAS,GAAG,CAA3E,EAA8EA,SAAS,GAAG,CAA1F,EAA6FA,SAAS,GAAG,CAAzG,CAAZ;AAEAE,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAi4D,eAAK,CAAEj4D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEA;;AAED,iBAAS83D,SAAT,CAAoB3xH,KAApB,EAA4B;AAE3BwtH,uBAAa,CAAC5zI,IAAd,CAAoB8zI,WAAW,CAAE1tH,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AACAwtH,uBAAa,CAAC5zI,IAAd,CAAoB8zI,WAAW,CAAE1tH,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AACAwtH,uBAAa,CAAC5zI,IAAd,CAAoB8zI,WAAW,CAAE1tH,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AAEA;;AAGD,iBAAS8xH,KAAT,CAAgBE,OAAhB,EAA0B;AAEzB9Y,iBAAO,CAACt/H,IAAR,CAAco4I,OAAO,CAACnuI,CAAtB;AACAq1H,iBAAO,CAACt/H,IAAR,CAAco4I,OAAO,CAACp3H,CAAtB;AAEA;AAED;AAED;;AAED2yH,yBAAqB,CAACn9H,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAlC;AACAm9H,yBAAqB,CAACn9H,SAAtB,CAAgC0M,WAAhC,GAA8CywH,qBAA9C;;AAEAA,yBAAqB,CAACn9H,SAAtB,CAAgC29C,MAAhC,GAAyC,YAAY;AAEpD,UAAMh2D,IAAI,GAAGgkF,cAAc,CAAC3rE,SAAf,CAAyB29C,MAAzB,CAAgCxgD,IAAhC,CAAsC,IAAtC,CAAb;AAEA,UAAMw0D,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AACA,UAAMnxC,OAAO,GAAG,KAAK6xC,UAAL,CAAgB7xC,OAAhC;AAEA,aAAOm9B,MAAM,CAAEgU,MAAF,EAAUnxC,OAAV,EAAmB74B,IAAnB,CAAb;AAEA,KATD,C,CAWA;;;AAEA,QAAMs2I,gBAAgB,GAAG;AAExBwD,mBAAa,EAAE,uBAAWrvE,QAAX,EAAqBx5C,QAArB,EAA+BipH,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAwD;AAEtE,YAAMC,GAAG,GAAGppH,QAAQ,CAAEipH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMI,GAAG,GAAGrpH,QAAQ,CAAEipH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMK,GAAG,GAAGtpH,QAAQ,CAAEkpH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMK,GAAG,GAAGvpH,QAAQ,CAAEkpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMM,GAAG,GAAGxpH,QAAQ,CAAEmpH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMM,GAAG,GAAGzpH,QAAQ,CAAEmpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AAEA,eAAO,CACN,IAAIjtF,OAAJ,CAAaktF,GAAb,EAAkBC,GAAlB,CADM,EAEN,IAAIntF,OAAJ,CAAaotF,GAAb,EAAkBC,GAAlB,CAFM,EAGN,IAAIrtF,OAAJ,CAAastF,GAAb,EAAkBC,GAAlB,CAHM,CAAP;AAMA,OAjBuB;AAmBxBV,wBAAkB,EAAE,4BAAWvvE,QAAX,EAAqBx5C,QAArB,EAA+BipH,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDO,MAAvD,EAAgE;AAEnF,YAAMN,GAAG,GAAGppH,QAAQ,CAAEipH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMI,GAAG,GAAGrpH,QAAQ,CAAEipH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMU,GAAG,GAAG3pH,QAAQ,CAAEipH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMK,GAAG,GAAGtpH,QAAQ,CAAEkpH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMK,GAAG,GAAGvpH,QAAQ,CAAEkpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMU,GAAG,GAAG5pH,QAAQ,CAAEkpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMM,GAAG,GAAGxpH,QAAQ,CAAEmpH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMM,GAAG,GAAGzpH,QAAQ,CAAEmpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMU,GAAG,GAAG7pH,QAAQ,CAAEmpH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMW,GAAG,GAAG9pH,QAAQ,CAAE0pH,MAAM,GAAG,CAAX,CAApB;AACA,YAAMK,GAAG,GAAG/pH,QAAQ,CAAE0pH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,YAAMM,GAAG,GAAGhqH,QAAQ,CAAE0pH,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;;AAEA,YAAKjhI,IAAI,CAAC4nB,GAAL,CAAUg5G,GAAG,GAAGE,GAAhB,IAAwB,IAA7B,EAAoC;AAEnC,iBAAO,CACN,IAAIrtF,OAAJ,CAAaktF,GAAb,EAAkB,IAAIO,GAAtB,CADM,EAEN,IAAIztF,OAAJ,CAAaotF,GAAb,EAAkB,IAAIM,GAAtB,CAFM,EAGN,IAAI1tF,OAAJ,CAAastF,GAAb,EAAkB,IAAIK,GAAtB,CAHM,EAIN,IAAI3tF,OAAJ,CAAa4tF,GAAb,EAAkB,IAAIE,GAAtB,CAJM,CAAP;AAOA,SATD,MASO;AAEN,iBAAO,CACN,IAAI9tF,OAAJ,CAAamtF,GAAb,EAAkB,IAAIM,GAAtB,CADM,EAEN,IAAIztF,OAAJ,CAAaqtF,GAAb,EAAkB,IAAIK,GAAtB,CAFM,EAGN,IAAI1tF,OAAJ,CAAautF,GAAb,EAAkB,IAAII,GAAtB,CAHM,EAIN,IAAI3tF,OAAJ,CAAa6tF,GAAb,EAAkB,IAAIC,GAAtB,CAJM,CAAP;AAOA;AAED;AAtDuB,KAAzB;;AAyDA,aAASjlF,MAAT,CAAiBgU,MAAjB,EAAyBnxC,OAAzB,EAAkC74B,IAAlC,EAAyC;AAExC;AAEAA,UAAI,CAACgqE,MAAL,GAAc,EAAd;;AAEA,UAAKp3C,KAAK,CAAC0jC,OAAN,CAAe0T,MAAf,CAAL,EAA+B;AAE9B,aAAM,IAAI7oE,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo+D,MAAM,CAACxpE,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMg6C,KAAK,GAAG6uB,MAAM,CAAE7oE,KAAF,CAApB;AAEAnB,cAAI,CAACgqE,MAAL,CAAYnoE,IAAZ,CAAkBs5C,KAAK,CAAC2P,IAAxB;AAEA;AAED,OAVD,MAUO;AAEN9qD,YAAI,CAACgqE,MAAL,CAAYnoE,IAAZ,CAAkBmoE,MAAM,CAAClf,IAAzB;AAEA,OApBuC,CAsBxC;;;AAEA,UAAKjyB,OAAO,CAACs9G,WAAR,KAAwB5mI,SAA7B,EAAyCvP,IAAI,CAAC64B,OAAL,CAAas9G,WAAb,GAA2Bt9G,OAAO,CAACs9G,WAAR,CAAoBngF,MAApB,EAA3B;AAEzC,aAAOh2D,IAAP;AAEA;AAED;;;;;;;;;;;;;;;;AAiBA;;;AAEA,aAASk7I,YAAT,CAAuB1tI,IAAvB,EAA6Bk9D,UAA7B,EAA0C;AAEzC8f,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,cAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBl9D,YAAI,EAAEA,IADW;AAEjBk9D,kBAAU,EAAEA;AAFK,OAAlB;AAKA,WAAKggB,kBAAL,CAAyB,IAAIywD,kBAAJ,CAAwB3tI,IAAxB,EAA8Bk9D,UAA9B,CAAzB;AACA,WAAK6hB,aAAL;AAEA;;AAED2uD,gBAAY,CAAC7iI,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAzB;AACA6iI,gBAAY,CAAC7iI,SAAb,CAAuB0M,WAAvB,GAAqCm2H,YAArC,C,CAEA;;AAEA,aAASC,kBAAT,CAA6B3tI,IAA7B,EAAmCk9D,UAAnC,EAAgD;AAE/CA,gBAAU,GAAGA,UAAU,IAAI,EAA3B;AAEA,UAAM0wE,IAAI,GAAG1wE,UAAU,CAAC0wE,IAAxB;;AAEA,UAAK,EAAIA,IAAI,IAAIA,IAAI,CAACC,MAAjB,CAAL,EAAiC;AAEhC/4I,eAAO,CAACD,KAAR,CAAe,sEAAf;AACA,eAAO,IAAImoF,QAAJ,EAAP;AAEA;;AAED,UAAMxgB,MAAM,GAAGoxE,IAAI,CAACE,cAAL,CAAqB9tI,IAArB,EAA2Bk9D,UAAU,CAACzzD,IAAtC,CAAf,CAb+C,CAe/C;;AAEAyzD,gBAAU,CAACn9B,KAAX,GAAmBm9B,UAAU,CAACl7C,MAAX,KAAsBjgB,SAAtB,GAAkCm7D,UAAU,CAACl7C,MAA7C,GAAsD,EAAzE,CAjB+C,CAmB/C;;AAEA,UAAKk7C,UAAU,CAACqrE,cAAX,KAA8BxmI,SAAnC,EAA+Cm7D,UAAU,CAACqrE,cAAX,GAA4B,EAA5B;AAC/C,UAAKrrE,UAAU,CAACsrE,SAAX,KAAyBzmI,SAA9B,EAA0Cm7D,UAAU,CAACsrE,SAAX,GAAuB,CAAvB;AAC1C,UAAKtrE,UAAU,CAACorE,YAAX,KAA4BvmI,SAAjC,EAA6Cm7D,UAAU,CAACorE,YAAX,GAA0B,KAA1B;AAE7CN,2BAAqB,CAAChgI,IAAtB,CAA4B,IAA5B,EAAkCw0D,MAAlC,EAA0CU,UAA1C;AAEA,WAAK7kE,IAAL,GAAY,oBAAZ;AAEA;;AAEDs1I,sBAAkB,CAAC9iI,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe6+H,qBAAqB,CAACn9H,SAArC,CAA/B;AACA8iI,sBAAkB,CAAC9iI,SAAnB,CAA6B0M,WAA7B,GAA2Co2H,kBAA3C,C,CAEA;;AAEA,aAASI,cAAT,CAAyBv9H,MAAzB,EAAiCuwE,aAAjC,EAAgDC,cAAhD,EAAgEgtD,QAAhE,EAA0EC,SAA1E,EAAqFC,UAArF,EAAiGC,WAAjG,EAA+G;AAE9GnxD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBuwE,qBAAa,EAAEA,aAFE;AAGjBC,sBAAc,EAAEA,cAHC;AAIjBgtD,gBAAQ,EAAEA,QAJO;AAKjBC,iBAAS,EAAEA,SALM;AAMjBC,kBAAU,EAAEA,UANK;AAOjBC,mBAAW,EAAEA;AAPI,OAAlB;AAUA,WAAKjxD,kBAAL,CAAyB,IAAIkxD,oBAAJ,CAA0B59H,MAA1B,EAAkCuwE,aAAlC,EAAiDC,cAAjD,EAAiEgtD,QAAjE,EAA2EC,SAA3E,EAAsFC,UAAtF,EAAkGC,WAAlG,CAAzB;AACA,WAAKpvD,aAAL;AAEA;;AAEDgvD,kBAAc,CAACljI,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA3B;AACAkjI,kBAAc,CAACljI,SAAf,CAAyB0M,WAAzB,GAAuCw2H,cAAvC,C,CAEA;;AAEA,aAASK,oBAAT,CAA+B59H,MAA/B,EAAuCuwE,aAAvC,EAAsDC,cAAtD,EAAsEgtD,QAAtE,EAAgFC,SAAhF,EAA2FC,UAA3F,EAAuGC,WAAvG,EAAqH;AAEpH33D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,sBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBuwE,qBAAa,EAAEA,aAFE;AAGjBC,sBAAc,EAAEA,cAHC;AAIjBgtD,gBAAQ,EAAEA,QAJO;AAKjBC,iBAAS,EAAEA,SALM;AAMjBC,kBAAU,EAAEA,UANK;AAOjBC,mBAAW,EAAEA;AAPI,OAAlB;AAUA39H,YAAM,GAAGA,MAAM,IAAI,CAAnB;AAEAuwE,mBAAa,GAAG70E,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAanE,IAAI,CAAC4N,KAAL,CAAYinE,aAAZ,KAA+B,CAA5C,CAAhB;AACAC,oBAAc,GAAG90E,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAanE,IAAI,CAAC4N,KAAL,CAAYknE,cAAZ,KAAgC,CAA7C,CAAjB;AAEAgtD,cAAQ,GAAGA,QAAQ,KAAKjsI,SAAb,GAAyBisI,QAAzB,GAAoC,CAA/C;AACAC,eAAS,GAAGA,SAAS,KAAKlsI,SAAd,GAA0BksI,SAA1B,GAAsC/hI,IAAI,CAACC,EAAL,GAAU,CAA5D;AAEA+hI,gBAAU,GAAGA,UAAU,KAAKnsI,SAAf,GAA2BmsI,UAA3B,GAAwC,CAArD;AACAC,iBAAW,GAAGA,WAAW,KAAKpsI,SAAhB,GAA4BosI,WAA5B,GAA0CjiI,IAAI,CAACC,EAA7D;AAEA,UAAMkiI,QAAQ,GAAGniI,IAAI,CAACkE,GAAL,CAAU89H,UAAU,GAAGC,WAAvB,EAAoCjiI,IAAI,CAACC,EAAzC,CAAjB;AAEA,UAAIsO,KAAK,GAAG,CAAZ;AACA,UAAM6zH,IAAI,GAAG,EAAb;AAEA,UAAMrxD,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMiC,MAAM,GAAG,IAAIjC,OAAJ,EAAf,CAjCoH,CAmCpH;;AAEA,UAAMkqB,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAxCoH,CA0CpH;;AAEA,WAAM,IAAIjkB,EAAE,GAAG,CAAf,EAAkBA,EAAE,IAAI2wB,cAAxB,EAAwC3wB,EAAE,EAA1C,EAAgD;AAE/C,YAAMk+E,WAAW,GAAG,EAApB;AAEA,YAAMl7H,CAAC,GAAGg9C,EAAE,GAAG2wB,cAAf,CAJ+C,CAM/C;;AAEA,YAAIwtD,OAAO,GAAG,CAAd;;AAEA,YAAKn+E,EAAE,IAAI,CAAN,IAAW69E,UAAU,IAAI,CAA9B,EAAkC;AAEjCM,iBAAO,GAAG,MAAMztD,aAAhB;AAEA,SAJD,MAIO,IAAK1wB,EAAE,IAAI2wB,cAAN,IAAwBqtD,QAAQ,IAAIniI,IAAI,CAACC,EAA9C,EAAmD;AAEzDqiI,iBAAO,GAAG,CAAE,GAAF,GAAQztD,aAAlB;AAEA;;AAED,aAAM,IAAI3wB,EAAE,GAAG,CAAf,EAAkBA,EAAE,IAAI2wB,aAAxB,EAAuC3wB,EAAE,EAAzC,EAA+C;AAE9C,cAAMjsC,CAAC,GAAGisC,EAAE,GAAG2wB,aAAf,CAF8C,CAI9C;;AAEA9D,gBAAM,CAAC3+E,CAAP,GAAW,CAAEkS,MAAF,GAAWtE,IAAI,CAACujC,GAAL,CAAUu+F,QAAQ,GAAG7pH,CAAC,GAAG8pH,SAAzB,CAAX,GAAkD/hI,IAAI,CAACwjC,GAAL,CAAUw+F,UAAU,GAAG76H,CAAC,GAAG86H,WAA3B,CAA7D;AACAlxD,gBAAM,CAAC5nE,CAAP,GAAW7E,MAAM,GAAGtE,IAAI,CAACujC,GAAL,CAAUy+F,UAAU,GAAG76H,CAAC,GAAG86H,WAA3B,CAApB;AACAlxD,gBAAM,CAACr8D,CAAP,GAAWpQ,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAUs+F,QAAQ,GAAG7pH,CAAC,GAAG8pH,SAAzB,CAAT,GAAgD/hI,IAAI,CAACwjC,GAAL,CAAUw+F,UAAU,GAAG76H,CAAC,GAAG86H,WAA3B,CAA3D;AAEA1qH,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAV8C,CAY9C;;AAEA8wC,gBAAM,CAAC7iD,IAAP,CAAaouE,MAAb,EAAsB37B,SAAtB;AACA+yB,iBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAf8C,CAiB9C;;AAEA0zD,aAAG,CAACjgF,IAAJ,CAAU8vB,CAAC,GAAGqqH,OAAd,EAAuB,IAAIn7H,CAA3B;AAEAk7H,qBAAW,CAACl6I,IAAZ,CAAkBomB,KAAK,EAAvB;AAEA;;AAED6zH,YAAI,CAACj6I,IAAL,CAAWk6I,WAAX;AAEA,OA3FmH,CA6FpH;;;AAEA,WAAM,IAAIl+E,IAAE,GAAG,CAAf,EAAkBA,IAAE,GAAG2wB,cAAvB,EAAuC3wB,IAAE,EAAzC,EAA+C;AAE9C,aAAM,IAAID,IAAE,GAAG,CAAf,EAAkBA,IAAE,GAAG2wB,aAAvB,EAAsC3wB,IAAE,EAAxC,EAA8C;AAE7C,cAAMl9D,CAAC,GAAGo7I,IAAI,CAAEj+E,IAAF,CAAJ,CAAYD,IAAE,GAAG,CAAjB,CAAV;AACA,cAAMj9D,CAAC,GAAGm7I,IAAI,CAAEj+E,IAAF,CAAJ,CAAYD,IAAZ,CAAV;AACA,cAAM7rC,CAAC,GAAG+pH,IAAI,CAAEj+E,IAAE,GAAG,CAAP,CAAJ,CAAgBD,IAAhB,CAAV;AACA,cAAM5rC,CAAC,GAAG8pH,IAAI,CAAEj+E,IAAE,GAAG,CAAP,CAAJ,CAAgBD,IAAE,GAAG,CAArB,CAAV;AAEA,cAAKC,IAAE,KAAK,CAAP,IAAY69E,UAAU,GAAG,CAA9B,EAAkCv0D,OAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AAClC,cAAK6rC,IAAE,KAAK2wB,cAAc,GAAG,CAAxB,IAA6BqtD,QAAQ,GAAGniI,IAAI,CAACC,EAAlD,EAAuDwtE,OAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEvD;AAED,OA7GmH,CA+GpH;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAED85D,wBAAoB,CAACvjI,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAjC;AACAujI,wBAAoB,CAACvjI,SAArB,CAA+B0M,WAA/B,GAA6C62H,oBAA7C,C,CAEA;;AAEA,aAASK,YAAT,CAAuBnmG,WAAvB,EAAoCC,WAApC,EAAiDmmG,aAAjD,EAAgEC,WAAhE,EAA6ET,UAA7E,EAAyFC,WAAzF,EAAuG;AAEtGnxD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,cAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB50B,mBAAW,EAAEA,WADI;AAEjBC,mBAAW,EAAEA,WAFI;AAGjBmmG,qBAAa,EAAEA,aAHE;AAIjBC,mBAAW,EAAEA,WAJI;AAKjBT,kBAAU,EAAEA,UALK;AAMjBC,mBAAW,EAAEA;AANI,OAAlB;AASA,WAAKjxD,kBAAL,CAAyB,IAAI0xD,kBAAJ,CAAwBtmG,WAAxB,EAAqCC,WAArC,EAAkDmmG,aAAlD,EAAiEC,WAAjE,EAA8ET,UAA9E,EAA0FC,WAA1F,CAAzB;AACA,WAAKpvD,aAAL;AAEA;;AAED0vD,gBAAY,CAAC5jI,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAAzB;AACA4jI,gBAAY,CAAC5jI,SAAb,CAAuB0M,WAAvB,GAAqCk3H,YAArC,C,CAEA;;AAEA,aAASG,kBAAT,CAA6BtmG,WAA7B,EAA0CC,WAA1C,EAAuDmmG,aAAvD,EAAsEC,WAAtE,EAAmFT,UAAnF,EAA+FC,WAA/F,EAA6G;AAE5G33D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB50B,mBAAW,EAAEA,WADI;AAEjBC,mBAAW,EAAEA,WAFI;AAGjBmmG,qBAAa,EAAEA,aAHE;AAIjBC,mBAAW,EAAEA,WAJI;AAKjBT,kBAAU,EAAEA,UALK;AAMjBC,mBAAW,EAAEA;AANI,OAAlB;AASA7lG,iBAAW,GAAGA,WAAW,IAAI,GAA7B;AACAC,iBAAW,GAAGA,WAAW,IAAI,CAA7B;AAEA2lG,gBAAU,GAAGA,UAAU,KAAKnsI,SAAf,GAA2BmsI,UAA3B,GAAwC,CAArD;AACAC,iBAAW,GAAGA,WAAW,KAAKpsI,SAAhB,GAA4BosI,WAA5B,GAA0CjiI,IAAI,CAACC,EAAL,GAAU,CAAlE;AAEAuiI,mBAAa,GAAGA,aAAa,KAAK3sI,SAAlB,GAA8BmK,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAaq+H,aAAb,CAA9B,GAA6D,CAA7E;AACAC,iBAAW,GAAGA,WAAW,KAAK5sI,SAAhB,GAA4BmK,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAas+H,WAAb,CAA5B,GAAyD,CAAvE,CAtB4G,CAwB5G;;AAEA,UAAMh1D,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CA7B4G,CA+B5G;;AAEA,UAAI9jE,MAAM,GAAG83B,WAAb;AACA,UAAMumG,UAAU,GAAK,CAAEtmG,WAAW,GAAGD,WAAhB,IAAgCqmG,WAArD;AACA,UAAM1xD,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMzG,EAAE,GAAG,IAAIrJ,OAAJ,EAAX,CApC4G,CAsC5G;;AAEA,WAAM,IAAI1rD,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI06I,WAAtB,EAAmC16I,CAAC,EAApC,EAA0C;AAEzC,aAAM,IAAIN,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAI+6I,aAAtB,EAAqC/6I,KAAC,EAAtC,EAA4C;AAE3C;AAEA,cAAMm7I,OAAO,GAAGZ,UAAU,GAAGv6I,KAAC,GAAG+6I,aAAJ,GAAoBP,WAAjD,CAJ2C,CAM3C;;AAEAlxD,gBAAM,CAAC3+E,CAAP,GAAWkS,MAAM,GAAGtE,IAAI,CAACujC,GAAL,CAAUq/F,OAAV,CAApB;AACA7xD,gBAAM,CAAC5nE,CAAP,GAAW7E,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAUo/F,OAAV,CAApB;AAEArrH,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAX2C,CAa3C;;AAEAyzD,iBAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAf2C,CAiB3C;;AAEA20D,YAAE,CAAC1qD,CAAH,GAAO,CAAE2+E,MAAM,CAAC3+E,CAAP,GAAWiqC,WAAX,GAAyB,CAA3B,IAAiC,CAAxC;AACAygB,YAAE,CAAC3zC,CAAH,GAAO,CAAE4nE,MAAM,CAAC5nE,CAAP,GAAWkzB,WAAX,GAAyB,CAA3B,IAAiC,CAAxC;AAEA+rC,aAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB;AAEA,SA1BwC,CA4BzC;;;AAEA7E,cAAM,IAAIq+H,UAAV;AAEA,OAxE2G,CA0E5G;;;AAEA,WAAM,IAAI56I,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAG06I,WAArB,EAAkC16I,IAAC,EAAnC,EAAyC;AAExC,YAAM86I,iBAAiB,GAAG96I,IAAC,IAAKy6I,aAAa,GAAG,CAArB,CAA3B;;AAEA,aAAM,IAAI/6I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG+6I,aAArB,EAAoC/6I,KAAC,EAArC,EAA2C;AAE1C,cAAMm7I,QAAO,GAAGn7I,KAAC,GAAGo7I,iBAApB;;AAEA,cAAM77I,CAAC,GAAG47I,QAAV;AACA,cAAM37I,CAAC,GAAG27I,QAAO,GAAGJ,aAAV,GAA0B,CAApC;AACA,cAAMnqH,CAAC,GAAGuqH,QAAO,GAAGJ,aAAV,GAA0B,CAApC;AACA,cAAMlqH,CAAC,GAAGsqH,QAAO,GAAG,CAApB,CAP0C,CAS1C;;AAEAn1D,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OAhG2G,CAkG5G;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDs6D,sBAAkB,CAAC/jI,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAA/B;AACA+jI,sBAAkB,CAAC/jI,SAAnB,CAA6B0M,WAA7B,GAA2Cq3H,kBAA3C,C,CAEA;;AAEA,aAASI,aAAT,CAAwBttH,MAAxB,EAAgCutH,QAAhC,EAA0CjB,QAA1C,EAAoDC,SAApD,EAAgE;AAE/DjxD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,eAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBx7C,cAAM,EAAEA,MADS;AAEjButH,gBAAQ,EAAEA,QAFO;AAGjBjB,gBAAQ,EAAEA,QAHO;AAIjBC,iBAAS,EAAEA;AAJM,OAAlB;AAOA,WAAK/wD,kBAAL,CAAyB,IAAIgyD,mBAAJ,CAAyBxtH,MAAzB,EAAiCutH,QAAjC,EAA2CjB,QAA3C,EAAqDC,SAArD,CAAzB;AACA,WAAKlvD,aAAL;AAEA;;AAEDiwD,iBAAa,CAACnkI,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA1B;AACAmkI,iBAAa,CAACnkI,SAAd,CAAwB0M,WAAxB,GAAsCy3H,aAAtC,C,CAEA;;AAEA,aAASE,mBAAT,CAA8BxtH,MAA9B,EAAsCutH,QAAtC,EAAgDjB,QAAhD,EAA0DC,SAA1D,EAAsE;AAErEz3D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBx7C,cAAM,EAAEA,MADS;AAEjButH,gBAAQ,EAAEA,QAFO;AAGjBjB,gBAAQ,EAAEA,QAHO;AAIjBC,iBAAS,EAAEA;AAJM,OAAlB;AAOAgB,cAAQ,GAAG/iI,IAAI,CAAC4N,KAAL,CAAYm1H,QAAZ,KAA0B,EAArC;AACAjB,cAAQ,GAAGA,QAAQ,IAAI,CAAvB;AACAC,eAAS,GAAGA,SAAS,IAAI/hI,IAAI,CAACC,EAAL,GAAU,CAAnC,CAfqE,CAiBrE;;AAEA8hI,eAAS,GAAGnxF,SAAS,CAACS,KAAV,CAAiB0wF,SAAjB,EAA4B,CAA5B,EAA+B/hI,IAAI,CAACC,EAAL,GAAU,CAAzC,CAAZ,CAnBqE,CAsBrE;;AAEA,UAAMwtE,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM6wD,GAAG,GAAG,EAAZ,CA1BqE,CA4BrE;;AAEA,UAAM66D,eAAe,GAAG,MAAMF,QAA9B;AACA,UAAMhyD,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMzG,EAAE,GAAG,IAAIrJ,OAAJ,EAAX,CAhCqE,CAkCrE;;AAEA,WAAM,IAAIhsD,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs7I,QAAtB,EAAgCt7I,KAAC,EAAjC,EAAuC;AAEtC,YAAM6a,GAAG,GAAGw/H,QAAQ,GAAGr6I,KAAC,GAAGw7I,eAAJ,GAAsBlB,SAA7C;AAEA,YAAMv+F,GAAG,GAAGxjC,IAAI,CAACwjC,GAAL,CAAUlhC,GAAV,CAAZ;AACA,YAAMihC,GAAG,GAAGvjC,IAAI,CAACujC,GAAL,CAAUjhC,GAAV,CAAZ;;AAEA,aAAM,IAAIva,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAMytB,MAAM,CAAC1uB,MAAP,GAAgB,CAAxC,EAA6CiB,CAAC,EAA9C,EAAoD;AAEnD;AAEAgpF,gBAAM,CAAC3+E,CAAP,GAAWojB,MAAM,CAAEztB,CAAF,CAAN,CAAYqK,CAAZ,GAAgBoxC,GAA3B;AACAutC,gBAAM,CAAC5nE,CAAP,GAAWqM,MAAM,CAAEztB,CAAF,CAAN,CAAYohB,CAAvB;AACA4nE,gBAAM,CAACr8D,CAAP,GAAWc,MAAM,CAAEztB,CAAF,CAAN,CAAYqK,CAAZ,GAAgBmxC,GAA3B;AAEAhsB,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EARmD,CAUnD;;AAEAooC,YAAE,CAAC1qD,CAAH,GAAO3K,KAAC,GAAGs7I,QAAX;AACAjmF,YAAE,CAAC3zC,CAAH,GAAOphB,CAAC,IAAKytB,MAAM,CAAC1uB,MAAP,GAAgB,CAArB,CAAR;AAEAshF,aAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB;AAGA;AAED,OA/DoE,CAiErE;;;AAEA,WAAM,IAAI1hB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGs7I,QAArB,EAA+Bt7I,KAAC,EAAhC,EAAsC;AAErC,aAAM,IAAIM,IAAC,GAAG,CAAd,EAAiBA,IAAC,GAAKytB,MAAM,CAAC1uB,MAAP,GAAgB,CAAvC,EAA4CiB,IAAC,EAA7C,EAAmD;AAElD,cAAMm7I,IAAI,GAAGn7I,IAAC,GAAGN,KAAC,GAAG+tB,MAAM,CAAC1uB,MAA5B;AAEA,cAAME,CAAC,GAAGk8I,IAAV;AACA,cAAMj8I,CAAC,GAAGi8I,IAAI,GAAG1tH,MAAM,CAAC1uB,MAAxB;AACA,cAAMuxB,CAAC,GAAG6qH,IAAI,GAAG1tH,MAAM,CAAC1uB,MAAd,GAAuB,CAAjC;AACA,cAAMwxB,CAAC,GAAG4qH,IAAI,GAAG,CAAjB,CAPkD,CASlD;;AAEAz1D,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,iBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB;AAEA;AAED,OArFoE,CAuFrE;;;AAEA,WAAKoK,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB,EA3FqE,CA6FrE;;AAEA,WAAK8D,oBAAL,GA/FqE,CAiGrE;AACA;;AAEA,UAAK61D,SAAS,KAAK/hI,IAAI,CAACC,EAAL,GAAU,CAA7B,EAAiC;AAEhC,YAAMkoE,QAAO,GAAG,KAAK5mC,UAAL,CAAgBikB,MAAhB,CAAuBnhC,KAAvC;AACA,YAAM8+G,EAAE,GAAG,IAAI5/E,OAAJ,EAAX;AACA,YAAM6/E,EAAE,GAAG,IAAI7/E,OAAJ,EAAX;AACA,YAAMnrC,CAAC,GAAG,IAAImrC,OAAJ,EAAV,CALgC,CAOhC;;AAEA,YAAM2/E,KAAI,GAAGH,QAAQ,GAAGvtH,MAAM,CAAC1uB,MAAlB,GAA2B,CAAxC;;AAEA,aAAM,IAAIW,KAAC,GAAG,CAAR,EAAWM,IAAC,GAAG,CAArB,EAAwBN,KAAC,GAAG+tB,MAAM,CAAC1uB,MAAnC,EAA2CW,KAAC,IAAKM,IAAC,IAAI,CAAtD,EAA0D;AAEzD;AAEAo7I,YAAE,CAAC/wI,CAAH,GAAO+1E,QAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAd;AACAo7I,YAAE,CAACh6H,CAAH,GAAOg/D,QAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAd;AACAo7I,YAAE,CAACzuH,CAAH,GAAOyzD,QAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAd,CANyD,CAQzD;;AAEAq7I,YAAE,CAAChxI,CAAH,GAAO+1E,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAd;AACAq7I,YAAE,CAACj6H,CAAH,GAAOg/D,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAd;AACAq7I,YAAE,CAAC1uH,CAAH,GAAOyzD,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAd,CAZyD,CAczD;;AAEAqwB,WAAC,CAAC87B,UAAF,CAAcivF,EAAd,EAAkBC,EAAlB,EAAuBhuF,SAAvB,GAhByD,CAkBzD;;AAEA+yB,kBAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAP,GAAmBogF,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAP,GAA0BqwB,CAAC,CAAChmB,CAA/C;AACA+1E,kBAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAP,GAAmBogF,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAP,GAA0BqwB,CAAC,CAACjP,CAA/C;AACAg/D,kBAAO,CAAEpgF,IAAC,GAAG,CAAN,CAAP,GAAmBogF,QAAO,CAAE+6D,KAAI,GAAGn7I,IAAP,GAAW,CAAb,CAAP,GAA0BqwB,CAAC,CAAC1D,CAA/C;AAEA;AAED;AAED;;AAEDsuH,uBAAmB,CAACrkI,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAhC;AACAqkI,uBAAmB,CAACrkI,SAApB,CAA8B0M,WAA9B,GAA4C23H,mBAA5C,C,CAEA;;AAEA,aAASK,aAAT,CAAwB/yE,MAAxB,EAAgC4rE,aAAhC,EAAgD;AAE/CprD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,eAAZ;;AAEA,UAAK,OAAO+vI,aAAP,KAAyB,QAA9B,EAAyC;AAExCtzI,eAAO,CAAC2W,IAAR,CAAc,0DAAd;AAEA28H,qBAAa,GAAGA,aAAa,CAACA,aAA9B;AAEA;;AAED,WAAKlrE,UAAL,GAAkB;AACjBV,cAAM,EAAEA,MADS;AAEjB4rE,qBAAa,EAAEA;AAFE,OAAlB;AAKA,WAAKlrD,kBAAL,CAAyB,IAAIsyD,mBAAJ,CAAyBhzE,MAAzB,EAAiC4rE,aAAjC,CAAzB;AACA,WAAKrpD,aAAL;AAEA;;AAEDwwD,iBAAa,CAAC1kI,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA1B;AACA0kI,iBAAa,CAAC1kI,SAAd,CAAwB0M,WAAxB,GAAsCg4H,aAAtC;;AAEAA,iBAAa,CAAC1kI,SAAd,CAAwB29C,MAAxB,GAAiC,YAAY;AAE5C,UAAMh2D,IAAI,GAAGwqF,QAAQ,CAACnyE,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,CAAb;AAEA,UAAMw0D,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AAEA,aAAOizE,QAAQ,CAAEjzE,MAAF,EAAUhqE,IAAV,CAAf;AAEA,KARD,C,CAUA;;;AAEA,aAASg9I,mBAAT,CAA8BhzE,MAA9B,EAAsC4rE,aAAtC,EAAsD;AAErD5xD,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBV,cAAM,EAAEA,MADS;AAEjB4rE,qBAAa,EAAEA;AAFE,OAAlB;AAKAA,mBAAa,GAAGA,aAAa,IAAI,EAAjC,CAXqD,CAarD;;AAEA,UAAMzuD,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAlBqD,CAoBrD;;AAEA,UAAI8M,UAAU,GAAG,CAAjB;AACA,UAAIc,UAAU,GAAG,CAAjB,CAvBqD,CAyBrD;;AAEA,UAAK98D,KAAK,CAAC0jC,OAAN,CAAe0T,MAAf,MAA4B,KAAjC,EAAyC;AAExC0rE,gBAAQ,CAAE1rE,MAAF,CAAR;AAEA,OAJD,MAIO;AAEN,aAAM,IAAI7oE,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG6oE,MAAM,CAACxpE,MAA5B,EAAoCW,KAAC,EAArC,EAA2C;AAE1Cu0I,kBAAQ,CAAE1rE,MAAM,CAAE7oE,KAAF,CAAR,CAAR;AAEA,eAAKqjF,QAAL,CAAeoK,UAAf,EAA2Bc,UAA3B,EAAuCvuF,KAAvC,EAJ0C,CAIE;;AAE5CytF,oBAAU,IAAIc,UAAd;AACAA,oBAAU,GAAG,CAAb;AAEA;AAED,OA5CoD,CA8CrD;;;AAEA,WAAKtzD,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB,EAnDqD,CAsDrD;;AAEA,eAAS4zD,QAAT,CAAmBv6F,KAAnB,EAA2B;AAE1B,YAAM+hG,WAAW,GAAGjsH,QAAQ,CAACzwB,MAAT,GAAkB,CAAtC;AACA,YAAM0uB,MAAM,GAAGisB,KAAK,CAACnrB,aAAN,CAAqB4lH,aAArB,CAAf;AAEA,YAAIuH,aAAa,GAAGjuH,MAAM,CAACisB,KAA3B;AACA,YAAMiiG,UAAU,GAAGluH,MAAM,CAACimH,KAA1B,CAN0B,CAQ1B;;AAEA,YAAKL,UAAU,CAACE,WAAX,CAAwBmI,aAAxB,MAA4C,KAAjD,EAAyD;AAExDA,uBAAa,GAAGA,aAAa,CAACpG,OAAd,EAAhB;AAEA;;AAED,aAAM,IAAI51I,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGwxI,UAAU,CAAC58I,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,cAAMk8I,SAAS,GAAGD,UAAU,CAAEj8I,KAAF,CAA5B;;AAEA,cAAK2zI,UAAU,CAACE,WAAX,CAAwBqI,SAAxB,MAAwC,IAA7C,EAAoD;AAEnDD,sBAAU,CAAEj8I,KAAF,CAAV,GAAkBk8I,SAAS,CAACtG,OAAV,EAAlB;AAEA;AAED;;AAED,YAAMzlH,KAAK,GAAGwjH,UAAU,CAACI,gBAAX,CAA6BiI,aAA7B,EAA4CC,UAA5C,CAAd,CA5B0B,CA8B1B;;AAEA,aAAM,IAAIj8I,KAAC,GAAG,CAAR,EAAWyK,IAAC,GAAGwxI,UAAU,CAAC58I,MAAhC,EAAwCW,KAAC,GAAGyK,IAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,cAAMk8I,UAAS,GAAGD,UAAU,CAAEj8I,KAAF,CAA5B;AACAg8I,uBAAa,GAAGA,aAAa,CAAC7nI,MAAd,CAAsB+nI,UAAtB,CAAhB;AAEA,SArCyB,CAuC1B;;;AAEA,aAAM,IAAIl8I,KAAC,GAAG,CAAR,EAAWyK,IAAC,GAAGuxI,aAAa,CAAC38I,MAAnC,EAA2CW,KAAC,GAAGyK,IAA/C,EAAkDzK,KAAC,EAAnD,EAAyD;AAExD,cAAMspF,MAAM,GAAG0yD,aAAa,CAAEh8I,KAAF,CAA5B;AAEA8vB,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC,CAAnC;AACAg/D,iBAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACAigF,aAAG,CAACjgF,IAAJ,CAAU4oF,MAAM,CAAC3+E,CAAjB,EAAoB2+E,MAAM,CAAC5nE,CAA3B,EANwD,CAMxB;AAEhC,SAjDyB,CAmD1B;;;AAEA,aAAM,IAAI1hB,KAAC,GAAG,CAAR,EAAWyK,IAAC,GAAG0lB,KAAK,CAAC9wB,MAA3B,EAAmCW,KAAC,GAAGyK,IAAvC,EAA0CzK,KAAC,EAA3C,EAAiD;AAEhD,cAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;AAEA,cAAMT,CAAC,GAAGgiF,IAAI,CAAE,CAAF,CAAJ,GAAYw6D,WAAtB;AACA,cAAMv8I,CAAC,GAAG+hF,IAAI,CAAE,CAAF,CAAJ,GAAYw6D,WAAtB;AACA,cAAMnrH,CAAC,GAAG2wD,IAAI,CAAE,CAAF,CAAJ,GAAYw6D,WAAtB;AAEA/1D,iBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBoxB,CAApB;AACA29D,oBAAU,IAAI,CAAd;AAEA;AAED;AAED;;AAEDstD,uBAAmB,CAAC3kI,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAhC;AACA2kI,uBAAmB,CAAC3kI,SAApB,CAA8B0M,WAA9B,GAA4Ci4H,mBAA5C;;AAEAA,uBAAmB,CAAC3kI,SAApB,CAA8B29C,MAA9B,GAAuC,YAAY;AAElD,UAAMh2D,IAAI,GAAGgkF,cAAc,CAAC3rE,SAAf,CAAyB29C,MAAzB,CAAgCxgD,IAAhC,CAAsC,IAAtC,CAAb;AAEA,UAAMw0D,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AAEA,aAAOizE,QAAQ,CAAEjzE,MAAF,EAAUhqE,IAAV,CAAf;AAEA,KARD,C,CAUA;;;AAEA,aAASi9I,QAAT,CAAmBjzE,MAAnB,EAA2BhqE,IAA3B,EAAkC;AAEjCA,UAAI,CAACgqE,MAAL,GAAc,EAAd;;AAEA,UAAKp3C,KAAK,CAAC0jC,OAAN,CAAe0T,MAAf,CAAL,EAA+B;AAE9B,aAAM,IAAI7oE,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGo+D,MAAM,CAACxpE,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMg6C,KAAK,GAAG6uB,MAAM,CAAE7oE,KAAF,CAApB;AAEAnB,cAAI,CAACgqE,MAAL,CAAYnoE,IAAZ,CAAkBs5C,KAAK,CAAC2P,IAAxB;AAEA;AAED,OAVD,MAUO;AAEN9qD,YAAI,CAACgqE,MAAL,CAAYnoE,IAAZ,CAAkBmoE,MAAM,CAAClf,IAAzB;AAEA;;AAED,aAAO9qD,IAAP;AAEA;;AAED,aAASs9I,aAAT,CAAwB7yE,QAAxB,EAAkC8yE,cAAlC,EAAmD;AAElDv5D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,eAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB6yE,sBAAc,EAAEA;AADC,OAAlB;AAIAA,oBAAc,GAAKA,cAAc,KAAKhuI,SAArB,GAAmCguI,cAAnC,GAAoD,CAArE,CAVkD,CAYlD;;AAEA,UAAMtsH,QAAQ,GAAG,EAAjB,CAdkD,CAgBlD;;AAEA,UAAMusH,YAAY,GAAG9jI,IAAI,CAACujC,GAAL,CAAUqN,SAAS,CAACC,OAAV,GAAoBgzF,cAA9B,CAArB;AACA,UAAM1R,IAAI,GAAG,CAAE,CAAF,EAAK,CAAL,CAAb;AAAA,UAAuBC,KAAK,GAAG,EAA/B;AACA,UAAIC,KAAJ,EAAWC,KAAX,EAAkBjhE,GAAlB;AACA,UAAMnsE,IAAI,GAAG,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAb,CArBkD,CAuBlD;;AAEA,UAAIyoF,SAAJ;;AAEA,UAAK5c,QAAQ,CAAC2Z,gBAAd,EAAiC;AAEhCiD,iBAAS,GAAG,IAAImD,QAAJ,EAAZ;AACAnD,iBAAS,CAACqD,kBAAV,CAA8BjgB,QAA9B;AAEA,OALD,MAKO;AAEN4c,iBAAS,GAAG5c,QAAQ,CAAChvD,KAAT,EAAZ;AAEA;;AAED4rE,eAAS,CAACkF,aAAV;AACAlF,eAAS,CAAC1B,kBAAV;AAEA,UAAM83D,cAAc,GAAGp2D,SAAS,CAACp2D,QAAjC;AACA,UAAMK,KAAK,GAAG+1D,SAAS,CAAC/1D,KAAxB,CA1CkD,CA4ClD;;AAEA,WAAM,IAAInwB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG0lB,KAAK,CAAC9wB,MAA3B,EAAmCW,KAAC,GAAGyK,CAAvC,EAA0CzK,KAAC,EAA3C,EAAiD;AAEhD,YAAMuhF,IAAI,GAAGpxD,KAAK,CAAEnwB,KAAF,CAAlB;;AAEA,aAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9BsqI,eAAK,GAAGrpD,IAAI,CAAE9jF,IAAI,CAAE6C,CAAF,CAAN,CAAZ;AACAuqI,eAAK,GAAGtpD,IAAI,CAAE9jF,IAAI,CAAE,CAAE6C,CAAC,GAAG,CAAN,IAAY,CAAd,CAAN,CAAZ;AACAoqI,cAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACkE,GAAL,CAAUmuH,KAAV,EAAiBC,KAAjB,CAAZ;AACAH,cAAI,CAAE,CAAF,CAAJ,GAAYnyH,IAAI,CAACmE,GAAL,CAAUkuH,KAAV,EAAiBC,KAAjB,CAAZ;AAEAjhE,aAAG,GAAG8gE,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAA5B;;AAEA,cAAKC,KAAK,CAAE/gE,GAAF,CAAL,KAAiBx7D,SAAtB,EAAkC;AAEjCu8H,iBAAK,CAAE/gE,GAAF,CAAL,GAAe;AAAEmV,oBAAM,EAAE2rD,IAAI,CAAE,CAAF,CAAd;AAAqB1rD,oBAAM,EAAE0rD,IAAI,CAAE,CAAF,CAAjC;AAAwC6R,mBAAK,EAAEv8I,KAA/C;AAAkDw8I,mBAAK,EAAEpuI;AAAzD,aAAf;AAEA,WAJD,MAIO;AAENu8H,iBAAK,CAAE/gE,GAAF,CAAL,CAAa4yE,KAAb,GAAqBx8I,KAArB;AAEA;AAED;AAED,OAvEiD,CAyElD;;;AAEA,WAAM4pE,GAAN,IAAa+gE,KAAb,EAAqB;AAEpB,YAAMrtI,CAAC,GAAGqtI,KAAK,CAAE/gE,GAAF,CAAf,CAFoB,CAIpB;;AAEA,YAAKtsE,CAAC,CAACk/I,KAAF,KAAYpuI,SAAZ,IAAyB+hB,KAAK,CAAE7yB,CAAC,CAACi/I,KAAJ,CAAL,CAAiBx+E,MAAjB,CAAwBtgD,GAAxB,CAA6B0S,KAAK,CAAE7yB,CAAC,CAACk/I,KAAJ,CAAL,CAAiBz+E,MAA9C,KAA0Ds+E,YAAxF,EAAuG;AAEtG,cAAI/yD,MAAM,GAAGgzD,cAAc,CAAEh/I,CAAC,CAACyhF,MAAJ,CAA3B;AACAjvD,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEAq8D,gBAAM,GAAGgzD,cAAc,CAAEh/I,CAAC,CAAC0hF,MAAJ,CAAvB;AACAlvD,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C;AAEA;AAED,OA3FiD,CA6FlD;;;AAEA,WAAKk2D,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AAEA;;AAEDqsH,iBAAa,CAACjlI,SAAd,GAA0B3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAA1B;AACAilI,iBAAa,CAACjlI,SAAd,CAAwB0M,WAAxB,GAAsCu4H,aAAtC,C,CAEA;;AAEA,aAASM,gBAAT,CAA2BC,SAA3B,EAAsCC,YAAtC,EAAoDtuH,MAApD,EAA4Dm/G,cAA5D,EAA4EngD,cAA5E,EAA4FuvD,SAA5F,EAAuGrC,UAAvG,EAAmHC,WAAnH,EAAiI;AAEhInxD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,kBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBmzE,iBAAS,EAAEA,SADM;AAEjBC,oBAAY,EAAEA,YAFG;AAGjBtuH,cAAM,EAAEA,MAHS;AAIjBm/G,sBAAc,EAAEA,cAJC;AAKjBngD,sBAAc,EAAEA,cALC;AAMjBuvD,iBAAS,EAAEA,SANM;AAOjBrC,kBAAU,EAAEA,UAPK;AAQjBC,mBAAW,EAAEA;AARI,OAAlB;AAWA,WAAKjxD,kBAAL,CAAyB,IAAIszD,sBAAJ,CAA4BH,SAA5B,EAAuCC,YAAvC,EAAqDtuH,MAArD,EAA6Dm/G,cAA7D,EAA6EngD,cAA7E,EAA6FuvD,SAA7F,EAAwGrC,UAAxG,EAAoHC,WAApH,CAAzB;AACA,WAAKpvD,aAAL;AAEA;;AAEDqxD,oBAAgB,CAACvlI,SAAjB,GAA6B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA7B;AACAulI,oBAAgB,CAACvlI,SAAjB,CAA2B0M,WAA3B,GAAyC64H,gBAAzC,C,CAEA;;AAEA,aAASI,sBAAT,CAAiCH,SAAjC,EAA4CC,YAA5C,EAA0DtuH,MAA1D,EAAkEm/G,cAAlE,EAAkFngD,cAAlF,EAAkGuvD,SAAlG,EAA6GrC,UAA7G,EAAyHC,WAAzH,EAAuI;AAEtI33D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,wBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjBmzE,iBAAS,EAAEA,SADM;AAEjBC,oBAAY,EAAEA,YAFG;AAGjBtuH,cAAM,EAAEA,MAHS;AAIjBm/G,sBAAc,EAAEA,cAJC;AAKjBngD,sBAAc,EAAEA,cALC;AAMjBuvD,iBAAS,EAAEA,SANM;AAOjBrC,kBAAU,EAAEA,UAPK;AAQjBC,mBAAW,EAAEA;AARI,OAAlB;AAWA,UAAMv/H,KAAK,GAAG,IAAd;AAEAyhI,eAAS,GAAGA,SAAS,KAAKtuI,SAAd,GAA0BsuI,SAA1B,GAAsC,CAAlD;AACAC,kBAAY,GAAGA,YAAY,KAAKvuI,SAAjB,GAA6BuuI,YAA7B,GAA4C,CAA3D;AACAtuH,YAAM,GAAGA,MAAM,IAAI,CAAnB;AAEAm/G,oBAAc,GAAGj1H,IAAI,CAAC4N,KAAL,CAAYqnH,cAAZ,KAAgC,CAAjD;AACAngD,oBAAc,GAAG90E,IAAI,CAAC4N,KAAL,CAAYknE,cAAZ,KAAgC,CAAjD;AAEAuvD,eAAS,GAAGA,SAAS,KAAKxuI,SAAd,GAA0BwuI,SAA1B,GAAsC,KAAlD;AACArC,gBAAU,GAAGA,UAAU,KAAKnsI,SAAf,GAA2BmsI,UAA3B,GAAwC,GAArD;AACAC,iBAAW,GAAGA,WAAW,KAAKpsI,SAAhB,GAA4BosI,WAA5B,GAA0CjiI,IAAI,CAACC,EAAL,GAAU,CAAlE,CA5BsI,CA8BtI;;AAEA,UAAMwtE,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAnCsI,CAqCtI;;AAEA,UAAI75D,KAAK,GAAG,CAAZ;AACA,UAAMg2H,UAAU,GAAG,EAAnB;AACA,UAAMt9B,UAAU,GAAGnxF,MAAM,GAAG,CAA5B;AACA,UAAIo/D,UAAU,GAAG,CAAjB,CA1CsI,CA4CtI;;AAEAsvD,mBAAa;;AAEb,UAAKH,SAAS,KAAK,KAAnB,EAA2B;AAE1B,YAAKF,SAAS,GAAG,CAAjB,EAAqBM,WAAW,CAAE,IAAF,CAAX;AACrB,YAAKL,YAAY,GAAG,CAApB,EAAwBK,WAAW,CAAE,KAAF,CAAX;AAExB,OArDqI,CAuDtI;;;AAEA,WAAK/hH,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;;AAEA,eAASo8D,aAAT,GAAyB;AAExB,YAAMh/E,MAAM,GAAG,IAAIjC,OAAJ,EAAf;AACA,YAAMwtB,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AAEA,YAAIyyB,UAAU,GAAG,CAAjB,CALwB,CAOxB;;AACA,YAAM0uD,KAAK,GAAG,CAAEN,YAAY,GAAGD,SAAjB,IAA+BruH,MAA7C,CARwB,CAUxB;;AAEA,aAAM,IAAI3M,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI2rE,cAAtB,EAAsC3rE,CAAC,EAAvC,EAA6C;AAE5C,cAAMw7H,QAAQ,GAAG,EAAjB;AAEA,cAAMx9H,CAAC,GAAGgC,CAAC,GAAG2rE,cAAd,CAJ4C,CAM5C;;AAEA,cAAMxwE,MAAM,GAAG6C,CAAC,IAAKi9H,YAAY,GAAGD,SAApB,CAAD,GAAmCA,SAAlD;;AAEA,eAAM,IAAI/xI,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI6iI,cAAtB,EAAsC7iI,CAAC,EAAvC,EAA6C;AAE5C,gBAAM6lB,CAAC,GAAG7lB,CAAC,GAAG6iI,cAAd;AAEA,gBAAMzyH,KAAK,GAAGyV,CAAC,GAAGgqH,WAAJ,GAAkBD,UAAhC;AAEA,gBAAM4C,QAAQ,GAAG5kI,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAjB;AACA,gBAAMqiI,QAAQ,GAAG7kI,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAjB,CAP4C,CAS5C;;AAEAuuE,kBAAM,CAAC3+E,CAAP,GAAWkS,MAAM,GAAGsgI,QAApB;AACA7zD,kBAAM,CAAC5nE,CAAP,GAAW,CAAEhC,CAAF,GAAM2O,MAAN,GAAemxF,UAA1B;AACAl2B,kBAAM,CAACr8D,CAAP,GAAWpQ,MAAM,GAAGugI,QAApB;AACAttH,oBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAd4C,CAgB5C;;AAEA8wC,kBAAM,CAAC1gD,GAAP,CAAY8/H,QAAZ,EAAsBF,KAAtB,EAA6BG,QAA7B,EAAwCzvF,SAAxC;AACA+yB,mBAAO,CAAChgF,IAAR,CAAcq9D,MAAM,CAACpzD,CAArB,EAAwBozD,MAAM,CAACr8C,CAA/B,EAAkCq8C,MAAM,CAAC9wC,CAAzC,EAnB4C,CAqB5C;;AAEA0zD,eAAG,CAACjgF,IAAJ,CAAU8vB,CAAV,EAAa,IAAI9Q,CAAjB,EAvB4C,CAyB5C;;AAEAw9H,oBAAQ,CAACx8I,IAAT,CAAeomB,KAAK,EAApB;AAEA,WAvC2C,CAyC5C;;;AAEAg2H,oBAAU,CAACp8I,IAAX,CAAiBw8I,QAAjB;AAEA,SAzDuB,CA2DxB;;;AAEA,aAAM,IAAIvyI,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG6iI,cAArB,EAAqC7iI,GAAC,EAAtC,EAA4C;AAE3C,eAAM,IAAI+W,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG2rE,cAArB,EAAqC3rE,GAAC,EAAtC,EAA4C;AAE3C;AAEA,gBAAMniB,CAAC,GAAGu9I,UAAU,CAAEp7H,GAAF,CAAV,CAAiB/W,GAAjB,CAAV;AACA,gBAAMnL,CAAC,GAAGs9I,UAAU,CAAEp7H,GAAC,GAAG,CAAN,CAAV,CAAqB/W,GAArB,CAAV;AACA,gBAAMimB,CAAC,GAAGksH,UAAU,CAAEp7H,GAAC,GAAG,CAAN,CAAV,CAAqB/W,GAAC,GAAG,CAAzB,CAAV;AACA,gBAAMkmB,CAAC,GAAGisH,UAAU,CAAEp7H,GAAF,CAAV,CAAiB/W,GAAC,GAAG,CAArB,CAAV,CAP2C,CAS3C;;AAEAq7E,mBAAO,CAACtlF,IAAR,CAAcnB,CAAd,EAAiBC,CAAjB,EAAoBqxB,CAApB;AACAm1D,mBAAO,CAACtlF,IAAR,CAAclB,CAAd,EAAiBoxB,CAAjB,EAAoBC,CAApB,EAZ2C,CAc3C;;AAEA09D,sBAAU,IAAI,CAAd;AAEA;AAED,SAnFuB,CAqFxB;;;AAEAtzE,aAAK,CAACooE,QAAN,CAAgBoK,UAAhB,EAA4Bc,UAA5B,EAAwC,CAAxC,EAvFwB,CAyFxB;;AAEAd,kBAAU,IAAIc,UAAd;AAEA;;AAED,eAASyuD,WAAT,CAAsBl8H,GAAtB,EAA4B;AAE3B,YAAIu8H,gBAAJ,EAAsBC,cAAtB;AAEA,YAAMjoF,EAAE,GAAG,IAAIrJ,OAAJ,EAAX;AACA,YAAMs9B,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AAEA,YAAIyyB,UAAU,GAAG,CAAjB;AAEA,YAAM1xE,MAAM,GAAKiE,GAAG,KAAK,IAAV,GAAmB47H,SAAnB,GAA+BC,YAA9C;AACA,YAAMpgG,IAAI,GAAKz7B,GAAG,KAAK,IAAV,GAAmB,CAAnB,GAAuB,CAAE,CAAtC,CAV2B,CAY3B;;AACAu8H,wBAAgB,GAAGv2H,KAAnB,CAb2B,CAe3B;AACA;AACA;;AAEA,aAAM,IAAInc,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI6iI,cAAtB,EAAsC7iI,CAAC,EAAvC,EAA6C;AAE5C;AAEAmlB,kBAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB8+G,UAAU,GAAGjjE,IAA/B,EAAqC,CAArC,EAJ4C,CAM5C;;AAEAmkC,iBAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB67C,IAAjB,EAAuB,CAAvB,EAR4C,CAU5C;;AAEAokC,aAAG,CAACjgF,IAAJ,CAAU,GAAV,EAAe,GAAf,EAZ4C,CAc5C;;AAEAomB,eAAK;AAEL,SArC0B,CAuC3B;;;AAEAw2H,sBAAc,GAAGx2H,KAAjB,CAzC2B,CA2C3B;;AAEA,aAAM,IAAInc,GAAC,GAAG,CAAd,EAAiBA,GAAC,IAAI6iI,cAAtB,EAAsC7iI,GAAC,EAAvC,EAA6C;AAE5C,cAAM6lB,CAAC,GAAG7lB,GAAC,GAAG6iI,cAAd;AACA,cAAMzyH,KAAK,GAAGyV,CAAC,GAAGgqH,WAAJ,GAAkBD,UAAhC;AAEA,cAAM6C,QAAQ,GAAG7kI,IAAI,CAACujC,GAAL,CAAU/gC,KAAV,CAAjB;AACA,cAAMoiI,QAAQ,GAAG5kI,IAAI,CAACwjC,GAAL,CAAUhhC,KAAV,CAAjB,CAN4C,CAQ5C;;AAEAuuE,gBAAM,CAAC3+E,CAAP,GAAWkS,MAAM,GAAGsgI,QAApB;AACA7zD,gBAAM,CAAC5nE,CAAP,GAAW89F,UAAU,GAAGjjE,IAAxB;AACA+sC,gBAAM,CAACr8D,CAAP,GAAWpQ,MAAM,GAAGugI,QAApB;AACAttH,kBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EAb4C,CAe5C;;AAEAyzD,iBAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB67C,IAAjB,EAAuB,CAAvB,EAjB4C,CAmB5C;;AAEA8Y,YAAE,CAAC1qD,CAAH,GAASyyI,QAAQ,GAAG,GAAb,GAAqB,GAA5B;AACA/nF,YAAE,CAAC3zC,CAAH,GAASy7H,QAAQ,GAAG,GAAX,GAAiB5gG,IAAnB,GAA4B,GAAnC;AACAokC,aAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB,EAvB4C,CAyB5C;;AAEAoF,eAAK;AAEL,SA1E0B,CA4E3B;;;AAEA,aAAM,IAAInc,GAAC,GAAG,CAAd,EAAiBA,GAAC,GAAG6iI,cAArB,EAAqC7iI,GAAC,EAAtC,EAA4C;AAE3C,cAAMimB,CAAC,GAAGysH,gBAAgB,GAAG1yI,GAA7B;;AACA,cAAM3K,KAAC,GAAGs9I,cAAc,GAAG3yI,GAA3B;;AAEA,cAAKmW,GAAG,KAAK,IAAb,EAAoB;AAEnB;AAEAklE,mBAAO,CAACtlF,IAAR,CAAcV,KAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwB4wB,CAAxB;AAEA,WAND,MAMO;AAEN;AAEAo1D,mBAAO,CAACtlF,IAAR,CAAcV,KAAC,GAAG,CAAlB,EAAqBA,KAArB,EAAwB4wB,CAAxB;AAEA;;AAED29D,oBAAU,IAAI,CAAd;AAEA,SAnG0B,CAqG3B;;;AAEAtzE,aAAK,CAACooE,QAAN,CAAgBoK,UAAhB,EAA4Bc,UAA5B,EAAwCztE,GAAG,KAAK,IAAR,GAAe,CAAf,GAAmB,CAA3D,EAvG2B,CAyG3B;;AAEA2sE,kBAAU,IAAIc,UAAd;AAEA;AAED;;AAEDsuD,0BAAsB,CAAC3lI,SAAvB,GAAmC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAnC;AACA2lI,0BAAsB,CAAC3lI,SAAvB,CAAiC0M,WAAjC,GAA+Ci5H,sBAA/C,C,CAEA;;AAEA,aAASU,YAAT,CAAuB1gI,MAAvB,EAA+BwR,MAA/B,EAAuCm/G,cAAvC,EAAuDngD,cAAvD,EAAuEuvD,SAAvE,EAAkFrC,UAAlF,EAA8FC,WAA9F,EAA4G;AAE3GiC,sBAAgB,CAACpoI,IAAjB,CAAuB,IAAvB,EAA6B,CAA7B,EAAgCwI,MAAhC,EAAwCwR,MAAxC,EAAgDm/G,cAAhD,EAAgEngD,cAAhE,EAAgFuvD,SAAhF,EAA2FrC,UAA3F,EAAuGC,WAAvG;AAEA,WAAK91I,IAAL,GAAY,cAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwR,cAAM,EAAEA,MAFS;AAGjBm/G,sBAAc,EAAEA,cAHC;AAIjBngD,sBAAc,EAAEA,cAJC;AAKjBuvD,iBAAS,EAAEA,SALM;AAMjBrC,kBAAU,EAAEA,UANK;AAOjBC,mBAAW,EAAEA;AAPI,OAAlB;AAUA;;AAED+C,gBAAY,CAACrmI,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAeinI,gBAAgB,CAACvlI,SAAhC,CAAzB;AACAqmI,gBAAY,CAACrmI,SAAb,CAAuB0M,WAAvB,GAAqC25H,YAArC,C,CAEA;;AAEA,aAASC,kBAAT,CAA6B3gI,MAA7B,EAAqCwR,MAArC,EAA6Cm/G,cAA7C,EAA6DngD,cAA7D,EAA6EuvD,SAA7E,EAAwFrC,UAAxF,EAAoGC,WAApG,EAAkH;AAEjHqC,4BAAsB,CAACxoI,IAAvB,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCwI,MAAtC,EAA8CwR,MAA9C,EAAsDm/G,cAAtD,EAAsEngD,cAAtE,EAAsFuvD,SAAtF,EAAiGrC,UAAjG,EAA6GC,WAA7G;AAEA,WAAK91I,IAAL,GAAY,oBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBwR,cAAM,EAAEA,MAFS;AAGjBm/G,sBAAc,EAAEA,cAHC;AAIjBngD,sBAAc,EAAEA,cAJC;AAKjBuvD,iBAAS,EAAEA,SALM;AAMjBrC,kBAAU,EAAEA,UANK;AAOjBC,mBAAW,EAAEA;AAPI,OAAlB;AAUA;;AAEDgD,sBAAkB,CAACtmI,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAeqnI,sBAAsB,CAAC3lI,SAAtC,CAA/B;AACAsmI,sBAAkB,CAACtmI,SAAnB,CAA6B0M,WAA7B,GAA2C45H,kBAA3C,C,CAEA;;AAEA,aAASC,cAAT,CAAyB5gI,MAAzB,EAAiCy+H,QAAjC,EAA2Cf,UAA3C,EAAuDC,WAAvD,EAAqE;AAEpEnxD,cAAQ,CAACh1E,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBy+H,gBAAQ,EAAEA,QAFO;AAGjBf,kBAAU,EAAEA,UAHK;AAIjBC,mBAAW,EAAEA;AAJI,OAAlB;AAOA,WAAKjxD,kBAAL,CAAyB,IAAIm0D,oBAAJ,CAA0B7gI,MAA1B,EAAkCy+H,QAAlC,EAA4Cf,UAA5C,EAAwDC,WAAxD,CAAzB;AACA,WAAKpvD,aAAL;AAEA;;AAEDqyD,kBAAc,CAACvmI,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe6zE,QAAQ,CAACnyE,SAAxB,CAA3B;AACAumI,kBAAc,CAACvmI,SAAf,CAAyB0M,WAAzB,GAAuC65H,cAAvC,C,CAEA;;AAEA,aAASC,oBAAT,CAA+B7gI,MAA/B,EAAuCy+H,QAAvC,EAAiDf,UAAjD,EAA6DC,WAA7D,EAA2E;AAE1E33D,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,sBAAZ;AAEA,WAAK6kE,UAAL,GAAkB;AACjB1sD,cAAM,EAAEA,MADS;AAEjBy+H,gBAAQ,EAAEA,QAFO;AAGjBf,kBAAU,EAAEA,UAHK;AAIjBC,mBAAW,EAAEA;AAJI,OAAlB;AAOA39H,YAAM,GAAGA,MAAM,IAAI,CAAnB;AACAy+H,cAAQ,GAAGA,QAAQ,KAAKltI,SAAb,GAAyBmK,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa4+H,QAAb,CAAzB,GAAmD,CAA9D;AAEAf,gBAAU,GAAGA,UAAU,KAAKnsI,SAAf,GAA2BmsI,UAA3B,GAAwC,CAArD;AACAC,iBAAW,GAAGA,WAAW,KAAKpsI,SAAhB,GAA4BosI,WAA5B,GAA0CjiI,IAAI,CAACC,EAAL,GAAU,CAAlE,CAjB0E,CAmB1E;;AAEA,UAAMwtE,OAAO,GAAG,EAAhB;AACA,UAAMl2D,QAAQ,GAAG,EAAjB;AACA,UAAM4wD,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAxB0E,CA0B1E;;AAEA,UAAM2I,MAAM,GAAG,IAAIxtB,OAAJ,EAAf;AACA,UAAMzG,EAAE,GAAG,IAAIrJ,OAAJ,EAAX,CA7B0E,CA+B1E;;AAEAl8B,cAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAggF,aAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACAigF,SAAG,CAACjgF,IAAJ,CAAU,GAAV,EAAe,GAAf;;AAEA,WAAM,IAAI4vB,CAAC,GAAG,CAAR,EAAWtwB,KAAC,GAAG,CAArB,EAAwBswB,CAAC,IAAIgrH,QAA7B,EAAuChrH,CAAC,IAAKtwB,KAAC,IAAI,CAAlD,EAAsD;AAErD,YAAMm7I,OAAO,GAAGZ,UAAU,GAAGjqH,CAAC,GAAGgrH,QAAJ,GAAed,WAA5C,CAFqD,CAIrD;;AAEAlxD,cAAM,CAAC3+E,CAAP,GAAWkS,MAAM,GAAGtE,IAAI,CAACujC,GAAL,CAAUq/F,OAAV,CAApB;AACA7xD,cAAM,CAAC5nE,CAAP,GAAW7E,MAAM,GAAGtE,IAAI,CAACwjC,GAAL,CAAUo/F,OAAV,CAApB;AAEArrH,gBAAQ,CAACpvB,IAAT,CAAe4oF,MAAM,CAAC3+E,CAAtB,EAAyB2+E,MAAM,CAAC5nE,CAAhC,EAAmC4nE,MAAM,CAACr8D,CAA1C,EATqD,CAWrD;;AAEAyzD,eAAO,CAAChgF,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAbqD,CAerD;;AAEA20D,UAAE,CAAC1qD,CAAH,GAAO,CAAEmlB,QAAQ,CAAE9vB,KAAF,CAAR,GAAgB6c,MAAhB,GAAyB,CAA3B,IAAiC,CAAxC;AACAw4C,UAAE,CAAC3zC,CAAH,GAAO,CAAEoO,QAAQ,CAAE9vB,KAAC,GAAG,CAAN,CAAR,GAAoB6c,MAApB,GAA6B,CAA/B,IAAqC,CAA5C;AAEA8jE,WAAG,CAACjgF,IAAJ,CAAU20D,EAAE,CAAC1qD,CAAb,EAAgB0qD,EAAE,CAAC3zC,CAAnB;AAEA,OA3DyE,CA6D1E;;;AAEA,WAAM,IAAI1hB,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs7I,QAAtB,EAAgCt7I,KAAC,EAAjC,EAAuC;AAEtCgmF,eAAO,CAACtlF,IAAR,CAAcV,KAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwB,CAAxB;AAEA,OAnEyE,CAqE1E;;;AAEA,WAAKi7B,QAAL,CAAe+qD,OAAf;AACA,WAAK7C,YAAL,CAAmB,UAAnB,EAA+B,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAA/B;AACA,WAAKqzD,YAAL,CAAmB,QAAnB,EAA6B,IAAI9C,sBAAJ,CAA4BK,OAA5B,EAAqC,CAArC,CAA7B;AACA,WAAKyC,YAAL,CAAmB,IAAnB,EAAyB,IAAI9C,sBAAJ,CAA4BM,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAED+8D,wBAAoB,CAACxmI,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAjC;AACAwmI,wBAAoB,CAACxmI,SAArB,CAA+B0M,WAA/B,GAA6C85H,oBAA7C;AAEA,QAAIC,UAAU,GAAG,aAAap8I,MAAM,CAACq8I,MAAP,CAAc;AAC3CC,eAAS,EAAE,IADgC;AAE3CpT,uBAAiB,EAAEA,iBAFwB;AAG3CM,wBAAkB,EAAEA,kBAHuB;AAI3CG,8BAAwB,EAAEA,wBAJiB;AAK3C4B,yBAAmB,EAAEA,mBALsB;AAM3CC,+BAAyB,EAAEA,yBANgB;AAO3CC,wBAAkB,EAAEA,kBAPuB;AAQ3CC,8BAAwB,EAAEA,wBARiB;AAS3CC,yBAAmB,EAAEA,mBATsB;AAU3CC,+BAAyB,EAAEA,yBAVgB;AAW3CC,0BAAoB,EAAEA,oBAXqB;AAY3CC,gCAA0B,EAAEA,0BAZe;AAa3C/B,wBAAkB,EAAEA,kBAbuB;AAc3CC,8BAAwB,EAAEA,wBAdiB;AAe3C+B,kBAAY,EAAEA,YAf6B;AAgB3CM,wBAAkB,EAAEA,kBAhBuB;AAiB3CS,uBAAiB,EAAEA,iBAjBwB;AAkB3CG,6BAAuB,EAAEA,uBAlBkB;AAmB3CQ,mBAAa,EAAEA,aAnB4B;AAoB3CE,yBAAmB,EAAEA,mBApBsB;AAqB3C6K,kBAAY,EAAEA,YArB6B;AAsB3CC,wBAAkB,EAAEA,kBAtBuB;AAuB3CI,oBAAc,EAAEA,cAvB2B;AAwB3CK,0BAAoB,EAAEA,oBAxBqB;AAyB3CK,kBAAY,EAAEA,YAzB6B;AA0B3CG,wBAAkB,EAAEA,kBA1BuB;AA2B3CjiD,mBAAa,EAAEA,aA3B4B;AA4B3CC,yBAAmB,EAAEA,mBA5BsB;AA6B3CoiD,mBAAa,EAAEA,aA7B4B;AA8B3CE,yBAAmB,EAAEA,mBA9BsB;AA+B3CK,mBAAa,EAAEA,aA/B4B;AAgC3CC,yBAAmB,EAAEA,mBAhCsB;AAiC3CzH,qBAAe,EAAEA,eAjC0B;AAkC3CC,2BAAqB,EAAEA,qBAlCoB;AAmC3C8H,mBAAa,EAAEA,aAnC4B;AAoC3CoB,kBAAY,EAAEA,YApC6B;AAqC3CC,wBAAkB,EAAEA,kBArCuB;AAsC3Cf,sBAAgB,EAAEA,gBAtCyB;AAuC3CI,4BAAsB,EAAEA,sBAvCmB;AAwC3CY,oBAAc,EAAEA,cAxC2B;AAyC3CC,0BAAoB,EAAEA,oBAzCqB;AA0C3CvwD,iBAAW,EAAEA,WA1C8B;AA2C3CI,uBAAiB,EAAEA;AA3CwB,KAAd,CAA9B;AA8CA;;;;;;AAMA,aAAS8uB,cAAT,CAAyB9yC,UAAzB,EAAsC;AAErC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,gBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb;AACA,WAAKgD,WAAL,GAAmB,IAAnB;AAEA,WAAKkC,SAAL,CAAgBtR,UAAhB;AAEA;;AAED8yC,kBAAc,CAACnlG,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA3B;AACAmlG,kBAAc,CAACnlG,SAAf,CAAyB0M,WAAzB,GAAuCy4F,cAAvC;AAEAA,kBAAc,CAACnlG,SAAf,CAAyBsjH,gBAAzB,GAA4C,IAA5C;;AAEAne,kBAAc,CAACnlG,SAAf,CAAyBgE,IAAzB,GAAgC,UAAWyhC,MAAX,EAAoB;AAEnD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,aAAO,IAAP;AAEA,KARD;;AAUA,aAASmuH,iBAAT,CAA4Bv0E,UAA5B,EAAyC;AAExCylB,oBAAc,CAAC36E,IAAf,CAAqB,IAArB,EAA2Bk1D,UAA3B;AAEA,WAAK7kE,IAAL,GAAY,mBAAZ;AAEA;;AAEDo5I,qBAAiB,CAAC5mI,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAew5E,cAAc,CAAC93E,SAA9B,CAA9B;AACA4mI,qBAAiB,CAAC5mI,SAAlB,CAA4B0M,WAA5B,GAA0Ck6H,iBAA1C;AAEAA,qBAAiB,CAAC5mI,SAAlB,CAA4BuhG,mBAA5B,GAAkD,IAAlD;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,aAASsD,oBAAT,CAA+BxyC,UAA/B,EAA4C;AAE3C+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK46E,OAAL,GAAe;AAAE,oBAAY;AAAd,OAAf;AAEA,WAAKvqF,IAAL,GAAY,sBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb,CAR2C,CAQP;;AACpC,WAAKsF,SAAL,GAAiB,GAAjB;AACA,WAAKC,SAAL,GAAiB,GAAjB;AAEA,WAAKluE,GAAL,GAAW,IAAX;AAEA,WAAKgvE,QAAL,GAAgB,IAAhB;AACA,WAAKmC,iBAAL,GAAyB,GAAzB;AAEA,WAAKlC,KAAL,GAAa,IAAb;AACA,WAAKC,cAAL,GAAsB,GAAtB;AAEA,WAAKd,QAAL,GAAgB,IAAIzF,KAAJ,CAAW,QAAX,CAAhB;AACA,WAAK0F,iBAAL,GAAyB,GAAzB;AACA,WAAKwB,WAAL,GAAmB,IAAnB;AAEA,WAAKV,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,aAAL,GAAqBp1B,qBAArB;AACA,WAAKq1B,WAAL,GAAmB,IAAIvwB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,WAAKwwB,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKC,YAAL,GAAoB,IAApB;AAEA,WAAKC,YAAL,GAAoB,IAApB;AAEA,WAAKb,QAAL,GAAgB,IAAhB;AAEA,WAAKgB,MAAL,GAAc,IAAd;AACA,WAAKI,eAAL,GAAuB,GAAvB;AAEA,WAAKF,eAAL,GAAuB,IAAvB;AAEA,WAAKQ,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AACA,WAAKC,gBAAL,GAAwB,OAAxB;AACA,WAAKC,iBAAL,GAAyB,OAAzB;AAEA,WAAKG,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKm7B,cAAL,GAAsB,KAAtB;AAEA,WAAKp+B,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDwyC,wBAAoB,CAAC7kG,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAAjC;AACA6kG,wBAAoB,CAAC7kG,SAArB,CAA+B0M,WAA/B,GAA6Cm4F,oBAA7C;AAEAA,wBAAoB,CAAC7kG,SAArB,CAA+BgmG,sBAA/B,GAAwD,IAAxD;;AAEAnB,wBAAoB,CAAC7kG,SAArB,CAA+BgE,IAA/B,GAAsC,UAAWyhC,MAAX,EAAoB;AAEzD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKsyC,OAAL,GAAe;AAAE,oBAAY;AAAd,OAAf;AAEA,WAAKt/D,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AACA,WAAKsrD,SAAL,GAAiBt+B,MAAM,CAACs+B,SAAxB;AACA,WAAKC,SAAL,GAAiBv+B,MAAM,CAACu+B,SAAxB;AAEA,WAAKluE,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAKgvE,QAAL,GAAgBr/B,MAAM,CAACq/B,QAAvB;AACA,WAAKmC,iBAAL,GAAyBxhC,MAAM,CAACwhC,iBAAhC;AAEA,WAAKlC,KAAL,GAAat/B,MAAM,CAACs/B,KAApB;AACA,WAAKC,cAAL,GAAsBv/B,MAAM,CAACu/B,cAA7B;AAEA,WAAKd,QAAL,CAAclgE,IAAd,CAAoByhC,MAAM,CAACy+B,QAA3B;AACA,WAAKyB,WAAL,GAAmBlgC,MAAM,CAACkgC,WAA1B;AACA,WAAKxB,iBAAL,GAAyB1+B,MAAM,CAAC0+B,iBAAhC;AAEA,WAAKc,OAAL,GAAex/B,MAAM,CAACw/B,OAAtB;AACA,WAAKC,SAAL,GAAiBz/B,MAAM,CAACy/B,SAAxB;AAEA,WAAKC,SAAL,GAAiB1/B,MAAM,CAAC0/B,SAAxB;AACA,WAAKC,aAAL,GAAqB3/B,MAAM,CAAC2/B,aAA5B;AACA,WAAKC,WAAL,CAAiBrhE,IAAjB,CAAuByhC,MAAM,CAAC4/B,WAA9B;AAEA,WAAKC,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKC,YAAL,GAAoBhgC,MAAM,CAACggC,YAA3B;AAEA,WAAKC,YAAL,GAAoBjgC,MAAM,CAACigC,YAA3B;AAEA,WAAKb,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKgB,MAAL,GAAcpgC,MAAM,CAACogC,MAArB;AACA,WAAKI,eAAL,GAAuBxgC,MAAM,CAACwgC,eAA9B;AAEA,WAAKF,eAAL,GAAuBtgC,MAAM,CAACsgC,eAA9B;AAEA,WAAKQ,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AACA,WAAKC,gBAAL,GAAwBhhC,MAAM,CAACghC,gBAA/B;AACA,WAAKC,iBAAL,GAAyBjhC,MAAM,CAACihC,iBAAhC;AAEA,WAAKG,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,WAAKm7B,cAAL,GAAsBt8D,MAAM,CAACs8D,cAA7B;AAEA,aAAO,IAAP;AAEA,KAzDD;AA2DA;;;;;;;;;;;;;;;;;;;AAkBA,aAAS+C,oBAAT,CAA+BzyC,UAA/B,EAA4C;AAE3CwyC,0BAAoB,CAAC1nG,IAArB,CAA2B,IAA3B;AAEA,WAAK46E,OAAL,GAAe;AAEd,oBAAY,EAFE;AAGd,oBAAY;AAHE,OAAf;AAOA,WAAKvqF,IAAL,GAAY,sBAAZ;AAEA,WAAK82E,SAAL,GAAiB,GAAjB;AACA,WAAKE,YAAL,GAAoB,IAApB;AACA,WAAKD,kBAAL,GAA0B,GAA1B;AACA,WAAKE,qBAAL,GAA6B,IAA7B;AACA,WAAKE,oBAAL,GAA4B,IAAI7vB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAA5B;AACA,WAAK4vB,kBAAL,GAA0B,IAA1B;AAEA,WAAKoB,YAAL,GAAoB,GAApB,CApB2C,CAoBlB;;AAEzB,WAAK7B,KAAL,GAAa,IAAb,CAtB2C,CAsBxB;;AAEnB,WAAKqnB,YAAL,GAAoB,GAApB;AACA,WAAKC,eAAL,GAAuB,IAAvB;AAEA,WAAK5nB,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDyyC,wBAAoB,CAAC9kG,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAeumG,oBAAoB,CAAC7kG,SAApC,CAAjC;AACA8kG,wBAAoB,CAAC9kG,SAArB,CAA+B0M,WAA/B,GAA6Co4F,oBAA7C;AAEAA,wBAAoB,CAAC9kG,SAArB,CAA+BqiH,sBAA/B,GAAwD,IAAxD;;AAEAvd,wBAAoB,CAAC9kG,SAArB,CAA+BgE,IAA/B,GAAsC,UAAWyhC,MAAX,EAAoB;AAEzDo/D,0BAAoB,CAAC7kG,SAArB,CAA+BgE,IAA/B,CAAoC7G,IAApC,CAA0C,IAA1C,EAAgDsoC,MAAhD;AAEA,WAAKsyC,OAAL,GAAe;AAEd,oBAAY,EAFE;AAGd,oBAAY;AAHE,OAAf;AAOA,WAAKzT,SAAL,GAAiB7+B,MAAM,CAAC6+B,SAAxB;AACA,WAAKE,YAAL,GAAoB/+B,MAAM,CAAC++B,YAA3B;AACA,WAAKD,kBAAL,GAA0B9+B,MAAM,CAAC8+B,kBAAjC;AACA,WAAKE,qBAAL,GAA6Bh/B,MAAM,CAACg/B,qBAApC;AACA,WAAKC,kBAAL,GAA0Bj/B,MAAM,CAACi/B,kBAAjC;AACA,WAAKC,oBAAL,CAA0B3gE,IAA1B,CAAgCyhC,MAAM,CAACk/B,oBAAvC;AAEA,WAAKmB,YAAL,GAAoBrgC,MAAM,CAACqgC,YAA3B;;AAEA,UAAKrgC,MAAM,CAACw+B,KAAZ,EAAoB;AAEnB,aAAKA,KAAL,GAAa,CAAE,KAAKA,KAAL,IAAc,IAAIxF,KAAJ,EAAhB,EAA8Bz6D,IAA9B,CAAoCyhC,MAAM,CAACw+B,KAA3C,CAAb;AAEA,OAJD,MAIO;AAEN,aAAKA,KAAL,GAAa,IAAb;AAEA;;AAED,WAAKqnB,YAAL,GAAoB7lD,MAAM,CAAC6lD,YAA3B;AACA,WAAKC,eAAL,GAAuB9lD,MAAM,CAAC8lD,eAA9B;AAEA,aAAO,IAAP;AAEA,KAnCD;AAqCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,aAASoZ,iBAAT,CAA4BtyC,UAA5B,EAAyC;AAExC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb,CANwC,CAMJ;;AACpC,WAAK2F,QAAL,GAAgB,IAAI3F,KAAJ,CAAW,QAAX,CAAhB;AACA,WAAK4F,SAAL,GAAiB,EAAjB;AAEA,WAAKvuE,GAAL,GAAW,IAAX;AAEA,WAAKgvE,QAAL,GAAgB,IAAhB;AACA,WAAKmC,iBAAL,GAAyB,GAAzB;AAEA,WAAKlC,KAAL,GAAa,IAAb;AACA,WAAKC,cAAL,GAAsB,GAAtB;AAEA,WAAKd,QAAL,GAAgB,IAAIzF,KAAJ,CAAW,QAAX,CAAhB;AACA,WAAK0F,iBAAL,GAAyB,GAAzB;AACA,WAAKwB,WAAL,GAAmB,IAAnB;AAEA,WAAKV,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,aAAL,GAAqBp1B,qBAArB;AACA,WAAKq1B,WAAL,GAAmB,IAAIvwB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,WAAKwwB,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKI,WAAL,GAAmB,IAAnB;AAEA,WAAKf,QAAL,GAAgB,IAAhB;AAEA,WAAKgB,MAAL,GAAc,IAAd;AACA,WAAKG,OAAL,GAAev9B,iBAAf;AACA,WAAKq9B,YAAL,GAAoB,CAApB;AACA,WAAKC,eAAL,GAAuB,IAAvB;AAEA,WAAKQ,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AACA,WAAKC,gBAAL,GAAwB,OAAxB;AACA,WAAKC,iBAAL,GAAyB,OAAzB;AAEA,WAAKG,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKjD,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDsyC,qBAAiB,CAAC3kG,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA9B;AACA2kG,qBAAiB,CAAC3kG,SAAlB,CAA4B0M,WAA5B,GAA0Ci4F,iBAA1C;AAEAA,qBAAiB,CAAC3kG,SAAlB,CAA4BmiH,mBAA5B,GAAkD,IAAlD;;AAEAxd,qBAAiB,CAAC3kG,SAAlB,CAA4BgE,IAA5B,GAAmC,UAAWyhC,MAAX,EAAoB;AAEtD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AACA,WAAK2rD,QAAL,CAAcpgE,IAAd,CAAoByhC,MAAM,CAAC2+B,QAA3B;AACA,WAAKC,SAAL,GAAiB5+B,MAAM,CAAC4+B,SAAxB;AAEA,WAAKvuE,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAKgvE,QAAL,GAAgBr/B,MAAM,CAACq/B,QAAvB;AACA,WAAKmC,iBAAL,GAAyBxhC,MAAM,CAACwhC,iBAAhC;AAEA,WAAKlC,KAAL,GAAat/B,MAAM,CAACs/B,KAApB;AACA,WAAKC,cAAL,GAAsBv/B,MAAM,CAACu/B,cAA7B;AAEA,WAAKd,QAAL,CAAclgE,IAAd,CAAoByhC,MAAM,CAACy+B,QAA3B;AACA,WAAKyB,WAAL,GAAmBlgC,MAAM,CAACkgC,WAA1B;AACA,WAAKxB,iBAAL,GAAyB1+B,MAAM,CAAC0+B,iBAAhC;AAEA,WAAKc,OAAL,GAAex/B,MAAM,CAACw/B,OAAtB;AACA,WAAKC,SAAL,GAAiBz/B,MAAM,CAACy/B,SAAxB;AAEA,WAAKC,SAAL,GAAiB1/B,MAAM,CAAC0/B,SAAxB;AACA,WAAKC,aAAL,GAAqB3/B,MAAM,CAAC2/B,aAA5B;AACA,WAAKC,WAAL,CAAiBrhE,IAAjB,CAAuByhC,MAAM,CAAC4/B,WAA9B;AAEA,WAAKC,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKI,WAAL,GAAmBngC,MAAM,CAACmgC,WAA1B;AAEA,WAAKf,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKgB,MAAL,GAAcpgC,MAAM,CAACogC,MAArB;AACA,WAAKG,OAAL,GAAevgC,MAAM,CAACugC,OAAtB;AACA,WAAKF,YAAL,GAAoBrgC,MAAM,CAACqgC,YAA3B;AACA,WAAKC,eAAL,GAAuBtgC,MAAM,CAACsgC,eAA9B;AAEA,WAAKQ,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AACA,WAAKC,gBAAL,GAAwBhhC,MAAM,CAACghC,gBAA/B;AACA,WAAKC,iBAAL,GAAyBjhC,MAAM,CAACihC,iBAAhC;AAEA,WAAKG,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAnDD;AAqDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,aAASg+B,gBAAT,CAA2BvyC,UAA3B,EAAwC;AAEvC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK46E,OAAL,GAAe;AAAE,gBAAQ;AAAV,OAAf;AAEA,WAAKvqF,IAAL,GAAY,kBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb;AAEA,WAAK3oE,GAAL,GAAW,IAAX;AACA,WAAKowE,WAAL,GAAmB,IAAnB;AAEA,WAAKpB,QAAL,GAAgB,IAAhB;AACA,WAAKmC,iBAAL,GAAyB,GAAzB;AAEA,WAAKlC,KAAL,GAAa,IAAb;AACA,WAAKC,cAAL,GAAsB,GAAtB;AAEA,WAAKd,QAAL,GAAgB,IAAIzF,KAAJ,CAAW,QAAX,CAAhB;AACA,WAAK0F,iBAAL,GAAyB,GAAzB;AACA,WAAKwB,WAAL,GAAmB,IAAnB;AAEA,WAAKV,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,aAAL,GAAqBp1B,qBAArB;AACA,WAAKq1B,WAAL,GAAmB,IAAIvwB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,WAAKwwB,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKX,QAAL,GAAgB,IAAhB;AAEA,WAAK0B,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AACA,WAAKC,gBAAL,GAAwB,OAAxB;AACA,WAAKC,iBAAL,GAAyB,OAAzB;AAEA,WAAKG,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKjD,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDuyC,oBAAgB,CAAC5kG,SAAjB,GAA6B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA7B;AACA4kG,oBAAgB,CAAC5kG,SAAjB,CAA2B0M,WAA3B,GAAyCk4F,gBAAzC;AAEAA,oBAAgB,CAAC5kG,SAAjB,CAA2BiiH,kBAA3B,GAAgD,IAAhD;;AAEArd,oBAAgB,CAAC5kG,SAAjB,CAA2BgE,IAA3B,GAAkC,UAAWyhC,MAAX,EAAoB;AAErD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK3iB,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AACA,WAAKowE,WAAL,GAAmBzgC,MAAM,CAACygC,WAA1B;AAEA,WAAKpB,QAAL,GAAgBr/B,MAAM,CAACq/B,QAAvB;AACA,WAAKmC,iBAAL,GAAyBxhC,MAAM,CAACwhC,iBAAhC;AAEA,WAAKlC,KAAL,GAAat/B,MAAM,CAACs/B,KAApB;AACA,WAAKC,cAAL,GAAsBv/B,MAAM,CAACu/B,cAA7B;AAEA,WAAKd,QAAL,CAAclgE,IAAd,CAAoByhC,MAAM,CAACy+B,QAA3B;AACA,WAAKyB,WAAL,GAAmBlgC,MAAM,CAACkgC,WAA1B;AACA,WAAKxB,iBAAL,GAAyB1+B,MAAM,CAAC0+B,iBAAhC;AAEA,WAAKc,OAAL,GAAex/B,MAAM,CAACw/B,OAAtB;AACA,WAAKC,SAAL,GAAiBz/B,MAAM,CAACy/B,SAAxB;AAEA,WAAKC,SAAL,GAAiB1/B,MAAM,CAAC0/B,SAAxB;AACA,WAAKC,aAAL,GAAqB3/B,MAAM,CAAC2/B,aAA5B;AACA,WAAKC,WAAL,CAAiBrhE,IAAjB,CAAuByhC,MAAM,CAAC4/B,WAA9B;AAEA,WAAKC,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKX,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAK0B,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AACA,WAAKC,gBAAL,GAAwBhhC,MAAM,CAACghC,gBAA/B;AACA,WAAKC,iBAAL,GAAyBjhC,MAAM,CAACihC,iBAAhC;AAEA,WAAKG,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KA3CD;AA6CA;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,aAAS69B,kBAAT,CAA6BpyC,UAA7B,EAA0C;AAEzC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAKy3E,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,aAAL,GAAqBp1B,qBAArB;AACA,WAAKq1B,WAAL,GAAmB,IAAIvwB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,WAAKwwB,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKe,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AAEA,WAAK1T,GAAL,GAAW,KAAX;AAEA,WAAK+T,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKjD,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDoyC,sBAAkB,CAACzkG,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA/B;AACAykG,sBAAkB,CAACzkG,SAAnB,CAA6B0M,WAA7B,GAA2C+3F,kBAA3C;AAEAA,sBAAkB,CAACzkG,SAAnB,CAA6B4iH,oBAA7B,GAAoD,IAApD;;AAEAne,sBAAkB,CAACzkG,SAAnB,CAA6BgE,IAA7B,GAAoC,UAAWyhC,MAAX,EAAoB;AAEvD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKw/B,OAAL,GAAex/B,MAAM,CAACw/B,OAAtB;AACA,WAAKC,SAAL,GAAiBz/B,MAAM,CAACy/B,SAAxB;AAEA,WAAKC,SAAL,GAAiB1/B,MAAM,CAAC0/B,SAAxB;AACA,WAAKC,aAAL,GAAqB3/B,MAAM,CAAC2/B,aAA5B;AACA,WAAKC,WAAL,CAAiBrhE,IAAjB,CAAuByhC,MAAM,CAAC4/B,WAA9B;AAEA,WAAKC,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKe,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AAEA,WAAKK,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAxBD;AA0BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,aAAS89B,mBAAT,CAA8BryC,UAA9B,EAA2C;AAE1C+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,qBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb,CAN0C,CAMN;;AAEpC,WAAK3oE,GAAL,GAAW,IAAX;AAEA,WAAKgvE,QAAL,GAAgB,IAAhB;AACA,WAAKmC,iBAAL,GAAyB,GAAzB;AAEA,WAAKlC,KAAL,GAAa,IAAb;AACA,WAAKC,cAAL,GAAsB,GAAtB;AAEA,WAAKd,QAAL,GAAgB,IAAIzF,KAAJ,CAAW,QAAX,CAAhB;AACA,WAAK0F,iBAAL,GAAyB,GAAzB;AACA,WAAKwB,WAAL,GAAmB,IAAnB;AAEA,WAAKC,WAAL,GAAmB,IAAnB;AAEA,WAAKf,QAAL,GAAgB,IAAhB;AAEA,WAAKgB,MAAL,GAAc,IAAd;AACA,WAAKG,OAAL,GAAev9B,iBAAf;AACA,WAAKq9B,YAAL,GAAoB,CAApB;AACA,WAAKC,eAAL,GAAuB,IAAvB;AAEA,WAAKQ,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,CAA1B;AACA,WAAKC,gBAAL,GAAwB,OAAxB;AACA,WAAKC,iBAAL,GAAyB,OAAzB;AAEA,WAAKG,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKjD,SAAL,CAAgBtR,UAAhB;AAEA;;AAEDqyC,uBAAmB,CAAC1kG,SAApB,GAAgC3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAAhC;AACA0kG,uBAAmB,CAAC1kG,SAApB,CAA8B0M,WAA9B,GAA4Cg4F,mBAA5C;AAEAA,uBAAmB,CAAC1kG,SAApB,CAA8B+hH,qBAA9B,GAAsD,IAAtD;;AAEArd,uBAAmB,CAAC1kG,SAApB,CAA8BgE,IAA9B,GAAqC,UAAWyhC,MAAX,EAAoB;AAExD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAK3iB,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAKgvE,QAAL,GAAgBr/B,MAAM,CAACq/B,QAAvB;AACA,WAAKmC,iBAAL,GAAyBxhC,MAAM,CAACwhC,iBAAhC;AAEA,WAAKlC,KAAL,GAAat/B,MAAM,CAACs/B,KAApB;AACA,WAAKC,cAAL,GAAsBv/B,MAAM,CAACu/B,cAA7B;AAEA,WAAKd,QAAL,CAAclgE,IAAd,CAAoByhC,MAAM,CAACy+B,QAA3B;AACA,WAAKyB,WAAL,GAAmBlgC,MAAM,CAACkgC,WAA1B;AACA,WAAKxB,iBAAL,GAAyB1+B,MAAM,CAAC0+B,iBAAhC;AAEA,WAAKyB,WAAL,GAAmBngC,MAAM,CAACmgC,WAA1B;AAEA,WAAKf,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKgB,MAAL,GAAcpgC,MAAM,CAACogC,MAArB;AACA,WAAKG,OAAL,GAAevgC,MAAM,CAACugC,OAAtB;AACA,WAAKF,YAAL,GAAoBrgC,MAAM,CAACqgC,YAA3B;AACA,WAAKC,eAAL,GAAuBtgC,MAAM,CAACsgC,eAA9B;AAEA,WAAKQ,SAAL,GAAiB9gC,MAAM,CAAC8gC,SAAxB;AACA,WAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AACA,WAAKC,gBAAL,GAAwBhhC,MAAM,CAACghC,gBAA/B;AACA,WAAKC,iBAAL,GAAyBjhC,MAAM,CAACihC,iBAAhC;AAEA,WAAKG,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KAtCD;AAwCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,aAASm+B,kBAAT,CAA6B1yC,UAA7B,EAA0C;AAEzC+O,cAAQ,CAACjkE,IAAT,CAAe,IAAf;AAEA,WAAK46E,OAAL,GAAe;AAAE,kBAAU;AAAZ,OAAf;AAEA,WAAKvqF,IAAL,GAAY,oBAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAW,QAAX,CAAb,CARyC,CAQL;;AAEpC,WAAKmG,MAAL,GAAc,IAAd;AAEA,WAAK9uE,GAAL,GAAW,IAAX;AAEA,WAAKmvE,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,aAAL,GAAqBp1B,qBAArB;AACA,WAAKq1B,WAAL,GAAmB,IAAIvwB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,WAAKwwB,eAAL,GAAuB,IAAvB;AACA,WAAKC,iBAAL,GAAyB,CAAzB;AACA,WAAKC,gBAAL,GAAwB,CAAxB;AAEA,WAAKX,QAAL,GAAgB,IAAhB;AAEA,WAAKgC,QAAL,GAAgB,KAAhB;AACA,WAAKF,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AAEA,WAAKjD,SAAL,CAAgBtR,UAAhB;AAEA;;AAED0yC,sBAAkB,CAAC/kG,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe8iE,QAAQ,CAACphE,SAAxB,CAA/B;AACA+kG,sBAAkB,CAAC/kG,SAAnB,CAA6B0M,WAA7B,GAA2Cq4F,kBAA3C;AAEAA,sBAAkB,CAAC/kG,SAAnB,CAA6BwiH,oBAA7B,GAAoD,IAApD;;AAEAzd,sBAAkB,CAAC/kG,SAAnB,CAA6BgE,IAA7B,GAAoC,UAAWyhC,MAAX,EAAoB;AAEvD27B,cAAQ,CAACphE,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,WAAKsyC,OAAL,GAAe;AAAE,kBAAU;AAAZ,OAAf;AAEA,WAAKt/D,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AAEA,WAAKmsD,MAAL,GAAcn/B,MAAM,CAACm/B,MAArB;AAEA,WAAK9uE,GAAL,GAAW2vC,MAAM,CAAC3vC,GAAlB;AAEA,WAAKmvE,OAAL,GAAex/B,MAAM,CAACw/B,OAAtB;AACA,WAAKC,SAAL,GAAiBz/B,MAAM,CAACy/B,SAAxB;AAEA,WAAKC,SAAL,GAAiB1/B,MAAM,CAAC0/B,SAAxB;AACA,WAAKC,aAAL,GAAqB3/B,MAAM,CAAC2/B,aAA5B;AACA,WAAKC,WAAL,CAAiBrhE,IAAjB,CAAuByhC,MAAM,CAAC4/B,WAA9B;AAEA,WAAKC,eAAL,GAAuB7/B,MAAM,CAAC6/B,eAA9B;AACA,WAAKC,iBAAL,GAAyB9/B,MAAM,CAAC8/B,iBAAhC;AACA,WAAKC,gBAAL,GAAwB//B,MAAM,CAAC+/B,gBAA/B;AAEA,WAAKX,QAAL,GAAgBp/B,MAAM,CAACo/B,QAAvB;AAEA,WAAKgC,QAAL,GAAgBphC,MAAM,CAACohC,QAAvB;AACA,WAAKF,YAAL,GAAoBlhC,MAAM,CAACkhC,YAA3B;AACA,WAAKC,YAAL,GAAoBnhC,MAAM,CAACmhC,YAA3B;AAEA,aAAO,IAAP;AAEA,KA/BD;AAiCA;;;;;;;;;;;;;;AAaA,aAASq+B,kBAAT,CAA6B5yC,UAA7B,EAA0C;AAEzC2yC,uBAAiB,CAAC7nG,IAAlB,CAAwB,IAAxB;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAKoY,KAAL,GAAa,CAAb;AACA,WAAKygE,QAAL,GAAgB,CAAhB;AACA,WAAKC,OAAL,GAAe,CAAf;AAEA,WAAK3C,SAAL,CAAgBtR,UAAhB;AAEA;;AAED4yC,sBAAkB,CAACjlG,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe0mG,iBAAiB,CAAChlG,SAAjC,CAA/B;AACAilG,sBAAkB,CAACjlG,SAAnB,CAA6B0M,WAA7B,GAA2Cu4F,kBAA3C;AAEAA,sBAAkB,CAACjlG,SAAnB,CAA6BgjH,oBAA7B,GAAoD,IAApD;;AAEA/d,sBAAkB,CAACjlG,SAAnB,CAA6BgE,IAA7B,GAAoC,UAAWyhC,MAAX,EAAoB;AAEvDu/D,uBAAiB,CAAChlG,SAAlB,CAA4BgE,IAA5B,CAAiC7G,IAAjC,CAAuC,IAAvC,EAA6CsoC,MAA7C;AAEA,WAAK7/B,KAAL,GAAa6/B,MAAM,CAAC7/B,KAApB;AACA,WAAKygE,QAAL,GAAgB5gC,MAAM,CAAC4gC,QAAvB;AACA,WAAKC,OAAL,GAAe7gC,MAAM,CAAC6gC,OAAtB;AAEA,aAAO,IAAP;AAEA,KAVD;;AAYA,QAAIugE,SAAS,GAAG,aAAax8I,MAAM,CAACq8I,MAAP,CAAc;AAC1CC,eAAS,EAAE,IAD+B;AAE1CxhC,oBAAc,EAAEA,cAF0B;AAG1CC,oBAAc,EAAEA,cAH0B;AAI1CwhC,uBAAiB,EAAEA,iBAJuB;AAK1C9uD,oBAAc,EAAEA,cAL0B;AAM1CotB,oBAAc,EAAEA,cAN0B;AAO1CJ,0BAAoB,EAAEA,oBAPoB;AAQ1CD,0BAAoB,EAAEA,oBARoB;AAS1CF,uBAAiB,EAAEA,iBATuB;AAU1CC,sBAAgB,EAAEA,gBAVwB;AAW1CH,wBAAkB,EAAEA,kBAXsB;AAY1CC,yBAAmB,EAAEA,mBAZqB;AAa1CH,uBAAiB,EAAEA,iBAbuB;AAc1CC,0BAAoB,EAAEA,oBAdoB;AAe1Cx9B,uBAAiB,EAAEA,iBAfuB;AAgB1C+9B,wBAAkB,EAAEA,kBAhBsB;AAiB1CE,wBAAkB,EAAEA,kBAjBsB;AAkB1CD,uBAAiB,EAAEA,iBAlBuB;AAmB1C5jC,cAAQ,EAAEA;AAnBgC,KAAd,CAA7B;AAsBA,QAAM0lE,cAAc,GAAG;AAEtB;AACAC,gBAAU,EAAE,oBAAWrhH,KAAX,EAAkBnD,IAAlB,EAAwBqK,EAAxB,EAA6B;AAExC,YAAKk6G,cAAc,CAACE,YAAf,CAA6BthH,KAA7B,CAAL,EAA4C;AAE3C;AACA;AACA,iBAAO,IAAIA,KAAK,CAAChZ,WAAV,CAAuBgZ,KAAK,CAACrB,QAAN,CAAgB9B,IAAhB,EAAsBqK,EAAE,KAAK11B,SAAP,GAAmB01B,EAAnB,GAAwBlH,KAAK,CAACv9B,MAApD,CAAvB,CAAP;AAEA;;AAED,eAAOu9B,KAAK,CAACn+B,KAAN,CAAag7B,IAAb,EAAmBqK,EAAnB,CAAP;AAEA,OAfqB;AAiBtB;AACAq6G,kBAAY,EAAE,sBAAWvhH,KAAX,EAAkBl4B,IAAlB,EAAwB05I,UAAxB,EAAqC;AAElD,YAAK,CAAExhH,KAAF,IAAW;AACf,SAAEwhH,UAAF,IAAgBxhH,KAAK,CAAChZ,WAAN,KAAsBlf,IADvC,EAC8C,OAAOk4B,KAAP;;AAE9C,YAAK,OAAOl4B,IAAI,CAACi0F,iBAAZ,KAAkC,QAAvC,EAAkD;AAEjD,iBAAO,IAAIj0F,IAAJ,CAAUk4B,KAAV,CAAP,CAFiD,CAEvB;AAE1B;;AAED,eAAOnL,KAAK,CAACva,SAAN,CAAgBzY,KAAhB,CAAsB4V,IAAtB,CAA4BuoB,KAA5B,CAAP,CAXkD,CAWN;AAE5C,OA/BqB;AAiCtBshH,kBAAY,EAAE,sBAAWxvI,MAAX,EAAoB;AAEjC,eAAOquB,WAAW,CAACshH,MAAZ,CAAoB3vI,MAApB,KACN,EAAIA,MAAM,YAAY4vI,QAAtB,CADD;AAGA,OAtCqB;AAwCtB;AACAC,sBAAgB,EAAE,0BAAWC,KAAX,EAAmB;AAEpC,iBAASC,WAAT,CAAsBz+I,CAAtB,EAAyBM,CAAzB,EAA6B;AAE5B,iBAAOk+I,KAAK,CAAEx+I,CAAF,CAAL,GAAaw+I,KAAK,CAAEl+I,CAAF,CAAzB;AAEA;;AAED,YAAMqwB,CAAC,GAAG6tH,KAAK,CAACn/I,MAAhB;AACA,YAAMqM,MAAM,GAAG,IAAI+lB,KAAJ,CAAWd,CAAX,CAAf;;AACA,aAAM,IAAI3wB,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK2wB,CAAvB,EAA0B,EAAG3wB,KAA7B;AAAiC0L,gBAAM,CAAE1L,KAAF,CAAN,GAAcA,KAAd;AAAjC;;AAEA0L,cAAM,CAACpM,IAAP,CAAam/I,WAAb;AAEA,eAAO/yI,MAAP;AAEA,OAzDqB;AA2DtB;AACAgzI,iBAAW,EAAE,qBAAW/0E,MAAX,EAAmBk9B,MAAnB,EAA2Bt7C,KAA3B,EAAmC;AAE/C,YAAMozF,OAAO,GAAGh1E,MAAM,CAACtqE,MAAvB;AACA,YAAMqM,MAAM,GAAG,IAAIi+D,MAAM,CAAC/lD,WAAX,CAAwB+6H,OAAxB,CAAf;;AAEA,aAAM,IAAI3+I,KAAC,GAAG,CAAR,EAAWw4D,SAAS,GAAG,CAA7B,EAAgCA,SAAS,KAAKmmF,OAA9C,EAAuD,EAAG3+I,KAA1D,EAA8D;AAE7D,cAAM4+I,SAAS,GAAGrzF,KAAK,CAAEvrD,KAAF,CAAL,GAAa6mG,MAA/B;;AAEA,eAAM,IAAIvmG,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKumG,MAAvB,EAA+B,EAAGvmG,CAAlC,EAAsC;AAErCoL,kBAAM,CAAE8sD,SAAS,EAAX,CAAN,GAAyBmR,MAAM,CAAEi1E,SAAS,GAAGt+I,CAAd,CAA/B;AAEA;AAED;;AAED,eAAOoL,MAAP;AAEA,OA/EqB;AAiFtB;AACAmzI,iBAAW,EAAE,qBAAWC,QAAX,EAAqBN,KAArB,EAA4B70E,MAA5B,EAAoCo1E,iBAApC,EAAwD;AAEpE,YAAI/+I,CAAC,GAAG,CAAR;AAAA,YAAW4pE,GAAG,GAAGk1E,QAAQ,CAAE,CAAF,CAAzB;;AAEA,eAAQl1E,GAAG,KAAKx7D,SAAR,IAAqBw7D,GAAG,CAAEm1E,iBAAF,CAAH,KAA6B3wI,SAA1D,EAAsE;AAErEw7D,aAAG,GAAGk1E,QAAQ,CAAE9+I,CAAC,EAAH,CAAd;AAEA;;AAED,YAAK4pE,GAAG,KAAKx7D,SAAb,EAAyB,OAV2C,CAUnC;;AAEjC,YAAItE,KAAK,GAAG8/D,GAAG,CAAEm1E,iBAAF,CAAf;AACA,YAAKj1I,KAAK,KAAKsE,SAAf,EAA2B,OAbyC,CAajC;;AAEnC,YAAKqjB,KAAK,CAAC0jC,OAAN,CAAerrD,KAAf,CAAL,EAA8B;AAE7B,aAAG;AAEFA,iBAAK,GAAG8/D,GAAG,CAAEm1E,iBAAF,CAAX;;AAEA,gBAAKj1I,KAAK,KAAKsE,SAAf,EAA2B;AAE1BowI,mBAAK,CAAC99I,IAAN,CAAYkpE,GAAG,CAACr8B,IAAhB;AACAo8B,oBAAM,CAACjpE,IAAP,CAAY2U,KAAZ,CAAmBs0D,MAAnB,EAA2B7/D,KAA3B,EAH0B,CAGU;AAEpC;;AAED8/D,eAAG,GAAGk1E,QAAQ,CAAE9+I,CAAC,EAAH,CAAd;AAEA,WAbD,QAaU4pE,GAAG,KAAKx7D,SAblB;AAeA,SAjBD,MAiBO,IAAKtE,KAAK,CAACwkD,OAAN,KAAkBlgD,SAAvB,EAAmC;AAEzC;AAEA,aAAG;AAEFtE,iBAAK,GAAG8/D,GAAG,CAAEm1E,iBAAF,CAAX;;AAEA,gBAAKj1I,KAAK,KAAKsE,SAAf,EAA2B;AAE1BowI,mBAAK,CAAC99I,IAAN,CAAYkpE,GAAG,CAACr8B,IAAhB;AACAzjC,mBAAK,CAACwkD,OAAN,CAAeqb,MAAf,EAAuBA,MAAM,CAACtqE,MAA9B;AAEA;;AAEDuqE,eAAG,GAAGk1E,QAAQ,CAAE9+I,CAAC,EAAH,CAAd;AAEA,WAbD,QAaU4pE,GAAG,KAAKx7D,SAblB;AAeA,SAnBM,MAmBA;AAEN;AAEA,aAAG;AAEFtE,iBAAK,GAAG8/D,GAAG,CAAEm1E,iBAAF,CAAX;;AAEA,gBAAKj1I,KAAK,KAAKsE,SAAf,EAA2B;AAE1BowI,mBAAK,CAAC99I,IAAN,CAAYkpE,GAAG,CAACr8B,IAAhB;AACAo8B,oBAAM,CAACjpE,IAAP,CAAaoJ,KAAb;AAEA;;AAED8/D,eAAG,GAAGk1E,QAAQ,CAAE9+I,CAAC,EAAH,CAAd;AAEA,WAbD,QAaU4pE,GAAG,KAAKx7D,SAblB;AAeA;AAED,OA1JqB;AA4JtB4wI,aAAO,EAAE,iBAAWC,UAAX,EAAuBlgJ,IAAvB,EAA6BmgJ,UAA7B,EAAyCC,QAAzC,EAAmDC,GAAnD,EAAyD;AAEjEA,WAAG,GAAGA,GAAG,IAAI,EAAb;AAEA,YAAMC,IAAI,GAAGJ,UAAU,CAAC3kI,KAAX,EAAb;AAEA+kI,YAAI,CAACtgJ,IAAL,GAAYA,IAAZ;AAEA,YAAMugJ,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAIt/I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGq/I,IAAI,CAACC,MAAL,CAAYjgJ,MAAjC,EAAyC,EAAGW,KAA5C,EAAgD;AAE/C,cAAMu/I,KAAK,GAAGF,IAAI,CAACC,MAAL,CAAat/I,KAAb,CAAd;AACA,cAAMw/I,SAAS,GAAGD,KAAK,CAACE,YAAN,EAAlB;AAEA,cAAMjB,KAAK,GAAG,EAAd;AACA,cAAM70E,MAAM,GAAG,EAAf;;AAEA,eAAM,IAAIrpE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGi/I,KAAK,CAACf,KAAN,CAAYn/I,MAAjC,EAAyC,EAAGiB,CAA5C,EAAgD;AAE/C,gBAAMs3F,KAAK,GAAG2nD,KAAK,CAACf,KAAN,CAAal+I,CAAb,IAAmB8+I,GAAjC;AAEA,gBAAKxnD,KAAK,GAAGsnD,UAAR,IAAsBtnD,KAAK,IAAIunD,QAApC,EAA+C;AAE/CX,iBAAK,CAAC99I,IAAN,CAAY6+I,KAAK,CAACf,KAAN,CAAal+I,CAAb,CAAZ;;AAEA,iBAAM,IAAIE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGg/I,SAArB,EAAgC,EAAGh/I,CAAnC,EAAuC;AAEtCmpE,oBAAM,CAACjpE,IAAP,CAAa6+I,KAAK,CAAC51E,MAAN,CAAcrpE,CAAC,GAAGk/I,SAAJ,GAAgBh/I,CAA9B,CAAb;AAEA;AAED;;AAED,cAAKg+I,KAAK,CAACn/I,MAAN,KAAiB,CAAtB,EAA0B;AAE1BkgJ,eAAK,CAACf,KAAN,GAAcR,cAAc,CAACG,YAAf,CAA6BK,KAA7B,EAAoCe,KAAK,CAACf,KAAN,CAAY56H,WAAhD,CAAd;AACA27H,eAAK,CAAC51E,MAAN,GAAeq0E,cAAc,CAACG,YAAf,CAA6Bx0E,MAA7B,EAAqC41E,KAAK,CAAC51E,MAAN,CAAa/lD,WAAlD,CAAf;AAEA07H,gBAAM,CAAC5+I,IAAP,CAAa6+I,KAAb;AAEA;;AAEDF,YAAI,CAACC,MAAL,GAAcA,MAAd,CA3CiE,CA6CjE;;AAEA,YAAII,YAAY,GAAGxnI,QAAnB;;AAEA,aAAM,IAAIlY,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGq/I,IAAI,CAACC,MAAL,CAAYjgJ,MAAjC,EAAyC,EAAGW,KAA5C,EAAgD;AAE/C,cAAK0/I,YAAY,GAAGL,IAAI,CAACC,MAAL,CAAat/I,KAAb,EAAiBw+I,KAAjB,CAAwB,CAAxB,CAApB,EAAkD;AAEjDkB,wBAAY,GAAGL,IAAI,CAACC,MAAL,CAAat/I,KAAb,EAAiBw+I,KAAjB,CAAwB,CAAxB,CAAf;AAEA;AAED,SAzDgE,CA2DjE;;;AAEA,aAAM,IAAIx+I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGq/I,IAAI,CAACC,MAAL,CAAYjgJ,MAAjC,EAAyC,EAAGW,KAA5C,EAAgD;AAE/Cq/I,cAAI,CAACC,MAAL,CAAat/I,KAAb,EAAiB62B,KAAjB,CAAwB,CAAE,CAAF,GAAM6oH,YAA9B;AAEA;;AAEDL,YAAI,CAACM,aAAL;AAEA,eAAON,IAAP;AAEA,OAnOqB;AAqOtBO,sBAAgB,EAAE,0BAAWC,UAAX,EAAuBC,cAAvB,EAAuCC,aAAvC,EAAsDX,GAAtD,EAA4D;AAE7E,YAAKU,cAAc,KAAK1xI,SAAxB,EAAoC0xI,cAAc,GAAG,CAAjB;AACpC,YAAKC,aAAa,KAAK3xI,SAAvB,EAAmC2xI,aAAa,GAAGF,UAAhB;AACnC,YAAKT,GAAG,KAAKhxI,SAAR,IAAqBgxI,GAAG,IAAI,CAAjC,EAAqCA,GAAG,GAAG,EAAN;AAErC,YAAMY,SAAS,GAAGH,UAAU,CAACP,MAAX,CAAkBjgJ,MAApC;AACA,YAAM4gJ,aAAa,GAAGH,cAAc,GAAGV,GAAvC,CAP6E,CAS7E;;AAT6E,qCAUnEp/I,KAVmE;AAY5E,cAAMkgJ,cAAc,GAAGH,aAAa,CAACT,MAAd,CAAsBt/I,KAAtB,CAAvB;AACA,cAAMmgJ,kBAAkB,GAAGD,cAAc,CAACE,aAA1C,CAb4E,CAe5E;;AACA,cAAKD,kBAAkB,KAAK,MAAvB,IAAiCA,kBAAkB,KAAK,QAA7D,EAAwE,kBAhBI,CAkB5E;;AACA,cAAME,WAAW,GAAGR,UAAU,CAACP,MAAX,CAAkBgB,IAAlB,CAAwB,UAAWf,KAAX,EAAmB;AAE9D,mBAAOA,KAAK,CAACxgJ,IAAN,KAAemhJ,cAAc,CAACnhJ,IAA9B,IACJwgJ,KAAK,CAACa,aAAN,KAAwBD,kBAD3B;AAGA,WALmB,CAApB;AAOA,cAAKE,WAAW,KAAKjyI,SAArB,EAAiC;AAEjC,cAAMoxI,SAAS,GAAGU,cAAc,CAACT,YAAf,EAAlB;AACA,cAAMrsC,SAAS,GAAG8sC,cAAc,CAAC1B,KAAf,CAAqBn/I,MAArB,GAA8B,CAAhD;AACA,cAAIkhJ,cAAc,SAAlB,CA9B4E,CAgC5E;;AACA,cAAKN,aAAa,IAAIC,cAAc,CAAC1B,KAAf,CAAsB,CAAtB,CAAtB,EAAkD;AAEjD;AACA+B,0BAAc,GAAGvC,cAAc,CAACC,UAAf,CAA2BiC,cAAc,CAACv2E,MAA1C,EAAkD,CAAlD,EAAqDu2E,cAAc,CAACV,SAApE,CAAjB;AAEA,WALD,MAKO,IAAKS,aAAa,IAAIC,cAAc,CAAC1B,KAAf,CAAsBprC,SAAtB,CAAtB,EAA0D;AAEhE;AACA,gBAAMj1G,UAAU,GAAGi1G,SAAS,GAAGosC,SAA/B;AACAe,0BAAc,GAAGvC,cAAc,CAACC,UAAf,CAA2BiC,cAAc,CAACv2E,MAA1C,EAAkDxrE,UAAlD,CAAjB;AAEA,WANM,MAMA;AAEN;AACA,gBAAMqiJ,WAAW,GAAGN,cAAc,CAACO,iBAAf,EAApB;AACAD,uBAAW,CAACE,QAAZ,CAAsBT,aAAtB;AACAM,0BAAc,GAAGC,WAAW,CAACG,YAA7B;AAEA,WAnD2E,CAqD5E;;;AACA,cAAKR,kBAAkB,KAAK,YAA5B,EAA2C;AAE1C,gBAAMS,aAAa,GAAG,IAAI/oF,UAAJ,CACrB0oF,cAAc,CAAE,CAAF,CADO,EAErBA,cAAc,CAAE,CAAF,CAFO,EAGrBA,cAAc,CAAE,CAAF,CAHO,EAIrBA,cAAc,CAAE,CAAF,CAJO,EAKpB5yF,SALoB,GAKRgN,SALQ,EAAtB;AAMAimF,yBAAa,CAACtyF,OAAd,CAAuBiyF,cAAvB;AAEA,WAhE2E,CAkE5E;;;AAEA,cAAMM,QAAQ,GAAGR,WAAW,CAAC7B,KAAZ,CAAkBn/I,MAAnC;;AACA,eAAM,IAAIiB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGugJ,QAArB,EAA+B,EAAGvgJ,CAAlC,EAAsC;AAErC,gBAAMwgJ,UAAU,GAAGxgJ,CAAC,GAAGk/I,SAAvB;;AAEA,gBAAKW,kBAAkB,KAAK,YAA5B,EAA2C;AAE1C;AACAtoF,wBAAU,CAAC2B,uBAAX,CACC6mF,WAAW,CAAC12E,MADb,EAECm3E,UAFD,EAGCP,cAHD,EAIC,CAJD,EAKCF,WAAW,CAAC12E,MALb,EAMCm3E,UAND;AASA,aAZD,MAYO;AAEN;AACA,mBAAM,IAAItgJ,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGg/I,SAArB,EAAgC,EAAGh/I,CAAnC,EAAuC;AAEtC6/I,2BAAW,CAAC12E,MAAZ,CAAoBm3E,UAAU,GAAGtgJ,CAAjC,KAAwC+/I,cAAc,CAAE//I,CAAF,CAAtD;AAEA;AAED;AAED;AAhG2E;;AAU7E,aAAM,IAAIR,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGggJ,SAArB,EAAgC,EAAGhgJ,KAAnC,EAAuC;AAAA,4BAA7BA,KAA6B;;AAAA,mCAgBL;AAwEjC;;AAED6/I,kBAAU,CAACkB,SAAX,GAAuB36F,0BAAvB;AAEA,eAAOy5F,UAAP;AAEA;AA7UqB,KAAvB;AAiVA;;;;;;;;;;;;;;;;;;;;;AAqBA,aAASmB,WAAT,CAAsBC,kBAAtB,EAA0CC,YAA1C,EAAwDC,UAAxD,EAAoER,YAApE,EAAmF;AAElF,WAAKM,kBAAL,GAA0BA,kBAA1B;AACA,WAAKG,YAAL,GAAoB,CAApB;AAEA,WAAKT,YAAL,GAAoBA,YAAY,KAAKvyI,SAAjB,GACnBuyI,YADmB,GACJ,IAAIO,YAAY,CAACt9H,WAAjB,CAA8Bu9H,UAA9B,CADhB;AAEA,WAAKD,YAAL,GAAoBA,YAApB;AACA,WAAK1B,SAAL,GAAiB2B,UAAjB;AAEA;;AAED5/I,UAAM,CAACiiC,MAAP,CAAew9G,WAAW,CAAC9pI,SAA3B,EAAsC;AAErCwpI,cAAQ,EAAE,kBAAW36H,CAAX,EAAe;AAExB,YAAIs7H,EAAE,GAAG,KAAKJ,kBAAd;AAAA,YACCpsE,EAAE,GAAG,KAAKusE,YADX;AAAA,YAGC5wE,EAAE,GAAG6wE,EAAE,CAAExsE,EAAF,CAHR;AAAA,YAICtE,EAAE,GAAG8wE,EAAE,CAAExsE,EAAE,GAAG,CAAP,CAJR;;AAMAysE,yBAAiB,EAAE;AAElBC,cAAI,EAAE;AAEL,gBAAI5gI,KAAJ;;AAEA6gI,uBAAW,EAAE;AAEZ;AACA;AACA;AACA;AACAC,0BAAY,EAAE,IAAK,EAAI17H,CAAC,GAAGyqD,EAAR,CAAL,EAAoB;AAEjC,qBAAM,IAAIkxE,QAAQ,GAAG7sE,EAAE,GAAG,CAA1B,IAAiC;AAEhC,sBAAKrE,EAAE,KAAKpiE,SAAZ,EAAwB;AAEvB,wBAAK2X,CAAC,GAAGwqD,EAAT,EAAc,MAAMkxE,YAAN,CAFS,CAIvB;;AAEA5sE,sBAAE,GAAGwsE,EAAE,CAAChiJ,MAAR;AACA,yBAAK+hJ,YAAL,GAAoBvsE,EAApB;AACA,2BAAO,KAAK8sE,SAAL,CAAgB9sE,EAAE,GAAG,CAArB,EAAwB9uD,CAAxB,EAA2BwqD,EAA3B,CAAP;AAEA;;AAED,sBAAKsE,EAAE,KAAK6sE,QAAZ,EAAuB,MAdS,CAcF;;AAE9BnxE,oBAAE,GAAGC,EAAL;AACAA,oBAAE,GAAG6wE,EAAE,CAAE,EAAGxsE,EAAL,CAAP;;AAEA,sBAAK9uD,CAAC,GAAGyqD,EAAT,EAAc;AAEb;AACA,0BAAM+wE,IAAN;AAEA;AAED,iBA5BgC,CA8BjC;;;AACA5gI,qBAAK,GAAG0gI,EAAE,CAAChiJ,MAAX;AACA,sBAAMmiJ,WAAN;AAEA,eAxCW,CA0CZ;AACA;;;AACA,kBAAK,EAAIz7H,CAAC,IAAIwqD,EAAT,CAAL,EAAqB;AAEpB;AAEA,oBAAMqxE,QAAQ,GAAGP,EAAE,CAAE,CAAF,CAAnB;;AAEA,oBAAKt7H,CAAC,GAAG67H,QAAT,EAAoB;AAEnB/sE,oBAAE,GAAG,CAAL,CAFmB,CAEX;;AACRtE,oBAAE,GAAGqxE,QAAL;AAEA,iBAXmB,CAapB;;;AAEA,qBAAM,IAAIF,SAAQ,GAAG7sE,EAAE,GAAG,CAA1B,IAAiC;AAEhC,sBAAKtE,EAAE,KAAKniE,SAAZ,EAAwB;AAEvB;AAEA,yBAAKgzI,YAAL,GAAoB,CAApB;AACA,2BAAO,KAAKS,YAAL,CAAmB,CAAnB,EAAsB97H,CAAtB,EAAyByqD,EAAzB,CAAP;AAEA;;AAED,sBAAKqE,EAAE,KAAK6sE,SAAZ,EAAuB,MAXS,CAWF;;AAE9BlxE,oBAAE,GAAGD,EAAL;AACAA,oBAAE,GAAG8wE,EAAE,CAAE,EAAGxsE,EAAH,GAAQ,CAAV,CAAP;;AAEA,sBAAK9uD,CAAC,IAAIwqD,EAAV,EAAe;AAEd;AACA,0BAAMgxE,IAAN;AAEA;AAED,iBAtCmB,CAwCpB;;;AACA5gI,qBAAK,GAAGk0D,EAAR;AACAA,kBAAE,GAAG,CAAL;AACA,sBAAM2sE,WAAN;AAEA,eAzFW,CA2FZ;;;AAEA,oBAAMF,iBAAN;AAEA,aAnGI,CAmGH;AAEF;;;AAEA,mBAAQzsE,EAAE,GAAGl0D,KAAb,EAAqB;AAEpB,kBAAMmhI,GAAG,GAAKjtE,EAAE,GAAGl0D,KAAP,KAAmB,CAA/B;;AAEA,kBAAKoF,CAAC,GAAGs7H,EAAE,CAAES,GAAF,CAAX,EAAqB;AAEpBnhI,qBAAK,GAAGmhI,GAAR;AAEA,eAJD,MAIO;AAENjtE,kBAAE,GAAGitE,GAAG,GAAG,CAAX;AAEA;AAED;;AAEDtxE,cAAE,GAAG6wE,EAAE,CAAExsE,EAAF,CAAP;AACAtE,cAAE,GAAG8wE,EAAE,CAAExsE,EAAE,GAAG,CAAP,CAAP,CAxHK,CA0HL;;AAEA,gBAAKtE,EAAE,KAAKniE,SAAZ,EAAwB;AAEvB,mBAAKgzI,YAAL,GAAoB,CAApB;AACA,qBAAO,KAAKS,YAAL,CAAmB,CAAnB,EAAsB97H,CAAtB,EAAyByqD,EAAzB,CAAP;AAEA;;AAED,gBAAKA,EAAE,KAAKpiE,SAAZ,EAAwB;AAEvBymE,gBAAE,GAAGwsE,EAAE,CAAChiJ,MAAR;AACA,mBAAK+hJ,YAAL,GAAoBvsE,EAApB;AACA,qBAAO,KAAK8sE,SAAL,CAAgB9sE,EAAE,GAAG,CAArB,EAAwBtE,EAAxB,EAA4BxqD,CAA5B,CAAP;AAEA;AAED,WA7IiB,CA6IhB;;;AAEF,eAAKq7H,YAAL,GAAoBvsE,EAApB;AAEA,eAAKktE,gBAAL,CAAuBltE,EAAvB,EAA2BtE,EAA3B,EAA+BC,EAA/B;AAEA,SA3JuB,CA2JtB;;;AAEF,eAAO,KAAKwxE,YAAL,CAAmBntE,EAAnB,EAAuBtE,EAAvB,EAA2BxqD,CAA3B,EAA8ByqD,EAA9B,CAAP;AAEA,OAjKoC;AAmKrCyxE,cAAQ,EAAE,IAnK2B;AAmKrB;AAChB;AAEA;AAEAC,sBAAgB,EAAE,EAxKmB;AA0KrCC,kBAAY,EAAE,wBAAY;AAEzB,eAAO,KAAKF,QAAL,IAAiB,KAAKC,gBAA7B;AAEA,OA9KoC;AAgLrCE,sBAAgB,EAAE,0BAAWt7H,KAAX,EAAmB;AAEpC;AAEA,YAAMpb,MAAM,GAAG,KAAKi1I,YAApB;AAAA,YACCh3E,MAAM,GAAG,KAAKu3E,YADf;AAAA,YAECr6C,MAAM,GAAG,KAAK24C,SAFf;AAAA,YAGC9jI,MAAM,GAAGoL,KAAK,GAAG+/E,MAHlB;;AAKA,aAAM,IAAI7mG,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC0L,gBAAM,CAAE1L,KAAF,CAAN,GAAc2pE,MAAM,CAAEjuD,MAAM,GAAG1b,KAAX,CAApB;AAEA;;AAED,eAAO0L,MAAP;AAEA,OAjMoC;AAmMrC;AAEAs2I,kBAAY,EAAE;AAAW;AAAsB;AAE9C,cAAM,IAAIzkJ,KAAJ,CAAW,yBAAX,CAAN,CAF8C,CAG9C;AAEA,OA1MoC;AA4MrCwkJ,sBAAgB,EAAE;AAAW;AAAmB,OAE/C;AAEA;AAhNoC,KAAtC,E,CAoNA;;AACAxgJ,UAAM,CAACiiC,MAAP,CAAew9G,WAAW,CAAC9pI,SAA3B,EAAsC;AAErC;AACA2qI,kBAAY,EAAEb,WAAW,CAAC9pI,SAAZ,CAAsBkrI,gBAHC;AAKrC;AACAT,eAAS,EAAEX,WAAW,CAAC9pI,SAAZ,CAAsBkrI;AANI,KAAtC;AAUA;;;;;;;;AAQA,aAASC,gBAAT,CAA2BpB,kBAA3B,EAA+CC,YAA/C,EAA6DC,UAA7D,EAAyER,YAAzE,EAAwF;AAEvFK,iBAAW,CAAC3sI,IAAZ,CAAkB,IAAlB,EAAwB4sI,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA,WAAK2B,WAAL,GAAmB,CAAE,CAArB;AACA,WAAKC,WAAL,GAAmB,CAAE,CAArB;AACA,WAAKC,WAAL,GAAmB,CAAE,CAArB;AACA,WAAKC,WAAL,GAAmB,CAAE,CAArB;AAEA;;AAEDJ,oBAAgB,CAACnrI,SAAjB,GAA6B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAewrI,WAAW,CAAC9pI,SAA3B,CAAf,EAAuD;AAEnF0M,iBAAW,EAAEy+H,gBAFsE;AAInFH,sBAAgB,EAAE;AAEjBQ,mBAAW,EAAE18F,mBAFI;AAGjB28F,iBAAS,EAAE38F;AAHM,OAJiE;AAWnF+7F,sBAAgB,EAAE,0BAAWltE,EAAX,EAAetE,EAAf,EAAmBC,EAAnB,EAAwB;AAEzC,YAAI6wE,EAAE,GAAG,KAAKJ,kBAAd;AAAA,YACC2B,KAAK,GAAG/tE,EAAE,GAAG,CADd;AAAA,YAECguE,KAAK,GAAGhuE,EAAE,GAAG,CAFd;AAAA,YAICiuE,KAAK,GAAGzB,EAAE,CAAEuB,KAAF,CAJX;AAAA,YAKCG,KAAK,GAAG1B,EAAE,CAAEwB,KAAF,CALX;;AAOA,YAAKC,KAAK,KAAK10I,SAAf,EAA2B;AAE1B,kBAAS,KAAK+zI,YAAL,GAAoBO,WAA7B;AAEC,iBAAKz8F,eAAL;AAEC;AACA28F,mBAAK,GAAG/tE,EAAR;AACAiuE,mBAAK,GAAG,IAAIvyE,EAAJ,GAASC,EAAjB;AAEA;;AAED,iBAAKtqB,gBAAL;AAEC;AACA08F,mBAAK,GAAGvB,EAAE,CAAChiJ,MAAH,GAAY,CAApB;AACAyjJ,mBAAK,GAAGvyE,EAAE,GAAG8wE,EAAE,CAAEuB,KAAF,CAAP,GAAmBvB,EAAE,CAAEuB,KAAK,GAAG,CAAV,CAA7B;AAEA;;AAED;AAAS;AAER;AACAA,mBAAK,GAAG/tE,EAAR;AACAiuE,mBAAK,GAAGtyE,EAAR;AAtBF;AA0BA;;AAED,YAAKuyE,KAAK,KAAK30I,SAAf,EAA2B;AAE1B,kBAAS,KAAK+zI,YAAL,GAAoBQ,SAA7B;AAEC,iBAAK18F,eAAL;AAEC;AACA48F,mBAAK,GAAGhuE,EAAR;AACAkuE,mBAAK,GAAG,IAAIvyE,EAAJ,GAASD,EAAjB;AAEA;;AAED,iBAAKrqB,gBAAL;AAEC;AACA28F,mBAAK,GAAG,CAAR;AACAE,mBAAK,GAAGvyE,EAAE,GAAG6wE,EAAE,CAAE,CAAF,CAAP,GAAeA,EAAE,CAAE,CAAF,CAAzB;AAEA;;AAED;AAAS;AAER;AACAwB,mBAAK,GAAGhuE,EAAE,GAAG,CAAb;AACAkuE,mBAAK,GAAGxyE,EAAR;AAtBF;AA0BA;;AAED,YAAMyyE,MAAM,GAAG,CAAExyE,EAAE,GAAGD,EAAP,IAAc,GAA7B;AAAA,YACCs2B,MAAM,GAAG,KAAK24C,SADf;AAGA,aAAK8C,WAAL,GAAmBU,MAAM,IAAKzyE,EAAE,GAAGuyE,KAAV,CAAzB;AACA,aAAKN,WAAL,GAAmBQ,MAAM,IAAKD,KAAK,GAAGvyE,EAAb,CAAzB;AACA,aAAK+xE,WAAL,GAAmBK,KAAK,GAAG/7C,MAA3B;AACA,aAAK47C,WAAL,GAAmBI,KAAK,GAAGh8C,MAA3B;AAEA,OAxFkF;AA0FnFm7C,kBAAY,EAAE,sBAAWntE,EAAX,EAAetE,EAAf,EAAmBxqD,CAAnB,EAAsByqD,EAAtB,EAA2B;AAExC,YAAM9kE,MAAM,GAAG,KAAKi1I,YAApB;AAAA,YACCh3E,MAAM,GAAG,KAAKu3E,YADf;AAAA,YAECr6C,MAAM,GAAG,KAAK24C,SAFf;AAAA,YAICxM,EAAE,GAAGn+D,EAAE,GAAGgyB,MAJX;AAAA,YAIoBo8C,EAAE,GAAGjQ,EAAE,GAAGnsC,MAJ9B;AAAA,YAKCq8C,EAAE,GAAG,KAAKX,WALX;AAAA,YAKyBY,EAAE,GAAG,KAAKV,WALnC;AAAA,YAMCW,EAAE,GAAG,KAAKd,WANX;AAAA,YAMwBe,EAAE,GAAG,KAAKb,WANlC;AAAA,YAQC1xH,CAAC,GAAG,CAAE/K,CAAC,GAAGwqD,EAAN,KAAeC,EAAE,GAAGD,EAApB,CARL;AAAA,YASC8wE,EAAE,GAAGvwH,CAAC,GAAGA,CATV;AAAA,YAUCwyH,GAAG,GAAGjC,EAAE,GAAGvwH,CAVZ,CAFwC,CAcxC;;AAEA,YAAMyyH,EAAE,GAAG,CAAEH,EAAF,GAAOE,GAAP,GAAa,IAAIF,EAAJ,GAAS/B,EAAtB,GAA2B+B,EAAE,GAAGtyH,CAA3C;AACA,YAAMi/C,EAAE,GAAG,CAAE,IAAIqzE,EAAN,IAAaE,GAAb,GAAmB,CAAE,CAAE,GAAF,GAAQ,IAAIF,EAAd,IAAqB/B,EAAxC,GAA6C,CAAE,CAAE,GAAF,GAAQ+B,EAAV,IAAiBtyH,CAA9D,GAAkE,CAA7E;AACA,YAAMkpC,EAAE,GAAG,CAAE,CAAE,CAAF,GAAMqpF,EAAR,IAAeC,GAAf,GAAqB,CAAE,MAAMD,EAAR,IAAehC,EAApC,GAAyC,MAAMvwH,CAA1D;AACA,YAAM0yH,EAAE,GAAGH,EAAE,GAAGC,GAAL,GAAWD,EAAE,GAAGhC,EAA3B,CAnBwC,CAqBxC;;AAEA,aAAM,IAAIrhJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC0L,gBAAM,CAAE1L,KAAF,CAAN,GACEujJ,EAAE,GAAG55E,MAAM,CAAEu5E,EAAE,GAAGljJ,KAAP,CAAX,GACA+vE,EAAE,GAAGpG,MAAM,CAAEs5E,EAAE,GAAGjjJ,KAAP,CADX,GAEAg6D,EAAE,GAAG2P,MAAM,CAAEqpE,EAAE,GAAGhzI,KAAP,CAFX,GAGAwjJ,EAAE,GAAG75E,MAAM,CAAEw5E,EAAE,GAAGnjJ,KAAP,CAJb;AAMA;;AAED,eAAO0L,MAAP;AAEA;AA7HkF,KAAvD,CAA7B;;AAiIA,aAAS+3I,iBAAT,CAA4BxC,kBAA5B,EAAgDC,YAAhD,EAA8DC,UAA9D,EAA0ER,YAA1E,EAAyF;AAExFK,iBAAW,CAAC3sI,IAAZ,CAAkB,IAAlB,EAAwB4sI,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAED8C,qBAAiB,CAACvsI,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAewrI,WAAW,CAAC9pI,SAA3B,CAAf,EAAuD;AAEpF0M,iBAAW,EAAE6/H,iBAFuE;AAIpFzB,kBAAY,EAAE,sBAAWntE,EAAX,EAAetE,EAAf,EAAmBxqD,CAAnB,EAAsByqD,EAAtB,EAA2B;AAExC,YAAM9kE,MAAM,GAAG,KAAKi1I,YAApB;AAAA,YACCh3E,MAAM,GAAG,KAAKu3E,YADf;AAAA,YAECr6C,MAAM,GAAG,KAAK24C,SAFf;AAAA,YAICkE,OAAO,GAAG7uE,EAAE,GAAGgyB,MAJhB;AAAA,YAKC88C,OAAO,GAAGD,OAAO,GAAG78C,MALrB;AAAA,YAOC+8C,OAAO,GAAG,CAAE79H,CAAC,GAAGwqD,EAAN,KAAeC,EAAE,GAAGD,EAApB,CAPX;AAAA,YAQCszE,OAAO,GAAG,IAAID,OARf;;AAUA,aAAM,IAAI5jJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC0L,gBAAM,CAAE1L,KAAF,CAAN,GACE2pE,MAAM,CAAEg6E,OAAO,GAAG3jJ,KAAZ,CAAN,GAAwB6jJ,OAAxB,GACAl6E,MAAM,CAAE+5E,OAAO,GAAG1jJ,KAAZ,CAAN,GAAwB4jJ,OAF1B;AAIA;;AAED,eAAOl4I,MAAP;AAEA;AA1BmF,KAAvD,CAA9B;AA8BA;;;;;;AAMA,aAASo4I,mBAAT,CAA8B7C,kBAA9B,EAAkDC,YAAlD,EAAgEC,UAAhE,EAA4ER,YAA5E,EAA2F;AAE1FK,iBAAW,CAAC3sI,IAAZ,CAAkB,IAAlB,EAAwB4sI,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAEDmD,uBAAmB,CAAC5sI,SAApB,GAAgC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAewrI,WAAW,CAAC9pI,SAA3B,CAAf,EAAuD;AAEtF0M,iBAAW,EAAEkgI,mBAFyE;AAItF9B,kBAAY,EAAE,sBAAWntE;AAAG;AAAd,QAAiC;AAE9C,eAAO,KAAKutE,gBAAL,CAAuBvtE,EAAE,GAAG,CAA5B,CAAP;AAEA;AARqF,KAAvD,CAAhC;;AAYA,aAASkvE,aAAT,CAAwBhlJ,IAAxB,EAA8By/I,KAA9B,EAAqC70E,MAArC,EAA6Cq6E,aAA7C,EAA6D;AAE5D,UAAKjlJ,IAAI,KAAKqP,SAAd,EAA0B,MAAM,IAAI7Q,KAAJ,CAAW,8CAAX,CAAN;AAC1B,UAAKihJ,KAAK,KAAKpwI,SAAV,IAAuBowI,KAAK,CAACn/I,MAAN,KAAiB,CAA7C,EAAiD,MAAM,IAAI9B,KAAJ,CAAW,sDAAsDwB,IAAjE,CAAN;AAEjD,WAAKA,IAAL,GAAYA,IAAZ;AAEA,WAAKy/I,KAAL,GAAaR,cAAc,CAACG,YAAf,CAA6BK,KAA7B,EAAoC,KAAKyF,cAAzC,CAAb;AACA,WAAKt6E,MAAL,GAAcq0E,cAAc,CAACG,YAAf,CAA6Bx0E,MAA7B,EAAqC,KAAKu6E,eAA1C,CAAd;AAEA,WAAKC,gBAAL,CAAuBH,aAAa,IAAI,KAAKI,oBAA7C;AAEA,K,CAED;;;AAEA7iJ,UAAM,CAACiiC,MAAP,CAAeugH,aAAf,EAA8B;AAE7B;AACA;AAEAlvF,YAAM,EAAE,gBAAW0qF,KAAX,EAAmB;AAE1B,YAAM8E,SAAS,GAAG9E,KAAK,CAAC37H,WAAxB;AAEA,YAAI0gI,IAAJ,CAJ0B,CAM1B;;AACA,YAAKD,SAAS,CAACxvF,MAAV,KAAqBzmD,SAA1B,EAAsC;AAErCk2I,cAAI,GAAGD,SAAS,CAACxvF,MAAV,CAAkB0qF,KAAlB,CAAP;AAEA,SAJD,MAIO;AAEN;AACA+E,cAAI,GAAG;AAEN,oBAAQ/E,KAAK,CAACxgJ,IAFR;AAGN,qBAASi/I,cAAc,CAACG,YAAf,CAA6BoB,KAAK,CAACf,KAAnC,EAA0C/sH,KAA1C,CAHH;AAIN,sBAAUusH,cAAc,CAACG,YAAf,CAA6BoB,KAAK,CAAC51E,MAAnC,EAA2Cl4C,KAA3C;AAJJ,WAAP;AAQA,cAAMuyH,aAAa,GAAGzE,KAAK,CAACgF,gBAAN,EAAtB;;AAEA,cAAKP,aAAa,KAAKzE,KAAK,CAAC6E,oBAA7B,EAAoD;AAEnDE,gBAAI,CAACN,aAAL,GAAqBA,aAArB;AAEA;AAED;;AAEDM,YAAI,CAAC5/I,IAAL,GAAY66I,KAAK,CAACa,aAAlB,CAhC0B,CAgCO;;AAEjC,eAAOkE,IAAP;AAEA;AAzC4B,KAA9B;AA6CA/iJ,UAAM,CAACiiC,MAAP,CAAeugH,aAAa,CAAC7sI,SAA7B,EAAwC;AAEvC0M,iBAAW,EAAEmgI,aAF0B;AAIvCE,oBAAc,EAAE3jE,YAJuB;AAMvC4jE,qBAAe,EAAE5jE,YANsB;AAQvC8jE,0BAAoB,EAAEt+F,iBARiB;AAUvC0+F,sCAAgC,EAAE,0CAAW94I,MAAX,EAAoB;AAErD,eAAO,IAAIo4I,mBAAJ,CAAyB,KAAKtF,KAA9B,EAAqC,KAAK70E,MAA1C,EAAkD,KAAK81E,YAAL,EAAlD,EAAuE/zI,MAAvE,CAAP;AAEA,OAdsC;AAgBvC+4I,oCAA8B,EAAE,wCAAW/4I,MAAX,EAAoB;AAEnD,eAAO,IAAI+3I,iBAAJ,CAAuB,KAAKjF,KAA5B,EAAmC,KAAK70E,MAAxC,EAAgD,KAAK81E,YAAL,EAAhD,EAAqE/zI,MAArE,CAAP;AAEA,OApBsC;AAsBvCg5I,oCAA8B,EAAE,wCAAWh5I,MAAX,EAAoB;AAEnD,eAAO,IAAI22I,gBAAJ,CAAsB,KAAK7D,KAA3B,EAAkC,KAAK70E,MAAvC,EAA+C,KAAK81E,YAAL,EAA/C,EAAoE/zI,MAApE,CAAP;AAEA,OA1BsC;AA4BvCy4I,sBAAgB,EAAE,0BAAWH,aAAX,EAA2B;AAE5C,YAAIW,aAAJ;;AAEA,gBAASX,aAAT;AAEC,eAAKn+F,mBAAL;AAEC8+F,yBAAa,GAAG,KAAKH,gCAArB;AAEA;;AAED,eAAK1+F,iBAAL;AAEC6+F,yBAAa,GAAG,KAAKF,8BAArB;AAEA;;AAED,eAAK1+F,iBAAL;AAEC4+F,yBAAa,GAAG,KAAKD,8BAArB;AAEA;AAlBF;;AAsBA,YAAKC,aAAa,KAAKv2I,SAAvB,EAAmC;AAElC,cAAMzJ,OAAO,GAAG,mCACf,KAAKy7I,aADU,GACM,wBADN,GACiC,KAAKrhJ,IADtD;;AAGA,cAAK,KAAK0hJ,iBAAL,KAA2BryI,SAAhC,EAA4C;AAE3C;AACA,gBAAK41I,aAAa,KAAK,KAAKI,oBAA5B,EAAmD;AAElD,mBAAKD,gBAAL,CAAuB,KAAKC,oBAA5B;AAEA,aAJD,MAIO;AAEN,oBAAM,IAAI7mJ,KAAJ,CAAWoH,OAAX,CAAN,CAFM,CAEsB;AAE5B;AAED;;AAEDxD,iBAAO,CAAC2W,IAAR,CAAc,sBAAd,EAAsCnT,OAAtC;AACA,iBAAO,IAAP;AAEA;;AAED,aAAK87I,iBAAL,GAAyBkE,aAAzB;AAEA,eAAO,IAAP;AAEA,OAnFsC;AAqFvCJ,sBAAgB,EAAE,4BAAY;AAE7B,gBAAS,KAAK9D,iBAAd;AAEC,eAAK,KAAK+D,gCAAV;AAEC,mBAAO3+F,mBAAP;;AAED,eAAK,KAAK4+F,8BAAV;AAEC,mBAAO3+F,iBAAP;;AAED,eAAK,KAAK4+F,8BAAV;AAEC,mBAAO3+F,iBAAP;AAZF;AAgBA,OAvGsC;AAyGvC05F,kBAAY,EAAE,wBAAY;AAEzB,eAAO,KAAK91E,MAAL,CAAYtqE,MAAZ,GAAqB,KAAKm/I,KAAL,CAAWn/I,MAAvC;AAEA,OA7GsC;AA+GvC;AACAw3B,WAAK,EAAE,eAAW+tH,UAAX,EAAwB;AAE9B,YAAKA,UAAU,KAAK,GAApB,EAA0B;AAEzB,cAAMpG,KAAK,GAAG,KAAKA,KAAnB;;AAEA,eAAM,IAAIx+I,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG6tH,KAAK,CAACn/I,MAA3B,EAAmCW,KAAC,KAAK2wB,CAAzC,EAA4C,EAAG3wB,KAA/C,EAAmD;AAElDw+I,iBAAK,CAAEx+I,KAAF,CAAL,IAAc4kJ,UAAd;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAhIsC;AAkIvC;AACA9nI,WAAK,EAAE,eAAW+nI,SAAX,EAAuB;AAE7B,YAAKA,SAAS,KAAK,GAAnB,EAAyB;AAExB,cAAMrG,KAAK,GAAG,KAAKA,KAAnB;;AAEA,eAAM,IAAIx+I,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG6tH,KAAK,CAACn/I,MAA3B,EAAmCW,KAAC,KAAK2wB,CAAzC,EAA4C,EAAG3wB,KAA/C,EAAmD;AAElDw+I,iBAAK,CAAEx+I,KAAF,CAAL,IAAc6kJ,SAAd;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAnJsC;AAqJvC;AACA;AACA1lJ,UAAI,EAAE,cAAWm4C,SAAX,EAAsBwtG,OAAtB,EAAgC;AAErC,YAAMtG,KAAK,GAAG,KAAKA,KAAnB;AAAA,YACCuG,KAAK,GAAGvG,KAAK,CAACn/I,MADf;AAGA,YAAIo6B,IAAI,GAAG,CAAX;AAAA,YACCqK,EAAE,GAAGihH,KAAK,GAAG,CADd;;AAGA,eAAQtrH,IAAI,KAAKsrH,KAAT,IAAkBvG,KAAK,CAAE/kH,IAAF,CAAL,GAAgB6d,SAA1C,EAAsD;AAErD,YAAG7d,IAAH;AAEA;;AAED,eAAQqK,EAAE,KAAK,CAAE,CAAT,IAAc06G,KAAK,CAAE16G,EAAF,CAAL,GAAcghH,OAApC,EAA8C;AAE7C,YAAGhhH,EAAH;AAEA;;AAED,UAAGA,EAAH,CApBqC,CAoB9B;;AAEP,YAAKrK,IAAI,KAAK,CAAT,IAAcqK,EAAE,KAAKihH,KAA1B,EAAkC;AAEjC;AACA,cAAKtrH,IAAI,IAAIqK,EAAb,EAAkB;AAEjBA,cAAE,GAAGvrB,IAAI,CAACmE,GAAL,CAAUonB,EAAV,EAAc,CAAd,CAAL;AACArK,gBAAI,GAAGqK,EAAE,GAAG,CAAZ;AAEA;;AAED,cAAM+iE,MAAM,GAAG,KAAK44C,YAAL,EAAf;AACA,eAAKjB,KAAL,GAAaR,cAAc,CAACC,UAAf,CAA2BO,KAA3B,EAAkC/kH,IAAlC,EAAwCqK,EAAxC,CAAb;AACA,eAAK6lC,MAAL,GAAcq0E,cAAc,CAACC,UAAf,CAA2B,KAAKt0E,MAAhC,EAAwClwC,IAAI,GAAGotE,MAA/C,EAAuD/iE,EAAE,GAAG+iE,MAA5D,CAAd;AAEA;;AAED,eAAO,IAAP;AAEA,OA/LsC;AAiMvC;AACAm+C,cAAQ,EAAE,oBAAY;AAErB,YAAIC,KAAK,GAAG,IAAZ;AAEA,YAAMzF,SAAS,GAAG,KAAKC,YAAL,EAAlB;;AACA,YAAKD,SAAS,GAAGjnI,IAAI,CAAC4N,KAAL,CAAYq5H,SAAZ,CAAZ,KAAwC,CAA7C,EAAiD;AAEhDr+I,iBAAO,CAACD,KAAR,CAAe,mDAAf,EAAoE,IAApE;AACA+jJ,eAAK,GAAG,KAAR;AAEA;;AAED,YAAMzG,KAAK,GAAG,KAAKA,KAAnB;AAAA,YACC70E,MAAM,GAAG,KAAKA,MADf;AAAA,YAGCo7E,KAAK,GAAGvG,KAAK,CAACn/I,MAHf;;AAKA,YAAK0lJ,KAAK,KAAK,CAAf,EAAmB;AAElB5jJ,iBAAO,CAACD,KAAR,CAAe,sCAAf,EAAuD,IAAvD;AACA+jJ,eAAK,GAAG,KAAR;AAEA;;AAED,YAAIC,QAAQ,GAAG,IAAf;;AAEA,aAAM,IAAIllJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK+kJ,KAAvB,EAA8B/kJ,KAAC,EAA/B,EAAqC;AAEpC,cAAMmlJ,QAAQ,GAAG3G,KAAK,CAAEx+I,KAAF,CAAtB;;AAEA,cAAK,OAAOmlJ,QAAP,KAAoB,QAApB,IAAgC7gE,KAAK,CAAE6gE,QAAF,CAA1C,EAAyD;AAExDhkJ,mBAAO,CAACD,KAAR,CAAe,kDAAf,EAAmE,IAAnE,EAAyElB,KAAzE,EAA4EmlJ,QAA5E;AACAF,iBAAK,GAAG,KAAR;AACA;AAEA;;AAED,cAAKC,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,GAAGC,QAArC,EAAgD;AAE/ChkJ,mBAAO,CAACD,KAAR,CAAe,yCAAf,EAA0D,IAA1D,EAAgElB,KAAhE,EAAmEmlJ,QAAnE,EAA6ED,QAA7E;AACAD,iBAAK,GAAG,KAAR;AACA;AAEA;;AAEDC,kBAAQ,GAAGC,QAAX;AAEA;;AAED,YAAKx7E,MAAM,KAAKv7D,SAAhB,EAA4B;AAE3B,cAAK4vI,cAAc,CAACE,YAAf,CAA6Bv0E,MAA7B,CAAL,EAA6C;AAE5C,iBAAM,IAAI3pE,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGg5C,MAAM,CAACtqE,MAA5B,EAAoCW,KAAC,KAAK2wB,CAA1C,EAA6C,EAAG3wB,KAAhD,EAAoD;AAEnD,kBAAM8J,KAAK,GAAG6/D,MAAM,CAAE3pE,KAAF,CAApB;;AAEA,kBAAKskF,KAAK,CAAEx6E,KAAF,CAAV,EAAsB;AAErB3I,uBAAO,CAACD,KAAR,CAAe,mDAAf,EAAoE,IAApE,EAA0ElB,KAA1E,EAA6E8J,KAA7E;AACAm7I,qBAAK,GAAG,KAAR;AACA;AAEA;AAED;AAED;AAED;;AAED,eAAOA,KAAP;AAEA,OA5QsC;AA8QvC;AACA;AACAG,cAAQ,EAAE,oBAAY;AAErB;AACA,YAAM5G,KAAK,GAAGR,cAAc,CAACC,UAAf,CAA2B,KAAKO,KAAhC,CAAd;AAAA,YACC70E,MAAM,GAAGq0E,cAAc,CAACC,UAAf,CAA2B,KAAKt0E,MAAhC,CADV;AAAA,YAECk9B,MAAM,GAAG,KAAK44C,YAAL,EAFV;AAAA,YAIC4F,mBAAmB,GAAG,KAAKd,gBAAL,OAA4Bx+F,iBAJnD;AAAA,YAMCqtD,SAAS,GAAGorC,KAAK,CAACn/I,MAAN,GAAe,CAN5B;AAQA,YAAIimJ,UAAU,GAAG,CAAjB;;AAEA,aAAM,IAAItlJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGozG,SAArB,EAAgC,EAAGpzG,KAAnC,EAAuC;AAEtC,cAAIulJ,IAAI,GAAG,KAAX;AAEA,cAAMh4G,IAAI,GAAGixG,KAAK,CAAEx+I,KAAF,CAAlB;AACA,cAAMwlJ,QAAQ,GAAGhH,KAAK,CAAEx+I,KAAC,GAAG,CAAN,CAAtB,CALsC,CAOtC;;AAEA,cAAKutC,IAAI,KAAKi4G,QAAT,KAAuBxlJ,KAAC,KAAK,CAAN,IAAWutC,IAAI,KAAKA,IAAI,CAAE,CAAF,CAA/C,CAAL,EAA8D;AAE7D,gBAAK,CAAE83G,mBAAP,EAA6B;AAE5B;AAEA,kBAAM3pI,MAAM,GAAG1b,KAAC,GAAG6mG,MAAnB;AAAA,kBACC4+C,OAAO,GAAG/pI,MAAM,GAAGmrF,MADpB;AAAA,kBAEC6+C,OAAO,GAAGhqI,MAAM,GAAGmrF,MAFpB;;AAIA,mBAAM,IAAIvmG,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKumG,MAAvB,EAA+B,EAAGvmG,CAAlC,EAAsC;AAErC,oBAAMwJ,KAAK,GAAG6/D,MAAM,CAAEjuD,MAAM,GAAGpb,CAAX,CAApB;;AAEA,oBAAKwJ,KAAK,KAAK6/D,MAAM,CAAE87E,OAAO,GAAGnlJ,CAAZ,CAAhB,IACJwJ,KAAK,KAAK6/D,MAAM,CAAE+7E,OAAO,GAAGplJ,CAAZ,CADjB,EACmC;AAElCilJ,sBAAI,GAAG,IAAP;AACA;AAEA;AAED;AAED,aAtBD,MAsBO;AAENA,kBAAI,GAAG,IAAP;AAEA;AAED,WAvCqC,CAyCtC;;;AAEA,cAAKA,IAAL,EAAY;AAEX,gBAAKvlJ,KAAC,KAAKslJ,UAAX,EAAwB;AAEvB9G,mBAAK,CAAE8G,UAAF,CAAL,GAAsB9G,KAAK,CAAEx+I,KAAF,CAA3B;AAEA,kBAAM2lJ,UAAU,GAAG3lJ,KAAC,GAAG6mG,MAAvB;AAAA,kBACC++C,WAAW,GAAGN,UAAU,GAAGz+C,MAD5B;;AAGA,mBAAM,IAAIvmG,IAAC,GAAG,CAAd,EAAiBA,IAAC,KAAKumG,MAAvB,EAA+B,EAAGvmG,IAAlC,EAAsC;AAErCqpE,sBAAM,CAAEi8E,WAAW,GAAGtlJ,IAAhB,CAAN,GAA4BqpE,MAAM,CAAEg8E,UAAU,GAAGrlJ,IAAf,CAAlC;AAEA;AAED;;AAED,cAAGglJ,UAAH;AAEA;AAED,SA7EoB,CA+ErB;;;AAEA,YAAKlyC,SAAS,GAAG,CAAjB,EAAqB;AAEpBorC,eAAK,CAAE8G,UAAF,CAAL,GAAsB9G,KAAK,CAAEprC,SAAF,CAA3B;;AAEA,eAAM,IAAIuyC,WAAU,GAAGvyC,SAAS,GAAGvM,MAA7B,EAAqC++C,YAAW,GAAGN,UAAU,GAAGz+C,MAAhE,EAAwEvmG,IAAC,GAAG,CAAlF,EAAqFA,IAAC,KAAKumG,MAA3F,EAAmG,EAAGvmG,IAAtG,EAA0G;AAEzGqpE,kBAAM,CAAEi8E,YAAW,GAAGtlJ,IAAhB,CAAN,GAA4BqpE,MAAM,CAAEg8E,WAAU,GAAGrlJ,IAAf,CAAlC;AAEA;;AAED,YAAGglJ,UAAH;AAEA;;AAED,YAAKA,UAAU,KAAK9G,KAAK,CAACn/I,MAA1B,EAAmC;AAElC,eAAKm/I,KAAL,GAAaR,cAAc,CAACC,UAAf,CAA2BO,KAA3B,EAAkC,CAAlC,EAAqC8G,UAArC,CAAb;AACA,eAAK37E,MAAL,GAAcq0E,cAAc,CAACC,UAAf,CAA2Bt0E,MAA3B,EAAmC,CAAnC,EAAsC27E,UAAU,GAAGz+C,MAAnD,CAAd;AAEA,SALD,MAKO;AAEN,eAAK23C,KAAL,GAAaA,KAAb;AACA,eAAK70E,MAAL,GAAcA,MAAd;AAEA;;AAED,eAAO,IAAP;AAEA,OA7XsC;AA+XvCrvD,WAAK,EAAE,iBAAY;AAElB,YAAMkkI,KAAK,GAAGR,cAAc,CAACC,UAAf,CAA2B,KAAKO,KAAhC,EAAuC,CAAvC,CAAd;AACA,YAAM70E,MAAM,GAAGq0E,cAAc,CAACC,UAAf,CAA2B,KAAKt0E,MAAhC,EAAwC,CAAxC,CAAf;AAEA,YAAMk8E,kBAAkB,GAAG,KAAKjiI,WAAhC;AACA,YAAM27H,KAAK,GAAG,IAAIsG,kBAAJ,CAAwB,KAAK9mJ,IAA7B,EAAmCy/I,KAAnC,EAA0C70E,MAA1C,CAAd,CANkB,CAQlB;;AACA41E,aAAK,CAACkB,iBAAN,GAA0B,KAAKA,iBAA/B;AAEA,eAAOlB,KAAP;AAEA;AA5YsC,KAAxC;AAgZA;;;;AAIA,aAASuG,oBAAT,CAA+B/mJ,IAA/B,EAAqCy/I,KAArC,EAA4C70E,MAA5C,EAAqD;AAEpDo6E,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC;AAEA;;AAEDm8E,wBAAoB,CAAC5uI,SAArB,GAAiC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAEzF0M,iBAAW,EAAEkiI,oBAF4E;AAIzF1F,mBAAa,EAAE,MAJ0E;AAKzF8D,qBAAe,EAAEzyH,KALwE;AAOzF2yH,0BAAoB,EAAEv+F,mBAPmE;AASzF4+F,oCAA8B,EAAEr2I,SATyD;AAUzFs2I,oCAA8B,EAAEt2I,SAVyD,CAYzF;AACA;AACA;;AAdyF,KAAzD,CAAjC;AAkBA;;;;AAIA,aAAS23I,kBAAT,CAA6BhnJ,IAA7B,EAAmCy/I,KAAnC,EAA0C70E,MAA1C,EAAkDq6E,aAAlD,EAAkE;AAEjED,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC,EAA+Cq6E,aAA/C;AAEA;;AAED+B,sBAAkB,CAAC7uI,SAAnB,GAA+B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAEvF0M,iBAAW,EAAEmiI,kBAF0E;AAIvF3F,mBAAa,EAAE,OAJwE,CAMvF;AAEA;AAEA;AACA;;AAXuF,KAAzD,CAA/B;AAeA;;;;AAIA,aAAS4F,mBAAT,CAA8BjnJ,IAA9B,EAAoCy/I,KAApC,EAA2C70E,MAA3C,EAAmDq6E,aAAnD,EAAmE;AAElED,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC,EAA+Cq6E,aAA/C;AAEA;;AAEDgC,uBAAmB,CAAC9uI,SAApB,GAAgC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAExF0M,iBAAW,EAAEoiI,mBAF2E;AAIxF5F,mBAAa,EAAE,QAJyE,CAMxF;AAEA;;AARwF,KAAzD,CAAhC;AAYA;;;;AAIA,aAAS6F,2BAAT,CAAsChF,kBAAtC,EAA0DC,YAA1D,EAAwEC,UAAxE,EAAoFR,YAApF,EAAmG;AAElGK,iBAAW,CAAC3sI,IAAZ,CAAkB,IAAlB,EAAwB4sI,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAEDsF,+BAA2B,CAAC/uI,SAA5B,GAAwC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAewrI,WAAW,CAAC9pI,SAA3B,CAAf,EAAuD;AAE9F0M,iBAAW,EAAEqiI,2BAFiF;AAI9FjE,kBAAY,EAAE,sBAAWntE,EAAX,EAAetE,EAAf,EAAmBxqD,CAAnB,EAAsByqD,EAAtB,EAA2B;AAExC,YAAM9kE,MAAM,GAAG,KAAKi1I,YAApB;AAAA,YACCh3E,MAAM,GAAG,KAAKu3E,YADf;AAAA,YAECr6C,MAAM,GAAG,KAAK24C,SAFf;AAAA,YAICxxF,KAAK,GAAG,CAAEjoC,CAAC,GAAGwqD,EAAN,KAAeC,EAAE,GAAGD,EAApB,CAJT;AAMA,YAAI70D,MAAM,GAAGm5D,EAAE,GAAGgyB,MAAlB;;AAEA,aAAM,IAAIxvE,GAAG,GAAG3b,MAAM,GAAGmrF,MAAzB,EAAiCnrF,MAAM,KAAK2b,GAA5C,EAAiD3b,MAAM,IAAI,CAA3D,EAA+D;AAE9Dm8C,oBAAU,CAACS,SAAX,CAAsB5sD,MAAtB,EAA8B,CAA9B,EAAiCi+D,MAAjC,EAAyCjuD,MAAM,GAAGmrF,MAAlD,EAA0Dl9B,MAA1D,EAAkEjuD,MAAlE,EAA0EsyC,KAA1E;AAEA;;AAED,eAAOtiD,MAAP;AAEA;AAtB6F,KAAvD,CAAxC;AA0BA;;;;AAIA,aAASw6I,uBAAT,CAAkCnnJ,IAAlC,EAAwCy/I,KAAxC,EAA+C70E,MAA/C,EAAuDq6E,aAAvD,EAAuE;AAEtED,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC,EAA+Cq6E,aAA/C;AAEA;;AAEDkC,2BAAuB,CAAChvI,SAAxB,GAAoC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAE5F0M,iBAAW,EAAEsiI,uBAF+E;AAI5F9F,mBAAa,EAAE,YAJ6E;AAM5F;AAEAgE,0BAAoB,EAAEt+F,iBARsE;AAU5F2+F,oCAA8B,EAAE,wCAAW/4I,MAAX,EAAoB;AAEnD,eAAO,IAAIu6I,2BAAJ,CAAiC,KAAKzH,KAAtC,EAA6C,KAAK70E,MAAlD,EAA0D,KAAK81E,YAAL,EAA1D,EAA+E/zI,MAA/E,CAAP;AAEA,OAd2F;AAgB5Fg5I,oCAA8B,EAAEt2I,SAhB4D,CAgBlD;;AAhBkD,KAAzD,CAApC;AAoBA;;;;AAIA,aAAS+3I,mBAAT,CAA8BpnJ,IAA9B,EAAoCy/I,KAApC,EAA2C70E,MAA3C,EAAmDq6E,aAAnD,EAAmE;AAElED,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC,EAA+Cq6E,aAA/C;AAEA;;AAEDmC,uBAAmB,CAACjvI,SAApB,GAAgC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAExF0M,iBAAW,EAAEuiI,mBAF2E;AAIxF/F,mBAAa,EAAE,QAJyE;AAKxF8D,qBAAe,EAAEzyH,KALuE;AAOxF2yH,0BAAoB,EAAEv+F,mBAPkE;AASxF4+F,oCAA8B,EAAEr2I,SATwD;AAWxFs2I,oCAA8B,EAAEt2I;AAXwD,KAAzD,CAAhC;AAeA;;;;AAIA,aAASg4I,mBAAT,CAA8BrnJ,IAA9B,EAAoCy/I,KAApC,EAA2C70E,MAA3C,EAAmDq6E,aAAnD,EAAmE;AAElED,mBAAa,CAAC1vI,IAAd,CAAoB,IAApB,EAA0BtV,IAA1B,EAAgCy/I,KAAhC,EAAuC70E,MAAvC,EAA+Cq6E,aAA/C;AAEA;;AAEDoC,uBAAmB,CAAClvI,SAApB,GAAgC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeuuI,aAAa,CAAC7sI,SAA7B,CAAf,EAAyD;AAExF0M,iBAAW,EAAEwiI,mBAF2E;AAIxFhG,mBAAa,EAAE,QAJyE,CAMxF;AAEA;;AARwF,KAAzD,CAAhC;;AAYA,aAASiG,aAAT,CAAwBtnJ,IAAxB,EAA8BunJ,QAA9B,EAAwChH,MAAxC,EAAgDyB,SAAhD,EAA4D;AAE3D,WAAKhiJ,IAAL,GAAYA,IAAZ;AACA,WAAKugJ,MAAL,GAAcA,MAAd;AACA,WAAKgH,QAAL,GAAkBA,QAAQ,KAAKl4I,SAAf,GAA6Bk4I,QAA7B,GAAwC,CAAE,CAA1D;AACA,WAAKvF,SAAL,GAAmBA,SAAS,KAAK3yI,SAAhB,GAA8B2yI,SAA9B,GAA0C56F,wBAA3D;AAEA,WAAKwD,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ,CAP2D,CAS3D;;AACA,UAAK,KAAKg9F,QAAL,GAAgB,CAArB,EAAyB;AAExB,aAAK3G,aAAL;AAEA;AAED;;AAED,aAAS4G,4BAAT,CAAuCC,QAAvC,EAAkD;AAEjD,cAASA,QAAQ,CAACxnJ,WAAT,EAAT;AAEC,aAAK,QAAL;AACA,aAAK,QAAL;AACA,aAAK,OAAL;AACA,aAAK,QAAL;AACA,aAAK,SAAL;AAEC,iBAAOgnJ,mBAAP;;AAED,aAAK,QAAL;AACA,aAAK,SAAL;AACA,aAAK,SAAL;AACA,aAAK,SAAL;AAEC,iBAAOI,mBAAP;;AAED,aAAK,OAAL;AAEC,iBAAOL,kBAAP;;AAED,aAAK,YAAL;AAEC,iBAAOG,uBAAP;;AAED,aAAK,MAAL;AACA,aAAK,SAAL;AAEC,iBAAOJ,oBAAP;;AAED,aAAK,QAAL;AAEC,iBAAOK,mBAAP;AAhCF;;AAoCA,YAAM,IAAI5oJ,KAAJ,CAAW,gDAAgDipJ,QAA3D,CAAN;AAEA;;AAED,aAASC,kBAAT,CAA6BnC,IAA7B,EAAoC;AAEnC,UAAKA,IAAI,CAAC5/I,IAAL,KAAc0J,SAAnB,EAA+B;AAE9B,cAAM,IAAI7Q,KAAJ,CAAW,0DAAX,CAAN;AAEA;;AAED,UAAM8mJ,SAAS,GAAGkC,4BAA4B,CAAEjC,IAAI,CAAC5/I,IAAP,CAA9C;;AAEA,UAAK4/I,IAAI,CAAC9F,KAAL,KAAepwI,SAApB,EAAgC;AAE/B,YAAMowI,KAAK,GAAG,EAAd;AAAA,YAAkB70E,MAAM,GAAG,EAA3B;AAEAq0E,sBAAc,CAACa,WAAf,CAA4ByF,IAAI,CAAC7mJ,IAAjC,EAAuC+gJ,KAAvC,EAA8C70E,MAA9C,EAAsD,OAAtD;AAEA26E,YAAI,CAAC9F,KAAL,GAAaA,KAAb;AACA8F,YAAI,CAAC36E,MAAL,GAAcA,MAAd;AAEA,OAnBkC,CAqBnC;;;AACA,UAAK06E,SAAS,CAAC7+H,KAAV,KAAoBpX,SAAzB,EAAqC;AAEpC,eAAOi2I,SAAS,CAAC7+H,KAAV,CAAiB8+H,IAAjB,CAAP;AAEA,OAJD,MAIO;AAEN;AACA,eAAO,IAAID,SAAJ,CAAeC,IAAI,CAACvlJ,IAApB,EAA0BulJ,IAAI,CAAC9F,KAA/B,EAAsC8F,IAAI,CAAC36E,MAA3C,EAAmD26E,IAAI,CAACN,aAAxD,CAAP;AAEA;AAED;;AAEDziJ,UAAM,CAACiiC,MAAP,CAAe6iH,aAAf,EAA8B;AAE7B7gI,WAAK,EAAE,eAAW8+H,IAAX,EAAkB;AAExB,YAAMhF,MAAM,GAAG,EAAf;AAAA,YACCoH,UAAU,GAAGpC,IAAI,CAAChF,MADnB;AAAA,YAECqH,SAAS,GAAG,OAAQrC,IAAI,CAAClF,GAAL,IAAY,GAApB,CAFb;;AAIA,aAAM,IAAIp/I,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG+1H,UAAU,CAACrnJ,MAAhC,EAAwCW,KAAC,KAAK2wB,CAA9C,EAAiD,EAAG3wB,KAApD,EAAwD;AAEvDs/I,gBAAM,CAAC5+I,IAAP,CAAa+lJ,kBAAkB,CAAEC,UAAU,CAAE1mJ,KAAF,CAAZ,CAAlB,CAAsC8c,KAAtC,CAA6C6pI,SAA7C,CAAb;AAEA;;AAED,eAAO,IAAIN,aAAJ,CAAmB/B,IAAI,CAACvlJ,IAAxB,EAA8BulJ,IAAI,CAACgC,QAAnC,EAA6ChH,MAA7C,EAAqDgF,IAAI,CAACvD,SAA1D,CAAP;AAEA,OAhB4B;AAkB7BlsF,YAAM,EAAE,gBAAWwqF,IAAX,EAAkB;AAEzB,YAAMC,MAAM,GAAG,EAAf;AAAA,YACCsH,UAAU,GAAGvH,IAAI,CAACC,MADnB;AAGA,YAAMgF,IAAI,GAAG;AAEZ,kBAAQjF,IAAI,CAACtgJ,IAFD;AAGZ,sBAAYsgJ,IAAI,CAACiH,QAHL;AAIZ,oBAAUhH,MAJE;AAKZ,kBAAQD,IAAI,CAAC11F,IALD;AAMZ,uBAAa01F,IAAI,CAAC0B;AANN,SAAb;;AAUA,aAAM,IAAI/gJ,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGi2H,UAAU,CAACvnJ,MAAhC,EAAwCW,KAAC,KAAK2wB,CAA9C,EAAiD,EAAG3wB,KAApD,EAAwD;AAEvDs/I,gBAAM,CAAC5+I,IAAP,CAAaqjJ,aAAa,CAAClvF,MAAd,CAAsB+xF,UAAU,CAAE5mJ,KAAF,CAAhC,CAAb;AAEA;;AAED,eAAOskJ,IAAP;AAEA,OAzC4B;AA2C7BuC,mCAA6B,EAAE,uCAAW9nJ,IAAX,EAAiB+nJ,mBAAjB,EAAsC1H,GAAtC,EAA2C2H,MAA3C,EAAoD;AAElF,YAAMC,eAAe,GAAGF,mBAAmB,CAACznJ,MAA5C;AACA,YAAMigJ,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAIt/I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGgnJ,eAArB,EAAsChnJ,KAAC,EAAvC,EAA6C;AAE5C,cAAIw+I,KAAK,GAAG,EAAZ;AACA,cAAI70E,MAAM,GAAG,EAAb;AAEA60E,eAAK,CAAC99I,IAAN,CACC,CAAEV,KAAC,GAAGgnJ,eAAJ,GAAsB,CAAxB,IAA8BA,eAD/B,EAEChnJ,KAFD,EAGC,CAAEA,KAAC,GAAG,CAAN,IAAYgnJ,eAHb;AAKAr9E,gBAAM,CAACjpE,IAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;AAEA,cAAM6qD,KAAK,GAAGyyF,cAAc,CAACO,gBAAf,CAAiCC,KAAjC,CAAd;AACAA,eAAK,GAAGR,cAAc,CAACU,WAAf,CAA4BF,KAA5B,EAAmC,CAAnC,EAAsCjzF,KAAtC,CAAR;AACAoe,gBAAM,GAAGq0E,cAAc,CAACU,WAAf,CAA4B/0E,MAA5B,EAAoC,CAApC,EAAuCpe,KAAvC,CAAT,CAd4C,CAgB5C;AACA;;AACA,cAAK,CAAEw7F,MAAF,IAAYvI,KAAK,CAAE,CAAF,CAAL,KAAe,CAAhC,EAAoC;AAEnCA,iBAAK,CAAC99I,IAAN,CAAYsmJ,eAAZ;AACAr9E,kBAAM,CAACjpE,IAAP,CAAaipE,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAED21E,gBAAM,CAAC5+I,IAAP,CACC,IAAIslJ,mBAAJ,CACC,4BAA4Bc,mBAAmB,CAAE9mJ,KAAF,CAAnB,CAAyBjB,IAArD,GAA4D,GAD7D,EAECy/I,KAFD,EAEQ70E,MAFR,EAGE7sD,KAHF,CAGS,MAAMsiI,GAHf,CADD;AAMA;;AAED,eAAO,IAAIiH,aAAJ,CAAmBtnJ,IAAnB,EAAyB,CAAE,CAA3B,EAA8BugJ,MAA9B,CAAP;AAEA,OAnF4B;AAqF7B2H,gBAAU,EAAE,oBAAWC,iBAAX,EAA8BnoJ,IAA9B,EAAqC;AAEhD,YAAIooJ,SAAS,GAAGD,iBAAhB;;AAEA,YAAK,CAAEz1H,KAAK,CAAC0jC,OAAN,CAAe+xF,iBAAf,CAAP,EAA4C;AAE3C,cAAM32H,CAAC,GAAG22H,iBAAV;AACAC,mBAAS,GAAG52H,CAAC,CAAC+4C,QAAF,IAAc/4C,CAAC,CAAC+4C,QAAF,CAAW89E,UAAzB,IAAuC72H,CAAC,CAAC62H,UAArD;AAEA;;AAED,aAAM,IAAIpnJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGmnJ,SAAS,CAAC9nJ,MAA/B,EAAuCW,KAAC,EAAxC,EAA8C;AAE7C,cAAKmnJ,SAAS,CAAEnnJ,KAAF,CAAT,CAAejB,IAAf,KAAwBA,IAA7B,EAAoC;AAEnC,mBAAOooJ,SAAS,CAAEnnJ,KAAF,CAAhB;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OA5G4B;AA8G7BqnJ,yCAAmC,EAAE,6CAAWxpE,YAAX,EAAyBuhE,GAAzB,EAA8B2H,MAA9B,EAAuC;AAE3E,YAAMO,uBAAuB,GAAG,EAAhC,CAF2E,CAI3E;AACA;;AACA,YAAMr4I,OAAO,GAAG,oBAAhB,CAN2E,CAQ3E;AACA;;AACA,aAAM,IAAIjP,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGgS,YAAY,CAACx+E,MAAnC,EAA2CW,KAAC,GAAG6rE,EAA/C,EAAmD7rE,KAAC,EAApD,EAA0D;AAEzD,cAAMmiF,WAAW,GAAGtE,YAAY,CAAE79E,KAAF,CAAhC;AACA,cAAMunJ,KAAK,GAAGplE,WAAW,CAACpjF,IAAZ,CAAiB29C,KAAjB,CAAwBztC,OAAxB,CAAd;;AAEA,cAAKs4I,KAAK,IAAIA,KAAK,CAACloJ,MAAN,GAAe,CAA7B,EAAiC;AAEhC,gBAAMN,IAAI,GAAGwoJ,KAAK,CAAE,CAAF,CAAlB;AAEA,gBAAIC,qBAAqB,GAAGF,uBAAuB,CAAEvoJ,IAAF,CAAnD;;AAEA,gBAAK,CAAEyoJ,qBAAP,EAA+B;AAE9BF,qCAAuB,CAAEvoJ,IAAF,CAAvB,GAAkCyoJ,qBAAqB,GAAG,EAA1D;AAEA;;AAEDA,iCAAqB,CAAC9mJ,IAAtB,CAA4ByhF,WAA5B;AAEA;AAED;;AAED,YAAMslE,KAAK,GAAG,EAAd;;AAEA,aAAM,IAAM1oJ,MAAZ,IAAoBuoJ,uBAApB,EAA8C;AAE7CG,eAAK,CAAC/mJ,IAAN,CAAY2lJ,aAAa,CAACQ,6BAAd,CAA6C9nJ,MAA7C,EAAmDuoJ,uBAAuB,CAAEvoJ,MAAF,CAA1E,EAAoFqgJ,GAApF,EAAyF2H,MAAzF,CAAZ;AAEA;;AAED,eAAOU,KAAP;AAEA,OAzJ4B;AA2J7B;AACAC,oBAAc,EAAE,wBAAW3xB,SAAX,EAAsBrZ,KAAtB,EAA8B;AAE7C,YAAK,CAAEqZ,SAAP,EAAmB;AAElB50H,iBAAO,CAACD,KAAR,CAAe,uDAAf;AACA,iBAAO,IAAP;AAEA;;AAED,YAAMymJ,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAWtD,SAAX,EAAsBuD,SAAtB,EAAiCC,aAAjC,EAAgDC,YAAhD,EAA8DC,UAA9D,EAA2E;AAEnG;AACA,cAAKF,aAAa,CAACxoJ,MAAd,KAAyB,CAA9B,EAAkC;AAEjC,gBAAMm/I,KAAK,GAAG,EAAd;AACA,gBAAM70E,MAAM,GAAG,EAAf;AAEAq0E,0BAAc,CAACa,WAAf,CAA4BgJ,aAA5B,EAA2CrJ,KAA3C,EAAkD70E,MAAlD,EAA0Dm+E,YAA1D,EALiC,CAOjC;;AACA,gBAAKtJ,KAAK,CAACn/I,MAAN,KAAiB,CAAtB,EAA0B;AAEzB0oJ,wBAAU,CAACrnJ,IAAX,CAAiB,IAAI2jJ,SAAJ,CAAeuD,SAAf,EAA0BpJ,KAA1B,EAAiC70E,MAAjC,CAAjB;AAEA;AAED;AAED,SAnBD;;AAqBA,YAAM21E,MAAM,GAAG,EAAf;AAEA,YAAM0I,QAAQ,GAAGjyB,SAAS,CAACh3H,IAAV,IAAkB,SAAnC;AACA,YAAMqgJ,GAAG,GAAGrpB,SAAS,CAACqpB,GAAV,IAAiB,EAA7B;AACA,YAAM2B,SAAS,GAAGhrB,SAAS,CAACgrB,SAA5B,CAlC6C,CAoC7C;;AACA,YAAIuF,QAAQ,GAAGvwB,SAAS,CAAC12H,MAAV,IAAoB,CAAE,CAArC;AAEA,YAAM4oJ,eAAe,GAAGlyB,SAAS,CAACmyB,SAAV,IAAuB,EAA/C;;AAEA,aAAM,IAAIviI,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGsiI,eAAe,CAAC5oJ,MAArC,EAA6CsmB,CAAC,EAA9C,EAAoD;AAEnD,cAAMkiI,aAAa,GAAGI,eAAe,CAAEtiI,CAAF,CAAf,CAAqBloB,IAA3C,CAFmD,CAInD;;AACA,cAAK,CAAEoqJ,aAAF,IAAmBA,aAAa,CAACxoJ,MAAd,KAAyB,CAAjD,EAAqD,SALF,CAOnD;;AACA,cAAKwoJ,aAAa,CAAE,CAAF,CAAb,CAAmBhqE,YAAxB,EAAuC;AAEtC;AACA,gBAAMsqE,gBAAgB,GAAG,EAAzB;AAEA,gBAAI3nJ,CAAC,SAAL;;AAEA,iBAAMA,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGqnJ,aAAa,CAACxoJ,MAA/B,EAAuCmB,CAAC,EAAxC,EAA8C;AAE7C,kBAAKqnJ,aAAa,CAAErnJ,CAAF,CAAb,CAAmBq9E,YAAxB,EAAuC;AAEtC,qBAAM,IAAInpD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmzH,aAAa,CAAErnJ,CAAF,CAAb,CAAmBq9E,YAAnB,CAAgCx+E,MAArD,EAA6Dq1B,CAAC,EAA9D,EAAoE;AAEnEyzH,kCAAgB,CAAEN,aAAa,CAAErnJ,CAAF,CAAb,CAAmBq9E,YAAnB,CAAiCnpD,CAAjC,CAAF,CAAhB,GAA2D,CAAE,CAA7D;AAEA;AAED;AAED,aAnBqC,CAqBtC;AACA;AACA;;;AACA,iBAAM,IAAM0zH,eAAZ,IAA+BD,gBAA/B,EAAkD;AAEjD,kBAAM3J,KAAK,GAAG,EAAd;AACA,kBAAM70E,MAAM,GAAG,EAAf;;AAEA,mBAAM,IAAIj1C,EAAC,GAAG,CAAd,EAAiBA,EAAC,KAAKmzH,aAAa,CAAErnJ,CAAF,CAAb,CAAmBq9E,YAAnB,CAAgCx+E,MAAvD,EAA+D,EAAGq1B,EAAlE,EAAsE;AAErE,oBAAM2zH,YAAY,GAAGR,aAAa,CAAErnJ,CAAF,CAAlC;AAEAg+I,qBAAK,CAAC99I,IAAN,CAAY2nJ,YAAY,CAAC96G,IAAzB;AACAo8B,sBAAM,CAACjpE,IAAP,CAAe2nJ,YAAY,CAAClmE,WAAb,KAA6BimE,eAA/B,GAAmD,CAAnD,GAAuD,CAApE;AAEA;;AAED9I,oBAAM,CAAC5+I,IAAP,CAAa,IAAIslJ,mBAAJ,CAAyB,2BAA2BoC,eAA3B,GAA6C,GAAtE,EAA2E5J,KAA3E,EAAkF70E,MAAlF,CAAb;AAEA;;AAED28E,oBAAQ,GAAG6B,gBAAgB,CAAC9oJ,MAAjB,IAA4B+/I,GAAG,IAAI,GAAnC,CAAX;AAEA,WA5CD,MA4CO;AAEN;AAEA,gBAAMkJ,QAAQ,GAAG,YAAY5rC,KAAK,CAAE/2F,CAAF,CAAL,CAAW5mB,IAAvB,GAA8B,GAA/C;AAEA4oJ,4BAAgB,CACfvB,mBADe,EACMkC,QAAQ,GAAG,WADjB,EAEfT,aAFe,EAEA,KAFA,EAEOvI,MAFP,CAAhB;AAIAqI,4BAAgB,CACfzB,uBADe,EACUoC,QAAQ,GAAG,aADrB,EAEfT,aAFe,EAEA,KAFA,EAEOvI,MAFP,CAAhB;AAIAqI,4BAAgB,CACfvB,mBADe,EACMkC,QAAQ,GAAG,QADjB,EAEfT,aAFe,EAEA,KAFA,EAEOvI,MAFP,CAAhB;AAIA;AAED;;AAED,YAAKA,MAAM,CAACjgJ,MAAP,KAAkB,CAAvB,EAA2B;AAE1B,iBAAO,IAAP;AAEA;;AAED,YAAMggJ,IAAI,GAAG,IAAIgH,aAAJ,CAAmB2B,QAAnB,EAA6B1B,QAA7B,EAAuChH,MAAvC,EAA+CyB,SAA/C,CAAb;AAEA,eAAO1B,IAAP;AAEA;AAzR4B,KAA9B;AA6RA99I,UAAM,CAACiiC,MAAP,CAAe6iH,aAAa,CAACnvI,SAA7B,EAAwC;AAEvCyoI,mBAAa,EAAE,yBAAY;AAE1B,YAAML,MAAM,GAAG,KAAKA,MAApB;AACA,YAAIgH,QAAQ,GAAG,CAAf;;AAEA,aAAM,IAAItmJ,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG2uH,MAAM,CAACjgJ,MAA5B,EAAoCW,KAAC,KAAK2wB,CAA1C,EAA6C,EAAG3wB,KAAhD,EAAoD;AAEnD,cAAMu/I,KAAK,GAAG,KAAKD,MAAL,CAAat/I,KAAb,CAAd;AAEAsmJ,kBAAQ,GAAG/tI,IAAI,CAACmE,GAAL,CAAU4pI,QAAV,EAAoB/G,KAAK,CAACf,KAAN,CAAae,KAAK,CAACf,KAAN,CAAYn/I,MAAZ,GAAqB,CAAlC,CAApB,CAAX;AAEA;;AAED,aAAKinJ,QAAL,GAAgBA,QAAhB;AAEA,eAAO,IAAP;AAEA,OAnBsC;AAqBvCnnJ,UAAI,EAAE,gBAAY;AAEjB,aAAM,IAAIa,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAKs/I,MAAL,CAAYjgJ,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/C,eAAKs/I,MAAL,CAAat/I,KAAb,EAAiBb,IAAjB,CAAuB,CAAvB,EAA0B,KAAKmnJ,QAA/B;AAEA;;AAED,eAAO,IAAP;AAEA,OA/BsC;AAiCvCtB,cAAQ,EAAE,oBAAY;AAErB,YAAIC,KAAK,GAAG,IAAZ;;AAEA,aAAM,IAAIjlJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAKs/I,MAAL,CAAYjgJ,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/CilJ,eAAK,GAAGA,KAAK,IAAI,KAAK3F,MAAL,CAAat/I,KAAb,EAAiBglJ,QAAjB,EAAjB;AAEA;;AAED,eAAOC,KAAP;AAEA,OA7CsC;AA+CvCG,cAAQ,EAAE,oBAAY;AAErB,aAAM,IAAIplJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAKs/I,MAAL,CAAYjgJ,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/C,eAAKs/I,MAAL,CAAat/I,KAAb,EAAiBolJ,QAAjB;AAEA;;AAED,eAAO,IAAP;AAEA,OAzDsC;AA2DvC9qI,WAAK,EAAE,iBAAY;AAElB,YAAMglI,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAIt/I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAKs/I,MAAL,CAAYjgJ,MAAjC,EAAyCW,KAAC,EAA1C,EAAgD;AAE/Cs/I,gBAAM,CAAC5+I,IAAP,CAAa,KAAK4+I,MAAL,CAAat/I,KAAb,EAAiBsa,KAAjB,EAAb;AAEA;;AAED,eAAO,IAAI+rI,aAAJ,CAAmB,KAAKtnJ,IAAxB,EAA8B,KAAKunJ,QAAnC,EAA6ChH,MAA7C,EAAqD,KAAKyB,SAA1D,CAAP;AAEA;AAvEsC,KAAxC;AA2EA,QAAMwH,KAAK,GAAG;AAEbxwI,aAAO,EAAE,KAFI;AAIb6f,WAAK,EAAE,EAJM;AAMb3a,SAAG,EAAE,aAAW2sD,GAAX,EAAgB/1D,IAAhB,EAAuB;AAE3B,YAAK,KAAKkE,OAAL,KAAiB,KAAtB,EAA8B,OAFH,CAI3B;;AAEA,aAAK6f,KAAL,CAAYgyC,GAAZ,IAAoB/1D,IAApB;AAEA,OAdY;AAgBbhD,SAAG,EAAE,aAAW+4D,GAAX,EAAiB;AAErB,YAAK,KAAK7xD,OAAL,KAAiB,KAAtB,EAA8B,OAFT,CAIrB;;AAEA,eAAO,KAAK6f,KAAL,CAAYgyC,GAAZ,CAAP;AAEA,OAxBY;AA0Bb71D,YAAM,EAAE,gBAAW61D,GAAX,EAAiB;AAExB,eAAO,KAAKhyC,KAAL,CAAYgyC,GAAZ,CAAP;AAEA,OA9BY;AAgCbooB,WAAK,EAAE,iBAAY;AAElB,aAAKp6D,KAAL,GAAa,EAAb;AAEA;AApCY,KAAd;;AAwCA,aAAS4wH,cAAT,CAAyBC,MAAzB,EAAiCC,UAAjC,EAA6CC,OAA7C,EAAuD;AAEtD,UAAM1tI,KAAK,GAAG,IAAd;AAEA,UAAI2tI,SAAS,GAAG,KAAhB;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,UAAU,GAAG,CAAjB;AACA,UAAIC,WAAW,GAAG36I,SAAlB;AACA,UAAM46I,QAAQ,GAAG,EAAjB,CARsD,CAUtD;AACA;;AAEA,WAAKC,OAAL,GAAe76I,SAAf;AACA,WAAKq6I,MAAL,GAAcA,MAAd;AACA,WAAKC,UAAL,GAAkBA,UAAlB;AACA,WAAKC,OAAL,GAAeA,OAAf;;AAEA,WAAKO,SAAL,GAAiB,UAAWh+H,GAAX,EAAiB;AAEjC49H,kBAAU;;AAEV,YAAKF,SAAS,KAAK,KAAnB,EAA2B;AAE1B,cAAK3tI,KAAK,CAACguI,OAAN,KAAkB76I,SAAvB,EAAmC;AAElC6M,iBAAK,CAACguI,OAAN,CAAe/9H,GAAf,EAAoB29H,WAApB,EAAiCC,UAAjC;AAEA;AAED;;AAEDF,iBAAS,GAAG,IAAZ;AAEA,OAhBD;;AAkBA,WAAKO,OAAL,GAAe,UAAWj+H,GAAX,EAAiB;AAE/B29H,mBAAW;;AAEX,YAAK5tI,KAAK,CAACytI,UAAN,KAAqBt6I,SAA1B,EAAsC;AAErC6M,eAAK,CAACytI,UAAN,CAAkBx9H,GAAlB,EAAuB29H,WAAvB,EAAoCC,UAApC;AAEA;;AAED,YAAKD,WAAW,KAAKC,UAArB,EAAkC;AAEjCF,mBAAS,GAAG,KAAZ;;AAEA,cAAK3tI,KAAK,CAACwtI,MAAN,KAAiBr6I,SAAtB,EAAkC;AAEjC6M,iBAAK,CAACwtI,MAAN;AAEA;AAED;AAED,OAtBD;;AAwBA,WAAKW,SAAL,GAAiB,UAAWl+H,GAAX,EAAiB;AAEjC,YAAKjQ,KAAK,CAAC0tI,OAAN,KAAkBv6I,SAAvB,EAAmC;AAElC6M,eAAK,CAAC0tI,OAAN,CAAez9H,GAAf;AAEA;AAED,OARD;;AAUA,WAAKm+H,UAAL,GAAkB,UAAWn+H,GAAX,EAAiB;AAElC,YAAK69H,WAAL,EAAmB;AAElB,iBAAOA,WAAW,CAAE79H,GAAF,CAAlB;AAEA;;AAED,eAAOA,GAAP;AAEA,OAVD;;AAYA,WAAKo+H,cAAL,GAAsB,UAAWv1B,SAAX,EAAuB;AAE5Cg1B,mBAAW,GAAGh1B,SAAd;AAEA,eAAO,IAAP;AAEA,OAND;;AAQA,WAAKw1B,UAAL,GAAkB,UAAWC,KAAX,EAAkBC,MAAlB,EAA2B;AAE5CT,gBAAQ,CAACtoJ,IAAT,CAAe8oJ,KAAf,EAAsBC,MAAtB;AAEA,eAAO,IAAP;AAEA,OAND;;AAQA,WAAKC,aAAL,GAAqB,UAAWF,KAAX,EAAmB;AAEvC,YAAM1iI,KAAK,GAAGkiI,QAAQ,CAACt3H,OAAT,CAAkB83H,KAAlB,CAAd;;AAEA,YAAK1iI,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpBkiI,kBAAQ,CAACn4G,MAAT,CAAiB/pB,KAAjB,EAAwB,CAAxB;AAEA;;AAED,eAAO,IAAP;AAEA,OAZD;;AAcA,WAAK6iI,UAAL,GAAkB,UAAW91I,IAAX,EAAkB;AAEnC,aAAM,IAAI7T,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGu+I,QAAQ,CAAC3pJ,MAA9B,EAAsCW,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,IAAI,CAAlD,EAAsD;AAErD,cAAMwpJ,KAAK,GAAGR,QAAQ,CAAEhpJ,KAAF,CAAtB;AACA,cAAMypJ,MAAM,GAAGT,QAAQ,CAAEhpJ,KAAC,GAAG,CAAN,CAAvB;AAEA,cAAKwpJ,KAAK,CAAC7mH,MAAX,EAAoB6mH,KAAK,CAACp2C,SAAN,GAAkB,CAAlB,CALiC,CAKZ;;AAEzC,cAAKo2C,KAAK,CAACv3I,IAAN,CAAY4B,IAAZ,CAAL,EAA0B;AAEzB,mBAAO41I,MAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OAnBD;AAqBA;;AAED,QAAMG,qBAAqB,GAAG,IAAIpB,cAAJ,EAA9B;;AAEA,aAASqB,MAAT,CAAiBC,OAAjB,EAA2B;AAE1B,WAAKA,OAAL,GAAiBA,OAAO,KAAK17I,SAAd,GAA4B07I,OAA5B,GAAsCF,qBAArD;AAEA,WAAKG,WAAL,GAAmB,WAAnB;AACA,WAAK1mJ,IAAL,GAAY,EAAZ;AACA,WAAK2mJ,YAAL,GAAoB,EAApB;AACA,WAAKC,aAAL,GAAqB,EAArB;AAEA;;AAED1oJ,UAAM,CAACiiC,MAAP,CAAeqmH,MAAM,CAAC3yI,SAAtB,EAAiC;AAEhC0hB,UAAI,EAAE;AAAW;AAAyC,OAAE,CAF5B;AAIhCf,eAAS,EAAE,mBAAW3M,GAAX,EAAgBw9H,UAAhB,EAA6B;AAEvC,YAAMztI,KAAK,GAAG,IAAd;AAEA,eAAO,IAAI9d,OAAJ,CAAa,UAAWC,OAAX,EAAoBs7B,MAApB,EAA6B;AAEhDzd,eAAK,CAAC2d,IAAN,CAAY1N,GAAZ,EAAiB9tB,OAAjB,EAA0BsrJ,UAA1B,EAAsChwH,MAAtC;AAEA,SAJM,CAAP;AAMA,OAd+B;AAgBhClT,WAAK,EAAE;AAAW;AAAa,OAAE,CAhBD;AAkBhC0kI,oBAAc,EAAE,wBAAWH,WAAX,EAAyB;AAExC,aAAKA,WAAL,GAAmBA,WAAnB;AACA,eAAO,IAAP;AAEA,OAvB+B;AAyBhCI,aAAO,EAAE,iBAAW9mJ,IAAX,EAAkB;AAE1B,aAAKA,IAAL,GAAYA,IAAZ;AACA,eAAO,IAAP;AAEA,OA9B+B;AAgChC+mJ,qBAAe,EAAE,yBAAWJ,YAAX,EAA0B;AAE1C,aAAKA,YAAL,GAAoBA,YAApB;AACA,eAAO,IAAP;AAEA,OArC+B;AAuChCK,sBAAgB,EAAE,0BAAWJ,aAAX,EAA2B;AAE5C,aAAKA,aAAL,GAAqBA,aAArB;AACA,eAAO,IAAP;AAEA;AA5C+B,KAAjC;AAgDA,QAAMK,OAAO,GAAG,EAAhB;;AAEA,aAASC,UAAT,CAAqBT,OAArB,EAA+B;AAE9BD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAEDS,cAAU,CAACrzI,SAAX,GAAuB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAExE0M,iBAAW,EAAE2mI,UAF2D;AAIxE3xH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAKz9H,GAAG,KAAK9c,SAAb,EAAyB8c,GAAG,GAAG,EAAN;AAEzB,YAAK,KAAK7nB,IAAL,KAAc+K,SAAnB,EAA+B8c,GAAG,GAAG,KAAK7nB,IAAL,GAAY6nB,GAAlB;AAE/BA,WAAG,GAAG,KAAK4+H,OAAL,CAAaT,UAAb,CAAyBn+H,GAAzB,CAAN;AAEA,YAAMjQ,KAAK,GAAG,IAAd;AAEA,YAAMuvI,MAAM,GAAGjC,KAAK,CAAC13I,GAAN,CAAWqa,GAAX,CAAf;;AAEA,YAAKs/H,MAAM,KAAKp8I,SAAhB,EAA4B;AAE3B6M,eAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA3kB,oBAAU,CAAE,YAAY;AAEvB,gBAAKkiJ,MAAL,EAAcA,MAAM,CAAE+B,MAAF,CAAN;AAEdvvI,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WANS,EAMP,CANO,CAAV;AAQA,iBAAOs/H,MAAP;AAEA,SA1BkD,CA4BnD;;;AAEA,YAAKF,OAAO,CAAEp/H,GAAF,CAAP,KAAmB9c,SAAxB,EAAoC;AAEnCk8I,iBAAO,CAAEp/H,GAAF,CAAP,CAAexqB,IAAf,CAAqB;AAEpB+nJ,kBAAM,EAAEA,MAFY;AAGpBC,sBAAU,EAAEA,UAHQ;AAIpBC,mBAAO,EAAEA;AAJW,WAArB;AAQA;AAEA,SA1CkD,CA4CnD;;;AACA,YAAM8B,YAAY,GAAG,6BAArB;AACA,YAAMC,kBAAkB,GAAGx/H,GAAG,CAACwxB,KAAJ,CAAW+tG,YAAX,CAA3B;AACA,YAAIE,OAAJ,CA/CmD,CAiDnD;;AACA,YAAKD,kBAAL,EAA0B;AAEzB,cAAMrwH,QAAQ,GAAGqwH,kBAAkB,CAAE,CAAF,CAAnC;AACA,cAAME,QAAQ,GAAG,CAAC,CAAEF,kBAAkB,CAAE,CAAF,CAAtC;AAEA,cAAI7rJ,IAAI,GAAG6rJ,kBAAkB,CAAE,CAAF,CAA7B;AACA7rJ,cAAI,GAAGgsJ,kBAAkB,CAAEhsJ,IAAF,CAAzB;AAEA,cAAK+rJ,QAAL,EAAgB/rJ,IAAI,GAAGisJ,IAAI,CAAEjsJ,IAAF,CAAX;;AAEhB,cAAI;AAEH,gBAAIksJ,QAAJ;AACA,gBAAMC,YAAY,GAAG,CAAE,KAAKA,YAAL,IAAqB,EAAvB,EAA4BhsJ,WAA5B,EAArB;;AAEA,oBAASgsJ,YAAT;AAEC,mBAAK,aAAL;AACA,mBAAK,MAAL;AAEC,oBAAMh5I,IAAI,GAAG,IAAIwf,UAAJ,CAAgB3yB,IAAI,CAACQ,MAArB,CAAb;;AAEA,qBAAM,IAAIW,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGnB,IAAI,CAACQ,MAA1B,EAAkCW,KAAC,EAAnC,EAAyC;AAExCgS,sBAAI,CAAEhS,KAAF,CAAJ,GAAYnB,IAAI,CAACgnB,UAAL,CAAiB7lB,KAAjB,CAAZ;AAEA;;AAED,oBAAKgrJ,YAAY,KAAK,MAAtB,EAA+B;AAE9BD,0BAAQ,GAAG,IAAI9tH,IAAJ,CAAU,CAAEjrB,IAAI,CAAC+rB,MAAP,CAAV,EAA2B;AAAEr5B,wBAAI,EAAE21B;AAAR,mBAA3B,CAAX;AAEA,iBAJD,MAIO;AAEN0wH,0BAAQ,GAAG/4I,IAAI,CAAC+rB,MAAhB;AAEA;;AAED;;AAED,mBAAK,UAAL;AAEC,oBAAMktH,MAAM,GAAG,IAAIC,SAAJ,EAAf;AACAH,wBAAQ,GAAGE,MAAM,CAACE,eAAP,CAAwBtsJ,IAAxB,EAA8Bw7B,QAA9B,CAAX;AAEA;;AAED,mBAAK,MAAL;AAEC0wH,wBAAQ,GAAGxlI,IAAI,CAACC,KAAL,CAAY3mB,IAAZ,CAAX;AAEA;;AAED;AAAS;AAERksJ,wBAAQ,GAAGlsJ,IAAX;AAEA;AA1CF,aALG,CAmDH;;;AACA0H,sBAAU,CAAE,YAAY;AAEvB,kBAAKkiJ,MAAL,EAAcA,MAAM,CAAEsC,QAAF,CAAN;AAEd9vI,mBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,aANS,EAMP,CANO,CAAV;AAQA,WA5DD,CA4DE,OAAQhqB,KAAR,EAAgB;AAEjB;AACAqF,sBAAU,CAAE,YAAY;AAEvB,kBAAKoiJ,OAAL,EAAeA,OAAO,CAAEznJ,KAAF,CAAP;AAEf+Z,mBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,mBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,aAPS,EAOP,CAPO,CAAV;AASA;AAED,SApFD,MAoFO;AAEN;AAEAo/H,iBAAO,CAAEp/H,GAAF,CAAP,GAAiB,EAAjB;AAEAo/H,iBAAO,CAAEp/H,GAAF,CAAP,CAAexqB,IAAf,CAAqB;AAEpB+nJ,kBAAM,EAAEA,MAFY;AAGpBC,sBAAU,EAAEA,UAHQ;AAIpBC,mBAAO,EAAEA;AAJW,WAArB;AAQAgC,iBAAO,GAAG,IAAIS,cAAJ,EAAV;AAEAT,iBAAO,CAACtlJ,IAAR,CAAc,KAAd,EAAqB6lB,GAArB,EAA0B,IAA1B;AAEAy/H,iBAAO,CAACpzI,gBAAR,CAA0B,MAA1B,EAAkC,UAAWjZ,KAAX,EAAmB;AAEpD,gBAAMysJ,QAAQ,GAAG,KAAKA,QAAtB;AAEA,gBAAMM,SAAS,GAAGf,OAAO,CAAEp/H,GAAF,CAAzB;AAEA,mBAAOo/H,OAAO,CAAEp/H,GAAF,CAAd;;AAEA,gBAAK,KAAK3f,MAAL,KAAgB,GAAhB,IAAuB,KAAKA,MAAL,KAAgB,CAA5C,EAAgD;AAE/C;AACA;AAEA,kBAAK,KAAKA,MAAL,KAAgB,CAArB,EAAyBpK,OAAO,CAAC2W,IAAR,CAAc,2CAAd,EALsB,CAO/C;AACA;;AACAywI,mBAAK,CAACtrI,GAAN,CAAWiO,GAAX,EAAgB6/H,QAAhB;;AAEA,mBAAM,IAAI/qJ,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGw/E,SAAS,CAAChsJ,MAAhC,EAAwCW,KAAC,GAAG6rE,EAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtD,oBAAM47D,QAAQ,GAAGyvF,SAAS,CAAErrJ,KAAF,CAA1B;AACA,oBAAK47D,QAAQ,CAAC6sF,MAAd,EAAuB7sF,QAAQ,CAAC6sF,MAAT,CAAiBsC,QAAjB;AAEvB;;AAED9vI,mBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,aApBD,MAoBO;AAEN,mBAAM,IAAIlrB,KAAC,GAAG,CAAR,EAAW6rE,KAAE,GAAGw/E,SAAS,CAAChsJ,MAAhC,EAAwCW,KAAC,GAAG6rE,KAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtD,oBAAM47D,SAAQ,GAAGyvF,SAAS,CAAErrJ,KAAF,CAA1B;AACA,oBAAK47D,SAAQ,CAAC+sF,OAAd,EAAwB/sF,SAAQ,CAAC+sF,OAAT,CAAkBrqJ,KAAlB;AAExB;;AAED2c,mBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,mBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA;AAED,WA1CD,EA0CG,KA1CH;AA4CAy/H,iBAAO,CAACpzI,gBAAR,CAA0B,UAA1B,EAAsC,UAAWjZ,KAAX,EAAmB;AAExD,gBAAM+sJ,SAAS,GAAGf,OAAO,CAAEp/H,GAAF,CAAzB;;AAEA,iBAAM,IAAIlrB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGw/E,SAAS,CAAChsJ,MAAhC,EAAwCW,KAAC,GAAG6rE,EAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtD,kBAAM47D,QAAQ,GAAGyvF,SAAS,CAAErrJ,KAAF,CAA1B;AACA,kBAAK47D,QAAQ,CAAC8sF,UAAd,EAA2B9sF,QAAQ,CAAC8sF,UAAT,CAAqBpqJ,KAArB;AAE3B;AAED,WAXD,EAWG,KAXH;AAaAqsJ,iBAAO,CAACpzI,gBAAR,CAA0B,OAA1B,EAAmC,UAAWjZ,KAAX,EAAmB;AAErD,gBAAM+sJ,SAAS,GAAGf,OAAO,CAAEp/H,GAAF,CAAzB;AAEA,mBAAOo/H,OAAO,CAAEp/H,GAAF,CAAd;;AAEA,iBAAM,IAAIlrB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGw/E,SAAS,CAAChsJ,MAAhC,EAAwCW,KAAC,GAAG6rE,EAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtD,kBAAM47D,QAAQ,GAAGyvF,SAAS,CAAErrJ,KAAF,CAA1B;AACA,kBAAK47D,QAAQ,CAAC+sF,OAAd,EAAwB/sF,QAAQ,CAAC+sF,OAAT,CAAkBrqJ,KAAlB;AAExB;;AAED2c,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WAhBD,EAgBG,KAhBH;AAkBAy/H,iBAAO,CAACpzI,gBAAR,CAA0B,OAA1B,EAAmC,UAAWjZ,KAAX,EAAmB;AAErD,gBAAM+sJ,SAAS,GAAGf,OAAO,CAAEp/H,GAAF,CAAzB;AAEA,mBAAOo/H,OAAO,CAAEp/H,GAAF,CAAd;;AAEA,iBAAM,IAAIlrB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGw/E,SAAS,CAAChsJ,MAAhC,EAAwCW,KAAC,GAAG6rE,EAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtD,kBAAM47D,QAAQ,GAAGyvF,SAAS,CAAErrJ,KAAF,CAA1B;AACA,kBAAK47D,QAAQ,CAAC+sF,OAAd,EAAwB/sF,QAAQ,CAAC+sF,OAAT,CAAkBrqJ,KAAlB;AAExB;;AAED2c,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WAhBD,EAgBG,KAhBH;AAkBA,cAAK,KAAK8/H,YAAL,KAAsB58I,SAA3B,EAAuCu8I,OAAO,CAACK,YAAR,GAAuB,KAAKA,YAA5B;AACvC,cAAK,KAAKM,eAAL,KAAyBl9I,SAA9B,EAA0Cu8I,OAAO,CAACW,eAAR,GAA0B,KAAKA,eAA/B;AAE1C,cAAKX,OAAO,CAACY,gBAAb,EAAgCZ,OAAO,CAACY,gBAAR,CAA0B,KAAKlxH,QAAL,KAAkBjsB,SAAlB,GAA8B,KAAKisB,QAAnC,GAA8C,YAAxE;;AAEhC,eAAM,IAAMkK,MAAZ,IAAsB,KAAK0lH,aAA3B,EAA2C;AAE1CU,mBAAO,CAACN,gBAAR,CAA0B9lH,MAA1B,EAAkC,KAAK0lH,aAAL,CAAoB1lH,MAApB,CAAlC;AAEA;;AAEDomH,iBAAO,CAACa,IAAR,CAAc,IAAd;AAEA;;AAEDvwI,aAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA,eAAOy/H,OAAP;AAEA,OA5QuE;AA8QxEc,qBAAe,EAAE,yBAAW3hJ,KAAX,EAAmB;AAEnC,aAAKkhJ,YAAL,GAAoBlhJ,KAApB;AACA,eAAO,IAAP;AAEA,OAnRuE;AAqRxE4hJ,wBAAkB,EAAE,4BAAW5hJ,KAAX,EAAmB;AAEtC,aAAKwhJ,eAAL,GAAuBxhJ,KAAvB;AACA,eAAO,IAAP;AAEA,OA1RuE;AA4RxE6hJ,iBAAW,EAAE,qBAAW7hJ,KAAX,EAAmB;AAE/B,aAAKuwB,QAAL,GAAgBvwB,KAAhB;AACA,eAAO,IAAP;AAEA;AAjSuE,KAAlD,CAAvB;;AAqSA,aAAS8hJ,eAAT,CAA0B9B,OAA1B,EAAoC;AAEnCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED8B,mBAAe,CAAC10I,SAAhB,GAA4B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE7E0M,iBAAW,EAAEgoI,eAFgE;AAI7EhzH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMwuI,MAAM,GAAG,IAAIc,UAAJ,CAAgBtvI,KAAK,CAAC6uI,OAAtB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgBlvI,KAAK,CAAC5X,IAAtB;AACAomJ,cAAM,CAACY,gBAAP,CAAyBpvI,KAAK,CAACgvI,aAA/B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW7e,IAAX,EAAkB;AAEnC,cAAI;AAEHo8I,kBAAM,CAAExtI,KAAK,CAACuK,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYnZ,IAAZ,CAAb,CAAF,CAAN;AAEA,WAJD,CAIE,OAAQ/O,CAAR,EAAY;AAEb,gBAAKqrJ,OAAL,EAAe;AAEdA,qBAAO,CAAErrJ,CAAF,CAAP;AAEA,aAJD,MAIO;AAEN6D,qBAAO,CAACD,KAAR,CAAe5D,CAAf;AAEA;;AAED2d,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AAEA;AAED,SAtBD,EAsBGw9H,UAtBH,EAsBeC,OAtBf;AAwBA,OAnC4E;AAqC7EnjI,WAAK,EAAE,eAAW8+H,IAAX,EAAkB;AAExB,YAAM8C,UAAU,GAAG,EAAnB;;AAEA,aAAM,IAAIpnJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGskJ,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,EAAnC,EAAyC;AAExC,cAAMq/I,IAAI,GAAGgH,aAAa,CAAC7gI,KAAd,CAAqB8+H,IAAI,CAAEtkJ,KAAF,CAAzB,CAAb;AAEAonJ,oBAAU,CAAC1mJ,IAAX,CAAiB2+I,IAAjB;AAEA;;AAED,eAAO+H,UAAP;AAEA;AAnD4E,KAAlD,CAA5B;AAuDA;;;;;;AAMA,aAASyE,uBAAT,CAAkC/B,OAAlC,EAA4C;AAE3CD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED+B,2BAAuB,CAAC30I,SAAxB,GAAoC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAErF0M,iBAAW,EAAEioI,uBAFwE;AAIrFjzH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMi6C,MAAM,GAAG,EAAf;AAEA,YAAMmC,OAAO,GAAG,IAAIgzE,iBAAJ,EAAhB;AACAhzE,eAAO,CAACj3D,KAAR,GAAgB80D,MAAhB;AAEA,YAAMu0F,MAAM,GAAG,IAAIc,UAAJ,CAAgB,KAAKT,OAArB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AACAomJ,cAAM,CAACgC,eAAP,CAAwB,aAAxB;AACAhC,cAAM,CAACY,gBAAP,CAAyB,KAAKJ,aAA9B;AAEA,YAAI6B,MAAM,GAAG,CAAb;;AAEA,iBAASC,WAAT,CAAsB/rJ,CAAtB,EAA0B;AAEzBypJ,gBAAM,CAAC7wH,IAAP,CAAa1N,GAAG,CAAElrB,CAAF,CAAhB,EAAuB,UAAW+9B,MAAX,EAAoB;AAE1C,gBAAMiuH,QAAQ,GAAG/wI,KAAK,CAACuK,KAAN,CAAauY,MAAb,EAAqB,IAArB,CAAjB;AAEAm3B,kBAAM,CAAEl1D,CAAF,CAAN,GAAc;AACbsuB,mBAAK,EAAE09H,QAAQ,CAAC19H,KADH;AAEbD,oBAAM,EAAE29H,QAAQ,CAAC39H,MAFJ;AAGbwlC,oBAAM,EAAEm4F,QAAQ,CAACn4F,MAHJ;AAIbI,qBAAO,EAAE+3F,QAAQ,CAAC/3F;AAJL,aAAd;AAOA63F,kBAAM,IAAI,CAAV;;AAEA,gBAAKA,MAAM,KAAK,CAAhB,EAAoB;AAEnB,kBAAKE,QAAQ,CAACC,WAAT,KAAyB,CAA9B,EACC50F,OAAO,CAACzD,SAAR,GAAoBzS,YAApB;AAEDkW,qBAAO,CAACxD,MAAR,GAAiBm4F,QAAQ,CAACn4F,MAA1B;AACAwD,qBAAO,CAACr1C,WAAR,GAAsB,IAAtB;AAEA,kBAAKymI,MAAL,EAAcA,MAAM,CAAEpxF,OAAF,CAAN;AAEd;AAED,WAzBD,EAyBGqxF,UAzBH,EAyBeC,OAzBf;AA2BA;;AAED,YAAKl3H,KAAK,CAAC0jC,OAAN,CAAejqC,GAAf,CAAL,EAA4B;AAE3B,eAAM,IAAIlrB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG3gD,GAAG,CAAC7rB,MAA1B,EAAkCW,KAAC,GAAG6rE,EAAtC,EAA0C,EAAG7rE,KAA7C,EAAiD;AAEhD+rJ,uBAAW,CAAE/rJ,KAAF,CAAX;AAEA;AAED,SARD,MAQO;AAEN;AAEAypJ,gBAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW6S,MAAX,EAAoB;AAErC,gBAAMiuH,QAAQ,GAAG/wI,KAAK,CAACuK,KAAN,CAAauY,MAAb,EAAqB,IAArB,CAAjB;;AAEA,gBAAKiuH,QAAQ,CAACE,SAAd,EAA0B;AAEzB,kBAAM/7H,KAAK,GAAG67H,QAAQ,CAAC/3F,OAAT,CAAiB50D,MAAjB,GAA0B2sJ,QAAQ,CAACC,WAAjD;;AAEA,mBAAM,IAAIj7H,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGb,KAArB,EAA4Ba,CAAC,EAA7B,EAAmC;AAElCkkC,sBAAM,CAAElkC,CAAF,CAAN,GAAc;AAAEijC,yBAAO,EAAE;AAAX,iBAAd;;AAEA,qBAAM,IAAIj0D,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGgsJ,QAAQ,CAACC,WAA9B,EAA2CjsJ,KAAC,EAA5C,EAAkD;AAEjDk1D,wBAAM,CAAElkC,CAAF,CAAN,CAAYijC,OAAZ,CAAoBvzD,IAApB,CAA0BsrJ,QAAQ,CAAC/3F,OAAT,CAAkBjjC,CAAC,GAAGg7H,QAAQ,CAACC,WAAb,GAA2BjsJ,KAA7C,CAA1B;AACAk1D,wBAAM,CAAElkC,CAAF,CAAN,CAAY6iC,MAAZ,GAAqBm4F,QAAQ,CAACn4F,MAA9B;AACAqB,wBAAM,CAAElkC,CAAF,CAAN,CAAY1C,KAAZ,GAAoB09H,QAAQ,CAAC19H,KAA7B;AACA4mC,wBAAM,CAAElkC,CAAF,CAAN,CAAY3C,MAAZ,GAAqB29H,QAAQ,CAAC39H,MAA9B;AAEA;AAED;AAED,aAnBD,MAmBO;AAENgpC,qBAAO,CAACj3D,KAAR,CAAckuB,KAAd,GAAsB09H,QAAQ,CAAC19H,KAA/B;AACA+oC,qBAAO,CAACj3D,KAAR,CAAciuB,MAAd,GAAuB29H,QAAQ,CAAC39H,MAAhC;AACAgpC,qBAAO,CAACpD,OAAR,GAAkB+3F,QAAQ,CAAC/3F,OAA3B;AAEA;;AAED,gBAAK+3F,QAAQ,CAACC,WAAT,KAAyB,CAA9B,EAAkC;AAEjC50F,qBAAO,CAACzD,SAAR,GAAoBzS,YAApB;AAEA;;AAEDkW,mBAAO,CAACxD,MAAR,GAAiBm4F,QAAQ,CAACn4F,MAA1B;AACAwD,mBAAO,CAACr1C,WAAR,GAAsB,IAAtB;AAEA,gBAAKymI,MAAL,EAAcA,MAAM,CAAEpxF,OAAF,CAAN;AAEd,WA1CD,EA0CGqxF,UA1CH,EA0CeC,OA1Cf;AA4CA;;AAED,eAAOtxF,OAAP;AAEA;AA/GoF,KAAlD,CAApC;AAmHA;;;;;;AAMA,aAAS80F,iBAAT,CAA4BrC,OAA5B,EAAsC;AAErCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAEDqC,qBAAiB,CAACj1I,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE/E0M,iBAAW,EAAEuoI,iBAFkE;AAI/EvzH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMo8C,OAAO,GAAG,IAAIk7B,WAAJ,EAAhB;AAEA,YAAMk3D,MAAM,GAAG,IAAIc,UAAJ,CAAgB,KAAKT,OAArB,CAAf;AACAL,cAAM,CAACgC,eAAP,CAAwB,aAAxB;AACAhC,cAAM,CAACY,gBAAP,CAAyB,KAAKJ,aAA9B;AACAR,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AACAomJ,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW6S,MAAX,EAAoB;AAErC,cAAMquH,OAAO,GAAGnxI,KAAK,CAACuK,KAAN,CAAauY,MAAb,CAAhB;AAEA,cAAK,CAAEquH,OAAP,EAAiB;;AAEjB,cAAKA,OAAO,CAAChsJ,KAAR,KAAkBgO,SAAvB,EAAmC;AAElCipD,mBAAO,CAACj3D,KAAR,GAAgBgsJ,OAAO,CAAChsJ,KAAxB;AAEA,WAJD,MAIO,IAAKgsJ,OAAO,CAACvtJ,IAAR,KAAiBuP,SAAtB,EAAkC;AAExCipD,mBAAO,CAACj3D,KAAR,CAAckuB,KAAd,GAAsB89H,OAAO,CAAC99H,KAA9B;AACA+oC,mBAAO,CAACj3D,KAAR,CAAciuB,MAAd,GAAuB+9H,OAAO,CAAC/9H,MAA/B;AACAgpC,mBAAO,CAACj3D,KAAR,CAAcvB,IAAd,GAAqButJ,OAAO,CAACvtJ,IAA7B;AAEA;;AAEDw4D,iBAAO,CAAC5D,KAAR,GAAgB24F,OAAO,CAAC34F,KAAR,KAAkBrlD,SAAlB,GAA8Bg+I,OAAO,CAAC34F,KAAtC,GAA8C7S,mBAA9D;AACAyW,iBAAO,CAAC3D,KAAR,GAAgB04F,OAAO,CAAC14F,KAAR,KAAkBtlD,SAAlB,GAA8Bg+I,OAAO,CAAC14F,KAAtC,GAA8C9S,mBAA9D;AAEAyW,iBAAO,CAAC1D,SAAR,GAAoBy4F,OAAO,CAACz4F,SAAR,KAAsBvlD,SAAtB,GAAkCg+I,OAAO,CAACz4F,SAA1C,GAAsDxS,YAA1E;AACAkW,iBAAO,CAACzD,SAAR,GAAoBw4F,OAAO,CAACx4F,SAAR,KAAsBxlD,SAAtB,GAAkCg+I,OAAO,CAACx4F,SAA1C,GAAsDzS,YAA1E;AAEAkW,iBAAO,CAACvD,UAAR,GAAqBs4F,OAAO,CAACt4F,UAAR,KAAuB1lD,SAAvB,GAAmCg+I,OAAO,CAACt4F,UAA3C,GAAwD,CAA7E;;AAEA,cAAKs4F,OAAO,CAACv4F,MAAR,KAAmBzlD,SAAxB,EAAoC;AAEnCipD,mBAAO,CAACxD,MAAR,GAAiBu4F,OAAO,CAACv4F,MAAzB;AAEA;;AAED,cAAKu4F,OAAO,CAAC1nJ,IAAR,KAAiB0J,SAAtB,EAAkC;AAEjCipD,mBAAO,CAAC3yD,IAAR,GAAe0nJ,OAAO,CAAC1nJ,IAAvB;AAEA;;AAED,cAAK0nJ,OAAO,CAACn4F,OAAR,KAAoB7lD,SAAzB,EAAqC;AAEpCipD,mBAAO,CAACpD,OAAR,GAAkBm4F,OAAO,CAACn4F,OAA1B;AACAoD,mBAAO,CAACzD,SAAR,GAAoBtS,wBAApB,CAHoC,CAGU;AAE9C;;AAED,cAAK8qG,OAAO,CAACH,WAAR,KAAwB,CAA7B,EAAiC;AAEhC50F,mBAAO,CAACzD,SAAR,GAAoBzS,YAApB;AAEA;;AAEDkW,iBAAO,CAACr1C,WAAR,GAAsB,IAAtB;AAEA,cAAKymI,MAAL,EAAcA,MAAM,CAAEpxF,OAAF,EAAW+0F,OAAX,CAAN;AAEd,SAvDD,EAuDG1D,UAvDH,EAuDeC,OAvDf;AA0DA,eAAOtxF,OAAP;AAEA;AA1E8E,KAAlD,CAA9B;;AA8EA,aAASg1F,WAAT,CAAsBvC,OAAtB,EAAgC;AAE/BD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAEDuC,eAAW,CAACn1I,SAAZ,GAAwB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAEzE0M,iBAAW,EAAEyoI,WAF4D;AAIzEzzH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAK,KAAKtlJ,IAAL,KAAc+K,SAAnB,EAA+B8c,GAAG,GAAG,KAAK7nB,IAAL,GAAY6nB,GAAlB;AAE/BA,WAAG,GAAG,KAAK4+H,OAAL,CAAaT,UAAb,CAAyBn+H,GAAzB,CAAN;AAEA,YAAMjQ,KAAK,GAAG,IAAd;AAEA,YAAMuvI,MAAM,GAAGjC,KAAK,CAAC13I,GAAN,CAAWqa,GAAX,CAAf;;AAEA,YAAKs/H,MAAM,KAAKp8I,SAAhB,EAA4B;AAE3B6M,eAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA3kB,oBAAU,CAAE,YAAY;AAEvB,gBAAKkiJ,MAAL,EAAcA,MAAM,CAAE+B,MAAF,CAAN;AAEdvvI,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WANS,EAMP,CANO,CAAV;AAQA,iBAAOs/H,MAAP;AAEA;;AAED,YAAMpqJ,KAAK,GAAGgS,QAAQ,CAACK,eAAT,CAA0B,8BAA1B,EAA0D,KAA1D,CAAd;;AAEA,iBAAS65I,WAAT,GAAuB;AAEtBlsJ,eAAK,CAACqX,mBAAN,CAA2B,MAA3B,EAAmC60I,WAAnC,EAAgD,KAAhD;AACAlsJ,eAAK,CAACqX,mBAAN,CAA2B,OAA3B,EAAoC80I,YAApC,EAAkD,KAAlD;AAEAhE,eAAK,CAACtrI,GAAN,CAAWiO,GAAX,EAAgB,IAAhB;AAEA,cAAKu9H,MAAL,EAAcA,MAAM,CAAE,IAAF,CAAN;AAEdxtI,eAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA;;AAED,iBAASqhI,YAAT,CAAuBjuJ,KAAvB,EAA+B;AAE9B8B,eAAK,CAACqX,mBAAN,CAA2B,MAA3B,EAAmC60I,WAAnC,EAAgD,KAAhD;AACAlsJ,eAAK,CAACqX,mBAAN,CAA2B,OAA3B,EAAoC80I,YAApC,EAAkD,KAAlD;AAEA,cAAK5D,OAAL,EAAeA,OAAO,CAAErqJ,KAAF,CAAP;AAEf2c,eAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,eAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA;;AAED9qB,aAAK,CAACmX,gBAAN,CAAwB,MAAxB,EAAgC+0I,WAAhC,EAA6C,KAA7C;AACAlsJ,aAAK,CAACmX,gBAAN,CAAwB,OAAxB,EAAiCg1I,YAAjC,EAA+C,KAA/C;;AAEA,YAAKrhI,GAAG,CAACmG,MAAJ,CAAY,CAAZ,EAAe,CAAf,MAAuB,OAA5B,EAAsC;AAErC,cAAK,KAAK04H,WAAL,KAAqB37I,SAA1B,EAAsChO,KAAK,CAAC2pJ,WAAN,GAAoB,KAAKA,WAAzB;AAEtC;;AAED9uI,aAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA9qB,aAAK,CAAC2yD,GAAN,GAAY7nC,GAAZ;AAEA,eAAO9qB,KAAP;AAEA;AAxEwE,KAAlD,CAAxB;;AA4EA,aAASosJ,iBAAT,CAA4B1C,OAA5B,EAAsC;AAErCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED0C,qBAAiB,CAACt1I,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE/E0M,iBAAW,EAAE4oI,iBAFkE;AAI/E5zH,UAAI,EAAE,cAAW6zH,IAAX,EAAiBhE,MAAjB,EAAyBC,UAAzB,EAAqCC,OAArC,EAA+C;AAEpD,YAAMtxF,OAAO,GAAG,IAAIu2C,WAAJ,EAAhB;AAEA,YAAM67C,MAAM,GAAG,IAAI4C,WAAJ,CAAiB,KAAKvC,OAAtB,CAAf;AACAL,cAAM,CAACS,cAAP,CAAuB,KAAKH,WAA5B;AACAN,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AAEA,YAAIyoJ,MAAM,GAAG,CAAb;;AAEA,iBAASC,WAAT,CAAsB/rJ,CAAtB,EAA0B;AAEzBypJ,gBAAM,CAAC7wH,IAAP,CAAa6zH,IAAI,CAAEzsJ,CAAF,CAAjB,EAAwB,UAAWI,KAAX,EAAmB;AAE1Ci3D,mBAAO,CAACnC,MAAR,CAAgBl1D,CAAhB,IAAsBI,KAAtB;AAEA0rJ,kBAAM;;AAEN,gBAAKA,MAAM,KAAK,CAAhB,EAAoB;AAEnBz0F,qBAAO,CAACr1C,WAAR,GAAsB,IAAtB;AAEA,kBAAKymI,MAAL,EAAcA,MAAM,CAAEpxF,OAAF,CAAN;AAEd;AAED,WAdD,EAcGjpD,SAdH,EAccu6I,OAdd;AAgBA;;AAED,aAAM,IAAI3oJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGysJ,IAAI,CAACptJ,MAA1B,EAAkC,EAAGW,KAArC,EAAyC;AAExC+rJ,qBAAW,CAAE/rJ,KAAF,CAAX;AAEA;;AAED,eAAOq3D,OAAP;AAEA;AA1C8E,KAAlD,CAA9B;;AA8CA,aAASq1F,aAAT,CAAwB5C,OAAxB,EAAkC;AAEjCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED4C,iBAAa,CAACx1I,SAAd,GAA0B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE3E0M,iBAAW,EAAE8oI,aAF8D;AAI3E9zH,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAMtxF,OAAO,GAAG,IAAI9D,OAAJ,EAAhB;AAEA,YAAMk2F,MAAM,GAAG,IAAI4C,WAAJ,CAAiB,KAAKvC,OAAtB,CAAf;AACAL,cAAM,CAACS,cAAP,CAAuB,KAAKH,WAA5B;AACAN,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AAEAomJ,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW9qB,KAAX,EAAmB;AAEpCi3D,iBAAO,CAACj3D,KAAR,GAAgBA,KAAhB,CAFoC,CAIpC;;AACA,cAAMusJ,MAAM,GAAGzhI,GAAG,CAAC0hI,MAAJ,CAAY,gBAAZ,IAAiC,CAAjC,IAAsC1hI,GAAG,CAAC0hI,MAAJ,CAAY,oBAAZ,MAAuC,CAA5F;AAEAv1F,iBAAO,CAACxD,MAAR,GAAiB84F,MAAM,GAAGtqG,SAAH,GAAeC,UAAtC;AACA+U,iBAAO,CAACr1C,WAAR,GAAsB,IAAtB;;AAEA,cAAKymI,MAAM,KAAKr6I,SAAhB,EAA4B;AAE3Bq6I,kBAAM,CAAEpxF,OAAF,CAAN;AAEA;AAED,SAhBD,EAgBGqxF,UAhBH,EAgBeC,OAhBf;AAkBA,eAAOtxF,OAAP;AAEA;AAhC0E,KAAlD,CAA1B;AAoCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,aAASw1F,KAAT,GAAiB;AAEhB,WAAKnoJ,IAAL,GAAY,OAAZ;AAEA,WAAKooJ,kBAAL,GAA0B,GAA1B;AAEA;;AAEDvrJ,UAAM,CAACiiC,MAAP,CAAeqpH,KAAK,CAAC31I,SAArB,EAAgC;AAE/B;AACA;AAEA61I,cAAQ,EAAE;AAAW;AAA0B;AAE9C5rJ,eAAO,CAAC2W,IAAR,CAAc,2CAAd;AACA,eAAO,IAAP;AAEA,OAV8B;AAY/B;AACA;AAEAs2H,gBAAU,EAAE,oBAAW59G,CAAX,EAAcw8H,cAAd,EAA+B;AAE1C,YAAMjnI,CAAC,GAAG,KAAKknI,cAAL,CAAqBz8H,CAArB,CAAV;AACA,eAAO,KAAKu8H,QAAL,CAAehnI,CAAf,EAAkBinI,cAAlB,CAAP;AAEA,OApB8B;AAsB/B;AAEAE,eAAS,EAAE,mBAAWC,SAAX,EAAuB;AAEjC,YAAKA,SAAS,KAAK/+I,SAAnB,EAA+B++I,SAAS,GAAG,CAAZ;AAE/B,YAAMp/H,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAI8C,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIs8H,SAAtB,EAAiCt8H,CAAC,EAAlC,EAAwC;AAEvC9C,gBAAM,CAACrtB,IAAP,CAAa,KAAKqsJ,QAAL,CAAel8H,CAAC,GAAGs8H,SAAnB,CAAb;AAEA;;AAED,eAAOp/H,MAAP;AAEA,OAtC8B;AAwC/B;AAEA2nH,qBAAe,EAAE,yBAAWyX,SAAX,EAAuB;AAEvC,YAAKA,SAAS,KAAK/+I,SAAnB,EAA+B++I,SAAS,GAAG,CAAZ;AAE/B,YAAMp/H,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAI8C,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIs8H,SAAtB,EAAiCt8H,CAAC,EAAlC,EAAwC;AAEvC9C,gBAAM,CAACrtB,IAAP,CAAa,KAAK0tI,UAAL,CAAiBv9G,CAAC,GAAGs8H,SAArB,CAAb;AAEA;;AAED,eAAOp/H,MAAP;AAEA,OAxD8B;AA0D/B;AAEAq/H,eAAS,EAAE,qBAAY;AAEtB,YAAMC,OAAO,GAAG,KAAKC,UAAL,EAAhB;AACA,eAAOD,OAAO,CAAEA,OAAO,CAAChuJ,MAAR,GAAiB,CAAnB,CAAd;AAEA,OAjE8B;AAmE/B;AAEAiuJ,gBAAU,EAAE,oBAAWH,SAAX,EAAuB;AAElC,YAAKA,SAAS,KAAK/+I,SAAnB,EAA+B++I,SAAS,GAAG,KAAKL,kBAAjB;;AAE/B,YAAK,KAAKS,eAAL,IACF,KAAKA,eAAL,CAAqBluJ,MAArB,KAAgC8tJ,SAAS,GAAG,CAD1C,IAEJ,CAAE,KAAKnrI,WAFR,EAEsB;AAErB,iBAAO,KAAKurI,eAAZ;AAEA;;AAED,aAAKvrI,WAAL,GAAmB,KAAnB;AAEA,YAAM0nD,KAAK,GAAG,EAAd;AACA,YAAI8jF,OAAJ;AAAA,YAAa7+G,IAAI,GAAG,KAAKo+G,QAAL,CAAe,CAAf,CAApB;AACA,YAAIrZ,GAAG,GAAG,CAAV;AAEAhqE,aAAK,CAAChpE,IAAN,CAAY,CAAZ;;AAEA,aAAM,IAAIowB,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIq8H,SAAtB,EAAiCr8H,CAAC,EAAlC,EAAwC;AAEvC08H,iBAAO,GAAG,KAAKT,QAAL,CAAej8H,CAAC,GAAGq8H,SAAnB,CAAV;AACAzZ,aAAG,IAAI8Z,OAAO,CAAC3/F,UAAR,CAAoBlf,IAApB,CAAP;AACA+6B,eAAK,CAAChpE,IAAN,CAAYgzI,GAAZ;AACA/kG,cAAI,GAAG6+G,OAAP;AAEA;;AAED,aAAKD,eAAL,GAAuB7jF,KAAvB;AAEA,eAAOA,KAAP,CA/BkC,CA+BpB;AAEd,OAtG8B;AAwG/B+jF,sBAAgB,EAAE,4BAAY;AAE7B,aAAKzrI,WAAL,GAAmB,IAAnB;AACA,aAAKsrI,UAAL;AAEA,OA7G8B;AA+G/B;AAEAL,oBAAc,EAAE,wBAAWz8H,CAAX,EAAc7Q,QAAd,EAAyB;AAExC,YAAM+tI,UAAU,GAAG,KAAKJ,UAAL,EAAnB;AAEA,YAAIttJ,CAAC,GAAG,CAAR;AAAA,YAAW6rE,EAAE,GAAG6hF,UAAU,CAACruJ,MAA3B;AAEA,YAAIsuJ,eAAJ,CANwC,CAMnB;;AAErB,YAAKhuI,QAAL,EAAgB;AAEfguI,yBAAe,GAAGhuI,QAAlB;AAEA,SAJD,MAIO;AAENguI,yBAAe,GAAGn9H,CAAC,GAAGk9H,UAAU,CAAE7hF,EAAE,GAAG,CAAP,CAAhC;AAEA,SAhBuC,CAkBxC;;;AAEA,YAAIthB,GAAG,GAAG,CAAV;AAAA,YAAaC,IAAI,GAAGqhB,EAAE,GAAG,CAAzB;AAAA,YAA4B+hF,UAA5B;;AAEA,eAAQrjG,GAAG,IAAIC,IAAf,EAAsB;AAErBxqD,WAAC,GAAGuY,IAAI,CAAC4N,KAAL,CAAYokC,GAAG,GAAG,CAAEC,IAAI,GAAGD,GAAT,IAAiB,CAAnC,CAAJ,CAFqB,CAEuB;;AAE5CqjG,oBAAU,GAAGF,UAAU,CAAE1tJ,CAAF,CAAV,GAAkB2tJ,eAA/B;;AAEA,cAAKC,UAAU,GAAG,CAAlB,EAAsB;AAErBrjG,eAAG,GAAGvqD,CAAC,GAAG,CAAV;AAEA,WAJD,MAIO,IAAK4tJ,UAAU,GAAG,CAAlB,EAAsB;AAE5BpjG,gBAAI,GAAGxqD,CAAC,GAAG,CAAX;AAEA,WAJM,MAIA;AAENwqD,gBAAI,GAAGxqD,CAAP;AACA,kBAHM,CAKN;AAEA;AAED;;AAEDA,SAAC,GAAGwqD,IAAJ;;AAEA,YAAKkjG,UAAU,CAAE1tJ,CAAF,CAAV,KAAoB2tJ,eAAzB,EAA2C;AAE1C,iBAAO3tJ,CAAC,IAAK6rE,EAAE,GAAG,CAAV,CAAR;AAEA,SArDuC,CAuDxC;;;AAEA,YAAMgiF,YAAY,GAAGH,UAAU,CAAE1tJ,CAAF,CAA/B;AACA,YAAM8tJ,WAAW,GAAGJ,UAAU,CAAE1tJ,CAAC,GAAG,CAAN,CAA9B;AAEA,YAAM+tJ,aAAa,GAAGD,WAAW,GAAGD,YAApC,CA5DwC,CA8DxC;;AAEA,YAAMG,eAAe,GAAG,CAAEL,eAAe,GAAGE,YAApB,IAAqCE,aAA7D,CAhEwC,CAkExC;;AAEA,YAAMhoI,CAAC,GAAG,CAAE/lB,CAAC,GAAGguJ,eAAN,KAA4BniF,EAAE,GAAG,CAAjC,CAAV;AAEA,eAAO9lD,CAAP;AAEA,OAzL8B;AA2L/B;AACA;AACA;AACA;AAEAkoI,gBAAU,EAAE,oBAAWloI,CAAX,EAAcinI,cAAd,EAA+B;AAE1C,YAAMx6E,KAAK,GAAG,MAAd;AACA,YAAIhC,EAAE,GAAGzqD,CAAC,GAAGysD,KAAb;AACA,YAAI07E,EAAE,GAAGnoI,CAAC,GAAGysD,KAAb,CAJ0C,CAM1C;;AAEA,YAAKhC,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;AACd,YAAK09E,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;AAEd,YAAMC,GAAG,GAAG,KAAKpB,QAAL,CAAev8E,EAAf,CAAZ;AACA,YAAM49E,GAAG,GAAG,KAAKrB,QAAL,CAAemB,EAAf,CAAZ;AAEA,YAAM1qE,OAAO,GAAGwpE,cAAc,KAAQmB,GAAG,CAACjiG,SAAN,GAAoB,IAAIF,OAAJ,EAApB,GAAoC,IAAI8P,OAAJ,EAA1C,CAA9B;AAEA0nB,eAAO,CAACtoE,IAAR,CAAckzI,GAAd,EAAoBjyI,GAApB,CAAyBgyI,GAAzB,EAA+BxgG,SAA/B;AAEA,eAAO61B,OAAP;AAEA,OApN8B;AAsN/B6qE,kBAAY,EAAE,sBAAW79H,CAAX,EAAcw8H,cAAd,EAA+B;AAE5C,YAAMjnI,CAAC,GAAG,KAAKknI,cAAL,CAAqBz8H,CAArB,CAAV;AACA,eAAO,KAAKy9H,UAAL,CAAiBloI,CAAjB,EAAoBinI,cAApB,CAAP;AAEA,OA3N8B;AA6N/Bhf,yBAAmB,EAAE,6BAAWsN,QAAX,EAAqB7N,MAArB,EAA8B;AAElD;AAEA,YAAM1vE,MAAM,GAAG,IAAIjC,OAAJ,EAAf;AAEA,YAAM+xE,QAAQ,GAAG,EAAjB;AACA,YAAMntD,OAAO,GAAG,EAAhB;AACA,YAAMotD,SAAS,GAAG,EAAlB;AAEA,YAAMmI,GAAG,GAAG,IAAIn6E,OAAJ,EAAZ;AACA,YAAMwyF,GAAG,GAAG,IAAI5vF,OAAJ,EAAZ,CAXkD,CAalD;;AAEA,aAAM,IAAI1+D,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs7I,QAAtB,EAAgCt7I,KAAC,EAAjC,EAAuC;AAEtC,cAAMwwB,CAAC,GAAGxwB,KAAC,GAAGs7I,QAAd;AAEAzN,kBAAQ,CAAE7tI,KAAF,CAAR,GAAgB,KAAKquJ,YAAL,CAAmB79H,CAAnB,EAAsB,IAAIsrC,OAAJ,EAAtB,CAAhB;;AACA+xE,kBAAQ,CAAE7tI,KAAF,CAAR,CAAc2tD,SAAd;AAEA,SAtBiD,CAwBlD;AACA;;;AAEA+yB,eAAO,CAAE,CAAF,CAAP,GAAe,IAAI5kB,OAAJ,EAAf;AACAgyE,iBAAS,CAAE,CAAF,CAAT,GAAiB,IAAIhyE,OAAJ,EAAjB;AACA,YAAIr/C,GAAG,GAAG2/B,MAAM,CAACmyG,SAAjB;AACA,YAAMn8F,EAAE,GAAG75C,IAAI,CAAC4nB,GAAL,CAAU0tG,QAAQ,CAAE,CAAF,CAAR,CAAcljI,CAAxB,CAAX;AACA,YAAM0nD,EAAE,GAAG95C,IAAI,CAAC4nB,GAAL,CAAU0tG,QAAQ,CAAE,CAAF,CAAR,CAAcnsH,CAAxB,CAAX;AACA,YAAM8sI,EAAE,GAAGj2I,IAAI,CAAC4nB,GAAL,CAAU0tG,QAAQ,CAAE,CAAF,CAAR,CAAc5gH,CAAxB,CAAX;;AAEA,YAAKmlC,EAAE,IAAI31C,GAAX,EAAiB;AAEhBA,aAAG,GAAG21C,EAAN;AACA2L,gBAAM,CAAC1gD,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAED,YAAKg1C,EAAE,IAAI51C,GAAX,EAAiB;AAEhBA,aAAG,GAAG41C,EAAN;AACA0L,gBAAM,CAAC1gD,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAED,YAAKmxI,EAAE,IAAI/xI,GAAX,EAAiB;AAEhBshD,gBAAM,CAAC1gD,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAED44H,WAAG,CAACl2H,YAAJ,CAAkB8tH,QAAQ,CAAE,CAAF,CAA1B,EAAiC9vE,MAAjC,EAA0CpQ,SAA1C;AAEA+yB,eAAO,CAAE,CAAF,CAAP,CAAa3gE,YAAb,CAA2B8tH,QAAQ,CAAE,CAAF,CAAnC,EAA0CoI,GAA1C;AACAnI,iBAAS,CAAE,CAAF,CAAT,CAAe/tH,YAAf,CAA6B8tH,QAAQ,CAAE,CAAF,CAArC,EAA4CntD,OAAO,CAAE,CAAF,CAAnD,EAzDkD,CA4DlD;;AAEA,aAAM,IAAI1gF,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs7I,QAAtB,EAAgCt7I,KAAC,EAAjC,EAAuC;AAEtC0gF,iBAAO,CAAE1gF,KAAF,CAAP,GAAe0gF,OAAO,CAAE1gF,KAAC,GAAG,CAAN,CAAP,CAAiBsa,KAAjB,EAAf;AAEAwzH,mBAAS,CAAE9tI,KAAF,CAAT,GAAiB8tI,SAAS,CAAE9tI,KAAC,GAAG,CAAN,CAAT,CAAmBsa,KAAnB,EAAjB;AAEA27H,aAAG,CAACl2H,YAAJ,CAAkB8tH,QAAQ,CAAE7tI,KAAC,GAAG,CAAN,CAA1B,EAAqC6tI,QAAQ,CAAE7tI,KAAF,CAA7C;;AAEA,cAAKi2I,GAAG,CAAC52I,MAAJ,KAAe+8C,MAAM,CAACC,OAA3B,EAAqC;AAEpC45F,eAAG,CAACtoF,SAAJ;AAEA,gBAAM5yC,KAAK,GAAGxC,IAAI,CAACq9C,IAAL,CAAWzM,SAAS,CAACS,KAAV,CAAiBikF,QAAQ,CAAE7tI,KAAC,GAAG,CAAN,CAAR,CAAkByd,GAAlB,CAAuBowH,QAAQ,CAAE7tI,KAAF,CAA/B,CAAjB,EAAyD,CAAE,CAA3D,EAA8D,CAA9D,CAAX,CAAd,CAJoC,CAI0D;;AAE9F0gF,mBAAO,CAAE1gF,KAAF,CAAP,CAAa01D,YAAb,CAA2B44F,GAAG,CAACrsF,gBAAJ,CAAsBg0E,GAAtB,EAA2Bl7H,KAA3B,CAA3B;AAEA;;AAED+yH,mBAAS,CAAE9tI,KAAF,CAAT,CAAe+f,YAAf,CAA6B8tH,QAAQ,CAAE7tI,KAAF,CAArC,EAA4C0gF,OAAO,CAAE1gF,KAAF,CAAnD;AAEA,SAlFiD,CAoFlD;;;AAEA,YAAKytI,MAAM,KAAK,IAAhB,EAAuB;AAEtB,cAAI1yH,MAAK,GAAGxC,IAAI,CAACq9C,IAAL,CAAWzM,SAAS,CAACS,KAAV,CAAiB82B,OAAO,CAAE,CAAF,CAAP,CAAajjE,GAAb,CAAkBijE,OAAO,CAAE46D,QAAF,CAAzB,CAAjB,EAA0D,CAAE,CAA5D,EAA+D,CAA/D,CAAX,CAAZ;;AACAvgI,gBAAK,IAAIugI,QAAT;;AAEA,cAAKzN,QAAQ,CAAE,CAAF,CAAR,CAAcpwH,GAAd,CAAmBw4H,GAAG,CAACl2H,YAAJ,CAAkB2gE,OAAO,CAAE,CAAF,CAAzB,EAAgCA,OAAO,CAAE46D,QAAF,CAAvC,CAAnB,IAA6E,CAAlF,EAAsF;AAErFvgI,kBAAK,GAAG,CAAEA,MAAV;AAEA;;AAED,eAAM,IAAI/a,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs7I,QAAtB,EAAgCt7I,KAAC,EAAjC,EAAuC;AAEtC;AACA0gF,mBAAO,CAAE1gF,KAAF,CAAP,CAAa01D,YAAb,CAA2B44F,GAAG,CAACrsF,gBAAJ,CAAsB4rE,QAAQ,CAAE7tI,KAAF,CAA9B,EAAqC+a,MAAK,GAAG/a,KAA7C,CAA3B;;AACA8tI,qBAAS,CAAE9tI,KAAF,CAAT,CAAe+f,YAAf,CAA6B8tH,QAAQ,CAAE7tI,KAAF,CAArC,EAA4C0gF,OAAO,CAAE1gF,KAAF,CAAnD;AAEA;AAED;;AAED,eAAO;AACN6tI,kBAAQ,EAAEA,QADJ;AAENntD,iBAAO,EAAEA,OAFH;AAGNotD,mBAAS,EAAEA;AAHL,SAAP;AAMA,OA9U8B;AAgV/BxzH,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OApV8B;AAsV/BA,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAKmwG,kBAAL,GAA0BnwG,MAAM,CAACmwG,kBAAjC;AAEA,eAAO,IAAP;AAEA,OA5V8B;AA8V/Bj4F,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAG;AACZm2D,kBAAQ,EAAE;AACTh9B,mBAAO,EAAE,GADA;AAETtzB,gBAAI,EAAE,OAFG;AAGTuwD,qBAAS,EAAE;AAHF;AADE,SAAb;AAQAp2D,YAAI,CAACiuJ,kBAAL,GAA0B,KAAKA,kBAA/B;AACAjuJ,YAAI,CAAC6F,IAAL,GAAY,KAAKA,IAAjB;AAEA,eAAO7F,IAAP;AAEA,OA7W8B;AA+W/B4vJ,cAAQ,EAAE,kBAAWnK,IAAX,EAAkB;AAE3B,aAAKwI,kBAAL,GAA0BxI,IAAI,CAACwI,kBAA/B;AAEA,eAAO,IAAP;AAEA;AArX8B,KAAhC;;AAyXA,aAAS4B,YAAT,CAAuBC,EAAvB,EAA2BC,EAA3B,EAA+BC,OAA/B,EAAwCC,OAAxC,EAAiDC,WAAjD,EAA8DC,SAA9D,EAAyEC,UAAzE,EAAqFC,SAArF,EAAiG;AAEhGrC,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,cAAZ;AAEA,WAAKiqJ,EAAL,GAAUA,EAAE,IAAI,CAAhB;AACA,WAAKC,EAAL,GAAUA,EAAE,IAAI,CAAhB;AAEA,WAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;AACA,WAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;AAEA,WAAKC,WAAL,GAAmBA,WAAW,IAAI,CAAlC;AACA,WAAKC,SAAL,GAAiBA,SAAS,IAAI,IAAIz2I,IAAI,CAACC,EAAvC;AAEA,WAAKy2I,UAAL,GAAkBA,UAAU,IAAI,KAAhC;AAEA,WAAKC,SAAL,GAAiBA,SAAS,IAAI,CAA9B;AAEA;;AAEDR,gBAAY,CAACx3I,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAzB;AACAw3I,gBAAY,CAACx3I,SAAb,CAAuB0M,WAAvB,GAAqC8qI,YAArC;AAEAA,gBAAY,CAACx3I,SAAb,CAAuBi4I,cAAvB,GAAwC,IAAxC;;AAEAT,gBAAY,CAACx3I,SAAb,CAAuB61I,QAAvB,GAAkC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAEhE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIhhG,OAAJ,EAAhC;AAEA,UAAMojG,KAAK,GAAG72I,IAAI,CAACC,EAAL,GAAU,CAAxB;AACA,UAAI62I,UAAU,GAAG,KAAKL,SAAL,GAAiB,KAAKD,WAAvC;AACA,UAAMO,UAAU,GAAG/2I,IAAI,CAAC4nB,GAAL,CAAUkvH,UAAV,IAAyBjzG,MAAM,CAACC,OAAnD,CANgE,CAQhE;;AACA,aAAQgzG,UAAU,GAAG,CAArB;AAAyBA,kBAAU,IAAID,KAAd;AAAzB;;AACA,aAAQC,UAAU,GAAGD,KAArB;AAA6BC,kBAAU,IAAID,KAAd;AAA7B;;AAEA,UAAKC,UAAU,GAAGjzG,MAAM,CAACC,OAAzB,EAAmC;AAElC,YAAKizG,UAAL,EAAkB;AAEjBD,oBAAU,GAAG,CAAb;AAEA,SAJD,MAIO;AAENA,oBAAU,GAAGD,KAAb;AAEA;AAED;;AAED,UAAK,KAAKH,UAAL,KAAoB,IAApB,IAA4B,CAAEK,UAAnC,EAAgD;AAE/C,YAAKD,UAAU,KAAKD,KAApB,EAA4B;AAE3BC,oBAAU,GAAG,CAAED,KAAf;AAEA,SAJD,MAIO;AAENC,oBAAU,GAAGA,UAAU,GAAGD,KAA1B;AAEA;AAED;;AAED,UAAM7vI,KAAK,GAAG,KAAKwvI,WAAL,GAAmBhpI,CAAC,GAAGspI,UAArC;AACA,UAAI1kJ,CAAC,GAAG,KAAKgkJ,EAAL,GAAU,KAAKE,OAAL,GAAet2I,IAAI,CAACujC,GAAL,CAAUv8B,KAAV,CAAjC;AACA,UAAImC,CAAC,GAAG,KAAKktI,EAAL,GAAU,KAAKE,OAAL,GAAev2I,IAAI,CAACwjC,GAAL,CAAUx8B,KAAV,CAAjC;;AAEA,UAAK,KAAK2vI,SAAL,KAAmB,CAAxB,EAA4B;AAE3B,YAAMpzG,GAAG,GAAGvjC,IAAI,CAACujC,GAAL,CAAU,KAAKozG,SAAf,CAAZ;AACA,YAAMnzG,GAAG,GAAGxjC,IAAI,CAACwjC,GAAL,CAAU,KAAKmzG,SAAf,CAAZ;AAEA,YAAM98F,EAAE,GAAGznD,CAAC,GAAG,KAAKgkJ,EAApB;AACA,YAAMt8F,EAAE,GAAG3wC,CAAC,GAAG,KAAKktI,EAApB,CAN2B,CAQ3B;;AACAjkJ,SAAC,GAAGynD,EAAE,GAAGtW,GAAL,GAAWuW,EAAE,GAAGtW,GAAhB,GAAsB,KAAK4yG,EAA/B;AACAjtI,SAAC,GAAG0wC,EAAE,GAAGrW,GAAL,GAAWsW,EAAE,GAAGvW,GAAhB,GAAsB,KAAK8yG,EAA/B;AAEA;;AAED,aAAOx7G,KAAK,CAAC/1B,GAAN,CAAW1S,CAAX,EAAc+W,CAAd,CAAP;AAEA,KA5DD;;AA8DAgtI,gBAAY,CAACx3I,SAAb,CAAuBgE,IAAvB,GAA8B,UAAWyhC,MAAX,EAAoB;AAEjDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKgyG,EAAL,GAAUhyG,MAAM,CAACgyG,EAAjB;AACA,WAAKC,EAAL,GAAUjyG,MAAM,CAACiyG,EAAjB;AAEA,WAAKC,OAAL,GAAelyG,MAAM,CAACkyG,OAAtB;AACA,WAAKC,OAAL,GAAenyG,MAAM,CAACmyG,OAAtB;AAEA,WAAKC,WAAL,GAAmBpyG,MAAM,CAACoyG,WAA1B;AACA,WAAKC,SAAL,GAAiBryG,MAAM,CAACqyG,SAAxB;AAEA,WAAKC,UAAL,GAAkBtyG,MAAM,CAACsyG,UAAzB;AAEA,WAAKC,SAAL,GAAiBvyG,MAAM,CAACuyG,SAAxB;AAEA,aAAO,IAAP;AAEA,KAnBD;;AAsBAR,gBAAY,CAACx3I,SAAb,CAAuB29C,MAAvB,GAAgC,YAAY;AAE3C,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAAC8vJ,EAAL,GAAU,KAAKA,EAAf;AACA9vJ,UAAI,CAAC+vJ,EAAL,GAAU,KAAKA,EAAf;AAEA/vJ,UAAI,CAACgwJ,OAAL,GAAe,KAAKA,OAApB;AACAhwJ,UAAI,CAACiwJ,OAAL,GAAe,KAAKA,OAApB;AAEAjwJ,UAAI,CAACkwJ,WAAL,GAAmB,KAAKA,WAAxB;AACAlwJ,UAAI,CAACmwJ,SAAL,GAAiB,KAAKA,SAAtB;AAEAnwJ,UAAI,CAACowJ,UAAL,GAAkB,KAAKA,UAAvB;AAEApwJ,UAAI,CAACqwJ,SAAL,GAAiB,KAAKA,SAAtB;AAEA,aAAOrwJ,IAAP;AAEA,KAnBD;;AAqBA6vJ,gBAAY,CAACx3I,SAAb,CAAuBu3I,QAAvB,GAAkC,UAAWnK,IAAX,EAAkB;AAEnDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKqK,EAAL,GAAUrK,IAAI,CAACqK,EAAf;AACA,WAAKC,EAAL,GAAUtK,IAAI,CAACsK,EAAf;AAEA,WAAKC,OAAL,GAAevK,IAAI,CAACuK,OAApB;AACA,WAAKC,OAAL,GAAexK,IAAI,CAACwK,OAApB;AAEA,WAAKC,WAAL,GAAmBzK,IAAI,CAACyK,WAAxB;AACA,WAAKC,SAAL,GAAiB1K,IAAI,CAAC0K,SAAtB;AAEA,WAAKC,UAAL,GAAkB3K,IAAI,CAAC2K,UAAvB;AAEA,WAAKC,SAAL,GAAiB5K,IAAI,CAAC4K,SAAtB;AAEA,aAAO,IAAP;AAEA,KAnBD;;AAqBA,aAASK,QAAT,CAAmBZ,EAAnB,EAAuBC,EAAvB,EAA2BY,OAA3B,EAAoCT,WAApC,EAAiDC,SAAjD,EAA4DC,UAA5D,EAAyE;AAExEP,kBAAY,CAACr6I,IAAb,CAAmB,IAAnB,EAAyBs6I,EAAzB,EAA6BC,EAA7B,EAAiCY,OAAjC,EAA0CA,OAA1C,EAAmDT,WAAnD,EAAgEC,SAAhE,EAA2EC,UAA3E;AAEA,WAAKvqJ,IAAL,GAAY,UAAZ;AAEA;;AAED6qJ,YAAQ,CAACr4I,SAAT,GAAqB3V,MAAM,CAACiU,MAAP,CAAek5I,YAAY,CAACx3I,SAA5B,CAArB;AACAq4I,YAAQ,CAACr4I,SAAT,CAAmB0M,WAAnB,GAAiC2rI,QAAjC;AAEAA,YAAQ,CAACr4I,SAAT,CAAmBu4I,UAAnB,GAAgC,IAAhC;AAEA;;;;;;;;;AAUA;;;;;;;;;;AAUA,aAASC,SAAT,GAAqB;AAEpB,UAAIC,EAAE,GAAG,CAAT;AAAA,UAAY71F,EAAE,GAAG,CAAjB;AAAA,UAAoBtO,EAAE,GAAG,CAAzB;AAAA,UAA4BuO,EAAE,GAAG,CAAjC;AAEA;;;;;;;;;AAQA,eAASswC,IAAT,CAAexxC,EAAf,EAAmBI,EAAnB,EAAuBsX,EAAvB,EAA2BC,EAA3B,EAAgC;AAE/Bm/E,UAAE,GAAG92F,EAAL;AACAiB,UAAE,GAAGyW,EAAL;AACA/kB,UAAE,GAAG,CAAE,CAAF,GAAMqN,EAAN,GAAW,IAAII,EAAf,GAAoB,IAAIsX,EAAxB,GAA6BC,EAAlC;AACAzW,UAAE,GAAG,IAAIlB,EAAJ,GAAS,IAAII,EAAb,GAAkBsX,EAAlB,GAAuBC,EAA5B;AAEA;;AAED,aAAO;AAENo/E,sBAAc,EAAE,wBAAW/2F,EAAX,EAAeI,EAAf,EAAmBmJ,EAAnB,EAAuBytF,EAAvB,EAA2BC,OAA3B,EAAqC;AAEpDzlD,cAAI,CAAEpxC,EAAF,EAAMmJ,EAAN,EAAU0tF,OAAO,IAAK1tF,EAAE,GAAGvJ,EAAV,CAAjB,EAAiCi3F,OAAO,IAAKD,EAAE,GAAG52F,EAAV,CAAxC,CAAJ;AAEA,SANK;AAQN82F,gCAAwB,EAAE,kCAAWl3F,EAAX,EAAeI,EAAf,EAAmBmJ,EAAnB,EAAuBytF,EAAvB,EAA2BG,GAA3B,EAAgCC,GAAhC,EAAqCC,GAArC,EAA2C;AAEpE;AACA,cAAI1/E,EAAE,GAAG,CAAEvX,EAAE,GAAGJ,EAAP,IAAcm3F,GAAd,GAAoB,CAAE5tF,EAAE,GAAGvJ,EAAP,KAAgBm3F,GAAG,GAAGC,GAAtB,CAApB,GAAkD,CAAE7tF,EAAE,GAAGnJ,EAAP,IAAcg3F,GAAzE;AACA,cAAI/B,EAAE,GAAG,CAAE9rF,EAAE,GAAGnJ,EAAP,IAAcg3F,GAAd,GAAoB,CAAEJ,EAAE,GAAG52F,EAAP,KAAgBg3F,GAAG,GAAGC,GAAtB,CAApB,GAAkD,CAAEL,EAAE,GAAGztF,EAAP,IAAc8tF,GAAzE,CAJoE,CAMpE;;AACA1/E,YAAE,IAAIy/E,GAAN;AACA/B,YAAE,IAAI+B,GAAN;AAEA5lD,cAAI,CAAEpxC,EAAF,EAAMmJ,EAAN,EAAUoO,EAAV,EAAc09E,EAAd,CAAJ;AAEA,SApBK;AAsBNiC,YAAI,EAAE,cAAWpqI,CAAX,EAAe;AAEpB,cAAMmoI,EAAE,GAAGnoI,CAAC,GAAGA,CAAf;AACA,cAAMqqI,EAAE,GAAGlC,EAAE,GAAGnoI,CAAhB;AACA,iBAAO4pI,EAAE,GAAG71F,EAAE,GAAG/zC,CAAV,GAAcylC,EAAE,GAAG0iG,EAAnB,GAAwBn0F,EAAE,GAAGq2F,EAApC;AAEA;AA5BK,OAAP;AAgCA,K,CAED;;;AAEA,QAAMr+F,GAAG,GAAG,IAAI+J,OAAJ,EAAZ;AACA,QAAM42E,EAAE,GAAG,IAAIgd,SAAJ,EAAX;AAAA,QAA4B/c,EAAE,GAAG,IAAI+c,SAAJ,EAAjC;AAAA,QAAkDW,EAAE,GAAG,IAAIX,SAAJ,EAAvD;;AAEA,aAASY,gBAAT,CAA2BviI,MAA3B,EAAmC0/G,MAAnC,EAA2C8iB,SAA3C,EAAsDT,OAAtD,EAAgE;AAE/DjD,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,kBAAZ;AAEA,WAAKqpB,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,WAAK0/G,MAAL,GAAcA,MAAM,IAAI,KAAxB;AACA,WAAK8iB,SAAL,GAAiBA,SAAS,IAAI,aAA9B;AACA,WAAKT,OAAL,GAAiBA,OAAO,KAAK1hJ,SAAd,GAA4B0hJ,OAA5B,GAAsC,GAArD;AAEA;;AAEDQ,oBAAgB,CAACp5I,SAAjB,GAA6B3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAA7B;AACAo5I,oBAAgB,CAACp5I,SAAjB,CAA2B0M,WAA3B,GAAyC0sI,gBAAzC;AAEAA,oBAAgB,CAACp5I,SAAjB,CAA2Bs5I,kBAA3B,GAAgD,IAAhD;;AAEAF,oBAAgB,CAACp5I,SAAjB,CAA2B61I,QAA3B,GAAsC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAEpE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIlxF,OAAJ,EAAhC;AAEA,UAAM/tC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMtjB,CAAC,GAAGsjB,MAAM,CAAC1uB,MAAjB;AAEA,UAAMyxB,CAAC,GAAG,CAAErmB,CAAC,IAAK,KAAKgjI,MAAL,GAAc,CAAd,GAAkB,CAAvB,CAAH,IAAkC1nH,CAA5C;AACA,UAAI0qI,QAAQ,GAAGl4I,IAAI,CAAC4N,KAAL,CAAY2K,CAAZ,CAAf;AACA,UAAIg2G,MAAM,GAAGh2G,CAAC,GAAG2/H,QAAjB;;AAEA,UAAK,KAAKhjB,MAAV,EAAmB;AAElBgjB,gBAAQ,IAAIA,QAAQ,GAAG,CAAX,GAAe,CAAf,GAAmB,CAAEl4I,IAAI,CAAC4N,KAAL,CAAY5N,IAAI,CAAC4nB,GAAL,CAAUswH,QAAV,IAAuBhmJ,CAAnC,IAAyC,CAA3C,IAAiDA,CAAhF;AAEA,OAJD,MAIO,IAAKq8H,MAAM,KAAK,CAAX,IAAgB2pB,QAAQ,KAAKhmJ,CAAC,GAAG,CAAtC,EAA0C;AAEhDgmJ,gBAAQ,GAAGhmJ,CAAC,GAAG,CAAf;AACAq8H,cAAM,GAAG,CAAT;AAEA;;AAED,UAAI/4D,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBqG,EAAhB,CAtBoE,CAsBhD;;AAEpB,UAAK,KAAKm5D,MAAL,IAAegjB,QAAQ,GAAG,CAA/B,EAAmC;AAElC1iF,UAAE,GAAGhgD,MAAM,CAAE,CAAE0iI,QAAQ,GAAG,CAAb,IAAmBhmJ,CAArB,CAAX;AAEA,OAJD,MAIO;AAEN;AACAsnD,WAAG,CAACtwC,UAAJ,CAAgBsM,MAAM,CAAE,CAAF,CAAtB,EAA6BA,MAAM,CAAE,CAAF,CAAnC,EAA2C9Q,GAA3C,CAAgD8Q,MAAM,CAAE,CAAF,CAAtD;AACAggD,UAAE,GAAGhc,GAAL;AAEA;;AAEDic,QAAE,GAAGjgD,MAAM,CAAE0iI,QAAQ,GAAGhmJ,CAAb,CAAX;AACAwjE,QAAE,GAAGlgD,MAAM,CAAE,CAAE0iI,QAAQ,GAAG,CAAb,IAAmBhmJ,CAArB,CAAX;;AAEA,UAAK,KAAKgjI,MAAL,IAAegjB,QAAQ,GAAG,CAAX,GAAehmJ,CAAnC,EAAuC;AAEtC6pE,UAAE,GAAGvmD,MAAM,CAAE,CAAE0iI,QAAQ,GAAG,CAAb,IAAmBhmJ,CAArB,CAAX;AAEA,OAJD,MAIO;AAEN;AACAsnD,WAAG,CAACtwC,UAAJ,CAAgBsM,MAAM,CAAEtjB,CAAC,GAAG,CAAN,CAAtB,EAAiCsjB,MAAM,CAAEtjB,CAAC,GAAG,CAAN,CAAvC,EAAmDwS,GAAnD,CAAwD8Q,MAAM,CAAEtjB,CAAC,GAAG,CAAN,CAA9D;AACA6pE,UAAE,GAAGviB,GAAL;AAEA;;AAED,UAAK,KAAKw+F,SAAL,KAAmB,aAAnB,IAAoC,KAAKA,SAAL,KAAmB,SAA5D,EAAwE;AAEvE;AACA,YAAMjxI,GAAG,GAAG,KAAKixI,SAAL,KAAmB,SAAnB,GAA+B,GAA/B,GAAqC,IAAjD;AACA,YAAIP,GAAG,GAAGz3I,IAAI,CAAC+G,GAAL,CAAUyuD,EAAE,CAACxwD,iBAAH,CAAsBywD,EAAtB,CAAV,EAAsC1uD,GAAtC,CAAV;AACA,YAAI2wI,GAAG,GAAG13I,IAAI,CAAC+G,GAAL,CAAU0uD,EAAE,CAACzwD,iBAAH,CAAsB0wD,EAAtB,CAAV,EAAsC3uD,GAAtC,CAAV;AACA,YAAI4wI,GAAG,GAAG33I,IAAI,CAAC+G,GAAL,CAAU2uD,EAAE,CAAC1wD,iBAAH,CAAsB+2D,EAAtB,CAAV,EAAsCh1D,GAAtC,CAAV,CANuE,CAQvE;;AACA,YAAK2wI,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAG,GAAN;AAClB,YAAKD,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAGC,GAAN;AAClB,YAAKC,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAGD,GAAN;AAElBvd,UAAE,CAACqd,wBAAH,CAA6BhiF,EAAE,CAACpjE,CAAhC,EAAmCqjE,EAAE,CAACrjE,CAAtC,EAAyCsjE,EAAE,CAACtjE,CAA5C,EAA+C2pE,EAAE,CAAC3pE,CAAlD,EAAqDqlJ,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AACAvd,UAAE,CAACod,wBAAH,CAA6BhiF,EAAE,CAACrsD,CAAhC,EAAmCssD,EAAE,CAACtsD,CAAtC,EAAyCusD,EAAE,CAACvsD,CAA5C,EAA+C4yD,EAAE,CAAC5yD,CAAlD,EAAqDsuI,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AACAG,UAAE,CAACN,wBAAH,CAA6BhiF,EAAE,CAAC9gD,CAAhC,EAAmC+gD,EAAE,CAAC/gD,CAAtC,EAAyCghD,EAAE,CAAChhD,CAA5C,EAA+CqnD,EAAE,CAACrnD,CAAlD,EAAqD+iI,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AAEA,OAjBD,MAiBO,IAAK,KAAKK,SAAL,KAAmB,YAAxB,EAAuC;AAE7C7d,UAAE,CAACkd,cAAH,CAAmB7hF,EAAE,CAACpjE,CAAtB,EAAyBqjE,EAAE,CAACrjE,CAA5B,EAA+BsjE,EAAE,CAACtjE,CAAlC,EAAqC2pE,EAAE,CAAC3pE,CAAxC,EAA2C,KAAKmlJ,OAAhD;AACAnd,UAAE,CAACid,cAAH,CAAmB7hF,EAAE,CAACrsD,CAAtB,EAAyBssD,EAAE,CAACtsD,CAA5B,EAA+BusD,EAAE,CAACvsD,CAAlC,EAAqC4yD,EAAE,CAAC5yD,CAAxC,EAA2C,KAAKouI,OAAhD;AACAO,UAAE,CAACT,cAAH,CAAmB7hF,EAAE,CAAC9gD,CAAtB,EAAyB+gD,EAAE,CAAC/gD,CAA5B,EAA+BghD,EAAE,CAAChhD,CAAlC,EAAqCqnD,EAAE,CAACrnD,CAAxC,EAA2C,KAAK6iI,OAAhD;AAEA;;AAED18G,WAAK,CAAC/1B,GAAN,CACCq1H,EAAE,CAACyd,IAAH,CAASrpB,MAAT,CADD,EAEC6L,EAAE,CAACwd,IAAH,CAASrpB,MAAT,CAFD,EAGCupB,EAAE,CAACF,IAAH,CAASrpB,MAAT,CAHD;AAMA,aAAO1zF,KAAP;AAEA,KApFD;;AAsFAk9G,oBAAgB,CAACp5I,SAAjB,CAA2BgE,IAA3B,GAAkC,UAAWyhC,MAAX,EAAoB;AAErDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAK5uB,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGkyC,MAAM,CAAC5uB,MAAP,CAAc1uB,MAAnC,EAA2CW,KAAC,GAAGyK,CAA/C,EAAkDzK,KAAC,EAAnD,EAAyD;AAExD,YAAMozC,KAAK,GAAGuJ,MAAM,CAAC5uB,MAAP,CAAe/tB,KAAf,CAAd;AAEA,aAAK+tB,MAAL,CAAYrtB,IAAZ,CAAkB0yC,KAAK,CAAC94B,KAAN,EAAlB;AAEA;;AAED,WAAKmzH,MAAL,GAAc9wF,MAAM,CAAC8wF,MAArB;AACA,WAAK8iB,SAAL,GAAiB5zG,MAAM,CAAC4zG,SAAxB;AACA,WAAKT,OAAL,GAAenzG,MAAM,CAACmzG,OAAtB;AAEA,aAAO,IAAP;AAEA,KApBD;;AAsBAQ,oBAAgB,CAACp5I,SAAjB,CAA2B29C,MAA3B,GAAoC,YAAY;AAE/C,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACkvB,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKsjB,MAAL,CAAY1uB,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,YAAMozC,KAAK,GAAG,KAAKrlB,MAAL,CAAa/tB,KAAb,CAAd;AACAnB,YAAI,CAACkvB,MAAL,CAAYrtB,IAAZ,CAAkB0yC,KAAK,CAACkb,OAAN,EAAlB;AAEA;;AAEDzvD,UAAI,CAAC4uI,MAAL,GAAc,KAAKA,MAAnB;AACA5uI,UAAI,CAAC0xJ,SAAL,GAAiB,KAAKA,SAAtB;AACA1xJ,UAAI,CAACixJ,OAAL,GAAe,KAAKA,OAApB;AAEA,aAAOjxJ,IAAP;AAEA,KAnBD;;AAqBAyxJ,oBAAgB,CAACp5I,SAAjB,CAA2Bu3I,QAA3B,GAAsC,UAAWnK,IAAX,EAAkB;AAEvDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKv2H,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACv2H,MAAL,CAAY1uB,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,YAAMozC,KAAK,GAAGkxG,IAAI,CAACv2H,MAAL,CAAa/tB,KAAb,CAAd;AACA,aAAK+tB,MAAL,CAAYrtB,IAAZ,CAAkB,IAAIo7D,OAAJ,GAAczN,SAAd,CAAyBjb,KAAzB,CAAlB;AAEA;;AAED,WAAKq6F,MAAL,GAAc6W,IAAI,CAAC7W,MAAnB;AACA,WAAK8iB,SAAL,GAAiBjM,IAAI,CAACiM,SAAtB;AACA,WAAKT,OAAL,GAAexL,IAAI,CAACwL,OAApB;AAEA,aAAO,IAAP;AAEA,KAnBD;AAqBA;;;;;;AAKA,aAASY,UAAT,CAAqB3qI,CAArB,EAAwBgoD,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCqG,EAApC,EAAyC;AAExC,UAAMzG,EAAE,GAAG,CAAEI,EAAE,GAAGF,EAAP,IAAc,GAAzB;AACA,UAAM7f,EAAE,GAAG,CAAEomB,EAAE,GAAGtG,EAAP,IAAc,GAAzB;AACA,UAAMkgF,EAAE,GAAGnoI,CAAC,GAAGA,CAAf;AACA,UAAMqqI,EAAE,GAAGrqI,CAAC,GAAGmoI,EAAf;AACA,aAAO,CAAE,IAAIlgF,EAAJ,GAAS,IAAIC,EAAb,GAAkBJ,EAAlB,GAAuB3f,EAAzB,IAAgCkiG,EAAhC,GAAqC,CAAE,CAAE,CAAF,GAAMpiF,EAAN,GAAW,IAAIC,EAAf,GAAoB,IAAIJ,EAAxB,GAA6B3f,EAA/B,IAAsCggG,EAA3E,GAAgFrgF,EAAE,GAAG9nD,CAArF,GAAyFioD,EAAhG;AAEA,K,CAED;;;AAEA,aAAS2iF,iBAAT,CAA4B5qI,CAA5B,EAA+B+K,CAA/B,EAAmC;AAElC,UAAMtwB,CAAC,GAAG,IAAIulB,CAAd;AACA,aAAOvlB,CAAC,GAAGA,CAAJ,GAAQswB,CAAf;AAEA;;AAED,aAAS8/H,iBAAT,CAA4B7qI,CAA5B,EAA+B+K,CAA/B,EAAmC;AAElC,aAAO,KAAM,IAAI/K,CAAV,IAAgBA,CAAhB,GAAoB+K,CAA3B;AAEA;;AAED,aAAS+/H,iBAAT,CAA4B9qI,CAA5B,EAA+B+K,CAA/B,EAAmC;AAElC,aAAO/K,CAAC,GAAGA,CAAJ,GAAQ+K,CAAf;AAEA;;AAED,aAASggI,eAAT,CAA0B/qI,CAA1B,EAA6BgoD,EAA7B,EAAiCC,EAAjC,EAAqCC,EAArC,EAA0C;AAEzC,aAAO0iF,iBAAiB,CAAE5qI,CAAF,EAAKgoD,EAAL,CAAjB,GAA6B6iF,iBAAiB,CAAE7qI,CAAF,EAAKioD,EAAL,CAA9C,GACN6iF,iBAAiB,CAAE9qI,CAAF,EAAKkoD,EAAL,CADlB;AAGA,K,CAED;;;AAEA,aAAS8iF,aAAT,CAAwBhrI,CAAxB,EAA2B+K,CAA3B,EAA+B;AAE9B,UAAMtwB,CAAC,GAAG,IAAIulB,CAAd;AACA,aAAOvlB,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYswB,CAAnB;AAEA;;AAED,aAASkgI,aAAT,CAAwBjrI,CAAxB,EAA2B+K,CAA3B,EAA+B;AAE9B,UAAMtwB,CAAC,GAAG,IAAIulB,CAAd;AACA,aAAO,IAAIvlB,CAAJ,GAAQA,CAAR,GAAYulB,CAAZ,GAAgB+K,CAAvB;AAEA;;AAED,aAASmgI,aAAT,CAAwBlrI,CAAxB,EAA2B+K,CAA3B,EAA+B;AAE9B,aAAO,KAAM,IAAI/K,CAAV,IAAgBA,CAAhB,GAAoBA,CAApB,GAAwB+K,CAA/B;AAEA;;AAED,aAASogI,aAAT,CAAwBnrI,CAAxB,EAA2B+K,CAA3B,EAA+B;AAE9B,aAAO/K,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAY+K,CAAnB;AAEA;;AAED,aAASqgI,WAAT,CAAsBprI,CAAtB,EAAyBgoD,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqCqG,EAArC,EAA0C;AAEzC,aAAOy8E,aAAa,CAAEhrI,CAAF,EAAKgoD,EAAL,CAAb,GAAyBijF,aAAa,CAAEjrI,CAAF,EAAKioD,EAAL,CAAtC,GAAkDijF,aAAa,CAAElrI,CAAF,EAAKkoD,EAAL,CAA/D,GACNijF,aAAa,CAAEnrI,CAAF,EAAKuuD,EAAL,CADd;AAGA;;AAED,aAAS88E,gBAAT,CAA2BvjF,EAA3B,EAA+B3f,EAA/B,EAAmCC,EAAnC,EAAuCkjG,EAAvC,EAA4C;AAE3CxE,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,kBAAZ;AAEA,WAAKmpE,EAAL,GAAUA,EAAE,IAAI,IAAI7hB,OAAJ,EAAhB;AACA,WAAKkC,EAAL,GAAUA,EAAE,IAAI,IAAIlC,OAAJ,EAAhB;AACA,WAAKmC,EAAL,GAAUA,EAAE,IAAI,IAAInC,OAAJ,EAAhB;AACA,WAAKqlG,EAAL,GAAUA,EAAE,IAAI,IAAIrlG,OAAJ,EAAhB;AAEA;;AAEDolG,oBAAgB,CAACl6I,SAAjB,GAA6B3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAA7B;AACAk6I,oBAAgB,CAACl6I,SAAjB,CAA2B0M,WAA3B,GAAyCwtI,gBAAzC;AAEAA,oBAAgB,CAACl6I,SAAjB,CAA2Bo6I,kBAA3B,GAAgD,IAAhD;;AAEAF,oBAAgB,CAACl6I,SAAjB,CAA2B61I,QAA3B,GAAsC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAEpE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIhhG,OAAJ,EAAhC;AAEA,UAAM6hB,EAAE,GAAG,KAAKA,EAAhB;AAAA,UAAoB3f,EAAE,GAAG,KAAKA,EAA9B;AAAA,UAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAAA,UAAgDkjG,EAAE,GAAG,KAAKA,EAA1D;AAEAj+G,WAAK,CAAC/1B,GAAN,CACC8zI,WAAW,CAAEprI,CAAF,EAAK8nD,EAAE,CAACljE,CAAR,EAAWujD,EAAE,CAACvjD,CAAd,EAAiBwjD,EAAE,CAACxjD,CAApB,EAAuB0mJ,EAAE,CAAC1mJ,CAA1B,CADZ,EAECwmJ,WAAW,CAAEprI,CAAF,EAAK8nD,EAAE,CAACnsD,CAAR,EAAWwsC,EAAE,CAACxsC,CAAd,EAAiBysC,EAAE,CAACzsC,CAApB,EAAuB2vI,EAAE,CAAC3vI,CAA1B,CAFZ;AAKA,aAAO0xB,KAAP;AAEA,KAbD;;AAeAg+G,oBAAgB,CAACl6I,SAAjB,CAA2BgE,IAA3B,GAAkC,UAAWyhC,MAAX,EAAoB;AAErDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKkxB,EAAL,CAAQ3yD,IAAR,CAAcyhC,MAAM,CAACkxB,EAArB;AACA,WAAK3f,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AACA,WAAKkjG,EAAL,CAAQn2I,IAAR,CAAcyhC,MAAM,CAAC00G,EAArB;AAEA,aAAO,IAAP;AAEA,KAXD;;AAaAD,oBAAgB,CAACl6I,SAAjB,CAA2B29C,MAA3B,GAAoC,YAAY;AAE/C,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACgvE,EAAL,GAAU,KAAKA,EAAL,CAAQvf,OAAR,EAAV;AACAzvD,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AACAzvD,UAAI,CAACwyJ,EAAL,GAAU,KAAKA,EAAL,CAAQ/iG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KAXD;;AAaAuyJ,oBAAgB,CAACl6I,SAAjB,CAA2Bu3I,QAA3B,GAAsC,UAAWnK,IAAX,EAAkB;AAEvDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKz2E,EAAL,CAAQxf,SAAR,CAAmBi2F,IAAI,CAACz2E,EAAxB;AACA,WAAK3f,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AACA,WAAKkjG,EAAL,CAAQhjG,SAAR,CAAmBi2F,IAAI,CAAC+M,EAAxB;AAEA,aAAO,IAAP;AAEA,KAXD;;AAaA,aAASE,iBAAT,CAA4B1jF,EAA5B,EAAgC3f,EAAhC,EAAoCC,EAApC,EAAwCkjG,EAAxC,EAA6C;AAE5CxE,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,mBAAZ;AAEA,WAAKmpE,EAAL,GAAUA,EAAE,IAAI,IAAI/R,OAAJ,EAAhB;AACA,WAAK5N,EAAL,GAAUA,EAAE,IAAI,IAAI4N,OAAJ,EAAhB;AACA,WAAK3N,EAAL,GAAUA,EAAE,IAAI,IAAI2N,OAAJ,EAAhB;AACA,WAAKu1F,EAAL,GAAUA,EAAE,IAAI,IAAIv1F,OAAJ,EAAhB;AAEA;;AAEDy1F,qBAAiB,CAACr6I,SAAlB,GAA8B3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAA9B;AACAq6I,qBAAiB,CAACr6I,SAAlB,CAA4B0M,WAA5B,GAA0C2tI,iBAA1C;AAEAA,qBAAiB,CAACr6I,SAAlB,CAA4Bs6I,mBAA5B,GAAkD,IAAlD;;AAEAD,qBAAiB,CAACr6I,SAAlB,CAA4B61I,QAA5B,GAAuC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAErE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIlxF,OAAJ,EAAhC;AAEA,UAAM+R,EAAE,GAAG,KAAKA,EAAhB;AAAA,UAAoB3f,EAAE,GAAG,KAAKA,EAA9B;AAAA,UAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAAA,UAAgDkjG,EAAE,GAAG,KAAKA,EAA1D;AAEAj+G,WAAK,CAAC/1B,GAAN,CACC8zI,WAAW,CAAEprI,CAAF,EAAK8nD,EAAE,CAACljE,CAAR,EAAWujD,EAAE,CAACvjD,CAAd,EAAiBwjD,EAAE,CAACxjD,CAApB,EAAuB0mJ,EAAE,CAAC1mJ,CAA1B,CADZ,EAECwmJ,WAAW,CAAEprI,CAAF,EAAK8nD,EAAE,CAACnsD,CAAR,EAAWwsC,EAAE,CAACxsC,CAAd,EAAiBysC,EAAE,CAACzsC,CAApB,EAAuB2vI,EAAE,CAAC3vI,CAA1B,CAFZ,EAGCyvI,WAAW,CAAEprI,CAAF,EAAK8nD,EAAE,CAAC5gD,CAAR,EAAWihC,EAAE,CAACjhC,CAAd,EAAiBkhC,EAAE,CAAClhC,CAApB,EAAuBokI,EAAE,CAACpkI,CAA1B,CAHZ;AAMA,aAAOmmB,KAAP;AAEA,KAdD;;AAgBAm+G,qBAAiB,CAACr6I,SAAlB,CAA4BgE,IAA5B,GAAmC,UAAWyhC,MAAX,EAAoB;AAEtDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKkxB,EAAL,CAAQ3yD,IAAR,CAAcyhC,MAAM,CAACkxB,EAArB;AACA,WAAK3f,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AACA,WAAKkjG,EAAL,CAAQn2I,IAAR,CAAcyhC,MAAM,CAAC00G,EAArB;AAEA,aAAO,IAAP;AAEA,KAXD;;AAaAE,qBAAiB,CAACr6I,SAAlB,CAA4B29C,MAA5B,GAAqC,YAAY;AAEhD,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACgvE,EAAL,GAAU,KAAKA,EAAL,CAAQvf,OAAR,EAAV;AACAzvD,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AACAzvD,UAAI,CAACwyJ,EAAL,GAAU,KAAKA,EAAL,CAAQ/iG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KAXD;;AAaA0yJ,qBAAiB,CAACr6I,SAAlB,CAA4Bu3I,QAA5B,GAAuC,UAAWnK,IAAX,EAAkB;AAExDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKz2E,EAAL,CAAQxf,SAAR,CAAmBi2F,IAAI,CAACz2E,EAAxB;AACA,WAAK3f,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AACA,WAAKkjG,EAAL,CAAQhjG,SAAR,CAAmBi2F,IAAI,CAAC+M,EAAxB;AAEA,aAAO,IAAP;AAEA,KAXD;;AAaA,aAASI,SAAT,CAAoBvjG,EAApB,EAAwBC,EAAxB,EAA6B;AAE5B0+F,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,WAAZ;AAEA,WAAKwpD,EAAL,GAAUA,EAAE,IAAI,IAAIlC,OAAJ,EAAhB;AACA,WAAKmC,EAAL,GAAUA,EAAE,IAAI,IAAInC,OAAJ,EAAhB;AAEA;;AAEDylG,aAAS,CAACv6I,SAAV,GAAsB3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAtB;AACAu6I,aAAS,CAACv6I,SAAV,CAAoB0M,WAApB,GAAkC6tI,SAAlC;AAEAA,aAAS,CAACv6I,SAAV,CAAoBw6I,WAApB,GAAkC,IAAlC;;AAEAD,aAAS,CAACv6I,SAAV,CAAoB61I,QAApB,GAA+B,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAE7D,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIhhG,OAAJ,EAAhC;;AAEA,UAAKjmC,CAAC,KAAK,CAAX,EAAe;AAEdqtB,aAAK,CAACl4B,IAAN,CAAY,KAAKizC,EAAjB;AAEA,OAJD,MAIO;AAEN/a,aAAK,CAACl4B,IAAN,CAAY,KAAKizC,EAAjB,EAAsBhyC,GAAtB,CAA2B,KAAK+xC,EAAhC;AACA9a,aAAK,CAACh2B,cAAN,CAAsB2I,CAAtB,EAA0B9I,GAA1B,CAA+B,KAAKixC,EAApC;AAEA;;AAED,aAAO9a,KAAP;AAEA,KAjBD,C,CAmBA;;;AAEAq+G,aAAS,CAACv6I,SAAV,CAAoBk3H,UAApB,GAAiC,UAAW59G,CAAX,EAAcw8H,cAAd,EAA+B;AAE/D,aAAO,KAAKD,QAAL,CAAev8H,CAAf,EAAkBw8H,cAAlB,CAAP;AAEA,KAJD;;AAMAyE,aAAS,CAACv6I,SAAV,CAAoB+2I,UAApB,GAAiC,UAAWloI,CAAX,EAAcinI,cAAd,EAA+B;AAE/D,UAAMxpE,OAAO,GAAGwpE,cAAc,IAAI,IAAIhhG,OAAJ,EAAlC;AAEAw3B,aAAO,CAACtoE,IAAR,CAAc,KAAKizC,EAAnB,EAAwBhyC,GAAxB,CAA6B,KAAK+xC,EAAlC,EAAuCP,SAAvC;AAEA,aAAO61B,OAAP;AAEA,KARD;;AAUAiuE,aAAS,CAACv6I,SAAV,CAAoBgE,IAApB,GAA2B,UAAWyhC,MAAX,EAAoB;AAE9CkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKuR,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AAEA,aAAO,IAAP;AAEA,KATD;;AAWAsjG,aAAS,CAACv6I,SAAV,CAAoB29C,MAApB,GAA6B,YAAY;AAExC,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KATD;;AAWA4yJ,aAAS,CAACv6I,SAAV,CAAoBu3I,QAApB,GAA+B,UAAWnK,IAAX,EAAkB;AAEhDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKp2F,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AAEA,aAAO,IAAP;AAEA,KATD;;AAWA,aAASwjG,UAAT,CAAqBzjG,EAArB,EAAyBC,EAAzB,EAA8B;AAE7B0+F,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,YAAZ;AAEA,WAAKwpD,EAAL,GAAUA,EAAE,IAAI,IAAI4N,OAAJ,EAAhB;AACA,WAAK3N,EAAL,GAAUA,EAAE,IAAI,IAAI2N,OAAJ,EAAhB;AAEA;;AAED61F,cAAU,CAACz6I,SAAX,GAAuB3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAvB;AACAy6I,cAAU,CAACz6I,SAAX,CAAqB0M,WAArB,GAAmC+tI,UAAnC;AAEAA,cAAU,CAACz6I,SAAX,CAAqB06I,YAArB,GAAoC,IAApC;;AAEAD,cAAU,CAACz6I,SAAX,CAAqB61I,QAArB,GAAgC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAE9D,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIlxF,OAAJ,EAAhC;;AAEA,UAAK/1C,CAAC,KAAK,CAAX,EAAe;AAEdqtB,aAAK,CAACl4B,IAAN,CAAY,KAAKizC,EAAjB;AAEA,OAJD,MAIO;AAEN/a,aAAK,CAACl4B,IAAN,CAAY,KAAKizC,EAAjB,EAAsBhyC,GAAtB,CAA2B,KAAK+xC,EAAhC;AACA9a,aAAK,CAACh2B,cAAN,CAAsB2I,CAAtB,EAA0B9I,GAA1B,CAA+B,KAAKixC,EAApC;AAEA;;AAED,aAAO9a,KAAP;AAEA,KAjBD,C,CAmBA;;;AAEAu+G,cAAU,CAACz6I,SAAX,CAAqBk3H,UAArB,GAAkC,UAAW59G,CAAX,EAAcw8H,cAAd,EAA+B;AAEhE,aAAO,KAAKD,QAAL,CAAev8H,CAAf,EAAkBw8H,cAAlB,CAAP;AAEA,KAJD;;AAMA2E,cAAU,CAACz6I,SAAX,CAAqBgE,IAArB,GAA4B,UAAWyhC,MAAX,EAAoB;AAE/CkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKuR,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AAEA,aAAO,IAAP;AAEA,KATD;;AAWAwjG,cAAU,CAACz6I,SAAX,CAAqB29C,MAArB,GAA8B,YAAY;AAEzC,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KATD;;AAWA8yJ,cAAU,CAACz6I,SAAX,CAAqBu3I,QAArB,GAAgC,UAAWnK,IAAX,EAAkB;AAEjDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKp2F,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AAEA,aAAO,IAAP;AAEA,KATD;;AAWA,aAAS0jG,oBAAT,CAA+BhkF,EAA/B,EAAmC3f,EAAnC,EAAuCC,EAAvC,EAA4C;AAE3C0+F,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,sBAAZ;AAEA,WAAKmpE,EAAL,GAAUA,EAAE,IAAI,IAAI7hB,OAAJ,EAAhB;AACA,WAAKkC,EAAL,GAAUA,EAAE,IAAI,IAAIlC,OAAJ,EAAhB;AACA,WAAKmC,EAAL,GAAUA,EAAE,IAAI,IAAInC,OAAJ,EAAhB;AAEA;;AAED6lG,wBAAoB,CAAC36I,SAArB,GAAiC3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAjC;AACA26I,wBAAoB,CAAC36I,SAArB,CAA+B0M,WAA/B,GAA6CiuI,oBAA7C;AAEAA,wBAAoB,CAAC36I,SAArB,CAA+B46I,sBAA/B,GAAwD,IAAxD;;AAEAD,wBAAoB,CAAC36I,SAArB,CAA+B61I,QAA/B,GAA0C,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAExE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIhhG,OAAJ,EAAhC;AAEA,UAAM6hB,EAAE,GAAG,KAAKA,EAAhB;AAAA,UAAoB3f,EAAE,GAAG,KAAKA,EAA9B;AAAA,UAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAEA/a,WAAK,CAAC/1B,GAAN,CACCyzI,eAAe,CAAE/qI,CAAF,EAAK8nD,EAAE,CAACljE,CAAR,EAAWujD,EAAE,CAACvjD,CAAd,EAAiBwjD,EAAE,CAACxjD,CAApB,CADhB,EAECmmJ,eAAe,CAAE/qI,CAAF,EAAK8nD,EAAE,CAACnsD,CAAR,EAAWwsC,EAAE,CAACxsC,CAAd,EAAiBysC,EAAE,CAACzsC,CAApB,CAFhB;AAKA,aAAO0xB,KAAP;AAEA,KAbD;;AAeAy+G,wBAAoB,CAAC36I,SAArB,CAA+BgE,IAA/B,GAAsC,UAAWyhC,MAAX,EAAoB;AAEzDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKkxB,EAAL,CAAQ3yD,IAAR,CAAcyhC,MAAM,CAACkxB,EAArB;AACA,WAAK3f,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AAEA,aAAO,IAAP;AAEA,KAVD;;AAYA0jG,wBAAoB,CAAC36I,SAArB,CAA+B29C,MAA/B,GAAwC,YAAY;AAEnD,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACgvE,EAAL,GAAU,KAAKA,EAAL,CAAQvf,OAAR,EAAV;AACAzvD,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KAVD;;AAYAgzJ,wBAAoB,CAAC36I,SAArB,CAA+Bu3I,QAA/B,GAA0C,UAAWnK,IAAX,EAAkB;AAE3DuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKz2E,EAAL,CAAQxf,SAAR,CAAmBi2F,IAAI,CAACz2E,EAAxB;AACA,WAAK3f,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AAEA,aAAO,IAAP;AAEA,KAVD;;AAYA,aAAS4jG,qBAAT,CAAgClkF,EAAhC,EAAoC3f,EAApC,EAAwCC,EAAxC,EAA6C;AAE5C0+F,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,uBAAZ;AAEA,WAAKmpE,EAAL,GAAUA,EAAE,IAAI,IAAI/R,OAAJ,EAAhB;AACA,WAAK5N,EAAL,GAAUA,EAAE,IAAI,IAAI4N,OAAJ,EAAhB;AACA,WAAK3N,EAAL,GAAUA,EAAE,IAAI,IAAI2N,OAAJ,EAAhB;AAEA;;AAEDi2F,yBAAqB,CAAC76I,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAlC;AACA66I,yBAAqB,CAAC76I,SAAtB,CAAgC0M,WAAhC,GAA8CmuI,qBAA9C;AAEAA,yBAAqB,CAAC76I,SAAtB,CAAgC86I,uBAAhC,GAA0D,IAA1D;;AAEAD,yBAAqB,CAAC76I,SAAtB,CAAgC61I,QAAhC,GAA2C,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAEzE,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIlxF,OAAJ,EAAhC;AAEA,UAAM+R,EAAE,GAAG,KAAKA,EAAhB;AAAA,UAAoB3f,EAAE,GAAG,KAAKA,EAA9B;AAAA,UAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAEA/a,WAAK,CAAC/1B,GAAN,CACCyzI,eAAe,CAAE/qI,CAAF,EAAK8nD,EAAE,CAACljE,CAAR,EAAWujD,EAAE,CAACvjD,CAAd,EAAiBwjD,EAAE,CAACxjD,CAApB,CADhB,EAECmmJ,eAAe,CAAE/qI,CAAF,EAAK8nD,EAAE,CAACnsD,CAAR,EAAWwsC,EAAE,CAACxsC,CAAd,EAAiBysC,EAAE,CAACzsC,CAApB,CAFhB,EAGCovI,eAAe,CAAE/qI,CAAF,EAAK8nD,EAAE,CAAC5gD,CAAR,EAAWihC,EAAE,CAACjhC,CAAd,EAAiBkhC,EAAE,CAAClhC,CAApB,CAHhB;AAMA,aAAOmmB,KAAP;AAEA,KAdD;;AAgBA2+G,yBAAqB,CAAC76I,SAAtB,CAAgCgE,IAAhC,GAAuC,UAAWyhC,MAAX,EAAoB;AAE1DkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAKkxB,EAAL,CAAQ3yD,IAAR,CAAcyhC,MAAM,CAACkxB,EAArB;AACA,WAAK3f,EAAL,CAAQhzC,IAAR,CAAcyhC,MAAM,CAACuR,EAArB;AACA,WAAKC,EAAL,CAAQjzC,IAAR,CAAcyhC,MAAM,CAACwR,EAArB;AAEA,aAAO,IAAP;AAEA,KAVD;;AAYA4jG,yBAAqB,CAAC76I,SAAtB,CAAgC29C,MAAhC,GAAyC,YAAY;AAEpD,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACgvE,EAAL,GAAU,KAAKA,EAAL,CAAQvf,OAAR,EAAV;AACAzvD,UAAI,CAACqvD,EAAL,GAAU,KAAKA,EAAL,CAAQI,OAAR,EAAV;AACAzvD,UAAI,CAACsvD,EAAL,GAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV;AAEA,aAAOzvD,IAAP;AAEA,KAVD;;AAYAkzJ,yBAAqB,CAAC76I,SAAtB,CAAgCu3I,QAAhC,GAA2C,UAAWnK,IAAX,EAAkB;AAE5DuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKz2E,EAAL,CAAQxf,SAAR,CAAmBi2F,IAAI,CAACz2E,EAAxB;AACA,WAAK3f,EAAL,CAAQG,SAAR,CAAmBi2F,IAAI,CAACp2F,EAAxB;AACA,WAAKC,EAAL,CAAQE,SAAR,CAAmBi2F,IAAI,CAACn2F,EAAxB;AAEA,aAAO,IAAP;AAEA,KAVD;;AAYA,aAAS8jG,WAAT,CAAsBlkI,MAAtB,EAA+B;AAE9B8+H,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,aAAZ;AAEA,WAAKqpB,MAAL,GAAcA,MAAM,IAAI,EAAxB;AAEA;;AAEDkkI,eAAW,CAAC/6I,SAAZ,GAAwB3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAxB;AACA+6I,eAAW,CAAC/6I,SAAZ,CAAsB0M,WAAtB,GAAoCquI,WAApC;AAEAA,eAAW,CAAC/6I,SAAZ,CAAsBg7I,aAAtB,GAAsC,IAAtC;;AAEAD,eAAW,CAAC/6I,SAAZ,CAAsB61I,QAAtB,GAAiC,UAAWhnI,CAAX,EAAcinI,cAAd,EAA+B;AAE/D,UAAM55G,KAAK,GAAG45G,cAAc,IAAI,IAAIhhG,OAAJ,EAAhC;AAEA,UAAMj+B,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM+C,CAAC,GAAG,CAAE/C,MAAM,CAAC1uB,MAAP,GAAgB,CAAlB,IAAwB0mB,CAAlC;AAEA,UAAM0qI,QAAQ,GAAGl4I,IAAI,CAAC4N,KAAL,CAAY2K,CAAZ,CAAjB;AACA,UAAMg2G,MAAM,GAAGh2G,CAAC,GAAG2/H,QAAnB;AAEA,UAAM1iF,EAAE,GAAGhgD,MAAM,CAAE0iI,QAAQ,KAAK,CAAb,GAAiBA,QAAjB,GAA4BA,QAAQ,GAAG,CAAzC,CAAjB;AACA,UAAMziF,EAAE,GAAGjgD,MAAM,CAAE0iI,QAAF,CAAjB;AACA,UAAMxiF,EAAE,GAAGlgD,MAAM,CAAE0iI,QAAQ,GAAG1iI,MAAM,CAAC1uB,MAAP,GAAgB,CAA3B,GAA+B0uB,MAAM,CAAC1uB,MAAP,GAAgB,CAA/C,GAAmDoxJ,QAAQ,GAAG,CAAhE,CAAjB;AACA,UAAMn8E,EAAE,GAAGvmD,MAAM,CAAE0iI,QAAQ,GAAG1iI,MAAM,CAAC1uB,MAAP,GAAgB,CAA3B,GAA+B0uB,MAAM,CAAC1uB,MAAP,GAAgB,CAA/C,GAAmDoxJ,QAAQ,GAAG,CAAhE,CAAjB;AAEAr9G,WAAK,CAAC/1B,GAAN,CACCqzI,UAAU,CAAE5pB,MAAF,EAAU/4D,EAAE,CAACpjE,CAAb,EAAgBqjE,EAAE,CAACrjE,CAAnB,EAAsBsjE,EAAE,CAACtjE,CAAzB,EAA4B2pE,EAAE,CAAC3pE,CAA/B,CADX,EAEC+lJ,UAAU,CAAE5pB,MAAF,EAAU/4D,EAAE,CAACrsD,CAAb,EAAgBssD,EAAE,CAACtsD,CAAnB,EAAsBusD,EAAE,CAACvsD,CAAzB,EAA4B4yD,EAAE,CAAC5yD,CAA/B,CAFX;AAKA,aAAO0xB,KAAP;AAEA,KAtBD;;AAwBA6+G,eAAW,CAAC/6I,SAAZ,CAAsBgE,IAAtB,GAA6B,UAAWyhC,MAAX,EAAoB;AAEhDkwG,WAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,WAAK5uB,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGkyC,MAAM,CAAC5uB,MAAP,CAAc1uB,MAAnC,EAA2CW,KAAC,GAAGyK,CAA/C,EAAkDzK,KAAC,EAAnD,EAAyD;AAExD,YAAMozC,KAAK,GAAGuJ,MAAM,CAAC5uB,MAAP,CAAe/tB,KAAf,CAAd;AAEA,aAAK+tB,MAAL,CAAYrtB,IAAZ,CAAkB0yC,KAAK,CAAC94B,KAAN,EAAlB;AAEA;;AAED,aAAO,IAAP;AAEA,KAhBD;;AAkBA23I,eAAW,CAAC/6I,SAAZ,CAAsB29C,MAAtB,GAA+B,YAAY;AAE1C,UAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,UAAI,CAACkvB,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKsjB,MAAL,CAAY1uB,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,YAAMozC,KAAK,GAAG,KAAKrlB,MAAL,CAAa/tB,KAAb,CAAd;AACAnB,YAAI,CAACkvB,MAAL,CAAYrtB,IAAZ,CAAkB0yC,KAAK,CAACkb,OAAN,EAAlB;AAEA;;AAED,aAAOzvD,IAAP;AAEA,KAfD;;AAiBAozJ,eAAW,CAAC/6I,SAAZ,CAAsBu3I,QAAtB,GAAiC,UAAWnK,IAAX,EAAkB;AAElDuI,WAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,WAAKv2H,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAI/tB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACv2H,MAAL,CAAY1uB,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,YAAMozC,KAAK,GAAGkxG,IAAI,CAACv2H,MAAL,CAAa/tB,KAAb,CAAd;AACA,aAAK+tB,MAAL,CAAYrtB,IAAZ,CAAkB,IAAIsrD,OAAJ,GAAcqC,SAAd,CAAyBjb,KAAzB,CAAlB;AAEA;;AAED,aAAO,IAAP;AAEA,KAfD;;AAiBA,QAAI++G,MAAM,GAAG,aAAa5wJ,MAAM,CAACq8I,MAAP,CAAc;AACvCC,eAAS,EAAE,IAD4B;AAEvC0R,cAAQ,EAAEA,QAF6B;AAGvCe,sBAAgB,EAAEA,gBAHqB;AAIvCc,sBAAgB,EAAEA,gBAJqB;AAKvCG,uBAAiB,EAAEA,iBALoB;AAMvC7C,kBAAY,EAAEA,YANyB;AAOvC+C,eAAS,EAAEA,SAP4B;AAQvCE,gBAAU,EAAEA,UAR2B;AASvCE,0BAAoB,EAAEA,oBATiB;AAUvCE,2BAAqB,EAAEA,qBAVgB;AAWvCE,iBAAW,EAAEA;AAX0B,KAAd,CAA1B;AAcA;;;;;AAKA,aAASG,SAAT,GAAqB;AAEpBvF,WAAK,CAACx4I,IAAN,CAAY,IAAZ;AAEA,WAAK3P,IAAL,GAAY,WAAZ;AAEA,WAAK2tJ,MAAL,GAAc,EAAd;AACA,WAAKC,SAAL,GAAiB,KAAjB,CAPoB,CAOI;AAExB;;AAEDF,aAAS,CAACl7I,SAAV,GAAsB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAf,EAAiD;AAEtE0M,iBAAW,EAAEwuI,SAFyD;AAItEn1I,SAAG,EAAE,aAAWs1I,KAAX,EAAmB;AAEvB,aAAKF,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,OARqE;AAUtEC,eAAS,EAAE,qBAAY;AAEtB;AACA,YAAMC,UAAU,GAAG,KAAKJ,MAAL,CAAa,CAAb,EAAiBtF,QAAjB,CAA2B,CAA3B,CAAnB;AACA,YAAM2F,QAAQ,GAAG,KAAKL,MAAL,CAAa,KAAKA,MAAL,CAAYhzJ,MAAZ,GAAqB,CAAlC,EAAsC0tJ,QAAtC,CAAgD,CAAhD,CAAjB;;AAEA,YAAK,CAAE0F,UAAU,CAACrkG,MAAX,CAAmBskG,QAAnB,CAAP,EAAuC;AAEtC,eAAKL,MAAL,CAAY3xJ,IAAZ,CAAkB,IAAI+wJ,SAAJ,CAAeiB,QAAf,EAAyBD,UAAzB,CAAlB;AAEA;AAED,OAtBqE;AAwBtE;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA1F,cAAQ,EAAE,kBAAWhnI,CAAX,EAAe;AAExB,YAAM8K,CAAC,GAAG9K,CAAC,GAAG,KAAKqnI,SAAL,EAAd;AACA,YAAMuF,YAAY,GAAG,KAAKC,eAAL,EAArB;AACA,YAAI5yJ,CAAC,GAAG,CAAR,CAJwB,CAMxB;;AAEA,eAAQA,CAAC,GAAG2yJ,YAAY,CAACtzJ,MAAzB,EAAkC;AAEjC,cAAKszJ,YAAY,CAAE3yJ,CAAF,CAAZ,IAAqB6wB,CAA1B,EAA8B;AAE7B,gBAAM86D,IAAI,GAAGgnE,YAAY,CAAE3yJ,CAAF,CAAZ,GAAoB6wB,CAAjC;AACA,gBAAM0hI,KAAK,GAAG,KAAKF,MAAL,CAAaryJ,CAAb,CAAd;AAEA,gBAAM+tJ,aAAa,GAAGwE,KAAK,CAACnF,SAAN,EAAtB;AACA,gBAAM58H,CAAC,GAAGu9H,aAAa,KAAK,CAAlB,GAAsB,CAAtB,GAA0B,IAAIpiE,IAAI,GAAGoiE,aAA/C;AAEA,mBAAOwE,KAAK,CAACnkB,UAAN,CAAkB59G,CAAlB,CAAP;AAEA;;AAEDxwB,WAAC;AAED;;AAED,eAAO,IAAP,CA1BwB,CA4BxB;AAEA,OA/DqE;AAiEtE;AACA;AACA;AAEAotJ,eAAS,EAAE,qBAAY;AAEtB,YAAM/9G,IAAI,GAAG,KAAKujH,eAAL,EAAb;AACA,eAAOvjH,IAAI,CAAEA,IAAI,CAAChwC,MAAL,GAAc,CAAhB,CAAX;AAEA,OA1EqE;AA4EtE;AACAouJ,sBAAgB,EAAE,4BAAY;AAE7B,aAAKzrI,WAAL,GAAmB,IAAnB;AACA,aAAK6wI,YAAL,GAAoB,IAApB;AACA,aAAKD,eAAL;AAEA,OAnFqE;AAqFtE;AACA;AAEAA,qBAAe,EAAE,2BAAY;AAE5B;AAEA,YAAK,KAAKC,YAAL,IAAqB,KAAKA,YAAL,CAAkBxzJ,MAAlB,KAA6B,KAAKgzJ,MAAL,CAAYhzJ,MAAnE,EAA4E;AAE3E,iBAAO,KAAKwzJ,YAAZ;AAEA,SAR2B,CAU5B;AACA;;;AAEA,YAAMxF,OAAO,GAAG,EAAhB;AACA,YAAIyF,IAAI,GAAG,CAAX;;AAEA,aAAM,IAAI9yJ,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAK4nJ,MAAL,CAAYhzJ,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD8yJ,cAAI,IAAI,KAAKT,MAAL,CAAaryJ,KAAb,EAAiBotJ,SAAjB,EAAR;AACAC,iBAAO,CAAC3sJ,IAAR,CAAcoyJ,IAAd;AAEA;;AAED,aAAKD,YAAL,GAAoBxF,OAApB;AAEA,eAAOA,OAAP;AAEA,OAnHqE;AAqHtE3X,qBAAe,EAAE,yBAAWyX,SAAX,EAAuB;AAEvC,YAAKA,SAAS,KAAK/+I,SAAnB,EAA+B++I,SAAS,GAAG,EAAZ;AAE/B,YAAMp/H,MAAM,GAAG,EAAf;;AAEA,aAAM,IAAI/tB,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAImtJ,SAAtB,EAAiCntJ,KAAC,EAAlC,EAAwC;AAEvC+tB,gBAAM,CAACrtB,IAAP,CAAa,KAAKqsJ,QAAL,CAAe/sJ,KAAC,GAAGmtJ,SAAnB,CAAb;AAEA;;AAED,YAAK,KAAKmF,SAAV,EAAsB;AAErBvkI,gBAAM,CAACrtB,IAAP,CAAaqtB,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAED,eAAOA,MAAP;AAEA,OAzIqE;AA2ItEm/H,eAAS,EAAE,mBAAWC,SAAX,EAAuB;AAEjCA,iBAAS,GAAGA,SAAS,IAAI,EAAzB;AAEA,YAAMp/H,MAAM,GAAG,EAAf;AACA,YAAI4gB,IAAJ;;AAEA,aAAM,IAAI3uC,KAAC,GAAG,CAAR,EAAWqyJ,MAAM,GAAG,KAAKA,MAA/B,EAAuCryJ,KAAC,GAAGqyJ,MAAM,CAAChzJ,MAAlD,EAA0DW,KAAC,EAA3D,EAAiE;AAEhE,cAAMuyJ,KAAK,GAAGF,MAAM,CAAEryJ,KAAF,CAApB;AACA,cAAM0jH,UAAU,GAAK6uC,KAAK,IAAIA,KAAK,CAACpD,cAAjB,GAAoChC,SAAS,GAAG,CAAhD,GACdoF,KAAK,KAAMA,KAAK,CAACb,WAAN,IAAqBa,KAAK,CAACX,YAAjC,CAAP,GAA2D,CAA3D,GACGW,KAAK,IAAIA,KAAK,CAACL,aAAjB,GAAmC/E,SAAS,GAAGoF,KAAK,CAACxkI,MAAN,CAAa1uB,MAA5D,GACC8tJ,SAHL;AAKA,cAAMrZ,GAAG,GAAGye,KAAK,CAACrF,SAAN,CAAiBxpC,UAAjB,CAAZ;;AAEA,eAAM,IAAIpjH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGwzI,GAAG,CAACz0I,MAAzB,EAAiCiB,CAAC,EAAlC,EAAwC;AAEvC,gBAAM8yC,KAAK,GAAG0gG,GAAG,CAAExzI,CAAF,CAAjB;AAEA,gBAAKquC,IAAI,IAAIA,IAAI,CAACyf,MAAL,CAAahb,KAAb,CAAb,EAAoC,SAJG,CAIO;;AAE9CrlB,kBAAM,CAACrtB,IAAP,CAAa0yC,KAAb;AACAzE,gBAAI,GAAGyE,KAAP;AAEA;AAED;;AAED,YAAK,KAAKk/G,SAAL,IAAkBvkI,MAAM,CAAC1uB,MAAP,GAAgB,CAAlC,IAAuC,CAAE0uB,MAAM,CAAEA,MAAM,CAAC1uB,MAAP,GAAgB,CAAlB,CAAN,CAA4B+uD,MAA5B,CAAoCrgC,MAAM,CAAE,CAAF,CAA1C,CAA9C,EAAkG;AAEjGA,gBAAM,CAACrtB,IAAP,CAAaqtB,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAED,eAAOA,MAAP;AAEA,OAjLqE;AAmLtE7S,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBkwG,aAAK,CAAC31I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAK01G,MAAL,GAAc,EAAd;;AAEA,aAAM,IAAIryJ,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGkyC,MAAM,CAAC01G,MAAP,CAAchzJ,MAAnC,EAA2CW,KAAC,GAAGyK,CAA/C,EAAkDzK,KAAC,EAAnD,EAAyD;AAExD,cAAMuyJ,KAAK,GAAG51G,MAAM,CAAC01G,MAAP,CAAeryJ,KAAf,CAAd;AAEA,eAAKqyJ,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAK,CAACj4I,KAAN,EAAlB;AAEA;;AAED,aAAKg4I,SAAL,GAAiB31G,MAAM,CAAC21G,SAAxB;AAEA,eAAO,IAAP;AAEA,OArMqE;AAuMtEz9F,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAGguJ,KAAK,CAAC31I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,CAAb;AAEAxV,YAAI,CAACyzJ,SAAL,GAAiB,KAAKA,SAAtB;AACAzzJ,YAAI,CAACwzJ,MAAL,GAAc,EAAd;;AAEA,aAAM,IAAIryJ,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAK4nJ,MAAL,CAAYhzJ,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,cAAMuyJ,KAAK,GAAG,KAAKF,MAAL,CAAaryJ,KAAb,CAAd;AACAnB,cAAI,CAACwzJ,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAK,CAAC19F,MAAN,EAAlB;AAEA;;AAED,eAAOh2D,IAAP;AAEA,OAvNqE;AAyNtE4vJ,cAAQ,EAAE,kBAAWnK,IAAX,EAAkB;AAE3BuI,aAAK,CAAC31I,SAAN,CAAgBu3I,QAAhB,CAAyBp6I,IAAzB,CAA+B,IAA/B,EAAqCiwI,IAArC;AAEA,aAAKgO,SAAL,GAAiBhO,IAAI,CAACgO,SAAtB;AACA,aAAKD,MAAL,GAAc,EAAd;;AAEA,aAAM,IAAIryJ,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAAC+N,MAAL,CAAYhzJ,MAAjC,EAAyCW,KAAC,GAAGyK,CAA7C,EAAgDzK,KAAC,EAAjD,EAAuD;AAEtD,cAAMuyJ,KAAK,GAAGjO,IAAI,CAAC+N,MAAL,CAAaryJ,KAAb,CAAd;AACA,eAAKqyJ,MAAL,CAAY3xJ,IAAZ,CAAkB,IAAIyxJ,MAAM,CAAEI,KAAK,CAAC7tJ,IAAR,CAAV,GAA2B+pJ,QAA3B,CAAqC8D,KAArC,CAAlB;AAEA;;AAED,eAAO,IAAP;AAEA;AAzOqE,KAAjD,CAAtB;;AA6OA,aAASQ,IAAT,CAAehlI,MAAf,EAAwB;AAEvBqkI,eAAS,CAAC/9I,IAAV,CAAgB,IAAhB;AAEA,WAAK3P,IAAL,GAAY,MAAZ;AAEA,WAAKsuJ,YAAL,GAAoB,IAAIhnG,OAAJ,EAApB;;AAEA,UAAKj+B,MAAL,EAAc;AAEb,aAAK49C,aAAL,CAAoB59C,MAApB;AAEA;AAED;;AAEDglI,QAAI,CAAC77I,SAAL,GAAiB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe48I,SAAS,CAACl7I,SAAzB,CAAf,EAAqD;AAErE0M,iBAAW,EAAEmvI,IAFwD;AAIrEpnF,mBAAa,EAAE,uBAAW59C,MAAX,EAAoB;AAElC,aAAKklI,MAAL,CAAallI,MAAM,CAAE,CAAF,CAAN,CAAYpjB,CAAzB,EAA4BojB,MAAM,CAAE,CAAF,CAAN,CAAYrM,CAAxC;;AAEA,aAAM,IAAI1hB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGsjB,MAAM,CAAC1uB,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,eAAKkzJ,MAAL,CAAanlI,MAAM,CAAE/tB,KAAF,CAAN,CAAY2K,CAAzB,EAA4BojB,MAAM,CAAE/tB,KAAF,CAAN,CAAY0hB,CAAxC;AAEA;;AAED,eAAO,IAAP;AAEA,OAhBoE;AAkBrEuxI,YAAM,EAAE,gBAAWtoJ,CAAX,EAAc+W,CAAd,EAAkB;AAEzB,aAAKsxI,YAAL,CAAkB31I,GAAlB,CAAuB1S,CAAvB,EAA0B+W,CAA1B,EAFyB,CAEM;;AAE/B,eAAO,IAAP;AAEA,OAxBoE;AA0BrEwxI,YAAM,EAAE,gBAAWvoJ,CAAX,EAAc+W,CAAd,EAAkB;AAEzB,YAAM6wI,KAAK,GAAG,IAAId,SAAJ,CAAe,KAAKuB,YAAL,CAAkB14I,KAAlB,EAAf,EAA0C,IAAI0xC,OAAJ,CAAarhD,CAAb,EAAgB+W,CAAhB,CAA1C,CAAd;AACA,aAAK2wI,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,aAAKS,YAAL,CAAkB31I,GAAlB,CAAuB1S,CAAvB,EAA0B+W,CAA1B;AAEA,eAAO,IAAP;AAEA,OAnCoE;AAqCrEyxI,sBAAgB,EAAE,0BAAWC,IAAX,EAAiBC,IAAjB,EAAuB1E,EAAvB,EAA2BC,EAA3B,EAAgC;AAEjD,YAAM2D,KAAK,GAAG,IAAIV,oBAAJ,CACb,KAAKmB,YAAL,CAAkB14I,KAAlB,EADa,EAEb,IAAI0xC,OAAJ,CAAaonG,IAAb,EAAmBC,IAAnB,CAFa,EAGb,IAAIrnG,OAAJ,CAAa2iG,EAAb,EAAiBC,EAAjB,CAHa,CAAd;AAMA,aAAKyD,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,aAAKS,YAAL,CAAkB31I,GAAlB,CAAuBsxI,EAAvB,EAA2BC,EAA3B;AAEA,eAAO,IAAP;AAEA,OAnDoE;AAqDrE0E,mBAAa,EAAE,uBAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuC/E,EAAvC,EAA2CC,EAA3C,EAAgD;AAE9D,YAAM2D,KAAK,GAAG,IAAInB,gBAAJ,CACb,KAAK4B,YAAL,CAAkB14I,KAAlB,EADa,EAEb,IAAI0xC,OAAJ,CAAaunG,KAAb,EAAoBC,KAApB,CAFa,EAGb,IAAIxnG,OAAJ,CAAaynG,KAAb,EAAoBC,KAApB,CAHa,EAIb,IAAI1nG,OAAJ,CAAa2iG,EAAb,EAAiBC,EAAjB,CAJa,CAAd;AAOA,aAAKyD,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,aAAKS,YAAL,CAAkB31I,GAAlB,CAAuBsxI,EAAvB,EAA2BC,EAA3B;AAEA,eAAO,IAAP;AAEA,OApEoE;AAsErE+E,gBAAU,EAAE,oBAAW7f;AAAI;AAAf,QAAqC;AAEhD,YAAM8f,IAAI,GAAG,CAAE,KAAKZ,YAAL,CAAkB14I,KAAlB,EAAF,EAA8BnG,MAA9B,CAAsC2/H,GAAtC,CAAb;AAEA,YAAMye,KAAK,GAAG,IAAIN,WAAJ,CAAiB2B,IAAjB,CAAd;AACA,aAAKvB,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,aAAKS,YAAL,CAAkB93I,IAAlB,CAAwB44H,GAAG,CAAEA,GAAG,CAACz0I,MAAJ,GAAa,CAAf,CAA3B;AAEA,eAAO,IAAP;AAEA,OAjFoE;AAmFrE4vI,SAAG,EAAE,aAAW0f,EAAX,EAAeC,EAAf,EAAmBY,OAAnB,EAA4BT,WAA5B,EAAyCC,SAAzC,EAAoDC,UAApD,EAAiE;AAErE,YAAMp2F,EAAE,GAAG,KAAKm6F,YAAL,CAAkBroJ,CAA7B;AACA,YAAMmuD,EAAE,GAAG,KAAKk6F,YAAL,CAAkBtxI,CAA7B;AAEA,aAAKmyI,MAAL,CAAalF,EAAE,GAAG91F,EAAlB,EAAsB+1F,EAAE,GAAG91F,EAA3B,EAA+B02F,OAA/B,EACCT,WADD,EACcC,SADd,EACyBC,UADzB;AAGA,eAAO,IAAP;AAEA,OA7FoE;AA+FrE4E,YAAM,EAAE,gBAAWlF,EAAX,EAAeC,EAAf,EAAmBY,OAAnB,EAA4BT,WAA5B,EAAyCC,SAAzC,EAAoDC,UAApD,EAAiE;AAExE,aAAK6E,UAAL,CAAiBnF,EAAjB,EAAqBC,EAArB,EAAyBY,OAAzB,EAAkCA,OAAlC,EAA2CT,WAA3C,EAAwDC,SAAxD,EAAmEC,UAAnE;AAEA,eAAO,IAAP;AAEA,OArGoE;AAuGrE8E,aAAO,EAAE,iBAAWpF,EAAX,EAAeC,EAAf,EAAmBC,OAAnB,EAA4BC,OAA5B,EAAqCC,WAArC,EAAkDC,SAAlD,EAA6DC,UAA7D,EAAyEC,SAAzE,EAAqF;AAE7F,YAAMr2F,EAAE,GAAG,KAAKm6F,YAAL,CAAkBroJ,CAA7B;AACA,YAAMmuD,EAAE,GAAG,KAAKk6F,YAAL,CAAkBtxI,CAA7B;AAEA,aAAKoyI,UAAL,CAAiBnF,EAAE,GAAG91F,EAAtB,EAA0B+1F,EAAE,GAAG91F,EAA/B,EAAmC+1F,OAAnC,EAA4CC,OAA5C,EAAqDC,WAArD,EAAkEC,SAAlE,EAA6EC,UAA7E,EAAyFC,SAAzF;AAEA,eAAO,IAAP;AAEA,OAhHoE;AAkHrE4E,gBAAU,EAAE,oBAAWnF,EAAX,EAAeC,EAAf,EAAmBC,OAAnB,EAA4BC,OAA5B,EAAqCC,WAArC,EAAkDC,SAAlD,EAA6DC,UAA7D,EAAyEC,SAAzE,EAAqF;AAEhG,YAAMqD,KAAK,GAAG,IAAI7D,YAAJ,CAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,OAA1B,EAAmCC,OAAnC,EAA4CC,WAA5C,EAAyDC,SAAzD,EAAoEC,UAApE,EAAgFC,SAAhF,CAAd;;AAEA,YAAK,KAAKmD,MAAL,CAAYhzJ,MAAZ,GAAqB,CAA1B,EAA8B;AAE7B;AACA,cAAM20J,UAAU,GAAGzB,KAAK,CAACxF,QAAN,CAAgB,CAAhB,CAAnB;;AAEA,cAAK,CAAEiH,UAAU,CAAC5lG,MAAX,CAAmB,KAAK4kG,YAAxB,CAAP,EAAgD;AAE/C,iBAAKE,MAAL,CAAac,UAAU,CAACrpJ,CAAxB,EAA2BqpJ,UAAU,CAACtyI,CAAtC;AAEA;AAED;;AAED,aAAK2wI,MAAL,CAAY3xJ,IAAZ,CAAkB6xJ,KAAlB;AAEA,YAAM0B,SAAS,GAAG1B,KAAK,CAACxF,QAAN,CAAgB,CAAhB,CAAlB;AACA,aAAKiG,YAAL,CAAkB93I,IAAlB,CAAwB+4I,SAAxB;AAEA,eAAO,IAAP;AAEA,OA1IoE;AA4IrE/4I,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBy1G,iBAAS,CAACl7I,SAAV,CAAoBgE,IAApB,CAAyB7G,IAAzB,CAA+B,IAA/B,EAAqCsoC,MAArC;AAEA,aAAKq2G,YAAL,CAAkB93I,IAAlB,CAAwByhC,MAAM,CAACq2G,YAA/B;AAEA,eAAO,IAAP;AAEA,OApJoE;AAsJrEn+F,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAGuzJ,SAAS,CAACl7I,SAAV,CAAoB29C,MAApB,CAA2BxgD,IAA3B,CAAiC,IAAjC,CAAb;AAEAxV,YAAI,CAACm0J,YAAL,GAAoB,KAAKA,YAAL,CAAkB1kG,OAAlB,EAApB;AAEA,eAAOzvD,IAAP;AAEA,OA9JoE;AAgKrE4vJ,cAAQ,EAAE,kBAAWnK,IAAX,EAAkB;AAE3B8N,iBAAS,CAACl7I,SAAV,CAAoBu3I,QAApB,CAA6Bp6I,IAA7B,CAAmC,IAAnC,EAAyCiwI,IAAzC;AAEA,aAAK0O,YAAL,CAAkB3kG,SAAlB,CAA6Bi2F,IAAI,CAAC0O,YAAlC;AAEA,eAAO,IAAP;AAEA;AAxKoE,KAArD,CAAjB;;AA4KA,aAASkB,KAAT,CAAgBnmI,MAAhB,EAAyB;AAExBglI,UAAI,CAAC1+I,IAAL,CAAW,IAAX,EAAiB0Z,MAAjB;AAEA,WAAK47B,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ;AAEA,WAAK5kD,IAAL,GAAY,OAAZ;AAEA,WAAKsvI,KAAL,GAAa,EAAb;AAEA;;AAEDkgB,SAAK,CAACh9I,SAAN,GAAkB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeu9I,IAAI,CAAC77I,SAApB,CAAf,EAAgD;AAEjE0M,iBAAW,EAAEswI,KAFoD;AAIjEC,oBAAc,EAAE,wBAAWhH,SAAX,EAAuB;AAEtC,YAAMiH,QAAQ,GAAG,EAAjB;;AAEA,aAAM,IAAIp0J,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKupI,KAAL,CAAW30I,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErDo0J,kBAAQ,CAAEp0J,KAAF,CAAR,GAAgB,KAAKg0I,KAAL,CAAYh0I,KAAZ,EAAgBktJ,SAAhB,CAA2BC,SAA3B,CAAhB;AAEA;;AAED,eAAOiH,QAAP;AAEA,OAhBgE;AAkBjE;AAEAvlI,mBAAa,EAAE,uBAAWs+H,SAAX,EAAuB;AAErC,eAAO;AAENnzG,eAAK,EAAE,KAAKkzG,SAAL,CAAgBC,SAAhB,CAFD;AAGNnZ,eAAK,EAAE,KAAKmgB,cAAL,CAAqBhH,SAArB;AAHD,SAAP;AAOA,OA7BgE;AA+BjEjyI,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBo2G,YAAI,CAAC77I,SAAL,CAAegE,IAAf,CAAoB7G,IAApB,CAA0B,IAA1B,EAAgCsoC,MAAhC;AAEA,aAAKq3F,KAAL,GAAa,EAAb;;AAEA,aAAM,IAAIh0I,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGkyC,MAAM,CAACq3F,KAAP,CAAa30I,MAAlC,EAA0CW,KAAC,GAAGyK,CAA9C,EAAiDzK,KAAC,EAAlD,EAAwD;AAEvD,cAAM2xI,IAAI,GAAGh1F,MAAM,CAACq3F,KAAP,CAAch0I,KAAd,CAAb;AAEA,eAAKg0I,KAAL,CAAWtzI,IAAX,CAAiBixI,IAAI,CAACr3H,KAAL,EAAjB;AAEA;;AAED,eAAO,IAAP;AAEA,OA/CgE;AAiDjEu6C,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAGk0J,IAAI,CAAC77I,SAAL,CAAe29C,MAAf,CAAsBxgD,IAAtB,CAA4B,IAA5B,CAAb;AAEAxV,YAAI,CAAC8qD,IAAL,GAAY,KAAKA,IAAjB;AACA9qD,YAAI,CAACm1I,KAAL,GAAa,EAAb;;AAEA,aAAM,IAAIh0I,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKupI,KAAL,CAAW30I,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,cAAM2xI,IAAI,GAAG,KAAKqC,KAAL,CAAYh0I,KAAZ,CAAb;AACAnB,cAAI,CAACm1I,KAAL,CAAWtzI,IAAX,CAAiBixI,IAAI,CAAC98E,MAAL,EAAjB;AAEA;;AAED,eAAOh2D,IAAP;AAEA,OAjEgE;AAmEjE4vJ,cAAQ,EAAE,kBAAWnK,IAAX,EAAkB;AAE3ByO,YAAI,CAAC77I,SAAL,CAAeu3I,QAAf,CAAwBp6I,IAAxB,CAA8B,IAA9B,EAAoCiwI,IAApC;AAEA,aAAK36F,IAAL,GAAY26F,IAAI,CAAC36F,IAAjB;AACA,aAAKqqF,KAAL,GAAa,EAAb;;AAEA,aAAM,IAAIh0I,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACtQ,KAAL,CAAW30I,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,cAAM2xI,IAAI,GAAG2S,IAAI,CAACtQ,KAAL,CAAYh0I,KAAZ,CAAb;AACA,eAAKg0I,KAAL,CAAWtzI,IAAX,CAAiB,IAAIqyJ,IAAJ,GAAWtE,QAAX,CAAqB9c,IAArB,CAAjB;AAEA;;AAED,eAAO,IAAP;AAEA;AAnFgE,KAAhD,CAAlB;;AAuFA,aAAS0iB,KAAT,CAAgB1kI,KAAhB,EAAuBoxF,SAAvB,EAAmC;AAElC37C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,OAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,CAAWhmD,KAAX,CAAb;AACA,WAAKoxF,SAAL,GAAiBA,SAAS,KAAK3yG,SAAd,GAA0B2yG,SAA1B,GAAsC,CAAvD;AAEA,WAAK96C,aAAL,GAAqB73D,SAArB;AAEA;;AAEDimJ,SAAK,CAACn9I,SAAN,GAAkB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAErE0M,iBAAW,EAAEywI,KAFwD;AAIrE5sF,aAAO,EAAE,IAJ4D;AAMrEvsD,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzByoB,gBAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC;AAEA,aAAKhtB,KAAL,CAAWzU,IAAX,CAAiByhC,MAAM,CAAChtB,KAAxB;AACA,aAAKoxF,SAAL,GAAiBpkE,MAAM,CAACokE,SAAxB;AAEA,eAAO,IAAP;AAEA,OAfoE;AAiBrElsD,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGumE,QAAQ,CAACluD,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA50B,YAAI,CAAC6P,MAAL,CAAYihB,KAAZ,GAAoB,KAAKA,KAAL,CAAWwnD,MAAX,EAApB;AACAt4E,YAAI,CAAC6P,MAAL,CAAYqyG,SAAZ,GAAwB,KAAKA,SAA7B;AAEA,YAAK,KAAK1pB,WAAL,KAAqBjpF,SAA1B,EAAsCvP,IAAI,CAAC6P,MAAL,CAAY2oF,WAAZ,GAA0B,KAAKA,WAAL,CAAiBlgB,MAAjB,EAA1B;AAEtC,YAAK,KAAKx3D,QAAL,KAAkBvR,SAAvB,EAAmCvP,IAAI,CAAC6P,MAAL,CAAYiR,QAAZ,GAAuB,KAAKA,QAA5B;AACnC,YAAK,KAAKJ,KAAL,KAAenR,SAApB,EAAgCvP,IAAI,CAAC6P,MAAL,CAAY6Q,KAAZ,GAAoB,KAAKA,KAAzB;AAChC,YAAK,KAAKk3E,KAAL,KAAeroF,SAApB,EAAgCvP,IAAI,CAAC6P,MAAL,CAAY+nF,KAAZ,GAAoB,KAAKA,KAAzB;AAChC,YAAK,KAAKirB,QAAL,KAAkBtzG,SAAvB,EAAmCvP,IAAI,CAAC6P,MAAL,CAAYgzG,QAAZ,GAAuB,KAAKA,QAA5B;AAEnC,YAAK,KAAKpf,MAAL,KAAgBl0F,SAArB,EAAiCvP,IAAI,CAAC6P,MAAL,CAAY4zF,MAAZ,GAAqB,KAAKA,MAAL,CAAYztC,MAAZ,EAArB;AAEjC,eAAOh2D,IAAP;AAEA;AAnCoE,KAApD,CAAlB;;AAuCA,aAASy1J,eAAT,CAA0Bl9D,QAA1B,EAAoCC,WAApC,EAAiD0pB,SAAjD,EAA6D;AAE5DszC,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkB+iF,QAAlB,EAA4B2pB,SAA5B;AAEA,WAAKr8G,IAAL,GAAY,iBAAZ;AAEA,WAAKshE,UAAL,GAAkB53D,SAAlB;AAEA,WAAKoM,QAAL,CAAcU,IAAd,CAAoBkqD,QAAQ,CAACE,SAA7B;AACA,WAAK1Q,YAAL;AAEA,WAAKyiC,WAAL,GAAmB,IAAI1hB,KAAJ,CAAW0hB,WAAX,CAAnB;AAEA;;AAEDi9D,mBAAe,CAACp9I,SAAhB,GAA4B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAE5E0M,iBAAW,EAAE0wI,eAF+D;AAI5EzyC,uBAAiB,EAAE,IAJyD;AAM5E3mG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAK06C,WAAL,CAAiBn8E,IAAjB,CAAuByhC,MAAM,CAAC06C,WAA9B;AAEA,eAAO,IAAP;AAEA;AAd2E,KAAjD,CAA5B;;AAkBA,aAASk9D,WAAT,CAAsB3mI,MAAtB,EAA+B;AAE9B,WAAKA,MAAL,GAAcA,MAAd;AAEA,WAAK0zF,IAAL,GAAY,CAAZ;AACA,WAAKC,UAAL,GAAkB,CAAlB;AACA,WAAK1kG,MAAL,GAAc,CAAd;AAEA,WAAK2kG,OAAL,GAAe,IAAIx1D,OAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAf;AAEA,WAAKh/C,GAAL,GAAW,IAAX;AACA,WAAK23G,OAAL,GAAe,IAAf;AACA,WAAKlkG,MAAL,GAAc,IAAIi+C,OAAJ,EAAd;AAEA,WAAKwL,UAAL,GAAkB,IAAlB;AACA,WAAKloD,WAAL,GAAmB,KAAnB;AAEA,WAAK+gG,QAAL,GAAgB,IAAIpwB,OAAJ,EAAhB;AACA,WAAK6hE,aAAL,GAAqB,IAAIxoG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAArB;AAEA,WAAKyoG,cAAL,GAAsB,CAAtB;AAEA,WAAKC,UAAL,GAAkB,CAEjB,IAAIp/F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAFiB,CAAlB;AAMA;;AAED/zD,UAAM,CAACiiC,MAAP,CAAe+wH,WAAW,CAACr9I,SAA3B,EAAsC;AAErCimH,uBAAiB,EAAE,IAAIz+D,OAAJ,EAFkB;AAIrCi2F,yBAAmB,EAAE,IAAI74F,OAAJ,EAJgB;AAMrC84F,iBAAW,EAAE,IAAI94F,OAAJ,EANwB;AAQrC+oD,sBAAgB,EAAE,4BAAY;AAE7B,eAAO,KAAK4vC,cAAZ;AAEA,OAZoC;AAcrCxvC,gBAAU,EAAE,sBAAY;AAEvB,eAAO,KAAKlC,QAAZ;AAEA,OAlBoC;AAoBrCiC,oBAAc,EAAE,wBAAW1F,KAAX,EAAmB;AAElC,YAAM6G,YAAY,GAAG,KAAKv4F,MAA1B;AAAA,YACCinI,YAAY,GAAG,KAAKp0I,MADrB;AAAA,YAECq0I,gBAAgB,GAAG,KAAK33B,iBAFzB;AAAA,YAGC43B,UAAU,GAAG,KAAKH,WAHnB;AAAA,YAICI,kBAAkB,GAAG,KAAKL,mBAJ3B;AAMAK,0BAAkB,CAAC32F,qBAAnB,CAA0CihD,KAAK,CAACpiD,WAAhD;AACAipD,oBAAY,CAAC3rG,QAAb,CAAsBU,IAAtB,CAA4B85I,kBAA5B;AAEAD,kBAAU,CAAC12F,qBAAX,CAAkCihD,KAAK,CAACz1G,MAAN,CAAaqzD,WAA/C;AACAipD,oBAAY,CAAChpG,MAAb,CAAqB43I,UAArB;AACA5uC,oBAAY,CAACn+C,iBAAb;AAEA8sF,wBAAgB,CAAC9kG,gBAAjB,CAAmCm2D,YAAY,CAACppD,gBAAhD,EAAkEopD,YAAY,CAACrpD,kBAA/E;;AACA,aAAKimD,QAAL,CAAc/vB,uBAAd,CAAuC8hE,gBAAvC;;AAEAD,oBAAY,CAACx3I,GAAb,CACC,GADD,EACM,GADN,EACW,GADX,EACgB,GADhB,EAEC,GAFD,EAEM,GAFN,EAEW,GAFX,EAEgB,GAFhB,EAGC,GAHD,EAGM,GAHN,EAGW,GAHX,EAGgB,GAHhB,EAIC,GAJD,EAIM,GAJN,EAIW,GAJX,EAIgB,GAJhB;AAOAw3I,oBAAY,CAACjoG,QAAb,CAAuBu5D,YAAY,CAACppD,gBAApC;AACA83F,oBAAY,CAACjoG,QAAb,CAAuBu5D,YAAY,CAACrpD,kBAApC;AAEA,OAhDoC;AAkDrCioD,iBAAW,EAAE,qBAAWkwC,aAAX,EAA2B;AAEvC,eAAO,KAAKP,UAAL,CAAiBO,aAAjB,CAAP;AAEA,OAtDoC;AAwDrCzwC,qBAAe,EAAE,2BAAY;AAE5B,eAAO,KAAKgwC,aAAZ;AAEA,OA5DoC;AA8DrCt5I,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB,aAAK/uB,MAAL,GAAc+uB,MAAM,CAAC/uB,MAAP,CAActT,KAAd,EAAd;AAEA,aAAKgnG,IAAL,GAAY3kE,MAAM,CAAC2kE,IAAnB;AACA,aAAKzkG,MAAL,GAAc8/B,MAAM,CAAC9/B,MAArB;AAEA,aAAK2kG,OAAL,CAAatmG,IAAb,CAAmByhC,MAAM,CAAC6kE,OAA1B;AAEA,eAAO,IAAP;AAEA,OAzEoC;AA2ErClnG,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OA/EoC;AAiFrC25C,YAAM,EAAE,kBAAY;AAEnB,YAAMnmD,MAAM,GAAG,EAAf;AAEA,YAAK,KAAK4yG,IAAL,KAAc,CAAnB,EAAuB5yG,MAAM,CAAC4yG,IAAP,GAAc,KAAKA,IAAnB;AACvB,YAAK,KAAKC,UAAL,KAAoB,CAAzB,EAA6B7yG,MAAM,CAAC6yG,UAAP,GAAoB,KAAKA,UAAzB;AAC7B,YAAK,KAAK1kG,MAAL,KAAgB,CAArB,EAAyBnO,MAAM,CAACmO,MAAP,GAAgB,KAAKA,MAArB;AACzB,YAAK,KAAK2kG,OAAL,CAAa72G,CAAb,KAAmB,GAAnB,IAA0B,KAAK62G,OAAL,CAAa9/F,CAAb,KAAmB,GAAlD,EAAwDhT,MAAM,CAAC8yG,OAAP,GAAiB,KAAKA,OAAL,CAAalzD,OAAb,EAAjB;AAExD5/C,cAAM,CAACkf,MAAP,GAAgB,KAAKA,MAAL,CAAYinC,MAAZ,CAAoB,KAApB,EAA4BnmD,MAA5C;AACA,eAAOA,MAAM,CAACkf,MAAP,CAAcnN,MAArB;AAEA,eAAO/R,MAAP;AAEA;AA/FoC,KAAtC;;AAmGA,aAASwmJ,eAAT,GAA2B;AAE1BX,iBAAW,CAAClgJ,IAAZ,CAAkB,IAAlB,EAAwB,IAAI47E,iBAAJ,CAAuB,EAAvB,EAA2B,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAxB;AAEA;;AAEDilE,mBAAe,CAACh+I,SAAhB,GAA4B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe++I,WAAW,CAACr9I,SAA3B,CAAf,EAAuD;AAElF0M,iBAAW,EAAEsxI,eAFqE;AAIlFC,uBAAiB,EAAE,IAJ+D;AAMlFnwC,oBAAc,EAAE,wBAAW1F,KAAX,EAAmB;AAElC,YAAM1xF,MAAM,GAAG,KAAKA,MAApB;AAEA,YAAMrN,GAAG,GAAG4oC,SAAS,CAACE,OAAV,GAAoB,CAApB,GAAwBi2D,KAAK,CAAC//F,KAA1C;AACA,YAAM2wE,MAAM,GAAG,KAAKsxB,OAAL,CAAalzF,KAAb,GAAqB,KAAKkzF,OAAL,CAAanzF,MAAjD;AACA,YAAM20C,GAAG,GAAGs8C,KAAK,CAAC3/F,QAAN,IAAkBiO,MAAM,CAACo1C,GAArC;;AAEA,YAAKziD,GAAG,KAAKqN,MAAM,CAACrN,GAAf,IAAsB2vE,MAAM,KAAKtiE,MAAM,CAACsiE,MAAxC,IAAkDltB,GAAG,KAAKp1C,MAAM,CAACo1C,GAAtE,EAA4E;AAE3Ep1C,gBAAM,CAACrN,GAAP,GAAaA,GAAb;AACAqN,gBAAM,CAACsiE,MAAP,GAAgBA,MAAhB;AACAtiE,gBAAM,CAACo1C,GAAP,GAAaA,GAAb;AACAp1C,gBAAM,CAACxS,sBAAP;AAEA;;AAEDm5I,mBAAW,CAACr9I,SAAZ,CAAsB8tG,cAAtB,CAAqC3wG,IAArC,CAA2C,IAA3C,EAAiDirG,KAAjD;AAEA;AAzBiF,KAAvD,CAA5B;;AA6BA,aAAS81C,SAAT,CAAoBzlI,KAApB,EAA2BoxF,SAA3B,EAAsCphG,QAAtC,EAAgDJ,KAAhD,EAAuDmiG,QAAvD,EAAiEjrB,KAAjE,EAAyE;AAExE49D,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBsb,KAAlB,EAAyBoxF,SAAzB;AAEA,WAAKr8G,IAAL,GAAY,WAAZ;AAEA,WAAK8V,QAAL,CAAcU,IAAd,CAAoBkqD,QAAQ,CAACE,SAA7B;AACA,WAAK1Q,YAAL;AAEA,WAAK/qD,MAAL,GAAc,IAAIu7D,QAAJ,EAAd;AAEA7jE,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AACrC5rC,WAAG,EAAE,eAAY;AAEhB;AACA;AACA,iBAAO,KAAKkwG,SAAL,GAAiBxoG,IAAI,CAACC,EAA7B;AAEA,SAPoC;AAQrC6E,WAAG,EAAE,aAAWg4I,KAAX,EAAmB;AAEvB;AACA;AACA,eAAKt0C,SAAL,GAAiBs0C,KAAK,GAAG98I,IAAI,CAACC,EAA9B;AAEA;AAdoC,OAAtC;AAiBA,WAAKmH,QAAL,GAAkBA,QAAQ,KAAKvR,SAAf,GAA6BuR,QAA7B,GAAwC,CAAxD;AACA,WAAKJ,KAAL,GAAeA,KAAK,KAAKnR,SAAZ,GAA0BmR,KAA1B,GAAkChH,IAAI,CAACC,EAAL,GAAU,CAAzD;AACA,WAAKkpG,QAAL,GAAkBA,QAAQ,KAAKtzG,SAAf,GAA6BszG,QAA7B,GAAwC,CAAxD;AACA,WAAKjrB,KAAL,GAAeA,KAAK,KAAKroF,SAAZ,GAA0BqoF,KAA1B,GAAkC,CAA/C,CA/BwE,CA+BtB;;AAElD,WAAK6L,MAAL,GAAc,IAAI4yD,eAAJ,EAAd;AAEA;;AAEDE,aAAS,CAACl+I,SAAV,GAAsB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAEtE0M,iBAAW,EAAEwxI,SAFyD;AAItE3zC,iBAAW,EAAE,IAJyD;AAMtEvmG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAKh9B,QAAL,GAAgBg9B,MAAM,CAACh9B,QAAvB;AACA,aAAKJ,KAAL,GAAao9B,MAAM,CAACp9B,KAApB;AACA,aAAKmiG,QAAL,GAAgB/kE,MAAM,CAAC+kE,QAAvB;AACA,aAAKjrB,KAAL,GAAa95C,MAAM,CAAC85C,KAApB;AAEA,aAAK5sF,MAAL,GAAc8yC,MAAM,CAAC9yC,MAAP,CAAcyQ,KAAd,EAAd;AAEA,aAAKgoF,MAAL,GAAc3lD,MAAM,CAAC2lD,MAAP,CAAchoF,KAAd,EAAd;AAEA,eAAO,IAAP;AAEA;AArBqE,KAAjD,CAAtB;;AAyBA,aAASg7I,gBAAT,GAA4B;AAE3Bf,iBAAW,CAAClgJ,IAAZ,CAAkB,IAAlB,EAAwB,IAAI47E,iBAAJ,CAAuB,EAAvB,EAA2B,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAxB;AAEA,WAAKukE,aAAL,GAAqB,IAAIxoG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAArB;AAEA,WAAKyoG,cAAL,GAAsB,CAAtB;AAEA,WAAKC,UAAL,GAAkB,CACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,UAAIp/F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAfiB,EAgBjB;AACA,UAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAjBiB,EAkBjB;AACA,UAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAnBiB,EAoBjB;AACA,UAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CArBiB,EAsBjB;AACA,UAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAvBiB,EAwBjB;AACA,UAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAzBiB,CAAlB;AA4BA,WAAKigG,eAAL,GAAuB,CACtB,IAAIz5F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADsB,EACE,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CADF,EAC4B,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAD5B,EAEtB,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAFsB,EAEI,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFJ,EAE4B,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAArB,CAF5B,CAAvB;AAKA,WAAK05F,QAAL,GAAgB,CACf,IAAI15F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADe,EACS,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADT,EACiC,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADjC,EAEf,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFe,EAES,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFT,EAEiC,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAFjC,CAAhB;AAKA;;AAEDw5F,oBAAgB,CAACp+I,SAAjB,GAA6B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe++I,WAAW,CAACr9I,SAA3B,CAAf,EAAuD;AAEnF0M,iBAAW,EAAE0xI,gBAFsE;AAInF7wC,wBAAkB,EAAE,IAJ+D;AAMnFO,oBAAc,EAAE,wBAAW1F,KAAX,EAAkB21C,aAAlB,EAAkC;AAEjD,YAAKA,aAAa,KAAK7mJ,SAAvB,EAAmC6mJ,aAAa,GAAG,CAAhB;AAEnC,YAAMrnI,MAAM,GAAG,KAAKA,MAApB;AAAA,YACCinI,YAAY,GAAG,KAAKp0I,MADrB;AAAA,YAECu0I,kBAAkB,GAAG,KAAKL,mBAF3B;AAAA,YAGCI,UAAU,GAAG,KAAKH,WAHnB;AAAA,YAICE,gBAAgB,GAAG,KAAK33B,iBAJzB;AAMA63B,0BAAkB,CAAC32F,qBAAnB,CAA0CihD,KAAK,CAACpiD,WAAhD;AACAtvC,cAAM,CAACpT,QAAP,CAAgBU,IAAhB,CAAsB85I,kBAAtB;AAEAD,kBAAU,CAAC75I,IAAX,CAAiB0S,MAAM,CAACpT,QAAxB;AACAu6I,kBAAU,CAAC93I,GAAX,CAAgB,KAAKs4I,eAAL,CAAsBN,aAAtB,CAAhB;AACArnI,cAAM,CAAC/R,EAAP,CAAUX,IAAV,CAAgB,KAAKs6I,QAAL,CAAeP,aAAf,CAAhB;AACArnI,cAAM,CAACzQ,MAAP,CAAe43I,UAAf;AACAnnI,cAAM,CAACo6C,iBAAP;AAEA6sF,oBAAY,CAAChzF,eAAb,CAA8B,CAAEmzF,kBAAkB,CAACrqJ,CAAnD,EAAsD,CAAEqqJ,kBAAkB,CAACtzI,CAA3E,EAA8E,CAAEszI,kBAAkB,CAAC/nI,CAAnG;AAEA6nI,wBAAgB,CAAC9kG,gBAAjB,CAAmCpiC,MAAM,CAACmvC,gBAA1C,EAA4DnvC,MAAM,CAACkvC,kBAAnE;;AACA,aAAKimD,QAAL,CAAc/vB,uBAAd,CAAuC8hE,gBAAvC;AAEA;AA9BkF,KAAvD,CAA7B;;AAkCA,aAASW,UAAT,CAAqB9lI,KAArB,EAA4BoxF,SAA5B,EAAuCphG,QAAvC,EAAiD82E,KAAjD,EAAyD;AAExD49D,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBsb,KAAlB,EAAyBoxF,SAAzB;AAEA,WAAKr8G,IAAL,GAAY,YAAZ;AAEAnD,YAAM,CAACk7C,cAAP,CAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AACrC5rC,WAAG,EAAE,eAAY;AAEhB;AACA;AACA,iBAAO,KAAKkwG,SAAL,GAAiB,CAAjB,GAAqBxoG,IAAI,CAACC,EAAjC;AAEA,SAPoC;AAQrC6E,WAAG,EAAE,aAAWg4I,KAAX,EAAmB;AAEvB;AACA;AACA,eAAKt0C,SAAL,GAAiBs0C,KAAK,IAAK,IAAI98I,IAAI,CAACC,EAAd,CAAtB;AAEA;AAdoC,OAAtC;AAiBA,WAAKmH,QAAL,GAAkBA,QAAQ,KAAKvR,SAAf,GAA6BuR,QAA7B,GAAwC,CAAxD;AACA,WAAK82E,KAAL,GAAeA,KAAK,KAAKroF,SAAZ,GAA0BqoF,KAA1B,GAAkC,CAA/C,CAxBwD,CAwBN;;AAElD,WAAK6L,MAAL,GAAc,IAAIgzD,gBAAJ,EAAd;AAEA;;AAEDG,cAAU,CAACv+I,SAAX,GAAuB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAEvE0M,iBAAW,EAAE6xI,UAF0D;AAIvE7zC,kBAAY,EAAE,IAJyD;AAMvE1mG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAKh9B,QAAL,GAAgBg9B,MAAM,CAACh9B,QAAvB;AACA,aAAK82E,KAAL,GAAa95C,MAAM,CAAC85C,KAApB;AAEA,aAAK6L,MAAL,GAAc3lD,MAAM,CAAC2lD,MAAP,CAAchoF,KAAd,EAAd;AAEA,eAAO,IAAP;AAEA;AAjBsE,KAAjD,CAAvB;;AAqBA,aAASo7I,kBAAT,CAA6B90I,IAA7B,EAAmCD,KAAnC,EAA0CG,GAA1C,EAA+CC,MAA/C,EAAuDgiD,IAAvD,EAA6DC,GAA7D,EAAmE;AAElEgtB,YAAM,CAAC37E,IAAP,CAAa,IAAb;AAEA,WAAK3P,IAAL,GAAY,oBAAZ;AAEA,WAAKgW,IAAL,GAAY,CAAZ;AACA,WAAK1I,IAAL,GAAY,IAAZ;AAEA,WAAK4O,IAAL,GAAcA,IAAI,KAAKxS,SAAX,GAAyBwS,IAAzB,GAAgC,CAAE,CAA9C;AACA,WAAKD,KAAL,GAAeA,KAAK,KAAKvS,SAAZ,GAA0BuS,KAA1B,GAAkC,CAA/C;AACA,WAAKG,GAAL,GAAaA,GAAG,KAAK1S,SAAV,GAAwB0S,GAAxB,GAA8B,CAAzC;AACA,WAAKC,MAAL,GAAgBA,MAAM,KAAK3S,SAAb,GAA2B2S,MAA3B,GAAoC,CAAE,CAApD;AAEA,WAAKgiD,IAAL,GAAcA,IAAI,KAAK30D,SAAX,GAAyB20D,IAAzB,GAAgC,GAA5C;AACA,WAAKC,GAAL,GAAaA,GAAG,KAAK50D,SAAV,GAAwB40D,GAAxB,GAA8B,IAAzC;AAEA,WAAK5nD,sBAAL;AAEA;;AAEDs6I,sBAAkB,CAACx+I,SAAnB,GAA+B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAew6E,MAAM,CAAC94E,SAAtB,CAAf,EAAkD;AAEhF0M,iBAAW,EAAE8xI,kBAFmE;AAIhFh1I,0BAAoB,EAAE,IAJ0D;AAMhFxF,UAAI,EAAE,cAAWyhC,MAAX,EAAmBktB,SAAnB,EAA+B;AAEpCmmB,cAAM,CAAC94E,SAAP,CAAiBgE,IAAjB,CAAsB7G,IAAtB,CAA4B,IAA5B,EAAkCsoC,MAAlC,EAA0CktB,SAA1C;AAEA,aAAKjpD,IAAL,GAAY+7B,MAAM,CAAC/7B,IAAnB;AACA,aAAKD,KAAL,GAAag8B,MAAM,CAACh8B,KAApB;AACA,aAAKG,GAAL,GAAW67B,MAAM,CAAC77B,GAAlB;AACA,aAAKC,MAAL,GAAc47B,MAAM,CAAC57B,MAArB;AACA,aAAKgiD,IAAL,GAAYpmB,MAAM,CAAComB,IAAnB;AACA,aAAKC,GAAL,GAAWrmB,MAAM,CAACqmB,GAAlB;AAEA,aAAKtoD,IAAL,GAAYiiC,MAAM,CAACjiC,IAAnB;AACA,aAAK1I,IAAL,GAAY2qC,MAAM,CAAC3qC,IAAP,KAAgB,IAAhB,GAAuB,IAAvB,GAA8BzQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmBmZ,MAAM,CAAC3qC,IAA1B,CAA1C;AAEA,eAAO,IAAP;AAEA,OAtB+E;AAwBhF6+E,mBAAa,EAAE,uBAAWC,SAAX,EAAsBC,UAAtB,EAAkCpmF,CAAlC,EAAqC+W,CAArC,EAAwC4M,KAAxC,EAA+CD,MAA/C,EAAwD;AAEtE,YAAK,KAAKrc,IAAL,KAAc,IAAnB,EAA0B;AAEzB,eAAKA,IAAL,GAAY;AACX+F,mBAAO,EAAE,IADE;AAEX+4E,qBAAS,EAAE,CAFA;AAGXC,sBAAU,EAAE,CAHD;AAIX53C,mBAAO,EAAE,CAJE;AAKXE,mBAAO,EAAE,CALE;AAMX/qB,iBAAK,EAAE,CANI;AAOXD,kBAAM,EAAE;AAPG,WAAZ;AAUA;;AAED,aAAKrc,IAAL,CAAU+F,OAAV,GAAoB,IAApB;AACA,aAAK/F,IAAL,CAAU8+E,SAAV,GAAsBA,SAAtB;AACA,aAAK9+E,IAAL,CAAU++E,UAAV,GAAuBA,UAAvB;AACA,aAAK/+E,IAAL,CAAUmnC,OAAV,GAAoBxuC,CAApB;AACA,aAAKqH,IAAL,CAAUqnC,OAAV,GAAoB33B,CAApB;AACA,aAAK1P,IAAL,CAAUsc,KAAV,GAAkBA,KAAlB;AACA,aAAKtc,IAAL,CAAUqc,MAAV,GAAmBA,MAAnB;AAEA,aAAKjT,sBAAL;AAEA,OAlD+E;AAoDhF41E,qBAAe,EAAE,2BAAY;AAE5B,YAAK,KAAKh/E,IAAL,KAAc,IAAnB,EAA0B;AAEzB,eAAKA,IAAL,CAAU+F,OAAV,GAAoB,KAApB;AAEA;;AAED,aAAKqD,sBAAL;AAEA,OA9D+E;AAgEhFA,4BAAsB,EAAE,kCAAY;AAEnC,YAAMoH,EAAE,GAAG,CAAE,KAAK7B,KAAL,GAAa,KAAKC,IAApB,KAA+B,IAAI,KAAKlG,IAAxC,CAAX;AACA,YAAM+H,EAAE,GAAG,CAAE,KAAK3B,GAAL,GAAW,KAAKC,MAAlB,KAA+B,IAAI,KAAKrG,IAAxC,CAAX;AACA,YAAM83C,EAAE,GAAG,CAAE,KAAK7xC,KAAL,GAAa,KAAKC,IAApB,IAA6B,CAAxC;AACA,YAAM6xC,EAAE,GAAG,CAAE,KAAK3xC,GAAL,GAAW,KAAKC,MAAlB,IAA6B,CAAxC;AAEA,YAAIH,IAAI,GAAG4xC,EAAE,GAAGhwC,EAAhB;AACA,YAAI7B,KAAK,GAAG6xC,EAAE,GAAGhwC,EAAjB;AACA,YAAI1B,GAAG,GAAG2xC,EAAE,GAAGhwC,EAAf;AACA,YAAI1B,MAAM,GAAG0xC,EAAE,GAAGhwC,EAAlB;;AAEA,YAAK,KAAKzQ,IAAL,KAAc,IAAd,IAAsB,KAAKA,IAAL,CAAU+F,OAArC,EAA+C;AAE9C,cAAM49I,MAAM,GAAG,CAAE,KAAKh1I,KAAL,GAAa,KAAKC,IAApB,IAA6B,KAAK5O,IAAL,CAAU8+E,SAAvC,GAAmD,KAAKp2E,IAAvE;AACA,cAAMk7I,MAAM,GAAG,CAAE,KAAK90I,GAAL,GAAW,KAAKC,MAAlB,IAA6B,KAAK/O,IAAL,CAAU++E,UAAvC,GAAoD,KAAKr2E,IAAxE;AAEAkG,cAAI,IAAI+0I,MAAM,GAAG,KAAK3jJ,IAAL,CAAUmnC,OAA3B;AACAx4B,eAAK,GAAGC,IAAI,GAAG+0I,MAAM,GAAG,KAAK3jJ,IAAL,CAAUsc,KAAlC;AACAxN,aAAG,IAAI80I,MAAM,GAAG,KAAK5jJ,IAAL,CAAUqnC,OAA1B;AACAt4B,gBAAM,GAAGD,GAAG,GAAG80I,MAAM,GAAG,KAAK5jJ,IAAL,CAAUqc,MAAlC;AAEA;;AAED,aAAK0uC,gBAAL,CAAsBkG,gBAAtB,CAAwCriD,IAAxC,EAA8CD,KAA9C,EAAqDG,GAArD,EAA0DC,MAA1D,EAAkE,KAAKgiD,IAAvE,EAA6E,KAAKC,GAAlF;AAEA,aAAK/F,uBAAL,CAA6B1L,UAA7B,CAAyC,KAAKwL,gBAA9C;AAEA,OA5F+E;AA8FhFlI,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGumE,QAAQ,CAACluD,SAAT,CAAmB29C,MAAnB,CAA0BxgD,IAA1B,CAAgC,IAAhC,EAAsCof,IAAtC,CAAb;AAEA50B,YAAI,CAAC6P,MAAL,CAAYgM,IAAZ,GAAmB,KAAKA,IAAxB;AACA7b,YAAI,CAAC6P,MAAL,CAAYkS,IAAZ,GAAmB,KAAKA,IAAxB;AACA/hB,YAAI,CAAC6P,MAAL,CAAYiS,KAAZ,GAAoB,KAAKA,KAAzB;AACA9hB,YAAI,CAAC6P,MAAL,CAAYoS,GAAZ,GAAkB,KAAKA,GAAvB;AACAjiB,YAAI,CAAC6P,MAAL,CAAYqS,MAAZ,GAAqB,KAAKA,MAA1B;AACAliB,YAAI,CAAC6P,MAAL,CAAYq0D,IAAZ,GAAmB,KAAKA,IAAxB;AACAlkE,YAAI,CAAC6P,MAAL,CAAYs0D,GAAZ,GAAkB,KAAKA,GAAvB;AAEA,YAAK,KAAKhxD,IAAL,KAAc,IAAnB,EAA0BnT,IAAI,CAAC6P,MAAL,CAAYsD,IAAZ,GAAmBzQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmB,KAAKxxB,IAAxB,CAAnB;AAE1B,eAAOnT,IAAP;AAEA;AA9G+E,KAAlD,CAA/B;;AAkHA,aAASg3J,sBAAT,GAAkC;AAEjCtB,iBAAW,CAAClgJ,IAAZ,CAAkB,IAAlB,EAAwB,IAAIqhJ,kBAAJ,CAAwB,CAAE,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAE,CAArC,EAAwC,GAAxC,EAA6C,GAA7C,CAAxB;AAEA;;AAEDG,0BAAsB,CAAC3+I,SAAvB,GAAmC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe++I,WAAW,CAACr9I,SAA3B,CAAf,EAAuD;AAEzF0M,iBAAW,EAAEiyI,sBAF4E;AAIzFC,8BAAwB,EAAE,IAJ+D;AAMzF9wC,oBAAc,EAAE,wBAAW1F,KAAX,EAAmB;AAElCi1C,mBAAW,CAACr9I,SAAZ,CAAsB8tG,cAAtB,CAAqC3wG,IAArC,CAA2C,IAA3C,EAAiDirG,KAAjD;AAEA;AAVwF,KAAvD,CAAnC;;AAcA,aAASy2C,gBAAT,CAA2BpmI,KAA3B,EAAkCoxF,SAAlC,EAA8C;AAE7CszC,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBsb,KAAlB,EAAyBoxF,SAAzB;AAEA,WAAKr8G,IAAL,GAAY,kBAAZ;AAEA,WAAK8V,QAAL,CAAcU,IAAd,CAAoBkqD,QAAQ,CAACE,SAA7B;AACA,WAAK1Q,YAAL;AAEA,WAAK/qD,MAAL,GAAc,IAAIu7D,QAAJ,EAAd;AAEA,WAAKk9B,MAAL,GAAc,IAAIuzD,sBAAJ,EAAd;AAEA;;AAEDE,oBAAgB,CAAC7+I,SAAjB,GAA6B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAE7E0M,iBAAW,EAAEmyI,gBAFgE;AAI7E30C,wBAAkB,EAAE,IAJyD;AAM7ElmG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAK9yC,MAAL,GAAc8yC,MAAM,CAAC9yC,MAAP,CAAcyQ,KAAd,EAAd;AAEA,aAAKgoF,MAAL,GAAc3lD,MAAM,CAAC2lD,MAAP,CAAchoF,KAAd,EAAd;AAEA,eAAO,IAAP;AAEA;AAhB4E,KAAjD,CAA7B;;AAoBA,aAAS07I,YAAT,CAAuBrmI,KAAvB,EAA8BoxF,SAA9B,EAA0C;AAEzCszC,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBsb,KAAlB,EAAyBoxF,SAAzB;AAEA,WAAKr8G,IAAL,GAAY,cAAZ;AAEA,WAAKshE,UAAL,GAAkB53D,SAAlB;AAEA;;AAED4nJ,gBAAY,CAAC9+I,SAAb,GAAyB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAEzE0M,iBAAW,EAAEoyI,YAF4D;AAIzEh1C,oBAAc,EAAE;AAJyD,KAAjD,CAAzB;;AAQA,aAASi1C,aAAT,CAAwBtmI,KAAxB,EAA+BoxF,SAA/B,EAA0CzyF,KAA1C,EAAiDD,MAAjD,EAA0D;AAEzDgmI,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBsb,KAAlB,EAAyBoxF,SAAzB;AAEA,WAAKr8G,IAAL,GAAY,eAAZ;AAEA,WAAK4pB,KAAL,GAAeA,KAAK,KAAKlgB,SAAZ,GAA0BkgB,KAA1B,GAAkC,EAA/C;AACA,WAAKD,MAAL,GAAgBA,MAAM,KAAKjgB,SAAb,GAA2BigB,MAA3B,GAAoC,EAAlD;AAEA;;AAED4nI,iBAAa,CAAC/+I,SAAd,GAA0B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAE1E0M,iBAAW,EAAEqyI,aAF6D;AAI1Et0C,qBAAe,EAAE,IAJyD;AAM1EzmG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAKruB,KAAL,GAAaquB,MAAM,CAACruB,KAApB;AACA,aAAKD,MAAL,GAAcsuB,MAAM,CAACtuB,MAArB;AAEA,eAAO,IAAP;AAEA,OAfyE;AAiB1EwmC,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGw1J,KAAK,CAACn9I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,EAAmCof,IAAnC,CAAb;AAEA50B,YAAI,CAAC6P,MAAL,CAAY4f,KAAZ,GAAoB,KAAKA,KAAzB;AACAzvB,YAAI,CAAC6P,MAAL,CAAY2f,MAAZ,GAAqB,KAAKA,MAA1B;AAEA,eAAOxvB,IAAP;AAEA;AA1ByE,KAAjD,CAA1B;AA8BA;;;;;;;AAQA;;AAEA,aAASq3J,mBAAT,GAA+B;AAE9B,WAAK/0C,YAAL,GAAoB,EAApB;;AAEA,WAAM,IAAInhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,aAAKmhH,YAAL,CAAkBzgH,IAAlB,CAAwB,IAAIo7D,OAAJ,EAAxB;AAEA;AAED;;AAEDv6D,UAAM,CAACiiC,MAAP,CAAe0yH,mBAAmB,CAACh/I,SAAnC,EAA8C;AAE7Ci/I,2BAAqB,EAAE,IAFsB;AAI7C94I,SAAG,EAAE,aAAW8jG,YAAX,EAA0B;AAE9B,aAAM,IAAInhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBkb,IAAvB,CAA6BimG,YAAY,CAAEnhH,KAAF,CAAzC;AAEA;;AAED,eAAO,IAAP;AAEA,OAd4C;AAgB7C26B,UAAI,EAAE,gBAAY;AAEjB,aAAM,IAAI36B,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBqd,GAAvB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC;AAEA;;AAED,eAAO,IAAP;AAEA,OA1B4C;AA4B7C;AACA;AACA+4I,WAAK,EAAE,eAAWr4F,MAAX,EAAmBl0D,MAAnB,EAA4B;AAElC;AAEA,YAAMc,CAAC,GAAGozD,MAAM,CAACpzD,CAAjB;AAAA,YAAoB+W,CAAC,GAAGq8C,MAAM,CAACr8C,CAA/B;AAAA,YAAkCuL,CAAC,GAAG8wC,MAAM,CAAC9wC,CAA7C;AAEA,YAAMopI,KAAK,GAAG,KAAKl1C,YAAnB,CANkC,CAQlC;;AACAt3G,cAAM,CAACqR,IAAP,CAAam7I,KAAK,CAAE,CAAF,CAAlB,EAA0Bj5I,cAA1B,CAA0C,QAA1C,EATkC,CAWlC;;AACAvT,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAW30I,CAA/C;AACA7X,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAWppI,CAA/C;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAW1rJ,CAA/C,EAdkC,CAgBlC;;AACAd,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa1rJ,CAAC,GAAG+W,CAAjB,CAApC;AACA7X,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa30I,CAAC,GAAGuL,CAAjB,CAApC;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa,MAAMppI,CAAN,GAAUA,CAAV,GAAc,GAA3B,CAApC;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa1rJ,CAAC,GAAGsiB,CAAjB,CAApC;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa1rJ,CAAC,GAAGA,CAAJ,GAAQ+W,CAAC,GAAGA,CAAzB,CAApC;AAEA,eAAO7X,MAAP;AAEA,OAvD4C;AAyD7C;AACA;AACA;AACAysJ,qBAAe,EAAE,yBAAWv4F,MAAX,EAAmBl0D,MAAnB,EAA4B;AAE5C;AAEA,YAAMc,CAAC,GAAGozD,MAAM,CAACpzD,CAAjB;AAAA,YAAoB+W,CAAC,GAAGq8C,MAAM,CAACr8C,CAA/B;AAAA,YAAkCuL,CAAC,GAAG8wC,MAAM,CAAC9wC,CAA7C;AAEA,YAAMopI,KAAK,GAAG,KAAKl1C,YAAnB,CAN4C,CAQ5C;;AACAt3G,cAAM,CAACqR,IAAP,CAAam7I,KAAK,CAAE,CAAF,CAAlB,EAA0Bj5I,cAA1B,CAA0C,QAA1C,EAT4C,CASU;AAEtD;;AACAvT,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB30I,CAArD,EAZ4C,CAYc;;AAC1D7X,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiBppI,CAArD;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB1rJ,CAArD,EAd4C,CAgB5C;;AACAd,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB1rJ,CAAjB,GAAqB+W,CAAzD,EAjB4C,CAiBkB;;AAC9D7X,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB30I,CAAjB,GAAqBuL,CAAzD;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAWppI,CAAX,GAAeA,CAAf,GAAmB,QAAvD,EAnB4C,CAmBuB;;AACnEpjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB1rJ,CAAjB,GAAqBsiB,CAAzD;AACApjB,cAAM,CAACkT,eAAP,CAAwBs5I,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa1rJ,CAAC,GAAGA,CAAJ,GAAQ+W,CAAC,GAAGA,CAAzB,CAApC,EArB4C,CAqBwB;;AAEpE,eAAO7X,MAAP;AAEA,OArF4C;AAuF7CoT,SAAG,EAAE,aAAWikG,EAAX,EAAgB;AAEpB,aAAM,IAAIlhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBid,GAAvB,CAA4BikG,EAAE,CAACC,YAAH,CAAiBnhH,KAAjB,CAA5B;AAEA;;AAED,eAAO,IAAP;AAEA,OAjG4C;AAmG7Cu2J,iBAAW,EAAE,qBAAWr1C,EAAX,EAAe5wF,CAAf,EAAmB;AAE/B,aAAM,IAAItwB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuB+c,eAAvB,CAAwCmkG,EAAE,CAACC,YAAH,CAAiBnhH,KAAjB,CAAxC,EAA8DswB,CAA9D;AAEA;;AAED,eAAO,IAAP;AAEA,OA7G4C;AA+G7CxT,WAAK,EAAE,eAAWwT,CAAX,EAAe;AAErB,aAAM,IAAItwB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBod,cAAvB,CAAuCkT,CAAvC;AAEA;;AAED,eAAO,IAAP;AAEA,OAzH4C;AA2H7C65B,UAAI,EAAE,cAAW+2D,EAAX,EAAelzD,KAAf,EAAuB;AAE5B,aAAM,IAAIhuD,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,eAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBmqD,IAAvB,CAA6B+2D,EAAE,CAACC,YAAH,CAAiBnhH,KAAjB,CAA7B,EAAmDguD,KAAnD;AAEA;;AAED,eAAO,IAAP;AAEA,OArI4C;AAuI7CI,YAAM,EAAE,gBAAW8yD,EAAX,EAAgB;AAEvB,aAAM,IAAIlhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,cAAK,CAAE,KAAKmhH,YAAL,CAAmBnhH,KAAnB,EAAuBouD,MAAvB,CAA+B8yD,EAAE,CAACC,YAAH,CAAiBnhH,KAAjB,CAA/B,CAAP,EAA+D;AAE9D,mBAAO,KAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA,OArJ4C;AAuJ7Ckb,UAAI,EAAE,cAAWgmG,EAAX,EAAgB;AAErB,eAAO,KAAK7jG,GAAL,CAAU6jG,EAAE,CAACC,YAAb,CAAP;AAEA,OA3J4C;AA6J7C7mG,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAjK4C;AAmK7CmzC,eAAS,EAAE,mBAAWzxB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAErC,YAAKA,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,YAAMylG,YAAY,GAAG,KAAKA,YAA1B;;AAEA,aAAM,IAAInhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BmhH,sBAAY,CAAEnhH,KAAF,CAAZ,CAAkBquD,SAAlB,CAA6BzxB,KAA7B,EAAoClhB,MAAM,GAAK1b,KAAC,GAAG,CAAnD;AAEA;;AAED,eAAO,IAAP;AAEA,OAjL4C;AAmL7CsuD,aAAO,EAAE,iBAAW1xB,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEnC,YAAKkhB,KAAK,KAAKxuB,SAAf,EAA2BwuB,KAAK,GAAG,EAAR;AAC3B,YAAKlhB,MAAM,KAAKtN,SAAhB,EAA4BsN,MAAM,GAAG,CAAT;AAE5B,YAAMylG,YAAY,GAAG,KAAKA,YAA1B;;AAEA,aAAM,IAAInhH,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9BmhH,sBAAY,CAAEnhH,KAAF,CAAZ,CAAkBsuD,OAAlB,CAA2B1xB,KAA3B,EAAkClhB,MAAM,GAAK1b,KAAC,GAAG,CAAjD;AAEA;;AAED,eAAO48B,KAAP;AAEA;AAlM4C,KAA9C;AAsMAr7B,UAAM,CAACiiC,MAAP,CAAe0yH,mBAAf,EAAoC;AAEnC;AACA;AACAM,gBAAU,EAAE,oBAAWz4F,MAAX,EAAmB04F,OAAnB,EAA6B;AAExC;AAEA,YAAM9rJ,CAAC,GAAGozD,MAAM,CAACpzD,CAAjB;AAAA,YAAoB+W,CAAC,GAAGq8C,MAAM,CAACr8C,CAA/B;AAAA,YAAkCuL,CAAC,GAAG8wC,MAAM,CAAC9wC,CAA7C,CAJwC,CAMxC;;AACAwpI,eAAO,CAAE,CAAF,CAAP,GAAe,QAAf,CAPwC,CASxC;;AACAA,eAAO,CAAE,CAAF,CAAP,GAAe,WAAW/0I,CAA1B;AACA+0I,eAAO,CAAE,CAAF,CAAP,GAAe,WAAWxpI,CAA1B;AACAwpI,eAAO,CAAE,CAAF,CAAP,GAAe,WAAW9rJ,CAA1B,CAZwC,CAcxC;;AACA8rJ,eAAO,CAAE,CAAF,CAAP,GAAe,WAAW9rJ,CAAX,GAAe+W,CAA9B;AACA+0I,eAAO,CAAE,CAAF,CAAP,GAAe,WAAW/0I,CAAX,GAAeuL,CAA9B;AACAwpI,eAAO,CAAE,CAAF,CAAP,GAAe,YAAa,IAAIxpI,CAAJ,GAAQA,CAAR,GAAY,CAAzB,CAAf;AACAwpI,eAAO,CAAE,CAAF,CAAP,GAAe,WAAW9rJ,CAAX,GAAesiB,CAA9B;AACAwpI,eAAO,CAAE,CAAF,CAAP,GAAe,YAAa9rJ,CAAC,GAAGA,CAAJ,GAAQ+W,CAAC,GAAGA,CAAzB,CAAf;AAEA;AAzBkC,KAApC;;AA6BA,aAASg1I,UAAT,CAAqBx1C,EAArB,EAAyBH,SAAzB,EAAqC;AAEpCszC,WAAK,CAAChgJ,IAAN,CAAY,IAAZ,EAAkBjG,SAAlB,EAA6B2yG,SAA7B;AAEA,WAAKr8G,IAAL,GAAY,YAAZ;AAEA,WAAKw8G,EAAL,GAAYA,EAAE,KAAK9yG,SAAT,GAAuB8yG,EAAvB,GAA4B,IAAIg1C,mBAAJ,EAAtC;AAEA;;AAEDQ,cAAU,CAACx/I,SAAX,GAAuB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6+I,KAAK,CAACn9I,SAArB,CAAf,EAAiD;AAEvE0M,iBAAW,EAAE8yI,UAF0D;AAIvEz1C,kBAAY,EAAE,IAJyD;AAMvE/lG,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB03G,aAAK,CAACn9I,SAAN,CAAgBgE,IAAhB,CAAqB7G,IAArB,CAA2B,IAA3B,EAAiCsoC,MAAjC;AAEA,aAAKukE,EAAL,CAAQhmG,IAAR,CAAcyhC,MAAM,CAACukE,EAArB;AAEA,eAAO,IAAP;AAEA,OAdsE;AAgBvEutC,cAAQ,EAAE,kBAAWnK,IAAX,EAAkB;AAE3B,aAAKvjC,SAAL,GAAiBujC,IAAI,CAACvjC,SAAtB,CAF2B,CAEM;;AACjC,aAAKG,EAAL,CAAQ7yD,SAAR,CAAmBi2F,IAAI,CAACpjC,EAAxB;AAEA,eAAO,IAAP;AAEA,OAvBsE;AAyBvErsD,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAGw1J,KAAK,CAACn9I,SAAN,CAAgB29C,MAAhB,CAAuBxgD,IAAvB,CAA6B,IAA7B,EAAmCof,IAAnC,CAAb;AAEA50B,YAAI,CAAC6P,MAAL,CAAYwyG,EAAZ,GAAiB,KAAKA,EAAL,CAAQ5yD,OAAR,EAAjB;AAEA,eAAOzvD,IAAP;AAEA;AAjCsE,KAAjD,CAAvB;;AAqCA,aAAS83J,cAAT,CAAyB7M,OAAzB,EAAmC;AAElCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA,WAAK/0F,QAAL,GAAgB,EAAhB;AAEA;;AAED4hG,kBAAc,CAACz/I,SAAf,GAA2B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE5E0M,iBAAW,EAAE+yI,cAF+D;AAI5E/9H,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMwuI,MAAM,GAAG,IAAIc,UAAJ,CAAgBtvI,KAAK,CAAC6uI,OAAtB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgBlvI,KAAK,CAAC5X,IAAtB;AACAomJ,cAAM,CAACY,gBAAP,CAAyBpvI,KAAK,CAACgvI,aAA/B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW7e,IAAX,EAAkB;AAEnC,cAAI;AAEHo8I,kBAAM,CAAExtI,KAAK,CAACuK,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYnZ,IAAZ,CAAb,CAAF,CAAN;AAEA,WAJD,CAIE,OAAQ/O,CAAR,EAAY;AAEb,gBAAKqrJ,OAAL,EAAe;AAEdA,qBAAO,CAAErrJ,CAAF,CAAP;AAEA,aAJD,MAIO;AAEN6D,qBAAO,CAACD,KAAR,CAAe5D,CAAf;AAEA;;AAED2d,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AAEA;AAED,SAtBD,EAsBGw9H,UAtBH,EAsBeC,OAtBf;AAwBA,OAnC2E;AAqC5EnjI,WAAK,EAAE,eAAW8+H,IAAX,EAAkB;AAExB,YAAMvvF,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,iBAAS6hG,UAAT,CAAqB73J,IAArB,EAA4B;AAE3B,cAAKg2D,QAAQ,CAAEh2D,IAAF,CAAR,KAAqBqP,SAA1B,EAAsC;AAErCjN,mBAAO,CAAC2W,IAAR,CAAc,yCAAd,EAAyD/Y,IAAzD;AAEA;;AAED,iBAAOg2D,QAAQ,CAAEh2D,IAAF,CAAf;AAEA;;AAED,YAAMywB,QAAQ,GAAG,IAAIuuH,SAAS,CAAEuG,IAAI,CAAC5/I,IAAP,CAAb,EAAjB;AAEA,YAAK4/I,IAAI,CAAC36F,IAAL,KAAcv7C,SAAnB,EAA+BohB,QAAQ,CAACm6B,IAAT,GAAgB26F,IAAI,CAAC36F,IAArB;AAC/B,YAAK26F,IAAI,CAACvlJ,IAAL,KAAcqP,SAAnB,EAA+BohB,QAAQ,CAACzwB,IAAT,GAAgBulJ,IAAI,CAACvlJ,IAArB;AAC/B,YAAKulJ,IAAI,CAAC30H,KAAL,KAAevhB,SAApB,EAAgCohB,QAAQ,CAACG,KAAT,CAAesmD,MAAf,CAAuBquE,IAAI,CAAC30H,KAA5B;AAChC,YAAK20H,IAAI,CAACrpE,SAAL,KAAmB7sE,SAAxB,EAAoCohB,QAAQ,CAACyrD,SAAT,GAAqBqpE,IAAI,CAACrpE,SAA1B;AACpC,YAAKqpE,IAAI,CAACppE,SAAL,KAAmB9sE,SAAxB,EAAoCohB,QAAQ,CAAC0rD,SAAT,GAAqBopE,IAAI,CAACppE,SAA1B;AACpC,YAAKopE,IAAI,CAACnpE,KAAL,KAAe/sE,SAApB,EAAgCohB,QAAQ,CAAC2rD,KAAT,GAAiB,IAAIxF,KAAJ,GAAYM,MAAZ,CAAoBquE,IAAI,CAACnpE,KAAzB,CAAjB;AAChC,YAAKmpE,IAAI,CAAClpE,QAAL,KAAkBhtE,SAAvB,EAAmCohB,QAAQ,CAAC4rD,QAAT,CAAkBnF,MAAlB,CAA0BquE,IAAI,CAAClpE,QAA/B;AACnC,YAAKkpE,IAAI,CAAChpE,QAAL,KAAkBltE,SAAvB,EAAmCohB,QAAQ,CAAC8rD,QAAT,CAAkBrF,MAAlB,CAA0BquE,IAAI,CAAChpE,QAA/B;AACnC,YAAKgpE,IAAI,CAAC/oE,SAAL,KAAmBntE,SAAxB,EAAoCohB,QAAQ,CAAC+rD,SAAT,GAAqB+oE,IAAI,CAAC/oE,SAA1B;AACpC,YAAK+oE,IAAI,CAAC9oE,SAAL,KAAmBptE,SAAxB,EAAoCohB,QAAQ,CAACgsD,SAAT,GAAqB8oE,IAAI,CAAC9oE,SAA1B;AACpC,YAAK8oE,IAAI,CAAC7oE,kBAAL,KAA4BrtE,SAAjC,EAA6CohB,QAAQ,CAACisD,kBAAT,GAA8B6oE,IAAI,CAAC7oE,kBAAnC;AAC7C,YAAK6oE,IAAI,CAACt6E,GAAL,KAAa57D,SAAlB,EAA8BohB,QAAQ,CAACw6C,GAAT,GAAes6E,IAAI,CAACt6E,GAApB;AAC9B,YAAKs6E,IAAI,CAAC7rE,WAAL,KAAqBrqE,SAA1B,EAAsCohB,QAAQ,CAACipD,WAAT,GAAuB6rE,IAAI,CAAC7rE,WAA5B;AACtC,YAAK6rE,IAAI,CAAC/rE,QAAL,KAAkBnqE,SAAvB,EAAmCohB,QAAQ,CAAC+oD,QAAT,GAAoB+rE,IAAI,CAAC/rE,QAAzB;AACnC,YAAK+rE,IAAI,CAACpnE,OAAL,KAAiB9uE,SAAtB,EAAkCohB,QAAQ,CAAC0tD,OAAT,GAAmBonE,IAAI,CAACpnE,OAAxB;AAClC,YAAKonE,IAAI,CAAC9rE,IAAL,KAAcpqE,SAAnB,EAA+BohB,QAAQ,CAACgpD,IAAT,GAAgB8rE,IAAI,CAAC9rE,IAArB;AAC/B,YAAK8rE,IAAI,CAAC5rE,OAAL,KAAiBtqE,SAAtB,EAAkCohB,QAAQ,CAACkpD,OAAT,GAAmB4rE,IAAI,CAAC5rE,OAAxB;AAClC,YAAK4rE,IAAI,CAAC3rE,WAAL,KAAqBvqE,SAA1B,EAAsCohB,QAAQ,CAACmpD,WAAT,GAAuB2rE,IAAI,CAAC3rE,WAA5B;AACtC,YAAK2rE,IAAI,CAAC/pE,SAAL,KAAmBnsE,SAAxB,EAAoCohB,QAAQ,CAAC+qD,SAAT,GAAqB+pE,IAAI,CAAC/pE,SAA1B;AACpC,YAAK+pE,IAAI,CAACnrE,SAAL,KAAmB/qE,SAAxB,EAAoCohB,QAAQ,CAAC2pD,SAAT,GAAqBmrE,IAAI,CAACnrE,SAA1B;AACpC,YAAKmrE,IAAI,CAAClrE,UAAL,KAAoBhrE,SAAzB,EAAqCohB,QAAQ,CAAC4pD,UAAT,GAAsBkrE,IAAI,CAAClrE,UAA3B;AACrC,YAAKkrE,IAAI,CAACrqE,UAAL,KAAoB7rE,SAAzB,EAAqCohB,QAAQ,CAACyqD,UAAT,GAAsBqqE,IAAI,CAACrqE,UAA3B;AAErC,YAAKqqE,IAAI,CAAC1qE,YAAL,KAAsBxrE,SAA3B,EAAuCohB,QAAQ,CAACoqD,YAAT,GAAwB0qE,IAAI,CAAC1qE,YAA7B;AACvC,YAAK0qE,IAAI,CAACjrE,gBAAL,KAA0BjrE,SAA/B,EAA2CohB,QAAQ,CAAC6pD,gBAAT,GAA4BirE,IAAI,CAACjrE,gBAAjC;AAC3C,YAAKirE,IAAI,CAAChrE,WAAL,KAAqBlrE,SAA1B,EAAsCohB,QAAQ,CAAC8pD,WAAT,GAAuBgrE,IAAI,CAAChrE,WAA5B;AACtC,YAAKgrE,IAAI,CAAC/qE,UAAL,KAAoBnrE,SAAzB,EAAqCohB,QAAQ,CAAC+pD,UAAT,GAAsB+qE,IAAI,CAAC/qE,UAA3B;AACrC,YAAK+qE,IAAI,CAAC9qE,eAAL,KAAyBprE,SAA9B,EAA0CohB,QAAQ,CAACgqD,eAAT,GAA2B8qE,IAAI,CAAC9qE,eAAhC;AAC1C,YAAK8qE,IAAI,CAAC7qE,WAAL,KAAqBrrE,SAA1B,EAAsCohB,QAAQ,CAACiqD,WAAT,GAAuB6qE,IAAI,CAAC7qE,WAA5B;AACtC,YAAK6qE,IAAI,CAAC5qE,YAAL,KAAsBtrE,SAA3B,EAAuCohB,QAAQ,CAACkqD,YAAT,GAAwB4qE,IAAI,CAAC5qE,YAA7B;AACvC,YAAK4qE,IAAI,CAAC3qE,YAAL,KAAsBvrE,SAA3B,EAAuCohB,QAAQ,CAACmqD,YAAT,GAAwB2qE,IAAI,CAAC3qE,YAA7B;AAEvC,YAAK2qE,IAAI,CAAC7mE,SAAL,KAAmBrvE,SAAxB,EAAoCohB,QAAQ,CAACiuD,SAAT,GAAqB6mE,IAAI,CAAC7mE,SAA1B;AACpC,YAAK6mE,IAAI,CAAC5mE,kBAAL,KAA4BtvE,SAAjC,EAA6CohB,QAAQ,CAACkuD,kBAAT,GAA8B4mE,IAAI,CAAC5mE,kBAAnC;AAC7C,YAAK4mE,IAAI,CAAC3mE,gBAAL,KAA0BvvE,SAA/B,EAA2CohB,QAAQ,CAACmuD,gBAAT,GAA4B2mE,IAAI,CAAC3mE,gBAAjC;AAC3C,YAAK2mE,IAAI,CAAC1mE,iBAAL,KAA2BxvE,SAAhC,EAA4CohB,QAAQ,CAACouD,iBAAT,GAA6B0mE,IAAI,CAAC1mE,iBAAlC;AAE5C,YAAK0mE,IAAI,CAACpqG,QAAL,KAAkB9rC,SAAvB,EAAmCohB,QAAQ,CAAC0qB,QAAT,GAAoBoqG,IAAI,CAACpqG,QAAzB;AAEnC,YAAKoqG,IAAI,CAAChnE,SAAL,KAAmB,CAAxB,EAA4B9tD,QAAQ,CAAC8tD,SAAT,GAAqBgnE,IAAI,CAAChnE,SAA1B;AAC5B,YAAKgnE,IAAI,CAAC/mE,QAAL,KAAkBnvE,SAAvB,EAAmCohB,QAAQ,CAAC+tD,QAAT,GAAoB+mE,IAAI,CAAC/mE,QAAzB;AACnC,YAAK+mE,IAAI,CAAC9mE,OAAL,KAAiBpvE,SAAtB,EAAkCohB,QAAQ,CAACguD,OAAT,GAAmB8mE,IAAI,CAAC9mE,OAAxB;AAClC,YAAK8mE,IAAI,CAACxnI,KAAL,KAAe1O,SAApB,EAAgCohB,QAAQ,CAAC1S,KAAT,GAAiBwnI,IAAI,CAACxnI,KAAtB;AAEhC,YAAKwnI,IAAI,CAACnqE,aAAL,KAAuB/rE,SAA5B,EAAwCohB,QAAQ,CAAC2qD,aAAT,GAAyBmqE,IAAI,CAACnqE,aAA9B;AACxC,YAAKmqE,IAAI,CAAClqE,mBAAL,KAA6BhsE,SAAlC,EAA8CohB,QAAQ,CAAC4qD,mBAAT,GAA+BkqE,IAAI,CAAClqE,mBAApC;AAC9C,YAAKkqE,IAAI,CAACjqE,kBAAL,KAA4BjsE,SAAjC,EAA6CohB,QAAQ,CAAC6qD,kBAAT,GAA8BiqE,IAAI,CAACjqE,kBAAnC;AAE7C,YAAKiqE,IAAI,CAACvmE,QAAL,KAAkB3vE,SAAvB,EAAmCohB,QAAQ,CAACuuD,QAAT,GAAoBumE,IAAI,CAACvmE,QAAzB;AACnC,YAAKumE,IAAI,CAACzmE,YAAL,KAAsBzvE,SAA3B,EAAuCohB,QAAQ,CAACquD,YAAT,GAAwBymE,IAAI,CAACzmE,YAA7B;AACvC,YAAKymE,IAAI,CAACxmE,YAAL,KAAsB1vE,SAA3B,EAAuCohB,QAAQ,CAACsuD,YAAT,GAAwBwmE,IAAI,CAACxmE,YAA7B;AACvC,YAAKwmE,IAAI,CAAChqE,SAAL,KAAmBlsE,SAAxB,EAAoCohB,QAAQ,CAAC8qD,SAAT,GAAqBgqE,IAAI,CAAChqE,SAA1B;AAEpC,YAAKgqE,IAAI,CAACrrC,cAAL,KAAwB7qG,SAA7B,EAAyCohB,QAAQ,CAACypF,cAAT,GAA0BqrC,IAAI,CAACrrC,cAA/B;AAEzC,YAAKqrC,IAAI,CAACv+E,OAAL,KAAiB33D,SAAtB,EAAkCohB,QAAQ,CAACu2C,OAAT,GAAmBu+E,IAAI,CAACv+E,OAAxB;AAElC,YAAKu+E,IAAI,CAAC7pE,UAAL,KAAoBrsE,SAAzB,EAAqCohB,QAAQ,CAACirD,UAAT,GAAsB6pE,IAAI,CAAC7pE,UAA3B;AAErC,YAAK6pE,IAAI,CAACn+E,QAAL,KAAkB/3D,SAAvB,EAAmCohB,QAAQ,CAAC22C,QAAT,GAAoBm+E,IAAI,CAACn+E,QAAzB;;AAEnC,YAAKm+E,IAAI,CAAClsE,YAAL,KAAsBhqE,SAA3B,EAAuC;AAEtC,cAAK,OAAOk2I,IAAI,CAAClsE,YAAZ,KAA6B,QAAlC,EAA6C;AAE5C5oD,oBAAQ,CAAC4oD,YAAT,GAA0BksE,IAAI,CAAClsE,YAAL,GAAoB,CAAtB,GAA4B,IAA5B,GAAmC,KAA3D;AAEA,WAJD,MAIO;AAEN5oD,oBAAQ,CAAC4oD,YAAT,GAAwBksE,IAAI,CAAClsE,YAA7B;AAEA;AAED,SA3FuB,CA6FxB;;;AAEA,YAAKksE,IAAI,CAAC31D,QAAL,KAAkBvgF,SAAvB,EAAmC;AAElC,eAAM,IAAMrP,IAAZ,IAAoBulJ,IAAI,CAAC31D,QAAzB,EAAoC;AAEnC,gBAAMoB,OAAO,GAAGu0D,IAAI,CAAC31D,QAAL,CAAe5vF,IAAf,CAAhB;AAEAywB,oBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,IAA4B,EAA5B;;AAEA,oBAASgxF,OAAO,CAACrrF,IAAjB;AAEC,mBAAK,GAAL;AACC8qB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC8sJ,UAAU,CAAE7mE,OAAO,CAACjmF,KAAV,CAA5C;AACA;;AAED,mBAAK,GAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAI6rE,KAAJ,GAAYM,MAAZ,CAAoB8Z,OAAO,CAACjmF,KAA5B,CAAlC;AACA;;AAED,mBAAK,IAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAIkiD,OAAJ,GAAcqC,SAAd,CAAyB0hC,OAAO,CAACjmF,KAAjC,CAAlC;AACA;;AAED,mBAAK,IAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAIgyD,OAAJ,GAAczN,SAAd,CAAyB0hC,OAAO,CAACjmF,KAAjC,CAAlC;AACA;;AAED,mBAAK,IAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAIwrD,OAAJ,GAAcjH,SAAd,CAAyB0hC,OAAO,CAACjmF,KAAjC,CAAlC;AACA;;AAED,mBAAK,IAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAI8kD,OAAJ,GAAcP,SAAd,CAAyB0hC,OAAO,CAACjmF,KAAjC,CAAlC;;AAED,mBAAK,IAAL;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkC,IAAI40D,OAAJ,GAAcrQ,SAAd,CAAyB0hC,OAAO,CAACjmF,KAAjC,CAAlC;AACA;;AAED;AACC0lB,wBAAQ,CAACm/D,QAAT,CAAmB5vF,IAAnB,EAA0B+K,KAA1B,GAAkCimF,OAAO,CAACjmF,KAA1C;AA9BF;AAkCA;AAED;;AAED,YAAKw6I,IAAI,CAACr1D,OAAL,KAAiB7gF,SAAtB,EAAkCohB,QAAQ,CAACy/D,OAAT,GAAmBq1D,IAAI,CAACr1D,OAAxB;AAClC,YAAKq1D,IAAI,CAACp1D,YAAL,KAAsB9gF,SAA3B,EAAuCohB,QAAQ,CAAC0/D,YAAT,GAAwBo1D,IAAI,CAACp1D,YAA7B;AACvC,YAAKo1D,IAAI,CAACn1D,cAAL,KAAwB/gF,SAA7B,EAAyCohB,QAAQ,CAAC2/D,cAAT,GAA0Bm1D,IAAI,CAACn1D,cAA/B;;AAEzC,YAAKm1D,IAAI,CAACh1D,UAAL,KAAoBlhF,SAAzB,EAAqC;AAEpC,eAAM,IAAMw7D,GAAZ,IAAmB06E,IAAI,CAACh1D,UAAxB,EAAqC;AAEpC9/D,oBAAQ,CAAC8/D,UAAT,CAAqB1lB,GAArB,IAA6B06E,IAAI,CAACh1D,UAAL,CAAiB1lB,GAAjB,CAA7B;AAEA;AAED,SAzJuB,CA2JxB;;;AAEA,YAAK06E,IAAI,CAACuS,OAAL,KAAiBzoJ,SAAtB,EAAkCohB,QAAQ,CAACipD,WAAT,GAAuB6rE,IAAI,CAACuS,OAAL,KAAiB,CAAxC,CA7JV,CA6JqD;AAE7E;;AAEA,YAAKvS,IAAI,CAACxuI,IAAL,KAAc1H,SAAnB,EAA+BohB,QAAQ,CAAC1Z,IAAT,GAAgBwuI,IAAI,CAACxuI,IAArB;AAC/B,YAAKwuI,IAAI,CAACjnE,eAAL,KAAyBjvE,SAA9B,EAA0CohB,QAAQ,CAAC6tD,eAAT,GAA2BinE,IAAI,CAACjnE,eAAhC,CAlKlB,CAoKxB;;AAEA,YAAKinE,IAAI,CAACt3I,GAAL,KAAaoB,SAAlB,EAA8BohB,QAAQ,CAACxiB,GAAT,GAAe4pJ,UAAU,CAAEtS,IAAI,CAACt3I,GAAP,CAAzB;AAC9B,YAAKs3I,IAAI,CAACxoE,MAAL,KAAgB1tE,SAArB,EAAiCohB,QAAQ,CAACssD,MAAT,GAAkB86E,UAAU,CAAEtS,IAAI,CAACxoE,MAAP,CAA5B;AAEjC,YAAKwoE,IAAI,CAACvoE,QAAL,KAAkB3tE,SAAvB,EAAmCohB,QAAQ,CAACusD,QAAT,GAAoB66E,UAAU,CAAEtS,IAAI,CAACvoE,QAAP,CAA9B;AAEnC,YAAKuoE,IAAI,CAACnoE,OAAL,KAAiB/tE,SAAtB,EAAkCohB,QAAQ,CAAC2sD,OAAT,GAAmBy6E,UAAU,CAAEtS,IAAI,CAACnoE,OAAP,CAA7B;AAClC,YAAKmoE,IAAI,CAACloE,SAAL,KAAmBhuE,SAAxB,EAAoCohB,QAAQ,CAAC4sD,SAAT,GAAqBkoE,IAAI,CAACloE,SAA1B;AAEpC,YAAKkoE,IAAI,CAACjoE,SAAL,KAAmBjuE,SAAxB,EAAoCohB,QAAQ,CAAC6sD,SAAT,GAAqBu6E,UAAU,CAAEtS,IAAI,CAACjoE,SAAP,CAA/B;AACpC,YAAKioE,IAAI,CAAChoE,aAAL,KAAuBluE,SAA5B,EAAwCohB,QAAQ,CAAC8sD,aAAT,GAAyBgoE,IAAI,CAAChoE,aAA9B;;AACxC,YAAKgoE,IAAI,CAAC/nE,WAAL,KAAqBnuE,SAA1B,EAAsC;AAErC,cAAImuE,WAAW,GAAG+nE,IAAI,CAAC/nE,WAAvB;;AAEA,cAAK9qD,KAAK,CAAC0jC,OAAN,CAAeonB,WAAf,MAAiC,KAAtC,EAA8C;AAE7C;AAEAA,uBAAW,GAAG,CAAEA,WAAF,EAAeA,WAAf,CAAd;AAEA;;AAED/sD,kBAAQ,CAAC+sD,WAAT,GAAuB,IAAIvwB,OAAJ,GAAcqC,SAAd,CAAyBkuB,WAAzB,CAAvB;AAEA;;AAED,YAAK+nE,IAAI,CAAC9nE,eAAL,KAAyBpuE,SAA9B,EAA0CohB,QAAQ,CAACgtD,eAAT,GAA2Bo6E,UAAU,CAAEtS,IAAI,CAAC9nE,eAAP,CAArC;AAC1C,YAAK8nE,IAAI,CAAC7nE,iBAAL,KAA2BruE,SAAhC,EAA4CohB,QAAQ,CAACitD,iBAAT,GAA6B6nE,IAAI,CAAC7nE,iBAAlC;AAC5C,YAAK6nE,IAAI,CAAC5nE,gBAAL,KAA0BtuE,SAA/B,EAA2CohB,QAAQ,CAACktD,gBAAT,GAA4B4nE,IAAI,CAAC5nE,gBAAjC;AAE3C,YAAK4nE,IAAI,CAAC3nE,YAAL,KAAsBvuE,SAA3B,EAAuCohB,QAAQ,CAACmtD,YAAT,GAAwBi6E,UAAU,CAAEtS,IAAI,CAAC3nE,YAAP,CAAlC;AACvC,YAAK2nE,IAAI,CAAC1nE,YAAL,KAAsBxuE,SAA3B,EAAuCohB,QAAQ,CAACotD,YAAT,GAAwBg6E,UAAU,CAAEtS,IAAI,CAAC1nE,YAAP,CAAlC;AAEvC,YAAK0nE,IAAI,CAACznE,WAAL,KAAqBzuE,SAA1B,EAAsCohB,QAAQ,CAACqtD,WAAT,GAAuB+5E,UAAU,CAAEtS,IAAI,CAACznE,WAAP,CAAjC;AACtC,YAAKynE,IAAI,CAACjpE,iBAAL,KAA2BjtE,SAAhC,EAA4CohB,QAAQ,CAAC6rD,iBAAT,GAA6BipE,IAAI,CAACjpE,iBAAlC;AAE5C,YAAKipE,IAAI,CAACxnE,WAAL,KAAqB1uE,SAA1B,EAAsCohB,QAAQ,CAACstD,WAAT,GAAuB85E,UAAU,CAAEtS,IAAI,CAACxnE,WAAP,CAAjC;AAEtC,YAAKwnE,IAAI,CAACvnE,MAAL,KAAgB3uE,SAArB,EAAiCohB,QAAQ,CAACutD,MAAT,GAAkB65E,UAAU,CAAEtS,IAAI,CAACvnE,MAAP,CAA5B;AACjC,YAAKunE,IAAI,CAACnnE,eAAL,KAAyB/uE,SAA9B,EAA0CohB,QAAQ,CAAC2tD,eAAT,GAA2BmnE,IAAI,CAACnnE,eAAhC;AAE1C,YAAKmnE,IAAI,CAACtnE,YAAL,KAAsB5uE,SAA3B,EAAuCohB,QAAQ,CAACwtD,YAAT,GAAwBsnE,IAAI,CAACtnE,YAA7B;AACvC,YAAKsnE,IAAI,CAACrnE,eAAL,KAAyB7uE,SAA9B,EAA0CohB,QAAQ,CAACytD,eAAT,GAA2BqnE,IAAI,CAACrnE,eAAhC;AAE1C,YAAKqnE,IAAI,CAACtoE,QAAL,KAAkB5tE,SAAvB,EAAmCohB,QAAQ,CAACwsD,QAAT,GAAoB46E,UAAU,CAAEtS,IAAI,CAACtoE,QAAP,CAA9B;AACnC,YAAKsoE,IAAI,CAACnmE,iBAAL,KAA2B/vE,SAAhC,EAA4CohB,QAAQ,CAAC2uD,iBAAT,GAA6BmmE,IAAI,CAACnmE,iBAAlC;AAE5C,YAAKmmE,IAAI,CAACroE,KAAL,KAAe7tE,SAApB,EAAgCohB,QAAQ,CAACysD,KAAT,GAAiB26E,UAAU,CAAEtS,IAAI,CAACroE,KAAP,CAA3B;AAChC,YAAKqoE,IAAI,CAACpoE,cAAL,KAAwB9tE,SAA7B,EAAyCohB,QAAQ,CAAC0sD,cAAT,GAA0BooE,IAAI,CAACpoE,cAA/B;AAEzC,YAAKooE,IAAI,CAAClnE,WAAL,KAAqBhvE,SAA1B,EAAsCohB,QAAQ,CAAC4tD,WAAT,GAAuBw5E,UAAU,CAAEtS,IAAI,CAAClnE,WAAP,CAAjC;AAEtC,YAAKknE,IAAI,CAAC5oE,YAAL,KAAsBttE,SAA3B,EAAuCohB,QAAQ,CAACksD,YAAT,GAAwBk7E,UAAU,CAAEtS,IAAI,CAAC5oE,YAAP,CAAlC;AACvC,YAAK4oE,IAAI,CAAC3oE,qBAAL,KAA+BvtE,SAApC,EAAgDohB,QAAQ,CAACmsD,qBAAT,GAAiCi7E,UAAU,CAAEtS,IAAI,CAAC3oE,qBAAP,CAA3C;AAChD,YAAK2oE,IAAI,CAAC1oE,kBAAL,KAA4BxtE,SAAjC,EAA6CohB,QAAQ,CAACosD,kBAAT,GAA8Bg7E,UAAU,CAAEtS,IAAI,CAAC1oE,kBAAP,CAAxC;AAC7C,YAAK0oE,IAAI,CAACzoE,oBAAL,KAA8BztE,SAAnC,EAA+CohB,QAAQ,CAACqsD,oBAAT,GAAgC,IAAI7vB,OAAJ,GAAcqC,SAAd,CAAyBi2F,IAAI,CAACzoE,oBAA9B,CAAhC;AAE/C,YAAKyoE,IAAI,CAAC9hD,YAAL,KAAsBp0F,SAA3B,EAAuCohB,QAAQ,CAACgzE,YAAT,GAAwB8hD,IAAI,CAAC9hD,YAA7B;AACvC,YAAK8hD,IAAI,CAAC7hD,eAAL,KAAyBr0F,SAA9B,EAA0CohB,QAAQ,CAACizE,eAAT,GAA2Bm0D,UAAU,CAAEtS,IAAI,CAAC7hD,eAAP,CAArC;AAE1C,eAAOjzE,QAAP;AAEA,OAzQ2E;AA2Q5EsnI,iBAAW,EAAE,qBAAWhtJ,KAAX,EAAmB;AAE/B,aAAKirD,QAAL,GAAgBjrD,KAAhB;AACA,eAAO,IAAP;AAEA;AAhR2E,KAAlD,CAA3B;AAoRA,QAAMitJ,WAAW,GAAG;AAEnBC,gBAAU,EAAE,oBAAWp6H,KAAX,EAAmB;AAE9B,YAAK,OAAOq6H,WAAP,KAAuB,WAA5B,EAA0C;AAEzC,iBAAO,IAAIA,WAAJ,GAAkB7lI,MAAlB,CAA0BwL,KAA1B,CAAP;AAEA,SAN6B,CAQ9B;AACA;;;AAEA,YAAItM,CAAC,GAAG,EAAR;;AAEA,aAAM,IAAItwB,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGjvC,KAAK,CAACv9B,MAA5B,EAAoCW,KAAC,GAAG6rE,EAAxC,EAA4C7rE,KAAC,EAA7C,EAAmD;AAElD;AACAswB,WAAC,IAAI+D,MAAM,CAACC,YAAP,CAAqBsI,KAAK,CAAE58B,KAAF,CAA1B,CAAL;AAEA;;AAED,YAAI;AAEH;AAEA,iBAAO6qJ,kBAAkB,CAAEqM,MAAM,CAAE5mI,CAAF,CAAR,CAAzB;AAEA,SAND,CAME,OAAQhzB,CAAR,EAAY;AAAE;AAEf,iBAAOgzB,CAAP;AAEA;AAED,OAlCkB;AAoCnB6mI,oBAAc,EAAE,wBAAWjsI,GAAX,EAAiB;AAEhC,YAAMpE,KAAK,GAAGoE,GAAG,CAAC8O,WAAJ,CAAiB,GAAjB,CAAd;AAEA,YAAKlT,KAAK,KAAK,CAAE,CAAjB,EAAqB,OAAO,IAAP;AAErB,eAAOoE,GAAG,CAACmG,MAAJ,CAAY,CAAZ,EAAevK,KAAK,GAAG,CAAvB,CAAP;AAEA;AA5CkB,KAApB;;AAgDA,aAASswI,uBAAT,GAAmC;AAElCv0E,oBAAc,CAACxuE,IAAf,CAAqB,IAArB;AAEA,WAAK3P,IAAL,GAAY,yBAAZ;AACA,WAAKioG,aAAL,GAAqBz0F,QAArB;AAEA;;AAEDk/I,2BAAuB,CAAClgJ,SAAxB,GAAoC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqtE,cAAc,CAAC3rE,SAA9B,CAAf,EAA0D;AAE7F0M,iBAAW,EAAEwzI,uBAFgF;AAI7FrwD,+BAAyB,EAAE,IAJkE;AAM7F7rF,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBkmC,sBAAc,CAAC3rE,SAAf,CAAyBgE,IAAzB,CAA8B7G,IAA9B,CAAoC,IAApC,EAA0CsoC,MAA1C;AAEA,aAAKgwD,aAAL,GAAqBhwD,MAAM,CAACgwD,aAA5B;AAEA,eAAO,IAAP;AAEA,OAd4F;AAgB7FryF,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OApB4F;AAsB7F25C,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAGgkF,cAAc,CAAC3rE,SAAf,CAAyB29C,MAAzB,CAAgCxgD,IAAhC,CAAsC,IAAtC,CAAb;AAEAxV,YAAI,CAAC8tG,aAAL,GAAqB,KAAKA,aAA1B;AAEA9tG,YAAI,CAACkoG,yBAAL,GAAiC,IAAjC;AAEA,eAAOloG,IAAP;AAEA;AAhC4F,KAA1D,CAApC;;AAoCA,aAASw4J,wBAAT,CAAmCz6H,KAAnC,EAA0C4hD,QAA1C,EAAoDzG,UAApD,EAAgEyuB,gBAAhE,EAAmF;AAElF,UAAK,OAASzuB,UAAT,KAA0B,QAA/B,EAA0C;AAEzCyuB,wBAAgB,GAAGzuB,UAAnB;AAEAA,kBAAU,GAAG,KAAb;AAEA52E,eAAO,CAACD,KAAR,CAAe,+FAAf;AAEA;;AAEDq9E,qBAAe,CAAClqE,IAAhB,CAAsB,IAAtB,EAA4BuoB,KAA5B,EAAmC4hD,QAAnC,EAA6CzG,UAA7C;AAEA,WAAKyuB,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;AAEA;;AAED6wD,4BAAwB,CAACngJ,SAAzB,GAAqC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe+oE,eAAe,CAACrnE,SAA/B,CAAf,EAA2D;AAE/F0M,iBAAW,EAAEyzI,wBAFkF;AAI/F/vD,gCAA0B,EAAE,IAJmE;AAM/FpsF,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzB4hC,uBAAe,CAACrnE,SAAhB,CAA0BgE,IAA1B,CAA+B7G,IAA/B,CAAqC,IAArC,EAA2CsoC,MAA3C;AAEA,aAAK6pD,gBAAL,GAAwB7pD,MAAM,CAAC6pD,gBAA/B;AAEA,eAAO,IAAP;AAEA,OAd8F;AAgB/F3xC,YAAM,EAAE,kBAAY;AAEnB,YAAMh2D,IAAI,GAAG0/E,eAAe,CAACrnE,SAAhB,CAA0B29C,MAA1B,CAAiCxgD,IAAjC,CAAuC,IAAvC,CAAb;AAEAxV,YAAI,CAAC2nG,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA3nG,YAAI,CAACyoG,0BAAL,GAAkC,IAAlC;AAEA,eAAOzoG,IAAP;AAEA;AA1B8F,KAA3D,CAArC;;AA8BA,aAASy4J,oBAAT,CAA+BxN,OAA/B,EAAyC;AAExCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAEDwN,wBAAoB,CAACpgJ,SAArB,GAAiC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAElF0M,iBAAW,EAAE0zI,oBAFqE;AAIlF1+H,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMwuI,MAAM,GAAG,IAAIc,UAAJ,CAAgBtvI,KAAK,CAAC6uI,OAAtB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgBlvI,KAAK,CAAC5X,IAAtB;AACAomJ,cAAM,CAACY,gBAAP,CAAyBpvI,KAAK,CAACgvI,aAA/B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW7e,IAAX,EAAkB;AAEnC,cAAI;AAEHo8I,kBAAM,CAAExtI,KAAK,CAACuK,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYnZ,IAAZ,CAAb,CAAF,CAAN;AAEA,WAJD,CAIE,OAAQ/O,CAAR,EAAY;AAEb,gBAAKqrJ,OAAL,EAAe;AAEdA,qBAAO,CAAErrJ,CAAF,CAAP;AAEA,aAJD,MAIO;AAEN6D,qBAAO,CAACD,KAAR,CAAe5D,CAAf;AAEA;;AAED2d,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AAEA;AAED,SAtBD,EAsBGw9H,UAtBH,EAsBeC,OAtBf;AAwBA,OAnCiF;AAqClFnjI,WAAK,EAAE,eAAW8+H,IAAX,EAAkB;AAExB,YAAMiT,oBAAoB,GAAG,EAA7B;AACA,YAAMC,cAAc,GAAG,EAAvB;;AAEA,iBAASC,oBAAT,CAA+BnT,IAA/B,EAAqC36F,IAArC,EAA4C;AAE3C,cAAK4tG,oBAAoB,CAAE5tG,IAAF,CAApB,KAAiCv7C,SAAtC,EAAkD,OAAOmpJ,oBAAoB,CAAE5tG,IAAF,CAA3B;AAElD,cAAM+6E,kBAAkB,GAAG4f,IAAI,CAAC5f,kBAAhC;AACA,cAAMD,iBAAiB,GAAGC,kBAAkB,CAAE/6E,IAAF,CAA5C;AAEA,cAAM5rB,MAAM,GAAG25H,cAAc,CAAEpT,IAAF,EAAQ7f,iBAAiB,CAAC1mG,MAA1B,CAA7B;AAEA,cAAMnB,KAAK,GAAG,IAAI+6H,YAAY,CAAElzB,iBAAiB,CAAC//H,IAApB,CAAhB,CAA4Cq5B,MAA5C,CAAd;AACA,cAAMumG,EAAE,GAAG,IAAIJ,iBAAJ,CAAuBtnG,KAAvB,EAA8B6nG,iBAAiB,CAAC59B,MAAhD,CAAX;AACAy9B,YAAE,CAAC36E,IAAH,GAAU86E,iBAAiB,CAAC96E,IAA5B;AAEA4tG,8BAAoB,CAAE5tG,IAAF,CAApB,GAA+B26E,EAA/B;AAEA,iBAAOA,EAAP;AAEA;;AAED,iBAASozB,cAAT,CAAyBpT,IAAzB,EAA+B36F,IAA/B,EAAsC;AAErC,cAAK6tG,cAAc,CAAE7tG,IAAF,CAAd,KAA2Bv7C,SAAhC,EAA4C,OAAOopJ,cAAc,CAAE7tG,IAAF,CAArB;AAE5C,cAAMy6E,YAAY,GAAGkgB,IAAI,CAAClgB,YAA1B;AACA,cAAMwzB,WAAW,GAAGxzB,YAAY,CAAEz6E,IAAF,CAAhC;AAEA,cAAMw7B,EAAE,GAAG,IAAI9xD,WAAJ,CAAiBukI,WAAjB,EAA+B75H,MAA1C;AAEAy5H,wBAAc,CAAE7tG,IAAF,CAAd,GAAyBw7B,EAAzB;AAEA,iBAAOA,EAAP;AAEA;;AAED,YAAM7b,QAAQ,GAAGg7E,IAAI,CAACv9C,yBAAL,GAAiC,IAAIqwD,uBAAJ,EAAjC,GAAiE,IAAIv0E,cAAJ,EAAlF;AAEA,YAAM/7D,KAAK,GAAGw9H,IAAI,CAACzlJ,IAAL,CAAUioB,KAAxB;;AAEA,YAAKA,KAAK,KAAK1Y,SAAf,EAA2B;AAE1B,cAAMypJ,UAAU,GAAG,IAAIF,YAAY,CAAE7wI,KAAK,CAACpiB,IAAR,CAAhB,CAAgCoiB,KAAK,CAAC8V,KAAtC,CAAnB;AACA0sC,kBAAQ,CAACruC,QAAT,CAAmB,IAAIsjD,eAAJ,CAAqBs5E,UAArB,EAAiC,CAAjC,CAAnB;AAEA;;AAED,YAAM/9G,UAAU,GAAGwqG,IAAI,CAACzlJ,IAAL,CAAUi7C,UAA7B;;AAEA,aAAM,IAAM8vB,GAAZ,IAAmB9vB,UAAnB,EAAgC;AAE/B,cAAM0U,SAAS,GAAG1U,UAAU,CAAE8vB,GAAF,CAA5B;AACA,cAAIkuF,eAAe,SAAnB;;AAEA,cAAKtpG,SAAS,CAACsqC,4BAAf,EAA8C;AAE7C,gBAAM2rC,iBAAiB,GAAGgzB,oBAAoB,CAAEnT,IAAI,CAACzlJ,IAAP,EAAa2vD,SAAS,CAAC3vD,IAAvB,CAA9C;AACAi5J,2BAAe,GAAG,IAAItzB,0BAAJ,CAAgCC,iBAAhC,EAAmDj2E,SAAS,CAACgwB,QAA7D,EAAuEhwB,SAAS,CAAC9yC,MAAjF,EAAyF8yC,SAAS,CAACupB,UAAnG,CAAlB;AAEA,WALD,MAKO;AAEN,gBAAM8/E,WAAU,GAAG,IAAIF,YAAY,CAAEnpG,SAAS,CAAC9pD,IAAZ,CAAhB,CAAoC8pD,SAAS,CAAC5xB,KAA9C,CAAnB;;AACA,gBAAMm7H,qBAAqB,GAAGvpG,SAAS,CAAC84C,0BAAV,GAAuC+vD,wBAAvC,GAAkE94E,eAAhG;AACAu5E,2BAAe,GAAG,IAAIC,qBAAJ,CAA2BF,WAA3B,EAAuCrpG,SAAS,CAACgwB,QAAjD,EAA2DhwB,SAAS,CAACupB,UAArE,CAAlB;AAEA;;AAED,cAAKvpB,SAAS,CAACzvD,IAAV,KAAmBqP,SAAxB,EAAoC0pJ,eAAe,CAAC/4J,IAAhB,GAAuByvD,SAAS,CAACzvD,IAAjC;AACpCuqE,kBAAQ,CAAC6Z,YAAT,CAAuBvZ,GAAvB,EAA4BkuF,eAA5B;AAEA;;AAED,YAAMh1E,eAAe,GAAGwhE,IAAI,CAACzlJ,IAAL,CAAUikF,eAAlC;;AAEA,YAAKA,eAAL,EAAuB;AAEtB,eAAM,IAAMlZ,KAAZ,IAAmBkZ,eAAnB,EAAqC;AAEpC,gBAAMyD,cAAc,GAAGzD,eAAe,CAAElZ,KAAF,CAAtC;AAEA,gBAAMhtC,KAAK,GAAG,EAAd;;AAEA,iBAAM,IAAI58B,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG0a,cAAc,CAAClnF,MAArC,EAA6CW,KAAC,GAAG6rE,EAAjD,EAAqD7rE,KAAC,EAAtD,EAA4D;AAE3D,kBAAMwuD,WAAS,GAAG+3B,cAAc,CAAEvmF,KAAF,CAAhC;;AACA,kBAAI83J,gBAAe,SAAnB;;AAEA,kBAAKtpG,WAAS,CAACsqC,4BAAf,EAA8C;AAE7C,oBAAM2rC,kBAAiB,GAAGgzB,oBAAoB,CAAEnT,IAAI,CAACzlJ,IAAP,EAAa2vD,WAAS,CAAC3vD,IAAvB,CAA9C;;AACAi5J,gCAAe,GAAG,IAAItzB,0BAAJ,CAAgCC,kBAAhC,EAAmDj2E,WAAS,CAACgwB,QAA7D,EAAuEhwB,WAAS,CAAC9yC,MAAjF,EAAyF8yC,WAAS,CAACupB,UAAnG,CAAlB;AAEA,eALD,MAKO;AAEN,oBAAM8/E,YAAU,GAAG,IAAIF,YAAY,CAAEnpG,WAAS,CAAC9pD,IAAZ,CAAhB,CAAoC8pD,WAAS,CAAC5xB,KAA9C,CAAnB;;AACAk7H,gCAAe,GAAG,IAAIv5E,eAAJ,CAAqBs5E,YAArB,EAAiCrpG,WAAS,CAACgwB,QAA3C,EAAqDhwB,WAAS,CAACupB,UAA/D,CAAlB;AAEA;;AAED,kBAAKvpB,WAAS,CAACzvD,IAAV,KAAmBqP,SAAxB,EAAoC0pJ,gBAAe,CAAC/4J,IAAhB,GAAuByvD,WAAS,CAACzvD,IAAjC;AACpC69B,mBAAK,CAACl8B,IAAN,CAAYo3J,gBAAZ;AAEA;;AAEDxuF,oBAAQ,CAACwZ,eAAT,CAA0BlZ,KAA1B,IAAkChtC,KAAlC;AAEA;AAED;;AAED,YAAMmmD,oBAAoB,GAAGuhE,IAAI,CAACzlJ,IAAL,CAAUkkF,oBAAvC;;AAEA,YAAKA,oBAAL,EAA4B;AAE3BzZ,kBAAQ,CAACyZ,oBAAT,GAAgC,IAAhC;AAEA;;AAED,YAAMlC,MAAM,GAAGyjE,IAAI,CAACzlJ,IAAL,CAAUgiF,MAAV,IAAoByjE,IAAI,CAACzlJ,IAAL,CAAUm5J,SAA9B,IAA2C1T,IAAI,CAACzlJ,IAAL,CAAUo5J,OAApE;;AAEA,YAAKp3E,MAAM,KAAKzyE,SAAhB,EAA4B;AAE3B,eAAM,IAAIpO,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGkwD,MAAM,CAACxhF,MAA5B,EAAoCW,KAAC,KAAK2wB,CAA1C,EAA6C,EAAG3wB,KAAhD,EAAoD;AAEnD,gBAAMgF,KAAK,GAAG67E,MAAM,CAAE7gF,KAAF,CAApB;AAEAspE,oBAAQ,CAAC+Z,QAAT,CAAmBr+E,KAAK,CAACytE,KAAzB,EAAgCztE,KAAK,CAAC+jE,KAAtC,EAA6C/jE,KAAK,CAACkzE,aAAnD;AAEA;AAED;;AAED,YAAM8I,cAAc,GAAGsjE,IAAI,CAACzlJ,IAAL,CAAUmiF,cAAjC;;AAEA,YAAKA,cAAc,KAAK5yE,SAAxB,EAAoC;AAEnC,cAAM8tC,MAAM,GAAG,IAAI4f,OAAJ,EAAf;;AAEA,cAAKklB,cAAc,CAAC9kC,MAAf,KAA0B9tC,SAA/B,EAA2C;AAE1C8tC,kBAAM,CAACmS,SAAP,CAAkB2yB,cAAc,CAAC9kC,MAAjC;AAEA;;AAEDotB,kBAAQ,CAAC0X,cAAT,GAA0B,IAAI7S,MAAJ,CAAYjyB,MAAZ,EAAoB8kC,cAAc,CAACnkE,MAAnC,CAA1B;AAEA;;AAED,YAAKynI,IAAI,CAACvlJ,IAAV,EAAiBuqE,QAAQ,CAACvqE,IAAT,GAAgBulJ,IAAI,CAACvlJ,IAArB;AACjB,YAAKulJ,IAAI,CAACn+E,QAAV,EAAqBmD,QAAQ,CAACnD,QAAT,GAAoBm+E,IAAI,CAACn+E,QAAzB;AAErB,eAAOmD,QAAP;AAEA;AAjMiF,KAAlD,CAAjC;AAqMA,QAAMquF,YAAY,GAAG;AACpB/3E,eAAS,EAAEA,SADS;AAEpBpuD,gBAAU,EAAEA,UAFQ;AAGpB;AACAuuD,uBAAiB,EAAE,OAAOA,iBAAP,KAA6B,WAA7B,GAA2CA,iBAA3C,GAA+DvuD,UAJ9D;AAKpByuD,gBAAU,EAAEA,UALQ;AAMpB7sD,iBAAW,EAAEA,WANO;AAOpByT,gBAAU,EAAEA,UAPQ;AAQpBxT,iBAAW,EAAEA,WARO;AASpBitD,kBAAY,EAAEA,YATM;AAUpBE,kBAAY,EAAEA;AAVM,KAArB;;AAaA,aAAS03E,YAAT,CAAuBpO,OAAvB,EAAiC;AAEhCD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAEDoO,gBAAY,CAAChhJ,SAAb,GAAyB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE1E0M,iBAAW,EAAEs0I,YAF6D;AAI1Et/H,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAM5X,IAAI,GAAK,KAAKA,IAAL,KAAc,EAAhB,GAAuB0zJ,WAAW,CAACI,cAAZ,CAA4BjsI,GAA5B,CAAvB,GAA2D,KAAK7nB,IAA7E;AACA,aAAK2mJ,YAAL,GAAoB,KAAKA,YAAL,IAAqB3mJ,IAAzC;AAEA,YAAMomJ,MAAM,GAAG,IAAIc,UAAJ,CAAgBtvI,KAAK,CAAC6uI,OAAtB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AACAomJ,cAAM,CAACY,gBAAP,CAAyB,KAAKJ,aAA9B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW7e,IAAX,EAAkB;AAEnC,cAAIi4I,IAAI,GAAG,IAAX;;AAEA,cAAI;AAEHA,gBAAI,GAAG/+H,IAAI,CAACC,KAAL,CAAYnZ,IAAZ,CAAP;AAEA,WAJD,CAIE,OAAQnL,KAAR,EAAgB;AAEjB,gBAAKynJ,OAAO,KAAKv6I,SAAjB,EAA6Bu6I,OAAO,CAAEznJ,KAAF,CAAP;AAE7BC,mBAAO,CAACD,KAAR,CAAe,sCAAsCgqB,GAAtC,GAA4C,GAA3D,EAAgEhqB,KAAK,CAACyD,OAAtE;AAEA;AAEA;;AAED,cAAMqwD,QAAQ,GAAGsvF,IAAI,CAACtvF,QAAtB;;AAEA,cAAKA,QAAQ,KAAK5mD,SAAb,IAA0B4mD,QAAQ,CAACtwD,IAAT,KAAkB0J,SAA5C,IAAyD4mD,QAAQ,CAACtwD,IAAT,CAAc1F,WAAd,OAAgC,UAA9F,EAA2G;AAE1GmC,mBAAO,CAACD,KAAR,CAAe,qCAAqCgqB,GAApD;AACA;AAEA;;AAEDjQ,eAAK,CAACuK,KAAN,CAAa8+H,IAAb,EAAmBmE,MAAnB;AAEA,SA7BD,EA6BGC,UA7BH,EA6BeC,OA7Bf;AA+BA,OA7CyE;AA+C1EnjI,WAAK,EAAE,eAAW8+H,IAAX,EAAiBmE,MAAjB,EAA0B;AAEhC,YAAM5/E,MAAM,GAAG,KAAKsvF,UAAL,CAAiB7T,IAAI,CAACz7E,MAAtB,CAAf;AACA,YAAMF,UAAU,GAAG,KAAKyvF,eAAL,CAAsB9T,IAAI,CAAC37E,UAA3B,EAAuCE,MAAvC,CAAnB;AAEA,YAAM3T,MAAM,GAAG,KAAKmjG,WAAL,CAAkB/T,IAAI,CAACpvF,MAAvB,EAA+B,YAAY;AAEzD,cAAKuzF,MAAM,KAAKr6I,SAAhB,EAA4Bq6I,MAAM,CAAE/5I,MAAF,CAAN;AAE5B,SAJc,CAAf;AAMA,YAAMqmD,QAAQ,GAAG,KAAKujG,aAAL,CAAoBhU,IAAI,CAACvvF,QAAzB,EAAmCG,MAAnC,CAAjB;AACA,YAAM0T,SAAS,GAAG,KAAK2vF,cAAL,CAAqBjU,IAAI,CAAC17E,SAA1B,EAAqC7T,QAArC,CAAlB;AAEA,YAAMrmD,MAAM,GAAG,KAAK8pJ,WAAL,CAAkBlU,IAAI,CAAC51I,MAAvB,EAA+Bi6D,UAA/B,EAA2CC,SAA3C,CAAf;;AAEA,YAAK07E,IAAI,CAAC8C,UAAV,EAAuB;AAEtB14I,gBAAM,CAAC04I,UAAP,GAAoB,KAAKqR,eAAL,CAAsBnU,IAAI,CAAC8C,UAA3B,CAApB;AAEA;;AAED,YAAK9C,IAAI,CAACpvF,MAAL,KAAgB9mD,SAAhB,IAA6Bk2I,IAAI,CAACpvF,MAAL,CAAY71D,MAAZ,KAAuB,CAAzD,EAA6D;AAE5D,cAAKopJ,MAAM,KAAKr6I,SAAhB,EAA4Bq6I,MAAM,CAAE/5I,MAAF,CAAN;AAE5B;;AAED,eAAOA,MAAP;AAEA,OA7EyE;AA+E1EypJ,gBAAU,EAAE,oBAAW7T,IAAX,EAAkB;AAE7B,YAAMz7E,MAAM,GAAG,EAAf;;AAEA,YAAKy7E,IAAI,KAAKl2I,SAAd,EAA0B;AAEzB,eAAM,IAAIpO,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,gBAAMg6C,KAAK,GAAG,IAAIk6G,KAAJ,GAAYzF,QAAZ,CAAsBnK,IAAI,CAAEtkJ,KAAF,CAA1B,CAAd;AAEA6oE,kBAAM,CAAE7uB,KAAK,CAAC2P,IAAR,CAAN,GAAuB3P,KAAvB;AAEA;AAED;;AAED,eAAO6uB,MAAP;AAEA,OAjGyE;AAmG1EuvF,qBAAe,EAAE,yBAAW9T,IAAX,EAAiBz7E,MAAjB,EAA0B;AAE1C,YAAMF,UAAU,GAAG,EAAnB;AACA,YAAI+vF,cAAJ;;AAEA,YAAKpU,IAAI,KAAKl2I,SAAd,EAA0B;AAEzB,cAAMuqJ,oBAAoB,GAAG,IAAIrB,oBAAJ,EAA7B;;AAEA,eAAM,IAAIt3J,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,gBAAIspE,QAAQ,SAAZ;AACA,gBAAMzqE,IAAI,GAAGylJ,IAAI,CAAEtkJ,KAAF,CAAjB;;AAEA,oBAASnB,IAAI,CAAC6F,IAAd;AAEC,mBAAK,eAAL;AACA,mBAAK,qBAAL;AAEC4kE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACyvB,KADK,EAEVzvB,IAAI,CAACwvB,MAFK,EAGVxvB,IAAI,CAACuuF,aAHK,EAIVvuF,IAAI,CAACwuF,cAJK,CAAX;AAOA;;AAED,mBAAK,aAAL;AACA,mBAAK,mBAAL;AACA,mBAAK,cAAL;AAAqB;AAEpB/jB,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACyvB,KADK,EAEVzvB,IAAI,CAACwvB,MAFK,EAGVxvB,IAAI,CAACutC,KAHK,EAIVvtC,IAAI,CAACuuF,aAJK,EAKVvuF,IAAI,CAACwuF,cALK,EAMVxuF,IAAI,CAACyuF,aANK,CAAX;AASA;;AAED,mBAAK,gBAAL;AACA,mBAAK,sBAAL;AAEChkB,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACy8I,QAFK,EAGVz8I,IAAI,CAAC07I,UAHK,EAIV17I,IAAI,CAAC27I,WAJK,CAAX;AAOA;;AAED,mBAAK,kBAAL;AACA,mBAAK,wBAAL;AAEClxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAAC69I,SADK,EAEV79I,IAAI,CAAC89I,YAFK,EAGV99I,IAAI,CAACwvB,MAHK,EAIVxvB,IAAI,CAAC2uI,cAJK,EAKV3uI,IAAI,CAACwuF,cALK,EAMVxuF,IAAI,CAAC+9I,SANK,EAOV/9I,IAAI,CAAC07I,UAPK,EAQV17I,IAAI,CAAC27I,WARK,CAAX;AAWA;;AAED,mBAAK,cAAL;AACA,mBAAK,oBAAL;AAEClxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACwvB,MAFK,EAGVxvB,IAAI,CAAC2uI,cAHK,EAIV3uI,IAAI,CAACwuF,cAJK,EAKVxuF,IAAI,CAAC+9I,SALK,EAMV/9I,IAAI,CAAC07I,UANK,EAOV17I,IAAI,CAAC27I,WAPK,CAAX;AAUA;;AAED,mBAAK,gBAAL;AACA,mBAAK,sBAAL;AAEClxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACuuF,aAFK,EAGVvuF,IAAI,CAACwuF,cAHK,EAIVxuF,IAAI,CAACw7I,QAJK,EAKVx7I,IAAI,CAACy7I,SALK,EAMVz7I,IAAI,CAAC07I,UANK,EAOV17I,IAAI,CAAC27I,WAPK,CAAX;AAUA;;AAED,mBAAK,sBAAL;AACA,mBAAK,4BAAL;AACA,mBAAK,qBAAL;AACA,mBAAK,2BAAL;AACA,mBAAK,oBAAL;AACA,mBAAK,0BAAL;AACA,mBAAK,qBAAL;AACA,mBAAK,2BAAL;AAEClxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACwrE,MAFK,CAAX;AAKA;;AAED,mBAAK,cAAL;AACA,mBAAK,oBAAL;AAECf,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAAC81C,WADK,EAEV91C,IAAI,CAAC+1C,WAFK,EAGV/1C,IAAI,CAACk8I,aAHK,EAIVl8I,IAAI,CAACm8I,WAJK,EAKVn8I,IAAI,CAAC07I,UALK,EAMV17I,IAAI,CAAC27I,WANK,CAAX;AASA;;AAED,mBAAK,eAAL;AACA,mBAAK,qBAAL;AAEClxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACyvI,IAFK,EAGVzvI,IAAI,CAAC2uI,cAHK,EAIV3uI,IAAI,CAAC0uI,eAJK,EAKV1uI,IAAI,CAACowI,GALK,CAAX;AAQA;;AAED,mBAAK,mBAAL;AACA,mBAAK,yBAAL;AAEC3lE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACge,MADK,EAEVhe,IAAI,CAACyvI,IAFK,EAGVzvI,IAAI,CAAC0uI,eAHK,EAIV1uI,IAAI,CAAC2uI,cAJK,EAKV3uI,IAAI,CAACiyB,CALK,EAMVjyB,IAAI,CAAC8xC,CANK,CAAX;AASA;;AAED,mBAAK,cAAL;AACA,mBAAK,oBAAL;AAEC;AACA;AACA24B,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV,IAAIytJ,MAAM,CAAEtzJ,IAAI,CAACwE,IAAL,CAAUqB,IAAZ,CAAV,GAA+B+pJ,QAA/B,CAAyC5vJ,IAAI,CAACwE,IAA9C,CADU,EAEVxE,IAAI,CAAC0uI,eAFK,EAGV1uI,IAAI,CAACge,MAHK,EAIVhe,IAAI,CAAC2uI,cAJK,EAKV3uI,IAAI,CAAC4uI,MALK,CAAX;AAQA;;AAED,mBAAK,eAAL;AACA,mBAAK,qBAAL;AAECnkE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACkvB,MADK,EAEVlvB,IAAI,CAACy8I,QAFK,EAGVz8I,IAAI,CAACw7I,QAHK,EAIVx7I,IAAI,CAACy7I,SAJK,CAAX;AAOA;;AAED,mBAAK,oBAAL;AACA,mBAAK,0BAAL;AAEChxE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACV7F,IAAI,CAACixB,QADK,EAEVjxB,IAAI,CAACmnF,OAFK,EAGVnnF,IAAI,CAACge,MAHK,EAIVhe,IAAI,CAAC+5J,OAJK,CAAX;AAOA;;AAED,mBAAK,eAAL;AACA,mBAAK,qBAAL;AAECF,8BAAc,GAAG,EAAjB;;AAEA,qBAAM,IAAIp4J,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAG1lF,IAAI,CAACgqE,MAAL,CAAYxpE,MAAlC,EAA0CiB,CAAC,GAAGikF,EAA9C,EAAkDjkF,CAAC,EAAnD,EAAyD;AAExD,sBAAM05C,KAAK,GAAG6uB,MAAM,CAAEhqE,IAAI,CAACgqE,MAAL,CAAavoE,CAAb,CAAF,CAApB;AAEAo4J,gCAAc,CAACh4J,IAAf,CAAqBs5C,KAArB;AAEA;;AAEDsvB,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACVg0J,cADU,EAEV75J,IAAI,CAAC41I,aAFK,CAAX;AAKA;;AAGD,mBAAK,iBAAL;AACA,mBAAK,uBAAL;AAECikB,8BAAc,GAAG,EAAjB;;AAEA,qBAAM,IAAIp4J,IAAC,GAAG,CAAR,EAAWikF,IAAE,GAAG1lF,IAAI,CAACgqE,MAAL,CAAYxpE,MAAlC,EAA0CiB,IAAC,GAAGikF,IAA9C,EAAkDjkF,IAAC,EAAnD,EAAyD;AAExD,sBAAM05C,MAAK,GAAG6uB,MAAM,CAAEhqE,IAAI,CAACgqE,MAAL,CAAavoE,IAAb,CAAF,CAApB;AAEAo4J,gCAAc,CAACh4J,IAAf,CAAqBs5C,MAArB;AAEA;;AAED,oBAAMg7F,WAAW,GAAGn2I,IAAI,CAAC64B,OAAL,CAAas9G,WAAjC;;AAEA,oBAAKA,WAAW,KAAK5mI,SAArB,EAAiC;AAEhCvP,sBAAI,CAAC64B,OAAL,CAAas9G,WAAb,GAA2B,IAAImd,MAAM,CAAEnd,WAAW,CAACtwI,IAAd,CAAV,GAAiC+pJ,QAAjC,CAA2CzZ,WAA3C,CAA3B;AAEA;;AAED1rE,wBAAQ,GAAG,IAAIq0E,UAAU,CAAE9+I,IAAI,CAAC6F,IAAP,CAAd,CACVg0J,cADU,EAEV75J,IAAI,CAAC64B,OAFK,CAAX;AAKA;;AAED,mBAAK,gBAAL;AACA,mBAAK,yBAAL;AAEC4xC,wBAAQ,GAAGqvF,oBAAoB,CAACnzI,KAArB,CAA4B3mB,IAA5B,CAAX;AAEA;;AAED,mBAAK,UAAL;AAECsC,uBAAO,CAACD,KAAR,CAAe,kEAAf;AAEA;;AAED;AAECC,uBAAO,CAAC2W,IAAR,CAAc,oDAAoDjZ,IAAI,CAAC6F,IAAzD,GAAgE,GAA9E;AAEA;AAzPF;;AA6PA4kE,oBAAQ,CAAC3f,IAAT,GAAgB9qD,IAAI,CAAC8qD,IAArB;AAEA,gBAAK9qD,IAAI,CAACE,IAAL,KAAcqP,SAAnB,EAA+Bk7D,QAAQ,CAACvqE,IAAT,GAAgBF,IAAI,CAACE,IAArB;AAC/B,gBAAKuqE,QAAQ,CAAC2Z,gBAAT,KAA8B,IAA9B,IAAsCpkF,IAAI,CAACsnE,QAAL,KAAkB/3D,SAA7D,EAAyEk7D,QAAQ,CAACnD,QAAT,GAAoBtnE,IAAI,CAACsnE,QAAzB;AAEzEwC,sBAAU,CAAE9pE,IAAI,CAAC8qD,IAAP,CAAV,GAA0B2f,QAA1B;AAEA;AAED;;AAED,eAAOX,UAAP;AAEA,OA3XyE;AA6X1E4vF,oBAAc,EAAE,wBAAWjU,IAAX,EAAiBvvF,QAAjB,EAA4B;AAE3C,YAAM2U,KAAK,GAAG,EAAd,CAF2C,CAEzB;;AAClB,YAAMd,SAAS,GAAG,EAAlB;;AAEA,YAAK07E,IAAI,KAAKl2I,SAAd,EAA0B;AAEzB,cAAMq7I,MAAM,GAAG,IAAIkN,cAAJ,EAAf;AACAlN,gBAAM,CAACqN,WAAP,CAAoB/hG,QAApB;;AAEA,eAAM,IAAI/0D,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,gBAAMnB,IAAI,GAAGylJ,IAAI,CAAEtkJ,KAAF,CAAjB;;AAEA,gBAAKnB,IAAI,CAAC6F,IAAL,KAAc,eAAnB,EAAqC;AAEpC;AAEA,kBAAMk4B,KAAK,GAAG,EAAd;;AAEA,mBAAM,IAAIt8B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGzB,IAAI,CAAC+pE,SAAL,CAAevpE,MAApC,EAA4CiB,CAAC,EAA7C,EAAmD;AAElD,oBAAMkvB,QAAQ,GAAG3wB,IAAI,CAAC+pE,SAAL,CAAgBtoE,CAAhB,CAAjB;;AAEA,oBAAKopE,KAAK,CAAEl6C,QAAQ,CAACm6B,IAAX,CAAL,KAA2Bv7C,SAAhC,EAA4C;AAE3Cs7D,uBAAK,CAAEl6C,QAAQ,CAACm6B,IAAX,CAAL,GAAyB8/F,MAAM,CAACjkI,KAAP,CAAcgK,QAAd,CAAzB;AAEA;;AAEDoN,qBAAK,CAACl8B,IAAN,CAAYgpE,KAAK,CAAEl6C,QAAQ,CAACm6B,IAAX,CAAjB;AAEA;;AAEDif,uBAAS,CAAE/pE,IAAI,CAAC8qD,IAAP,CAAT,GAAyB/sB,KAAzB;AAEA,aAtBD,MAsBO;AAEN,kBAAK8sC,KAAK,CAAE7qE,IAAI,CAAC8qD,IAAP,CAAL,KAAuBv7C,SAA5B,EAAwC;AAEvCs7D,qBAAK,CAAE7qE,IAAI,CAAC8qD,IAAP,CAAL,GAAqB8/F,MAAM,CAACjkI,KAAP,CAAc3mB,IAAd,CAArB;AAEA;;AAED+pE,uBAAS,CAAE/pE,IAAI,CAAC8qD,IAAP,CAAT,GAAyB+f,KAAK,CAAE7qE,IAAI,CAAC8qD,IAAP,CAA9B;AAEA;AAED;AAED;;AAED,eAAOif,SAAP;AAEA,OAnbyE;AAqb1E6vF,qBAAe,EAAE,yBAAWnU,IAAX,EAAkB;AAElC,YAAM8C,UAAU,GAAG,EAAnB;;AAEA,aAAM,IAAIpnJ,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGskJ,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,EAAnC,EAAyC;AAExC,cAAMnB,IAAI,GAAGylJ,IAAI,CAAEtkJ,KAAF,CAAjB;AAEA,cAAMq/I,IAAI,GAAGgH,aAAa,CAAC7gI,KAAd,CAAqB3mB,IAArB,CAAb;AAEA,cAAKA,IAAI,CAAC8qD,IAAL,KAAcv7C,SAAnB,EAA+BixI,IAAI,CAAC11F,IAAL,GAAY9qD,IAAI,CAAC8qD,IAAjB;AAE/By9F,oBAAU,CAAC1mJ,IAAX,CAAiB2+I,IAAjB;AAEA;;AAED,eAAO+H,UAAP;AAEA,OAvcyE;AAyc1EiR,iBAAW,EAAE,qBAAW/T,IAAX,EAAiBmE,MAAjB,EAA0B;AAEtC,YAAMxtI,KAAK,GAAG,IAAd;AACA,YAAMi6C,MAAM,GAAG,EAAf;AAEA,YAAIu0F,MAAJ;;AAEA,iBAASoP,SAAT,CAAoB3tI,GAApB,EAA0B;AAEzBjQ,eAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA,iBAAOu+H,MAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,YAAY;AAEpCjQ,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WAJM,EAIJ9c,SAJI,EAIO,YAAY;AAEzB6M,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WATM,CAAP;AAWA;;AAED,YAAKo5H,IAAI,KAAKl2I,SAAT,IAAsBk2I,IAAI,CAACjlJ,MAAL,GAAc,CAAzC,EAA6C;AAE5C,cAAMyqJ,OAAO,GAAG,IAAItB,cAAJ,CAAoBC,MAApB,CAAhB;AAEAgB,gBAAM,GAAG,IAAI4C,WAAJ,CAAiBvC,OAAjB,CAAT;AACAL,gBAAM,CAACS,cAAP,CAAuB,KAAKH,WAA5B;;AAEA,eAAM,IAAI/pJ,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGy4E,IAAI,CAACjlJ,MAA3B,EAAmCW,KAAC,GAAG6rE,EAAvC,EAA2C7rE,KAAC,EAA5C,EAAkD;AAEjD,gBAAMI,KAAK,GAAGkkJ,IAAI,CAAEtkJ,KAAF,CAAlB;AACA,gBAAMkrB,GAAG,GAAG9qB,KAAK,CAAC8qB,GAAlB;;AAEA,gBAAKuG,KAAK,CAAC0jC,OAAN,CAAejqC,GAAf,CAAL,EAA4B;AAE3B;AAEAgqC,oBAAM,CAAE90D,KAAK,CAACupD,IAAR,CAAN,GAAuB,EAAvB;;AAEA,mBAAM,IAAIrpD,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAGr5D,GAAG,CAAC7rB,MAA1B,EAAkCiB,CAAC,GAAGikF,EAAtC,EAA0CjkF,CAAC,EAA3C,EAAiD;AAEhD,oBAAMw4J,UAAU,GAAG5tI,GAAG,CAAE5qB,CAAF,CAAtB;AAEA,oBAAM+C,IAAI,GAAG,4BAA4B4O,IAA5B,CAAkC6mJ,UAAlC,IAAiDA,UAAjD,GAA8D79I,KAAK,CAAC+uI,YAAN,GAAqB8O,UAAhG;AAEA5jG,sBAAM,CAAE90D,KAAK,CAACupD,IAAR,CAAN,CAAqBjpD,IAArB,CAA2Bm4J,SAAS,CAAEx1J,IAAF,CAApC;AAEA;AAED,aAhBD,MAgBO;AAEN;AAEA,kBAAMA,KAAI,GAAG,4BAA4B4O,IAA5B,CAAkC7R,KAAK,CAAC8qB,GAAxC,IAAgD9qB,KAAK,CAAC8qB,GAAtD,GAA4DjQ,KAAK,CAAC+uI,YAAN,GAAqB5pJ,KAAK,CAAC8qB,GAApG;;AAEAgqC,oBAAM,CAAE90D,KAAK,CAACupD,IAAR,CAAN,GAAuBkvG,SAAS,CAAEx1J,KAAF,CAAhC;AAEA;AAED;AAED;;AAED,eAAO6xD,MAAP;AAEA,OA7gByE;AA+gB1EojG,mBAAa,EAAE,uBAAWhU,IAAX,EAAiBpvF,MAAjB,EAA0B;AAExC,iBAAS6jG,aAAT,CAAwBjvJ,KAAxB,EAA+BpF,IAA/B,EAAsC;AAErC,cAAK,OAAOoF,KAAP,KAAiB,QAAtB,EAAiC,OAAOA,KAAP;AAEjC3I,iBAAO,CAAC2W,IAAR,CAAc,sEAAd,EAAsFhO,KAAtF;AAEA,iBAAOpF,IAAI,CAAEoF,KAAF,CAAX;AAEA;;AAED,YAAMirD,QAAQ,GAAG,EAAjB;;AAEA,YAAKuvF,IAAI,KAAKl2I,SAAd,EAA0B;AAEzB,eAAM,IAAIpO,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG65I,IAAI,CAACjlJ,MAA1B,EAAkCW,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,gBAAMnB,IAAI,GAAGylJ,IAAI,CAAEtkJ,KAAF,CAAjB;;AAEA,gBAAKnB,IAAI,CAACuB,KAAL,KAAegO,SAApB,EAAgC;AAE/BjN,qBAAO,CAAC2W,IAAR,CAAc,8CAAd,EAA8DjZ,IAAI,CAAC8qD,IAAnE;AAEA;;AAED,gBAAKuL,MAAM,CAAEr2D,IAAI,CAACuB,KAAP,CAAN,KAAyBgO,SAA9B,EAA0C;AAEzCjN,qBAAO,CAAC2W,IAAR,CAAc,qCAAd,EAAqDjZ,IAAI,CAACuB,KAA1D;AAEA;;AAED,gBAAIi3D,OAAO,SAAX;;AAEA,gBAAK5lC,KAAK,CAAC0jC,OAAN,CAAeD,MAAM,CAAEr2D,IAAI,CAACuB,KAAP,CAArB,CAAL,EAA6C;AAE5Ci3D,qBAAO,GAAG,IAAIu2C,WAAJ,CAAiB14C,MAAM,CAAEr2D,IAAI,CAACuB,KAAP,CAAvB,CAAV;AAEA,aAJD,MAIO;AAENi3D,qBAAO,GAAG,IAAI9D,OAAJ,CAAa2B,MAAM,CAAEr2D,IAAI,CAACuB,KAAP,CAAnB,CAAV;AAEA;;AAEDi3D,mBAAO,CAACr1C,WAAR,GAAsB,IAAtB;AAEAq1C,mBAAO,CAAC1N,IAAR,GAAe9qD,IAAI,CAAC8qD,IAApB;AAEA,gBAAK9qD,IAAI,CAACE,IAAL,KAAcqP,SAAnB,EAA+BipD,OAAO,CAACt4D,IAAR,GAAeF,IAAI,CAACE,IAApB;AAE/B,gBAAKF,IAAI,CAAC20D,OAAL,KAAiBplD,SAAtB,EAAkCipD,OAAO,CAAC7D,OAAR,GAAkBulG,aAAa,CAAEl6J,IAAI,CAAC20D,OAAP,EAAgBwlG,eAAhB,CAA/B;AAElC,gBAAKn6J,IAAI,CAAC6c,MAAL,KAAgBtN,SAArB,EAAiCipD,OAAO,CAAC37C,MAAR,CAAe2yC,SAAf,CAA0BxvD,IAAI,CAAC6c,MAA/B;AACjC,gBAAK7c,IAAI,CAACu1D,MAAL,KAAgBhmD,SAArB,EAAiCipD,OAAO,CAACjD,MAAR,CAAe/F,SAAf,CAA0BxvD,IAAI,CAACu1D,MAA/B;AACjC,gBAAKv1D,IAAI,CAACq9C,MAAL,KAAgB9tC,SAArB,EAAiCipD,OAAO,CAACnb,MAAR,CAAemS,SAAf,CAA0BxvD,IAAI,CAACq9C,MAA/B;AACjC,gBAAKr9C,IAAI,CAACq7C,QAAL,KAAkB9rC,SAAvB,EAAmCipD,OAAO,CAACnd,QAAR,GAAmBr7C,IAAI,CAACq7C,QAAxB;;AAEnC,gBAAKr7C,IAAI,CAACkrC,IAAL,KAAc37B,SAAnB,EAA+B;AAE9BipD,qBAAO,CAAC5D,KAAR,GAAgBslG,aAAa,CAAEl6J,IAAI,CAACkrC,IAAL,CAAW,CAAX,CAAF,EAAkBkvH,gBAAlB,CAA7B;AACA5hG,qBAAO,CAAC3D,KAAR,GAAgBqlG,aAAa,CAAEl6J,IAAI,CAACkrC,IAAL,CAAW,CAAX,CAAF,EAAkBkvH,gBAAlB,CAA7B;AAEA;;AAED,gBAAKp6J,IAAI,CAACg1D,MAAL,KAAgBzlD,SAArB,EAAiCipD,OAAO,CAACxD,MAAR,GAAiBh1D,IAAI,CAACg1D,MAAtB;AACjC,gBAAKh1D,IAAI,CAAC6F,IAAL,KAAc0J,SAAnB,EAA+BipD,OAAO,CAAC3yD,IAAR,GAAe7F,IAAI,CAAC6F,IAApB;AAC/B,gBAAK7F,IAAI,CAACk1D,QAAL,KAAkB3lD,SAAvB,EAAmCipD,OAAO,CAACtD,QAAR,GAAmBl1D,IAAI,CAACk1D,QAAxB;AAEnC,gBAAKl1D,IAAI,CAAC+0D,SAAL,KAAmBxlD,SAAxB,EAAoCipD,OAAO,CAACzD,SAAR,GAAoBmlG,aAAa,CAAEl6J,IAAI,CAAC+0D,SAAP,EAAkBslG,cAAlB,CAAjC;AACpC,gBAAKr6J,IAAI,CAAC80D,SAAL,KAAmBvlD,SAAxB,EAAoCipD,OAAO,CAAC1D,SAAR,GAAoBolG,aAAa,CAAEl6J,IAAI,CAAC80D,SAAP,EAAkBulG,cAAlB,CAAjC;AACpC,gBAAKr6J,IAAI,CAACi1D,UAAL,KAAoB1lD,SAAzB,EAAqCipD,OAAO,CAACvD,UAAR,GAAqBj1D,IAAI,CAACi1D,UAA1B;AAErC,gBAAKj1D,IAAI,CAAC21D,KAAL,KAAepmD,SAApB,EAAgCipD,OAAO,CAAC7C,KAAR,GAAgB31D,IAAI,CAAC21D,KAArB;AAEhC,gBAAK31D,IAAI,CAAC01D,gBAAL,KAA0BnmD,SAA/B,EAA2CipD,OAAO,CAAC9C,gBAAR,GAA2B11D,IAAI,CAAC01D,gBAAhC;AAC3C,gBAAK11D,IAAI,CAAC41D,eAAL,KAAyBrmD,SAA9B,EAA0CipD,OAAO,CAAC5C,eAAR,GAA0B51D,IAAI,CAAC41D,eAA/B;AAE1CM,oBAAQ,CAAEl2D,IAAI,CAAC8qD,IAAP,CAAR,GAAwB0N,OAAxB;AAEA;AAED;;AAED,eAAOtC,QAAP;AAEA,OApmByE;AAsmB1EyjG,iBAAW,EAAE,qBAAW35J,IAAX,EAAiB8pE,UAAjB,EAA6BC,SAA7B,EAAyC;AAErD,YAAIl6D,MAAJ;;AAEA,iBAASyqJ,WAAT,CAAsBp6J,IAAtB,EAA6B;AAE5B,cAAK4pE,UAAU,CAAE5pE,IAAF,CAAV,KAAuBqP,SAA5B,EAAwC;AAEvCjN,mBAAO,CAAC2W,IAAR,CAAc,wCAAd,EAAwD/Y,IAAxD;AAEA;;AAED,iBAAO4pE,UAAU,CAAE5pE,IAAF,CAAjB;AAEA;;AAED,iBAASq6J,WAAT,CAAsBr6J,IAAtB,EAA6B;AAE5B,cAAKA,IAAI,KAAKqP,SAAd,EAA0B,OAAOA,SAAP;;AAE1B,cAAKqjB,KAAK,CAAC0jC,OAAN,CAAep2D,IAAf,CAAL,EAA6B;AAE5B,gBAAM69B,KAAK,GAAG,EAAd;;AAEA,iBAAM,IAAI58B,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG1L,IAAI,CAACM,MAA1B,EAAkCW,KAAC,GAAGyK,CAAtC,EAAyCzK,KAAC,EAA1C,EAAgD;AAE/C,kBAAM2pD,IAAI,GAAG5qD,IAAI,CAAEiB,KAAF,CAAjB;;AAEA,kBAAK4oE,SAAS,CAAEjf,IAAF,CAAT,KAAsBv7C,SAA3B,EAAuC;AAEtCjN,uBAAO,CAAC2W,IAAR,CAAc,wCAAd,EAAwD6xC,IAAxD;AAEA;;AAED/sB,mBAAK,CAACl8B,IAAN,CAAYkoE,SAAS,CAAEjf,IAAF,CAArB;AAEA;;AAED,mBAAO/sB,KAAP;AAEA;;AAED,cAAKgsC,SAAS,CAAE7pE,IAAF,CAAT,KAAsBqP,SAA3B,EAAuC;AAEtCjN,mBAAO,CAAC2W,IAAR,CAAc,wCAAd,EAAwD/Y,IAAxD;AAEA;;AAED,iBAAO6pE,SAAS,CAAE7pE,IAAF,CAAhB;AAEA;;AAED,YAAIuqE,QAAJ,EAAc95C,QAAd;;AAEA,gBAAS3wB,IAAI,CAAC6F,IAAd;AAEC,eAAK,OAAL;AAECgK,kBAAM,GAAG,IAAIo7D,KAAJ,EAAT;;AAEA,gBAAKjrE,IAAI,CAAC0vB,UAAL,KAAoBngB,SAAzB,EAAqC;AAEpC,kBAAKguC,MAAM,CAACE,SAAP,CAAkBz9C,IAAI,CAAC0vB,UAAvB,CAAL,EAA2C;AAE1C7f,sBAAM,CAAC6f,UAAP,GAAoB,IAAIonD,KAAJ,CAAW92E,IAAI,CAAC0vB,UAAhB,CAApB;AAEA;AAED;;AAED,gBAAK1vB,IAAI,CAACmrE,GAAL,KAAa57D,SAAlB,EAA8B;AAE7B,kBAAKvP,IAAI,CAACmrE,GAAL,CAAStlE,IAAT,KAAkB,KAAvB,EAA+B;AAE9BgK,sBAAM,CAACs7D,GAAP,GAAa,IAAIi6D,GAAJ,CAASplI,IAAI,CAACmrE,GAAL,CAASr6C,KAAlB,EAAyB9wB,IAAI,CAACmrE,GAAL,CAASjH,IAAlC,EAAwClkE,IAAI,CAACmrE,GAAL,CAAShH,GAAjD,CAAb;AAEA,eAJD,MAIO,IAAKnkE,IAAI,CAACmrE,GAAL,CAAStlE,IAAT,KAAkB,SAAvB,EAAmC;AAEzCgK,sBAAM,CAACs7D,GAAP,GAAa,IAAIg6D,OAAJ,CAAanlI,IAAI,CAACmrE,GAAL,CAASr6C,KAAtB,EAA6B9wB,IAAI,CAACmrE,GAAL,CAAS8uD,OAAtC,CAAb;AAEA;AAED;;AAED;;AAED,eAAK,mBAAL;AAECpqH,kBAAM,GAAG,IAAIuhF,iBAAJ,CAAuBpxF,IAAI,CAAC0hB,GAA5B,EAAiC1hB,IAAI,CAACqxF,MAAtC,EAA8CrxF,IAAI,CAACkkE,IAAnD,EAAyDlkE,IAAI,CAACmkE,GAA9D,CAAT;AAEA,gBAAKnkE,IAAI,CAACskB,KAAL,KAAe/U,SAApB,EAAgCM,MAAM,CAACyU,KAAP,GAAetkB,IAAI,CAACskB,KAApB;AAChC,gBAAKtkB,IAAI,CAAC6b,IAAL,KAActM,SAAnB,EAA+BM,MAAM,CAACgM,IAAP,GAAc7b,IAAI,CAAC6b,IAAnB;AAC/B,gBAAK7b,IAAI,CAACsxF,SAAL,KAAmB/hF,SAAxB,EAAoCM,MAAM,CAACyhF,SAAP,GAAmBtxF,IAAI,CAACsxF,SAAxB;AACpC,gBAAKtxF,IAAI,CAACuxF,UAAL,KAAoBhiF,SAAzB,EAAqCM,MAAM,CAAC0hF,UAAP,GAAoBvxF,IAAI,CAACuxF,UAAzB;AACrC,gBAAKvxF,IAAI,CAACmT,IAAL,KAAc5D,SAAnB,EAA+BM,MAAM,CAACsD,IAAP,GAAczQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmB3kC,IAAI,CAACmT,IAAxB,CAAd;AAE/B;;AAED,eAAK,oBAAL;AAECtD,kBAAM,GAAG,IAAIgnJ,kBAAJ,CAAwB72J,IAAI,CAAC+hB,IAA7B,EAAmC/hB,IAAI,CAAC8hB,KAAxC,EAA+C9hB,IAAI,CAACiiB,GAApD,EAAyDjiB,IAAI,CAACkiB,MAA9D,EAAsEliB,IAAI,CAACkkE,IAA3E,EAAiFlkE,IAAI,CAACmkE,GAAtF,CAAT;AAEA,gBAAKnkE,IAAI,CAAC6b,IAAL,KAActM,SAAnB,EAA+BM,MAAM,CAACgM,IAAP,GAAc7b,IAAI,CAAC6b,IAAnB;AAC/B,gBAAK7b,IAAI,CAACmT,IAAL,KAAc5D,SAAnB,EAA+BM,MAAM,CAACsD,IAAP,GAAczQ,MAAM,CAACiiC,MAAP,CAAe,EAAf,EAAmB3kC,IAAI,CAACmT,IAAxB,CAAd;AAE/B;;AAED,eAAK,cAAL;AAECtD,kBAAM,GAAG,IAAIsnJ,YAAJ,CAAkBn3J,IAAI,CAAC8wB,KAAvB,EAA8B9wB,IAAI,CAACkiH,SAAnC,CAAT;AAEA;;AAED,eAAK,kBAAL;AAECryG,kBAAM,GAAG,IAAIqnJ,gBAAJ,CAAsBl3J,IAAI,CAAC8wB,KAA3B,EAAkC9wB,IAAI,CAACkiH,SAAvC,CAAT;AAEA;;AAED,eAAK,YAAL;AAECryG,kBAAM,GAAG,IAAI+mJ,UAAJ,CAAgB52J,IAAI,CAAC8wB,KAArB,EAA4B9wB,IAAI,CAACkiH,SAAjC,EAA4CliH,IAAI,CAAC8gB,QAAjD,EAA2D9gB,IAAI,CAAC43F,KAAhE,CAAT;AAEA;;AAED,eAAK,eAAL;AAEC/nF,kBAAM,GAAG,IAAIunJ,aAAJ,CAAmBp3J,IAAI,CAAC8wB,KAAxB,EAA+B9wB,IAAI,CAACkiH,SAApC,EAA+CliH,IAAI,CAACyvB,KAApD,EAA2DzvB,IAAI,CAACwvB,MAAhE,CAAT;AAEA;;AAED,eAAK,WAAL;AAEC3f,kBAAM,GAAG,IAAI0mJ,SAAJ,CAAev2J,IAAI,CAAC8wB,KAApB,EAA2B9wB,IAAI,CAACkiH,SAAhC,EAA2CliH,IAAI,CAAC8gB,QAAhD,EAA0D9gB,IAAI,CAAC0gB,KAA/D,EAAsE1gB,IAAI,CAAC6iH,QAA3E,EAAqF7iH,IAAI,CAAC43F,KAA1F,CAAT;AAEA;;AAED,eAAK,iBAAL;AAEC/nF,kBAAM,GAAG,IAAI4lJ,eAAJ,CAAqBz1J,IAAI,CAAC8wB,KAA1B,EAAiC9wB,IAAI,CAACw4F,WAAtC,EAAmDx4F,IAAI,CAACkiH,SAAxD,CAAT;AAEA;;AAED,eAAK,YAAL;AAECryG,kBAAM,GAAG,IAAIgoJ,UAAJ,GAAiBjI,QAAjB,CAA2B5vJ,IAA3B,CAAT;AAEA;;AAED,eAAK,aAAL;AAECsC,mBAAO,CAAC2W,IAAR,CAAc,oEAAd;;AAED,eAAK,MAAL;AAECwxD,oBAAQ,GAAG6vF,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAAtB;AACA95C,oBAAQ,GAAG4pI,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAAtB;AAEA9gB,kBAAM,GAAG,IAAI+4E,IAAJ,CAAUne,QAAV,EAAoB95C,QAApB,CAAT;AAEA;;AAED,eAAK,eAAL;AAEC85C,oBAAQ,GAAG6vF,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAAtB;AACA95C,oBAAQ,GAAG4pI,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAAtB;AACA,gBAAMu5C,KAAK,GAAGlqE,IAAI,CAACkqE,KAAnB;AACA,gBAAMC,cAAc,GAAGnqE,IAAI,CAACmqE,cAA5B;AAEAt6D,kBAAM,GAAG,IAAIk5H,aAAJ,CAAmBt+D,QAAnB,EAA6B95C,QAA7B,EAAuCu5C,KAAvC,CAAT;AACAr6D,kBAAM,CAACs6D,cAAP,GAAwB,IAAIuV,eAAJ,CAAqB,IAAI+B,YAAJ,CAAkBtX,cAAc,CAACpsC,KAAjC,CAArB,EAA+D,EAA/D,CAAxB;AAEA;;AAED,eAAK,KAAL;AAECluB,kBAAM,GAAG,IAAIq3H,GAAJ,EAAT;AAEA;;AAED,eAAK,MAAL;AAECr3H,kBAAM,GAAG,IAAI+mC,IAAJ,CAAU0jH,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAArB,EAAwC8vF,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAAnD,EAAsE3wB,IAAI,CAAC4vC,IAA3E,CAAT;AAEA;;AAED,eAAK,UAAL;AAEC//B,kBAAM,GAAG,IAAI26H,QAAJ,CAAc8vB,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAAzB,EAA4C8vF,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAAvD,CAAT;AAEA;;AAED,eAAK,cAAL;AAEC9gB,kBAAM,GAAG,IAAI06H,YAAJ,CAAkB+vB,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAA7B,EAAgD8vF,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAA3D,CAAT;AAEA;;AAED,eAAK,YAAL;AACA,eAAK,QAAL;AAEC9gB,kBAAM,GAAG,IAAIg7H,MAAJ,CAAYyvB,WAAW,CAAEt6J,IAAI,CAACyqE,QAAP,CAAvB,EAA0C8vF,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAArD,CAAT;AAEA;;AAED,eAAK,QAAL;AAEC9gB,kBAAM,GAAG,IAAI82H,MAAJ,CAAY4zB,WAAW,CAAEv6J,IAAI,CAAC2wB,QAAP,CAAvB,CAAT;AAEA;;AAED,eAAK,OAAL;AAEC9gB,kBAAM,GAAG,IAAI+qC,KAAJ,EAAT;AAEA;;AAED;AAEC/qC,kBAAM,GAAG,IAAI02D,QAAJ,EAAT;AArKF;;AAyKA12D,cAAM,CAACi7C,IAAP,GAAc9qD,IAAI,CAAC8qD,IAAnB;AAEA,YAAK9qD,IAAI,CAACE,IAAL,KAAcqP,SAAnB,EAA+BM,MAAM,CAAC3P,IAAP,GAAcF,IAAI,CAACE,IAAnB;;AAE/B,YAAKF,IAAI,CAAC4hB,MAAL,KAAgBrS,SAArB,EAAiC;AAEhCM,gBAAM,CAAC+R,MAAP,CAAc4tC,SAAd,CAAyBxvD,IAAI,CAAC4hB,MAA9B;AAEA,cAAK5hB,IAAI,CAACw1D,gBAAL,KAA0BjmD,SAA/B,EAA2CM,MAAM,CAAC2lD,gBAAP,GAA0Bx1D,IAAI,CAACw1D,gBAA/B;AAC3C,cAAK3lD,MAAM,CAAC2lD,gBAAZ,EAA+B3lD,MAAM,CAAC+R,MAAP,CAAciiD,SAAd,CAAyBh0D,MAAM,CAAC8L,QAAhC,EAA0C9L,MAAM,CAACgP,UAAjD,EAA6DhP,MAAM,CAACoO,KAApE;AAE/B,SAPD,MAOO;AAEN,cAAKje,IAAI,CAAC2b,QAAL,KAAkBpM,SAAvB,EAAmCM,MAAM,CAAC8L,QAAP,CAAgB6zC,SAAhB,CAA2BxvD,IAAI,CAAC2b,QAAhC;AACnC,cAAK3b,IAAI,CAACq7C,QAAL,KAAkB9rC,SAAvB,EAAmCM,MAAM,CAACwrC,QAAP,CAAgBmU,SAAhB,CAA2BxvD,IAAI,CAACq7C,QAAhC;AACnC,cAAKr7C,IAAI,CAAC6e,UAAL,KAAoBtP,SAAzB,EAAqCM,MAAM,CAACgP,UAAP,CAAkB2wC,SAAlB,CAA6BxvD,IAAI,CAAC6e,UAAlC;AACrC,cAAK7e,IAAI,CAACie,KAAL,KAAe1O,SAApB,EAAgCM,MAAM,CAACoO,KAAP,CAAauxC,SAAb,CAAwBxvD,IAAI,CAACie,KAA7B;AAEhC;;AAED,YAAKje,IAAI,CAACmnE,UAAL,KAAoB53D,SAAzB,EAAqCM,MAAM,CAACs3D,UAAP,GAAoBnnE,IAAI,CAACmnE,UAAzB;AACrC,YAAKnnE,IAAI,CAAConE,aAAL,KAAuB73D,SAA5B,EAAwCM,MAAM,CAACu3D,aAAP,GAAuBpnE,IAAI,CAAConE,aAA5B;;AAExC,YAAKpnE,IAAI,CAACyjG,MAAV,EAAmB;AAElB,cAAKzjG,IAAI,CAACyjG,MAAL,CAAYgf,IAAZ,KAAqBlzG,SAA1B,EAAsCM,MAAM,CAAC4zF,MAAP,CAAcgf,IAAd,GAAqBziH,IAAI,CAACyjG,MAAL,CAAYgf,IAAjC;AACtC,cAAKziH,IAAI,CAACyjG,MAAL,CAAYif,UAAZ,KAA2BnzG,SAAhC,EAA4CM,MAAM,CAAC4zF,MAAP,CAAcif,UAAd,GAA2B1iH,IAAI,CAACyjG,MAAL,CAAYif,UAAvC;AAC5C,cAAK1iH,IAAI,CAACyjG,MAAL,CAAYzlF,MAAZ,KAAuBzO,SAA5B,EAAwCM,MAAM,CAAC4zF,MAAP,CAAczlF,MAAd,GAAuBhe,IAAI,CAACyjG,MAAL,CAAYzlF,MAAnC;AACxC,cAAKhe,IAAI,CAACyjG,MAAL,CAAYkf,OAAZ,KAAwBpzG,SAA7B,EAAyCM,MAAM,CAAC4zF,MAAP,CAAckf,OAAd,CAAsBnzD,SAAtB,CAAiCxvD,IAAI,CAACyjG,MAAL,CAAYkf,OAA7C;AACzC,cAAK3iH,IAAI,CAACyjG,MAAL,CAAY10E,MAAZ,KAAuBxf,SAA5B,EAAwCM,MAAM,CAAC4zF,MAAP,CAAc10E,MAAd,GAAuB,KAAK4qI,WAAL,CAAkB35J,IAAI,CAACyjG,MAAL,CAAY10E,MAA9B,CAAvB;AAExC;;AAED,YAAK/uB,IAAI,CAACknE,OAAL,KAAiB33D,SAAtB,EAAkCM,MAAM,CAACq3D,OAAP,GAAiBlnE,IAAI,CAACknE,OAAtB;AAClC,YAAKlnE,IAAI,CAACywB,aAAL,KAAuBlhB,SAA5B,EAAwCM,MAAM,CAAC4gB,aAAP,GAAuBzwB,IAAI,CAACywB,aAA5B;AACxC,YAAKzwB,IAAI,CAACqnE,WAAL,KAAqB93D,SAA1B,EAAsCM,MAAM,CAACw3D,WAAP,GAAqBrnE,IAAI,CAACqnE,WAA1B;AACtC,YAAKrnE,IAAI,CAACsnE,QAAL,KAAkB/3D,SAAvB,EAAmCM,MAAM,CAACy3D,QAAP,GAAkBtnE,IAAI,CAACsnE,QAAvB;AACnC,YAAKtnE,IAAI,CAACylE,MAAL,KAAgBl2D,SAArB,EAAiCM,MAAM,CAAC41D,MAAP,CAAcP,IAAd,GAAqBllE,IAAI,CAACylE,MAA1B;;AAEjC,YAAKzlE,IAAI,CAACiqB,QAAL,KAAkB1a,SAAvB,EAAmC;AAElC,cAAM0a,QAAQ,GAAGjqB,IAAI,CAACiqB,QAAtB;;AAEA,eAAM,IAAI9oB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG8oB,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,EAAvC,EAA6C;AAE5C0O,kBAAM,CAACuO,GAAP,CAAY,KAAKu7I,WAAL,CAAkB1vI,QAAQ,CAAE9oB,KAAF,CAA1B,EAAiC2oE,UAAjC,EAA6CC,SAA7C,CAAZ;AAEA;AAED;;AAED,YAAK/pE,IAAI,CAAC6F,IAAL,KAAc,KAAnB,EAA2B;AAE1B,cAAK7F,IAAI,CAACqrE,UAAL,KAAoB97D,SAAzB,EAAqCM,MAAM,CAACw7D,UAAP,GAAoBrrE,IAAI,CAACqrE,UAAzB;AAErC,cAAM+7D,MAAM,GAAGpnI,IAAI,CAAConI,MAApB;;AAEA,eAAM,IAAIx7H,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGw7H,MAAM,CAAC5mI,MAA5B,EAAoCoL,CAAC,EAArC,EAA2C;AAE1C,gBAAMwpB,KAAK,GAAGgyG,MAAM,CAAEx7H,CAAF,CAApB;AACA,gBAAMq9D,KAAK,GAAGp5D,MAAM,CAACk5D,mBAAP,CAA4B,MAA5B,EAAoC3zC,KAAK,CAACvlB,MAA1C,CAAd;;AAEA,gBAAKo5D,KAAK,KAAK15D,SAAf,EAA2B;AAE1BM,oBAAM,CAACw3H,QAAP,CAAiBp+D,KAAjB,EAAwB7zC,KAAK,CAACtU,QAA9B;AAEA;AAED;AAED;;AAED,eAAOjR,MAAP;AAEA;AA/4ByE,KAAlD,CAAzB;AAm5BA,QAAMsqJ,eAAe,GAAG;AACvB54G,eAAS,EAAEA,SADY;AAEvBC,2BAAqB,EAAEA,qBAFA;AAGvBC,2BAAqB,EAAEA,qBAHA;AAIvBC,sCAAgC,EAAEA,gCAJX;AAKvBC,sCAAgC,EAAEA,gCALX;AAMvBC,6BAAuB,EAAEA,uBANF;AAOvBC,6BAAuB,EAAEA;AAPF,KAAxB;AAUA,QAAMu4G,gBAAgB,GAAG;AACxBt4G,oBAAc,EAAEA,cADQ;AAExBC,yBAAmB,EAAEA,mBAFG;AAGxBC,4BAAsB,EAAEA;AAHA,KAAzB;AAMA,QAAMq4G,cAAc,GAAG;AACtBp4G,mBAAa,EAAEA,aADO;AAEtBC,gCAA0B,EAAEA,0BAFN;AAGtBE,+BAAyB,EAAEA,yBAHL;AAItBE,kBAAY,EAAEA,YAJQ;AAKtBC,+BAAyB,EAAEA,yBALL;AAMtBE,8BAAwB,EAAEA;AANJ,KAAvB;;AASA,aAAS+3G,iBAAT,CAA4BvP,OAA5B,EAAsC;AAErC,UAAK,OAAOwP,iBAAP,KAA6B,WAAlC,EAAgD;AAE/Cn4J,eAAO,CAAC2W,IAAR,CAAc,6DAAd;AAEA;;AAED,UAAK,OAAOyhJ,KAAP,KAAiB,WAAtB,EAAoC;AAEnCp4J,eAAO,CAAC2W,IAAR,CAAc,iDAAd;AAEA;;AAED+xI,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA,WAAKpyH,OAAL,GAAe;AAAE68B,wBAAgB,EAAE;AAApB,OAAf;AAEA;;AAED8kG,qBAAiB,CAACniJ,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAE/E0M,iBAAW,EAAEy1I,iBAFkE;AAI/EG,yBAAmB,EAAE,IAJ0D;AAM/EC,gBAAU,EAAE,SAASA,UAAT,CAAqB/hI,OAArB,EAA+B;AAE1C,aAAKA,OAAL,GAAeA,OAAf;AAEA,eAAO,IAAP;AAEA,OAZ8E;AAc/EkB,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAKz9H,GAAG,KAAK9c,SAAb,EAAyB8c,GAAG,GAAG,EAAN;AAEzB,YAAK,KAAK7nB,IAAL,KAAc+K,SAAnB,EAA+B8c,GAAG,GAAG,KAAK7nB,IAAL,GAAY6nB,GAAlB;AAE/BA,WAAG,GAAG,KAAK4+H,OAAL,CAAaT,UAAb,CAAyBn+H,GAAzB,CAAN;AAEA,YAAMjQ,KAAK,GAAG,IAAd;AAEA,YAAMuvI,MAAM,GAAGjC,KAAK,CAAC13I,GAAN,CAAWqa,GAAX,CAAf;;AAEA,YAAKs/H,MAAM,KAAKp8I,SAAhB,EAA4B;AAE3B6M,eAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA3kB,oBAAU,CAAE,YAAY;AAEvB,gBAAKkiJ,MAAL,EAAcA,MAAM,CAAE+B,MAAF,CAAN;AAEdvvI,iBAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,WANS,EAMP,CANO,CAAV;AAQA,iBAAOs/H,MAAP;AAEA;;AAED+O,aAAK,CAAEruI,GAAF,CAAL,CAAa7tB,IAAb,CAAmB,UAAWq8J,GAAX,EAAiB;AAEnC,iBAAOA,GAAG,CAACnlJ,IAAJ,EAAP;AAEA,SAJD,EAIIlX,IAJJ,CAIU,UAAWkX,IAAX,EAAkB;AAE3B,iBAAO+kJ,iBAAiB,CAAE/kJ,IAAF,EAAQ0G,KAAK,CAACyc,OAAd,CAAxB;AAEA,SARD,EAQIr6B,IARJ,CAQU,UAAWs8J,WAAX,EAAyB;AAElCpR,eAAK,CAACtrI,GAAN,CAAWiO,GAAX,EAAgByuI,WAAhB;AAEA,cAAKlR,MAAL,EAAcA,MAAM,CAAEkR,WAAF,CAAN;AAEd1+I,eAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,SAhBD,WAgBW,UAAW5tB,CAAX,EAAe;AAEzB,cAAKqrJ,OAAL,EAAeA,OAAO,CAAErrJ,CAAF,CAAP;AAEf2d,eAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AACAjQ,eAAK,CAAC6uI,OAAN,CAAcX,OAAd,CAAuBj+H,GAAvB;AAEA,SAvBD;AAyBAjQ,aAAK,CAAC6uI,OAAN,CAAcZ,SAAd,CAAyBh+H,GAAzB;AAEA;AArE8E,KAAlD,CAA9B;;AAyEA,aAAS0uI,SAAT,GAAqB;AAEpB,WAAKl1J,IAAL,GAAY,WAAZ;AAEA,WAAKirB,KAAL,GAAa,IAAIgmD,KAAJ,EAAb;AAEA,WAAKkkF,QAAL,GAAgB,EAAhB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AAEA;;AAEDv4J,UAAM,CAACiiC,MAAP,CAAeo2H,SAAS,CAAC1iJ,SAAzB,EAAoC;AAEnC+7I,YAAM,EAAE,gBAAWtoJ,CAAX,EAAc+W,CAAd,EAAkB;AAEzB,aAAKo4I,WAAL,GAAmB,IAAI/G,IAAJ,EAAnB;AACA,aAAK8G,QAAL,CAAcn5J,IAAd,CAAoB,KAAKo5J,WAAzB;AACA,aAAKA,WAAL,CAAiB7G,MAAjB,CAAyBtoJ,CAAzB,EAA4B+W,CAA5B;AAEA,eAAO,IAAP;AAEA,OAVkC;AAYnCwxI,YAAM,EAAE,gBAAWvoJ,CAAX,EAAc+W,CAAd,EAAkB;AAEzB,aAAKo4I,WAAL,CAAiB5G,MAAjB,CAAyBvoJ,CAAzB,EAA4B+W,CAA5B;AAEA,eAAO,IAAP;AAEA,OAlBkC;AAoBnCyxI,sBAAgB,EAAE,0BAAWC,IAAX,EAAiBC,IAAjB,EAAuB1E,EAAvB,EAA2BC,EAA3B,EAAgC;AAEjD,aAAKkL,WAAL,CAAiB3G,gBAAjB,CAAmCC,IAAnC,EAAyCC,IAAzC,EAA+C1E,EAA/C,EAAmDC,EAAnD;AAEA,eAAO,IAAP;AAEA,OA1BkC;AA4BnC0E,mBAAa,EAAE,uBAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuC/E,EAAvC,EAA2CC,EAA3C,EAAgD;AAE9D,aAAKkL,WAAL,CAAiBxG,aAAjB,CAAgCC,KAAhC,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,KAArD,EAA4D/E,EAA5D,EAAgEC,EAAhE;AAEA,eAAO,IAAP;AAEA,OAlCkC;AAoCnC+E,gBAAU,EAAE,oBAAW7f,GAAX,EAAiB;AAE5B,aAAKgmB,WAAL,CAAiBnG,UAAjB,CAA6B7f,GAA7B;AAEA,eAAO,IAAP;AAEA,OA1CkC;AA4CnCimB,cAAQ,EAAE,kBAAWC,KAAX,EAAkBC,OAAlB,EAA4B;AAErC,iBAASC,eAAT,CAA0BC,UAA1B,EAAuC;AAEtC,cAAMtxF,MAAM,GAAG,EAAf;;AAEA,eAAM,IAAI7oE,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG0vJ,UAAU,CAAC96J,MAAhC,EAAwCW,KAAC,GAAGyK,CAA5C,EAA+CzK,KAAC,EAAhD,EAAsD;AAErD,gBAAMo6J,QAAO,GAAGD,UAAU,CAAEn6J,KAAF,CAA1B;;AAEA,gBAAMq6J,SAAQ,GAAG,IAAInG,KAAJ,EAAjB;;AACAmG,qBAAQ,CAAChI,MAAT,GAAkB+H,QAAO,CAAC/H,MAA1B;AAEAxpF,kBAAM,CAACnoE,IAAP,CAAa25J,SAAb;AAEA;;AAED,iBAAOxxF,MAAP;AAEA;;AAED,iBAASyxF,oBAAT,CAA+BjkB,IAA/B,EAAqCkkB,SAArC,EAAiD;AAEhD,cAAMC,OAAO,GAAGD,SAAS,CAACl7J,MAA1B,CAFgD,CAIhD;AACA;AACA;AACA;;AACA,cAAIi0I,MAAM,GAAG,KAAb;;AACA,eAAM,IAAIxiH,CAAC,GAAG0pI,OAAO,GAAG,CAAlB,EAAqB7pH,CAAC,GAAG,CAA/B,EAAkCA,CAAC,GAAG6pH,OAAtC,EAA+C1pI,CAAC,GAAG6f,CAAC,EAApD,EAA0D;AAEzD,gBAAI8pH,SAAS,GAAGF,SAAS,CAAEzpI,CAAF,CAAzB;AACA,gBAAI4pI,UAAU,GAAGH,SAAS,CAAE5pH,CAAF,CAA1B;AAEA,gBAAIgqH,MAAM,GAAGD,UAAU,CAAC/vJ,CAAX,GAAe8vJ,SAAS,CAAC9vJ,CAAtC;AACA,gBAAIiwJ,MAAM,GAAGF,UAAU,CAACh5I,CAAX,GAAe+4I,SAAS,CAAC/4I,CAAtC;;AAEA,gBAAKnJ,IAAI,CAAC4nB,GAAL,CAAUy6H,MAAV,IAAqBx+G,MAAM,CAACC,OAAjC,EAA2C;AAE1C;AACA,kBAAKu+G,MAAM,GAAG,CAAd,EAAkB;AAEjBH,yBAAS,GAAGF,SAAS,CAAE5pH,CAAF,CAArB;AAA4BgqH,sBAAM,GAAG,CAAEA,MAAX;AAC5BD,0BAAU,GAAGH,SAAS,CAAEzpI,CAAF,CAAtB;AAA6B8pI,sBAAM,GAAG,CAAEA,MAAX;AAE7B;;AAED,kBAAOvkB,IAAI,CAAC30H,CAAL,GAAS+4I,SAAS,CAAC/4I,CAArB,IAA8B20H,IAAI,CAAC30H,CAAL,GAASg5I,UAAU,CAACh5I,CAAvD,EAA+D;;AAE/D,kBAAK20H,IAAI,CAAC30H,CAAL,KAAW+4I,SAAS,CAAC/4I,CAA1B,EAA8B;AAE7B,oBAAK20H,IAAI,CAAC1rI,CAAL,KAAW8vJ,SAAS,CAAC9vJ,CAA1B,EAA+B,OAAO,IAAP,CAFF,CAEgB;AAC7C;AAEA,eALD,MAKO;AAEN,oBAAMkwJ,QAAQ,GAAGD,MAAM,IAAKvkB,IAAI,CAAC1rI,CAAL,GAAS8vJ,SAAS,CAAC9vJ,CAAxB,CAAN,GAAoCgwJ,MAAM,IAAKtkB,IAAI,CAAC30H,CAAL,GAAS+4I,SAAS,CAAC/4I,CAAxB,CAA3D;AACA,oBAAKm5I,QAAQ,KAAK,CAAlB,EAAyB,OAAO,IAAP,CAHnB,CAGiC;;AACvC,oBAAKA,QAAQ,GAAG,CAAhB,EAAwB;AACxBvnB,sBAAM,GAAG,CAAEA,MAAX,CALM,CAKc;AAEpB;AAED,aA1BD,MA0BO;AAEN;AACA,kBAAK+C,IAAI,CAAC30H,CAAL,KAAW+4I,SAAS,CAAC/4I,CAA1B,EAAgC,SAH1B,CAGsC;AAC5C;;AACA,kBAASg5I,UAAU,CAAC/vJ,CAAX,IAAgB0rI,IAAI,CAAC1rI,CAAvB,IAAgC0rI,IAAI,CAAC1rI,CAAL,IAAU8vJ,SAAS,CAAC9vJ,CAAtD,IACC8vJ,SAAS,CAAC9vJ,CAAV,IAAe0rI,IAAI,CAAC1rI,CAAtB,IAA+B0rI,IAAI,CAAC1rI,CAAL,IAAU+vJ,UAAU,CAAC/vJ,CADxD,EACiE,OAAO,IAAP,CAN3D,CAMwE;AAC9E;AAEA;AAED;;AAED,iBAAO2oI,MAAP;AAEA;;AAED,YAAMO,WAAW,GAAGF,UAAU,CAACE,WAA/B;AAEA,YAAMgmB,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAKA,QAAQ,CAACx6J,MAAT,KAAoB,CAAzB,EAA6B,OAAO,EAAP;AAE7B,YAAK46J,OAAO,KAAK,IAAjB,EAAwB,OAAOC,eAAe,CAAEL,QAAF,CAAtB;AAGxB,YAAIiB,KAAJ;AAAA,YAAWV,OAAX;AAAA,YAAoBC,QAApB;AAAA,YAA8BxxF,MAAM,GAAG,EAAvC;;AAEA,YAAKgxF,QAAQ,CAACx6J,MAAT,KAAoB,CAAzB,EAA6B;AAE5B+6J,iBAAO,GAAGP,QAAQ,CAAE,CAAF,CAAlB;AACAQ,kBAAQ,GAAG,IAAInG,KAAJ,EAAX;AACAmG,kBAAQ,CAAChI,MAAT,GAAkB+H,OAAO,CAAC/H,MAA1B;AACAxpF,gBAAM,CAACnoE,IAAP,CAAa25J,QAAb;AACA,iBAAOxxF,MAAP;AAEA;;AAED,YAAIkyF,UAAU,GAAG,CAAElnB,WAAW,CAAEgmB,QAAQ,CAAE,CAAF,CAAR,CAAc3M,SAAd,EAAF,CAA9B;AACA6N,kBAAU,GAAGf,KAAK,GAAG,CAAEe,UAAL,GAAkBA,UAApC,CAtGqC,CAwGrC;;AAEA,YAAMC,gBAAgB,GAAG,EAAzB;AACA,YAAMC,SAAS,GAAG,EAAlB;AACA,YAAIC,aAAa,GAAG,EAApB;AACA,YAAIC,OAAO,GAAG,CAAd;AACA,YAAIC,SAAJ;AAEAH,iBAAS,CAAEE,OAAF,CAAT,GAAuB/sJ,SAAvB;AACA8sJ,qBAAa,CAAEC,OAAF,CAAb,GAA2B,EAA3B;;AAEA,aAAM,IAAIn7J,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGovJ,QAAQ,CAACx6J,MAA9B,EAAsCW,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnDo6J,iBAAO,GAAGP,QAAQ,CAAE75J,KAAF,CAAlB;AACAo7J,mBAAS,GAAGhB,OAAO,CAAClN,SAAR,EAAZ;AACA4N,eAAK,GAAGjnB,WAAW,CAAEunB,SAAF,CAAnB;AACAN,eAAK,GAAGd,KAAK,GAAG,CAAEc,KAAL,GAAaA,KAA1B;;AAEA,cAAKA,KAAL,EAAa;AAEZ,gBAAO,CAAEC,UAAJ,IAAsBE,SAAS,CAAEE,OAAF,CAApC,EAAoDA,OAAO;AAE3DF,qBAAS,CAAEE,OAAF,CAAT,GAAuB;AAAE7qI,eAAC,EAAE,IAAI4jI,KAAJ,EAAL;AAAkBpjI,eAAC,EAAEsqI;AAArB,aAAvB;AACAH,qBAAS,CAAEE,OAAF,CAAT,CAAqB7qI,CAArB,CAAuB+hI,MAAvB,GAAgC+H,OAAO,CAAC/H,MAAxC;AAEA,gBAAK0I,UAAL,EAAkBI,OAAO;AACzBD,yBAAa,CAAEC,OAAF,CAAb,GAA2B,EAA3B,CARY,CAUZ;AAEA,WAZD,MAYO;AAEND,yBAAa,CAAEC,OAAF,CAAb,CAAyBz6J,IAAzB,CAA+B;AAAEilB,eAAC,EAAEy0I,OAAL;AAActpI,eAAC,EAAEsqI,SAAS,CAAE,CAAF;AAA1B,aAA/B,EAFM,CAIN;AAEA;AAED,SA9IoC,CAgJrC;;;AACA,YAAK,CAAEH,SAAS,CAAE,CAAF,CAAhB,EAAwB,OAAOf,eAAe,CAAEL,QAAF,CAAtB;;AAGxB,YAAKoB,SAAS,CAAC57J,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,cAAIg8J,SAAS,GAAG,KAAhB;AACA,cAAMC,QAAQ,GAAG,EAAjB;;AAEA,eAAM,IAAIC,IAAI,GAAG,CAAX,EAAcC,IAAI,GAAGP,SAAS,CAAC57J,MAArC,EAA6Ck8J,IAAI,GAAGC,IAApD,EAA0DD,IAAI,EAA9D,EAAoE;AAEnEP,4BAAgB,CAAEO,IAAF,CAAhB,GAA2B,EAA3B;AAEA;;AAED,eAAM,IAAIA,KAAI,GAAG,CAAX,EAAcC,KAAI,GAAGP,SAAS,CAAC57J,MAArC,EAA6Ck8J,KAAI,GAAGC,KAApD,EAA0DD,KAAI,EAA9D,EAAoE;AAEnE,gBAAME,GAAG,GAAGP,aAAa,CAAEK,KAAF,CAAzB;;AAEA,iBAAM,IAAIG,IAAI,GAAG,CAAjB,EAAoBA,IAAI,GAAGD,GAAG,CAACp8J,MAA/B,EAAuCq8J,IAAI,EAA3C,EAAiD;AAEhD,kBAAMC,EAAE,GAAGF,GAAG,CAAEC,IAAF,CAAd;AACA,kBAAIE,eAAe,GAAG,IAAtB;;AAEA,mBAAM,IAAIC,KAAK,GAAG,CAAlB,EAAqBA,KAAK,GAAGZ,SAAS,CAAC57J,MAAvC,EAA+Cw8J,KAAK,EAApD,EAA0D;AAEzD,oBAAKvB,oBAAoB,CAAEqB,EAAE,CAAC7qI,CAAL,EAAQmqI,SAAS,CAAEY,KAAF,CAAT,CAAmB/qI,CAA3B,CAAzB,EAA0D;AAEzD,sBAAKyqI,KAAI,KAAKM,KAAd,EAAsBP,QAAQ,CAAC56J,IAAT,CAAe;AAAEo7J,yBAAK,EAAEP,KAAT;AAAeQ,uBAAG,EAAEF,KAApB;AAA2BlqB,wBAAI,EAAE+pB;AAAjC,mBAAf;;AACtB,sBAAKE,eAAL,EAAuB;AAEtBA,mCAAe,GAAG,KAAlB;AACAZ,oCAAgB,CAAEa,KAAF,CAAhB,CAA0Bn7J,IAA1B,CAAgCi7J,EAAhC;AAEA,mBALD,MAKO;AAENN,6BAAS,GAAG,IAAZ;AAEA;AAED;AAED;;AAED,kBAAKO,eAAL,EAAuB;AAEtBZ,gCAAgB,CAAEO,KAAF,CAAhB,CAAyB76J,IAAzB,CAA+Bi7J,EAA/B;AAEA;AAED;AAED,WAhD0B,CAiD3B;;;AAEA,cAAKL,QAAQ,CAACj8J,MAAT,GAAkB,CAAvB,EAA2B;AAE1B;AACA,gBAAK,CAAEg8J,SAAP,EAAmBH,aAAa,GAAGF,gBAAhB;AAEnB;AAED;;AAED,YAAIgB,QAAJ;;AAEA,aAAM,IAAIh8J,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAGovF,SAAS,CAAC57J,MAAhC,EAAwCW,KAAC,GAAG6rE,EAA5C,EAAgD7rE,KAAC,EAAjD,EAAuD;AAEtDq6J,kBAAQ,GAAGY,SAAS,CAAEj7J,KAAF,CAAT,CAAeswB,CAA1B;AACAu4C,gBAAM,CAACnoE,IAAP,CAAa25J,QAAb;AACA2B,kBAAQ,GAAGd,aAAa,CAAEl7J,KAAF,CAAxB;;AAEA,eAAM,IAAIM,CAAC,GAAG,CAAR,EAAWikF,EAAE,GAAGy3E,QAAQ,CAAC38J,MAA/B,EAAuCiB,CAAC,GAAGikF,EAA3C,EAA+CjkF,CAAC,EAAhD,EAAsD;AAErD+5J,oBAAQ,CAACrmB,KAAT,CAAetzI,IAAf,CAAqBs7J,QAAQ,CAAE17J,CAAF,CAAR,CAAcqlB,CAAnC;AAEA;AAED,SA9NoC,CAgOrC;;;AAEA,eAAOkjD,MAAP;AAEA;AAhRkC,KAApC;;AAoRA,aAASozF,IAAT,CAAep9J,IAAf,EAAsB;AAErB,WAAK6F,IAAL,GAAY,MAAZ;AAEA,WAAK7F,IAAL,GAAYA,IAAZ;AAEA;;AAED0C,UAAM,CAACiiC,MAAP,CAAey4H,IAAI,CAAC/kJ,SAApB,EAA+B;AAE9BgjI,YAAM,EAAE,IAFsB;AAI9BC,oBAAc,EAAE,wBAAW9tI,IAAX,EAAiByJ,IAAjB,EAAwB;AAEvC,YAAKA,IAAI,KAAK1H,SAAd,EAA0B0H,IAAI,GAAG,GAAP;AAE1B,YAAM+yD,MAAM,GAAG,EAAf;AACA,YAAMqzF,KAAK,GAAGC,WAAW,CAAE9vJ,IAAF,EAAQyJ,IAAR,EAAc,KAAKjX,IAAnB,CAAzB;;AAEA,aAAM,IAAIiyB,CAAC,GAAG,CAAR,EAAW+sF,EAAE,GAAGq+C,KAAK,CAAC78J,MAA5B,EAAoCyxB,CAAC,GAAG+sF,EAAxC,EAA4C/sF,CAAC,EAA7C,EAAmD;AAElDW,eAAK,CAACva,SAAN,CAAgBxW,IAAhB,CAAqB2U,KAArB,CAA4BwzD,MAA5B,EAAoCqzF,KAAK,CAAEprI,CAAF,CAAL,CAAWipI,QAAX,EAApC;AAEA;;AAED,eAAOlxF,MAAP;AAEA;AAnB6B,KAA/B;;AAuBA,aAASszF,WAAT,CAAsB9vJ,IAAtB,EAA4ByJ,IAA5B,EAAkCjX,IAAlC,EAAyC;AAExC,UAAMu9J,KAAK,GAAG3qI,KAAK,CAACgI,IAAN,GAAahI,KAAK,CAACgI,IAAN,CAAYptB,IAAZ,CAAb,GAAkCgoB,MAAM,CAAEhoB,IAAF,CAAN,CAAeU,KAAf,CAAsB,EAAtB,CAAhD,CAFwC,CAEoC;;AAC5E,UAAM+P,KAAK,GAAGhH,IAAI,GAAGjX,IAAI,CAAC6kH,UAA1B;AACA,UAAM24C,WAAW,GAAG,CAAEx9J,IAAI,CAAC2tE,WAAL,CAAiB8vF,IAAjB,GAAwBz9J,IAAI,CAAC2tE,WAAL,CAAiB+vF,IAAzC,GAAgD19J,IAAI,CAAC29J,kBAAvD,IAA8E1/I,KAAlG;AAEA,UAAMo/I,KAAK,GAAG,EAAd;AAEA,UAAI/iH,OAAO,GAAG,CAAd;AAAA,UAAiBE,OAAO,GAAG,CAA3B;;AAEA,WAAM,IAAIr5C,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGo8J,KAAK,CAAC/8J,MAA3B,EAAmCW,KAAC,EAApC,EAA0C;AAEzC,YAAMy8J,KAAI,GAAGL,KAAK,CAAEp8J,KAAF,CAAlB;;AAEA,YAAKy8J,KAAI,KAAK,IAAd,EAAqB;AAEpBtjH,iBAAO,GAAG,CAAV;AACAE,iBAAO,IAAIgjH,WAAX;AAEA,SALD,MAKO;AAEN,cAAMK,GAAG,GAAGC,UAAU,CAAEF,KAAF,EAAQ3/I,KAAR,EAAeq8B,OAAf,EAAwBE,OAAxB,EAAiCx6C,IAAjC,CAAtB;AACAs6C,iBAAO,IAAIujH,GAAG,CAACvjH,OAAf;AACA+iH,eAAK,CAACx7J,IAAN,CAAYg8J,GAAG,CAACr5J,IAAhB;AAEA;AAED;;AAED,aAAO64J,KAAP;AAEA;;AAED,aAASS,UAAT,CAAqBF,MAArB,EAA2B3/I,KAA3B,EAAkCq8B,OAAlC,EAA2CE,OAA3C,EAAoDx6C,IAApD,EAA2D;AAE1D,UAAM+9J,KAAK,GAAG/9J,IAAI,CAACg+J,MAAL,CAAaJ,MAAb,KAAuB59J,IAAI,CAACg+J,MAAL,CAAa,GAAb,CAArC;;AAEA,UAAK,CAAED,KAAP,EAAe;AAEdz7J,eAAO,CAACD,KAAR,CAAe,4BAA4Bu7J,MAA5B,GAAmC,mCAAnC,GAAyE59J,IAAI,CAACi+J,UAA9E,GAA2F,GAA1G;AAEA;AAEA;;AAED,UAAMz5J,IAAI,GAAG,IAAIu2J,SAAJ,EAAb;AAEA,UAAIjvJ,CAAJ,EAAO+W,CAAP,EAAUq7I,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,IAAtC;;AAEA,UAAKR,KAAK,CAACrsI,CAAX,EAAe;AAEd,YAAM6mB,OAAO,GAAGwlH,KAAK,CAACS,cAAN,KAA0BT,KAAK,CAACS,cAAN,GAAuBT,KAAK,CAACrsI,CAAN,CAAQxjB,KAAR,CAAe,GAAf,CAAjD,CAAhB;;AAEA,aAAM,IAAI/M,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG2sC,OAAO,CAAC/3C,MAA7B,EAAqCW,KAAC,GAAGyK,CAAzC,GAA8C;AAE7C,cAAM6yJ,MAAM,GAAGlmH,OAAO,CAAEp3C,KAAC,EAAH,CAAtB;;AAEA,kBAASs9J,MAAT;AAEC,iBAAK,GAAL;AAAU;AAET3yJ,eAAC,GAAGysC,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAA9B;AACAz3B,eAAC,GAAG01B,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAA9B;AAEAh2C,kBAAI,CAAC4vJ,MAAL,CAAatoJ,CAAb,EAAgB+W,CAAhB;AAEA;;AAED,iBAAK,GAAL;AAAU;AAET/W,eAAC,GAAGysC,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAA9B;AACAz3B,eAAC,GAAG01B,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAA9B;AAEAh2C,kBAAI,CAAC6vJ,MAAL,CAAavoJ,CAAb,EAAgB+W,CAAhB;AAEA;;AAED,iBAAK,GAAL;AAAU;AAETq7I,iBAAG,GAAG3lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAAhC;AACA6jH,iBAAG,GAAG5lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAAhC;AACA4jH,kBAAI,GAAG7lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAAjC;AACA+jH,kBAAI,GAAG9lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAAjC;AAEAh2C,kBAAI,CAAC8vJ,gBAAL,CAAuB8J,IAAvB,EAA6BC,IAA7B,EAAmCH,GAAnC,EAAwCC,GAAxC;AAEA;;AAED,iBAAK,GAAL;AAAU;AAETD,iBAAG,GAAG3lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAAhC;AACA6jH,iBAAG,GAAG5lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAAhC;AACA4jH,kBAAI,GAAG7lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAAjC;AACA+jH,kBAAI,GAAG9lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAAjC;AACA8jH,kBAAI,GAAG/lH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bq8B,OAAjC;AACAikH,kBAAI,GAAGhmH,OAAO,CAAEp3C,KAAC,EAAH,CAAP,GAAkB8c,KAAlB,GAA0Bu8B,OAAjC;AAEAh2C,kBAAI,CAACiwJ,aAAL,CAAoB2J,IAApB,EAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4CL,GAA5C,EAAiDC,GAAjD;AAEA;AA1CF;AA8CA;AAED;;AAED,aAAO;AAAE7jH,eAAO,EAAEyjH,KAAK,CAACW,EAAN,GAAWzgJ,KAAtB;AAA6BzZ,YAAI,EAAEA;AAAnC,OAAP;AAEA;;AAED,aAASm6J,UAAT,CAAqB1T,OAArB,EAA+B;AAE9BD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED0T,cAAU,CAACtmJ,SAAX,GAAuB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAExE0M,iBAAW,EAAE45I,UAF2D;AAIxE5kI,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMwuI,MAAM,GAAG,IAAIc,UAAJ,CAAgB,KAAKT,OAArB,CAAf;AACAL,cAAM,CAACU,OAAP,CAAgB,KAAK9mJ,IAArB;AACAomJ,cAAM,CAACY,gBAAP,CAAyB,KAAKJ,aAA9B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW7e,IAAX,EAAkB;AAEnC,cAAIi4I,IAAJ;;AAEA,cAAI;AAEHA,gBAAI,GAAG/+H,IAAI,CAACC,KAAL,CAAYnZ,IAAZ,CAAP;AAEA,WAJD,CAIE,OAAQ/O,CAAR,EAAY;AAEb6D,mBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACAwsI,gBAAI,GAAG/+H,IAAI,CAACC,KAAL,CAAYnZ,IAAI,CAAC0tB,SAAL,CAAgB,EAAhB,EAAoB1tB,IAAI,CAAChN,MAAL,GAAc,CAAlC,CAAZ,CAAP;AAEA;;AAED,cAAM46I,IAAI,GAAGh/H,KAAK,CAACuK,KAAN,CAAa8+H,IAAb,CAAb;AAEA,cAAKmE,MAAL,EAAcA,MAAM,CAAExO,IAAF,CAAN;AAEd,SAnBD,EAmBGyO,UAnBH,EAmBeC,OAnBf;AAqBA,OAhCuE;AAkCxEnjI,WAAK,EAAE,eAAW8+H,IAAX,EAAkB;AAExB,eAAO,IAAI2X,IAAJ,CAAU3X,IAAV,CAAP;AAEA;AAtCuE,KAAlD,CAAvB;;AA0CA,QAAI1pB,QAAJ;;AAEA,QAAM6iC,YAAY,GAAG;AAEpBvqG,gBAAU,EAAE,sBAAY;AAEvB,YAAK0nE,QAAQ,KAAKxsH,SAAlB,EAA8B;AAE7BwsH,kBAAQ,GAAG,KAAM5lH,MAAM,CAACyoJ,YAAP,IAAuBzoJ,MAAM,CAAC0oJ,kBAApC,GAAX;AAEA;;AAED,eAAO9iC,QAAP;AAEA,OAZmB;AAcpB7iC,gBAAU,EAAE,oBAAWjuF,KAAX,EAAmB;AAE9B8wH,gBAAQ,GAAG9wH,KAAX;AAEA;AAlBmB,KAArB;;AAsBA,aAAS6zJ,WAAT,CAAsB7T,OAAtB,EAAgC;AAE/BD,YAAM,CAACx1I,IAAP,CAAa,IAAb,EAAmBy1I,OAAnB;AAEA;;AAED6T,eAAW,CAACzmJ,SAAZ,GAAwB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeq0I,MAAM,CAAC3yI,SAAtB,CAAf,EAAkD;AAEzE0M,iBAAW,EAAE+5I,WAF4D;AAIzE/kI,UAAI,EAAE,cAAW1N,GAAX,EAAgBu9H,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,YAAM1tI,KAAK,GAAG,IAAd;AAEA,YAAMwuI,MAAM,GAAG,IAAIc,UAAJ,CAAgBtvI,KAAK,CAAC6uI,OAAtB,CAAf;AACAL,cAAM,CAACgC,eAAP,CAAwB,aAAxB;AACAhC,cAAM,CAACU,OAAP,CAAgBlvI,KAAK,CAAC5X,IAAtB;AACAomJ,cAAM,CAACY,gBAAP,CAAyBpvI,KAAK,CAACgvI,aAA/B;AACAR,cAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkB,UAAW6S,MAAX,EAAoB;AAErC,cAAI;AAEH;AACA;AACA,gBAAM6/H,UAAU,GAAG7/H,MAAM,CAACt/B,KAAP,CAAc,CAAd,CAAnB;AAEA,gBAAMw0D,OAAO,GAAGwqG,YAAY,CAACvqG,UAAb,EAAhB;AACAD,mBAAO,CAAC4qG,eAAR,CAAyBD,UAAzB,EAAqC,UAAWE,WAAX,EAAyB;AAE7DrV,oBAAM,CAAEqV,WAAF,CAAN;AAEA,aAJD;AAMA,WAbD,CAaE,OAAQxgK,CAAR,EAAY;AAEb,gBAAKqrJ,OAAL,EAAe;AAEdA,qBAAO,CAAErrJ,CAAF,CAAP;AAEA,aAJD,MAIO;AAEN6D,qBAAO,CAACD,KAAR,CAAe5D,CAAf;AAEA;;AAED2d,iBAAK,CAAC6uI,OAAN,CAAcV,SAAd,CAAyBl+H,GAAzB;AAEA;AAED,SA/BD,EA+BGw9H,UA/BH,EA+BeC,OA/Bf;AAiCA;AA7CwE,KAAlD,CAAxB;;AAiDA,aAASoV,oBAAT,CAA+B3mE,QAA/B,EAAyCC,WAAzC,EAAsD0pB,SAAtD,EAAkE;AAEjE21C,gBAAU,CAACriJ,IAAX,CAAiB,IAAjB,EAAuBjG,SAAvB,EAAkC2yG,SAAlC;AAEA,UAAMnpC,MAAM,GAAG,IAAIjC,KAAJ,GAAYt4D,GAAZ,CAAiB+5E,QAAjB,CAAf;AACA,UAAMvf,MAAM,GAAG,IAAIlC,KAAJ,GAAYt4D,GAAZ,CAAiBg6E,WAAjB,CAAf;AAEA,UAAM2mE,GAAG,GAAG,IAAIliG,OAAJ,CAAa8b,MAAM,CAACnnD,CAApB,EAAuBmnD,MAAM,CAAChjD,CAA9B,EAAiCgjD,MAAM,CAACp4E,CAAxC,CAAZ;AACA,UAAMy+J,MAAM,GAAG,IAAIniG,OAAJ,CAAa+b,MAAM,CAACpnD,CAApB,EAAuBonD,MAAM,CAACjjD,CAA9B,EAAiCijD,MAAM,CAACr4E,CAAxC,CAAf,CARiE,CAUjE;;AACA,UAAMmwJ,EAAE,GAAGp3I,IAAI,CAACmK,IAAL,CAAWnK,IAAI,CAACC,EAAhB,CAAX;AACA,UAAMshD,EAAE,GAAG61F,EAAE,GAAGp3I,IAAI,CAACmK,IAAL,CAAW,IAAX,CAAhB;AAEA,WAAKw+F,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0BjmG,IAA1B,CAAgC8iJ,GAAhC,EAAsC/gJ,GAAtC,CAA2CghJ,MAA3C,EAAoD7gJ,cAApD,CAAoEuyI,EAApE;AACA,WAAKzuC,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0BjmG,IAA1B,CAAgC8iJ,GAAhC,EAAsC7hJ,GAAtC,CAA2C8hJ,MAA3C,EAAoD7gJ,cAApD,CAAoE08C,EAApE;AAEA;;AAEDikG,wBAAoB,CAAC7mJ,SAArB,GAAiC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAekhJ,UAAU,CAACx/I,SAA1B,CAAf,EAAsD;AAEtF0M,iBAAW,EAAEm6I,oBAFyE;AAItFG,4BAAsB,EAAE,IAJ8D;AAMtFhjJ,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAAE;AAE3B+5G,kBAAU,CAACx/I,SAAX,CAAqBgE,IAArB,CAA0B7G,IAA1B,CAAgC,IAAhC,EAAsCsoC,MAAtC;AAEA,eAAO,IAAP;AAEA,OAZqF;AActFkY,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAG63J,UAAU,CAACx/I,SAAX,CAAqB29C,MAArB,CAA4BxgD,IAA5B,CAAkC,IAAlC,EAAwCof,IAAxC,CAAb,CAFyB,CAIzB;;AAEA,eAAO50B,IAAP;AAEA;AAtBqF,KAAtD,CAAjC;;AA0BA,aAASs/J,iBAAT,CAA4BxuI,KAA5B,EAAmCoxF,SAAnC,EAA+C;AAE9C21C,gBAAU,CAACriJ,IAAX,CAAiB,IAAjB,EAAuBjG,SAAvB,EAAkC2yG,SAAlC;AAEA,UAAMnpC,MAAM,GAAG,IAAIjC,KAAJ,GAAYt4D,GAAZ,CAAiBsS,KAAjB,CAAf,CAJ8C,CAM9C;;AACA,WAAKuxF,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0B9jG,GAA1B,CAA+Bu6D,MAAM,CAACnnD,CAAtC,EAAyCmnD,MAAM,CAAChjD,CAAhD,EAAmDgjD,MAAM,CAACp4E,CAA1D,EAA8D4d,cAA9D,CAA8E,IAAI7E,IAAI,CAACmK,IAAL,CAAWnK,IAAI,CAACC,EAAhB,CAAlF;AAEA;;AAED2lJ,qBAAiB,CAACjnJ,SAAlB,GAA8B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAekhJ,UAAU,CAACx/I,SAA1B,CAAf,EAAsD;AAEnF0M,iBAAW,EAAEu6I,iBAFsE;AAInFC,yBAAmB,EAAE,IAJ8D;AAMnFljJ,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAAE;AAE3B+5G,kBAAU,CAACx/I,SAAX,CAAqBgE,IAArB,CAA0B7G,IAA1B,CAAgC,IAAhC,EAAsCsoC,MAAtC;AAEA,eAAO,IAAP;AAEA,OAZkF;AAcnFkY,YAAM,EAAE,gBAAWphC,IAAX,EAAkB;AAEzB,YAAM50B,IAAI,GAAG63J,UAAU,CAACx/I,SAAX,CAAqB29C,MAArB,CAA4BxgD,IAA5B,CAAkC,IAAlC,EAAwCof,IAAxC,CAAb,CAFyB,CAIzB;;AAEA,eAAO50B,IAAP;AAEA;AAtBkF,KAAtD,CAA9B;;AA0BA,QAAMw/J,SAAS,GAAG,IAAI3/F,OAAJ,EAAlB;;AACA,QAAM4/F,QAAQ,GAAG,IAAI5/F,OAAJ,EAAjB;;AAEA,aAAS6/F,YAAT,GAAwB;AAEvB,WAAK75J,IAAL,GAAY,cAAZ;AAEA,WAAKwrF,MAAL,GAAc,CAAd;AAEA,WAAKsuE,MAAL,GAAc,KAAd;AAEA,WAAKtpC,OAAL,GAAe,IAAIjlC,iBAAJ,EAAf;AACA,WAAKilC,OAAL,CAAa5wD,MAAb,CAAoBL,MAApB,CAA4B,CAA5B;AACA,WAAKixD,OAAL,CAAa7gE,gBAAb,GAAgC,KAAhC;AAEA,WAAK8gE,OAAL,GAAe,IAAIllC,iBAAJ,EAAf;AACA,WAAKklC,OAAL,CAAa7wD,MAAb,CAAoBL,MAApB,CAA4B,CAA5B;AACA,WAAKkxD,OAAL,CAAa9gE,gBAAb,GAAgC,KAAhC;AAEA,WAAKoqG,MAAL,GAAc;AACbt7I,aAAK,EAAE,IADM;AAEb5C,WAAG,EAAE,IAFQ;AAGb2vE,cAAM,EAAE,IAHK;AAIbntB,YAAI,EAAE,IAJO;AAKbC,WAAG,EAAE,IALQ;AAMbtoD,YAAI,EAAE,IANO;AAOb8jJ,cAAM,EAAE;AAPK,OAAd;AAUA;;AAEDj9J,UAAM,CAACiiC,MAAP,CAAe+6H,YAAY,CAACrnJ,SAA5B,EAAuC;AAEtCoE,YAAM,EAAE,gBAAWsS,MAAX,EAAoB;AAE3B,YAAM87C,KAAK,GAAG,KAAK+0F,MAAnB;AAEA,YAAMz8I,WAAW,GAAG0nD,KAAK,CAACvmD,KAAN,KAAgByK,MAAM,CAACzK,KAAvB,IAAgCumD,KAAK,CAACnpD,GAAN,KAAcqN,MAAM,CAACrN,GAArD,IACnBmpD,KAAK,CAACwmB,MAAN,KAAiBtiE,MAAM,CAACsiE,MAAP,GAAgB,KAAKA,MADnB,IAC6BxmB,KAAK,CAAC3G,IAAN,KAAen1C,MAAM,CAACm1C,IADnD,IAEnB2G,KAAK,CAAC1G,GAAN,KAAcp1C,MAAM,CAACo1C,GAFF,IAES0G,KAAK,CAAChvD,IAAN,KAAekT,MAAM,CAAClT,IAF/B,IAEuCgvD,KAAK,CAAC80F,MAAN,KAAiB,KAAKA,MAFjF;;AAIA,YAAKx8I,WAAL,EAAmB;AAElB0nD,eAAK,CAACvmD,KAAN,GAAcyK,MAAM,CAACzK,KAArB;AACAumD,eAAK,CAACnpD,GAAN,GAAYqN,MAAM,CAACrN,GAAnB;AACAmpD,eAAK,CAACwmB,MAAN,GAAetiE,MAAM,CAACsiE,MAAP,GAAgB,KAAKA,MAApC;AACAxmB,eAAK,CAAC3G,IAAN,GAAan1C,MAAM,CAACm1C,IAApB;AACA2G,eAAK,CAAC1G,GAAN,GAAYp1C,MAAM,CAACo1C,GAAnB;AACA0G,eAAK,CAAChvD,IAAN,GAAakT,MAAM,CAAClT,IAApB;AACAgvD,eAAK,CAAC80F,MAAN,GAAe,KAAKA,MAApB,CARkB,CAUlB;AACA;;AAEA,cAAMzhG,gBAAgB,GAAGnvC,MAAM,CAACmvC,gBAAP,CAAwBziD,KAAxB,EAAzB;AACA,cAAMokJ,UAAU,GAAGh1F,KAAK,CAAC80F,MAAN,GAAe,CAAlC;AACA,cAAMG,kBAAkB,GAAGD,UAAU,GAAGh1F,KAAK,CAAC3G,IAAnB,GAA0B2G,KAAK,CAACvmD,KAA3D;AACA,cAAMy7I,IAAI,GAAKl1F,KAAK,CAAC3G,IAAN,GAAaxqD,IAAI,CAAC+H,GAAL,CAAU6oC,SAAS,CAACC,OAAV,GAAoBsgB,KAAK,CAACnpD,GAA1B,GAAgC,GAA1C,CAAf,GAAmEmpD,KAAK,CAAChvD,IAAtF;AACA,cAAImkJ,IAAJ,EAAUC,IAAV,CAjBkB,CAmBlB;;AAEAR,kBAAQ,CAACtxG,QAAT,CAAmB,EAAnB,IAA0B,CAAE0xG,UAA5B;AACAL,mBAAS,CAACrxG,QAAV,CAAoB,EAApB,IAA2B0xG,UAA3B,CAtBkB,CAwBlB;;AAEAG,cAAI,GAAG,CAAED,IAAF,GAASl1F,KAAK,CAACwmB,MAAf,GAAwByuE,kBAA/B;AACAG,cAAI,GAAGF,IAAI,GAAGl1F,KAAK,CAACwmB,MAAb,GAAsByuE,kBAA7B;AAEA5hG,0BAAgB,CAAC/P,QAAjB,CAA2B,CAA3B,IAAiC,IAAI0c,KAAK,CAAC3G,IAAV,IAAmB+7F,IAAI,GAAGD,IAA1B,CAAjC;AACA9hG,0BAAgB,CAAC/P,QAAjB,CAA2B,CAA3B,IAAiC,CAAE8xG,IAAI,GAAGD,IAAT,KAAoBC,IAAI,GAAGD,IAA3B,CAAjC;AAEA,eAAK3pC,OAAL,CAAan4D,gBAAb,CAA8B7hD,IAA9B,CAAoC6hD,gBAApC,EAhCkB,CAkClB;;AAEA8hG,cAAI,GAAG,CAAED,IAAF,GAASl1F,KAAK,CAACwmB,MAAf,GAAwByuE,kBAA/B;AACAG,cAAI,GAAGF,IAAI,GAAGl1F,KAAK,CAACwmB,MAAb,GAAsByuE,kBAA7B;AAEA5hG,0BAAgB,CAAC/P,QAAjB,CAA2B,CAA3B,IAAiC,IAAI0c,KAAK,CAAC3G,IAAV,IAAmB+7F,IAAI,GAAGD,IAA1B,CAAjC;AACA9hG,0BAAgB,CAAC/P,QAAjB,CAA2B,CAA3B,IAAiC,CAAE8xG,IAAI,GAAGD,IAAT,KAAoBC,IAAI,GAAGD,IAA3B,CAAjC;AAEA,eAAK1pC,OAAL,CAAap4D,gBAAb,CAA8B7hD,IAA9B,CAAoC6hD,gBAApC;AAEA;;AAED,aAAKm4D,OAAL,CAAah4D,WAAb,CAAyBhiD,IAAzB,CAA+B0S,MAAM,CAACsvC,WAAtC,EAAoDtQ,QAApD,CAA8D0xG,QAA9D;AACA,aAAKnpC,OAAL,CAAaj4D,WAAb,CAAyBhiD,IAAzB,CAA+B0S,MAAM,CAACsvC,WAAtC,EAAoDtQ,QAApD,CAA8DyxG,SAA9D;AAEA;AA3DqC,KAAvC;;AA+DA,aAASU,KAAT,CAAgBC,SAAhB,EAA4B;AAE3B,WAAKA,SAAL,GAAmBA,SAAS,KAAK5wJ,SAAhB,GAA8B4wJ,SAA9B,GAA0C,IAA3D;AAEA,WAAK1nH,SAAL,GAAiB,CAAjB;AACA,WAAK2nH,OAAL,GAAe,CAAf;AACA,WAAKC,WAAL,GAAmB,CAAnB;AAEA,WAAKC,OAAL,GAAe,KAAf;AAEA;;AAED59J,UAAM,CAACiiC,MAAP,CAAeu7H,KAAK,CAAC7nJ,SAArB,EAAgC;AAE/Bu7D,WAAK,EAAE,iBAAY;AAElB,aAAKn7B,SAAL,GAAiB,CAAE,OAAOY,WAAP,KAAuB,WAAvB,GAAqCt4C,IAArC,GAA4Cs4C,WAA9C,EAA4DC,GAA5D,EAAjB,CAFkB,CAEkE;;AAEpF,aAAK8mH,OAAL,GAAe,KAAK3nH,SAApB;AACA,aAAK4nH,WAAL,GAAmB,CAAnB;AACA,aAAKC,OAAL,GAAe,IAAf;AAEA,OAV8B;AAY/Bv4J,UAAI,EAAE,gBAAY;AAEjB,aAAKw4J,cAAL;AACA,aAAKD,OAAL,GAAe,KAAf;AACA,aAAKH,SAAL,GAAiB,KAAjB;AAEA,OAlB8B;AAoB/BI,oBAAc,EAAE,0BAAY;AAE3B,aAAKC,QAAL;AACA,eAAO,KAAKH,WAAZ;AAEA,OAzB8B;AA2B/BG,cAAQ,EAAE,oBAAY;AAErB,YAAI1zE,IAAI,GAAG,CAAX;;AAEA,YAAK,KAAKqzE,SAAL,IAAkB,CAAE,KAAKG,OAA9B,EAAwC;AAEvC,eAAK1sF,KAAL;AACA,iBAAO,CAAP;AAEA;;AAED,YAAK,KAAK0sF,OAAV,EAAoB;AAEnB,cAAMG,OAAO,GAAG,CAAE,OAAOpnH,WAAP,KAAuB,WAAvB,GAAqCt4C,IAArC,GAA4Cs4C,WAA9C,EAA4DC,GAA5D,EAAhB;AAEAwzC,cAAI,GAAG,CAAE2zE,OAAO,GAAG,KAAKL,OAAjB,IAA6B,IAApC;AACA,eAAKA,OAAL,GAAeK,OAAf;AAEA,eAAKJ,WAAL,IAAoBvzE,IAApB;AAEA;;AAED,eAAOA,IAAP;AAEA;AAnD8B,KAAhC;;AAuDA,QAAM4zE,WAAW,GAAG,IAAIzjG,OAAJ,EAApB;;AACA,QAAM0jG,aAAa,GAAG,IAAI3nG,UAAJ,EAAtB;;AACA,QAAM4nG,QAAQ,GAAG,IAAI3jG,OAAJ,EAAjB;;AACA,QAAM4jG,YAAY,GAAG,IAAI5jG,OAAJ,EAArB;;AAEA,aAAS6jG,aAAT,GAAyB;AAExBv6F,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,eAAZ;AAEA,WAAKuuD,OAAL,GAAewqG,YAAY,CAACvqG,UAAb,EAAf;AAEA,WAAK0sG,IAAL,GAAY,KAAK3sG,OAAL,CAAa4sG,UAAb,EAAZ;AACA,WAAKD,IAAL,CAAUE,OAAV,CAAmB,KAAK7sG,OAAL,CAAa8sG,WAAhC;AAEA,WAAKjhK,MAAL,GAAc,IAAd;AAEA,WAAKkhK,SAAL,GAAiB,CAAjB,CAbwB,CAexB;;AAEA,WAAKC,MAAL,GAAc,IAAIlB,KAAJ,EAAd;AAEA;;AAEDY,iBAAa,CAACzoJ,SAAd,GAA0B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAE7E0M,iBAAW,EAAE+7I,aAFgE;AAI7EO,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAKN,IAAZ;AAEA,OAR4E;AAU7EO,kBAAY,EAAE,wBAAa;AAE1B,YAAK,KAAKrhK,MAAL,KAAgB,IAArB,EAA4B;AAE3B,eAAK8gK,IAAL,CAAUxsC,UAAV,CAAsB,KAAKt0H,MAA3B;AACA,eAAKA,MAAL,CAAYs0H,UAAZ,CAAwB,KAAKngE,OAAL,CAAa8sG,WAArC;AACA,eAAKH,IAAL,CAAUE,OAAV,CAAmB,KAAK7sG,OAAL,CAAa8sG,WAAhC;AACA,eAAKjhK,MAAL,GAAc,IAAd;AAEA;;AAED,eAAO,IAAP;AAEA,OAvB4E;AAyB7EshK,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKthK,MAAZ;AAEA,OA7B4E;AA+B7EuhK,eAAS,EAAE,mBAAWv2J,KAAX,EAAmB;AAE7B,YAAK,KAAKhL,MAAL,KAAgB,IAArB,EAA4B;AAE3B,eAAK8gK,IAAL,CAAUxsC,UAAV,CAAsB,KAAKt0H,MAA3B;AACA,eAAKA,MAAL,CAAYs0H,UAAZ,CAAwB,KAAKngE,OAAL,CAAa8sG,WAArC;AAEA,SALD,MAKO;AAEN,eAAKH,IAAL,CAAUxsC,UAAV,CAAsB,KAAKngE,OAAL,CAAa8sG,WAAnC;AAEA;;AAED,aAAKjhK,MAAL,GAAcgL,KAAd;AACA,aAAK81J,IAAL,CAAUE,OAAV,CAAmB,KAAKhhK,MAAxB;AACA,aAAKA,MAAL,CAAYghK,OAAZ,CAAqB,KAAK7sG,OAAL,CAAa8sG,WAAlC;AAEA,eAAO,IAAP;AAEA,OAlD4E;AAoD7EO,qBAAe,EAAE,2BAAY;AAE5B,eAAO,KAAKV,IAAL,CAAUA,IAAV,CAAe91J,KAAtB;AAEA,OAxD4E;AA0D7Ey2J,qBAAe,EAAE,yBAAWz2J,KAAX,EAAmB;AAEnC,aAAK81J,IAAL,CAAUA,IAAV,CAAeY,eAAf,CAAgC12J,KAAhC,EAAuC,KAAKmpD,OAAL,CAAawtG,WAApD,EAAiE,IAAjE;AAEA,eAAO,IAAP;AAEA,OAhE4E;AAkE7Ez4F,uBAAiB,EAAE,2BAAWQ,KAAX,EAAmB;AAErCpD,gBAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,YAAMp0D,QAAQ,GAAG,KAAK6+C,OAAL,CAAa7+C,QAA9B;AACA,YAAMyH,EAAE,GAAG,KAAKA,EAAhB;AAEA,aAAKmkJ,SAAL,GAAiB,KAAKC,MAAL,CAAYZ,QAAZ,EAAjB;AAEA,aAAKniG,WAAL,CAAiBwF,SAAjB,CAA4B68F,WAA5B,EAAyCC,aAAzC,EAAwDC,QAAxD;;AAEAC,oBAAY,CAACriJ,GAAb,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAE,CAA1B,EAA8BjB,eAA9B,CAA+CojJ,aAA/C;;AAEA,YAAKprJ,QAAQ,CAACssJ,SAAd,EAA0B;AAEzB;AAEA,cAAM5b,OAAO,GAAG,KAAK7xF,OAAL,CAAawtG,WAAb,GAA2B,KAAKT,SAAhD;AAEA5rJ,kBAAQ,CAACssJ,SAAT,CAAmBC,uBAAnB,CAA4CpB,WAAW,CAAC50J,CAAxD,EAA2Dm6I,OAA3D;AACA1wI,kBAAQ,CAACwsJ,SAAT,CAAmBD,uBAAnB,CAA4CpB,WAAW,CAAC79I,CAAxD,EAA2DojI,OAA3D;AACA1wI,kBAAQ,CAACysJ,SAAT,CAAmBF,uBAAnB,CAA4CpB,WAAW,CAACtyI,CAAxD,EAA2D63H,OAA3D;AACA1wI,kBAAQ,CAAC0sJ,QAAT,CAAkBH,uBAAlB,CAA2CjB,YAAY,CAAC/0J,CAAxD,EAA2Dm6I,OAA3D;AACA1wI,kBAAQ,CAAC2sJ,QAAT,CAAkBJ,uBAAlB,CAA2CjB,YAAY,CAACh+I,CAAxD,EAA2DojI,OAA3D;AACA1wI,kBAAQ,CAAC4sJ,QAAT,CAAkBL,uBAAlB,CAA2CjB,YAAY,CAACzyI,CAAxD,EAA2D63H,OAA3D;AACA1wI,kBAAQ,CAAC6sJ,GAAT,CAAaN,uBAAb,CAAsC9kJ,EAAE,CAAClR,CAAzC,EAA4Cm6I,OAA5C;AACA1wI,kBAAQ,CAAC8sJ,GAAT,CAAaP,uBAAb,CAAsC9kJ,EAAE,CAAC6F,CAAzC,EAA4CojI,OAA5C;AACA1wI,kBAAQ,CAAC+sJ,GAAT,CAAaR,uBAAb,CAAsC9kJ,EAAE,CAACoR,CAAzC,EAA4C63H,OAA5C;AAEA,SAhBD,MAgBO;AAEN1wI,kBAAQ,CAACmtD,WAAT,CAAsBg+F,WAAW,CAAC50J,CAAlC,EAAqC40J,WAAW,CAAC79I,CAAjD,EAAoD69I,WAAW,CAACtyI,CAAhE;AACA7Y,kBAAQ,CAACgtJ,cAAT,CAAyB1B,YAAY,CAAC/0J,CAAtC,EAAyC+0J,YAAY,CAACh+I,CAAtD,EAAyDg+I,YAAY,CAACzyI,CAAtE,EAAyEpR,EAAE,CAAClR,CAA5E,EAA+EkR,EAAE,CAAC6F,CAAlF,EAAqF7F,EAAE,CAACoR,CAAxF;AAEA;AAED;AAtG4E,KAApD,CAA1B;;AA0GA,aAASo0I,KAAT,CAAgBjtJ,QAAhB,EAA2B;AAE1BgxD,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,OAAZ;AAEA,WAAK0P,QAAL,GAAgBA,QAAhB;AACA,WAAK6+C,OAAL,GAAe7+C,QAAQ,CAAC6+C,OAAxB;AAEA,WAAK2sG,IAAL,GAAY,KAAK3sG,OAAL,CAAa4sG,UAAb,EAAZ;AACA,WAAKD,IAAL,CAAUE,OAAV,CAAmB1rJ,QAAQ,CAAC8rJ,QAAT,EAAnB;AAEA,WAAKoB,QAAL,GAAgB,KAAhB;AAEA,WAAKvjI,MAAL,GAAc,IAAd;AACA,WAAKwjI,MAAL,GAAc,CAAd;AACA,WAAKC,IAAL,GAAY,KAAZ;AACA,WAAKC,SAAL,GAAiB,CAAjB;AACA,WAAKC,OAAL,GAAe,CAAf;AACA,WAAKhmJ,MAAL,GAAc,CAAd;AACA,WAAK4qI,QAAL,GAAgBl4I,SAAhB;AACA,WAAKuzJ,YAAL,GAAoB,CAApB;AACA,WAAKC,SAAL,GAAiB,KAAjB;AACA,WAAKC,kBAAL,GAA0B,IAA1B;AACA,WAAKC,UAAL,GAAkB,OAAlB;AAEA,WAAKC,UAAL,GAAkB,CAAlB;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,OAAL,GAAe,EAAf;AAEA;;AAEDZ,SAAK,CAACnqJ,SAAN,GAAkB3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAf,EAAoD;AAErE0M,iBAAW,EAAEy9I,KAFwD;AAIrEa,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKtC,IAAZ;AAEA,OARoE;AAUrEuC,mBAAa,EAAE,uBAAWC,SAAX,EAAuB;AAErC,aAAKP,kBAAL,GAA0B,KAA1B;AACA,aAAKC,UAAL,GAAkB,WAAlB;AACA,aAAKnlH,MAAL,GAAcylH,SAAd;AACA,aAAKtC,OAAL;AAEA,eAAO,IAAP;AAEA,OAnBoE;AAqBrEuC,2BAAqB,EAAE,+BAAWC,YAAX,EAA0B;AAEhD,aAAKT,kBAAL,GAA0B,KAA1B;AACA,aAAKC,UAAL,GAAkB,WAAlB;AACA,aAAKnlH,MAAL,GAAc,KAAKsW,OAAL,CAAasvG,wBAAb,CAAuCD,YAAvC,CAAd;AACA,aAAKxC,OAAL;AAEA,eAAO,IAAP;AAEA,OA9BoE;AAgCrE0C,0BAAoB,EAAE,8BAAWC,WAAX,EAAyB;AAE9C,aAAKZ,kBAAL,GAA0B,KAA1B;AACA,aAAKC,UAAL,GAAkB,iBAAlB;AACA,aAAKnlH,MAAL,GAAc,KAAKsW,OAAL,CAAayvG,uBAAb,CAAsCD,WAAtC,CAAd;AACA,aAAK3C,OAAL;AAEA,eAAO,IAAP;AAEA,OAzCoE;AA2CrE6C,eAAS,EAAE,mBAAW7E,WAAX,EAAyB;AAEnC,aAAK//H,MAAL,GAAc+/H,WAAd;AACA,aAAKgE,UAAL,GAAkB,QAAlB;AAEA,YAAK,KAAKR,QAAV,EAAqB,KAAKsB,IAAL;AAErB,eAAO,IAAP;AAEA,OApDoE;AAsDrEA,UAAI,EAAE,cAAWj8J,KAAX,EAAmB;AAExB,YAAKA,KAAK,KAAKyH,SAAf,EAA2BzH,KAAK,GAAG,CAAR;;AAE3B,YAAK,KAAKi7J,SAAL,KAAmB,IAAxB,EAA+B;AAE9BzgK,iBAAO,CAAC2W,IAAR,CAAc,wCAAd;AACA;AAEA;;AAED,YAAK,KAAK+pJ,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,aAAKiqJ,UAAL,GAAkB,KAAK9uG,OAAL,CAAawtG,WAAb,GAA2B95J,KAA7C;AAEA,YAAMg2C,MAAM,GAAG,KAAKsW,OAAL,CAAa4vG,kBAAb,EAAf;AACAlmH,cAAM,CAAC5e,MAAP,GAAgB,KAAKA,MAArB;AACA4e,cAAM,CAAC6kH,IAAP,GAAc,KAAKA,IAAnB;AACA7kH,cAAM,CAAC8kH,SAAP,GAAmB,KAAKA,SAAxB;AACA9kH,cAAM,CAAC+kH,OAAP,GAAiB,KAAKA,OAAtB;AACA/kH,cAAM,CAACmmH,OAAP,GAAiB,KAAKC,OAAL,CAAahxJ,IAAb,CAAmB,IAAnB,CAAjB;AACA4qC,cAAM,CAAC81B,KAAP,CAAc,KAAKsvF,UAAnB,EAA+B,KAAKC,SAAL,GAAiB,KAAKtmJ,MAArD,EAA6D,KAAK4qI,QAAlE;AAEA,aAAKsb,SAAL,GAAiB,IAAjB;AAEA,aAAKjlH,MAAL,GAAcA,MAAd;AAEA,aAAKqmH,SAAL,CAAgB,KAAKzB,MAArB;AACA,aAAK0B,eAAL,CAAsB,KAAKtB,YAA3B;AAEA,eAAO,KAAK7B,OAAL,EAAP;AAEA,OA3FoE;AA6FrE5oI,WAAK,EAAE,iBAAY;AAElB,YAAK,KAAK2qI,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,YAAK,KAAK8pJ,SAAL,KAAmB,IAAxB,EAA+B;AAE9B;AAEA,eAAKI,SAAL,IAAkBzpJ,IAAI,CAACmE,GAAL,CAAU,KAAKu2C,OAAL,CAAawtG,WAAb,GAA2B,KAAKsB,UAA1C,EAAsD,CAAtD,IAA4D,KAAKJ,YAAnF;;AAEA,cAAK,KAAKH,IAAL,KAAc,IAAnB,EAA0B;AAEzB;AAEA,iBAAKQ,SAAL,GAAiB,KAAKA,SAAL,IAAmB,KAAK1b,QAAL,IAAiB,KAAKvoH,MAAL,CAAYuoH,QAAhD,CAAjB;AAEA;;AAED,eAAK3pG,MAAL,CAAY/1C,IAAZ;AACA,eAAK+1C,MAAL,CAAYmmH,OAAZ,GAAsB,IAAtB;AAEA,eAAKlB,SAAL,GAAiB,KAAjB;AAEA;;AAED,eAAO,IAAP;AAEA,OA7HoE;AA+HrEh7J,UAAI,EAAE,gBAAY;AAEjB,YAAK,KAAKi7J,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,aAAKkqJ,SAAL,GAAiB,CAAjB;AAEA,aAAKrlH,MAAL,CAAY/1C,IAAZ;AACA,aAAK+1C,MAAL,CAAYmmH,OAAZ,GAAsB,IAAtB;AACA,aAAKlB,SAAL,GAAiB,KAAjB;AAEA,eAAO,IAAP;AAEA,OAhJoE;AAkJrE9B,aAAO,EAAE,mBAAY;AAEpB,YAAK,KAAKmC,OAAL,CAAa5iK,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,eAAKs9C,MAAL,CAAYmjH,OAAZ,CAAqB,KAAKmC,OAAL,CAAc,CAAd,CAArB;;AAEA,eAAM,IAAIjiK,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKw3J,OAAL,CAAa5iK,MAAlC,EAA0CW,KAAC,GAAGyK,CAA9C,EAAiDzK,KAAC,EAAlD,EAAwD;AAEvD,iBAAKiiK,OAAL,CAAcjiK,KAAC,GAAG,CAAlB,EAAsB8/J,OAAtB,CAA+B,KAAKmC,OAAL,CAAcjiK,KAAd,CAA/B;AAEA;;AAED,eAAKiiK,OAAL,CAAc,KAAKA,OAAL,CAAa5iK,MAAb,GAAsB,CAApC,EAAwCygK,OAAxC,CAAiD,KAAKoC,SAAL,EAAjD;AAEA,SAZD,MAYO;AAEN,eAAKvlH,MAAL,CAAYmjH,OAAZ,CAAqB,KAAKoC,SAAL,EAArB;AAEA;;AAED,eAAO,IAAP;AAEA,OAxKoE;AA0KrE9uC,gBAAU,EAAE,sBAAY;AAEvB,YAAK,KAAK6uC,OAAL,CAAa5iK,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,eAAKs9C,MAAL,CAAYy2E,UAAZ,CAAwB,KAAK6uC,OAAL,CAAc,CAAd,CAAxB;;AAEA,eAAM,IAAIjiK,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAG,KAAKw3J,OAAL,CAAa5iK,MAAlC,EAA0CW,KAAC,GAAGyK,CAA9C,EAAiDzK,KAAC,EAAlD,EAAwD;AAEvD,iBAAKiiK,OAAL,CAAcjiK,KAAC,GAAG,CAAlB,EAAsBozH,UAAtB,CAAkC,KAAK6uC,OAAL,CAAcjiK,KAAd,CAAlC;AAEA;;AAED,eAAKiiK,OAAL,CAAc,KAAKA,OAAL,CAAa5iK,MAAb,GAAsB,CAApC,EAAwC+zH,UAAxC,CAAoD,KAAK8uC,SAAL,EAApD;AAEA,SAZD,MAYO;AAEN,eAAKvlH,MAAL,CAAYy2E,UAAZ,CAAwB,KAAK8uC,SAAL,EAAxB;AAEA;;AAED,eAAO,IAAP;AAEA,OAhMoE;AAkMrEgB,gBAAU,EAAE,sBAAY;AAEvB,eAAO,KAAKjB,OAAZ;AAEA,OAtMoE;AAwMrEkB,gBAAU,EAAE,oBAAWr5J,KAAX,EAAmB;AAE9B,YAAK,CAAEA,KAAP,EAAeA,KAAK,GAAG,EAAR;;AAEf,YAAK,KAAK83J,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,eAAKxuC,UAAL;AACA,eAAK6uC,OAAL,GAAen4J,KAAf;AACA,eAAKg2J,OAAL;AAEA,SAND,MAMO;AAEN,eAAKmC,OAAL,GAAen4J,KAAf;AAEA;;AAED,eAAO,IAAP;AAEA,OA1NoE;AA4NrEk5J,eAAS,EAAE,mBAAWl5J,KAAX,EAAmB;AAE7B,aAAKy3J,MAAL,GAAcz3J,KAAd;AAEA,YAAK,KAAK6yC,MAAL,CAAY4kH,MAAZ,KAAuBnzJ,SAA5B,EAAwC,OAJX,CAImB;;AAEhD,YAAK,KAAKwzJ,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,eAAKjlH,MAAL,CAAY4kH,MAAZ,CAAmBf,eAAnB,CAAoC,KAAKe,MAAzC,EAAiD,KAAKtuG,OAAL,CAAawtG,WAA9D,EAA2E,IAA3E;AAEA;;AAED,eAAO,IAAP;AAEA,OA1OoE;AA4OrE2C,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAK7B,MAAZ;AAEA,OAhPoE;AAkPrEnB,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAK8C,UAAL,GAAmB,CAAnB,CAAP;AAEA,OAtPoE;AAwPrE7C,eAAS,EAAE,mBAAWvhK,MAAX,EAAoB;AAE9B,eAAO,KAAKqkK,UAAL,CAAiBrkK,MAAM,GAAG,CAAEA,MAAF,CAAH,GAAgB,EAAvC,CAAP;AAEA,OA5PoE;AA8PrEmkK,qBAAe,EAAE,yBAAWn5J,KAAX,EAAmB;AAEnC,YAAK,KAAK+3J,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,aAAK6pJ,YAAL,GAAoB73J,KAApB;;AAEA,YAAK,KAAK83J,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,eAAKjlH,MAAL,CAAYglH,YAAZ,CAAyBnB,eAAzB,CAA0C,KAAKmB,YAA/C,EAA6D,KAAK1uG,OAAL,CAAawtG,WAA1E,EAAuF,IAAvF;AAEA;;AAED,eAAO,IAAP;AAEA,OAjRoE;AAmRrE4C,qBAAe,EAAE,2BAAY;AAE5B,eAAO,KAAK1B,YAAZ;AAEA,OAvRoE;AAyRrEoB,aAAO,EAAE,mBAAY;AAEpB,aAAKnB,SAAL,GAAiB,KAAjB;AAEA,OA7RoE;AA+RrE0B,aAAO,EAAE,mBAAY;AAEpB,YAAK,KAAKzB,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA,iBAAO,KAAP;AAEA;;AAED,eAAO,KAAK0pJ,IAAZ;AAEA,OA1SoE;AA4SrE+B,aAAO,EAAE,iBAAWz5J,KAAX,EAAmB;AAE3B,YAAK,KAAK+3J,kBAAL,KAA4B,KAAjC,EAAyC;AAExC1gK,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,aAAK0pJ,IAAL,GAAY13J,KAAZ;;AAEA,YAAK,KAAK83J,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,eAAKjlH,MAAL,CAAY6kH,IAAZ,GAAmB,KAAKA,IAAxB;AAEA;;AAED,eAAO,IAAP;AAEA,OA/ToE;AAiUrEgC,kBAAY,EAAE,sBAAW15J,KAAX,EAAmB;AAEhC,aAAK23J,SAAL,GAAiB33J,KAAjB;AAEA,eAAO,IAAP;AAEA,OAvUoE;AAyUrE25J,gBAAU,EAAE,oBAAW35J,KAAX,EAAmB;AAE9B,aAAK43J,OAAL,GAAe53J,KAAf;AAEA,eAAO,IAAP;AAEA,OA/UoE;AAiVrE45J,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAK9D,IAAL,CAAUA,IAAV,CAAe91J,KAAtB;AAEA,OArVoE;AAuVrE65J,eAAS,EAAE,mBAAW75J,KAAX,EAAmB;AAE7B,aAAK81J,IAAL,CAAUA,IAAV,CAAeY,eAAf,CAAgC12J,KAAhC,EAAuC,KAAKmpD,OAAL,CAAawtG,WAApD,EAAiE,IAAjE;AAEA,eAAO,IAAP;AAEA;AA7VoE,KAApD,CAAlB;;AAiWA,QAAMmD,WAAW,GAAG,IAAI9nG,OAAJ,EAApB;;AACA,QAAM+nG,aAAa,GAAG,IAAIhsG,UAAJ,EAAtB;;AACA,QAAMisG,QAAQ,GAAG,IAAIhoG,OAAJ,EAAjB;;AACA,QAAMioG,cAAc,GAAG,IAAIjoG,OAAJ,EAAvB;;AAEA,aAASkoG,eAAT,CAA0B5vJ,QAA1B,EAAqC;AAEpCitJ,WAAK,CAAChtJ,IAAN,CAAY,IAAZ,EAAkBD,QAAlB;AAEA,WAAK6vJ,MAAL,GAAc,KAAKhxG,OAAL,CAAaixG,YAAb,EAAd;AACA,WAAKD,MAAL,CAAYE,YAAZ,GAA2B,MAA3B;AACA,WAAKF,MAAL,CAAYnE,OAAZ,CAAqB,KAAKF,IAA1B;AAEA;;AAEDoE,mBAAe,CAAC9sJ,SAAhB,GAA4B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe6rJ,KAAK,CAACnqJ,SAArB,CAAf,EAAiD;AAE5E0M,iBAAW,EAAEogJ,eAF+D;AAI5E9B,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAK+B,MAAZ;AAEA,OAR2E;AAU5EG,oBAAc,EAAE,0BAAY;AAE3B,eAAO,KAAKH,MAAL,CAAYI,WAAnB;AAEA,OAd2E;AAgB5EC,oBAAc,EAAE,wBAAWx6J,KAAX,EAAmB;AAElC,aAAKm6J,MAAL,CAAYI,WAAZ,GAA0Bv6J,KAA1B;AAEA,eAAO,IAAP;AAEA,OAtB2E;AAwB5Ey6J,sBAAgB,EAAE,4BAAY;AAE7B,eAAO,KAAKN,MAAL,CAAYO,aAAnB;AAEA,OA5B2E;AA8B5EC,sBAAgB,EAAE,0BAAW36J,KAAX,EAAmB;AAEpC,aAAKm6J,MAAL,CAAYO,aAAZ,GAA4B16J,KAA5B;AAEA,eAAO,IAAP;AAEA,OApC2E;AAsC5E46J,sBAAgB,EAAE,4BAAY;AAE7B,eAAO,KAAKT,MAAL,CAAYU,aAAnB;AAEA,OA1C2E;AA4C5EC,sBAAgB,EAAE,0BAAW96J,KAAX,EAAmB;AAEpC,aAAKm6J,MAAL,CAAYU,aAAZ,GAA4B76J,KAA5B;AAEA,eAAO,IAAP;AAEA,OAlD2E;AAoD5E+6J,oBAAc,EAAE,0BAAY;AAE3B,eAAO,KAAKZ,MAAL,CAAYhsJ,WAAnB;AAEA,OAxD2E;AA0D5E6sJ,oBAAc,EAAE,wBAAWh7J,KAAX,EAAmB;AAElC,aAAKm6J,MAAL,CAAYhsJ,WAAZ,GAA0BnO,KAA1B;AAEA,eAAO,IAAP;AAEA,OAhE2E;AAkE5Ei7J,wBAAkB,EAAE,4BAAWC,cAAX,EAA2BC,cAA3B,EAA2CC,aAA3C,EAA2D;AAE9E,aAAKjB,MAAL,CAAYe,cAAZ,GAA6BA,cAA7B;AACA,aAAKf,MAAL,CAAYgB,cAAZ,GAA6BA,cAA7B;AACA,aAAKhB,MAAL,CAAYiB,aAAZ,GAA4BA,aAA5B;AAEA,eAAO,IAAP;AAEA,OA1E2E;AA4E5El9F,uBAAiB,EAAE,2BAAWQ,KAAX,EAAmB;AAErCpD,gBAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,YAAK,KAAKq5F,kBAAL,KAA4B,IAA5B,IAAoC,KAAKD,SAAL,KAAmB,KAA5D,EAAoE;AAEpE,aAAK1kG,WAAL,CAAiBwF,SAAjB,CAA4BkhG,WAA5B,EAAyCC,aAAzC,EAAwDC,QAAxD;;AAEAC,sBAAc,CAAC1mJ,GAAf,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA8BjB,eAA9B,CAA+CynJ,aAA/C;;AAEA,YAAMI,MAAM,GAAG,KAAKA,MAApB;;AAEA,YAAKA,MAAM,CAACvD,SAAZ,EAAwB;AAEvB;AAEA,cAAM5b,OAAO,GAAG,KAAK7xF,OAAL,CAAawtG,WAAb,GAA2B,KAAKrsJ,QAAL,CAAc4rJ,SAAzD;AAEAiE,gBAAM,CAACvD,SAAP,CAAiBC,uBAAjB,CAA0CiD,WAAW,CAACj5J,CAAtD,EAAyDm6I,OAAzD;AACAmf,gBAAM,CAACrD,SAAP,CAAiBD,uBAAjB,CAA0CiD,WAAW,CAACliJ,CAAtD,EAAyDojI,OAAzD;AACAmf,gBAAM,CAACpD,SAAP,CAAiBF,uBAAjB,CAA0CiD,WAAW,CAAC32I,CAAtD,EAAyD63H,OAAzD;AACAmf,gBAAM,CAACkB,YAAP,CAAoBxE,uBAApB,CAA6CoD,cAAc,CAACp5J,CAA5D,EAA+Dm6I,OAA/D;AACAmf,gBAAM,CAACmB,YAAP,CAAoBzE,uBAApB,CAA6CoD,cAAc,CAACriJ,CAA5D,EAA+DojI,OAA/D;AACAmf,gBAAM,CAACoB,YAAP,CAAoB1E,uBAApB,CAA6CoD,cAAc,CAAC92I,CAA5D,EAA+D63H,OAA/D;AAEA,SAbD,MAaO;AAENmf,gBAAM,CAAC1iG,WAAP,CAAoBqiG,WAAW,CAACj5J,CAAhC,EAAmCi5J,WAAW,CAACliJ,CAA/C,EAAkDkiJ,WAAW,CAAC32I,CAA9D;AACAg3I,gBAAM,CAAC7C,cAAP,CAAuB2C,cAAc,CAACp5J,CAAtC,EAAyCo5J,cAAc,CAACriJ,CAAxD,EAA2DqiJ,cAAc,CAAC92I,CAA1E;AAEA;AAED;AA5G2E,KAAjD,CAA5B;;AAgHA,aAASq4I,aAAT,CAAwBC,KAAxB,EAA+BC,OAA/B,EAAyC;AAExC,WAAKC,QAAL,GAAgBF,KAAK,CAACtyG,OAAN,CAAcyyG,cAAd,EAAhB;AACA,WAAKD,QAAL,CAAcD,OAAd,GAAwBA,OAAO,KAAKp3J,SAAZ,GAAwBo3J,OAAxB,GAAkC,IAA1D;AAEA,WAAK3mK,IAAL,GAAY,IAAI2yB,UAAJ,CAAgB,KAAKi0I,QAAL,CAAcE,iBAA9B,CAAZ;AAEAJ,WAAK,CAACrD,SAAN,GAAkBpC,OAAlB,CAA2B,KAAK2F,QAAhC;AAEA;;AAEDlkK,UAAM,CAACiiC,MAAP,CAAe8hI,aAAa,CAACpuJ,SAA7B,EAAwC;AAEvC0uJ,sBAAgB,EAAE,4BAAY;AAE7B,aAAKH,QAAL,CAAcI,oBAAd,CAAoC,KAAKhnK,IAAzC;AAEA,eAAO,KAAKA,IAAZ;AAEA,OARsC;AAUvCinK,yBAAmB,EAAE,+BAAY;AAEhC,YAAIh8J,KAAK,GAAG,CAAZ;AACA,YAAMjL,IAAI,GAAG,KAAK+mK,gBAAL,EAAb;;AAEA,aAAM,IAAI5lK,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGnB,IAAI,CAACQ,MAA1B,EAAkCW,KAAC,EAAnC,EAAyC;AAExC8J,eAAK,IAAIjL,IAAI,CAAEmB,KAAF,CAAb;AAEA;;AAED,eAAO8J,KAAK,GAAGjL,IAAI,CAACQ,MAApB;AAEA;AAvBsC,KAAxC;;AA2BA,aAAS0mK,aAAT,CAAwBC,OAAxB,EAAiCxf,QAAjC,EAA2ChH,SAA3C,EAAuD;AAEtD,WAAKwmB,OAAL,GAAeA,OAAf;AACA,WAAKxmB,SAAL,GAAiBA,SAAjB;AAEA,UAAIymB,WAAJ,EACCC,mBADD,EAECC,WAFD,CALsD,CAStD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAS3f,QAAT;AAEC,aAAK,YAAL;AACCyf,qBAAW,GAAG,KAAKG,MAAnB;AACAF,6BAAmB,GAAG,KAAKG,cAA3B;AACAF,qBAAW,GAAG,KAAKG,8BAAnB;AAEA,eAAKvoI,MAAL,GAAc,IAAIyiD,YAAJ,CAAkBg/D,SAAS,GAAG,CAA9B,CAAd;AACA,eAAK+mB,UAAL,GAAkB,CAAlB;AACA;;AAED,aAAK,QAAL;AACA,aAAK,MAAL;AACCN,qBAAW,GAAG,KAAKO,OAAnB,CADD,CAGC;AACA;;AACAN,6BAAmB,GAAG,KAAKM,OAA3B;AAEAL,qBAAW,GAAG,KAAKM,yBAAnB;AAEA,eAAK1oI,MAAL,GAAc,IAAItM,KAAJ,CAAW+tH,SAAS,GAAG,CAAvB,CAAd;AACA;;AAED;AACCymB,qBAAW,GAAG,KAAKS,KAAnB;AACAR,6BAAmB,GAAG,KAAKS,aAA3B;AACAR,qBAAW,GAAG,KAAKS,2BAAnB;AAEA,eAAK7oI,MAAL,GAAc,IAAIyiD,YAAJ,CAAkBg/D,SAAS,GAAG,CAA9B,CAAd;AA7BF;;AAiCA,WAAKqnB,gBAAL,GAAwBZ,WAAxB;AACA,WAAKa,wBAAL,GAAgCZ,mBAAhC;AACA,WAAKa,YAAL,GAAoBZ,WAApB;AACA,WAAKa,UAAL,GAAkB,CAAlB;AACA,WAAKC,SAAL,GAAiB,CAAjB;AAEA,WAAKC,gBAAL,GAAwB,CAAxB;AACA,WAAKC,wBAAL,GAAgC,CAAhC;AAEA,WAAKC,QAAL,GAAgB,CAAhB;AACA,WAAKC,cAAL,GAAsB,CAAtB;AAEA;;AAED9lK,UAAM,CAACiiC,MAAP,CAAeuiI,aAAa,CAAC7uJ,SAA7B,EAAwC;AAEvC;AACAgf,gBAAU,EAAE,oBAAWoxI,SAAX,EAAsBxgC,MAAtB,EAA+B;AAE1C;AACA;AAEA,YAAM/oG,MAAM,GAAG,KAAKA,MAApB;AAAA,YACC8oE,MAAM,GAAG,KAAK24C,SADf;AAAA,YAEC9jI,MAAM,GAAG4rJ,SAAS,GAAGzgE,MAAZ,GAAqBA,MAF/B;AAIA,YAAI0gE,aAAa,GAAG,KAAKL,gBAAzB;;AAEA,YAAKK,aAAa,KAAK,CAAvB,EAA2B;AAE1B;AAEA,eAAM,IAAIvnK,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC+9B,kBAAM,CAAEriB,MAAM,GAAG1b,KAAX,CAAN,GAAuB+9B,MAAM,CAAE/9B,KAAF,CAA7B;AAEA;;AAEDunK,uBAAa,GAAGzgC,MAAhB;AAEA,SAZD,MAYO;AAEN;AAEAygC,uBAAa,IAAIzgC,MAAjB;AACA,cAAM0gC,GAAG,GAAG1gC,MAAM,GAAGygC,aAArB;;AACA,eAAKV,gBAAL,CAAuB9oI,MAAvB,EAA+BriB,MAA/B,EAAuC,CAAvC,EAA0C8rJ,GAA1C,EAA+C3gE,MAA/C;AAEA;;AAED,aAAKqgE,gBAAL,GAAwBK,aAAxB;AAEA,OAtCsC;AAwCvC;AACAE,wBAAkB,EAAE,4BAAW3gC,MAAX,EAAoB;AAEvC,YAAM/oG,MAAM,GAAG,KAAKA,MAApB;AAAA,YACC8oE,MAAM,GAAG,KAAK24C,SADf;AAAA,YAEC9jI,MAAM,GAAGmrF,MAAM,GAAG,KAAKogE,SAFxB;;AAIA,YAAK,KAAKE,wBAAL,KAAkC,CAAvC,EAA2C;AAE1C;AAEA,eAAKJ,YAAL;AAEA,SAZsC,CAcvC;;;AAEA,aAAKD,wBAAL,CAA+B/oI,MAA/B,EAAuCriB,MAAvC,EAA+C,CAA/C,EAAkDorH,MAAlD,EAA0DjgC,MAA1D;;AACA,aAAKsgE,wBAAL,IAAiCrgC,MAAjC;AAEA,OA5DsC;AA8DvC;AACAzxH,WAAK,EAAE,eAAWiyJ,SAAX,EAAuB;AAE7B,YAAMzgE,MAAM,GAAG,KAAK24C,SAApB;AAAA,YACCzhH,MAAM,GAAG,KAAKA,MADf;AAAA,YAECriB,MAAM,GAAG4rJ,SAAS,GAAGzgE,MAAZ,GAAqBA,MAF/B;AAAA,YAICigC,MAAM,GAAG,KAAKogC,gBAJf;AAAA,YAKCQ,cAAc,GAAG,KAAKP,wBALvB;AAAA,YAOCnB,OAAO,GAAG,KAAKA,OAPhB;AASA,aAAKkB,gBAAL,GAAwB,CAAxB;AACA,aAAKC,wBAAL,GAAgC,CAAhC;;AAEA,YAAKrgC,MAAM,GAAG,CAAd,EAAkB;AAEjB;AAEA,cAAM6gC,mBAAmB,GAAG9gE,MAAM,GAAG,KAAKmgE,UAA1C;;AAEA,eAAKH,gBAAL,CACC9oI,MADD,EACSriB,MADT,EACiBisJ,mBADjB,EACsC,IAAI7gC,MAD1C,EACkDjgC,MADlD;AAGA;;AAED,YAAK6gE,cAAc,GAAG,CAAtB,EAA0B;AAEzB;AAEA,eAAKZ,wBAAL,CAA+B/oI,MAA/B,EAAuCriB,MAAvC,EAA+C,KAAKurJ,SAAL,GAAiBpgE,MAAhE,EAAwE,CAAxE,EAA2EA,MAA3E;AAEA;;AAED,aAAM,IAAI7mG,KAAC,GAAG6mG,MAAR,EAAgBvpG,CAAC,GAAGupG,MAAM,GAAGA,MAAnC,EAA2C7mG,KAAC,KAAK1C,CAAjD,EAAoD,EAAG0C,KAAvD,EAA2D;AAE1D,cAAK+9B,MAAM,CAAE/9B,KAAF,CAAN,KAAgB+9B,MAAM,CAAE/9B,KAAC,GAAG6mG,MAAN,CAA3B,EAA4C;AAE3C;AAEAm/D,mBAAO,CAACv4D,QAAR,CAAkB1vE,MAAlB,EAA0BriB,MAA1B;AACA;AAEA;AAED;AAED,OA7GsC;AA+GvC;AACAksJ,uBAAiB,EAAE,6BAAY;AAE9B,YAAM5B,OAAO,GAAG,KAAKA,OAArB;AAEA,YAAMjoI,MAAM,GAAG,KAAKA,MAApB;AAAA,YACC8oE,MAAM,GAAG,KAAK24C,SADf;AAAA,YAGCmoB,mBAAmB,GAAG9gE,MAAM,GAAG,KAAKmgE,UAHrC;AAKAhB,eAAO,CAAC6B,QAAR,CAAkB9pI,MAAlB,EAA0B4pI,mBAA1B,EAT8B,CAW9B;;AACA,aAAM,IAAI3nK,KAAC,GAAG6mG,MAAR,EAAgBvpG,CAAC,GAAGqqK,mBAA1B,EAA+C3nK,KAAC,KAAK1C,CAArD,EAAwD,EAAG0C,KAA3D,EAA+D;AAE9D+9B,gBAAM,CAAE/9B,KAAF,CAAN,GAAc+9B,MAAM,CAAE4pI,mBAAmB,GAAK3nK,KAAC,GAAG6mG,MAA9B,CAApB;AAEA,SAhB6B,CAkB9B;;;AACA,aAAKkgE,YAAL;;AAEA,aAAKG,gBAAL,GAAwB,CAAxB;AACA,aAAKC,wBAAL,GAAgC,CAAhC;AAEA,OAxIsC;AA0IvC;AACAW,0BAAoB,EAAE,gCAAY;AAEjC,YAAMH,mBAAmB,GAAG,KAAKnoB,SAAL,GAAiB,CAA7C;AACA,aAAKwmB,OAAL,CAAav4D,QAAb,CAAuB,KAAK1vE,MAA5B,EAAoC4pI,mBAApC;AAEA,OAhJsC;AAkJvCf,iCAA2B,EAAE,uCAAY;AAExC,YAAMzoK,UAAU,GAAG,KAAK8oK,SAAL,GAAiB,KAAKznB,SAAzC;AACA,YAAMphJ,QAAQ,GAAGD,UAAU,GAAG,KAAKqhJ,SAAnC;;AAEA,aAAM,IAAIx/I,KAAC,GAAG7B,UAAd,EAA0B6B,KAAC,GAAG5B,QAA9B,EAAwC4B,KAAC,EAAzC,EAA+C;AAE9C,eAAK+9B,MAAL,CAAa/9B,KAAb,IAAmB,CAAnB;AAEA;AAED,OA7JsC;AA+JvCsmK,oCAA8B,EAAE,0CAAY;AAE3C,aAAKM,2BAAL;;AACA,aAAK7oI,MAAL,CAAa,KAAKkpI,SAAL,GAAiB,CAAjB,GAAqB,CAAlC,IAAwC,CAAxC;AAEA,OApKsC;AAsKvCR,+BAAyB,EAAE,qCAAY;AAEtC,YAAMtoK,UAAU,GAAG,KAAK6oK,UAAL,GAAkB,KAAKxnB,SAA1C;AACA,YAAMuoB,WAAW,GAAG,KAAKd,SAAL,GAAiB,KAAKznB,SAA1C;;AAEA,aAAM,IAAIx/I,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAKw/I,SAA1B,EAAqCx/I,KAAC,EAAtC,EAA4C;AAE3C,eAAK+9B,MAAL,CAAagqI,WAAW,GAAG/nK,KAA3B,IAAiC,KAAK+9B,MAAL,CAAa5/B,UAAU,GAAG6B,KAA1B,CAAjC;AAEA;AAED,OAjLsC;AAoLvC;AAEAwmK,aAAO,EAAE,iBAAWzoI,MAAX,EAAmBy6B,SAAnB,EAA8BomF,SAA9B,EAAyC74H,CAAzC,EAA4C8gF,MAA5C,EAAqD;AAE7D,YAAK9gF,CAAC,IAAI,GAAV,EAAgB;AAEf,eAAM,IAAI/lB,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC+9B,kBAAM,CAAEy6B,SAAS,GAAGx4D,KAAd,CAAN,GAA0B+9B,MAAM,CAAE6gH,SAAS,GAAG5+I,KAAd,CAAhC;AAEA;AAED;AAED,OAlMsC;AAoMvComK,YAAM,EAAE,gBAAWroI,MAAX,EAAmBy6B,SAAnB,EAA8BomF,SAA9B,EAAyC74H,CAAzC,EAA6C;AAEpD8xC,kBAAU,CAACS,SAAX,CAAsBv6B,MAAtB,EAA8By6B,SAA9B,EAAyCz6B,MAAzC,EAAiDy6B,SAAjD,EAA4Dz6B,MAA5D,EAAoE6gH,SAApE,EAA+E74H,CAA/E;AAEA,OAxMsC;AA0MvCsgJ,oBAAc,EAAE,wBAAWtoI,MAAX,EAAmBy6B,SAAnB,EAA8BomF,SAA9B,EAAyC74H,CAAzC,EAA4C8gF,MAA5C,EAAqD;AAEpE,YAAMmhE,UAAU,GAAG,KAAKzB,UAAL,GAAkB1/D,MAArC,CAFoE,CAIpE;;AACAhvC,kBAAU,CAAC2B,uBAAX,CAAoCz7B,MAApC,EAA4CiqI,UAA5C,EAAwDjqI,MAAxD,EAAgEy6B,SAAhE,EAA2Ez6B,MAA3E,EAAmF6gH,SAAnF,EALoE,CAOpE;;AACA/mF,kBAAU,CAACS,SAAX,CAAsBv6B,MAAtB,EAA8By6B,SAA9B,EAAyCz6B,MAAzC,EAAiDy6B,SAAjD,EAA4Dz6B,MAA5D,EAAoEiqI,UAApE,EAAgFjiJ,CAAhF;AAEA,OApNsC;AAsNvC2gJ,WAAK,EAAE,eAAW3oI,MAAX,EAAmBy6B,SAAnB,EAA8BomF,SAA9B,EAAyC74H,CAAzC,EAA4C8gF,MAA5C,EAAqD;AAE3D,YAAMv2E,CAAC,GAAG,IAAIvK,CAAd;;AAEA,aAAM,IAAI/lB,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC,cAAMM,CAAC,GAAGk4D,SAAS,GAAGx4D,KAAtB;AAEA+9B,gBAAM,CAAEz9B,CAAF,CAAN,GAAcy9B,MAAM,CAAEz9B,CAAF,CAAN,GAAcgwB,CAAd,GAAkByN,MAAM,CAAE6gH,SAAS,GAAG5+I,KAAd,CAAN,GAA0B+lB,CAA1D;AAEA;AAED,OAlOsC;AAoOvC4gJ,mBAAa,EAAE,uBAAW5oI,MAAX,EAAmBy6B,SAAnB,EAA8BomF,SAA9B,EAAyC74H,CAAzC,EAA4C8gF,MAA5C,EAAqD;AAEnE,aAAM,IAAI7mG,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAK6mG,MAAvB,EAA+B,EAAG7mG,KAAlC,EAAsC;AAErC,cAAMM,CAAC,GAAGk4D,SAAS,GAAGx4D,KAAtB;AAEA+9B,gBAAM,CAAEz9B,CAAF,CAAN,GAAcy9B,MAAM,CAAEz9B,CAAF,CAAN,GAAcy9B,MAAM,CAAE6gH,SAAS,GAAG5+I,KAAd,CAAN,GAA0B+lB,CAAtD;AAEA;AAED;AA9OsC,KAAxC,E,CAkPA;;AACA,QAAMkiJ,kBAAkB,GAAG,eAA3B;;AACA,QAAMC,WAAW,GAAG,IAAIC,MAAJ,CAAY,MAAMF,kBAAN,GAA2B,GAAvC,EAA4C,GAA5C,CAApB,C,CAEA;AACA;AACA;;;AACA,QAAMG,SAAS,GAAG,OAAOH,kBAAP,GAA4B,GAA9C;;AACA,QAAMI,cAAc,GAAG,OAAOJ,kBAAkB,CAAC32I,OAAnB,CAA4B,KAA5B,EAAmC,EAAnC,CAAP,GAAiD,GAAxE,C,CAEA;AACA;;;AACA,QAAMg3I,YAAY,GAAG,kBAAkB3rH,MAAlB,CAAyBrrB,OAAzB,CAAkC,IAAlC,EAAwC82I,SAAxC,CAArB,C,CAEA;;;AACA,QAAMG,OAAO,GAAG,WAAW5rH,MAAX,CAAkBrrB,OAAlB,CAA2B,MAA3B,EAAmC+2I,cAAnC,CAAhB,C,CAEA;AACA;;;AACA,QAAMG,SAAS,GAAG,4BAA4B7rH,MAA5B,CAAmCrrB,OAAnC,CAA4C,IAA5C,EAAkD82I,SAAlD,CAAlB,C,CAEA;AACA;;;AACA,QAAMK,WAAW,GAAG,uBAAuB9rH,MAAvB,CAA8BrrB,OAA9B,CAAuC,IAAvC,EAA6C82I,SAA7C,CAApB;;AAEA,QAAMM,QAAQ,GAAG,IAAIP,MAAJ,CAAY,KAC1B,GAD0B,GAE1BG,YAF0B,GAG1BC,OAH0B,GAI1BC,SAJ0B,GAK1BC,WAL0B,GAM1B,GANc,CAAjB;;AASA,QAAME,qBAAqB,GAAG,CAAE,UAAF,EAAc,WAAd,EAA2B,OAA3B,CAA9B;;AAEA,aAASC,SAAT,CAAoBC,WAApB,EAAiCxlK,IAAjC,EAAuCylK,kBAAvC,EAA4D;AAE3D,UAAMC,UAAU,GAAGD,kBAAkB,IAAIE,eAAe,CAACC,cAAhB,CAAgC5lK,IAAhC,CAAzC;AAEA,WAAK6lK,YAAL,GAAoBL,WAApB;AACA,WAAKM,SAAL,GAAiBN,WAAW,CAACO,UAAZ,CAAwB/lK,IAAxB,EAA8B0lK,UAA9B,CAAjB;AAEA;;AAEDxnK,UAAM,CAACiiC,MAAP,CAAeolI,SAAS,CAAC1xJ,SAAzB,EAAoC;AAEnC2wJ,cAAQ,EAAE,kBAAWjrI,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEpC,aAAK3J,IAAL,GAFoC,CAEvB;;AAEb,YAAMs3J,eAAe,GAAG,KAAKH,YAAL,CAAkBI,eAA1C;AAAA,YACCtD,OAAO,GAAG,KAAKmD,SAAL,CAAgBE,eAAhB,CADX,CAJoC,CAOpC;;AACA,YAAKrD,OAAO,KAAK53J,SAAjB,EAA6B43J,OAAO,CAAC6B,QAAR,CAAkBjrI,KAAlB,EAAyBlhB,MAAzB;AAE7B,OAZkC;AAcnC+xF,cAAQ,EAAE,kBAAW7wE,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEpC,YAAM6tJ,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,aAAM,IAAInpK,KAAC,GAAG,KAAKkpK,YAAL,CAAkBI,eAA1B,EAA2C34I,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9D,EAAsEW,KAAC,KAAK2wB,CAA5E,EAA+E,EAAG3wB,KAAlF,EAAsF;AAErFupK,kBAAQ,CAAEvpK,KAAF,CAAR,CAAcytG,QAAd,CAAwB7wE,KAAxB,EAA+BlhB,MAA/B;AAEA;AAED,OAxBkC;AA0BnC3J,UAAI,EAAE,gBAAY;AAEjB,YAAMw3J,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,aAAM,IAAInpK,KAAC,GAAG,KAAKkpK,YAAL,CAAkBI,eAA1B,EAA2C34I,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9D,EAAsEW,KAAC,KAAK2wB,CAA5E,EAA+E,EAAG3wB,KAAlF,EAAsF;AAErFupK,kBAAQ,CAAEvpK,KAAF,CAAR,CAAc+R,IAAd;AAEA;AAED,OApCkC;AAsCnCy3J,YAAM,EAAE,kBAAY;AAEnB,YAAMD,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,aAAM,IAAInpK,KAAC,GAAG,KAAKkpK,YAAL,CAAkBI,eAA1B,EAA2C34I,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9D,EAAsEW,KAAC,KAAK2wB,CAA5E,EAA+E,EAAG3wB,KAAlF,EAAsF;AAErFupK,kBAAQ,CAAEvpK,KAAF,CAAR,CAAcwpK,MAAd;AAEA;AAED;AAhDkC,KAApC;;AAqDA,aAASR,eAAT,CAA0BS,QAA1B,EAAoCpmK,IAApC,EAA0C0lK,UAA1C,EAAuD;AAEtD,WAAK1lK,IAAL,GAAYA,IAAZ;AACA,WAAK0lK,UAAL,GAAkBA,UAAU,IAAIC,eAAe,CAACC,cAAhB,CAAgC5lK,IAAhC,CAAhC;AAEA,WAAKwP,IAAL,GAAYm2J,eAAe,CAACU,QAAhB,CAA0BD,QAA1B,EAAoC,KAAKV,UAAL,CAAgBY,QAApD,KAAkEF,QAA9E;AAEA,WAAKA,QAAL,GAAgBA,QAAhB;AAEA;;AAEDloK,UAAM,CAACiiC,MAAP,CAAewlI,eAAf,EAAgC;AAE/BJ,eAAS,EAAEA,SAFoB;AAI/BpzJ,YAAM,EAAE,gBAAWS,IAAX,EAAiB5S,IAAjB,EAAuB0lK,UAAvB,EAAoC;AAE3C,YAAK,EAAI9yJ,IAAI,IAAIA,IAAI,CAAC2zJ,sBAAjB,CAAL,EAAiD;AAEhD,iBAAO,IAAIZ,eAAJ,CAAqB/yJ,IAArB,EAA2B5S,IAA3B,EAAiC0lK,UAAjC,CAAP;AAEA,SAJD,MAIO;AAEN,iBAAO,IAAIC,eAAe,CAACJ,SAApB,CAA+B3yJ,IAA/B,EAAqC5S,IAArC,EAA2C0lK,UAA3C,CAAP;AAEA;AAED,OAhB8B;;AAkB/B;;;;;;;AAOAc,sBAAgB,EAAE,0BAAW9qK,IAAX,EAAkB;AAEnC,eAAOA,IAAI,CAACuyB,OAAL,CAAc,KAAd,EAAqB,GAArB,EAA2BA,OAA3B,CAAoC42I,WAApC,EAAiD,EAAjD,CAAP;AAEA,OA7B8B;AA+B/Be,oBAAc,EAAE,wBAAWrhB,SAAX,EAAuB;AAEtC,YAAMl7G,OAAO,GAAGg8H,QAAQ,CAACpyF,IAAT,CAAesxE,SAAf,CAAhB;;AAEA,YAAK,CAAEl7G,OAAP,EAAiB;AAEhB,gBAAM,IAAInvC,KAAJ,CAAW,8CAA8CqqJ,SAAzD,CAAN;AAEA;;AAED,YAAMkiB,OAAO,GAAG;AACf;AACAH,kBAAQ,EAAEj9H,OAAO,CAAE,CAAF,CAFF;AAGfq9H,oBAAU,EAAEr9H,OAAO,CAAE,CAAF,CAHJ;AAIfs9H,qBAAW,EAAEt9H,OAAO,CAAE,CAAF,CAJL;AAKfo7G,sBAAY,EAAEp7G,OAAO,CAAE,CAAF,CALN;AAKa;AAC5Bu9H,uBAAa,EAAEv9H,OAAO,CAAE,CAAF;AANP,SAAhB;AASA,YAAMw9H,OAAO,GAAGJ,OAAO,CAACH,QAAR,IAAoBG,OAAO,CAACH,QAAR,CAAiB3vI,WAAjB,CAA8B,GAA9B,CAApC;;AAEA,YAAKkwI,OAAO,KAAK97J,SAAZ,IAAyB87J,OAAO,KAAK,CAAE,CAA5C,EAAgD;AAE/C,cAAMH,UAAU,GAAGD,OAAO,CAACH,QAAR,CAAiB5vI,SAAjB,CAA4BmwI,OAAO,GAAG,CAAtC,CAAnB,CAF+C,CAI/C;AACA;AACA;AACA;;AACA,cAAKvB,qBAAqB,CAACj3I,OAAtB,CAA+Bq4I,UAA/B,MAAgD,CAAE,CAAvD,EAA2D;AAE1DD,mBAAO,CAACH,QAAR,GAAmBG,OAAO,CAACH,QAAR,CAAiB5vI,SAAjB,CAA4B,CAA5B,EAA+BmwI,OAA/B,CAAnB;AACAJ,mBAAO,CAACC,UAAR,GAAqBA,UAArB;AAEA;AAED;;AAED,YAAKD,OAAO,CAAChiB,YAAR,KAAyB,IAAzB,IAAiCgiB,OAAO,CAAChiB,YAAR,CAAqBzoJ,MAArB,KAAgC,CAAtE,EAA0E;AAEzE,gBAAM,IAAI9B,KAAJ,CAAW,iEAAiEqqJ,SAA5E,CAAN;AAEA;;AAED,eAAOkiB,OAAP;AAEA,OA7E8B;AA+E/BJ,cAAQ,EAAE,kBAAWzzJ,IAAX,EAAiB0zJ,QAAjB,EAA4B;AAErC,YAAK,CAAEA,QAAF,IAAcA,QAAQ,KAAK,EAA3B,IAAiCA,QAAQ,KAAK,GAA9C,IAAqDA,QAAQ,KAAK,CAAE,CAApE,IAAyEA,QAAQ,KAAK1zJ,IAAI,CAAClX,IAA3F,IAAmG4qK,QAAQ,KAAK1zJ,IAAI,CAAC0zC,IAA1H,EAAiI;AAEhI,iBAAO1zC,IAAP;AAEA,SANoC,CAQrC;;;AACA,YAAKA,IAAI,CAACwmG,QAAV,EAAqB;AAEpB,cAAM2qB,IAAI,GAAGnxH,IAAI,CAACwmG,QAAL,CAAc6qB,aAAd,CAA6BqiC,QAA7B,CAAb;;AAEA,cAAKviC,IAAI,KAAKh5H,SAAd,EAA0B;AAEzB,mBAAOg5H,IAAP;AAEA;AAED,SAnBoC,CAqBrC;;;AACA,YAAKnxH,IAAI,CAAC6S,QAAV,EAAqB;AAEpB,cAAMqhJ,iBAAiB,GAAG,SAApBA,iBAAoB,CAAWrhJ,QAAX,EAAsB;AAE/C,iBAAM,IAAI9oB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG8oB,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,EAAvC,EAA6C;AAE5C,kBAAMoqK,SAAS,GAAGthJ,QAAQ,CAAE9oB,KAAF,CAA1B;;AAEA,kBAAKoqK,SAAS,CAACrrK,IAAV,KAAmB4qK,QAAnB,IAA+BS,SAAS,CAACzgH,IAAV,KAAmBggH,QAAvD,EAAkE;AAEjE,uBAAOS,SAAP;AAEA;;AAED,kBAAM1+J,MAAM,GAAGy+J,iBAAiB,CAAEC,SAAS,CAACthJ,QAAZ,CAAhC;AAEA,kBAAKpd,MAAL,EAAc,OAAOA,MAAP;AAEd;;AAED,mBAAO,IAAP;AAEA,WApBD;;AAsBA,cAAM2+J,WAAW,GAAGF,iBAAiB,CAAEl0J,IAAI,CAAC6S,QAAP,CAArC;;AAEA,cAAKuhJ,WAAL,EAAmB;AAElB,mBAAOA,WAAP;AAEA;AAED;;AAED,eAAO,IAAP;AAEA;AAzI8B,KAAhC;AA6IA9oK,UAAM,CAACiiC,MAAP,CAAewlI,eAAe,CAAC9xJ,SAA/B,EAA0C;AAAE;AAE3C;AACAozJ,2BAAqB,EAAE,iCAAY,CAAE,CAHI;AAIzCC,2BAAqB,EAAE,iCAAY,CAAE,CAJI;AAMzCC,iBAAW,EAAE;AACZC,cAAM,EAAE,CADI;AAEZC,mBAAW,EAAE,CAFD;AAGZC,oBAAY,EAAE,CAHF;AAIZC,sBAAc,EAAE;AAJJ,OAN4B;AAazCC,gBAAU,EAAE;AACXC,YAAI,EAAE,CADK;AAEXC,mBAAW,EAAE,CAFF;AAGXC,8BAAsB,EAAE;AAHb,OAb6B;AAmBzCC,yBAAmB,EAAE,CAEpB,SAASC,eAAT,CAA0BntI,MAA1B,EAAkCriB,MAAlC,EAA2C;AAE1CqiB,cAAM,CAAEriB,MAAF,CAAN,GAAmB,KAAK7I,IAAL,CAAW,KAAKi1I,YAAhB,CAAnB;AAEA,OANmB,EAQpB,SAASqjB,cAAT,CAAyBptI,MAAzB,EAAiCriB,MAAjC,EAA0C;AAEzC,YAAMihC,MAAM,GAAG,KAAKyuH,gBAApB;;AAEA,aAAM,IAAIprK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGgsB,MAAM,CAACt9C,MAA5B,EAAoCW,KAAC,KAAK2wB,CAA1C,EAA6C,EAAG3wB,KAAhD,EAAoD;AAEnD+9B,gBAAM,CAAEriB,MAAM,EAAR,CAAN,GAAsBihC,MAAM,CAAE38C,KAAF,CAA5B;AAEA;AAED,OAlBmB,EAoBpB,SAASqrK,qBAAT,CAAgCttI,MAAhC,EAAwCriB,MAAxC,EAAiD;AAEhDqiB,cAAM,CAAEriB,MAAF,CAAN,GAAmB,KAAK0vJ,gBAAL,CAAuB,KAAKnB,aAA5B,CAAnB;AAEA,OAxBmB,EA0BpB,SAASqB,gBAAT,CAA2BvtI,MAA3B,EAAmCriB,MAAnC,EAA4C;AAE3C,aAAK0vJ,gBAAL,CAAsB98G,OAAtB,CAA+BvwB,MAA/B,EAAuCriB,MAAvC;AAEA,OA9BmB,CAnBoB;AAqDzC6vJ,sCAAgC,EAAE,CAEjC,CACC;AAEA,eAASC,eAAT,CAA0BztI,MAA1B,EAAkCriB,MAAlC,EAA2C;AAE1C,aAAK+vJ,YAAL,CAAmB,KAAK3jB,YAAxB,IAAyC/pH,MAAM,CAAEriB,MAAF,CAA/C;AAEA,OAPF,EASC,SAASgwJ,8BAAT,CAAyC3tI,MAAzC,EAAiDriB,MAAjD,EAA0D;AAEzD,aAAK+vJ,YAAL,CAAmB,KAAK3jB,YAAxB,IAAyC/pH,MAAM,CAAEriB,MAAF,CAA/C;AACA,aAAK+vJ,YAAL,CAAkBzpJ,WAAlB,GAAgC,IAAhC;AAEA,OAdF,EAgBC,SAAS2pJ,yCAAT,CAAoD5tI,MAApD,EAA4DriB,MAA5D,EAAqE;AAEpE,aAAK+vJ,YAAL,CAAmB,KAAK3jB,YAAxB,IAAyC/pH,MAAM,CAAEriB,MAAF,CAA/C;AACA,aAAK+vJ,YAAL,CAAkB3lG,sBAAlB,GAA2C,IAA3C;AAEA,OArBF,CAFiC,EAyB9B,CAEF;AAEA,eAAS8lG,cAAT,CAAyB7tI,MAAzB,EAAiCriB,MAAjC,EAA0C;AAEzC,YAAMmwJ,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,aAAM,IAAIprK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGk7I,IAAI,CAACxsK,MAA1B,EAAkCW,KAAC,KAAK2wB,CAAxC,EAA2C,EAAG3wB,KAA9C,EAAkD;AAEjD6rK,cAAI,CAAE7rK,KAAF,CAAJ,GAAY+9B,MAAM,CAAEriB,MAAM,EAAR,CAAlB;AAEA;AAED,OAdC,EAgBF,SAASowJ,6BAAT,CAAwC/tI,MAAxC,EAAgDriB,MAAhD,EAAyD;AAExD,YAAMmwJ,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,aAAM,IAAIprK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGk7I,IAAI,CAACxsK,MAA1B,EAAkCW,KAAC,KAAK2wB,CAAxC,EAA2C,EAAG3wB,KAA9C,EAAkD;AAEjD6rK,cAAI,CAAE7rK,KAAF,CAAJ,GAAY+9B,MAAM,CAAEriB,MAAM,EAAR,CAAlB;AAEA;;AAED,aAAK+vJ,YAAL,CAAkBzpJ,WAAlB,GAAgC,IAAhC;AAEA,OA5BC,EA8BF,SAAS+pJ,wCAAT,CAAmDhuI,MAAnD,EAA2DriB,MAA3D,EAAoE;AAEnE,YAAMmwJ,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,aAAM,IAAIprK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGk7I,IAAI,CAACxsK,MAA1B,EAAkCW,KAAC,KAAK2wB,CAAxC,EAA2C,EAAG3wB,KAA9C,EAAkD;AAEjD6rK,cAAI,CAAE7rK,KAAF,CAAJ,GAAY+9B,MAAM,CAAEriB,MAAM,EAAR,CAAlB;AAEA;;AAED,aAAK+vJ,YAAL,CAAkB3lG,sBAAlB,GAA2C,IAA3C;AAEA,OA1CC,CAzB8B,EAqE9B,CAEF;AAEA,eAASkmG,qBAAT,CAAgCjuI,MAAhC,EAAwCriB,MAAxC,EAAiD;AAEhD,aAAK0vJ,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8ClsI,MAAM,CAAEriB,MAAF,CAApD;AAEA,OARC,EAUF,SAASuwJ,oCAAT,CAA+CluI,MAA/C,EAAuDriB,MAAvD,EAAgE;AAE/D,aAAK0vJ,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8ClsI,MAAM,CAAEriB,MAAF,CAApD;AACA,aAAK+vJ,YAAL,CAAkBzpJ,WAAlB,GAAgC,IAAhC;AAEA,OAfC,EAiBF,SAASkqJ,+CAAT,CAA0DnuI,MAA1D,EAAkEriB,MAAlE,EAA2E;AAE1E,aAAK0vJ,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8ClsI,MAAM,CAAEriB,MAAF,CAApD;AACA,aAAK+vJ,YAAL,CAAkB3lG,sBAAlB,GAA2C,IAA3C;AAEA,OAtBC,CArE8B,EA6F9B,CAEF;AAEA,eAASqmG,kBAAT,CAA6BpuI,MAA7B,EAAqCriB,MAArC,EAA8C;AAE7C,aAAK0vJ,gBAAL,CAAsB/8G,SAAtB,CAAiCtwB,MAAjC,EAAyCriB,MAAzC;AAEA,OARC,EAUF,SAAS0wJ,iCAAT,CAA4CruI,MAA5C,EAAoDriB,MAApD,EAA6D;AAE5D,aAAK0vJ,gBAAL,CAAsB/8G,SAAtB,CAAiCtwB,MAAjC,EAAyCriB,MAAzC;AACA,aAAK+vJ,YAAL,CAAkBzpJ,WAAlB,GAAgC,IAAhC;AAEA,OAfC,EAiBF,SAASqqJ,4CAAT,CAAuDtuI,MAAvD,EAA+DriB,MAA/D,EAAwE;AAEvE,aAAK0vJ,gBAAL,CAAsB/8G,SAAtB,CAAiCtwB,MAAjC,EAAyCriB,MAAzC;AACA,aAAK+vJ,YAAL,CAAkB3lG,sBAAlB,GAA2C,IAA3C;AAEA,OAtBC,CA7F8B,CArDO;AA8KzC+hG,cAAQ,EAAE,SAASyE,gBAAT,CAA2BC,WAA3B,EAAwC7wJ,MAAxC,EAAiD;AAE1D,aAAK3J,IAAL;AACA,aAAK81J,QAAL,CAAe0E,WAAf,EAA4B7wJ,MAA5B,EAH0D,CAK1D;AACA;AACA;AACA;AACA;AAEA,OAzLwC;AA2LzC+xF,cAAQ,EAAE,SAAS6+D,gBAAT,CAA2BE,WAA3B,EAAwC9wJ,MAAxC,EAAiD;AAE1D,aAAK3J,IAAL;AACA,aAAK07F,QAAL,CAAe++D,WAAf,EAA4B9wJ,MAA5B;AAEA,OAhMwC;AAkMzC;AACA3J,UAAI,EAAE,gBAAY;AAEjB,YAAI05J,YAAY,GAAG,KAAK54J,IAAxB;AAAA,YACCk2J,UAAU,GAAG,KAAKA,UADnB;AAAA,YAGCgB,UAAU,GAAGhB,UAAU,CAACgB,UAHzB;AAAA,YAICjiB,YAAY,GAAGihB,UAAU,CAACjhB,YAJ3B;AAAA,YAKCmiB,aAAa,GAAGlB,UAAU,CAACkB,aAL5B;;AAOA,YAAK,CAAEwB,YAAP,EAAsB;AAErBA,sBAAY,GAAGzC,eAAe,CAACU,QAAhB,CAA0B,KAAKD,QAA/B,EAAyCV,UAAU,CAACY,QAApD,KAAkE,KAAKF,QAAtF;AAEA,eAAK52J,IAAL,GAAY44J,YAAZ;AAEA,SAfgB,CAiBjB;;;AACA,aAAK5D,QAAL,GAAgB,KAAKyC,qBAArB;AACA,aAAK78D,QAAL,GAAgB,KAAK88D,qBAArB,CAnBiB,CAqBjB;;AACA,YAAK,CAAEkB,YAAP,EAAsB;AAErBtqK,iBAAO,CAACD,KAAR,CAAe,6DAA6D,KAAKmC,IAAlE,GAAyE,wBAAxF;AACA;AAEA;;AAED,YAAK0mK,UAAL,EAAkB;AAEjB,cAAIC,WAAW,GAAGjB,UAAU,CAACiB,WAA7B,CAFiB,CAIjB;;AACA,kBAASD,UAAT;AAEC,iBAAK,WAAL;AAEC,kBAAK,CAAE0B,YAAY,CAACj8I,QAApB,EAA+B;AAE9BruB,uBAAO,CAACD,KAAR,CAAe,mFAAf,EAAoG,IAApG;AACA;AAEA;;AAED,kBAAK,CAAEuqK,YAAY,CAACj8I,QAAb,CAAsBo5C,SAA7B,EAAyC;AAExCznE,uBAAO,CAACD,KAAR,CAAe,6GAAf,EAA8H,IAA9H;AACA;AAEA;;AAEDuqK,0BAAY,GAAGA,YAAY,CAACj8I,QAAb,CAAsBo5C,SAArC;AAEA;;AAED,iBAAK,OAAL;AAEC,kBAAK,CAAE6iG,YAAY,CAAChvD,QAApB,EAA+B;AAE9Bt7G,uBAAO,CAACD,KAAR,CAAe,gFAAf,EAAiG,IAAjG;AACA;AAEA,eAPF,CASC;AACA;;;AAEAuqK,0BAAY,GAAGA,YAAY,CAAChvD,QAAb,CAAsBC,KAArC,CAZD,CAcC;;AACA,mBAAM,IAAI18G,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGyrK,YAAY,CAACpsK,MAAlC,EAA0CW,KAAC,EAA3C,EAAiD;AAEhD,oBAAKyrK,YAAY,CAAEzrK,KAAF,CAAZ,CAAkBjB,IAAlB,KAA2BirK,WAAhC,EAA8C;AAE7CA,6BAAW,GAAGhqK,KAAd;AACA;AAEA;AAED;;AAED;;AAED;AAEC,kBAAKyrK,YAAY,CAAE1B,UAAF,CAAZ,KAA+B37J,SAApC,EAAgD;AAE/CjN,uBAAO,CAACD,KAAR,CAAe,sEAAf,EAAuF,IAAvF;AACA;AAEA;;AAEDuqK,0BAAY,GAAGA,YAAY,CAAE1B,UAAF,CAA3B;AA3DF;;AAgEA,cAAKC,WAAW,KAAK57J,SAArB,EAAiC;AAEhC,gBAAKq9J,YAAY,CAAEzB,WAAF,CAAZ,KAAgC57J,SAArC,EAAiD;AAEhDjN,qBAAO,CAACD,KAAR,CAAe,uFAAf,EAAwG,IAAxG,EAA8GuqK,YAA9G;AACA;AAEA;;AAEDA,wBAAY,GAAGA,YAAY,CAAEzB,WAAF,CAA3B;AAEA;AAED,SA/GgB,CAiHjB;;;AACA,YAAMyC,YAAY,GAAGhB,YAAY,CAAE3jB,YAAF,CAAjC;;AAEA,YAAK2kB,YAAY,KAAKr+J,SAAtB,EAAkC;AAEjC,cAAMu7J,QAAQ,GAAGZ,UAAU,CAACY,QAA5B;AAEAxoK,iBAAO,CAACD,KAAR,CAAe,iEAAiEyoK,QAAjE,GACd,GADc,GACR7hB,YADQ,GACO,wBADtB,EACgD2jB,YADhD;AAEA;AAEA,SA5HgB,CA8HjB;;;AACA,YAAIiB,UAAU,GAAG,KAAK7B,UAAL,CAAgBC,IAAjC;AAEA,aAAKW,YAAL,GAAoBA,YAApB;;AAEA,YAAKA,YAAY,CAACzpJ,WAAb,KAA6B5T,SAAlC,EAA8C;AAAE;AAE/Cs+J,oBAAU,GAAG,KAAK7B,UAAL,CAAgBE,WAA7B;AAEA,SAJD,MAIO,IAAKU,YAAY,CAAC3lG,sBAAb,KAAwC13D,SAA7C,EAAyD;AAAE;AAEjEs+J,oBAAU,GAAG,KAAK7B,UAAL,CAAgBG,sBAA7B;AAEA,SA3IgB,CA6IjB;;;AACA,YAAI2B,WAAW,GAAG,KAAKnC,WAAL,CAAiBC,MAAnC;;AAEA,YAAKR,aAAa,KAAK77J,SAAvB,EAAmC;AAElC;AAEA,cAAK05I,YAAY,KAAK,uBAAtB,EAAgD;AAE/C;AAEA;AACA,gBAAK,CAAE2jB,YAAY,CAACniG,QAApB,EAA+B;AAE9BnoE,qBAAO,CAACD,KAAR,CAAe,qGAAf,EAAsH,IAAtH;AACA;AAEA;;AAED,gBAAKuqK,YAAY,CAACniG,QAAb,CAAsB2Z,gBAA3B,EAA8C;AAE7C,kBAAK,CAAEwoF,YAAY,CAACniG,QAAb,CAAsBwZ,eAA7B,EAA+C;AAE9C3hF,uBAAO,CAACD,KAAR,CAAe,qHAAf,EAAsI,IAAtI;AACA;AAEA;;AAED,kBAAKuqK,YAAY,CAAC7jF,qBAAb,CAAoCqiF,aAApC,MAAwD77J,SAA7D,EAAyE;AAExE67J,6BAAa,GAAGwB,YAAY,CAAC7jF,qBAAb,CAAoCqiF,aAApC,CAAhB;AAEA;AAGD,aAhBD,MAgBO;AAEN9oK,qBAAO,CAACD,KAAR,CAAe,mHAAf,EAAoI,IAApI;AACA;AAEA;AAED;;AAEDyrK,qBAAW,GAAG,KAAKnC,WAAL,CAAiBG,YAA/B;AAEA,eAAKS,gBAAL,GAAwBqB,YAAxB;AACA,eAAKxC,aAAL,GAAqBA,aAArB;AAEA,SA9CD,MA8CO,IAAKwC,YAAY,CAACp+G,SAAb,KAA2BjgD,SAA3B,IAAwCq+J,YAAY,CAACn+G,OAAb,KAAyBlgD,SAAtE,EAAkF;AAExF;AAEAu+J,qBAAW,GAAG,KAAKnC,WAAL,CAAiBI,cAA/B;AAEA,eAAKQ,gBAAL,GAAwBqB,YAAxB;AAEA,SARM,MAQA,IAAKh7I,KAAK,CAAC0jC,OAAN,CAAes3G,YAAf,CAAL,EAAqC;AAE3CE,qBAAW,GAAG,KAAKnC,WAAL,CAAiBE,WAA/B;AAEA,eAAKU,gBAAL,GAAwBqB,YAAxB;AAEA,SANM,MAMA;AAEN,eAAK3kB,YAAL,GAAoBA,YAApB;AAEA,SAhNgB,CAkNjB;;;AACA,aAAK+f,QAAL,GAAgB,KAAKoD,mBAAL,CAA0B0B,WAA1B,CAAhB;AACA,aAAKl/D,QAAL,GAAgB,KAAK89D,gCAAL,CAAuCoB,WAAvC,EAAsDD,UAAtD,CAAhB;AAEA,OAzZwC;AA2ZzClD,YAAM,EAAE,kBAAY;AAEnB,aAAK32J,IAAL,GAAY,IAAZ,CAFmB,CAInB;AACA;;AACA,aAAKg1J,QAAL,GAAgB,KAAK+E,iBAArB;AACA,aAAKn/D,QAAL,GAAgB,KAAKo/D,iBAArB;AAEA;AApawC,KAA1C,E,CAwaA;;AACAtrK,UAAM,CAACiiC,MAAP,CAAewlI,eAAe,CAAC9xJ,SAA/B,EAA0C;AAEzC;AACA01J,uBAAiB,EAAE5D,eAAe,CAAC9xJ,SAAhB,CAA0B2wJ,QAHJ;AAIzCgF,uBAAiB,EAAE7D,eAAe,CAAC9xJ,SAAhB,CAA0Bu2F;AAJJ,KAA1C;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,aAASq/D,oBAAT,GAAgC;AAE/B,WAAKnjH,IAAL,GAAYR,SAAS,CAACG,YAAV,EAAZ,CAF+B,CAI/B;;AACA,WAAKw5D,QAAL,GAAgBrxF,KAAK,CAACva,SAAN,CAAgBzY,KAAhB,CAAsB4V,IAAtB,CAA4BiB,SAA5B,CAAhB;AAEA,WAAKg0J,eAAL,GAAuB,CAAvB,CAP+B,CAOL;AAC1B;;AAEA,UAAMtjF,OAAO,GAAG,EAAhB;AACA,WAAK+mF,cAAL,GAAsB/mF,OAAtB,CAX+B,CAWA;;AAE/B,WAAM,IAAIhmF,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGrb,SAAS,CAACjW,MAA/B,EAAuCW,KAAC,KAAK2wB,CAA7C,EAAgD,EAAG3wB,KAAnD,EAAuD;AAEtDgmF,eAAO,CAAE1wE,SAAS,CAAEtV,KAAF,CAAT,CAAe2pD,IAAjB,CAAP,GAAiC3pD,KAAjC;AAEA;;AAED,WAAKgtK,MAAL,GAAc,EAAd,CAnB+B,CAmBb;;AAClB,WAAKC,YAAL,GAAoB,EAApB,CApB+B,CAoBP;;AACxB,WAAK9D,SAAL,GAAiB,EAAjB,CArB+B,CAqBV;;AACrB,WAAK+D,sBAAL,GAA8B,EAA9B,CAtB+B,CAsBG;;AAElC,UAAMjyJ,KAAK,GAAG,IAAd;AAEA,WAAKkyJ,KAAL,GAAa;AAEZxqE,eAAO,EAAE;AACR,cAAIpiG,KAAJ,GAAY;AAEX,mBAAO0a,KAAK,CAAC6nG,QAAN,CAAezjH,MAAtB;AAEA,WALO;;AAMR,cAAI+tK,KAAJ,GAAY;AAEX,mBAAO,KAAK7sK,KAAL,GAAa0a,KAAK,CAACquJ,eAA1B;AAEA;;AAVO,SAFG;;AAcZ,YAAI+D,iBAAJ,GAAwB;AAEvB,iBAAOpyJ,KAAK,CAACkuJ,SAAN,CAAgB9pK,MAAvB;AAEA;;AAlBW,OAAb;AAsBA;;AAEDkC,UAAM,CAACiiC,MAAP,CAAespI,oBAAoB,CAAC51J,SAApC,EAA+C;AAE9C0yJ,4BAAsB,EAAE,IAFsB;AAI9C3sJ,SAAG,EAAE,eAAY;AAEhB,YAAM0lF,OAAO,GAAG,KAAKmgB,QAArB;AAAA,YACCwqD,aAAa,GAAG,KAAKP,cADtB;AAAA,YAEC7Q,KAAK,GAAG,KAAK8Q,MAFd;AAAA,YAGCO,WAAW,GAAG,KAAKN,YAHpB;AAAA,YAIC1D,QAAQ,GAAG,KAAKJ,SAJjB;AAAA,YAKCqE,SAAS,GAAGjE,QAAQ,CAAClqK,MALtB;AAOA,YAAIouK,WAAW,GAAGr/J,SAAlB;AAAA,YACCs/J,QAAQ,GAAG/qE,OAAO,CAACtjG,MADpB;AAAA,YAECsuK,cAAc,GAAG,KAAKrE,eAFvB;;AAIA,aAAM,IAAItpK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGrb,SAAS,CAACjW,MAA/B,EAAuCW,KAAC,KAAK2wB,CAA7C,EAAgD,EAAG3wB,KAAnD,EAAuD;AAEtD,cAAM0O,MAAM,GAAG4G,SAAS,CAAEtV,KAAF,CAAxB;AAAA,cACC2pD,IAAI,GAAGj7C,MAAM,CAACi7C,IADf;AAEA,cAAI7iC,KAAK,GAAGwmJ,aAAa,CAAE3jH,IAAF,CAAzB;;AAEA,cAAK7iC,KAAK,KAAK1Y,SAAf,EAA2B;AAE1B;AAEA0Y,iBAAK,GAAG4mJ,QAAQ,EAAhB;AACAJ,yBAAa,CAAE3jH,IAAF,CAAb,GAAwB7iC,KAAxB;AACA67E,mBAAO,CAACjiG,IAAR,CAAcgO,MAAd,EAN0B,CAQ1B;;AAEA,iBAAM,IAAIpO,CAAC,GAAG,CAAR,EAAWo0B,CAAC,GAAG84I,SAArB,EAAgCltK,CAAC,KAAKo0B,CAAtC,EAAyC,EAAGp0B,CAA5C,EAAgD;AAE/CipK,sBAAQ,CAAEjpK,CAAF,CAAR,CAAcI,IAAd,CAAoB,IAAIsoK,eAAJ,CAAqBt6J,MAArB,EAA6BwtJ,KAAK,CAAE57J,CAAF,CAAlC,EAAyCitK,WAAW,CAAEjtK,CAAF,CAApD,CAApB;AAEA;AAED,WAhBD,MAgBO,IAAKwmB,KAAK,GAAG6mJ,cAAb,EAA8B;AAEpCF,uBAAW,GAAG9qE,OAAO,CAAE77E,KAAF,CAArB,CAFoC,CAIpC;;AAEA,gBAAM8mJ,gBAAgB,GAAG,EAAGD,cAA5B;AAAA,gBACCE,gBAAgB,GAAGlrE,OAAO,CAAEirE,gBAAF,CAD3B;AAGAN,yBAAa,CAAEO,gBAAgB,CAAClkH,IAAnB,CAAb,GAAyC7iC,KAAzC;AACA67E,mBAAO,CAAE77E,KAAF,CAAP,GAAmB+mJ,gBAAnB;AAEAP,yBAAa,CAAE3jH,IAAF,CAAb,GAAwBikH,gBAAxB;AACAjrE,mBAAO,CAAEirE,gBAAF,CAAP,GAA8Bl/J,MAA9B,CAboC,CAepC;;AAEA,iBAAM,IAAIpO,IAAC,GAAG,CAAR,EAAWo0B,GAAC,GAAG84I,SAArB,EAAgCltK,IAAC,KAAKo0B,GAAtC,EAAyC,EAAGp0B,IAA5C,EAAgD;AAE/C,kBAAMwtK,eAAe,GAAGvE,QAAQ,CAAEjpK,IAAF,CAAhC;AAAA,kBACCytK,UAAU,GAAGD,eAAe,CAAEF,gBAAF,CAD7B;AAGA,kBAAI5H,OAAO,GAAG8H,eAAe,CAAEhnJ,KAAF,CAA7B;AAEAgnJ,6BAAe,CAAEhnJ,KAAF,CAAf,GAA2BinJ,UAA3B;;AAEA,kBAAK/H,OAAO,KAAK53J,SAAjB,EAA6B;AAE5B;AACA;AACA;AAEA43J,uBAAO,GAAG,IAAIgD,eAAJ,CAAqBt6J,MAArB,EAA6BwtJ,KAAK,CAAE57J,IAAF,CAAlC,EAAyCitK,WAAW,CAAEjtK,IAAF,CAApD,CAAV;AAEA;;AAEDwtK,6BAAe,CAAEF,gBAAF,CAAf,GAAsC5H,OAAtC;AAEA;AAED,WAxCM,MAwCA,IAAKrjE,OAAO,CAAE77E,KAAF,CAAP,KAAqB2mJ,WAA1B,EAAwC;AAE9CtsK,mBAAO,CAACD,KAAR,CAAe,sEACd,mFADD;AAGA,WAnEqD,CAmEpD;;AAEF,SAlFe,CAkFd;;;AAEF,aAAKooK,eAAL,GAAuBqE,cAAvB;AAEA,OA1F6C;AA4F9C55J,YAAM,EAAE,kBAAY;AAEnB,YAAM4uF,OAAO,GAAG,KAAKmgB,QAArB;AAAA,YACCwqD,aAAa,GAAG,KAAKP,cADtB;AAAA,YAECxD,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,YAGCqE,SAAS,GAAGjE,QAAQ,CAAClqK,MAHtB;AAKA,YAAIsuK,cAAc,GAAG,KAAKrE,eAA1B;;AAEA,aAAM,IAAItpK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGrb,SAAS,CAACjW,MAA/B,EAAuCW,KAAC,KAAK2wB,CAA7C,EAAgD,EAAG3wB,KAAnD,EAAuD;AAEtD,cAAM0O,MAAM,GAAG4G,SAAS,CAAEtV,KAAF,CAAxB;AAAA,cACC2pD,IAAI,GAAGj7C,MAAM,CAACi7C,IADf;AAAA,cAEC7iC,KAAK,GAAGwmJ,aAAa,CAAE3jH,IAAF,CAFtB;;AAIA,cAAK7iC,KAAK,KAAK1Y,SAAV,IAAuB0Y,KAAK,IAAI6mJ,cAArC,EAAsD;AAErD;AAEA,gBAAMK,eAAe,GAAGL,cAAc,EAAtC;AAAA,gBACCM,iBAAiB,GAAGtrE,OAAO,CAAEqrE,eAAF,CAD5B;AAGAV,yBAAa,CAAEW,iBAAiB,CAACtkH,IAApB,CAAb,GAA0C7iC,KAA1C;AACA67E,mBAAO,CAAE77E,KAAF,CAAP,GAAmBmnJ,iBAAnB;AAEAX,yBAAa,CAAE3jH,IAAF,CAAb,GAAwBqkH,eAAxB;AACArrE,mBAAO,CAAEqrE,eAAF,CAAP,GAA6Bt/J,MAA7B,CAXqD,CAarD;;AAEA,iBAAM,IAAIpO,CAAC,GAAG,CAAR,EAAWo0B,CAAC,GAAG84I,SAArB,EAAgCltK,CAAC,KAAKo0B,CAAtC,EAAyC,EAAGp0B,CAA5C,EAAgD;AAE/C,kBAAMwtK,eAAe,GAAGvE,QAAQ,CAAEjpK,CAAF,CAAhC;AAAA,kBACC4tK,WAAW,GAAGJ,eAAe,CAAEE,eAAF,CAD9B;AAAA,kBAEChI,OAAO,GAAG8H,eAAe,CAAEhnJ,KAAF,CAF1B;AAIAgnJ,6BAAe,CAAEhnJ,KAAF,CAAf,GAA2BonJ,WAA3B;AACAJ,6BAAe,CAAEE,eAAF,CAAf,GAAqChI,OAArC;AAEA;AAED;AAED,SA3CkB,CA2CjB;;;AAEF,aAAKsD,eAAL,GAAuBqE,cAAvB;AAEA,OA3I6C;AA6I9C;AACAQ,aAAO,EAAE,mBAAY;AAEpB,YAAMxrE,OAAO,GAAG,KAAKmgB,QAArB;AAAA,YACCwqD,aAAa,GAAG,KAAKP,cADtB;AAAA,YAECxD,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,YAGCqE,SAAS,GAAGjE,QAAQ,CAAClqK,MAHtB;AAKA,YAAIsuK,cAAc,GAAG,KAAKrE,eAA1B;AAAA,YACCoE,QAAQ,GAAG/qE,OAAO,CAACtjG,MADpB;;AAGA,aAAM,IAAIW,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAGrb,SAAS,CAACjW,MAA/B,EAAuCW,KAAC,KAAK2wB,CAA7C,EAAgD,EAAG3wB,KAAnD,EAAuD;AAEtD,cAAM0O,MAAM,GAAG4G,SAAS,CAAEtV,KAAF,CAAxB;AAAA,cACC2pD,IAAI,GAAGj7C,MAAM,CAACi7C,IADf;AAAA,cAEC7iC,KAAK,GAAGwmJ,aAAa,CAAE3jH,IAAF,CAFtB;;AAIA,cAAK7iC,KAAK,KAAK1Y,SAAf,EAA2B;AAE1B,mBAAOk/J,aAAa,CAAE3jH,IAAF,CAApB;;AAEA,gBAAK7iC,KAAK,GAAG6mJ,cAAb,EAA8B;AAE7B;AAEA,kBAAMC,gBAAgB,GAAG,EAAGD,cAA5B;AAAA,kBACCE,gBAAgB,GAAGlrE,OAAO,CAAEirE,gBAAF,CAD3B;AAAA,kBAECx6D,SAAS,GAAG,EAAGs6D,QAFhB;AAAA,kBAGCU,UAAU,GAAGzrE,OAAO,CAAEyQ,SAAF,CAHrB,CAJ6B,CAS7B;;AACAk6D,2BAAa,CAAEO,gBAAgB,CAAClkH,IAAnB,CAAb,GAAyC7iC,KAAzC;AACA67E,qBAAO,CAAE77E,KAAF,CAAP,GAAmB+mJ,gBAAnB,CAX6B,CAa7B;;AACAP,2BAAa,CAAEc,UAAU,CAACzkH,IAAb,CAAb,GAAmCikH,gBAAnC;AACAjrE,qBAAO,CAAEirE,gBAAF,CAAP,GAA8BQ,UAA9B;AACAzrE,qBAAO,CAACqb,GAAR,GAhB6B,CAkB7B;;AAEA,mBAAM,IAAI19G,CAAC,GAAG,CAAR,EAAWo0B,CAAC,GAAG84I,SAArB,EAAgCltK,CAAC,KAAKo0B,CAAtC,EAAyC,EAAGp0B,CAA5C,EAAgD;AAE/C,oBAAMwtK,eAAe,GAAGvE,QAAQ,CAAEjpK,CAAF,CAAhC;AAAA,oBACCytK,UAAU,GAAGD,eAAe,CAAEF,gBAAF,CAD7B;AAAA,oBAECj/H,IAAI,GAAGm/H,eAAe,CAAE16D,SAAF,CAFvB;AAIA06D,+BAAe,CAAEhnJ,KAAF,CAAf,GAA2BinJ,UAA3B;AACAD,+BAAe,CAAEF,gBAAF,CAAf,GAAsCj/H,IAAtC;AACAm/H,+BAAe,CAAC9vD,GAAhB;AAEA;AAED,aAhCD,MAgCO;AAEN;AAEA,kBAAM5K,UAAS,GAAG,EAAGs6D,QAArB;AAAA,kBACCU,WAAU,GAAGzrE,OAAO,CAAEyQ,UAAF,CADrB;;AAGAk6D,2BAAa,CAAEc,WAAU,CAACzkH,IAAb,CAAb,GAAmC7iC,KAAnC;AACA67E,qBAAO,CAAE77E,KAAF,CAAP,GAAmBsnJ,WAAnB;AACAzrE,qBAAO,CAACqb,GAAR,GATM,CAWN;;AAEA,mBAAM,IAAI19G,IAAC,GAAG,CAAR,EAAWo0B,GAAC,GAAG84I,SAArB,EAAgCltK,IAAC,KAAKo0B,GAAtC,EAAyC,EAAGp0B,IAA5C,EAAgD;AAE/C,oBAAMwtK,gBAAe,GAAGvE,QAAQ,CAAEjpK,IAAF,CAAhC;AAEAwtK,gCAAe,CAAEhnJ,KAAF,CAAf,GAA2BgnJ,gBAAe,CAAE16D,UAAF,CAA1C;;AACA06D,gCAAe,CAAC9vD,GAAhB;AAEA;AAED,aA1DyB,CA0DxB;;AAEF,WAlEqD,CAkEpD;;AAEF,SA9EmB,CA8ElB;;;AAEF,aAAKsrD,eAAL,GAAuBqE,cAAvB;AAEA,OAhO6C;AAkO9C;AAEAvE,gBAAU,EAAE,oBAAW/lK,IAAX,EAAiB0lK,UAAjB,EAA8B;AAEzC;AACA;AAEA,YAAIsF,aAAa,GAAG,KAAKnB,sBAAzB;AAAA,YACCpmJ,KAAK,GAAGunJ,aAAa,CAAEhrK,IAAF,CADtB;AAAA,YAECkmK,QAAQ,GAAG,KAAKJ,SAFjB;AAIA,YAAKriJ,KAAK,KAAK1Y,SAAf,EAA2B,OAAOm7J,QAAQ,CAAEziJ,KAAF,CAAf;AAE3B,YAAMo1I,KAAK,GAAG,KAAK8Q,MAAnB;AAAA,YACCO,WAAW,GAAG,KAAKN,YADpB;AAAA,YAECtqE,OAAO,GAAG,KAAKmgB,QAFhB;AAAA,YAGC4qD,QAAQ,GAAG/qE,OAAO,CAACtjG,MAHpB;AAAA,YAICsuK,cAAc,GAAG,KAAKrE,eAJvB;AAAA,YAKCwE,eAAe,GAAG,IAAIr8I,KAAJ,CAAWi8I,QAAX,CALnB;AAOA5mJ,aAAK,GAAGyiJ,QAAQ,CAAClqK,MAAjB;AAEAgvK,qBAAa,CAAEhrK,IAAF,CAAb,GAAwByjB,KAAxB;AAEAo1I,aAAK,CAACx7J,IAAN,CAAY2C,IAAZ;AACAkqK,mBAAW,CAAC7sK,IAAZ,CAAkBqoK,UAAlB;AACAQ,gBAAQ,CAAC7oK,IAAT,CAAeotK,eAAf;;AAEA,aAAM,IAAI9tK,KAAC,GAAG2tK,cAAR,EAAwBh9I,CAAC,GAAGgyE,OAAO,CAACtjG,MAA1C,EAAkDW,KAAC,KAAK2wB,CAAxD,EAA2D,EAAG3wB,KAA9D,EAAkE;AAEjE,cAAM0O,MAAM,GAAGi0F,OAAO,CAAE3iG,KAAF,CAAtB;AACA8tK,yBAAe,CAAE9tK,KAAF,CAAf,GAAuB,IAAIgpK,eAAJ,CAAqBt6J,MAArB,EAA6BrL,IAA7B,EAAmC0lK,UAAnC,CAAvB;AAEA;;AAED,eAAO+E,eAAP;AAEA,OAvQ6C;AAyQ9CQ,kBAAY,EAAE,sBAAWjrK,IAAX,EAAkB;AAE/B;AACA;AAEA,YAAMgrK,aAAa,GAAG,KAAKnB,sBAA3B;AAAA,YACCpmJ,KAAK,GAAGunJ,aAAa,CAAEhrK,IAAF,CADtB;;AAGA,YAAKyjB,KAAK,KAAK1Y,SAAf,EAA2B;AAE1B,cAAM8tJ,KAAK,GAAG,KAAK8Q,MAAnB;AAAA,cACCO,WAAW,GAAG,KAAKN,YADpB;AAAA,cAEC1D,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,cAGCoF,iBAAiB,GAAGhF,QAAQ,CAAClqK,MAAT,GAAkB,CAHvC;AAAA,cAICmvK,YAAY,GAAGjF,QAAQ,CAAEgF,iBAAF,CAJxB;AAAA,cAKCE,gBAAgB,GAAGprK,IAAI,CAAEkrK,iBAAF,CALxB;AAOAF,uBAAa,CAAEI,gBAAF,CAAb,GAAoC3nJ,KAApC;AAEAyiJ,kBAAQ,CAAEziJ,KAAF,CAAR,GAAoB0nJ,YAApB;AACAjF,kBAAQ,CAACvrD,GAAT;AAEAuvD,qBAAW,CAAEzmJ,KAAF,CAAX,GAAuBymJ,WAAW,CAAEgB,iBAAF,CAAlC;AACAhB,qBAAW,CAACvvD,GAAZ;AAEAk+C,eAAK,CAAEp1I,KAAF,CAAL,GAAiBo1I,KAAK,CAAEqS,iBAAF,CAAtB;AACArS,eAAK,CAACl+C,GAAN;AAEA;AAED;AAvS6C,KAA/C;;AA2SA,aAAS0wD,eAAT,CAA0BC,KAA1B,EAAiCtvB,IAAjC,EAAuCuvB,SAAvC,EAAkD7tB,SAAlD,EAA8D;AAE7D,WAAK8tB,MAAL,GAAcF,KAAd;AACA,WAAKG,KAAL,GAAazvB,IAAb;AACA,WAAK0vB,UAAL,GAAkBH,SAAS,IAAI,IAA/B;AACA,WAAK7tB,SAAL,GAAiBA,SAAS,IAAI1B,IAAI,CAAC0B,SAAnC;AAEA,UAAMzB,MAAM,GAAGD,IAAI,CAACC,MAApB;AAAA,UACC0vB,OAAO,GAAG1vB,MAAM,CAACjgJ,MADlB;AAAA,UAEC4vK,YAAY,GAAG,IAAIx9I,KAAJ,CAAWu9I,OAAX,CAFhB;AAIA,UAAME,mBAAmB,GAAG;AAC3BxsB,mBAAW,EAAE18F,mBADc;AAE3B28F,iBAAS,EAAE38F;AAFgB,OAA5B;;AAKA,WAAM,IAAIhmD,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAKgvK,OAAvB,EAAgC,EAAGhvK,KAAnC,EAAuC;AAEtC,YAAMwgJ,WAAW,GAAGlB,MAAM,CAAEt/I,KAAF,CAAN,CAAYygJ,iBAAZ,CAA+B,IAA/B,CAApB;;AACAwuB,oBAAY,CAAEjvK,KAAF,CAAZ,GAAoBwgJ,WAApB;AACAA,mBAAW,CAACyB,QAAZ,GAAuBitB,mBAAvB;AAEA;;AAED,WAAKC,oBAAL,GAA4BD,mBAA5B;AAEA,WAAKE,aAAL,GAAqBH,YAArB,CA1B6D,CA0B1B;AAEnC;;AACA,WAAKI,iBAAL,GAAyB,IAAI59I,KAAJ,CAAWu9I,OAAX,CAAzB;AAEA,WAAKM,WAAL,GAAmB,IAAnB,CA/B6D,CA+BpC;;AACzB,WAAKC,iBAAL,GAAyB,IAAzB,CAhC6D,CAgC9B;;AAE/B,WAAKC,qBAAL,GAA6B,IAA7B;AACA,WAAKC,kBAAL,GAA0B,IAA1B;AAEA,WAAKjO,IAAL,GAAY77G,UAAZ;AACA,WAAK+pH,UAAL,GAAkB,CAAE,CAApB,CAtC6D,CAwC7D;AACA;;AACA,WAAKC,UAAL,GAAkB,IAAlB,CA1C6D,CA4C7D;AACA;;AACA,WAAKpiI,IAAL,GAAY,CAAZ;AAEA,WAAKs3G,SAAL,GAAiB,CAAjB;AACA,WAAK+qB,mBAAL,GAA2B,CAA3B;AAEA,WAAK9oC,MAAL,GAAc,CAAd;AACA,WAAK+oC,gBAAL,GAAwB,CAAxB;AAEA,WAAKC,WAAL,GAAmB53J,QAAnB,CAtD6D,CAsDhC;;AAE7B,WAAK63J,MAAL,GAAc,KAAd,CAxD6D,CAwDxC;;AACrB,WAAKh4J,OAAL,GAAe,IAAf,CAzD6D,CAyDxC;;AAErB,WAAKi4J,iBAAL,GAAyB,KAAzB,CA3D6D,CA2D9B;;AAE/B,WAAKC,gBAAL,GAAwB,IAAxB,CA7D6D,CA6DhC;;AAC7B,WAAKC,cAAL,GAAsB,IAAtB,CA9D6D,CA8DlC;AAE3B;;AAED3uK,UAAM,CAACiiC,MAAP,CAAekrI,eAAe,CAACx3J,SAA/B,EAA0C;AAEzC;AAEA0rJ,UAAI,EAAE,gBAAY;AAEjB,aAAKiM,MAAL,CAAYsB,eAAZ,CAA6B,IAA7B;;AAEA,eAAO,IAAP;AAEA,OAVwC;AAYzCvpK,UAAI,EAAE,gBAAY;AAEjB,aAAKioK,MAAL,CAAYuB,iBAAZ,CAA+B,IAA/B;;AAEA,eAAO,KAAKj1J,KAAL,EAAP;AAEA,OAlBwC;AAoBzCA,WAAK,EAAE,iBAAY;AAElB,aAAK40J,MAAL,GAAc,KAAd;AACA,aAAKh4J,OAAL,GAAe,IAAf;AAEA,aAAKw1B,IAAL,GAAY,CAAZ,CALkB,CAKH;;AACf,aAAKmiI,UAAL,GAAkB,CAAE,CAApB,CANkB,CAMI;;AACtB,aAAKC,UAAL,GAAkB,IAAlB,CAPkB,CAOK;;AAEvB,eAAO,KAAKU,UAAL,GAAkBC,WAAlB,EAAP;AAEA,OA/BwC;AAiCzCC,eAAS,EAAE,qBAAY;AAEtB,eAAO,KAAKx4J,OAAL,IAAgB,CAAE,KAAKg4J,MAAvB,IAAiC,KAAKlrB,SAAL,KAAmB,CAApD,IACN,KAAK8qB,UAAL,KAAoB,IADd,IACsB,KAAKd,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CAD7B;AAGA,OAtCwC;AAwCzC;AACAC,iBAAW,EAAE,uBAAY;AAExB,eAAO,KAAK5B,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CAAP;AAEA,OA7CwC;AA+CzCE,aAAO,EAAE,iBAAWnjI,IAAX,EAAkB;AAE1B,aAAKoiI,UAAL,GAAkBpiI,IAAlB;AAEA,eAAO,IAAP;AAEA,OArDwC;AAuDzCg2H,aAAO,EAAE,iBAAW90H,IAAX,EAAiBqhI,WAAjB,EAA+B;AAEvC,aAAKtO,IAAL,GAAY/yH,IAAZ;AACA,aAAKqhI,WAAL,GAAmBA,WAAnB;AAEA,eAAO,IAAP;AAEA,OA9DwC;AAgEzC;AAEA;AACA;AACA;AACAa,wBAAkB,EAAE,4BAAW7pC,MAAX,EAAoB;AAEvC,aAAKA,MAAL,GAAcA,MAAd,CAFuC,CAIvC;;AACA,aAAK+oC,gBAAL,GAAwB,KAAK93J,OAAL,GAAe+uH,MAAf,GAAwB,CAAhD;AAEA,eAAO,KAAKupC,UAAL,EAAP;AAEA,OA9EwC;AAgFzC;AACAO,wBAAkB,EAAE,8BAAY;AAE/B,eAAO,KAAKf,gBAAZ;AAEA,OArFwC;AAuFzCgB,YAAM,EAAE,gBAAWvqB,QAAX,EAAsB;AAE7B,eAAO,KAAKwqB,eAAL,CAAsBxqB,QAAtB,EAAgC,CAAhC,EAAmC,CAAnC,CAAP;AAEA,OA3FwC;AA6FzCyqB,aAAO,EAAE,iBAAWzqB,QAAX,EAAsB;AAE9B,eAAO,KAAKwqB,eAAL,CAAsBxqB,QAAtB,EAAgC,CAAhC,EAAmC,CAAnC,CAAP;AAEA,OAjGwC;AAmGzC0qB,mBAAa,EAAE,uBAAWC,aAAX,EAA0B3qB,QAA1B,EAAoC4qB,IAApC,EAA2C;AAEzDD,qBAAa,CAACF,OAAd,CAAuBzqB,QAAvB;AACA,aAAKuqB,MAAL,CAAavqB,QAAb;;AAEA,YAAK4qB,IAAL,EAAY;AAEX,cAAMC,cAAc,GAAG,KAAKrC,KAAL,CAAWxoB,QAAlC;AAAA,cACC8qB,eAAe,GAAGH,aAAa,CAACnC,KAAd,CAAoBxoB,QADvC;AAAA,cAGC+qB,aAAa,GAAGD,eAAe,GAAGD,cAHnC;AAAA,cAICG,aAAa,GAAGH,cAAc,GAAGC,eAJlC;AAMAH,uBAAa,CAACC,IAAd,CAAoB,GAApB,EAAyBG,aAAzB,EAAwC/qB,QAAxC;AACA,eAAK4qB,IAAL,CAAWI,aAAX,EAA0B,GAA1B,EAA+BhrB,QAA/B;AAEA;;AAED,eAAO,IAAP;AAEA,OAvHwC;AAyHzCirB,iBAAW,EAAE,qBAAWC,YAAX,EAAyBlrB,QAAzB,EAAmC4qB,IAAnC,EAA0C;AAEtD,eAAOM,YAAY,CAACR,aAAb,CAA4B,IAA5B,EAAkC1qB,QAAlC,EAA4C4qB,IAA5C,CAAP;AAEA,OA7HwC;AA+HzCb,gBAAU,EAAE,sBAAY;AAEvB,YAAIoB,iBAAiB,GAAG,KAAKhC,kBAA7B;;AAEA,YAAKgC,iBAAiB,KAAK,IAA3B,EAAkC;AAEjC,eAAKhC,kBAAL,GAA0B,IAA1B;;AACA,eAAKZ,MAAL,CAAY6C,2BAAZ,CAAyCD,iBAAzC;AAEA;;AAED,eAAO,IAAP;AAEA,OA5IwC;AA8IzC;AAEA;AACA;AACA;AACAE,2BAAqB,EAAE,+BAAW9sB,SAAX,EAAuB;AAE7C,aAAKA,SAAL,GAAiBA,SAAjB;AACA,aAAK+qB,mBAAL,GAA2B,KAAKG,MAAL,GAAc,CAAd,GAAkBlrB,SAA7C;AAEA,eAAO,KAAKyrB,WAAL,EAAP;AAEA,OA1JwC;AA4JzC;AACAsB,2BAAqB,EAAE,iCAAY;AAElC,eAAO,KAAKhC,mBAAZ;AAEA,OAjKwC;AAmKzCiC,iBAAW,EAAE,qBAAWvrB,QAAX,EAAsB;AAElC,aAAKzB,SAAL,GAAiB,KAAKiqB,KAAL,CAAWxoB,QAAX,GAAsBA,QAAvC;AAEA,eAAO,KAAKgqB,WAAL,EAAP;AAEA,OAzKwC;AA2KzCwB,cAAQ,EAAE,kBAAWxU,MAAX,EAAoB;AAE7B,aAAK/vH,IAAL,GAAY+vH,MAAM,CAAC/vH,IAAnB;AACA,aAAKs3G,SAAL,GAAiByY,MAAM,CAACzY,SAAxB;AAEA,eAAO,KAAKyrB,WAAL,EAAP;AAEA,OAlLwC;AAoLzCyB,UAAI,EAAE,cAAWzrB,QAAX,EAAsB;AAE3B,eAAO,KAAK4qB,IAAL,CAAW,KAAKtB,mBAAhB,EAAqC,CAArC,EAAwCtpB,QAAxC,CAAP;AAEA,OAxLwC;AA0LzC4qB,UAAI,EAAE,cAAWc,cAAX,EAA2BC,YAA3B,EAAyC3rB,QAAzC,EAAoD;AAEzD,YAAMqoB,KAAK,GAAG,KAAKE,MAAnB;AAAA,YACC12H,GAAG,GAAGw2H,KAAK,CAACphI,IADb;AAAA,YAECs3G,SAAS,GAAG,KAAKA,SAFlB;AAIA,YAAIrE,WAAW,GAAG,KAAKgvB,qBAAvB;;AAEA,YAAKhvB,WAAW,KAAK,IAArB,EAA4B;AAE3BA,qBAAW,GAAGmuB,KAAK,CAACuD,uBAAN,EAAd;AACA,eAAK1C,qBAAL,GAA6BhvB,WAA7B;AAEA;;AAED,YAAMhC,KAAK,GAAGgC,WAAW,CAACS,kBAA1B;AAAA,YACCt3E,MAAM,GAAG62E,WAAW,CAACU,YADtB;AAGA1C,aAAK,CAAE,CAAF,CAAL,GAAarmG,GAAb;AACAqmG,aAAK,CAAE,CAAF,CAAL,GAAarmG,GAAG,GAAGmuG,QAAnB;AAEA38E,cAAM,CAAE,CAAF,CAAN,GAAcqoG,cAAc,GAAGntB,SAA/B;AACAl7E,cAAM,CAAE,CAAF,CAAN,GAAcsoG,YAAY,GAAGptB,SAA7B;AAEA,eAAO,IAAP;AAEA,OApNwC;AAsNzCyrB,iBAAW,EAAE,uBAAY;AAExB,YAAI6B,oBAAoB,GAAG,KAAK3C,qBAAhC;;AAEA,YAAK2C,oBAAoB,KAAK,IAA9B,EAAqC;AAEpC,eAAK3C,qBAAL,GAA6B,IAA7B;;AACA,eAAKX,MAAL,CAAY6C,2BAAZ,CAAyCS,oBAAzC;AAEA;;AAED,eAAO,IAAP;AAEA,OAnOwC;AAqOzC;AAEAC,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAKvD,MAAZ;AAEA,OA3OwC;AA6OzCwD,aAAO,EAAE,mBAAY;AAEpB,eAAO,KAAKvD,KAAZ;AAEA,OAjPwC;AAmPzCwD,aAAO,EAAE,mBAAY;AAEpB,eAAO,KAAKvD,UAAL,IAAmB,KAAKF,MAAL,CAAY0D,KAAtC;AAEA,OAvPwC;AAyPzC;AAEAC,aAAO,EAAE,iBAAWjlI,IAAX,EAAiBklI,SAAjB,EAA4BC,aAA5B,EAA2CpL,SAA3C,EAAuD;AAE/D;AAEA,YAAK,CAAE,KAAKvvJ,OAAZ,EAAsB;AAErB;AAEA,eAAK46J,aAAL,CAAoBplI,IAApB;;AACA;AAEA;;AAED,YAAM+J,SAAS,GAAG,KAAKq4H,UAAvB;;AAEA,YAAKr4H,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,cAAMs7H,WAAW,GAAG,CAAErlI,IAAI,GAAG+J,SAAT,IAAuBo7H,aAA3C;;AACA,cAAKE,WAAW,GAAG,CAAd,IAAmBF,aAAa,KAAK,CAA1C,EAA8C;AAE7C,mBAF6C,CAErC;AAER,WATwB,CAWzB;;;AAEA,eAAK/C,UAAL,GAAkB,IAAlB,CAbyB,CAaD;;AACxB8C,mBAAS,GAAGC,aAAa,GAAGE,WAA5B;AAEA,SA/B8D,CAiC/D;;;AAEAH,iBAAS,IAAI,KAAKI,gBAAL,CAAuBtlI,IAAvB,CAAb;;AACA,YAAMulI,QAAQ,GAAG,KAAKC,WAAL,CAAkBN,SAAlB,CAAjB,CApC+D,CAsC/D;AACA;;;AAEA,YAAM3rC,MAAM,GAAG,KAAK6rC,aAAL,CAAoBplI,IAApB,CAAf;;AAEA,YAAKu5F,MAAM,GAAG,CAAd,EAAkB;AAEjB,cAAMmoC,YAAY,GAAG,KAAKG,aAA1B;AACA,cAAM4D,cAAc,GAAG,KAAK3D,iBAA5B;;AAEA,kBAAS,KAAKtuB,SAAd;AAEC,iBAAK36F,0BAAL;AAEC,mBAAM,IAAI9lD,CAAC,GAAG,CAAR,EAAWo0B,CAAC,GAAGu6I,YAAY,CAAC5vK,MAAlC,EAA0CiB,CAAC,KAAKo0B,CAAhD,EAAmD,EAAGp0B,CAAtD,EAA0D;AAEzD2uK,4BAAY,CAAE3uK,CAAF,CAAZ,CAAkBogJ,QAAlB,CAA4BoyB,QAA5B;AACAE,8BAAc,CAAE1yK,CAAF,CAAd,CAAoBmnK,kBAApB,CAAwC3gC,MAAxC;AAEA;;AAED;;AAED,iBAAK3gF,wBAAL;AACA;AAEC,mBAAM,IAAI7lD,IAAC,GAAG,CAAR,EAAWo0B,GAAC,GAAGu6I,YAAY,CAAC5vK,MAAlC,EAA0CiB,IAAC,KAAKo0B,GAAhD,EAAmD,EAAGp0B,IAAtD,EAA0D;AAEzD2uK,4BAAY,CAAE3uK,IAAF,CAAZ,CAAkBogJ,QAAlB,CAA4BoyB,QAA5B;;AACAE,8BAAc,CAAE1yK,IAAF,CAAd,CAAoB41B,UAApB,CAAgCoxI,SAAhC,EAA2CxgC,MAA3C;AAEA;;AArBH;AAyBA;AAED,OAtUwC;AAwUzC6rC,mBAAa,EAAE,uBAAWplI,IAAX,EAAkB;AAEhC,YAAIu5F,MAAM,GAAG,CAAb;;AAEA,YAAK,KAAK/uH,OAAV,EAAoB;AAEnB+uH,gBAAM,GAAG,KAAKA,MAAd;AACA,cAAM0Z,WAAW,GAAG,KAAKivB,kBAAzB;;AAEA,cAAKjvB,WAAW,KAAK,IAArB,EAA4B;AAE3B,gBAAMyyB,gBAAgB,GAAGzyB,WAAW,CAACE,QAAZ,CAAsBnzG,IAAtB,EAA8B,CAA9B,CAAzB;AAEAu5F,kBAAM,IAAImsC,gBAAV;;AAEA,gBAAK1lI,IAAI,GAAGizG,WAAW,CAACS,kBAAZ,CAAgC,CAAhC,CAAZ,EAAkD;AAEjD,mBAAKovB,UAAL;;AAEA,kBAAK4C,gBAAgB,KAAK,CAA1B,EAA8B;AAE7B;AACA,qBAAKl7J,OAAL,GAAe,KAAf;AAEA;AAED;AAED;AAED;;AAED,aAAK83J,gBAAL,GAAwB/oC,MAAxB;AACA,eAAOA,MAAP;AAEA,OA3WwC;AA6WzC+rC,sBAAgB,EAAE,0BAAWtlI,IAAX,EAAkB;AAEnC,YAAIs3G,SAAS,GAAG,CAAhB;;AAEA,YAAK,CAAE,KAAKkrB,MAAZ,EAAqB;AAEpBlrB,mBAAS,GAAG,KAAKA,SAAjB;AAEA,cAAMrE,WAAW,GAAG,KAAKgvB,qBAAzB;;AAEA,cAAKhvB,WAAW,KAAK,IAArB,EAA4B;AAE3B,gBAAMyyB,gBAAgB,GAAGzyB,WAAW,CAACE,QAAZ,CAAsBnzG,IAAtB,EAA8B,CAA9B,CAAzB;AAEAs3G,qBAAS,IAAIouB,gBAAb;;AAEA,gBAAK1lI,IAAI,GAAGizG,WAAW,CAACS,kBAAZ,CAAgC,CAAhC,CAAZ,EAAkD;AAEjD,mBAAKqvB,WAAL;;AAEA,kBAAKzrB,SAAS,KAAK,CAAnB,EAAuB;AAEtB;AACA,qBAAKkrB,MAAL,GAAc,IAAd;AAEA,eALD,MAKO;AAEN;AACA,qBAAKlrB,SAAL,GAAiBA,SAAjB;AAEA;AAED;AAED;AAED;;AAED,aAAK+qB,mBAAL,GAA2B/qB,SAA3B;AACA,eAAOA,SAAP;AAEA,OAtZwC;AAwZzCkuB,iBAAW,EAAE,qBAAWN,SAAX,EAAuB;AAEnC,YAAMnsB,QAAQ,GAAG,KAAKwoB,KAAL,CAAWxoB,QAA5B;AACA,YAAMkb,IAAI,GAAG,KAAKA,IAAlB;AAEA,YAAIj0H,IAAI,GAAG,KAAKA,IAAL,GAAYklI,SAAvB;AACA,YAAIS,SAAS,GAAG,KAAKxD,UAArB;AAEA,YAAMyD,QAAQ,GAAK3R,IAAI,KAAK57G,YAA5B;;AAEA,YAAK6sH,SAAS,KAAK,CAAnB,EAAuB;AAEtB,cAAKS,SAAS,KAAK,CAAE,CAArB,EAAyB,OAAO3lI,IAAP;AAEzB,iBAAS4lI,QAAQ,IAAI,CAAED,SAAS,GAAG,CAAd,MAAsB,CAApC,GAA0C5sB,QAAQ,GAAG/4G,IAArD,GAA4DA,IAAnE;AAEA;;AAED,YAAKi0H,IAAI,KAAK97G,QAAd,EAAyB;AAExB,cAAKwtH,SAAS,KAAK,CAAE,CAArB,EAAyB;AAExB;AAEA,iBAAKxD,UAAL,GAAkB,CAAlB;;AACA,iBAAK0D,WAAL,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B,KAA9B;AAEA;;AAEDC,qBAAW,EAAE;AAEZ,gBAAK9lI,IAAI,IAAI+4G,QAAb,EAAwB;AAEvB/4G,kBAAI,GAAG+4G,QAAP;AAEA,aAJD,MAIO,IAAK/4G,IAAI,GAAG,CAAZ,EAAgB;AAEtBA,kBAAI,GAAG,CAAP;AAEA,aAJM,MAIA;AAEN,mBAAKA,IAAL,GAAYA,IAAZ;AAEA,oBAAM8lI,WAAN;AAEA;;AAED,gBAAK,KAAKrD,iBAAV,EAA8B,KAAKD,MAAL,GAAc,IAAd,CAA9B,KACK,KAAKh4J,OAAL,GAAe,KAAf;AAEL,iBAAKw1B,IAAL,GAAYA,IAAZ;;AAEA,iBAAKshI,MAAL,CAAY77J,aAAZ,CAA2B;AAC1BtO,kBAAI,EAAE,UADoB;AACR44J,oBAAM,EAAE,IADA;AAE1BpuF,uBAAS,EAAEujG,SAAS,GAAG,CAAZ,GAAgB,CAAE,CAAlB,GAAsB;AAFP,aAA3B;AAKA;AAED,SAzCD,MAyCO;AAAE;AAER,cAAKS,SAAS,KAAK,CAAE,CAArB,EAAyB;AAExB;AAEA,gBAAKT,SAAS,IAAI,CAAlB,EAAsB;AAErBS,uBAAS,GAAG,CAAZ;;AAEA,mBAAKE,WAAL,CAAkB,IAAlB,EAAwB,KAAKtD,WAAL,KAAqB,CAA7C,EAAgDqD,QAAhD;AAEA,aAND,MAMO;AAEN;AACA;AACA;AAEA,mBAAKC,WAAL,CAAkB,KAAKtD,WAAL,KAAqB,CAAvC,EAA0C,IAA1C,EAAgDqD,QAAhD;AAEA;AAED;;AAED,cAAK5lI,IAAI,IAAI+4G,QAAR,IAAoB/4G,IAAI,GAAG,CAAhC,EAAoC;AAEnC;AAEA,gBAAM+lI,SAAS,GAAG/6J,IAAI,CAAC4N,KAAL,CAAYonB,IAAI,GAAG+4G,QAAnB,CAAlB,CAJmC,CAIc;;AACjD/4G,gBAAI,IAAI+4G,QAAQ,GAAGgtB,SAAnB;AAEAJ,qBAAS,IAAI36J,IAAI,CAAC4nB,GAAL,CAAUmzI,SAAV,CAAb;AAEA,gBAAM9qI,OAAO,GAAG,KAAKsnI,WAAL,GAAmBoD,SAAnC;;AAEA,gBAAK1qI,OAAO,IAAI,CAAhB,EAAoB;AAEnB;AAEA,kBAAK,KAAKwnI,iBAAV,EAA8B,KAAKD,MAAL,GAAc,IAAd,CAA9B,KACK,KAAKh4J,OAAL,GAAe,KAAf;AAELw1B,kBAAI,GAAGklI,SAAS,GAAG,CAAZ,GAAgBnsB,QAAhB,GAA2B,CAAlC;AAEA,mBAAK/4G,IAAL,GAAYA,IAAZ;;AAEA,mBAAKshI,MAAL,CAAY77J,aAAZ,CAA2B;AAC1BtO,oBAAI,EAAE,UADoB;AACR44J,sBAAM,EAAE,IADA;AAE1BpuF,yBAAS,EAAEujG,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,CAAE;AAFP,eAA3B;AAKA,aAhBD,MAgBO;AAEN;AAEA,kBAAKjqI,OAAO,KAAK,CAAjB,EAAqB;AAEpB;AAEA,oBAAM+qI,OAAO,GAAGd,SAAS,GAAG,CAA5B;;AACA,qBAAKW,WAAL,CAAkBG,OAAlB,EAA2B,CAAEA,OAA7B,EAAsCJ,QAAtC;AAEA,eAPD,MAOO;AAEN,qBAAKC,WAAL,CAAkB,KAAlB,EAAyB,KAAzB,EAAgCD,QAAhC;AAEA;;AAED,mBAAKzD,UAAL,GAAkBwD,SAAlB;AAEA,mBAAK3lI,IAAL,GAAYA,IAAZ;;AAEA,mBAAKshI,MAAL,CAAY77J,aAAZ,CAA2B;AAC1BtO,oBAAI,EAAE,MADoB;AACZ44J,sBAAM,EAAE,IADI;AACEgW,yBAAS,EAAEA;AADb,eAA3B;AAIA;AAED,WAtDD,MAsDO;AAEN,iBAAK/lI,IAAL,GAAYA,IAAZ;AAEA;;AAED,cAAK4lI,QAAQ,IAAI,CAAED,SAAS,GAAG,CAAd,MAAsB,CAAvC,EAA2C;AAE1C;AAEA,mBAAO5sB,QAAQ,GAAG/4G,IAAlB;AAEA;AAED;;AAED,eAAOA,IAAP;AAEA,OAnjBwC;AAqjBzC6lI,iBAAW,EAAE,qBAAWG,OAAX,EAAoBC,KAApB,EAA2BL,QAA3B,EAAsC;AAElD,YAAMlxB,QAAQ,GAAG,KAAKktB,oBAAtB;;AAEA,YAAKgE,QAAL,EAAgB;AAEflxB,kBAAQ,CAACS,WAAT,GAAuBz8F,eAAvB;AACAg8F,kBAAQ,CAACU,SAAT,GAAqB18F,eAArB;AAEA,SALD,MAKO;AAEN;AAEA,cAAKstH,OAAL,EAAe;AAEdtxB,oBAAQ,CAACS,WAAT,GAAuB,KAAKutB,gBAAL,GAAwBhqH,eAAxB,GAA0CD,mBAAjE;AAEA,WAJD,MAIO;AAENi8F,oBAAQ,CAACS,WAAT,GAAuBx8F,gBAAvB;AAEA;;AAED,cAAKstH,KAAL,EAAa;AAEZvxB,oBAAQ,CAACU,SAAT,GAAqB,KAAKutB,cAAL,GAAsBjqH,eAAtB,GAAwCD,mBAA7D;AAEA,WAJD,MAIO;AAENi8F,oBAAQ,CAACU,SAAT,GAAuBz8F,gBAAvB;AAEA;AAED;AAED,OAxlBwC;AA0lBzC4qH,qBAAe,EAAE,yBAAWxqB,QAAX,EAAqBmtB,SAArB,EAAgCC,UAAhC,EAA6C;AAE7D,YAAM/E,KAAK,GAAG,KAAKE,MAAnB;AAAA,YAA2B12H,GAAG,GAAGw2H,KAAK,CAACphI,IAAvC;AACA,YAAIizG,WAAW,GAAG,KAAKivB,kBAAvB;;AAEA,YAAKjvB,WAAW,KAAK,IAArB,EAA4B;AAE3BA,qBAAW,GAAGmuB,KAAK,CAACuD,uBAAN,EAAd;AACA,eAAKzC,kBAAL,GAA0BjvB,WAA1B;AAEA;;AAED,YAAMhC,KAAK,GAAGgC,WAAW,CAACS,kBAA1B;AAAA,YACCt3E,MAAM,GAAG62E,WAAW,CAACU,YADtB;AAGA1C,aAAK,CAAE,CAAF,CAAL,GAAarmG,GAAb;AACAwxB,cAAM,CAAE,CAAF,CAAN,GAAc8pG,SAAd;AACAj1B,aAAK,CAAE,CAAF,CAAL,GAAarmG,GAAG,GAAGmuG,QAAnB;AACA38E,cAAM,CAAE,CAAF,CAAN,GAAc+pG,UAAd;AAEA,eAAO,IAAP;AAEA;AAhnBwC,KAA1C;;AAonBA,aAASC,cAAT,CAAyB19J,IAAzB,EAAgC;AAE/B,WAAKs8J,KAAL,GAAat8J,IAAb;;AACA,WAAK29J,kBAAL;;AACA,WAAKC,UAAL,GAAkB,CAAlB;AAEA,WAAKtmI,IAAL,GAAY,CAAZ;AAEA,WAAKs3G,SAAL,GAAiB,GAAjB;AAEA;;AAED8uB,kBAAc,CAACz8J,SAAf,GAA2B3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAeqzC,eAAe,CAAC3xC,SAA/B,CAAf,EAA2D;AAErF0M,iBAAW,EAAE+vJ,cAFwE;AAIrFG,iBAAW,EAAE,qBAAWxW,MAAX,EAAmByW,eAAnB,EAAqC;AAEjD,YAAM99J,IAAI,GAAGqnJ,MAAM,CAACyR,UAAP,IAAqB,KAAKwD,KAAvC;AAAA,YACCjzB,MAAM,GAAGge,MAAM,CAACwR,KAAP,CAAaxvB,MADvB;AAAA,YAEC0vB,OAAO,GAAG1vB,MAAM,CAACjgJ,MAFlB;AAAA,YAGCkqK,QAAQ,GAAGjM,MAAM,CAAC+R,iBAHnB;AAAA,YAICJ,YAAY,GAAG3R,MAAM,CAAC8R,aAJvB;AAAA,YAKC4E,QAAQ,GAAG/9J,IAAI,CAAC0zC,IALjB;AAAA,YAMCsqH,cAAc,GAAG,KAAKC,sBANvB;AAQA,YAAIC,cAAc,GAAGF,cAAc,CAAED,QAAF,CAAnC;;AAEA,YAAKG,cAAc,KAAK/lK,SAAxB,EAAoC;AAEnC+lK,wBAAc,GAAG,EAAjB;AACAF,wBAAc,CAAED,QAAF,CAAd,GAA6BG,cAA7B;AAEA;;AAED,aAAM,IAAIn0K,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAKgvK,OAAvB,EAAgC,EAAGhvK,KAAnC,EAAuC;AAEtC,cAAMu/I,KAAK,GAAGD,MAAM,CAAEt/I,KAAF,CAApB;AAAA,cACC4nJ,SAAS,GAAGrI,KAAK,CAACxgJ,IADnB;AAGA,cAAIinK,OAAO,GAAGmO,cAAc,CAAEvsB,SAAF,CAA5B;;AAEA,cAAKoe,OAAO,KAAK53J,SAAjB,EAA6B;AAE5Bm7J,oBAAQ,CAAEvpK,KAAF,CAAR,GAAgBgmK,OAAhB;AAEA,WAJD,MAIO;AAENA,mBAAO,GAAGuD,QAAQ,CAAEvpK,KAAF,CAAlB;;AAEA,gBAAKgmK,OAAO,KAAK53J,SAAjB,EAA6B;AAE5B;AAEA,kBAAK43J,OAAO,CAACsJ,WAAR,KAAwB,IAA7B,EAAoC;AAEnC,kBAAGtJ,OAAO,CAACqB,cAAX;;AACA,qBAAK+M,mBAAL,CAA0BpO,OAA1B,EAAmCgO,QAAnC,EAA6CpsB,SAA7C;AAEA;;AAED;AAEA;;AAED,gBAAMvkJ,IAAI,GAAG0wK,eAAe,IAAIA,eAAe,CAC9C1E,iBAD+B,CACZrvK,KADY,EACRgmK,OADQ,CACA+C,UADhC;AAGA/C,mBAAO,GAAG,IAAID,aAAJ,CACTiD,eAAe,CAACxzJ,MAAhB,CAAwBS,IAAxB,EAA8B2xI,SAA9B,EAAyCvkJ,IAAzC,CADS,EAETk8I,KAAK,CAACa,aAFG,EAEYb,KAAK,CAACE,YAAN,EAFZ,CAAV;AAIA,cAAGumB,OAAO,CAACqB,cAAX;;AACA,iBAAK+M,mBAAL,CAA0BpO,OAA1B,EAAmCgO,QAAnC,EAA6CpsB,SAA7C;;AAEA2hB,oBAAQ,CAAEvpK,KAAF,CAAR,GAAgBgmK,OAAhB;AAEA;;AAEDiJ,sBAAY,CAAEjvK,KAAF,CAAZ,CAAkB2gJ,YAAlB,GAAiCqlB,OAAO,CAACjoI,MAAzC;AAEA;AAED,OAvEoF;AAyErFoyI,qBAAe,EAAE,yBAAW7S,MAAX,EAAoB;AAEpC,YAAK,CAAE,KAAKkT,eAAL,CAAsBlT,MAAtB,CAAP,EAAwC;AAEvC,cAAKA,MAAM,CAACgS,WAAP,KAAuB,IAA5B,EAAmC;AAElC;AACA;AAEA,gBAAM0E,QAAQ,GAAG,CAAE1W,MAAM,CAACyR,UAAP,IAAqB,KAAKwD,KAA5B,EAAoC5oH,IAArD;AAAA,gBACC0qH,QAAQ,GAAG/W,MAAM,CAACwR,KAAP,CAAanlH,IADzB;AAAA,gBAEC2qH,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CAFlB;;AAIA,iBAAKP,WAAL,CAAkBxW,MAAlB,EACCgX,cAAc,IAAIA,cAAc,CAACE,YAAf,CAA6B,CAA7B,CADnB;;AAGA,iBAAKC,kBAAL,CAAyBnX,MAAzB,EAAiC+W,QAAjC,EAA2CL,QAA3C;AAEA;;AAED,cAAMzK,QAAQ,GAAGjM,MAAM,CAAC+R,iBAAxB,CAlBuC,CAoBvC;;AACA,eAAM,IAAIrvK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9B,EAAsCW,KAAC,KAAK2wB,CAA5C,EAA+C,EAAG3wB,KAAlD,EAAsD;AAErD,gBAAMgmK,OAAO,GAAGuD,QAAQ,CAAEvpK,KAAF,CAAxB;;AAEA,gBAAKgmK,OAAO,CAACoB,QAAR,OAAwB,CAA7B,EAAiC;AAEhC,mBAAKsN,YAAL,CAAmB1O,OAAnB;;AACAA,qBAAO,CAAC4B,iBAAR;AAEA;AAED;;AAED,eAAK+M,WAAL,CAAkBrX,MAAlB;AAEA;AAED,OAjHoF;AAmHrF8S,uBAAiB,EAAE,2BAAW9S,MAAX,EAAoB;AAEtC,YAAK,KAAKkT,eAAL,CAAsBlT,MAAtB,CAAL,EAAsC;AAErC,cAAMiM,QAAQ,GAAGjM,MAAM,CAAC+R,iBAAxB,CAFqC,CAIrC;;AACA,eAAM,IAAIrvK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9B,EAAsCW,KAAC,KAAK2wB,CAA5C,EAA+C,EAAG3wB,KAAlD,EAAsD;AAErD,gBAAMgmK,OAAO,GAAGuD,QAAQ,CAAEvpK,KAAF,CAAxB;;AAEA,gBAAK,EAAGgmK,OAAO,CAACoB,QAAX,KAAwB,CAA7B,EAAiC;AAEhCpB,qBAAO,CAAC8B,oBAAR;;AACA,mBAAK8M,gBAAL,CAAuB5O,OAAvB;AAEA;AAED;;AAED,eAAK6O,eAAL,CAAsBvX,MAAtB;AAEA;AAED,OA3IoF;AA6IrF;AAEAsW,wBAAkB,EAAE,8BAAY;AAE/B,aAAKkB,QAAL,GAAgB,EAAhB,CAF+B,CAEX;;AACpB,aAAKC,eAAL,GAAuB,CAAvB;AAEA,aAAKR,cAAL,GAAsB,EAAtB,CAL+B,CAM/B;AACA;AACA;AACA;AACA;;AAGA,aAAKpL,SAAL,GAAiB,EAAjB,CAb+B,CAaV;;AACrB,aAAK6L,gBAAL,GAAwB,CAAxB;AAEA,aAAKd,sBAAL,GAA8B,EAA9B,CAhB+B,CAgBG;;AAGlC,aAAKe,oBAAL,GAA4B,EAA5B,CAnB+B,CAmBC;;AAChC,aAAKC,2BAAL,GAAmC,CAAnC;AAEA,YAAMj6J,KAAK,GAAG,IAAd;AAEA,aAAKkyJ,KAAL,GAAa;AAEZgI,iBAAO,EAAE;AACR,gBAAI50K,KAAJ,GAAY;AAEX,qBAAO0a,KAAK,CAAC65J,QAAN,CAAez1K,MAAtB;AAEA,aALO;;AAMR,gBAAI+tK,KAAJ,GAAY;AAEX,qBAAOnyJ,KAAK,CAAC85J,eAAb;AAEA;;AAVO,WAFG;AAcZxL,kBAAQ,EAAE;AACT,gBAAIhpK,KAAJ,GAAY;AAEX,qBAAO0a,KAAK,CAACkuJ,SAAN,CAAgB9pK,MAAvB;AAEA,aALQ;;AAMT,gBAAI+tK,KAAJ,GAAY;AAEX,qBAAOnyJ,KAAK,CAAC+5J,gBAAb;AAEA;;AAVQ,WAdE;AA0BZI,6BAAmB,EAAE;AACpB,gBAAI70K,KAAJ,GAAY;AAEX,qBAAO0a,KAAK,CAACg6J,oBAAN,CAA2B51K,MAAlC;AAEA,aALmB;;AAMpB,gBAAI+tK,KAAJ,GAAY;AAEX,qBAAOnyJ,KAAK,CAACi6J,2BAAb;AAEA;;AAVmB;AA1BT,SAAb;AAyCA,OAhNoF;AAkNrF;AAEA1E,qBAAe,EAAE,yBAAWlT,MAAX,EAAoB;AAEpC,YAAMx2I,KAAK,GAAGw2I,MAAM,CAACgS,WAArB;AACA,eAAOxoJ,KAAK,KAAK,IAAV,IAAkBA,KAAK,GAAG,KAAKiuJ,eAAtC;AAEA,OAzNoF;AA2NrFN,wBAAkB,EAAE,4BAAWnX,MAAX,EAAmB+W,QAAnB,EAA6BL,QAA7B,EAAwC;AAE3D,YAAMmB,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCO,aAAa,GAAG,KAAKd,cADtB;AAGA,YAAID,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAAlC;;AAEA,YAAKC,cAAc,KAAKlmK,SAAxB,EAAoC;AAEnCkmK,wBAAc,GAAG;AAEhBE,wBAAY,EAAE,CAAElX,MAAF,CAFE;AAGhBgY,wBAAY,EAAE;AAHE,WAAjB;AAOAhY,gBAAM,CAACiS,iBAAP,GAA2B,CAA3B;AAEA8F,uBAAa,CAAEhB,QAAF,CAAb,GAA4BC,cAA5B;AAEA,SAbD,MAaO;AAEN,cAAME,YAAY,GAAGF,cAAc,CAACE,YAApC;AAEAlX,gBAAM,CAACiS,iBAAP,GAA2BiF,YAAY,CAACn1K,MAAxC;AACAm1K,sBAAY,CAAC9zK,IAAb,CAAmB48J,MAAnB;AAEA;;AAEDA,cAAM,CAACgS,WAAP,GAAqB6F,OAAO,CAAC91K,MAA7B;AACA81K,eAAO,CAACz0K,IAAR,CAAc48J,MAAd;AAEAgX,sBAAc,CAACgB,YAAf,CAA6BtB,QAA7B,IAA0C1W,MAA1C;AAEA,OA7PoF;AA+PrFiY,2BAAqB,EAAE,+BAAWjY,MAAX,EAAoB;AAE1C,YAAM6X,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCU,kBAAkB,GAAGL,OAAO,CAAEA,OAAO,CAAC91K,MAAR,GAAiB,CAAnB,CAD7B;AAAA,YAECo2K,UAAU,GAAGnY,MAAM,CAACgS,WAFrB;AAIAkG,0BAAkB,CAAClG,WAAnB,GAAiCmG,UAAjC;AACAN,eAAO,CAAEM,UAAF,CAAP,GAAwBD,kBAAxB;AACAL,eAAO,CAACn3D,GAAR;AAEAs/C,cAAM,CAACgS,WAAP,GAAqB,IAArB;AAGA,YAAM+E,QAAQ,GAAG/W,MAAM,CAACwR,KAAP,CAAanlH,IAA9B;AAAA,YACC0rH,aAAa,GAAG,KAAKd,cADtB;AAAA,YAECD,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAF/B;AAAA,YAGCqB,mBAAmB,GAAGpB,cAAc,CAACE,YAHtC;AAAA,YAKCmB,eAAe,GACdD,mBAAmB,CAAEA,mBAAmB,CAACr2K,MAApB,GAA6B,CAA/B,CANrB;AAAA,YAQCu2K,gBAAgB,GAAGtY,MAAM,CAACiS,iBAR3B;AAUAoG,uBAAe,CAACpG,iBAAhB,GAAoCqG,gBAApC;AACAF,2BAAmB,CAAEE,gBAAF,CAAnB,GAA0CD,eAA1C;AACAD,2BAAmB,CAAC13D,GAApB;AAEAs/C,cAAM,CAACiS,iBAAP,GAA2B,IAA3B;AAGA,YAAM+F,YAAY,GAAGhB,cAAc,CAACgB,YAApC;AAAA,YACCtB,QAAQ,GAAG,CAAE1W,MAAM,CAACyR,UAAP,IAAqB,KAAKwD,KAA5B,EAAoC5oH,IADhD;AAGA,eAAO2rH,YAAY,CAAEtB,QAAF,CAAnB;;AAEA,YAAK0B,mBAAmB,CAACr2K,MAApB,KAA+B,CAApC,EAAwC;AAEvC,iBAAOg2K,aAAa,CAAEhB,QAAF,CAApB;AAEA;;AAED,aAAKwB,gCAAL,CAAuCvY,MAAvC;AAEA,OA1SoF;AA4SrFuY,sCAAgC,EAAE,0CAAWvY,MAAX,EAAoB;AAErD,YAAMiM,QAAQ,GAAGjM,MAAM,CAAC+R,iBAAxB;;AAEA,aAAM,IAAIrvK,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG44I,QAAQ,CAAClqK,MAA9B,EAAsCW,KAAC,KAAK2wB,CAA5C,EAA+C,EAAG3wB,KAAlD,EAAsD;AAErD,cAAMgmK,OAAO,GAAGuD,QAAQ,CAAEvpK,KAAF,CAAxB;;AAEA,cAAK,EAAGgmK,OAAO,CAACqB,cAAX,KAA8B,CAAnC,EAAuC;AAEtC,iBAAKyO,sBAAL,CAA6B9P,OAA7B;AAEA;AAED;AAED,OA5ToF;AA8TrF2O,iBAAW,EAAE,qBAAWrX,MAAX,EAAoB;AAEhC;AACA;AACA;AACA;AACA;AAEA,YAAM6X,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCiB,SAAS,GAAGzY,MAAM,CAACgS,WADpB;AAAA,YAGC0G,eAAe,GAAG,KAAKjB,eAAL,EAHnB;AAAA,YAKCkB,mBAAmB,GAAGd,OAAO,CAAEa,eAAF,CAL9B;AAOA1Y,cAAM,CAACgS,WAAP,GAAqB0G,eAArB;AACAb,eAAO,CAAEa,eAAF,CAAP,GAA6B1Y,MAA7B;AAEA2Y,2BAAmB,CAAC3G,WAApB,GAAkCyG,SAAlC;AACAZ,eAAO,CAAEY,SAAF,CAAP,GAAuBE,mBAAvB;AAEA,OAnVoF;AAqVrFpB,qBAAe,EAAE,yBAAWvX,MAAX,EAAoB;AAEpC;AACA;AACA;AACA;AACA;AAEA,YAAM6X,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCiB,SAAS,GAAGzY,MAAM,CAACgS,WADpB;AAAA,YAGC4G,kBAAkB,GAAG,EAAG,KAAKnB,eAH9B;AAAA,YAKCoB,gBAAgB,GAAGhB,OAAO,CAAEe,kBAAF,CAL3B;AAOA5Y,cAAM,CAACgS,WAAP,GAAqB4G,kBAArB;AACAf,eAAO,CAAEe,kBAAF,CAAP,GAAgC5Y,MAAhC;AAEA6Y,wBAAgB,CAAC7G,WAAjB,GAA+ByG,SAA/B;AACAZ,eAAO,CAAEY,SAAF,CAAP,GAAuBI,gBAAvB;AAEA,OA1WoF;AA4WrF;AAEA/B,yBAAmB,EAAE,6BAAWpO,OAAX,EAAoBgO,QAApB,EAA8BpsB,SAA9B,EAA0C;AAE9D,YAAMqsB,cAAc,GAAG,KAAKC,sBAA5B;AAAA,YACC3K,QAAQ,GAAG,KAAKJ,SADjB;AAGA,YAAIiN,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAAlC;;AAEA,YAAKoC,aAAa,KAAKhoK,SAAvB,EAAmC;AAElCgoK,uBAAa,GAAG,EAAhB;AACAnC,wBAAc,CAAED,QAAF,CAAd,GAA6BoC,aAA7B;AAEA;;AAEDA,qBAAa,CAAExuB,SAAF,CAAb,GAA6Boe,OAA7B;AAEAA,eAAO,CAACsJ,WAAR,GAAsB/F,QAAQ,CAAClqK,MAA/B;AACAkqK,gBAAQ,CAAC7oK,IAAT,CAAeslK,OAAf;AAEA,OAjYoF;AAmYrF8P,4BAAsB,EAAE,gCAAW9P,OAAX,EAAqB;AAE5C,YAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,YACCkN,WAAW,GAAGrQ,OAAO,CAACA,OADvB;AAAA,YAECgO,QAAQ,GAAGqC,WAAW,CAAC5M,QAAZ,CAAqB9/G,IAFjC;AAAA,YAGCi+F,SAAS,GAAGyuB,WAAW,CAAChzK,IAHzB;AAAA,YAIC4wK,cAAc,GAAG,KAAKC,sBAJvB;AAAA,YAKCkC,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAL/B;AAAA,YAOCsC,mBAAmB,GAAG/M,QAAQ,CAAEA,QAAQ,CAAClqK,MAAT,GAAkB,CAApB,CAP/B;AAAA,YAQCo2K,UAAU,GAAGzP,OAAO,CAACsJ,WARtB;AAUAgH,2BAAmB,CAAChH,WAApB,GAAkCmG,UAAlC;AACAlM,gBAAQ,CAAEkM,UAAF,CAAR,GAAyBa,mBAAzB;AACA/M,gBAAQ,CAACvrD,GAAT;AAEA,eAAOo4D,aAAa,CAAExuB,SAAF,CAApB;;AAEA,YAAKrmJ,MAAM,CAAC9D,IAAP,CAAa24K,aAAb,EAA6B/2K,MAA7B,KAAwC,CAA7C,EAAiD;AAEhD,iBAAO40K,cAAc,CAAED,QAAF,CAArB;AAEA;AAED,OA3ZoF;AA6ZrFU,kBAAY,EAAE,sBAAW1O,OAAX,EAAqB;AAElC,YAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,YACC4M,SAAS,GAAG/P,OAAO,CAACsJ,WADrB;AAAA,YAGC0G,eAAe,GAAG,KAAKhB,gBAAL,EAHnB;AAAA,YAKCuB,oBAAoB,GAAGhN,QAAQ,CAAEyM,eAAF,CALhC;AAOAhQ,eAAO,CAACsJ,WAAR,GAAsB0G,eAAtB;AACAzM,gBAAQ,CAAEyM,eAAF,CAAR,GAA8BhQ,OAA9B;AAEAuQ,4BAAoB,CAACjH,WAArB,GAAmCyG,SAAnC;AACAxM,gBAAQ,CAAEwM,SAAF,CAAR,GAAwBQ,oBAAxB;AAEA,OA5aoF;AA8arF3B,sBAAgB,EAAE,0BAAW5O,OAAX,EAAqB;AAEtC,YAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,YACC4M,SAAS,GAAG/P,OAAO,CAACsJ,WADrB;AAAA,YAGC4G,kBAAkB,GAAG,EAAG,KAAKlB,gBAH9B;AAAA,YAKCwB,iBAAiB,GAAGjN,QAAQ,CAAE2M,kBAAF,CAL7B;AAOAlQ,eAAO,CAACsJ,WAAR,GAAsB4G,kBAAtB;AACA3M,gBAAQ,CAAE2M,kBAAF,CAAR,GAAiClQ,OAAjC;AAEAwQ,yBAAiB,CAAClH,WAAlB,GAAgCyG,SAAhC;AACAxM,gBAAQ,CAAEwM,SAAF,CAAR,GAAwBS,iBAAxB;AAEA,OA7boF;AAgcrF;AAEAtE,6BAAuB,EAAE,mCAAY;AAEpC,YAAMjD,YAAY,GAAG,KAAKgG,oBAA1B;AAAA,YACCe,eAAe,GAAG,KAAKd,2BAAL,EADnB;AAGA,YAAI10B,WAAW,GAAGyuB,YAAY,CAAE+G,eAAF,CAA9B;;AAEA,YAAKx1B,WAAW,KAAKpyI,SAArB,EAAiC;AAEhCoyI,qBAAW,GAAG,IAAIiD,iBAAJ,CACb,IAAInjE,YAAJ,CAAkB,CAAlB,CADa,EACU,IAAIA,YAAJ,CAAkB,CAAlB,CADV,EAEb,CAFa,EAEV,KAAKm2F,gCAFK,CAAd;AAIAj2B,qBAAW,CAACk2B,YAAZ,GAA2BV,eAA3B;AACA/G,sBAAY,CAAE+G,eAAF,CAAZ,GAAkCx1B,WAAlC;AAEA;;AAED,eAAOA,WAAP;AAEA,OAtdoF;AAwdrFkxB,iCAA2B,EAAE,qCAAWlxB,WAAX,EAAyB;AAErD,YAAMyuB,YAAY,GAAG,KAAKgG,oBAA1B;AAAA,YACCc,SAAS,GAAGv1B,WAAW,CAACk2B,YADzB;AAAA,YAGCR,kBAAkB,GAAG,EAAG,KAAKhB,2BAH9B;AAAA,YAKCyB,qBAAqB,GAAG1H,YAAY,CAAEiH,kBAAF,CALrC;AAOA11B,mBAAW,CAACk2B,YAAZ,GAA2BR,kBAA3B;AACAjH,oBAAY,CAAEiH,kBAAF,CAAZ,GAAqC11B,WAArC;AAEAm2B,6BAAqB,CAACD,YAAtB,GAAqCX,SAArC;AACA9G,oBAAY,CAAE8G,SAAF,CAAZ,GAA4BY,qBAA5B;AAEA,OAveoF;AAyerFF,sCAAgC,EAAE,IAAIn2F,YAAJ,CAAkB,CAAlB,CAzemD;AA2erF;AACA;AACA;AACAs2F,gBAAU,EAAE,oBAAWv3B,IAAX,EAAiBw3B,YAAjB,EAA+B91B,SAA/B,EAA2C;AAEtD,YAAM9qI,IAAI,GAAG4gK,YAAY,IAAI,KAAKtE,KAAlC;AAAA,YACCyB,QAAQ,GAAG/9J,IAAI,CAAC0zC,IADjB;AAGA,YAAImtH,UAAU,GAAG,OAAOz3B,IAAP,KAAgB,QAAhB,GAA2BgH,aAAa,CAACY,UAAd,CAA0BhxI,IAA1B,EAAgCopI,IAAhC,CAA3B,GAAoEA,IAArF;AAEA,YAAMg1B,QAAQ,GAAGyC,UAAU,KAAK,IAAf,GAAsBA,UAAU,CAACntH,IAAjC,GAAwC01F,IAAzD;AAEA,YAAIi1B,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CAArB;AAAA,YACCN,eAAe,GAAG,IADnB;;AAGA,YAAKhzB,SAAS,KAAK3yI,SAAnB,EAA+B;AAE9B,cAAK0oK,UAAU,KAAK,IAApB,EAA2B;AAE1B/1B,qBAAS,GAAG+1B,UAAU,CAAC/1B,SAAvB;AAEA,WAJD,MAIO;AAENA,qBAAS,GAAG56F,wBAAZ;AAEA;AAED;;AAED,YAAKmuH,cAAc,KAAKlmK,SAAxB,EAAoC;AAEnC,cAAM2oK,cAAc,GAAGzC,cAAc,CAACgB,YAAf,CAA6BtB,QAA7B,CAAvB;;AAEA,cAAK+C,cAAc,KAAK3oK,SAAnB,IAAgC2oK,cAAc,CAACh2B,SAAf,KAA6BA,SAAlE,EAA8E;AAE7E,mBAAOg2B,cAAP;AAEA,WARkC,CAUnC;AACA;;;AACAhD,yBAAe,GAAGO,cAAc,CAACE,YAAf,CAA6B,CAA7B,CAAlB,CAZmC,CAcnC;;AACA,cAAKsC,UAAU,KAAK,IAApB,EACCA,UAAU,GAAG/C,eAAe,CAACjF,KAA7B;AAED,SA5CqD,CA8CtD;;;AACA,YAAKgI,UAAU,KAAK,IAApB,EAA2B,OAAO,IAAP,CA/C2B,CAiDtD;;AACA,YAAME,SAAS,GAAG,IAAItI,eAAJ,CAAqB,IAArB,EAA2BoI,UAA3B,EAAuCD,YAAvC,EAAqD91B,SAArD,CAAlB;;AAEA,aAAK+yB,WAAL,CAAkBkD,SAAlB,EAA6BjD,eAA7B,EApDsD,CAsDtD;;;AACA,aAAKU,kBAAL,CAAyBuC,SAAzB,EAAoC3C,QAApC,EAA8CL,QAA9C;;AAEA,eAAOgD,SAAP;AAEA,OAziBoF;AA2iBrF;AACAD,oBAAc,EAAE,wBAAW13B,IAAX,EAAiBw3B,YAAjB,EAAgC;AAE/C,YAAM5gK,IAAI,GAAG4gK,YAAY,IAAI,KAAKtE,KAAlC;AAAA,YACCyB,QAAQ,GAAG/9J,IAAI,CAAC0zC,IADjB;AAAA,YAGCmtH,UAAU,GAAG,OAAOz3B,IAAP,KAAgB,QAAhB,GACZgH,aAAa,CAACY,UAAd,CAA0BhxI,IAA1B,EAAgCopI,IAAhC,CADY,GAC6BA,IAJ3C;AAAA,YAMCg1B,QAAQ,GAAGyC,UAAU,GAAGA,UAAU,CAACntH,IAAd,GAAqB01F,IAN3C;AAAA,YAQCi1B,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CARlB;;AAUA,YAAKC,cAAc,KAAKlmK,SAAxB,EAAoC;AAEnC,iBAAOkmK,cAAc,CAACgB,YAAf,CAA6BtB,QAA7B,KAA2C,IAAlD;AAEA;;AAED,eAAO,IAAP;AAEA,OAhkBoF;AAkkBrF;AACAiD,mBAAa,EAAE,yBAAY;AAE1B,YAAM9B,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCoC,QAAQ,GAAG,KAAKnC,eADjB;;AAGA,aAAM,IAAI/0K,KAAC,GAAGk3K,QAAQ,GAAG,CAAzB,EAA4Bl3K,KAAC,IAAI,CAAjC,EAAoC,EAAGA,KAAvC,EAA2C;AAE1Cm1K,iBAAO,CAAEn1K,KAAF,CAAP,CAAa4G,IAAb;AAEA;;AAED,eAAO,IAAP;AAEA,OAhlBoF;AAklBrF;AACA0U,YAAM,EAAE,gBAAWm3J,SAAX,EAAuB;AAE9BA,iBAAS,IAAI,KAAK5tB,SAAlB;AAEA,YAAMswB,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCoC,QAAQ,GAAG,KAAKnC,eADjB;AAAA,YAGCxnI,IAAI,GAAG,KAAKA,IAAL,IAAaklI,SAHrB;AAAA,YAICC,aAAa,GAAGn6J,IAAI,CAACgkC,IAAL,CAAWk2H,SAAX,CAJjB;AAAA,YAMCnL,SAAS,GAAG,KAAKuM,UAAL,IAAmB,CANhC,CAJ8B,CAY9B;;AAEA,aAAM,IAAI7zK,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAKk3K,QAAvB,EAAiC,EAAGl3K,KAApC,EAAwC;AAEvC,cAAMs9J,MAAM,GAAG6X,OAAO,CAAEn1K,KAAF,CAAtB;;AAEAs9J,gBAAM,CAACkV,OAAP,CAAgBjlI,IAAhB,EAAsBklI,SAAtB,EAAiCC,aAAjC,EAAgDpL,SAAhD;AAEA,SApB6B,CAsB9B;;;AAEA,YAAMiC,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,YACCqE,SAAS,GAAG,KAAKwH,gBADlB;;AAGA,aAAM,IAAIh1K,KAAC,GAAG,CAAd,EAAiBA,KAAC,KAAKwtK,SAAvB,EAAkC,EAAGxtK,KAArC,EAAyC;AAExCupK,kBAAQ,CAAEvpK,KAAF,CAAR,CAAcqV,KAAd,CAAqBiyJ,SAArB;AAEA;;AAED,eAAO,IAAP;AAEA,OAtnBoF;AAwnBrF;AACA6P,aAAO,EAAE,iBAAWC,aAAX,EAA2B;AAEnC,aAAK7pI,IAAL,GAAY,CAAZ,CAFmC,CAEpB;;AACf,aAAM,IAAIvtC,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,KAAK80K,QAAL,CAAcz1K,MAAnC,EAA2CW,KAAC,EAA5C,EAAkD;AAEjD,eAAK80K,QAAL,CAAe90K,KAAf,EAAmButC,IAAnB,GAA0B,CAA1B,CAFiD,CAEpB;AAE7B;;AAED,eAAO,KAAKjyB,MAAL,CAAa87J,aAAb,CAAP,CATmC,CASE;AAErC,OApoBoF;AAsoBrF;AACA9E,aAAO,EAAE,mBAAY;AAEpB,eAAO,KAAKC,KAAZ;AAEA,OA3oBoF;AA6oBrF;AACA8E,iBAAW,EAAE,qBAAWh4B,IAAX,EAAkB;AAE9B,YAAM81B,OAAO,GAAG,KAAKL,QAArB;AAAA,YACCT,QAAQ,GAAGh1B,IAAI,CAAC11F,IADjB;AAAA,YAEC0rH,aAAa,GAAG,KAAKd,cAFtB;AAAA,YAGCD,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAH/B;;AAKA,YAAKC,cAAc,KAAKlmK,SAAxB,EAAoC;AAEnC;AACA;AACA;AAEA,cAAMkpK,eAAe,GAAGhD,cAAc,CAACE,YAAvC;;AAEA,eAAM,IAAIx0K,KAAC,GAAG,CAAR,EAAW2wB,CAAC,GAAG2mJ,eAAe,CAACj4K,MAArC,EAA6CW,KAAC,KAAK2wB,CAAnD,EAAsD,EAAG3wB,KAAzD,EAA6D;AAE5D,gBAAMs9J,MAAM,GAAGga,eAAe,CAAEt3K,KAAF,CAA9B;;AAEA,iBAAKowK,iBAAL,CAAwB9S,MAAxB;;AAEA,gBAAMmY,UAAU,GAAGnY,MAAM,CAACgS,WAA1B;AAAA,gBACCkG,kBAAkB,GAAGL,OAAO,CAAEA,OAAO,CAAC91K,MAAR,GAAiB,CAAnB,CAD7B;AAGAi+J,kBAAM,CAACgS,WAAP,GAAqB,IAArB;AACAhS,kBAAM,CAACiS,iBAAP,GAA2B,IAA3B;AAEAiG,8BAAkB,CAAClG,WAAnB,GAAiCmG,UAAjC;AACAN,mBAAO,CAAEM,UAAF,CAAP,GAAwBD,kBAAxB;AACAL,mBAAO,CAACn3D,GAAR;;AAEA,iBAAK63D,gCAAL,CAAuCvY,MAAvC;AAEA;;AAED,iBAAO+X,aAAa,CAAEhB,QAAF,CAApB;AAEA;AAED,OArrBoF;AAurBrF;AACAkD,iBAAW,EAAE,qBAAWthK,IAAX,EAAkB;AAE9B,YAAM+9J,QAAQ,GAAG/9J,IAAI,CAAC0zC,IAAtB;AAAA,YACC0rH,aAAa,GAAG,KAAKd,cADtB;;AAGA,aAAM,IAAMF,QAAZ,IAAwBgB,aAAxB,EAAwC;AAEvC,cAAMC,YAAY,GAAGD,aAAa,CAAEhB,QAAF,CAAb,CAA0BiB,YAA/C;AAAA,cACChY,MAAM,GAAGgY,YAAY,CAAEtB,QAAF,CADtB;;AAGA,cAAK1W,MAAM,KAAKlvJ,SAAhB,EAA4B;AAE3B,iBAAKgiK,iBAAL,CAAwB9S,MAAxB;;AACA,iBAAKiY,qBAAL,CAA4BjY,MAA5B;AAEA;AAED;;AAED,YAAM2W,cAAc,GAAG,KAAKC,sBAA5B;AAAA,YACCkC,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAD/B;;AAGA,YAAKoC,aAAa,KAAKhoK,SAAvB,EAAmC;AAElC,eAAM,IAAMw5I,SAAZ,IAAyBwuB,aAAzB,EAAyC;AAExC,gBAAMpQ,OAAO,GAAGoQ,aAAa,CAAExuB,SAAF,CAA7B;AACAoe,mBAAO,CAAC8B,oBAAR;;AACA,iBAAKgO,sBAAL,CAA6B9P,OAA7B;AAEA;AAED;AAED,OA1tBoF;AA4tBrF;AACAwR,mBAAa,EAAE,uBAAWn4B,IAAX,EAAiBw3B,YAAjB,EAAgC;AAE9C,YAAMvZ,MAAM,GAAG,KAAKyZ,cAAL,CAAqB13B,IAArB,EAA2Bw3B,YAA3B,CAAf;;AAEA,YAAKvZ,MAAM,KAAK,IAAhB,EAAuB;AAEtB,eAAK8S,iBAAL,CAAwB9S,MAAxB;;AACA,eAAKiY,qBAAL,CAA4BjY,MAA5B;AAEA;AAED;AAxuBoF,KAA3D,CAA3B;;AA4uBA,aAASma,OAAT,CAAkB3tK,KAAlB,EAA0B;AAEzB,UAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEhC3I,eAAO,CAAC2W,IAAR,CAAc,oDAAd;AACAhO,aAAK,GAAGwL,SAAS,CAAE,CAAF,CAAjB;AAEA;;AAED,WAAKxL,KAAL,GAAaA,KAAb;AAEA;;AAED2tK,WAAO,CAACvgK,SAAR,CAAkBoD,KAAlB,GAA0B,YAAY;AAErC,aAAO,IAAIm9J,OAAJ,CAAa,KAAK3tK,KAAL,CAAWwQ,KAAX,KAAqBlM,SAArB,GAAiC,KAAKtE,KAAtC,GAA8C,KAAKA,KAAL,CAAWwQ,KAAX,EAA3D,CAAP;AAEA,KAJD;;AAMA,aAASo9J,0BAAT,CAAqC96I,KAArC,EAA4CiqE,MAA5C,EAAoDL,gBAApD,EAAuE;AAEtE09B,uBAAiB,CAAC7vH,IAAlB,CAAwB,IAAxB,EAA8BuoB,KAA9B,EAAqCiqE,MAArC;AAEA,WAAKL,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;AAEA;;AAEDkxE,8BAA0B,CAACxgK,SAA3B,GAAuC3V,MAAM,CAACiiC,MAAP,CAAejiC,MAAM,CAACiU,MAAP,CAAe0uH,iBAAiB,CAAChtH,SAAjC,CAAf,EAA6D;AAEnG0M,iBAAW,EAAE8zJ,0BAFsF;AAInGtwE,kCAA4B,EAAE,IAJqE;AAMnGlsF,UAAI,EAAE,cAAWyhC,MAAX,EAAoB;AAEzBunF,yBAAiB,CAAChtH,SAAlB,CAA4BgE,IAA5B,CAAiC7G,IAAjC,CAAuC,IAAvC,EAA6CsoC,MAA7C;AAEA,aAAK6pD,gBAAL,GAAwB7pD,MAAM,CAAC6pD,gBAA/B;AAEA,eAAO,IAAP;AAEA,OAdkG;AAgBnGlsF,WAAK,EAAE,eAAWzb,IAAX,EAAkB;AAExB,YAAMylI,EAAE,GAAGJ,iBAAiB,CAAChtH,SAAlB,CAA4BoD,KAA5B,CAAkCjG,IAAlC,CAAwC,IAAxC,EAA8CxV,IAA9C,CAAX;AAEAylI,UAAE,CAAC99B,gBAAH,GAAsB,KAAKA,gBAA3B;AAEA,eAAO89B,EAAP;AAEA,OAxBkG;AA0BnGzvE,YAAM,EAAE,gBAAWh2D,IAAX,EAAkB;AAEzB,YAAMylJ,IAAI,GAAGpgB,iBAAiB,CAAChtH,SAAlB,CAA4B29C,MAA5B,CAAmCxgD,IAAnC,CAAyC,IAAzC,EAA+CxV,IAA/C,CAAb;AAEAylJ,YAAI,CAACl9C,4BAAL,GAAoC,IAApC;AACAk9C,YAAI,CAAC99C,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA,eAAO89C,IAAP;AAEA;AAnCkG,KAA7D,CAAvC;;AAuCA,aAASqzB,SAAT,CAAoB1oG,MAApB,EAA4BC,SAA5B,EAAuCnM,IAAvC,EAA6CC,GAA7C,EAAmD;AAElD,WAAKmM,GAAL,GAAW,IAAIH,GAAJ,CAASC,MAAT,EAAiBC,SAAjB,CAAX,CAFkD,CAGlD;;AAEA,WAAKnM,IAAL,GAAYA,IAAI,IAAI,CAApB;AACA,WAAKC,GAAL,GAAWA,GAAG,IAAI9qD,QAAlB;AACA,WAAK0V,MAAL,GAAc,IAAd;AACA,WAAK02C,MAAL,GAAc,IAAIR,MAAJ,EAAd;AAEA,WAAK2kE,MAAL,GAAc;AACbhhD,YAAI,EAAE,EADO;AAEbhyC,YAAI,EAAE;AAAE6+E,mBAAS,EAAE;AAAb,SAFO;AAGbyR,WAAG,EAAE,EAHQ;AAIb2D,cAAM,EAAE;AAAEpV,mBAAS,EAAE;AAAb,SAJK;AAKbkR,cAAM,EAAE;AALK,OAAd;AAQAjkI,YAAM,CAAC0qD,gBAAP,CAAyB,KAAKw8E,MAA9B,EAAsC;AACrCmvC,kBAAU,EAAE;AACX/mK,aAAG,EAAE,eAAY;AAEhB1P,mBAAO,CAAC2W,IAAR,CAAc,uEAAd;AACA,mBAAO,KAAK4xH,MAAZ;AAEA;AANU;AADyB,OAAtC;AAWA;;AAED,aAASmuC,OAAT,CAAkBt4K,CAAlB,EAAqBC,CAArB,EAAyB;AAExB,aAAOD,CAAC,CAACogB,QAAF,GAAangB,CAAC,CAACmgB,QAAtB;AAEA;;AAED,aAASm4J,gBAAT,CAA0BppK,MAA1B,EAAkCo5E,SAAlC,EAA6CC,UAA7C,EAAyDle,SAAzD,EAAqE;AAEpE,UAAKn7D,MAAM,CAAC41D,MAAP,CAAcryD,IAAd,CAAoB61E,SAAS,CAACxjB,MAA9B,CAAL,EAA8C;AAE7C51D,cAAM,CAAC05D,OAAP,CAAgB0f,SAAhB,EAA2BC,UAA3B;AAEA;;AAED,UAAKle,SAAS,KAAK,IAAnB,EAA0B;AAEzB,YAAM/gD,QAAQ,GAAGpa,MAAM,CAACoa,QAAxB;;AAEA,aAAM,IAAI9oB,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGqe,QAAQ,CAACzpB,MAA9B,EAAsCW,KAAC,GAAGyK,CAA1C,EAA6CzK,KAAC,EAA9C,EAAoD;AAEnD83K,0BAAe,CAAEhvJ,QAAQ,CAAE9oB,KAAF,CAAV,EAAiB8nF,SAAjB,EAA4BC,UAA5B,EAAwC,IAAxC,CAAf;AAEA;AAED;AAED;;AAEDxmF,UAAM,CAACiiC,MAAP,CAAem0I,SAAS,CAACzgK,SAAzB,EAAoC;AAEnCmG,SAAG,EAAE,aAAW4xD,MAAX,EAAmBC,SAAnB,EAA+B;AAEnC;AAEA,aAAKC,GAAL,CAAS9xD,GAAT,CAAc4xD,MAAd,EAAsBC,SAAtB;AAEA,OARkC;AAUnC6oG,mBAAa,EAAE,uBAAWC,MAAX,EAAmBpqJ,MAAnB,EAA4B;AAE1C,YAAOA,MAAM,IAAIA,MAAM,CAACxN,mBAAxB,EAAgD;AAE/C,eAAK+uD,GAAL,CAASF,MAAT,CAAgB5Q,qBAAhB,CAAuCzwC,MAAM,CAACsvC,WAA9C;AACA,eAAKiS,GAAL,CAASD,SAAT,CAAmB7xD,GAAnB,CAAwB26J,MAAM,CAACrtK,CAA/B,EAAkCqtK,MAAM,CAACt2J,CAAzC,EAA4C,GAA5C,EAAkDs7C,SAAlD,CAA6DpvC,MAA7D,EAAsEzR,GAAtE,CAA2E,KAAKgzD,GAAL,CAASF,MAApF,EAA6FthB,SAA7F;AACA,eAAK//B,MAAL,GAAcA,MAAd;AAEA,SAND,MAMO,IAAOA,MAAM,IAAIA,MAAM,CAAClN,oBAAxB,EAAiD;AAEvD,eAAKyuD,GAAL,CAASF,MAAT,CAAgB5xD,GAAhB,CAAqB26J,MAAM,CAACrtK,CAA5B,EAA+BqtK,MAAM,CAACt2J,CAAtC,EAAyC,CAAEkM,MAAM,CAACm1C,IAAP,GAAcn1C,MAAM,CAACo1C,GAAvB,KAAiCp1C,MAAM,CAACm1C,IAAP,GAAcn1C,MAAM,CAACo1C,GAAtD,CAAzC,EAAuGhG,SAAvG,CAAkHpvC,MAAlH,EAFuD,CAEqE;;AAC5H,eAAKuhD,GAAL,CAASD,SAAT,CAAmB7xD,GAAnB,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAAE,CAAhC,EAAoC8/C,kBAApC,CAAwDvvC,MAAM,CAACsvC,WAA/D;AACA,eAAKtvC,MAAL,GAAcA,MAAd;AAEA,SANM,MAMA;AAENzsB,iBAAO,CAACD,KAAR,CAAe,2CAAf;AAEA;AAED,OA9BkC;AAgCnC42K,qBAAe,EAAE,yBAAWppK,MAAX,EAAmBm7D,SAAnB,EAA8BmjF,cAA9B,EAA+C;AAE/D,YAAMjlE,UAAU,GAAGilE,cAAc,IAAI,EAArC;;AAEA8qB,wBAAe,CAAEppK,MAAF,EAAU,IAAV,EAAgBq5E,UAAhB,EAA4Ble,SAA5B,CAAf;;AAEAke,kBAAU,CAACzoF,IAAX,CAAiBu4K,OAAjB;AAEA,eAAO9vF,UAAP;AAEA,OA1CkC;AA4CnCkwF,sBAAgB,EAAE,0BAAWt1E,OAAX,EAAoB94B,SAApB,EAA+BmjF,cAA/B,EAAgD;AAEjE,YAAMjlE,UAAU,GAAGilE,cAAc,IAAI,EAArC;;AAEA,YAAKv7H,KAAK,CAAC0jC,OAAN,CAAewtC,OAAf,MAA6B,KAAlC,EAA0C;AAEzCxhG,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACA,iBAAOiwE,UAAP;AAEA;;AAED,aAAM,IAAI/nF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGk4F,OAAO,CAACtjG,MAA7B,EAAqCW,KAAC,GAAGyK,CAAzC,EAA4CzK,KAAC,EAA7C,EAAmD;AAElD83K,0BAAe,CAAEn1E,OAAO,CAAE3iG,KAAF,CAAT,EAAgB,IAAhB,EAAsB+nF,UAAtB,EAAkCle,SAAlC,CAAf;AAEA;;AAEDke,kBAAU,CAACzoF,IAAX,CAAiBu4K,OAAjB;AAEA,eAAO9vF,UAAP;AAEA;AAjEkC,KAApC;AAqEA;;;;;;;QAOMmwF,S;AAEL,2BAA8C;AAAA,YAAjCr7J,MAAiC,uEAAxB,CAAwB;AAAA,YAArBhC,GAAqB,uEAAf,CAAe;AAAA,YAAZE,KAAY,uEAAJ,CAAI;;AAAA;;AAE7C,aAAK8B,MAAL,GAAcA,MAAd;AACA,aAAKhC,GAAL,GAAWA,GAAX,CAH6C,CAG7B;;AAChB,aAAKE,KAAL,GAAaA,KAAb,CAJ6C,CAIzB;;AAEpB,eAAO,IAAP;AAEA;;;;4BAEI8B,M,EAAQhC,G,EAAKE,K,EAAQ;AAEzB,eAAK8B,MAAL,GAAcA,MAAd;AACA,eAAKhC,GAAL,GAAWA,GAAX;AACA,eAAKE,KAAL,GAAaA,KAAb;AAEA,iBAAO,IAAP;AAEA;;;gCAEO;AAEP,iBAAO,IAAI,KAAK6I,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA;;;6BAEKi9J,K,EAAQ;AAEb,eAAKt7J,MAAL,GAAcs7J,KAAK,CAACt7J,MAApB;AACA,eAAKhC,GAAL,GAAWs9J,KAAK,CAACt9J,GAAjB;AACA,eAAKE,KAAL,GAAao9J,KAAK,CAACp9J,KAAnB;AAEA,iBAAO,IAAP;AAEA,S,CAED;;;;mCACW;AAEV,cAAMyC,GAAG,GAAG,QAAZ;AACA,eAAK3C,GAAL,GAAWtC,IAAI,CAACmE,GAAL,CAAUc,GAAV,EAAejF,IAAI,CAACkE,GAAL,CAAUlE,IAAI,CAACC,EAAL,GAAUgF,GAApB,EAAyB,KAAK3C,GAA9B,CAAf,CAAX;AAEA,iBAAO,IAAP;AAEA;;;uCAEe6E,C,EAAI;AAEnB,iBAAO,KAAK04J,sBAAL,CAA6B14J,CAAC,CAAC/U,CAA/B,EAAkC+U,CAAC,CAACgC,CAApC,EAAuChC,CAAC,CAACuN,CAAzC,CAAP;AAEA;;;+CAEuBtiB,C,EAAG+W,C,EAAGuL,C,EAAI;AAEjC,eAAKpQ,MAAL,GAActE,IAAI,CAACmK,IAAL,CAAW/X,CAAC,GAAGA,CAAJ,GAAQ+W,CAAC,GAAGA,CAAZ,GAAgBuL,CAAC,GAAGA,CAA/B,CAAd;;AAEA,cAAK,KAAKpQ,MAAL,KAAgB,CAArB,EAAyB;AAExB,iBAAK9B,KAAL,GAAa,CAAb;AACA,iBAAKF,GAAL,GAAW,CAAX;AAEA,WALD,MAKO;AAEN,iBAAKE,KAAL,GAAaxC,IAAI,CAACq1C,KAAL,CAAYjjD,CAAZ,EAAesiB,CAAf,CAAb;AACA,iBAAKpS,GAAL,GAAWtC,IAAI,CAACq9C,IAAL,CAAWzM,SAAS,CAACS,KAAV,CAAiBloC,CAAC,GAAG,KAAK7E,MAA1B,EAAkC,CAAE,CAApC,EAAuC,CAAvC,CAAX,CAAX;AAEA;;AAED,iBAAO,IAAP;AAEA;;;;;AAIF;;;;;AAIA,aAASw7J,WAAT,CAAsBx7J,MAAtB,EAA8B9B,KAA9B,EAAqC2G,CAArC,EAAyC;AAExC,WAAK7E,MAAL,GAAgBA,MAAM,KAAKzO,SAAb,GAA2ByO,MAA3B,GAAoC,GAAlD,CAFwC,CAEe;;AACvD,WAAK9B,KAAL,GAAeA,KAAK,KAAK3M,SAAZ,GAA0B2M,KAA1B,GAAkC,CAA/C,CAHwC,CAGU;;AAClD,WAAK2G,CAAL,GAAWA,CAAC,KAAKtT,SAAR,GAAsBsT,CAAtB,GAA0B,CAAnC,CAJwC,CAIF;;AAEtC,aAAO,IAAP;AAEA;;AAEDngB,UAAM,CAACiiC,MAAP,CAAe60I,WAAW,CAACnhK,SAA3B,EAAsC;AAErCmG,SAAG,EAAE,aAAWR,MAAX,EAAmB9B,KAAnB,EAA0B2G,CAA1B,EAA8B;AAElC,aAAK7E,MAAL,GAAcA,MAAd;AACA,aAAK9B,KAAL,GAAaA,KAAb;AACA,aAAK2G,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA,OAVoC;AAYrCpH,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAhBoC;AAkBrCA,UAAI,EAAE,cAAWi9J,KAAX,EAAmB;AAExB,aAAKt7J,MAAL,GAAcs7J,KAAK,CAACt7J,MAApB;AACA,aAAK9B,KAAL,GAAao9J,KAAK,CAACp9J,KAAnB;AACA,aAAK2G,CAAL,GAASy2J,KAAK,CAACz2J,CAAf;AAEA,eAAO,IAAP;AAEA,OA1BoC;AA4BrCrF,oBAAc,EAAE,wBAAWqD,CAAX,EAAe;AAE9B,eAAO,KAAK04J,sBAAL,CAA6B14J,CAAC,CAAC/U,CAA/B,EAAkC+U,CAAC,CAACgC,CAApC,EAAuChC,CAAC,CAACuN,CAAzC,CAAP;AAEA,OAhCoC;AAkCrCmrJ,4BAAsB,EAAE,gCAAWztK,CAAX,EAAc+W,CAAd,EAAiBuL,CAAjB,EAAqB;AAE5C,aAAKpQ,MAAL,GAActE,IAAI,CAACmK,IAAL,CAAW/X,CAAC,GAAGA,CAAJ,GAAQsiB,CAAC,GAAGA,CAAvB,CAAd;AACA,aAAKlS,KAAL,GAAaxC,IAAI,CAACq1C,KAAL,CAAYjjD,CAAZ,EAAesiB,CAAf,CAAb;AACA,aAAKvL,CAAL,GAASA,CAAT;AAEA,eAAO,IAAP;AAEA;AA1CoC,KAAtC;;AA8CA,QAAM42J,SAAS,GAAG,IAAItsH,OAAJ,EAAlB;;AAEA,aAASusH,IAAT,CAAe97J,GAAf,EAAoBC,GAApB,EAA0B;AAEzB,WAAKD,GAAL,GAAaA,GAAG,KAAKrO,SAAV,GAAwBqO,GAAxB,GAA8B,IAAIuvC,OAAJ,CAAa,CAAE9zC,QAAf,EAAyB,CAAEA,QAA3B,CAAzC;AACA,WAAKwE,GAAL,GAAaA,GAAG,KAAKtO,SAAV,GAAwBsO,GAAxB,GAA8B,IAAIsvC,OAAJ,CAAa,CAAE9zC,QAAf,EAAyB,CAAEA,QAA3B,CAAzC;AAEA;;AAED3W,UAAM,CAACiiC,MAAP,CAAe+0I,IAAI,CAACrhK,SAApB,EAA+B;AAE9BmG,SAAG,EAAE,aAAWZ,GAAX,EAAgBC,GAAhB,EAAsB;AAE1B,aAAKD,GAAL,CAASvB,IAAT,CAAeuB,GAAf;AACA,aAAKC,GAAL,CAASxB,IAAT,CAAewB,GAAf;AAEA,eAAO,IAAP;AAEA,OAT6B;AAW9BivD,mBAAa,EAAE,uBAAW59C,MAAX,EAAoB;AAElC,aAAK69C,SAAL;;AAEA,aAAM,IAAI5rE,KAAC,GAAG,CAAR,EAAW6rE,EAAE,GAAG99C,MAAM,CAAC1uB,MAA7B,EAAqCW,KAAC,GAAG6rE,EAAzC,EAA6C7rE,KAAC,EAA9C,EAAoD;AAEnD,eAAK8rE,aAAL,CAAoB/9C,MAAM,CAAE/tB,KAAF,CAA1B;AAEA;;AAED,eAAO,IAAP;AAEA,OAvB6B;AAyB9B+rE,0BAAoB,EAAE,8BAAW7vB,MAAX,EAAmBpmC,IAAnB,EAA0B;AAE/C,YAAMk2D,QAAQ,GAAGssG,SAAS,CAACp9J,IAAV,CAAgBpF,IAAhB,EAAuBsH,cAAvB,CAAuC,GAAvC,CAAjB;;AACA,aAAKX,GAAL,CAASvB,IAAT,CAAeghC,MAAf,EAAwB//B,GAAxB,CAA6B6vD,QAA7B;AACA,aAAKtvD,GAAL,CAASxB,IAAT,CAAeghC,MAAf,EAAwBj/B,GAAxB,CAA6B+uD,QAA7B;AAEA,eAAO,IAAP;AAEA,OAjC6B;AAmC9B1xD,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAvC6B;AAyC9BA,UAAI,EAAE,cAAWixD,GAAX,EAAiB;AAEtB,aAAK1vD,GAAL,CAASvB,IAAT,CAAeixD,GAAG,CAAC1vD,GAAnB;AACA,aAAKC,GAAL,CAASxB,IAAT,CAAeixD,GAAG,CAACzvD,GAAnB;AAEA,eAAO,IAAP;AAEA,OAhD6B;AAkD9BkvD,eAAS,EAAE,qBAAY;AAEtB,aAAKnvD,GAAL,CAAS9R,CAAT,GAAa,KAAK8R,GAAL,CAASiF,CAAT,GAAa,CAAExJ,QAA5B;AACA,aAAKwE,GAAL,CAAS/R,CAAT,GAAa,KAAK+R,GAAL,CAASgF,CAAT,GAAa,CAAExJ,QAA5B;AAEA,eAAO,IAAP;AAEA,OAzD6B;AA2D9Bk0D,aAAO,EAAE,mBAAY;AAEpB;AAEA,eAAS,KAAK1vD,GAAL,CAAS/R,CAAT,GAAa,KAAK8R,GAAL,CAAS9R,CAAxB,IAAiC,KAAK+R,GAAL,CAASgF,CAAT,GAAa,KAAKjF,GAAL,CAASiF,CAA9D;AAEA,OAjE6B;AAmE9By6B,eAAS,EAAE,mBAAWtyC,MAAX,EAAoB;AAE9B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,iDAAd;AACAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAKogB,OAAL,KAAiBviE,MAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,CAAjB,GAAsCxT,MAAM,CAAC4iD,UAAP,CAAmB,KAAKhwC,GAAxB,EAA6B,KAAKC,GAAlC,EAAwCU,cAAxC,CAAwD,GAAxD,CAA7C;AAEA,OA9E6B;AAgF9BivD,aAAO,EAAE,iBAAWxiE,MAAX,EAAoB;AAE5B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AACAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAKogB,OAAL,KAAiBviE,MAAM,CAACwT,GAAP,CAAY,CAAZ,EAAe,CAAf,CAAjB,GAAsCxT,MAAM,CAAC4X,UAAP,CAAmB,KAAK/E,GAAxB,EAA6B,KAAKD,GAAlC,CAA7C;AAEA,OA3F6B;AA6F9BqvD,mBAAa,EAAE,uBAAW14B,KAAX,EAAmB;AAEjC,aAAK32B,GAAL,CAASA,GAAT,CAAc22B,KAAd;AACA,aAAK12B,GAAL,CAASA,GAAT,CAAc02B,KAAd;AAEA,eAAO,IAAP;AAEA,OApG6B;AAsG9Bk5B,oBAAc,EAAE,wBAAWjF,MAAX,EAAoB;AAEnC,aAAK5qD,GAAL,CAASN,GAAT,CAAckrD,MAAd;AACA,aAAK3qD,GAAL,CAASO,GAAT,CAAcoqD,MAAd;AAEA,eAAO,IAAP;AAEA,OA7G6B;AA+G9BkF,oBAAc,EAAE,wBAAWngB,MAAX,EAAoB;AAEnC,aAAK3vC,GAAL,CAASiwC,SAAT,CAAoB,CAAEN,MAAtB;AACA,aAAK1vC,GAAL,CAASgwC,SAAT,CAAoBN,MAApB;AAEA,eAAO,IAAP;AAEA,OAtH6B;AAwH9BugB,mBAAa,EAAE,uBAAWv5B,KAAX,EAAmB;AAEjC,eAAOA,KAAK,CAACzoC,CAAN,GAAU,KAAK8R,GAAL,CAAS9R,CAAnB,IAAwByoC,KAAK,CAACzoC,CAAN,GAAU,KAAK+R,GAAL,CAAS/R,CAA3C,IACNyoC,KAAK,CAAC1xB,CAAN,GAAU,KAAKjF,GAAL,CAASiF,CADb,IACkB0xB,KAAK,CAAC1xB,CAAN,GAAU,KAAKhF,GAAL,CAASgF,CADrC,GACyC,KADzC,GACiD,IADxD;AAGA,OA7H6B;AA+H9BkrD,iBAAW,EAAE,qBAAWT,GAAX,EAAiB;AAE7B,eAAO,KAAK1vD,GAAL,CAAS9R,CAAT,IAAcwhE,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAtB,IAA2BwhE,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,IAAa,KAAK+R,GAAL,CAAS/R,CAAjD,IACN,KAAK8R,GAAL,CAASiF,CAAT,IAAcyqD,GAAG,CAAC1vD,GAAJ,CAAQiF,CADhB,IACqByqD,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,IAAa,KAAKhF,GAAL,CAASgF,CADlD;AAGA,OApI6B;AAsI9BmrD,kBAAY,EAAE,sBAAWz5B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAExC;AACA;AAEA,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,oDAAd;AACAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAOniD,MAAM,CAACwT,GAAP,CACN,CAAE+1B,KAAK,CAACzoC,CAAN,GAAU,KAAK8R,GAAL,CAAS9R,CAArB,KAA6B,KAAK+R,GAAL,CAAS/R,CAAT,GAAa,KAAK8R,GAAL,CAAS9R,CAAnD,CADM,EAEN,CAAEyoC,KAAK,CAAC1xB,CAAN,GAAU,KAAKjF,GAAL,CAASiF,CAArB,KAA6B,KAAKhF,GAAL,CAASgF,CAAT,GAAa,KAAKjF,GAAL,CAASiF,CAAnD,CAFM,CAAP;AAKA,OAvJ6B;AAyJ9BorD,mBAAa,EAAE,uBAAWX,GAAX,EAAiB;AAE/B;AAEA,eAAOA,GAAG,CAACzvD,GAAJ,CAAQ/R,CAAR,GAAY,KAAK8R,GAAL,CAAS9R,CAArB,IAA0BwhE,GAAG,CAAC1vD,GAAJ,CAAQ9R,CAAR,GAAY,KAAK+R,GAAL,CAAS/R,CAA/C,IACNwhE,GAAG,CAACzvD,GAAJ,CAAQgF,CAAR,GAAY,KAAKjF,GAAL,CAASiF,CADf,IACoByqD,GAAG,CAAC1vD,GAAJ,CAAQiF,CAAR,GAAY,KAAKhF,GAAL,CAASgF,CADzC,GAC6C,KAD7C,GACqD,IAD5D;AAGA,OAhK6B;AAkK9BurD,gBAAU,EAAE,oBAAW75B,KAAX,EAAkBvpC,MAAlB,EAA2B;AAEtC,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACAjO,gBAAM,GAAG,IAAImiD,OAAJ,EAAT;AAEA;;AAED,eAAOniD,MAAM,CAACqR,IAAP,CAAak4B,KAAb,EAAqBwW,KAArB,CAA4B,KAAKntC,GAAjC,EAAsC,KAAKC,GAA3C,CAAP;AAEA,OA7K6B;AA+K9B+wD,qBAAe,EAAE,yBAAWr6B,KAAX,EAAmB;AAEnC,YAAMs6B,YAAY,GAAG4qG,SAAS,CAACp9J,IAAV,CAAgBk4B,KAAhB,EAAwBwW,KAAxB,CAA+B,KAAKntC,GAApC,EAAyC,KAAKC,GAA9C,CAArB;;AACA,eAAOgxD,YAAY,CAACvxD,GAAb,CAAkBi3B,KAAlB,EAA0B/zC,MAA1B,EAAP;AAEA,OApL6B;AAsL9BuuE,eAAS,EAAE,mBAAWzB,GAAX,EAAiB;AAE3B,aAAK1vD,GAAL,CAASC,GAAT,CAAcyvD,GAAG,CAAC1vD,GAAlB;AACA,aAAKC,GAAL,CAASD,GAAT,CAAc0vD,GAAG,CAACzvD,GAAlB;AAEA,eAAO,IAAP;AAEA,OA7L6B;AA+L9BgwD,WAAK,EAAE,eAAWP,GAAX,EAAiB;AAEvB,aAAK1vD,GAAL,CAASA,GAAT,CAAc0vD,GAAG,CAAC1vD,GAAlB;AACA,aAAKC,GAAL,CAASA,GAAT,CAAcyvD,GAAG,CAACzvD,GAAlB;AAEA,eAAO,IAAP;AAEA,OAtM6B;AAwM9Bi2C,eAAS,EAAE,mBAAWj3C,MAAX,EAAoB;AAE9B,aAAKe,GAAL,CAASQ,GAAT,CAAcvB,MAAd;AACA,aAAKgB,GAAL,CAASO,GAAT,CAAcvB,MAAd;AAEA,eAAO,IAAP;AAEA,OA/M6B;AAiN9B0yC,YAAM,EAAE,gBAAW+d,GAAX,EAAiB;AAExB,eAAOA,GAAG,CAAC1vD,GAAJ,CAAQ2xC,MAAR,CAAgB,KAAK3xC,GAArB,KAA8B0vD,GAAG,CAACzvD,GAAJ,CAAQ0xC,MAAR,CAAgB,KAAK1xC,GAArB,CAArC;AAEA;AArN6B,KAA/B;;AAyNA,QAAM87J,OAAO,GAAG,IAAI18G,OAAJ,EAAhB;;AACA,QAAM28G,SAAS,GAAG,IAAI38G,OAAJ,EAAlB;;AAEA,aAAS48G,KAAT,CAAgBjmG,KAAhB,EAAuBp7C,GAAvB,EAA6B;AAE5B,WAAKo7C,KAAL,GAAeA,KAAK,KAAKrkE,SAAZ,GAA0BqkE,KAA1B,GAAkC,IAAI3W,OAAJ,EAA/C;AACA,WAAKzkC,GAAL,GAAaA,GAAG,KAAKjpB,SAAV,GAAwBipB,GAAxB,GAA8B,IAAIykC,OAAJ,EAAzC;AAEA;;AAEDv6D,UAAM,CAACiiC,MAAP,CAAek1I,KAAK,CAACxhK,SAArB,EAAgC;AAE/BmG,SAAG,EAAE,aAAWo1D,KAAX,EAAkBp7C,GAAlB,EAAwB;AAE5B,aAAKo7C,KAAL,CAAWv3D,IAAX,CAAiBu3D,KAAjB;AACA,aAAKp7C,GAAL,CAASnc,IAAT,CAAemc,GAAf;AAEA,eAAO,IAAP;AAEA,OAT8B;AAW/B/c,WAAK,EAAE,iBAAY;AAElB,eAAO,IAAI,KAAKsJ,WAAT,GAAuB1I,IAAvB,CAA6B,IAA7B,CAAP;AAEA,OAf8B;AAiB/BA,UAAI,EAAE,cAAW4S,IAAX,EAAkB;AAEvB,aAAK2kD,KAAL,CAAWv3D,IAAX,CAAiB4S,IAAI,CAAC2kD,KAAtB;AACA,aAAKp7C,GAAL,CAASnc,IAAT,CAAe4S,IAAI,CAACuJ,GAApB;AAEA,eAAO,IAAP;AAEA,OAxB8B;AA0B/B8kB,eAAS,EAAE,mBAAWtyC,MAAX,EAAoB;AAE9B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAAC4iD,UAAP,CAAmB,KAAKgmB,KAAxB,EAA+B,KAAKp7C,GAApC,EAA0Cja,cAA1C,CAA0D,GAA1D,CAAP;AAEA,OArC8B;AAuC/Bo1D,WAAK,EAAE,eAAW3oE,MAAX,EAAoB;AAE1B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,8CAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAOjyD,MAAM,CAAC4X,UAAP,CAAmB,KAAK4V,GAAxB,EAA6B,KAAKo7C,KAAlC,CAAP;AAEA,OAlD8B;AAoD/BkmG,gBAAU,EAAE,sBAAY;AAEvB,eAAO,KAAKlmG,KAAL,CAAWl1D,iBAAX,CAA8B,KAAK8Z,GAAnC,CAAP;AAEA,OAxD8B;AA0D/B1X,cAAQ,EAAE,oBAAY;AAErB,eAAO,KAAK8yD,KAAL,CAAW5kB,UAAX,CAAuB,KAAKx2B,GAA5B,CAAP;AAEA,OA9D8B;AAgE/B+3C,QAAE,EAAE,YAAWrpD,CAAX,EAAclc,MAAd,EAAuB;AAE1B,YAAKA,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,2CAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAK0W,KAAL,CAAY3oE,MAAZ,EAAqBuT,cAArB,CAAqC2I,CAArC,EAAyC9I,GAAzC,CAA8C,KAAKw1D,KAAnD,CAAP;AAEA,OA3E8B;AA6E/BmmG,kCAA4B,EAAE,sCAAWxlI,KAAX,EAAkBylI,WAAlB,EAAgC;AAE7DL,eAAO,CAAC/2J,UAAR,CAAoB2xB,KAApB,EAA2B,KAAKq/B,KAAhC;;AACAgmG,iBAAS,CAACh3J,UAAV,CAAsB,KAAK4V,GAA3B,EAAgC,KAAKo7C,KAArC;;AAEA,YAAMqmG,SAAS,GAAGL,SAAS,CAACh7J,GAAV,CAAeg7J,SAAf,CAAlB;;AACA,YAAMM,eAAe,GAAGN,SAAS,CAACh7J,GAAV,CAAe+6J,OAAf,CAAxB;;AAEA,YAAIzyJ,CAAC,GAAGgzJ,eAAe,GAAGD,SAA1B;;AAEA,YAAKD,WAAL,EAAmB;AAElB9yJ,WAAC,GAAGojC,SAAS,CAACS,KAAV,CAAiB7jC,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;AAEA;;AAED,eAAOA,CAAP;AAEA,OA/F8B;AAiG/BupD,yBAAmB,EAAE,6BAAWl8B,KAAX,EAAkBylI,WAAlB,EAA+BhvK,MAA/B,EAAwC;AAE5D,YAAMkc,CAAC,GAAG,KAAK6yJ,4BAAL,CAAmCxlI,KAAnC,EAA0CylI,WAA1C,CAAV;;AAEA,YAAKhvK,MAAM,KAAKuE,SAAhB,EAA4B;AAE3BjN,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACAjO,gBAAM,GAAG,IAAIiyD,OAAJ,EAAT;AAEA;;AAED,eAAO,KAAK0W,KAAL,CAAY3oE,MAAZ,EAAqBuT,cAArB,CAAqC2I,CAArC,EAAyC9I,GAAzC,CAA8C,KAAKw1D,KAAnD,CAAP;AAEA,OA9G8B;AAgH/B/c,kBAAY,EAAE,sBAAWj1C,MAAX,EAAoB;AAEjC,aAAKgyD,KAAL,CAAW/c,YAAX,CAAyBj1C,MAAzB;AACA,aAAK4W,GAAL,CAASq+B,YAAT,CAAuBj1C,MAAvB;AAEA,eAAO,IAAP;AAEA,OAvH8B;AAyH/B2tC,YAAM,EAAE,gBAAWtgC,IAAX,EAAkB;AAEzB,eAAOA,IAAI,CAAC2kD,KAAL,CAAWrkB,MAAX,CAAmB,KAAKqkB,KAAxB,KAAmC3kD,IAAI,CAACuJ,GAAL,CAAS+2B,MAAT,CAAiB,KAAK/2B,GAAtB,CAA1C;AAEA;AA7H8B,KAAhC;;AAiIA,aAAS2hJ,qBAAT,CAAgCxpJ,QAAhC,EAA2C;AAE1C41C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAKmb,QAAL,GAAgBA,QAAhB;;AACA,WAAKa,MAAL,GAAc;AAAW;AAAuB,OAAE,CAAlD;;AAEA,WAAKqvG,YAAL,GAAoB,KAApB;AACA,WAAKC,UAAL,GAAkB,KAAlB;AACA,WAAKE,SAAL,GAAiB,KAAjB;AACA,WAAKD,MAAL,GAAc,KAAd;AAEA,WAAKE,aAAL,GAAqB,IAArB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAKE,UAAL,GAAkB,IAAlB;AACA,WAAKD,OAAL,GAAe,IAAf;AAEA,WAAKj3D,KAAL,GAAa,CAAb;AAEA;;AAEDiwG,yBAAqB,CAAC9hK,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAlC;AACA8hK,yBAAqB,CAAC9hK,SAAtB,CAAgC0M,WAAhC,GAA8Co1J,qBAA9C;AAEAA,yBAAqB,CAAC9hK,SAAtB,CAAgCoqH,uBAAhC,GAA0D,IAA1D;;AAEA,QAAM23C,SAAS,GAAG,IAAIn9G,OAAJ,EAAlB;;AAEA,aAASo9G,eAAT,CAA0B55D,KAA1B,EAAiC3vF,KAAjC,EAAyC;AAExCy1C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAKirG,KAAL,GAAaA,KAAb;AACA,WAAKA,KAAL,CAAWt3C,iBAAX;AAEA,WAAKvnD,MAAL,GAAc6+F,KAAK,CAACpiD,WAApB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA,WAAK1kC,KAAL,GAAaA,KAAb;AAEA,UAAM25C,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AAEA,UAAMa,SAAS,GAAG,CACjB,CADiB,EACd,CADc,EACX,CADW,EACP,CADO,EACJ,CADI,EACD,CADC,EAEjB,CAFiB,EAEd,CAFc,EAEX,CAFW,EAEP,CAFO,EAEJ,CAFI,EAED,CAFC,EAGjB,CAHiB,EAGd,CAHc,EAGX,CAHW,EAGR,CAAE,CAHM,EAGH,CAHG,EAGA,CAHA,EAIjB,CAJiB,EAId,CAJc,EAIX,CAJW,EAIP,CAJO,EAIJ,CAJI,EAID,CAJC,EAKjB,CALiB,EAKd,CALc,EAKX,CALW,EAKP,CALO,EAKJ,CAAE,CALE,EAKC,CALD,CAAlB;;AAQA,WAAM,IAAI1jF,KAAC,GAAG,CAAR,EAAWM,CAAC,GAAG,CAAf,EAAkBmK,CAAC,GAAG,EAA5B,EAAgCzK,KAAC,GAAGyK,CAApC,EAAuCzK,KAAC,IAAKM,CAAC,EAA9C,EAAoD;AAEnD,YAAM0tE,EAAE,GAAKhuE,KAAC,GAAGyK,CAAN,GAAY8N,IAAI,CAACC,EAAjB,GAAsB,CAAjC;AACA,YAAMy1D,EAAE,GAAK3tE,CAAC,GAAGmK,CAAN,GAAY8N,IAAI,CAACC,EAAjB,GAAsB,CAAjC;AAEAkrE,iBAAS,CAAChjF,IAAV,CACC6X,IAAI,CAACujC,GAAL,CAAUkyB,EAAV,CADD,EACiBz1D,IAAI,CAACwjC,GAAL,CAAUiyB,EAAV,CADjB,EACiC,CADjC,EAECz1D,IAAI,CAACujC,GAAL,CAAUmyB,EAAV,CAFD,EAEiB11D,IAAI,CAACwjC,GAAL,CAAUkyB,EAAV,CAFjB,EAEiC,CAFjC;AAKA;;AAED3E,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BqD,SAA5B,EAAuC,CAAvC,CAAnC;AAEA,UAAMl0D,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAElyC,WAAG,EAAE,KAAP;AAAcyQ,kBAAU,EAAE;AAA1B,OAAvB,CAAjB;AAEA,WAAK0+F,IAAL,GAAY,IAAI/vC,YAAJ,CAAkB9/D,QAAlB,EAA4B95C,QAA5B,CAAZ;AACA,WAAKvS,GAAL,CAAU,KAAKk8J,IAAf;AAEA,WAAK79J,MAAL;AAEA;;AAED49J,mBAAe,CAAChiK,SAAhB,GAA4B3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAA5B;AACAgiK,mBAAe,CAAChiK,SAAhB,CAA0B0M,WAA1B,GAAwCs1J,eAAxC;;AAEAA,mBAAe,CAAChiK,SAAhB,CAA0ByG,OAA1B,GAAoC,YAAY;AAE/C,WAAKw7J,IAAL,CAAU7vG,QAAV,CAAmB3rD,OAAnB;AACA,WAAKw7J,IAAL,CAAU3pJ,QAAV,CAAmB7R,OAAnB;AAEA,KALD;;AAOAu7J,mBAAe,CAAChiK,SAAhB,CAA0BoE,MAA1B,GAAmC,YAAY;AAE9C,WAAKgkG,KAAL,CAAWt3C,iBAAX;AAEA,UAAMoxG,UAAU,GAAG,KAAK95D,KAAL,CAAW3/F,QAAX,GAAsB,KAAK2/F,KAAL,CAAW3/F,QAAjC,GAA4C,IAA/D;AACA,UAAM05J,SAAS,GAAGD,UAAU,GAAG7gK,IAAI,CAAC+H,GAAL,CAAU,KAAKg/F,KAAL,CAAW//F,KAArB,CAA/B;AAEA,WAAK45J,IAAL,CAAUr8J,KAAV,CAAgBO,GAAhB,CAAqBg8J,SAArB,EAAgCA,SAAhC,EAA2CD,UAA3C;;AAEAH,eAAS,CAAC56G,qBAAV,CAAiC,KAAKihD,KAAL,CAAWz1G,MAAX,CAAkBqzD,WAAnD;;AAEA,WAAKi8G,IAAL,CAAUh8J,MAAV,CAAkB87J,SAAlB;;AAEA,UAAK,KAAKtpJ,KAAL,KAAevhB,SAApB,EAAgC;AAE/B,aAAK+qK,IAAL,CAAU3pJ,QAAV,CAAmBG,KAAnB,CAAyBtS,GAAzB,CAA8B,KAAKsS,KAAnC;AAEA,OAJD,MAIO;AAEN,aAAKwpJ,IAAL,CAAU3pJ,QAAV,CAAmBG,KAAnB,CAAyBzU,IAAzB,CAA+B,KAAKokG,KAAL,CAAW3vF,KAA1C;AAEA;AAED,KAvBD;;AAyBA,QAAM2pJ,SAAS,GAAG,IAAIx9G,OAAJ,EAAlB;;AACA,QAAMy9G,WAAW,GAAG,IAAI76G,OAAJ,EAApB;;AACA,QAAM86G,eAAe,GAAG,IAAI96G,OAAJ,EAAxB;;AAEA,aAAS+6G,WAAT,CAAsB/qK,MAAtB,EAA+B;AAE9B,UAAMgrK,QAAQ,GAAG,EAAjB;;AAEA,UAAKhrK,MAAM,IAAIA,MAAM,CAAC24H,MAAtB,EAA+B;AAE9BqyC,gBAAQ,CAACh5K,IAAT,CAAegO,MAAf;AAEA;;AAED,WAAM,IAAI1O,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG0O,MAAM,CAACoa,QAAP,CAAgBzpB,MAArC,EAA6CW,KAAC,EAA9C,EAAoD;AAEnD05K,gBAAQ,CAACh5K,IAAT,CAAc2U,KAAd,CAAqBqkK,QAArB,EAA+BD,WAAW,CAAE/qK,MAAM,CAACoa,QAAP,CAAiB9oB,KAAjB,CAAF,CAA1C;AAEA;;AAED,aAAO05K,QAAP;AAEA;;AAED,aAASC,cAAT,CAAyBjrK,MAAzB,EAAkC;AAEjC,UAAMguG,KAAK,GAAG+8D,WAAW,CAAE/qK,MAAF,CAAzB;AAEA,UAAM46D,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AAEA,UAAM/yD,QAAQ,GAAG,EAAjB;AACA,UAAMd,MAAM,GAAG,EAAf;AAEA,UAAM4oD,MAAM,GAAG,IAAIjC,KAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAf;AACA,UAAMkC,MAAM,GAAG,IAAIlC,KAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAf;;AAEA,WAAM,IAAI31E,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG08G,KAAK,CAACr9G,MAA3B,EAAmCW,KAAC,EAApC,EAA0C;AAEzC,YAAMonI,IAAI,GAAG1qB,KAAK,CAAE18G,KAAF,CAAlB;;AAEA,YAAKonI,IAAI,CAAC/hE,MAAL,IAAe+hE,IAAI,CAAC/hE,MAAL,CAAYgiE,MAAhC,EAAyC;AAExCv3G,kBAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAovB,kBAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAsuB,gBAAM,CAACtuB,IAAP,CAAak3E,MAAM,CAACnnD,CAApB,EAAuBmnD,MAAM,CAAChjD,CAA9B,EAAiCgjD,MAAM,CAACp4E,CAAxC;AACAwvB,gBAAM,CAACtuB,IAAP,CAAam3E,MAAM,CAACpnD,CAApB,EAAuBonD,MAAM,CAACjjD,CAA9B,EAAiCijD,MAAM,CAACr4E,CAAxC;AAEA;AAED;;AAED8pE,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAAnC;AACAw5C,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI9C,sBAAJ,CAA4BrxD,MAA5B,EAAoC,CAApC,CAAhC;AAEA,UAAMQ,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAE9jC,oBAAY,EAAE,IAAhB;AAAsBe,iBAAS,EAAE,KAAjC;AAAwCC,kBAAU,EAAE,KAApD;AAA2DqB,kBAAU,EAAE,KAAvE;AAA8E9B,mBAAW,EAAE;AAA3F,OAAvB,CAAjB;AAEAywD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC95C,QAAnC;AAEA,WAAK9qB,IAAL,GAAY,gBAAZ;AAEA,WAAKuR,IAAL,GAAYvH,MAAZ;AACA,WAAKguG,KAAL,GAAaA,KAAb;AAEA,WAAKj8F,MAAL,GAAc/R,MAAM,CAACwuD,WAArB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA;;AAEDslH,kBAAc,CAACziK,SAAf,GAA2B3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAA3B;AACAyiK,kBAAc,CAACziK,SAAf,CAAyB0M,WAAzB,GAAuC+1J,cAAvC;AAEAA,kBAAc,CAACziK,SAAf,CAAyB0iK,gBAAzB,GAA4C,IAA5C;;AAEAD,kBAAc,CAACziK,SAAf,CAAyB8wD,iBAAzB,GAA6C,UAAWQ,KAAX,EAAmB;AAE/D,UAAMk0C,KAAK,GAAG,KAAKA,KAAnB;AAEA,UAAMpzC,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM9uD,QAAQ,GAAG8uD,QAAQ,CAAC11B,YAAT,CAAuB,UAAvB,CAAjB;;AAEA4lI,qBAAe,CAACjoH,UAAhB,CAA4B,KAAKt7C,IAAL,CAAUinD,WAAtC;;AAEA,WAAM,IAAIl9D,KAAC,GAAG,CAAR,EAAWM,CAAC,GAAG,CAArB,EAAwBN,KAAC,GAAG08G,KAAK,CAACr9G,MAAlC,EAA0CW,KAAC,EAA3C,EAAiD;AAEhD,YAAMonI,IAAI,GAAG1qB,KAAK,CAAE18G,KAAF,CAAlB;;AAEA,YAAKonI,IAAI,CAAC/hE,MAAL,IAAe+hE,IAAI,CAAC/hE,MAAL,CAAYgiE,MAAhC,EAAyC;AAExCkyC,qBAAW,CAACvpH,gBAAZ,CAA8BwpH,eAA9B,EAA+CpyC,IAAI,CAAClqE,WAApD;;AACAo8G,mBAAS,CAACj7G,qBAAV,CAAiCk7G,WAAjC;;AACA/+J,kBAAQ,CAACglE,MAAT,CAAiBl/E,CAAjB,EAAoBg5K,SAAS,CAAC3uK,CAA9B,EAAiC2uK,SAAS,CAAC53J,CAA3C,EAA8C43J,SAAS,CAACrsJ,CAAxD;;AAEAssJ,qBAAW,CAACvpH,gBAAZ,CAA8BwpH,eAA9B,EAA+CpyC,IAAI,CAAC/hE,MAAL,CAAYnI,WAA3D;;AACAo8G,mBAAS,CAACj7G,qBAAV,CAAiCk7G,WAAjC;;AACA/+J,kBAAQ,CAACglE,MAAT,CAAiBl/E,CAAC,GAAG,CAArB,EAAwBg5K,SAAS,CAAC3uK,CAAlC,EAAqC2uK,SAAS,CAAC53J,CAA/C,EAAkD43J,SAAS,CAACrsJ,CAA5D;AAEA3sB,WAAC,IAAI,CAAL;AAEA;AAED;;AAEDgpE,cAAQ,CAAC11B,YAAT,CAAuB,UAAvB,EAAoC5xB,WAApC,GAAkD,IAAlD;AAEAojD,cAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,KAjCD;;AAmCA,aAASqxG,gBAAT,CAA2Bv6D,KAA3B,EAAkCw6D,UAAlC,EAA8CnqJ,KAA9C,EAAsD;AAErD,WAAK2vF,KAAL,GAAaA,KAAb;AACA,WAAKA,KAAL,CAAWt3C,iBAAX;AAEA,WAAKr4C,KAAL,GAAaA,KAAb;AAEA,UAAM25C,QAAQ,GAAG,IAAImxE,oBAAJ,CAA0Bq/B,UAA1B,EAAsC,CAAtC,EAAyC,CAAzC,CAAjB;AACA,UAAMtqJ,QAAQ,GAAG,IAAI0uD,iBAAJ,CAAuB;AAAET,iBAAS,EAAE,IAAb;AAAmBzT,WAAG,EAAE,KAAxB;AAA+ByQ,kBAAU,EAAE;AAA3C,OAAvB,CAAjB;AAEAgN,UAAI,CAACpzE,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B95C,QAA3B;AAEA,WAAK9qB,IAAL,GAAY,kBAAZ;AAEA,WAAK+b,MAAL,GAAc,KAAK6+F,KAAL,CAAWpiD,WAAzB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA,WAAK/4C,MAAL;AAGA;;;;;;;;;;;;;;;;;;;;;AAsBA;;AAEDu+J,oBAAgB,CAAC3iK,SAAjB,GAA6B3V,MAAM,CAACiU,MAAP,CAAeiyE,IAAI,CAACvwE,SAApB,CAA7B;AACA2iK,oBAAgB,CAAC3iK,SAAjB,CAA2B0M,WAA3B,GAAyCi2J,gBAAzC;;AAEAA,oBAAgB,CAAC3iK,SAAjB,CAA2ByG,OAA3B,GAAqC,YAAY;AAEhD,WAAK2rD,QAAL,CAAc3rD,OAAd;AACA,WAAK6R,QAAL,CAAc7R,OAAd;AAEA,KALD;;AAOAk8J,oBAAgB,CAAC3iK,SAAjB,CAA2BoE,MAA3B,GAAoC,YAAY;AAE/C,UAAK,KAAKqU,KAAL,KAAevhB,SAApB,EAAgC;AAE/B,aAAKohB,QAAL,CAAcG,KAAd,CAAoBtS,GAApB,CAAyB,KAAKsS,KAA9B;AAEA,OAJD,MAIO;AAEN,aAAKH,QAAL,CAAcG,KAAd,CAAoBzU,IAApB,CAA0B,KAAKokG,KAAL,CAAW3vF,KAArC;AAEA;AAED;;;;;;;;;;;;;;;AAeA,KA3BD;;AA6BA,QAAMoqJ,SAAS,GAAG,IAAIj+G,OAAJ,EAAlB;;AACA,QAAMk+G,OAAO,GAAG,IAAIrkG,KAAJ,EAAhB;;AACA,QAAMskG,OAAO,GAAG,IAAItkG,KAAJ,EAAhB;;AAEA,aAASukG,qBAAT,CAAgC56D,KAAhC,EAAuCxpG,IAAvC,EAA6C6Z,KAA7C,EAAqD;AAEpDy1C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAKirG,KAAL,GAAaA,KAAb;AACA,WAAKA,KAAL,CAAWt3C,iBAAX;AAEA,WAAKvnD,MAAL,GAAc6+F,KAAK,CAACpiD,WAApB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA,WAAK1kC,KAAL,GAAaA,KAAb;AAEA,UAAM25C,QAAQ,GAAG,IAAI2jE,wBAAJ,CAA8Bn3H,IAA9B,CAAjB;AACAwzD,cAAQ,CAACxC,OAAT,CAAkBvuD,IAAI,CAACC,EAAL,GAAU,GAA5B;AAEA,WAAKgX,QAAL,GAAgB,IAAI0uD,iBAAJ,CAAuB;AAAET,iBAAS,EAAE,IAAb;AAAmBzT,WAAG,EAAE,KAAxB;AAA+ByQ,kBAAU,EAAE;AAA3C,OAAvB,CAAhB;AACA,UAAK,KAAK9qD,KAAL,KAAevhB,SAApB,EAAgC,KAAKohB,QAAL,CAAc4oD,YAAd,GAA6B,IAA7B;AAEhC,UAAM59D,QAAQ,GAAG8uD,QAAQ,CAAC11B,YAAT,CAAuB,UAAvB,CAAjB;AACA,UAAM5kB,MAAM,GAAG,IAAIsxD,YAAJ,CAAkB9lE,QAAQ,CAACuuD,KAAT,GAAiB,CAAnC,CAAf;AAEAO,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI5E,eAAJ,CAAqBvvD,MAArB,EAA6B,CAA7B,CAAhC;AAEA,WAAK/R,GAAL,CAAU,IAAIwqE,IAAJ,CAAUne,QAAV,EAAoB,KAAK95C,QAAzB,CAAV;AAEA,WAAKlU,MAAL;AAEA;;AAED4+J,yBAAqB,CAAChjK,SAAtB,GAAkC3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAlC;AACAgjK,yBAAqB,CAAChjK,SAAtB,CAAgC0M,WAAhC,GAA8Cs2J,qBAA9C;;AAEAA,yBAAqB,CAAChjK,SAAtB,CAAgCyG,OAAhC,GAA0C,YAAY;AAErD,WAAKmL,QAAL,CAAe,CAAf,EAAmBwgD,QAAnB,CAA4B3rD,OAA5B;AACA,WAAKmL,QAAL,CAAe,CAAf,EAAmB0G,QAAnB,CAA4B7R,OAA5B;AAEA,KALD;;AAOAu8J,yBAAqB,CAAChjK,SAAtB,CAAgCoE,MAAhC,GAAyC,YAAY;AAEpD,UAAM+T,IAAI,GAAG,KAAKvG,QAAL,CAAe,CAAf,CAAb;;AAEA,UAAK,KAAK6G,KAAL,KAAevhB,SAApB,EAAgC;AAE/B,aAAKohB,QAAL,CAAcG,KAAd,CAAoBtS,GAApB,CAAyB,KAAKsS,KAA9B;AAEA,OAJD,MAIO;AAEN,YAAMX,MAAM,GAAGK,IAAI,CAACi6C,QAAL,CAAc11B,YAAd,CAA4B,OAA5B,CAAf;;AAEAomI,eAAO,CAAC9+J,IAAR,CAAc,KAAKokG,KAAL,CAAW3vF,KAAzB;;AACAsqJ,eAAO,CAAC/+J,IAAR,CAAc,KAAKokG,KAAL,CAAWjoB,WAAzB;;AAEA,aAAM,IAAIr3F,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGukB,MAAM,CAAC+5C,KAA5B,EAAmC/oE,KAAC,GAAGyK,CAAvC,EAA0CzK,KAAC,EAA3C,EAAiD;AAEhD,cAAM2vB,KAAK,GAAK3vB,KAAC,GAAKyK,CAAC,GAAG,CAAZ,GAAoBuvK,OAApB,GAA8BC,OAA5C;AAEAjrJ,gBAAM,CAACwwD,MAAP,CAAex/E,KAAf,EAAkB2vB,KAAK,CAACc,CAAxB,EAA2Bd,KAAK,CAACiF,CAAjC,EAAoCjF,KAAK,CAACnwB,CAA1C;AAEA;;AAEDwvB,cAAM,CAAChN,WAAP,GAAqB,IAArB;AAEA;;AAEDqN,UAAI,CAAClS,MAAL,CAAa48J,SAAS,CAAC17G,qBAAV,CAAiC,KAAKihD,KAAL,CAAWpiD,WAA5C,EAA0D3P,MAA1D,EAAb;AAEA,KA7BD;;AA+BA,aAAS4sH,UAAT,CAAqBrkK,IAArB,EAA2Bq3I,SAA3B,EAAsCv1E,MAAtC,EAA8CC,MAA9C,EAAuD;AAEtD/hE,UAAI,GAAGA,IAAI,IAAI,EAAf;AACAq3I,eAAS,GAAGA,SAAS,IAAI,EAAzB;AACAv1E,YAAM,GAAG,IAAIjC,KAAJ,CAAWiC,MAAM,KAAKxpE,SAAX,GAAuBwpE,MAAvB,GAAgC,QAA3C,CAAT;AACAC,YAAM,GAAG,IAAIlC,KAAJ,CAAWkC,MAAM,KAAKzpE,SAAX,GAAuBypE,MAAvB,GAAgC,QAA3C,CAAT;AAEA,UAAM37B,MAAM,GAAGixG,SAAS,GAAG,CAA3B;AACA,UAAMnlI,IAAI,GAAGlS,IAAI,GAAGq3I,SAApB;AACA,UAAMnhF,QAAQ,GAAGl2D,IAAI,GAAG,CAAxB;AAEA,UAAMga,QAAQ,GAAG,EAAjB;AAAA,UAAqBd,MAAM,GAAG,EAA9B;;AAEA,WAAM,IAAIhvB,KAAC,GAAG,CAAR,EAAWM,CAAC,GAAG,CAAf,EAAkBE,CAAC,GAAG,CAAEwrE,QAA9B,EAAwChsE,KAAC,IAAImtJ,SAA7C,EAAwDntJ,KAAC,IAAKQ,CAAC,IAAIwnB,IAAnE,EAA0E;AAEzE8H,gBAAQ,CAACpvB,IAAT,CAAe,CAAEsrE,QAAjB,EAA2B,CAA3B,EAA8BxrE,CAA9B,EAAiCwrE,QAAjC,EAA2C,CAA3C,EAA8CxrE,CAA9C;AACAsvB,gBAAQ,CAACpvB,IAAT,CAAeF,CAAf,EAAkB,CAAlB,EAAqB,CAAEwrE,QAAvB,EAAiCxrE,CAAjC,EAAoC,CAApC,EAAuCwrE,QAAvC;AAEA,YAAMr8C,KAAK,GAAG3vB,KAAC,KAAKk8C,MAAN,GAAe07B,MAAf,GAAwBC,MAAtC;AAEAloD,aAAK,CAAC2+B,OAAN,CAAet/B,MAAf,EAAuB1uB,CAAvB;AAA4BA,SAAC,IAAI,CAAL;AAC5BqvB,aAAK,CAAC2+B,OAAN,CAAet/B,MAAf,EAAuB1uB,CAAvB;AAA4BA,SAAC,IAAI,CAAL;AAC5BqvB,aAAK,CAAC2+B,OAAN,CAAet/B,MAAf,EAAuB1uB,CAAvB;AAA4BA,SAAC,IAAI,CAAL;AAC5BqvB,aAAK,CAAC2+B,OAAN,CAAet/B,MAAf,EAAuB1uB,CAAvB;AAA4BA,SAAC,IAAI,CAAL;AAE5B;;AAED,UAAMgpE,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAAnC;AACAw5C,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI9C,sBAAJ,CAA4BrxD,MAA5B,EAAoC,CAApC,CAAhC;AAEA,UAAMQ,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAE9jC,oBAAY,EAAE,IAAhB;AAAsBqC,kBAAU,EAAE;AAAlC,OAAvB,CAAjB;AAEA2uD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC95C,QAAnC;AAEA,WAAK9qB,IAAL,GAAY,YAAZ;AAEA;;AAEDy1K,cAAU,CAACjjK,SAAX,GAAuB3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAAvB;AACAijK,cAAU,CAACjjK,SAAX,CAAqB0M,WAArB,GAAmCu2J,UAAnC;;AAEA,aAASC,eAAT,CAA0Bv9J,MAA1B,EAAkCw9J,OAAlC,EAA2CC,OAA3C,EAAoDntB,SAApD,EAA+Dv1E,MAA/D,EAAuEC,MAAvE,EAAgF;AAE/Eh7D,YAAM,GAAGA,MAAM,IAAI,EAAnB;AACAw9J,aAAO,GAAGA,OAAO,IAAI,EAArB;AACAC,aAAO,GAAGA,OAAO,IAAI,CAArB;AACAntB,eAAS,GAAGA,SAAS,IAAI,EAAzB;AACAv1E,YAAM,GAAG,IAAIjC,KAAJ,CAAWiC,MAAM,KAAKxpE,SAAX,GAAuBwpE,MAAvB,GAAgC,QAA3C,CAAT;AACAC,YAAM,GAAG,IAAIlC,KAAJ,CAAWkC,MAAM,KAAKzpE,SAAX,GAAuBypE,MAAvB,GAAgC,QAA3C,CAAT;AAEA,UAAM/nD,QAAQ,GAAG,EAAjB;AACA,UAAMd,MAAM,GAAG,EAAf,CAV+E,CAY/E;;AAEA,WAAM,IAAIhvB,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIq6K,OAAtB,EAA+Br6K,KAAC,EAAhC,EAAsC;AAErC,YAAM0f,CAAC,GAAK1f,KAAC,GAAGq6K,OAAN,IAAoB9hK,IAAI,CAACC,EAAL,GAAU,CAA9B,CAAV;AAEA,YAAM7N,CAAC,GAAG4N,IAAI,CAACwjC,GAAL,CAAUr8B,CAAV,IAAgB7C,MAA1B;AACA,YAAMoQ,CAAC,GAAG1U,IAAI,CAACujC,GAAL,CAAUp8B,CAAV,IAAgB7C,MAA1B;AAEAiT,gBAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAovB,gBAAQ,CAACpvB,IAAT,CAAeiK,CAAf,EAAkB,CAAlB,EAAqBsiB,CAArB;AAEA,YAAM0C,KAAK,GAAK3vB,KAAC,GAAG,CAAN,GAAY43E,MAAZ,GAAqBC,MAAnC;AAEA7oD,cAAM,CAACtuB,IAAP,CAAaivB,KAAK,CAACc,CAAnB,EAAsBd,KAAK,CAACiF,CAA5B,EAA+BjF,KAAK,CAACnwB,CAArC;AACAwvB,cAAM,CAACtuB,IAAP,CAAaivB,KAAK,CAACc,CAAnB,EAAsBd,KAAK,CAACiF,CAA5B,EAA+BjF,KAAK,CAACnwB,CAArC;AAEA,OA7B8E,CA+B/E;;;AAEA,WAAM,IAAIQ,KAAC,GAAG,CAAd,EAAiBA,KAAC,IAAIs6K,OAAtB,EAA+Bt6K,KAAC,EAAhC,EAAsC;AAErC,YAAM2vB,MAAK,GAAK3vB,KAAC,GAAG,CAAN,GAAY43E,MAAZ,GAAqBC,MAAnC;;AAEA,YAAMpnD,CAAC,GAAG5T,MAAM,GAAKA,MAAM,GAAGy9J,OAAT,GAAmBt6K,KAAxC;;AAEA,aAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG6sJ,SAArB,EAAgC7sJ,CAAC,EAAjC,EAAuC;AAEtC;AAEA,cAAIof,GAAC,GAAKpf,CAAC,GAAG6sJ,SAAN,IAAsB50I,IAAI,CAACC,EAAL,GAAU,CAAhC,CAAR;;AAEA,cAAI7N,GAAC,GAAG4N,IAAI,CAACwjC,GAAL,CAAUr8B,GAAV,IAAgB+Q,CAAxB;;AACA,cAAIxD,GAAC,GAAG1U,IAAI,CAACujC,GAAL,CAAUp8B,GAAV,IAAgB+Q,CAAxB;;AAEAX,kBAAQ,CAACpvB,IAAT,CAAeiK,GAAf,EAAkB,CAAlB,EAAqBsiB,GAArB;AACA+B,gBAAM,CAACtuB,IAAP,CAAaivB,MAAK,CAACc,CAAnB,EAAsBd,MAAK,CAACiF,CAA5B,EAA+BjF,MAAK,CAACnwB,CAArC,EAVsC,CAYtC;;AAEAkgB,aAAC,GAAK,CAAEpf,CAAC,GAAG,CAAN,IAAY6sJ,SAAd,IAA8B50I,IAAI,CAACC,EAAL,GAAU,CAAxC,CAAJ;AAEA7N,aAAC,GAAG4N,IAAI,CAACwjC,GAAL,CAAUr8B,GAAV,IAAgB+Q,CAApB;AACAxD,aAAC,GAAG1U,IAAI,CAACujC,GAAL,CAAUp8B,GAAV,IAAgB+Q,CAApB;AAEAX,kBAAQ,CAACpvB,IAAT,CAAeiK,GAAf,EAAkB,CAAlB,EAAqBsiB,GAArB;AACA+B,gBAAM,CAACtuB,IAAP,CAAaivB,MAAK,CAACc,CAAnB,EAAsBd,MAAK,CAACiF,CAA5B,EAA+BjF,MAAK,CAACnwB,CAArC;AAEA;AAED;;AAED,UAAM8pE,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAAnC;AACAw5C,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI9C,sBAAJ,CAA4BrxD,MAA5B,EAAoC,CAApC,CAAhC;AAEA,UAAMQ,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAE9jC,oBAAY,EAAE,IAAhB;AAAsBqC,kBAAU,EAAE;AAAlC,OAAvB,CAAjB;AAEA2uD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC95C,QAAnC;AAEA,WAAK9qB,IAAL,GAAY,iBAAZ;AAEA;;AAED01K,mBAAe,CAACljK,SAAhB,GAA4B3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAA5B;AACAkjK,mBAAe,CAACljK,SAAhB,CAA0B0M,WAA1B,GAAwCw2J,eAAxC;;AAEA,QAAMG,KAAK,GAAG,IAAIz+G,OAAJ,EAAd;;AACA,QAAM0+G,KAAK,GAAG,IAAI1+G,OAAJ,EAAd;;AACA,QAAM2+G,KAAK,GAAG,IAAI3+G,OAAJ,EAAd;;AAEA,aAAS4+G,sBAAT,CAAiCp7D,KAAjC,EAAwCxpG,IAAxC,EAA8C6Z,KAA9C,EAAsD;AAErDy1C,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAKirG,KAAL,GAAaA,KAAb;AACA,WAAKA,KAAL,CAAWt3C,iBAAX;AAEA,WAAKvnD,MAAL,GAAc6+F,KAAK,CAACpiD,WAApB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA,WAAK1kC,KAAL,GAAaA,KAAb;AAEA,UAAK7Z,IAAI,KAAK1H,SAAd,EAA0B0H,IAAI,GAAG,CAAP;AAE1B,UAAIwzD,QAAQ,GAAG,IAAIuZ,cAAJ,EAAf;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4B,CAC9D,CAAEvqE,IAD4D,EACtDA,IADsD,EAChD,CADgD,EAE9DA,IAF8D,EAExDA,IAFwD,EAElD,CAFkD,EAG9DA,IAH8D,EAGxD,CAAEA,IAHsD,EAGhD,CAHgD,EAI9D,CAAEA,IAJ4D,EAItD,CAAEA,IAJoD,EAI9C,CAJ8C,EAK9D,CAAEA,IAL4D,EAKtDA,IALsD,EAKhD,CALgD,CAA5B,EAMhC,CANgC,CAAnC;AAQA,UAAM0Z,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAElyC,WAAG,EAAE,KAAP;AAAcyQ,kBAAU,EAAE;AAA1B,OAAvB,CAAjB;AAEA,WAAKkgG,UAAL,GAAkB,IAAIllI,IAAJ,CAAU6zB,QAAV,EAAoB95C,QAApB,CAAlB;AACA,WAAKvS,GAAL,CAAU,KAAK09J,UAAf;AAEArxG,cAAQ,GAAG,IAAIuZ,cAAJ,EAAX;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4B,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAA5B,EAAkD,CAAlD,CAAnC;AAEA,WAAKu6F,UAAL,GAAkB,IAAInlI,IAAJ,CAAU6zB,QAAV,EAAoB95C,QAApB,CAAlB;AACA,WAAKvS,GAAL,CAAU,KAAK29J,UAAf;AAEA,WAAKt/J,MAAL;AAEA;;AAEDo/J,0BAAsB,CAACxjK,SAAvB,GAAmC3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAnC;AACAwjK,0BAAsB,CAACxjK,SAAvB,CAAiC0M,WAAjC,GAA+C82J,sBAA/C;;AAEAA,0BAAsB,CAACxjK,SAAvB,CAAiCyG,OAAjC,GAA2C,YAAY;AAEtD,WAAKg9J,UAAL,CAAgBrxG,QAAhB,CAAyB3rD,OAAzB;AACA,WAAKg9J,UAAL,CAAgBnrJ,QAAhB,CAAyB7R,OAAzB;AACA,WAAKi9J,UAAL,CAAgBtxG,QAAhB,CAAyB3rD,OAAzB;AACA,WAAKi9J,UAAL,CAAgBprJ,QAAhB,CAAyB7R,OAAzB;AAEA,KAPD;;AASA+8J,0BAAsB,CAACxjK,SAAvB,CAAiCoE,MAAjC,GAA0C,YAAY;AAErDi/J,WAAK,CAACl8G,qBAAN,CAA6B,KAAKihD,KAAL,CAAWpiD,WAAxC;;AACAs9G,WAAK,CAACn8G,qBAAN,CAA6B,KAAKihD,KAAL,CAAWz1G,MAAX,CAAkBqzD,WAA/C;;AACAu9G,WAAK,CAACh5J,UAAN,CAAkB+4J,KAAlB,EAAyBD,KAAzB;;AAEA,WAAKI,UAAL,CAAgBx9J,MAAhB,CAAwBq9J,KAAxB;;AAEA,UAAK,KAAK7qJ,KAAL,KAAevhB,SAApB,EAAgC;AAE/B,aAAKusK,UAAL,CAAgBnrJ,QAAhB,CAAyBG,KAAzB,CAA+BtS,GAA/B,CAAoC,KAAKsS,KAAzC;AACA,aAAKirJ,UAAL,CAAgBprJ,QAAhB,CAAyBG,KAAzB,CAA+BtS,GAA/B,CAAoC,KAAKsS,KAAzC;AAEA,OALD,MAKO;AAEN,aAAKgrJ,UAAL,CAAgBnrJ,QAAhB,CAAyBG,KAAzB,CAA+BzU,IAA/B,CAAqC,KAAKokG,KAAL,CAAW3vF,KAAhD;AACA,aAAKirJ,UAAL,CAAgBprJ,QAAhB,CAAyBG,KAAzB,CAA+BzU,IAA/B,CAAqC,KAAKokG,KAAL,CAAW3vF,KAAhD;AAEA;;AAED,WAAKirJ,UAAL,CAAgBz9J,MAAhB,CAAwBq9J,KAAxB;AACA,WAAKI,UAAL,CAAgB99J,KAAhB,CAAsBmQ,CAAtB,GAA0BwtJ,KAAK,CAACp7K,MAAN,EAA1B;AAEA,KAvBD;;AAyBA,QAAMw7K,SAAS,GAAG,IAAI/+G,OAAJ,EAAlB;;AACA,QAAMg/G,OAAO,GAAG,IAAI9qF,MAAJ,EAAhB;AAEA;;;;;;;;AAOA,aAAS+qF,YAAT,CAAuBntJ,MAAvB,EAAgC;AAE/B,UAAM07C,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACA,UAAMrzD,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAE,QAAT;AAAmByoD,oBAAY,EAAE,IAAjC;AAAuCqC,kBAAU,EAAE;AAAnD,OAAvB,CAAjB;AAEA,UAAM3qD,QAAQ,GAAG,EAAjB;AACA,UAAMd,MAAM,GAAG,EAAf;AAEA,UAAMgsJ,QAAQ,GAAG,EAAjB,CAR+B,CAU/B;;AAEA,UAAMC,YAAY,GAAG,IAAItlG,KAAJ,CAAW,QAAX,CAArB;AACA,UAAMulG,SAAS,GAAG,IAAIvlG,KAAJ,CAAW,QAAX,CAAlB;AACA,UAAMwlG,OAAO,GAAG,IAAIxlG,KAAJ,CAAW,QAAX,CAAhB;AACA,UAAMylG,WAAW,GAAG,IAAIzlG,KAAJ,CAAW,QAAX,CAApB;AACA,UAAM0lG,UAAU,GAAG,IAAI1lG,KAAJ,CAAW,QAAX,CAAnB,CAhB+B,CAkB/B;;AAEA2lG,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CAvB+B,CAyB/B;;AAEAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CA9B+B,CAgC/B;;AAEAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CArC+B,CAuC/B;;AAEAK,aAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,aAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,aAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,aAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP,CA5C+B,CA8C/B;;AAEAI,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP;AACAG,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP;AACAG,aAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP,CAlD+B,CAoD/B;;AAEAG,aAAO,CAAE,GAAF,EAAO,GAAP,EAAYF,WAAZ,CAAP;AACAE,aAAO,CAAE,GAAF,EAAO,GAAP,EAAYD,UAAZ,CAAP,CAvD+B,CAyD/B;;AAEAC,aAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AACAC,aAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AAEAC,aAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AACAC,aAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;;AAEA,eAASC,OAAT,CAAkB/7K,CAAlB,EAAqBC,CAArB,EAAwBmwB,KAAxB,EAAgC;AAE/B4rJ,gBAAQ,CAAEh8K,CAAF,EAAKowB,KAAL,CAAR;AACA4rJ,gBAAQ,CAAE/7K,CAAF,EAAKmwB,KAAL,CAAR;AAEA;;AAED,eAAS4rJ,QAAT,CAAmB39K,EAAnB,EAAuB+xB,KAAvB,EAA+B;AAE9BG,gBAAQ,CAACpvB,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAsuB,cAAM,CAACtuB,IAAP,CAAaivB,KAAK,CAACc,CAAnB,EAAsBd,KAAK,CAACiF,CAA5B,EAA+BjF,KAAK,CAACnwB,CAArC;;AAEA,YAAKw7K,QAAQ,CAAEp9K,EAAF,CAAR,KAAmBwQ,SAAxB,EAAoC;AAEnC4sK,kBAAQ,CAAEp9K,EAAF,CAAR,GAAiB,EAAjB;AAEA;;AAEDo9K,gBAAQ,CAAEp9K,EAAF,CAAR,CAAe8C,IAAf,CAAuBovB,QAAQ,CAACzwB,MAAT,GAAkB,CAApB,GAA0B,CAA/C;AAEA;;AAEDiqE,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAAnC;AACAw5C,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI9C,sBAAJ,CAA4BrxD,MAA5B,EAAoC,CAApC,CAAhC;AAEAo6G,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC95C,QAAnC;AAEA,WAAK9qB,IAAL,GAAY,cAAZ;AAEA,WAAKkpB,MAAL,GAAcA,MAAd;AACA,UAAK,KAAKA,MAAL,CAAYxS,sBAAjB,EAA0C,KAAKwS,MAAL,CAAYxS,sBAAZ;AAE1C,WAAKqF,MAAL,GAAcmN,MAAM,CAACsvC,WAArB;AACA,WAAK7I,gBAAL,GAAwB,KAAxB;AAEA,WAAK2mH,QAAL,GAAgBA,QAAhB;AAEA,WAAK1/J,MAAL;AAEA;;AAEDy/J,gBAAY,CAAC7jK,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAAzB;AACA6jK,gBAAY,CAAC7jK,SAAb,CAAuB0M,WAAvB,GAAqCm3J,YAArC;;AAEAA,gBAAY,CAAC7jK,SAAb,CAAuBoE,MAAvB,GAAgC,YAAY;AAE3C,UAAMguD,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM0xG,QAAQ,GAAG,KAAKA,QAAtB;AAEA,UAAMnmJ,CAAC,GAAG,CAAV;AAAA,UAAalP,CAAC,GAAG,CAAjB,CAL2C,CAO3C;AACA;;AAEAm1J,aAAO,CAAC79G,uBAAR,CAAgC/hD,IAAhC,CAAsC,KAAK0S,MAAL,CAAYqvC,uBAAlD,EAV2C,CAY3C;;;AAEAu+G,cAAQ,CAAE,GAAF,EAAOR,QAAP,EAAiB1xG,QAAjB,EAA2BwxG,OAA3B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAAE,CAA5C,CAAR;AACAU,cAAQ,CAAE,GAAF,EAAOR,QAAP,EAAiB1xG,QAAjB,EAA2BwxG,OAA3B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,CAAR,CAf2C,CAiB3C;;AAEAU,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAAEjmJ,CAAvC,EAA0C,CAAElP,CAA5C,EAA+C,CAAE,CAAjD,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqCjmJ,CAArC,EAAwC,CAAElP,CAA1C,EAA6C,CAAE,CAA/C,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAAEjmJ,CAAvC,EAA0ClP,CAA1C,EAA6C,CAAE,CAA/C,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqCjmJ,CAArC,EAAwClP,CAAxC,EAA2C,CAAE,CAA7C,CAAR,CAtB2C,CAwB3C;;AAEA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAAEjmJ,CAAvC,EAA0C,CAAElP,CAA5C,EAA+C,CAA/C,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqCjmJ,CAArC,EAAwC,CAAElP,CAA1C,EAA6C,CAA7C,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAAEjmJ,CAAvC,EAA0ClP,CAA1C,EAA6C,CAA7C,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqCjmJ,CAArC,EAAwClP,CAAxC,EAA2C,CAA3C,CAAR,CA7B2C,CA+B3C;;AAEA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqCjmJ,CAAC,GAAG,GAAzC,EAA8ClP,CAAC,GAAG,GAAlD,EAAuD,CAAE,CAAzD,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAAEjmJ,CAAF,GAAM,GAA3C,EAAgDlP,CAAC,GAAG,GAApD,EAAyD,CAAE,CAA3D,CAAR;AACA61J,cAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkB1xG,QAAlB,EAA4BwxG,OAA5B,EAAqC,CAArC,EAAwCn1J,CAAC,GAAG,CAA5C,EAA+C,CAAE,CAAjD,CAAR,CAnC2C,CAqC3C;;AAEA61J,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAEjmJ,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,CAAR;AACA2mJ,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsCjmJ,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,CAAR;AACA2mJ,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAtC,EAAyC,CAAEn1J,CAA3C,EAA8C,CAA9C,CAAR;AACA61J,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAtC,EAAyCn1J,CAAzC,EAA4C,CAA5C,CAAR;AAEA61J,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAEjmJ,CAAxC,EAA2C,CAA3C,EAA8C,CAAE,CAAhD,CAAR;AACA2mJ,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsCjmJ,CAAtC,EAAyC,CAAzC,EAA4C,CAAE,CAA9C,CAAR;AACA2mJ,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAtC,EAAyC,CAAEn1J,CAA3C,EAA8C,CAAE,CAAhD,CAAR;AACA61J,cAAQ,CAAE,KAAF,EAASR,QAAT,EAAmB1xG,QAAnB,EAA6BwxG,OAA7B,EAAsC,CAAtC,EAAyCn1J,CAAzC,EAA4C,CAAE,CAA9C,CAAR;AAEA2jD,cAAQ,CAAC11B,YAAT,CAAuB,UAAvB,EAAoC5xB,WAApC,GAAkD,IAAlD;AAEA,KAnDD;;AAqDA,aAASw5J,QAAT,CAAmBpoI,KAAnB,EAA0B4nI,QAA1B,EAAoC1xG,QAApC,EAA8C17C,MAA9C,EAAsDjjB,CAAtD,EAAyD+W,CAAzD,EAA4DuL,CAA5D,EAAgE;AAE/D4tJ,eAAS,CAACx9J,GAAV,CAAe1S,CAAf,EAAkB+W,CAAlB,EAAqBuL,CAArB,EAAyB+vC,SAAzB,CAAoCpvC,MAApC;;AAEA,UAAMG,MAAM,GAAGitJ,QAAQ,CAAE5nI,KAAF,CAAvB;;AAEA,UAAKrlB,MAAM,KAAK3f,SAAhB,EAA4B;AAE3B,YAAMoM,QAAQ,GAAG8uD,QAAQ,CAAC11B,YAAT,CAAuB,UAAvB,CAAjB;;AAEA,aAAM,IAAI5zC,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGsjB,MAAM,CAAC1uB,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjDwa,kBAAQ,CAACglE,MAAT,CAAiBzxD,MAAM,CAAE/tB,KAAF,CAAvB,EAA8B66K,SAAS,CAAClwK,CAAxC,EAA2CkwK,SAAS,CAACn5J,CAArD,EAAwDm5J,SAAS,CAAC5tJ,CAAlE;AAEA;AAED;AAED;;AAED,QAAMwuJ,MAAM,GAAG,IAAI/wG,IAAJ,EAAf;;AAEA,aAASgxG,SAAT,CAAoBhtK,MAApB,EAA4BihB,KAA5B,EAAoC;AAEnC,WAAKjhB,MAAL,GAAcA,MAAd;AAEA,UAAKihB,KAAK,KAAKvhB,SAAf,EAA2BuhB,KAAK,GAAG,QAAR;AAE3B,UAAMq2D,OAAO,GAAG,IAAI5yD,WAAJ,CAAiB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,CAAjB,CAAhB;AACA,UAAMswD,SAAS,GAAG,IAAIpD,YAAJ,CAAkB,IAAI,CAAtB,CAAlB;AAEA,UAAMhX,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACAvZ,cAAQ,CAACruC,QAAT,CAAmB,IAAIsjD,eAAJ,CAAqByH,OAArB,EAA8B,CAA9B,CAAnB;AACA1c,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI5E,eAAJ,CAAqBmF,SAArB,EAAgC,CAAhC,CAAnC;AAEA0lD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC,IAAI4yC,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEA,KAAT;AAAgB8qD,kBAAU,EAAE;AAA5B,OAAvB,CAAnC;AAEA,WAAK/1E,IAAL,GAAY,WAAZ;AAEA,WAAK2vD,gBAAL,GAAwB,KAAxB;AAEA,WAAK/4C,MAAL;AAEA;;AAEDogK,aAAS,CAACxkK,SAAV,GAAsB3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAAtB;AACAwkK,aAAS,CAACxkK,SAAV,CAAoB0M,WAApB,GAAkC83J,SAAlC;;AAEAA,aAAS,CAACxkK,SAAV,CAAoBoE,MAApB,GAA6B,UAAW5M,MAAX,EAAoB;AAEhD,UAAKA,MAAM,KAAKN,SAAhB,EAA4B;AAE3BjN,eAAO,CAAC2W,IAAR,CAAc,qDAAd;AAEA;;AAED,UAAK,KAAKpJ,MAAL,KAAgBN,SAArB,EAAiC;AAEhCqtK,cAAM,CAACxvG,aAAP,CAAsB,KAAKv9D,MAA3B;AAEA;;AAED,UAAK+sK,MAAM,CAACrvG,OAAP,EAAL,EAAwB;AAExB,UAAM3vD,GAAG,GAAGg/J,MAAM,CAACh/J,GAAnB;AACA,UAAMC,GAAG,GAAG++J,MAAM,CAAC/+J,GAAnB;AAEA;;;;;;;;;;;;;;;;AAgBA,UAAMlC,QAAQ,GAAG,KAAK8uD,QAAL,CAAcxvB,UAAd,CAAyBt/B,QAA1C;AACA,UAAMoiB,KAAK,GAAGpiB,QAAQ,CAACoiB,KAAvB;AAEAA,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAAC/R,CAAjB;AAAoBiyB,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAACgF,CAAjB;AAAoBkb,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAACuQ,CAAjB;AACxC2P,WAAK,CAAE,CAAF,CAAL,GAAangB,GAAG,CAAC9R,CAAjB;AAAoBiyB,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAACgF,CAAjB;AAAoBkb,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAACuQ,CAAjB;AACxC2P,WAAK,CAAE,CAAF,CAAL,GAAangB,GAAG,CAAC9R,CAAjB;AAAoBiyB,WAAK,CAAE,CAAF,CAAL,GAAangB,GAAG,CAACiF,CAAjB;AAAoBkb,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAACuQ,CAAjB;AACxC2P,WAAK,CAAE,CAAF,CAAL,GAAalgB,GAAG,CAAC/R,CAAjB;AAAoBiyB,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACiF,CAAlB;AAAqBkb,WAAK,CAAE,EAAF,CAAL,GAAclgB,GAAG,CAACuQ,CAAlB;AACzC2P,WAAK,CAAE,EAAF,CAAL,GAAclgB,GAAG,CAAC/R,CAAlB;AAAqBiyB,WAAK,CAAE,EAAF,CAAL,GAAclgB,GAAG,CAACgF,CAAlB;AAAqBkb,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACwQ,CAAlB;AAC1C2P,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAAC9R,CAAlB;AAAqBiyB,WAAK,CAAE,EAAF,CAAL,GAAclgB,GAAG,CAACgF,CAAlB;AAAqBkb,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACwQ,CAAlB;AAC1C2P,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAAC9R,CAAlB;AAAqBiyB,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACiF,CAAlB;AAAqBkb,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACwQ,CAAlB;AAC1C2P,WAAK,CAAE,EAAF,CAAL,GAAclgB,GAAG,CAAC/R,CAAlB;AAAqBiyB,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACiF,CAAlB;AAAqBkb,WAAK,CAAE,EAAF,CAAL,GAAcngB,GAAG,CAACwQ,CAAlB;AAE1CzS,cAAQ,CAACwH,WAAT,GAAuB,IAAvB;AAEA,WAAKsnD,QAAL,CAAcma,qBAAd;AAGA,KApDD;;AAsDAi4F,aAAS,CAACxkK,SAAV,CAAoB+0D,aAApB,GAAoC,UAAWv9D,MAAX,EAAoB;AAEvD,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAK4M,MAAL;AAEA,aAAO,IAAP;AAEA,KAPD;;AASAogK,aAAS,CAACxkK,SAAV,CAAoBgE,IAApB,GAA2B,UAAWyhC,MAAX,EAAoB;AAE9CysF,kBAAY,CAAClyH,SAAb,CAAuBgE,IAAvB,CAA4B7G,IAA5B,CAAkC,IAAlC,EAAwCsoC,MAAxC;AAEA,WAAKjuC,MAAL,GAAciuC,MAAM,CAACjuC,MAArB;AAEA,aAAO,IAAP;AAEA,KARD;;AAUA,aAASitK,UAAT,CAAqBxvG,GAArB,EAA0Bx8C,KAA1B,EAAkC;AAEjC,WAAKjrB,IAAL,GAAY,YAAZ;AAEA,WAAKynE,GAAL,GAAWA,GAAX;AAEA,UAAKx8C,KAAK,KAAKvhB,SAAf,EAA2BuhB,KAAK,GAAG,QAAR;AAE3B,UAAMq2D,OAAO,GAAG,IAAI5yD,WAAJ,CAAiB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,CAAjB,CAAhB;AAEA,UAAMswD,SAAS,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAE,CAAxB,EAA2B,CAAE,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAE,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAAE,CAAtD,EAAyD,CAAE,CAA3D,EAA8D,CAA9D,EAAiE,CAAE,CAAnE,EAAsE,CAAE,CAAxE,EAA2E,CAAE,CAA7E,EAAgF,CAAE,CAAlF,EAAqF,CAArF,EAAwF,CAAE,CAA1F,EAA6F,CAAE,CAA/F,CAAlB;AAEA,UAAMpa,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AAEAvZ,cAAQ,CAACruC,QAAT,CAAmB,IAAIsjD,eAAJ,CAAqByH,OAArB,EAA8B,CAA9B,CAAnB;AAEA1c,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BqD,SAA5B,EAAuC,CAAvC,CAAnC;AAEA0lD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC,IAAI4yC,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEA,KAAT;AAAgB8qD,kBAAU,EAAE;AAA5B,OAAvB,CAAnC;AAEA,WAAK/1E,IAAL,GAAY,YAAZ;AAEA,WAAK4kE,QAAL,CAAcma,qBAAd;AAEA;;AAEDk4F,cAAU,CAACzkK,SAAX,GAAuB3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAAvB;AACAykK,cAAU,CAACzkK,SAAX,CAAqB0M,WAArB,GAAmC+3J,UAAnC;;AAEAA,cAAU,CAACzkK,SAAX,CAAqB8wD,iBAArB,GAAyC,UAAWQ,KAAX,EAAmB;AAE3D,UAAM2D,GAAG,GAAG,KAAKA,GAAjB;AAEA,UAAKA,GAAG,CAACC,OAAJ,EAAL,EAAqB;AAErBD,SAAG,CAAChwB,SAAJ,CAAe,KAAK3hC,QAApB;AAEA2xD,SAAG,CAACE,OAAJ,CAAa,KAAKvvD,KAAlB;AAEA,WAAKA,KAAL,CAAWM,cAAX,CAA2B,GAA3B;AAEAgoD,cAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,KAdD;;AAgBA,aAASozG,WAAT,CAAsBzuG,KAAtB,EAA6Br3D,IAA7B,EAAmCqgE,GAAnC,EAAyC;AAExC,WAAKhJ,KAAL,GAAaA,KAAb;AAEA,WAAKr3D,IAAL,GAAcA,IAAI,KAAK1H,SAAX,GAAyB,CAAzB,GAA6B0H,IAAzC;AAEA,UAAM6Z,KAAK,GAAKwmD,GAAG,KAAK/nE,SAAV,GAAwB+nE,GAAxB,GAA8B,QAA5C;AAEA,UAAMuN,SAAS,GAAG,CAAE,CAAF,EAAK,CAAE,CAAP,EAAU,CAAV,EAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAE,CAA1B,EAA6B,CAAE,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAAE,CAAhD,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,CAAE,CAA3D,EAA8D,CAAE,CAAhE,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,CAAE,CAA3E,EAA8E,CAA9E,EAAiF,CAAjF,EAAoF,CAApF,EAAuF,CAAvF,EAA0F,CAA1F,EAA6F,CAA7F,EAAgG,CAAhG,EAAmG,CAAnG,EAAsG,CAAtG,EAAyG,CAAzG,CAAlB;AAEA,UAAMpa,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BqD,SAA5B,EAAuC,CAAvC,CAAnC;AACApa,cAAQ,CAACma,qBAAT;AAEAhuC,UAAI,CAACphC,IAAL,CAAW,IAAX,EAAiBi1D,QAAjB,EAA2B,IAAI4yC,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEA,KAAT;AAAgB8qD,kBAAU,EAAE;AAA5B,OAAvB,CAA3B;AAEA,WAAK/1E,IAAL,GAAY,aAAZ,CAhBwC,CAkBxC;;AAEA,UAAMm3K,UAAU,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAE,CAAxB,EAA2B,CAAE,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAAE,CAA9C,EAAiD,CAAE,CAAnD,EAAsD,CAAtD,EAAyD,CAAzD,EAA4D,CAAE,CAA9D,EAAiE,CAAjE,CAAnB;AAEA,UAAM31F,SAAS,GAAG,IAAIrD,cAAJ,EAAlB;AACAqD,eAAS,CAAC/C,YAAV,CAAwB,UAAxB,EAAoC,IAAI9C,sBAAJ,CAA4Bw7F,UAA5B,EAAwC,CAAxC,CAApC;AACA31F,eAAS,CAACzC,qBAAV;AAEA,WAAKxmE,GAAL,CAAU,IAAIwqE,IAAJ,CAAUvB,SAAV,EAAqB,IAAIhI,iBAAJ,CAAuB;AAAEvuD,aAAK,EAAEA,KAAT;AAAgB+oD,eAAO,EAAE,GAAzB;AAA8BC,mBAAW,EAAE,IAA3C;AAAiDS,kBAAU,EAAE,KAA7D;AAAoEqB,kBAAU,EAAE;AAAhF,OAAvB,CAArB,CAAV;AAEA;;AAEDmhG,eAAW,CAAC1kK,SAAZ,GAAwB3V,MAAM,CAACiU,MAAP,CAAeigC,IAAI,CAACv+B,SAApB,CAAxB;AACA0kK,eAAW,CAAC1kK,SAAZ,CAAsB0M,WAAtB,GAAoCg4J,WAApC;;AAEAA,eAAW,CAAC1kK,SAAZ,CAAsB8wD,iBAAtB,GAA0C,UAAWQ,KAAX,EAAmB;AAE5D,UAAI1rD,KAAK,GAAG,CAAE,KAAKqwD,KAAL,CAAWC,QAAzB;AAEA,UAAK70D,IAAI,CAAC4nB,GAAL,CAAUrjB,KAAV,IAAoB,IAAzB,EAAgCA,KAAK,GAAG,IAAR,CAJ4B,CAId;;AAE9C,WAAKA,KAAL,CAAWO,GAAX,CAAgB,MAAM,KAAKvH,IAA3B,EAAiC,MAAM,KAAKA,IAA5C,EAAkDgH,KAAlD;AAEA,WAAKgM,QAAL,CAAe,CAAf,EAAmB0G,QAAnB,CAA4BgpD,IAA5B,GAAqC17D,KAAK,GAAG,CAAV,GAAgB2gC,QAAhB,GAA2BD,SAA9D,CAR4D,CAQa;;AAEzE,WAAKrgC,MAAL,CAAa,KAAKgwD,KAAL,CAAWpP,MAAxB;AAEAqH,cAAQ,CAACluD,SAAT,CAAmB8wD,iBAAnB,CAAqC3zD,IAArC,CAA2C,IAA3C,EAAiDm0D,KAAjD;AAEA,KAdD;;AAgBA,QAAMszG,KAAK,GAAG,IAAIhgH,OAAJ,EAAd;;AACA,QAAIigH,aAAJ,EAAmBC,aAAnB;;AAEA,aAASC,WAAT,CAAsB9lK,GAAtB,EAA2B84D,MAA3B,EAAmC5vE,MAAnC,EAA2CswB,KAA3C,EAAkDusJ,UAAlD,EAA8DC,SAA9D,EAA0E;AAEzE;AAEA/2G,cAAQ,CAAC/wD,IAAT,CAAe,IAAf;AAEA,WAAK3P,IAAL,GAAY,aAAZ;AAEA,UAAKyR,GAAG,KAAK/H,SAAb,EAAyB+H,GAAG,GAAG,IAAI2lD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAN;AACzB,UAAKmT,MAAM,KAAK7gE,SAAhB,EAA4B6gE,MAAM,GAAG,IAAInT,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAT;AAC5B,UAAKz8D,MAAM,KAAK+O,SAAhB,EAA4B/O,MAAM,GAAG,CAAT;AAC5B,UAAKswB,KAAK,KAAKvhB,SAAf,EAA2BuhB,KAAK,GAAG,QAAR;AAC3B,UAAKusJ,UAAU,KAAK9tK,SAApB,EAAgC8tK,UAAU,GAAG,MAAM78K,MAAnB;AAChC,UAAK88K,SAAS,KAAK/tK,SAAnB,EAA+B+tK,SAAS,GAAG,MAAMD,UAAlB;;AAE/B,UAAKH,aAAa,KAAK3tK,SAAvB,EAAmC;AAElC2tK,qBAAa,GAAG,IAAIl5F,cAAJ,EAAhB;;AACAk5F,qBAAa,CAAC54F,YAAd,CAA4B,UAA5B,EAAwC,IAAI9C,sBAAJ,CAA4B,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAA5B,EAAkD,CAAlD,CAAxC;;AAEA27F,qBAAa,GAAG,IAAIn/B,sBAAJ,CAA4B,CAA5B,EAA+B,GAA/B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,CAAhB;;AACAm/B,qBAAa,CAACrpH,SAAd,CAAyB,CAAzB,EAA4B,CAAE,GAA9B,EAAmC,CAAnC;AAEA;;AAED,WAAKn4C,QAAL,CAAcU,IAAd,CAAoB+zD,MAApB;AAEA,WAAKnhD,IAAL,GAAY,IAAI2nB,IAAJ,CAAUsmI,aAAV,EAAyB,IAAI7/D,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEA,KAAT;AAAgB8qD,kBAAU,EAAE;AAA5B,OAAvB,CAAzB,CAAZ;AACA,WAAK3sD,IAAL,CAAUumC,gBAAV,GAA6B,KAA7B;AACA,WAAKp3C,GAAL,CAAU,KAAK6Q,IAAf;AAEA,WAAKqrJ,IAAL,GAAY,IAAI1xF,IAAJ,CAAUu0F,aAAV,EAAyB,IAAI99F,iBAAJ,CAAuB;AAAEvuD,aAAK,EAAEA,KAAT;AAAgB8qD,kBAAU,EAAE;AAA5B,OAAvB,CAAzB,CAAZ;AACA,WAAK0+F,IAAL,CAAU9kH,gBAAV,GAA6B,KAA7B;AACA,WAAKp3C,GAAL,CAAU,KAAKk8J,IAAf;AAEA,WAAKiD,YAAL,CAAmBjmK,GAAnB;AACA,WAAK43C,SAAL,CAAgB1uD,MAAhB,EAAwB68K,UAAxB,EAAoCC,SAApC;AAEA;;AAEDF,eAAW,CAAC/kK,SAAZ,GAAwB3V,MAAM,CAACiU,MAAP,CAAe4vD,QAAQ,CAACluD,SAAxB,CAAxB;AACA+kK,eAAW,CAAC/kK,SAAZ,CAAsB0M,WAAtB,GAAoCq4J,WAApC;;AAEAA,eAAW,CAAC/kK,SAAZ,CAAsBklK,YAAtB,GAAqC,UAAWjmK,GAAX,EAAiB;AAErD;AAEA,UAAKA,GAAG,CAACuL,CAAJ,GAAQ,OAAb,EAAuB;AAEtB,aAAKhE,UAAL,CAAgBL,GAAhB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B;AAEA,OAJD,MAIO,IAAKlH,GAAG,CAACuL,CAAJ,GAAQ,CAAE,OAAf,EAAyB;AAE/B,aAAKhE,UAAL,CAAgBL,GAAhB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B;AAEA,OAJM,MAIA;AAENy+J,aAAK,CAACz+J,GAAN,CAAWlH,GAAG,CAAC8W,CAAf,EAAkB,CAAlB,EAAqB,CAAE9W,GAAG,CAACxL,CAA3B,EAA+BgjD,SAA/B;;AAEA,YAAM3C,OAAO,GAAGzyC,IAAI,CAACq9C,IAAL,CAAWz/C,GAAG,CAACuL,CAAf,CAAhB;AAEA,aAAKhE,UAAL,CAAgBw8C,gBAAhB,CAAkC4hH,KAAlC,EAAyC9wH,OAAzC;AAEA;AAED,KAtBD;;AAwBAixH,eAAW,CAAC/kK,SAAZ,CAAsB62C,SAAtB,GAAkC,UAAW1uD,MAAX,EAAmB68K,UAAnB,EAA+BC,SAA/B,EAA2C;AAE5E,UAAKD,UAAU,KAAK9tK,SAApB,EAAgC8tK,UAAU,GAAG,MAAM78K,MAAnB;AAChC,UAAK88K,SAAS,KAAK/tK,SAAnB,EAA+B+tK,SAAS,GAAG,MAAMD,UAAlB;AAE/B,WAAKpuJ,IAAL,CAAUhR,KAAV,CAAgBO,GAAhB,CAAqB,CAArB,EAAwB9E,IAAI,CAACmE,GAAL,CAAU,MAAV,EAAkBrd,MAAM,GAAG68K,UAA3B,CAAxB,EAAiE,CAAjE,EAL4E,CAKN;;AACtE,WAAKpuJ,IAAL,CAAU8mC,YAAV;AAEA,WAAKukH,IAAL,CAAUr8J,KAAV,CAAgBO,GAAhB,CAAqB8+J,SAArB,EAAgCD,UAAhC,EAA4CC,SAA5C;AACA,WAAKhD,IAAL,CAAU3+J,QAAV,CAAmBkH,CAAnB,GAAuBriB,MAAvB;AACA,WAAK85K,IAAL,CAAUvkH,YAAV;AAEA,KAZD;;AAcAqnH,eAAW,CAAC/kK,SAAZ,CAAsBmlK,QAAtB,GAAiC,UAAW1sJ,KAAX,EAAmB;AAEnD,WAAK7B,IAAL,CAAU0B,QAAV,CAAmBG,KAAnB,CAAyBtS,GAAzB,CAA8BsS,KAA9B;AACA,WAAKwpJ,IAAL,CAAU3pJ,QAAV,CAAmBG,KAAnB,CAAyBtS,GAAzB,CAA8BsS,KAA9B;AAEA,KALD;;AAOAssJ,eAAW,CAAC/kK,SAAZ,CAAsBgE,IAAtB,GAA6B,UAAWyhC,MAAX,EAAoB;AAEhDyoB,cAAQ,CAACluD,SAAT,CAAmBgE,IAAnB,CAAwB7G,IAAxB,CAA8B,IAA9B,EAAoCsoC,MAApC,EAA4C,KAA5C;AAEA,WAAK7uB,IAAL,CAAU5S,IAAV,CAAgByhC,MAAM,CAAC7uB,IAAvB;AACA,WAAKqrJ,IAAL,CAAUj+J,IAAV,CAAgByhC,MAAM,CAACw8H,IAAvB;AAEA,aAAO,IAAP;AAEA,KATD;;AAWA,aAASmD,UAAT,CAAqBxmK,IAArB,EAA4B;AAE3BA,UAAI,GAAGA,IAAI,IAAI,CAAf;AAEA,UAAMga,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACPha,IADO,EACD,CADC,EACE,CADF,EAEhB,CAFgB,EAEb,CAFa,EAEV,CAFU,EAEP,CAFO,EAEJA,IAFI,EAEE,CAFF,EAGhB,CAHgB,EAGb,CAHa,EAGV,CAHU,EAGP,CAHO,EAGJ,CAHI,EAGDA,IAHC,CAAjB;AAMA,UAAMkZ,MAAM,GAAG,CACd,CADc,EACX,CADW,EACR,CADQ,EACL,CADK,EACF,GADE,EACG,CADH,EAEd,CAFc,EAEX,CAFW,EAER,CAFQ,EAEL,GAFK,EAEA,CAFA,EAEG,CAFH,EAGd,CAHc,EAGX,CAHW,EAGR,CAHQ,EAGL,CAHK,EAGF,GAHE,EAGG,CAHH,CAAf;AAMA,UAAMs6C,QAAQ,GAAG,IAAIuZ,cAAJ,EAAjB;AACAvZ,cAAQ,CAAC6Z,YAAT,CAAuB,UAAvB,EAAmC,IAAI9C,sBAAJ,CAA4BvwD,QAA5B,EAAsC,CAAtC,CAAnC;AACAw5C,cAAQ,CAAC6Z,YAAT,CAAuB,OAAvB,EAAgC,IAAI9C,sBAAJ,CAA4BrxD,MAA5B,EAAoC,CAApC,CAAhC;AAEA,UAAMQ,QAAQ,GAAG,IAAI0sF,iBAAJ,CAAuB;AAAE9jC,oBAAY,EAAE,IAAhB;AAAsBqC,kBAAU,EAAE;AAAlC,OAAvB,CAAjB;AAEA2uD,kBAAY,CAAC/0H,IAAb,CAAmB,IAAnB,EAAyBi1D,QAAzB,EAAmC95C,QAAnC;AAEA,WAAK9qB,IAAL,GAAY,YAAZ;AAEA;;AAED43K,cAAU,CAACplK,SAAX,GAAuB3V,MAAM,CAACiU,MAAP,CAAe4zH,YAAY,CAAClyH,SAA5B,CAAvB;AACAolK,cAAU,CAACplK,SAAX,CAAqB0M,WAArB,GAAmC04J,UAAnC;AAEA,QAAMC,OAAO,GAAG,CAAhB;AACA,QAAMC,OAAO,GAAG,CAAhB;AACA,QAAMC,QAAQ,GAAGlkK,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAak9J,OAAb,CAAjB,C,CAEA;AACA;AACA;AACA;;AACA,QAAME,eAAe,GAAG,CAAE,KAAF,EAAS,KAAT,EAAgB,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CAAxB;AAEA,QAAMC,UAAU,GAAGH,OAAO,GAAGD,OAAV,GAAoB,CAApB,GAAwBG,eAAe,CAACr9K,MAA3D,C,CAEA;AACA;;AACA,QAAMu9K,WAAW,GAAG,EAApB;AAEA,QAAMC,SAAS,iDACZr2H,cADY,EACM,CADN,+BAEZC,YAFY,EAEI,CAFJ,+BAGZE,YAHY,EAGI,CAHJ,+BAIZE,aAJY,EAIK,CAJL,+BAKZC,cALY,EAKM,CALN,+BAMZC,YANY,EAMI,CANJ,+BAOZL,aAPY,EAOK,CAPL,cAAf;;AAUA,QAAMo2H,WAAW,GAAG,IAAIpnB,kBAAJ,EAApB;;yBAC2CqnB,aAAa,E;QAAhDC,U,kBAAAA,U;QAAYC,S,kBAAAA,S;QAAWC,O,kBAAAA,O;;AAC/B,QAAIC,UAAU,GAAG,IAAjB,C,CAEA;;AACA,QAAMC,GAAG,GAAG,CAAE,IAAI7kK,IAAI,CAACmK,IAAL,CAAW,CAAX,CAAN,IAAyB,CAArC;AACA,QAAM26J,OAAO,GAAG,IAAID,GAApB,C,CAEA;AACA;;AACA,QAAME,eAAe,GAAG,CACvB,IAAIxhH,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADuB,EAEvB,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAFuB,EAGvB,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAHuB,EAIvB,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAAE,CAAvB,CAJuB,EAKvB,IAAIA,OAAJ,CAAa,CAAb,EAAgBshH,GAAhB,EAAqBC,OAArB,CALuB,EAMvB,IAAIvhH,OAAJ,CAAa,CAAb,EAAgBshH,GAAhB,EAAqB,CAAEC,OAAvB,CANuB,EAOvB,IAAIvhH,OAAJ,CAAauhH,OAAb,EAAsB,CAAtB,EAAyBD,GAAzB,CAPuB,EAQvB,IAAIthH,OAAJ,CAAa,CAAEuhH,OAAf,EAAwB,CAAxB,EAA2BD,GAA3B,CARuB,EASvB,IAAIthH,OAAJ,CAAashH,GAAb,EAAkBC,OAAlB,EAA2B,CAA3B,CATuB,EAUvB,IAAIvhH,OAAJ,CAAa,CAAEshH,GAAf,EAAoBC,OAApB,EAA6B,CAA7B,CAVuB,CAAxB;AAYA;;;;;;;;;;;;AAYA,aAASE,cAAT,CAAyB1vJ,QAAzB,EAAoC;AAEnC,WAAKg1F,SAAL,GAAiBh1F,QAAjB;AACA,WAAK2vJ,qBAAL,GAA6B,IAA7B;AAEA,WAAKC,aAAL,GAAqBC,cAAc,CAAEd,WAAF,CAAnC;AACA,WAAKe,eAAL,GAAuB,IAAvB;AACA,WAAKC,cAAL,GAAsB,IAAtB;;AAEA,WAAKC,gBAAL,CAAuB,KAAKJ,aAA5B;AAEA;;AAEDF,kBAAc,CAACrmK,SAAf,GAA2B;AAE1B0M,iBAAW,EAAE25J,cAFa;;AAI1B;;;;;;;AAOAO,eAAS,EAAE,mBAAWnwJ,KAAX,EAAqD;AAAA,YAAnCowJ,KAAmC,uEAA3B,CAA2B;AAAA,YAAxBh7G,IAAwB,uEAAjB,GAAiB;AAAA,YAAZC,GAAY,uEAAN,GAAM;AAE/Dm6G,kBAAU,GAAG,KAAKt6D,SAAL,CAAe/wB,eAAf,EAAb;;AACA,YAAMksF,kBAAkB,GAAG,KAAKC,gBAAL,EAA3B;;AAEA,aAAKC,cAAL,CAAqBvwJ,KAArB,EAA4Bo1C,IAA5B,EAAkCC,GAAlC,EAAuCg7G,kBAAvC;;AACA,YAAKD,KAAK,GAAG,CAAb,EAAiB;AAEhB,eAAKI,KAAL,CAAYH,kBAAZ,EAAgC,CAAhC,EAAmC,CAAnC,EAAsCD,KAAtC;AAEA;;AAED,aAAKK,WAAL,CAAkBJ,kBAAlB;;AACA,aAAKK,QAAL,CAAeL,kBAAf;;AAEA,eAAOA,kBAAP;AAEA,OA5ByB;;AA8B1B;;;;;AAKAM,yBAAmB,EAAE,6BAAWC,eAAX,EAA6B;AAEjD,eAAO,KAAKC,YAAL,CAAmBD,eAAnB,CAAP;AAEA,OAvCyB;;AAyC1B;;;;;AAKAE,iBAAW,EAAE,qBAAWC,OAAX,EAAqB;AAEjC,eAAO,KAAKF,YAAL,CAAmBE,OAAnB,CAAP;AAEA,OAlDyB;;AAoD1B;;;;AAIAC,0BAAoB,EAAE,gCAAY;AAEjC,YAAK,KAAKf,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,eAAKA,cAAL,GAAsBgB,iBAAiB,EAAvC;;AACA,eAAKf,gBAAL,CAAuB,KAAKD,cAA5B;AAEA;AAED,OAjEyB;;AAmE1B;;;;AAIAiB,kCAA4B,EAAE,wCAAY;AAEzC,YAAK,KAAKlB,eAAL,KAAyB,IAA9B,EAAqC;AAEpC,eAAKA,eAAL,GAAuBmB,kBAAkB,EAAzC;;AACA,eAAKjB,gBAAL,CAAuB,KAAKF,eAA5B;AAEA;AAED,OAhFyB;;AAkF1B;;;;;AAKAhgK,aAAO,EAAE,mBAAY;AAEpB,aAAK8/J,aAAL,CAAmB9/J,OAAnB;;AAEA,YAAK,KAAKigK,cAAL,KAAwB,IAA7B,EAAoC,KAAKA,cAAL,CAAoBjgK,OAApB;AACpC,YAAK,KAAKggK,eAAL,KAAyB,IAA9B,EAAqC,KAAKA,eAAL,CAAqBhgK,OAArB;;AAErC,aAAM,IAAI3d,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAGg9K,UAAU,CAAC39K,MAAhC,EAAwCW,KAAC,EAAzC,EAA+C;AAE9Cg9K,oBAAU,CAAEh9K,KAAF,CAAV,CAAgB2d,OAAhB;AAEA;AAED,OApGyB;AAsG1B;AAEA0gK,cAAQ,EAAE,kBAAWU,YAAX,EAA0B;AAEnC,aAAKvB,qBAAL,CAA2B7/J,OAA3B;;AACA,aAAKklG,SAAL,CAAe9wB,eAAf,CAAgCorF,UAAhC;;AACA4B,oBAAY,CAAC5nH,WAAb,GAA2B,KAA3B;;AACA6nH,oBAAY,CAAED,YAAF,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBA,YAAY,CAACzwJ,KAAnC,EAA0CywJ,YAAY,CAAC1wJ,MAAvD,CAAZ;AAEA,OA/GyB;AAiH1BmwJ,kBAAY,EAAE,sBAAWnnH,OAAX,EAAqB;AAElC8lH,kBAAU,GAAG,KAAKt6D,SAAL,CAAe/wB,eAAf,EAAb;;AACA,YAAMksF,kBAAkB,GAAG,KAAKC,gBAAL,CAAuB5mH,OAAvB,CAA3B;;AACA,aAAK4nH,gBAAL,CAAuB5nH,OAAvB,EAAgC2mH,kBAAhC;;AACA,aAAKI,WAAL,CAAkBJ,kBAAlB;;AACA,aAAKK,QAAL,CAAeL,kBAAf;;AAEA,eAAOA,kBAAP;AAEA,OA3HyB;AA6H1BC,sBAAgB,EAAE,0BAAW5mH,OAAX,EAAqB;AAAE;AAExC,YAAMoxE,MAAM,GAAG;AACd90E,mBAAS,EAAE7S,aADG;AAEd8S,mBAAS,EAAE9S,aAFG;AAGdwT,yBAAe,EAAE,KAHH;AAId5vD,cAAI,EAAE88C,gBAJQ;AAKdqS,gBAAM,EAAEpR,UALM;AAMdsR,kBAAQ,EAAEmrH,MAAM,CAAE7nH,OAAF,CAAN,GAAoBA,OAAO,CAACtD,QAA5B,GAAuCpN,YANnC;AAOd2Q,qBAAW,EAAE,KAPC;AAQdC,uBAAa,EAAE;AARD,SAAf;;AAWA,YAAMymH,kBAAkB,GAAGmB,mBAAmB,CAAE12C,MAAF,CAA9C;;AACAu1C,0BAAkB,CAAC1mH,WAAnB,GAAiCD,OAAO,GAAG,KAAH,GAAW,IAAnD;AACA,aAAKmmH,qBAAL,GAA6B2B,mBAAmB,CAAE12C,MAAF,CAAhD;AACA,eAAOu1C,kBAAP;AAEA,OA/IyB;AAiJ1BH,sBAAgB,EAAE,0BAAWruJ,QAAX,EAAsB;AAEvC,YAAM4vJ,OAAO,GAAG,IAAI33F,IAAJ,CAAUu1F,UAAU,CAAE,CAAF,CAApB,EAA2BxtJ,QAA3B,CAAhB;;AACA,aAAKqzF,SAAL,CAAege,OAAf,CAAwBu+C,OAAxB,EAAiCtC,WAAjC;AAEA,OAtJyB;AAwJ1BoB,oBAAc,EAAE,wBAAWvwJ,KAAX,EAAkBo1C,IAAlB,EAAwBC,GAAxB,EAA6Bg7G,kBAA7B,EAAkD;AAEjE,YAAMz9J,GAAG,GAAG,EAAZ;AACA,YAAM2vE,MAAM,GAAG,CAAf;AACA,YAAMmvF,UAAU,GAAG,IAAIpvF,iBAAJ,CAAuB1vE,GAAvB,EAA4B2vE,MAA5B,EAAoCntB,IAApC,EAA0CC,GAA1C,CAAnB;AACA,YAAMs8G,MAAM,GAAG,CAAE,CAAF,EAAK,CAAE,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;AACA,YAAMC,WAAW,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,CAApB;AACA,YAAM1xJ,QAAQ,GAAG,KAAKg1F,SAAtB;AAEA,YAAMhJ,cAAc,GAAGhsF,QAAQ,CAACgsF,cAAhC;AACA,YAAM/V,WAAW,GAAGj2E,QAAQ,CAACi2E,WAA7B;AACA,YAAMlB,UAAU,GAAG/0E,QAAQ,CAACm2E,aAAT,EAAnB;AACA,YAAMnB,UAAU,GAAGh1E,QAAQ,CAACq2E,aAAT,EAAnB;AAEAr2E,gBAAQ,CAACi2E,WAAT,GAAuBhkD,aAAvB;AACAjyB,gBAAQ,CAACgsF,cAAT,GAA0BrzD,cAA1B;AAEA,YAAIj4B,UAAU,GAAGZ,KAAK,CAACY,UAAvB;;AACA,YAAKA,UAAU,IAAIA,UAAU,CAACynD,OAA9B,EAAwC;AAEvCznD,oBAAU,CAAC0oD,mBAAX,GAFuC,CAGvC;;AACA,cAAMuoG,YAAY,GAAGjnK,IAAI,CAACmE,GAAL,CAAU6R,UAAU,CAACkC,CAArB,EAAwBlC,UAAU,CAACqG,CAAnC,EAAsCrG,UAAU,CAAC/uB,CAAjD,CAArB;AACA,cAAMigL,IAAI,GAAGlnK,IAAI,CAACkE,GAAL,CAAUlE,IAAI,CAACmE,GAAL,CAAUnE,IAAI,CAAC4yC,IAAL,CAAW5yC,IAAI,CAACmnK,IAAL,CAAWF,YAAX,CAAX,CAAV,EAAkD,CAAE,KAApD,CAAV,EAAuE,KAAvE,CAAb;AACAjxJ,oBAAU,GAAGA,UAAU,CAACnR,cAAX,CAA2B7E,IAAI,CAAC+G,GAAL,CAAU,GAAV,EAAe,CAAEmgK,IAAjB,CAA3B,CAAb;AACA,cAAMzxH,KAAK,GAAG,CAAEyxH,IAAI,GAAG,KAAT,IAAmB,KAAjC;AACA5xJ,kBAAQ,CAACo2E,aAAT,CAAwB11E,UAAxB,EAAoCy/B,KAApC;AACArgC,eAAK,CAACY,UAAN,GAAmB,IAAnB;AAEA;;AAED,aAAM,IAAIvuB,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG,CAArB,EAAwBA,KAAC,EAAzB,EAA+B;AAE9B,cAAMwqB,GAAG,GAAGxqB,KAAC,GAAG,CAAhB;;AACA,cAAKwqB,GAAG,IAAI,CAAZ,EAAgB;AAEf60J,sBAAU,CAACxjK,EAAX,CAAcwB,GAAd,CAAmB,CAAnB,EAAsBiiK,MAAM,CAAEt/K,KAAF,CAA5B,EAAmC,CAAnC;AACAq/K,sBAAU,CAACliK,MAAX,CAAmBoiK,WAAW,CAAEv/K,KAAF,CAA9B,EAAqC,CAArC,EAAwC,CAAxC;AAEA,WALD,MAKO,IAAKwqB,GAAG,IAAI,CAAZ,EAAgB;AAEtB60J,sBAAU,CAACxjK,EAAX,CAAcwB,GAAd,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBiiK,MAAM,CAAEt/K,KAAF,CAA/B;AACAq/K,sBAAU,CAACliK,MAAX,CAAmB,CAAnB,EAAsBoiK,WAAW,CAAEv/K,KAAF,CAAjC,EAAwC,CAAxC;AAEA,WALM,MAKA;AAENq/K,sBAAU,CAACxjK,EAAX,CAAcwB,GAAd,CAAmB,CAAnB,EAAsBiiK,MAAM,CAAEt/K,KAAF,CAA5B,EAAmC,CAAnC;AACAq/K,sBAAU,CAACliK,MAAX,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBoiK,WAAW,CAAEv/K,KAAF,CAApC;AAEA;;AAEDg/K,sBAAY,CAAEhB,kBAAF,EACXxzJ,GAAG,GAAGiyJ,QADK,EACKz8K,KAAC,GAAG,CAAJ,GAAQy8K,QAAR,GAAmB,CADxB,EAC2BA,QAD3B,EACqCA,QADrC,CAAZ;;AAEA5uJ,kBAAQ,CAACkkE,eAAT,CAA0BisF,kBAA1B;AACAnwJ,kBAAQ,CAACwC,MAAT,CAAiB1C,KAAjB,EAAwB0xJ,UAAxB;AAEA;;AAEDxxJ,gBAAQ,CAACi2E,WAAT,GAAuBA,WAAvB;AACAj2E,gBAAQ,CAACgsF,cAAT,GAA0BA,cAA1B;AACAhsF,gBAAQ,CAACo2E,aAAT,CAAwBrB,UAAxB,EAAoCC,UAApC;AAEA,OAtNyB;AAwN1Bo8E,sBAAgB,EAAE,0BAAW5nH,OAAX,EAAoB2mH,kBAApB,EAAyC;AAE1D,YAAMnwJ,QAAQ,GAAG,KAAKg1F,SAAtB;;AAEA,YAAKxrD,OAAO,CAACwsC,aAAb,EAA6B;AAE5B,cAAK,KAAK+5E,cAAL,IAAuB,IAA5B,EAAmC;AAElC,iBAAKA,cAAL,GAAsBgB,iBAAiB,EAAvC;AAEA;AAED,SARD,MAQO;AAEN,cAAK,KAAKjB,eAAL,IAAwB,IAA7B,EAAoC;AAEnC,iBAAKA,eAAL,GAAuBmB,kBAAkB,EAAzC;AAEA;AAED;;AAED,YAAMtvJ,QAAQ,GAAG6nC,OAAO,CAACwsC,aAAR,GAAwB,KAAK+5E,cAA7B,GAA8C,KAAKD,eAApE;AACA,YAAMtuJ,IAAI,GAAG,IAAIo4D,IAAJ,CAAUu1F,UAAU,CAAE,CAAF,CAApB,EAA2BxtJ,QAA3B,CAAb;AAEA,YAAMm/D,QAAQ,GAAGn/D,QAAQ,CAACm/D,QAA1B;AAEAA,gBAAQ,CAAE,QAAF,CAAR,CAAqB7kF,KAArB,GAA6ButD,OAA7B;;AAEA,YAAK,CAAEA,OAAO,CAACwsC,aAAf,EAA+B;AAE9BlV,kBAAQ,CAAE,WAAF,CAAR,CAAwB7kF,KAAxB,CAA8BuT,GAA9B,CAAmC,MAAMg6C,OAAO,CAACj3D,KAAR,CAAckuB,KAAvD,EAA8D,MAAM+oC,OAAO,CAACj3D,KAAR,CAAciuB,MAAlF;AAEA;;AAEDsgE,gBAAQ,CAAE,eAAF,CAAR,CAA4B7kF,KAA5B,GAAoC+yK,SAAS,CAAExlH,OAAO,CAACtD,QAAV,CAA7C;AACA46B,gBAAQ,CAAE,gBAAF,CAAR,CAA6B7kF,KAA7B,GAAqC+yK,SAAS,CAAEmB,kBAAkB,CAAC3mH,OAAnB,CAA2BtD,QAA7B,CAA9C;;AAEAirH,oBAAY,CAAEhB,kBAAF,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,IAAIvB,QAAhC,EAA0C,IAAIA,QAA9C,CAAZ;;AAEA5uJ,gBAAQ,CAACkkE,eAAT,CAA0BisF,kBAA1B;AACAnwJ,gBAAQ,CAACwC,MAAT,CAAiBhB,IAAjB,EAAuBytJ,WAAvB;AAEA,OAnQyB;AAqQ1BsB,iBAAW,EAAE,qBAAWJ,kBAAX,EAAgC;AAE5C,YAAMnwJ,QAAQ,GAAG,KAAKg1F,SAAtB;AACA,YAAMpf,SAAS,GAAG51E,QAAQ,CAAC41E,SAA3B;AACA51E,gBAAQ,CAAC41E,SAAT,GAAqB,KAArB;;AAEA,aAAM,IAAIzjG,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG28K,UAArB,EAAiC38K,KAAC,EAAlC,EAAwC;AAEvC,cAAM+9K,KAAK,GAAGxlK,IAAI,CAACmK,IAAL,CAAWw6J,OAAO,CAAEl9K,KAAF,CAAP,GAAek9K,OAAO,CAAEl9K,KAAF,CAAtB,GAA8Bk9K,OAAO,CAAEl9K,KAAC,GAAG,CAAN,CAAP,GAAmBk9K,OAAO,CAAEl9K,KAAC,GAAG,CAAN,CAAnE,CAAd;AAEA,cAAM2/K,QAAQ,GAAGrC,eAAe,CAAE,CAAEt9K,KAAC,GAAG,CAAN,IAAYs9K,eAAe,CAACj+K,MAA9B,CAAhC;;AAEA,eAAK8+K,KAAL,CAAYH,kBAAZ,EAAgCh+K,KAAC,GAAG,CAApC,EAAuCA,KAAvC,EAA0C+9K,KAA1C,EAAiD4B,QAAjD;AAEA;;AAED9xJ,gBAAQ,CAAC41E,SAAT,GAAqBA,SAArB;AAEA,OAvRyB;;AAyR1B;;;;;;;AAOA06E,WAAK,EAAE,eAAWH,kBAAX,EAA+B4B,KAA/B,EAAsCC,MAAtC,EAA8C9B,KAA9C,EAAqD4B,QAArD,EAAgE;AAEtE,YAAMG,oBAAoB,GAAG,KAAKtC,qBAAlC;;AAEA,aAAKuC,SAAL,CACC/B,kBADD,EAEC8B,oBAFD,EAGCF,KAHD,EAICC,MAJD,EAKC9B,KALD,EAMC,aAND,EAOC4B,QAPD;;AASA,aAAKI,SAAL,CACCD,oBADD,EAEC9B,kBAFD,EAGC6B,MAHD,EAICA,MAJD,EAKC9B,KALD,EAMC,cAND,EAOC4B,QAPD;AASA,OAtTyB;AAwT1BI,eAAS,EAAE,mBAAWC,QAAX,EAAqBC,SAArB,EAAgCL,KAAhC,EAAuCC,MAAvC,EAA+CK,YAA/C,EAA6DhxG,SAA7D,EAAwEywG,QAAxE,EAAmF;AAE7F,YAAM9xJ,QAAQ,GAAG,KAAKg1F,SAAtB;AACA,YAAMs9D,YAAY,GAAG,KAAK1C,aAA1B;;AAEA,YAAKvuG,SAAS,KAAK,aAAd,IAA+BA,SAAS,KAAK,cAAlD,EAAmE;AAElE/tE,iBAAO,CAACD,KAAR,CACC,4DADD;AAGA,SAV4F,CAY7F;;;AACA,YAAMk/K,mBAAmB,GAAG,CAA5B;AAEA,YAAMC,QAAQ,GAAG,IAAI54F,IAAJ,CAAUu1F,UAAU,CAAE6C,MAAF,CAApB,EAAgCM,YAAhC,CAAjB;AACA,YAAMG,YAAY,GAAGH,YAAY,CAACxxF,QAAlC;AAEA,YAAM4xF,MAAM,GAAGtD,SAAS,CAAE2C,KAAF,CAAT,GAAqB,CAApC;AACA,YAAMY,eAAe,GAAG7jK,QAAQ,CAAEujK,YAAF,CAAR,GAA2B3nK,IAAI,CAACC,EAAL,IAAY,IAAI+nK,MAAhB,CAA3B,GAAsD,IAAIhoK,IAAI,CAACC,EAAT,IAAgB,IAAIokK,WAAJ,GAAkB,CAAlC,CAA9E;AACA,YAAM6D,WAAW,GAAGP,YAAY,GAAGM,eAAnC;AACA,YAAM7oH,OAAO,GAAGh7C,QAAQ,CAAEujK,YAAF,CAAR,GAA2B,IAAI3nK,IAAI,CAAC4N,KAAL,CAAYi6J,mBAAmB,GAAGK,WAAlC,CAA/B,GAAiF7D,WAAjG;;AAEA,YAAKjlH,OAAO,GAAGilH,WAAf,EAA6B;AAE5Bz7K,iBAAO,CAAC2W,IAAR,yBACCooK,YADD,2DAECvoH,OAFD,iDAE+CilH,WAF/C;AAIA;;AAED,YAAM8D,OAAO,GAAG,EAAhB;AACA,YAAIhtC,GAAG,GAAG,CAAV;;AAEA,aAAM,IAAI1zI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG48K,WAArB,EAAkC,EAAG58K,KAArC,EAAyC;AAExC,cAAM2K,GAAC,GAAG3K,KAAC,GAAGygL,WAAd;;AACA,cAAM35C,MAAM,GAAGvuH,IAAI,CAACooK,GAAL,CAAU,CAAEh2K,GAAF,GAAMA,GAAN,GAAU,CAApB,CAAf;AACA+1K,iBAAO,CAAChgL,IAAR,CAAcomI,MAAd;;AAEA,cAAK9mI,KAAC,IAAI,CAAV,EAAc;AAEb0zI,eAAG,IAAI5M,MAAP;AAEA,WAJD,MAIO,IAAK9mI,KAAC,GAAG23D,OAAT,EAAmB;AAEzB+7E,eAAG,IAAI,IAAI5M,MAAX;AAEA;AAED;;AAED,aAAM,IAAI9mI,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG0gL,OAAO,CAACrhL,MAA7B,EAAqCW,KAAC,EAAtC,EAA4C;AAE3C0gL,iBAAO,CAAE1gL,KAAF,CAAP,GAAe0gL,OAAO,CAAE1gL,KAAF,CAAP,GAAe0zI,GAA9B;AAEA;;AAED4sC,oBAAY,CAAE,QAAF,CAAZ,CAAyBx2K,KAAzB,GAAiCk2K,QAAQ,CAAC3oH,OAA1C;AACAipH,oBAAY,CAAE,SAAF,CAAZ,CAA0Bx2K,KAA1B,GAAkC6tD,OAAlC;AACA2oH,oBAAY,CAAE,SAAF,CAAZ,CAA0Bx2K,KAA1B,GAAkC42K,OAAlC;AACAJ,oBAAY,CAAE,aAAF,CAAZ,CAA8Bx2K,KAA9B,GAAsColE,SAAS,KAAK,aAApD;;AAEA,YAAKywG,QAAL,EAAgB;AAEfW,sBAAY,CAAE,UAAF,CAAZ,CAA2Bx2K,KAA3B,GAAmC61K,QAAnC;AAEA;;AAEDW,oBAAY,CAAE,QAAF,CAAZ,CAAyBx2K,KAAzB,GAAiC02K,eAAjC;AACAF,oBAAY,CAAE,QAAF,CAAZ,CAAyBx2K,KAAzB,GAAiC0yK,OAAO,GAAGoD,KAA3C;AACAU,oBAAY,CAAE,eAAF,CAAZ,CAAgCx2K,KAAhC,GAAwC+yK,SAAS,CAAEmD,QAAQ,CAAC3oH,OAAT,CAAiBtD,QAAnB,CAAjD;AACAusH,oBAAY,CAAE,gBAAF,CAAZ,CAAiCx2K,KAAjC,GAAyC+yK,SAAS,CAAEmD,QAAQ,CAAC3oH,OAAT,CAAiBtD,QAAnB,CAAlD;AAEA,YAAM6sH,UAAU,GAAG3D,SAAS,CAAE4C,MAAF,CAA5B;AACA,YAAMl1K,CAAC,GAAG,IAAI4N,IAAI,CAACmE,GAAL,CAAU,CAAV,EAAa+/J,QAAQ,GAAG,IAAImE,UAA5B,CAAd;AACA,YAAMl/J,CAAC,GAAG,CAAEm+J,MAAM,KAAK,CAAX,GAAe,CAAf,GAAmB,IAAIpD,QAAzB,IAAsC,IAAImE,UAAJ,IAAmBf,MAAM,GAAGrD,OAAO,GAAGD,OAAnB,GAA6BsD,MAAM,GAAGrD,OAAT,GAAmBD,OAAhD,GAA0D,CAA7E,CAAhD;;AAEAyC,oBAAY,CAAEiB,SAAF,EAAat1K,CAAb,EAAgB+W,CAAhB,EAAmB,IAAIk/J,UAAvB,EAAmC,IAAIA,UAAvC,CAAZ;;AACA/yJ,gBAAQ,CAACkkE,eAAT,CAA0BkuF,SAA1B;AACApyJ,gBAAQ,CAACwC,MAAT,CAAiBgwJ,QAAjB,EAA2BvD,WAA3B;AAEA;AA1YyB,KAA3B;;AA8YA,aAASoC,MAAT,CAAiB7nH,OAAjB,EAA2B;AAE1B,UAAKA,OAAO,KAAKjpD,SAAZ,IAAyBipD,OAAO,CAAC3yD,IAAR,KAAiB88C,gBAA/C,EAAkE,OAAO,KAAP;AAElE,aAAO6V,OAAO,CAACtD,QAAR,KAAqBvN,cAArB,IAAuC6Q,OAAO,CAACtD,QAAR,KAAqBtN,YAA5D,IAA4E4Q,OAAO,CAACtD,QAAR,KAAqBrN,aAAxG;AAEA;;AAED,aAASq2H,aAAT,GAAyB;AAExB,UAAMC,UAAU,GAAG,EAAnB;AACA,UAAMC,SAAS,GAAG,EAAlB;AACA,UAAMC,OAAO,GAAG,EAAhB;AAEA,UAAI2D,GAAG,GAAGrE,OAAV;;AAEA,WAAM,IAAIx8K,KAAC,GAAG,CAAd,EAAiBA,KAAC,GAAG28K,UAArB,EAAiC38K,KAAC,EAAlC,EAAwC;AAEvC,YAAM8gL,OAAO,GAAGvoK,IAAI,CAAC+G,GAAL,CAAU,CAAV,EAAauhK,GAAb,CAAhB;;AACA5D,iBAAS,CAACv8K,IAAV,CAAgBogL,OAAhB;;AACA,YAAI/C,KAAK,GAAG,MAAM+C,OAAlB;;AAEA,YAAK9gL,KAAC,GAAGw8K,OAAO,GAAGD,OAAnB,EAA6B;AAE5BwB,eAAK,GAAGrB,eAAe,CAAE18K,KAAC,GAAGw8K,OAAJ,GAAcD,OAAd,GAAwB,CAA1B,CAAvB;AAEA,SAJD,MAIO,IAAKv8K,KAAC,IAAI,CAAV,EAAc;AAEpB+9K,eAAK,GAAG,CAAR;AAEA;;AAEDb,eAAO,CAACx8K,IAAR,CAAcq9K,KAAd;;AAEA,YAAMgD,SAAS,GAAG,OAAQD,OAAO,GAAG,CAAlB,CAAlB;AACA,YAAMrkK,GAAG,GAAG,CAAEskK,SAAF,GAAc,CAA1B;AACA,YAAMrkK,GAAG,GAAG,IAAIqkK,SAAS,GAAG,CAA5B;AACA,YAAMxsG,GAAG,GAAG,CAAE93D,GAAF,EAAOA,GAAP,EAAYC,GAAZ,EAAiBD,GAAjB,EAAsBC,GAAtB,EAA2BA,GAA3B,EAAgCD,GAAhC,EAAqCA,GAArC,EAA0CC,GAA1C,EAA+CA,GAA/C,EAAoDD,GAApD,EAAyDC,GAAzD,CAAZ;AAEA,YAAMskK,SAAS,GAAG,CAAlB;AACA,YAAMlxJ,UAAQ,GAAG,CAAjB;AACA,YAAMmxJ,YAAY,GAAG,CAArB;AACA,YAAMC,MAAM,GAAG,CAAf;AACA,YAAMC,aAAa,GAAG,CAAtB;AAEA,YAAM3mK,QAAQ,GAAG,IAAI8lE,YAAJ,CAAkB2gG,YAAY,GAAGnxJ,UAAf,GAA0BkxJ,SAA5C,CAAjB;AACA,YAAM3rH,EAAE,GAAG,IAAIirB,YAAJ,CAAkB4gG,MAAM,GAAGpxJ,UAAT,GAAoBkxJ,SAAtC,CAAX;AACA,YAAM54F,SAAS,GAAG,IAAI9H,YAAJ,CAAkB6gG,aAAa,GAAGrxJ,UAAhB,GAA2BkxJ,SAA7C,CAAlB;;AAEA,aAAM,IAAIz/F,IAAI,GAAG,CAAjB,EAAoBA,IAAI,GAAGy/F,SAA3B,EAAsCz/F,IAAI,EAA1C,EAAgD;AAE/C,cAAM52E,CAAC,GAAK42E,IAAI,GAAG,CAAT,GAAe,CAAf,GAAmB,CAAnB,GAAuB,CAAjC;AACA,cAAM7/D,CAAC,GAAG6/D,IAAI,GAAG,CAAP,GAAW,CAAX,GAAe,CAAE,CAA3B;AACA,cAAM6/F,WAAW,GAAG,CACnBz2K,CADmB,EAChB+W,CADgB,EACb,CADa,EAEnB/W,CAAC,GAAG,IAAI,CAFW,EAER+W,CAFQ,EAEL,CAFK,EAGnB/W,CAAC,GAAG,IAAI,CAHW,EAGR+W,CAAC,GAAG,CAHI,EAGD,CAHC,EAInB/W,CAJmB,EAIhB+W,CAJgB,EAIb,CAJa,EAKnB/W,CAAC,GAAG,IAAI,CALW,EAKR+W,CAAC,GAAG,CALI,EAKD,CALC,EAMnB/W,CANmB,EAMhB+W,CAAC,GAAG,CANY,EAMT,CANS,CAApB;AAQAlH,kBAAQ,CAAC6C,GAAT,CAAc+jK,WAAd,EAA2BH,YAAY,GAAGnxJ,UAAf,GAA0ByxD,IAArD;AACAlsB,YAAE,CAACh4C,GAAH,CAAQk3D,GAAR,EAAa2sG,MAAM,GAAGpxJ,UAAT,GAAoByxD,IAAjC;AACA,cAAM3nD,IAAI,GAAG,CAAE2nD,IAAF,EAAQA,IAAR,EAAcA,IAAd,EAAoBA,IAApB,EAA0BA,IAA1B,EAAgCA,IAAhC,CAAb;AACA6G,mBAAS,CAAC/qE,GAAV,CAAeuc,IAAf,EAAqBunJ,aAAa,GAAGrxJ,UAAhB,GAA2ByxD,IAAhD;AAEA;;AAED,YAAMuR,MAAM,GAAG,IAAIjQ,cAAJ,EAAf;AACAiQ,cAAM,CAAC3P,YAAP,CAAqB,UAArB,EAAiC,IAAI5E,eAAJ,CAAqB/jE,QAArB,EAA+BymK,YAA/B,CAAjC;AACAnuF,cAAM,CAAC3P,YAAP,CAAqB,IAArB,EAA2B,IAAI5E,eAAJ,CAAqBlpB,EAArB,EAAyB6rH,MAAzB,CAA3B;AACApuF,cAAM,CAAC3P,YAAP,CAAqB,WAArB,EAAkC,IAAI5E,eAAJ,CAAqB6J,SAArB,EAAgC+4F,aAAhC,CAAlC;;AACAnE,kBAAU,CAACt8K,IAAX,CAAiBoyF,MAAjB;;AAEA,YAAK+tF,GAAG,GAAGtE,OAAX,EAAqB;AAEpBsE,aAAG;AAEH;AAED;;AAED,aAAO;AAAE7D,kBAAU,EAAVA,UAAF;AAAcC,iBAAS,EAATA,SAAd;AAAyBC,eAAO,EAAPA;AAAzB,OAAP;AAEA;;AAED,aAASiC,mBAAT,CAA8B12C,MAA9B,EAAuC;AAEtC,UAAMu1C,kBAAkB,GAAG,IAAI/mH,iBAAJ,CAAuB,IAAIwlH,QAA3B,EAAqC,IAAIA,QAAzC,EAAmDh0C,MAAnD,CAA3B;AACAu1C,wBAAkB,CAAC3mH,OAAnB,CAA2B7D,OAA3B,GAAqC/S,uBAArC;AACAu9H,wBAAkB,CAAC3mH,OAAnB,CAA2Bt4D,IAA3B,GAAkC,cAAlC;AACAi/K,wBAAkB,CAAC7mH,WAAnB,GAAiC,IAAjC;AACA,aAAO6mH,kBAAP;AAEA;;AAED,aAASgB,YAAT,CAAuBn1K,MAAvB,EAA+Bc,CAA/B,EAAkC+W,CAAlC,EAAqC4M,KAArC,EAA4CD,MAA5C,EAAqD;AAEpDxkB,YAAM,CAACutD,QAAP,CAAgB/5C,GAAhB,CAAqB1S,CAArB,EAAwB+W,CAAxB,EAA2B4M,KAA3B,EAAkCD,MAAlC;AACAxkB,YAAM,CAACqtD,OAAP,CAAe75C,GAAf,CAAoB1S,CAApB,EAAuB+W,CAAvB,EAA0B4M,KAA1B,EAAiCD,MAAjC;AAEA;;AAED,aAASqvJ,cAAT,CAAyB9zE,UAAzB,EAAsC;AAErC,UAAM82E,OAAO,GAAG,IAAIpgG,YAAJ,CAAkBspB,UAAlB,CAAhB;AACA,UAAM+1E,QAAQ,GAAG,IAAI7jH,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,UAAMulH,cAAc,GAAG,IAAIvjC,iBAAJ,CAAuB;AAE7C/+I,YAAI,EAAE,uBAFuC;AAI7CkwF,eAAO,EAAE;AAAE,eAAK2a;AAAP,SAJoC;AAM7Cjb,gBAAQ,EAAE;AACT,oBAAU;AAAE7kF,iBAAK,EAAE;AAAT,WADD;AAET,qBAAW;AAAEA,iBAAK,EAAE;AAAT,WAFF;AAGT,qBAAW;AAAEA,iBAAK,EAAE42K;AAAT,WAHF;AAIT,yBAAe;AAAE52K,iBAAK,EAAE;AAAT,WAJN;AAKT,oBAAU;AAAEA,iBAAK,EAAE;AAAT,WALD;AAMT,oBAAU;AAAEA,iBAAK,EAAE;AAAT,WAND;AAOT,sBAAY;AAAEA,iBAAK,EAAE61K;AAAT,WAPH;AAQT,2BAAiB;AAAE71K,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB,WARR;AAST,4BAAkB;AAAE18C,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB;AATT,SANmC;AAkB7C0oC,oBAAY,EAAEoyF,sBAAsB,EAlBS;AAoB7CnyF,sBAAc;AAAE;AAAF,+VAeVoyF,aAAa,EAfH,iyCApB+B;AAsF7ChpG,gBAAQ,EAAE16B,UAtFmC;AAuF7Cs7B,iBAAS,EAAE,KAvFkC;AAwF7CC,kBAAU,EAAE;AAxFiC,OAAvB,CAAvB;AA4FA,aAAOioG,cAAP;AAEA;;AAED,aAASvC,kBAAT,GAA8B;AAE7B,UAAMiC,SAAS,GAAG,IAAI/0H,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAlB;AACA,UAAMq1H,cAAc,GAAG,IAAIvjC,iBAAJ,CAAuB;AAE7C/+I,YAAI,EAAE,yBAFuC;AAI7C4vF,gBAAQ,EAAE;AACT,oBAAU;AAAE7kF,iBAAK,EAAE;AAAT,WADD;AAET,uBAAa;AAAEA,iBAAK,EAAEi3K;AAAT,WAFJ;AAGT,2BAAiB;AAAEj3K,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB,WAHR;AAIT,4BAAkB;AAAE18C,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB;AAJT,SAJmC;AAW7C0oC,oBAAY,EAAEoyF,sBAAsB,EAXS;AAa7CnyF,sBAAc;AAAE;AAAF,sMAUVoyF,aAAa,EAVH,23BAb+B;AAqD7ChpG,gBAAQ,EAAE16B,UArDmC;AAsD7Cs7B,iBAAS,EAAE,KAtDkC;AAuD7CC,kBAAU,EAAE;AAvDiC,OAAvB,CAAvB;AA2DA,aAAOioG,cAAP;AAEA;;AAED,aAASzC,iBAAT,GAA6B;AAE5B,UAAMyC,cAAc,GAAG,IAAIvjC,iBAAJ,CAAuB;AAE7C/+I,YAAI,EAAE,iBAFuC;AAI7C4vF,gBAAQ,EAAE;AACT,oBAAU;AAAE7kF,iBAAK,EAAE;AAAT,WADD;AAET,2BAAiB;AAAEA,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB,WAFR;AAGT,4BAAkB;AAAE18C,iBAAK,EAAE+yK,SAAS,CAAEr2H,cAAF;AAAlB;AAHT,SAJmC;AAU7C0oC,oBAAY,EAAEoyF,sBAAsB,EAVS;AAY7CnyF,sBAAc;AAAE;AAAF,yKASVoyF,aAAa,EATH,iSAZ+B;AAgC7ChpG,gBAAQ,EAAE16B,UAhCmC;AAiC7Cs7B,iBAAS,EAAE,KAjCkC;AAkC7CC,kBAAU,EAAE;AAlCiC,OAAvB,CAAvB;AAsCA,aAAOioG,cAAP;AAEA;;AAED,aAASC,sBAAT,GAAkC;AAEjC;AAAO;AAAP;AAAA;AA2DA;;AAED,aAASC,aAAT,GAAyB;AAExB;AAAO;AAAP;AAAA;AAkFA;;AAED,aAASC,KAAT,CAAgBjiL,CAAhB,EAAmBC,CAAnB,EAAsBoxB,CAAtB,EAAyBC,CAAzB,EAA4BktC,MAA5B,EAAoCpuC,KAApC,EAA2CuoD,aAA3C,EAA2D;AAE1D/2E,aAAO,CAAC2W,IAAR,CAAc,sEAAd;AACA,aAAO,IAAImgE,KAAJ,CAAW14E,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoBmtC,MAApB,EAA4BpuC,KAA5B,EAAmCuoD,aAAnC,CAAP;AAEA;;AAED,QAAMupG,SAAS,GAAG,CAAlB;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,QAAQ,GAAG,CAAjB;AACA,QAAMC,UAAU,GAAG,CAAnB;AACA,QAAMC,YAAY,GAAG,CAArB;;AAEA,aAASC,gBAAT,CAA2Bl5G,SAA3B,EAAuC;AAEtCznE,aAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,aAAO8wD,SAAP;AAEA;;AAED,aAASm5G,aAAT,CAAwBn5G,SAAxB,EAAoC;AAEnC,UAAKA,SAAS,KAAKx6D,SAAnB,EAA+Bw6D,SAAS,GAAG,EAAZ;AAE/BznE,aAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA8wD,eAAS,CAACyf,eAAV,GAA4B,IAA5B;AACAzf,eAAS,CAACA,SAAV,GAAsBA,SAAtB;;AACAA,eAAS,CAACtuD,KAAV,GAAkB,YAAY;AAE7B,eAAOsuD,SAAS,CAACnqE,KAAV,EAAP;AAEA,OAJD;;AAMA,aAAOmqE,SAAP;AAEA;;AAED,aAASgvG,UAAT,CAAqBtuG,QAArB,EAA+B95C,QAA/B,EAA0C;AAEzCruB,aAAO,CAAC2W,IAAR,CAAc,oDAAd;AACA,aAAO,IAAI4xH,MAAJ,CAAYpgE,QAAZ,EAAsB95C,QAAtB,CAAP;AAEA;;AAED,aAASwyJ,QAAT,CAAmBxyJ,QAAnB,EAA8B;AAE7BruB,aAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA,aAAO,IAAI0tH,MAAJ,CAAYh2G,QAAZ,CAAP;AAEA;;AAED,aAASyyJ,cAAT,CAAyB34G,QAAzB,EAAmC95C,QAAnC,EAA8C;AAE7CruB,aAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,aAAO,IAAI4xH,MAAJ,CAAYpgE,QAAZ,EAAsB95C,QAAtB,CAAP;AAEA;;AAED,aAAS0yJ,kBAAT,CAA6B34G,UAA7B,EAA0C;AAEzCpoE,aAAO,CAAC2W,IAAR,CAAc,oEAAd;AACA,aAAO,IAAIskG,cAAJ,CAAoB7yC,UAApB,CAAP;AAEA;;AAED,aAAS44G,qBAAT,CAAgC54G,UAAhC,EAA6C;AAE5CpoE,aAAO,CAAC2W,IAAR,CAAc,uEAAd;AACA,aAAO,IAAIskG,cAAJ,CAAoB7yC,UAApB,CAAP;AAEA;;AAED,aAAS64G,sBAAT,CAAiC74G,UAAjC,EAA8C;AAE7CpoE,aAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,aAAO,IAAIskG,cAAJ,CAAoB7yC,UAApB,CAAP;AAEA;;AAED,aAAS84G,MAAT,CAAiB13K,CAAjB,EAAoB+W,CAApB,EAAuBuL,CAAvB,EAA2B;AAE1B9rB,aAAO,CAAC2W,IAAR,CAAc,2DAAd;AACA,aAAO,IAAIgkD,OAAJ,CAAanxD,CAAb,EAAgB+W,CAAhB,EAAmBuL,CAAnB,CAAP;AAEA,K,CAED;;;AAEA,aAASq1J,sBAAT,CAAiC1lJ,KAAjC,EAAwC4hD,QAAxC,EAAmD;AAElDr9E,aAAO,CAAC2W,IAAR,CAAc,4HAAd;AACA,aAAO,IAAIymE,eAAJ,CAAqB3hD,KAArB,EAA4B4hD,QAA5B,EAAuCK,QAAvC,CAAiDx2B,gBAAjD,CAAP;AAEA;;AAED,aAASk6H,aAAT,CAAwB3lJ,KAAxB,EAA+B4hD,QAA/B,EAA0C;AAEzCr9E,aAAO,CAAC2W,IAAR,CAAc,oFAAd;AACA,aAAO,IAAI6nE,mBAAJ,CAAyB/iD,KAAzB,EAAgC4hD,QAAhC,CAAP;AAEA;;AAED,aAASgkG,cAAT,CAAyB5lJ,KAAzB,EAAgC4hD,QAAhC,EAA2C;AAE1Cr9E,aAAO,CAAC2W,IAAR,CAAc,sFAAd;AACA,aAAO,IAAI+nE,oBAAJ,CAA0BjjD,KAA1B,EAAiC4hD,QAAjC,CAAP;AAEA;;AAED,aAASikG,qBAAT,CAAgC7lJ,KAAhC,EAAuC4hD,QAAvC,EAAkD;AAEjDr9E,aAAO,CAAC2W,IAAR,CAAc,oGAAd;AACA,aAAO,IAAIgoE,2BAAJ,CAAiCljD,KAAjC,EAAwC4hD,QAAxC,CAAP;AAEA;;AAED,aAASkkG,cAAT,CAAyB9lJ,KAAzB,EAAgC4hD,QAAhC,EAA2C;AAE1Cr9E,aAAO,CAAC2W,IAAR,CAAc,sFAAd;AACA,aAAO,IAAIkoE,oBAAJ,CAA0BpjD,KAA1B,EAAiC4hD,QAAjC,CAAP;AAEA;;AAED,aAASmkG,eAAT,CAA0B/lJ,KAA1B,EAAiC4hD,QAAjC,EAA4C;AAE3Cr9E,aAAO,CAAC2W,IAAR,CAAc,wFAAd;AACA,aAAO,IAAIooE,qBAAJ,CAA2BtjD,KAA3B,EAAkC4hD,QAAlC,CAAP;AAEA;;AAED,aAASokG,cAAT,CAAyBhmJ,KAAzB,EAAgC4hD,QAAhC,EAA2C;AAE1Cr9E,aAAO,CAAC2W,IAAR,CAAc,sFAAd;AACA,aAAO,IAAIqoE,oBAAJ,CAA0BvjD,KAA1B,EAAiC4hD,QAAjC,CAAP;AAEA;;AAED,aAASqkG,eAAT,CAA0BjmJ,KAA1B,EAAiC4hD,QAAjC,EAA4C;AAE3Cr9E,aAAO,CAAC2W,IAAR,CAAc,wFAAd;AACA,aAAO,IAAIsoE,qBAAJ,CAA2BxjD,KAA3B,EAAkC4hD,QAAlC,CAAP;AAEA;;AAED,aAASskG,gBAAT,CAA2BlmJ,KAA3B,EAAkC4hD,QAAlC,EAA6C;AAE5Cr9E,aAAO,CAAC2W,IAAR,CAAc,0FAAd;AACA,aAAO,IAAIuoE,sBAAJ,CAA4BzjD,KAA5B,EAAmC4hD,QAAnC,CAAP;AAEA;;AAED,aAASukG,gBAAT,CAA2BnmJ,KAA3B,EAAkC4hD,QAAlC,EAA6C;AAE5Cr9E,aAAO,CAAC2W,IAAR,CAAc,0FAAd;AACA,aAAO,IAAIyoE,sBAAJ,CAA4B3jD,KAA5B,EAAmC4hD,QAAnC,CAAP;AAEA,K,CAED;;;AAEAquE,SAAK,CAACr3I,MAAN,GAAe,UAAWwtK,SAAX,EAAsBj2B,QAAtB,EAAiC;AAE/C5rJ,aAAO,CAACC,GAAR,CAAa,0CAAb;AAEA4hL,eAAS,CAAC9rK,SAAV,GAAsB3V,MAAM,CAACiU,MAAP,CAAeq3I,KAAK,CAAC31I,SAArB,CAAtB;AACA8rK,eAAS,CAAC9rK,SAAV,CAAoB0M,WAApB,GAAkCo/J,SAAlC;AACAA,eAAS,CAAC9rK,SAAV,CAAoB61I,QAApB,GAA+BA,QAA/B;AAEA,aAAOi2B,SAAP;AAEA,KAVD,C,CAYA;;;AAEAzhL,UAAM,CAACiiC,MAAP,CAAe4uH,SAAS,CAACl7I,SAAzB,EAAoC;AAEnC+rK,0BAAoB,EAAE,8BAAW91B,SAAX,EAAuB;AAE5ChsJ,eAAO,CAAC2W,IAAR,CAAc,sHAAd,EAF4C,CAI5C;;AAEA,YAAMg8H,GAAG,GAAG,KAAKoZ,SAAL,CAAgBC,SAAhB,CAAZ;AACA,eAAO,KAAK+1B,cAAL,CAAqBpvC,GAArB,CAAP;AAEA,OAXkC;AAanCqvC,gCAA0B,EAAE,oCAAWh2B,SAAX,EAAuB;AAElDhsJ,eAAO,CAAC2W,IAAR,CAAc,4HAAd,EAFkD,CAIlD;;AAEA,YAAMg8H,GAAG,GAAG,KAAK4B,eAAL,CAAsByX,SAAtB,CAAZ;AACA,eAAO,KAAK+1B,cAAL,CAAqBpvC,GAArB,CAAP;AAEA,OAtBkC;AAwBnCovC,oBAAc,EAAE,wBAAWn1J,MAAX,EAAoB;AAEnC5sB,eAAO,CAAC2W,IAAR,CAAc,gHAAd;AAEA,YAAMwxD,QAAQ,GAAG,IAAI+f,QAAJ,EAAjB;;AAEA,aAAM,IAAIrpF,KAAC,GAAG,CAAR,EAAWyK,CAAC,GAAGsjB,MAAM,CAAC1uB,MAA5B,EAAoCW,KAAC,GAAGyK,CAAxC,EAA2CzK,KAAC,EAA5C,EAAkD;AAEjD,cAAMozC,KAAK,GAAGrlB,MAAM,CAAE/tB,KAAF,CAApB;AACAspE,kBAAQ,CAACx5C,QAAT,CAAkBpvB,IAAlB,CAAwB,IAAIo7D,OAAJ,CAAa1oB,KAAK,CAACzoC,CAAnB,EAAsByoC,KAAK,CAAC1xB,CAA5B,EAA+B0xB,KAAK,CAACnmB,CAAN,IAAW,CAA1C,CAAxB;AAEA;;AAED,eAAOq8C,QAAP;AAEA;AAvCkC,KAApC,E,CA2CA;;AAEA/nE,UAAM,CAACiiC,MAAP,CAAeuvH,IAAI,CAAC77I,SAApB,EAA+B;AAE9BksK,gBAAU,EAAE,oBAAWr1J,MAAX,EAAoB;AAE/B5sB,eAAO,CAAC2W,IAAR,CAAc,iEAAd;AACA,eAAO,KAAK6zD,aAAL,CAAoB59C,MAApB,CAAP;AAEA;AAP6B,KAA/B,E,CAWA;;AAEA,aAASs1J,kBAAT,CAA6Bt1J,MAA7B,EAAsC;AAErC5sB,aAAO,CAAC2W,IAAR,CAAc,mFAAd;AAEAw4I,sBAAgB,CAACj8I,IAAjB,CAAuB,IAAvB,EAA6B0Z,MAA7B;AACA,WAAKrpB,IAAL,GAAY,YAAZ;AACA,WAAK+oI,MAAL,GAAc,IAAd;AAEA;;AAED41C,sBAAkB,CAACnsK,SAAnB,GAA+B3V,MAAM,CAACiU,MAAP,CAAe86I,gBAAgB,CAACp5I,SAAhC,CAA/B,C,CAEA;;AAEA,aAASosK,YAAT,CAAuBv1J,MAAvB,EAAgC;AAE/B5sB,aAAO,CAAC2W,IAAR,CAAc,6EAAd;AAEAw4I,sBAAgB,CAACj8I,IAAjB,CAAuB,IAAvB,EAA6B0Z,MAA7B;AACA,WAAKrpB,IAAL,GAAY,YAAZ;AAEA;;AAED4+K,gBAAY,CAACpsK,SAAb,GAAyB3V,MAAM,CAACiU,MAAP,CAAe86I,gBAAgB,CAACp5I,SAAhC,CAAzB,C,CAEA;;AAEA,aAASqsK,MAAT,CAAiBx1J,MAAjB,EAA0B;AAEzB5sB,aAAO,CAAC2W,IAAR,CAAc,oEAAd;AAEAw4I,sBAAgB,CAACj8I,IAAjB,CAAuB,IAAvB,EAA6B0Z,MAA7B;AACA,WAAKrpB,IAAL,GAAY,YAAZ;AAEA;;AAED6+K,UAAM,CAACrsK,SAAP,GAAmB3V,MAAM,CAACiU,MAAP,CAAe86I,gBAAgB,CAACp5I,SAAhC,CAAnB;AAEA3V,UAAM,CAACiiC,MAAP,CAAe+/I,MAAM,CAACrsK,SAAtB,EAAiC;AAEhCssK,mBAAa,EAAE;AAAW;AAAU;AAEnCriL,eAAO,CAACD,KAAR,CAAe,kDAAf;AAEA,OAN+B;AAOhCuiL,2BAAqB,EAAE;AAAW;AAAuB;AAExDtiL,eAAO,CAACD,KAAR,CAAe,0DAAf;AAEA,OAX+B;AAYhCwiL,8BAAwB,EAAE;AAAW;AAAqB;AAEzDviL,eAAO,CAACD,KAAR,CAAe,6DAAf;AAEA;AAhB+B,KAAjC,E,CAoBA;;AAEA,aAASyiL,UAAT,CAAqB7tK,IAArB,EAA4B;AAE3B3U,aAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,aAAO,IAAIwkK,UAAJ,CAAgBxmK,IAAhB,CAAP;AAEA;;AAED,aAAS8tK,iBAAT,CAA4Bl1K,MAA5B,EAAoCihB,KAApC,EAA4C;AAE3CxuB,aAAO,CAAC2W,IAAR,CAAc,kFAAd;AACA,aAAO,IAAI4jK,SAAJ,CAAehtK,MAAf,EAAuBihB,KAAvB,CAAP;AAEA;;AAED,aAASk0J,WAAT,CAAsBn1K,MAAtB,EAA8BynE,GAA9B,EAAoC;AAEnCh1E,aAAO,CAAC2W,IAAR,CAAc,sEAAd;AACA,aAAO,IAAIsxH,YAAJ,CAAkB,IAAI+S,aAAJ,CAAmBztI,MAAM,CAAC46D,QAA1B,CAAlB,EAAwD,IAAI4yC,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEwmD,GAAG,KAAK/nE,SAAR,GAAoB+nE,GAApB,GAA0B;AAAnC,OAAvB,CAAxD,CAAP;AAEA;;AAEDgkG,cAAU,CAACjjK,SAAX,CAAqB4sK,SAArB,GAAiC,YAAY;AAE5C3iL,aAAO,CAACD,KAAR,CAAe,0FAAf;AAEA,KAJD;;AAMAy4K,kBAAc,CAACziK,SAAf,CAAyBoE,MAAzB,GAAkC,YAAY;AAE7Cna,aAAO,CAACD,KAAR,CAAe,8DAAf;AAEA,KAJD;;AAMA,aAAS6iL,eAAT,CAA0Br1K,MAA1B,EAAkCynE,GAAlC,EAAwC;AAEvCh1E,aAAO,CAAC2W,IAAR,CAAc,8EAAd;AACA,aAAO,IAAIsxH,YAAJ,CAAkB,IAAIqB,iBAAJ,CAAuB/7H,MAAM,CAAC46D,QAA9B,CAAlB,EAA4D,IAAI4yC,iBAAJ,CAAuB;AAAEvsF,aAAK,EAAEwmD,GAAG,KAAK/nE,SAAR,GAAoB+nE,GAApB,GAA0B;AAAnC,OAAvB,CAA5D,CAAP;AAEA,K,CAED;;;AAEA50E,UAAM,CAACiiC,MAAP,CAAeqmH,MAAM,CAAC3yI,SAAtB,EAAiC;AAEhCigJ,oBAAc,EAAE,wBAAWjsI,GAAX,EAAiB;AAEhC/pB,eAAO,CAAC2W,IAAR,CAAc,sGAAd;AACA,eAAOi/I,WAAW,CAACI,cAAZ,CAA4BjsI,GAA5B,CAAP;AAEA;AAP+B,KAAjC;AAWA2+H,UAAM,CAACm6B,QAAP,GAAkB;AAEjB/mK,SAAG,EAAE;AAAW;AAAsB;AAErC9b,eAAO,CAACD,KAAR,CAAe,yFAAf;AAEA,OANgB;AAQjB2P,SAAG,EAAE;AAAW;AAAa;AAE5B1P,eAAO,CAACD,KAAR,CAAe,yFAAf;AAEA;AAZgB,KAAlB;;AAgBA,aAAS+iL,SAAT,CAAoBn6B,OAApB,EAA8B;AAE7B3oJ,aAAO,CAAC2W,IAAR,CAAc,uDAAd;AACA,aAAO,IAAIyyI,UAAJ,CAAgBT,OAAhB,CAAP;AAEA;;AAED,aAASo6B,mBAAT,CAA8Bp6B,OAA9B,EAAwC;AAEvC3oJ,aAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,aAAO,IAAIq0I,iBAAJ,CAAuBrC,OAAvB,CAAP;AAEA;;AAEDvoJ,UAAM,CAACiiC,MAAP,CAAe00H,YAAY,CAAChhJ,SAA5B,EAAuC;AAEtCitK,oBAAc,EAAE,wBAAWr6K,KAAX,EAAmB;AAElC3I,eAAO,CAAC2W,IAAR,CAAc,+EAAd;AACA,eAAO,KAAKsyI,eAAL,CAAsBtgJ,KAAtB,CAAP;AAEA;AAPqC,KAAvC,E,CAWA;;AAEAvI,UAAM,CAACiiC,MAAP,CAAe+0I,IAAI,CAACrhK,SAApB,EAA+B;AAE9BglC,YAAM,EAAE,gBAAW8wG,cAAX,EAA4B;AAEnC7rJ,eAAO,CAAC2W,IAAR,CAAc,yDAAd;AACA,eAAO,KAAKqkC,SAAL,CAAgB6wG,cAAhB,CAAP;AAEA,OAP6B;AAQ9Bo3B,WAAK,EAAE,iBAAY;AAElBjjL,eAAO,CAAC2W,IAAR,CAAc,sDAAd;AACA,eAAO,KAAKs0D,OAAL,EAAP;AAEA,OAb6B;AAc9Bi4G,uBAAiB,EAAE,2BAAWl4G,GAAX,EAAiB;AAEnChrE,eAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,eAAO,KAAKg1D,aAAL,CAAoBX,GAApB,CAAP;AAEA,OAnB6B;AAoB9Br2D,UAAI,EAAE,cAAWk3I,cAAX,EAA4B;AAEjC7rJ,eAAO,CAAC2W,IAAR,CAAc,qDAAd;AACA,eAAO,KAAKu0D,OAAL,CAAc2gF,cAAd,CAAP;AAEA;AAzB6B,KAA/B;AA4BAzrJ,UAAM,CAACiiC,MAAP,CAAeknC,IAAI,CAACxzD,SAApB,EAA+B;AAE9BglC,YAAM,EAAE,gBAAW8wG,cAAX,EAA4B;AAEnC7rJ,eAAO,CAAC2W,IAAR,CAAc,yDAAd;AACA,eAAO,KAAKqkC,SAAL,CAAgB6wG,cAAhB,CAAP;AAEA,OAP6B;AAQ9Bo3B,WAAK,EAAE,iBAAY;AAElBjjL,eAAO,CAAC2W,IAAR,CAAc,sDAAd;AACA,eAAO,KAAKs0D,OAAL,EAAP;AAEA,OAb6B;AAc9Bi4G,uBAAiB,EAAE,2BAAWl4G,GAAX,EAAiB;AAEnChrE,eAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,eAAO,KAAKg1D,aAAL,CAAoBX,GAApB,CAAP;AAEA,OAnB6B;AAoB9Bm4G,0BAAoB,EAAE,8BAAWt3G,MAAX,EAAoB;AAEzC7rE,eAAO,CAAC2W,IAAR,CAAc,8EAAd;AACA,eAAO,KAAKi1D,gBAAL,CAAuBC,MAAvB,CAAP;AAEA,OAzB6B;AA0B9Bl3D,UAAI,EAAE,cAAWk3I,cAAX,EAA4B;AAEjC7rJ,eAAO,CAAC2W,IAAR,CAAc,qDAAd;AACA,eAAO,KAAKu0D,OAAL,CAAc2gF,cAAd,CAAP;AAEA;AA/B6B,KAA/B;AAkCAzrJ,UAAM,CAACiiC,MAAP,CAAe2qC,MAAM,CAACj3D,SAAtB,EAAiC;AAEhCktK,WAAK,EAAE,iBAAY;AAElBjjL,eAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,eAAO,KAAKs0D,OAAL,EAAP;AAEA;AAP+B,KAAjC;;AAWAumB,WAAO,CAACz7E,SAAR,CAAkBqtK,aAAlB,GAAkC,UAAW7vJ,CAAX,EAAe;AAEhDvzB,aAAO,CAAC2W,IAAR,CAAc,iFAAd;AACA,aAAO,KAAKk7E,uBAAL,CAA8Bt+D,CAA9B,CAAP;AAEA,KALD;;AAOAgkJ,SAAK,CAACxhK,SAAN,CAAgBglC,MAAhB,GAAyB,UAAW8wG,cAAX,EAA4B;AAEpD7rJ,aAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,aAAO,KAAKqkC,SAAL,CAAgB6wG,cAAhB,CAAP;AAEA,KALD;;AAOAzrJ,UAAM,CAACiiC,MAAP,CAAe2lB,SAAf,EAA0B;AAEzBq7H,cAAQ,EAAE,oBAAY;AAErBrjL,eAAO,CAAC2W,IAAR,CAAc,yEAAd;AACA,eAAOS,IAAI,CAAC2N,MAAL,EAAP;AAEA,OAPwB;AASzBu+J,uBAAiB,EAAE,2BAAW36K,KAAX,EAAmB;AAErC3I,eAAO,CAAC2W,IAAR,CAAc,0EAAd;AACA,eAAOqxC,SAAS,CAACkC,eAAV,CAA2BvhD,KAA3B,CAAP;AAEA,OAdwB;AAgBzB46K,oBAAc,EAAE,wBAAW56K,KAAX,EAAmB;AAElC3I,eAAO,CAAC2W,IAAR,CAAc,sEAAd;AACA,eAAOqxC,SAAS,CAAC+B,cAAV,CAA0BphD,KAA1B,CAAP;AAEA;AArBwB,KAA1B;AAyBAvI,UAAM,CAACiiC,MAAP,CAAeorB,OAAO,CAAC13C,SAAvB,EAAkC;AAEjCytK,0BAAoB,EAAE,8BAAW/nJ,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEhDva,eAAO,CAAC2W,IAAR,CAAc,qFAAd;AACA,eAAO,KAAKw2C,OAAL,CAAc1xB,KAAd,EAAqBlhB,MAArB,CAAP;AAEA,OAPgC;AAQjCkpK,qBAAe,EAAE,yBAAWv9G,MAAX,EAAoB;AAEpClmE,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAOuvD,MAAM,CAACta,YAAP,CAAqB,IAArB,CAAP;AAEA,OAbgC;AAcjC83H,0BAAoB,EAAE;AAAW;AAAU;AAE1C1jL,eAAO,CAACD,KAAR,CAAe,0DAAf;AAEA,OAlBgC;AAmBjC4jL,4BAAsB,EAAE,gCAAWt2H,SAAX,EAAuB;AAE9CrtD,eAAO,CAAC2W,IAAR,CAAc,0GAAd;AACA,eAAO02C,SAAS,CAACzB,YAAV,CAAwB,IAAxB,CAAP;AAEA,OAxBgC;AAyBjCg4H,yBAAmB,EAAE;AAAW;AAA8B;AAE7D5jL,eAAO,CAACD,KAAR,CAAe,yDAAf;AAEA;AA7BgC,KAAlC;AAiCAK,UAAM,CAACiiC,MAAP,CAAek7B,OAAO,CAACxnD,SAAvB,EAAkC;AAEjC8tK,qBAAe,EAAE,yBAAWtwJ,CAAX,EAAe;AAE/BvzB,eAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,eAAO,KAAKunD,YAAL,CAAmB3qC,CAAnB,CAAP;AAEA,OAPgC;AAQjCiwJ,0BAAoB,EAAE,8BAAW/nJ,KAAX,EAAkBlhB,MAAlB,EAA2B;AAEhDva,eAAO,CAAC2W,IAAR,CAAc,qFAAd;AACA,eAAO,KAAKw2C,OAAL,CAAc1xB,KAAd,EAAqBlhB,MAArB,CAAP;AAEA,OAbgC;AAcjCupK,iBAAW,EAAE,uBAAY;AAExB9jL,eAAO,CAAC2W,IAAR,CAAc,sGAAd;AACA,eAAO,IAAIgkD,OAAJ,GAAcj8C,mBAAd,CAAmC,IAAnC,EAAyC,CAAzC,CAAP;AAEA,OAnBgC;AAoBjC6mD,+BAAyB,EAAE,mCAAW/1B,CAAX,EAAe;AAEzCxvC,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAO,KAAKwoD,0BAAL,CAAiC3vB,CAAjC,CAAP;AAEA,OAzBgC;AA0BjCu0I,qBAAe,EAAE,2BAAY;AAE5B/jL,eAAO,CAAC2W,IAAR,CAAc,qDAAd;AAEA,OA9BgC;AA+BjC8sK,qBAAe,EAAE,yBAAWv9G,MAAX,EAAoB;AAEpClmE,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAOuvD,MAAM,CAAC3R,YAAP,CAAqB,IAArB,CAAP;AAEA,OApCgC;AAqCjCyvH,qBAAe,EAAE,yBAAW99G,MAAX,EAAoB;AAEpClmE,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAOuvD,MAAM,CAAC3R,YAAP,CAAqB,IAArB,CAAP;AAEA,OA1CgC;AA2CjCmvH,0BAAoB,EAAE;AAAW;AAAU;AAE1C1jL,eAAO,CAACD,KAAR,CAAe,0DAAf;AAEA,OA/CgC;AAgDjCkkL,gBAAU,EAAE,oBAAW1lK,CAAX,EAAe;AAE1Bve,eAAO,CAAC2W,IAAR,CAAc,kGAAd;AACA4H,SAAC,CAACy9C,kBAAF,CAAsB,IAAtB;AAEA,OArDgC;AAsDjCkoH,iBAAW,EAAE,qBAAWh+G,MAAX,EAAoB;AAEhClmE,eAAO,CAAC2W,IAAR,CAAc,4FAAd;AACA,eAAOuvD,MAAM,CAAC3R,YAAP,CAAqB,IAArB,CAAP;AAEA,OA3DgC;AA4DjC/C,eAAS,EAAE,qBAAY;AAEtBxxD,eAAO,CAACD,KAAR,CAAe,+CAAf;AAEA,OAhEgC;AAiEjC2lE,aAAO,EAAE,mBAAY;AAEpB1lE,eAAO,CAACD,KAAR,CAAe,6CAAf;AAEA,OArEgC;AAsEjC4lE,aAAO,EAAE,mBAAY;AAEpB3lE,eAAO,CAACD,KAAR,CAAe,6CAAf;AAEA,OA1EgC;AA2EjC6lE,aAAO,EAAE,mBAAY;AAEpB5lE,eAAO,CAACD,KAAR,CAAe,6CAAf;AAEA,OA/EgC;AAgFjCokL,kBAAY,EAAE,wBAAY;AAEzBnkL,eAAO,CAACD,KAAR,CAAe,kDAAf;AAEA,OApFgC;AAqFjC4jL,4BAAsB,EAAE,gCAAWt2H,SAAX,EAAuB;AAE9CrtD,eAAO,CAAC2W,IAAR,CAAc,0GAAd;AACA,eAAO02C,SAAS,CAACkH,YAAV,CAAwB,IAAxB,CAAP;AAEA,OA1FgC;AA2FjCqvH,yBAAmB,EAAE;AAAW;AAA8B;AAE7D5jL,eAAO,CAACD,KAAR,CAAe,yDAAf;AAEA,OA/FgC;AAgGjCqkL,iBAAW,EAAE,qBAAW3kK,IAAX,EAAiBD,KAAjB,EAAwBI,MAAxB,EAAgCD,GAAhC,EAAqCiiD,IAArC,EAA2CC,GAA3C,EAAiD;AAE7D7hE,eAAO,CAAC2W,IAAR,CAAc,sHAAd;AACA,eAAO,KAAKgrD,eAAL,CAAsBliD,IAAtB,EAA4BD,KAA5B,EAAmCG,GAAnC,EAAwCC,MAAxC,EAAgDgiD,IAAhD,EAAsDC,GAAtD,CAAP;AAEA;AArGgC,KAAlC;;AAyGA+O,SAAK,CAAC76D,SAAN,CAAgBsuK,kBAAhB,GAAqC,UAAW13J,IAAX,EAAkB;AAEtD3sB,aAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,aAAO,KAAK46D,cAAL,CAAqB5kD,IAArB,CAAP;AAEA,KALD;;AAOA+pC,cAAU,CAAC3gD,SAAX,CAAqB0tK,eAArB,GAAuC,UAAWv9G,MAAX,EAAoB;AAE1DlmE,aAAO,CAAC2W,IAAR,CAAc,iHAAd;AACA,aAAOuvD,MAAM,CAACjrD,eAAP,CAAwB,IAAxB,CAAP;AAEA,KALD;;AAOA7a,UAAM,CAACiiC,MAAP,CAAewrC,GAAG,CAAC93D,SAAnB,EAA8B;AAE7BmtK,uBAAiB,EAAE,2BAAWl4G,GAAX,EAAiB;AAEnChrE,eAAO,CAAC2W,IAAR,CAAc,uEAAd;AACA,eAAO,KAAKg1D,aAAL,CAAoBX,GAApB,CAAP;AAEA,OAP4B;AAQ7Bs5G,yBAAmB,EAAE,6BAAWt4G,KAAX,EAAmB;AAEvChsE,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAKo1D,eAAL,CAAsBC,KAAtB,CAAP;AAEA,OAb4B;AAc7Bm3G,0BAAoB,EAAE,8BAAWt3G,MAAX,EAAoB;AAEzC7rE,eAAO,CAAC2W,IAAR,CAAc,6EAAd;AACA,eAAO,KAAKi1D,gBAAL,CAAuBC,MAAvB,CAAP;AAEA;AAnB4B,KAA9B;AAuBAzrE,UAAM,CAACiiC,MAAP,CAAekwC,QAAQ,CAACx8D,SAAxB,EAAmC;AAElCm5H,UAAI,EAAE,gBAAY;AAEjBlvI,eAAO,CAAC2W,IAAR,CAAc,yDAAd;AACA,eAAO,KAAKi9D,OAAL,EAAP;AAEA,OAPiC;AAQlC2wG,wBAAkB,EAAE,4BAAWtyI,KAAX,EAAkBvpC,MAAlB,EAA2B;AAE9C1I,eAAO,CAAC2W,IAAR,CAAc,4EAAd;AACA,eAAO,KAAK+7D,YAAL,CAAmBzgC,KAAnB,EAA0BvpC,MAA1B,CAAP;AAEA,OAbiC;AAclC87K,cAAQ,EAAE,kBAAW97K,MAAX,EAAoB;AAE7B1I,eAAO,CAAC2W,IAAR,CAAc,iEAAd;AACA,eAAO,KAAKk9D,WAAL,CAAkBnrE,MAAlB,CAAP;AAEA,OAnBiC;AAoBlCk0D,YAAM,EAAE,gBAAWl0D,MAAX,EAAoB;AAE3B1I,eAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,eAAO,KAAK67D,SAAL,CAAgB9pE,MAAhB,CAAP;AAEA,OAzBiC;AA0BlCsjE,WAAK,EAAE,eAAWtjE,MAAX,EAAoB;AAE1B1I,eAAO,CAAC2W,IAAR,CAAc,2DAAd;AACA,eAAO,KAAKm9D,QAAL,CAAeprE,MAAf,CAAP;AAEA;AA/BiC,KAAnC;AAmCAtI,UAAM,CAACiiC,MAAP,CAAekwC,QAAf,EAAyB;AAExBgyG,wBAAkB,EAAE,4BAAWtyI,KAAX,EAAkB7zC,CAAlB,EAAqBC,CAArB,EAAwBoxB,CAAxB,EAA2B/mB,MAA3B,EAAoC;AAEvD1I,eAAO,CAAC2W,IAAR,CAAc,4EAAd;AACA,eAAO47D,QAAQ,CAACG,YAAT,CAAuBzgC,KAAvB,EAA8B7zC,CAA9B,EAAiCC,CAAjC,EAAoCoxB,CAApC,EAAuC/mB,MAAvC,CAAP;AAEA,OAPuB;AAQxBk0D,YAAM,EAAE,gBAAWx+D,CAAX,EAAcC,CAAd,EAAiBoxB,CAAjB,EAAoB/mB,MAApB,EAA6B;AAEpC1I,eAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,eAAO47D,QAAQ,CAACC,SAAT,CAAoBp0E,CAApB,EAAuBC,CAAvB,EAA0BoxB,CAA1B,EAA6B/mB,MAA7B,CAAP;AAEA;AAbuB,KAAzB;AAiBAtI,UAAM,CAACiiC,MAAP,CAAe0wH,KAAK,CAACh9I,SAArB,EAAgC;AAE/B0uK,sBAAgB,EAAE,0BAAWz4B,SAAX,EAAuB;AAExChsJ,eAAO,CAAC2W,IAAR,CAAc,kFAAd;AACA,eAAO,KAAK+W,aAAL,CAAoBs+H,SAApB,CAAP;AAEA,OAP8B;AAQ/B04B,aAAO,EAAE,iBAAWnuJ,OAAX,EAAqB;AAE7Bv2B,eAAO,CAAC2W,IAAR,CAAc,0EAAd;AACA,eAAO,IAAIs8H,eAAJ,CAAqB,IAArB,EAA2B18G,OAA3B,CAAP;AAEA,OAb8B;AAc/BouJ,kBAAY,EAAE,sBAAWpuJ,OAAX,EAAqB;AAElCv2B,eAAO,CAAC2W,IAAR,CAAc,6EAAd;AACA,eAAO,IAAI8jI,aAAJ,CAAmB,IAAnB,EAAyBlkH,OAAzB,CAAP;AAEA;AAnB8B,KAAhC;AAuBAn2B,UAAM,CAACiiC,MAAP,CAAewoB,OAAO,CAAC90C,SAAvB,EAAkC;AAEjC6uK,mBAAa,EAAE,uBAAWv3H,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAEpDva,eAAO,CAAC2W,IAAR,CAAc,6EAAd;AACA,eAAO,KAAKy2C,mBAAL,CAA0BC,SAA1B,EAAqC1nC,KAArC,EAA4CpL,MAA5C,CAAP;AAEA,OAPgC;AAQjCsqK,yBAAmB,EAAE,6BAAWtmK,CAAX,EAAe;AAEnCve,eAAO,CAAC2W,IAAR,CAAc,mFAAd;AACA,eAAO,KAAKg2C,mBAAL,CAA0BpuC,CAA1B,CAAP;AAEA,OAbgC;AAcjCumK,qBAAe,EAAE,2BAAY;AAE5B9kL,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAK41C,eAAL,EAAP;AAEA;AAnBgC,KAAlC;AAuBAnsD,UAAM,CAACiiC,MAAP,CAAes4B,OAAO,CAAC5kD,SAAvB,EAAkC;AAEjCgvK,gCAA0B,EAAE,sCAAY;AAEvC/kL,eAAO,CAACD,KAAR,CAAe,2GAAf;AAEA,OANgC;AAOjCilL,4BAAsB,EAAE,kCAAY;AAEnChlL,eAAO,CAACD,KAAR,CAAe,mGAAf;AAEA,OAXgC;AAYjCklL,2BAAqB,EAAE,+BAAW1xJ,CAAX,EAAe;AAErCvzB,eAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,eAAO,KAAKumD,qBAAL,CAA4B3pC,CAA5B,CAAP;AAEA,OAjBgC;AAkBjC2xJ,wBAAkB,EAAE,4BAAW3xJ,CAAX,EAAe;AAElCvzB,eAAO,CAAC2W,IAAR,CAAc,iFAAd;AACA,eAAO,KAAKwmD,kBAAL,CAAyB5pC,CAAzB,CAAP;AAEA,OAvBgC;AAwBjC4xJ,yBAAmB,EAAE,6BAAWx/J,KAAX,EAAkBrG,MAAlB,EAA2B;AAE/Ctf,eAAO,CAAC2W,IAAR,CAAc,mFAAd;AACA,eAAO,KAAK+H,mBAAL,CAA0BY,MAA1B,EAAkCqG,KAAlC,CAAP;AAEA,OA7BgC;AA8BjCy/J,qBAAe,EAAE,yBAAW7xJ,CAAX,EAAe;AAE/BvzB,eAAO,CAAC2W,IAAR,CAAc,qFAAd;AACA,eAAO,KAAK49C,YAAL,CAAmBhhC,CAAnB,CAAP;AAEA,OAnCgC;AAoCjCqxJ,mBAAa,EAAE,uBAAWv3H,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAEpDva,eAAO,CAAC2W,IAAR,CAAc,6EAAd;AACA,eAAO,KAAKy2C,mBAAL,CAA0BC,SAA1B,EAAqC1nC,KAArC,EAA4CpL,MAA5C,CAAP;AAEA,OAzCgC;AA0CjCsqK,yBAAmB,EAAE,6BAAWtmK,CAAX,EAAe;AAEnCve,eAAO,CAAC2W,IAAR,CAAc,mFAAd;AACA,eAAO,KAAKg2C,mBAAL,CAA0BpuC,CAA1B,CAAP;AAEA,OA/CgC;AAgDjCumK,qBAAe,EAAE,2BAAY;AAE5B9kL,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAK41C,eAAL,EAAP;AAEA;AArDgC,KAAlC;AAyDAnsD,UAAM,CAACiiC,MAAP,CAAe8xB,OAAO,CAACp+C,SAAvB,EAAkC;AAEjC6uK,mBAAa,EAAE,uBAAWv3H,SAAX,EAAsB1nC,KAAtB,EAA6BpL,MAA7B,EAAsC;AAEpDva,eAAO,CAAC2W,IAAR,CAAc,6EAAd;AACA,eAAO,KAAKy2C,mBAAL,CAA0BC,SAA1B,EAAqC1nC,KAArC,EAA4CpL,MAA5C,CAAP;AAEA,OAPgC;AAQjCuqK,qBAAe,EAAE,2BAAY;AAE5B9kL,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAK41C,eAAL,EAAP;AAEA;AAbgC,KAAlC,E,CAiBA;;AAEAnsD,UAAM,CAACiiC,MAAP,CAAe6lD,QAAQ,CAACnyE,SAAxB,EAAmC;AAElCsvK,qBAAe,EAAE,2BAAY;AAE5BrlL,eAAO,CAACD,KAAR,CAAe,sDAAf;AAEA,OANiC;AAOlCsnI,0BAAoB,EAAE,gCAAY;AAEjCrnI,eAAO,CAACD,KAAR,CAAe,0GAAf;AAEA,OAXiC;AAYlCulL,iBAAW,EAAE,qBAAWhmK,MAAX,EAAoB;AAEhCtf,eAAO,CAAC2W,IAAR,CAAc,qEAAd;AACA,eAAO,KAAK49C,YAAL,CAAmBj1C,MAAnB,CAAP;AAEA;AAjBiC,KAAnC;AAqBAlf,UAAM,CAACiiC,MAAP,CAAe4hC,QAAQ,CAACluD,SAAxB,EAAmC;AAElCwvK,oBAAc,EAAE,wBAAW3nL,IAAX,EAAkB;AAEjCoC,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAK+vD,eAAL,CAAsB9oE,IAAtB,CAAP;AAEA,OAPiC;AAQlC4nL,iBAAW,EAAE,uBAAY;AAExBxlL,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AAEA,OAZiC;AAalC66C,eAAS,EAAE,mBAAWhzC,QAAX,EAAqBw6C,IAArB,EAA4B;AAEtCh5D,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAO,KAAKkvD,eAAL,CAAsB7M,IAAtB,EAA4Bx6C,QAA5B,CAAP;AAEA,OAlBiC;AAmBlCinK,sBAAgB,EAAE,4BAAY;AAE7BzlL,eAAO,CAACD,KAAR,CAAe,gHAAf;AAEA,OAvBiC;AAwBlCulL,iBAAW,EAAE,qBAAWhmK,MAAX,EAAoB;AAEhCtf,eAAO,CAAC2W,IAAR,CAAc,qEAAd;AACA,eAAO,KAAK49C,YAAL,CAAmBj1C,MAAnB,CAAP;AAEA;AA7BiC,KAAnC;AAiCAlf,UAAM,CAAC0qD,gBAAP,CAAyBmZ,QAAQ,CAACluD,SAAlC,EAA6C;AAE5C2vK,gBAAU,EAAE;AACXh2K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,qDAAd;AACA,iBAAO,KAAKoiC,QAAL,CAAcqR,KAArB;AAEA,SANU;AAOXluC,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,qDAAd;AACA,eAAKoiC,QAAL,CAAcqR,KAAd,GAAsBzhD,KAAtB;AAEA;AAZU,OAFgC;AAgB5Cg9K,mBAAa,EAAE;AACdj2K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,+FAAd;AAEA,SALa;AAMduF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,+FAAd;AAEA;AAVa;AAhB6B,KAA7C;AA+BAvW,UAAM,CAACiiC,MAAP,CAAeikD,IAAI,CAACvwE,SAApB,EAA+B;AAE9B6vK,iBAAW,EAAE,uBAAY;AAExB5lL,eAAO,CAACD,KAAR,CAAe,2LAAf;AAEA;AAN6B,KAA/B;AAUAK,UAAM,CAAC0qD,gBAAP,CAAyBw7B,IAAI,CAACvwE,SAA9B,EAAyC;AAExC8vK,cAAQ,EAAE;AACTn2K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAACD,KAAR,CAAe,kGAAf;AACA,iBAAOmlD,iBAAP;AAEA,SANQ;AAOThpC,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAACD,KAAR,CAAe,sLAAf;AAEA;AAXQ;AAF8B,KAAzC;AAkBAK,UAAM,CAAC0qD,gBAAP,CAAyB85E,GAAG,CAAC7uH,SAA7B,EAAwC;AAEvCyrF,aAAO,EAAE;AACR9xF,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA,iBAAO,KAAKmuH,MAAZ;AAEA;AANO;AAF8B,KAAxC;AAaA1kI,UAAM,CAACk7C,cAAP,CAAuB0qF,QAAQ,CAACjwH,SAAhC,EAA2C,kBAA3C,EAA+D;AAE9DrG,SAAG,EAAE,eAAY;AAEhB1P,eAAO,CAAC2W,IAAR,CAAc,oDAAd;AAEA,OAN6D;AAO9DuF,SAAG,EAAE,eAAY;AAEhBlc,eAAO,CAAC2W,IAAR,CAAc,oDAAd;AAEA;AAX6D,KAA/D;;AAeAuuH,eAAW,CAACnvH,SAAZ,CAAsB+vK,SAAtB,GAAkC,YAAY;AAE7C9lL,aAAO,CAACD,KAAR,CAAe,kDAAf;AAEA,KAJD;;AAMAK,UAAM,CAACk7C,cAAP,CAAuBowG,KAAK,CAAC31I,SAA7B,EAAwC,sBAAxC,EAAgE;AAE/DrG,SAAG,EAAE,eAAY;AAEhB1P,eAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,eAAO,KAAKg1I,kBAAZ;AAEA,OAP8D;AAQ/DzvI,SAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,eAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,aAAKg1I,kBAAL,GAA0BhjJ,KAA1B;AAEA;AAb8D,KAAhE,E,CAiBA;;AAEAmmF,qBAAiB,CAAC/4E,SAAlB,CAA4BgwK,OAA5B,GAAsC,UAAW52F,WAAX,EAAwBH,SAAxB,EAAoC;AAEzEhvF,aAAO,CAAC2W,IAAR,CAAc,oDACZ,8DADF;AAGA,UAAKq4E,SAAS,KAAK/hF,SAAnB,EAA+B,KAAK+hF,SAAL,GAAiBA,SAAjB;AAC/B,WAAKE,cAAL,CAAqBC,WAArB;AAEA,KARD,C,CAUA;;;AAEA/uF,UAAM,CAAC0qD,gBAAP,CAAyBooG,KAAK,CAACn9I,SAA/B,EAA0C;AACzCiwK,gBAAU,EAAE;AACX9pK,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,4CAAd;AAEA;AALU,OAD6B;AAQzCsvK,qBAAe,EAAE;AAChB/pK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmBrN,GAAnB,GAAyBzW,KAAzB;AAEA;AANe,OARwB;AAgBzCu9K,sBAAgB,EAAE;AACjBhqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmBhN,IAAnB,GAA0B9W,KAA1B;AAEA;AANgB,OAhBuB;AAwBzCw9K,uBAAiB,EAAE;AAClBjqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,8DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmBjN,KAAnB,GAA2B7W,KAA3B;AAEA;AANiB,OAxBsB;AAgCzCy9K,qBAAe,EAAE;AAChBlqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmB9M,GAAnB,GAAyBhX,KAAzB;AAEA;AANe,OAhCwB;AAwCzC09K,wBAAkB,EAAE;AACnBnqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmB7M,MAAnB,GAA4BjX,KAA5B;AAEA;AANkB,OAxCqB;AAgDzCitF,sBAAgB,EAAE;AACjB15E,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmBm1C,IAAnB,GAA0Bj5D,KAA1B;AAEA;AANgB,OAhDuB;AAwDzCktF,qBAAe,EAAE;AAChB35E,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKwqF,MAAL,CAAY10E,MAAZ,CAAmBo1C,GAAnB,GAAyBl5D,KAAzB;AAEA;AANe,OAxDwB;AAgEzC29K,yBAAmB,EAAE;AACpBpqK,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,gHAAd;AAEA;AALmB,OAhEoB;AAuEzCk+E,gBAAU,EAAE;AACX34E,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AACA,eAAKwqF,MAAL,CAAYgf,IAAZ,GAAmBx3G,KAAnB;AAEA;AANU,OAvE6B;AA+EzC49K,oBAAc,EAAE;AACfrqK,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,gDAAd;AAEA;AALc,OA/EyB;AAsFzC6vK,oBAAc,EAAE;AACftqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,4DAAd;AACA,eAAKwqF,MAAL,CAAYkf,OAAZ,CAAoBlzF,KAApB,GAA4BxkB,KAA5B;AAEA;AANc,OAtFyB;AA8FzC89K,qBAAe,EAAE;AAChBvqK,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,8DAAd;AACA,eAAKwqF,MAAL,CAAYkf,OAAZ,CAAoBnzF,MAApB,GAA6BvkB,KAA7B;AAEA;AANe;AA9FwB,KAA1C,E,CAwGA;;AAEAvI,UAAM,CAAC0qD,gBAAP,CAAyBsyB,eAAe,CAACrnE,SAAzC,EAAoD;AAEnD7X,YAAM,EAAE;AACPwR,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,yEAAd;AACA,iBAAO,KAAK8kB,KAAL,CAAWv9B,MAAlB;AAEA;AANM,OAF2C;AAUnDwoL,aAAO,EAAE;AACRh3K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,0EAAd;AACA,iBAAO,KAAK2mE,KAAL,KAAep2B,gBAAtB;AAEA,SANO;AAORhrC,WAAG,EAAE;AAAW;AAAc;AAE7Blc,iBAAO,CAAC2W,IAAR,CAAc,0EAAd;AACA,eAAK+mE,QAAL,CAAex2B,gBAAf;AAEA;AAZO;AAV0C,KAApD;AA2BA9mD,UAAM,CAACiiC,MAAP,CAAe+6C,eAAe,CAACrnE,SAA/B,EAA0C;AACzC4wK,gBAAU,EAAE,oBAAWh+K,KAAX,EAAmB;AAE9B3I,eAAO,CAAC2W,IAAR,CAAc,oFAAd;AACA,aAAK+mE,QAAL,CAAe/0E,KAAK,KAAK,IAAV,GAAiBu+C,gBAAjB,GAAoCD,eAAnD;AACA,eAAO,IAAP;AAEA,OAPwC;AAQzC2/H,sBAAgB,EAAE;AAAW;AAAgB;AAE5C5mL,eAAO,CAACD,KAAR,CAAe,8DAAf;AAEA,OAZwC;AAazC8mL,cAAQ,EAAE;AAAW;AAAc;AAElC7mL,eAAO,CAACD,KAAR,CAAe,yHAAf;AAEA;AAjBwC,KAA1C;AAoBAK,UAAM,CAACiiC,MAAP,CAAeq/C,cAAc,CAAC3rE,SAA9B,EAAyC;AAExC+wK,cAAQ,EAAE,kBAAWnhK,KAAX,EAAmB;AAE5B3lB,eAAO,CAAC2W,IAAR,CAAc,oEAAd;AACA,aAAKmjB,QAAL,CAAenU,KAAf;AAEA,OAPuC;AAQxCohK,kBAAY,EAAE,sBAAWnpL,IAAX,EAAiByvD,SAAjB,EAA6B;AAE1CrtD,eAAO,CAAC2W,IAAR,CAAc,4EAAd;;AAEA,YAAK,EAAI02C,SAAS,IAAIA,SAAS,CAACmwB,iBAA3B,KAAkD,EAAInwB,SAAS,IAAIA,SAAS,CAACsqC,4BAA3B,CAAvD,EAAmH;AAElH33F,iBAAO,CAAC2W,IAAR,CAAc,wEAAd;AAEA,iBAAO,KAAKqrE,YAAL,CAAmBpkF,IAAnB,EAAyB,IAAIw/E,eAAJ,CAAqBjpE,SAAS,CAAE,CAAF,CAA9B,EAAqCA,SAAS,CAAE,CAAF,CAA9C,CAAzB,CAAP;AAEA;;AAED,YAAKvW,IAAI,KAAK,OAAd,EAAwB;AAEvBoC,iBAAO,CAAC2W,IAAR,CAAc,yEAAd;AACA,eAAKmjB,QAAL,CAAeuzB,SAAf;AAEA,iBAAO,IAAP;AAEA;;AAED,eAAO,KAAK20B,YAAL,CAAmBpkF,IAAnB,EAAyByvD,SAAzB,CAAP;AAEA,OA/BuC;AAgCxC25H,iBAAW,EAAE,qBAAW11G,KAAX,EAAkB1J,KAAlB,EAAyBgzE,WAAzB,EAAuC;AAEnD,YAAKA,WAAW,KAAK3tI,SAArB,EAAiC;AAEhCjN,iBAAO,CAAC2W,IAAR,CAAc,sEAAd;AAEA;;AAED3W,eAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,aAAKurE,QAAL,CAAe5Q,KAAf,EAAsB1J,KAAtB;AAEA,OA3CuC;AA4CxCq/G,oBAAc,EAAE,0BAAY;AAE3BjnL,eAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,aAAKwrE,WAAL;AAEA,OAjDuC;AAkDxCkjG,qBAAe,EAAE,2BAAY;AAE5BrlL,eAAO,CAAC2W,IAAR,CAAc,4DAAd;AAEA,OAtDuC;AAuDxCuwK,oBAAc,EAAE,0BAAY;AAE3BlnL,eAAO,CAAC2W,IAAR,CAAc,2DAAd;AAEA,OA3DuC;AA4DxCwwK,qBAAe,EAAE,yBAAWvpL,IAAX,EAAkB;AAElCoC,eAAO,CAAC2W,IAAR,CAAc,kFAAd;AAEA,eAAO,KAAKsrE,eAAL,CAAsBrkF,IAAtB,CAAP;AAEA,OAlEuC;AAmExC0nL,iBAAW,EAAE,qBAAWhmK,MAAX,EAAoB;AAEhCtf,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAK49C,YAAL,CAAmBj1C,MAAnB,CAAP;AAEA;AAxEuC,KAAzC;AA4EAlf,UAAM,CAAC0qD,gBAAP,CAAyB42B,cAAc,CAAC3rE,SAAxC,EAAmD;AAElD8gJ,eAAS,EAAE;AACVnnJ,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAACD,KAAR,CAAe,+DAAf;AACA,iBAAO,KAAK2/E,MAAZ;AAEA;AANS,OAFuC;AAUlDo3E,aAAO,EAAE;AACRpnJ,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,iBAAO,KAAK+oE,MAAZ;AAEA;AANO;AAVyC,KAAnD;AAqBAt/E,UAAM,CAAC0qD,gBAAP,CAAyBmrG,uBAAuB,CAAClgJ,SAAjD,EAA4D;AAE3DqxK,uBAAiB,EAAE;AAClB13K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,iBAAO,KAAK60F,aAAZ;AAEA,SANiB;AAOlBtvF,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,uFAAd;AACA,eAAK60F,aAAL,GAAqB7iG,KAArB;AAEA;AAZiB;AAFwC,KAA5D;AAmBAvI,UAAM,CAAC0qD,gBAAP,CAAyB0rH,SAAS,CAACzgK,SAAnC,EAA8C;AAE7CsxK,mBAAa,EAAE;AACd33K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,0FAAd;AACA,iBAAO,KAAK2wH,MAAL,CAAYhzF,IAAZ,CAAiB6+E,SAAxB;AAEA,SANa;AAOdj3G,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0FAAd;AACA,eAAK2wH,MAAL,CAAYhzF,IAAZ,CAAiB6+E,SAAjB,GAA6BxqH,KAA7B;AAEA;AAZa;AAF8B,KAA9C;AAmBAvI,UAAM,CAAC0qD,gBAAP,CAAyBi4E,iBAAiB,CAAChtH,SAA3C,EAAsD;AAErD2wK,aAAO,EAAE;AACRh3K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,iBAAO,KAAK2mE,KAAL,KAAep2B,gBAAtB;AAEA,SANO;AAORhrC,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAK+mE,QAAL,CAAe/0E,KAAf;AAEA;AAZO;AAF4C,KAAtD;AAmBAvI,UAAM,CAACiiC,MAAP,CAAe0gG,iBAAiB,CAAChtH,SAAjC,EAA4C;AAC3C4wK,gBAAU,EAAE,oBAAWh+K,KAAX,EAAmB;AAE9B3I,eAAO,CAAC2W,IAAR,CAAc,sFAAd;AACA,aAAK+mE,QAAL,CAAe/0E,KAAK,KAAK,IAAV,GAAiBu+C,gBAAjB,GAAoCD,eAAnD;AACA,eAAO,IAAP;AAEA,OAP0C;AAQ3C4/H,cAAQ,EAAE;AAAW;AAAc;AAElC7mL,eAAO,CAACD,KAAR,CAAe,2HAAf;AAEA;AAZ0C,KAA5C,E,CAeA;;AAEAK,UAAM,CAACiiC,MAAP,CAAe6wG,qBAAqB,CAACn9H,SAArC,EAAgD;AAE/CuxK,eAAS,EAAE,qBAAY;AAEtBtnL,eAAO,CAACD,KAAR,CAAe,6DAAf;AAEA,OAN8C;AAQ/CwnL,kBAAY,EAAE,wBAAY;AAEzBvnL,eAAO,CAACD,KAAR,CAAe,gEAAf;AAEA,OAZ8C;AAc/CqzI,cAAQ,EAAE,oBAAY;AAErBpzI,eAAO,CAACD,KAAR,CAAe,4DAAf;AAEA;AAlB8C,KAAhD,E,CAsBA;;AAEAK,UAAM,CAAC0qD,gBAAP,CAAyBwrH,OAAO,CAACvgK,SAAjC,EAA4C;AAE3C2wK,aAAO,EAAE;AACRxqK,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,gFAAd;AAEA;AALO,OAFkC;AAS3C48C,cAAQ,EAAE;AACT5qD,aAAK,EAAE,iBAAY;AAElB3I,iBAAO,CAAC2W,IAAR,CAAc,mFAAd;AACA,iBAAO,IAAP;AAEA;AANQ;AATiC,KAA5C,E,CAoBA;;AAEAvW,UAAM,CAAC0qD,gBAAP,CAAyBqsB,QAAQ,CAACphE,SAAlC,EAA6C;AAE5CyxK,gBAAU,EAAE;AACX93K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AAEA,SALU;AAMXuF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,+CAAd;AAEA;AAVU,OAFgC;AAe5C8wK,cAAQ,EAAE;AACT/3K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,6CAAd;AAEA,SALQ;AAMTuF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,6CAAd;AAEA;AAVQ,OAfkC;AA4B5C+wK,aAAO,EAAE;AACRh4K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,4CAAd;AACA,iBAAO,IAAI69D,KAAJ,EAAP;AAEA;AANO,OA5BmC;AAqC5CkhF,aAAO,EAAE;AACRhmJ,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAACD,KAAR,CAAe,WAAW,KAAKwD,IAAhB,GAAuB,oEAAtC;AAEA,SALO;AAMR2Y,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,WAAW,KAAKpT,IAAhB,GAAuB,oEAArC;AACA,eAAK+zE,WAAL,GAAqB3uE,KAAK,KAAK6zC,WAA/B;AAEA;AAXO,OArCmC;AAmD5CmqE,iBAAW,EAAE;AACZj3G,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,WAAW,KAAKpT,IAAhB,GAAuB,gEAArC;AACA,iBAAO,KAAK80E,eAAZ;AAEA,SANW;AAOZn8D,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,WAAW,KAAKpT,IAAhB,GAAuB,gEAArC;AACA,eAAK80E,eAAL,GAAuB1vE,KAAvB;AAEA;AAZW;AAnD+B,KAA7C;AAoEAvI,UAAM,CAAC0qD,gBAAP,CAAyB4vD,iBAAiB,CAAC3kG,SAA3C,EAAsD;AAErD4xK,WAAK,EAAE;AACNj4K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,2FAAd;AACA,iBAAO,KAAP;AAEA,SANK;AAONuF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,0FAAd;AAEA;AAXK;AAF8C,KAAtD;AAkBAvW,UAAM,CAAC0qD,gBAAP,CAAyB+vD,oBAAoB,CAAC9kG,SAA9C,EAAyD;AAExD6xK,kBAAY,EAAE;AACbl4K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,8EAAd;AACA,iBAAO,KAAK0qF,YAAZ;AAEA,SANY;AAObnlF,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,8EAAd;AACA,eAAK0qF,YAAL,GAAoB14F,KAApB;AAEA;AAZY;AAF0C,KAAzD;AAmBAvI,UAAM,CAAC0qD,gBAAP,CAAyB+iC,cAAc,CAAC93E,SAAxC,EAAmD;AAElDq4E,iBAAW,EAAE;AACZ1+E,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,+EAAd;AACA,iBAAO,KAAKw3E,UAAL,CAAgBC,WAAvB;AAEA,SANW;AAOZlyE,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,gFAAd;AACA,eAAKw3E,UAAL,CAAgBC,WAAhB,GAA8BzlF,KAA9B;AAEA;AAZW;AAFqC,KAAnD,E,CAmBA;;AAEAvI,UAAM,CAACiiC,MAAP,CAAem3F,aAAa,CAACzjH,SAA7B,EAAwC;AAEvC8xK,iBAAW,EAAE,qBAAW73F,YAAX,EAAyBxhE,KAAzB,EAAgCyc,KAAhC,EAAuC6lD,OAAvC,EAAiD;AAE7D9wF,eAAO,CAAC2W,IAAR,CAAc,uGAAd;AACA,aAAKi6E,eAAL,CAAsBZ,YAAtB;AACA,aAAKa,KAAL,CAAYriE,KAAZ,EAAmByc,KAAnB,EAA0B6lD,OAA1B;AAEA,OARsC;AASvC/iE,aAAO,EAAE,iBAAW0sC,QAAX,EAAsB;AAE9Bz6D,eAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,aAAKggF,gBAAL,CAAuBl8B,QAAvB;AAEA,OAdsC;AAevCqtH,4BAAsB,EAAE,kCAAY;AAEnC9nL,eAAO,CAAC2W,IAAR,CAAc,2EAAd;AACA,eAAO,KAAKg6E,eAAL,EAAP;AAEA,OApBsC;AAqBvC2W,sBAAgB,EAAE,4BAAY;AAE7BtnG,eAAO,CAAC2W,IAAR,CAAc,mFAAd;AACA,eAAO,KAAKogF,YAAL,CAAkBuQ,gBAAlB,EAAP;AAEA,OA1BsC;AA2BvCygF,kBAAY,EAAE,wBAAY;AAEzB/nL,eAAO,CAAC2W,IAAR,CAAc,sEAAd;AACA,eAAO,KAAKogF,YAAL,CAAkBhe,SAAzB;AAEA,OAhCsC;AAiCvCivG,kBAAY,EAAE,wBAAY;AAEzBhoL,eAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,eAAO,KAAKyD,KAAL,CAAWJ,KAAX,EAAP;AAEA,OAtCsC;AAuCvCiuK,2BAAqB,EAAE,iCAAY;AAElCjoL,eAAO,CAAC2W,IAAR,CAAc,gGAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,mBAArB,CAAP;AAEA,OA5CsC;AA6CvCw4K,+BAAyB,EAAE,qCAAY;AAEtCloL,eAAO,CAAC2W,IAAR,CAAc,yGAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,wBAArB,CAAP;AAEA,OAlDsC;AAmDvCy4K,iCAA2B,EAAE,uCAAY;AAExCnoL,eAAO,CAAC2W,IAAR,CAAc,6GAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,0BAArB,CAAP;AAEA,OAxDsC;AAyDvC04K,mCAA6B,EAAE,yCAAY;AAE1CpoL,eAAO,CAAC2W,IAAR,CAAc,oHAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,+BAArB,CAAP;AAEA,OA9DsC;AA+DvC24K,oCAA8B,EAAE,0CAAY;AAE3CroL,eAAO,CAAC2W,IAAR,CAAc,sHAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,gCAArB,CAAP;AAEA,OApEsC;AAqEvC44K,yBAAmB,EAAE,+BAAY;AAEhCtoL,eAAO,CAAC2W,IAAR,CAAc,6FAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,kBAArB,CAAP;AAEA,OA1EsC;AA2EvC+nG,4BAAsB,EAAE,kCAAY;AAEnCz3G,eAAO,CAAC2W,IAAR,CAAc,qFAAd;AACA,eAAO,KAAKogF,YAAL,CAAkBuR,cAAzB;AAEA,OAhFsC;AAiFvCigF,6BAAuB,EAAE,mCAAY;AAEpCvoL,eAAO,CAAC2W,IAAR,CAAc,uGAAd;AACA,eAAO,KAAKw3E,UAAL,CAAgBz+E,GAAhB,CAAqB,wBAArB,CAAP;AAEA,OAtFsC;AAuFvC84K,uBAAiB,EAAE,2BAAW1qD,SAAX,EAAqB;AAEvC99H,eAAO,CAAC2W,IAAR,CAAc,qEAAd;AACA,aAAKwsG,cAAL,CAAqB2a,SAArB;AAEA,OA5FsC;AA6FvC+B,kBAAY,EAAE,wBAAY;AAEzB7/H,eAAO,CAAC2W,IAAR,CAAc,wDAAd;AAEA,OAjGsC;AAkGvC8xK,kBAAY,EAAE,wBAAY;AAEzBzoL,eAAO,CAAC2W,IAAR,CAAc,wDAAd;AAEA,OAtGsC;AAuGvC+xK,mBAAa,EAAE,yBAAY;AAE1B1oL,eAAO,CAAC2W,IAAR,CAAc,yDAAd;AAEA,OA3GsC;AA4GvCgyK,qBAAe,EAAE,2BAAY;AAE5B3oL,eAAO,CAAC2W,IAAR,CAAc,2DAAd;AAEA,OAhHsC;AAiHvCiyK,oBAAc,EAAE,0BAAY;AAE3B5oL,eAAO,CAAC2W,IAAR,CAAc,0DAAd;AAEA,OArHsC;AAsHvCkyK,sBAAgB,EAAE,4BAAY;AAE7B7oL,eAAO,CAAC2W,IAAR,CAAc,4DAAd;AAEA,OA1HsC;AA2HvCmyK,gBAAU,EAAE,sBAAY;AAEvB9oL,eAAO,CAAC2W,IAAR,CAAc,sDAAd;AAEA,OA/HsC;AAgIvCq2G,kBAAY,EAAE,wBAAY;AAEzBhtH,eAAO,CAAC2W,IAAR,CAAc,wDAAd;AAEA,OApIsC;AAqIvC22G,oBAAc,EAAE,0BAAY;AAE3BttH,eAAO,CAAC2W,IAAR,CAAc,0DAAd;AAEA,OAzIsC;AA0IvCoyK,0BAAoB,EAAE,gCAAY;AAEjC/oL,eAAO,CAAC2W,IAAR,CAAc,8EAAd;AACA,eAAO,KAAKosG,oBAAL,EAAP;AAEA;AA/IsC,KAAxC;AAmJA3iH,UAAM,CAAC0qD,gBAAP,CAAyB0uE,aAAa,CAACzjH,SAAvC,EAAkD;AAEjDoiG,sBAAgB,EAAE;AACjBzoG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAK6sG,SAAL,CAAe3lG,OAAtB;AAEA,SALgB;AAMjBsF,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,mEAAd;AACA,eAAK4lG,SAAL,CAAe3lG,OAAf,GAAyBjO,KAAzB;AAEA;AAXgB,OAF+B;AAejD2tG,mBAAa,EAAE;AACd5mG,WAAG,EAAE,eAAY;AAEhB,iBAAO,KAAK6sG,SAAL,CAAeh5G,IAAtB;AAEA,SALa;AAMd2Y,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,eAAK4lG,SAAL,CAAeh5G,IAAf,GAAsBoF,KAAtB;AAEA;AAXa,OAfkC;AA4BjDqgL,uBAAiB,EAAE;AAClBt5K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,4FAAd;AACA,iBAAO1J,SAAP;AAEA,SANiB;AAOlBiP,WAAG,EAAE;AAAW;AAAc;AAE7Blc,iBAAO,CAAC2W,IAAR,CAAc,4FAAd;AAEA;AAXiB,OA5B8B;AAyCjDm7C,aAAO,EAAE;AACRpiD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,4EAAd;AACA,iBAAO,KAAKo7C,UAAL,EAAP;AAEA;AANO,OAzCwC;AAiDjDk3H,QAAE,EAAE;AACHv5K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,kDAAd;AACA,iBAAO,KAAK85E,EAAZ;AAEA;AANE,OAjD6C;AAyDjDy4F,gBAAU,EAAE;AACXx5K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,gHAAd;AACA,iBAAO,KAAP;AAEA,SANU;AAOXuF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,gHAAd;AAEA;AAXU,OAzDqC;AAsEjDwyK,iBAAW,EAAE;AACZz5K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,+FAAd;AACA,iBAAO,KAAP;AAEA,SANW;AAOZuF,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,+FAAd;AACA,eAAK+hG,cAAL,GAAwB/vG,KAAK,KAAK,IAAZ,GAAqB28C,YAArB,GAAoCD,cAA1D;AAEA;AAZW,OAtEoC;AAoFjD+jI,2BAAqB,EAAE;AACtB15K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,+DAAd;AACA,iBAAO,GAAP;AAEA,SANqB;AAOtBuF,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,+DAAd;AAEA;AAXqB;AApF0B,KAAlD;AAoGAvW,UAAM,CAAC0qD,gBAAP,CAAyB22D,cAAc,CAAC1rG,SAAxC,EAAmD;AAElD0zG,cAAQ,EAAE;AACT/5G,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,6FAAd;AACA,iBAAO1J,SAAP;AAEA,SANQ;AAOTiP,WAAG,EAAE;AAAW;AAAiB;AAEhClc,iBAAO,CAAC2W,IAAR,CAAc,6FAAd;AAEA;AAXQ,OAFwC;AAelD0yK,wBAAkB,EAAE;AACnB35K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,uGAAd;AACA,iBAAO1J,SAAP;AAEA,SANkB;AAOnBiP,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,uGAAd;AAEA;AAXkB,OAf8B;AA4BlD2yK,uBAAiB,EAAE;AAClB55K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,sGAAd;AACA,iBAAO1J,SAAP;AAEA,SANiB;AAOlBiP,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,sGAAd;AAEA;AAXiB;AA5B+B,KAAnD;;AA4CA,aAAS4yK,qBAAT,CAAgCp8J,KAAhC,EAAuCD,MAAvC,EAA+CqJ,OAA/C,EAAyD;AAExDv2B,aAAO,CAAC2W,IAAR,CAAc,sGAAd;AACA,aAAO,IAAIo6E,qBAAJ,CAA2B5jE,KAA3B,EAAkCoJ,OAAlC,CAAP;AAEA,K,CAED;;;AAEAn2B,UAAM,CAAC0qD,gBAAP,CAAyBgL,iBAAiB,CAAC//C,SAA3C,EAAsD;AAErDu8C,WAAK,EAAE;AACN5iD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa5D,KAApB;AAEA,SANK;AAONp2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,eAAKu/C,OAAL,CAAa5D,KAAb,GAAqB3pD,KAArB;AAEA;AAZK,OAF8C;AAgBrD4pD,WAAK,EAAE;AACN7iD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa3D,KAApB;AAEA,SANK;AAONr2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,wDAAd;AACA,eAAKu/C,OAAL,CAAa3D,KAAb,GAAqB5pD,KAArB;AAEA;AAZK,OAhB8C;AA8BrD6pD,eAAS,EAAE;AACV9iD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa1D,SAApB;AAEA,SANS;AAOVt2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,eAAKu/C,OAAL,CAAa1D,SAAb,GAAyB7pD,KAAzB;AAEA;AAZS,OA9B0C;AA4CrD8pD,eAAS,EAAE;AACV/iD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAazD,SAApB;AAEA,SANS;AAOVv2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,gEAAd;AACA,eAAKu/C,OAAL,CAAazD,SAAb,GAAyB9pD,KAAzB;AAEA;AAZS,OA5C0C;AA0DrDgqD,gBAAU,EAAE;AACXjjD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,kEAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAavD,UAApB;AAEA,SANU;AAOXz2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,kEAAd;AACA,eAAKu/C,OAAL,CAAavD,UAAb,GAA0BhqD,KAA1B;AAEA;AAZU,OA1DyC;AAwErD4R,YAAM,EAAE;AACP7K,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa37C,MAApB;AAEA,SANM;AAOP2B,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKu/C,OAAL,CAAa37C,MAAb,GAAsB5R,KAAtB;AAEA;AAZM,OAxE6C;AAsFrDsqD,YAAM,EAAE;AACPvjD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAajD,MAApB;AAEA,SANM;AAOP/2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKu/C,OAAL,CAAajD,MAAb,GAAsBtqD,KAAtB;AAEA;AAZM,OAtF6C;AAoGrD+pD,YAAM,EAAE;AACPhjD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAaxD,MAApB;AAEA,SANM;AAOPx2C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,0DAAd;AACA,eAAKu/C,OAAL,CAAaxD,MAAb,GAAsB/pD,KAAtB;AAEA;AAZM,OApG6C;AAkHrDpF,UAAI,EAAE;AACLmM,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,sDAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa3yD,IAApB;AAEA,SANI;AAOL2Y,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,sDAAd;AACA,eAAKu/C,OAAL,CAAa3yD,IAAb,GAAoBoF,KAApB;AAEA;AAZI,OAlH+C;AAgIrDwqD,qBAAe,EAAE;AAChBzjD,WAAG,EAAE,eAAY;AAEhB1P,iBAAO,CAAC2W,IAAR,CAAc,4EAAd;AACA,iBAAO,KAAKu/C,OAAL,CAAa/C,eAApB;AAEA,SANe;AAOhBj3C,WAAG,EAAE,aAAWvT,KAAX,EAAmB;AAEvB3I,iBAAO,CAAC2W,IAAR,CAAc,4EAAd;AACA,eAAKu/C,OAAL,CAAa/C,eAAb,GAA+BxqD,KAA/B;AAEA;AAZe;AAhIoC,KAAtD,E,CAiJA;;AAEAvI,UAAM,CAAC0qD,gBAAP,CAAyBo1G,KAAK,CAACnqJ,SAA/B,EAA0C;AAEzC0hB,UAAI,EAAE;AACL9uB,aAAK,EAAE,eAAW+J,IAAX,EAAkB;AAExB1S,iBAAO,CAAC2W,IAAR,CAAc,wEAAd;AACA,cAAMmD,KAAK,GAAG,IAAd;AACA,cAAM0vK,WAAW,GAAG,IAAIhtB,WAAJ,EAApB;AACAgtB,qBAAW,CAAC/xJ,IAAZ,CAAkB/kB,IAAlB,EAAwB,UAAWkqB,MAAX,EAAoB;AAE3C9iB,iBAAK,CAAC0nJ,SAAN,CAAiB5kI,MAAjB;AAEA,WAJD;AAKA,iBAAO,IAAP;AAEA;AAbI,OAFmC;AAiBzCuZ,eAAS,EAAE;AACVj6B,WAAG,EAAE,eAAY;AAEhBlc,iBAAO,CAAC2W,IAAR,CAAc,gDAAd;AAEA;AALS;AAjB8B,KAA1C;;AA2BAwtJ,iBAAa,CAACpuJ,SAAd,CAAwB0zK,OAAxB,GAAkC,YAAY;AAE7CzpL,aAAO,CAAC2W,IAAR,CAAc,6DAAd;AACA,aAAO,KAAK8tJ,gBAAL,EAAP;AAEA,KALD,C,CAOA;;;AAEA10E,cAAU,CAACh6E,SAAX,CAAqB2zK,aAArB,GAAqC,UAAWh9J,QAAX,EAAqBF,KAArB,EAA6B;AAEjExsB,aAAO,CAAC2W,IAAR,CAAc,sDAAd;AACA,aAAO,KAAKwD,MAAL,CAAauS,QAAb,EAAuBF,KAAvB,CAAP;AAEA,KALD,C,CAOA;;;AAEA,QAAMm9J,aAAa,GAAG;AAErBtlG,WAAK,EAAE,eAAWulG,SAAX,EAAsB7kG,SAAtB,EAAiCkE,mBAAjC,EAAuD;AAE7DjpF,eAAO,CAAC2W,IAAR,CAAc,iIAAd;AACA,YAAI2I,MAAJ;;AAEA,YAAKylE,SAAS,CAAC/c,MAAf,EAAwB;AAEvB+c,mBAAS,CAAC7xB,gBAAV,IAA8B6xB,SAAS,CAACtxB,YAAV,EAA9B;AAEAn0C,gBAAM,GAAGylE,SAAS,CAACzlE,MAAnB;AACAylE,mBAAS,GAAGA,SAAS,CAAC5c,QAAtB;AAEA;;AAEDyhH,iBAAS,CAACvlG,KAAV,CAAiBU,SAAjB,EAA4BzlE,MAA5B,EAAoC2pE,mBAApC;AAEA,OAlBoB;AAoBrBluC,YAAM,EAAE,gBAAWotB,QAAX,EAAsB;AAE7BnoE,eAAO,CAAC2W,IAAR,CAAc,2FAAd;AACA,eAAOwxD,QAAQ,CAACptB,MAAT,EAAP;AAEA;AAzBoB,KAAtB;AA6BA2W,cAAU,CAACk3F,WAAX,GAAyB37I,SAAzB;;AAEAykD,cAAU,CAACk5F,WAAX,GAAyB,UAAW7gI,GAAX,EAAgBsoC,OAAhB,EAAyBi1F,MAAzB,EAAiCE,OAAjC,EAA2C;AAEnExnJ,aAAO,CAAC2W,IAAR,CAAc,sFAAd;AAEA,UAAM2xI,MAAM,GAAG,IAAIiD,aAAJ,EAAf;AACAjD,YAAM,CAACS,cAAP,CAAuB,KAAKH,WAA5B;AAEA,UAAM1yF,OAAO,GAAGoyF,MAAM,CAAC7wH,IAAP,CAAa1N,GAAb,EAAkBu9H,MAAlB,EAA0Br6I,SAA1B,EAAqCu6I,OAArC,CAAhB;AAEA,UAAKn1F,OAAL,EAAe6D,OAAO,CAAC7D,OAAR,GAAkBA,OAAlB;AAEf,aAAO6D,OAAP;AAEA,KAbD;;AAeAxE,cAAU,CAACm4H,eAAX,GAA6B,UAAWv+B,IAAX,EAAiBj5F,OAAjB,EAA0Bi1F,MAA1B,EAAkCE,OAAlC,EAA4C;AAExExnJ,aAAO,CAAC2W,IAAR,CAAc,8FAAd;AAEA,UAAM2xI,MAAM,GAAG,IAAI+C,iBAAJ,EAAf;AACA/C,YAAM,CAACS,cAAP,CAAuB,KAAKH,WAA5B;AAEA,UAAM1yF,OAAO,GAAGoyF,MAAM,CAAC7wH,IAAP,CAAa6zH,IAAb,EAAmBhE,MAAnB,EAA2Br6I,SAA3B,EAAsCu6I,OAAtC,CAAhB;AAEA,UAAKn1F,OAAL,EAAe6D,OAAO,CAAC7D,OAAR,GAAkBA,OAAlB;AAEf,aAAO6D,OAAP;AAEA,KAbD;;AAeAxE,cAAU,CAACo4H,qBAAX,GAAmC,YAAY;AAE9C9pL,aAAO,CAACD,KAAR,CAAe,uFAAf;AAEA,KAJD;;AAMA2xD,cAAU,CAACq4H,yBAAX,GAAuC,YAAY;AAElD/pL,aAAO,CAACD,KAAR,CAAe,2FAAf;AAEA,KAJD,C,CAMA;;;AAEA,aAASiqL,cAAT,GAA0B;AAEzBhqL,aAAO,CAACD,KAAR,CAAe,uCAAf;AAEA,K,CAED;;;AAEA,aAASkqL,UAAT,GAAsB;AAErBjqL,aAAO,CAACD,KAAR,CAAe,oCAAf;AAEA,K,CAED;;;AAEA,QAAMmqL,UAAU,GAAG;AAElBC,+BAAyB,EAAE;AAAW;AAA4B;AAEjEnqL,eAAO,CAACD,KAAR,CAAe,sEAAf;AAEA,OANiB;AAQlBqqL,YAAM,EAAE;AAAW;AAA6B;AAE/CpqL,eAAO,CAACD,KAAR,CAAe,sEAAf;AAEA,OAZiB;AAclBwmE,YAAM,EAAE;AAAW;AAA6B;AAE/CvmE,eAAO,CAACD,KAAR,CAAe,sEAAf;AAEA;AAlBiB,KAAnB,C,CAsBA;;AAEA,aAASsqL,SAAT,GAAqB;AAEpBrqL,aAAO,CAACD,KAAR,CAAe,sEAAf;AAEA;;AAED,QAAK,OAAOipE,kBAAP,KAA8B,WAAnC,EAAiD;AAEhD;AACAA,wBAAkB,CAACn3D,aAAnB,CAAkC,IAAIo3D,WAAJ,CAAiB,UAAjB,EAA6B;AAAEC,cAAM,EAAE;AACxEohH,kBAAQ,EAAE5uI;AAD8D;AAAV,OAA7B,CAAlC;AAGA;;AAEA;;;;;;;;;;;;;;;;;ACtljDD;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAMktB,WAAW,GAAG;AACzB2hH,gBAAU,EAAE;AADa,KAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYA,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,WACS,UAAA3nJ,GAAG;AAAA,aAAI7iC,OAAO,CAACD,KAAR,CAAc8iC,GAAd,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-puzzles',\r\n  templateUrl: './admin-puzzles.component.html',\r\n  styleUrls: ['./admin-puzzles.component.css']\r\n})\r\nexport class AdminPuzzlesComponent implements OnInit {\r\n\r\n  ratings: Array<RatingsArr> = [];\r\n  puzzles: Array<PuzzleArr> = [];\r\n  ratingEntry: any;\r\n  datasource: any;\r\n  show: boolean;\r\n  dataAvailable: boolean ;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      puzzleObj.shared = data[i].shared;\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          //********* ERROR HERE - THIS LOOP IS NOT ENTERED WHEN THE RATINGS VALUE IS 0  ************\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n    this.puzzleAscending();\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzlesAdmin().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  delete(puzzleID){\r\n      if(this.api.deletePuzzleAdmin(puzzleID).subscribe()){\r\n        alert(\"Puzzle deleted\");\r\n        location.reload();\r\n      }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n    this.show = true;\r\n    this.dataAvailable = false;\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n  <mat-form-field class=\"searchArea\">\r\n      <mat-label>Search</mat-label>\r\n      <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n  </mat-form-field>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n    sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n  }\">Name\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n    sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n  }\">Rating\r\n    <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n    sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n  }\">Creator\r\n    <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n    sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n  }\">Date\r\n    <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n  <h1 class=\"main-title\" >All Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <!-- <mat-icon aria-hidden=\"false\" class=\"infoIcon\">info_outline</mat-icon> -->\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Created by:</strong> {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Shared:</strong> {{puzzle.shared}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"delete(puzzle.id)\">DELETE PUZZLE</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-ratings',\r\n  templateUrl: './admin-ratings.component.html',\r\n  styleUrls: ['./admin-ratings.component.css']\r\n})\r\nexport class AdminRatingsComponent implements OnInit {\r\n\r\n  ratingList: any;\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  show: boolean;\r\n\r\n  datasource: any;\r\n  sortedBy: any = true;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  getPuzzleRatings() {\r\n    this.api.getAllRatingsAdmin().subscribe( data => {\r\n      this.ratingList = data;\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      console.log(this.ratingList);\r\n      this.show = false ;\r\n      this.datasource = new MatTableDataSource(this.ratingList);\r\n      this.puzzleAscending();\r\n    }\r\n    )\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.testPuzzle.name.toLowerCase().includes(filter) || data.testUser.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.ratingList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  delete(rateID){\r\n    if(this.api.deleteRatingAdmin(rateID).subscribe()){\r\n      alert(\"Rating deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getPuzzleRatings();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Rater\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" >\r\n    <h1 class=\"main-title\" >All Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.testPuzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rating: </strong>{{rating.rating}}/5</mat-card-subtitle>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rater: </strong>{{rating.testUser.name}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{rating.testPuzzle.name}}</strong></mat-card-title>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"delete(rating.id)\">DELETE RATING</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\n\r\n@Component({\r\n  selector: 'app-admin-user',\r\n  templateUrl: './admin-user.component.html',\r\n  styleUrls: ['./admin-user.component.css']\r\n})\r\nexport class AdminUserComponent implements OnInit {\r\n\r\n  userList: any;\r\n  show: boolean;\r\n  totalNumberOfUsers: number;\r\n  pageSize: number = 12;\r\n  startIndex:number = 0;\r\n  endIndex: number = 12;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n  datasource: any;\r\n\r\n  pageEvent: PageEvent;\r\n  sortedBy: any = \"\";\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfUsers){\r\n      this.endIndex = this.totalNumberOfUsers\r\n    }\r\n    this.userList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.username.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfUsers = this.datasource.filteredData.length;\r\n  }\r\n\r\n  getUsers(){\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.totalNumberOfUsers = Object.keys(data).length;\r\n      this.userList = data;\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userList);\r\n      this.puzzleAscending();\r\n    });\r\n  }\r\n\r\n  delete(user){\r\n    if(this.api.deleteUser(user).subscribe()){\r\n      alert(\"User deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getUsers();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container-fluid\" >\r\n    <h1>All Users</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n      <div class=\"content\" *ngFor=\"let user of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n        <mat-card>\r\n            <mat-card-title><strong>{{user.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Email: {{user.username}}</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button id=\"delete\" (click)=\"delete(user.id)\">DELETE USER</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfUsers\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component'\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component'\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component'\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { ChallengesComponent } from './pages/challenges/challenges.component';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {path: 'index', component: IndexComponent},\r\n  {path: 'signup', component: SignupComponent},\r\n  {path: 'login', component: LoginComponent},\r\n  {path: 'profile', component: ProfileComponent},\r\n  {path: 'profilePuzzles', component: ProfilePuzzlesComponent},\r\n  {path: 'profileRatings', component: ProfileRatingsComponent},\r\n  {path: 'profileSolvedPuzzle', component: ProfileSolvedPuzzlesComponent},\r\n  {path: 'about', component: AboutComponent},\r\n  {path: 'challenges', component: ChallengesComponent},\r\n  {path: 'ratings', component: RatingsComponent},\r\n  {path: 'resetPassword', component: ResetPasswordComponent},\r\n  {path: 'resetSuccess', component: ResetSuccessComponent},\r\n  {path: 'create', component: CreateComponent},\r\n  {path: 'aicreate', component: AICreateComponent},\r\n  {path: 'adminUser', component: AdminUserComponent},\r\n  {path: 'adminRatings', component: AdminRatingsComponent},\r\n  {path: 'adminPuzzles', component: AdminPuzzlesComponent},\r\n  {path: 'leaderboard', component: LeaderboardComponent},\r\n\r\n\r\n    // otherwise redirect to home\r\n  { path: '', redirectTo: '/index', pathMatch: 'full' },\r\n  { path: '**', component: IndexComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'prometheus-puzzles';\r\n  \r\n  constructor() {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {NgxPaginationModule} from 'ngx-pagination';\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n//\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport { MatToolbarModule} from '@angular/material/toolbar';\r\nimport { MatTableModule} from '@angular/material/table';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatGridListModule } from '@angular/material/grid-list'\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\r\nimport {MatSortModule} from '@angular/material/sort';\r\n\r\n\r\n//pages\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { NavbarComponent } from './navbar/navbar.component';\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { RateDialogComponent } from './rate-dialog/rate-dialog.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component';\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport { SolveDialogComponent } from './dialogs/solve-dialog/solve-dialog.component';\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component';\r\nimport { MenuComponent } from './dialogs/menu/menu.component';\r\nimport { CreateDialogComponent } from './dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from './dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from './dialogs/profile-update-dialog/profile-update-dialog.component';\r\nimport { SuccessfulSolveComponent } from './dialogs/successful-solve/successful-solve.component';\r\nimport { EmailPassComponent } from './dialogs/email-pass/email-pass.component';\r\nimport { FooterComponent } from './pages/footer/footer.component';\r\nimport { ProfilePuzzlesDialogComponent } from './dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { AboutComponent } from './pages/about/about.component';\r\nimport { ChallengesComponent } from './pages/challenges/challenges.component';\r\nimport { HintComponent } from './dialogs/hint/hint.component';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    IndexComponent,\r\n    SignupComponent,\r\n    LoginComponent,\r\n    ProfileComponent,\r\n    RatingsComponent,\r\n    NavbarComponent,\r\n    ResetPasswordComponent,\r\n    ResetSuccessComponent,\r\n    CreateComponent,\r\n    RateDialogComponent,\r\n    ProfilePuzzlesComponent,\r\n    ProfileRatingsComponent,\r\n    AICreateComponent,\r\n    AdminUserComponent,\r\n    AdminRatingsComponent,\r\n    AdminPuzzlesComponent,\r\n    SolveDialogComponent,\r\n    ProfileSolvedPuzzlesComponent,\r\n    MenuComponent,\r\n    CreateDialogComponent,\r\n    LoginDialogComponent,\r\n    ProfileUpdateDialogComponent,\r\n    SuccessfulSolveComponent,\r\n    EmailPassComponent,\r\n    FooterComponent,\r\n    ProfilePuzzlesDialogComponent,\r\n    AboutComponent,\r\n    ChallengesComponent,\r\n    HintComponent,\r\n    LeaderboardComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    NgxPaginationModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    FlexLayoutModule,\r\n    MatButtonModule,\r\n    MatDividerModule,\r\n    MatIconModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule,\r\n    MatToolbarModule,\r\n    MatTableModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    MatSortModule,\r\n    MatInputModule, MatListModule, MatPaginatorModule, MatProgressBarModule,\r\n    MatCardModule, MatFormFieldModule, MatDialogModule, MatGridListModule, MatRadioModule, ReactiveFormsModule,\r\n    MDBBootstrapModule.forRoot(),\r\n  ],\r\n  entryComponents: [RateDialogComponent],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-create-dialog',\r\n  templateUrl: './create-dialog.component.html',\r\n  styleUrls: ['./create-dialog.component.css']\r\n})\r\nexport class CreateDialogComponent implements OnInit {\r\n  \r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/profilePuzzles']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>Successfully Created</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-email-pass',\r\n  templateUrl: './email-pass.component.html',\r\n  styleUrls: ['./email-pass.component.css']\r\n})\r\nexport class EmailPassComponent implements OnInit {\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<EmailPassComponent>) { }\r\n\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ]\r\n  }\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  submit(form){\r\n    this.input = form.email;\r\n      this.dialogRef.close(`${form.email}`);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      email: ['', [Validators.email, Validators.required]]\r\n    })\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Enter email address. </h1>\r\n  <h3>Email with reset password confirmation will be sent.</h3>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"email\" placeholder=\"Enter Email\" ngControl=\"email\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.email\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('email').hasError(error.type) && (form.get('email').dirty || form.get('email').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { SolveDialogComponent } from '../solve-dialog/solve-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-hint',\r\n  templateUrl: './hint.component.html',\r\n  styleUrls: ['./hint.component.css']\r\n})\r\nexport class HintComponent implements OnInit {\r\n\r\n  fromPage: any;\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog){}\r\n\r\n    easy(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent,\r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 5 } \r\n        });\r\n    }\r\n  \r\n    med(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent, \r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 3 } \r\n        });\r\n    }\r\n  \r\n    hard(){\r\n      this.solveDialog = this.dialog.open(SolveDialogComponent, \r\n        { \r\n          disableClose: true, hasBackdrop: true,\r\n          data: { pageValue: 0 } \r\n        });\r\n    }\r\n\r\n  ngOnInit(): void {}\r\n\r\n}\r\n","<div mat-dialog-content><h2>Please Select Game Difficulty</h2></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"easy()\">Novice (5 hints)</button>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"med()\">Intermediate(3 hints)</button>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"hard()\">Expert(No hints)</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login-dialog',\r\n  templateUrl: './login-dialog.component.html',\r\n  styleUrls: ['./login-dialog.component.css']\r\n})\r\nexport class LoginDialogComponent implements OnInit {\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>You are not logged in. Please login</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Puzzle Rating Successful</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles-dialog',\r\n  templateUrl: './profile-puzzles-dialog.component.html',\r\n  styleUrls: ['./profile-puzzles-dialog.component.css']\r\n})\r\nexport class ProfilePuzzlesDialogComponent implements OnInit {\r\n\r\n  fromPage: string;\r\n\r\n  constructor( public dialogRef: MatDialogRef<ProfilePuzzlesDialogComponent>, \r\n              @Optional() @Inject(MAT_DIALOG_DATA) public data: any) \r\n  {\r\n    this.fromPage = data.pageValue;\r\n  }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>{{fromPage}}</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-profile-update-dialog',\r\n  templateUrl: './profile-update-dialog.component.html',\r\n  styleUrls: ['./profile-update-dialog.component.css']\r\n})\r\nexport class ProfileUpdateDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Profile Successfully Updated</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","<div class=\"solver\" id=\"solverDialogDiv\">\r\n  <!-- <div class=\"headings\"> -->\r\n    <h3 *ngIf=\"!expertMode\" mat-dialog-title><strong>Instructions:</strong>Drag Puzzle Pieces onto the canvas to solve the puzzle</h3>\r\n    <h3 *ngIf=\"expertMode\" mat-dialog-title><strong>Instructions:</strong> Click and drag pieces into their correct positions. Double click a piece to rotate it!</h3>\r\n  <!-- </div> -->\r\n\r\n    <div id=\"solvedDiv\" class=\"modal\">\r\n        <!-- Modal content -->\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\">&times;</span>\r\n          <p>Puzzle Successfully Solved</p>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    <div id=\"solverContainer\"></div>\r\n\r\n    <div mat-dialog-actions>\r\n      <button class=\"btns\" mat-button mat-dialog-close id=\"closeSolverDialogButton\">Close</button>\r\n      <label hidden=\"true\" id=\"difficultyLevel\">{{numHints}}</label>\r\n      <button mat-button *ngIf=\"showHintButton\" class=\"btns\" (click)=\"showImage()\">Hint {{fromPage}}(remaining)</button><label></label>\r\n  </div>\r\n\r\n  <div  class=\"modal\" [ngStyle]=\"{'display':display}\">\r\n    <div id=\"cc\" class=\"modal-content\">\r\n      <img id=\"pic\" src=\"{{hintImage}}\">\r\n    </div>\r\n  </div> \r\n  \r\n</div>\r\n","\r\nimport { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { initializeDataSolve } from 'src/assets/js/solvePuzzle.js';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-solve-dialog',\r\n  templateUrl: './solve-dialog.component.html',\r\n  styleUrls: ['./solve-dialog.component.css']\r\n})\r\nexport class SolveDialogComponent implements OnInit {\r\n\r\n  token: any;\r\n\r\n  fromPage: number;\r\n  showHintButton: boolean = false;\r\n  showMe:boolean = false;\r\n  hintImage: any;\r\n\r\n  numHints: number;\r\n\r\n  display = \"none\";\r\n\r\n  expertMode:boolean = false;\r\n\r\n  hintDialog: MatDialogRef<HintComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<SolveDialogComponent>, \r\n    @Optional() @Inject(MAT_DIALOG_DATA) public data: any){\r\n      this.fromPage = data.pageValue;\r\n    }\r\n\r\n    async delay(ms: number) {\r\n      await new Promise(resolve => setTimeout(()=>resolve(), ms))\r\n      .then( () => { console.log(\"fired\"); });\r\n    }\r\n\r\n    showImage(){\r\n      let puzzleID = localStorage.getItem('solvingPuzzleID');\r\n      if(this.fromPage > 0)\r\n      {\r\n        this.fromPage = this.fromPage - 1;\r\n        this.api.getAllPuzzleByID(parseInt(puzzleID)).subscribe( data => {\r\n          // this.hintDialog = this.dialog.open(HintComponent, { \r\n          //   disableClose: true, hasBackdrop: true,\r\n          //   data: { pageValue:  data[0].image} \r\n          // });\r\n          this.hintImage = data[0].image;\r\n          // this.showMe = true;\r\n          // this.delay(2000).then( () =>{\r\n          //   this.showMe = false;\r\n          // });\r\n          this.display = 'block';\r\n          this.delay(2500).then( () =>{\r\n              this.display = 'none';\r\n            });\r\n        })\r\n      }\r\n    }\r\n\r\n    handleEvent(event: any){\r\n      if(event == stop()){\r\n        alert(\"Done\")\r\n      }\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token =  localStorage.getItem('token');\r\n    localStorage.setItem('numHints', \"\" + this.fromPage);\r\n    initializeDataSolve();\r\n\r\n    if(this.fromPage > 5){\r\n      this.showMe = true;\r\n      if(this.fromPage == 25)\r\n      {\r\n        this.expertMode = true;\r\n        this.numHints = 0;\r\n        this.showHintButton = false;\r\n      }\r\n    }\r\n    else{\r\n      this.numHints = this.fromPage;\r\n      if(this.numHints == 0){\r\n        this.expertMode = true;\r\n        this.showHintButton = false;\r\n      }\r\n      else{\r\n        this.showHintButton = true;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-successful-solve',\r\n  templateUrl: './successful-solve.component.html',\r\n  styleUrls: ['./successful-solve.component.css']\r\n})\r\nexport class SuccessfulSolveComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>successful-solve works!</p>\r\n","import { Component, OnInit} from '@angular/core';\r\n//import { getName } from '.././pages/login/login.component';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n  name:string;\r\n  admin:boolean;\r\n  token: any;\r\n\r\n  constructor(private router: Router) { }\r\n\r\n  logout(){\r\n    localStorage.removeItem('token');\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name = localStorage.getItem('name');\r\n    this.token = localStorage.getItem('token');\r\n    if (this.token == \"CgOOiUKmqqPyOlhFjDZth\"){\r\n      this.admin = true; \r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n<div class=\"logo\">\r\n  <img class=\"navimg\" src=\"assets/images/logo_nav.png\" routerLink=\"/ratings\">\r\n</div>\r\n  <nav class=\"navbar navbar-expand-sm\" id=\"navCustom\">\r\n\r\n    <span class=\"left\"><button id=\"burger\" class=\"navbar-toggler hidden-sm hidden-md hidden-lg hidden-xl\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent1\"\r\n    aria-controls=\"navbarSupportedContent1\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span><i\r\n        class=\"fa fa-bars fa-2x\"></i></span></button></span>\r\n\r\n    <span class=\"collapse navbar-collapse left\" id=\"navbarSupportedContent1\">\r\n        <ul class=\"nav navbar-nav mr-auto\" routerLinkActive=\"active\">\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/ratings\">View</a>\r\n            </li>\r\n            <li class=\"nav-item dropdown\" >\r\n              <a  role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Create<div class=\"caret\"></div></a>\r\n               <div  class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/create\" >Manual</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/aicreate\" >AI</a><br>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Profile<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/profile\">My Details</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profilePuzzles\">My Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileRatings\">My Ratings</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileSolvedPuzzle\">Solved Puzzles</a>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/about\">About Our AI</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/challenges\">Challenges</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/leaderboard\">Leaderboard</a>\r\n            </li>\r\n            <li *ngIf=\"admin\" class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Admin<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminUser\">All Users</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminPuzzles\">All Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminRatings\">All Ratings</a>\r\n               </div>\r\n            </li>\r\n        </ul>\r\n    </span>\r\n    <span class=\"navbar-text\">\r\n        Hello, {{name}}\r\n        <a id=\"logout\" (click)=\"logout()\">Logout</a>\r\n    </span>\r\n  </nav>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-about',\r\n  templateUrl: './about.component.html',\r\n  styleUrls: ['./about.component.css']\r\n})\r\nexport class AboutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<div class=\"container-fluid\">\r\n    <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\"> \r\n     <mat-card class=\"content\">\r\n       <mat-card-header>\r\n       </mat-card-header>\r\n      <mat-card-content>\r\n        <div id=\"topContent\">\r\n            <mat-card-title >Introducing Prometheus: The Artificial \"Brain\" behind Prometheus' Puzzles</mat-card-title>\r\n            <div id=\"topText\">\r\n                Prometheus is our AI (short for artificial intelligence), and Prometheus is in-charge of generating all the wonderful puzzles hosted on this site - hence the name \"Prometheus' Puzzles\". Prometheus is a genetic algorithm and it works by burrowing the concept of Darwin's Theory of Evolution. In simple terms, Prometheus generates a set of puzzles (referred to as a generation), and through multiple iterations Prometheus decides which puzzles best fit certain criteria. These puzzles that are selected by Prometheus are then allowed to contribute to the next generation of puzzles. This \"evolution\" is repeated until a generation Prometheus deems worthy is produced, and these are the puzzles that are shown at the end.\r\n            </div>\r\n        </div>\r\n        <!-- <hr> -->\r\n        <br>\r\n        <div id=\"bottomContent\">\r\n            <mat-card-title >How does Prometheus work?</mat-card-title>\r\n              Prometheus is a genetic algorithm - it essentially finds solutions by firstly creating an initial set of puzzles and evolving successive generations which are fitter than said initial set. And this process of evolution is emulated through the use of the reproduction, mutation, and crossover operations. <br><br>\r\n\r\n            <mat-card-title >Reproduction</mat-card-title>\r\n              In this operation, the fittest puzzle of the current generation is selected to proceed into the next. This is only done once in every generation. <br><br>\r\n            \r\n            <mat-card-title >Mutation</mat-card-title>\r\n              For this operation, the puzzle selected changes by having one of the sites shift in a random direction by a random offset. This is demonstrated in the following figure: <br><br>\r\n              <img class=\"mediumImage\" src=\"assets/images/mutation.png\"> <br><br>\r\n\r\n            <mat-card-title >Crossover</mat-card-title>\r\n              For this operation, two puzzles are selected and they each exchange of their respective sites with the other. This operation produces two new offspring, which are then mutated and become part of the next generation. This is shown in the following diagram:<br><br>\r\n              <img class=\"largeImage\" src=\"assets/images/crossover.png\"><br><br>\r\n\r\n            <mat-card-title >How does Prometheus select puzzles?</mat-card-title>\r\n              Prometheus selects puzzles by conducting tournament selection, wherein puzzles compete and the fittest one wins. Prometheus will randomly select a few puzzles from the generation and then run the tournament. <br><br>\r\n\r\n            <mat-card-title >How is a puzzle's fitness determined?</mat-card-title>\r\n              A puzzles' fitness is determined by how well the puzzle fits the criteria established by the user. The criteria is set up in the algorithm parameters section by the user, where the user will input the number of pieces assigned to each of the three groups: <br><br>\r\n              <img src=\"assets/images/parameters_number_per_group.png\"><br><br>\r\n              And afterwards the user will decide how much of the board space should belong to each group: <br><br>\r\n              <img src=\"assets/images/parameters_distribution.png\"><br><br>\r\n              Now the criteria from which Prometheus evaluates puzzles is set. Prometheus quantifies a puzzle's fitness by how close the board space distribution is to the user's specifications. Board space occupied by a piece in measured by the surface area (in piexls) of said piece. <br><br>\r\n\r\n              As a simple example, take a look at the previous two images of the algorithm parameters section. Notice that for group 3, there is only 1 puzzle piece and we have given it 55% of the board space. One of the results we get looks like this (where the label correspondes to the group the piece belongs to): <br><br>\r\n              <img src=\"assets/images/parameters_result.png\"><br><br>\r\n\r\n              And that's it! That is how Prometheus works it's magic. \r\n\r\n            <!-- <div id=\"bottomText\">\r\n              <div class=\"left\">\r\n               Our AI Puzzle Generator makes use of a Genetic Algorithm (GA). Blah blah Blah\r\n               <br>\r\n               <img src=\"assets/images/Capture.PNG\">\r\n              </div>\r\n              <div class=\"right\"> \r\n                Bleh bleh bleh<br>\r\n               <img src=\"assets/images/Capture2.PNG\"/>\r\n              </div>\r\n            </div> -->\r\n        </div>\r\n      </mat-card-content>\r\n    </mat-card>\r\n    </div>\r\n  </div>\r\n \r\n  <app-footer class=\"footer\"></app-footer>\r\n ","import { Component, Input, OnInit } from '@angular/core';\r\nimport { initializeDataAI } from 'src/assets/js/aiCreation.js';\r\nimport { Router } from '@angular/router';\r\nimport { Colors, Color } from 'angular-bootstrap-md';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-aicreate',\r\n  templateUrl: './aicreate.component.html',\r\n  styleUrls: ['./aicreate.component.css']\r\n})\r\nexport class AICreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  col: Color;\r\n  color: Colors;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>\r\n\r\n  @Input() OnlyNumber: boolean;\r\n  \r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n  \tinitializeDataAI();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div>\r\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\r\n <mat-icon class=\"fish\" id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\r\n</div>\r\n\r\n\r\n <div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\r\n   aria-hidden=\"true\">\r\n   <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n     <div class=\"modal-content\">\r\n       <div class=\"modal-body mb-0 p-0\">\r\n         <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n           <iframe class=\"embed-responsive-item\" src=\"../../assets/AIFinal.mp4\" allowfullscreen></iframe>\r\n         </div>\r\n       </div>\r\n       <div class=\"modal-footer justify-content-center\">\r\n         <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\r\n       </div>\r\n     </div>\r\n   </div>\r\n </div>\r\n\r\n <div class=\"container-fluid\">\r\n   <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n     <mat-card class=\"puzzleOptions\">\r\n       <mat-card-header>\r\n         <mat-card-title class=\"titleLabel\">Algorithm Parameters</mat-card-title>\r\n       </mat-card-header>\r\n       <mat-card-content>\r\n         <div id=\"inputContainer\">\r\n           <!-- <label>Maximum of puzzle pieces - 20</label><br>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of puzzle pieces</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"3\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox\">\r\n           </mat-form-field> -->\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 1 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox1\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 2 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox2\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 3 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox3\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <br><label>Select Puzzle Type</label><br>\r\n           <mat-radio-group class=\"radio-group\">\r\n             <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButtonAI\" > Euclidian </mat-radio-button>\r\n             <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButtonAI\" > Manhattan </mat-radio-button>\r\n           </mat-radio-group>\r\n           <button mat-raised-button class=\"btns\" id=\"nextButton\">Next</button>\r\n           <button mat-raised-button class=\"btns\" id=\"generatePuzzleButtonAI\">Generate Puzzle</button><br>\r\n         </div>\r\n       </mat-card-content>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"creationCard\">\r\n      <mat-card-header>\r\n        <mat-card-title >Create a puzzle</mat-card-title>\r\n      </mat-card-header>\r\n     <mat-card-content>\r\n       <div id=\"containerAI\">\r\n       </div>\r\n       <div id=\"progressBarDiv\">\r\n        <mat-progress-bar mode=\"indeterminate\" id=\"progressBar\"></mat-progress-bar>\r\n       </div>\r\n       <br>\r\n       <div id=\"puzzleControlsDiv\">\r\n        <button mat-raised-button class=\"btns\" id=\"previousPuzzleButton\">Previous Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"nextPuzzleButton\">Next Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"generate3DButtonAI\">Generate 3D</button>\r\n       </div>\r\n     </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"saveOptions\">\r\n     <mat-card-header>\r\n       <mat-card-title class=\"titleLabel\">Saving Options</mat-card-title>\r\n     </mat-card-header>\r\n     <mat-card-content class=\"matContentC\">\r\n       <button mat-raised-button class=\"btns\" id=\"paintBrushButton\">\r\n         <mat-icon id=\"paintBrushButtonIcon\">brush</mat-icon><input type=\"color\" id=\"paintBrushColorInputAI\" class=\"\">\r\n       </button><br>\r\n       <label id=\"colorPalleteLabel\">Select a color-palette:</label><br>\r\n       <mat-radio-group>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\r\n       </mat-radio-group>\r\n       <button mat-raised-button class=\"btns\" id=\"randomizeColorsButtonAI\">Randomize Colors</button>\r\n       <br><br>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Puzzle Name</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Short description</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <!-- <label id=\"\">Name: </label><br><input [(ngModel)]=\"name\" type=\"text\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\"><br> -->\r\n       <!-- <label id=\"\">Short Description: </label><br><input [(ngModel)]=\"description\" type=\"text\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\"><br> -->\r\n       <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\r\n       <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" (click)=\"success()\">Save</button>\r\n       <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" routerLink=\"/profilePuzzles\">Save</button> -->\r\n     </mat-card-content>\r\n   </mat-card>\r\n   </div>\r\n </div>\r\n\r\n <app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { APIService } from 'src/app/services/api.service';\r\n\r\n@Component({\r\n  selector: 'app-challenges',\r\n  templateUrl: './challenges.component.html',\r\n  styleUrls: ['./challenges.component.css']\r\n})\r\nexport class ChallengesComponent implements OnInit {\r\n\r\n  date: Date = new Date();  \r\n  day: any = this.date.getDay();\r\n  datee: any = this.date.getDate();\r\n  month: any = this.date.getMonth();\r\n  year: any = this.date.getFullYear();\r\n  months: any[] = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\n  actualMonth: any = this.months[this.month];\r\n  xppoints: number;\r\n\r\n  token: any;\r\n  solveDialog: MatDialogRef<SolveDialogComponent>\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  timeDif:any; timeDur:any; timeID:any; timeImage:any; timeName:any;\r\n  solveDif:any; solveHints:any; solveID:any; solveImage: any; solveName:any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n   localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n      disableClose: true, hasBackdrop: true,\r\n      data: { pageValue:  this.solveHints} \r\n    });\r\n  }\r\n\r\n  openSolveDialogTime(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n     this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n       disableClose: true, hasBackdrop: true,\r\n       data: { pageValue:  this.timeDur} \r\n     });\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n    this.token = localStorage.getItem('token');\r\n    this.api.getChallenges().subscribe( data => {\r\n      console.log(\"Got da data\", data);\r\n      this.timeDif = data[0].timeDifficulty;\r\n      this.timeID = data[0].timeID;\r\n      this.timeImage = data[0].timeImage;\r\n      this.timeName = data[0].timeName;\r\n      if(this.timeDif == \"Novice\"){ this.timeDur = 90; this.xppoints = 10;}\r\n      else if(this.timeDif == \"Intermediate\"){ this.timeDur = 45; this.xppoints = 30;}\r\n      else if (this.timeDif == \"Expert\"){ this.timeDur = 25; this.xppoints = 50;}\r\n      //\r\n      this.solveDif = data[1].solveDifficulty;\r\n      this.solveID = data[1].solveID;\r\n      this.solveImage = data[1].solveImage;\r\n      this.solveName = data[1].solveName;\r\n      if(this.solveDif == \"Novice\"){ this.solveHints = 5; this.xppoints = 10;}\r\n      else if(this.solveDif == \"Intermediate\"){ this.solveHints = 3; this.xppoints = 30;}\r\n      else if(this.solveDif == \"Expert\"){ this.solveHints = 0; this.xppoints = 50;}\r\n    })\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n <div class=\"container-fluid\">\r\n   <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n\r\n    <mat-card class=\"date\">\r\n        {{datee}}<br>{{actualMonth}}<br>{{year}}\r\n    </mat-card>\r\n\r\n     <!-- <mat-card class=\"chall1\">\r\n       <mat-card-header>\r\n         <mat-card-title class=\"\">Solve Challenge</mat-card-title>\r\n       </mat-card-header>\r\n       <mat-card-content>\r\n       </mat-card-content>\r\n    </mat-card> -->\r\n\r\n    <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Solve Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"{{solveImage}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Number of Given Hints: {{solveHints}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Difficulty: {{solveDif}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Earn: {{xppoints}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <mat-card-title><strong>{{solveName}}</strong></mat-card-title>\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(solveID)\">Solve</button>\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n      <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Time Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"{{timeImage}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Solve in: {{timeDur}} seconds</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Difficulty: {{timeDif}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Earn: {{xppoints}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <mat-card-title><strong>{{timeName}}</strong></mat-card-title>\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialogTime(timeID)\">Solve</button>\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n      <mat-card class=\"content\" >\r\n        <mat-card-title><strong>Bonus Challenge</strong></mat-card-title>\r\n        <!-- <mat-card-title class=\"\">Solve Challenge</mat-card-title> -->\r\n        <div class=\"content-overlay\"></div>\r\n        <img class=\"content-image\" src=\"\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Solve in: </mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Difficulty:</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\">Earn: {{xppoints}} XP</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n          <!-- <mat-card-title><strong>Puzzle Name</strong></mat-card-title> -->\r\n          <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n          <mat-card-actions class=\"puzzleActions\">\r\n            <!-- <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog()\">Solve</button> -->\r\n          </mat-card-actions>\r\n      </mat-card>\r\n\r\n    <!-- <mat-card class=\"chall2\">\r\n      <mat-card-header>\r\n        <mat-card-title >Time Challenge</mat-card-title>\r\n      </mat-card-header>\r\n     <mat-card-content>\r\n     </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"chall3\">\r\n     <mat-card-header>\r\n       <mat-card-title class=\"titleLabel\">Bonus Challenge</mat-card-title>\r\n     </mat-card-header>\r\n     <mat-card-content class=\"\">\r\n       </mat-card-content>\r\n   </mat-card> -->\r\n   </div>\r\n </div>\r\n\r\n <app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { initializeData } from 'src/assets/js/manualCreation.js';\r\nimport { Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-create',\r\n  templateUrl: './create.component.html',\r\n  styleUrls: ['./create.component.css']\r\n})\r\nexport class CreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    initializeData();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\n<div>\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\n <mat-icon id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\n</div>\n\n<div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\n  aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-body mb-0 p-0\">\n        <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\n          <iframe class=\"embed-responsive-item\" src=\"../../assets/ManualFinal.mp4\" allowfullscreen></iframe>\n        </div>\n      </div>\n      <div class=\"modal-footer justify-content-center\">\n        <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"container-fluid\">\n  <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\n    <mat-card class=\"puzzleType\">\n      <mat-card-header>\n        <mat-card-title class=\"titleLabel\">Select Puzzle Type</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <mat-radio-group class=\"radio-group\">\n          <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButton\" > Euclidian </mat-radio-button>\n          <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButton\" > Manhattan </mat-radio-button>\n        </mat-radio-group>\n      </mat-card-content>\n   </mat-card>\n\n   <mat-card class=\"creationCard\">\n    <mat-card-header>\n      <mat-card-title class=\"titleLabel\">Create puzzle by selecting points on the canvas</mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      <button mat-raised-button class=\"btns\" id=\"deletePointButton\">\n        <mat-icon id=\"deletePointButtonIcon\">delete</mat-icon><mat-icon id=\"editPointButtonIcon\">edit</mat-icon> Delete Mode\n      </button>\n      <button mat-raised-button class=\"btns\" id=\"paintBrushButton\">\n        <mat-icon id=\"paintBrushButtonIcon\">brush</mat-icon><input type=\"color\" id=\"paintBrushColorInput\" class=\"\">\n      </button>\n      <div id=\"container\">\n      </div>\n    </mat-card-content>\n    <mat-card-actions>\n      <button mat-raised-button class=\"btns\" id=\"generatePuzzleButton\">Generate Puzzle</button>\n      <button mat-raised-button class=\"btns\" id=\"generate3DButton\">Generate 3D</button>\n    </mat-card-actions>\n  </mat-card>\n\n  <mat-card class=\"saveOptions\">\n    <mat-card-header>\n      <mat-card-title id=\"saveHeading\">Saving Options</mat-card-title>\n    </mat-card-header>\n\n    <mat-card-content class=\"matContentC\">\n      <label class=\"titleLabel\" id=\"colorPalleteLabel\">Select a color-palette:</label><br>\n      <mat-radio-group class=\"colRadioBtns\">\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\n      </mat-radio-group>\n      <button mat-raised-button class=\"btns\" id=\"randomizeColorsButton\">Randomize Colors</button>\n      <br><br>\n\n      <mat-form-field class=\"names\" appearance=\"outline\">\n        <mat-label>Puzzle Name</mat-label>\n        <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\">\n      </mat-form-field>\n\n      <mat-form-field class=\"names\" appearance=\"outline\">\n        <mat-label>Short description</mat-label>\n        <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\">\n      </mat-form-field>\n\n      <!-- <label id=\"\">Name: </label><br><input type=\"text\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\"><br> -->\n      <!-- <label id=\"\">Short Description: </label><br><input type=\"text\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\"><br> -->\n      <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\n      <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" (click)=\"success()\">Save</button>\n      <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" routerLink=\"/profilePuzzles\">Save</button> -->\n    </mat-card-content>\n  </mat-card>\n  </div>\n</div>\n\n<app-footer class=\"footer\"></app-footer>\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"footer\">\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <div class=\"text\"> \r\n            Copyright 2020 - Prometheus Puzzles &nbsp; | &nbsp; team.prometheus@willowmoore.co.za\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.css']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<header id=\"indexNav\">\r\n    <nav class=\"links\">\r\n      <ul>\r\n        <li id=\"btnLink\"><a href=\"/signup\" mat-button class=\"indexBtn\">Sign Up</a></li>\r\n        <li id=\"btnLink\"><a href=\"/login\" mat-button class=\"indexBtn\">Login</a></li>\r\n      </ul>\r\n    </nav>\r\n</header>\r\n<div class=\"container\" id=\"second\">\r\n        <!-- <h1 class=\"main-title\"><strong>CREATE | SOLVE | PRINT | RATE</strong></h1>\r\n        <h2 class=\"subtitle\"><i>Sign up or login to start creating puzzles that can be solved, printed and rated.</i></h2> -->\r\n        <picture>\r\n          <source media=\"(max-width: 768px)\" srcset=\"assets/images/indexSml.jpg\">\r\n          <img class=\"splashImage\" src=\"assets/images/newsplash.jpg\">\r\n        </picture>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div>\r\n     -->\r\n\r\n    <!-- <div class=\"content\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"descText\">\r\n            <mat-card fxFlex=\"90\">\r\n                    <p>Puzzles have been a hobby of many people over the centuries, coming in various\r\n                    forms which have various ways of solving. Puzzles have played a role in peoples\r\n                    problem solving skills. Puzzle generators have allowed for more puzzles to be\r\n                    created, using various techniques to create interesting and challenging puzzles.\r\n                    The system requested by the client involves the creation of 3-Dimensional puzzles (manually and from the use of AI), testing of puzzles, sharing and rating of\r\n                    puzzles by other users, as well as the ability of downloading 3D printable files.\r\n                    Team Prometheus, has come up with a way to develop the system according to\r\n                    the clients specifications.</p>\r\n          </mat-card>\r\n        </div> -->\r\n\r\n\r\n\r\n        <!-- <div class=\"container\">\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <div class=\"flex-container\" fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\" >\r\n            <div class=\"overlay\"></div>\r\n            <mat-card  class=\"child-1\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by {{puzzle.creator}}</mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Rating: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Date: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\" src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n\r\n            <mat-card  class=\"child-2\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgB.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n            <mat-card class=\"child-3\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n        </div>\r\n\r\n\r\n                <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n                <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n\r\n\r\n    </div> -->\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport {MatPaginator} from '@angular/material/paginator';\r\nimport {MatSort} from '@angular/material/sort';\r\nimport { LeaderboardArr } from './leaderboardArr';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {ChangeDetectorRef } from '@angular/core';\r\nimport { RatingsArr } from '../ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-leaderboard',\r\n  templateUrl: './leaderboard.component.html',\r\n  styleUrls: ['./leaderboard.component.css']\r\n})\r\nexport class LeaderboardComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = ['name', 'memberSince', 'nrPuzzles', 'avgRating', 'solved'];\r\n  userList: Array<LeaderboardArr> = [];\r\n  dataSource: any;\r\n  i: number;\r\n  j: number;\r\n  l: number;\r\n  x: number;\r\n  currentUser: any;\r\n  token: any;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  countPuzzles: number =0;\r\n  ratings: Array<RatingsArr> = [];\r\n\r\n\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  @ViewChild(MatSort) sort: MatSort;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog, private cdref: ChangeDetectorRef) {\r\n  }\r\n\r\n  applyFilter(event: Event) {\r\n    const filterValue = (event.target as HTMLInputElement).value;\r\n    this.dataSource.filter = filterValue.trim().toLowerCase();\r\n\r\n    if (this.dataSource.paginator) {\r\n      this.dataSource.paginator.firstPage();\r\n    }\r\n  }\r\n\r\n  populateTable(){\r\n\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data3=> {\r\n        for(let j=0; data3[j]!= null; j++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data3[j].id;\r\n          ratingObj.rating = data3[j].rating;\r\n          ratingObj.puzzleID = data3[j].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.i = 0;\r\n      while(data[this.i]!=null){\r\n        let leaderboardObj = new LeaderboardArr();\r\n        leaderboardObj.name = data[this.i].name;\r\n        leaderboardObj.memberSince = data[this.i].createdAt;\r\n\r\n        this.currentUser = {\r\n          \"token\": data[this.i].token\r\n        }\r\n\r\n        this.api.getPuzzlesByUser(this.currentUser).subscribe( data2 => {\r\n          leaderboardObj.nrPuzzles = Object.keys(data2).length;\r\n          this.l = 0;\r\n\r\n          if (leaderboardObj.nrPuzzles == 0){\r\n            leaderboardObj.avgRating = 0;\r\n          }\r\n          else {\r\n\r\n          while (data2[this.l] != null){\r\n\r\n\r\n              this.x = 0;\r\n              this.countPuzzles = 0;\r\n              for (let k=0; this.ratings[k]!=null; k++){\r\n                if (this.ratings[k].puzzleID == data2[this.l].id)\r\n                {\r\n                  if (this.ratings[k].rating != 0){\r\n                    this.countPuzzles = this.countPuzzles + this.ratings[k].rating;\r\n                    this.x = this.x + 1;\r\n                  }\r\n                }\r\n              if (this.countPuzzles != 0)\r\n                leaderboardObj.avgRating = this.countPuzzles/this.x;\r\n              else\r\n                leaderboardObj.avgRating = 0;\r\n            }\r\n\r\n            this.l = this.l + 1;\r\n          }\r\n        }\r\n\r\n      });\r\n\r\n      this.api.retrieveAllSolveAttempts(this.currentUser).subscribe( data4 => {\r\n        leaderboardObj.solved = Object.keys(data4).length;\r\n      });\r\n\r\n        this.i = this.i + 1;\r\n\r\n        this.userList.push(leaderboardObj);\r\n      }\r\n      this.dataSource = new MatTableDataSource(this.userList);\r\n      this.dataSource.paginator = this.paginator;\r\n      this.dataSource.sort = this.sort;\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.dataSource = new MatTableDataSource();\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.populateTable();\r\n\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<h1>Leaderboard</h1>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n  <mat-label>Search</mat-label>\r\n  <input matInput (keyup)=\"applyFilter($event)\" placeholder=\"Ex. Mia\" #input>\r\n</mat-form-field>\r\n\r\n<div class=\"mat-elevation-z8\">\r\n  <table mat-table [dataSource]=\"dataSource\" matSort>\r\n\r\n    <!-- Name Column -->\r\n    <ng-container matColumnDef=\"name\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.name}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"memberSince\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Member Since </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.memberSince}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"nrPuzzles\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Number of Puzzles</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.nrPuzzles}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"avgRating\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Average Rating of puzzles</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.avgRating}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"solved\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>Puzzles Solved</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.solved}} </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n\r\n    <!-- Row shown when there is no matching data. -->\r\n    <tr class=\"mat-row\" *matNoDataRow>\r\n      <td class=\"mat-cell\" colspan=\"4\">No data matching the filter \"{{input.value}}\"</td>\r\n    </tr>\r\n  </table>\r\n\r\n  <mat-paginator [pageSizeOptions]=\"[5, 10, 25, 100]\"></mat-paginator>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","export class LeaderboardArr{\r\n  name: string;\r\n  memberSince: string;\r\n  nrPuzzles: number;\r\n  avgRating: number;\r\n  solved: number; \r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { EmailPassComponent } from 'src/app/dialogs/email-pass/email-pass.component';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\n\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  emailDialogRef: MatDialogRef<EmailPassComponent>;\r\n  entry: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router, private dialog: MatDialog) {}\r\n  //method for logging in user and getting the token associated with the said user\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n\r\n  loginUser(currentUser: User){\r\n    this.formError = '';\r\n    if(currentUser !== null){\r\n      this.verifyUser = {\r\n        \"username\":currentUser.email,\r\n        \"password\":currentUser.password\r\n      }\r\n\r\n      this.api.loginUser(this.verifyUser).subscribe(\r\n        data => { console.log(data);\r\n          localStorage.removeItem('name');\r\n          localStorage.setItem('name', data['name']);\r\n          localStorage.removeItem('token');\r\n          localStorage.setItem('token', data['token']);\r\n\r\n        this.formError = \"\";\r\n        this.router.navigate(['/ratings']);\r\n\r\n        setTimeout(()=>{\r\n          localStorage.removeItem('token');\r\n          this.router.navigate(['login']);\r\n          alert(\"You have been logged out after 1 hour\");\r\n        },3600000);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n          if(error.status >= 401){\r\n            this.formError = error.error;\r\n          }\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  sendMail(){\r\n    this.emailDialogRef = this.dialog.open(EmailPassComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.emailDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.entry = {\r\n        //\"id\":this.rateUID,\r\n          \"username\": result\r\n        }\r\n\r\n        if(this.api.requestPasswordChange(this.entry).subscribe())\r\n        {\r\n          alert(\"Email will be send to you.\")\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loginForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]]\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n        <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n            <mat-card-header>\r\n                <h3>Login</h3>\r\n            </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"loginForm\" (ngSubmit)=\"loginUser(loginForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('email').hasError(error.type) && (loginForm.get('email').dirty || loginForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label><br>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('password').hasError(error.type) && (loginForm.get('password').dirty || loginForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!loginForm.valid\" class=\"btns\" id=\"one\">Login</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n            <mat-card-actions>\r\n                <a (click)=\"sendMail()\" class=\"forgot\">Forgot Password</a>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let puzzle of (this.datasource.filteredData | slice: startIndex:endIndex)\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.createdAt}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <!-- <mat-card-subtitle>Description: {{puzzle.description}}</mat-card-subtitle> -->\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\" >\r\n              <button *ngIf=\"!puzzle.shared\" mat-button class=\"btns\" (click)=\"share(puzzle.id)\">Share</button>\r\n              <button *ngIf=\"puzzle.shared\" mat-button class=\"btns\" (click)=\"stopShare(puzzle.id)\">Stop Sharing</button>\r\n              <button mat-button class=\"btns\" (click)=\"deletePuzzle(puzzle.id)\">Delete</button>\r\n              <!-- <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">SOLVE</button> -->\r\n            </mat-card-actions>\r\n\r\n            <!-- <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n              <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n          </mat-card-actions> -->\r\n          <br>\r\n          <mat-card-actions class=\"puzzleActionsA\">\r\n            <button mat-button class=\"btnsA\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n          </mat-card-actions>\r\n\r\n\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n  <div *ngIf=\"text\">\r\n    <h2 id=\"NoneText\" >You have not created any puzzles at the moment</h2>\r\n  </div>\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { ProfilePuzzlesDialogComponent } from 'src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles',\r\n  templateUrl: './profile-puzzles.component.html',\r\n  styleUrls: ['./profile-puzzles.component.css']\r\n})\r\nexport class ProfilePuzzlesComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  profileDialog: MatDialogRef<ProfilePuzzlesDialogComponent>;\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  getUserPuzzles(){\r\n    this.userPuzzleList = \"\";\r\n    this.api.getPuzzlesByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  share(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.sharePuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Puzzle shared\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  deletePuzzle(puzzleID: any){\r\n    // this.puzzle = {\r\n    //   \"puzzleID\": puzzleID\r\n    // }\r\n    if(this.api.deletePuzzle(puzzleID).subscribe()){\r\n        //alert(\"Puzzle deleted\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle deleted\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  stopShare(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.stopSharingPuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Stop sharing puzzle\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Stopped sharing shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  async delay(ms: number) {\r\n    await new Promise(resolve => setTimeout(()=>resolve(), ms))\r\n    .then( () => { console.log(\"fired\"); });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.delay(2000).then( () =>{\r\n      this.getUserPuzzles();\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-profile-ratings',\r\n  templateUrl: './profile-ratings.component.html',\r\n  styleUrls: ['./profile-ratings.component.css']\r\n})\r\nexport class ProfileRatingsComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user puzzle ratings variables\r\n  //ratingList: Observable <any[]> ;\r\n  userRatingsList: any;\r\n  text: boolean;\r\n  ratePID: number;\r\n  ratingEntry: any;\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  show: boolean;\r\n  deleteVal: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n  datasource: any = \"\";\r\n\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userRatingsList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  getUserPuzzleRatings(){\r\n    this.api.getPuzzleRatingsByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userRatingsList = data;\r\n      this.show = false;\r\n      this.text = false;\r\n      if (this.totalNumberOfPuzzles == 0){\r\n        this.text = true;\r\n      }\r\n      this.datasource = new MatTableDataSource(this.userRatingsList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          alert(\"Rating added\");\r\n        }\r\n\r\n        location.reload();\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  delete(ratePID: any){\r\n    this.deleteVal = {\r\n      \"puzzleID\" : ratePID,\r\n      \"token\" : localStorage.getItem('token')\r\n    }\r\n\r\n  this.api.findRatingID(this.deleteVal).subscribe( (result) => {\r\n    if(this.api.deleteRating(result[\"id\"]).subscribe()){\r\n        alert(\"Rating deleted\");\r\n        location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzleRatings();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{rating.created}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{rating.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{rating.puzzleName}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{rating.rating}}/5</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n                <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n            </mat-card-actions>\r\n            <br>\r\n            <mat-card-actions class=\"puzzleActionsA\">\r\n                <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(rating.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(rating.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!text && !show\"  [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n<div id=\"NoneText\" *ngIf=\"text\">\r\n    <h2>You have not made any ratings at the moment</h2>\r\n</div>\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-profile-solved-puzzles',\r\n  templateUrl: './profile-solved-puzzles.component.html',\r\n  styleUrls: ['./profile-solved-puzzles.component.css']\r\n})\r\nexport class ProfileSolvedPuzzlesComponent implements OnInit {\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  //puzzleList: Observable <Puzzle[]> ;\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n}\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  getUserPuzzles(){\r\n    this.api.retrieveAllSolveAttempts(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzles();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n    <div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n        <h1 class=\"main-title\">Solved Puzzles</h1>\r\n        <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n          <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n            <div class=\"content-overlay\"></div>\r\n            <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n              <div class=\"content-details fadeIn-bottom\">\r\n                <mat-card-header>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.dateCreated}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Best time: {{puzzle.bestTime}} seconds</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Solve attempts duration: {{puzzle.attemptDuration}} seconds</mat-card-subtitle>\r\n                </mat-card-header>\r\n              </div>\r\n              <mat-card-title><strong>{{puzzle.puzzleName}}</strong></mat-card-title>\r\n              <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n              <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.puzzleID)\">Solve</button>\r\n                <button  mat-button class=\"btns\">Rate</button>\r\n                <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n              </mat-card-actions>\r\n          </mat-card>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                      (page)=\"pageEvent = changeEvent($event)\">\r\n    </mat-paginator>\r\n\r\n    <div *ngIf=\"text\">\r\n      <h2 id=\"NoneText\" >You have not solved any puzzles at the moment</h2>\r\n    </div>\r\n    <div class=\"spinner\">\r\n      <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n    </div>\r\n\r\n    <app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n    </div>\r\n\r\n<!-- Button trigger modal -->\r\n<!-- <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#basicExampleModal\">\r\n  Launch demo modal\r\n</button> -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialogRef, MatDialog } from '@angular/material/dialog';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from 'src/app/dialogs/profile-update-dialog/profile-update-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  nameTextboxValue: string;\r\n  usernameTextboxValue: string;\r\n  currentUserObject:any;\r\n  token: any;\r\n  currentUser: any;\r\n  updateNameForm: FormGroup;\r\n  updateUsernameForm: FormGroup;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  updatePorfileDialog: MatDialogRef<ProfileUpdateDialogComponent>;\r\n  playerLevel: number;\r\n  increaseBy: number;\r\n  playerXP: number;\r\n  object: any;\r\n\r\n  constructor(private api: APIService, private formBuilder: FormBuilder, private router: Router, private dialog: MatDialog) { }\r\n\r\n  updateName(){\r\n    this.currentUser = null;\r\n      if(this.nameTextboxValue != undefined){\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": this.nameTextboxValue\r\n      }\r\n      localStorage.removeItem('name');\r\n      localStorage.setItem('name', this.currentUser['name']);\r\n      this.api.updateName(this.currentUser).subscribe( data => {\r\n        this.currentUserObject['name'] = data['name'];\r\n      });\r\n      this.updatePorfileDialog = this.dialog.open(ProfileUpdateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //---------open dialog to say \"Profile Updated\"\r\n      //alert(\"Name updated\");\r\n    }\r\n    else{ console.log(\"No value provided\");}\r\n    //location.reload();\r\n  }\r\n\r\n  checkLevel(currPlayerXP: any){\r\n    if(currPlayerXP <= 200 ){ this.playerLevel = 1}\r\n    else if(currPlayerXP >= 201 && currPlayerXP <= 350 ){ this.playerLevel = 2}\r\n    else if(currPlayerXP >= 351 && currPlayerXP <= 500 ){ this.playerLevel = 3}\r\n    else if(currPlayerXP >= 501 && currPlayerXP <= 750){ this.playerLevel = 4}\r\n    else if(currPlayerXP >= 751 ){ this.playerLevel = 5}\r\n    //updateXP\r\n    this.object = {\r\n      \"token\": localStorage.getItem('token'),\r\n      \"level\": this.playerLevel\r\n    }\r\n    this.api.updateLevel(this.object).subscribe( data=> {\r\n      this.playerLevel = data['level'];\r\n    });\r\n    return this.playerXP;\r\n  }\r\n\r\n  updateUsername(){\r\n    this.currentUser = null;\r\n    if(this.usernameTextboxValue != undefined){\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token'),\r\n      \"username\": this.usernameTextboxValue\r\n    }\r\n    this.api.updateUsername(this.currentUser).subscribe( data => {\r\n      this.currentUserObject['username'] = data['username'];\r\n    })\r\n  }\r\n  else{console.log(\"No value provided\")}\r\n  }\r\n\r\n  error_messages = {\r\n    'username': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      this.currentUserObject = data;\r\n      // console.log(\"user: \",data);\r\n\r\n      this.updateNameForm = this.formBuilder.group({\r\n        name: [data['name'], [Validators.required, Validators.pattern('[a-zA-Z ]*')]]\r\n      });\r\n\r\n      this.updateUsernameForm = this.formBuilder.group({\r\n        username: [data['username'], [Validators.required, Validators.email]]\r\n      });\r\n      this.playerLevel = data['level'];\r\n      this.playerXP = data['xp'];\r\n      this.playerLevel = this.checkLevel(this.playerXP);\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<!--app-navbar-profile></app-navbar-profile-->\r\n\r\n\r\n<div class=\"container-fluid\" >\r\n    <div fxLayout=\"row\" fxLayout.xs=\"col wrap\">\r\n    <mat-card class=\"profileText\">\r\n        <mat-card-header>\r\n            <h1>Edit Details</h1>\r\n        </mat-card-header>\r\n        <mat-card-content class=\"move\">\r\n        <div *ngIf=\"currentUserObject\">\r\n            <form [formGroup]=\"updateNameForm\" (ngSubmit)=\"updateName()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Your Name: </label>\r\n                    <input matInput formControlName=\"name\"  value=\"{{currentUserObject.name}}\" (input)=\"nameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.name\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateNameForm.get('name').hasError(error.type) && (updateNameForm.get('name').dirty || updateNameForm.get('name').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateNameForm.valid\" class=\"btns\" >Save</button>\r\n            </form>\r\n\r\n            <form [formGroup]=\"updateUsernameForm\" (ngSubmit)=\"updateUsername()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"username\">Your Email: </label>\r\n                    <input matInput formControlName=\"username\"  value=\"{{currentUserObject.username}}\" (input)=\"usernameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.username\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateUsernameForm.get('username').hasError(error.type) && (updateUsernameForm.get('username').dirty || updateUsernameForm.get('username').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateUsernameForm.valid\" class=\"btns\">Save</button>\r\n            </form>\r\n        </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"lvl\">\r\n        <mat-card-title>Progress</mat-card-title>\r\n        <mat-card-content class=\"move\">\r\n            <mat-card-title class=\"lvlText\">XP: {{playerXP}}</mat-card-title>\r\n            <mat-card-title class=\"lvlText\">Level: {{playerLevel}}</mat-card-title>\r\n            <mat-progress-bar class=\"bb\" mode=\"determinate\" value=\"40\"></mat-progress-bar>\r\n            <mat-card-subtitle class=\"prog\">Level Progress: %</mat-card-subtitle>\r\n\r\n        \r\n        \r\n    </mat-card-content>\r\n    </mat-card>\r\n\r\n  </div>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","export class RatingsArr{\r\n  id: number;\r\n  rating: number;\r\n  puzzleID: number;\r\n}\r\n","export class PuzzleArr{\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  creator: string;\r\n  rating: number;\r\n  created: any;\r\n  showRating: boolean;\r\n  image: any;\r\n  shared: boolean = false; \r\n}\r\n","import { Component, OnInit, ChangeDetectorRef, ViewEncapsulation } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { PuzzleArr } from './puzzleArr';\r\nimport { RatingsArr } from './RatingsArr';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PuzzleRating } from 'src/app/models/PuzzleRating';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { MenuComponent } from 'src/app/dialogs/menu/menu.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport { HintComponent } from 'src/app/dialogs/hint/hint.component';\r\n\r\n@Component({\r\n  selector: 'app-ratings',\r\n  templateUrl: './ratings.component.html',\r\n  styleUrls: ['./ratings.component.css']\r\n})\r\nexport class RatingsComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = [\"id\",\"name\",\"description\",\"creator\",\"rating\",\"created\",\"showRating\",\"image\"];\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  puzzles: Array<PuzzleArr> = [];\r\n  name: string;\r\n  ratings: Array<RatingsArr> = [];\r\n  ratePID: number;\r\n  rateUID: string;\r\n  ratingEntry: any;\r\n  formError: string;\r\n  show: boolean;\r\n  dataAvailable: boolean;\r\n  //searchbar\r\n  searchTextboxValue: string;\r\n  token: any;\r\n  currentUser: any;\r\n  datasource: any = \"\";\r\n  solvingPuzzleID: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  //solve dialog variable\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  sortedBy: any;\r\n\r\n  levelDialog: MatDialogRef<HintComponent>;\r\n\r\n  ratingSavedDialog: any;\r\n  loginDialog: any;\r\n\r\n  constructor(private api: APIService, private cdr: ChangeDetectorRef, private dialog: MatDialog, private router: Router) {\r\n  }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  //sorting functions start here\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n  //sorting functions end here\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzles().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  searchItems(searchValue: any){\r\n    if(searchValue != undefined){\r\n      this.api.getSearchedPuzzles(searchValue).subscribe( data => {\r\n        var dataObjectSize = Object.keys(data).length;\r\n        if(dataObjectSize == 0 )\r\n        {\r\n          alert(\"Nothing matches given criteria\");\r\n          console.log(\"Nothing matches given criteria\");\r\n        }\r\n        else{\r\n          //Please populate the page with the data received. Other puzzles not fromd data must be cleared\r\n          console.log(data);\r\n          this.populate(data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      if (puzzleObj.creator== this.currentUser[\"name\"])\r\n      {\r\n        puzzleObj.showRating = false;\r\n      }\r\n      else\r\n      {\r\n        puzzleObj.showRating = true;\r\n      }\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n    this.puzzleAscending();\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          this.ratingSavedDialog = this.dialog.open(MenuComponent, { disableClose: true, hasBackdrop: true });\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  reload(){\r\n    this.populate(null);\r\n  }\r\n\r\n   //solve dialog\r\n   openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    // this.solveDialog = this.dialog.open(SolveDialogComponent, { \r\n    //   disableClose: true, hasBackdrop: true,\r\n    //   data: { pageValue:  \"\"} \r\n    // });\r\n    this.levelDialog = this.dialog.open(HintComponent, {disableClose: true, hasBackdrop: true});\r\n  }\r\n\r\n  //solve dialog\r\n  // openSolveDialog(puzzleID: any){\r\n  //   localStorage.setItem('solvingPuzzleID', puzzleID);\r\n  //   this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  // }\r\n  //end of solve dialog\r\n  //start of download methods\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n  //end of download methods\r\n\r\n  ngOnInit(): void {\r\n    this.show=true;\r\n    this.dataAvailable = false;\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //this.router.navigate(['/index']);\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      console.log(data[\"name\"]);\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": data[\"name\"]\r\n      }\r\n    });\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n\r\n  }\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Creator\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\">Created by: {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button *ngIf=\"puzzle.showRating\" mat-button class=\"btns\" (click)=\"openAndCheck(puzzle.id)\">Rate</button>\r\n              <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<app-footer *ngIf=\"!show\"  class=\"footer\" ></app-footer>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-reset-password',\r\n  templateUrl: './reset-password.component.html',\r\n  styleUrls: ['./reset-password.component.css']\r\n})\r\nexport class ResetPasswordComponent implements OnInit {\r\n  resetPasswordForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  resetDone: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router ) {}\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for logging in user and getting the token associated with the said user\r\n  resetPassword(currentUser: User){\r\n    this.resetDone = '';\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.resetPasswordForm.controls['password'].value, this.resetPasswordForm.controls['confirmPassword'].value) == true){\r\n      this.verifyUser = {\r\n        \"username\": currentUser.email,\r\n        \"password\": currentUser.password\r\n      }\r\n      if(this.verifyUser != null){\r\n        this.api.resetPassword(this.verifyUser).subscribe(\r\n          () => {},\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n            else\r\n            {\r\n              this.router.navigate(['/resetSuccess', { message: \"Password reset. Please login\" }]);\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.resetPasswordForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n    if (firstPassword !== secondPassword) {\r\n        return false;\r\n    } else {\r\n      return true;\r\n    }\r\n}\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Reset Password</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"resetPasswordForm\" (ngSubmit)=\"resetPassword(resetPasswordForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('email').hasError(error.type) && (resetPasswordForm.get('email').dirty || resetPasswordForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('password').hasError(error.type) && (resetPasswordForm.get('password').dirty || resetPasswordForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <mat-form-field appearance=\"fill\">\r\n                            <mat-label>Confirm password</mat-label>\r\n                            <input matInput required\r\n                                [type]=\"fieldTextType2 ? 'text' : 'password'\" class=\"input\" formControlName=\"confirmPassword\"/>\r\n                        </mat-form-field>\r\n                        <span>\r\n                            <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType2,'fa-eye': fieldTextType2 }\" (click)=\"toggleFieldTextType2()\">\r\n                            </i>\r\n                        </span>\r\n                            <div>\r\n                                <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                    <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('confirmPassword').hasError(error.type) && (resetPasswordForm.get('confirmPassword').dirty || resetPasswordForm.get('confirmPassword').touched)\">\r\n                                        {{ error.message }}\r\n                                    </mat-error>\r\n                                </ng-container>\r\n                                <span id=\"passError\">{{formError}}</span>\r\n                            </div>\r\n                    </div>\r\n\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!resetPasswordForm.valid\" class=\"btns\" id=\"one\">Submit</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-reset-success',\r\n  templateUrl: './reset-success.component.html',\r\n  styleUrls: ['./reset-success.component.css']\r\n})\r\nexport class ResetSuccessComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute, private router: Router ) {}\r\n\r\n  ngOnInit() {\r\n\r\n    let message = this.route.snapshot.paramMap.get('message');\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n          <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n              <mat-card-header>\r\n                  <h3>Reset Password</h3>\r\n              </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                    <p>Please login</p>\r\n                    <a routerLink=\"/login\" mat-raised-button class=\"btns\" id=\"two\">Login</a>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\r\nimport { User } from '../../models/User';\r\nimport { APIService } from '../../services/api.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-signup',\r\n  templateUrl: './signup.component.html',\r\n  styleUrls: ['./signup.component.css']\r\n})\r\nexport class SignupComponent implements OnInit {\r\n  signUpForm: FormGroup;\r\n  newUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  token: any;\r\n  name: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router) {}\r\n\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for creating a new user. A new JSON object is created and sent to the node api\r\n  createNewUser(createUser: any){\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.signUpForm.controls['password'].value, this.signUpForm.controls['confirmPassword'].value) == true){\r\n      this.newUser = {\r\n        \"name\": createUser.name,\r\n        \"username\": createUser.email,\r\n        \"password\": createUser.password\r\n      }\r\n      if(this.newUser != null){\r\n        this.api.createUser(this.newUser).subscribe(\r\n            data => {\r\n              console.log(data);\r\n              localStorage.removeItem('name');\r\n              localStorage.setItem('name', data['name']);\r\n              localStorage.removeItem('token');\r\n              localStorage.setItem('token', data['token']);\r\n              this.router.navigate(['/ratings']);\r\n            },\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            console.log('Error from API: ', error.error);\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ],\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.signUpForm = this.formBuilder.group({\r\n      name: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n        if (firstPassword !== secondPassword) {\r\n          //this.formError = \"Passwords do not match: \" + controlName + \" \" + matchingControlName;\r\n            return false;\r\n        } else {\r\n          //this.formError = \"Match: \" + controlName + \" \" + matchingControlName;\r\n          return true;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Sign Up</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"signUpForm\" (ngSubmit)=\"createNewUser(signUpForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your full name</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"John Doe\" formControlName=\"name\" required >\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.name\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('name').hasError(error.type) && (signUpForm.get('name').dirty || signUpForm.get('name').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('email').hasError(error.type) && (signUpForm.get('email').dirty || signUpForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"password\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType,\r\n                        'fa-eye': fieldTextType\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('password').hasError(error.type) && (signUpForm.get('password').dirty || signUpForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Confirm password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType2 ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"confirmPassword\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType2,\r\n                        'fa-eye': fieldTextType2\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType2()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('confirmPassword').hasError(error.type) && (signUpForm.get('confirmPassword').dirty || signUpForm.get('confirmPassword').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!signUpForm.valid\" class=\"btns\" id=\"one\">Sign Up</button>\r\n\r\n                    <a routerLink=\"/index\" mat-raised-button color=\"accent\" class=\"btns\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-rate-dialog',\r\n  templateUrl: './rate-dialog.component.html',\r\n  styleUrls: ['./rate-dialog.component.css']\r\n})\r\nexport class RateDialogComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<RateDialogComponent>) { }\r\n\r\n    @Input() OnlyNumber: boolean;\r\n\r\n    error_messages = {\r\n      'rating': [\r\n        { type: 'pattern', message: 'Must be a number between 1 and 5' }\r\n      ]\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      rating: ['', Validators.pattern(\"^([1-5])$\")]\r\n    })\r\n  }\r\n\r\n  submit(form){\r\n    this.input = form.rating;\r\n      this.dialogRef.close(`${form.rating}`);\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Rate Puzzle (out of 5)</h1>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"rating\" placeholder=\"Enter Rating\" ngControl=\"rating\" OnlyNumber=\"true\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.rating\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('rating').hasError(error.type) && (form.get('rating').dirty || form.get('rating').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport { User } from '../models/User';\r\nimport { Puzzle } from '../models/Puzzle';\r\nimport { PuzzleRating } from '../models/PuzzleRating';\r\nimport {HttpHeaders} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class APIService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /**\r\n   * User endpoints start here\r\n   */\r\n  //create new user\r\n  createUser(newUser: User){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/createUser',newUser, httpOptions);\r\n  }\r\n\r\n  loginUser(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/login', currentUser, httpOptions);\r\n  }\r\n\r\n  resetPassword(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/resetPassword', currentUser, httpOptions);\r\n  }\r\n\r\n  getUser(token: any){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getUser',token, httpOptions);\r\n  }\r\n\r\n  updateLevel(currentUser:User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateLevel', currentUser, httpOptions);\r\n  }\r\n\r\n  updateName(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateName', currentUser, httpOptions);\r\n  }\r\n\r\n  updateUsername(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateUsername', currentUser, httpOptions);\r\n  }\r\n\r\n  getPuzzlesByUser(token: any): Observable<any[]> {\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzlesByUser', token, httpOptions);\r\n  }\r\n\r\n  getPuzzleRatingsByUser(token: any): Observable<any[]>{\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzleRatingsByUser', token, httpOptions);\r\n  }\r\n\r\n  /**\r\n   * User endpoints end here\r\n   */\r\n\r\n  /**\r\n   * Challenge Endpoints start here\r\n   */\r\n\r\n  getChallenges(){\r\n    return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getChallenges');\r\n  }\r\n\r\n   /**\r\n   * Challenge Endpoints end here\r\n   */\r\n\r\n\r\n/**\r\n* Puzzle endpoints start here\r\n*/\r\ngetAllPuzzles(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzles');\r\n}\r\n\r\ngetAllPuzzleByID(puzzleID: number){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/' + puzzleID);\r\n}\r\n\r\ncreateNewPuzzle(puzzle: Puzzle){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ncreateNewPuzzleRating(rating: PuzzleRating){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzleRating', rating, httpOptions);\r\n}\r\n\r\ngetAllPuzzleRatings(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzleRatings');\r\n}\r\n\r\ngetSearchedPuzzles(term: any){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getSearchedPuzzles/' + term);\r\n}\r\n\r\nsharePuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/sharePuzzle', puzzle, httpOptions);\r\n}\r\n\r\nstopSharingPuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/stopSharingPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ndeletePuzzle(puzzle:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deletePuzzle/'+puzzle);\r\n}\r\n\r\nfindRatingID(rating: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/findRatingID', rating, httpOptions);\r\n}\r\n\r\ndeleteRating(rating:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deleteRating/'+rating);\r\n}\r\n\r\nretrieveAllSolveAttempts(currentUser: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getSolvedPuzzles', currentUser, httpOptions);\r\n}\r\n\r\n/**\r\n* Puzzle endpoints end here\r\n*/\r\n\r\n/**\r\n* Admin endpoints start here\r\n*/\r\n\r\ngetAllUsers(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllUsers');\r\n}\r\n\r\ndeleteUser(user:number): Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteUser/'+user);\r\n}\r\n\r\ngetAllPuzzlesAdmin()\r\n{\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllPuzzles');\r\n}\r\n\r\ndeletePuzzleAdmin(puzzle:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deletePuzzle/'+puzzle);\r\n}\r\n\r\ngetAllRatingsAdmin(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllRatings');\r\n}\r\n\r\ndeleteRatingAdmin(rateID:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteRatingAdmin/'+rateID);\r\n}\r\n/**\r\n* Admin endpoints end here\r\n*/\r\n\r\nrequestPasswordChange(email: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/requestPasswordChange', email, httpOptions);\r\n}\r\n\r\n}\r\n","/*! FileSaver.js\r\n *  A saveAs() FileSaver implementation.\r\n *  2014-01-24\r\n *\r\n *  By Eli Grey, http://eligrey.com\r\n *  License: X11/MIT\r\n *    See LICENSE.md\r\n */\r\n\r\n/*global self */\r\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\r\n\r\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\r\nvar saveAs = saveAs\r\n  // IE 10+ (native saveAs)\r\n  || (typeof navigator !== \"undefined\" &&\r\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\r\n  // Everyone else\r\n  || (function(view) {\r\n\t\"use strict\";\r\n\t// IE <10 is explicitly unsupported\r\n\tif (typeof navigator !== \"undefined\" &&\r\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\r\n\t\treturn;\r\n\t}\r\n\tvar\r\n\t\t  doc = view.document\r\n\t\t  // only get URL when necessary in case BlobBuilder.js hasn't overridden it yet\r\n\t\t, get_URL = function() {\r\n\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t}\r\n\t\t, URL = view.URL || view.webkitURL || view\r\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t, can_use_save_link = !view.externalHost && \"download\" in save_link\r\n\t\t, click = function(node) {\r\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t);\r\n\t\t\tnode.dispatchEvent(event);\r\n\t\t}\r\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t, throw_outside = function(ex) {\r\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\r\n\t\t\t\tthrow ex;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t, fs_min_size = 0\r\n\t\t, deletion_queue = []\r\n\t\t, process_deletion_queue = function() {\r\n\t\t\tvar i = deletion_queue.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar file = deletion_queue[i];\r\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\tURL.revokeObjectURL(file);\r\n\t\t\t\t} else { // file is a File\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdeletion_queue.length = 0; // clear queue\r\n\t\t}\r\n\t\t, dispatch = function(filesaver, event_types, event) {\r\n\t\t\tevent_types = [].concat(event_types);\r\n\t\t\tvar i = event_types.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t, FileSaver = function(blob, name) {\r\n\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\tvar\r\n\t\t\t\t  filesaver = this\r\n\t\t\t\t, type = blob.type\r\n\t\t\t\t, blob_changed = false\r\n\t\t\t\t, object_url\r\n\t\t\t\t, target_view\r\n\t\t\t\t, get_object_url = function() {\r\n\t\t\t\t\tvar object_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\tdeletion_queue.push(object_url);\r\n\t\t\t\t\treturn object_url;\r\n\t\t\t\t}\r\n\t\t\t\t, dispatch_all = function() {\r\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t}\r\n\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t, fs_error = function() {\r\n\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.open(object_url, \"_blank\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\tdispatch_all();\r\n\t\t\t\t}\r\n\t\t\t\t, abortable = function(func) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\r\n\t\t\t\t, slice\r\n\t\t\t;\r\n\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\tif (!name) {\r\n\t\t\t\tname = \"download\";\r\n\t\t\t}\r\n\t\t\tif (can_use_save_link) {\r\n\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t// FF for Android has a nasty garbage collection mechanism\r\n\t\t\t\t// that turns all objects that are not pure javascript into 'deadObject'\r\n\t\t\t\t// this means `doc` and `save_link` are unusable and need to be recreated\r\n\t\t\t\t// `view` is usable though:\r\n\t\t\t\tdoc = view.document;\r\n\t\t\t\tsave_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\");\r\n\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\tsave_link.download = name;\r\n\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t\t);\r\n\t\t\t\tsave_link.dispatchEvent(event);\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch_all();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\tblob_changed = true;\r\n\t\t\t}\r\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\tname += \".download\";\r\n\t\t\t}\r\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\ttarget_view = view;\r\n\t\t\t}\r\n\t\t\tif (!req_fs) {\r\n\t\t\t\tfs_error();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfs_min_size += blob.size;\r\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\r\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\r\n\t\t\t\t\tvar save = function() {\r\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\r\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\r\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\r\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\tdeletion_queue.push(file);\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\twriter.onerror = function() {\r\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\r\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\r\n\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\r\n\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\tsave();\r\n\t\t\t\t\t}), abortable(function(ex) {\r\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}), fs_error);\r\n\t\t\t}), fs_error);\r\n\t\t}\r\n\t\t, FS_proto = FileSaver.prototype\r\n\t\t, saveAs = function(blob, name) {\r\n\t\t\treturn new FileSaver(blob, name);\r\n\t\t}\r\n\t;\r\n\tFS_proto.abort = function() {\r\n\t\tvar filesaver = this;\r\n\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\tdispatch(filesaver, \"abort\");\r\n\t};\r\n\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\tFS_proto.WRITING = 1;\r\n\tFS_proto.DONE = 2;\r\n\r\n\tFS_proto.error =\r\n\tFS_proto.onwritestart =\r\n\tFS_proto.onprogress =\r\n\tFS_proto.onwrite =\r\n\tFS_proto.onabort =\r\n\tFS_proto.onerror =\r\n\tFS_proto.onwriteend =\r\n\t\tnull;\r\n\r\n\tview.addEventListener(\"unload\", process_deletion_queue, false);\r\n\tsaveAs.unload = function() {\r\n\t\tprocess_deletion_queue();\r\n\t\tview.removeEventListener(\"unload\", process_deletion_queue, false);\r\n\t};\r\n\treturn saveAs;\r\n}(\r\n\t   typeof self !== \"undefined\" && self\r\n\t|| typeof window !== \"undefined\" && window\r\n\t|| this.content\r\n));\r\n// `self` is undefined in Firefox for Android content script context\r\n// while `this` is nsIContentFrameMessageManager\r\n// with an attribute `content` that corresponds to the window\r\n\r\nif (typeof module !== \"undefined\") module.exports = saveAs;\r\n","import {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tTOUCH,\r\n\tVector2,\r\n\tVector3\r\n} from \"src/assets/js/three.module.js\";\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = domElement;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.05;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t// Touch fingers\r\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\tvar twoPI = 2 * Math.PI;\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\tvar min = scope.minAzimuthAngle;\r\n\t\t\tvar max = scope.maxAzimuthAngle;\r\n\r\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\tif ( min < max ) {\r\n\r\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = {\r\n\t\tNONE: - 1,\r\n\t\tROTATE: 0,\r\n\t\tDOLLY: 1,\r\n\t\tPAN: 2,\r\n\t\tTOUCH_ROTATE: 3,\r\n\t\tTOUCH_PAN: 4,\r\n\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t};\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\tvar needsUpdate = false;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t// Prevent the browser from scrolling.\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Manually set the focus since calling preventDefault above\r\n\t\t// prevents the browser from setting it automatically.\r\n\r\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n\t\tvar mouseAction;\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase 0:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// make sure element can receive keys.\r\n\r\n\tif ( scope.domElement.tabIndex === - 1 ) {\r\n\r\n\t\tscope.domElement.tabIndex = 0;\r\n\r\n\t}\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nvar MapControls = function ( object, domElement ) {\r\n\r\n\tOrbitControls.call( this, object, domElement );\r\n\r\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n\tthis.touches.ONE = TOUCH.PAN;\r\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n};\r\n\r\nMapControls.prototype = Object.create( EventDispatcher.prototype );\r\nMapControls.prototype.constructor = MapControls;\r\n\r\nexport { OrbitControls, MapControls };\r\n","import { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard, getCurrentRenderMode } from 'src/assets/js/manualCreation.js';\r\nimport { render3D, render2D } from 'src/assets/js/generate3D.js';\r\n\r\n///The structure of each individual/chromosome object\r\nlet Chromosome = {\r\n\tsites: [],\r\n\tfitness: -1,\r\n};\r\n\r\n///The structure of each site object\r\nlet Site = {\r\n\tx: 0,\r\n\ty: 0,\r\n\tsurfaceArea: 0,\r\n};\r\n\r\nlet generatePuzzleAIButton, nextPuzzleButton, previousPuzzleButton, progressBar;\r\nlet generatedPuzzles;\r\nlet renderedPuzzleIndex;\r\nlet tempWidth, tempHeight;\r\nlet totalSurfaceArea;\r\n\r\n//Genetic Algorithm parameters\r\nlet generationSize = 10 + 1;\r\nlet tournamentSize = 4;\r\nlet maximumIterations = 150;\r\nlet seedString = 'apples';\r\n\r\nlet sliders = [];\r\nlet labels = [];\r\nlet numberOfSites = 6;\r\nlet desiredProportions = [0.40, 0.20, 0.10, 0.10, 0.10, 0.10];\r\nlet groupDistribution = [];\r\n\r\nfunction copyObject(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction xmur3(str) {\r\n    for(var i = 0, h = 1779033703 ^ str.length; i < str.length; i++)\r\n        h = Math.imul(h ^ str.charCodeAt(i), 3432918353),\r\n        h = h << 13 | h >>> 19;\r\n    return function() {\r\n        h = Math.imul(h ^ h >>> 16, 2246822507);\r\n        h = Math.imul(h ^ h >>> 13, 3266489909);\r\n        return (h ^= h >>> 16) >>> 0;\r\n    }\r\n}\r\n\r\nfunction mulberry32(a) {\r\n    return function() {\r\n      var t = a += 0x6D2B79F5;\r\n      t = Math.imul(t ^ t >>> 15, t | 1);\r\n      t ^= t + Math.imul(t ^ t >>> 7, t | 61);\r\n      return ((t ^ t >>> 14) >>> 0) / 4294967296;\r\n    }\r\n}\r\n\r\nlet seed = xmur3(seedString);\r\nlet rand = mulberry32(seed());\r\n\r\nfunction random(max)\r\n{\r\n    // return Math.ceil(rand() * max) - 1;\r\n    return Math.floor(Math.random() * max);\r\n}\r\n\r\nfunction expandPuzzle(sites, factor)\r\n{\r\n\tlet tempSites = [];\r\n\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\ttempSites[i] = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t}\r\n\t\ttempSites[i].x = sites[i].x * factor;\r\n\t\ttempSites[i].y = sites[i].y * factor;\r\n\t}\r\n\r\n\treturn tempSites;\r\n}\r\n\r\nexport function initializeDataAI()\r\n{\r\n\tinitializeData('AI');\r\n\tsetDisableEditMode(true);\r\n\tgroupDistribution = [];\r\n\tgeneratedPuzzles = [];\r\n\tsliders = [];\r\n\tlabels = [];\r\n\trenderedPuzzleIndex = 0;\r\n\tgeneratePuzzleAIButton = document.getElementById('generatePuzzleButtonAI');\r\n\tgeneratePuzzleAIButton.addEventListener('mousedown', generatePuzzleAI);\r\n\tgeneratePuzzleAIButton.remove();\r\n\r\n\tnextPuzzleButton = document.getElementById('nextPuzzleButton');\r\n\tpreviousPuzzleButton = document.getElementById('previousPuzzleButton');\r\n\tnextPuzzleButton.remove();\r\n\tpreviousPuzzleButton.remove();\r\n\r\n\tprogressBar = document.getElementById('progressBar');\r\n\tprogressBar.style.display = 'none';\r\n\r\n\tdocument.getElementById('nextButton').addEventListener('mousedown', displaySlidersCard);\r\n\r\n\tnextPuzzleButton.addEventListener('mousedown', function(){\r\n\t\trenderedPuzzleIndex++;\r\n\t\tif(renderedPuzzleIndex == generatedPuzzles.length)\r\n\t\t{\r\n\t\t\tlet newGeneration = run();\r\n\t\t\tfor(let index = 0; index < newGeneration.length; index++)\r\n\t\t\t{\r\n\t\t\t\tgeneratedPuzzles.push(newGeneration[index].sites);\r\n\t\t\t}\r\n\t\t\tconsole.log('reached maximum :<');\r\n\t\t}\r\n\r\n\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t});\r\n\r\n\tpreviousPuzzleButton.addEventListener('mousedown', function(){\r\n\t\tif(renderedPuzzleIndex != 0)\r\n\t\t{\r\n\t\t\trenderedPuzzleIndex--;\r\n\t\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction displaySlidersCard()\r\n{\r\n\tlet numberOfPiecesInGroup;\r\n\tnumberOfSites = 0;\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tnumberOfPiecesInGroup = parseInt(document.getElementById('numberOfPiecesInputBox' + (i+1)).value);\r\n\t\tgroupDistribution.push(numberOfPiecesInGroup);\r\n\t\tnumberOfSites += numberOfPiecesInGroup;\r\n\t}\r\n\r\n\tgenerateSliders(3);\r\n\r\n\tdocument.getElementById('inputContainer').appendChild(generatePuzzleAIButton);\r\n}\r\n\r\nfunction generatePuzzleAI()\r\n{\r\n\t// document.getElementById('progressBarDiv').appendChild(progressBar);\r\n\t// progressBar.style.display = 'block';\r\n\tdesiredProportions = [];\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tlet proportion = (sliders[i].value / groupDistribution[i]) / 100;\r\n\r\n\t\tfor(let counter = 0; counter < groupDistribution[i]; counter++)\r\n\t\t\tdesiredProportions.push(proportion);\r\n\t}\r\n\r\n\tdesiredProportions.sort( function(a, b) { return b - a } );\r\n\r\n\tdocument.getElementById('inputContainer').innerHTML = '';\r\n\r\n\tlet lastGeneration = run();\r\n\tfor(let index = 0; index < lastGeneration.length; index++)\r\n\t{\r\n\t\tgeneratedPuzzles.push(lastGeneration[index].sites);\r\n\t}\r\n\r\n\trenderPuzzle(lastGeneration[0].sites);\r\n\t// progressBar.remove();\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(previousPuzzleButton);\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(nextPuzzleButton);\r\n}\r\n\r\nfunction renderPuzzle(sites)\r\n{\r\n\tlet expandedSites = expandPuzzle(sites, 10);\r\n\tsetSites(expandedSites);\r\n\tclearBoard();\r\n\tgenerateSiteBoundaries();\r\n\tlet piecesJSONObject = createPieces();\r\n\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\tif(getCurrentRenderMode() == '3D')\r\n\t\trender3D(piecesJSONObject, 'AI');\r\n}\r\n\r\nfunction generateSliders(numberOfSliders)\r\n{\r\n\tlet inputContainer = document.getElementById('inputContainer');\r\n\tlet defaultValue = 100/numberOfSliders;\r\n\r\n\tinputContainer.innerHTML = '';\r\n\r\n\tfor(let i = 0; i < numberOfSliders; i++)\r\n\t{\r\n\t\tlet slider = document.createElement('input');\r\n\t\tslider.type = 'range';\r\n\t\tslider.min = 1.00;\r\n\t\tslider.max = 100.00 - numberOfSliders + 1;\r\n\t\tslider.value = defaultValue;\r\n\t\tslider.previousValue = defaultValue;\r\n\t\tslider.sliderid = i;\r\n\t\tslider.step = 0.01;\r\n\r\n\t\tslider.addEventListener('input', function() {\r\n\t\t\tlet difference = this.previousValue - this.value;\r\n\t\t\tlet distributedValue = (difference/( numberOfSliders - 1 )).toFixed(2);\r\n\t\t\tlet leftover = 0;\r\n\r\n\t\t\tfor(let i = 0 ; i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = ( parseFloat(sliders[i].value) + parseFloat(distributedValue) );\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(leftover != 0 && ( tempValue + leftover ) >= 1.00)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttempValue += leftover;\r\n\t\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftover += parseFloat(distributedValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; leftover != 0 && i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = parseFloat(sliders[i].value) + leftover;\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.previousValue = this.value;\r\n\t\t\tlabels[this.sliderid].innerHTML = parseInt(this.value);\r\n\t\t});\r\n\r\n\t\tlet headerLabel = document.createElement('label');\r\n\t\theaderLabel.innerHTML = 'Size ' + (i+1);\r\n\r\n\t\tlet valueLabel = document.createElement('label');\r\n\t\tvalueLabel.innerHTML = defaultValue.toFixed(0);\r\n\r\n\t\tlet br = document.createElement('br');\r\n\r\n\t\tsliders.push(slider); \r\n\t\tlabels.push(valueLabel);\r\n\r\n\r\n\t\tinputContainer.appendChild(headerLabel);\r\n\t\tinputContainer.appendChild(slider);\r\n\t\tinputContainer.appendChild(valueLabel);\r\n\t\tinputContainer.appendChild(br);\r\n\t}\r\n}\r\n\r\n///Executes the genetic algorithm and returns the resulting site array\r\nfunction run()\r\n{\r\n\tlet currentGeneration = [], nextGeneration = [];\r\n\tlet parentX, parentY, children;\r\n\tlet x, y;\r\n\ttempWidth = width/10;\r\n\ttempHeight = height/10;\r\n\ttotalSurfaceArea = tempWidth * tempHeight;\r\n\r\n\tnextGeneration = initializeGeneration();\r\n\tfor(let generation = 0; generation < maximumIterations; generation++)\r\n\t{\r\n\t\tcurrentGeneration = nextGeneration;\r\n\t\tnextGeneration = [];\r\n\t\tnextGeneration.push( getFittest(currentGeneration) );\r\n\t\tfor(let i = 0; i < generationSize - 1; i+=2)\r\n\t\t{\r\n\t\t\tparentX = runTournament(currentGeneration);\r\n\t\t\tparentY = runTournament(currentGeneration);\r\n\t\t\tchildren = crossover(parentX, parentY);\r\n\t\t\tmutate(children[0]);\r\n\t\t\tmutate(children[1]);\r\n\t\t\tcalculateAndSetFitness(children[0]);\r\n\t\t\tcalculateAndSetFitness(children[1]);\r\n\t\t\tnextGeneration.push(...children);\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(nextGeneration);\r\n\tconsole.log('done!');\r\n\treturn nextGeneration;\r\n}\r\n\r\n///Returns the fittest chromosome from generation\r\nfunction getFittest(generation)\r\n{\r\n\tlet fittestChromosome = null;\r\n\tfittestChromosome = generation[0];\r\n\r\n\tfor(let i = 1; i < generationSize; i++)\r\n\t\tif(generation[i].fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = generation[i];\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Randomly selected a site and a movement direction; then proceed to execute movement using a random offset\r\nfunction mutate(chromosome)\r\n{\r\n\t// let siteIndex = random(numberOfSites);\r\n\tlet selectedSite = chromosome.sites[random(numberOfSites)];\r\n\tlet offset = random(5 + 1);\r\n\tlet movementDirection = random(4);\r\n\r\n\t///Move site to the right by offset (increment x by offset), or move to the left if at board edge\r\n\tif(movementDirection == 0)\r\n\t{\r\n\t\tif(selectedSite.x + offset < tempWidth)\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t}\r\n\t///Move site to the left by offset (decrement x by offset), or move to the right if at the board edge\r\n\telse if(movementDirection == 1)\r\n\t{\r\n\t\tif(selectedSite.x - offset > 0)\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t}\r\n\t///Move site upwards by offset (decrement y by offset), or move downwards if at the board edge\r\n\telse if(movementDirection == 2)\r\n\t{\r\n\t\tif(selectedSite.y - offset > 0)\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t}\r\n\t///Move site downwards by offset (increment y by offset), or move upwards if at board edge\r\n\telse if(movementDirection == 3)\r\n\t{\r\n\t\tif(selectedSite.y + offset < tempHeight)\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t}\r\n}\r\n\r\n/**\r\n\tCrossover operation; randomly select a site index and swap the sites located on said index.\r\n\tThis function will create two new children, swap their sites and return an array containing them.\r\n**/\r\nfunction crossover(chromosomeX, chromosomeY)\r\n{\r\n\tlet swapIndex = random(numberOfSites);\r\n\tlet childX = copyObject(chromosomeX);\r\n\tlet childY = copyObject(chromosomeY);\r\n\r\n\tlet tempSite = childX.sites[swapIndex];\r\n\tchildX.sites[swapIndex] = childY.sites[swapIndex];\r\n\tchildY.sites[swapIndex] = tempSite;\r\n\r\n\treturn [childX, childY];\r\n}\r\n\r\n///Tournament selection of parent for next generation - fittest from a random bunch is returned.\r\nfunction runTournament(generation)\r\n{\r\n\tlet chosenChromosome, fittestChromosome = null;\r\n\r\n\tfor(let i = 0; i < tournamentSize; i++)\r\n\t{\r\n\t\tchosenChromosome = generation[random(generationSize)];\r\n\t\tif(fittestChromosome == null || chosenChromosome.fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = chosenChromosome;\r\n\t}\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Create and return the initial generation of chromosomes\r\nfunction initializeGeneration()\r\n{\r\n\tlet currentGeneration = [];\r\n\tfor(let i = 0; i < generationSize; i++)\r\n\t{\r\n\t\tlet newChromosome = copyObject(Chromosome);\r\n\t\tfor(let siteIndex = 0; siteIndex < numberOfSites; siteIndex++)\r\n\t\t{\r\n\t\t\tlet tempSite = copyObject(Site);\r\n\t\t\ttempSite.x = random(tempWidth + 1);\r\n\t\t\ttempSite.y = random(tempHeight + 1);\r\n\t\t\tnewChromosome.sites.push(tempSite);\r\n\t\t}\r\n\r\n\t\tcalculateAndSetFitness(newChromosome);\r\n\t\tcurrentGeneration.push(newChromosome);\r\n\t}\r\n\r\n\treturn currentGeneration;\r\n}\r\n\r\n///Calculate and set the fitness of a chromosome\r\nfunction calculateAndSetFitness(chromosome)\r\n{\r\n\tdetermineAndSetSiteBoundaries(chromosome);\r\n\tsortSites(chromosome);\r\n\tlet fitness = 0, difference;\r\n\r\n\tfor(let i = 0; i < desiredProportions.length; i++)\r\n\t{\r\n\t\tdifference = ( desiredProportions[i] * totalSurfaceArea ) - chromosome.sites[i].surfaceArea;\r\n\t\tif(difference < 0)\r\n\t\t\tdifference *= -1;\r\n\t\tfitness += difference;\r\n\t}\r\n\r\n\tchromosome.fitness = fitness;\r\n}\r\n\r\n///Sort the sites according to surface area from highest to lowest\r\nfunction sortSites(chromosome)\r\n{\r\n\tlet sites = chromosome.sites;\r\n\tsites.sort(function(siteA, siteB) { return \tsiteB.surfaceArea - siteA.surfaceArea });\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction determineAndSetSiteBoundaries(chromosome)\r\n{\r\n\tfor(let i = 0; i < numberOfSites; i++)\r\n\t\tchromosome.sites[i].surfaceArea = 0;\r\n\r\n\tfor(let row = 0; row < tempHeight; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < tempWidth; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, chromosome.sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tchromosome.sites[equidistantPoints[0]].surfaceArea += 1;\r\n\t\t}\r\n\t}\r\n}\r\n","import JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { downloadPuzzle3D, downloadPuzzle2D };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet piecesJSONObject, pieces, base64Image;\r\nlet desiredFile;\r\n\r\nfunction downloadPuzzle3D(puzzleID)\r\n{\r\n\tdesiredFile = '3D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction downloadPuzzle2D(puzzleID)\r\n{\r\n\tdesiredFile = '2D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tbase64Image = base64Image.split(\",\");\r\n\t\t\tbase64Image = base64Image[1];\r\n\t\t\tif(desiredFile == '3D')\r\n\t\t\t\tgenerateSTLFiles();\r\n\t\t\telse\r\n\t\t\t\tgenerateImageFile();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generateSTLFiles()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\tlet tileFolder = zip.folder(\"tile puzzle\");\r\n\tlet cuboidFolder = zip.folder(\"cuboid puzzle\");\r\n\tcreateTilePrintableFiles(tileFolder, 0, 5);\r\n\r\n\tif(piecesJSONObject.depths === undefined)\r\n\t{\r\n\t\tdepths = [];\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(Math.floor(Math.random() * 8) + 1);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdepths = piecesJSONObject.depths;\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(depths[i]);\r\n\t}\r\n\r\n\tcreateCuboidPrintableFiles(cuboidFolder, depths);\r\n\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction createCuboidPrintableFiles(folder, depthsArray)\r\n{\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet nextTopRight, nextTopLeft, nextBottomRight, nextBottomLeft;\r\n\tlet stlFileFrontFace, stlFileBackFace;\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFileFrontFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tstlFileBackFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\t\r\n\t\t\t\tnextTopLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextTopRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileFrontFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileFrontFace);\r\n\t\t\tstlFileFrontFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileFrontFace);\r\n\r\n\r\n\t\t\ttopLeft.z = 500;\r\n\t\t\tbottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\ttopRight.z = 500;\r\n\t\t\tbottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\r\n\t\t\t\tnextTopLeft.z = 500;\r\n\t\t\t\tnextBottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\t\tnextTopRight.z = 500;\r\n\t\t\t\tnextBottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileBackFace);\r\n\t\t\tstlFileBackFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t}\r\n\r\n\t\tstlFileFrontFace += \"endsolid puzzle\";\r\n\t\tstlFileBackFace += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(front_face).stl\", stlFileFrontFace);\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(back_face).stl\", stlFileBackFace);\r\n\t}\r\n}\r\n\r\nfunction createTilePrintableFiles(folder, zPositionBottom, zPositionTop, optionalSuffix)\r\n{\r\n\tif(optionalSuffix == undefined)\r\n\t\toptionalSuffix = '';\r\n\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet stlFile;\r\n\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFile = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\tstlFile = addVertexToFile(bottomLeft, bottomRight, topRight, stlFile);\r\n\t\t\tstlFile = addVertexToFile(topRight, topLeft, bottomLeft, stlFile);\r\n\t\t}\r\n\t\tstlFile += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + optionalSuffix + \".stl\", stlFile);\r\n\t}\r\n}\r\n\r\nfunction addVertexToFile(vertexA, vertexB, vertexC, stlFile)\r\n{\r\n\tstlFile += \"facet normal 0 0 0\\n\";\r\n\tstlFile += \"outer loop\\n\";\r\n\tstlFile += \"vertex \" + vertexA.x + \" \" + vertexA.y + \" \" + vertexA.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexB.x + \" \" + vertexB.y + \" \" + vertexB.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexC.x + \" \" + vertexC.y + \" \" + vertexC.z + \"\\n\";\r\n\tstlFile += \"endloop\\n\";\r\n\tstlFile += \"endfacet\\n\";\r\n\r\n\treturn stlFile;\r\n}\r\n\r\nfunction generateImageFile()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500);\r\n}\r\n","import * as THREE from 'src/assets/js/three.module.js';\r\nimport { OrbitControls } from 'src/assets/js/OrbitControls.js';\r\nexport { initiate3DCanvas, render3D, render2D };\r\n\r\nlet scene, camera, renderer, line, points, pieceGeometry, pieceGeometryArray, piece;\r\nlet tile;\r\nlet factor = 5;\r\n\r\nfunction initiate3DCanvas(height, width)\r\n{\r\n\tpoints = [];\r\n\tpieceGeometryArray = [];\r\n\tscene = new THREE.Scene();\r\n\tscene.background = new THREE.Color('white');\r\n\tcamera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);\r\n\trenderer = new THREE.WebGLRenderer({antialias: true});\r\n\t// renderer = new THREE.WebGLRenderer();\r\n\trenderer.setSize(height, width);\r\n\r\n\t// camera.lookAt( 0, 0, 0 );\r\n\tcamera.position.z = 750;\r\n\tconst controls = new OrbitControls(camera, renderer.domElement);\r\n\tcontrols.target.set(0, 10, 0);\r\n\tcontrols.update();\r\n}\r\n\r\nfunction render3D(jsonData, appendedString)\r\n{\r\n\twhile(scene.children.length > 0)\r\n\t\tscene.remove(scene.children[0]);\r\n\t\r\n\tlet pieceGeometryArray = extractPoints(jsonData.pieces, jsonData.depths);\r\n\tlet pieceMeshArray = generateAndColorMeshes(pieceGeometryArray, jsonData.colors);\r\n\taddMeshesToScene(pieceMeshArray);\r\n\ttile = document.getElementById('container'+appendedString).innerHTML;\r\n\tdocument.getElementById('container'+appendedString).innerHTML = \"\";\r\n\tdocument.getElementById('container'+appendedString).appendChild(renderer.domElement);\r\n\tanimate();\r\n}\r\n\r\nfunction render2D(appendedString)\r\n{\r\n\tdocument.getElementById('container'+appendedString).innerHTML = tile;\r\n}\r\n\r\nfunction addMeshesToScene(meshArray)\r\n{\r\n\tfor(let mesh of meshArray)\r\n\t{\r\n\t\tmesh.frustumCulled = false;\r\n\t\t// Add to scene\r\n\t\tscene.add(mesh);\r\n\t}\r\n}\r\n\r\nfunction generateAndColorMeshes(pieceGeometryArray, colors)\r\n{\r\n\tlet tempPieceMeshArray = [];\r\n\tlet material;\r\n\tlet numberOfPiecesPerFace = pieceGeometryArray.length/2;\r\n\tlet colorCounter = 0;\r\n\tfor(let i = 0; i < pieceGeometryArray.length; i+=2)\r\n\t{\r\n\t\t// Create mesh with geo and MeshBasicMaterial\r\n\t\tmaterial = new THREE.MeshBasicMaterial({color: colors[(colorCounter % colors.length)]});\r\n\t\ttempPieceMeshArray.push(new THREE.Mesh(pieceGeometryArray[i], material));\r\n\t\tmaterial = new THREE.MeshBasicMaterial({color: colors[( (colorCounter+numberOfPiecesPerFace) % colors.length )]});\r\n\t\ttempPieceMeshArray.push(new THREE.Mesh(pieceGeometryArray[i+1], material));\r\n\r\n\t\tcolorCounter++;\r\n\t}\r\n\r\n\treturn tempPieceMeshArray;\r\n}\r\n\r\nfunction extractPoints(pieces, depths)\r\n{\r\n\tlet topLeft, topRight, bottomLeft, bottomRight, piece;\r\n\tlet tempPieceGeometryArray = [];\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tpiece = pieces[pieceIndex];\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 10);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 10);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 0);\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , getDepth(depths[pieceIndex]));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, 0);\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index], piece[index+1], 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index], piece[index+1], 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2], piece[index+3], 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2], piece[index+3], 0);\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , ( 500 / factor ));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, ( 500 / factor ));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\t}\r\n\r\n\treturn tempPieceGeometryArray;\r\n}\r\n\r\nfunction buildSquare(bottomLeft, bottomRight, topRight, topLeft, index)\r\n{\r\n\tpieceGeometry.vertices.push(bottomLeft, bottomRight, topRight, topLeft);\r\n\tbuildTriangle(index, index+1, index+2);\r\n\tbuildTriangle(index+2, index+3, index);\r\n}\r\n\r\nfunction buildTriangle(point1, point2, point3)\r\n{\r\n\tpieceGeometry.faces.push(new THREE.Face3(point1, point2, point3));\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500) / factor;\r\n}\r\n\r\nfunction animate()\r\n{\r\n\trequestAnimationFrame(animate);\r\n\t// piece.rotation.x += 0.01;\r\n\t// piece.rotation.y += 0.01;\r\n\t// piece.rotation.z += 0.01;\r\n\trenderer.render(scene, camera);\r\n}","/*!\r\n\r\nJSZip v3.5.0 - A JavaScript class for generating and reading zip files\r\n<http://stuartk.com/jszip>\r\n\r\n(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>\r\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.\r\n\r\nJSZip uses the library pako released under the MIT license :\r\nhttps://github.com/nodeca/pako/blob/master/LICENSE\r\n*/\r\n\r\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).JSZip=t()}}(function(){return function s(a,o,h){function u(r,t){if(!o[r]){if(!a[r]){var e=\"function\"==typeof require&&require;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var i=new Error(\"Cannot find module '\"+r+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,function(t){var e=a[r][1][t];return u(e||t)},n,n.exports,s,a,o,h)}return o[r].exports}for(var l=\"function\"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){\"use strict\";var c=t(\"./utils\"),d=t(\"./support\"),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.encode=function(t){for(var e,r,i,n,s,a,o,h=[],u=0,l=t.length,f=l,d=\"string\"!==c.getTypeOf(t);u<t.length;)f=l-u,i=d?(e=t[u++],r=u<l?t[u++]:0,u<l?t[u++]:0):(e=t.charCodeAt(u++),r=u<l?t.charCodeAt(u++):0,u<l?t.charCodeAt(u++):0),n=e>>2,s=(3&e)<<4|r>>4,a=1<f?(15&r)<<2|i>>6:64,o=2<f?63&i:64,h.push(p.charAt(n)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join(\"\")},r.decode=function(t){var e,r,i,n,s,a,o=0,h=0,u=\"data:\";if(t.substr(0,u.length)===u)throw new Error(\"Invalid base64 input, it looks like a data url.\");var l,f=3*(t=t.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&f--,t.charAt(t.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(l=d.uint8array?new Uint8Array(0|f):new Array(0|f);o<t.length;)e=p.indexOf(t.charAt(o++))<<2|(n=p.indexOf(t.charAt(o++)))>>4,r=(15&n)<<4|(s=p.indexOf(t.charAt(o++)))>>2,i=(3&s)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=e,64!==s&&(l[h++]=r),64!==a&&(l[h++]=i);return l}},{\"./support\":30,\"./utils\":32}],2:[function(t,e,r){\"use strict\";var i=t(\"./external\"),n=t(\"./stream/DataWorker\"),s=t(\"./stream/DataLengthProbe\"),a=t(\"./stream/Crc32Probe\");s=t(\"./stream/DataLengthProbe\");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),e=this;return t.on(\"end\",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s(\"uncompressedSize\")).pipe(e.compressWorker(r)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",e)},e.exports=o},{\"./external\":6,\"./stream/Crc32Probe\":25,\"./stream/DataLengthProbe\":26,\"./stream/DataWorker\":27}],3:[function(t,e,r){\"use strict\";var i=t(\"./stream/GenericWorker\");r.STORE={magic:\"\\0\\0\",compressWorker:function(t){return new i(\"STORE compression\")},uncompressWorker:function(){return new i(\"STORE decompression\")}},r.DEFLATE=t(\"./flate\")},{\"./flate\":7,\"./stream/GenericWorker\":28}],4:[function(t,e,r){\"use strict\";var i=t(\"./utils\");var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?\"string\"!==i.getTypeOf(t)?function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{\"./utils\":32}],5:[function(t,e,r){\"use strict\";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){\"use strict\";var i=null;i=\"undefined\"!=typeof Promise?Promise:t(\"lie\"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,n=t(\"pako\"),s=t(\"./utils\"),a=t(\"./stream/GenericWorker\"),o=i?\"uint8array\":\"array\";function h(t,e){a.call(this,\"FlateWorker/\"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic=\"\\b\\0\",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(t){return new h(\"Deflate\",t)},r.uncompressWorker=function(){return new h(\"Inflate\",{})}},{\"./stream/GenericWorker\":28,\"./utils\":32,pako:38}],8:[function(t,e,r){\"use strict\";function A(t,e){var r,i=\"\";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,r,i,n,s){var a,o,h=t.file,u=t.compression,l=s!==O.utf8encode,f=I.transformTo(\"string\",s(h.name)),d=I.transformTo(\"string\",O.utf8encode(h.name)),c=h.comment,p=I.transformTo(\"string\",s(c)),m=I.transformTo(\"string\",O.utf8encode(c)),_=d.length!==h.name.length,g=m.length!==c.length,b=\"\",v=\"\",y=\"\",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var S=0;e&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),\"UNIX\"===n?(C=798,z|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(t){return 63&(t||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+d,b+=\"up\"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+=\"uc\"+A(y.length,2)+y);var E=\"\";return E+=\"\\n\\0\",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+\"\\0\\0\\0\\0\"+A(z,4)+A(i,4)+f+b+p}}var I=t(\"../utils\"),n=t(\"../stream/GenericWorker\"),O=t(\"../utf8\"),B=t(\"../crc32\"),R=t(\"../signature\");function s(t,e,r,i){n.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,n),s.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},s.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return R.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,n){var s=I.transformTo(\"string\",n(i));return R.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+A(t,2)+A(t,2)+A(e,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on(\"error\",function(t){e.error(t)}),this},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},s.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=s},{\"../crc32\":4,\"../signature\":23,\"../stream/GenericWorker\":28,\"../utf8\":31,\"../utils\":32}],9:[function(t,e,r){\"use strict\";var u=t(\"../compressions\"),i=t(\"./ZipFileWorker\");r.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach(function(t,e){h++;var r=function(t,e){var r=t||e,i=u[r];if(!i)throw new Error(r+\" is not a valid compression method !\");return i}(e.options.compression,a.compression),i=e.options.compressionOptions||a.compressionOptions||{},n=e.dir,s=e.date;e._compressWorker(r,i).withStreamInfo(\"file\",{name:t,dir:n,date:s,comment:e.comment||\"\",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(t){o.error(t)}return o}},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(t,e,r){\"use strict\";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files={},this.comment=null,this.root=\"\",this.clone=function(){var t=new i;for(var e in this)\"function\"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t(\"./object\")).loadAsync=t(\"./load\"),i.support=t(\"./support\"),i.defaults=t(\"./defaults\"),i.version=\"3.5.0\",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t(\"./external\"),e.exports=i},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":15,\"./support\":30}],11:[function(t,e,r){\"use strict\";var i=t(\"./utils\"),n=t(\"./external\"),o=t(\"./utf8\"),h=(i=t(\"./utils\"),t(\"./zipEntries\")),s=t(\"./stream/Crc32Probe\"),u=t(\"./nodejsUtils\");function l(i){return new n.Promise(function(t,e){var r=i.decompressed.getContentWorker().pipe(new s);r.on(\"error\",function(t){e(t)}).on(\"end\",function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error(\"Corrupted zip : CRC32 mismatch\")):t()}).resume()})}e.exports=function(t,s){var a=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?n.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):i.prepareContent(\"the loaded zip file\",t,!0,s.optimizedBinaryString,s.base64).then(function(t){var e=new h(s);return e.load(t),e}).then(function(t){var e=[n.Promise.resolve(t)],r=t.files;if(s.checkCRC32)for(var i=0;i<r.length;i++)e.push(l(r[i]));return n.Promise.all(e)}).then(function(t){for(var e=t.shift(),r=e.files,i=0;i<r.length;i++){var n=r[i];a.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:s.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a})}},{\"./external\":6,\"./nodejsUtils\":14,\"./stream/Crc32Probe\":25,\"./utf8\":31,\"./utils\":32,\"./zipEntries\":33}],12:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../stream/GenericWorker\");function s(t,e){n.call(this,\"Nodejs stream input adapter for \"+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on(\"data\",function(t){e.push({data:t,meta:{percent:0}})}).on(\"error\",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on(\"end\",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{\"../stream/GenericWorker\":28,\"../utils\":32}],13:[function(t,e,r){\"use strict\";var n=t(\"readable-stream\").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on(\"data\",function(t,e){i.push(t)||i._helper.pause(),r&&r(e)}).on(\"error\",function(t){i.emit(\"error\",t)}).on(\"end\",function(){i.push(null)})}t(\"../utils\").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{\"../utils\":32,\"readable-stream\":16}],14:[function(t,e,r){\"use strict\";e.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if(\"number\"==typeof t)throw new Error('The \"data\" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&\"function\"==typeof t.on&&\"function\"==typeof t.pause&&\"function\"==typeof t.resume}}},{}],15:[function(t,e,r){\"use strict\";function s(t,e,r){var i,n=u.getTypeOf(e),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),\"string\"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=_(t))&&b.call(this,i,!0);var a=\"string\"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(e instanceof d&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e=\"\",s.compression=\"STORE\",n=\"string\");var o=null;o=e instanceof d||e instanceof l?e:p.isNode&&p.isStream(e)?new m(t,e):u.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var h=new c(t,o,s);this.files[t]=h}var n=t(\"./utf8\"),u=t(\"./utils\"),l=t(\"./stream/GenericWorker\"),a=t(\"./stream/StreamHelper\"),f=t(\"./defaults\"),d=t(\"./compressedObject\"),c=t(\"./zipObject\"),o=t(\"./generate\"),p=t(\"./nodejsUtils\"),m=t(\"./nodejs/NodejsStreamInputAdapter\"),_=function(t){\"/\"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf(\"/\");return 0<e?t.substring(0,e):\"\"},g=function(t){return\"/\"!==t.slice(-1)&&(t+=\"/\"),t},b=function(t,e){return e=void 0!==e?e:f.createFolders,t=g(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function h(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(r){var i=[];return this.forEach(function(t,e){r(t,e)&&i.push(e)}),i},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,s.call(this,t,e,r),this;if(h(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(t,e){return e.dir&&r.test(t)});var t=this.root+r,e=b.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(r){r=this.root+r;var t=this.files[r];if(t||(\"/\"!==r.slice(-1)&&(r+=\"/\"),t=this.files[r]),t&&!t.dir)delete this.files[r];else for(var e=this.filter(function(t,e){return e.name.slice(0,r.length)===r}),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(t){var e,r={};try{if((r=u.extend(t||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),\"binarystring\"===r.type&&(r.type=\"string\"),!r.type)throw new Error(\"No output type specified.\");u.checkSupport(r.type),\"darwin\"!==r.platform&&\"freebsd\"!==r.platform&&\"linux\"!==r.platform&&\"sunos\"!==r.platform||(r.platform=\"UNIX\"),\"win32\"===r.platform&&(r.platform=\"DOS\");var i=r.comment||this.comment||\"\";e=o.generateWorker(this,r,i)}catch(t){(e=new l(\"error\")).error(t)}return new a(e,r.type||\"string\",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type=\"nodebuffer\"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=i},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":12,\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31,\"./utils\":32,\"./zipObject\":35}],16:[function(t,e,r){e.exports=t(\"stream\")},{stream:void 0}],17:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],18:[function(t,e,r){\"use strict\";var i=t(\"../utils\");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+t+\"). Corrupted zip ?\")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo(\"string\",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{\"../utils\":32}],19:[function(t,e,r){\"use strict\";var i=t(\"./Uint8ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./Uint8ArrayReader\":21}],20:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],21:[function(t,e,r){\"use strict\";var i=t(\"./ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./ArrayReader\":17}],22:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../support\"),s=t(\"./ArrayReader\"),a=t(\"./StringReader\"),o=t(\"./NodeBufferReader\"),h=t(\"./Uint8ArrayReader\");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),\"string\"!==e||n.uint8array?\"nodebuffer\"===e?new o(t):n.uint8array?new h(i.transformTo(\"uint8array\",t)):new s(i.transformTo(\"array\",t)):new a(t)}},{\"../support\":30,\"../utils\":32,\"./ArrayReader\":17,\"./NodeBufferReader\":19,\"./StringReader\":20,\"./Uint8ArrayReader\":21}],23:[function(t,e,r){\"use strict\";r.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",r.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",r.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",r.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",r.DATA_DESCRIPTOR=\"PK\u0007\\b\"},{}],24:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../utils\");function s(t){i.call(this,\"ConvertWorker to \"+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],25:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../crc32\");function s(){i.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}t(\"../utils\").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{\"../crc32\":4,\"../utils\":32,\"./GenericWorker\":28}],26:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataLengthProbe for \"+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],27:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataWorker\");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":t=this.data.substring(this.index,e);break;case\"uint8array\":t=this.data.subarray(this.index,e);break;case\"array\":case\"nodebuffer\":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],28:[function(t,e,r){\"use strict\";function i(t){this.name=t||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit(\"data\",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit(\"error\",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit(\"error\",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.end()}),t.on(\"error\",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+t:t}},e.exports=i},{}],29:[function(t,e,r){\"use strict\";var h=t(\"../utils\"),n=t(\"./ConvertWorker\"),s=t(\"./GenericWorker\"),u=t(\"../base64\"),i=t(\"../support\"),a=t(\"../external\"),o=null;if(i.nodestream)try{o=t(\"../nodejs/NodejsStreamOutputAdapter\")}catch(t){}function l(t,o){return new a.Promise(function(e,r){var i=[],n=t._internalType,s=t._outputType,a=t._mimeType;t.on(\"data\",function(t,e){i.push(t),o&&o(e)}).on(\"error\",function(t){i=[],r(t)}).on(\"end\",function(){try{var t=function(t,e,r){switch(t){case\"blob\":return h.newBlob(h.transformTo(\"arraybuffer\",e),r);case\"base64\":return u.encode(e);default:return h.transformTo(t,e)}}(s,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case\"string\":return e.join(\"\");case\"array\":return Array.prototype.concat.apply([],e);case\"uint8array\":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case\"nodebuffer\":return Buffer.concat(e);default:throw new Error(\"concat : unsupported type '\"+t+\"'\")}}(n,i),a);e(t)}catch(t){r(t)}i=[]}).resume()})}function f(t,e,r){var i=e;switch(e){case\"blob\":case\"arraybuffer\":i=\"uint8array\";break;case\"base64\":i=\"string\"}try{this._internalType=i,this._outputType=e,this._mimeType=r,h.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s(\"error\"),this._worker.error(t)}}f.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var r=this;return\"data\"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){h.delay(e,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new o(this,{objectMode:\"nodebuffer\"!==this._outputType},t)}},e.exports=f},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":13,\"../support\":30,\"../utils\":32,\"./ConvertWorker\":24,\"./GenericWorker\":28}],30:[function(t,e,r){\"use strict\";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,r.nodebuffer=\"undefined\"!=typeof Buffer,r.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:\"application/zip\"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob(\"application/zip\").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t(\"readable-stream\").Readable}catch(t){r.nodestream=!1}},{\"readable-stream\":16}],31:[function(t,e,s){\"use strict\";for(var o=t(\"./utils\"),h=t(\"./support\"),r=t(\"./nodejsUtils\"),i=t(\"./stream/GenericWorker\"),u=new Array(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;u[254]=u[254]=1;function a(){i.call(this,\"utf-8 decode\"),this.leftOver=null}function l(){i.call(this,\"utf-8 encode\")}s.utf8encode=function(t){return h.nodebuffer?r.newBufferFrom(t,\"utf-8\"):function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=h.uint8array?new Uint8Array(o):new Array(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},s.utf8decode=function(t){return h.nodebuffer?o.transformTo(\"nodebuffer\",t).toString(\"utf-8\"):function(t){var e,r,i,n,s=t.length,a=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)a[r++]=i;else if(4<(n=u[i]))a[r++]=65533,e+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&e<s;)i=i<<6|63&t[e++],n--;1<n?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(t=o.transformTo(h.uint8array?\"uint8array\":\"array\",t))},o.inherits(a,i),a.prototype.processChunk=function(t){var e=o.transformTo(h.uint8array?\"uint8array\":\"array\",t.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}(e),n=e;i!==e.length&&(h.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,i),l.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=l},{\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./support\":30,\"./utils\":32}],32:[function(t,e,a){\"use strict\";var o=t(\"./support\"),h=t(\"./base64\"),r=t(\"./nodejsUtils\"),i=t(\"set-immediate-shim\"),u=t(\"./external\");function n(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}a.newBlob=function(e,r){a.checkSupport(\"blob\");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error(\"Bug : can't construct the Blob.\")}}};var s={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)\"array\"===e||\"nodebuffer\"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join(\"\")},stringifyByChar:function(t){for(var e=\"\",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=a.getTypeOf(t),i=!0;if(\"uint8array\"===r?i=s.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}a.applyFromCharCode=f;var c={};c.string={string:n,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,r.allocBuffer(t.length))}},c.array={string:f,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:n},a.transformTo=function(t,e){if(e=e||\"\",!t)return e;a.checkSupport(t);var r=a.getTypeOf(e);return c[r][t](e)},a.getTypeOf=function(t){return\"string\"==typeof t?\"string\":\"[object Array]\"===Object.prototype.toString.call(t)?\"array\":o.nodebuffer&&r.isBuffer(t)?\"nodebuffer\":o.uint8array&&t instanceof Uint8Array?\"uint8array\":o.arraybuffer&&t instanceof ArrayBuffer?\"arraybuffer\":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+\" is not supported by this platform\")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,r,i=\"\";for(r=0;r<(t||\"\").length;r++)i+=\"\\\\x\"+((e=t.charCodeAt(r))<16?\"0\":\"\")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,r){i(function(){t.apply(r||null,e||[])})},a.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},a.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},a.prepareContent=function(r,t,i,n,s){return u.Promise.resolve(t).then(function(i){return o.blob&&(i instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(i)))&&\"undefined\"!=typeof FileReader?new u.Promise(function(e,r){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){r(t.target.error)},t.readAsArrayBuffer(i)}):i}).then(function(t){var e=a.getTypeOf(t);return e?(\"arraybuffer\"===e?t=a.transformTo(\"uint8array\",t):\"string\"===e&&(s?t=h.decode(t):i&&!0!==n&&(t=function(t){return l(t,o.uint8array?new Uint8Array(t.length):new Array(t.length))}(t))),t):u.Promise.reject(new Error(\"Can't read the data of '\"+r+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":14,\"./support\":30,\"set-immediate-shim\":54}],33:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),n=t(\"./utils\"),s=t(\"./signature\"),a=t(\"./zipEntry\"),o=(t(\"./utf8\"),t(\"./support\"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+n.pretty(e)+\", expected \"+n.pretty(t)+\")\")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?\"uint8array\":\"array\",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(i)+\" bytes.\")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{\"./reader/readerFor\":22,\"./signature\":23,\"./support\":30,\"./utf8\":31,\"./utils\":32,\"./zipEntry\":34}],34:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),s=t(\"./utils\"),n=t(\"./compressedObject\"),a=t(\"./crc32\"),o=t(\"./utf8\"),h=t(\"./compressions\"),u=t(\"./support\");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+s.pretty(this.compressionMethod)+\" unknown (inner file : \"+s.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(n)},handleUTF8:function(){var t=u.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":22,\"./support\":30,\"./utf8\":31,\"./utils\":32}],35:[function(t,e,r){\"use strict\";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=t(\"./stream/StreamHelper\"),n=t(\"./stream/DataWorker\"),a=t(\"./utf8\"),o=t(\"./compressedObject\"),h=t(\"./stream/GenericWorker\");i.prototype={internalStream:function(t){var e=null,r=\"string\";try{if(!t)throw new Error(\"No output type specified.\");var i=\"string\"===(r=t.toLowerCase())||\"text\"===r;\"binarystring\"!==r&&\"text\"!==r||(r=\"string\"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h(\"error\")).error(t)}return new s(e,r,\"\")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||\"nodebuffer\").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var u=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],l=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},f=0;f<u.length;f++)i.prototype[u[f]]=l;e.exports=i},{\"./compressedObject\":2,\"./stream/DataWorker\":27,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31}],36:[function(t,l,e){(function(e){\"use strict\";var r,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var n=0,s=new t(u),a=e.document.createTextNode(\"\");s.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)r=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var t=e.document.createElement(\"script\");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var o=new e.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var t,e;i=!0;for(var r=h.length;r;){for(e=h,h=[],t=-1;++t<r;)e[t]();r=h.length}i=!1}l.exports=function(t){1!==h.push(t)||i||r()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],37:[function(t,e,r){\"use strict\";var n=t(\"immediate\");function u(){}var l={},s=[\"REJECTED\"],a=[\"FULFILLED\"],i=[\"PENDING\"];function o(t){if(\"function\"!=typeof t)throw new TypeError(\"resolver must be a function\");this.state=i,this.queue=[],this.outcome=void 0,t!==u&&c(this,t)}function h(t,e,r){this.promise=t,\"function\"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,i){n(function(){var t;try{t=r(i)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError(\"Cannot resolve promise with itself\")):l.resolve(e,t)})}function d(t){var e=t&&t.then;if(t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof e)return function(){e.apply(t,arguments)}}function c(e,t){var r=!1;function i(t){r||(r=!0,l.reject(e,t))}function n(t){r||(r=!0,l.resolve(e,t))}var s=p(function(){t(n,i)});\"error\"===s.status&&i(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status=\"success\"}catch(t){r.status=\"error\",r.value=t}return r}(e.exports=o).prototype.finally=function(e){if(\"function\"!=typeof e)return this;var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if(\"function\"!=typeof t&&this.state===a||\"function\"!=typeof e&&this.state===s)return this;var r=new this.constructor(u);this.state!==i?f(r,this.state===a?t:e,this.outcome):this.queue.push(new h(r,t,e));return r},h.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){l.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=p(d,e);if(\"error\"===r.status)return l.reject(t,r.value);var i=r.value;if(i)c(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},l.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},o.resolve=function(t){if(t instanceof this)return t;return l.resolve(new this(u),t)},o.reject=function(t){var e=new this(u);return l.reject(e,t)},o.all=function(t){var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var i=t.length,n=!1;if(!i)return this.resolve([]);var s=new Array(i),a=0,e=-1,o=new this(u);for(;++e<i;)h(t[e],e);return o;function h(t,e){r.resolve(t).then(function(t){s[e]=t,++a!==i||n||(n=!0,l.resolve(o,s))},function(t){n||(n=!0,l.reject(o,t))})}},o.race=function(t){var e=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var r=t.length,i=!1;if(!r)return this.resolve([]);var n=-1,s=new this(u);for(;++n<r;)a=t[n],e.resolve(a).then(function(t){i||(i=!0,l.resolve(s,t))},function(t){i||(i=!0,l.reject(s,t))});var a;return s}},{immediate:36}],38:[function(t,e,r){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(t,e,r){\"use strict\";var a=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),h=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),s=t(\"./zlib/zstream\"),u=Object.prototype.toString,l=0,f=-1,d=0,c=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:f,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(n[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?h.string2buf(e.dictionary):\"[object ArrayBuffer]\"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=a.deflateSetDictionary(this.strm,i))!==l)throw new Error(n[r]);this._dict_set=!0}}function i(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||n[r.err];return r.result}p.prototype.push=function(t,e){var r,i,n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=h.string2buf(t):\"[object ArrayBuffer]\"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),1!==(r=a.deflate(n,i))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==r);return 4===i?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==i||(this.onEnd(l),!(n.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=p,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(t,e,r){\"use strict\";var d=t(\"./zlib/inflate\"),c=t(\"./utils/common\"),p=t(\"./utils/strings\"),m=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),s=t(\"./zlib/gzheader\"),_=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,e.windowBits);if(r!==m.Z_OK)throw new Error(i[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(t,e){var r=new a(e);if(r.push(t,!0),r.err)throw r.msg||i[r.err];return r.result}a.prototype.push=function(t,e){var r,i,n,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?m.Z_FINISH:m.Z_NO_FLUSH,\"string\"==typeof t?h.input=p.binstring2buf(t):\"[object ArrayBuffer]\"===_.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new c.Buf8(u),h.next_out=0,h.avail_out=u),(r=d.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o=\"string\"==typeof l?p.string2buf(l):\"[object ArrayBuffer]\"===_.call(l)?new Uint8Array(l):l,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||i!==m.Z_FINISH&&i!==m.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=p.utf8border(h.output,h.next_out),s=h.next_out-n,a=p.buf2string(h.output,n),h.next_out=s,h.avail_out=u-s,s&&c.arraySet(h.output,h.output,n,s,0),this.onData(a)):this.onData(c.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(i=m.Z_FINISH),i===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):i!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===m.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},r.ungzip=o},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(\"object\"!=typeof r)throw new TypeError(r+\"must be non-object\");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){\"use strict\";var h=t(\"./common\"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var u=new h.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var r=\"\",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}u[254]=u[254]=1,r.string2buf=function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h.Buf8(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new h.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,a=e||t.length,o=new Array(2*a);for(r=i=0;r<a;)if((n=t[r++])<128)o[i++]=n;else if(4<(s=u[n]))o[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<a;)n=n<<6|63&t[r++],s--;1<s?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return l(o,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}},{\"./common\":41}],43:[function(t,e,r){\"use strict\";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){\"use strict\";var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){\"use strict\";var h,d=t(\"../utils/common\"),u=t(\"./trees\"),c=t(\"./adler32\"),p=t(\"./crc32\"),i=t(\"./messages\"),l=0,f=4,m=0,_=-2,g=-1,b=4,n=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(t,e){return t.msg=i[e],e}function T(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function F(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(d.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function N(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function P(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,u=t.window,l=t.w_mask,f=t.prev,d=t.strstart+S,c=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===c&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(i=S-(d-s),s=d-S,a<i){if(t.match_start=e,o<=(a=i))break;c=u[s+a-1],p=u[s+a]}}}while((e=f[e&l])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function j(t){var e,r,i,n,s,a,o,h,u,l,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(d.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--r;);for(e=r=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--r;);n+=f}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,h=t.strstart+t.lookahead,u=n,l=void 0,l=a.avail_in,u<l&&(l=u),r=0===l?0:(a.avail_in-=l,d.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=c(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=x)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+x-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function Z(t,e){for(var r,i;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r)),t.match_length>=x)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function W(t,e){for(var r,i,n;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*w),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(k+1),this.heap=new d.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:E,t.adler=2===e.wrap?0:1,e.last_flush=l,u._tr_init(e),m):R(t,_)}function K(t){var e=G(t);return e===m&&function(t){t.window_size=2*t.w_size,D(t.head),t.max_lazy_match=h[t.level].max_lazy,t.good_match=h[t.level].good_length,t.nice_match=h[t.level].nice_length,t.max_chain_length=h[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,r,i,n,s){if(!t)return _;var a=1;if(e===g&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),n<1||y<n||r!==v||i<8||15<i||e<0||9<e||s<0||b<s)return R(t,_);8===i&&(i=9);var o=new H;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,K(t)}h=[new M(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&e===l)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-z&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?_:(t.state.gzhead=e,m):_},r.deflate=function(t,e){var r,i,n,s;if(!t||!t.state||5<e||e<0)return t?R(t,_):_;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return R(t,0===t.avail_out?-5:_);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===C)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=p(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,3),i.status=E);else{var a=v+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=E,P(i,a),0!==i.strstart&&(P(i,t.adler>>>16),P(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,m}else if(0===t.avail_in&&T(e)<=T(r)&&e!==f)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==l&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===l)return A;break}if(t.match_length=0,r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):3===i.strategy?function(t,e){for(var r,i,n,s,a=t.window;;){if(t.lookahead<=S){if(j(t),t.lookahead<=S&&e===l)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=a[n=t.strstart-1])===a[++n]&&i===a[++n]&&i===a[++n]){s=t.strstart+S;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=S-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(r=u._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):h[i.level].func(i,e);if(o!==O&&o!==B||(i.status=666),o===A||o===O)return 0===t.avail_out&&(i.last_flush=-1),m;if(o===I&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,m}return e!==f?m:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(P(i,t.adler>>>16),P(i,65535&t.adler)),F(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?m:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?R(t,_):(t.state=null,e===E?R(t,-3):m):_},r.deflateSetDictionary=function(t,e){var r,i,n,s,a,o,h,u,l=e.length;if(!t||!t.state)return _;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(t.adler=c(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new d.Buf8(r.w_size),d.arraySet(u,e,l-r.w_size,r.w_size,0),e=u,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,j(r);r.lookahead>=x;){for(i=r.strstart,n=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+x-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,m},r.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(t,e,r){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){\"use strict\";e.exports=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C;r=t.state,i=t.next_in,z=t.input,n=i+(t.avail_in-5),s=t.next_out,C=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=m[c&g];e:for(;;){if(c>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(c&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg=\"invalid literal/length code\",r.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(c+=z[i++]<<p,p+=8),w+=c&(1<<y)-1,c>>>=y,p-=y),p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=_[c&b];r:for(;;){if(c>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(c&(1<<y)-1)];continue r}t.msg=\"invalid distance code\",r.mode=30;break t}if(k=65535&v,p<(y&=15)&&(c+=z[i++]<<p,(p+=8)<y&&(c+=z[i++]<<p,p+=8)),h<(k+=c&(1<<y)-1)){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(c>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(S=d,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=d[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=d[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(i<n&&s<o);i-=w=p>>3,c&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(t,e,r){\"use strict\";var I=t(\"../utils/common\"),O=t(\"./adler32\"),B=t(\"./crc32\"),R=t(\"./inffast\"),T=t(\"./inftrees\"),D=1,F=2,N=0,U=-2,P=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(i),e.distcode=e.distdyn=new I.Buf32(n),e.sane=1,e.back=-1,N):U}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):U}function h(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?U:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):U}function u(t,e){var r,i;return t?(i=new s,(t.state=i).window=null,(r=h(t,e))!==N&&(t.state=null),r):U}var l,f,d=!0;function j(t){if(d){var e;for(l=new I.Buf32(512),f=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(T(D,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;T(F,t.lens,0,32,f,0,t.work,{bits:5}),d=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function Z(t,e,r,i){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),i>=s.wsize?(I.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(n=s.wsize-s.wnext)&&(n=i),I.arraySet(s.window,e,r-i,n,s.wnext),(i-=n)?(I.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,15)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return U;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,f=o,d=h,x=N;t:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg=\"incorrect header check\",r.mode=30;break}if(8!=(15&u)){t.msg=\"unknown compression method\",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg=\"invalid window size\",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){t.msg=\"unknown compression method\",r.mode=30;break}if(57344&r.flags){t.msg=\"unknown header flags set\",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,i,s,c,k)),512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg=\"header crc mismatch\",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}t.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==e)break;u>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg=\"invalid block type\",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg=\"invalid stored block lengths\",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),h<c&&(c=h),0===c)break t;I.arraySet(n,i,s,c,a),o-=c,s+=c,h-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg=\"too many length or distance symbols\",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid code lengths set\",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){t.msg=\"invalid bit length repeat\",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg=\"invalid bit length repeat\",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg=\"invalid code -- missing end-of-block\",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid literal/lengths set\",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){t.msg=\"invalid distances set\",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,R(t,d),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){t.msg=\"invalid literal/length code\",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){t.msg=\"invalid distance code\",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg=\"invalid distance too far back\",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=d-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=n,p=a-r.offset,c=r.length;for(h<c&&(c=h),h-=c,r.length-=c;n[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=i[s++]<<l,l+=8}if(d-=h,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?B(r.check,n,d,a-d):O(r.check,n,d,a-d)),d=h,(r.flags?u:L(u))!==r.check){t.msg=\"incorrect data check\",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg=\"incorrect length check\",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return U}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Z(t,t.output,t.next_out,d-t.avail_out)?(r.mode=31,-4):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?B(r.check,n,d,t.next_out-d):O(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===d||4===e)&&x===N&&(x=-5),x)},r.inflateEnd=function(t){if(!t||!t.state)return U;var e=t.state;return e.window&&(e.window=null),t.state=null,N},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?U:((r.head=e).done=!1,N):U},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,e,i,0)!==r.check?-3:Z(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(t,e,r){\"use strict\";var D=t(\"../utils/common\"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,i,n,s,a,o){var h,u,l,f,d,c,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<i;v++)O[e[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===t||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<i;v++)0!==e[r+v]&&(a[B[e[r+v]]++]=v);if(c=0===t?(A=R=a,19):1===t?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,d=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<c?(m=0,a[v]):a[v]>c?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;n[d+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=e[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),d+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===t&&852<C||2===t&&592<C)return 1;n[l=E&f]=k<<24|x<<16|d-s|0}}return 0!==E&&(n[d+E]=b-S<<24|64<<16|0),o.bits=k,0}},{\"../utils/common\":41}],51:[function(t,e,r){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],52:[function(t,e,r){\"use strict\";var n=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,a=29,u=256,l=u+1+a,f=30,d=19,_=2*l+1,g=15,c=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));i(z);var C=new Array(2*f);i(C);var E=new Array(512);i(E);var A=new Array(256);i(A);var I=new Array(a);i(I);var O,B,R,T=new Array(f);function D(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?E[t]:E[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>c-r?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=r-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function L(t,e,r){P(t,r[2*e],r[2*e+1])}function j(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function Z(t,e,r){var i,n,s=new Array(g+1),a=0;for(i=1;i<=g;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function W(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?U(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function G(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&H(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!H(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function K(t,e,r){var i,n,s,a,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(s=A[n])+u+1,e),0!==(a=w[s])&&P(t,n-=I[s],a),L(t,s=N(--i),r),0!==(a=k[s])&&P(t,i-=T[s],a)),o<t.last_lit;);L(t,m,e)}function Y(t,e){var r,i,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)G(t,s,r);for(n=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,s[2*n]=s[2*r]+s[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,s[2*r+1]=s[2*i+1]=n,t.heap[1]=n++,G(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<_;r++)p<(s=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(s=p,m++),h[2*i+1]=s,u<i||(t.bl_count[s]++,a=0,c<=i&&(a=d[i-c]),o=h[2*i],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)u<(n=t.heap[--r])||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),i--)}}(t,e),Z(s,u,t.bl_count)}function X(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*b]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*y]++,s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function V(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<u)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(L(t,n,t.bl_tree),o--),L(t,b,t.bl_tree),P(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),P(t,o-3,3)):(L(t,y,t.bl_tree),P(t,o-11,7));s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}i(T);var q=!1;function J(t,e,r,i){P(t,(s<<1)+(i?1:0),3),function(t,e,r,i){M(t),i&&(U(t,r),U(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){q||(function(){var t,e,r,i,n,s=new Array(g+1);for(i=r=0;i<a-1;i++)for(I[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(A[r-1]=i,i=n=0;i<16;i++)for(T[i]=n,t=0;t<1<<k[i];t++)E[n++]=i;for(n>>=7;i<f;i++)for(T[i]=n<<7,t=0;t<1<<k[i]-7;t++)E[256+n++]=i;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)z[2*t+1]=8,t++,s[8]++;for(;t<=255;)z[2*t+1]=9,t++,s[9]++;for(;t<=279;)z[2*t+1]=7,t++,s[7]++;for(;t<=287;)z[2*t+1]=8,t++,s[8]++;for(Z(z,l+1,s),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=j(t,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,d,p)}(),q=!0),t.l_desc=new F(t.dyn_ltree,O),t.d_desc=new F(t.dyn_dtree,B),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},r._tr_stored_block=J,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?J(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),K(t,z,C)):(P(t,4+(i?1:0),3),function(t,e,r,i){var n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*S[n]+1],3);V(t,t.dyn_ltree,e-1),V(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&M(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(A[r]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),L(t,m,z),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{\"../utils/common\":41}],53:[function(t,e,r){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){\"use strict\";e.exports=\"function\"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)});","import Konva from 'konva';\r\nimport { initiate3DCanvas, render3D, render2D } from 'src/assets/js/generate3D.js';\r\nexport { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard, getCurrentRenderMode };\r\n\r\nlet apiURL = \"https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle\";\r\nlet distanceMetric = 'euclidean';\r\nlet token;\r\n\r\nlet canvas, canvasCoords;\r\nlet width =  500, height = 500;\r\nlet stage, layer;\r\nlet pointsArray, pieces;\r\nlet sites, siteBoundaries;\r\n\r\nlet colorPalettes = [];\r\nlet selectedPalette;\r\n\r\nlet appendedString;\r\nlet currentRenderMode;\r\nlet hoverOverPoint = false;\r\nlet disableEditMode = false;\r\nlet deletePointButtonClicked = false;\r\nlet piecesJSONObject;\r\n\r\nlet editIcon, deleteIcon;\r\n\r\n///Make an array with desired colors - can be hex values or names\r\nlet defaultPalette = ['plum', 'tomato', 'orange', 'violet', 'gray', 'mediumseagreen', 'lightgray', 'slateblue', 'brown', 'aquamarine', 'antiquewhite', 'red', 'green'];\r\n///Add the array to the page using this function with the array as a first and the desired name as a second parameter\r\naddColorPalette(defaultPalette, \"Default\");\r\n\r\nlet shadesOfRedPalette = ['crimson', 'darkred', 'coral', 'firebrick', 'indianred', 'maroon', 'orangered', 'palevioletred', 'red', 'tomato', 'brown'];\r\naddColorPalette(shadesOfRedPalette, \"Shades Of Red\");\r\n\r\nlet shadesOfGreenPalette = ['teal', 'mediumspringgreen', 'limegreen', 'forestgreen', 'mediumseagreen', 'lawngreen', 'palegreen', 'greenyellow', 'aquamarine'];\r\naddColorPalette(shadesOfGreenPalette, \"Shades of Green\");\r\n\r\nlet shadesOfBluePalette = ['darkblue', 'deepskyblue', 'mediumblue', 'dodgerblue', 'midnightblue', 'royalblue', 'darkslateblue', 'cornflowerblue', 'skyblue', 'powderblue'];\r\naddColorPalette(shadesOfBluePalette, \"Shades of Blue\");\r\n\r\n///Add a color palette to the page and needed functionality\r\nfunction addColorPalette(arrayOfColors, paletteName)\r\n{\r\n\tcolorPalettes.push(arrayOfColors);\r\n}\r\n\r\n///Changes the displayed color palette used on the puzzle and re-renders it\r\nfunction changePuzzleColorPalette(colors)\r\n{\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlayer.removeChildren();\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = colors;\r\n\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\tpieces[i].attrs.stroke = colors[i % colors.length];\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\r\n\t\tif(currentRenderMode == '3D')\r\n\t\t\trender3D(piecesJSONObject, appendedString);\r\n\t\telse\r\n\t\t\tlayer.draw();\r\n\t\t\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t}\r\n}\r\n\r\n///Randomizes the color palette used on the puzzle\r\nfunction randomizePuzzleColorPalette()\r\n{\r\n\tselectedPalette = [];\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlet rgbColor;\r\n\t\tlayer.removeChildren();\r\n\t\tselectedPalette = getRandomColorsArray(pieces.length*2);\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\tpieces[i].attrs.stroke = selectedPalette[i];\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = selectedPalette;\r\n\t\tif(currentRenderMode == '3D')\r\n\t\t\trender3D(piecesJSONObject, appendedString);\r\n\t\telse\r\n\t\t\tlayer.draw();\r\n\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t}\r\n}\r\n\r\nfunction getRandomColorsArray(n)\r\n{\r\n\tlet randomColorArray = [];\r\n\tfor(let i = 0; i < n; i++)\r\n\t{\r\n\t\trandomColorArray.push(getRandomRGB());\r\n\t}\r\n\r\n\treturn randomColorArray;\r\n}\r\n\r\n///Returns a random RGB value\r\nfunction getRandomRGB()\r\n{\r\n\tlet r = Math.floor(Math.random() * 256);\r\n\tlet g = Math.floor(Math.random() * 256);\r\n\tlet b = Math.floor(Math.random() * 256);\r\n\treturn \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n}\r\n\r\n///Initialize data and set functions for buttons\r\nfunction initializeData(append)\r\n{\r\n\tappendedString = append;\r\n\tif(appendedString == undefined)\r\n\t\tappendedString = '';\r\n\r\n\tsites = [];\r\n\tsiteBoundaries = [];\r\n\tpieces = [];\r\n\r\n\tdisableEditMode = false;\r\n\r\n\tselectedPalette = defaultPalette;\r\n\r\n\tcurrentRenderMode = '2D';\r\n\tcanvas = document.getElementById('container'+appendedString);\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'container'+appendedString,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\r\n\tstage.add(layer);\r\n\r\n\tcanvas.addEventListener('mousedown', function(event){\r\n\t\tif(!disableEditMode && !hoverOverPoint)\r\n\t\t{\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tlet x = event.clientX - canvasCoords.x;\r\n\t\t\tlet y = event.clientY - canvasCoords.y;\r\n\r\n\t\t\tlet point = createPoint(x, y);\r\n\r\n\t\t\tlayer.add(point);\r\n\t\t\tlayer.draw();\r\n\t\t\tconsole.log(\"X: \" + x + \" Y: \" + y);\r\n\t\t}\r\n\t});\r\n\r\n\tif(document.getElementById('generatePuzzleButton') != null)\r\n\t\tdocument.getElementById('generatePuzzleButton').addEventListener('mousedown', generatePuzzle);\r\n\r\n\tdocument.getElementById('euclideanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('euclidean');\r\n\t});\r\n\r\n\tdocument.getElementById('manhattanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('manhattan');\r\n\t});\r\n\r\n\tdocument.getElementById('saveButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\tsavePuzzle(appendedString);\r\n\t});\r\n\r\n\tif(document.getElementById('deletePointButton') != null)\r\n\t{\r\n\t\teditIcon = document.getElementById('editPointButtonIcon');\r\n\t\tdeleteIcon = document.getElementById('deletePointButtonIcon');\r\n\t\tif(editIcon != null)\r\n\t\t\teditIcon.remove();\r\n\r\n\t\tdocument.getElementById('deletePointButton').addEventListener('mousedown', function() {\r\n\t\t\tdeletePointButtonClicked = !deletePointButtonClicked;\r\n\t\t\tif(deletePointButtonClicked)\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = true;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(editIcon);\r\n\t\t\t\tthis.innerHTML += 'Edit Mode';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = false;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(deleteIcon);\r\n\t\t\t\tthis.innerHTML += 'Delete Mode';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdocument.getElementById('randomizeColorsButton'+appendedString).addEventListener('mousedown', randomizePuzzleColorPalette);\r\n\r\n\tlet palettes = document.getElementsByClassName('colorPalettes');\r\n\r\n\tfor(let paletteIndex = 0; paletteIndex < palettes.length; paletteIndex++)\r\n\t{\r\n\t\tpalettes[paletteIndex].addEventListener('mousedown', function(){\r\n\t\t\tselectedPalette = colorPalettes[this.getAttribute('paletteid')];\r\n\t\t\tchangePuzzleColorPalette(selectedPalette);\r\n\t\t});\r\n\t}\r\n\r\n\t// document.getElementById('saveAndSubmitButton').addEventListener('mousedown', function() {\r\n\t// \t// let puzzleImage = stage.toDataURL({ pixelRatio: 0.25 });\r\n\t// \t// document.getElementById('testingImg').src = puzzleImage;\r\n\t// \tsavePuzzle(true);\r\n\t// });\r\n\r\n\r\n\tif(document.getElementById('generate3DButton'+appendedString) != null)\r\n\t{\r\n\t\tinitiate3DCanvas(height, width);\r\n\t\tdocument.getElementById('generate3DButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\t\tif(currentRenderMode == '2D')\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('generate3DButton'+appendedString).innerHTML = 'Generate 2D';\r\n\t\t\t\trender3D(JSON.parse(piecesJSONObject), appendedString);\r\n\t\t\t\tcurrentRenderMode = '3D';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('generate3DButton'+appendedString).innerHTML = 'Generate 3D';\r\n\t\t\t\trender2D(appendedString);\r\n\t\t\t\tcurrentRenderMode = '2D';\r\n\t\t\t\tstage = new Konva.Stage({\r\n\t\t\t\t\tcontainer: 'container'+appendedString,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t});\r\n\t\t\t\tstage.add(layer);\r\n\t\t\t\tlayer.draw();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n///Create a post ajax request and send it to the API in order to save the user's created puzzle\r\nfunction savePuzzle(appendedString)\r\n{\r\n\ttoken = document.getElementById('tokenLabel').innerHTML;\r\n\r\n\tlet puzzleName = document.getElementById('puzzleNameInputBox'+appendedString).value;\r\n\tlet puzzleDescription = document.getElementById('puzzleDescriptionInputBox'+appendedString).value;\r\n\r\n\tlet puzzleImage = stage.toDataURL({ pixelRatio: 0.50 });\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tname: puzzleName,\r\n\t\tdescription: puzzleDescription,\r\n\t\tpuzzleObject: piecesJSONObject,\r\n\t\timage: puzzleImage,\r\n\t\tshared: false\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: apiURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t},\r\n\t\terror: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getCurrentRenderMode()\r\n{\r\n\treturn currentRenderMode;\r\n}\r\n\r\n///Set the selected distance metric for the puzzle\r\nfunction setDistanceMetric(metric)\r\n{\r\n\tdistanceMetric = metric;\r\n}\r\n\r\n///Set disableEditMode to true to prevent user from clicking it any further\r\nfunction setDisableEditMode(bool)\r\n{\r\n\tdisableEditMode = bool;\r\n}\r\n\r\n///Set the sites array\r\nfunction setSites(tempSites)\r\n{\r\n\tsites = tempSites;\r\n}\r\n\r\n///Clear the board\r\nfunction clearBoard()\r\n{\r\n\tpiecesJSONObject = {\r\n\t\t'pieces' : [],\r\n\t\t'colors' : [],\r\n\t\t'depths' : []\r\n\t};\r\n\r\n\tpieces = [];\r\n\tlayer.destroyChildren();\r\n}\r\n\r\n///Create a visual representation of where the user clicks\r\nfunction createPoint(x, y)\r\n{\r\n\tlet point = new Konva.Ring({\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tinnerRadius: 3,\r\n        outerRadius: 15,\r\n\t\tstroke: 'black',\r\n\t\tfill: '#7C593A',\r\n\t\tstrokeWidth: 1,\r\n\t});\r\n\r\n\tpoint.draggable(true);\r\n\r\n\tpoint.on('mouseover', function (event){\r\n\t\tdocument.onmousemove = function(event) {\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tpoint.x(event.clientX - canvasCoords.x);\r\n\t\t\tpoint.y(event.clientY - canvasCoords.y);\r\n\t\t};\r\n\r\n\t\thoverOverPoint = true;\r\n\t\tdocument.body.style.cursor = 'pointer';\r\n\t});\r\n\r\n\tpoint.on('mouseout', function(event) {\r\n\t\tdocument.onmousemove = null;\r\n\t\thoverOverPoint = false;\r\n\t\tdocument.body.style.cursor = 'default';\r\n\t});\r\n\r\n\tpoint.on('mousedown', function(event) {\r\n\t\t// console.log('clicked!');\r\n\t\tif(deletePointButtonClicked)\r\n\t\t{\r\n\t\t\tdocument.onmousemove = null;\r\n\t\t\thoverOverPoint = false;\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\tpoint.destroy();\r\n\t\t\tlayer.draw();\r\n\t\t}\r\n\t});\r\n\r\n\treturn point;\r\n}\r\n\r\n///Calls the necessary functions to generate puzzle's vertiecs as well as the visual representation\r\nfunction generatePuzzle()\r\n{\r\n\tpointsArray = layer.getChildren(function(node) {\r\n\t\treturn node.getClassName() === 'Ring';\r\n\t});\r\n\r\n\tsites = [];\r\n\tfor (let i = pointsArray.length - 1; i >= 0; i--) {\r\n\t\tsites.push({\r\n\t\t\tx: pointsArray[i].attrs.x,\r\n\t\t\ty: pointsArray[i].attrs.y,\r\n\t\t});\r\n\t}\r\n\r\n\tclearBoard();\r\n\r\n\t///This makes sure that the generate button will only generate once\r\n\tdisableEditMode = true;\r\n\r\n\tgenerateSiteBoundaries();\r\n\tcreatePieces();\r\n}\r\n\r\n///Creates the puzzle pieces from the siteBoundaries for each site(position selected by the user)\r\nfunction createPieces()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\tlet trimmedPoints = trimPoints(siteBoundaries[i]);\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: trimmedPoints,\r\n\t\t\tstroke: selectedPalette[i % selectedPalette.length],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t});\r\n\r\n\t\tpiece.on('mousedown', function() {\r\n\t\t\tlet paintBrushColor = document.getElementById('paintBrushColorInput'+appendedString).value;\r\n\t\t\tthis.stroke(paintBrushColor);\r\n\t\t\tselectedPalette[i] = paintBrushColor;\r\n\t\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\t\tpiecesJSONObject.colors = selectedPalette;\r\n\t\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t\t\tlayer.draw();\r\n\t\t});\r\n\r\n\t\tpieces.push(piece);\r\n\t\tpiecesJSONObject.pieces.push(trimmedPoints);\r\n\t\tpiecesJSONObject.depths.push(Math.floor(Math.random() * 8) + 1);\r\n\t\tlayer.add(piece);\r\n\t}\r\n\r\n\tpiecesJSONObject.colors = selectedPalette;\r\n\tlayer.draw();\r\n\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\treturn piecesJSONObject;\r\n\t// console.log(piecesJSONObject);\r\n}\r\n\r\n///Shortens the array of vertices for each puzzle piece\r\nfunction trimPoints(pointArray)\r\n{\r\n\tlet trimmedPoints = [];\r\n\tlet lastPointCol = -1;\r\n\tlet firstPointCol = pointArray[0];\r\n\tlet currentRow = pointArray[1];\r\n\tlet crissCross = 1;\r\n\r\n\tfor(let index = 0; index < pointArray.length; index+=2)\r\n\t{\r\n\t\tif(currentRow != pointArray[index+1])\r\n\t\t{\r\n\t\t\tif(crissCross == 1)\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\tcrissCross = -1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\tcrissCross - 1;\r\n\t\t\t}\r\n\r\n\t\t\tfirstPointCol = pointArray[index];\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t\tcurrentRow = pointArray[index+1];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t}\r\n\t}\r\n\r\n\treturn trimmedPoints;\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction generateSiteBoundaries()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t\tsiteBoundaries[i] = [];\r\n\r\n\tfor(let row = 0; row < height; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < width; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(col);\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(row);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n///Determines which site is closest to a pixel position\r\nfunction equidistantPointsPresent(distances)\r\n{\r\n\tlet returnArray = [];\r\n\tlet minimumDistance = Math.min(...distances);\r\n\r\n\t// if(distanceMetric === 'euclidean')\r\n\t\t// minimumDistance = minimumDistance + '';\r\n\r\n\tlet index = 0, counter = 0;\r\n\r\n\twhile(index != -1)\r\n\t{\r\n\t\tindex = distances.indexOf(minimumDistance);\r\n\t\tif(index != -1)\r\n\t\t{\r\n\t\t\treturnArray.push(index+counter);\r\n\t\t\tdistances.splice(index, 1);\r\n\t\t\tcounter++;\r\n\t\t}\r\n\t}\r\n\r\n\treturn returnArray;\r\n}\r\n\r\n///Calculates the distances from each site to pixel in position (xOfPoint, yOfPoint) and returns an array\r\nfunction calculateDistancesFromSitesToPoint(xOfPoint, yOfPoint, sitePoints)\r\n{\r\n\tlet result = [];\r\n\tfor(let i = 0; i < sitePoints.length; i++)\r\n\t\tresult.push(calculateDistance(xOfPoint, yOfPoint, sitePoints[i].x, sitePoints[i].y));\r\n\r\n\treturn result;\r\n}\r\n\r\n///Calculates the distance from point1 to point2 using the selected distance metrix\r\nfunction calculateDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tif(distanceMetric === 'euclidean')\r\n\t\treturn calculateEuclideanDistance(point1X, point1Y, point2X, point2Y);\r\n\telse if(distanceMetric === 'manhattan')\r\n\t\treturn calculateManhattanDistance(point1X, point1Y, point2X, point2Y);\r\n}\r\n\r\n///Calculates and returns the Euclidean distance\r\nfunction calculateEuclideanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet result = Math.pow( Math.pow( point1X - point2X, 2 ) + Math.pow( point1Y - point2Y, 2 ), 0.5 );\r\n\treturn result;\r\n}\r\n\r\n///Calculates and returns the Manhattan distance\r\nfunction calculateManhattanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet resultX = point1X - point2X;\r\n\tif(resultX < 0)\r\n\t\tresultX *= -1;\r\n\tlet resultY = point1Y - point2Y;\r\n\tif(resultY < 0)\r\n\t\tresultY *= -1;\r\n\tlet result = resultX + resultY;\r\n\treturn result;\r\n}\r\n","import Konva from 'konva';\r\nimport JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { initializeDataSolve, getPieceInCorrectPositionArray };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet saveSolveAttemptURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/newSolveAttempt';\r\nlet piecesJSONObject, pieces, colors, base64Image;\r\nlet correctPositions, pieceInCorrectPosition, correctOrientation;\r\nlet defaultPalette = ['Plum', 'Tomato', 'Orange', 'Violet', 'Gray', 'MediumSeaGreen', 'LightGray', 'SlateBlue', 'Brown', 'Aquamarine', 'AntiqueWhite', 'Red', 'Green'];\r\nlet canvas, stage, layer, outline, board, puzzleID;\r\nlet width = 1000, height = 500;\r\nlet startTime, puzzleSolved, selectedDifficulty, rotationEnabled;\r\nlet solvedDiv;\r\n// window.onload = function(){\r\n// \tinitializeDataSolve();\r\n// }\r\n\r\nfunction initializeDataSolve()\r\n{\r\n\r\n\tsolvedDiv = document.getElementById('solvedDiv');\r\n\tsolvedDiv.remove();\r\n\tcorrectPositions = [];\r\n\tpieceInCorrectPosition = [];\r\n\tcorrectOrientation = [];\r\n\tpuzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tpuzzleSolved = false;\r\n\tgetPuzzleData(puzzleID);\r\n\r\n\tcanvas = document.getElementById('solverContainer');\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'solverContainer',\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t});\r\n\r\n\tboard = new Konva.Rect({\r\n\t\tx: (width/4),\r\n\t\ty: 0,\r\n\t\twidth: width/2,\r\n\t\theight: height,\r\n\t\tstroke: 'black',\r\n\t\tfill: 'white',\r\n\t\tstrokeWidth: 2\r\n\t});\r\n\r\n\toutline = new Konva.Rect({\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tstroke: 'grey',\r\n\t\tfill: '#fff',\r\n\t\tstrokeWidth: 1\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\tstage.add(layer);\r\n\tlayer.add(outline);\r\n\r\n\tdocument.getElementById('closeSolverDialogButton').addEventListener('mousedown', function(){\r\n\t\tif(!puzzleSolved)\r\n\t\t\tsaveSolveAttempt(false, puzzleID, startTime);\r\n\t});\r\n\t\r\n\tlet numHints = parseInt(localStorage.getItem('numHints'));\r\n\trotationEnabled = true;\r\n\r\n\tif(numHints == 0)\r\n\t{\r\n\t\tselectedDifficulty = 'expert';\r\n\t}\r\n\telse if(numHints == 3)\r\n\t{\r\n\t\tselectedDifficulty = 'intermediate';\r\n\t}\r\n\telse\r\n\t{\r\n\t\trotationEnabled = false;\r\n\t\tselectedDifficulty = 'novice';\r\n\t}\r\n\tconsole.log(selectedDifficulty);\r\n}\r\n\r\nfunction getPieceInCorrectPositionArray()\r\n{\r\n\treturn pieceInCorrectPosition;\r\n}\r\n\r\nfunction saveSolveAttempt(solved, solvePuzzleID, solveStartTime)\r\n{\r\n\tlet token = document.getElementById('tokenLabel').innerHTML;\r\n\tlet timeTaken = performance.now();\r\n\ttimeTaken = (timeTaken - solveStartTime).toFixed(0);\r\n\ttimeTaken = Math.floor(timeTaken / 1000);\r\n\t\r\n\tlet gainedExp = 0;\r\n\tif(solved && selectedDifficulty == 'expert')\r\n\t\tgainedExp = 50;\r\n\telse if(solved && selectedDifficulty == 'intermediate')\r\n\t\tgainedExp = 30;\r\n\telse if(solved && selectedDifficulty == 'novice')\r\n\t\tgainedExp = 10;\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tpuzzleID: solvePuzzleID,\r\n\t\tattemptDuration: timeTaken,\r\n\t\tsolved: solved,\r\n\t\txp: gainedExp\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: saveSolveAttemptURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status){\r\n\t\t\tconsole.log('success!');\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\t\t\tcolors = piecesJSONObject.colors;\r\n\t\t\tif(colors === undefined)\r\n\t\t\t\tcolors = defaultPalette;\r\n\t\t\tgeneratePieces();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generatePieces()\r\n{\r\n\tlet generalTransformer = new Konva.Transformer({\r\n\t\tcenteredScaling: true,\r\n        rotationSnaps: [0, 90, 180, 270],\r\n        rotationSnapTolerance: 45,\r\n        resizeEnabled: false,\r\n        borderEnabled: false,\r\n        anchorStroke: '',\r\n        anchorFill: '',\r\n        rotateAnchorOffset: -20,\r\n\t});\r\n\r\n\tlayer.add(generalTransformer);\r\n\t\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tlet selectedPiece = pieces[pieceIndex];\r\n\t\tlet offsetX = getRandomOffsetX(selectedPiece, 0);\r\n\t\t// console.log(offsetX);\r\n\t\tlet offsetY = getRandomOffset(getMin(selectedPiece, 'y'), ( height/2 ));\r\n\t\tlet minY = getMin(selectedPiece, 'y');\r\n\r\n\t\tcorrectPositions.push({x: selectedPiece[0], y: selectedPiece[1]});\r\n\t\tpieceInCorrectPosition.push(false);\r\n\r\n\t\tfor(let i = 0; i < selectedPiece.length; i+=2)\r\n\t\t{\r\n\t\t\tif( (pieceIndex+1) % 2 == 0)\r\n\t\t\t\tselectedPiece[i] += 800;\r\n\t\t\tselectedPiece[i] -= offsetX;\r\n\t\t\t// selectedPiece[i+1] += minY - ((pieceIndex % 5) * 100);\r\n\t\t}\r\n\r\n\t\tlet group = new Konva.Group();\r\n\r\n\t\tlet hitBox = new Konva.Rect({\r\n\t\t\tx: selectedPiece[0],\r\n\t\t\ty: selectedPiece[1],\r\n\t\t\twidth: 5,\r\n\t\t\theight: 5\r\n\t\t});\r\n\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: selectedPiece,\r\n\t\t\tstroke: colors[pieceIndex % colors.length],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tperfectDrawEnabled: false,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t// this.scale({x: 1, y: 1});\r\n\t\t\tgroup.moveToTop();\r\n\t\t\tlayer.draw();\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t// this.scale({x: 0.5, y: 0.5});\r\n\t\t\t// layer.draw();\r\n\t\t});\r\n\r\n\t\tgroup.on('dblclick', function() {\r\n\t\t\t// piece.rotate(90);\r\n\t\t\tif(rotationEnabled && pieceInCorrectPosition[pieceIndex] == false)\r\n\t\t\t{\r\n\t\t\t\tgeneralTransformer.nodes([piece]);\r\n\t\t\t\tlet attributes = generalTransformer._getNodeRect();\r\n\t\t\t\tvar shape = rotateAroundCenter(attributes, 1.5707963267948966);\r\n\r\n\t\t\t\tif(Math.floor(shape.rotation) == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t\t\t\tconsole.log((shape.rotation));\r\n\t\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\t// piece.on('transformend', function() {\r\n\t\t// \tconsole.log(generalTransformer._getNodeRect());\r\n\t\t// });\r\n\r\n\t\tgroup.on('dragend', function(){\r\n\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t});\r\n\r\n\t\tgroup.add(piece);\r\n\t\tgroup.add(hitBox);\r\n\t\tgroup.draggable(true);\r\n\t\tlayer.add(group);\r\n\r\n\t\tif(rotationEnabled)\r\n\t\t{\r\n\t\t\t//randomly rotate piece\r\n\t\t\tgroup.add(generalTransformer);\r\n\t\t\tgeneralTransformer.nodes([piece]);\r\n\t\t\tvar attributes = generalTransformer._getNodeRect();\r\n\t\t\tvar shape = rotateAroundCenter(attributes, getRandomRotation());\r\n\t\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t\t\t\r\n\t\t\tif(shape.rotation == 0)\r\n\t\t\t{\r\n\t\t\t\tconsole.log('correct orientation');\r\n\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlayer.add(board);\r\n\tlayer.draw();\r\n\tstartTime = performance.now();\r\n}\r\n\r\nfunction checkPositionAndSnapIntoPlace(group, pieceIndex)\r\n{\r\n\tlet hitBox = group.getChildren()[1];\r\n\tlet hitBoxCoordinates = hitBox.absolutePosition();\r\n\thitBoxCoordinates.x -= 250;\r\n\r\n\tif(checkPosition(hitBoxCoordinates, correctPositions[pieceIndex]) && correctOrientation[pieceIndex])\r\n\t{\r\n\t\tsnapPieceIntoPlace(hitBoxCoordinates, correctPositions[pieceIndex], group);\r\n\t\tgroup.draggable(false);\r\n\t\tconsole.log('nailed it!!');\r\n\t\tpieceInCorrectPosition[pieceIndex] = true;\r\n\t\tcheckIfPuzzleSolved();\r\n\t}\r\n\telse\r\n\t{\r\n\t\tconsole.log('you are off bud!');\r\n\t\tconsole.log('The correct x: ' + correctPositions[pieceIndex].x + ' - The correct y: ' + correctPositions[pieceIndex].y);\r\n\t\tconsole.log('The current x: ' + hitBoxCoordinates.x + ' - The current y: ' + hitBoxCoordinates.y);\r\n\t\tpieceInCorrectPosition[pieceIndex] = false;\r\n\t}\r\n}\r\n\r\nfunction getRandomRotation()\r\n{\r\n\tlet choice = Math.floor(Math.random() * 4);\r\n\r\n\tif(choice == 0)\r\n\t{\r\n\t\t//no change to rotation\r\n\t\treturn 0;\r\n\t}\r\n\telse if(choice == 1)\r\n\t{\r\n\t\t//rotate 90 degrees\r\n\t\treturn 1.5707963267948966;\r\n\t}\r\n\telse if(choice == 2)\r\n\t{\r\n\t\t//rotate 180 degrees\r\n\t\treturn 3.141592653589793;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//rotate 270 degrees\r\n\t\treturn 4.71238898038469;\r\n\t}\r\n}\r\n\r\nfunction getMax(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet max = 0;\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] > max)\r\n\t\t\tmax = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn max;\r\n}\r\n\r\nfunction getMin(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet min = pointsArray[step];\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] < min)\r\n\t\t\tmin = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn min;\r\n}\r\n\r\nfunction getRandomOffset(lowerBound, upperBound)\r\n{\r\n\tlet returnValue = 0;\r\n\t// while( returnValue <= lowerBound )\r\n\t{\r\n\t\treturnValue = Math.floor((Math.random() * upperBound) + 1);\r\n\t}\r\n\r\n\treturn returnValue;\r\n}\r\n\r\nfunction getRandomOffsetX(pixelArray, min)\r\n{\r\n\tlet minX = getMin(pixelArray, 'x');\r\n\tlet maxX = getMax(pixelArray, 'x');\r\n\r\n\treturn minX;\r\n\r\n}\r\n\r\nfunction checkPosition(coords1, coords2)\r\n{\r\n\tlet xDifference = coords1.x - coords2.x;\r\n\tlet yDifference = coords1.y - coords2.y;\r\n\tif(xDifference < 0)\r\n\t\txDifference *= -1;\r\n\tif(yDifference < 0)\r\n\t\tyDifference *= -1;\r\n\r\n\tif(xDifference <= 15 && yDifference <= 15)\r\n\t\treturn true;\r\n\telse\r\n\t\treturn false;\r\n}\r\n\r\nfunction checkIfPuzzleSolved()\r\n{\r\n\tfor(let pieceIndex = 0; pieceIndex < pieceInCorrectPosition.length; pieceIndex++)\r\n\t{\r\n\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tsetTimeout(function() {\r\n\t\tdocument.getElementById('solverDialogDiv').appendChild(solvedDiv);\r\n\t\tsolvedDiv.style.display = \"block\";\r\n\r\n\t\t// Get the <span> element that closes the modal\r\n\t\tvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n\t\t// When the user clicks on <span> (x), close the modal\r\n\t\tspan.onclick = function() {\r\n\t\t\tsolvedDiv.style.display = \"none\";\r\n\t\t}\r\n\t}, 500);\r\n\r\n\t// alert('Puzzle Solved!');\r\n\tpuzzleSolved = true;\r\n\tsaveSolveAttempt(puzzleSolved, puzzleID, startTime);\r\n}\r\n\r\nfunction snapPieceIntoPlace(currentCoords, targetCoords, piece)\r\n{\r\n\tlet xDifference = currentCoords.x - targetCoords.x;\r\n\tlet yDifference = currentCoords.y - targetCoords.y;\r\n\tpiece.x(piece.x() - xDifference);\r\n\tpiece.y(piece.y() - yDifference);\r\n\tlayer.draw();\r\n}\r\n\r\nfunction rotateAroundPoint(shape, angleRad, point) {\r\n  var x = point.x +\r\n      (shape.x - point.x) * Math.cos(angleRad) -\r\n      (shape.y - point.y) * Math.sin(angleRad);\r\n  var y = point.y +\r\n      (shape.x - point.x) * Math.sin(angleRad) +\r\n      (shape.y - point.y) * Math.cos(angleRad);\r\n  return __assign(__assign({}, shape), { rotation: shape.rotation + angleRad, x: x,\r\n      y: y });\r\n}\r\nfunction rotateAroundCenter(shape, deltaRad) {\r\n  var center = getCenter(shape);\r\n  return rotateAroundPoint(shape, deltaRad, center);\r\n}\r\n\r\nvar __assign = function() {\r\n  __assign = Object.assign || function __assign(t) {\r\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n      }\r\n      return t;\r\n  };\r\n  return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction getCenter(shape) {\r\n  return {\r\n      x: shape.x +\r\n          (shape.width / 2) * Math.cos(shape.rotation) +\r\n          (shape.height / 2) * Math.sin(-shape.rotation),\r\n      y: shape.y +\r\n          (shape.height / 2) * Math.cos(shape.rotation) +\r\n          (shape.width / 2) * Math.sin(shape.rotation),\r\n  };\r\n}\r\n","// Polyfills\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\nif ( Number.isInteger === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n\r\n\tNumber.isInteger = function ( value ) {\r\n\r\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( 'name' in Function.prototype === false ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\tObject.assign = function ( target ) {\r\n\r\n\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n\t\t}\r\n\r\n\t\tconst output = Object( target );\r\n\r\n\t\tfor ( let index = 1; index < arguments.length; index ++ ) {\r\n\r\n\t\t\tconst source = arguments[ index ];\r\n\r\n\t\t\tif ( source !== undefined && source !== null ) {\r\n\r\n\t\t\t\tfor ( const nextKey in source ) {\r\n\r\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst REVISION = '119';\r\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\r\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\r\nconst CullFaceNone = 0;\r\nconst CullFaceBack = 1;\r\nconst CullFaceFront = 2;\r\nconst CullFaceFrontBack = 3;\r\nconst BasicShadowMap = 0;\r\nconst PCFShadowMap = 1;\r\nconst PCFSoftShadowMap = 2;\r\nconst VSMShadowMap = 3;\r\nconst FrontSide = 0;\r\nconst BackSide = 1;\r\nconst DoubleSide = 2;\r\nconst FlatShading = 1;\r\nconst SmoothShading = 2;\r\nconst NoBlending = 0;\r\nconst NormalBlending = 1;\r\nconst AdditiveBlending = 2;\r\nconst SubtractiveBlending = 3;\r\nconst MultiplyBlending = 4;\r\nconst CustomBlending = 5;\r\nconst AddEquation = 100;\r\nconst SubtractEquation = 101;\r\nconst ReverseSubtractEquation = 102;\r\nconst MinEquation = 103;\r\nconst MaxEquation = 104;\r\nconst ZeroFactor = 200;\r\nconst OneFactor = 201;\r\nconst SrcColorFactor = 202;\r\nconst OneMinusSrcColorFactor = 203;\r\nconst SrcAlphaFactor = 204;\r\nconst OneMinusSrcAlphaFactor = 205;\r\nconst DstAlphaFactor = 206;\r\nconst OneMinusDstAlphaFactor = 207;\r\nconst DstColorFactor = 208;\r\nconst OneMinusDstColorFactor = 209;\r\nconst SrcAlphaSaturateFactor = 210;\r\nconst NeverDepth = 0;\r\nconst AlwaysDepth = 1;\r\nconst LessDepth = 2;\r\nconst LessEqualDepth = 3;\r\nconst EqualDepth = 4;\r\nconst GreaterEqualDepth = 5;\r\nconst GreaterDepth = 6;\r\nconst NotEqualDepth = 7;\r\nconst MultiplyOperation = 0;\r\nconst MixOperation = 1;\r\nconst AddOperation = 2;\r\nconst NoToneMapping = 0;\r\nconst LinearToneMapping = 1;\r\nconst ReinhardToneMapping = 2;\r\nconst CineonToneMapping = 3;\r\nconst ACESFilmicToneMapping = 4;\r\nconst CustomToneMapping = 5;\r\n\r\nconst UVMapping = 300;\r\nconst CubeReflectionMapping = 301;\r\nconst CubeRefractionMapping = 302;\r\nconst EquirectangularReflectionMapping = 303;\r\nconst EquirectangularRefractionMapping = 304;\r\nconst CubeUVReflectionMapping = 306;\r\nconst CubeUVRefractionMapping = 307;\r\nconst RepeatWrapping = 1000;\r\nconst ClampToEdgeWrapping = 1001;\r\nconst MirroredRepeatWrapping = 1002;\r\nconst NearestFilter = 1003;\r\nconst NearestMipmapNearestFilter = 1004;\r\nconst NearestMipMapNearestFilter = 1004;\r\nconst NearestMipmapLinearFilter = 1005;\r\nconst NearestMipMapLinearFilter = 1005;\r\nconst LinearFilter = 1006;\r\nconst LinearMipmapNearestFilter = 1007;\r\nconst LinearMipMapNearestFilter = 1007;\r\nconst LinearMipmapLinearFilter = 1008;\r\nconst LinearMipMapLinearFilter = 1008;\r\nconst UnsignedByteType = 1009;\r\nconst ByteType = 1010;\r\nconst ShortType = 1011;\r\nconst UnsignedShortType = 1012;\r\nconst IntType = 1013;\r\nconst UnsignedIntType = 1014;\r\nconst FloatType = 1015;\r\nconst HalfFloatType = 1016;\r\nconst UnsignedShort4444Type = 1017;\r\nconst UnsignedShort5551Type = 1018;\r\nconst UnsignedShort565Type = 1019;\r\nconst UnsignedInt248Type = 1020;\r\nconst AlphaFormat = 1021;\r\nconst RGBFormat = 1022;\r\nconst RGBAFormat = 1023;\r\nconst LuminanceFormat = 1024;\r\nconst LuminanceAlphaFormat = 1025;\r\nconst RGBEFormat = RGBAFormat;\r\nconst DepthFormat = 1026;\r\nconst DepthStencilFormat = 1027;\r\nconst RedFormat = 1028;\r\nconst RedIntegerFormat = 1029;\r\nconst RGFormat = 1030;\r\nconst RGIntegerFormat = 1031;\r\nconst RGBIntegerFormat = 1032;\r\nconst RGBAIntegerFormat = 1033;\r\n\r\nconst RGB_S3TC_DXT1_Format = 33776;\r\nconst RGBA_S3TC_DXT1_Format = 33777;\r\nconst RGBA_S3TC_DXT3_Format = 33778;\r\nconst RGBA_S3TC_DXT5_Format = 33779;\r\nconst RGB_PVRTC_4BPPV1_Format = 35840;\r\nconst RGB_PVRTC_2BPPV1_Format = 35841;\r\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\r\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\r\nconst RGB_ETC1_Format = 36196;\r\nconst RGB_ETC2_Format = 37492;\r\nconst RGBA_ETC2_EAC_Format = 37496;\r\nconst RGBA_ASTC_4x4_Format = 37808;\r\nconst RGBA_ASTC_5x4_Format = 37809;\r\nconst RGBA_ASTC_5x5_Format = 37810;\r\nconst RGBA_ASTC_6x5_Format = 37811;\r\nconst RGBA_ASTC_6x6_Format = 37812;\r\nconst RGBA_ASTC_8x5_Format = 37813;\r\nconst RGBA_ASTC_8x6_Format = 37814;\r\nconst RGBA_ASTC_8x8_Format = 37815;\r\nconst RGBA_ASTC_10x5_Format = 37816;\r\nconst RGBA_ASTC_10x6_Format = 37817;\r\nconst RGBA_ASTC_10x8_Format = 37818;\r\nconst RGBA_ASTC_10x10_Format = 37819;\r\nconst RGBA_ASTC_12x10_Format = 37820;\r\nconst RGBA_ASTC_12x12_Format = 37821;\r\nconst RGBA_BPTC_Format = 36492;\r\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\r\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\r\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\r\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\r\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\r\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\r\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\r\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\r\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\r\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\r\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\r\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\r\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\r\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\r\nconst LoopOnce = 2200;\r\nconst LoopRepeat = 2201;\r\nconst LoopPingPong = 2202;\r\nconst InterpolateDiscrete = 2300;\r\nconst InterpolateLinear = 2301;\r\nconst InterpolateSmooth = 2302;\r\nconst ZeroCurvatureEnding = 2400;\r\nconst ZeroSlopeEnding = 2401;\r\nconst WrapAroundEnding = 2402;\r\nconst NormalAnimationBlendMode = 2500;\r\nconst AdditiveAnimationBlendMode = 2501;\r\nconst TrianglesDrawMode = 0;\r\nconst TriangleStripDrawMode = 1;\r\nconst TriangleFanDrawMode = 2;\r\nconst LinearEncoding = 3000;\r\nconst sRGBEncoding = 3001;\r\nconst GammaEncoding = 3007;\r\nconst RGBEEncoding = 3002;\r\nconst LogLuvEncoding = 3003;\r\nconst RGBM7Encoding = 3004;\r\nconst RGBM16Encoding = 3005;\r\nconst RGBDEncoding = 3006;\r\nconst BasicDepthPacking = 3200;\r\nconst RGBADepthPacking = 3201;\r\nconst TangentSpaceNormalMap = 0;\r\nconst ObjectSpaceNormalMap = 1;\r\n\r\nconst ZeroStencilOp = 0;\r\nconst KeepStencilOp = 7680;\r\nconst ReplaceStencilOp = 7681;\r\nconst IncrementStencilOp = 7682;\r\nconst DecrementStencilOp = 7683;\r\nconst IncrementWrapStencilOp = 34055;\r\nconst DecrementWrapStencilOp = 34056;\r\nconst InvertStencilOp = 5386;\r\n\r\nconst NeverStencilFunc = 512;\r\nconst LessStencilFunc = 513;\r\nconst EqualStencilFunc = 514;\r\nconst LessEqualStencilFunc = 515;\r\nconst GreaterStencilFunc = 516;\r\nconst NotEqualStencilFunc = 517;\r\nconst GreaterEqualStencilFunc = 518;\r\nconst AlwaysStencilFunc = 519;\r\n\r\nconst StaticDrawUsage = 35044;\r\nconst DynamicDrawUsage = 35048;\r\nconst StreamDrawUsage = 35040;\r\nconst StaticReadUsage = 35045;\r\nconst DynamicReadUsage = 35049;\r\nconst StreamReadUsage = 35041;\r\nconst StaticCopyUsage = 35046;\r\nconst DynamicCopyUsage = 35050;\r\nconst StreamCopyUsage = 35042;\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nfunction EventDispatcher() {}\r\n\r\nObject.assign( EventDispatcher.prototype, {\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tconst index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\t// Make a copy, in case listeners are removed while iterating.\r\n\t\t\tconst array = listenerArray.slice( 0 );\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _lut = [];\r\n\r\nfor ( let i = 0; i < 256; i ++ ) {\r\n\r\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n}\r\n\r\nlet _seed = 1234567;\r\n\r\nconst MathUtils = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\r\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\r\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\r\n\r\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n\t\treturn uuid.toUpperCase();\r\n\r\n\t},\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n\tlerp: function ( x, y, t ) {\r\n\r\n\t\treturn ( 1 - t ) * x + t * y;\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\r\n\r\n\tseededRandom: function ( s ) {\r\n\r\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\r\n\r\n\t\t// Park-Miller algorithm\r\n\r\n\t\t_seed = _seed * 16807 % 2147483647;\r\n\r\n\t\treturn ( _seed - 1 ) / 2147483646;\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * MathUtils.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * MathUtils.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tceilPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tfloorPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\r\n\r\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\r\n\r\n\t\t// rotations are applied to the axes in the order specified by 'order'\r\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\r\n\t\t// angles are in radians\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c2 = cos( b / 2 );\r\n\t\tconst s2 = sin( b / 2 );\r\n\r\n\t\tconst c13 = cos( ( a + c ) / 2 );\r\n\t\tconst s13 = sin( ( a + c ) / 2 );\r\n\r\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\r\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\r\n\r\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\r\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYX':\r\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZY':\r\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXZ':\r\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZX':\r\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXY':\r\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYZ':\r\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction Vector2( x = 0, y = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector2.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.x = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.y = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tisVector2: true,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tcross: function ( v ) {\r\n\r\n\t\treturn this.x * v.y - this.y * v.x;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tconst x = this.x - center.x;\r\n\t\tconst y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Matrix3() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tisMatrix3: true,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrix3Column( this, 0 );\r\n\t\tyAxis.setFromMatrix3Column( this, 1 );\r\n\t\tzAxis.setFromMatrix3Column( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function ( m ) {\r\n\r\n\t\tconst me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\tconst me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\tte[ 3 ] = t12 * detInv;\r\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\tte[ 6 ] = t13 * detInv;\r\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tlet tmp;\r\n\t\tconst m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tconst m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\t\tconst c = Math.cos( rotation );\r\n\t\tconst s = Math.sin( rotation );\r\n\r\n\t\tthis.set(\r\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t\t0, 0, 1\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tscale: function ( sx, sy ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotate: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta );\r\n\t\tconst s = Math.sin( theta );\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n\t\tte[ 0 ] = c * a11 + s * a21;\r\n\t\tte[ 3 ] = c * a12 + s * a22;\r\n\t\tte[ 6 ] = c * a13 + s * a23;\r\n\r\n\t\tte[ 1 ] = - s * a11 + c * a21;\r\n\t\tte[ 4 ] = - s * a12 + c * a22;\r\n\t\tte[ 7 ] = - s * a13 + c * a23;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( tx, ty ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _canvas;\r\n\r\nconst ImageUtils = {\r\n\r\n\tgetDataURL: function ( image ) {\r\n\r\n\t\tif ( /^data:/i.test( image.src ) ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tlet canvas;\r\n\r\n\t\tif ( image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tcanvas = image;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t\t\t_canvas.width = image.width;\r\n\t\t\t_canvas.height = image.height;\r\n\r\n\t\t\tconst context = _canvas.getContext( '2d' );\r\n\r\n\t\t\tif ( image instanceof ImageData ) {\r\n\r\n\t\t\t\tcontext.putImageData( image, 0, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcanvas = _canvas;\r\n\r\n\t\t}\r\n\r\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nlet textureId = 0;\r\n\r\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : RGBAFormat;\r\n\tthis.internalFormat = null;\r\n\tthis.type = type !== undefined ? type : UnsignedByteType;\r\n\r\n\tthis.offset = new Vector2( 0, 0 );\r\n\tthis.repeat = new Vector2( 1, 1 );\r\n\tthis.center = new Vector2( 0, 0 );\r\n\tthis.rotation = 0;\r\n\r\n\tthis.matrixAutoUpdate = true;\r\n\tthis.matrix = new Matrix3();\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n}\r\n\r\nTexture.DEFAULT_IMAGE = undefined;\r\nTexture.DEFAULT_MAPPING = UVMapping;\r\n\r\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Texture,\r\n\r\n\tisTexture: true,\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.internalFormat = source.internalFormat;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\t\tthis.center.copy( source.center );\r\n\t\tthis.rotation = source.rotation;\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrix.copy( source.matrix );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tconst output = {\r\n\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\tcenter: [ this.center.x, this.center.y ],\r\n\t\t\trotation: this.rotation,\r\n\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tformat: this.format,\r\n\t\t\ttype: this.type,\r\n\t\t\tencoding: this.encoding,\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy,\r\n\r\n\t\t\tflipY: this.flipY,\r\n\r\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\r\n\t\t\tunpackAlignment: this.unpackAlignment\r\n\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tconst image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlet url;\r\n\r\n\t\t\t\tif ( Array.isArray( image ) ) {\r\n\r\n\t\t\t\t\t// process array of images e.g. CubeTexture\r\n\r\n\t\t\t\t\turl = [];\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// process single image\r\n\r\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: url\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! isRootObject ) {\r\n\r\n\t\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== UVMapping ) return uv;\r\n\r\n\t\tuv.applyMatrix3( this.matrix );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn uv;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Vector4( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\tthis.w = w;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector4.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.z = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.w = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tisVector4: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\tthis.x = 1;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = q.x / s;\r\n\t\t\tthis.y = q.y / s;\r\n\t\t\tthis.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tlet angle, x, y, z; // variables for result\r\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tconst xx = ( m11 + 1 ) / 2;\r\n\t\t\tconst yy = ( m22 + 1 ) / 2;\r\n\t\t\tconst zz = ( m33 + 1 ) / 2;\r\n\t\t\tconst xy = ( m12 + m21 ) / 4;\r\n\t\t\tconst xz = ( m13 + m31 ) / 4;\r\n\t\t\tconst yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\t\tthis.w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\t\tthis.w = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nfunction WebGLRenderTarget( width, height, options ) {\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n\tthis.texture.image = {};\r\n\tthis.texture.image.width = width;\r\n\tthis.texture.image.height = height;\r\n\r\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\r\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\r\n\r\n}\r\n\r\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: WebGLRenderTarget,\r\n\r\n\tisWebGLRenderTarget: true,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.texture.image.width = width;\r\n\t\t\tthis.texture.image.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\tthis.depthTexture = source.depthTexture;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\r\n\r\n\tWebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.samples = 4;\r\n\r\n}\r\n\r\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\r\n\r\n\tconstructor: WebGLMultisampleRenderTarget,\r\n\r\n\tisWebGLMultisampleRenderTarget: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\r\n\r\n\t\tthis.samples = source.samples;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Quaternion( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._w = w;\r\n\r\n}\r\n\r\nObject.assign( Quaternion, {\r\n\r\n\tslerp: function ( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tlet s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternionsFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\r\n\r\n\t\tconst x0 = src0[ srcOffset0 ];\r\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\r\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\r\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 ];\r\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\r\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\r\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\r\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\r\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\r\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\r\n\r\n\t\treturn dst;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Quaternion.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tw: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._w = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Quaternion.prototype, {\r\n\r\n\tisQuaternion: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c1 = cos( x / 2 );\r\n\t\tconst c2 = cos( y / 2 );\r\n\t\tconst c3 = cos( z / 2 );\r\n\r\n\t\tconst s1 = sin( x / 2 );\r\n\t\tconst s2 = sin( y / 2 );\r\n\t\tconst s3 = sin( z / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tconst EPS = 0.000001;\r\n\r\n\t\tlet r = vFrom.dot( vTo ) + 1;\r\n\r\n\t\tif ( r < EPS ) {\r\n\r\n\t\t\tr = 0;\r\n\r\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\tthis._x = - vFrom.y;\r\n\t\t\t\tthis._y = vFrom.x;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = - vFrom.z;\r\n\t\t\t\tthis._z = vFrom.y;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\r\n\r\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\r\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\r\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tangleTo: function ( q ) {\r\n\r\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\r\n\r\n\t},\r\n\r\n\trotateTowards: function ( q, step ) {\r\n\r\n\t\tconst angle = this.angleTo( q );\r\n\r\n\t\tif ( angle === 0 ) return this;\r\n\r\n\t\tconst t = Math.min( 1, step / angle );\r\n\r\n\t\tthis.slerp( q, t );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\treturn this.set( 0, 0, 0, 1 );\r\n\r\n\t},\r\n\r\n\tinverse: function () {\r\n\r\n\t\t// quaternion is assumed to have unit length\r\n\r\n\t\treturn this.conjugate();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tlet l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\r\n\r\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\r\n\r\n\t\t\tconst s = 1 - t;\r\n\t\t\tthis._w = s * w + t * this._w;\r\n\t\t\tthis._x = s * x + t * this._x;\r\n\t\t\tthis._y = s * y + t * this._y;\r\n\t\t\tthis._z = s * z + t * this._z;\r\n\r\n\t\t\tthis.normalize();\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\r\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis._x = attribute.getX( index );\r\n\t\tthis._y = attribute.getY( index );\r\n\t\tthis._z = attribute.getZ( index );\r\n\t\tthis._w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nconst _vector = new Vector3();\r\nconst _quaternion = new Quaternion();\r\n\r\nfunction Vector3( x = 0, y = 0, z = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\r\n}\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tisVector3: true,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\r\n\r\n\t},\r\n\r\n\tapplyAxisAngle: function ( axis, angle ) {\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\treturn this.applyMatrix3( m ).normalize();\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tconst ix = qw * x + qy * z - qz * y;\r\n\t\tconst iy = qw * y + qz * x - qx * z;\r\n\t\tconst iz = qw * z + qx * y - qy * x;\r\n\t\tconst iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\r\n\r\n\t},\r\n\r\n\tunproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\t// TODO lengthSquared?\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.crossVectors( this, v );\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tconst ax = a.x, ay = a.y, az = a.z;\r\n\t\tconst bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function ( v ) {\r\n\r\n\t\tconst denominator = v.lengthSq();\r\n\r\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\r\n\r\n\t\tconst scalar = v.dot( this ) / denominator;\r\n\r\n\t\treturn this.copy( v ).multiplyScalar( scalar );\r\n\r\n\t},\r\n\r\n\tprojectOnPlane: function ( planeNormal ) {\r\n\r\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\treturn this.sub( _vector );\r\n\r\n\t},\r\n\r\n\treflect: function ( normal ) {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t},\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\r\n\r\n\t\tif ( denominator === 0 ) return Math.PI / 2;\r\n\r\n\t\tconst theta = this.dot( v ) / denominator;\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function ( s ) {\r\n\r\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\r\n\r\n\t},\r\n\r\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\r\n\r\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\r\n\t\tthis.y = Math.cos( phi ) * radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCylindrical: function ( c ) {\r\n\r\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\r\n\r\n\t},\r\n\r\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\r\n\r\n\t\tthis.x = radius * Math.sin( theta );\r\n\t\tthis.y = y;\r\n\t\tthis.z = radius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 12 ];\r\n\t\tthis.y = e[ 13 ];\r\n\t\tthis.z = e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrix3Column: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 3 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v1 = new Vector3();\r\nconst _m1 = new Matrix4();\r\nconst _zero = new Vector3( 0, 0, 0 );\r\nconst _one = new Vector3( 1, 1, 1 );\r\nconst _x = new Vector3();\r\nconst _y = new Vector3();\r\nconst _z = new Vector3();\r\n\r\nfunction Matrix4() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\tisMatrix4: true,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tconst te = this.elements, me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function ( m ) {\r\n\r\n\t\t// this method does not support reflection matrices\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\r\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\r\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\r\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// bottom row\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// last column\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\treturn this.compose( _zero, q, _one );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( eye, target, up ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\t_z.subVectors( eye, target );\r\n\r\n\t\tif ( _z.lengthSq() === 0 ) {\r\n\r\n\t\t\t// eye and target are in the same position\r\n\r\n\t\t\t_z.z = 1;\r\n\r\n\t\t}\r\n\r\n\t\t_z.normalize();\r\n\t\t_x.crossVectors( up, _z );\r\n\r\n\t\tif ( _x.lengthSq() === 0 ) {\r\n\r\n\t\t\t// up and z are parallel\r\n\r\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\r\n\r\n\t\t\t\t_z.x += 0.0001;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_z.z += 0.0001;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_z.normalize();\r\n\t\t\t_x.crossVectors( up, _z );\r\n\r\n\t\t}\r\n\r\n\t\t_x.normalize();\r\n\t\t_y.crossVectors( _z, _x );\r\n\r\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\r\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\r\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tlet tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPosition: function ( x, y, z ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\tte[ 12 ] = x.x;\r\n\t\t\tte[ 13 ] = x.y;\r\n\t\t\tte[ 14 ] = x.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tte[ 12 ] = x;\r\n\t\t\tte[ 13 ] = y;\r\n\t\t\tte[ 14 ] = z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tconst te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s, c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts, c, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tconst c = Math.cos( angle );\r\n\t\tconst s = Math.sin( angle );\r\n\t\tconst t = 1 - c;\r\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\r\n\t\tconst tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeShear: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, y, z, 0,\r\n\t\t\tx, 1, z, 0,\r\n\t\t\tx, y, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n\t\tte[ 1 ] = ( xy + wz ) * sx;\r\n\t\tte[ 2 ] = ( xz - wy ) * sx;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = ( xy - wz ) * sy;\r\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n\t\tte[ 6 ] = ( yz + wx ) * sy;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = ( xz + wy ) * sz;\r\n\t\tte[ 9 ] = ( yz - wx ) * sz;\r\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = position.x;\r\n\t\tte[ 13 ] = position.y;\r\n\t\tte[ 14 ] = position.z;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\tlet sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\tlet sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t// if determine is negative, we need to invert one scale\r\n\t\tconst det = this.determinant();\r\n\t\tif ( det < 0 ) sx = - sx;\r\n\r\n\t\tposition.x = te[ 12 ];\r\n\t\tposition.y = te[ 13 ];\r\n\t\tposition.z = te[ 14 ];\r\n\r\n\t\t// scale the rotation part\r\n\t\t_m1.copy( this );\r\n\r\n\t\tconst invSX = 1 / sx;\r\n\t\tconst invSY = 1 / sy;\r\n\t\tconst invSZ = 1 / sz;\r\n\r\n\t\t_m1.elements[ 0 ] *= invSX;\r\n\t\t_m1.elements[ 1 ] *= invSX;\r\n\t\t_m1.elements[ 2 ] *= invSX;\r\n\r\n\t\t_m1.elements[ 4 ] *= invSY;\r\n\t\t_m1.elements[ 5 ] *= invSY;\r\n\t\t_m1.elements[ 6 ] *= invSY;\r\n\r\n\t\t_m1.elements[ 8 ] *= invSZ;\r\n\t\t_m1.elements[ 9 ] *= invSZ;\r\n\t\t_m1.elements[ 10 ] *= invSZ;\r\n\r\n\t\tquaternion.setFromRotationMatrix( _m1 );\r\n\r\n\t\tscale.x = sx;\r\n\t\tscale.y = sy;\r\n\t\tscale.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tif ( far === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = 2 * near / ( right - left );\r\n\t\tconst y = 2 * near / ( top - bottom );\r\n\r\n\t\tconst a = ( right + left ) / ( right - left );\r\n\t\tconst b = ( top + bottom ) / ( top - bottom );\r\n\t\tconst c = - ( far + near ) / ( far - near );\r\n\t\tconst d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst w = 1.0 / ( right - left );\r\n\t\tconst h = 1.0 / ( top - bottom );\r\n\t\tconst p = 1.0 / ( far - near );\r\n\r\n\t\tconst x = ( right + left ) * w;\r\n\t\tconst y = ( top + bottom ) * h;\r\n\t\tconst z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\t\tarray[ offset + 9 ] = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _matrix = new Matrix4();\r\nconst _quaternion$1 = new Quaternion();\r\n\r\nfunction Euler( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._order = order;\r\n\r\n}\r\n\r\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nEuler.DefaultOrder = 'XYZ';\r\n\r\nObject.defineProperties( Euler.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\torder: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._order;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._order = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Euler.prototype, {\r\n\r\n\tisEuler: true,\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tconst clamp = MathUtils.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements;\r\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\t_matrix.makeRotationFromQuaternion( q );\r\n\r\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function ( newOrder ) {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\t_quaternion$1.setFromEuler( this );\r\n\r\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\r\n\r\n\t},\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nfunction Layers() {\r\n\r\n\tthis.mask = 1 | 0;\r\n\r\n}\r\n\r\nObject.assign( Layers.prototype, {\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenableAll: function () {\r\n\r\n\t\tthis.mask = 0xffffffff | 0;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\r\n\r\n\t},\r\n\r\n\tdisableAll: function () {\r\n\r\n\t\tthis.mask = 0;\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _object3DId = 0;\r\n\r\nconst _v1$1 = new Vector3();\r\nconst _q1 = new Quaternion();\r\nconst _m1$1 = new Matrix4();\r\nconst _target = new Vector3();\r\n\r\nconst _position = new Vector3();\r\nconst _scale = new Vector3();\r\nconst _quaternion$2 = new Quaternion();\r\n\r\nconst _xAxis = new Vector3( 1, 0, 0 );\r\nconst _yAxis = new Vector3( 0, 1, 0 );\r\nconst _zAxis = new Vector3( 0, 0, 1 );\r\n\r\nconst _addedEvent = { type: 'added' };\r\nconst _removedEvent = { type: 'removed' };\r\n\r\nfunction Object3D() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = Object3D.DefaultUp.clone();\r\n\r\n\tconst position = new Vector3();\r\n\tconst rotation = new Euler();\r\n\tconst quaternion = new Quaternion();\r\n\tconst scale = new Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation._onChange( onRotationChange );\r\n\tquaternion._onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.matrix = new Matrix4();\r\n\tthis.matrixWorld = new Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\r\nObject3D.DefaultMatrixAutoUpdate = true;\r\n\r\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Object3D,\r\n\r\n\tisObject3D: true,\r\n\r\n\tonBeforeRender: function () {},\r\n\tonAfterRender: function () {},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tthis.matrix.premultiply( matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tthis.quaternion.premultiply( q );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.multiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateOnWorldAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in world space\r\n\t\t// axis is assumed to be normalized\r\n\t\t// method assumes no rotated parent\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.premultiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _xAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _yAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _zAxis, angle );\r\n\r\n\t},\r\n\r\n\ttranslateOnAxis: function ( axis, distance ) {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_v1$1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\tthis.position.add( _v1$1.multiplyScalar( distance ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslateX: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _xAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateY: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _yAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateZ: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _zAxis, distance );\r\n\r\n\t},\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( x, y, z ) {\r\n\r\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\t_target.copy( x );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_target.set( x, y, z );\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tif ( this.isCamera || this.isLight ) {\r\n\r\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\r\n\r\n\t\t}\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\r\n\r\n\t\tif ( parent ) {\r\n\r\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\r\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\r\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( object && object.isObject3D ) ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t\tobject.dispatchEvent( _addedEvent );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t\tobject.dispatchEvent( _removedEvent );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tattach: function ( object ) {\r\n\r\n\t\t// adds object as a child of this, while maintaining the object's world transform\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_m1$1.getInverse( this.matrixWorld );\r\n\r\n\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\tobject.parent.updateWorldMatrix( true, false );\r\n\r\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tobject.applyMatrix4( _m1$1 );\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst child = this.children[ i ];\r\n\t\t\tconst object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\r\n\t\t\ttarget = new Quaternion();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldScale: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( updateParents === true && parent !== null ) {\r\n\r\n\t\t\tparent.updateWorldMatrix( true, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.parent === null ) {\r\n\r\n\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tif ( updateChildren === true ) {\r\n\r\n\t\t\tconst children = this.children;\r\n\r\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\t// meta is a string when called from JSON.stringify\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tconst output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {},\r\n\t\t\t\tshapes: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\r\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\r\n\t\tobject.layers = this.layers.mask;\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\r\n\r\n\t\t// object specific properties\r\n\r\n\t\tif ( this.isInstancedMesh ) {\r\n\r\n\t\t\tobject.type = 'InstancedMesh';\r\n\t\t\tobject.count = this.count;\r\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tfunction serialize( library, element ) {\r\n\r\n\t\t\tif ( library[ element.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn element.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\r\n\r\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\r\n\r\n\t\t\tconst parameters = this.geometry.parameters;\r\n\r\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\r\n\r\n\t\t\t\tconst shapes = parameters.shapes;\r\n\r\n\t\t\t\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\t\t\t\tserialize( meta.shapes, shape );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tserialize( meta.shapes, shapes );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( Array.isArray( this.material ) ) {\r\n\r\n\t\t\t\tconst uuids = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.material = uuids;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tconst geometries = extractFromCache( meta.geometries );\r\n\t\t\tconst materials = extractFromCache( meta.materials );\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\t\t\tconst shapes = extractFromCache( meta.shapes );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.rotation.order = source.rotation.order;\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.layers.mask = source.layers.mask;\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tconst child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Scene() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.background = null;\r\n\tthis.environment = null;\r\n\tthis.fog = null;\r\n\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Scene,\r\n\r\n\tisScene: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tif ( source.background !== null ) this.background = source.background.clone();\r\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\r\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\r\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\r\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\r\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _points = [\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3()\r\n];\r\n\r\nconst _vector$1 = new Vector3();\r\n\r\nconst _box = new Box3();\r\n\r\n// triangle centered vertices\r\n\r\nconst _v0 = new Vector3();\r\nconst _v1$2 = new Vector3();\r\nconst _v2 = new Vector3();\r\n\r\n// triangle edge vectors\r\n\r\nconst _f0 = new Vector3();\r\nconst _f1 = new Vector3();\r\nconst _f2 = new Vector3();\r\n\r\nconst _center = new Vector3();\r\nconst _extents = new Vector3();\r\nconst _triangleNormal = new Vector3();\r\nconst _testAxis = new Vector3();\r\n\r\nfunction Box3( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n}\r\n\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tisBox3: true,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\tconst x = array[ i ];\r\n\t\t\tconst y = array[ i + 1 ];\r\n\t\t\tconst z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromBufferAttribute: function ( attribute ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst x = attribute.getX( i );\r\n\t\t\tconst y = attribute.getY( i );\r\n\t\t\tconst z = attribute.getZ( i );\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\treturn this.expandByObject( object );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByObject: function ( object ) {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box.copy( geometry.boundingBox );\r\n\t\t\t_box.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\tthis.union( _box );\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.expandByObject( children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\r\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\r\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\tthis.clampPoint( sphere.center, _vector$1 );\r\n\r\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tlet min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\r\n\r\n\t},\r\n\r\n\tintersectsTriangle: function ( triangle ) {\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// compute box center and extents\r\n\t\tthis.getCenter( _center );\r\n\t\t_extents.subVectors( this.max, _center );\r\n\r\n\t\t// translate triangle to aabb origin\r\n\t\t_v0.subVectors( triangle.a, _center );\r\n\t\t_v1$2.subVectors( triangle.b, _center );\r\n\t\t_v2.subVectors( triangle.c, _center );\r\n\r\n\t\t// compute edge vectors for triangle\r\n\t\t_f0.subVectors( _v1$2, _v0 );\r\n\t\t_f1.subVectors( _v2, _v1$2 );\r\n\t\t_f2.subVectors( _v0, _v2 );\r\n\r\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\r\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\r\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\r\n\t\tlet axes = [\r\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\r\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\r\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\r\n\t\t];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// test 3 face normals from the aabb\r\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// finally testing the face normal of the triangle\r\n\t\t// use already existing triangle edge vectors here\r\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\r\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\r\n\r\n\t\treturn satForAxes( axes, _v0, _v1$2, _v2, _extents );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\r\n\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tgetBoundingSphere: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\r\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\r\n\r\n\t\t}\r\n\r\n\t\tthis.getCenter( target.center );\r\n\r\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n\t\tif ( this.isEmpty() ) this.makeEmpty();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\t// transform of empty box is an empty box.\r\n\t\tif ( this.isEmpty() ) return this;\r\n\r\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\r\n\r\n\t\tthis.setFromPoints( _points );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction satForAxes( axes, v0, v1, v2, extents ) {\r\n\r\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\r\n\r\n\t\t_testAxis.fromArray( axes, i );\r\n\t\t// project the aabb onto the seperating axis\r\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\r\n\t\t// project all 3 vertices of the triangle onto the seperating axis\r\n\t\tconst p0 = v0.dot( _testAxis );\r\n\t\tconst p1 = v1.dot( _testAxis );\r\n\t\tconst p2 = v2.dot( _testAxis );\r\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\r\n\r\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\r\n\t\t\t// the axis is seperating and we can exit\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nconst _box$1 = new Box3();\r\n\r\nfunction Sphere( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : - 1;\r\n\r\n}\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points, optionalCenter ) {\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\r\n\r\n\t\t}\r\n\r\n\t\tlet maxRadiusSq = 0;\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\treturn ( this.radius < 0 );\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.center.set( 0, 0, 0 );\r\n\t\tthis.radius = - 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\ttarget.sub( this.center ).normalize();\r\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\r\n\t\t\ttarget = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\t// Empty sphere produces empty bounding box\r\n\t\t\ttarget.makeEmpty();\r\n\t\t\treturn target;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.set( this.center, this.center );\r\n\t\ttarget.expandByScalar( this.radius );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$2 = new Vector3();\r\nconst _segCenter = new Vector3();\r\nconst _segDir = new Vector3();\r\nconst _diff = new Vector3();\r\n\r\nconst _edge1 = new Vector3();\r\nconst _edge2 = new Vector3();\r\nconst _normal = new Vector3();\r\n\r\nfunction Ray( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\r\n\r\n}\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trecast: function ( t ) {\r\n\r\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( point, this.origin );\r\n\r\n\t\tconst directionDistance = target.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn target.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function ( point ) {\r\n\r\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t// point behind the ray\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t}\r\n\r\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\treturn _vector$2.distanceToSquared( point );\r\n\r\n\t},\r\n\r\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n\t\t// It returns the min distance between the ray and the segment\r\n\t\t// defined by v0 and v1\r\n\t\t// It can also set two optional targets :\r\n\t\t// - The closest point on the ray\r\n\t\t// - The closest point on the segment\r\n\r\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t_diff.copy( this.origin ).sub( _segCenter );\r\n\r\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\tconst a01 = - this.direction.dot( _segDir );\r\n\t\tconst b0 = _diff.dot( this.direction );\r\n\t\tconst b1 = - _diff.dot( _segDir );\r\n\t\tconst c = _diff.lengthSq();\r\n\t\tconst det = Math.abs( 1 - a01 * a01 );\r\n\t\tlet s0, s1, sqrDist, extDet;\r\n\r\n\t\tif ( det > 0 ) {\r\n\r\n\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\textDet = segExtent * det;\r\n\r\n\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\tconst invDet = 1 / det;\r\n\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\r\n\r\n\t\t}\r\n\r\n\t\treturn sqrDist;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function ( sphere, target ) {\r\n\r\n\t\t_vector$2.subVectors( sphere.center, this.origin );\r\n\t\tconst tca = _vector$2.dot( this.direction );\r\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\r\n\t\tconst radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\tconst thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\tconst t0 = tca - thc;\r\n\r\n\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\tconst t1 = tca + thc;\r\n\r\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t// test to see if t0 is behind the ray:\r\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\tif ( t0 < 0 ) return this.at( t1, target );\r\n\r\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\treturn this.at( t0, target );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t : null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, target ) {\r\n\r\n\t\tconst t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, target );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, target ) {\r\n\r\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tconst invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tconst origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n\t\t_edge1.subVectors( b, a );\r\n\t\t_edge2.subVectors( c, a );\r\n\t\t_normal.crossVectors( _edge1, _edge2 );\r\n\r\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\tlet DdN = this.direction.dot( _normal );\r\n\t\tlet sign;\r\n\r\n\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\tsign = 1;\r\n\r\n\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\tsign = - 1;\r\n\t\t\tDdN = - DdN;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t_diff.subVectors( this.origin, a );\r\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\r\n\r\n\t\t// b1 < 0, no intersection\r\n\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\r\n\r\n\t\t// b2 < 0, no intersection\r\n\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// b1+b2 > 1, no intersection\r\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Line intersects triangle, check if ray does.\r\n\t\tconst QdN = - sign * _diff.dot( _normal );\r\n\r\n\t\t// t < 0, no intersection\r\n\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Ray intersects triangle.\r\n\t\treturn this.at( QdN / DdN, target );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.transformDirection( matrix4 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector1 = new Vector3();\r\nconst _vector2 = new Vector3();\r\nconst _normalMatrix = new Matrix3();\r\n\r\nfunction Plane( normal, constant ) {\r\n\r\n\t// normal is assumed to be normalized\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n}\r\n\r\nObject.assign( Plane.prototype, {\r\n\r\n\tisPlane: true,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function ( a, b, c ) {\r\n\r\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\r\n\r\n\t},\r\n\r\n\tintersectLine: function ( line, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst direction = line.delta( _vector1 );\r\n\r\n\t\tconst denominator = this.normal.dot( direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\treturn target.copy( line.start );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t},\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tconst startSign = this.distanceToPoint( line.start );\r\n\t\tconst endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\r\n\r\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\r\n\r\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\tthis.constant = - referencePoint.dot( normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant -= offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v0$1 = new Vector3();\r\nconst _v1$3 = new Vector3();\r\nconst _v2$1 = new Vector3();\r\nconst _v3 = new Vector3();\r\n\r\nconst _vab = new Vector3();\r\nconst _vac = new Vector3();\r\nconst _vbc = new Vector3();\r\nconst _vap = new Vector3();\r\nconst _vbp = new Vector3();\r\nconst _vcp = new Vector3();\r\n\r\nfunction Triangle( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tgetNormal: function ( a, b, c, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( c, b );\r\n\t\t_v0$1.subVectors( a, b );\r\n\t\ttarget.cross( _v0$1 );\r\n\r\n\t\tconst targetLengthSq = target.lengthSq();\r\n\t\tif ( targetLengthSq > 0 ) {\r\n\r\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( 0, 0, 0 );\r\n\r\n\t},\r\n\r\n\t// static/instance method to calculate barycentric coordinates\r\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n\tgetBarycoord: function ( point, a, b, c, target ) {\r\n\r\n\t\t_v0$1.subVectors( c, a );\r\n\t\t_v1$3.subVectors( b, a );\r\n\t\t_v2$1.subVectors( point, a );\r\n\r\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\r\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\r\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\r\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\r\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\r\n\r\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn target.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tconst invDenom = 1 / denom;\r\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn target.set( 1 - u - v, v, u );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point, a, b, c ) {\r\n\r\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\r\n\r\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\r\n\r\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\r\n\r\n\t\ttarget.set( 0, 0 );\r\n\t\ttarget.addScaledVector( uv1, _v3.x );\r\n\t\ttarget.addScaledVector( uv2, _v3.y );\r\n\t\ttarget.addScaledVector( uv3, _v3.z );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( a, b, c, direction ) {\r\n\r\n\t\t_v0$1.subVectors( c, b );\r\n\t\t_v1$3.subVectors( a, b );\r\n\r\n\t\t// strictly front facing\r\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetArea: function () {\r\n\r\n\t\t_v0$1.subVectors( this.c, this.b );\r\n\t\t_v1$3.subVectors( this.a, this.b );\r\n\r\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\r\n\r\n\t},\r\n\r\n\tgetMidpoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tgetNormal: function ( target ) {\r\n\r\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetPlane: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\r\n\t\t\ttarget = new Plane();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tgetBarycoord: function ( point, target ) {\r\n\r\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\r\n\r\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( direction ) {\r\n\r\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsTriangle( this );\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( p, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst a = this.a, b = this.b, c = this.c;\r\n\t\tlet v, w;\r\n\r\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\r\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\r\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\r\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\r\n\t\t// the point lies in with the minimum amount of redundant computation.\r\n\r\n\t\t_vab.subVectors( b, a );\r\n\t\t_vac.subVectors( c, a );\r\n\t\t_vap.subVectors( p, a );\r\n\t\tconst d1 = _vab.dot( _vap );\r\n\t\tconst d2 = _vac.dot( _vap );\r\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\r\n\r\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\r\n\t\t\treturn target.copy( a );\r\n\r\n\t\t}\r\n\r\n\t\t_vbp.subVectors( p, b );\r\n\t\tconst d3 = _vab.dot( _vbp );\r\n\t\tconst d4 = _vac.dot( _vbp );\r\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\r\n\r\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\r\n\t\t\treturn target.copy( b );\r\n\r\n\t\t}\r\n\r\n\t\tconst vc = d1 * d4 - d3 * d2;\r\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\r\n\r\n\t\t\tv = d1 / ( d1 - d3 );\r\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\r\n\r\n\t\t}\r\n\r\n\t\t_vcp.subVectors( p, c );\r\n\t\tconst d5 = _vab.dot( _vcp );\r\n\t\tconst d6 = _vac.dot( _vcp );\r\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\r\n\r\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\r\n\t\t\treturn target.copy( c );\r\n\r\n\t\t}\r\n\r\n\t\tconst vb = d5 * d2 - d1 * d6;\r\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\r\n\r\n\t\t\tw = d2 / ( d2 - d6 );\r\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\r\n\r\n\t\t}\r\n\r\n\t\tconst va = d3 * d6 - d5 * d4;\r\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\r\n\r\n\t\t\t_vbc.subVectors( c, b );\r\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\r\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\r\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\r\n\r\n\t\t}\r\n\r\n\t\t// face region\r\n\t\tconst denom = 1 / ( va + vb + vc );\r\n\t\t// u = va * denom\r\n\t\tv = vb * denom;\r\n\t\tw = vc * denom;\r\n\r\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\nconst _hslA = { h: 0, s: 0, l: 0 };\r\nconst _hslB = { h: 0, s: 0, l: 0 };\r\n\r\nfunction Color( r, g, b ) {\r\n\r\n\tif ( g === undefined && b === undefined ) {\r\n\r\n\t\t// r is THREE.Color, hex or string\r\n\t\treturn this.set( r );\r\n\r\n\t}\r\n\r\n\treturn this.setRGB( r, g, b );\r\n\r\n}\r\n\r\nfunction hue2rgb( p, q, t ) {\r\n\r\n\tif ( t < 0 ) t += 1;\r\n\tif ( t > 1 ) t -= 1;\r\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\tif ( t < 1 / 2 ) return q;\r\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction SRGBToLinear( c ) {\r\n\r\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\r\n\r\n}\r\n\r\nfunction LinearToSRGB( c ) {\r\n\r\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\r\n\r\n}\r\n\r\nObject.assign( Color.prototype, {\r\n\r\n\tisColor: true,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value && value.isColor ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function ( h, s, l ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\th = MathUtils.euclideanModulo( h, 1 );\r\n\t\ts = MathUtils.clamp( s, 0, 1 );\r\n\t\tl = MathUtils.clamp( l, 0, 1 );\r\n\r\n\t\tif ( s === 0 ) {\r\n\r\n\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\tconst q = ( 2 * l ) - p;\r\n\r\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tlet m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tlet color;\r\n\t\t\tconst name = m[ 1 ];\r\n\t\t\tconst components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tconst hex = m[ 1 ];\r\n\t\t\tconst size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\treturn this.setColorName( style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetColorName: function ( style ) {\r\n\r\n\t\t// color keywords\r\n\t\tconst hex = _colorKeywords[ style ];\r\n\r\n\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t// red\r\n\t\t\tthis.setHex( hex );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// unknown color\r\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyGammaToLinear( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyLinearToGamma( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopySRGBToLinear: function ( color ) {\r\n\r\n\t\tthis.r = SRGBToLinear( color.r );\r\n\t\tthis.g = SRGBToLinear( color.g );\r\n\t\tthis.b = SRGBToLinear( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToSRGB: function ( color ) {\r\n\r\n\t\tthis.r = LinearToSRGB( color.r );\r\n\t\tthis.g = LinearToSRGB( color.g );\r\n\t\tthis.b = LinearToSRGB( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertSRGBToLinear: function () {\r\n\r\n\t\tthis.copySRGBToLinear( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToSRGB: function () {\r\n\r\n\t\tthis.copyLinearToSRGB( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( target ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\r\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\r\n\r\n\t\t}\r\n\r\n\t\tconst r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tconst max = Math.max( r, g, b );\r\n\t\tconst min = Math.min( r, g, b );\r\n\r\n\t\tlet hue, saturation;\r\n\t\tconst lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.h = hue;\r\n\t\ttarget.s = saturation;\r\n\t\ttarget.l = lightness;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\r\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\r\n\r\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( color ) {\r\n\r\n\t\tthis.r = Math.max( 0, this.r - color.r );\r\n\t\tthis.g = Math.max( 0, this.g - color.g );\r\n\t\tthis.b = Math.max( 0, this.b - color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpHSL: function ( color, alpha ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\t\tcolor.getHSL( _hslB );\r\n\r\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\r\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\r\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\r\n\r\n\t\tthis.setHSL( h, s, l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis.r = attribute.getX( index );\r\n\t\tthis.g = attribute.getY( index );\r\n\t\tthis.b = attribute.getZ( index );\r\n\r\n\t\tif ( attribute.normalized === true ) {\r\n\r\n\t\t\t// assuming Uint8Array\r\n\r\n\t\t\tthis.r /= 255;\r\n\t\t\tthis.g /= 255;\r\n\t\t\tthis.b /= 255;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn this.getHex();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nColor.NAMES = _colorKeywords;\r\n\r\nfunction Face3( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = ( color && color.isColor ) ? color : new Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n}\r\n\r\nObject.assign( Face3.prototype, {\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet materialId = 0;\r\n\r\nfunction Material() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.blending = NormalBlending;\r\n\tthis.side = FrontSide;\r\n\tthis.flatShading = false;\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blendSrc = SrcAlphaFactor;\r\n\tthis.blendDst = OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.stencilWriteMask = 0xff;\r\n\tthis.stencilFunc = AlwaysStencilFunc;\r\n\tthis.stencilRef = 0;\r\n\tthis.stencilFuncMask = 0xff;\r\n\tthis.stencilFail = KeepStencilOp;\r\n\tthis.stencilZFail = KeepStencilOp;\r\n\tthis.stencilZPass = KeepStencilOp;\r\n\tthis.stencilWrite = false;\r\n\r\n\tthis.clippingPlanes = null;\r\n\tthis.clipIntersection = false;\r\n\tthis.clipShadows = false;\r\n\r\n\tthis.shadowSide = null;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.dithering = false;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.toneMapped = true;\r\n\r\n\tthis.userData = {};\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Material,\r\n\r\n\tisMaterial: true,\r\n\r\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\r\n\r\n\tcustomProgramCacheKey: function () {\r\n\r\n\t\treturn this.onBeforeCompile.toString();\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( const key in values ) {\r\n\r\n\t\t\tconst newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// for backward compatability if shading is set in the constructor\r\n\t\t\tif ( key === 'shading' ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue && currentValue.isColor ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\r\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\r\n\r\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\r\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\r\n\r\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\r\n\r\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\r\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalMapType = this.normalMapType;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap && this.envMap.isTexture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\t\t\tdata.refractionRatio = this.refractionRatio;\r\n\r\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\r\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\r\n\r\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\r\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\r\n\t\tif ( this.vertexColors ) data.vertexColors = true;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\r\n\t\tdata.depthFunc = this.depthFunc;\r\n\t\tdata.depthTest = this.depthTest;\r\n\t\tdata.depthWrite = this.depthWrite;\r\n\r\n\t\tdata.stencilWrite = this.stencilWrite;\r\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\r\n\t\tdata.stencilFunc = this.stencilFunc;\r\n\t\tdata.stencilRef = this.stencilRef;\r\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\r\n\t\tdata.stencilFail = this.stencilFail;\r\n\t\tdata.stencilZFail = this.stencilZFail;\r\n\t\tdata.stencilZPass = this.stencilZPass;\r\n\r\n\t\t// rotation (SpriteMaterial)\r\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\r\n\r\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\r\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\r\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\r\n\r\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\r\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\r\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\r\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\r\n\r\n\t\tif ( this.dithering === true ) data.dithering = true;\r\n\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\r\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\r\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\r\n\t\tif ( this.skinning === true ) data.skinning = true;\r\n\r\n\t\tif ( this.visible === false ) data.visible = false;\r\n\r\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\r\n\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.fog = source.fog;\r\n\r\n\t\tthis.blending = source.blending;\r\n\t\tthis.side = source.side;\r\n\t\tthis.flatShading = source.flatShading;\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\r\n\t\tthis.stencilFunc = source.stencilFunc;\r\n\t\tthis.stencilRef = source.stencilRef;\r\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\r\n\t\tthis.stencilFail = source.stencilFail;\r\n\t\tthis.stencilZFail = source.stencilZFail;\r\n\t\tthis.stencilZPass = source.stencilZPass;\r\n\t\tthis.stencilWrite = source.stencilWrite;\r\n\r\n\t\tconst srcPlanes = source.clippingPlanes;\r\n\t\tlet dstPlanes = null;\r\n\r\n\t\tif ( srcPlanes !== null ) {\r\n\r\n\t\t\tconst n = srcPlanes.length;\r\n\t\t\tdstPlanes = new Array( n );\r\n\r\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.clippingPlanes = dstPlanes;\r\n\t\tthis.clipIntersection = source.clipIntersection;\r\n\t\tthis.clipShadows = source.clipShadows;\r\n\r\n\t\tthis.shadowSide = source.shadowSide;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.dithering = source.dithering;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.toneMapped = source.toneMapped;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Material.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\r\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\r\n\r\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\r\n\r\nMeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _vector$3 = new Vector3();\r\nconst _vector2$1 = new Vector2();\r\n\r\nfunction BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tif ( Array.isArray( array ) ) {\r\n\r\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n\t}\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\r\n\tthis.normalized = normalized === true;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\r\n\tisBufferAttribute: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\t\tthis.count = source.count;\r\n\t\tthis.normalized = source.normalized;\r\n\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tif ( this.itemSize === 2 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector2$1.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.itemSize === 3 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector$3.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyNormalMatrix( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.transformDirection( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn {\r\n\t\t\titemSize: this.itemSize,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tarray: Array.prototype.slice.call( this.array ),\r\n\t\t\tnormalized: this.normalized\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\r\n\r\n\r\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\r\n\r\n\r\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\r\n\r\n\r\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\r\n\r\n\r\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\r\n\r\n\r\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\r\n\r\n\r\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\r\n\r\n\r\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\r\n\r\n\r\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\r\n\r\nfunction DirectGeometry() {\r\n\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nObject.assign( DirectGeometry.prototype, {\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tconst groups = [];\r\n\r\n\t\tlet group, i;\r\n\t\tlet materialIndex = undefined;\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tconst faces = geometry.faces;\r\n\t\tconst vertices = geometry.vertices;\r\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tconst morphTargets = geometry.morphTargets;\r\n\t\tconst morphTargetsLength = morphTargets.length;\r\n\r\n\t\tlet morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = {\r\n\t\t\t\t\tname: morphTargets[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphNormals = geometry.morphNormals;\r\n\t\tconst morphNormalsLength = morphNormals.length;\r\n\r\n\t\tlet morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = {\r\n\t\t\t\t\tname: morphNormals[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tconst skinIndices = geometry.skinIndices;\r\n\t\tconst skinWeights = geometry.skinWeights;\r\n\r\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction arrayMax( array ) {\r\n\r\n\tif ( array.length === 0 ) return - Infinity;\r\n\r\n\tlet max = array[ 0 ];\r\n\r\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\r\n\r\n\t\tif ( array[ i ] > max ) max = array[ i ];\r\n\r\n\t}\r\n\r\n\treturn max;\r\n\r\n}\r\n\r\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\r\n\r\nconst _m1$2 = new Matrix4();\r\nconst _obj = new Object3D();\r\nconst _offset = new Vector3();\r\nconst _box$2 = new Box3();\r\nconst _boxMorphTargets = new Box3();\r\nconst _vector$4 = new Vector3();\r\n\r\nfunction BufferGeometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\tthis.morphTargetsRelative = false;\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: BufferGeometry,\r\n\r\n\tisBufferGeometry: true,\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tif ( Array.isArray( index ) ) {\r\n\r\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.index = index;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tsetAttribute: function ( name, attribute ) {\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeleteAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tposition.applyMatrix4( matrix );\r\n\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst tangent = this.attributes.tangent;\r\n\r\n\t\tif ( tangent !== undefined ) {\r\n\r\n\t\t\ttangent.transformDirection( matrix );\r\n\r\n\t\t\ttangent.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$2.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$2.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$2.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$2.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$2.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj.lookAt( vector );\r\n\r\n\t\t_obj.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset ).negate();\r\n\r\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( object.isPoints || object.isLine ) {\r\n\r\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isMesh ) {\r\n\r\n\t\t\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tconst position = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tlet geometry = object.geometry;\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tlet direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\r\n\r\n\t\t\t\tdirect = undefined;\r\n\t\t\t\tgeometry.elementsNeedUpdate = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( const name in geometry.morphTargets ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\r\n\t\t\t\tattribute.name = morphTarget.name;\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position ) {\r\n\r\n\t\t\t// first, find the center of the bounding sphere\r\n\r\n\t\t\tconst center = this.boundingSphere.center;\r\n\r\n\t\t\t_box$2.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box$2.getCenter( center );\r\n\r\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\r\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\tlet maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\r\n\r\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\r\n\t\t\t\t\t\t\t_vector$4.add( _offset );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconst index = this.index;\r\n\t\tconst positionAttribute = this.getAttribute( 'position' );\r\n\r\n\t\tif ( positionAttribute !== undefined ) {\r\n\r\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\r\n\r\n\t\t\tif ( normalAttribute === undefined ) {\r\n\r\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\r\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tconst vA = index.getX( i + 0 );\r\n\t\t\t\t\tconst vB = index.getX( i + 1 );\r\n\t\t\t\t\tconst vC = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\r\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\r\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\r\n\r\n\t\t\t\t\tnA.add( cb );\r\n\t\t\t\t\tnB.add( cb );\r\n\t\t\t\t\tnC.add( cb );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tnormalAttribute.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) {\r\n\r\n\t\t\toffset = 0;\r\n\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tconst attribute1 = attributes[ key ];\r\n\t\t\tconst attributeArray1 = attribute1.array;\r\n\r\n\t\t\tconst attribute2 = geometry.attributes[ key ];\r\n\t\t\tconst attributeArray2 = attribute2.array;\r\n\r\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\r\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\r\n\r\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tconst normals = this.attributes.normal;\r\n\r\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\r\n\r\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\r\n\r\n\t\t\t_vector$4.normalize();\r\n\r\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tfunction convertBufferAttribute( attribute, indices ) {\r\n\r\n\t\t\tconst array = attribute.array;\r\n\t\t\tconst itemSize = attribute.itemSize;\r\n\t\t\tconst normalized = attribute.normalized;\r\n\r\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tlet index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry2 = new BufferGeometry();\r\n\r\n\t\tconst indices = this.index.array;\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\t// attributes\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\r\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\tgeometry2.setAttribute( name, newAttribute );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = this.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst morphArray = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = morphAttribute[ i ];\r\n\r\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\t\tmorphArray.push( newAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tconst index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\tdata.data.attributes[ key ] = attributeData;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = {};\r\n\t\tlet hasMorphAttributes = false;\r\n\r\n\t\tfor ( const key in this.morphAttributes ) {\r\n\r\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = attributeArray[ i ];\r\n\r\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\t\tarray.push( attributeData );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( array.length > 0 ) {\r\n\r\n\t\t\t\tmorphAttributes[ key ] = array;\r\n\r\n\t\t\t\thasMorphAttributes = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphAttributes ) {\r\n\r\n\t\t\tdata.data.morphAttributes = morphAttributes;\r\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.index = null;\r\n\t\tthis.attributes = {};\r\n\t\tthis.morphAttributes = {};\r\n\t\tthis.groups = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// used for storing cloned, shared data\r\n\r\n\t\tconst data = {};\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// index\r\n\r\n\t\tconst index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// attributes\r\n\r\n\t\tconst attributes = source.attributes;\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = source.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = source.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// draw range\r\n\r\n\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\tthis.drawRange.count = source.drawRange.count;\r\n\r\n\t\t// user data\r\n\r\n\t\tthis.userData = source.userData;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _inverseMatrix = new Matrix4();\r\nconst _ray = new Ray();\r\nconst _sphere = new Sphere();\r\n\r\nconst _vA = new Vector3();\r\nconst _vB = new Vector3();\r\nconst _vC = new Vector3();\r\n\r\nconst _tempA = new Vector3();\r\nconst _tempB = new Vector3();\r\nconst _tempC = new Vector3();\r\n\r\nconst _morphA = new Vector3();\r\nconst _morphB = new Vector3();\r\nconst _morphC = new Vector3();\r\n\r\nconst _uvA = new Vector2();\r\nconst _uvB = new Vector2();\r\nconst _uvC = new Vector2();\r\n\r\nconst _intersectionPoint = new Vector3();\r\nconst _intersectionPointWorld = new Vector3();\r\n\r\nfunction Mesh( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Mesh,\r\n\r\n\tisMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\r\n\r\n\t\t}\r\n\r\n\t\tif ( source.morphTargetDictionary !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\r\n\r\n\t\t}\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst material = this.material;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere.copy( geometry.boundingSphere );\r\n\t\t_sphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix.getInverse( matrixWorld );\r\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t}\r\n\r\n\t\tlet intersection;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\r\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\r\n\t\t\tconst uv = geometry.attributes.uv;\r\n\t\t\tconst uv2 = geometry.attributes.uv2;\r\n\t\t\tconst groups = geometry.groups;\r\n\t\t\tconst drawRange = geometry.drawRange;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t// indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = index.getX( j );\r\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\r\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = index.getX( i );\r\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\r\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\t\t// non-indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = j;\r\n\t\t\t\t\t\t\tconst b = j + 1;\r\n\t\t\t\t\t\t\tconst c = j + 2;\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = i;\r\n\t\t\t\t\t\tconst b = i + 1;\r\n\t\t\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst isMultiMaterial = Array.isArray( material );\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst faces = geometry.faces;\r\n\t\t\tlet uvs;\r\n\r\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = faces[ f ];\r\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\tconst fvA = vertices[ face.a ];\r\n\t\t\t\tconst fvB = vertices[ face.b ];\r\n\t\t\t\tconst fvC = vertices[ face.c ];\r\n\r\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\r\n\r\n\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\r\n\r\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\r\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tlet intersect;\r\n\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\t_intersectionPointWorld.copy( point );\r\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: _intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\r\n\r\n\t_vA.fromBufferAttribute( position, a );\r\n\t_vB.fromBufferAttribute( position, b );\r\n\t_vC.fromBufferAttribute( position, c );\r\n\r\n\tconst morphInfluences = object.morphTargetInfluences;\r\n\r\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\r\n\r\n\t\t_morphA.set( 0, 0, 0 );\r\n\t\t_morphB.set( 0, 0, 0 );\r\n\t\t_morphC.set( 0, 0, 0 );\r\n\r\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst influence = morphInfluences[ i ];\r\n\t\t\tconst morphAttribute = morphPosition[ i ];\r\n\r\n\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\r\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\r\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\r\n\r\n\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_vA.add( _morphA );\r\n\t\t_vB.add( _morphB );\r\n\t\t_vC.add( _morphC );\r\n\r\n\t}\r\n\r\n\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\tobject.boneTransform( a, _vA );\r\n\t\tobject.boneTransform( b, _vB );\r\n\t\tobject.boneTransform( c, _vC );\r\n\r\n\t}\r\n\r\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2 ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\r\n\r\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = new Face3( a, b, c );\r\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\nlet _geometryId = 0; // Geometry uses even numbers as Id\r\nconst _m1$3 = new Matrix4();\r\nconst _obj$1 = new Object3D();\r\nconst _offset$1 = new Vector3();\r\n\r\nfunction Geometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [[]];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Geometry,\r\n\r\n\tisGeometry: true,\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$3.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$3.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$3.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$3.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$3.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj$1.lookAt( vector );\r\n\r\n\t\t_obj$1.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj$1.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tif ( attributes.position === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst position = attributes.position;\r\n\t\tconst normal = attributes.normal;\r\n\t\tconst color = attributes.color;\r\n\t\tconst uv = attributes.uv;\r\n\t\tconst uv2 = attributes.uv2;\r\n\r\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\r\n\r\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\r\n\r\n\t\t\tif ( color !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\r\n\t\t\t\tscope.colors[ a ].clone(),\r\n\t\t\t\tscope.colors[ b ].clone(),\r\n\t\t\t\tscope.colors[ c ].clone()\r\n\t\t\t];\r\n\r\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\r\n\t\t\t];\r\n\r\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uv !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = geometry.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\r\n\r\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tconst center = this.boundingSphere.center;\r\n\t\tconst radius = this.boundingSphere.radius;\r\n\r\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tconst matrix = new Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tconst vertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.computeFaceNormals();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFlatVertexNormals: function () {\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tconst tmpGeo = new Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tconst faceNormal = new Vector3();\r\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet normalMatrix,\r\n\t\t\tvertexOffset = this.vertices.length,\r\n\t\t\tvertices1 = this.vertices,\r\n\t\t\tvertices2 = geometry.vertices,\r\n\t\t\tfaces1 = this.faces,\r\n\t\t\tfaces2 = geometry.faces,\r\n\t\t\tcolors1 = this.colors,\r\n\t\t\tcolors2 = geometry.colors;\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = vertices2[ i ];\r\n\r\n\t\t\tconst vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\r\n\r\n\t\t\tcolors1.push( colors2[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tlet face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tconst unique = [], changes = [];\r\n\r\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tconst precision = Math.pow( 10, precisionPoints );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst v = this.vertices[ i ];\r\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tconst faceIndicesToRemove = [];\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tconst indices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tconst idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tconst diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.vertices = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tconst faces = this.faces;\r\n\t\tconst length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tlet newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tconst vertices = [];\r\n\r\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = [];\r\n\t\tconst normals = [];\r\n\t\tconst normalsHash = {};\r\n\t\tconst colors = [];\r\n\t\tconst colorsHash = {};\r\n\t\tconst uvs = [];\r\n\t\tconst uvsHash = {};\r\n\r\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tconst hasMaterial = true;\r\n\t\t\tconst hasFaceUv = false; // deprecated\r\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tlet faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [[]];\r\n\t\tthis.morphTargets = [];\r\n\t\tthis.morphNormals = [];\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\tthis.lineDistances = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// vertices\r\n\r\n\t\tconst vertices = source.vertices;\r\n\r\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tconst colors = source.colors;\r\n\r\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.colors.push( colors[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tconst faces = source.faces;\r\n\r\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// face vertex uvs\r\n\r\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tconst uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphTargets = source.morphTargets;\r\n\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = {};\r\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\r\n\r\n\t\t\t// vertices\r\n\r\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.vertices = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.normals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.push( morphTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// morph normals\r\n\r\n\t\tconst morphNormals = source.morphNormals;\r\n\r\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphNormal = {};\r\n\r\n\t\t\t// vertex normals\r\n\r\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.vertexNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\r\n\t\t\t\t\tconst destVertexNormal = {};\r\n\r\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\r\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\r\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\r\n\r\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// face normals\r\n\r\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.faceNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphNormals.push( morphNormal );\r\n\r\n\t\t}\r\n\r\n\t\t// skin weights\r\n\r\n\t\tconst skinWeights = source.skinWeights;\r\n\r\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// skin indices\r\n\r\n\t\tconst skinIndices = source.skinIndices;\r\n\r\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// line distances\r\n\r\n\t\tconst lineDistances = source.lineDistances;\r\n\r\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// update flags\r\n\r\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\r\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\r\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// BoxGeometry\r\n\r\nclass BoxGeometry extends Geometry {\r\n\r\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\t\tthis.mergeVertices();\r\n\r\n\t}\r\n\r\n}\r\n\r\n// BoxBufferGeometry\r\n\r\nclass BoxBufferGeometry extends BufferGeometry {\r\n\r\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxBufferGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\t// segments\r\n\r\n\t\twidthSegments = Math.floor( widthSegments );\r\n\t\theightSegments = Math.floor( heightSegments );\r\n\t\tdepthSegments = Math.floor( depthSegments );\r\n\r\n\t\t// buffers\r\n\r\n\t\tconst indices = [];\r\n\t\tconst vertices = [];\r\n\t\tconst normals = [];\r\n\t\tconst uvs = [];\r\n\r\n\t\t// helper variables\r\n\r\n\t\tlet numberOfVertices = 0;\r\n\t\tlet groupStart = 0;\r\n\r\n\t\t// build each side of the box geometry\r\n\r\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\r\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\r\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\r\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t\t// build geometry\r\n\r\n\t\tthis.setIndex( indices );\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\t\tconst segmentWidth = width / gridX;\r\n\t\t\tconst segmentHeight = height / gridY;\r\n\r\n\t\t\tconst widthHalf = width / 2;\r\n\t\t\tconst heightHalf = height / 2;\r\n\t\t\tconst depthHalf = depth / 2;\r\n\r\n\t\t\tconst gridX1 = gridX + 1;\r\n\t\t\tconst gridY1 = gridY + 1;\r\n\r\n\t\t\tlet vertexCounter = 0;\r\n\t\t\tlet groupCount = 0;\r\n\r\n\t\t\tconst vector = new Vector3();\r\n\r\n\t\t\t// generate vertices, normals and uvs\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t\t// now apply vector to vertex buffer\r\n\r\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t\t// now apply vector to normal buffer\r\n\r\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// uvs\r\n\r\n\t\t\t\t\tuvs.push( ix / gridX );\r\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t\t\t\t// counters\r\n\r\n\t\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\t// 1. you need three indices to draw a single face\r\n\t\t\t// 2. a single segment consists of two faces\r\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t\t// faces\r\n\r\n\t\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t\t// increase counter\r\n\r\n\t\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t\t// calculate new start value for groups\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\r\n\t\t\t// update total number of vertices\r\n\r\n\t\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nfunction cloneUniforms( src ) {\r\n\r\n\tconst dst = {};\r\n\r\n\tfor ( const u in src ) {\r\n\r\n\t\tdst[ u ] = {};\r\n\r\n\t\tfor ( const p in src[ u ] ) {\r\n\r\n\t\t\tconst property = src[ u ][ p ];\r\n\r\n\t\t\tif ( property && ( property.isColor ||\r\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\r\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\r\n\t\t\t\tproperty.isTexture ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.clone();\r\n\r\n\t\t\t} else if ( Array.isArray( property ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.slice();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dst;\r\n\r\n}\r\n\r\nfunction mergeUniforms( uniforms ) {\r\n\r\n\tconst merged = {};\r\n\r\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\r\n\r\n\t\tfor ( const p in tmp ) {\r\n\r\n\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn merged;\r\n\r\n}\r\n\r\n// Legacy\r\n\r\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\r\n\r\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\r\n\r\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\r\n\r\n/**\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction ShaderMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = default_vertex;\r\n\tthis.fragmentShader = default_fragment;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\tthis.lights = false; // set to use scene lights\r\n\tthis.clipping = false; // set to use user-defined clipping planes\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\tthis.uniformsNeedUpdate = false;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\r\n\r\nShaderMaterial.prototype = Object.create( Material.prototype );\r\nShaderMaterial.prototype.constructor = ShaderMaterial;\r\n\r\nShaderMaterial.prototype.isShaderMaterial = true;\r\n\r\nShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = cloneUniforms( source.uniforms );\r\n\r\n\tthis.defines = Object.assign( {}, source.defines );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.lights = source.lights;\r\n\tthis.clipping = source.clipping;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = Object.assign( {}, source.extensions );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tconst data = Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = {};\r\n\r\n\tfor ( const name in this.uniforms ) {\r\n\r\n\t\tconst uniform = this.uniforms[ name ];\r\n\t\tconst value = uniform.value;\r\n\r\n\t\tif ( value && value.isTexture ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 't',\r\n\t\t\t\tvalue: value.toJSON( meta ).uuid\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isColor ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'c',\r\n\t\t\t\tvalue: value.getHex()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector2 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v2',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\tvalue: value\r\n\t\t\t};\r\n\r\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\r\n\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\tconst extensions = {};\r\n\r\n\tfor ( const key in this.extensions ) {\r\n\r\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nfunction Camera() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new Matrix4();\r\n\r\n\tthis.projectionMatrix = new Matrix4();\r\n\tthis.projectionMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Camera,\r\n\r\n\tisCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\r\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PerspectiveCamera( fov, aspect, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\tthis.focus = 10;\r\n\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.view = null;\r\n\r\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\r\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: PerspectiveCamera,\r\n\r\n\tisPerspectiveCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\tthis.focus = source.focus;\r\n\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\tthis.filmGauge = source.filmGauge;\r\n\t\tthis.filmOffset = source.filmOffset;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */\r\n\tsetFocalLength: function ( focalLength ) {\r\n\r\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */\r\n\tgetFocalLength: function () {\r\n\r\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\r\n\r\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n\t},\r\n\r\n\tgetEffectiveFOV: function () {\r\n\r\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\r\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n\t},\r\n\r\n\tgetFilmWidth: function () {\r\n\r\n\t\t// film not completely covered in portrait format (aspect < 1)\r\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\tgetFilmHeight: function () {\r\n\r\n\t\t// film not completely covered in landscape format (aspect > 1)\r\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   const w = 1920;\r\n\t *   const h = 1080;\r\n\t *   const fullWidth = w * 3;\r\n\t *   const fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tthis.aspect = fullWidth / fullHeight;\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tlet near = this.near,\r\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n\t\t\theight = 2 * top,\r\n\t\t\twidth = this.aspect * height,\r\n\t\t\tleft = - 0.5 * width,\r\n\t\t\tview = this.view;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst fullWidth = view.fullWidth,\r\n\t\t\t\tfullHeight = view.fullHeight;\r\n\r\n\t\t\tleft += view.offsetX * width / fullWidth;\r\n\t\t\ttop -= view.offsetY * height / fullHeight;\r\n\t\t\twidth *= view.width / fullWidth;\r\n\t\t\theight *= view.height / fullHeight;\r\n\r\n\t\t}\r\n\r\n\t\tconst skew = this.filmOffset;\r\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.zoom = this.zoom;\r\n\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\tdata.object.focus = this.focus;\r\n\r\n\t\tdata.object.aspect = this.aspect;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\tdata.object.filmGauge = this.filmGauge;\r\n\t\tdata.object.filmOffset = this.filmOffset;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst fov = 90, aspect = 1;\r\n\r\nfunction CubeCamera( near, far, renderTarget ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\r\n\r\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.renderTarget = renderTarget;\r\n\r\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.layers = this.layers;\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.layers = this.layers;\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.layers = this.layers;\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.layers = this.layers;\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.layers = this.layers;\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.layers = this.layers;\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.update = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tconst currentXrEnabled = renderer.xr.enabled;\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\trenderer.xr.enabled = false;\r\n\r\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 0 );\r\n\t\trenderer.render( scene, cameraPX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 1 );\r\n\t\trenderer.render( scene, cameraNX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 2 );\r\n\t\trenderer.render( scene, cameraPY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 3 );\r\n\t\trenderer.render( scene, cameraNY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 4 );\r\n\t\trenderer.render( scene, cameraPZ );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 5 );\r\n\t\trenderer.render( scene, cameraNZ );\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t\trenderer.xr.enabled = currentXrEnabled;\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( renderer, color, depth, stencil ) {\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\trenderer.setRenderTarget( renderTarget, i );\r\n\r\n\t\t\trenderer.clear( color, depth, stencil );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t};\r\n\r\n}\r\n\r\nCubeCamera.prototype = Object.create( Object3D.prototype );\r\nCubeCamera.prototype.constructor = CubeCamera;\r\n\r\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\r\n\r\n\tif ( Number.isInteger( options ) ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\r\n\r\n\t\toptions = dummy;\r\n\r\n\t}\r\n\r\n\tWebGLRenderTarget.call( this, size, size, options );\r\n\r\n}\r\n\r\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\r\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\r\n\r\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\r\n\r\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\r\n\r\n\tthis.texture.type = texture.type;\r\n\tthis.texture.format = RGBAFormat; // see #18859\r\n\tthis.texture.encoding = texture.encoding;\r\n\r\n\tthis.texture.generateMipmaps = texture.generateMipmaps;\r\n\tthis.texture.minFilter = texture.minFilter;\r\n\tthis.texture.magFilter = texture.magFilter;\r\n\r\n\tconst scene = new Scene();\r\n\r\n\tconst shader = {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\r\n\r\n\t\t\t\t#include <begin_vertex>\r\n\t\t\t\t#include <project_vertex>\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tuniform sampler2D tEquirect;\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\r\n\r\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\r\n\r\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\r\n\r\n\t\t\t}\r\n\t\t`\r\n\t};\r\n\r\n\tconst material = new ShaderMaterial( {\r\n\r\n\t\tname: 'CubemapFromEquirect',\r\n\r\n\t\tuniforms: cloneUniforms( shader.uniforms ),\r\n\t\tvertexShader: shader.vertexShader,\r\n\t\tfragmentShader: shader.fragmentShader,\r\n\t\tside: BackSide,\r\n\t\tblending: NoBlending\r\n\r\n\t} );\r\n\r\n\tmaterial.uniforms.tEquirect.value = texture;\r\n\r\n\tconst mesh = new Mesh( new BoxBufferGeometry( 5, 5, 5 ), material );\r\n\r\n\tscene.add( mesh );\r\n\r\n\tconst camera = new CubeCamera( 1, 10, this );\r\n\tcamera.update( renderer, scene );\r\n\r\n\tmesh.geometry.dispose();\r\n\tmesh.material.dispose();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\tthis.unpackAlignment = 1;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture.prototype = Object.create( Texture.prototype );\r\nDataTexture.prototype.constructor = DataTexture;\r\n\r\nDataTexture.prototype.isDataTexture = true;\r\n\r\nconst _sphere$1 = new Sphere();\r\nconst _vector$5 = new Vector3();\r\n\r\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new Plane()\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( Frustum.prototype, {\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromProjectionMatrix: function ( m ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst me = m.elements;\r\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function ( object ) {\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSprite: function ( sprite ) {\r\n\r\n\t\t_sphere$1.center.set( 0, 0, 0 );\r\n\t\t_sphere$1.radius = 0.7071067811865476;\r\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst center = sphere.center;\r\n\t\tconst negRadius = - sphere.radius;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst plane = planes[ i ];\r\n\r\n\t\t\t// corner at max distance\r\n\r\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nconst UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\r\n\t\tmap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() },\r\n\t\tuv2Transform: { value: new Matrix3() },\r\n\r\n\t\talphaMap: { value: null },\r\n\r\n\t},\r\n\r\n\tspecularmap: {\r\n\r\n\t\tspecularMap: { value: null },\r\n\r\n\t},\r\n\r\n\tenvmap: {\r\n\r\n\t\tenvMap: { value: null },\r\n\t\tflipEnvMap: { value: - 1 },\r\n\t\treflectivity: { value: 1.0 },\r\n\t\trefractionRatio: { value: 0.98 },\r\n\t\tmaxMipLevel: { value: 0 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\taoMap: { value: null },\r\n\t\taoMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\tlightMap: { value: null },\r\n\t\tlightMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\temissiveMap: { value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\tbumpMap: { value: null },\r\n\t\tbumpScale: { value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\tnormalMap: { value: null },\r\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\tdisplacementMap: { value: null },\r\n\t\tdisplacementScale: { value: 1 },\r\n\t\tdisplacementBias: { value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\troughnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\tmetalnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tgradientmap: {\r\n\r\n\t\tgradientMap: { value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\tfogDensity: { value: 0.00025 },\r\n\t\tfogNear: { value: 1 },\r\n\t\tfogFar: { value: 2000 },\r\n\t\tfogColor: { value: new Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\tambientLightColor: { value: [] },\r\n\r\n\t\tlightProbe: { value: [] },\r\n\r\n\t\tdirectionalLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tcolor: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalShadowMap: { value: [] },\r\n\t\tdirectionalShadowMatrix: { value: [] },\r\n\r\n\t\tspotLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdirection: {},\r\n\t\t\tdistance: {},\r\n\t\t\tconeCos: {},\r\n\t\t\tpenumbraCos: {},\r\n\t\t\tdecay: {}\r\n\t\t} },\r\n\r\n\t\tspotLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tspotShadowMap: { value: [] },\r\n\t\tspotShadowMatrix: { value: [] },\r\n\r\n\t\tpointLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdecay: {},\r\n\t\t\tdistance: {}\r\n\t\t} },\r\n\r\n\t\tpointLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {},\r\n\t\t\tshadowCameraNear: {},\r\n\t\t\tshadowCameraFar: {}\r\n\t\t} },\r\n\r\n\t\tpointShadowMap: { value: [] },\r\n\t\tpointShadowMatrix: { value: [] },\r\n\r\n\t\themisphereLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tskyColor: {},\r\n\t\t\tgroundColor: {}\r\n\t\t} },\r\n\r\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\r\n\t\trectAreaLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\twidth: {},\r\n\t\t\theight: {}\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tsize: { value: 1.0 },\r\n\t\tscale: { value: 1.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\r\n\t\trotation: { value: 0.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction WebGLAnimation() {\r\n\r\n\tlet context = null;\r\n\tlet isAnimating = false;\r\n\tlet animationLoop = null;\r\n\tlet requestId = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tanimationLoop( time, frame );\r\n\r\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tstart: function () {\r\n\r\n\t\t\tif ( isAnimating === true ) return;\r\n\t\t\tif ( animationLoop === null ) return;\r\n\r\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t\t\tisAnimating = true;\r\n\r\n\t\t},\r\n\r\n\t\tstop: function () {\r\n\r\n\t\t\tcontext.cancelAnimationFrame( requestId );\r\n\r\n\t\t\tisAnimating = false;\r\n\r\n\t\t},\r\n\r\n\t\tsetAnimationLoop: function ( callback ) {\r\n\r\n\t\t\tanimationLoop = callback;\r\n\r\n\t\t},\r\n\r\n\t\tsetContext: function ( value ) {\r\n\r\n\t\t\tcontext = value;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLAttributes( gl, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tconst buffers = new WeakMap();\r\n\r\n\tfunction createBuffer( attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst usage = attribute.usage;\r\n\r\n\t\tconst buffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\t\tgl.bufferData( bufferType, array, usage );\r\n\r\n\t\tattribute.onUploadCallback();\r\n\r\n\t\tlet type = 5126;\r\n\r\n\t\tif ( array instanceof Float32Array ) {\r\n\r\n\t\t\ttype = 5126;\r\n\r\n\t\t} else if ( array instanceof Float64Array ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\r\n\r\n\t\t} else if ( array instanceof Uint16Array ) {\r\n\r\n\t\t\ttype = 5123;\r\n\r\n\t\t} else if ( array instanceof Int16Array ) {\r\n\r\n\t\t\ttype = 5122;\r\n\r\n\t\t} else if ( array instanceof Uint32Array ) {\r\n\r\n\t\t\ttype = 5125;\r\n\r\n\t\t} else if ( array instanceof Int32Array ) {\r\n\r\n\t\t\ttype = 5124;\r\n\r\n\t\t} else if ( array instanceof Int8Array ) {\r\n\r\n\t\t\ttype = 5120;\r\n\r\n\t\t} else if ( array instanceof Uint8Array ) {\r\n\r\n\t\t\ttype = 5121;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tbuffer: buffer,\r\n\t\t\ttype: type,\r\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\r\n\t\t\tversion: attribute.version\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst updateRange = attribute.updateRange;\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\r\n\t\tif ( updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, array );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateRange.count = - 1; // reset range\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction get( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\treturn buffers.get( attribute );\r\n\r\n\t}\r\n\r\n\tfunction remove( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data ) {\r\n\r\n\t\t\tgl.deleteBuffer( data.buffer );\r\n\r\n\t\t\tbuffers.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction update( attribute, bufferType ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\r\n\r\n\t\t} else if ( data.version < attribute.version ) {\r\n\r\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\r\n\r\n\t\t\tdata.version = attribute.version;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\n// PlaneGeometry\r\n\r\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\r\nPlaneGeometry.prototype.constructor = PlaneGeometry;\r\n\r\n// PlaneBufferGeometry\r\n\r\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\twidth = width || 1;\r\n\theight = height || 1;\r\n\r\n\tconst width_half = width / 2;\r\n\tconst height_half = height / 2;\r\n\r\n\tconst gridX = Math.floor( widthSegments ) || 1;\r\n\tconst gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tconst gridX1 = gridX + 1;\r\n\tconst gridY1 = gridY + 1;\r\n\r\n\tconst segment_width = width / gridX;\r\n\tconst segment_height = height / gridY;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tconst y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tconst x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices.push( x, - y, 0 );\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\tuvs.push( ix / gridX );\r\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tconst a = ix + gridX1 * iy;\r\n\t\t\tconst b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\r\n\r\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\r\n\r\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\r\n\r\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\r\n\r\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\r\n\r\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\r\n\r\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\r\n\r\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\r\n\r\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\r\n\r\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\r\n\r\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\r\n\r\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\r\n\r\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\r\n\r\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_maxMipLevel 8.0\\n#define cubeUV_minMipLevel 4.0\\n#define cubeUV_maxTileSize 256.0\\n#define cubeUV_minTileSize 16.0\\nfloat getFace(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    float face = -1.0;\\n    if (absDirection.x > absDirection.z) {\\n      if (absDirection.x > absDirection.y)\\n        face = direction.x > 0.0 ? 0.0 : 3.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    } else {\\n      if (absDirection.z > absDirection.y)\\n        face = direction.z > 0.0 ? 2.0 : 5.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    }\\n    return face;\\n}\\nvec2 getUV(vec3 direction, float face) {\\n    vec2 uv;\\n    if (face == 0.0) {\\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\\n    return 0.5 * (uv + 1.0);\\n}\\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\\n  float face = getFace(direction);\\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\\n  mipInt = max(mipInt, cubeUV_minMipLevel);\\n  float faceSize = exp2(mipInt);\\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\\n  vec2 f = fract(uv);\\n  uv += 0.5 - f;\\n  if (face > 2.0) {\\n    uv.y += faceSize;\\n    face -= 3.0;\\n  }\\n  uv.x += face * faceSize;\\n  if(mipInt < cubeUV_maxMipLevel){\\n    uv.y += 2.0 * cubeUV_maxTileSize;\\n  }\\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\\n  uv *= texelSize;\\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x += texelSize;\\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.y += texelSize;\\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x -= texelSize;\\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  vec3 tm = mix(tl, tr, f.x);\\n  vec3 bm = mix(bl, br, f.x);\\n  return mix(tm, bm, f.y);\\n}\\n#define r0 1.0\\n#define v0 0.339\\n#define m0 -2.0\\n#define r1 0.8\\n#define v1 0.276\\n#define m1 -1.0\\n#define r4 0.4\\n#define v4 0.046\\n#define m4 2.0\\n#define r5 0.305\\n#define v5 0.016\\n#define m5 3.0\\n#define r6 0.21\\n#define v6 0.0038\\n#define m6 4.0\\nfloat roughnessToMip(float roughness) {\\n  float mip = 0.0;\\n  if (roughness >= r1) {\\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\\n  } else if (roughness >= r4) {\\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\\n  } else if (roughness >= r5) {\\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\\n  } else if (roughness >= r6) {\\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\\n  } else {\\n    mip = -2.0 * log2(1.16 * roughness);  }\\n  return mip;\\n}\\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\\n  float mipF = fract(mip);\\n  float mipInt = floor(mip);\\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\\n  if (mipF == 0.0) {\\n    return vec4(color0, 1.0);\\n  } else {\\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\\n    return vec4(mix(color0, color1, mipF), 1.0);\\n  }\\n}\\n#endif\";\r\n\r\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\r\n\r\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\r\n\r\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\r\n\r\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\r\n\r\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\r\n\r\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\r\n\r\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\r\n\r\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\r\n\r\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\r\n\r\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\r\n\r\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\r\n\r\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\r\n\r\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\r\n\r\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\r\n\r\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\r\n\r\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\r\n\r\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\r\n\r\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\r\n\r\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\r\n\r\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\r\n\r\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\r\n\r\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\r\n\r\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\r\n\r\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\r\n\r\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\r\n\r\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\r\n\r\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\r\n\r\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\r\n\r\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\r\n\r\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\r\n\r\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\r\n\r\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\r\n\r\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\r\n\r\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\r\n\r\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\r\n\r\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\r\n\r\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\r\n\r\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\r\n\r\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\r\n\r\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\r\n\r\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\r\n\r\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\r\n\r\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\r\n\r\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\r\n\r\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\r\n\r\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\r\n\r\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\r\n\r\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\r\n\r\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\r\n\r\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\r\n\r\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\r\n\r\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\r\n\r\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\r\n\r\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\r\n\r\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\r\n\r\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\r\n\r\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\r\n\r\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\r\n\r\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\r\n\r\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\r\n\r\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\r\n\r\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\r\n\r\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\r\n\r\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\r\n\r\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nconst ShaderChunk = {\r\n\talphamap_fragment: alphamap_fragment,\r\n\talphamap_pars_fragment: alphamap_pars_fragment,\r\n\talphatest_fragment: alphatest_fragment,\r\n\taomap_fragment: aomap_fragment,\r\n\taomap_pars_fragment: aomap_pars_fragment,\r\n\tbegin_vertex: begin_vertex,\r\n\tbeginnormal_vertex: beginnormal_vertex,\r\n\tbsdfs: bsdfs,\r\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\r\n\tclipping_planes_fragment: clipping_planes_fragment,\r\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\r\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\r\n\tclipping_planes_vertex: clipping_planes_vertex,\r\n\tcolor_fragment: color_fragment,\r\n\tcolor_pars_fragment: color_pars_fragment,\r\n\tcolor_pars_vertex: color_pars_vertex,\r\n\tcolor_vertex: color_vertex,\r\n\tcommon: common,\r\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\r\n\tdefaultnormal_vertex: defaultnormal_vertex,\r\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\r\n\tdisplacementmap_vertex: displacementmap_vertex,\r\n\temissivemap_fragment: emissivemap_fragment,\r\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\r\n\tencodings_fragment: encodings_fragment,\r\n\tencodings_pars_fragment: encodings_pars_fragment,\r\n\tenvmap_fragment: envmap_fragment,\r\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\r\n\tenvmap_pars_fragment: envmap_pars_fragment,\r\n\tenvmap_pars_vertex: envmap_pars_vertex,\r\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\r\n\tenvmap_vertex: envmap_vertex,\r\n\tfog_vertex: fog_vertex,\r\n\tfog_pars_vertex: fog_pars_vertex,\r\n\tfog_fragment: fog_fragment,\r\n\tfog_pars_fragment: fog_pars_fragment,\r\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\r\n\tlightmap_fragment: lightmap_fragment,\r\n\tlightmap_pars_fragment: lightmap_pars_fragment,\r\n\tlights_lambert_vertex: lights_lambert_vertex,\r\n\tlights_pars_begin: lights_pars_begin,\r\n\tlights_toon_fragment: lights_toon_fragment,\r\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\r\n\tlights_phong_fragment: lights_phong_fragment,\r\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\r\n\tlights_physical_fragment: lights_physical_fragment,\r\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\r\n\tlights_fragment_begin: lights_fragment_begin,\r\n\tlights_fragment_maps: lights_fragment_maps,\r\n\tlights_fragment_end: lights_fragment_end,\r\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\r\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\r\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\r\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\r\n\tmap_fragment: map_fragment,\r\n\tmap_pars_fragment: map_pars_fragment,\r\n\tmap_particle_fragment: map_particle_fragment,\r\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\r\n\tmetalnessmap_fragment: metalnessmap_fragment,\r\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\r\n\tmorphnormal_vertex: morphnormal_vertex,\r\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\r\n\tmorphtarget_vertex: morphtarget_vertex,\r\n\tnormal_fragment_begin: normal_fragment_begin,\r\n\tnormal_fragment_maps: normal_fragment_maps,\r\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\r\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\r\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\r\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\r\n\tpacking: packing,\r\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\r\n\tproject_vertex: project_vertex,\r\n\tdithering_fragment: dithering_fragment,\r\n\tdithering_pars_fragment: dithering_pars_fragment,\r\n\troughnessmap_fragment: roughnessmap_fragment,\r\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\r\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\r\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\r\n\tshadowmap_vertex: shadowmap_vertex,\r\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\r\n\tskinbase_vertex: skinbase_vertex,\r\n\tskinning_pars_vertex: skinning_pars_vertex,\r\n\tskinning_vertex: skinning_vertex,\r\n\tskinnormal_vertex: skinnormal_vertex,\r\n\tspecularmap_fragment: specularmap_fragment,\r\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\r\n\ttonemapping_fragment: tonemapping_fragment,\r\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\r\n\ttransmissionmap_fragment: transmissionmap_fragment,\r\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\r\n\tuv_pars_fragment: uv_pars_fragment,\r\n\tuv_pars_vertex: uv_pars_vertex,\r\n\tuv_vertex: uv_vertex,\r\n\tuv2_pars_fragment: uv2_pars_fragment,\r\n\tuv2_pars_vertex: uv2_pars_vertex,\r\n\tuv2_vertex: uv2_vertex,\r\n\tworldpos_vertex: worldpos_vertex,\r\n\r\n\tbackground_frag: background_frag,\r\n\tbackground_vert: background_vert,\r\n\tcube_frag: cube_frag,\r\n\tcube_vert: cube_vert,\r\n\tdepth_frag: depth_frag,\r\n\tdepth_vert: depth_vert,\r\n\tdistanceRGBA_frag: distanceRGBA_frag,\r\n\tdistanceRGBA_vert: distanceRGBA_vert,\r\n\tequirect_frag: equirect_frag,\r\n\tequirect_vert: equirect_vert,\r\n\tlinedashed_frag: linedashed_frag,\r\n\tlinedashed_vert: linedashed_vert,\r\n\tmeshbasic_frag: meshbasic_frag,\r\n\tmeshbasic_vert: meshbasic_vert,\r\n\tmeshlambert_frag: meshlambert_frag,\r\n\tmeshlambert_vert: meshlambert_vert,\r\n\tmeshmatcap_frag: meshmatcap_frag,\r\n\tmeshmatcap_vert: meshmatcap_vert,\r\n\tmeshtoon_frag: meshtoon_frag,\r\n\tmeshtoon_vert: meshtoon_vert,\r\n\tmeshphong_frag: meshphong_frag,\r\n\tmeshphong_vert: meshphong_vert,\r\n\tmeshphysical_frag: meshphysical_frag,\r\n\tmeshphysical_vert: meshphysical_vert,\r\n\tnormal_frag: normal_frag,\r\n\tnormal_vert: normal_vert,\r\n\tpoints_frag: points_frag,\r\n\tpoints_vert: points_vert,\r\n\tshadow_frag: shadow_frag,\r\n\tshadow_vert: shadow_vert,\r\n\tsprite_frag: sprite_frag,\r\n\tsprite_vert: sprite_vert\r\n};\r\n\r\nconst ShaderLib = {\r\n\r\n\tbasic: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\r\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\r\n\r\n\t},\r\n\r\n\tlambert: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\r\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\r\n\r\n\t},\r\n\r\n\tphong: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\r\n\t\t\t\tshininess: { value: 30 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphong_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphong_frag\r\n\r\n\t},\r\n\r\n\tstandard: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.roughnessmap,\r\n\t\t\tUniformsLib.metalnessmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\troughness: { value: 1.0 },\r\n\t\t\t\tmetalness: { value: 0.0 },\r\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n\t},\r\n\r\n\ttoon: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.gradientmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\r\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\r\n\r\n\t},\r\n\r\n\tmatcap: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tmatcap: { value: null }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\r\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.points,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.points_vert,\r\n\t\tfragmentShader: ShaderChunk.points_frag\r\n\r\n\t},\r\n\r\n\tdashed: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tscale: { value: 1 },\r\n\t\t\t\tdashSize: { value: 1 },\r\n\t\t\t\ttotalSize: { value: 2 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.linedashed_vert,\r\n\t\tfragmentShader: ShaderChunk.linedashed_frag\r\n\r\n\t},\r\n\r\n\tdepth: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.depth_vert,\r\n\t\tfragmentShader: ShaderChunk.depth_frag\r\n\r\n\t},\r\n\r\n\tnormal: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.normal_vert,\r\n\t\tfragmentShader: ShaderChunk.normal_frag\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.sprite,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.sprite_vert,\r\n\t\tfragmentShader: ShaderChunk.sprite_frag\r\n\r\n\t},\r\n\r\n\tbackground: {\r\n\r\n\t\tuniforms: {\r\n\t\t\tuvTransform: { value: new Matrix3() },\r\n\t\t\tt2D: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.background_vert,\r\n\t\tfragmentShader: ShaderChunk.background_frag\r\n\r\n\t},\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\tcube: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.cube_vert,\r\n\t\tfragmentShader: ShaderChunk.cube_frag\r\n\r\n\t},\r\n\r\n\tequirect: {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.equirect_vert,\r\n\t\tfragmentShader: ShaderChunk.equirect_frag\r\n\r\n\t},\r\n\r\n\tdistanceRGBA: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\treferencePosition: { value: new Vector3() },\r\n\t\t\t\tnearDistance: { value: 1 },\r\n\t\t\t\tfarDistance: { value: 1000 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\r\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\r\n\r\n\t},\r\n\r\n\tshadow: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.lights,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t},\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.shadow_vert,\r\n\t\tfragmentShader: ShaderChunk.shadow_frag\r\n\r\n\t}\r\n\r\n};\r\n\r\nShaderLib.physical = {\r\n\r\n\tuniforms: mergeUniforms( [\r\n\t\tShaderLib.standard.uniforms,\r\n\t\t{\r\n\t\t\tclearcoat: { value: 0 },\r\n\t\t\tclearcoatMap: { value: null },\r\n\t\t\tclearcoatRoughness: { value: 0 },\r\n\t\t\tclearcoatRoughnessMap: { value: null },\r\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\r\n\t\t\tclearcoatNormalMap: { value: null },\r\n\t\t\tsheen: { value: new Color( 0x000000 ) },\r\n\t\t\ttransmission: { value: 0 },\r\n\t\t\ttransmissionMap: { value: null },\r\n\t\t}\r\n\t] ),\r\n\r\n\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n};\r\n\r\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\r\n\r\n\tconst clearColor = new Color( 0x000000 );\r\n\tlet clearAlpha = 0;\r\n\r\n\tlet planeMesh;\r\n\tlet boxMesh;\r\n\r\n\tlet currentBackground = null;\r\n\tlet currentBackgroundVersion = 0;\r\n\tlet currentTonemapping = null;\r\n\r\n\tfunction render( renderList, scene, camera, forceClear ) {\r\n\r\n\t\tlet background = scene.isScene === true ? scene.background : null;\r\n\r\n\t\t// Ignore background in AR\r\n\t\t// TODO: Reconsider this.\r\n\r\n\t\tconst xr = renderer.xr;\r\n\t\tconst session = xr.getSession && xr.getSession();\r\n\r\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\r\n\r\n\t\t\tbackground = null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( background === null ) {\r\n\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t} else if ( background && background.isColor ) {\r\n\r\n\t\t\tsetClear( background, 1 );\r\n\t\t\tforceClear = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderer.autoClear || forceClear ) {\r\n\r\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\r\n\r\n\t\t\tif ( boxMesh === undefined ) {\r\n\r\n\t\t\t\tboxMesh = new Mesh(\r\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\r\n\t\t\t\t\t\tside: BackSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\r\n\r\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\r\n\r\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( boxMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst texture = background.isWebGLCubeRenderTarget ? background.texture : background;\r\n\r\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\r\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tboxMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = texture.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\r\n\r\n\t\t} else if ( background && background.isTexture ) {\r\n\r\n\t\t\tif ( planeMesh === undefined ) {\r\n\r\n\t\t\t\tplaneMesh = new Mesh(\r\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\r\n\t\t\t\t\t\tside: FrontSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( planeMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\r\n\r\n\t\t\tif ( background.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tbackground.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tplaneMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = background.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setClear( color, alpha ) {\r\n\r\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetClearColor: function () {\r\n\r\n\t\t\treturn clearColor;\r\n\r\n\t\t},\r\n\t\tsetClearColor: function ( color, alpha ) {\r\n\r\n\t\t\tclearColor.set( color );\r\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\tgetClearAlpha: function () {\r\n\r\n\t\t\treturn clearAlpha;\r\n\r\n\t\t},\r\n\t\tsetClearAlpha: function ( alpha ) {\r\n\r\n\t\t\tclearAlpha = alpha;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\trender: render\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\r\n\r\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\r\n\r\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\r\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\r\n\r\n\tconst bindingStates = {};\r\n\r\n\tconst defaultState = createBindingState( null );\r\n\tlet currentState = defaultState;\r\n\r\n\tfunction setup( object, material, program, geometry, index ) {\r\n\r\n\t\tlet updateBuffers = false;\r\n\r\n\t\tif ( vaoAvailable ) {\r\n\r\n\t\t\tconst state = getBindingState( geometry, program, material );\r\n\r\n\t\t\tif ( currentState !== state ) {\r\n\r\n\t\t\t\tcurrentState = state;\r\n\t\t\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = needsUpdate( geometry );\r\n\r\n\t\t\tif ( updateBuffers ) saveCache( geometry );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\t\tif ( currentState.geometry !== geometry.id ||\r\n\t\t\t\tcurrentState.program !== program.id ||\r\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\r\n\r\n\t\t\t\tcurrentState.geometry = geometry.id;\r\n\t\t\t\tcurrentState.program = program.id;\r\n\t\t\t\tcurrentState.wireframe = wireframe;\r\n\r\n\t\t\t\tupdateBuffers = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh === true ) {\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattributes.update( index, 34963 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createVertexArrayObject() {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\r\n\r\n\t\treturn extension.createVertexArrayOES();\r\n\r\n\t}\r\n\r\n\tfunction bindVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\r\n\r\n\t\treturn extension.bindVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction deleteVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\r\n\r\n\t\treturn extension.deleteVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction getBindingState( geometry, program, material ) {\r\n\r\n\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\tlet programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tif ( programMap === undefined ) {\r\n\r\n\t\t\tprogramMap = {};\r\n\t\t\tbindingStates[ geometry.id ] = programMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet stateMap = programMap[ program.id ];\r\n\r\n\t\tif ( stateMap === undefined ) {\r\n\r\n\t\t\tstateMap = {};\r\n\t\t\tprogramMap[ program.id ] = stateMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet state = stateMap[ wireframe ];\r\n\r\n\t\tif ( state === undefined ) {\r\n\r\n\t\t\tstate = createBindingState( createVertexArrayObject() );\r\n\t\t\tstateMap[ wireframe ] = state;\r\n\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\r\n\t}\r\n\r\n\tfunction createBindingState( vao ) {\r\n\r\n\t\tconst newAttributes = [];\r\n\t\tconst enabledAttributes = [];\r\n\t\tconst attributeDivisors = [];\r\n\r\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\t\t\tenabledAttributes[ i ] = 0;\r\n\t\t\tattributeDivisors[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\r\n\t\t\t// for backward compatibility on non-VAO support browser\r\n\t\t\tgeometry: null,\r\n\t\t\tprogram: null,\r\n\t\t\twireframe: false,\r\n\r\n\t\t\tnewAttributes: newAttributes,\r\n\t\t\tenabledAttributes: enabledAttributes,\r\n\t\t\tattributeDivisors: attributeDivisors,\r\n\t\t\tobject: vao,\r\n\t\t\tattributes: {}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction needsUpdate( geometry ) {\r\n\r\n\t\tconst cachedAttributes = currentState.attributes;\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\r\n\r\n\t\tfor ( const key in geometryAttributes ) {\r\n\r\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\r\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\r\n\r\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\r\n\r\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction saveCache( geometry ) {\r\n\r\n\t\tconst cache = {};\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst data = {};\r\n\t\t\tdata.attribute = attribute;\r\n\r\n\t\t\tif ( attribute.data ) {\r\n\r\n\t\t\t\tdata.data = attribute.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache[ key ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentState.attributes = cache;\r\n\r\n\t}\r\n\r\n\tfunction initAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\r\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction enableAttribute( attribute ) {\r\n\r\n\t\tenableAttributeAndDivisor( attribute, 0 );\r\n\r\n\t}\r\n\r\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\t\tconst attributeDivisors = currentState.attributeDivisors;\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disableUnusedAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\r\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\r\n\r\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\r\n\r\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\r\n\r\n\t\t}\r\n\r\n\t\tinitAttributes();\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( const name in programAttributes ) {\r\n\r\n\t\t\tconst programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\r\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\r\n\r\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst data = geometryAttribute.data;\r\n\t\t\t\t\t\tconst stride = data.stride;\r\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\r\n\r\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\treset();\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete bindingStates[ geometryId ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfGeometry( geometry ) {\r\n\r\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\r\n\r\n\t\tconst programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t}\r\n\r\n\t\tdelete bindingStates[ geometry.id ];\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfProgram( program ) {\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\r\n\r\n\t\t\tconst stateMap = programMap[ program.id ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ program.id ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\tresetDefaultState();\r\n\r\n\t\tif ( currentState === defaultState ) return;\r\n\r\n\t\tcurrentState = defaultState;\r\n\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t}\r\n\r\n\t// for backward-compatilibity\r\n\r\n\tfunction resetDefaultState() {\r\n\r\n\t\tdefaultState.geometry = null;\r\n\t\tdefaultState.program = null;\r\n\t\tdefaultState.wireframe = false;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tsetup: setup,\r\n\t\treset: reset,\r\n\t\tresetDefaultState: resetDefaultState,\r\n\t\tdispose: dispose,\r\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\r\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\r\n\r\n\t\tinitAttributes: initAttributes,\r\n\t\tenableAttribute: enableAttribute,\r\n\t\tdisableUnusedAttributes: disableUnusedAttributes\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawArrays( mode, start, count );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawArraysInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, start, count, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLCapabilities( gl, extensions, parameters ) {\r\n\r\n\tlet maxAnisotropy;\r\n\r\n\tfunction getMaxAnisotropy() {\r\n\r\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaxAnisotropy = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxAnisotropy;\r\n\r\n\t}\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\t/* eslint-disable no-undef */\r\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\r\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\r\n\t/* eslint-enable no-undef */\r\n\r\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n\tconst maxPrecision = getMaxPrecision( precision );\r\n\r\n\tif ( maxPrecision !== precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\r\n\t\tprecision = maxPrecision;\r\n\r\n\t}\r\n\r\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\r\n\r\n\tconst maxTextures = gl.getParameter( 34930 );\r\n\tconst maxVertexTextures = gl.getParameter( 35660 );\r\n\tconst maxTextureSize = gl.getParameter( 3379 );\r\n\tconst maxCubemapSize = gl.getParameter( 34076 );\r\n\r\n\tconst maxAttributes = gl.getParameter( 34921 );\r\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\r\n\tconst maxVaryings = gl.getParameter( 36348 );\r\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\r\n\r\n\tconst vertexTextures = maxVertexTextures > 0;\r\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\r\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\r\n\r\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\r\n\r\n\treturn {\r\n\r\n\t\tisWebGL2: isWebGL2,\r\n\r\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\r\n\t\tgetMaxPrecision: getMaxPrecision,\r\n\r\n\t\tprecision: precision,\r\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\tmaxTextures: maxTextures,\r\n\t\tmaxVertexTextures: maxVertexTextures,\r\n\t\tmaxTextureSize: maxTextureSize,\r\n\t\tmaxCubemapSize: maxCubemapSize,\r\n\r\n\t\tmaxAttributes: maxAttributes,\r\n\t\tmaxVertexUniforms: maxVertexUniforms,\r\n\t\tmaxVaryings: maxVaryings,\r\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\r\n\r\n\t\tvertexTextures: vertexTextures,\r\n\t\tfloatFragmentTextures: floatFragmentTextures,\r\n\t\tfloatVertexTextures: floatVertexTextures,\r\n\r\n\t\tmaxSamples: maxSamples\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLClipping() {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet globalState = null,\r\n\t\tnumGlobalPlanes = 0,\r\n\t\tlocalClippingEnabled = false,\r\n\t\trenderingShadows = false;\r\n\r\n\tconst plane = new Plane(),\r\n\t\tviewNormalMatrix = new Matrix3(),\r\n\r\n\t\tuniform = { value: null, needsUpdate: false };\r\n\r\n\tthis.uniform = uniform;\r\n\tthis.numPlanes = 0;\r\n\tthis.numIntersection = 0;\r\n\r\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\r\n\r\n\t\tconst enabled =\r\n\t\t\tplanes.length !== 0 ||\r\n\t\t\tenableLocalClipping ||\r\n\t\t\t// enable state of previous frame - the clipping code has to\r\n\t\t\t// run another frame in order to reset the state:\r\n\t\t\tnumGlobalPlanes !== 0 ||\r\n\t\t\tlocalClippingEnabled;\r\n\r\n\t\tlocalClippingEnabled = enableLocalClipping;\r\n\r\n\t\tglobalState = projectPlanes( planes, camera, 0 );\r\n\t\tnumGlobalPlanes = planes.length;\r\n\r\n\t\treturn enabled;\r\n\r\n\t};\r\n\r\n\tthis.beginShadows = function () {\r\n\r\n\t\trenderingShadows = true;\r\n\t\tprojectPlanes( null );\r\n\r\n\t};\r\n\r\n\tthis.endShadows = function () {\r\n\r\n\t\trenderingShadows = false;\r\n\t\tresetGlobalState();\r\n\r\n\t};\r\n\r\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\r\n\r\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\r\n\r\n\t\t\t// there's no local clipping\r\n\r\n\t\t\tif ( renderingShadows ) {\r\n\r\n\t\t\t\t// there's no global clipping\r\n\r\n\t\t\t\tprojectPlanes( null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresetGlobalState();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n\t\t\t\tlGlobal = nGlobal * 4;\r\n\r\n\t\t\tlet dstArray = cache.clippingState || null;\r\n\r\n\t\t\tuniform.value = dstArray; // ensure unique state\r\n\r\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\r\n\r\n\t\t\t\tdstArray[ i ] = globalState[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache.clippingState = dstArray;\r\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\r\n\t\t\tthis.numPlanes += nGlobal;\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tfunction resetGlobalState() {\r\n\r\n\t\tif ( uniform.value !== globalState ) {\r\n\r\n\t\t\tuniform.value = globalState;\r\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = numGlobalPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t}\r\n\r\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n\t\tlet nPlanes = planes !== null ? planes.length : 0,\r\n\t\t\tdstArray = null;\r\n\r\n\t\tif ( nPlanes !== 0 ) {\r\n\r\n\t\t\tdstArray = uniform.value;\r\n\r\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\r\n\r\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\r\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\r\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniform.value = dstArray;\r\n\t\t\tuniform.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = nPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t\treturn dstArray;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLExtensions( gl ) {\r\n\r\n\tconst extensions = {};\r\n\r\n\treturn {\r\n\r\n\t\thas: function ( name ) {\r\n\r\n\t\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\t\treturn extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet extension;\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'WEBGL_depth_texture':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\textensions[ name ] = extension;\r\n\r\n\t\t\treturn !! extension;\r\n\r\n\t\t},\r\n\r\n\t\tget: function ( name ) {\r\n\r\n\t\t\tif ( ! this.has( name ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\r\n\r\n\tconst geometries = new WeakMap();\r\n\tconst wireframeAttributes = new WeakMap();\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tconst geometry = event.target;\r\n\t\tconst buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const name in buffergeometry.attributes ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tgeometries.delete( geometry );\r\n\r\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\r\n\r\n\t\tif ( attribute ) {\r\n\r\n\t\t\tattributes.remove( attribute );\r\n\t\t\twireframeAttributes.delete( buffergeometry );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\r\n\r\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\r\n\r\n\t\t\tdelete geometry._maxInstanceCount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction get( object, geometry ) {\r\n\r\n\t\tlet buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry ) return buffergeometry;\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries.set( geometry, buffergeometry );\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction update( geometry ) {\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\r\n\r\n\t\tfor ( const name in geometryAttributes ) {\r\n\r\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tattributes.update( array[ i ], 34962 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateWireframeAttribute( geometry ) {\r\n\r\n\t\tconst indices = [];\r\n\r\n\t\tconst geometryIndex = geometry.index;\r\n\t\tconst geometryPosition = geometry.attributes.position;\r\n\t\tlet version = 0;\r\n\r\n\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\tconst array = geometryIndex.array;\r\n\t\t\tversion = geometryIndex.version;\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = array[ i + 0 ];\r\n\t\t\t\tconst b = array[ i + 1 ];\r\n\t\t\t\tconst c = array[ i + 2 ];\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst array = geometryPosition.array;\r\n\t\t\tversion = geometryPosition.version;\r\n\r\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = i + 0;\r\n\t\t\t\tconst b = i + 1;\r\n\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\r\n\t\tattribute.version = version;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\r\n\r\n\t\t//\r\n\r\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\r\n\r\n\t\t//\r\n\r\n\t\twireframeAttributes.set( geometry, attribute );\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( currentAttribute ) {\r\n\r\n\t\t\tconst geometryIndex = geometry.index;\r\n\r\n\t\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\t\t// if the attribute is obsolete, create a new one\r\n\r\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\r\n\r\n\t\t\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\treturn wireframeAttributes.get( geometry );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tupdate: update,\r\n\r\n\t\tgetWireframeAttribute: getWireframeAttribute\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tlet type, bytesPerElement;\r\n\r\n\tfunction setIndex( value ) {\r\n\r\n\t\ttype = value.type;\r\n\t\tbytesPerElement = value.bytesPerElement;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawElementsInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLInfo( gl ) {\r\n\r\n\tconst memory = {\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\t};\r\n\r\n\tconst render = {\r\n\t\tframe: 0,\r\n\t\tcalls: 0,\r\n\t\ttriangles: 0,\r\n\t\tpoints: 0,\r\n\t\tlines: 0\r\n\t};\r\n\r\n\tfunction update( count, mode, instanceCount ) {\r\n\r\n\t\trender.calls ++;\r\n\r\n\t\tswitch ( mode ) {\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\trender.lines += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\trender.points += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\trender.frame ++;\r\n\t\trender.calls = 0;\r\n\t\trender.triangles = 0;\r\n\t\trender.points = 0;\r\n\t\trender.lines = 0;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tmemory: memory,\r\n\t\trender: render,\r\n\t\tprograms: null,\r\n\t\tautoReset: true,\r\n\t\treset: reset,\r\n\t\tupdate: update\r\n\t};\r\n\r\n}\r\n\r\nfunction numericalSort( a, b ) {\r\n\r\n\treturn a[ 0 ] - b[ 0 ];\r\n\r\n}\r\n\r\nfunction absNumericalSort( a, b ) {\r\n\r\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\r\n\r\n}\r\n\r\nfunction WebGLMorphtargets( gl ) {\r\n\r\n\tconst influencesList = {};\r\n\tconst morphInfluences = new Float32Array( 8 );\r\n\r\n\tconst workInfluences = [];\r\n\r\n\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\tworkInfluences[ i ] = [ i, 0 ];\r\n\r\n\t}\r\n\r\n\tfunction update( object, geometry, material, program ) {\r\n\r\n\t\tconst objectInfluences = object.morphTargetInfluences;\r\n\r\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\r\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\r\n\r\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\r\n\r\n\t\tlet influences = influencesList[ geometry.id ];\r\n\r\n\t\tif ( influences === undefined ) {\r\n\r\n\t\t\t// initialise list\r\n\r\n\t\t\tinfluences = [];\r\n\r\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinfluencesList[ geometry.id ] = influences;\r\n\r\n\t\t}\r\n\r\n\t\t// Collect influences\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst influence = influences[ i ];\r\n\r\n\t\t\tinfluence[ 0 ] = i;\r\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tinfluences.sort( absNumericalSort );\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tworkInfluences.sort( numericalSort );\r\n\r\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\r\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\r\n\r\n\t\tlet morphInfluencesSum = 0;\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tconst influence = workInfluences[ i ];\r\n\t\t\tconst index = influence[ 0 ];\r\n\t\t\tconst value = influence[ 1 ];\r\n\r\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = value;\r\n\t\t\t\tmorphInfluencesSum += value;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\r\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\r\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\r\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\r\n\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLObjects( gl, geometries, attributes, info ) {\r\n\r\n\tlet updateMap = new WeakMap();\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\tconst geometry = object.geometry;\r\n\t\tconst buffergeometry = geometries.get( object, geometry );\r\n\r\n\t\t// Update once per frame\r\n\r\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\r\n\r\n\t\t\tif ( geometry.isGeometry ) {\r\n\r\n\t\t\t\tbuffergeometry.updateFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometries.update( buffergeometry );\r\n\r\n\t\t\tupdateMap.set( buffergeometry, frame );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\r\n\r\n\t\t}\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tupdateMap = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\r\n\tformat = format !== undefined ? format : RGBFormat;\r\n\r\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.flipY = false;\r\n\r\n}\r\n\r\nCubeTexture.prototype = Object.create( Texture.prototype );\r\nCubeTexture.prototype.constructor = CubeTexture;\r\n\r\nCubeTexture.prototype.isCubeTexture = true;\r\n\r\nObject.defineProperty( CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DataTexture2DArray( data, width, height, depth ) {\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\r\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\r\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\r\n\r\nfunction DataTexture3D( data, width, height, depth ) {\r\n\r\n\t// We're going to add .setXXX() methods for setting properties later.\r\n\t// Users can still set in DataTexture3D directly.\r\n\t//\r\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\r\n\t// \ttexture.anisotropy = 16;\r\n\t//\r\n\t// See #14839\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n\r\n}\r\n\r\nDataTexture3D.prototype = Object.create( Texture.prototype );\r\nDataTexture3D.prototype.constructor = DataTexture3D;\r\nDataTexture3D.prototype.isDataTexture3D = true;\r\n\r\n/**\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [textures] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'textures' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (textures factorizations):\r\n *\r\n * .upload( gl, seq, values, textures )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n *\r\n * Methods of the top-level container (textures factorizations):\r\n *\r\n * .setValue( gl, name, value, textures )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n */\r\n\r\nconst emptyTexture = new Texture();\r\nconst emptyTexture2dArray = new DataTexture2DArray();\r\nconst emptyTexture3d = new DataTexture3D();\r\nconst emptyCubeTexture = new CubeTexture();\r\n\r\n// --- Utilities ---\r\n\r\n// Array Caches (provide typed arrays for temporary by size)\r\n\r\nconst arrayCacheF32 = [];\r\nconst arrayCacheI32 = [];\r\n\r\n// Float32Array caches used for uploading Matrix uniforms\r\n\r\nconst mat4array = new Float32Array( 16 );\r\nconst mat3array = new Float32Array( 9 );\r\nconst mat2array = new Float32Array( 4 );\r\n\r\n// Flattening for arrays of vectors and matrices\r\n\r\nfunction flatten( array, nBlocks, blockSize ) {\r\n\r\n\tconst firstElem = array[ 0 ];\r\n\r\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\r\n\t// unoptimized: ! isNaN( firstElem )\r\n\t// see http://jacksondunstan.com/articles/983\r\n\r\n\tlet n = nBlocks * blockSize,\r\n\t\tr = arrayCacheF32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Float32Array( n );\r\n\t\tarrayCacheF32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tif ( nBlocks !== 0 ) {\r\n\r\n\t\tfirstElem.toArray( r, 0 );\r\n\r\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n\t\t\toffset += blockSize;\r\n\t\t\tarray[ i ].toArray( r, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\nfunction arraysEqual( a, b ) {\r\n\r\n\tif ( a.length !== b.length ) return false;\r\n\r\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\r\n\r\n\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction copyArray( a, b ) {\r\n\r\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\r\n\r\n\t\ta[ i ] = b[ i ];\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Texture unit allocation\r\n\r\nfunction allocTexUnits( textures, n ) {\r\n\r\n\tlet r = arrayCacheI32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Int32Array( n );\r\n\t\tarrayCacheI32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\tr[ i ] = textures.allocateTextureUnit();\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\n// --- Setters ---\r\n\r\n// Note: Defining these methods externally, because they come in a bunch\r\n// and this way their names minify.\r\n\r\n// Single scalar\r\n\r\nfunction setValueV1f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1f( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Single float vector (from flat array or THREE.VectorN)\r\n\r\nfunction setValueV2f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\r\n\r\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform2fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV3f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\r\n\t\t}\r\n\r\n\t} else if ( v.r !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\r\n\t\t\tcache[ 0 ] = v.r;\r\n\t\t\tcache[ 1 ] = v.g;\r\n\t\t\tcache[ 2 ] = v.b;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform3fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV4f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\r\n\r\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\t\t\tcache[ 3 ] = v.w;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform4fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single matrix (from flat array or MatrixN)\r\n\r\nfunction setValueM2( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat2array.set( elements );\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM3( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat3array.set( elements );\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM4( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat4array.set( elements );\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single texture (2D / Cube)\r\n\r\nfunction setValueT1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\r\n\r\n}\r\n\r\nfunction setValueT2DArray1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\r\n\r\n}\r\n\r\nfunction setValueT3D1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\r\n\r\n}\r\n\r\nfunction setValueT6( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\nfunction setValueV1i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1i( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\nfunction setValueV2i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV3i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV4i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\n// uint\r\n\r\nfunction setValueV1ui( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1ui( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Helper to pick the right setter for the singular case\r\n\r\nfunction getSingularSetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1f; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\r\n\r\n\t\tcase 0x1405: return setValueV1ui; // UINT\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1;\r\n\r\n\t\tcase 0x8b5f: // SAMPLER_3D\r\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\r\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\r\n\t\t\treturn setValueT3D1;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6;\r\n\r\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\r\n\t\t\treturn setValueT2DArray1;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Array of scalars\r\nfunction setValueV1fArray( gl, v ) {\r\n\r\n\tgl.uniform1fv( this.addr, v );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\nfunction setValueV1iArray( gl, v ) {\r\n\r\n\tgl.uniform1iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV2iArray( gl, v ) {\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV3iArray( gl, v ) {\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV4iArray( gl, v ) {\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n}\r\n\r\n\r\n// Array of vectors (flat or from THREE classes)\r\n\r\nfunction setValueV2fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 2 );\r\n\r\n\tgl.uniform2fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV3fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 3 );\r\n\r\n\tgl.uniform3fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV4fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniform4fv( this.addr, data );\r\n\r\n}\r\n\r\n// Array of matrices (flat or from THREE clases)\r\n\r\nfunction setValueM2Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniformMatrix2fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM3Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 9 );\r\n\r\n\tgl.uniformMatrix3fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM4Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 16 );\r\n\r\n\tgl.uniformMatrix4fv( this.addr, false, data );\r\n\r\n}\r\n\r\n// Array of textures (2D / Cube)\r\n\r\nfunction setValueT1Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueT6Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Helper to pick the right setter for a pure (bottom-level) array\r\n\r\nfunction getPureArraySetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1Array;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6Array;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// --- Uniform Classes ---\r\n\r\nfunction SingleUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.setValue = getSingularSetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nfunction PureArrayUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.size = activeInfo.size;\r\n\tthis.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nPureArrayUniform.prototype.updateCache = function ( data ) {\r\n\r\n\tlet cache = this.cache;\r\n\r\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\r\n\r\n\t\tthis.cache = new Float32Array( data.length );\r\n\r\n\t}\r\n\r\n\tcopyArray( cache, data );\r\n\r\n};\r\n\r\nfunction StructuredUniform( id ) {\r\n\r\n\tthis.id = id;\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n}\r\n\r\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\r\n\r\n\tconst seq = this.seq;\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tu.setValue( gl, value[ u.id ], textures );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// --- Top-level ---\r\n\r\n// Parser - builds up the property tree from the path strings\r\n\r\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\r\n\r\n// extracts\r\n// \t- the identifier (member name or array index)\r\n//  - followed by an optional right bracket (found when array index)\r\n//  - followed by an optional left bracket or dot (type of subscript)\r\n//\r\n// Note: These portions can be read in a non-overlapping fashion and\r\n// allow straightforward parsing of the hierarchy that WebGL encodes\r\n// in the uniform names.\r\n\r\nfunction addUniform( container, uniformObject ) {\r\n\r\n\tcontainer.seq.push( uniformObject );\r\n\tcontainer.map[ uniformObject.id ] = uniformObject;\r\n\r\n}\r\n\r\nfunction parseUniform( activeInfo, addr, container ) {\r\n\r\n\tconst path = activeInfo.name,\r\n\t\tpathLength = path.length;\r\n\r\n\t// reset RegExp object, because of the early exit of a previous run\r\n\tRePathPart.lastIndex = 0;\r\n\r\n\twhile ( true ) {\r\n\r\n\t\tconst match = RePathPart.exec( path ),\r\n\t\t\tmatchEnd = RePathPart.lastIndex;\r\n\r\n\t\tlet id = match[ 1 ],\r\n\t\t\tidIsIndex = match[ 2 ] === ']',\r\n\t\t\tsubscript = match[ 3 ];\r\n\r\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\r\n\r\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n\t\t\taddUniform( container, subscript === undefined ?\r\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\r\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// step into inner node / create it in case it doesn't exist\r\n\r\n\t\t\tconst map = container.map;\r\n\t\t\tlet next = map[ id ];\r\n\r\n\t\t\tif ( next === undefined ) {\r\n\r\n\t\t\t\tnext = new StructuredUniform( id );\r\n\t\t\t\taddUniform( container, next );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcontainer = next;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Root Container\r\n\r\nfunction WebGLUniforms( gl, program ) {\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35718 );\r\n\r\n\tfor ( let i = 0; i < n; ++ i ) {\r\n\r\n\t\tconst info = gl.getActiveUniform( program, i ),\r\n\t\t\taddr = gl.getUniformLocation( program, info.name );\r\n\r\n\t\tparseUniform( info, addr, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\r\n\r\n\tconst u = this.map[ name ];\r\n\r\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\r\n\r\n};\r\n\r\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\r\n\r\n\tconst v = object[ name ];\r\n\r\n\tif ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n};\r\n\r\n\r\n// Static interface\r\n\r\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ],\r\n\t\t\tv = values[ u.id ];\r\n\r\n\t\tif ( v.needsUpdate !== false ) {\r\n\r\n\t\t\t// note: always updating when .needsUpdate is undefined\r\n\t\t\tu.setValue( gl, v.value, textures );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nWebGLUniforms.seqWithValue = function ( seq, values ) {\r\n\r\n\tconst r = [];\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tif ( u.id in values ) r.push( u );\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n};\r\n\r\nfunction WebGLShader( gl, type, string ) {\r\n\r\n\tconst shader = gl.createShader( type );\r\n\r\n\tgl.shaderSource( shader, string );\r\n\tgl.compileShader( shader );\r\n\r\n\treturn shader;\r\n\r\n}\r\n\r\nlet programIdCount = 0;\r\n\r\nfunction addLineNumbers( string ) {\r\n\r\n\tconst lines = string.split( '\\n' );\r\n\r\n\tfor ( let i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t}\r\n\r\n\treturn lines.join( '\\n' );\r\n\r\n}\r\n\r\nfunction getEncodingComponents( encoding ) {\r\n\r\n\tswitch ( encoding ) {\r\n\r\n\t\tcase LinearEncoding:\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\t\tcase sRGBEncoding:\r\n\t\t\treturn [ 'sRGB', '( value )' ];\r\n\t\tcase RGBEEncoding:\r\n\t\t\treturn [ 'RGBE', '( value )' ];\r\n\t\tcase RGBM7Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\r\n\t\tcase RGBM16Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\r\n\t\tcase RGBDEncoding:\r\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\r\n\t\tcase GammaEncoding:\r\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\r\n\t\tcase LogLuvEncoding:\r\n\t\t\treturn [ 'LogLuv', '( value )' ];\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getShaderErrors( gl, shader, type ) {\r\n\r\n\tconst status = gl.getShaderParameter( shader, 35713 );\r\n\tconst log = gl.getShaderInfoLog( shader ).trim();\r\n\r\n\tif ( status && log === '' ) return '';\r\n\r\n\t// --enable-privileged-webgl-extension\r\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\tconst source = gl.getShaderSource( shader );\r\n\r\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\r\n\r\n}\r\n\r\nfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\tlet toneMappingName;\r\n\r\n\tswitch ( toneMapping ) {\r\n\r\n\t\tcase LinearToneMapping:\r\n\t\t\ttoneMappingName = 'Linear';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ReinhardToneMapping:\r\n\t\t\ttoneMappingName = 'Reinhard';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CineonToneMapping:\r\n\t\t\ttoneMappingName = 'OptimizedCineon';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ACESFilmicToneMapping:\r\n\t\t\ttoneMappingName = 'ACESFilmic';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CustomToneMapping:\r\n\t\t\ttoneMappingName = 'Custom';\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\r\n\t\t\ttoneMappingName = 'Linear';\r\n\r\n\t}\r\n\r\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\r\n\r\n}\r\n\r\nfunction generateExtensions( parameters ) {\r\n\r\n\tconst chunks = [\r\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\r\n\t];\r\n\r\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n}\r\n\r\nfunction generateDefines( defines ) {\r\n\r\n\tconst chunks = [];\r\n\r\n\tfor ( const name in defines ) {\r\n\r\n\t\tconst value = defines[ name ];\r\n\r\n\t\tif ( value === false ) continue;\r\n\r\n\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t}\r\n\r\n\treturn chunks.join( '\\n' );\r\n\r\n}\r\n\r\nfunction fetchAttributeLocations( gl, program ) {\r\n\r\n\tconst attributes = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35721 );\r\n\r\n\tfor ( let i = 0; i < n; i ++ ) {\r\n\r\n\t\tconst info = gl.getActiveAttrib( program, i );\r\n\t\tconst name = info.name;\r\n\r\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\r\n\r\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t}\r\n\r\n\treturn attributes;\r\n\r\n}\r\n\r\nfunction filterEmptyLine( string ) {\r\n\r\n\treturn string !== '';\r\n\r\n}\r\n\r\nfunction replaceLightNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\r\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\r\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\r\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\r\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\r\n\r\n}\r\n\r\nfunction replaceClippingPlaneNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\r\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\r\n\r\n}\r\n\r\n// Resolve Includes\r\n\r\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\r\n\r\nfunction resolveIncludes( string ) {\r\n\r\n\treturn string.replace( includePattern, includeReplacer );\r\n\r\n}\r\n\r\nfunction includeReplacer( match, include ) {\r\n\r\n\tconst string = ShaderChunk[ include ];\r\n\r\n\tif ( string === undefined ) {\r\n\r\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t}\r\n\r\n\treturn resolveIncludes( string );\r\n\r\n}\r\n\r\n// Unroll Loops\r\n\r\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\nconst unrollLoopPattern = /#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;\r\n\r\nfunction unrollLoops( string ) {\r\n\r\n\treturn string\r\n\t\t.replace( unrollLoopPattern, loopReplacer )\r\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\r\n\r\n}\r\n\r\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\r\n\r\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\r\n\treturn loopReplacer( match, start, end, snippet );\r\n\r\n}\r\n\r\nfunction loopReplacer( match, start, end, snippet ) {\r\n\r\n\tlet string = '';\r\n\r\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\tstring += snippet\r\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\r\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\r\n\r\n\t}\r\n\r\n\treturn string;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction generatePrecision( parameters ) {\r\n\r\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\r\n\r\n\tif ( parameters.precision === \"highp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"mediump\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"lowp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\r\n\r\n\t}\r\n\r\n\treturn precisionstring;\r\n\r\n}\r\n\r\nfunction generateShadowMapTypeDefine( parameters ) {\r\n\r\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\r\n\r\n\t}\r\n\r\n\treturn shadowMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapTypeDefine( parameters ) {\r\n\r\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeReflectionMapping:\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CubeUVReflectionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EquirectangularReflectionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapModeDefine( parameters ) {\r\n\r\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\r\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapModeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapBlendingDefine( parameters ) {\r\n\r\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.combine ) {\r\n\r\n\t\t\tcase MultiplyOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MixOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase AddOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapBlendingDefine;\r\n\r\n}\r\n\r\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\r\n\r\n\tconst gl = renderer.getContext();\r\n\r\n\tconst defines = parameters.defines;\r\n\r\n\tlet vertexShader = parameters.vertexShader;\r\n\tlet fragmentShader = parameters.fragmentShader;\r\n\r\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\r\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\r\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\r\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\r\n\r\n\r\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\r\n\r\n\tconst customDefines = generateDefines( defines );\r\n\r\n\tconst program = gl.createProgram();\r\n\r\n\tlet prefixVertex, prefixFragment;\r\n\r\n\tif ( parameters.isRawShaderMaterial ) {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixVertex.length > 0 ) {\r\n\r\n\t\t\tprefixVertex += '\\n';\r\n\r\n\t\t}\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixFragment.length > 0 ) {\r\n\r\n\t\t\tprefixFragment += '\\n';\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\r\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t'#ifdef USE_INSTANCING',\r\n\r\n\t\t\t' attribute mat4 instanceMatrix;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'attribute vec3 position;',\r\n\t\t\t'attribute vec3 normal;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'#ifdef USE_TANGENT',\r\n\r\n\t\t\t'\tattribute vec4 tangent;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t'\t#else',\r\n\r\n\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t'\t#endif',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\r\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\r\n\r\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\r\n\r\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\r\n\r\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\r\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\r\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\r\n\r\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tvertexShader = resolveIncludes( vertexShader );\r\n\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\r\n\r\n\tfragmentShader = resolveIncludes( fragmentShader );\r\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\r\n\r\n\tvertexShader = unrollLoops( vertexShader );\r\n\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\tif ( parameters.isWebGL2 && ! parameters.isRawShaderMaterial ) {\r\n\r\n\t\t// GLSL 3.0 conversion\r\n\r\n\t\tprefixVertex = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define attribute in',\r\n\t\t\t'#define varying out',\r\n\t\t\t'#define texture2D texture'\r\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\r\n\r\n\t\tprefixFragment = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define varying in',\r\n\t\t\t'out highp vec4 pc_fragColor;',\r\n\t\t\t'#define gl_FragColor pc_fragColor',\r\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\r\n\t\t\t'#define texture2D texture',\r\n\t\t\t'#define textureCube texture',\r\n\t\t\t'#define texture2DProj textureProj',\r\n\t\t\t'#define texture2DLodEXT textureLod',\r\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\r\n\t\t\t'#define textureCubeLodEXT textureLod',\r\n\t\t\t'#define texture2DGradEXT textureGrad',\r\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\r\n\t\t\t'#define textureCubeGradEXT textureGrad'\r\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\r\n\r\n\t}\r\n\r\n\tconst vertexGlsl = prefixVertex + vertexShader;\r\n\tconst fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\r\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\r\n\r\n\tgl.attachShader( program, glVertexShader );\r\n\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t// Force a particular attribute to index 0.\r\n\r\n\tif ( parameters.index0AttributeName !== undefined ) {\r\n\r\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\r\n\r\n\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t}\r\n\r\n\tgl.linkProgram( program );\r\n\r\n\t// check for link errors\r\n\tif ( renderer.debug.checkShaderErrors ) {\r\n\r\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\r\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\r\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\r\n\r\n\t\tlet runnable = true;\r\n\t\tlet haveDiagnostics = true;\r\n\r\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\r\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Clean up\r\n\r\n\t// Crashes in iOS9 and iOS10. #18402\r\n\t// gl.detachShader( program, glVertexShader );\r\n\t// gl.detachShader( program, glFragmentShader );\r\n\r\n\tgl.deleteShader( glVertexShader );\r\n\tgl.deleteShader( glFragmentShader );\r\n\r\n\t// set up caching for uniform locations\r\n\r\n\tlet cachedUniforms;\r\n\r\n\tthis.getUniforms = function () {\r\n\r\n\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedUniforms;\r\n\r\n\t};\r\n\r\n\t// set up caching for attribute locations\r\n\r\n\tlet cachedAttributes;\r\n\r\n\tthis.getAttributes = function () {\r\n\r\n\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedAttributes;\r\n\r\n\t};\r\n\r\n\t// free resource\r\n\r\n\tthis.destroy = function () {\r\n\r\n\t\tbindingStates.releaseStatesOfProgram( this );\r\n\r\n\t\tgl.deleteProgram( program );\r\n\t\tthis.program = undefined;\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.name = parameters.shaderName;\r\n\tthis.id = programIdCount ++;\r\n\tthis.cacheKey = cacheKey;\r\n\tthis.usedTimes = 1;\r\n\tthis.program = program;\r\n\tthis.vertexShader = glVertexShader;\r\n\tthis.fragmentShader = glFragmentShader;\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nfunction WebGLPrograms( renderer, extensions, capabilities, bindingStates ) {\r\n\r\n\tconst programs = [];\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\r\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\r\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\r\n\tconst vertexTextures = capabilities.vertexTextures;\r\n\r\n\tlet precision = capabilities.precision;\r\n\r\n\tconst shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshDistanceMaterial: 'distanceRGBA',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshToonMaterial: 'toon',\r\n\t\tMeshStandardMaterial: 'physical',\r\n\t\tMeshPhysicalMaterial: 'physical',\r\n\t\tMeshMatcapMaterial: 'matcap',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points',\r\n\t\tShadowMaterial: 'shadow',\r\n\t\tSpriteMaterial: 'sprite'\r\n\t};\r\n\r\n\tconst parameterNames = [\r\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\",\r\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\r\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\r\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\r\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\r\n\t\t\"sheen\", \"transmissionMap\"\r\n\t];\r\n\r\n\tfunction allocateBones( object ) {\r\n\r\n\t\tconst skeleton = object.skeleton;\r\n\t\tconst bones = skeleton.bones;\r\n\r\n\t\tif ( floatVertexTextures ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\r\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\r\n\r\n\t\t\tif ( maxBones < bones.length ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map ) {\r\n\r\n\t\tlet encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = LinearEncoding;\r\n\r\n\t\t} else if ( map.isTexture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map.isWebGLRenderTarget ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tfunction getParameters( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tconst maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet vertexShader, fragmentShader;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\r\n\t\t\tvertexShader = shader.vertexShader;\r\n\t\t\tfragmentShader = shader.fragmentShader;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvertexShader = material.vertexShader;\r\n\t\t\tfragmentShader = material.fragmentShader;\r\n\r\n\t\t}\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tconst parameters = {\r\n\r\n\t\t\tisWebGL2: isWebGL2,\r\n\r\n\t\t\tshaderID: shaderID,\r\n\t\t\tshaderName: material.type,\r\n\r\n\t\t\tvertexShader: vertexShader,\r\n\t\t\tfragmentShader: fragmentShader,\r\n\t\t\tdefines: material.defines,\r\n\r\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial,\r\n\t\t\tisShaderMaterial: material.isShaderMaterial,\r\n\r\n\t\t\tprecision: precision,\r\n\r\n\t\t\tinstancing: object.isInstancedMesh === true,\r\n\r\n\t\t\tsupportsVertexTextures: vertexTextures,\r\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\r\n\t\t\tmatcap: !! material.matcap,\r\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\r\n\t\t\tenvMap: !! envMap,\r\n\t\t\tenvMapMode: envMap && envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\r\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\r\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\r\n\t\t\tclearcoatMap: !! material.clearcoatMap,\r\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\r\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tgradientMap: !! material.gradientMap,\r\n\r\n\t\t\tsheen: !! material.sheen,\r\n\r\n\t\t\ttransmissionMap: !! material.transmissionMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\r\n\t\t\tvertexColors: material.vertexColors,\r\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\r\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\r\n\r\n\t\t\tfog: !! fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\r\n\r\n\t\t\tflatShading: material.flatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning && maxBones > 0,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: floatVertexTextures,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumRectAreaLights: lights.rectArea.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\r\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\r\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\r\n\r\n\t\t\tnumClippingPlanes: nClipPlanes,\r\n\t\t\tnumClipIntersection: nClipIntersection,\r\n\r\n\t\t\tdithering: material.dithering,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === DoubleSide,\r\n\t\t\tflipSided: material.side === BackSide,\r\n\r\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\r\n\r\n\t\t\tindex0AttributeName: material.index0AttributeName,\r\n\r\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\r\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\r\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\r\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\r\n\r\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\r\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\r\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\r\n\r\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t}\r\n\r\n\tfunction getProgramCacheKey( parameters ) {\r\n\r\n\t\tconst array = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tarray.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.push( parameters.fragmentShader );\r\n\t\t\tarray.push( parameters.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.defines !== undefined ) {\r\n\r\n\t\t\tfor ( const name in parameters.defines ) {\r\n\r\n\t\t\t\tarray.push( name );\r\n\t\t\t\tarray.push( parameters.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.isRawShaderMaterial === undefined ) {\r\n\r\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray.push( renderer.outputEncoding );\r\n\t\t\tarray.push( renderer.gammaFactor );\r\n\r\n\t\t}\r\n\r\n\t\tarray.push( parameters.customProgramCacheKey );\r\n\r\n\t\treturn array.join();\r\n\r\n\t}\r\n\r\n\tfunction getUniforms( material ) {\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\t\tlet uniforms;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms = material.uniforms;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction acquireProgram( parameters, cacheKey ) {\r\n\r\n\t\tlet program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tconst preexistingProgram = programs[ p ];\r\n\r\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\r\n\r\n\t\t\t\tprogram = preexistingProgram;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction releaseProgram( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tconst i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetParameters: getParameters,\r\n\t\tgetProgramCacheKey: getProgramCacheKey,\r\n\t\tgetUniforms: getUniforms,\r\n\t\tacquireProgram: acquireProgram,\r\n\t\treleaseProgram: releaseProgram,\r\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\t\tprograms: programs\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLProperties() {\r\n\r\n\tlet properties = new WeakMap();\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tlet map = properties.get( object );\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties.set( object, map );\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t}\r\n\r\n\tfunction remove( object ) {\r\n\r\n\t\tproperties.delete( object );\r\n\r\n\t}\r\n\r\n\tfunction update( object, key, value ) {\r\n\r\n\t\tproperties.get( object )[ key ] = value;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tproperties = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction painterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.program !== b.program ) {\r\n\r\n\t\treturn a.program.id - b.program.id;\r\n\r\n\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\treturn a.material.id - b.material.id;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn a.z - b.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction reversePainterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn b.z - a.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction WebGLRenderList( properties ) {\r\n\r\n\tconst renderItems = [];\r\n\tlet renderItemsIndex = 0;\r\n\r\n\tconst opaque = [];\r\n\tconst transparent = [];\r\n\r\n\tconst defaultProgram = { id: - 1 };\r\n\r\n\tfunction init() {\r\n\r\n\t\trenderItemsIndex = 0;\r\n\r\n\t\topaque.length = 0;\r\n\t\ttransparent.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tif ( renderItem === undefined ) {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\r\n\t\t\t\tgroupOrder: groupOrder,\r\n\t\t\t\trenderOrder: object.renderOrder,\r\n\t\t\t\tz: z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\r\n\t\t\trenderItem.groupOrder = groupOrder;\r\n\t\t\trenderItem.renderOrder = object.renderOrder;\r\n\t\t\trenderItem.z = z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t}\r\n\r\n\t\trenderItemsIndex ++;\r\n\r\n\t\treturn renderItem;\r\n\r\n\t}\r\n\r\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\r\n\r\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\r\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\r\n\r\n\t}\r\n\r\n\tfunction finish() {\r\n\r\n\t\t// Clear references from inactive renderItems in the list\r\n\r\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderItems[ i ];\r\n\r\n\t\t\tif ( renderItem.id === null ) break;\r\n\r\n\t\t\trenderItem.id = null;\r\n\t\t\trenderItem.object = null;\r\n\t\t\trenderItem.geometry = null;\r\n\t\t\trenderItem.material = null;\r\n\t\t\trenderItem.program = null;\r\n\t\t\trenderItem.group = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\topaque: opaque,\r\n\t\ttransparent: transparent,\r\n\r\n\t\tinit: init,\r\n\t\tpush: push,\r\n\t\tunshift: unshift,\r\n\t\tfinish: finish,\r\n\r\n\t\tsort: sort\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderLists( properties ) {\r\n\r\n\tlet lists = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\tlists.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tconst cameras = lists.get( scene );\r\n\t\tlet list;\r\n\r\n\t\tif ( cameras === undefined ) {\r\n\r\n\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\tlists.set( scene, new WeakMap() );\r\n\t\t\tlists.get( scene ).set( camera, list );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlist = cameras.get( camera );\r\n\t\t\tif ( list === undefined ) {\r\n\r\n\t\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\t\tcameras.set( camera, list );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tlists = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction UniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tskyColor: new Color(),\r\n\t\t\t\t\t\tgroundColor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'RectAreaLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\thalfWidth: new Vector3(),\r\n\t\t\t\t\t\thalfHeight: new Vector3()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction ShadowUniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\r\n\t\t\t\t\t\tshadowCameraNear: 1,\r\n\t\t\t\t\t\tshadowCameraFar: 1000\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n\r\n\r\nlet nextVersion = 0;\r\n\r\nfunction shadowCastingLightsFirst( lightA, lightB ) {\r\n\r\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\r\n\r\n}\r\n\r\nfunction WebGLLights() {\r\n\r\n\tconst cache = new UniformsCache();\r\n\r\n\tconst shadowCache = ShadowUniformsCache();\r\n\r\n\tconst state = {\r\n\r\n\t\tversion: 0,\r\n\r\n\t\thash: {\r\n\t\t\tdirectionalLength: - 1,\r\n\t\t\tpointLength: - 1,\r\n\t\t\tspotLength: - 1,\r\n\t\t\trectAreaLength: - 1,\r\n\t\t\themiLength: - 1,\r\n\r\n\t\t\tnumDirectionalShadows: - 1,\r\n\t\t\tnumPointShadows: - 1,\r\n\t\t\tnumSpotShadows: - 1\r\n\t\t},\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tprobe: [],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadow: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadow: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\trectArea: [],\r\n\t\tpoint: [],\r\n\t\tpointShadow: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: []\r\n\r\n\t};\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\r\n\r\n\tconst vector3 = new Vector3();\r\n\tconst matrix4 = new Matrix4();\r\n\tconst matrix42 = new Matrix4();\r\n\r\n\tfunction setup( lights, shadows, camera ) {\r\n\r\n\t\tlet r = 0, g = 0, b = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\r\n\r\n\t\tlet directionalLength = 0;\r\n\t\tlet pointLength = 0;\r\n\t\tlet spotLength = 0;\r\n\t\tlet rectAreaLength = 0;\r\n\t\tlet hemiLength = 0;\r\n\r\n\t\tlet numDirectionalShadows = 0;\r\n\t\tlet numPointShadows = 0;\r\n\t\tlet numSpotShadows = 0;\r\n\r\n\t\tconst viewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\tlights.sort( shadowCastingLightsFirst );\r\n\r\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\r\n\t\t\tconst color = light.color;\r\n\t\t\tconst intensity = light.intensity;\r\n\t\t\tconst distance = light.distance;\r\n\r\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n\t\t\tif ( light.isAmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light.isLightProbe ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\r\n\r\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( light.isDirectionalLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\r\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumDirectionalShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\r\n\r\n\t\t\t\tdirectionalLength ++;\r\n\r\n\t\t\t} else if ( light.isSpotLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\r\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumSpotShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\r\n\r\n\t\t\t\tspotLength ++;\r\n\r\n\t\t\t} else if ( light.isRectAreaLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\t// (a) intensity is the total visible light emitted\r\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\r\n\r\n\t\t\t\t// (b) intensity is the brightness of the light\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\r\n\t\t\t\tmatrix42.identity();\r\n\t\t\t\tmatrix4.copy( light.matrixWorld );\r\n\t\t\t\tmatrix4.premultiply( viewMatrix );\r\n\t\t\t\tmatrix42.extractRotation( matrix4 );\r\n\r\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\r\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\r\n\r\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\r\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\r\n\r\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\r\n\t\t\t\t// uniforms.distance = distance;\r\n\r\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\r\n\r\n\t\t\t\trectAreaLength ++;\r\n\r\n\t\t\t} else if ( light.isPointLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\r\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\r\n\r\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\r\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumPointShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.point[ pointLength ] = uniforms;\r\n\r\n\t\t\t\tpointLength ++;\r\n\r\n\t\t\t} else if ( light.isHemisphereLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\r\n\r\n\t\t\t\themiLength ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.ambient[ 0 ] = r;\r\n\t\tstate.ambient[ 1 ] = g;\r\n\t\tstate.ambient[ 2 ] = b;\r\n\r\n\t\tconst hash = state.hash;\r\n\r\n\t\tif ( hash.directionalLength !== directionalLength ||\r\n\t\t\thash.pointLength !== pointLength ||\r\n\t\t\thash.spotLength !== spotLength ||\r\n\t\t\thash.rectAreaLength !== rectAreaLength ||\r\n\t\t\thash.hemiLength !== hemiLength ||\r\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\r\n\t\t\thash.numPointShadows !== numPointShadows ||\r\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\r\n\r\n\t\t\tstate.directional.length = directionalLength;\r\n\t\t\tstate.spot.length = spotLength;\r\n\t\t\tstate.rectArea.length = rectAreaLength;\r\n\t\t\tstate.point.length = pointLength;\r\n\t\t\tstate.hemi.length = hemiLength;\r\n\r\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\r\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadow.length = numPointShadows;\r\n\t\t\tstate.pointShadowMap.length = numPointShadows;\r\n\t\t\tstate.spotShadow.length = numSpotShadows;\r\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\r\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\r\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\r\n\r\n\t\t\thash.directionalLength = directionalLength;\r\n\t\t\thash.pointLength = pointLength;\r\n\t\t\thash.spotLength = spotLength;\r\n\t\t\thash.rectAreaLength = rectAreaLength;\r\n\t\t\thash.hemiLength = hemiLength;\r\n\r\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\r\n\t\t\thash.numPointShadows = numPointShadows;\r\n\t\t\thash.numSpotShadows = numSpotShadows;\r\n\r\n\t\t\tstate.version = nextVersion ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tsetup: setup,\r\n\t\tstate: state\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderState() {\r\n\r\n\tconst lights = new WebGLLights();\r\n\r\n\tconst lightsArray = [];\r\n\tconst shadowsArray = [];\r\n\r\n\tfunction init() {\r\n\r\n\t\tlightsArray.length = 0;\r\n\t\tshadowsArray.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction pushLight( light ) {\r\n\r\n\t\tlightsArray.push( light );\r\n\r\n\t}\r\n\r\n\tfunction pushShadow( shadowLight ) {\r\n\r\n\t\tshadowsArray.push( shadowLight );\r\n\r\n\t}\r\n\r\n\tfunction setupLights( camera ) {\r\n\r\n\t\tlights.setup( lightsArray, shadowsArray, camera );\r\n\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tlightsArray: lightsArray,\r\n\t\tshadowsArray: shadowsArray,\r\n\r\n\t\tlights: lights\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: init,\r\n\t\tstate: state,\r\n\t\tsetupLights: setupLights,\r\n\r\n\t\tpushLight: pushLight,\r\n\t\tpushShadow: pushShadow\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderStates() {\r\n\r\n\tlet renderStates = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\trenderStates.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tlet renderState;\r\n\r\n\t\tif ( renderStates.has( scene ) === false ) {\r\n\r\n\t\t\trenderState = new WebGLRenderState();\r\n\t\t\trenderStates.set( scene, new WeakMap() );\r\n\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\r\n\r\n\t\t\t\trenderState = new WebGLRenderState();\r\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn renderState;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\trenderStates = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nfunction MeshDepthMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.depthPacking = BasicDepthPacking;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\r\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\r\n\r\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\r\n\r\nMeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.depthPacking = source.depthPacking;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  referencePosition: <float>,\r\n *  nearDistance: <float>,\r\n *  farDistance: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>\r\n *\r\n * }\r\n */\r\n\r\nfunction MeshDistanceMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDistanceMaterial';\r\n\r\n\tthis.referencePosition = new Vector3();\r\n\tthis.nearDistance = 1;\r\n\tthis.farDistance = 1000;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\r\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\r\n\r\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\r\n\r\nMeshDistanceMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.referencePosition.copy( source.referencePosition );\r\n\tthis.nearDistance = source.nearDistance;\r\n\tthis.farDistance = source.farDistance;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\r\n\r\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\r\n\r\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\r\n\r\n\tlet _frustum = new Frustum();\r\n\r\n\tconst _shadowMapSize = new Vector2(),\r\n\t\t_viewportSize = new Vector2(),\r\n\r\n\t\t_viewport = new Vector4(),\r\n\r\n\t\t_depthMaterials = [],\r\n\t\t_distanceMaterials = [],\r\n\r\n\t\t_materialCache = {};\r\n\r\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\r\n\r\n\tconst shadowMaterialVertical = new ShaderMaterial( {\r\n\r\n\t\tdefines: {\r\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\r\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\r\n\t\t},\r\n\r\n\t\tuniforms: {\r\n\t\t\tshadow_pass: { value: null },\r\n\t\t\tresolution: { value: new Vector2() },\r\n\t\t\tradius: { value: 4.0 }\r\n\t\t},\r\n\r\n\t\tvertexShader: vsm_vert,\r\n\r\n\t\tfragmentShader: vsm_frag\r\n\r\n\t} );\r\n\r\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\r\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\r\n\r\n\tconst fullScreenTri = new BufferGeometry();\r\n\tfullScreenTri.setAttribute(\r\n\t\t\"position\",\r\n\t\tnew BufferAttribute(\r\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\r\n\t\t\t3\r\n\t\t)\r\n\t);\r\n\r\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = PCFShadowMap;\r\n\r\n\tthis.render = function ( lights, scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\tif ( lights.length === 0 ) return;\r\n\r\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\r\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\r\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\r\n\r\n\t\tconst _state = _renderer.state;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.setBlending( NoBlending );\r\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\r\n\t\t_state.buffers.depth.setTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\r\n\r\n\t\t\tif ( shadow === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\r\n\r\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\r\n\r\n\t\t\t_viewportSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\r\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\r\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\r\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\r\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\tconst viewportCount = shadow.getViewportCount();\r\n\r\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\r\n\r\n\t\t\t\tconst viewport = shadow.getViewport( vp );\r\n\r\n\t\t\t\t_viewport.set(\r\n\t\t\t\t\t_viewportSize.x * viewport.x,\r\n\t\t\t\t\t_viewportSize.y * viewport.y,\r\n\t\t\t\t\t_viewportSize.x * viewport.z,\r\n\t\t\t\t\t_viewportSize.y * viewport.w\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_state.viewport( _viewport );\r\n\r\n\t\t\t\tshadow.updateMatrices( light, vp );\r\n\r\n\t\t\t\t_frustum = shadow.getFrustum();\r\n\r\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// do blur pass for VSM\r\n\r\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tVSMPass( shadow, camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tshadow.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\r\n\r\n\t};\r\n\r\n\tfunction VSMPass( shadow, camera ) {\r\n\r\n\t\tconst geometry = _objects.update( fullScreenMesh );\r\n\r\n\t\t// vertical pass\r\n\r\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\r\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.mapPass );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\r\n\r\n\t\t// horizonal pass\r\n\r\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\r\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _depthMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDepthMaterial( {\r\n\r\n\t\t\t\tdepthPacking: RGBADepthPacking,\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_depthMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _distanceMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDistanceMaterial( {\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_distanceMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\r\n\r\n\t\tlet result = null;\r\n\r\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\r\n\t\tlet customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( light.isPointLight === true ) {\r\n\r\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( customMaterial === undefined ) {\r\n\r\n\t\t\tlet useMorphing = false;\r\n\r\n\t\t\tif ( material.morphTargets === true ) {\r\n\r\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet useSkinning = false;\r\n\r\n\t\t\tif ( object.isSkinnedMesh === true ) {\r\n\r\n\t\t\t\tif ( material.skinning === true ) {\r\n\r\n\t\t\t\t\tuseSkinning = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\r\n\r\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _renderer.localClippingEnabled &&\r\n\t\t\t\tmaterial.clipShadows === true &&\r\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\r\n\r\n\t\t\t// in this case we need a unique material instance reflecting the\r\n\t\t\t// appropriate state\r\n\r\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\r\n\r\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\r\n\r\n\t\t\tif ( materialsForVariant === undefined ) {\r\n\r\n\t\t\t\tmaterialsForVariant = {};\r\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n\t\t\tif ( cachedMaterial === undefined ) {\r\n\r\n\t\t\t\tcachedMaterial = result.clone();\r\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tresult.visible = material.visible;\r\n\t\tresult.wireframe = material.wireframe;\r\n\r\n\t\tif ( type === VSMShadowMap ) {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\r\n\r\n\t\t}\r\n\r\n\t\tresult.clipShadows = material.clipShadows;\r\n\t\tresult.clippingPlanes = material.clippingPlanes;\r\n\t\tresult.clipIntersection = material.clipIntersection;\r\n\r\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\tresult.linewidth = material.linewidth;\r\n\r\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\r\n\r\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tresult.nearDistance = shadowCameraNear;\r\n\t\t\tresult.farDistance = shadowCameraFar;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\r\n\r\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\r\n\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n\t\t\t\tconst geometry = _objects.update( object );\r\n\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ k ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLState( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction ColorBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tconst color = new Vector4();\r\n\t\tlet currentColorMask = null;\r\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetMask: function ( colorMask ) {\r\n\r\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n\t\t\t\t\tcurrentColorMask = colorMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha === true ) {\r\n\r\n\t\t\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolor.set( r, g, b, a );\r\n\r\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\r\n\r\n\t\t\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\t\t\tcurrentColorClear.copy( color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentColorMask = null;\r\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction DepthBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentDepthMask = null;\r\n\t\tlet currentDepthFunc = null;\r\n\t\tlet currentDepthClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( depthTest ) {\r\n\r\n\t\t\t\tif ( depthTest ) {\r\n\r\n\t\t\t\t\tenable( 2929 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdisable( 2929 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( depthMask ) {\r\n\r\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.depthMask( depthMask );\r\n\t\t\t\t\tcurrentDepthMask = depthMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( depthFunc ) {\r\n\r\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\t\t\tcase NeverDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase AlwaysDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase EqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase NotEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( depth ) {\r\n\r\n\t\t\t\tif ( currentDepthClear !== depth ) {\r\n\r\n\t\t\t\t\tgl.clearDepth( depth );\r\n\t\t\t\t\tcurrentDepthClear = depth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentDepthMask = null;\r\n\t\t\t\tcurrentDepthFunc = null;\r\n\t\t\t\tcurrentDepthClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction StencilBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentStencilMask = null;\r\n\t\tlet currentStencilFunc = null;\r\n\t\tlet currentStencilRef = null;\r\n\t\tlet currentStencilFuncMask = null;\r\n\t\tlet currentStencilFail = null;\r\n\t\tlet currentStencilZFail = null;\r\n\t\tlet currentStencilZPass = null;\r\n\t\tlet currentStencilClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( stencilTest ) {\r\n\r\n\t\t\t\tif ( ! locked ) {\r\n\r\n\t\t\t\t\tif ( stencilTest ) {\r\n\r\n\t\t\t\t\t\tenable( 2960 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tdisable( 2960 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.stencilMask( stencilMask );\r\n\t\t\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\r\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\r\n\r\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\t\t\tcurrentStencilRef = stencilRef;\r\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\r\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n\t\t\t\t\tcurrentStencilFail = stencilFail;\r\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( stencil ) {\r\n\r\n\t\t\t\tif ( currentStencilClear !== stencil ) {\r\n\r\n\t\t\t\t\tgl.clearStencil( stencil );\r\n\t\t\t\t\tcurrentStencilClear = stencil;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentStencilMask = null;\r\n\t\t\t\tcurrentStencilFunc = null;\r\n\t\t\t\tcurrentStencilRef = null;\r\n\t\t\t\tcurrentStencilFuncMask = null;\r\n\t\t\t\tcurrentStencilFail = null;\r\n\t\t\t\tcurrentStencilZFail = null;\r\n\t\t\t\tcurrentStencilZPass = null;\r\n\t\t\t\tcurrentStencilClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst colorBuffer = new ColorBuffer();\r\n\tconst depthBuffer = new DepthBuffer();\r\n\tconst stencilBuffer = new StencilBuffer();\r\n\r\n\tlet enabledCapabilities = {};\r\n\r\n\tlet currentProgram = null;\r\n\r\n\tlet currentBlendingEnabled = null;\r\n\tlet currentBlending = null;\r\n\tlet currentBlendEquation = null;\r\n\tlet currentBlendSrc = null;\r\n\tlet currentBlendDst = null;\r\n\tlet currentBlendEquationAlpha = null;\r\n\tlet currentBlendSrcAlpha = null;\r\n\tlet currentBlendDstAlpha = null;\r\n\tlet currentPremultipledAlpha = false;\r\n\r\n\tlet currentFlipSided = null;\r\n\tlet currentCullFace = null;\r\n\r\n\tlet currentLineWidth = null;\r\n\r\n\tlet currentPolygonOffsetFactor = null;\r\n\tlet currentPolygonOffsetUnits = null;\r\n\r\n\tconst maxTextures = gl.getParameter( 35661 );\r\n\r\n\tlet lineWidthAvailable = false;\r\n\tlet version = 0;\r\n\tconst glVersion = gl.getParameter( 7938 );\r\n\r\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 1.0 );\r\n\r\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 2.0 );\r\n\r\n\t}\r\n\r\n\tlet currentTextureSlot = null;\r\n\tlet currentBoundTextures = {};\r\n\r\n\tconst currentScissor = new Vector4();\r\n\tconst currentViewport = new Vector4();\r\n\r\n\tfunction createTexture( type, target, count ) {\r\n\r\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\r\n\t\tconst texture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( type, texture );\r\n\t\tgl.texParameteri( type, 10241, 9728 );\r\n\t\tgl.texParameteri( type, 10240, 9728 );\r\n\r\n\t\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\tconst emptyTextures = {};\r\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\r\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\r\n\r\n\t// init\r\n\r\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\r\n\tdepthBuffer.setClear( 1 );\r\n\tstencilBuffer.setClear( 0 );\r\n\r\n\tenable( 2929 );\r\n\tdepthBuffer.setFunc( LessEqualDepth );\r\n\r\n\tsetFlipSided( false );\r\n\tsetCullFace( CullFaceBack );\r\n\tenable( 2884 );\r\n\r\n\tsetBlending( NoBlending );\r\n\r\n\t//\r\n\r\n\tfunction enable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tenabledCapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tenabledCapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction useProgram( program ) {\r\n\r\n\t\tif ( currentProgram !== program ) {\r\n\r\n\t\t\tgl.useProgram( program );\r\n\r\n\t\t\tcurrentProgram = program;\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tconst equationToGL = {\r\n\t\t[ AddEquation ]: 32774,\r\n\t\t[ SubtractEquation ]: 32778,\r\n\t\t[ ReverseSubtractEquation ]: 32779\r\n\t};\r\n\r\n\tif ( isWebGL2 ) {\r\n\r\n\t\tequationToGL[ MinEquation ] = 32775;\r\n\t\tequationToGL[ MaxEquation ] = 32776;\r\n\r\n\t} else {\r\n\r\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\r\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst factorToGL = {\r\n\t\t[ ZeroFactor ]: 0,\r\n\t\t[ OneFactor ]: 1,\r\n\t\t[ SrcColorFactor ]: 768,\r\n\t\t[ SrcAlphaFactor ]: 770,\r\n\t\t[ SrcAlphaSaturateFactor ]: 776,\r\n\t\t[ DstColorFactor ]: 774,\r\n\t\t[ DstAlphaFactor ]: 772,\r\n\t\t[ OneMinusSrcColorFactor ]: 769,\r\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\r\n\t\t[ OneMinusDstColorFactor ]: 775,\r\n\t\t[ OneMinusDstAlphaFactor ]: 773\r\n\t};\r\n\r\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending === NoBlending ) {\r\n\r\n\t\t\tif ( currentBlendingEnabled ) {\r\n\r\n\t\t\t\tdisable( 3042 );\r\n\t\t\t\tcurrentBlendingEnabled = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! currentBlendingEnabled ) {\r\n\r\n\t\t\tenable( 3042 );\r\n\t\t\tcurrentBlendingEnabled = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== CustomBlending ) {\r\n\r\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\r\n\r\n\t\t\t\t\tgl.blendEquation( 32774 );\r\n\r\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\r\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentBlendSrc = null;\r\n\t\t\t\tcurrentBlendDst = null;\r\n\t\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t\t\tcurrentBlending = blending;\r\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// custom blending\r\n\r\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\r\n\r\n\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\r\n\r\n\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentBlending = blending;\r\n\t\tcurrentPremultipledAlpha = null;\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material, frontFaceCW ) {\r\n\r\n\t\tmaterial.side === DoubleSide\r\n\t\t\t? disable( 2884 )\r\n\t\t\t: enable( 2884 );\r\n\r\n\t\tlet flipSided = ( material.side === BackSide );\r\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\r\n\r\n\t\tsetFlipSided( flipSided );\r\n\r\n\t\t( material.blending === NormalBlending && material.transparent === false )\r\n\t\t\t? setBlending( NoBlending )\r\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\tdepthBuffer.setFunc( material.depthFunc );\r\n\t\tdepthBuffer.setTest( material.depthTest );\r\n\t\tdepthBuffer.setMask( material.depthWrite );\r\n\t\tcolorBuffer.setMask( material.colorWrite );\r\n\r\n\t\tconst stencilWrite = material.stencilWrite;\r\n\t\tstencilBuffer.setTest( stencilWrite );\r\n\t\tif ( stencilWrite ) {\r\n\r\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\r\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\r\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\r\n\r\n\t\t}\r\n\r\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setFlipSided( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( 2304 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( 2305 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCullFace( cullFace ) {\r\n\r\n\t\tif ( cullFace !== CullFaceNone ) {\r\n\r\n\t\t\tenable( 2884 );\r\n\r\n\t\t\tif ( cullFace !== currentCullFace ) {\r\n\r\n\t\t\t\tif ( cullFace === CullFaceBack ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1029 );\r\n\r\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1028 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.cullFace( 1032 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 2884 );\r\n\r\n\t\t}\r\n\r\n\t\tcurrentCullFace = cullFace;\r\n\r\n\t}\r\n\r\n\tfunction setLineWidth( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tenable( 32823 );\r\n\r\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 32823 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setScissorTest( scissorTest ) {\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tenable( 3089 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 3089 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// texture\r\n\r\n\tfunction activeTexture( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction bindTexture( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === null ) {\r\n\r\n\t\t\tactiveTexture();\r\n\r\n\t\t}\r\n\r\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction unbindTexture() {\r\n\r\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\r\n\r\n\t\t\tgl.bindTexture( boundTexture.type, null );\r\n\r\n\t\t\tboundTexture.type = undefined;\r\n\t\t\tboundTexture.texture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction compressedTexImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage3D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage3D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction scissor( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction viewport( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction reset() {\r\n\r\n\t\tenabledCapabilities = {};\r\n\r\n\t\tcurrentTextureSlot = null;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentProgram = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\t\tcurrentCullFace = null;\r\n\r\n\t\tcolorBuffer.reset();\r\n\t\tdepthBuffer.reset();\r\n\t\tstencilBuffer.reset();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tbuffers: {\r\n\t\t\tcolor: colorBuffer,\r\n\t\t\tdepth: depthBuffer,\r\n\t\t\tstencil: stencilBuffer\r\n\t\t},\r\n\r\n\t\tenable: enable,\r\n\t\tdisable: disable,\r\n\r\n\t\tuseProgram: useProgram,\r\n\r\n\t\tsetBlending: setBlending,\r\n\t\tsetMaterial: setMaterial,\r\n\r\n\t\tsetFlipSided: setFlipSided,\r\n\t\tsetCullFace: setCullFace,\r\n\r\n\t\tsetLineWidth: setLineWidth,\r\n\t\tsetPolygonOffset: setPolygonOffset,\r\n\r\n\t\tsetScissorTest: setScissorTest,\r\n\r\n\t\tactiveTexture: activeTexture,\r\n\t\tbindTexture: bindTexture,\r\n\t\tunbindTexture: unbindTexture,\r\n\t\tcompressedTexImage2D: compressedTexImage2D,\r\n\t\ttexImage2D: texImage2D,\r\n\t\ttexImage3D: texImage3D,\r\n\r\n\t\tscissor: scissor,\r\n\t\tviewport: viewport,\r\n\r\n\t\treset: reset\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst maxTextures = capabilities.maxTextures;\r\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\r\n\tconst maxTextureSize = capabilities.maxTextureSize;\r\n\tconst maxSamples = capabilities.maxSamples;\r\n\r\n\tconst _videoTextures = new WeakMap();\r\n\tlet _canvas;\r\n\r\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\r\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\r\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\r\n\r\n\tlet useOffscreenCanvas = false;\r\n\r\n\ttry {\r\n\r\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\r\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\r\n\r\n\t} catch ( err ) {\r\n\r\n\t\t// Ignore any errors\r\n\r\n\t}\r\n\r\n\tfunction createCanvas( width, height ) {\r\n\r\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\r\n\r\n\t\treturn useOffscreenCanvas ?\r\n\t\t\tnew OffscreenCanvas( width, height ) :\r\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t}\r\n\r\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\r\n\r\n\t\tlet scale = 1;\r\n\r\n\t\t// handle case if texture exceeds max size\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\t// only perform resize if necessary\r\n\r\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\r\n\r\n\t\t\t// only perform resize for certain image types\r\n\r\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\r\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\r\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\r\n\r\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\r\n\r\n\t\t\t\tconst width = floor( scale * image.width );\r\n\t\t\t\tconst height = floor( scale * image.height );\r\n\r\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\r\n\r\n\t\t\t\t// cube textures can't reuse the same canvas\r\n\r\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\r\n\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tconst context = canvas.getContext( '2d' );\r\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\r\n\r\n\t\t\t\treturn canvas;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( 'data' in image ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn image;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( isWebGL2 ) return false;\r\n\r\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\r\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\r\n\r\n\t\treturn texture.generateMipmaps && supportsMips &&\r\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n\t}\r\n\r\n\tfunction generateMipmap( target, texture, width, height ) {\r\n\r\n\t\t_gl.generateMipmap( target );\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\r\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\r\n\r\n\t}\r\n\r\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\r\n\r\n\t\tif ( isWebGL2 === false ) return glFormat;\r\n\r\n\t\tif ( internalFormatName !== null ) {\r\n\r\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\r\n\r\n\t\t}\r\n\r\n\t\tlet internalFormat = glFormat;\r\n\r\n\t\tif ( glFormat === 6403 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6407 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6408 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\r\n\r\n\t\t}\r\n\r\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\r\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\r\n\r\n\t\t\textensions.get( 'EXT_color_buffer_float' );\r\n\r\n\t\t}\r\n\r\n\t\treturn internalFormat;\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback( f ) {\r\n\r\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\r\n\r\n\t\t\treturn 9728;\r\n\r\n\t\t}\r\n\r\n\t\treturn 9729;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tconst texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) {\r\n\r\n\t\t\t_videoTextures.delete( texture );\r\n\r\n\t\t}\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tconst renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\tproperties.remove( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget ) return;\r\n\r\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\trenderTarget.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.remove( renderTarget.texture );\r\n\t\tproperties.remove( renderTarget );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tlet textureUnits = 0;\r\n\r\n\tfunction resetTextureUnits() {\r\n\r\n\t\ttextureUnits = 0;\r\n\r\n\t}\r\n\r\n\tfunction allocateTextureUnit() {\r\n\r\n\t\tconst textureUnit = textureUnits;\r\n\r\n\t\tif ( textureUnit >= maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\ttextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setTexture2D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tconst image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\r\n\r\n\t\t\t} else if ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture2DArray( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture3D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture.image.length !== 6 ) return;\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\r\n\t\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\r\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\r\n\r\n\t\t\tconst cubeImage = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst image = cubeImage[ 0 ],\r\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\t\tglFormat = utils.convert( texture.format ),\r\n\t\t\t\tglType = utils.convert( texture.type ),\r\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\r\n\r\n\t\t\tlet mipmaps;\r\n\r\n\t\t\tif ( isCompressed ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmipmaps = texture.mipmaps;\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\t\t// We assume images for cube map have the same size.\r\n\t\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setTextureCubeDynamic( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 34067, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\tconst wrappingToGL = {\r\n\t\t[ RepeatWrapping ]: 10497,\r\n\t\t[ ClampToEdgeWrapping ]: 33071,\r\n\t\t[ MirroredRepeatWrapping ]: 33648\r\n\t};\r\n\r\n\tconst filterToGL = {\r\n\t\t[ NearestFilter ]: 9728,\r\n\t\t[ NearestMipmapNearestFilter ]: 9984,\r\n\t\t[ NearestMipmapLinearFilter ]: 9986,\r\n\r\n\t\t[ LinearFilter ]: 9729,\r\n\t\t[ LinearMipmapNearestFilter ]: 9985,\r\n\t\t[ LinearMipmapLinearFilter ]: 9987\r\n\t};\r\n\r\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\r\n\r\n\t\tif ( supportsMips ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\r\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\r\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initTexture( textureProperties, texture ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\tinfo.memory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tlet textureType = 3553;\r\n\r\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\r\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\r\n\r\n\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\r\n\r\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\r\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\r\n\r\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\tglFormat = utils.convert( texture.format );\r\n\r\n\t\tlet glType = utils.convert( texture.type ),\r\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\tsetTextureParameters( textureType, texture, supportsMips );\r\n\r\n\t\tlet mipmap;\r\n\t\tconst mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture.isDepthTexture ) {\r\n\r\n\t\t\t// populate depth texture with dummy data\r\n\r\n\t\t\tglInternalFormat = 6402;\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 35056;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// validation checks for WebGL 1\r\n\r\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedShortType;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tglInternalFormat = 34041;\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n\t\t} else if ( texture.isDataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture.isCompressedTexture ) {\r\n\r\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t} else if ( texture.isDataTexture2DArray ) {\r\n\r\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else if ( texture.isDataTexture3D ) {\r\n\r\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tlet glInternalFormat = 33189;\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\r\n\r\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\r\n\r\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t}\r\n\r\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\r\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\r\n\r\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\r\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\r\n\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\r\n\r\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\r\n\r\n\t\t}\r\n\r\n\t\t// upload an empty depth texture with framebuffer size\r\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\r\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\r\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\r\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\r\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\r\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\r\n\r\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\tinfo.memory.textures ++;\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\r\n\r\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\r\n\r\n\t\t\trenderTarget.texture.format = RGBAFormat;\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\r\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\r\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 34067, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 3553, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tconst texture = renderTarget.texture;\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\r\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\r\n\r\n\t\t\tstate.bindTexture( target, webglTexture );\r\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\r\n\t\t\tstate.bindTexture( target, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\r\n\r\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\r\n\r\n\t\t\t\tconst width = renderTarget.width;\r\n\t\t\t\tconst height = renderTarget.height;\r\n\t\t\t\tlet mask = 16384;\r\n\r\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\r\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\r\n\r\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getRenderTargetSamples( renderTarget ) {\r\n\r\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\r\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\r\n\r\n\t}\r\n\r\n\tfunction updateVideoTexture( texture ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\t// Check the last frame we updated the VideoTexture\r\n\r\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\r\n\r\n\t\t\t_videoTextures.set( texture, frame );\r\n\t\t\ttexture.update();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// backwards compatibility\r\n\r\n\tlet warnedTexture2D = false;\r\n\tlet warnedTextureCube = false;\r\n\r\n\tfunction safeSetTexture2D( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTexture2D === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTexture2D = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( texture, slot );\r\n\r\n\t}\r\n\r\n\tfunction safeSetTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTextureCube === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTextureCube = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\r\n\t\t// TODO: unify these code paths\r\n\t\tif ( ( texture && texture.isCubeTexture ) ||\r\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t// this function alone should take care of cube textures\r\n\t\t\tsetTextureCube( texture, slot );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\r\n\t\t\tsetTextureCubeDynamic( texture, slot );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.allocateTextureUnit = allocateTextureUnit;\r\n\tthis.resetTextureUnits = resetTextureUnits;\r\n\r\n\tthis.setTexture2D = setTexture2D;\r\n\tthis.setTexture2DArray = setTexture2DArray;\r\n\tthis.setTexture3D = setTexture3D;\r\n\tthis.setTextureCube = setTextureCube;\r\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\r\n\tthis.setupRenderTarget = setupRenderTarget;\r\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\r\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\r\n\r\n\tthis.safeSetTexture2D = safeSetTexture2D;\r\n\tthis.safeSetTextureCube = safeSetTextureCube;\r\n\r\n}\r\n\r\nfunction WebGLUtils( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction convert( p ) {\r\n\r\n\t\tlet extension;\r\n\r\n\t\tif ( p === UnsignedByteType ) return 5121;\r\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\r\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\r\n\t\tif ( p === UnsignedShort565Type ) return 33635;\r\n\r\n\t\tif ( p === ByteType ) return 5120;\r\n\t\tif ( p === ShortType ) return 5122;\r\n\t\tif ( p === UnsignedShortType ) return 5123;\r\n\t\tif ( p === IntType ) return 5124;\r\n\t\tif ( p === UnsignedIntType ) return 5125;\r\n\t\tif ( p === FloatType ) return 5126;\r\n\r\n\t\tif ( p === HalfFloatType ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 5131;\r\n\r\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.HALF_FLOAT_OES;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === AlphaFormat ) return 6406;\r\n\t\tif ( p === RGBFormat ) return 6407;\r\n\t\tif ( p === RGBAFormat ) return 6408;\r\n\t\tif ( p === LuminanceFormat ) return 6409;\r\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\r\n\t\tif ( p === DepthFormat ) return 6402;\r\n\t\tif ( p === DepthStencilFormat ) return 34041;\r\n\t\tif ( p === RedFormat ) return 6403;\r\n\r\n\t\t// WebGL2 formats.\r\n\r\n\t\tif ( p === RedIntegerFormat ) return 36244;\r\n\t\tif ( p === RGFormat ) return 33319;\r\n\t\tif ( p === RGIntegerFormat ) return 33320;\r\n\t\tif ( p === RGBIntegerFormat ) return 36248;\r\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\r\n\r\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\r\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\r\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\r\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\r\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\r\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\r\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\r\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_BPTC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === UnsignedInt248Type ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 34042;\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { convert: convert };\r\n\r\n}\r\n\r\nfunction ArrayCamera( array ) {\r\n\r\n\tPerspectiveCamera.call( this );\r\n\r\n\tthis.cameras = array || [];\r\n\r\n}\r\n\r\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\r\n\r\n\tconstructor: ArrayCamera,\r\n\r\n\tisArrayCamera: true\r\n\r\n} );\r\n\r\nfunction Group() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n}\r\n\r\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Group,\r\n\r\n\tisGroup: true\r\n\r\n} );\r\n\r\nfunction WebXRController() {\r\n\r\n\tthis._targetRay = null;\r\n\tthis._grip = null;\r\n\tthis._hand = null;\r\n\r\n}\r\n\r\nObject.assign( WebXRController.prototype, {\r\n\r\n\tconstructor: WebXRController,\r\n\r\n\tgetHandSpace: function () {\r\n\r\n\t\tif ( this._hand === null ) {\r\n\r\n\t\t\tthis._hand = new Group();\r\n\t\t\tthis._hand.matrixAutoUpdate = false;\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t\tthis._hand.joints = [];\r\n\t\t\tthis._hand.inputState = { pinching: false };\r\n\r\n\t\t\tif ( window.XRHand ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\r\n\t\t\t\t\tlet joint = new Group();\r\n\t\t\t\t\tjoint.matrixAutoUpdate = false;\r\n\t\t\t\t\tjoint.visible = false;\r\n\t\t\t\t\tthis._hand.joints.push( joint );\r\n\t\t\t\t\t// ??\r\n\t\t\t\t\tthis._hand.add( joint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this._hand;\r\n\r\n\t},\r\n\r\n\tgetTargetRaySpace: function () {\r\n\r\n\t\tif ( this._targetRay === null ) {\r\n\r\n\t\t\tthis._targetRay = new Group();\r\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._targetRay;\r\n\r\n\t},\r\n\r\n\tgetGripSpace: function () {\r\n\r\n\t\tif ( this._grip === null ) {\r\n\r\n\t\t\tthis._grip = new Group();\r\n\t\t\tthis._grip.matrixAutoUpdate = false;\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._grip;\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function ( inputSource ) {\r\n\r\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function ( inputSource, frame, referenceSpace ) {\r\n\r\n\t\tlet inputPose = null;\r\n\t\tlet gripPose = null;\r\n\t\tlet handPose = null;\r\n\r\n\t\tconst targetRay = this._targetRay;\r\n\t\tconst grip = this._grip;\r\n\t\tconst hand = this._hand;\r\n\r\n\t\tif ( inputSource ) {\r\n\r\n\t\t\tif ( inputSource.hand ) {\r\n\r\n\t\t\t\thandPose = true;\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\tif ( inputSource.hand[ i ] ) {\r\n\r\n\t\t\t\t\t\t// Update the joints groups with the XRJoint poses\r\n\t\t\t\t\t\tlet jointPose = frame.getJointPose( inputSource.hand[ i ], referenceSpace );\r\n\t\t\t\t\t\tconst joint = hand.joints[ i ];\r\n\r\n\t\t\t\t\t\tif ( jointPose !== null ) {\r\n\r\n\t\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\r\n\t\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\r\n\t\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjoint.visible = jointPose !== null;\r\n\r\n\t\t\t\t\t\t// Custom events\r\n\r\n\t\t\t\t\t\t// Check pinch\r\n\t\t\t\t\t\tconst indexTip = hand.joints[ window.XRHand.INDEX_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst thumbTip = hand.joints[ window.XRHand.THUMB_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\r\n\r\n\t\t\t\t\t\tconst distanceToPinch = 0.02;\r\n\t\t\t\t\t\tconst threshold = 0.005;\r\n\r\n\t\t\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = false;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchend\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = true;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchstart\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( inputPose !== null ) {\r\n\r\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\r\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\r\n\r\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( gripPose !== null ) {\r\n\r\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\r\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\ttargetRay.visible = ( inputPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( grip !== null ) {\r\n\r\n\t\t\tgrip.visible = ( gripPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hand !== null ) {\r\n\r\n\t\t\thand.visible = ( handPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebXRManager( renderer, gl ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet session = null;\r\n\r\n\tlet framebufferScaleFactor = 1.0;\r\n\r\n\tlet referenceSpace = null;\r\n\tlet referenceSpaceType = 'local-floor';\r\n\r\n\tlet pose = null;\r\n\r\n\tconst controllers = [];\r\n\tconst inputSourcesMap = new Map();\r\n\r\n\t//\r\n\r\n\tconst cameraL = new PerspectiveCamera();\r\n\tcameraL.layers.enable( 1 );\r\n\tcameraL.viewport = new Vector4();\r\n\r\n\tconst cameraR = new PerspectiveCamera();\r\n\tcameraR.layers.enable( 2 );\r\n\tcameraR.viewport = new Vector4();\r\n\r\n\tconst cameras = [ cameraL, cameraR ];\r\n\r\n\tconst cameraVR = new ArrayCamera();\r\n\tcameraVR.layers.enable( 1 );\r\n\tcameraVR.layers.enable( 2 );\r\n\r\n\tlet _currentDepthNear = null;\r\n\tlet _currentDepthFar = null;\r\n\r\n\t//\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.isPresenting = false;\r\n\r\n\tthis.getController = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getTargetRaySpace();\r\n\r\n\t};\r\n\r\n\tthis.getControllerGrip = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getGripSpace();\r\n\r\n\t};\r\n\r\n\tthis.getHand = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getHandSpace();\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tfunction onSessionEvent( event ) {\r\n\r\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\r\n\r\n\t\tif ( controller ) {\r\n\r\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onSessionEnd() {\r\n\r\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\r\n\r\n\t\t\tcontroller.disconnect( inputSource );\r\n\r\n\t\t} );\r\n\r\n\t\tinputSourcesMap.clear();\r\n\r\n\t\t//\r\n\r\n\t\trenderer.setFramebuffer( null );\r\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\r\n\t\tanimation.stop();\r\n\r\n\t\tscope.isPresenting = false;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\r\n\r\n\t}\r\n\r\n\tfunction onRequestReferenceSpace( value ) {\r\n\r\n\t\treferenceSpace = value;\r\n\r\n\t\tanimation.setContext( session );\r\n\t\tanimation.start();\r\n\r\n\t\tscope.isPresenting = true;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\r\n\r\n\t}\r\n\r\n\tthis.setFramebufferScaleFactor = function ( value ) {\r\n\r\n\t\tframebufferScaleFactor = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setReferenceSpaceType = function ( value ) {\r\n\r\n\t\treferenceSpaceType = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getReferenceSpace = function () {\r\n\r\n\t\treturn referenceSpace;\r\n\r\n\t};\r\n\r\n\tthis.getSession = function () {\r\n\r\n\t\treturn session;\r\n\r\n\t};\r\n\r\n\tthis.setSession = function ( value ) {\r\n\r\n\t\tsession = value;\r\n\r\n\t\tif ( session !== null ) {\r\n\r\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\r\n\r\n\t\t\tconst attributes = gl.getContextAttributes();\r\n\r\n\t\t\tif ( attributes.xrCompatible !== true ) {\r\n\r\n\t\t\t\tgl.makeXRCompatible();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst layerInit = {\r\n\t\t\t\tantialias: attributes.antialias,\r\n\t\t\t\talpha: attributes.alpha,\r\n\t\t\t\tdepth: attributes.depth,\r\n\t\t\t\tstencil: attributes.stencil,\r\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\r\n\t\t\t};\r\n\r\n\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\r\n\r\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\r\n\r\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateInputSources( event ) {\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\t// Assign inputSources to available controllers\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// Notify disconnected\r\n\r\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.removed[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\t\t\t\tinputSourcesMap.delete( inputSource );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Notify connected\r\n\r\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.added[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst cameraLPos = new Vector3();\r\n\tconst cameraRPos = new Vector3();\r\n\r\n\t/**\r\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\r\n\t * the cameras' projection and world matrices have already been set.\r\n\t * And that near and far planes are identical for both cameras.\r\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\r\n\t */\r\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\r\n\r\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\r\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\r\n\r\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\r\n\r\n\t\tconst projL = cameraL.projectionMatrix.elements;\r\n\t\tconst projR = cameraR.projectionMatrix.elements;\r\n\r\n\t\t// VR systems will have identical far and near planes, and\r\n\t\t// most likely identical top and bottom frustum extents.\r\n\t\t// Use the left camera for these values.\r\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\r\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\r\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\r\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\r\n\r\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\r\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\r\n\t\tconst left = near * leftFov;\r\n\t\tconst right = near * rightFov;\r\n\r\n\t\t// Calculate the new camera's position offset from the\r\n\t\t// left camera. xOffset should be roughly half `ipd`.\r\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\r\n\t\tconst xOffset = zOffset * - leftFov;\r\n\r\n\t\t// TODO: Better way to apply this offset?\r\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.translateX( xOffset );\r\n\t\tcamera.translateZ( zOffset );\r\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t// Find the union of the frustum values of the cameras and scale\r\n\t\t// the values so that the near plane's position does not change in world space,\r\n\t\t// although must now be relative to the new union camera.\r\n\t\tconst near2 = near + zOffset;\r\n\t\tconst far2 = far + zOffset;\r\n\t\tconst left2 = left - xOffset;\r\n\t\tconst right2 = right + ( ipd - xOffset );\r\n\t\tconst top2 = topFov * far / far2 * near2;\r\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\r\n\r\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\r\n\r\n\t}\r\n\r\n\tfunction updateCamera( camera, parent ) {\r\n\r\n\t\tif ( parent === null ) {\r\n\r\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\r\n\r\n\t\t}\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t}\r\n\r\n\tthis.getCamera = function ( camera ) {\r\n\r\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\r\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\r\n\r\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\r\n\r\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\r\n\r\n\t\t\tsession.updateRenderState( {\r\n\t\t\t\tdepthNear: cameraVR.near,\r\n\t\t\t\tdepthFar: cameraVR.far\r\n\t\t\t} );\r\n\r\n\t\t\t_currentDepthNear = cameraVR.near;\r\n\t\t\t_currentDepthFar = cameraVR.far;\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = camera.parent;\r\n\t\tconst cameras = cameraVR.cameras;\r\n\r\n\t\tupdateCamera( cameraVR, parent );\r\n\r\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\r\n\r\n\t\t\tupdateCamera( cameras[ i ], parent );\r\n\r\n\t\t}\r\n\r\n\t\t// update camera and its children\r\n\r\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\r\n\r\n\t\tconst children = camera.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( true );\r\n\r\n\t\t}\r\n\r\n\t\t// update projection matrix for proper view frustum culling\r\n\r\n\t\tif ( cameras.length === 2 ) {\r\n\r\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assume single camera setup (AR)\r\n\r\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\treturn cameraVR;\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tpose = frame.getViewerPose( referenceSpace );\r\n\r\n\t\tif ( pose !== null ) {\r\n\r\n\t\t\tconst views = pose.views;\r\n\t\t\tconst baseLayer = session.renderState.baseLayer;\r\n\r\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\r\n\r\n\t\t\tlet cameraVRNeedsUpdate = false;\r\n\r\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\r\n\r\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\r\n\r\n\t\t\t\tcameraVR.cameras.length = 0;\r\n\t\t\t\tcameraVRNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\r\n\r\n\t\t\t\tconst view = views[ i ];\r\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\r\n\r\n\t\t\t\tconst camera = cameras[ i ];\r\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\r\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\r\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\r\n\r\n\t\t\t\tif ( i === 0 ) {\r\n\r\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\r\n\r\n\t\t\t\t\tcameraVR.cameras.push( camera );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tconst controller = controllers[ i ];\r\n\t\t\tconst inputSource = inputSources[ i ];\r\n\r\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\r\n\t};\r\n\r\n\tthis.dispose = function () {};\r\n\r\n}\r\n\r\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\r\n\r\nfunction WebGLMaterials( properties ) {\r\n\r\n\tfunction refreshFogUniforms( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value.copy( fog.color );\r\n\r\n\t\tif ( fog.isFog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog.isFogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshMaterialUniforms( uniforms, material, environment, pixelRatio, height ) {\r\n\r\n\t\tif ( material.isMeshBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshLambertMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsLambert( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshToonMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsToon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshPhongMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsPhong( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshStandardMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material, environment );\r\n\r\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhysical( uniforms, material, environment );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isMeshMatcapMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsMatcap( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDepthMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDepth( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDistanceMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDistance( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshNormalMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsNormal( uniforms, material );\r\n\r\n\t\t} else if ( material.isLineBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsLine( uniforms, material );\r\n\r\n\t\t\tif ( material.isLineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsDash( uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isPointsMaterial ) {\r\n\r\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\r\n\r\n\t\t} else if ( material.isSpriteMaterial ) {\r\n\r\n\t\t\trefreshUniformsSprites( uniforms, material );\r\n\r\n\t\t} else if ( material.isShadowMaterial ) {\r\n\r\n\t\t\tuniforms.color.value.copy( material.color );\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t} else if ( material.isShaderMaterial ) {\r\n\r\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tif ( material.color ) {\r\n\r\n\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.specularMap ) {\r\n\r\n\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\r\n\t\t}\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tif ( envMap ) {\r\n\r\n\t\t\tuniforms.envMap.value = envMap;\r\n\r\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\tvar maxMipLevel = properties.get( envMap ).__maxMipLevel;\r\n\r\n\t\t\tif ( maxMipLevel !== undefined ) {\r\n\r\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities for uv2\r\n\t\t// 1. ao map\r\n\t\t// 2. light map\r\n\r\n\t\tlet uv2ScaleMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.aoMap;\r\n\r\n\t\t} else if ( material.lightMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.lightMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2ScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuv2ScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * pixelRatio;\r\n\t\tuniforms.scale.value = height * 0.5;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsSprites( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.rotation.value = material.rotation;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert( uniforms, material ) {\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value.copy( material.specular );\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsToon( uniforms, material ) {\r\n\r\n\t\tif ( material.gradientMap ) {\r\n\r\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap || environment ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\r\n\r\n\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\r\n\r\n\t\tuniforms.clearcoat.value = material.clearcoat;\r\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\r\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\r\n\r\n\t\tif ( material.clearcoatMap ) {\r\n\r\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatRoughnessMap ) {\r\n\r\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatNormalMap ) {\r\n\r\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\r\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\r\n\r\n\t\t\tif ( material.side === BackSide ) {\r\n\r\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.transmission.value = material.transmission;\r\n\r\n\t\tif ( material.transmissionMap ) {\r\n\r\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsMatcap( uniforms, material ) {\r\n\r\n\t\tif ( material.matcap ) {\r\n\r\n\t\t\tuniforms.matcap.value = material.matcap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDepth( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDistance( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\r\n\t\tuniforms.nearDistance.value = material.nearDistance;\r\n\t\tuniforms.farDistance.value = material.farDistance;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsNormal( uniforms, material ) {\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\trefreshFogUniforms: refreshFogUniforms,\r\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderer( parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\r\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\r\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\r\n\r\n\tlet currentRenderList = null;\r\n\tlet currentRenderState = null;\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\r\n\t// Debug configuration container\r\n\tthis.debug = {\r\n\r\n\t\t/**\r\n\t\t * Enables error checking and reporting when shader programs are being compiled\r\n\t\t * @type {boolean}\r\n\t\t */\r\n\t\tcheckShaderErrors: true\r\n\t};\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// user-defined clipping\r\n\r\n\tthis.clippingPlanes = [];\r\n\tthis.localClippingEnabled = false;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.outputEncoding = LinearEncoding;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = NoToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// internal properties\r\n\r\n\tconst _this = this;\r\n\r\n\tlet _isContextLost = false;\r\n\r\n\t// internal state cache\r\n\r\n\tlet _framebuffer = null;\r\n\r\n\tlet _currentActiveCubeFace = 0;\r\n\tlet _currentActiveMipmapLevel = 0;\r\n\tlet _currentRenderTarget = null;\r\n\tlet _currentFramebuffer = null;\r\n\tlet _currentMaterialId = - 1;\r\n\r\n\tlet _currentCamera = null;\r\n\tlet _currentArrayCamera = null;\r\n\r\n\tconst _currentViewport = new Vector4();\r\n\tconst _currentScissor = new Vector4();\r\n\tlet _currentScissorTest = null;\r\n\r\n\t//\r\n\r\n\tlet _width = _canvas.width;\r\n\tlet _height = _canvas.height;\r\n\r\n\tlet _pixelRatio = 1;\r\n\tlet _opaqueSort = null;\r\n\tlet _transparentSort = null;\r\n\r\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\r\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\r\n\tlet _scissorTest = false;\r\n\r\n\t// frustum\r\n\r\n\tconst _frustum = new Frustum();\r\n\r\n\t// clipping\r\n\r\n\tconst _clipping = new WebGLClipping();\r\n\tlet _clippingEnabled = false;\r\n\tlet _localClippingEnabled = false;\r\n\r\n\t// camera matrices cache\r\n\r\n\tconst _projScreenMatrix = new Matrix4();\r\n\r\n\tconst _vector3 = new Vector3();\r\n\r\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\t// initialize\r\n\r\n\tlet _gl = _context;\r\n\r\n\tfunction getContext( contextNames, contextAttributes ) {\r\n\r\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\r\n\r\n\t\t\tconst contextName = contextNames[ i ];\r\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\r\n\t\t\tif ( context !== null ) return context;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\ttry {\r\n\r\n\t\tconst contextAttributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\r\n\t\t\tpowerPreference: _powerPreference,\r\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\r\n\t\t};\r\n\r\n\t\t// event listeners must be registered before WebGL context is created, see #12753\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\r\n\r\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\r\n\r\n\t\t\t\tcontextNames.shift();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl = getContext( contextNames, contextAttributes );\r\n\r\n\t\t\tif ( _gl === null ) {\r\n\r\n\t\t\t\tif ( getContext( contextNames ) ) {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\r\n\t\tthrow error;\r\n\r\n\t}\r\n\r\n\tlet extensions, capabilities, state, info;\r\n\tlet properties, textures, attributes, geometries, objects;\r\n\tlet programCache, materials, renderLists, renderStates;\r\n\r\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\r\n\r\n\tlet utils, bindingStates;\r\n\r\n\tfunction initGLContext() {\r\n\r\n\t\textensions = new WebGLExtensions( _gl );\r\n\r\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\t\tif ( capabilities.isWebGL2 === false ) {\r\n\r\n\t\t\textensions.get( 'WEBGL_depth_texture' );\r\n\t\t\textensions.get( 'OES_texture_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\r\n\t\t\textensions.get( 'OES_standard_derivatives' );\r\n\t\t\textensions.get( 'OES_element_index_uint' );\r\n\t\t\textensions.get( 'OES_vertex_array_object' );\r\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t}\r\n\r\n\t\textensions.get( 'OES_texture_float_linear' );\r\n\r\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\r\n\r\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t\tinfo = new WebGLInfo( _gl );\r\n\t\tproperties = new WebGLProperties();\r\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\r\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\r\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\r\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\r\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\r\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\r\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities, bindingStates );\r\n\t\tmaterials = new WebGLMaterials( properties );\r\n\t\trenderLists = new WebGLRenderLists( properties );\r\n\t\trenderStates = new WebGLRenderStates();\r\n\r\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\r\n\r\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\r\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\r\n\r\n\t\tinfo.programs = programCache.programs;\r\n\r\n\t\t_this.capabilities = capabilities;\r\n\t\t_this.extensions = extensions;\r\n\t\t_this.properties = properties;\r\n\t\t_this.renderLists = renderLists;\r\n\t\t_this.state = state;\r\n\t\t_this.info = info;\r\n\r\n\t}\r\n\r\n\tinitGLContext();\r\n\r\n\t// xr\r\n\r\n\tconst xr = new WebXRManager( _this, _gl );\r\n\r\n\tthis.xr = xr;\r\n\r\n\t// shadow map\r\n\r\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.loseContext();\r\n\r\n\t};\r\n\r\n\tthis.forceContextRestore = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.restoreContext();\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _width, _height, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width, _height );\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\tif ( xr.isPresenting ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getDrawingBufferSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\r\n\r\n\t};\r\n\r\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_pixelRatio = pixelRatio;\r\n\r\n\t\t_canvas.width = Math.floor( width * pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * pixelRatio );\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getCurrentViewport = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\r\n\r\n\t\t\ttarget = new Vector4();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( _currentViewport );\r\n\r\n\t};\r\n\r\n\tthis.getViewport = function ( target ) {\r\n\r\n\t\treturn target.copy( _viewport );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_viewport.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissor = function ( target ) {\r\n\r\n\t\treturn target.copy( _scissor );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_scissor.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn _scissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\tthis.setOpaqueSort = function ( method ) {\r\n\r\n\t\t_opaqueSort = method;\r\n\r\n\t};\r\n\r\n\tthis.setTransparentSort = function ( method ) {\r\n\r\n\t\t_transparentSort = method;\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn background.getClearColor();\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function () {\r\n\r\n\t\tbackground.setClearColor.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn background.getClearAlpha();\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function () {\r\n\r\n\t\tbackground.setClearAlpha.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tlet bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= 16384;\r\n\t\tif ( depth === undefined || depth ) bits |= 256;\r\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\trenderLists.dispose();\r\n\t\trenderStates.dispose();\r\n\t\tproperties.dispose();\r\n\t\tobjects.dispose();\r\n\t\tbindingStates.dispose();\r\n\r\n\t\txr.dispose();\r\n\r\n\t\tanimation.stop();\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\r\n\r\n\t\t_isContextLost = true;\r\n\r\n\t}\r\n\r\n\tfunction onContextRestore( /* event */ ) {\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\r\n\r\n\t\t_isContextLost = false;\r\n\r\n\t\tinitGLContext();\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tconst material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.remove( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tconst programInfo = properties.get( material ).program;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tfunction renderObjectImmediate( object, program ) {\r\n\r\n\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t_this.renderBufferImmediate( object, program );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tthis.renderBufferImmediate = function ( object, program ) {\r\n\r\n\t\tbindingStates.initAttributes();\r\n\r\n\t\tconst buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\r\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\r\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\r\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\r\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( 4, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\r\n\r\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\r\n\r\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\tstate.setMaterial( material, frontFaceCW );\r\n\r\n\t\t//\r\n\r\n\t\tlet index = geometry.index;\r\n\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tif ( index === null ) {\r\n\r\n\t\t\tif ( position === undefined || position.count === 0 ) return;\r\n\r\n\t\t} else if ( index.count === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet rangeFactor = 1;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\r\n\t\t\trangeFactor = 2;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphTargets || material.morphNormals ) {\r\n\r\n\t\t\tmorphtargets.update( object, geometry, material, program );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.setup( object, material, program, geometry, index );\r\n\r\n\t\tlet attribute;\r\n\t\tlet renderer = bufferRenderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattribute = attributes.get( index );\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( attribute );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\r\n\r\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\r\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\r\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\r\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\tif ( drawCount === 0 ) return;\r\n\r\n\t\t//\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isLine ) {\r\n\r\n\t\t\tlet lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object.isLineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else if ( object.isLineLoop ) {\r\n\r\n\t\t\t\trenderer.setMode( 2 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isPoints ) {\r\n\r\n\t\t\trenderer.setMode( 0 );\r\n\r\n\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\r\n\r\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\r\n\r\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Compile\r\n\r\n\tthis.compile = function ( scene, camera ) {\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tconst compiled = new WeakMap();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tlet material = object.material;\r\n\r\n\t\t\tif ( material ) {\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tlet material2 = material[ i ];\r\n\r\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\r\n\r\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\r\n\t\t\t\t\t\t\tcompiled.set( material2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\r\n\r\n\t\t\t\t\tinitMaterial( material, scene, object );\r\n\t\t\t\t\tcompiled.set( material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time ) {\r\n\r\n\t\tif ( xr.isPresenting ) return;\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\t\txr.setAnimationLoop( callback );\r\n\r\n\t\t( callback === null ) ? animation.stop() : animation.start();\r\n\r\n\t};\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tlet renderTarget, forceClear;\r\n\r\n\t\tif ( arguments[ 2 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\r\n\t\t\trenderTarget = arguments[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( arguments[ 3 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\r\n\t\t\tforceClear = arguments[ 3 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _isContextLost === true ) return;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\tbindingStates.resetDefaultState();\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\r\n\r\n\t\t\tcamera = xr.getCamera( camera );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\r\n\r\n\t\t_localClippingEnabled = this.localClippingEnabled;\r\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n\t\tcurrentRenderList = renderLists.get( scene, camera );\r\n\t\tcurrentRenderList.init();\r\n\r\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\r\n\r\n\t\tcurrentRenderList.finish();\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.beginShadows();\r\n\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tshadowMap.render( shadowsArray, scene, camera );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.endShadows();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.info.autoReset === true ) this.info.reset();\r\n\r\n\t\tif ( renderTarget !== undefined ) {\r\n\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\r\n\r\n\t\t// render scene\r\n\r\n\t\tconst opaqueObjects = currentRenderList.opaque;\r\n\t\tconst transparentObjects = currentRenderList.transparent;\r\n\r\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\r\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( _currentRenderTarget !== null ) {\r\n\r\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\r\n\r\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\r\n\r\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.buffers.depth.setTest( true );\r\n\t\tstate.buffers.depth.setMask( true );\r\n\t\tstate.buffers.color.setMask( true );\r\n\r\n\t\tstate.setPolygonOffset( false );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t\tcurrentRenderList = null;\r\n\t\tcurrentRenderState = null;\r\n\r\n\t};\r\n\r\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible ) {\r\n\r\n\t\t\tif ( object.isGroup ) {\r\n\r\n\t\t\t\tgroupOrder = object.renderOrder;\r\n\r\n\t\t\t} else if ( object.isLOD ) {\r\n\r\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\r\n\r\n\t\t\t} else if ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n\t\t\t\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\t\t\t\t// update skeleton only once in a frame\r\n\r\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\r\n\r\n\t\t\t\t\t\tobject.skeleton.update();\r\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, scene, camera ) {\r\n\r\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\r\n\r\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderList[ i ];\r\n\r\n\t\t\tconst object = renderItem.object;\r\n\t\t\tconst geometry = renderItem.geometry;\r\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\r\n\t\t\tconst group = renderItem.group;\r\n\r\n\t\t\tif ( camera.isArrayCamera ) {\r\n\r\n\t\t\t\t_currentArrayCamera = camera;\r\n\r\n\t\t\t\tconst cameras = camera.cameras;\r\n\r\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst camera2 = cameras[ j ];\r\n\r\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\r\n\r\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\r\n\r\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\r\n\r\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_currentArrayCamera = null;\r\n\r\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\r\n\r\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\tif ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\t\tstate.setMaterial( material );\r\n\r\n\t\t\tbindingStates.reset();\r\n\r\n\t\t\trenderObjectImmediate( object, program );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\r\n\r\n\t\t}\r\n\r\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, scene, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tconst lightsStateVersion = lights.state.version;\r\n\r\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\r\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\r\n\r\n\t\tlet program = materialProperties.program;\r\n\t\tlet programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\r\n\r\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tparameters.uniforms = programCache.getUniforms( material, parameters );\r\n\r\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\r\n\r\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\r\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\r\n\r\n\t\t}\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( ! material.isShaderMaterial &&\r\n\t\t\t! material.isRawShaderMaterial ||\r\n\t\t\tmaterial.clipping === true ) {\r\n\r\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\r\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\r\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tmaterialProperties.fog = scene.fog;\r\n\r\n\t\t// store the light setup it was created for\r\n\r\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\r\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\r\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\r\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\r\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\r\n\t\t\tuniforms.spotLights.value = lights.state.spot;\r\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\r\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\r\n\t\t\tuniforms.pointLights.value = lights.state.point;\r\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\r\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\r\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\r\n\r\n\t\t}\r\n\r\n\t\tconst progUniforms = materialProperties.program.getUniforms(),\r\n\t\t\tuniformsList =\r\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n\t\tmaterialProperties.uniformsList = uniformsList;\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, scene, material, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\ttextures.resetTextureUnits();\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\r\n\t\tif ( _clippingEnabled === true ) {\r\n\r\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\r\n\r\n\t\t\t\tconst useCache =\r\n\t\t\t\t\tcamera === _currentCamera &&\r\n\t\t\t\t\tmaterial.id === _currentMaterialId;\r\n\r\n\t\t\t\t// we might want to call this function with some ClippingGroup\r\n\t\t\t\t// object instead of the material, once it becomes feasible\r\n\t\t\t\t// (#8465, #8379)\r\n\t\t\t\t_clipping.setState(\r\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\r\n\t\t\t\t\tcamera, materialProperties, useCache );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.version === materialProperties.__version ) {\r\n\r\n\t\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.environment !== environment ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\r\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\r\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tinitMaterial( material, scene, object );\r\n\t\t\tmaterialProperties.__version = material.version;\r\n\r\n\t\t}\r\n\r\n\t\tlet refreshProgram = false;\r\n\t\tlet refreshMaterial = false;\r\n\t\tlet refreshLights = false;\r\n\r\n\t\tconst program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( state.useProgram( program.program ) ) {\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\r\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _currentCamera !== camera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material.isShaderMaterial ||\r\n\t\t\t\tmaterial.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.envMap ) {\r\n\r\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n\t\t\t\tif ( uCamPos !== undefined ) {\r\n\r\n\t\t\t\t\tuCamPos.setValue( _gl,\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ||\r\n\t\t\t\tmaterial.isShadowMaterial ||\r\n\t\t\t\tmaterial.skinning ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n\t\t\tconst skeleton = object.skeleton;\r\n\r\n\t\t\tif ( skeleton ) {\r\n\r\n\t\t\t\tconst bones = skeleton.bones;\r\n\r\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\r\n\r\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\r\n\r\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\r\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\r\n\t\t\t\t\t\tsize = Math.max( size, 4 );\r\n\r\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\r\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\r\n\r\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\r\n\r\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\r\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\r\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\r\n\r\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\r\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\r\n\r\n\t\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, environment, _pixelRatio, _height );\r\n\r\n\t\t\t// RectAreaLight Texture\r\n\t\t\t// TODO (mrdoob): Find a nicer implementation\r\n\r\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\r\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\t\t\tmaterial.uniformsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isSpriteMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\r\n\r\n\t\t}\r\n\r\n\t\t// common matrices\r\n\r\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\t\tuniforms.lightProbe.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.pointLightShadows.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.spotLightShadows.needsUpdate = value;\r\n\t\tuniforms.rectAreaLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\tfunction materialNeedsLights( material ) {\r\n\r\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\r\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\r\n\t\t\t( material.isShaderMaterial && material.lights === true );\r\n\r\n\t}\r\n\r\n\t//\r\n\tthis.setFramebuffer = function ( value ) {\r\n\r\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\r\n\r\n\t\t_framebuffer = value;\r\n\r\n\t};\r\n\r\n\tthis.getActiveCubeFace = function () {\r\n\r\n\t\treturn _currentActiveCubeFace;\r\n\r\n\t};\r\n\r\n\tthis.getActiveMipmapLevel = function () {\r\n\r\n\t\treturn _currentActiveMipmapLevel;\r\n\r\n\t};\r\n\r\n\tthis.getRenderTarget = function () {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t};\r\n\r\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\t\t_currentActiveCubeFace = activeCubeFace;\r\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\ttextures.setupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = _framebuffer;\r\n\t\tlet isCube = false;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\r\n\t\t\t\tisCube = true;\r\n\r\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\r\n\r\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\r\n\r\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tlet restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst texture = renderTarget.texture;\r\n\t\t\t\tconst textureFormat = texture.format;\r\n\t\t\t\tconst textureType = texture.type;\r\n\r\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\r\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\r\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\r\n\r\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst levelScale = Math.pow( 2, - level );\r\n\t\tconst width = Math.floor( texture.image.width * levelScale );\r\n\t\tconst height = Math.floor( texture.image.height * levelScale );\r\n\t\tconst glFormat = utils.convert( texture.format );\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst width = srcTexture.image.width;\r\n\t\tconst height = srcTexture.image.height;\r\n\t\tconst glFormat = utils.convert( dstTexture.format );\r\n\t\tconst glType = utils.convert( dstTexture.type );\r\n\r\n\t\ttextures.setTexture2D( dstTexture, 0 );\r\n\r\n\t\t// As another texture upload may have changed pixelStorei\r\n\t\t// parameters, make sure they are correct for the dstTexture\r\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\r\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\r\n\r\n\t\tif ( srcTexture.isDataTexture ) {\r\n\r\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( srcTexture.isCompressedTexture ) {\r\n\r\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Generate mipmaps only when copying level 0\r\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.initTexture = function ( texture ) {\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGL1Renderer( parameters ) {\r\n\r\n\tWebGLRenderer.call( this, parameters );\r\n\r\n}\r\n\r\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\r\n\r\n\tconstructor: WebGL1Renderer,\r\n\r\n\tisWebGL1Renderer: true\r\n\r\n} );\r\n\r\nfunction FogExp2( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n}\r\n\r\nObject.assign( FogExp2.prototype, {\r\n\r\n\tisFogExp2: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new FogExp2( this.color, this.density );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'FogExp2',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tdensity: this.density\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Fog( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n}\r\n\r\nObject.assign( Fog.prototype, {\r\n\r\n\tisFog: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Fog( this.color, this.near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'Fog',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tnear: this.near,\r\n\t\t\tfar: this.far\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InterleavedBuffer( array, stride ) {\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\tthis.count = array !== undefined ? array.length / stride : 0;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n}\r\n\r\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\r\n\tisInterleavedBuffer: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.count = source.count;\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\r\n\r\n\t\t}\r\n\r\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\r\n\r\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\r\n\t\tib.setUsage( this.usage );\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\t// generate UUID for array buffer if necessary\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\treturn {\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tbuffer: this.array.buffer._uuid,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tstride: this.stride\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$6 = new Vector3();\r\n\r\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n\tthis.normalized = normalized === true;\r\n\r\n}\r\n\r\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\r\n\r\n\tcount: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.count;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tarray: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.array;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tneedsUpdate: {\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.data.needsUpdate = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBufferAttribute.prototype, {\r\n\r\n\tisInterleavedBufferAttribute: true,\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$6.x = this.getX( i );\r\n\t\t\t_vector$6.y = this.getY( i );\r\n\t\t\t_vector$6.z = this.getZ( i );\r\n\r\n\t\t\t_vector$6.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\r\n\r\n\t\t\treturn {\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\ttype: this.array.constructor.name,\r\n\t\t\t\tarray: array,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// save as true interlaved attribtue\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisInterleavedBufferAttribute: true,\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\tdata: this.data.uuid,\r\n\t\t\t\toffset: this.offset,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *  rotation: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */\r\n\r\nfunction SpriteMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nSpriteMaterial.prototype = Object.create( Material.prototype );\r\nSpriteMaterial.prototype.constructor = SpriteMaterial;\r\nSpriteMaterial.prototype.isSpriteMaterial = true;\r\n\r\nSpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nlet _geometry;\r\n\r\nconst _intersectPoint = new Vector3();\r\nconst _worldScale = new Vector3();\r\nconst _mvPosition = new Vector3();\r\n\r\nconst _alignedPosition = new Vector2();\r\nconst _rotatedPosition = new Vector2();\r\nconst _viewWorldMatrix = new Matrix4();\r\n\r\nconst _vA$1 = new Vector3();\r\nconst _vB$1 = new Vector3();\r\nconst _vC$1 = new Vector3();\r\n\r\nconst _uvA$1 = new Vector2();\r\nconst _uvB$1 = new Vector2();\r\nconst _uvC$1 = new Vector2();\r\n\r\nfunction Sprite( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Sprite';\r\n\r\n\tif ( _geometry === undefined ) {\r\n\r\n\t\t_geometry = new BufferGeometry();\r\n\r\n\t\tconst float32Array = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\r\n\t\t\t0.5, - 0.5, 0, 1, 0,\r\n\t\t\t0.5, 0.5, 0, 1, 1,\r\n\t\t\t- 0.5, 0.5, 0, 0, 1\r\n\t\t] );\r\n\r\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\r\n\r\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\r\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\r\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\r\n\r\n\t}\r\n\r\n\tthis.geometry = _geometry;\r\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\r\n\r\n\tthis.center = new Vector2( 0.5, 0.5 );\r\n\r\n}\r\n\r\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Sprite,\r\n\r\n\tisSprite: true,\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tif ( raycaster.camera === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\r\n\r\n\t\t}\r\n\r\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\r\n\r\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\r\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\r\n\r\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\r\n\r\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\r\n\r\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst rotation = this.material.rotation;\r\n\t\tlet sin, cos;\r\n\r\n\t\tif ( rotation !== 0 ) {\r\n\r\n\t\t\tcos = Math.cos( rotation );\r\n\t\t\tsin = Math.sin( rotation );\r\n\r\n\t\t}\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\r\n\t\t_uvA$1.set( 0, 0 );\r\n\t\t_uvB$1.set( 1, 0 );\r\n\t\t_uvC$1.set( 1, 1 );\r\n\r\n\t\t// check first triangle\r\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\r\n\r\n\t\tif ( intersect === null ) {\r\n\r\n\t\t\t// check second triangle\r\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\t\t_uvB$1.set( 0, 1 );\r\n\r\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\r\n\t\t\tif ( intersect === null ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: _intersectPoint.clone(),\r\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\r\n\r\n\t\tthis.material = source.material;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\r\n\r\n\t// compute position in camera space\r\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\r\n\r\n\t// to check if rotation is not zero\r\n\tif ( sin !== undefined ) {\r\n\r\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\r\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\r\n\r\n\t} else {\r\n\r\n\t\t_rotatedPosition.copy( _alignedPosition );\r\n\r\n\t}\r\n\r\n\r\n\tvertexPosition.copy( mvPosition );\r\n\tvertexPosition.x += _rotatedPosition.x;\r\n\tvertexPosition.y += _rotatedPosition.y;\r\n\r\n\t// transform to world space\r\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\r\n\r\n}\r\n\r\nconst _v1$4 = new Vector3();\r\nconst _v2$2 = new Vector3();\r\n\r\nfunction LOD() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis._currentLevel = 0;\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.autoUpdate = true;\r\n\r\n}\r\n\r\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: LOD,\r\n\r\n\tisLOD: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\t\tconst levels = source.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddLevel: function ( object, distance ) {\r\n\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\r\n\t\tdistance = Math.abs( distance );\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tlet l;\r\n\r\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCurrentLevel: function () {\r\n\r\n\t\treturn this._currentLevel;\r\n\r\n\t},\r\n\r\n\tgetObjectForDistance: function ( distance ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn levels[ i - 1 ].object;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\r\n\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._currentLevel = i - 1;\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\r\n\r\n\t\tdata.object.levels = [];\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SkinnedMesh( geometry, material ) {\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t}\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = 'attached';\r\n\tthis.bindMatrix = new Matrix4();\r\n\tthis.bindMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: SkinnedMesh,\r\n\r\n\tisSkinnedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.bindMode = source.bindMode;\r\n\t\tthis.bindMatrix.copy( source.bindMatrix );\r\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\r\n\r\n\t\tthis.skeleton = source.skeleton;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbind: function ( skeleton, bindMatrix ) {\r\n\r\n\t\tthis.skeleton = skeleton;\r\n\r\n\t\tif ( bindMatrix === undefined ) {\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t\t}\r\n\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tthis.skeleton.pose();\r\n\r\n\t},\r\n\r\n\tnormalizeSkinWeights: function () {\r\n\r\n\t\tconst vector = new Vector4();\r\n\r\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\r\n\r\n\t\t\tvector.x = skinWeight.getX( i );\r\n\t\t\tvector.y = skinWeight.getY( i );\r\n\t\t\tvector.z = skinWeight.getZ( i );\r\n\t\t\tvector.w = skinWeight.getW( i );\r\n\r\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tvector.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.bindMode === 'attached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t\t} else if ( this.bindMode === 'detached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tboneTransform: ( function () {\r\n\r\n\t\tconst basePosition = new Vector3();\r\n\r\n\t\tconst skinIndex = new Vector4();\r\n\t\tconst skinWeight = new Vector4();\r\n\r\n\t\tconst vector = new Vector3();\r\n\t\tconst matrix = new Matrix4();\r\n\r\n\t\treturn function ( index, target ) {\r\n\r\n\t\t\tconst skeleton = this.skeleton;\r\n\t\t\tconst geometry = this.geometry;\r\n\r\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\r\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\r\n\r\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\r\n\r\n\t\t\ttarget.set( 0, 0, 0 );\r\n\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst weight = skinWeight.getComponent( i );\r\n\r\n\t\t\t\tif ( weight !== 0 ) {\r\n\r\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\r\n\r\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\r\n\r\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\r\n\r\n\t\t};\r\n\r\n\t}() )\r\n\r\n} );\r\n\r\nconst _offsetMatrix = new Matrix4();\r\nconst _identityMatrix = new Matrix4();\r\n\r\nfunction Skeleton( bones, boneInverses ) {\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\r\n\r\n\tthis.frame = - 1;\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Skeleton.prototype, {\r\n\r\n\tcalculateInverses: function () {\r\n\r\n\t\tthis.boneInverses = [];\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst inverse = new Matrix4();\r\n\r\n\t\t\tif ( this.bones[ i ] ) {\r\n\r\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\t// recover the bind-time world matrices\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst bones = this.bones;\r\n\t\tconst boneInverses = this.boneInverses;\r\n\t\tconst boneMatrices = this.boneMatrices;\r\n\t\tconst boneTexture = this.boneTexture;\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\r\n\r\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\r\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( boneTexture !== undefined ) {\r\n\r\n\t\t\tboneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Skeleton( this.bones, this.boneInverses );\r\n\r\n\t},\r\n\r\n\tgetBoneByName: function ( name ) {\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone.name === name ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tdispose: function ( ) {\r\n\r\n\t\tif ( this.boneTexture ) {\r\n\r\n\t\t\tthis.boneTexture.dispose();\r\n\r\n\t\t\tthis.boneTexture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Bone() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n}\r\n\r\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Bone,\r\n\r\n\tisBone: true\r\n\r\n} );\r\n\r\nconst _instanceLocalMatrix = new Matrix4();\r\nconst _instanceWorldMatrix = new Matrix4();\r\n\r\nconst _instanceIntersects = [];\r\n\r\nconst _mesh = new Mesh();\r\n\r\nfunction InstancedMesh( geometry, material, count ) {\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\r\n\r\n\tthis.count = count;\r\n\r\n\tthis.frustumCulled = false;\r\n\r\n}\r\n\r\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: InstancedMesh,\r\n\r\n\tisInstancedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\r\n\t\tthis.count = source.count;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst raycastTimes = this.count;\r\n\r\n\t\t_mesh.geometry = this.geometry;\r\n\t\t_mesh.material = this.material;\r\n\r\n\t\tif ( _mesh.material === undefined ) return;\r\n\r\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\r\n\r\n\t\t\t// calculate the world matrix for each instance\r\n\r\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\r\n\r\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\r\n\r\n\t\t\t// the mesh represents this single instance\r\n\r\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\r\n\r\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\r\n\r\n\t\t\t// process the result of raycast\r\n\r\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\r\n\t\t\t\tintersect.instanceId = instanceId;\r\n\t\t\t\tintersect.object = this;\r\n\t\t\t\tintersects.push( intersect );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_instanceIntersects.length = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */\r\n\r\nfunction LineBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineBasicMaterial.prototype = Object.create( Material.prototype );\r\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\r\n\r\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\r\n\r\nLineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _start = new Vector3();\r\nconst _end = new Vector3();\r\nconst _inverseMatrix$1 = new Matrix4();\r\nconst _ray$1 = new Ray();\r\nconst _sphere$2 = new Sphere();\r\n\r\nfunction Line( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\r\n\r\n\t}\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Line,\r\n\r\n\tisLine: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [ 0 ];\r\n\r\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\r\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tlineDistances[ 0 ] = 0;\r\n\r\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Line.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$2.copy( geometry.boundingSphere );\r\n\t\t_sphere$2.applyMatrix4( matrixWorld );\r\n\t\t_sphere$2.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\r\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tconst vStart = new Vector3();\r\n\t\tconst vEnd = new Vector3();\r\n\t\tconst interSegment = new Vector3();\r\n\t\tconst interRay = new Vector3();\r\n\t\tconst step = ( this && this.isLineSegments ) ? 2 : 1;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\t\t\t\t\tconst b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _start$1 = new Vector3();\r\nconst _end$1 = new Vector3();\r\n\r\nfunction LineSegments( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n}\r\n\r\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineSegments,\r\n\r\n\tisLineSegments: true,\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\r\n\r\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\r\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\r\n\r\n\t\t\t\t_start$1.copy( vertices[ i ] );\r\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\r\n\r\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LineLoop( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineLoop';\r\n\r\n}\r\n\r\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineLoop,\r\n\r\n\tisLineLoop: true,\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n *\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction PointsMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nPointsMaterial.prototype = Object.create( Material.prototype );\r\nPointsMaterial.prototype.constructor = PointsMaterial;\r\n\r\nPointsMaterial.prototype.isPointsMaterial = true;\r\n\r\nPointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _inverseMatrix$2 = new Matrix4();\r\nconst _ray$2 = new Ray();\r\nconst _sphere$3 = new Sphere();\r\nconst _position$1 = new Vector3();\r\n\r\nfunction Points( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new PointsMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Points,\r\n\r\n\tisPoints: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$3.copy( geometry.boundingSphere );\r\n\t\t_sphere$3.applyMatrix4( matrixWorld );\r\n\t\t_sphere$3.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\r\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\r\n\r\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\r\n\r\n\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\tconst intersectPoint = new Vector3();\r\n\r\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\r\n\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\tpoint: intersectPoint,\r\n\t\t\tindex: index,\r\n\t\t\tface: null,\r\n\t\t\tobject: object\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.format = format !== undefined ? format : RGBFormat;\r\n\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tconst scope = this;\r\n\r\n\tfunction updateVideo() {\r\n\r\n\t\tscope.needsUpdate = true;\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n\tif ( 'requestVideoFrameCallback' in video ) {\r\n\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n}\r\n\r\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\r\n\r\n\tconstructor: VideoTexture,\r\n\r\n\tisVideoTexture: true,\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst video = this.image;\r\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\r\n\r\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n}\r\n\r\nCompressedTexture.prototype = Object.create( Texture.prototype );\r\nCompressedTexture.prototype.constructor = CompressedTexture;\r\n\r\nCompressedTexture.prototype.isCompressedTexture = true;\r\n\r\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nCanvasTexture.prototype = Object.create( Texture.prototype );\r\nCanvasTexture.prototype.constructor = CanvasTexture;\r\nCanvasTexture.prototype.isCanvasTexture = true;\r\n\r\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\r\n\r\n\tformat = format !== undefined ? format : DepthFormat;\r\n\r\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\r\n\r\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\r\n\r\n\t}\r\n\r\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\r\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps\t= false;\r\n\r\n}\r\n\r\nDepthTexture.prototype = Object.create( Texture.prototype );\r\nDepthTexture.prototype.constructor = DepthTexture;\r\nDepthTexture.prototype.isDepthTexture = true;\r\n\r\nfunction WireframeGeometry( geometry ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'WireframeGeometry';\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// different logic for Geometry and BufferGeometry\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t// create a data structure that contains all edges without duplicates\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tconst edge1 = face[ keys[ j ] ];\r\n\t\t\t\tconst edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// generate vertices\r\n\r\n\t\tfor ( const key in edges ) {\r\n\r\n\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\tlet vertex = geometry.vertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = geometry.vertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t} else if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n\t\tlet vertex = new Vector3();\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst indices = geometry.index;\r\n\t\t\tlet groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// create a data structure that contains all eges without duplicates\r\n\r\n\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tconst group = groups[ o ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\r\n\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\r\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// generate vertices\r\n\r\n\t\t\tfor ( const key in edges ) {\r\n\r\n\t\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\r\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\r\n\r\n\t\t\t\t\tconst index1 = 3 * i + j;\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nWireframeGeometry.prototype.constructor = WireframeGeometry;\r\n\r\n/**\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\r\n */\r\n\r\n// ParametricGeometry\r\n\r\nfunction ParametricGeometry( func, slices, stacks ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nParametricGeometry.prototype = Object.create( Geometry.prototype );\r\nParametricGeometry.prototype.constructor = ParametricGeometry;\r\n\r\n// ParametricBufferGeometry\r\n\r\nfunction ParametricBufferGeometry( func, slices, stacks ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\tconst EPS = 0.00001;\r\n\r\n\tconst normal = new Vector3();\r\n\r\n\tconst p0 = new Vector3(), p1 = new Vector3();\r\n\tconst pu = new Vector3(), pv = new Vector3();\r\n\r\n\tif ( func.length < 3 ) {\r\n\r\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\r\n\r\n\t}\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tconst sliceCount = slices + 1;\r\n\r\n\tfor ( let i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tconst v = i / stacks;\r\n\r\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tconst u = j / slices;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tfunc( u, v, p0 );\r\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\t// approximate tangent vectors via finite differences\r\n\r\n\t\t\tif ( u - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u - EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u + EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( v - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u, v - EPS, p1 );\r\n\t\t\t\tpv.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u, v + EPS, p1 );\r\n\t\t\t\tpv.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// cross product of tangent vectors returns surface normal\r\n\r\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u, v );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\tconst a = i * sliceCount + j;\r\n\t\t\tconst b = i * sliceCount + j + 1;\r\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\t// faces one and two\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\r\n\r\n// PolyhedronGeometry\r\n\r\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\r\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\r\n\r\n// PolyhedronBufferGeometry\r\n\r\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\t// default buffer data\r\n\r\n\tconst vertexBuffer = [];\r\n\tconst uvBuffer = [];\r\n\r\n\t// the subdivision creates the vertex buffer data\r\n\r\n\tsubdivide( detail );\r\n\r\n\t// all vertices should lie on a conceptual sphere with a given radius\r\n\r\n\tapplyRadius( radius );\r\n\r\n\t// finally, create the uv data\r\n\r\n\tgenerateUVs();\r\n\r\n\t// build non-indexed geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\r\n\r\n\tif ( detail === 0 ) {\r\n\r\n\t\tthis.computeVertexNormals(); // flat normals\r\n\r\n\t} else {\r\n\r\n\t\tthis.normalizeNormals(); // smooth normals\r\n\r\n\t}\r\n\r\n\t// helper functions\r\n\r\n\tfunction subdivide( detail ) {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\t// iterate over all faces and apply a subdivison with the given detail value\r\n\r\n\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t// get the vertices of the face\r\n\r\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\r\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\r\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\r\n\r\n\t\t\t// perform subdivision\r\n\r\n\t\t\tsubdivideFace( a, b, c, detail );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction subdivideFace( a, b, c, detail ) {\r\n\r\n\t\tconst cols = Math.pow( 2, detail );\r\n\r\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\r\n\r\n\t\tconst v = [];\r\n\r\n\t\t// construct all of the vertices for this subdivision\r\n\r\n\t\tfor ( let i = 0; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tconst aj = a.clone().lerp( c, i / cols );\r\n\t\t\tconst bj = b.clone().lerp( c, i / cols );\r\n\r\n\t\t\tconst rows = cols - i;\r\n\r\n\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// construct all of the faces\r\n\r\n\t\tfor ( let i = 0; i < cols; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tconst k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction applyRadius( radius ) {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\t// iterate over the entire buffer and apply the radius to each vertex\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tvertex.normalize().multiplyScalar( radius );\r\n\r\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\r\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\r\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\r\n\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\r\n\t\t\tuvBuffer.push( u, 1 - v );\r\n\r\n\t\t}\r\n\r\n\t\tcorrectUVs();\r\n\r\n\t\tcorrectSeam();\r\n\r\n\t}\r\n\r\n\tfunction correctSeam() {\r\n\r\n\t\t// handle case when face straddles the seam, see #3269\r\n\r\n\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\r\n\r\n\t\t\t// uv data of a single face\r\n\r\n\t\t\tconst x0 = uvBuffer[ i + 0 ];\r\n\t\t\tconst x1 = uvBuffer[ i + 2 ];\r\n\t\t\tconst x2 = uvBuffer[ i + 4 ];\r\n\r\n\t\t\tconst max = Math.max( x0, x1, x2 );\r\n\t\t\tconst min = Math.min( x0, x1, x2 );\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\r\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\r\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction pushVertex( vertex ) {\r\n\r\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t}\r\n\r\n\tfunction getVertexByIndex( index, vertex ) {\r\n\r\n\t\tconst stride = index * 3;\r\n\r\n\t\tvertex.x = vertices[ stride + 0 ];\r\n\t\tvertex.y = vertices[ stride + 1 ];\r\n\t\tvertex.z = vertices[ stride + 2 ];\r\n\r\n\t}\r\n\r\n\tfunction correctUVs() {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\tconst centroid = new Vector3();\r\n\r\n\t\tconst uvA = new Vector2();\r\n\t\tconst uvB = new Vector2();\r\n\t\tconst uvC = new Vector2();\r\n\r\n\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\r\n\r\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\r\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\r\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\r\n\r\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\r\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\r\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\r\n\r\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\r\n\r\n\t\t\tconst azi = azimuth( centroid );\r\n\r\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\r\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\r\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction correctUV( uv, stride, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\r\n\r\n// TetrahedronGeometry\r\n\r\nfunction TetrahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\r\n\r\n// TetrahedronBufferGeometry\r\n\r\nfunction TetrahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\r\n\r\n// OctahedronGeometry\r\n\r\nfunction OctahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\r\n\r\n// OctahedronBufferGeometry\r\n\r\nfunction OctahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\r\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\r\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\r\n\t\t1, 3, 4,\t1, 4, 2\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\r\n\r\n// IcosahedronGeometry\r\n\r\nfunction IcosahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\r\n\r\n// IcosahedronBufferGeometry\r\n\r\nfunction IcosahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tconst vertices = [\r\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\r\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\r\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\r\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\r\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\r\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\r\n\r\n// DodecahedronGeometry\r\n\r\nfunction DodecahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\r\n\r\n// DodecahedronBufferGeometry\r\n\r\nfunction DodecahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tconst r = 1 / t;\r\n\r\n\tconst vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\r\n\t\t- 1, 1, - 1, - 1, 1, 1,\r\n\t\t1, - 1, - 1, 1, - 1, 1,\r\n\t\t1, 1, - 1, 1, 1, 1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t, 0, - r, t,\r\n\t\t 0, r, - t, 0, r, t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t, 0, - r, t, 0,\r\n\t\t r, - t, 0, r, t, 0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t, 0, - r, t, 0, - r,\r\n\t\t- t, 0, r, t, 0, r\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\r\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\r\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\r\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\r\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\r\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\r\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\r\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\r\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\r\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\r\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\r\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\r\n\r\n// TubeGeometry\r\n\r\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\r\n\r\n\tconst bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = bufferGeometry.tangents;\r\n\tthis.normals = bufferGeometry.normals;\r\n\tthis.binormals = bufferGeometry.binormals;\r\n\r\n\t// create geometry\r\n\r\n\tthis.fromBufferGeometry( bufferGeometry );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTubeGeometry.prototype = Object.create( Geometry.prototype );\r\nTubeGeometry.prototype.constructor = TubeGeometry;\r\n\r\n// TubeBufferGeometry\r\n\r\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TubeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\ttubularSegments = tubularSegments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\r\n\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = frames.tangents;\r\n\tthis.normals = frames.normals;\r\n\tthis.binormals = frames.binormals;\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\tconst uv = new Vector2();\r\n\tlet P = new Vector3();\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\tconst indices = [];\r\n\r\n\t// create buffer data\r\n\r\n\tgenerateBufferData();\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// functions\r\n\r\n\tfunction generateBufferData() {\r\n\r\n\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\r\n\r\n\t\t\tgenerateSegment( i );\r\n\r\n\t\t}\r\n\r\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\r\n\t\t// at the regular position on the given path\r\n\t\t//\r\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n\t\t// uvs are generated in a separate function.\r\n\t\t// this makes it easy compute correct values for closed geometries\r\n\r\n\t\tgenerateUVs();\r\n\r\n\t\t// finally create faces\r\n\r\n\t\tgenerateIndices();\r\n\r\n\t}\r\n\r\n\tfunction generateSegment( i ) {\r\n\r\n\t\t// we use getPointAt to sample evenly distributed points from the given path\r\n\r\n\t\tP = path.getPointAt( i / tubularSegments, P );\r\n\r\n\t\t// retrieve corresponding normal and binormal\r\n\r\n\t\tconst N = frames.normals[ i ];\r\n\t\tconst B = frames.binormals[ i ];\r\n\r\n\t\t// generate normals and vertices for the current segment\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tconst sin = Math.sin( v );\r\n\t\t\tconst cos = - Math.cos( v );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\r\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\r\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\r\n\t\t\tnormal.normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = P.x + radius * normal.x;\r\n\t\t\tvertex.y = P.y + radius * normal.y;\r\n\t\t\tvertex.z = P.z + radius * normal.z;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateIndices() {\r\n\r\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\t\tuv.x = i / tubularSegments;\r\n\t\t\t\tuv.y = j / radialSegments;\r\n\r\n\t\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\r\n\r\nTubeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tdata.path = this.parameters.path.toJSON();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// TorusKnotGeometry\r\n\r\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\r\n\r\n// TorusKnotBufferGeometry\r\n\r\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\tconst P1 = new Vector3();\r\n\tconst P2 = new Vector3();\r\n\r\n\tconst B = new Vector3();\r\n\tconst T = new Vector3();\r\n\tconst N = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tconst u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\t\t\tconst cx = - tube * Math.cos( v );\r\n\t\t\tconst cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tconst cu = Math.cos( u );\r\n\t\tconst su = Math.sin( u );\r\n\t\tconst quOverP = q / p * u;\r\n\t\tconst cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n}\r\n\r\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\r\n\r\n// TorusGeometry\r\n\r\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusGeometry.prototype.constructor = TorusGeometry;\r\n\r\n// TorusBufferGeometry\r\n\r\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst center = new Vector3();\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tconst u = i / tubularSegments * arc;\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\r\n\r\n/**\r\n * Port from https://github.com/mapbox/earcut (v2.2.2)\r\n */\r\n\r\nconst Earcut = {\r\n\r\n\ttriangulate: function ( data, holeIndices, dim ) {\r\n\r\n\t\tdim = dim || 2;\r\n\r\n\t\tlet hasHoles = holeIndices && holeIndices.length,\r\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\r\n\t\t\ttriangles = [];\r\n\r\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\r\n\r\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\t\tif ( data.length > 80 * dim ) {\r\n\r\n\t\t\tminX = maxX = data[ 0 ];\r\n\t\t\tminY = maxY = data[ 1 ];\r\n\r\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\r\n\r\n\t\t\t\tx = data[ i ];\r\n\t\t\t\ty = data[ i + 1 ];\r\n\t\t\t\tif ( x < minX ) minX = x;\r\n\t\t\t\tif ( y < minY ) minY = y;\r\n\t\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\t\tif ( y > maxY ) maxY = y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\r\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n\t\t}\r\n\r\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n\t\treturn triangles;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// create a circular doubly linked list from polygon points in the specified winding order\r\nfunction linkedList( data, start, end, dim, clockwise ) {\r\n\r\n\tlet i, last;\r\n\r\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t}\r\n\r\n\tif ( last && equals( last, last.next ) ) {\r\n\r\n\t\tremoveNode( last );\r\n\t\tlast = last.next;\r\n\r\n\t}\r\n\r\n\treturn last;\r\n\r\n}\r\n\r\n// eliminate colinear or duplicate points\r\nfunction filterPoints( start, end ) {\r\n\r\n\tif ( ! start ) return start;\r\n\tif ( ! end ) end = start;\r\n\r\n\tlet p = start,\r\n\t\tagain;\r\n\tdo {\r\n\r\n\t\tagain = false;\r\n\r\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n\t\t\tremoveNode( p );\r\n\t\t\tp = end = p.prev;\r\n\t\t\tif ( p === p.next ) break;\r\n\t\t\tagain = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tp = p.next;\r\n\r\n\t\t}\r\n\r\n\t} while ( again || p !== end );\r\n\r\n\treturn end;\r\n\r\n}\r\n\r\n// main ear slicing loop which triangulates a polygon (given as a linked list)\r\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n\tif ( ! ear ) return;\r\n\r\n\t// interlink polygon nodes in z-order\r\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n\tlet stop = ear,\r\n\t\tprev, next;\r\n\r\n\t// iterate through ears, slicing them one by one\r\n\twhile ( ear.prev !== ear.next ) {\r\n\r\n\t\tprev = ear.prev;\r\n\t\tnext = ear.next;\r\n\r\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n\t\t\t// cut off the triangle\r\n\t\t\ttriangles.push( prev.i / dim );\r\n\t\t\ttriangles.push( ear.i / dim );\r\n\t\t\ttriangles.push( next.i / dim );\r\n\r\n\t\t\tremoveNode( ear );\r\n\r\n\t\t\t// skipping the next vertex leads to less sliver triangles\r\n\t\t\tear = next.next;\r\n\t\t\tstop = next.next;\r\n\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tear = next;\r\n\r\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\r\n\t\tif ( ear === stop ) {\r\n\r\n\t\t\t// try filtering points and slicing again\r\n\t\t\tif ( ! pass ) {\r\n\r\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\r\n\r\n\t\t\t} else if ( pass === 1 ) {\r\n\r\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\r\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\r\n\r\n\t\t\t} else if ( pass === 2 ) {\r\n\r\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// check whether a polygon node forms a valid ear with adjacent nodes\r\nfunction isEar( ear ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// now make sure we don't have other points inside the potential ear\r\n\tlet p = ear.next.next;\r\n\r\n\twhile ( p !== ear.prev ) {\r\n\r\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.next;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// triangle bbox; min & max are calculated like this for speed\r\n\tlet minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n\t// z-order range for the current triangle bbox;\r\n\tlet minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n\tlet p = ear.prevZ,\r\n\t\tn = ear.nextZ;\r\n\r\n\t// look for points inside the triangle in both directions\r\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in decreasing z-order\r\n\twhile ( p && p.z >= minZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in increasing z-order\r\n\twhile ( n && n.z <= maxZ ) {\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\n// go through all polygon nodes and cure small local self-intersections\r\nfunction cureLocalIntersections( start, triangles, dim ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tlet a = p.prev,\r\n\t\t\tb = p.next.next;\r\n\r\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n\t\t\ttriangles.push( a.i / dim );\r\n\t\t\ttriangles.push( p.i / dim );\r\n\t\t\ttriangles.push( b.i / dim );\r\n\r\n\t\t\t// remove two nodes involved\r\n\t\t\tremoveNode( p );\r\n\t\t\tremoveNode( p.next );\r\n\r\n\t\t\tp = start = b;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn filterPoints( p );\r\n\r\n}\r\n\r\n// try splitting polygon into two and triangulate them independently\r\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n\t// look for a valid diagonal that divides the polygon into two\r\n\tlet a = start;\r\n\tdo {\r\n\r\n\t\tlet b = a.next.next;\r\n\t\twhile ( b !== a.prev ) {\r\n\r\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n\t\t\t\t// split the polygon in two by the diagonal\r\n\t\t\t\tlet c = splitPolygon( a, b );\r\n\r\n\t\t\t\t// filter colinear points around the cuts\r\n\t\t\t\ta = filterPoints( a, a.next );\r\n\t\t\t\tc = filterPoints( c, c.next );\r\n\r\n\t\t\t\t// run earcut on each half\r\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\r\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tb = b.next;\r\n\r\n\t\t}\r\n\r\n\t\ta = a.next;\r\n\r\n\t} while ( a !== start );\r\n\r\n}\r\n\r\n// link every hole into the outer loop, producing a single-ring polygon without holes\r\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n\tlet queue = [],\r\n\t\ti, len, start, end, list;\r\n\r\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n\t\tstart = holeIndices[ i ] * dim;\r\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n\t\tlist = linkedList( data, start, end, dim, false );\r\n\t\tif ( list === list.next ) list.steiner = true;\r\n\t\tqueue.push( getLeftmost( list ) );\r\n\r\n\t}\r\n\r\n\tqueue.sort( compareX );\r\n\r\n\t// process holes from left to right\r\n\tfor ( i = 0; i < queue.length; i ++ ) {\r\n\r\n\t\teliminateHole( queue[ i ], outerNode );\r\n\t\touterNode = filterPoints( outerNode, outerNode.next );\r\n\r\n\t}\r\n\r\n\treturn outerNode;\r\n\r\n}\r\n\r\nfunction compareX( a, b ) {\r\n\r\n\treturn a.x - b.x;\r\n\r\n}\r\n\r\n// find a bridge between vertices that connects hole with an outer ring and and link it\r\nfunction eliminateHole( hole, outerNode ) {\r\n\r\n\touterNode = findHoleBridge( hole, outerNode );\r\n\tif ( outerNode ) {\r\n\r\n\t\tconst b = splitPolygon( outerNode, hole );\r\n\r\n\t\t// filter collinear points around the cuts\r\n\t\tfilterPoints( outerNode, outerNode.next );\r\n\t\tfilterPoints( b, b.next );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\r\nfunction findHoleBridge( hole, outerNode ) {\r\n\r\n\tlet p = outerNode,\r\n\t\thx = hole.x,\r\n\t\thy = hole.y,\r\n\t\tqx = - Infinity,\r\n\t\tm;\r\n\r\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\r\n\t// segment's endpoint with lesser x will be potential connection point\r\n\tdo {\r\n\r\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n\t\t\tlet x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\t\t\tif ( x <= hx && x > qx ) {\r\n\r\n\t\t\t\tqx = x;\r\n\t\t\t\tif ( x === hx ) {\r\n\r\n\t\t\t\t\tif ( hy === p.y ) return p;\r\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== outerNode );\r\n\r\n\tif ( ! m ) return null;\r\n\r\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\r\n\r\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\r\n\t// if there are no points found, we have a valid connection;\r\n\t// otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n\tlet stop = m,\r\n\t\tmx = m.x,\r\n\t\tmy = m.y,\r\n\t\ttanMin = Infinity,\r\n\t\ttan;\r\n\r\n\tp = m;\r\n\r\n\tdo {\r\n\r\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\r\n\r\n\t\t\t\tm = p;\r\n\t\t\t\ttanMin = tan;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== stop );\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n// whether sector in vertex m contains sector in vertex p in the same coordinates\r\nfunction sectorContainsSector( m, p ) {\r\n\r\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\r\n\r\n}\r\n\r\n// interlink polygon nodes in z-order\r\nfunction indexCurve( start, minX, minY, invSize ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n\t\tp.prevZ = p.prev;\r\n\t\tp.nextZ = p.next;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\tp.prevZ.nextZ = null;\r\n\tp.prevZ = null;\r\n\r\n\tsortLinked( p );\r\n\r\n}\r\n\r\n// Simon Tatham's linked list merge sort algorithm\r\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\nfunction sortLinked( list ) {\r\n\r\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\r\n\t\tinSize = 1;\r\n\r\n\tdo {\r\n\r\n\t\tp = list;\r\n\t\tlist = null;\r\n\t\ttail = null;\r\n\t\tnumMerges = 0;\r\n\r\n\t\twhile ( p ) {\r\n\r\n\t\t\tnumMerges ++;\r\n\t\t\tq = p;\r\n\t\t\tpSize = 0;\r\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\r\n\r\n\t\t\t\tpSize ++;\r\n\t\t\t\tq = q.nextZ;\r\n\t\t\t\tif ( ! q ) break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tqSize = inSize;\r\n\r\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n\t\t\t\t\te = p;\r\n\t\t\t\t\tp = p.nextZ;\r\n\t\t\t\t\tpSize --;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\te = q;\r\n\t\t\t\t\tq = q.nextZ;\r\n\t\t\t\t\tqSize --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( tail ) tail.nextZ = e;\r\n\t\t\t\telse list = e;\r\n\r\n\t\t\t\te.prevZ = tail;\r\n\t\t\t\ttail = e;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp = q;\r\n\r\n\t\t}\r\n\r\n\t\ttail.nextZ = null;\r\n\t\tinSize *= 2;\r\n\r\n\t} while ( numMerges > 1 );\r\n\r\n\treturn list;\r\n\r\n}\r\n\r\n// z-order of a point given coords and inverse of the longer side of data bbox\r\nfunction zOrder( x, y, minX, minY, invSize ) {\r\n\r\n\t// coords are transformed into non-negative 15-bit integer range\r\n\tx = 32767 * ( x - minX ) * invSize;\r\n\ty = 32767 * ( y - minY ) * invSize;\r\n\r\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\r\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\r\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n\treturn x | ( y << 1 );\r\n\r\n}\r\n\r\n// find the leftmost node of a polygon ring\r\nfunction getLeftmost( start ) {\r\n\r\n\tlet p = start,\r\n\t\tleftmost = start;\r\n\tdo {\r\n\r\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn leftmost;\r\n\r\n}\r\n\r\n// check if a point lies within a convex triangle\r\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n}\r\n\r\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\nfunction isValidDiagonal( a, b ) {\r\n\r\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\r\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\r\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\r\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\r\n\r\n}\r\n\r\n// signed area of a triangle\r\nfunction area( p, q, r ) {\r\n\r\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n}\r\n\r\n// check if two points are equal\r\nfunction equals( p1, p2 ) {\r\n\r\n\treturn p1.x === p2.x && p1.y === p2.y;\r\n\r\n}\r\n\r\n// check if two segments intersect\r\nfunction intersects( p1, q1, p2, q2 ) {\r\n\r\n\tconst o1 = sign( area( p1, q1, p2 ) );\r\n\tconst o2 = sign( area( p1, q1, q2 ) );\r\n\tconst o3 = sign( area( p2, q2, p1 ) );\r\n\tconst o4 = sign( area( p2, q2, q1 ) );\r\n\r\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\r\n\r\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\r\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\r\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\r\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// for collinear points p, q, r, check if point q lies on segment pr\r\nfunction onSegment( p, q, r ) {\r\n\r\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\r\n\r\n}\r\n\r\nfunction sign( num ) {\r\n\r\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\r\n\r\n}\r\n\r\n// check if a polygon diagonal intersects any polygon segments\r\nfunction intersectsPolygon( a, b ) {\r\n\r\n\tlet p = a;\r\n\tdo {\r\n\r\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// check if a polygon diagonal is locally inside the polygon\r\nfunction locallyInside( a, b ) {\r\n\r\n\treturn area( a.prev, a, a.next ) < 0 ?\r\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n}\r\n\r\n// check if the middle point of a polygon diagonal is inside the polygon\r\nfunction middleInside( a, b ) {\r\n\r\n\tlet p = a,\r\n\t\tinside = false,\r\n\t\tpx = ( a.x + b.x ) / 2,\r\n\t\tpy = ( a.y + b.y ) / 2;\r\n\tdo {\r\n\r\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\r\n\t\t\tinside = ! inside;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn inside;\r\n\r\n}\r\n\r\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\nfunction splitPolygon( a, b ) {\r\n\r\n\tlet a2 = new Node( a.i, a.x, a.y ),\r\n\t\tb2 = new Node( b.i, b.x, b.y ),\r\n\t\tan = a.next,\r\n\t\tbp = b.prev;\r\n\r\n\ta.next = b;\r\n\tb.prev = a;\r\n\r\n\ta2.next = an;\r\n\tan.prev = a2;\r\n\r\n\tb2.next = a2;\r\n\ta2.prev = b2;\r\n\r\n\tbp.next = b2;\r\n\tb2.prev = bp;\r\n\r\n\treturn b2;\r\n\r\n}\r\n\r\n// create a node and optionally link it with previous one (in a circular doubly linked list)\r\nfunction insertNode( i, x, y, last ) {\r\n\r\n\tconst p = new Node( i, x, y );\r\n\r\n\tif ( ! last ) {\r\n\r\n\t\tp.prev = p;\r\n\t\tp.next = p;\r\n\r\n\t} else {\r\n\r\n\t\tp.next = last.next;\r\n\t\tp.prev = last;\r\n\t\tlast.next.prev = p;\r\n\t\tlast.next = p;\r\n\r\n\t}\r\n\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction removeNode( p ) {\r\n\r\n\tp.next.prev = p.prev;\r\n\tp.prev.next = p.next;\r\n\r\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n}\r\n\r\nfunction Node( i, x, y ) {\r\n\r\n\t// vertex index in coordinates array\r\n\tthis.i = i;\r\n\r\n\t// vertex coordinates\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n\t// previous and next vertex nodes in a polygon ring\r\n\tthis.prev = null;\r\n\tthis.next = null;\r\n\r\n\t// z-order curve value\r\n\tthis.z = null;\r\n\r\n\t// previous and next nodes in z-order\r\n\tthis.prevZ = null;\r\n\tthis.nextZ = null;\r\n\r\n\t// indicates whether this is a steiner point\r\n\tthis.steiner = false;\r\n\r\n}\r\n\r\nfunction signedArea( data, start, end, dim ) {\r\n\r\n\tlet sum = 0;\r\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n\t\tj = i;\r\n\r\n\t}\r\n\r\n\treturn sum;\r\n\r\n}\r\n\r\nconst ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tconst n = contour.length;\r\n\t\tlet a = 0.0;\r\n\r\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\r\n\t\tconst holeIndices = []; // array of hole indices\r\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\r\n\r\n\t\tremoveDupEndPts( contour );\r\n\t\taddContour( vertices, contour );\r\n\r\n\t\t//\r\n\r\n\t\tlet holeIndex = contour.length;\r\n\r\n\t\tholes.forEach( removeDupEndPts );\r\n\r\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\r\n\r\n\t\t\tholeIndices.push( holeIndex );\r\n\t\t\tholeIndex += holes[ i ].length;\r\n\t\t\taddContour( vertices, holes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\r\n\r\n\t\t//\r\n\r\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\r\n\r\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn faces;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction removeDupEndPts( points ) {\r\n\r\n\tconst l = points.length;\r\n\r\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\tpoints.pop();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction addContour( vertices, contour ) {\r\n\r\n\tfor ( let i = 0; i < contour.length; i ++ ) {\r\n\r\n\t\tvertices.push( contour[ i ].x );\r\n\t\tvertices.push( contour[ i ].y );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  depth: <float>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float>, // how far from shape outline does bevel start\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\r\n *\r\n *  UVGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n */\r\n\r\n// ExtrudeGeometry\r\n\r\nfunction ExtrudeGeometry( shapes, options ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\r\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\r\n\r\nExtrudeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n// ExtrudeBufferGeometry\r\n\r\nfunction ExtrudeBufferGeometry( shapes, options ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tconst scope = this;\r\n\r\n\tconst verticesArray = [];\r\n\tconst uvArray = [];\r\n\r\n\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tconst shape = shapes[ i ];\r\n\t\taddShape( shape );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst placeholder = [];\r\n\r\n\t\t// options\r\n\r\n\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\tconst steps = options.steps !== undefined ? options.steps : 1;\r\n\t\tlet depth = options.depth !== undefined ? options.depth : 100;\r\n\r\n\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\r\n\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\r\n\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\r\n\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\r\n\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\t\tconst extrudePath = options.extrudePath;\r\n\r\n\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\r\n\r\n\t\t// deprecated options\r\n\r\n\t\tif ( options.amount !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\r\n\t\t\tdepth = options.amount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet extrudePts, extrudeByPath = false;\r\n\t\tlet splineTube, binormal, normal, position2;\r\n\r\n\t\tif ( extrudePath ) {\r\n\r\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\t\textrudeByPath = true;\r\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t\t// SETUP TNB variables\r\n\r\n\t\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\r\n\r\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\t\tbinormal = new Vector3();\r\n\t\t\tnormal = new Vector3();\r\n\t\t\tposition2 = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// Safeguards if bevels are not enabled\r\n\r\n\t\tif ( ! bevelEnabled ) {\r\n\r\n\t\t\tbevelSegments = 0;\r\n\t\t\tbevelThickness = 0;\r\n\t\t\tbevelSize = 0;\r\n\t\t\tbevelOffset = 0;\r\n\r\n\t\t}\r\n\r\n\t\t// Variables initialization\r\n\r\n\t\tconst shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet vertices = shapePoints.shape;\r\n\t\tconst holes = shapePoints.holes;\r\n\r\n\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\r\n\r\n\t\tif ( reverse ) {\r\n\r\n\t\t\tvertices = vertices.reverse();\r\n\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t\t/* Vertices */\r\n\r\n\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\tvertices = vertices.concat( ahole );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction scalePt2( pt, vec, size ) {\r\n\r\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t\t}\r\n\r\n\t\tconst vlen = vertices.length, flen = faces.length;\r\n\r\n\r\n\t\t// Find directions for point movement\r\n\r\n\r\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t\t//\r\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\r\n\r\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\t\tconst v_prev_x = inPt.x - inPrev.x,\r\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\r\n\t\t\tconst v_next_x = inNext.x - inPt.x,\r\n\t\t\t\tv_next_y = inNext.y - inPt.y;\r\n\r\n\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t\t// check for collinear edges\r\n\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not collinear\r\n\r\n\t\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\r\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t\t//  but prevent crazy spikes\r\n\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\t\tlet direction_eq = false; // assumes: opposite\r\n\r\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\t\tv_trans_y = v_prev_x;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst contourMovements = [];\r\n\r\n\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tconst holesMovements = [];\r\n\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\toneHoleMovements = [];\r\n\r\n\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\t\tif ( j === il ) j = 0;\r\n\t\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t\t//  (j)---(i)---(k)\r\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tholesMovements.push( oneHoleMovements );\r\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bs = bevelSize + bevelOffset;\r\n\r\n\t\t// Back facing vertices\r\n\r\n\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Add stepped vertices...\r\n\t\t// Including front facing vertices\r\n\r\n\t\tfor ( let s = 1; s <= steps; s ++ ) {\r\n\r\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Add bevel segments planes\r\n\r\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/* Faces */\r\n\r\n\t\t// Top and bottom faces\r\n\r\n\t\tbuildLidFaces();\r\n\r\n\t\t// Sides faces\r\n\r\n\t\tbuildSideFaces();\r\n\r\n\r\n\t\t/////  Internal functions\r\n\r\n\t\tfunction buildLidFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\r\n\t\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\t\tlet layer = 0; // steps + 1\r\n\t\t\t\tlet offset = vlen * layer;\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// Create faces for the z-sides of the shape\r\n\r\n\t\tfunction buildSideFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\t\t\tlet layeroffset = 0;\r\n\t\t\tsidewalls( contour, layeroffset );\r\n\t\t\tlayeroffset += contour.length;\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t\t//, true\r\n\t\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\t\tlet i = contour.length;\r\n\r\n\t\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\t\tconst j = i;\r\n\t\t\t\tlet k = i - 1;\r\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\r\n\r\n\t\t\t\t\tconst slen1 = vlen * s;\r\n\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\t\tconst a = layeroffset + j + slen1,\r\n\t\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\t\tf4( a, b, c, d );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction v( x, y, z ) {\r\n\r\n\t\t\tplaceholder.push( x );\r\n\t\t\tplaceholder.push( y );\r\n\t\t\tplaceholder.push( z );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction f3( a, b, c ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction f4( a, b, c, d ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( d );\r\n\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\t\t\taddVertex( d );\r\n\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction addVertex( index ) {\r\n\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction addUV( vector2 ) {\r\n\r\n\t\t\tuvArray.push( vector2.x );\r\n\t\t\tuvArray.push( vector2.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\r\n\r\nExtrudeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n//\r\n\r\nconst WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\r\n\t\treturn [\r\n\t\t\tnew Vector2( a_x, a_y ),\r\n\t\t\tnew Vector2( b_x, b_y ),\r\n\t\t\tnew Vector2( c_x, c_y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\r\n\t\tconst d_x = vertices[ indexD * 3 ];\r\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\r\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\r\n\r\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\nfunction toJSON( shapes, options, data ) {\r\n\r\n\t//\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\n/**\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float> // how far from text outline does bevel start\r\n * }\r\n */\r\n\r\n// TextGeometry\r\n\r\nfunction TextGeometry( text, parameters ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\ttext: text,\r\n\t\tparameters: parameters\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTextGeometry.prototype = Object.create( Geometry.prototype );\r\nTextGeometry.prototype.constructor = TextGeometry;\r\n\r\n// TextBufferGeometry\r\n\r\nfunction TextBufferGeometry( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst font = parameters.font;\r\n\r\n\tif ( ! ( font && font.isFont ) ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new Geometry();\r\n\r\n\t}\r\n\r\n\tconst shapes = font.generateShapes( text, parameters.size );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextBufferGeometry';\r\n\r\n}\r\n\r\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\r\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\r\n\r\n// SphereGeometry\r\n\r\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nSphereGeometry.prototype = Object.create( Geometry.prototype );\r\nSphereGeometry.prototype.constructor = SphereGeometry;\r\n\r\n// SphereBufferGeometry\r\n\r\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\r\n\r\n\tlet index = 0;\r\n\tconst grid = [];\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n\t\tconst verticesRow = [];\r\n\r\n\t\tconst v = iy / heightSegments;\r\n\r\n\t\t// special case for the poles\r\n\r\n\t\tlet uOffset = 0;\r\n\r\n\t\tif ( iy == 0 && thetaStart == 0 ) {\r\n\r\n\t\t\tuOffset = 0.5 / widthSegments;\r\n\r\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\r\n\r\n\t\t\tuOffset = - 0.5 / widthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst u = ix / widthSegments;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.copy( vertex ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u + uOffset, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index ++ );\r\n\r\n\t\t}\r\n\r\n\t\tgrid.push( verticesRow );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst a = grid[ iy ][ ix + 1 ];\r\n\t\t\tconst b = grid[ iy ][ ix ];\r\n\t\t\tconst c = grid[ iy + 1 ][ ix ];\r\n\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\r\n\r\n// RingGeometry\r\n\r\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nRingGeometry.prototype = Object.create( Geometry.prototype );\r\nRingGeometry.prototype.constructor = RingGeometry;\r\n\r\n// RingBufferGeometry\r\n\r\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0.5;\r\n\touterRadius = outerRadius || 1;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// some helper variables\r\n\r\n\tlet radius = innerRadius;\r\n\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\t// values are generate from the inside of the ring to the outside\r\n\r\n\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tconst segment = i + thetaSegmentLevel;\r\n\r\n\t\t\tconst a = segment;\r\n\t\t\tconst b = segment + thetaSegments + 1;\r\n\t\t\tconst c = segment + thetaSegments + 2;\r\n\t\t\tconst d = segment + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\r\n\r\n// LatheGeometry\r\n\r\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nLatheGeometry.prototype = Object.create( Geometry.prototype );\r\nLatheGeometry.prototype.constructor = LatheGeometry;\r\n\r\n// LatheBufferGeometry\r\n\r\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\r\n\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst inverseSegments = 1.0 / segments;\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tconst phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tconst sin = Math.sin( phi );\r\n\t\tconst cos = Math.cos( phi );\r\n\r\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tconst base = j + i * points.length;\r\n\r\n\t\t\tconst a = base;\r\n\t\t\tconst b = base + points.length;\r\n\t\t\tconst c = base + points.length + 1;\r\n\t\t\tconst d = base + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif ( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tconst normals = this.attributes.normal.array;\r\n\t\tconst n1 = new Vector3();\r\n\t\tconst n2 = new Vector3();\r\n\t\tconst n = new Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\r\n\t\tconst base = segments * points.length * 3;\r\n\r\n\t\tfor ( let i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\r\n\r\n// ShapeGeometry\r\n\r\nfunction ShapeGeometry( shapes, curveSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( typeof curveSegments === 'object' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\r\n\r\n\t\tcurveSegments = curveSegments.curveSegments;\r\n\r\n\t}\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nShapeGeometry.prototype = Object.create( Geometry.prototype );\r\nShapeGeometry.prototype.constructor = ShapeGeometry;\r\n\r\nShapeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n// ShapeBufferGeometry\r\n\r\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tcurveSegments = curveSegments || 12;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet groupStart = 0;\r\n\tlet groupCount = 0;\r\n\r\n\t// allow single and array values for \"shapes\" parameter\r\n\r\n\tif ( Array.isArray( shapes ) === false ) {\r\n\r\n\t\taddShape( shapes );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\r\n\r\n\t\t\taddShape( shapes[ i ] );\r\n\r\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\t\t\tgroupCount = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\r\n\t// helper functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst indexOffset = vertices.length / 3;\r\n\t\tconst points = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet shapeVertices = points.shape;\r\n\t\tconst shapeHoles = points.holes;\r\n\r\n\t\t// check direction of vertices\r\n\r\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\r\n\r\n\t\t\tshapeVertices = shapeVertices.reverse();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\r\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\r\n\r\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\r\n\r\n\t\t// join vertices of inner and outer paths to a single array\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices, normals, uvs\r\n\r\n\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst vertex = shapeVertices[ i ];\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\r\n\r\n\t\t}\r\n\r\n\t\t// incides\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tconst a = face[ 0 ] + indexOffset;\r\n\t\t\tconst b = face[ 1 ] + indexOffset;\r\n\t\t\tconst c = face[ 2 ] + indexOffset;\r\n\r\n\t\t\tindices.push( a, b, c );\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\r\n\r\nShapeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction toJSON$1( shapes, data ) {\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\nfunction EdgesGeometry( geometry, thresholdAngle ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'EdgesGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tthresholdAngle: thresholdAngle\r\n\t};\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tlet edge1, edge2, key;\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// prepare source geometry\r\n\r\n\tlet geometry2;\r\n\r\n\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\tgeometry2 = new Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tconst sourceVertices = geometry2.vertices;\r\n\tconst faces = geometry2.faces;\r\n\r\n\t// now create a data structure where each entry represents an edge with its adjoining faces\r\n\r\n\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tconst face = faces[ i ];\r\n\r\n\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge1 = face[ keys[ j ] ];\r\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\r\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tedges[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate vertices\r\n\r\n\tfor ( key in edges ) {\r\n\r\n\t\tconst e = edges[ key ];\r\n\r\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\r\n\r\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tlet vertex = sourceVertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = sourceVertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nEdgesGeometry.prototype.constructor = EdgesGeometry;\r\n\r\n// CylinderGeometry\r\n\r\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\r\nCylinderGeometry.prototype.constructor = CylinderGeometry;\r\n\r\n// CylinderBufferGeometry\r\n\r\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tconst scope = this;\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\r\n\theight = height || 1;\r\n\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet index = 0;\r\n\tconst indexArray = [];\r\n\tconst halfHeight = height / 2;\r\n\tlet groupStart = 0;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) generateCap( true );\r\n\t\tif ( radiusBottom > 0 ) generateCap( false );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\tfunction generateTorso() {\r\n\r\n\t\tconst normal = new Vector3();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tconst slope = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tconst indexRow = [];\r\n\r\n\t\t\tconst v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\r\n\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tconst u = x / radialSegments;\r\n\r\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\t\tconst sinTheta = Math.sin( theta );\r\n\t\t\t\tconst cosTheta = Math.cos( theta );\r\n\r\n\t\t\t\t// vertex\r\n\r\n\t\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\r\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\r\n\t\t\t\tuvs.push( u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\r\n\t\t\t\tindexRow.push( index ++ );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\r\n\t\t\t\tconst a = indexArray[ y ][ x ];\r\n\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t// update group counter\r\n\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, 0 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n\tfunction generateCap( top ) {\r\n\r\n\t\tlet centerIndexStart, centerIndexEnd;\r\n\r\n\t\tconst uv = new Vector2();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tconst sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( 0.5, 0.5 );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tconst u = x / radialSegments;\r\n\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\tconst cosTheta = Math.cos( theta );\r\n\t\t\tconst sinTheta = Math.sin( theta );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\r\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tconst c = centerIndexStart + x;\r\n\t\t\tconst i = centerIndexEnd + x;\r\n\r\n\t\t\tif ( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\r\n\t\t\t\tindices.push( i, i + 1, c );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\r\n\t\t\t\tindices.push( i + 1, i, c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n}\r\n\r\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\r\n\r\n// ConeGeometry\r\n\r\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\r\nConeGeometry.prototype.constructor = ConeGeometry;\r\n\r\n// ConeBufferGeometry\r\n\r\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\r\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\r\n\r\n// CircleGeometry\r\n\r\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCircleGeometry.prototype = Object.create( Geometry.prototype );\r\nCircleGeometry.prototype.constructor = CircleGeometry;\r\n\r\n// CircleBufferGeometry\r\n\r\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// center point\r\n\r\n\tvertices.push( 0, 0, 0 );\r\n\tnormals.push( 0, 0, 1 );\r\n\tuvs.push( 0.5, 0.5 );\r\n\r\n\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\r\n\r\n\t\tconst segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\t// vertex\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t// normal\r\n\r\n\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t// uvs\r\n\r\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\r\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\r\n\r\nvar Geometries = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tWireframeGeometry: WireframeGeometry,\r\n\tParametricGeometry: ParametricGeometry,\r\n\tParametricBufferGeometry: ParametricBufferGeometry,\r\n\tTetrahedronGeometry: TetrahedronGeometry,\r\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\r\n\tOctahedronGeometry: OctahedronGeometry,\r\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\r\n\tIcosahedronGeometry: IcosahedronGeometry,\r\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\r\n\tDodecahedronGeometry: DodecahedronGeometry,\r\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\r\n\tPolyhedronGeometry: PolyhedronGeometry,\r\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\r\n\tTubeGeometry: TubeGeometry,\r\n\tTubeBufferGeometry: TubeBufferGeometry,\r\n\tTorusKnotGeometry: TorusKnotGeometry,\r\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\r\n\tTorusGeometry: TorusGeometry,\r\n\tTorusBufferGeometry: TorusBufferGeometry,\r\n\tTextGeometry: TextGeometry,\r\n\tTextBufferGeometry: TextBufferGeometry,\r\n\tSphereGeometry: SphereGeometry,\r\n\tSphereBufferGeometry: SphereBufferGeometry,\r\n\tRingGeometry: RingGeometry,\r\n\tRingBufferGeometry: RingBufferGeometry,\r\n\tPlaneGeometry: PlaneGeometry,\r\n\tPlaneBufferGeometry: PlaneBufferGeometry,\r\n\tLatheGeometry: LatheGeometry,\r\n\tLatheBufferGeometry: LatheBufferGeometry,\r\n\tShapeGeometry: ShapeGeometry,\r\n\tShapeBufferGeometry: ShapeBufferGeometry,\r\n\tExtrudeGeometry: ExtrudeGeometry,\r\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\r\n\tEdgesGeometry: EdgesGeometry,\r\n\tConeGeometry: ConeGeometry,\r\n\tConeBufferGeometry: ConeBufferGeometry,\r\n\tCylinderGeometry: CylinderGeometry,\r\n\tCylinderBufferGeometry: CylinderBufferGeometry,\r\n\tCircleGeometry: CircleGeometry,\r\n\tCircleBufferGeometry: CircleBufferGeometry,\r\n\tBoxGeometry: BoxGeometry,\r\n\tBoxBufferGeometry: BoxBufferGeometry\r\n});\r\n\r\n/**\r\n * parameters = {\r\n *  color: <THREE.Color>\r\n * }\r\n */\r\n\r\nfunction ShadowMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShadowMaterial';\r\n\r\n\tthis.color = new Color( 0x000000 );\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nShadowMaterial.prototype = Object.create( Material.prototype );\r\nShadowMaterial.prototype.constructor = ShadowMaterial;\r\n\r\nShadowMaterial.prototype.isShadowMaterial = true;\r\n\r\nShadowMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction RawShaderMaterial( parameters ) {\r\n\r\n\tShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n}\r\n\r\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\r\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\r\n\r\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshStandardMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 1.0;\r\n\tthis.metalness = 0.0;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.vertexTangents = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\r\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\r\n\r\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\r\n\r\nMeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.vertexTangents = source.vertexTangents;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  clearcoat: <float>,\r\n *  clearcoatMap: new THREE.Texture( <Image> ),\r\n *  clearcoatRoughness: <float>,\r\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\r\n *  clearcoatNormalScale: <Vector2>,\r\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\r\n *\r\n *  reflectivity: <float>,\r\n *\r\n *  sheen: <Color>,\r\n *\r\n *  transmission: <float>,\r\n *  transmissionMap: new THREE.Texture( <Image> )\r\n * }\r\n */\r\n\r\nfunction MeshPhysicalMaterial( parameters ) {\r\n\r\n\tMeshStandardMaterial.call( this );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.type = 'MeshPhysicalMaterial';\r\n\r\n\tthis.clearcoat = 0.0;\r\n\tthis.clearcoatMap = null;\r\n\tthis.clearcoatRoughness = 0.0;\r\n\tthis.clearcoatRoughnessMap = null;\r\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\r\n\tthis.clearcoatNormalMap = null;\r\n\r\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n\tthis.sheen = null; // null will disable sheen bsdf\r\n\r\n\tthis.transmission = 0.0;\r\n\tthis.transmissionMap = null;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\r\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\r\n\r\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\r\n\r\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.clearcoat = source.clearcoat;\r\n\tthis.clearcoatMap = source.clearcoatMap;\r\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\r\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\r\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\r\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\r\n\r\n\tthis.reflectivity = source.reflectivity;\r\n\r\n\tif ( source.sheen ) {\r\n\r\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\r\n\r\n\t} else {\r\n\r\n\t\tthis.sheen = null;\r\n\r\n\t}\r\n\r\n\tthis.transmission = source.transmission;\r\n\tthis.transmissionMap = source.transmissionMap;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.MultiplyOperation,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshPhongMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.specular = new Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\r\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\r\n\r\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\r\n\r\nMeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *  gradientMap: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshToonMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'TOON': '' };\r\n\r\n\tthis.type = 'MeshToonMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\tthis.gradientMap = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshToonMaterial.prototype = Object.create( Material.prototype );\r\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\r\n\r\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\r\n\r\nMeshToonMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\tthis.gradientMap = source.gradientMap;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshNormalMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\r\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\r\n\r\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\r\n\r\nMeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshLambertMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\r\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\r\n\r\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\r\n\r\nMeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  matcap: new THREE.Texture( <Image> ),\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshMatcapMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.type = 'MeshMatcapMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.matcap = null;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\r\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\r\n\r\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\r\n\r\nMeshMatcapMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.matcap = source.matcap;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */\r\n\r\nfunction LineDashedMaterial( parameters ) {\r\n\r\n\tLineBasicMaterial.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\r\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\r\n\r\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\r\n\r\nLineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tLineBasicMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Materials = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tShadowMaterial: ShadowMaterial,\r\n\tSpriteMaterial: SpriteMaterial,\r\n\tRawShaderMaterial: RawShaderMaterial,\r\n\tShaderMaterial: ShaderMaterial,\r\n\tPointsMaterial: PointsMaterial,\r\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\r\n\tMeshStandardMaterial: MeshStandardMaterial,\r\n\tMeshPhongMaterial: MeshPhongMaterial,\r\n\tMeshToonMaterial: MeshToonMaterial,\r\n\tMeshNormalMaterial: MeshNormalMaterial,\r\n\tMeshLambertMaterial: MeshLambertMaterial,\r\n\tMeshDepthMaterial: MeshDepthMaterial,\r\n\tMeshDistanceMaterial: MeshDistanceMaterial,\r\n\tMeshBasicMaterial: MeshBasicMaterial,\r\n\tMeshMatcapMaterial: MeshMatcapMaterial,\r\n\tLineDashedMaterial: LineDashedMaterial,\r\n\tLineBasicMaterial: LineBasicMaterial,\r\n\tMaterial: Material\r\n});\r\n\r\nconst AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function ( array, from, to ) {\r\n\r\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\r\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\r\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function ( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function ( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function ( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tconst n = times.length;\r\n\t\tconst result = new Array( n );\r\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function ( values, stride, order ) {\r\n\r\n\t\tconst nValues = values.length;\r\n\t\tconst result = new values.constructor( nValues );\r\n\r\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tconst srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tlet i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tlet value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\r\n\r\n\t\tfps = fps || 30;\r\n\r\n\t\tconst clip = sourceClip.clone();\r\n\r\n\t\tclip.name = name;\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tconst track = clip.tracks[ i ];\r\n\t\t\tconst valueSize = track.getValueSize();\r\n\r\n\t\t\tconst times = [];\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\r\n\r\n\t\t\t\tconst frame = track.times[ j ] * fps;\r\n\r\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\r\n\r\n\t\t\t\ttimes.push( track.times[ j ] );\r\n\r\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( times.length === 0 ) continue;\r\n\r\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\r\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\r\n\r\n\t\t\ttracks.push( track );\r\n\r\n\t\t}\r\n\r\n\t\tclip.tracks = tracks;\r\n\r\n\t\t// find minimum .times value across all tracks in the trimmed clip\r\n\r\n\t\tlet minStartTime = Infinity;\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\r\n\r\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// shift all tracks such that clip begins at t=0\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\r\n\r\n\t\t}\r\n\r\n\t\tclip.resetDuration();\r\n\r\n\t\treturn clip;\r\n\r\n\t},\r\n\r\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\r\n\r\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\r\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\r\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\r\n\r\n\t\tconst numTracks = targetClip.tracks.length;\r\n\t\tconst referenceTime = referenceFrame / fps;\r\n\r\n\t\t// Make each track's values relative to the values at the reference frame\r\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\r\n\r\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\r\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\r\n\r\n\t\t\t// Skip this track if it's non-numeric\r\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\r\n\r\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\r\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\r\n\r\n\t\t\t\treturn track.name === referenceTrack.name\r\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( targetTrack === undefined ) continue;\r\n\r\n\t\t\tconst valueSize = referenceTrack.getValueSize();\r\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\r\n\t\t\tlet referenceValue;\r\n\r\n\t\t\t// Find the value to subtract out of the track\r\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\r\n\r\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, 0, referenceTrack.valueSize );\r\n\r\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\r\n\r\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\r\n\t\t\t\tconst startIndex = lastIndex * valueSize;\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Interpolate to the reference value\r\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\r\n\t\t\t\tinterpolant.evaluate( referenceTime );\r\n\t\t\t\treferenceValue = interpolant.resultBuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Conjugate the quaternion\r\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\tconst referenceQuat = new Quaternion(\r\n\t\t\t\t\treferenceValue[ 0 ],\r\n\t\t\t\t\treferenceValue[ 1 ],\r\n\t\t\t\t\treferenceValue[ 2 ],\r\n\t\t\t\t\treferenceValue[ 3 ]\r\n\t\t\t\t).normalize().conjugate();\r\n\t\t\t\treferenceQuat.toArray( referenceValue );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Subtract the reference value from all of the track values\r\n\r\n\t\t\tconst numTimes = targetTrack.times.length;\r\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\r\n\r\n\t\t\t\tconst valueStart = j * valueSize;\r\n\r\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\r\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart,\r\n\t\t\t\t\t\treferenceValue,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Subtract each value for all other numeric track types\r\n\t\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\r\n\r\n\t\treturn targetClip;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n */\r\n\r\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n}\r\n\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\tevaluate: function ( t ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[ i1 ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tlet right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n\r\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\r\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[ i1 ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function () {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function ( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\r\n\r\n\t\tthrow new Error( 'call to abstract method' );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\t//( 0, t, t0 ), returns this.resultBuffer\r\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\r\n\r\n\t//( N-1, tN-1, t ), returns this.resultBuffer\r\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\r\n\r\n} );\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n */\r\n\r\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = - 0;\r\n\tthis._offsetPrev = - 0;\r\n\tthis._weightNext = - 0;\r\n\tthis._offsetNext = - 0;\r\n\r\n}\r\n\r\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( i1, t0, t1 ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\r\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\r\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\r\n\t\tconst sN = wN * ppp - wN * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: LinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n */\r\n\r\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: DiscreteInterpolant,\r\n\r\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction KeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\r\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n}\r\n\r\n// Static methods\r\n\r\nObject.assign( KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\ttoJSON: function ( track ) {\r\n\r\n\t\tconst trackType = track.constructor;\r\n\r\n\t\tlet json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( KeyframeTrack.prototype, {\r\n\r\n\tconstructor: KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\r\n\r\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function ( result ) {\r\n\r\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function ( interpolation ) {\r\n\r\n\t\tlet factoryMethod;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tconst message = \"unsupported interpolation for \" +\r\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function () {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function () {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function ( timeOffset ) {\r\n\r\n\t\tif ( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function ( timeScale ) {\r\n\r\n\t\tif ( timeScale !== 1.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function ( startTime, endTime ) {\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tlet from = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\r\n\r\n\t\t\t++ from;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\r\n\r\n\t\t\t-- to;\r\n\r\n\t\t}\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif ( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) {\r\n\r\n\t\t\t\tto = Math.max( to, 1 );\r\n\t\t\t\tfrom = to - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst stride = this.getValueSize();\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tconst valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif ( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tlet prevTime = null;\r\n\r\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tconst currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tconst value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function () {\r\n\r\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\r\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\r\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\r\n\r\n\t\t\tlastIndex = times.length - 1;\r\n\r\n\t\tlet writeIndex = 1;\r\n\r\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\r\n\r\n\t\t\tlet keep = false;\r\n\r\n\t\t\tconst time = times[ i ];\r\n\t\t\tconst timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\tif ( ! smoothInterpolation ) {\r\n\r\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\r\n\t\t\t\t\tconst offset = i * stride,\r\n\t\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst value = values[ offset + j ];\r\n\r\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tkeep = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tconst readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// flush last keyframe (compaction looks ahead)\r\n\r\n\t\tif ( lastIndex > 0 ) {\r\n\r\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\r\n\r\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t++ writeIndex;\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.times = times;\r\n\t\t\tthis.values = values;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\r\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\r\n\r\n\t\tconst TypedKeyframeTrack = this.constructor;\r\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\r\n\r\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\r\n\t\ttrack.createInterpolant = this.createInterpolant;\r\n\r\n\t\treturn track;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of Boolean keyframe values.\r\n */\r\n\r\nfunction BooleanKeyframeTrack( name, times, values ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values );\r\n\r\n}\r\n\r\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n/**\r\n * A Track of keyframe values that represent color.\r\n */\r\n\r\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: ColorKeyframeTrack,\r\n\r\n\tValueTypeName: 'color'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n\t// Note: Very basic implementation and nothing special yet.\r\n\t// However, this is the place for color space parameterization.\r\n\r\n} );\r\n\r\n/**\r\n * A Track of numeric keyframe values.\r\n */\r\n\r\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n */\r\n\r\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tlet offset = i1 * stride;\r\n\r\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of quaternion keyframe values.\r\n */\r\n\r\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n/**\r\n * A Track that interpolates Strings\r\n */\r\n\r\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n/**\r\n * A Track of vectored keyframe values.\r\n */\r\n\r\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\nfunction AnimationClip( name, duration, tracks, blendMode ) {\r\n\r\n\tthis.name = name;\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\r\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getTrackTypeForValueTypeName( typeName ) {\r\n\r\n\tswitch ( typeName.toLowerCase() ) {\r\n\r\n\t\tcase 'scalar':\r\n\t\tcase 'double':\r\n\t\tcase 'float':\r\n\t\tcase 'number':\r\n\t\tcase 'integer':\r\n\r\n\t\t\treturn NumberKeyframeTrack;\r\n\r\n\t\tcase 'vector':\r\n\t\tcase 'vector2':\r\n\t\tcase 'vector3':\r\n\t\tcase 'vector4':\r\n\r\n\t\t\treturn VectorKeyframeTrack;\r\n\r\n\t\tcase 'color':\r\n\r\n\t\t\treturn ColorKeyframeTrack;\r\n\r\n\t\tcase 'quaternion':\r\n\r\n\t\t\treturn QuaternionKeyframeTrack;\r\n\r\n\t\tcase 'bool':\r\n\t\tcase 'boolean':\r\n\r\n\t\t\treturn BooleanKeyframeTrack;\r\n\r\n\t\tcase 'string':\r\n\r\n\t\t\treturn StringKeyframeTrack;\r\n\r\n\t}\r\n\r\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\r\n\r\n}\r\n\r\nfunction parseKeyframeTrack( json ) {\r\n\r\n\tif ( json.type === undefined ) {\r\n\r\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\r\n\r\n\t}\r\n\r\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\r\n\r\n\tif ( json.times === undefined ) {\r\n\r\n\t\tconst times = [], values = [];\r\n\r\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\tjson.times = times;\r\n\t\tjson.values = values;\r\n\r\n\t}\r\n\r\n\t// derived classes can define a static parse method\r\n\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\treturn trackType.parse( json );\r\n\r\n\t} else {\r\n\r\n\t\t// by default, we assume a constructor compatible with the base\r\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( AnimationClip, {\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( clip ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tconst json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks,\r\n\t\t\t'uuid': clip.uuid,\r\n\t\t\t'blendMode': clip.blendMode\r\n\r\n\t\t};\r\n\r\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n\t\tconst numMorphTargets = morphTargetSequence.length;\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tlet times = [];\r\n\t\t\tlet values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\ti,\r\n\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\tnew NumberKeyframeTrack(\r\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\ttimes, values\r\n\t\t\t\t).scale( 1.0 / fps ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( name, - 1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function ( objectOrClipArray, name ) {\r\n\r\n\t\tlet clipArray = objectOrClipArray;\r\n\r\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n\t\t\tconst o = objectOrClipArray;\r\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\r\n\r\n\t\tconst animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = morphTargets[ i ];\r\n\t\t\tconst parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tconst name = parts[ 1 ];\r\n\r\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\r\n\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst clips = [];\r\n\r\n\t\tfor ( const name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function ( animation, bones ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tconst times = [];\r\n\t\t\t\tconst values = [];\r\n\r\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tconst clipName = animation.name || 'default';\r\n\t\tconst fps = animation.fps || 30;\r\n\t\tconst blendMode = animation.blendMode;\r\n\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tlet duration = animation.length || - 1;\r\n\r\n\t\tconst hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n\t\t\t// process morph targets\r\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tconst morphTargetNames = {};\r\n\r\n\t\t\t\tlet k;\r\n\r\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tconst times = [];\r\n\t\t\t\t\tconst values = [];\r\n\r\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( AnimationClip.prototype, {\r\n\r\n\tresetDuration: function () {\r\n\r\n\t\tconst tracks = this.tracks;\r\n\t\tlet duration = 0;\r\n\r\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttrim: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tvalid = valid && this.tracks[ i ].validate();\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\toptimize: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\ttracks.push( this.tracks[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction LoadingManager( onLoad, onProgress, onError ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet isLoading = false;\r\n\tlet itemsLoaded = 0;\r\n\tlet itemsTotal = 0;\r\n\tlet urlModifier = undefined;\r\n\tconst handlers = [];\r\n\r\n\t// Refer to #5689 for the reason why we don't set .onStart\r\n\t// in the constructor\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.resolveURL = function ( url ) {\r\n\r\n\t\tif ( urlModifier ) {\r\n\r\n\t\t\treturn urlModifier( url );\r\n\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\r\n\t};\r\n\r\n\tthis.setURLModifier = function ( transform ) {\r\n\r\n\t\turlModifier = transform;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.addHandler = function ( regex, loader ) {\r\n\r\n\t\thandlers.push( regex, loader );\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.removeHandler = function ( regex ) {\r\n\r\n\t\tconst index = handlers.indexOf( regex );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\thandlers.splice( index, 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.getHandler = function ( file ) {\r\n\r\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tconst regex = handlers[ i ];\r\n\t\t\tconst loader = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst DefaultLoadingManager = new LoadingManager();\r\n\r\nfunction Loader( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n\tthis.crossOrigin = 'anonymous';\r\n\tthis.path = '';\r\n\tthis.resourcePath = '';\r\n\tthis.requestHeader = {};\r\n\r\n}\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\r\n\r\n\tloadAsync: function ( url, onProgress ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tscope.load( url, resolve, onProgress, reject );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tparse: function ( /* data */ ) {},\r\n\r\n\tsetCrossOrigin: function ( crossOrigin ) {\r\n\r\n\t\tthis.crossOrigin = crossOrigin;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetResourcePath: function ( resourcePath ) {\r\n\r\n\t\tthis.resourcePath = resourcePath;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRequestHeader: function ( requestHeader ) {\r\n\r\n\t\tthis.requestHeader = requestHeader;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst loading = {};\r\n\r\nfunction FileLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FileLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\t// Check if request is duplicate\r\n\r\n\t\tif ( loading[ url ] !== undefined ) {\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check for data: URI\r\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\r\n\t\tlet request;\r\n\r\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\r\n\t\tif ( dataUriRegexResult ) {\r\n\r\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\r\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\r\n\r\n\t\t\tlet data = dataUriRegexResult[ 3 ];\r\n\t\t\tdata = decodeURIComponent( data );\r\n\r\n\t\t\tif ( isBase64 ) data = atob( data );\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tlet response;\r\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\r\n\r\n\t\t\t\tswitch ( responseType ) {\r\n\r\n\t\t\t\t\tcase 'arraybuffer':\r\n\t\t\t\t\tcase 'blob':\r\n\r\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\r\n\r\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tresponse = view.buffer;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'document':\r\n\r\n\t\t\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'json':\r\n\r\n\t\t\t\t\t\tresponse = JSON.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault: // 'text' or other\r\n\r\n\t\t\t\t\t\tresponse = data;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onError ) onError( error );\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Initialise array for duplicate requests\r\n\r\n\t\t\tloading[ url ] = [];\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\trequest = new XMLHttpRequest();\r\n\r\n\t\t\trequest.open( 'GET', url, true );\r\n\r\n\t\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\t\tconst response = this.response;\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\r\n\r\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\r\n\t\t\t\t\t// error response bodies as proper responses to requests.\r\n\t\t\t\t\tCache.add( url, response );\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\r\n\r\n\t\t\tfor ( const header in this.requestHeader ) {\r\n\r\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trequest.send( null );\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMimeType: function ( value ) {\r\n\r\n\t\tthis.mimeType = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AnimationLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction CompressedTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst images = [];\r\n\r\n\t\tconst texture = new CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction DataTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: DataTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst texture = new DataTexture();\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tconst texData = scope.parse( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( texData.image !== undefined ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( texData.data !== undefined ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\r\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( texData.format !== undefined ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.type !== undefined ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmaps !== undefined ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmapCount === 1 ) {\r\n\r\n\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImageLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\r\n\r\n\t\tfunction onImageLoad() {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tCache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onImageError( event ) {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'load', onImageLoad, false );\r\n\t\timage.addEventListener( 'error', onImageError, false );\r\n\r\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\r\n\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CubeTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new CubeTexture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction TextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new Texture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\r\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\r\n\r\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Extensible curve object.\r\n *\r\n * Some common of curve methods:\r\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\r\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following curves inherit from THREE.Curve:\r\n *\r\n * -- 2D curves --\r\n * THREE.ArcCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.EllipseCurve\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.SplineCurve\r\n *\r\n * -- 3D curves --\r\n * THREE.CatmullRomCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath.\r\n *\r\n **/\r\n\r\nfunction Curve() {\r\n\r\n\tthis.type = 'Curve';\r\n\r\n\tthis.arcLengthDivisions = 200;\r\n\r\n}\r\n\r\nObject.assign( Curve.prototype, {\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( /* t, optionalTarget */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\r\n\r\n\t\tif ( this.cacheArcLengths &&\r\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\r\n\t\t\t! this.needsUpdate ) {\r\n\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tconst cache = [];\r\n\t\tlet current, last = this.getPoint( 0 );\r\n\t\tlet sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tconst arcLengths = this.getLengths();\r\n\r\n\t\tlet i = 0, il = arcLengths.length;\r\n\r\n\t\tlet targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tlet low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\treturn i / ( il - 1 );\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tconst lengthBefore = arcLengths[ i ];\r\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tconst segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function ( t, optionalTarget ) {\r\n\r\n\t\tconst delta = 0.0001;\r\n\t\tlet t1 = t - delta;\r\n\t\tlet t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tconst pt1 = this.getPoint( t1 );\r\n\t\tconst pt2 = this.getPoint( t2 );\r\n\r\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\r\n\r\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\r\n\r\n\t\treturn tangent;\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcomputeFrenetFrames: function ( segments, closed ) {\r\n\r\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\r\n\t\tconst normal = new Vector3();\r\n\r\n\t\tconst tangents = [];\r\n\t\tconst normals = [];\r\n\t\tconst binormals = [];\r\n\r\n\t\tconst vec = new Vector3();\r\n\t\tconst mat = new Matrix4();\r\n\r\n\t\t// compute the tangent vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\t\tconst u = i / segments;\r\n\r\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\r\n\t\t\ttangents[ i ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the minimum tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new Vector3();\r\n\t\tbinormals[ 0 ] = new Vector3();\r\n\t\tlet min = Number.MAX_VALUE;\r\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\r\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\r\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= min ) {\r\n\r\n\t\t\tmin = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= min ) {\r\n\r\n\t\t\tmin = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= min ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\r\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\t\tvec.normalize();\r\n\r\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\t\tif ( closed === true ) {\r\n\r\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\r\n\t\t\ttheta /= segments;\r\n\r\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\r\n\r\n\t\t\t\ttheta = - theta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\t\t// twist a little...\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttangents: tangents,\r\n\t\t\tnormals: normals,\r\n\t\t\tbinormals: binormals\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Curve',\r\n\t\t\t\tgenerator: 'Curve.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\r\n\t\tdata.type = this.type;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'EllipseCurve';\r\n\r\n\tthis.aX = aX || 0;\r\n\tthis.aY = aY || 0;\r\n\r\n\tthis.xRadius = xRadius || 1;\r\n\tthis.yRadius = yRadius || 1;\r\n\r\n\tthis.aStartAngle = aStartAngle || 0;\r\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\r\n\r\n\tthis.aClockwise = aClockwise || false;\r\n\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n}\r\n\r\nEllipseCurve.prototype = Object.create( Curve.prototype );\r\nEllipseCurve.prototype.constructor = EllipseCurve;\r\n\r\nEllipseCurve.prototype.isEllipseCurve = true;\r\n\r\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst twoPi = Math.PI * 2;\r\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\r\n\r\n\t// ensures that deltaAngle is 0 .. 2 PI\r\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\r\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\r\n\r\n\tif ( deltaAngle < Number.EPSILON ) {\r\n\r\n\t\tif ( samePoints ) {\r\n\r\n\t\t\tdeltaAngle = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( this.aClockwise === true && ! samePoints ) {\r\n\r\n\t\tif ( deltaAngle === twoPi ) {\r\n\r\n\t\t\tdeltaAngle = - twoPi;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = deltaAngle - twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst angle = this.aStartAngle + t * deltaAngle;\r\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\r\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tconst cos = Math.cos( this.aRotation );\r\n\t\tconst sin = Math.sin( this.aRotation );\r\n\r\n\t\tconst tx = x - this.aX;\r\n\t\tconst ty = y - this.aY;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = tx * cos - ty * sin + this.aX;\r\n\t\ty = tx * sin + ty * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn point.set( x, y );\r\n\r\n};\r\n\r\nEllipseCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.aX = source.aX;\r\n\tthis.aY = source.aY;\r\n\r\n\tthis.xRadius = source.xRadius;\r\n\tthis.yRadius = source.yRadius;\r\n\r\n\tthis.aStartAngle = source.aStartAngle;\r\n\tthis.aEndAngle = source.aEndAngle;\r\n\r\n\tthis.aClockwise = source.aClockwise;\r\n\r\n\tthis.aRotation = source.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n\r\nEllipseCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.aX = this.aX;\r\n\tdata.aY = this.aY;\r\n\r\n\tdata.xRadius = this.xRadius;\r\n\tdata.yRadius = this.yRadius;\r\n\r\n\tdata.aStartAngle = this.aStartAngle;\r\n\tdata.aEndAngle = this.aEndAngle;\r\n\r\n\tdata.aClockwise = this.aClockwise;\r\n\r\n\tdata.aRotation = this.aRotation;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nEllipseCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.aX = json.aX;\r\n\tthis.aY = json.aY;\r\n\r\n\tthis.xRadius = json.xRadius;\r\n\tthis.yRadius = json.yRadius;\r\n\r\n\tthis.aStartAngle = json.aStartAngle;\r\n\tthis.aEndAngle = json.aEndAngle;\r\n\r\n\tthis.aClockwise = json.aClockwise;\r\n\r\n\tthis.aRotation = json.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\tthis.type = 'ArcCurve';\r\n\r\n}\r\n\r\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\r\nArcCurve.prototype.constructor = ArcCurve;\r\n\r\nArcCurve.prototype.isArcCurve = true;\r\n\r\n/**\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\n\r\n/*\r\nBased on an optimized c++ solution in\r\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n - http://ideone.com/NoEbVM\r\n\r\nThis CubicPoly class could be used for reusing some variables and calculations,\r\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\nwhich can be placed in CurveUtils.\r\n*/\r\n\r\nfunction CubicPoly() {\r\n\r\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tfunction init( x0, x1, t0, t1 ) {\r\n\r\n\t\tc0 = x0;\r\n\t\tc1 = t0;\r\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\r\n\r\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t\t},\r\n\r\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t\t// rescale tangents for parametrization in [0,1]\r\n\t\t\tt1 *= dt1;\r\n\t\t\tt2 *= dt1;\r\n\r\n\t\t\tinit( x1, x2, t1, t2 );\r\n\r\n\t\t},\r\n\r\n\t\tcalc: function ( t ) {\r\n\r\n\t\t\tconst t2 = t * t;\r\n\t\t\tconst t3 = t2 * t;\r\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nconst tmp = new Vector3();\r\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\r\n\r\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CatmullRomCurve3';\r\n\r\n\tthis.points = points || [];\r\n\tthis.closed = closed || false;\r\n\tthis.curveType = curveType || 'centripetal';\r\n\tthis.tension = ( tension !== undefined ) ? tension : 0.5;\r\n\r\n}\r\n\r\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\r\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\r\n\r\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\r\n\r\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst points = this.points;\r\n\tconst l = points.length;\r\n\r\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\tlet intPoint = Math.floor( p );\r\n\tlet weight = p - intPoint;\r\n\r\n\tif ( this.closed ) {\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\r\n\r\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\tintPoint = l - 2;\r\n\t\tweight = 1;\r\n\r\n\t}\r\n\r\n\tlet p0, p1, p2, p3; // 4 points\r\n\r\n\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate first point\r\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\tp0 = tmp;\r\n\r\n\t}\r\n\r\n\tp1 = points[ intPoint % l ];\r\n\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate last point\r\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\tp3 = tmp;\r\n\r\n\t}\r\n\r\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\r\n\r\n\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\r\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t// safety check for repeated points\r\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t} else if ( this.curveType === 'catmullrom' ) {\r\n\r\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\r\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\r\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\r\n\r\n\t}\r\n\r\n\tpoint.set(\r\n\t\tpx.calc( weight ),\r\n\t\tpy.calc( weight ),\r\n\t\tpz.calc( weight )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\tthis.closed = source.closed;\r\n\tthis.curveType = source.curveType;\r\n\tthis.tension = source.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\tdata.closed = this.closed;\r\n\tdata.curveType = this.curveType;\r\n\tdata.tension = this.tension;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector3().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\tthis.closed = json.closed;\r\n\tthis.curveType = json.curveType;\r\n\tthis.tension = json.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Bezier Curves formulas obtained from\r\n * http://en.wikipedia.org/wiki/Bzier_curve\r\n */\r\n\r\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\r\n\r\n\tconst v0 = ( p2 - p0 ) * 0.5;\r\n\tconst v1 = ( p3 - p1 ) * 0.5;\r\n\tconst t2 = t * t;\r\n\tconst t3 = t * t2;\r\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction QuadraticBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP1( t, p ) {\r\n\r\n\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP2( t, p ) {\r\n\r\n\treturn t * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezier( t, p0, p1, p2 ) {\r\n\r\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\r\n\t\tQuadraticBezierP2( t, p2 );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction CubicBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * k * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP1( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn 3 * k * k * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP2( t, p ) {\r\n\r\n\treturn 3 * ( 1 - t ) * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP3( t, p ) {\r\n\r\n\treturn t * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\r\n\r\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\r\n\t\tCubicBezierP3( t, p3 );\r\n\r\n}\r\n\r\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\tthis.v3 = v3 || new Vector2();\r\n\r\n}\r\n\r\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\r\n\r\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\r\n\r\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\tthis.v3 = v3 || new Vector3();\r\n\r\n}\r\n\r\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\r\n\r\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\r\n\r\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\r\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve';\r\n\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nLineCurve.prototype = Object.create( Curve.prototype );\r\nLineCurve.prototype.constructor = LineCurve;\r\n\r\nLineCurve.prototype.isLineCurve = true;\r\n\r\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\r\n\r\n\tconst tangent = optionalTarget || new Vector2();\r\n\r\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\nLineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve3( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve3';\r\n\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nLineCurve3.prototype = Object.create( Curve.prototype );\r\nLineCurve3.prototype.constructor = LineCurve3;\r\n\r\nLineCurve3.prototype.isLineCurve3 = true;\r\n\r\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\r\n\r\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\r\n\r\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\r\n\r\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\r\n\r\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\r\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction SplineCurve( points ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'SplineCurve';\r\n\r\n\tthis.points = points || [];\r\n\r\n}\r\n\r\nSplineCurve.prototype = Object.create( Curve.prototype );\r\nSplineCurve.prototype.constructor = SplineCurve;\r\n\r\nSplineCurve.prototype.isSplineCurve = true;\r\n\r\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst points = this.points;\r\n\tconst p = ( points.length - 1 ) * t;\r\n\r\n\tconst intPoint = Math.floor( p );\r\n\tconst weight = p - intPoint;\r\n\r\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tconst p1 = points[ intPoint ];\r\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tpoint.set(\r\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\r\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nSplineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nSplineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nSplineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector2().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Curves = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tArcCurve: ArcCurve,\r\n\tCatmullRomCurve3: CatmullRomCurve3,\r\n\tCubicBezierCurve: CubicBezierCurve,\r\n\tCubicBezierCurve3: CubicBezierCurve3,\r\n\tEllipseCurve: EllipseCurve,\r\n\tLineCurve: LineCurve,\r\n\tLineCurve3: LineCurve3,\r\n\tQuadraticBezierCurve: QuadraticBezierCurve,\r\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\r\n\tSplineCurve: SplineCurve\r\n});\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nfunction CurvePath() {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CurvePath';\r\n\r\n\tthis.curves = [];\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n}\r\n\r\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\r\n\r\n\tconstructor: CurvePath,\r\n\r\n\tadd: function ( curve ) {\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t},\r\n\r\n\tclosePath: function () {\r\n\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconst d = t * this.getLength();\r\n\t\tconst curveLengths = this.getCurveLengths();\r\n\t\tlet i = 0;\r\n\r\n\t\t// To think about boundaries points.\r\n\r\n\t\twhile ( i < curveLengths.length ) {\r\n\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\t\tconst diff = curveLengths[ i ] - d;\r\n\t\t\t\tconst curve = this.curves[ i ];\r\n\r\n\t\t\t\tconst segmentLength = curve.getLength();\r\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\r\n\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ti ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n\t},\r\n\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// cacheLengths must be recalculated.\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.cacheLengths = null;\r\n\t\tthis.getCurveLengths();\r\n\r\n\t},\r\n\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n\tgetCurveLengths: function () {\r\n\r\n\t\t// We use cache values if curves and cache array are same length\r\n\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\t\treturn this.cacheLengths;\r\n\r\n\t\t}\r\n\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\r\n\t\tconst lengths = [];\r\n\t\tlet sums = 0;\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheLengths = lengths;\r\n\r\n\t\treturn lengths;\r\n\r\n\t},\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 40;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tdivisions = divisions || 12;\r\n\r\n\t\tconst points = [];\r\n\t\tlet last;\r\n\r\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\r\n\r\n\t\t\tconst curve = curves[ i ];\r\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\r\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\r\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\r\n\t\t\t\t\t\t: divisions;\r\n\r\n\t\t\tconst pts = curve.getPoints( resolution );\r\n\r\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\r\n\r\n\t\t\t\tconst point = pts[ j ];\r\n\r\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\r\n\r\n\t\t\t\tpoints.push( point );\r\n\t\t\t\tlast = point;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurve.prototype.copy.call( this, source );\r\n\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = source.curves[ i ];\r\n\r\n\t\t\tthis.curves.push( curve.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoClose = source.autoClose;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\t\tdata.autoClose = this.autoClose;\r\n\t\tdata.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = this.curves[ i ];\r\n\t\t\tdata.curves.push( curve.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.autoClose = json.autoClose;\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = json.curves[ i ];\r\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Path( points ) {\r\n\r\n\tCurvePath.call( this );\r\n\r\n\tthis.type = 'Path';\r\n\r\n\tthis.currentPoint = new Vector2();\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.setFromPoints( points );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n\tconstructor: Path,\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\r\n\r\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tconst curve = new QuadraticBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCPx, aCPy ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tconst curve = new CubicBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCP1x, aCP1y ),\r\n\t\t\tnew Vector2( aCP2x, aCP2y ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\r\n\r\n\t\tconst curve = new SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\tif ( this.curves.length > 0 ) {\r\n\r\n\t\t\t// if a previous curve is present, attempt to join\r\n\t\t\tconst firstPoint = curve.getPoint( 0 );\r\n\r\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\r\n\r\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tconst lastPoint = curve.getPoint( 1 );\r\n\t\tthis.currentPoint.copy( lastPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurvePath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.currentPoint.copy( source.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\r\n\r\n\t\tdata.currentPoint = this.currentPoint.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurvePath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.currentPoint.fromArray( json.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Shape( points ) {\r\n\r\n\tPath.call( this, points );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.type = 'Shape';\r\n\r\n\tthis.holes = [];\r\n\r\n}\r\n\r\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\r\n\r\n\tconstructor: Shape,\r\n\r\n\tgetPointsHoles: function ( divisions ) {\r\n\r\n\t\tconst holesPts = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t\t}\r\n\r\n\t\treturn holesPts;\r\n\r\n\t},\r\n\r\n\t// get points of shape and holes (keypoints based on segments parameter)\r\n\r\n\textractPoints: function ( divisions ) {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tshape: this.getPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tPath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = source.holes[ i ];\r\n\r\n\t\t\tthis.holes.push( hole.clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Path.prototype.toJSON.call( this );\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = this.holes[ i ];\r\n\t\t\tdata.holes.push( hole.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tPath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.uuid = json.uuid;\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = json.holes[ i ];\r\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Light( color, intensity ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n}\r\n\r\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Light,\r\n\r\n\tisLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.intensity = source.intensity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\r\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\r\n\r\n\tLight.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new Color( groundColor );\r\n\r\n}\r\n\r\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: HemisphereLight,\r\n\r\n\tisHemisphereLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightShadow( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.normalBias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.mapPass = null;\r\n\tthis.matrix = new Matrix4();\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis._frustum = new Frustum();\r\n\tthis._frameExtents = new Vector2( 1, 1 );\r\n\r\n\tthis._viewportCount = 1;\r\n\r\n\tthis._viewports = [\r\n\r\n\t\tnew Vector4( 0, 0, 1, 1 )\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( LightShadow.prototype, {\r\n\r\n\t_projScreenMatrix: new Matrix4(),\r\n\r\n\t_lightPositionWorld: new Vector3(),\r\n\r\n\t_lookTarget: new Vector3(),\r\n\r\n\tgetViewportCount: function () {\r\n\r\n\t\treturn this._viewportCount;\r\n\r\n\t},\r\n\r\n\tgetFrustum: function () {\r\n\r\n\t\treturn this._frustum;\r\n\r\n\t},\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst shadowCamera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tshadowCamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\tshadowCamera.lookAt( lookTarget );\r\n\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t\tshadowMatrix.set(\r\n\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t);\r\n\r\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t},\r\n\r\n\tgetViewport: function ( viewportIndex ) {\r\n\r\n\t\treturn this._viewports[ viewportIndex ];\r\n\r\n\t},\r\n\r\n\tgetFrameExtents: function () {\r\n\r\n\t\treturn this._frameExtents;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\r\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\r\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\r\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\r\n\r\n\t\tobject.camera = this.camera.toJSON( false ).object;\r\n\t\tdelete object.camera.matrix;\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n}\r\n\r\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: SpotLightShadow,\r\n\r\n\tisSpotLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle;\r\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\r\n\t\tconst far = light.distance || camera.far;\r\n\r\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n\t\t\tcamera.fov = fov;\r\n\t\t\tcamera.aspect = aspect;\r\n\t\t\tcamera.far = far;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / Math.PI;\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new SpotLightShadow();\r\n\r\n}\r\n\r\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: SpotLight,\r\n\r\n\tisSpotLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.penumbra = source.penumbra;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n\tthis._frameExtents = new Vector2( 4, 2 );\r\n\r\n\tthis._viewportCount = 6;\r\n\r\n\tthis._viewports = [\r\n\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t// following orientation:\r\n\t\t//\r\n\t\t//  xzXZ\r\n\t\t//   y Y\r\n\t\t//\r\n\t\t// X - Positive x direction\r\n\t\t// x - Negative x direction\r\n\t\t// Y - Positive y direction\r\n\t\t// y - Negative y direction\r\n\t\t// Z - Positive z direction\r\n\t\t// z - Negative z direction\r\n\r\n\t\t// positive X\r\n\t\tnew Vector4( 2, 1, 1, 1 ),\r\n\t\t// negative X\r\n\t\tnew Vector4( 0, 1, 1, 1 ),\r\n\t\t// positive Z\r\n\t\tnew Vector4( 3, 1, 1, 1 ),\r\n\t\t// negative Z\r\n\t\tnew Vector4( 1, 1, 1, 1 ),\r\n\t\t// positive Y\r\n\t\tnew Vector4( 3, 0, 1, 1 ),\r\n\t\t// negative Y\r\n\t\tnew Vector4( 1, 0, 1, 1 )\r\n\t];\r\n\r\n\tthis._cubeDirections = [\r\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\r\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tthis._cubeUps = [\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n}\r\n\r\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: PointLightShadow,\r\n\r\n\tisPointLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light, viewportIndex ) {\r\n\r\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\r\n\r\n\t\tconst camera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tcamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.copy( camera.position );\r\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\r\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\r\n\t\tcamera.lookAt( lookTarget );\r\n\t\tcamera.updateMatrixWorld();\r\n\r\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLight( color, intensity, distance, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new PointLightShadow();\r\n\r\n}\r\n\r\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: PointLight,\r\n\r\n\tisPointLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\tthis.view = null;\r\n\r\n\tthis.left = ( left !== undefined ) ? left : - 1;\r\n\tthis.right = ( right !== undefined ) ? right : 1;\r\n\tthis.top = ( top !== undefined ) ? top : 1;\r\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: OrthographicCamera,\r\n\r\n\tisOrthographicCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\r\n\t\tthis.zoom = source.zoom;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tconst cx = ( this.right + this.left ) / 2;\r\n\t\tconst cy = ( this.top + this.bottom ) / 2;\r\n\r\n\t\tlet left = cx - dx;\r\n\t\tlet right = cx + dx;\r\n\t\tlet top = cy + dy;\r\n\t\tlet bottom = cy - dy;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\r\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\r\n\r\n\t\t\tleft += scaleW * this.view.offsetX;\r\n\t\t\tright = left + scaleW * this.view.width;\r\n\t\t\ttop -= scaleH * this.view.offsetY;\r\n\t\t\tbottom = top - scaleH * this.view.height;\r\n\r\n\t\t}\r\n\r\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLightShadow() {\r\n\r\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n}\r\n\r\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: DirectionalLightShadow,\r\n\r\n\tisDirectionalLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tthis.shadow = new DirectionalLightShadow();\r\n\r\n}\r\n\r\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: DirectionalLight,\r\n\r\n\tisDirectionalLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n}\r\n\r\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: AmbientLight,\r\n\r\n\tisAmbientLight: true\r\n\r\n} );\r\n\r\nfunction RectAreaLight( color, intensity, width, height ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'RectAreaLight';\r\n\r\n\tthis.width = ( width !== undefined ) ? width : 10;\r\n\tthis.height = ( height !== undefined ) ? height : 10;\r\n\r\n}\r\n\r\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: RectAreaLight,\r\n\r\n\tisRectAreaLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.width = this.width;\r\n\t\tdata.object.height = this.height;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Primary reference:\r\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n *\r\n * Secondary reference:\r\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\r\n */\r\n\r\n// 3-band SH defined by 9 coefficients\r\n\r\nfunction SphericalHarmonics3() {\r\n\r\n\tthis.coefficients = [];\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\tthis.coefficients.push( new Vector3() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( SphericalHarmonics3.prototype, {\r\n\r\n\tisSphericalHarmonics3: true,\r\n\r\n\tset: function ( coefficients ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tzero: function () {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// get the radiance in the direction of the normal\r\n\t// target is a Vector3\r\n\tgetAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\r\n\t// target is a Vector3\r\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n\tgetIrradianceAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tadd: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledSH: function ( sh, s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( sh, alpha ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcopy: function ( sh ) {\r\n\r\n\t\treturn this.set( sh.coefficients );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( SphericalHarmonics3, {\r\n\r\n\t// evaluate the basis functions\r\n\t// shBasis is an Array[ 9 ]\r\n\tgetBasisAt: function ( normal, shBasis ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\t// band 0\r\n\t\tshBasis[ 0 ] = 0.282095;\r\n\r\n\t\t// band 1\r\n\t\tshBasis[ 1 ] = 0.488603 * y;\r\n\t\tshBasis[ 2 ] = 0.488603 * z;\r\n\t\tshBasis[ 3 ] = 0.488603 * x;\r\n\r\n\t\t// band 2\r\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\r\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\r\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\r\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\r\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightProbe( sh, intensity ) {\r\n\r\n\tLight.call( this, undefined, intensity );\r\n\r\n\tthis.type = 'LightProbe';\r\n\r\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\r\n\r\n}\r\n\r\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: LightProbe,\r\n\r\n\tisLightProbe: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.sh.copy( source.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\r\n\t\tthis.sh.fromArray( json.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.sh = this.sh.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction MaterialLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.textures = {};\r\n\r\n}\r\n\r\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst textures = this.textures;\r\n\r\n\t\tfunction getTexture( name ) {\r\n\r\n\t\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn textures[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tconst material = new Materials[ json.type ]();\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\r\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\r\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\r\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\r\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\r\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\r\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\r\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\r\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\r\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\r\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\r\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\r\n\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\r\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\r\n\r\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\r\n\r\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\r\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\r\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\r\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\r\n\r\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\r\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\r\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\r\n\r\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\r\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\r\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\r\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\r\n\r\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\r\n\r\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\r\n\r\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\r\n\r\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\r\n\r\n\t\tif ( json.vertexColors !== undefined ) {\r\n\r\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\r\n\r\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Shader Material\r\n\r\n\t\tif ( json.uniforms !== undefined ) {\r\n\r\n\t\t\tfor ( const name in json.uniforms ) {\r\n\r\n\t\t\t\tconst uniform = json.uniforms[ name ];\r\n\r\n\t\t\t\tmaterial.uniforms[ name ] = {};\r\n\r\n\t\t\t\tswitch ( uniform.type ) {\r\n\r\n\t\t\t\t\tcase 't':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v2':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'm3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\r\n\r\n\t\t\t\t\tcase 'm4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\r\n\t\tif ( json.extensions !== undefined ) {\r\n\r\n\t\t\tfor ( const key in json.extensions ) {\r\n\r\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Deprecated\r\n\r\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\r\n\r\n\t\t// for PointsMaterial\r\n\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\r\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\r\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tlet normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\r\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\r\n\r\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\r\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\r\n\r\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\r\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\r\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\r\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\r\n\r\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\r\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\r\n\r\n\t\treturn material;\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst LoaderUtils = {\r\n\r\n\tdecodeText: function ( array ) {\r\n\r\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n\t\t\treturn new TextDecoder().decode( array );\r\n\r\n\t\t}\r\n\r\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n\t\tlet s = '';\r\n\r\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t// Implicitly assumes little-endian.\r\n\t\t\ts += String.fromCharCode( array[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// merges multi-byte utf-8 characters.\r\n\r\n\t\t\treturn decodeURIComponent( escape( s ) );\r\n\r\n\t\t} catch ( e ) { // see #16358\r\n\r\n\t\t\treturn s;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconst index = url.lastIndexOf( '/' );\r\n\r\n\t\tif ( index === - 1 ) return './';\r\n\r\n\t\treturn url.substr( 0, index + 1 );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction InstancedBufferGeometry() {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.instanceCount = Infinity;\r\n\r\n}\r\n\r\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\r\n\r\n\tconstructor: InstancedBufferGeometry,\r\n\r\n\tisInstancedBufferGeometry: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferGeometry.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceCount = source.instanceCount;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\t\tdata.instanceCount = this.instanceCount;\r\n\r\n\t\tdata.isInstancedBufferGeometry = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\r\n\r\n\tif ( typeof ( normalized ) === 'number' ) {\r\n\r\n\t\tmeshPerAttribute = normalized;\r\n\r\n\t\tnormalized = false;\r\n\r\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\r\n\r\n\t}\r\n\r\n\tBufferAttribute.call( this, array, itemSize, normalized );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\r\n\r\n\tconstructor: InstancedBufferAttribute,\r\n\r\n\tisInstancedBufferAttribute: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferAttribute.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ()\t{\r\n\r\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\r\n\r\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\tdata.isInstancedBufferAttribute = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction BufferGeometryLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst interleavedBufferMap = {};\r\n\t\tconst arrayBufferMap = {};\r\n\r\n\t\tfunction getInterleavedBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\r\n\r\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\r\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\r\n\r\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\r\n\r\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\r\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\r\n\t\t\tib.uuid = interleavedBuffer.uuid;\r\n\r\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\r\n\r\n\t\t\treturn ib;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getArrayBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\r\n\r\n\t\t\tconst arrayBuffers = json.arrayBuffers;\r\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\r\n\r\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\r\n\r\n\t\t\tarrayBufferMap[ uuid ] = ab;\r\n\r\n\t\t\treturn ab;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\r\n\r\n\t\tconst index = json.data.index;\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = json.data.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\t\t\tlet bufferAttribute;\r\n\r\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\r\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = json.data.morphAttributes;\r\n\r\n\t\tif ( morphAttributes ) {\r\n\r\n\t\t\tfor ( const key in morphAttributes ) {\r\n\r\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst attribute = attributeArray[ i ];\r\n\t\t\t\t\tlet bufferAttribute;\r\n\r\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\t\t\tarray.push( bufferAttribute );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\r\n\r\n\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\tgeometry.morphTargetsRelative = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tconst center = new Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.name ) geometry.name = json.name;\r\n\t\tif ( json.userData ) geometry.userData = json.userData;\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TYPED_ARRAYS = {\r\n\tInt8Array: Int8Array,\r\n\tUint8Array: Uint8Array,\r\n\t// Workaround for IE11 pre KB2929437. See #11440\r\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\r\n\tInt16Array: Int16Array,\r\n\tUint16Array: Uint16Array,\r\n\tInt32Array: Int32Array,\r\n\tUint32Array: Uint32Array,\r\n\tFloat32Array: Float32Array,\r\n\tFloat64Array: Float64Array\r\n};\r\n\r\nfunction ObjectLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\r\n\t\tthis.resourcePath = this.resourcePath || path;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json = null;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\tif ( onError !== undefined ) onError( error );\r\n\r\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.parse( json, onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tconst shapes = this.parseShape( json.shapes );\r\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\r\n\r\n\t\tconst images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tconst textures = this.parseTextures( json.textures, images );\r\n\t\tconst materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tconst object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseShape: function ( json ) {\r\n\r\n\t\tconst shapes = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\r\n\r\n\t\t\t\tshapes[ shape.uuid ] = shape;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json, shapes ) {\r\n\r\n\t\tconst geometries = {};\r\n\t\tlet geometryShapes;\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlet geometry;\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ConeGeometry':\r\n\t\t\t\t\tcase 'ConeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TubeGeometry':\r\n\t\t\t\t\tcase 'TubeBufferGeometry':\r\n\r\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\r\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.closed\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\t\t\t\t\tcase 'LatheBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'PolyhedronGeometry':\r\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.vertices,\r\n\t\t\t\t\t\t\tdata.indices,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.details\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ShapeGeometry':\r\n\t\t\t\t\tcase 'ShapeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.curveSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\t\tcase 'ExtrudeGeometry':\r\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst extrudePath = data.options.extrudePath;\r\n\r\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.options\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\t\t\t\t\tcase 'InstancedBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tconst cache = {}; // MultiMaterial\r\n\t\tconst materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst loader = new MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\r\n\r\n\t\t\t\t\t// Deprecated\r\n\r\n\t\t\t\t\tconst array = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst material = data.materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = array;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst data = json[ i ];\r\n\r\n\t\t\tconst clip = AnimationClip.parse( data );\r\n\r\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tconst scope = this;\r\n\t\tconst images = {};\r\n\r\n\t\tlet loader;\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, undefined, function () {\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tconst manager = new LoadingManager( onLoad );\r\n\r\n\t\t\tloader = new ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst image = json[ i ];\r\n\t\t\t\tconst url = image.url;\r\n\r\n\t\t\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\t\t\t// load array of images e.g CubeTexture\r\n\r\n\t\t\t\t\timages[ image.uuid ] = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst currentUrl = url[ j ];\r\n\r\n\t\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\r\n\r\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// load single image\r\n\r\n\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\r\n\r\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value, type ) {\r\n\r\n\t\t\tif ( typeof value === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn type[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tconst textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet texture;\r\n\r\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\r\n\r\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\r\n\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\r\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\r\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\r\n\r\n\t\t\t\tif ( data.wrap !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\r\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\r\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\r\n\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\r\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\r\n\r\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\r\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function ( data, geometries, materials ) {\r\n\r\n\t\tlet object;\r\n\r\n\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometries[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\tif ( Array.isArray( name ) ) {\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tconst uuid = name[ i ];\r\n\r\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tarray.push( materials[ uuid ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn materials[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tlet geometry, material;\r\n\r\n\t\tswitch ( data.type ) {\r\n\r\n\t\t\tcase 'Scene':\r\n\r\n\t\t\t\tobject = new Scene();\r\n\r\n\t\t\t\tif ( data.background !== undefined ) {\r\n\r\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\r\n\r\n\t\t\t\t\t\tobject.background = new Color( data.background );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.fog !== undefined ) {\r\n\r\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\r\n\r\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'RectAreaLight':\r\n\r\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LightProbe':\r\n\r\n\t\t\t\tobject = new LightProbe().fromJSON( data );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SkinnedMesh':\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\r\n\r\n\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\r\n\t\t\t\tobject = new Mesh( geometry, material );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'InstancedMesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\t\t\t\tconst count = data.count;\r\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\r\n\r\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\r\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LOD':\r\n\r\n\t\t\t\tobject = new LOD();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Line':\r\n\r\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineLoop':\r\n\r\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineSegments':\r\n\r\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointCloud':\r\n\t\t\tcase 'Points':\r\n\r\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Group':\r\n\r\n\t\t\t\tobject = new Group();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tobject = new Object3D();\r\n\r\n\t\t}\r\n\r\n\t\tobject.uuid = data.uuid;\r\n\r\n\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\r\n\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\tobject.matrix.fromArray( data.matrix );\r\n\r\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\r\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\r\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\tif ( data.shadow ) {\r\n\r\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\r\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\r\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\r\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\r\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\r\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\r\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\r\n\r\n\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\tconst children = data.children;\r\n\r\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\r\n\r\n\t\t\tconst levels = data.levels;\r\n\r\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\tconst level = levels[ l ];\r\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TEXTURE_MAPPING = {\r\n\tUVMapping: UVMapping,\r\n\tCubeReflectionMapping: CubeReflectionMapping,\r\n\tCubeRefractionMapping: CubeRefractionMapping,\r\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\r\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\r\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\r\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\r\n};\r\n\r\nconst TEXTURE_WRAPPING = {\r\n\tRepeatWrapping: RepeatWrapping,\r\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\r\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\r\n};\r\n\r\nconst TEXTURE_FILTER = {\r\n\tNearestFilter: NearestFilter,\r\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\r\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\r\n\tLinearFilter: LinearFilter,\r\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\r\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\r\n};\r\n\r\nfunction ImageBitmapLoader( manager ) {\r\n\r\n\tif ( typeof createImageBitmap === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\r\n\r\n\t}\r\n\r\n\tif ( typeof fetch === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\r\n\r\n\t}\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.options = { premultiplyAlpha: 'none' };\r\n\r\n}\r\n\r\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageBitmapLoader,\r\n\r\n\tisImageBitmapLoader: true,\r\n\r\n\tsetOptions: function setOptions( options ) {\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tfetch( url ).then( function ( res ) {\r\n\r\n\t\t\treturn res.blob();\r\n\r\n\t\t} ).then( function ( blob ) {\r\n\r\n\t\t\treturn createImageBitmap( blob, scope.options );\r\n\r\n\t\t} ).then( function ( imageBitmap ) {\r\n\r\n\t\t\tCache.add( url, imageBitmap );\r\n\r\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} ).catch( function ( e ) {\r\n\r\n\t\t\tif ( onError ) onError( e );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ShapePath() {\r\n\r\n\tthis.type = 'ShapePath';\r\n\r\n\tthis.color = new Color();\r\n\r\n\tthis.subPaths = [];\r\n\tthis.currentPath = null;\r\n\r\n}\r\n\r\nObject.assign( ShapePath.prototype, {\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath = new Path();\r\n\t\tthis.subPaths.push( this.currentPath );\r\n\t\tthis.currentPath.moveTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath.lineTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts ) {\r\n\r\n\t\tthis.currentPath.splineThru( pts );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoShapes: function ( isCCW, noHoles ) {\r\n\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\t\tconst shapes = [];\r\n\r\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\t\tconst tmpShape = new Shape();\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\t\tconst polyLen = inPolygon.length;\r\n\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tlet inside = false;\r\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\r\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn\tinside;\r\n\r\n\t\t}\r\n\r\n\t\tconst isClockWise = ShapeUtils.isClockWise;\r\n\r\n\t\tconst subPaths = this.subPaths;\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tlet solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\t\tif ( subPaths.length === 1 ) {\r\n\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new Shape();\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\t\tconst betterShapeHoles = [];\r\n\t\tconst newShapes = [];\r\n\t\tlet newShapeHoles = [];\r\n\t\tlet mainIdx = 0;\r\n\t\tlet tmpPoints;\r\n\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\t\tif ( solid ) {\r\n\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t\t//console.log('cw', i);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t\t//console.log('ccw', i);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tif ( newShapes.length > 1 ) {\r\n\r\n\t\t\tlet ambiguous = false;\r\n\t\t\tconst toChange = [];\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\tconst ho = sho[ hIdx ];\r\n\t\t\t\t\tlet hole_unassigned = true;\r\n\r\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet tmpHoles;\r\n\r\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Font( data ) {\r\n\r\n\tthis.type = 'Font';\r\n\r\n\tthis.data = data;\r\n\r\n}\r\n\r\nObject.assign( Font.prototype, {\r\n\r\n\tisFont: true,\r\n\r\n\tgenerateShapes: function ( text, size ) {\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\r\n\t\tconst shapes = [];\r\n\t\tconst paths = createPaths( text, size, this.data );\r\n\r\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction createPaths( text, size, data ) {\r\n\r\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\r\n\tconst scale = size / data.resolution;\r\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\r\n\r\n\tconst paths = [];\r\n\r\n\tlet offsetX = 0, offsetY = 0;\r\n\r\n\tfor ( let i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\tconst char = chars[ i ];\r\n\r\n\t\tif ( char === '\\n' ) {\r\n\r\n\t\t\toffsetX = 0;\r\n\t\t\toffsetY -= line_height;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\r\n\t\t\toffsetX += ret.offsetX;\r\n\t\t\tpaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn paths;\r\n\r\n}\r\n\r\nfunction createPath( char, scale, offsetX, offsetY, data ) {\r\n\r\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\r\n\r\n\tif ( ! glyph ) {\r\n\r\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tconst path = new ShapePath();\r\n\r\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n\r\n\tif ( glyph.o ) {\r\n\r\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\tconst action = outline[ i ++ ];\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { offsetX: glyph.ha * scale, path: path };\r\n\r\n}\r\n\r\nfunction FontLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst font = scope.parse( json );\r\n\r\n\t\t\tif ( onLoad ) onLoad( font );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\treturn new Font( json );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _context;\r\n\r\nconst AudioContext = {\r\n\r\n\tgetContext: function () {\r\n\r\n\t\tif ( _context === undefined ) {\r\n\r\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\t\t}\r\n\r\n\t\treturn _context;\r\n\r\n\t},\r\n\r\n\tsetContext: function ( value ) {\r\n\r\n\t\t_context = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction AudioLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AudioLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\r\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\r\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\r\n\r\n\t\t\t\tconst context = AudioContext.getContext();\r\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\r\n\r\n\t\t\t\t\tonLoad( audioBuffer );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( skyColor );\r\n\tconst color2 = new Color().set( groundColor );\r\n\r\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\r\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\r\n\r\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\r\n\tconst c0 = Math.sqrt( Math.PI );\r\n\tconst c1 = c0 * Math.sqrt( 0.75 );\r\n\r\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\r\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\r\n\r\n}\r\n\r\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: HemisphereLightProbe,\r\n\r\n\tisHemisphereLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying colors not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLightProbe( color, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( color );\r\n\r\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\r\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\r\n\r\n}\r\n\r\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: AmbientLightProbe,\r\n\r\n\tisAmbientLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying color not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _eyeRight = new Matrix4();\r\nconst _eyeLeft = new Matrix4();\r\n\r\nfunction StereoCamera() {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.eyeSep = 0.064;\r\n\r\n\tthis.cameraL = new PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n\tthis._cache = {\r\n\t\tfocus: null,\r\n\t\tfov: null,\r\n\t\taspect: null,\r\n\t\tnear: null,\r\n\t\tfar: null,\r\n\t\tzoom: null,\r\n\t\teyeSep: null\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( StereoCamera.prototype, {\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\r\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\r\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\tcache.focus = camera.focus;\r\n\t\t\tcache.fov = camera.fov;\r\n\t\t\tcache.aspect = camera.aspect * this.aspect;\r\n\t\t\tcache.near = camera.near;\r\n\t\t\tcache.far = camera.far;\r\n\t\t\tcache.zoom = camera.zoom;\r\n\t\t\tcache.eyeSep = this.eyeSep;\r\n\r\n\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\r\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\r\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\r\n\t\t\tlet xmin, xmax;\r\n\r\n\t\t\t// translate xOffset\r\n\r\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\r\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\r\n\r\n\t\t\t// for left eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t// for right eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\r\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Clock( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n}\r\n\r\nObject.assign( Clock.prototype, {\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.elapsedTime = 0;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\t\tthis.autoStart = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tlet diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tconst newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\r\n\r\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$2 = new Vector3();\r\nconst _quaternion$3 = new Quaternion();\r\nconst _scale$1 = new Vector3();\r\nconst _orientation = new Vector3();\r\n\r\nfunction AudioListener() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = AudioContext.getContext();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n\tthis.timeDelta = 0;\r\n\r\n\t// private\r\n\r\n\tthis._clock = new Clock();\r\n\r\n}\r\n\r\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: AudioListener,\r\n\r\n\tgetInput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tremoveFilter: function ( ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\t\t\tthis.gain.connect( this.context.destination );\r\n\t\t\tthis.filter = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.filter;\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( value ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t\t}\r\n\r\n\t\tthis.filter = value;\r\n\t\tthis.gain.connect( this.filter );\r\n\t\tthis.filter.connect( this.context.destination );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMasterVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetMasterVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tconst listener = this.context.listener;\r\n\t\tconst up = this.up;\r\n\r\n\t\tthis.timeDelta = this._clock.getDelta();\r\n\r\n\t\tthis.matrixWorld.decompose( _position$2, _quaternion$3, _scale$1 );\r\n\r\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion$3 );\r\n\r\n\t\tif ( listener.positionX ) {\r\n\r\n\t\t\t// code path for Chrome (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\r\n\r\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$2.x, endTime );\r\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$2.y, endTime );\r\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$2.z, endTime );\r\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\r\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\r\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\r\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\r\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\r\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlistener.setPosition( _position$2.x, _position$2.y, _position$2.z );\r\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Audio( listener ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.listener = listener;\r\n\tthis.context = listener.context;\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.buffer = null;\r\n\tthis.detune = 0;\r\n\tthis.loop = false;\r\n\tthis.loopStart = 0;\r\n\tthis.loopEnd = 0;\r\n\tthis.offset = 0;\r\n\tthis.duration = undefined;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis._startedAt = 0;\r\n\tthis._progress = 0;\r\n\r\n\tthis.filters = [];\r\n\r\n}\r\n\r\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Audio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tsetNodeSource: function ( audioNode ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'audioNode';\r\n\t\tthis.source = audioNode;\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaElementSource: function ( mediaElement ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaNode';\r\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaStreamSource: function ( mediaStream ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaStreamNode';\r\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetBuffer: function ( audioBuffer ) {\r\n\r\n\t\tthis.buffer = audioBuffer;\r\n\t\tthis.sourceType = 'buffer';\r\n\r\n\t\tif ( this.autoplay ) this.play();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tplay: function ( delay ) {\r\n\r\n\t\tif ( delay === undefined ) delay = 0;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._startedAt = this.context.currentTime + delay;\r\n\r\n\t\tconst source = this.context.createBufferSource();\r\n\t\tsource.buffer = this.buffer;\r\n\t\tsource.loop = this.loop;\r\n\t\tsource.loopStart = this.loopStart;\r\n\t\tsource.loopEnd = this.loopEnd;\r\n\t\tsource.onended = this.onEnded.bind( this );\r\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.source = source;\r\n\r\n\t\tthis.setDetune( this.detune );\r\n\t\tthis.setPlaybackRate( this.playbackRate );\r\n\r\n\t\treturn this.connect();\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\t// update current progress\r\n\r\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\r\n\r\n\t\t\tif ( this.loop === true ) {\r\n\r\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\r\n\r\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.source.stop();\r\n\t\t\tthis.source.onended = null;\r\n\r\n\t\t\tthis.isPlaying = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._progress = 0;\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.source.onended = null;\r\n\t\tthis.isPlaying = false;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.connect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilters: function () {\r\n\r\n\t\treturn this.filters;\r\n\r\n\t},\r\n\r\n\tsetFilters: function ( value ) {\r\n\r\n\t\tif ( ! value ) value = [];\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filters = value;\r\n\t\t\tthis.connect();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.filters = value;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDetune: function ( value ) {\r\n\r\n\t\tthis.detune = value;\r\n\r\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDetune: function () {\r\n\r\n\t\treturn this.detune;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.getFilters()[ 0 ];\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( filter ) {\r\n\r\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\r\n\r\n\t},\r\n\r\n\tsetPlaybackRate: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.playbackRate = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetPlaybackRate: function () {\r\n\r\n\t\treturn this.playbackRate;\r\n\r\n\t},\r\n\r\n\tonEnded: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tgetLoop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.loop;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.loop = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.loop = this.loop;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopStart: function ( value ) {\r\n\r\n\t\tthis.loopStart = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopEnd: function ( value ) {\r\n\r\n\t\tthis.loopEnd = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$3 = new Vector3();\r\nconst _quaternion$4 = new Quaternion();\r\nconst _scale$2 = new Vector3();\r\nconst _orientation$1 = new Vector3();\r\n\r\nfunction PositionalAudio( listener ) {\r\n\r\n\tAudio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.panningModel = 'HRTF';\r\n\tthis.panner.connect( this.gain );\r\n\r\n}\r\n\r\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\r\n\r\n\tconstructor: PositionalAudio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.panner;\r\n\r\n\t},\r\n\r\n\tgetRefDistance: function () {\r\n\r\n\t\treturn this.panner.refDistance;\r\n\r\n\t},\r\n\r\n\tsetRefDistance: function ( value ) {\r\n\r\n\t\tthis.panner.refDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetRolloffFactor: function () {\r\n\r\n\t\treturn this.panner.rolloffFactor;\r\n\r\n\t},\r\n\r\n\tsetRolloffFactor: function ( value ) {\r\n\r\n\t\tthis.panner.rolloffFactor = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDistanceModel: function () {\r\n\r\n\t\treturn this.panner.distanceModel;\r\n\r\n\t},\r\n\r\n\tsetDistanceModel: function ( value ) {\r\n\r\n\t\tthis.panner.distanceModel = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxDistance: function () {\r\n\r\n\t\treturn this.panner.maxDistance;\r\n\r\n\t},\r\n\r\n\tsetMaxDistance: function ( value ) {\r\n\r\n\t\tthis.panner.maxDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDirectionalCone: function ( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\r\n\r\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\r\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\r\n\t\tthis.panner.coneOuterGain = coneOuterGain;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\r\n\r\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$4, _scale$2 );\r\n\r\n\t\t_orientation$1.set( 0, 0, 1 ).applyQuaternion( _quaternion$4 );\r\n\r\n\t\tconst panner = this.panner;\r\n\r\n\t\tif ( panner.positionX ) {\r\n\r\n\t\t\t// code path for Chrome and Firefox (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\r\n\r\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position$3.x, endTime );\r\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position$3.y, endTime );\r\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position$3.z, endTime );\r\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation$1.x, endTime );\r\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation$1.y, endTime );\r\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation$1.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpanner.setPosition( _position$3.x, _position$3.y, _position$3.z );\r\n\t\t\tpanner.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AudioAnalyser( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n}\r\n\r\nObject.assign( AudioAnalyser.prototype, {\r\n\r\n\tgetFrequencyData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\r\n\t\treturn this.data;\r\n\r\n\t},\r\n\r\n\tgetAverageFrequency: function () {\r\n\r\n\t\tlet value = 0;\r\n\t\tconst data = this.getFrequencyData();\r\n\r\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\tvalue += data[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn value / data.length;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PropertyMixer( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tlet mixFunction,\r\n\t\tmixFunctionAdditive,\r\n\t\tsetIdentity;\r\n\r\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\t//\r\n\t// 'add' is used for additive cumulative results\r\n\t//\r\n\t// 'work' is optional and is only present for quaternion types. It is used\r\n\t// to store intermediate quaternion multiplication results\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\r\n\t\t\tmixFunction = this._slerp;\r\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\r\n\t\t\tthis._workIndex = 5;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\t\t\tmixFunction = this._select;\r\n\r\n\t\t\t// Use the regular mix function and for additive on these types,\r\n\t\t\t// additive is not relevant for non-numeric types\r\n\t\t\tmixFunctionAdditive = this._select;\r\n\r\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\r\n\r\n\t\t\tthis.buffer = new Array( valueSize * 5 );\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tmixFunction = this._lerp;\r\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\r\n\r\n\t}\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\r\n\tthis._setIdentity = setIdentity;\r\n\tthis._origIndex = 3;\r\n\tthis._addIndex = 4;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n}\r\n\r\nObject.assign( PropertyMixer.prototype, {\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function ( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride;\r\n\r\n\t\tlet currentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tconst mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// accumulate data in the 'incoming' region into 'add'\r\n\taccumulateAdditive: function ( weight ) {\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = stride * this._addIndex;\r\n\r\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\r\n\r\n\t\t\t// add = identity\r\n\r\n\t\t\tthis._setIdentity();\r\n\r\n\t\t}\r\n\r\n\t\t// add := add + incoming * weight\r\n\r\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\r\n\t\tthis.cumulativeWeightAdditive += weight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function ( accuIndex ) {\r\n\r\n\t\tconst stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tconst originalValueOffset = stride * this._origIndex;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tif ( weightAdditive > 0 ) {\r\n\r\n\t\t\t// accuN := accuN + additive accuN\r\n\r\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function () {\r\n\r\n\t\tconst binding = this.binding;\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * this._origIndex;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\t// Add to identity for additive\r\n\t\tthis._setIdentity();\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function () {\r\n\r\n\t\tconst originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityNumeric: function () {\r\n\r\n\t\tconst startIndex = this._addIndex * this.valueSize;\r\n\t\tconst endIndex = startIndex + this.valueSize;\r\n\r\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityQuaternion: function () {\r\n\r\n\t\tthis._setAdditiveIdentityNumeric();\r\n\t\tthis.buffer[ this._addIndex * 4 + 3 ] = 1;\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityOther: function () {\r\n\r\n\t\tconst startIndex = this._origIndex * this.valueSize;\r\n\t\tconst targetIndex = this._addIndex * this.valueSize;\r\n\r\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\r\n\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst workOffset = this._workIndex * stride;\r\n\r\n\t\t// Store result in intermediate buffer offset\r\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\r\n\r\n\t\t// Slerp to the intermediate result\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst s = 1 - t;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// Characters [].:/ are reserved for track binding syntax.\r\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\r\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\r\n\r\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\r\n// only latin characters, and the unicode \\p{L} is not yet supported. So\r\n// instead, we exclude reserved characters and match everything else.\r\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\r\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\r\n\r\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\r\n// be matched to parse the rest of the track name.\r\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\r\n\r\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\r\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\r\n\r\n// Object on target node, and accessor. May not contain reserved\r\n// characters. Accessor may contain any character except closing bracket.\r\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\r\n\r\n// Property and accessor. May not contain reserved characters. Accessor may\r\n// contain any non-bracket characters.\r\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\r\n\r\nconst _trackRe = new RegExp( ''\r\n\t+ '^'\r\n\t+ _directoryRe\r\n\t+ _nodeRe\r\n\t+ _objectRe\r\n\t+ _propertyRe\r\n\t+ '$'\r\n);\r\n\r\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\r\n\r\nfunction Composite( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n}\r\n\r\nObject.assign( Composite.prototype, {\r\n\r\n\tgetValue: function ( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function ( array, offset ) {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\nfunction PropertyBinding( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n}\r\n\r\nObject.assign( PropertyBinding, {\r\n\r\n\tComposite: Composite,\r\n\r\n\tcreate: function ( root, path, parsedPath ) {\r\n\r\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\r\n\r\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Replaces spaces with underscores and removes unsupported characters from\r\n\t * node names, to ensure compatibility with parseTrackName().\r\n\t *\r\n\t * @param {string} name Node name to be sanitized.\r\n\t * @return {string}\r\n\t */\r\n\tsanitizeNodeName: function ( name ) {\r\n\r\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\r\n\r\n\t},\r\n\r\n\tparseTrackName: function ( trackName ) {\r\n\r\n\t\tconst matches = _trackRe.exec( trackName );\r\n\r\n\t\tif ( ! matches ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\tconst results = {\r\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\r\n\t\t\tnodeName: matches[ 2 ],\r\n\t\t\tobjectName: matches[ 3 ],\r\n\t\t\tobjectIndex: matches[ 4 ],\r\n\t\t\tpropertyName: matches[ 5 ], // required\r\n\t\t\tpropertyIndex: matches[ 6 ]\r\n\t\t};\r\n\r\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\r\n\r\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\r\n\r\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\r\n\r\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\r\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\r\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\r\n\t\t\t// include '.' characters).\r\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\r\n\r\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\r\n\t\t\t\tresults.objectName = objectName;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\r\n\t},\r\n\r\n\tfindNode: function ( root, nodeName ) {\r\n\r\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\t\treturn root;\r\n\r\n\t\t}\r\n\r\n\t\t// search into skeleton bones.\r\n\t\tif ( root.skeleton ) {\r\n\r\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\r\n\r\n\t\t\tif ( bone !== undefined ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// search into node subtree.\r\n\t\tif ( root.children ) {\r\n\r\n\t\t\tconst searchNodeSubtree = function ( children ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\t\tconst childNode = children[ i ];\r\n\r\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\t\tif ( result ) return result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\t\tif ( subTreeNode ) {\r\n\r\n\t\t\t\treturn subTreeNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function () {},\r\n\t_setValue_unavailable: function () {},\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tconst source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t],\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function () {\r\n\r\n\t\tlet targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n\t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( objectName ) {\r\n\r\n\t\t\tlet objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif ( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tconst nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( nodeProperty === undefined ) {\r\n\r\n\t\t\tconst nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\r\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tlet versioning = this.Versioning.None;\r\n\r\n\t\tthis.targetObject = targetObject;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tlet bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\r\n\r\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( PropertyBinding.prototype, {\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n *  - Add objects you would otherwise pass as 'root' to the\r\n *    constructor or the .clipAction method of AnimationMixer.\r\n *\r\n *  - Instead pass this object as 'root'.\r\n *\r\n *  - You can also add and remove objects later when the mixer\r\n *    is running.\r\n *\r\n * Note:\r\n *\r\n *    Objects of this class appear as one object to the mixer,\r\n *    so cache control of the individual objects must be done\r\n *    on the group.\r\n *\r\n * Limitation:\r\n *\r\n *  - The animated properties must be compatible among the\r\n *    all objects in the group.\r\n *\r\n *  - A single property can either be controlled through a\r\n *    target group or directly, but not both.\r\n */\r\n\r\nfunction AnimationObjectGroup() {\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0; // threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tconst indices = {};\r\n\tthis._indicesByUUID = indices; // for bookkeeping\r\n\r\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = []; // inside: string\r\n\tthis._parsedPaths = []; // inside: { we don't care, here }\r\n\tthis._bindings = []; // inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() {\r\n\r\n\t\t\t\treturn scope._objects.length;\r\n\r\n\t\t\t},\r\n\t\t\tget inUse() {\r\n\r\n\t\t\t\treturn this.total - scope.nCachedObjects_;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tget bindingsPerObject() {\r\n\r\n\t\t\treturn scope._bindings.length;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( AnimationObjectGroup.prototype, {\r\n\r\n\tisAnimationObjectGroup: true,\r\n\r\n\tadd: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet knownObject = undefined,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid;\r\n\t\t\tlet index = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tknownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\r\n\r\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\r\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_,\r\n\t\t\tnObjects = objects.length;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tconst lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function ( path, parsedPath ) {\r\n\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tlet indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tconst paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = objects[ i ];\r\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function ( path ) {\r\n\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationAction( mixer, clip, localRoot, blendMode ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\tthis.blendMode = blendMode || clip.blendMode;\r\n\r\n\tconst tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tconst interpolantSettings = {\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tconst interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants; // bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null; // for the memory manager\r\n\tthis._byClipCacheIndex = null; // for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = LoopRepeat;\r\n\tthis._loopCount = - 1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; // no. of repetitions when looping\r\n\r\n\tthis.paused = false; // true -> zero effective time scale\r\n\tthis.enabled = true; // false -> zero effective weight\r\n\r\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\r\n\r\n}\r\n\r\nObject.assign( AnimationAction.prototype, {\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function () {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0; // restart clip\r\n\t\tthis._loopCount = - 1;// forget previous loops\r\n\t\tthis._startTime = null;// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function () {\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function () {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function ( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function ( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function () {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif ( warp ) {\r\n\r\n\t\t\tconst fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function () {\r\n\r\n\t\tlet weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the time scale stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function ( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function () {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function ( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function ( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function ( duration ) {\r\n\r\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tconst mixer = this._mixer,\r\n\t\t\tnow = mixer.time,\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tlet interpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function () {\r\n\r\n\t\tlet timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function () {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function () {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\r\n\r\n\t\t// called by the mixer\r\n\r\n\t\tif ( ! this.enabled ) {\r\n\r\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\r\n\r\n\t\t\tthis._updateWeight( time );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tconst clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tconst weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tconst interpolants = this._interpolants;\r\n\t\t\tconst propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tswitch ( this.blendMode ) {\r\n\r\n\t\t\t\tcase AdditiveAnimationBlendMode:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase NormalAnimationBlendMode:\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function ( time ) {\r\n\r\n\t\tlet weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tconst interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function ( time ) {\r\n\r\n\t\tlet timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tconst interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.paused = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function ( deltaTime ) {\r\n\r\n\t\tconst duration = this._clip.duration;\r\n\t\tconst loop = this.loop;\r\n\r\n\t\tlet time = this.time + deltaTime;\r\n\t\tlet loopCount = this._loopCount;\r\n\r\n\t\tconst pingPong = ( loop === LoopPingPong );\r\n\r\n\t\tif ( deltaTime === 0 ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) return time;\r\n\r\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\r\n\r\n\t\t}\r\n\r\n\t\tif ( loop === LoopOnce ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tthis._loopCount = 0;\r\n\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle_stop: {\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tbreak handle_stop;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // repetitive Repeat or PingPong\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tif ( deltaTime >= 0 ) {\r\n\r\n\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( time >= duration || time < 0 ) {\r\n\r\n\t\t\t\t// wrap around\r\n\r\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\tconst pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\tif ( pending <= 0 ) {\r\n\r\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// keep running\r\n\r\n\t\t\t\t\tif ( pending === 1 ) {\r\n\r\n\t\t\t\t\t\t// entering the last round\r\n\r\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\treturn duration - time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\r\n\r\n\t\tconst settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\r\n\r\n\t\tconst mixer = this._mixer, now = mixer.time;\r\n\t\tlet interpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\t\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationMixer( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n}\r\n\r\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: AnimationMixer,\r\n\r\n\t_bindAction: function ( action, prototypeAction ) {\r\n\r\n\t\tconst root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\r\n\r\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tconst track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name;\r\n\r\n\t\t\tlet binding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new PropertyMixer(\r\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function ( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipUuid = action._clip.uuid,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function ( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function () {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\r\n\t\t// \tactionByRoot: AnimationAction - lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._actions.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveActions;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._bindings.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveBindings;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._controlInterpolants.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for AnimationAction objects\r\n\r\n\t_isActiveAction: function ( action ) {\r\n\r\n\t\tconst index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function ( action ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tconst clipUuid = action._clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function ( action ) {\r\n\r\n\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function ( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function ( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function () {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\r\n\r\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new LinearInterpolant(\r\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function ( interpolant ) {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid;\r\n\r\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\r\n\r\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\r\n\r\n\t\tlet actionsForClip = this._actionsByClip[ clipUuid ],\r\n\t\t\tprototypeAction = null;\r\n\r\n\t\tif ( blendMode === undefined ) {\r\n\r\n\t\t\tif ( clipObject !== null ) {\r\n\r\n\t\t\t\tblendMode = clipObject.blendMode;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tblendMode = NormalAnimationBlendMode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tif ( clipObject === null )\r\n\t\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function () {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions;\r\n\r\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\r\n\r\n\t\t\tactions[ i ].stop();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function ( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tconst action = actions[ i ];\r\n\r\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Allows you to seek to a specific time in an animation.\r\n\tsetTime: function ( timeInSeconds ) {\r\n\r\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\r\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\r\n\r\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function ( clip ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tclipUuid = clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tconst cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function ( root ) {\r\n\r\n\t\tconst rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( const clipUuid in actionsByClip ) {\r\n\r\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( const trackName in bindingByName ) {\r\n\r\n\t\t\t\tconst binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Uniform( value ) {\r\n\r\n\tif ( typeof value === 'string' ) {\r\n\r\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n\t\tvalue = arguments[ 1 ];\r\n\r\n\t}\r\n\r\n\tthis.value = value;\r\n\r\n}\r\n\r\nUniform.prototype.clone = function () {\r\n\r\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\r\n\r\n};\r\n\r\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\r\n\r\n\tInterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\r\n\r\n\tconstructor: InstancedInterleavedBuffer,\r\n\r\n\tisInstancedInterleavedBuffer: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\r\n\r\n\t\tib.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\r\n\r\n\t\tjson.isInstancedInterleavedBuffer = true;\r\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Raycaster( origin, direction, near, far ) {\r\n\r\n\tthis.ray = new Ray( origin, direction );\r\n\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\tthis.near = near || 0;\r\n\tthis.far = far || Infinity;\r\n\tthis.camera = null;\r\n\tthis.layers = new Layers();\r\n\r\n\tthis.params = {\r\n\t\tMesh: {},\r\n\t\tLine: { threshold: 1 },\r\n\t\tLOD: {},\r\n\t\tPoints: { threshold: 1 },\r\n\t\tSprite: {}\r\n\t};\r\n\r\n\tObject.defineProperties( this.params, {\r\n\t\tPointCloud: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\treturn this.Points;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n}\r\n\r\nfunction ascSort( a, b ) {\r\n\r\n\treturn a.distance - b.distance;\r\n\r\n}\r\n\r\nfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\tif ( object.layers.test( raycaster.layers ) ) {\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t}\r\n\r\n\tif ( recursive === true ) {\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Raycaster.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.ray.set( origin, direction );\r\n\r\n\t},\r\n\r\n\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\r\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tintersectObject: function ( object, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t},\r\n\r\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t}\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\r\n * The azimuthal angle (theta) is measured from the positive z-axis.\r\n */\r\n\r\nclass Spherical {\r\n\r\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi; // polar angle\r\n\t\tthis.theta = theta; // azimuthal angle\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tset( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.phi = other.phi;\r\n\t\tthis.theta = other.theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe() {\r\n\r\n\t\tconst EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetFromVector3( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t}\r\n\r\n\tsetFromCartesianCoords( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( x, z );\r\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\r\n */\r\n\r\nfunction Cylindrical( radius, theta, y ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\r\n\tthis.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nObject.assign( Cylindrical.prototype, {\r\n\r\n\tset: function ( radius, theta, y ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.theta = theta;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.theta = other.theta;\r\n\t\tthis.y = other.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t},\r\n\r\n\tsetFromCartesianCoords: function ( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + z * z );\r\n\t\tthis.theta = Math.atan2( x, z );\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$7 = new Vector2();\r\n\r\nfunction Box2( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\r\n\r\n}\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 4 splitting planes to rule out intersections\r\n\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _startP = new Vector3();\r\nconst _startEnd = new Vector3();\r\n\r\nfunction Line3( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Line3.prototype, {\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function ( point, clampToLine ) {\r\n\r\n\t\t_startP.subVectors( point, this.start );\r\n\t\t_startEnd.subVectors( this.end, this.start );\r\n\r\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\r\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\r\n\r\n\t\tlet t = startEnd_startP / startEnd2;\r\n\r\n\t\tif ( clampToLine ) {\r\n\r\n\t\t\tt = MathUtils.clamp( t, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\r\n\r\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImmediateRenderObject( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( /* renderCallback */ ) {};\r\n\r\n\tthis.hasPositions = false;\r\n\tthis.hasNormals = false;\r\n\tthis.hasColors = false;\r\n\tthis.hasUvs = false;\r\n\r\n\tthis.positionArray = null;\r\n\tthis.normalArray = null;\r\n\tthis.colorArray = null;\r\n\tthis.uvArray = null;\r\n\r\n\tthis.count = 0;\r\n\r\n}\r\n\r\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\r\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\r\n\r\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\r\n\r\nconst _vector$8 = new Vector3();\r\n\r\nfunction SpotLightHelper( light, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst positions = [\r\n\t\t0, 0, 0, \t0, 0, 1,\r\n\t\t0, 0, 0, \t1, 0, 1,\r\n\t\t0, 0, 0,\t- 1, 0, 1,\r\n\t\t0, 0, 0, \t0, 1, 1,\r\n\t\t0, 0, 0, \t0, - 1, 1\r\n\t];\r\n\r\n\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n\t\tconst p1 = ( i / l ) * Math.PI * 2;\r\n\t\tconst p2 = ( j / l ) * Math.PI * 2;\r\n\r\n\t\tpositions.push(\r\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\r\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.cone = new LineSegments( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nSpotLightHelper.prototype = Object.create( Object3D.prototype );\r\nSpotLightHelper.prototype.constructor = SpotLightHelper;\r\n\r\nSpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nSpotLightHelper.prototype.update = function () {\r\n\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tconst coneLength = this.light.distance ? this.light.distance : 1000;\r\n\tconst coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t_vector$8.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\tthis.cone.lookAt( _vector$8 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.cone.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst _vector$9 = new Vector3();\r\nconst _boneMatrix = new Matrix4();\r\nconst _matrixWorldInv = new Matrix4();\r\n\r\nfunction getBoneList( object ) {\r\n\r\n\tconst boneList = [];\r\n\r\n\tif ( object && object.isBone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n}\r\n\r\nfunction SkeletonHelper( object ) {\r\n\r\n\tconst bones = getBoneList( object );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst color1 = new Color( 0, 0, 1 );\r\n\tconst color2 = new Color( 0, 1, 0 );\r\n\r\n\tfor ( let i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tcolors.push( color1.r, color1.g, color1.b );\r\n\t\t\tcolors.push( color2.r, color2.g, color2.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkeletonHelper';\r\n\r\n\tthis.root = object;\r\n\tthis.bones = bones;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n}\r\n\r\nSkeletonHelper.prototype = Object.create( LineSegments.prototype );\r\nSkeletonHelper.prototype.constructor = SkeletonHelper;\r\n\r\nSkeletonHelper.prototype.isSkeletonHelper = true;\r\n\r\nSkeletonHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst bones = this.bones;\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t_matrixWorldInv.getInverse( this.root.matrixWorld );\r\n\r\n\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PointLightHelper( light, sphereSize, color ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\r\n\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'PointLightHelper';\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n\r\n\t/*\r\n\tconst distanceGeometry = new THREE.IcosahedronBufferGeometry( 1, 2 );\r\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tconst d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n}\r\n\r\nPointLightHelper.prototype = Object.create( Mesh.prototype );\r\nPointLightHelper.prototype.constructor = PointLightHelper;\r\n\r\nPointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nPointLightHelper.prototype.update = function () {\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\t/*\r\n\tconst d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\nconst _vector$a = new Vector3();\r\nconst _color1 = new Color();\r\nconst _color2 = new Color();\r\n\r\nfunction HemisphereLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new OctahedronBufferGeometry( size );\r\n\tgeometry.rotateY( Math.PI * 0.5 );\r\n\r\n\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\tif ( this.color === undefined ) this.material.vertexColors = true;\r\n\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\tconst colors = new Float32Array( position.count * 3 );\r\n\r\n\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\r\n\r\n\tthis.add( new Mesh( geometry, this.material ) );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\r\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\r\n\r\nHemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.children[ 0 ].geometry.dispose();\r\n\tthis.children[ 0 ].material.dispose();\r\n\r\n};\r\n\r\nHemisphereLightHelper.prototype.update = function () {\r\n\r\n\tconst mesh = this.children[ 0 ];\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tconst colors = mesh.geometry.getAttribute( 'color' );\r\n\r\n\t\t_color1.copy( this.light.color );\r\n\t\t_color2.copy( this.light.groundColor );\r\n\r\n\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\r\n\r\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t\tcolors.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tmesh.lookAt( _vector$a.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\r\n};\r\n\r\nfunction GridHelper( size, divisions, color1, color2 ) {\r\n\r\n\tsize = size || 10;\r\n\tdivisions = divisions || 10;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst center = divisions / 2;\r\n\tconst step = size / divisions;\r\n\tconst halfSize = size / 2;\r\n\r\n\tconst vertices = [], colors = [];\r\n\r\n\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\r\n\r\n\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\r\n\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\r\n\r\n\t\tconst color = i === center ? color1 : color2;\r\n\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'GridHelper';\r\n\r\n}\r\n\r\nGridHelper.prototype = Object.create( LineSegments.prototype );\r\nGridHelper.prototype.constructor = GridHelper;\r\n\r\nfunction PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\r\n\r\n\tradius = radius || 10;\r\n\tradials = radials || 16;\r\n\tcircles = circles || 8;\r\n\tdivisions = divisions || 64;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\t// create the radials\r\n\r\n\tfor ( let i = 0; i <= radials; i ++ ) {\r\n\r\n\t\tconst v = ( i / radials ) * ( Math.PI * 2 );\r\n\r\n\t\tconst x = Math.sin( v ) * radius;\r\n\t\tconst z = Math.cos( v ) * radius;\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tvertices.push( x, 0, z );\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t}\r\n\r\n\t// create the circles\r\n\r\n\tfor ( let i = 0; i <= circles; i ++ ) {\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tconst r = radius - ( radius / circles * i );\r\n\r\n\t\tfor ( let j = 0; j < divisions; j ++ ) {\r\n\r\n\t\t\t// first vertex\r\n\r\n\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tlet x = Math.sin( v ) * r;\r\n\t\t\tlet z = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t\t// second vertex\r\n\r\n\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tx = Math.sin( v ) * r;\r\n\t\t\tz = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'PolarGridHelper';\r\n\r\n}\r\n\r\nPolarGridHelper.prototype = Object.create( LineSegments.prototype );\r\nPolarGridHelper.prototype.constructor = PolarGridHelper;\r\n\r\nconst _v1$5 = new Vector3();\r\nconst _v2$3 = new Vector3();\r\nconst _v3$1 = new Vector3();\r\n\r\nfunction DirectionalLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tif ( size === undefined ) size = 1;\r\n\r\n\tlet geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\r\n\t\t- size, size, 0,\r\n\t\tsize, size, 0,\r\n\t\tsize, - size, 0,\r\n\t\t- size, - size, 0,\r\n\t\t- size, size, 0\r\n\t], 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.lightPlane = new Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n\tthis.targetLine = new Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\r\nDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\r\n\r\nDirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nDirectionalLightHelper.prototype.update = function () {\r\n\r\n\t_v1$5.setFromMatrixPosition( this.light.matrixWorld );\r\n\t_v2$3.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t_v3$1.subVectors( _v2$3, _v1$5 );\r\n\r\n\tthis.lightPlane.lookAt( _v2$3 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.lightPlane.material.color.set( this.color );\r\n\t\tthis.targetLine.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightPlane.material.color.copy( this.light.color );\r\n\t\tthis.targetLine.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\tthis.targetLine.lookAt( _v2$3 );\r\n\tthis.targetLine.scale.z = _v3$1.length();\r\n\r\n};\r\n\r\nconst _vector$b = new Vector3();\r\nconst _camera = new Camera();\r\n\r\n/**\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nfunction CameraHelper( camera ) {\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tconst colorFrustum = new Color( 0xffaa00 );\r\n\tconst colorCone = new Color( 0xff0000 );\r\n\tconst colorUp = new Color( 0x00aaff );\r\n\tconst colorTarget = new Color( 0xffffff );\r\n\tconst colorCross = new Color( 0x333333 );\r\n\r\n\t// near\r\n\r\n\taddLine( 'n1', 'n2', colorFrustum );\r\n\taddLine( 'n2', 'n4', colorFrustum );\r\n\taddLine( 'n4', 'n3', colorFrustum );\r\n\taddLine( 'n3', 'n1', colorFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( 'f1', 'f2', colorFrustum );\r\n\taddLine( 'f2', 'f4', colorFrustum );\r\n\taddLine( 'f4', 'f3', colorFrustum );\r\n\taddLine( 'f3', 'f1', colorFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( 'n1', 'f1', colorFrustum );\r\n\taddLine( 'n2', 'f2', colorFrustum );\r\n\taddLine( 'n3', 'f3', colorFrustum );\r\n\taddLine( 'n4', 'f4', colorFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( 'p', 'n1', colorCone );\r\n\taddLine( 'p', 'n2', colorCone );\r\n\taddLine( 'p', 'n3', colorCone );\r\n\taddLine( 'p', 'n4', colorCone );\r\n\r\n\t// up\r\n\r\n\taddLine( 'u1', 'u2', colorUp );\r\n\taddLine( 'u2', 'u3', colorUp );\r\n\taddLine( 'u3', 'u1', colorUp );\r\n\r\n\t// target\r\n\r\n\taddLine( 'c', 't', colorTarget );\r\n\taddLine( 'p', 'c', colorCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( 'cn1', 'cn2', colorCross );\r\n\taddLine( 'cn3', 'cn4', colorCross );\r\n\r\n\taddLine( 'cf1', 'cf2', colorCross );\r\n\taddLine( 'cf3', 'cf4', colorCross );\r\n\r\n\tfunction addLine( a, b, color ) {\r\n\r\n\t\taddPoint( a, color );\r\n\t\taddPoint( b, color );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, color ) {\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'CameraHelper';\r\n\r\n\tthis.camera = camera;\r\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nCameraHelper.prototype = Object.create( LineSegments.prototype );\r\nCameraHelper.prototype.constructor = CameraHelper;\r\n\r\nCameraHelper.prototype.update = function () {\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst pointMap = this.pointMap;\r\n\r\n\tconst w = 1, h = 1;\r\n\r\n\t// we need just camera projection matrix inverse\r\n\t// world matrix must be identity\r\n\r\n\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\r\n\r\n\t// center / target\r\n\r\n\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\r\n\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\r\n\r\n\t// near\r\n\r\n\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\r\n\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\r\n\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\r\n\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\r\n\r\n\t// far\r\n\r\n\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\r\n\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\r\n\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\r\n\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\r\n\r\n\t// up\r\n\r\n\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\r\n\r\n\t// cross\r\n\r\n\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\r\n\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\r\n\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\r\n\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\r\n\r\n\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\r\n\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\r\n\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\r\n\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n};\r\n\r\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\r\n\r\n\t_vector$b.set( x, y, z ).unproject( camera );\r\n\r\n\tconst points = pointMap[ point ];\r\n\r\n\tif ( points !== undefined ) {\r\n\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tposition.setXYZ( points[ i ], _vector$b.x, _vector$b.y, _vector$b.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst _box$3 = new Box3();\r\n\r\nfunction BoxHelper( object, color ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tconst positions = new Float32Array( 8 * 3 );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'BoxHelper';\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nBoxHelper.prototype = Object.create( LineSegments.prototype );\r\nBoxHelper.prototype.constructor = BoxHelper;\r\n\r\nBoxHelper.prototype.update = function ( object ) {\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\r\n\r\n\t}\r\n\r\n\tif ( this.object !== undefined ) {\r\n\r\n\t\t_box$3.setFromObject( this.object );\r\n\r\n\t}\r\n\r\n\tif ( _box$3.isEmpty() ) return;\r\n\r\n\tconst min = _box$3.min;\r\n\tconst max = _box$3.max;\r\n\r\n\t/*\r\n\t  5____4\r\n\t1/___0/|\r\n\t| 6__|_7\r\n\t2/___3/\r\n\r\n\t0: max.x, max.y, max.z\r\n\t1: min.x, max.y, max.z\r\n\t2: min.x, min.y, max.z\r\n\t3: max.x, min.y, max.z\r\n\t4: max.x, max.y, min.z\r\n\t5: min.x, max.y, min.z\r\n\t6: min.x, min.y, min.z\r\n\t7: max.x, min.y, min.z\r\n\t*/\r\n\r\n\tconst position = this.geometry.attributes.position;\r\n\tconst array = position.array;\r\n\r\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\r\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\r\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\r\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\tposition.needsUpdate = true;\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n\r\n};\r\n\r\nBoxHelper.prototype.setFromObject = function ( object ) {\r\n\r\n\tthis.object = object;\r\n\tthis.update();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nBoxHelper.prototype.copy = function ( source ) {\r\n\r\n\tLineSegments.prototype.copy.call( this, source );\r\n\r\n\tthis.object = source.object;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction Box3Helper( box, color ) {\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.box = box;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\r\n\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n}\r\n\r\nBox3Helper.prototype = Object.create( LineSegments.prototype );\r\nBox3Helper.prototype.constructor = Box3Helper;\r\n\r\nBox3Helper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst box = this.box;\r\n\r\n\tif ( box.isEmpty() ) return;\r\n\r\n\tbox.getCenter( this.position );\r\n\r\n\tbox.getSize( this.scale );\r\n\r\n\tthis.scale.multiplyScalar( 0.5 );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PlaneHelper( plane, size, hex ) {\r\n\r\n\tthis.plane = plane;\r\n\r\n\tthis.size = ( size === undefined ) ? 1 : size;\r\n\r\n\tconst color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tconst positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\tgeometry.computeBoundingSphere();\r\n\r\n\tLine.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'PlaneHelper';\r\n\r\n\t//\r\n\r\n\tconst positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\r\n\r\n\tconst geometry2 = new BufferGeometry();\r\n\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\r\n\tgeometry2.computeBoundingSphere();\r\n\r\n\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\r\n\r\n}\r\n\r\nPlaneHelper.prototype = Object.create( Line.prototype );\r\nPlaneHelper.prototype.constructor = PlaneHelper;\r\n\r\nPlaneHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tlet scale = - this.plane.constant;\r\n\r\n\tif ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\r\n\r\n\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\r\n\r\n\tthis.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\r\n\r\n\tthis.lookAt( this.plane.normal );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nconst _axis = new Vector3();\r\nlet _lineGeometry, _coneGeometry;\r\n\r\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'ArrowHelper';\r\n\r\n\tif ( dir === undefined ) dir = new Vector3( 0, 0, 1 );\r\n\tif ( origin === undefined ) origin = new Vector3( 0, 0, 0 );\r\n\tif ( length === undefined ) length = 1;\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tif ( _lineGeometry === undefined ) {\r\n\r\n\t\t_lineGeometry = new BufferGeometry();\r\n\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n\t\t_coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n\t\t_coneGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\t}\r\n\r\n\tthis.position.copy( origin );\r\n\r\n\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.line.matrixAutoUpdate = false;\r\n\tthis.add( this.line );\r\n\r\n\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.cone.matrixAutoUpdate = false;\r\n\tthis.add( this.cone );\r\n\r\n\tthis.setDirection( dir );\r\n\tthis.setLength( length, headLength, headWidth );\r\n\r\n}\r\n\r\nArrowHelper.prototype = Object.create( Object3D.prototype );\r\nArrowHelper.prototype.constructor = ArrowHelper;\r\n\r\nArrowHelper.prototype.setDirection = function ( dir ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t} else {\r\n\r\n\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\tconst radians = Math.acos( dir.y );\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\r\n\r\n\t}\r\n\r\n};\r\n\r\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\nArrowHelper.prototype.copy = function ( source ) {\r\n\r\n\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\tthis.line.copy( source.line );\r\n\tthis.cone.copy( source.cone );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction AxesHelper( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tconst vertices = [\r\n\t\t0, 0, 0,\tsize, 0, 0,\r\n\t\t0, 0, 0,\t0, size, 0,\r\n\t\t0, 0, 0,\t0, 0, size\r\n\t];\r\n\r\n\tconst colors = [\r\n\t\t1, 0, 0,\t1, 0.6, 0,\r\n\t\t0, 1, 0,\t0.6, 1, 0,\r\n\t\t0, 0, 1,\t0, 0.6, 1\r\n\t];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'AxesHelper';\r\n\r\n}\r\n\r\nAxesHelper.prototype = Object.create( LineSegments.prototype );\r\nAxesHelper.prototype.constructor = AxesHelper;\r\n\r\nconst LOD_MIN = 4;\r\nconst LOD_MAX = 8;\r\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\r\n\r\n// The standard deviations (radians) associated with the extra mips. These are\r\n// chosen to approximate a Trowbridge-Reitz distribution function times the\r\n// geometric shadowing function. These sigma values squared must match the\r\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\r\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\r\n\r\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\r\n\r\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\r\n// samples and exit early, but not recompile the shader.\r\nconst MAX_SAMPLES = 20;\r\n\r\nconst ENCODINGS = {\r\n\t[ LinearEncoding ]: 0,\r\n\t[ sRGBEncoding ]: 1,\r\n\t[ RGBEEncoding ]: 2,\r\n\t[ RGBM7Encoding ]: 3,\r\n\t[ RGBM16Encoding ]: 4,\r\n\t[ RGBDEncoding ]: 5,\r\n\t[ GammaEncoding ]: 6\r\n};\r\n\r\nconst _flatCamera = new OrthographicCamera();\r\nconst { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\r\nlet _oldTarget = null;\r\n\r\n// Golden Ratio\r\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\r\nconst INV_PHI = 1 / PHI;\r\n\r\n// Vertices of a dodecahedron (except the opposites, which represent the\r\n// same axis), used as axis directions evenly spread on a sphere.\r\nconst _axisDirections = [\r\n\tnew Vector3( 1, 1, 1 ),\r\n\tnew Vector3( - 1, 1, 1 ),\r\n\tnew Vector3( 1, 1, - 1 ),\r\n\tnew Vector3( - 1, 1, - 1 ),\r\n\tnew Vector3( 0, PHI, INV_PHI ),\r\n\tnew Vector3( 0, PHI, - INV_PHI ),\r\n\tnew Vector3( INV_PHI, 0, PHI ),\r\n\tnew Vector3( - INV_PHI, 0, PHI ),\r\n\tnew Vector3( PHI, INV_PHI, 0 ),\r\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\r\n\r\n/**\r\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\r\n * (PMREM) from a cubeMap environment texture. This allows different levels of\r\n * blur to be quickly accessed based on material roughness. It is packed into a\r\n * special CubeUV format that allows us to perform custom interpolation so that\r\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\r\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\r\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\r\n * higher roughness levels. In this way we maintain resolution to smoothly\r\n * interpolate diffuse lighting while limiting sampling computation.\r\n */\r\n\r\nfunction PMREMGenerator( renderer ) {\r\n\r\n\tthis._renderer = renderer;\r\n\tthis._pingPongRenderTarget = null;\r\n\r\n\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\r\n\tthis._equirectShader = null;\r\n\tthis._cubemapShader = null;\r\n\r\n\tthis._compileMaterial( this._blurMaterial );\r\n\r\n}\r\n\r\nPMREMGenerator.prototype = {\r\n\r\n\tconstructor: PMREMGenerator,\r\n\r\n\t/**\r\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\r\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\r\n\t * in radians to be applied to the scene before PMREM generation. Optional near\r\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\r\n\t * is placed at the origin).\r\n\t */\r\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\r\n\r\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\r\n\t\tif ( sigma > 0 ) {\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\r\n\r\n\t\t}\r\n\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromEquirectangular: function ( equirectangular ) {\r\n\r\n\t\treturn this._fromTexture( equirectangular );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromCubemap: function ( cubemap ) {\r\n\r\n\t\treturn this._fromTexture( cubemap );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileCubemapShader: function () {\r\n\r\n\t\tif ( this._cubemapShader === null ) {\r\n\r\n\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\t\t\tthis._compileMaterial( this._cubemapShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileEquirectangularShader: function () {\r\n\r\n\t\tif ( this._equirectShader === null ) {\r\n\r\n\t\t\tthis._equirectShader = _getEquirectShader();\r\n\t\t\tthis._compileMaterial( this._equirectShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\r\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\r\n\t * one of them will cause any others to also become unusable.\r\n\t */\r\n\tdispose: function () {\r\n\r\n\t\tthis._blurMaterial.dispose();\r\n\r\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\r\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\r\n\r\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\r\n\r\n\t\t\t_lodPlanes[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// private interface\r\n\r\n\t_cleanup: function ( outputTarget ) {\r\n\r\n\t\tthis._pingPongRenderTarget.dispose();\r\n\t\tthis._renderer.setRenderTarget( _oldTarget );\r\n\t\toutputTarget.scissorTest = false;\r\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\r\n\r\n\t},\r\n\r\n\t_fromTexture: function ( texture ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\r\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_allocateTargets: function ( texture ) { // warning: null texture is valid\r\n\r\n\t\tconst params = {\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tgenerateMipmaps: false,\r\n\t\t\ttype: UnsignedByteType,\r\n\t\t\tformat: RGBEFormat,\r\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\r\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\r\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\r\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_compileMaterial: function ( material ) {\r\n\r\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_sceneToCubeUV: function ( scene, near, far, cubeUVRenderTarget ) {\r\n\r\n\t\tconst fov = 90;\r\n\t\tconst aspect = 1;\r\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\r\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\r\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tconst outputEncoding = renderer.outputEncoding;\r\n\t\tconst toneMapping = renderer.toneMapping;\r\n\t\tconst clearColor = renderer.getClearColor();\r\n\t\tconst clearAlpha = renderer.getClearAlpha();\r\n\r\n\t\trenderer.toneMapping = NoToneMapping;\r\n\t\trenderer.outputEncoding = LinearEncoding;\r\n\r\n\t\tlet background = scene.background;\r\n\t\tif ( background && background.isColor ) {\r\n\r\n\t\t\tbackground.convertSRGBToLinear();\r\n\t\t\t// Convert linear to RGBE\r\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\r\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\r\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\r\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\r\n\t\t\trenderer.setClearColor( background, alpha );\r\n\t\t\tscene.background = null;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst col = i % 3;\r\n\t\t\tif ( col == 0 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\r\n\r\n\t\t\t} else if ( col == 1 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\r\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_setViewport( cubeUVRenderTarget,\r\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\r\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\t\trenderer.render( scene, cubeCamera );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.toneMapping = toneMapping;\r\n\t\trenderer.outputEncoding = outputEncoding;\r\n\t\trenderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t},\r\n\r\n\t_textureToCubeUV: function ( texture, cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tif ( texture.isCubeTexture ) {\r\n\r\n\t\t\tif ( this._cubemapShader == null ) {\r\n\r\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( this._equirectShader == null ) {\r\n\r\n\t\t\t\tthis._equirectShader = _getEquirectShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\r\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\r\n\t\tconst uniforms = material.uniforms;\r\n\r\n\t\tuniforms[ 'envMap' ].value = texture;\r\n\r\n\t\tif ( ! texture.isCubeTexture ) {\r\n\r\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\r\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\r\n\r\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\r\n\r\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\trenderer.render( mesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_applyPMREM: function ( cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst autoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\r\n\r\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.autoClear = autoClear;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\r\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\r\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\r\n\t * the poles) to approximate the orthogonally-separable blur. It is least\r\n\t * accurate at the poles, but still does a decent job.\r\n\t */\r\n\t_blur: function ( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\r\n\r\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tlodIn,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'latitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tlodOut,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'longitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t},\r\n\r\n\t_halfBlur: function ( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst blurMaterial = this._blurMaterial;\r\n\r\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\r\n\r\n\t\t\tconsole.error(\r\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\r\n\r\n\t\t}\r\n\r\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\r\n\t\tconst STANDARD_DEVIATIONS = 3;\r\n\r\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\r\n\t\tconst blurUniforms = blurMaterial.uniforms;\r\n\r\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\r\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\r\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\r\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\r\n\r\n\t\tif ( samples > MAX_SAMPLES ) {\r\n\r\n\t\t\tconsole.warn( `sigmaRadians, ${\r\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\r\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\r\n\r\n\t\t}\r\n\r\n\t\tconst weights = [];\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\r\n\r\n\t\t\tconst x = i / sigmaPixels;\r\n\t\t\tconst weight = Math.exp( - x * x / 2 );\r\n\t\t\tweights.push( weight );\r\n\r\n\t\t\tif ( i == 0 ) {\r\n\r\n\t\t\t\tsum += weight;\r\n\r\n\t\t\t} else if ( i < samples ) {\r\n\r\n\t\t\t\tsum += 2 * weight;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\r\n\r\n\t\t\tweights[ i ] = weights[ i ] / sum;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\r\n\t\tblurUniforms[ 'samples' ].value = samples;\r\n\t\tblurUniforms[ 'weights' ].value = weights;\r\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\r\n\r\n\t\tif ( poleAxis ) {\r\n\r\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\r\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\r\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\r\n\t\tconst outputSize = _sizeLods[ lodOut ];\r\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\r\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\r\n\r\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\r\n\t\trenderer.setRenderTarget( targetOut );\r\n\t\trenderer.render( blurMesh, _flatCamera );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction _isLDR( texture ) {\r\n\r\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\r\n\r\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\r\n\r\n}\r\n\r\nfunction _createPlanes() {\r\n\r\n\tconst _lodPlanes = [];\r\n\tconst _sizeLods = [];\r\n\tconst _sigmas = [];\r\n\r\n\tlet lod = LOD_MAX;\r\n\r\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\tconst sizeLod = Math.pow( 2, lod );\r\n\t\t_sizeLods.push( sizeLod );\r\n\t\tlet sigma = 1.0 / sizeLod;\r\n\r\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\r\n\r\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\r\n\r\n\t\t} else if ( i == 0 ) {\r\n\r\n\t\t\tsigma = 0;\r\n\r\n\t\t}\r\n\r\n\t\t_sigmas.push( sigma );\r\n\r\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\r\n\t\tconst min = - texelSize / 2;\r\n\t\tconst max = 1 + texelSize / 2;\r\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\r\n\r\n\t\tconst cubeFaces = 6;\r\n\t\tconst vertices = 6;\r\n\t\tconst positionSize = 3;\r\n\t\tconst uvSize = 2;\r\n\t\tconst faceIndexSize = 1;\r\n\r\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\r\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\r\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\r\n\r\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\r\n\r\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\r\n\t\t\tconst y = face > 2 ? 0 : - 1;\r\n\t\t\tconst coordinates = [\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y + 1, 0\r\n\t\t\t];\r\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\r\n\t\t\tuv.set( uv1, uvSize * vertices * face );\r\n\t\t\tconst fill = [ face, face, face, face, face, face ];\r\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\r\n\r\n\t\t}\r\n\r\n\t\tconst planes = new BufferGeometry();\r\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\r\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\r\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\r\n\t\t_lodPlanes.push( planes );\r\n\r\n\t\tif ( lod > LOD_MIN ) {\r\n\r\n\t\t\tlod --;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { _lodPlanes, _sizeLods, _sigmas };\r\n\r\n}\r\n\r\nfunction _createRenderTarget( params ) {\r\n\r\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\r\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\r\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\r\n\tcubeUVRenderTarget.scissorTest = true;\r\n\treturn cubeUVRenderTarget;\r\n\r\n}\r\n\r\nfunction _setViewport( target, x, y, width, height ) {\r\n\r\n\ttarget.viewport.set( x, y, width, height );\r\n\ttarget.scissor.set( x, y, width, height );\r\n\r\n}\r\n\r\nfunction _getBlurShader( maxSamples ) {\r\n\r\n\tconst weights = new Float32Array( maxSamples );\r\n\tconst poleAxis = new Vector3( 0, 1, 0 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'SphericalGaussianBlur',\r\n\r\n\t\tdefines: { 'n': maxSamples },\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'samples': { value: 1 },\r\n\t\t\t'weights': { value: weights },\r\n\t\t\t'latitudinal': { value: false },\r\n\t\t\t'dTheta': { value: 0 },\r\n\t\t\t'mipInt': { value: 0 },\r\n\t\t\t'poleAxis': { value: poleAxis },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform int samples;\r\n\t\t\tuniform float weights[ n ];\r\n\t\t\tuniform bool latitudinal;\r\n\t\t\tuniform float dTheta;\r\n\t\t\tuniform float mipInt;\r\n\t\t\tuniform vec3 poleAxis;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\r\n\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\r\n\r\n\t\t\t\tfloat cosTheta = cos( theta );\r\n\t\t\t\t// Rodrigues' axis-angle rotation\r\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\r\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\r\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\r\n\r\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\r\n\r\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\r\n\r\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\taxis = normalize( axis );\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\r\n\r\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\r\n\r\n\t\t\t\t\tif ( i >= samples ) {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfloat theta = dTheta * float( i );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getEquirectShader() {\r\n\r\n\tconst texelSize = new Vector2( 1, 1 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'EquirectangularToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'texelSize': { value: texelSize },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform vec2 texelSize;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\r\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\r\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\r\n\r\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\r\n\t\t\t\tuv -= f * texelSize;\r\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x += texelSize.x;\r\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.y += texelSize.y;\r\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x -= texelSize.x;\r\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\r\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\r\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\r\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCubemapShader() {\r\n\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'CubemapToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform samplerCube envMap;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCommonVertexShader() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tprecision mediump float;\r\n\t\tprecision mediump int;\r\n\r\n\t\tattribute vec3 position;\r\n\t\tattribute vec2 uv;\r\n\t\tattribute float faceIndex;\r\n\r\n\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t// RH coordinate system; PMREM face-indexing convention\r\n\t\tvec3 getDirection( vec2 uv, float face ) {\r\n\r\n\t\t\tuv = 2.0 * uv - 1.0;\r\n\r\n\t\t\tvec3 direction = vec3( uv, 1.0 );\r\n\r\n\t\t\tif ( face == 0.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\r\n\r\n\t\t\t} else if ( face == 1.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\r\n\r\n\t\t\t} else if ( face == 2.0 ) {\r\n\r\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\r\n\r\n\t\t\t} else if ( face == 3.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\r\n\r\n\t\t\t} else if ( face == 4.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\r\n\r\n\t\t\t} else if ( face == 5.0 ) {\r\n\r\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn direction;\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\r\n\t\t\tgl_Position = vec4( position, 1.0 );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction _getEncodings() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tuniform int inputEncoding;\r\n\t\tuniform int outputEncoding;\r\n\r\n\t\t#include <encodings_pars_fragment>\r\n\r\n\t\tvec4 inputTexelToLinear( vec4 value ) {\r\n\r\n\t\t\tif ( inputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( inputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn sRGBToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn RGBEToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn GammaToLinear( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 linearToOutputTexel( vec4 value ) {\r\n\r\n\t\t\tif ( outputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( outputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn LinearTosRGB( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn LinearToRGBE( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn LinearToGamma( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\r\n\r\n\t\t\treturn inputTexelToLinear( color );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction Face4( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new Face3( a, b, c, normal, color, materialIndex );\r\n\r\n}\r\n\r\nconst LineStrip = 0;\r\nconst LinePieces = 1;\r\nconst NoColors = 0;\r\nconst FaceColors = 1;\r\nconst VertexColors = 2;\r\n\r\nfunction MeshFaceMaterial( materials ) {\r\n\r\n\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction MultiMaterial( materials ) {\r\n\r\n\tif ( materials === undefined ) materials = [];\r\n\r\n\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\r\n\tmaterials.isMultiMaterial = true;\r\n\tmaterials.materials = materials;\r\n\tmaterials.clone = function () {\r\n\r\n\t\treturn materials.slice();\r\n\r\n\t};\r\n\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction PointCloud( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction Particle( material ) {\r\n\r\n\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\r\n\treturn new Sprite( material );\r\n\r\n}\r\n\r\nfunction ParticleSystem( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction PointCloudMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleBasicMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleSystemMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction Vertex( x, y, z ) {\r\n\r\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\treturn new Vector3( x, y, z );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction DynamicBufferAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.' );\r\n\treturn new BufferAttribute( array, itemSize ).setUsage( DynamicDrawUsage );\r\n\r\n}\r\n\r\nfunction Int8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\r\n\treturn new Int8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\r\n\treturn new Uint8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8ClampedAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\r\n\treturn new Uint8ClampedBufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\r\n\treturn new Int16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\r\n\treturn new Uint16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\r\n\treturn new Int32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\r\n\treturn new Uint32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\r\n\treturn new Float32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float64Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\r\n\treturn new Float64BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\n//\r\n\r\nCurve.create = function ( construct, getPoint ) {\r\n\r\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\r\n\r\n\tconstruct.prototype = Object.create( Curve.prototype );\r\n\tconstruct.prototype.constructor = construct;\r\n\tconstruct.prototype.getPoint = getPoint;\r\n\r\n\treturn construct;\r\n\r\n};\r\n\r\n//\r\n\r\nObject.assign( CurvePath.prototype, {\r\n\r\n\tcreatePointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from path points (for Line or Points objects)\r\n\r\n\t\tconst pts = this.getPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateSpacedPointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from equidistant sampling along the path\r\n\r\n\t\tconst pts = this.getSpacedPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateGeometry: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\tconst geometry = new Geometry();\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Path.prototype, {\r\n\r\n\tfromPoints: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\r\n\t\treturn this.setFromPoints( points );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction ClosedSplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n}\r\n\r\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction SplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction Spline( points ) {\r\n\r\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\nObject.assign( Spline.prototype, {\r\n\r\n\tinitFromArray: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\r\n\r\n\t},\r\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\r\n\r\n\t},\r\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction AxisHelper( size ) {\r\n\r\n\tconsole.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\r\n\treturn new AxesHelper( size );\r\n\r\n}\r\n\r\nfunction BoundingBoxHelper( object, color ) {\r\n\r\n\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\r\n\treturn new BoxHelper( object, color );\r\n\r\n}\r\n\r\nfunction EdgesHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\r\n\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\nGridHelper.prototype.setColors = function () {\r\n\r\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n};\r\n\r\nSkeletonHelper.prototype.update = function () {\r\n\r\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\r\n\r\n};\r\n\r\nfunction WireframeHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\r\n\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\r\n\t\treturn LoaderUtils.extractUrlBase( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nLoader.Handlers = {\r\n\r\n\tadd: function ( /* regex, loader */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\r\n\r\n\t},\r\n\r\n\tget: function ( /* file */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction XHRLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\r\n\treturn new FileLoader( manager );\r\n\r\n}\r\n\r\nfunction BinaryTextureLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\r\n\treturn new DataTextureLoader( manager );\r\n\r\n}\r\n\r\nObject.assign( ObjectLoader.prototype, {\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().' );\r\n\t\treturn this.setResourcePath( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\r\n} );\r\n\r\nFrustum.prototype.setFromMatrix = function ( m ) {\r\n\r\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\r\n\treturn this.setFromProjectionMatrix( m );\r\n\r\n};\r\n\r\nLine3.prototype.center = function ( optionalTarget ) {\r\n\r\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\r\n\treturn this.getCenter( optionalTarget );\r\n\r\n};\r\n\r\nObject.assign( MathUtils, {\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\r\n\t\treturn MathUtils.floorPowerOfTwo( value );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\r\n\t\treturn MathUtils.ceilPowerOfTwo( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix3( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tgetPosition: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\r\n\r\n\t},\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\tmultiplyToArray: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\ttranslate: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\trotateX: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\trotateY: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\trotateZ: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\trotateByAxis: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix4( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\r\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nPlane.prototype.isIntersectionLine = function ( line ) {\r\n\r\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\treturn this.intersectsLine( line );\r\n\r\n};\r\n\r\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\r\n\r\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\treturn vector.applyQuaternion( this );\r\n\r\n};\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\treturn this.intersectsPlane( plane );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tarea: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\r\n\t\treturn this.getArea();\r\n\r\n\t},\r\n\tbarycoordFromPoint: function ( point, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn this.getBarycoord( point, target );\r\n\r\n\t},\r\n\tmidpoint: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\r\n\t\treturn this.getMidpoint( target );\r\n\r\n\t},\r\n\tnormal: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn this.getNormal( target );\r\n\r\n\t},\r\n\tplane: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\r\n\t\treturn this.getPlane( target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\r\n\r\n\t},\r\n\tnormal: function ( a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn Triangle.getNormal( a, b, c, target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Shape.prototype, {\r\n\r\n\textractAllPoints: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\r\n\t\treturn this.extractPoints( divisions );\r\n\r\n\t},\r\n\textrude: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\r\n\t\treturn new ExtrudeGeometry( this, options );\r\n\r\n\t},\r\n\tmakeGeometry: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\r\n\t\treturn new ShapeGeometry( this, options );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tsetEulerFromRotationMatrix: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\tsetEulerFromQuaternion: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\treturn this.setFromMatrixScale( m );\r\n\r\n\t},\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\treturn this.setFromMatrixColumn( matrix, index );\r\n\r\n\t},\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\r\n\t\treturn this.applyMatrix4( m );\r\n\r\n\t},\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Geometry.prototype, {\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Object3D.prototype, {\r\n\r\n\tgetChildByName: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\r\n\t},\r\n\trenderDepth: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n\t},\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Object3D.prototype, {\r\n\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Mesh.prototype, {\r\n\r\n\tsetDrawMode: function () {\r\n\r\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( Mesh.prototype, {\r\n\r\n\tdrawMode: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\r\n\t\t\treturn TrianglesDrawMode;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( LOD.prototype, {\r\n\r\n\tobjects: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\treturn this.levels;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t},\r\n\tset: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nSkinnedMesh.prototype.initBones = function () {\r\n\r\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\r\n\r\n};\r\n\r\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\treturn this.arcLengthDivisions;\r\n\r\n\t},\r\n\tset: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\tthis.arcLengthDivisions = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n\tthis.setFocalLength( focalLength );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( BufferAttribute.prototype, {\r\n\r\n\tlength: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\r\n\t\t\treturn this.array.length;\r\n\r\n\t\t}\r\n\t},\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( DynamicDrawUsage );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tcopyIndicesArray: function ( /* indices */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( BufferGeometry.prototype, {\r\n\r\n\taddIndex: function ( index ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\r\n\t},\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\r\n\r\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.setAttribute( name, attribute );\r\n\r\n\t},\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tif ( indexOffset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\r\n\t},\r\n\tclearDrawCalls: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\r\n\t},\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeOffsets: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\r\n\t},\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\r\n\r\n\t\treturn this.deleteAttribute( name );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( BufferGeometry.prototype, {\r\n\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InstancedBufferGeometry.prototype, {\r\n\r\n\tmaxInstancedCount: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\treturn this.instanceCount;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\tthis.instanceCount = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Raycaster.prototype, {\r\n\r\n\tlinePrecision: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\treturn this.params.Line.threshold;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\tthis.params.Line.threshold = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InterleavedBuffer.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( value );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( ExtrudeBufferGeometry.prototype, {\r\n\r\n\tgetArrays: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShapeList: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShape: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Uniform.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tonUpdate: {\r\n\t\tvalue: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Material.prototype, {\r\n\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\toverdraw: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\r\n\t\t\treturn new Color();\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tshading: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\tthis.flatShading = ( value === FlatShading );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tstencilMask: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\treturn this.stencilFuncMask;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\tthis.stencilFuncMask = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhongMaterial.prototype, {\r\n\r\n\tmetal: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\r\n\r\n\ttransparency: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\treturn this.transmission;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\tthis.transmission = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( ShaderMaterial.prototype, {\r\n\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( WebGLRenderer.prototype, {\r\n\r\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t},\r\n\tanimate: function ( callback ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\r\n\t\tthis.setAnimationLoop( callback );\r\n\r\n\t},\r\n\tgetCurrentRenderTarget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\r\n\t\treturn this.getRenderTarget();\r\n\r\n\t},\r\n\tgetMaxAnisotropy: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\r\n\t\treturn this.capabilities.getMaxAnisotropy();\r\n\r\n\t},\r\n\tgetPrecision: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\r\n\t\treturn this.capabilities.precision;\r\n\r\n\t},\r\n\tresetGLState: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\r\n\t\treturn this.state.reset();\r\n\r\n\t},\r\n\tsupportsFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\r\n\t},\r\n\tsupportsHalfFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\r\n\t},\r\n\tsupportsStandardDerivatives: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t},\r\n\tsupportsCompressedTextureS3TC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t},\r\n\tsupportsBlendMinMax: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t},\r\n\tsupportsVertexTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\r\n\t\treturn this.capabilities.vertexTextures;\r\n\r\n\t},\r\n\tsupportsInstancedArrays: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t},\r\n\tenableScissorTest: function ( boolean ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\tthis.setScissorTest( boolean );\r\n\r\n\t},\r\n\tinitMaterial: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t},\r\n\taddPrePlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t},\r\n\taddPostPlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t},\r\n\tupdateShadowMap: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t},\r\n\tsetFaceCulling: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\r\n\r\n\t},\r\n\tallocTextureUnit: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture2D: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\r\n\r\n\t},\r\n\tsetTextureCube: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\r\n\r\n\t},\r\n\tgetActiveMipMapLevel: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\r\n\t\treturn this.getActiveMipmapLevel();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLRenderer.prototype, {\r\n\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.enabled;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tcontext: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\r\n\t\t\treturn this.getContext();\r\n\r\n\t\t}\r\n\t},\r\n\tvr: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\r\n\t\t\treturn this.xr;\r\n\r\n\t\t}\r\n\t},\r\n\tgammaInput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tgammaOutput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\r\n\r\n\t\t}\r\n\t},\r\n\ttoneMappingWhitePoint: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\t\t\treturn 1.0;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLShadowMap.prototype, {\r\n\r\n\tcullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* cullFace */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderReverseSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderSingleSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLRenderTargetCube( width, height, options ) {\r\n\r\n\tconsole.warn( 'THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).' );\r\n\treturn new WebGLCubeRenderTarget( width, options );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.defineProperties( WebGLRenderTarget.prototype, {\r\n\r\n\twrapS: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Audio.prototype, {\r\n\r\n\tload: {\r\n\t\tvalue: function ( file ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\r\n\t\t\tconst scope = this;\r\n\t\t\tconst audioLoader = new AudioLoader();\r\n\t\t\taudioLoader.load( file, function ( buffer ) {\r\n\r\n\t\t\t\tscope.setBuffer( buffer );\r\n\r\n\t\t\t} );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t},\r\n\tstartTime: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nAudioAnalyser.prototype.getData = function () {\r\n\r\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n\treturn this.getFrequencyData();\r\n\r\n};\r\n\r\n//\r\n\r\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\r\n\treturn this.update( renderer, scene );\r\n\r\n};\r\n\r\n//\r\n\r\nconst GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\t\tlet matrix;\r\n\r\n\t\tif ( geometry2.isMesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nImageUtils.crossOrigin = undefined;\r\n\r\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\tconst loader = new TextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\tconst loader = new CubeTextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTexture = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTextureCube = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction CanvasRenderer() {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been removed' );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction JSONLoader() {\r\n\r\n\tconsole.error( 'THREE.JSONLoader has been removed.' );\r\n\r\n}\r\n\r\n//\r\n\r\nconst SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tdetach: function ( /* child, parent, scene */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tattach: function ( /* child, scene, parent */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nfunction LensFlare() {\r\n\r\n\tconsole.error( 'THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js' );\r\n\r\n}\r\n\r\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t/* eslint-disable no-undef */\r\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\r\n\t\trevision: REVISION,\r\n\t} } ) );\r\n\t/* eslint-enable no-undef */\r\n\r\n}\r\n\r\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, AxisHelper, BackSide, BasicDepthPacking, BasicShadowMap, BinaryTextureLoader, Bone, BooleanKeyframeTrack, BoundingBoxHelper, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasRenderer, CanvasTexture, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, ClosedSplineCurve3, Color, ColorKeyframeTrack, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, BoxGeometry as CubeGeometry, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubeUVRefractionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DirectionalLightShadow, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicBufferAttribute, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EdgesHelper, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, Face3, Face4, FaceColors, FileLoader, FlatShading, Float32Attribute, Float32BufferAttribute, Float64Attribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FrontSide, Frustum, GammaEncoding, Geometry, GeometryUtils, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16Attribute, Int16BufferAttribute, Int32Attribute, Int32BufferAttribute, Int8Attribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, JSONLoader, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LensFlare, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, LightShadow, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LinePieces, LineSegments, LineStrip, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LogLuvEncoding, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils as Math, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshFaceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiMaterial, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColors, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricBufferGeometry, ParametricGeometry, Particle, ParticleBasicMaterial, ParticleSystem, ParticleSystemMaterial, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointCloud, PointCloudMaterial, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBDEncoding, RGBEEncoding, RGBEFormat, RGBFormat, RGBIntegerFormat, RGBM16Encoding, RGBM7Encoding, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, Scene, SceneUtils, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, Spline, SplineCurve, SplineCurve3, SpotLight, SpotLightHelper, SpotLightShadow, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, TextBufferGeometry, TextGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16Attribute, Uint16BufferAttribute, Uint32Attribute, Uint32BufferAttribute, Uint8Attribute, Uint8BufferAttribute, Uint8ClampedAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, Vertex, VertexColors, VideoTexture, WebGL1Renderer, WebGLCubeRenderTarget, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderTargetCube, WebGLRenderer, WebGLUtils, WireframeGeometry, WireframeHelper, WrapAroundEnding, XHRLoader, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, sRGBEncoding };\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}