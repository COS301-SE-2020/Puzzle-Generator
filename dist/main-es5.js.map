{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.ts","webpack:///src/app/admin/admin-puzzles/admin-puzzles.component.html","webpack:///src/app/admin/admin-ratings/admin-ratings.component.ts","webpack:///src/app/admin/admin-ratings/admin-ratings.component.html","webpack:///src/app/admin/admin-user/admin-user.component.ts","webpack:///src/app/admin/admin-user/admin-user.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.ts","webpack:///src/app/dialogs/create-dialog/create-dialog.component.html","webpack:///src/app/dialogs/email-pass/email-pass.component.ts","webpack:///src/app/dialogs/email-pass/email-pass.component.html","webpack:///src/app/dialogs/login-dialog/login-dialog.component.ts","webpack:///src/app/dialogs/login-dialog/login-dialog.component.html","webpack:///src/app/dialogs/menu/menu.component.ts","webpack:///src/app/dialogs/menu/menu.component.html","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.ts","webpack:///src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component.html","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.ts","webpack:///src/app/dialogs/profile-update-dialog/profile-update-dialog.component.html","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.ts","webpack:///src/app/dialogs/solve-dialog/solve-dialog.component.html","webpack:///src/app/dialogs/successful-solve/successful-solve.component.ts","webpack:///src/app/dialogs/successful-solve/successful-solve.component.html","webpack:///src/app/navbar/navbar.component.ts","webpack:///src/app/navbar/navbar.component.html","webpack:///src/app/pages/aicreate/aicreate.component.ts","webpack:///src/app/pages/aicreate/aicreate.component.html","webpack:///src/app/pages/create/create.component.ts","webpack:///src/app/pages/create/create.component.html","webpack:///src/app/pages/footer/footer.component.ts","webpack:///src/app/pages/footer/footer.component.html","webpack:///src/app/pages/index/index.component.ts","webpack:///src/app/pages/index/index.component.html","webpack:///src/app/pages/leaderboard/LeaderboardArr.ts","webpack:///src/app/pages/leaderboard/leaderboard.component.ts","webpack:///src/app/pages/leaderboard/leaderboard.component.html","webpack:///src/app/pages/login/login.component.ts","webpack:///src/app/pages/login/login.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.html","webpack:///src/app/pages/profile-puzzles/profile-puzzles.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.ts","webpack:///src/app/pages/profile-ratings/profile-ratings.component.html","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.ts","webpack:///src/app/pages/profile-solved-puzzles/profile-solved-puzzles.component.html","webpack:///src/app/pages/profile/profile.component.ts","webpack:///src/app/pages/profile/profile.component.html","webpack:///src/app/pages/ratings/RatingsArr.ts","webpack:///src/app/pages/ratings/puzzleArr.ts","webpack:///src/app/pages/ratings/ratings.component.ts","webpack:///src/app/pages/ratings/ratings.component.html","webpack:///src/app/pages/reset-password/reset-password.component.ts","webpack:///src/app/pages/reset-password/reset-password.component.html","webpack:///src/app/pages/reset-success/reset-success.component.ts","webpack:///src/app/pages/reset-success/reset-success.component.html","webpack:///src/app/pages/signup/signup.component.ts","webpack:///src/app/pages/signup/signup.component.html","webpack:///src/app/rate-dialog/rate-dialog.component.ts","webpack:///src/app/rate-dialog/rate-dialog.component.html","webpack:///src/app/services/api.service.ts","webpack:///src/assets/js/FileSaver.js","webpack:///src/assets/js/OrbitControls.js","webpack:///src/assets/js/aiCreation.js","webpack:///src/assets/js/downloadPuzzle.js","webpack:///src/assets/js/generate3D.js","webpack:///src/assets/js/jszip.min.js","webpack:///src/assets/js/manualCreation.js","webpack:///src/assets/js/solvePuzzle.js","webpack:///src/assets/js/three.module.js","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AdminPuzzlesComponent","api","router","ratings","puzzles","pageSize","startIndex","endIndex","pageSizeOptions","event","pageIndex","totalNumberOfPuzzles","slice","filterValue","datasource","filterPredicate","data","filter","name","toLowerCase","includes","creator","trim","filteredData","length","sort","a","b","sortedBy","paramA","paramB","Date","created","getTime","rating","i","puzzleObj","description","createdAt","image","shared","j","total","k","puzzleID","push","puzzleAscending","dataAvailable","show","populatePuz","getAllPuzzleRatings","subscribe","ratingObj","error","console","log","getPuzzles","getAllPuzzlesAdmin","Object","deletePuzzleAdmin","alert","location","reload","localStorage","getItem","navigate","populate","applyFilter","selector","templateUrl","styleUrls","AdminRatingsComponent","getAllRatingsAdmin","ratingList","testPuzzle","testUser","rateID","deleteRatingAdmin","getPuzzleRatings","AdminUserComponent","totalNumberOfUsers","userList","username","getAllUsers","user","deleteUser","getUsers","routes","path","component","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","title","AppModule","declarations","entryComponents","providers","bootstrap","CreateDialogComponent","dialog","clicked","EmailPassComponent","formBuilder","dialogRef","error_messages","type","message","form","input","email","close","group","required","submit","LoginDialogComponent","MenuComponent","ProfilePuzzlesDialogComponent","fromPage","pageValue","ProfileUpdateDialogComponent","SolveDialogComponent","token","SuccessfulSolveComponent","NavbarComponent","removeItem","admin","logout","AICreateComponent","createDialog","open","disableClose","hasBackdrop","loginDialog","success","CreateComponent","FooterComponent","IndexComponent","LeaderboardArr","LeaderboardComponent","displayedColumns","dataSource","paginator","target","value","firstPage","leaderboardObj","memberSince","currentUser","getPuzzlesByUser","nrPuzzles","populateTable","LoginComponent","fieldTextType","formError","verifyUser","password","loginUser","setItem","setTimeout","status","emailDialogRef","afterClosed","result","entry","requestPasswordChange","loginForm","minLength","toggleFieldTextType","sendMail","ProfilePuzzlesComponent","temp","setPageSizeOptionsInput","userPuzzleList","text","nameAscending","puzzle","sharePuzzle","profileDialog","deletePuzzle","stopSharingPuzzle","ms","solveDialog","delay","getUserPuzzles","ProfileRatingsComponent","split","map","str","userRatingsList","puzzleName","getPuzzleRatingsByUser","ratePID","rateDialogRef","ratingEntry","createNewPuzzleRating","rateP","checkData","openRateDialog","deleteVal","findRatingID","deleteRating","getUserPuzzleRatings","ProfileSolvedPuzzlesComponent","dateCreated","retrieveAllSolveAttempts","ProfileComponent","nameTextboxValue","undefined","updateName","currentUserObject","updatePorfileDialog","usernameTextboxValue","updateUsername","getUser","updateNameForm","pattern","updateUsernameForm","RatingsArr","PuzzleArr","RatingsComponent","cdr","getAllPuzzles","searchValue","getSearchedPuzzles","dataObjectSize","showRating","ratingSavedDialog","ResetPasswordComponent","fieldTextType2","resetDone","doPasswordsMatch","resetPasswordForm","controls","resetPassword","confirmPassword","firstPassword","secondPassword","toggleFieldTextType2","ResetSuccessComponent","route","snapshot","paramMap","get","SignupComponent","createUser","signUpForm","newUser","createNewUser","RateDialogComponent","APIService","http","httpOptions","headers","post","put","term","providedIn","saveAs","navigator","msSaveOrOpenBlob","bind","view","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","externalHost","click","node","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","force_saveable_type","fs_min_size","deletion_queue","process_deletion_queue","file","revokeObjectURL","remove","dispatch","filesaver","event_types","concat","listener","call","FileSaver","blob","blob_changed","object_url","target_view","get_object_url","createObjectURL","dispatch_all","fs_error","href","window","readyState","DONE","abortable","func","apply","arguments","create_if_not_found","create","exclusive","INIT","download","chrome","webkitSlice","size","TEMPORARY","fs","root","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","prototype","onwritestart","onprogress","onwrite","onabort","addEventListener","unload","removeEventListener","self","content","OrbitControls","object","domElement","warn","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","focus","mouseAction","button","ctrlKey","metaKey","shiftKey","stopPropagation","DOLLY_ROTATE","tabIndex","constructor","MapControls","Chromosome","sites","fitness","Site","surfaceArea","generatePuzzleAIButton","nextPuzzleButton","previousPuzzleButton","progressBar","generatedPuzzles","renderedPuzzleIndex","tempWidth","tempHeight","totalSurfaceArea","generationSize","tournamentSize","maximumIterations","seedString","sliders","labels","numberOfSites","desiredProportions","groupDistribution","copyObject","obj","JSON","parse","stringify","xmur3","h","imul","charCodeAt","mulberry32","t","seed","rand","random","floor","expandPuzzle","factor","tempSites","initializeDataAI","getElementById","generatePuzzleAI","style","display","displaySlidersCard","newGeneration","run","index","renderPuzzle","numberOfPiecesInGroup","parseInt","generateSliders","appendChild","proportion","counter","innerHTML","lastGeneration","expandedSites","numberOfSliders","inputContainer","defaultValue","slider","createElement","previousValue","sliderid","step","difference","distributedValue","toFixed","leftover","tempValue","parseFloat","headerLabel","valueLabel","br","currentGeneration","nextGeneration","parentX","parentY","children","initializeGeneration","generation","getFittest","runTournament","crossover","mutate","calculateAndSetFitness","fittestChromosome","chromosome","selectedSite","movementDirection","chromosomeX","chromosomeY","swapIndex","childX","childY","tempSite","chosenChromosome","newChromosome","siteIndex","determineAndSetSiteBoundaries","sortSites","siteA","siteB","row","col","distances","equidistantPoints","getPuzzleDataURL","piecesJSONObject","pieces","base64Image","desiredFile","downloadPuzzle3D","getPuzzleData","downloadPuzzle2D","url","$","ajax","puzzleObject","generateSTLFiles","generateImageFile","zip","imgFolder","folder","tileFolder","cuboidFolder","createTilePrintableFiles","depths","getDepth","createCuboidPrintableFiles","base64","generateAsync","depthsArray","currentPiece","topRight","topLeft","bottomRight","bottomLeft","nextTopRight","nextTopLeft","nextBottomRight","nextBottomLeft","stlFileFrontFace","stlFileBackFace","pieceIndex","vertexIndex","z","addVertexToFile","zPositionBottom","zPositionTop","optionalSuffix","stlFile","vertexA","vertexB","vertexC","nth","scene","camera","renderer","line","points","pieceGeometry","pieceGeometryArray","piece","initiate3DCanvas","height","width","background","antialias","setSize","render3D","jsonData","appendedString","extractPoints","pieceMeshArray","generateAndColorMeshes","colors","addMeshesToScene","animate","meshArray","mesh","frustumCulled","tempPieceMeshArray","material","color","tempPieceGeometryArray","buildSquare","vertices","buildTriangle","point1","point2","point3","faces","requestAnimationFrame","render","s","o","u","r","require","l","n","c","d","p","encode","f","getTypeOf","charAt","join","decode","substr","replace","uint8array","Uint8Array","Array","indexOf","compressedSize","uncompressedSize","crc32","compression","compressedContent","getContentWorker","pipe","uncompressWorker","on","streamInfo","data_length","getCompressedWorker","withStreamInfo","createWorkerFrom","compressWorker","STORE","magic","DEFLATE","binary","createFolders","date","compressionOptions","comment","unixPermissions","dosPermissions","lie","Uint16Array","Uint32Array","_pako","_pakoAction","_pakoOptions","meta","inherits","processChunk","_createPako","transformTo","flush","cleanUp","raw","level","onData","pako","A","String","fromCharCode","O","utf8encode","I","m","_","g","w","S","C","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCFullYear","getUTCMonth","getUTCDate","B","E","fileRecord","R","LOCAL_FILE_HEADER","dirRecord","CENTRAL_FILE_HEADER","bytesWritten","zipComment","zipPlatform","encodeFileName","streamFiles","accumulate","contentBuffer","dirRecords","currentSourceOffset","entriesCount","currentFile","_sources","percent","openedSource","closedSource","DATA_DESCRIPTOR","shift","CENTRAL_DIRECTORY_END","prepareNextSource","previous","isPaused","pause","resume","registerPrevious","end","generatedError","lock","generateWorker","platform","options","_compressWorker","files","loadAsync","support","defaults","version","external","decompressed","extend","checkCRC32","optimizedBinaryString","decodeFileName","utf8decode","isNode","isStream","reject","prepareContent","load","all","fileNameStr","fileCommentStr","_upstreamEnded","_bindStream","_stream","Readable","_helper","emit","_read","Buffer","newBufferFrom","from","allocBuffer","alloc","fill","isBuffer","toUpperCase","substring","lastIndexOf","toString","hasOwnProperty","generate","generateInternalStream","mimeType","checkSupport","generateNodeStream","toNodejsStream","stream","byteAt","zero","lastIndexOfSignature","readAndCheckSignature","readData","checkOffset","checkIndex","setIndex","skip","readInt","readString","readDate","UTC","subarray","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","destType","propName","dataIsReady","_tickScheduled","_tickAndRepeat","isFinished","_tick","extraStreamInfo","isLocked","_listeners","mergeStreamInfo","nodestream","_internalType","_outputType","_mimeType","newBlob","_worker","objectMode","array","string","arraybuffer","ArrayBuffer","nodebuffer","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","leftOver","applyFromCharCode","Utf8DecodeWorker","Utf8EncodeWorker","stringifyByChunk","stringifyByChar","applyCanBeUsed","buffer","byteLength","MAX_VALUE_16BITS","MAX_VALUE_32BITS","pretty","FileReader","onload","readAsArrayBuffer","loadOptions","checkSignature","reader","isSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","localHeaderOffset","readLocalPart","handleUTF8","processAttributes","readCentralDir","zip64","readCentralPart","readEndOfCentral","abs","prepareReader","isEncrypted","bitFlag","useUTF8","fileNameLength","fileName","compressionMethod","versionMadeBy","extraFieldsLength","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","readExtraFields","parseZIP64ExtraField","fileComment","extraFields","findExtraFieldUnicodePath","findExtraFieldUnicodeComment","_data","_dataBinary","internalStream","_decompressWorker","async","nodeStream","MutationObserver","WebKitMutationObserver","createTextNode","observe","characterData","MessageChannel","onreadystatechange","parentNode","removeChild","documentElement","port1","onmessage","port2","postMessage","global","TypeError","queue","outcome","promise","onFulfilled","callFulfilled","otherCallFulfilled","onRejected","callRejected","otherCallRejected","race","immediate","assign","method","chunkSize","windowBits","memLevel","strategy","to","gzip","err","msg","ended","chunks","strm","avail_out","deflateInit2","header","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","output","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","inflateInit2","Z_OK","inflateGetHeader","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","inflateSetDictionary","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","Int32Array","setTyped","Buf16","Buf32","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","T","D","F","pending","pending_buf","pending_out","total_out","N","_tr_flush_block","block_start","strstart","U","P","L","max_chain_length","prev_length","nice_match","w_size","w_mask","prev","good_match","lookahead","match_start","window_size","hash_size","head","wrap","adler","total_in","insert","ins_h","hash_shift","hash_mask","Z","match_length","_tr_tally","max_lazy_match","last_lit","W","prev_match","match_available","M","good_length","max_lazy","nice_length","max_chain","H","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","G","data_type","_tr_init","K","Y","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","time","os","_tr_align","_tr_stored_block","deflateInfo","xflags","extra_len","done","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","mode","sane","last","havedict","flags","check","wbits","ncode","nlen","ndist","have","next","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","V","q","J","splice","apiURL","distanceMetric","contentDiv","aiContentDiv","canvas","canvasCoords","stage","layer","square","pointsArray","siteBoundaries","precision","colorPalettes","selectedPalette","paletteCounter","radioButtons","hoverOverPoint","disableEditMode","deletePointButtonClicked","editIcon","deleteIcon","defaultPalette","addColorPalette","shadesOfRedPalette","shadesOfGreenPalette","shadesOfBluePalette","arrayOfColors","paletteName","changePuzzleColorPalette","removeChildren","attrs","stroke","draw","randomizePuzzleColorPalette","rgbColor","getRandomRGB","initializeData","Stage","container","Layer","getBoundingClientRect","point","createPoint","generatePuzzle","setDistanceMetric","savePuzzle","palettes","getElementsByClassName","paletteIndex","getAttribute","puzzleDescription","puzzleImage","toDataURL","pixelRatio","contentType","dataType","metric","setDisableEditMode","bool","setSites","clearBoard","destroyChildren","Ring","innerRadius","outerRadius","strokeWidth","draggable","onmousemove","body","cursor","destroy","getChildren","getClassName","generateSiteBoundaries","createPieces","trimmedPoints","trimPoints","Line","pointArray","lastPointCol","firstPointCol","currentRow","crissCross","calculateDistancesFromSitesToPoint","equidistantPointsPresent","returnArray","minimumDistance","xOfPoint","yOfPoint","sitePoints","calculateDistance","point1X","point1Y","point2X","point2Y","calculateEuclideanDistance","calculateManhattanDistance","resultX","resultY","saveSolveAttemptURL","correctPositions","pieceInCorrectPosition","correctOrientation","outline","board","startTime","puzzleSolved","solvedDiv","initializeDataSolve","Rect","saveSolveAttempt","solved","solvePuzzleID","solveStartTime","timeTaken","performance","now","attemptDuration","generatePieces","generalTransformer","Transformer","centeredScaling","rotationSnaps","rotationSnapTolerance","resizeEnabled","borderEnabled","anchorStroke","anchorFill","rotateAnchorOffset","selectedPiece","offsetX","getRandomOffsetX","offsetY","getRandomOffset","getMin","minY","Group","hitBox","perfectDrawEnabled","moveToTop","nodes","attributes","_getNodeRect","shape","rotateAroundCenter","rotation","_fitNodesInto","checkPositionAndSnapIntoPlace","getRandomRotation","hitBoxCoordinates","absolutePosition","checkPosition","snapPieceIntoPlace","checkIfPuzzleSolved","choice","getMax","coordinate","lowerBound","upperBound","returnValue","pixelArray","minX","maxX","coords1","coords2","xDifference","yDifference","span","onclick","currentCoords","targetCoords","rotateAroundPoint","angleRad","cos","sin","__assign","deltaRad","center","getCenter","Number","EPSILON","isInteger","sign","Function","defineProperty","match","source","nextKey","REVISION","MOUSE","TOUCH","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","EventDispatcher","listeners","hasEventListener","listenerArray","_lut","_seed","MathUtils","DEG2RAD","RAD2DEG","generateUUID","d0","d1","d2","d3","uuid","clamp","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","defineProperties","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","addVectors","addScalar","subScalar","multiply","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","cross","lengthSq","manhattanLength","normalize","atan2","distanceTo","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","getInverse","throwOnDegenerate","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","sx","sy","cx","cy","rotate","translate","_canvas","ImageUtils","getDataURL","src","HTMLCanvasElement","context","getContext","ImageData","putImageData","drawImage","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","isTexture","updateMatrix","toJSON","isRootObject","textures","metadata","generator","images","isArray","transformUv","uv","Vector4","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","WebGLMultisampleRenderTarget","samples","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","len","tDir","multiplyQuaternionsFlat","_onChangeCallback","isQuaternion","setFromEuler","euler","isEuler","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","vFrom","vTo","angleTo","rotateTowards","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","callback","_vector","Vector3","_quaternion","isVector3","multiplyVectors","applyEuler","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","dz","setFromSphericalCoords","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sz","_v1","_m1","Matrix4","_zero","_one","isMatrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","eye","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","x2","y2","z2","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","near","far","makeOrthographic","_matrix","_quaternion$1","Euler","DefaultOrder","_order","RotationOrders","asin","setFromQuaternion","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_v1$1","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","configurable","enumerable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","isLight","attach","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","isInstancedMesh","count","instanceMatrix","serialize","library","isMesh","isLine","isPoints","geometry","parameters","uuids","extractFromCache","cache","values","key","recursive","Scene","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_points","_vector$1","_box","Box3","_v0","_v1$2","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","isBox3","setFromArray","minZ","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","expandByObject","box","isEmpty","getSize","expandByVector","expandByScalar","boundingBox","computeBoundingBox","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","axes","satForAxes","distanceToPoint","clampedPoint","getBoundingSphere","intersect","v0","extents","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","delta","start","intersectsLine","startSign","endSign","coplanarPoint","optionalNormalMatrix","referencePoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getUV","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","Color","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","hex","setHSL","handleAlpha","exec","components","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","lightMapIntensity","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","usage","updateRange","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","computeGroups","face","fromGeometry","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","arrayMax","_bufferGeometryId","_m1$2","_obj","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","tangent","computeBoundingSphere","positions","lineDistances","isGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","raycaster","intersects","intersection","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","checkIntersection","uvs_f","morphInfluences","influence","isSkinnedMesh","boneTransform","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","kl","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","uvs1","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","srcVertexNormal","destVertexNormal","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","uniform","Camera","PerspectiveCamera","aspect","filmGauge","filmOffset","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","clearViewOffset","skew","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","currentXrEnabled","xr","currentRenderTarget","getRenderTarget","setRenderTarget","clear","stencil","WebGLCubeRenderTarget","dummy","fromEquirectangularTexture","shader","tEquirect","DataTexture","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","UniformsLib","common","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","frame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","isInterleavedBufferAttribute","deleteBuffer","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","transmission","transmissionMap","WebGLBackground","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","has","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","updateCache","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","pathLength","lastIndex","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","WebGLShader","createShader","shaderSource","compileShader","programIdCount","addLineNumbers","getEncodingComponents","getShaderErrors","getShaderParameter","getShaderInfoLog","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","WebGLProgram","cacheKey","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","shaderName","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","cachedUniforms","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","getParameters","shadows","nClipPlanes","nClipIntersection","isMeshStandardMaterial","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","materialProperties","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","onSceneDispose","cameras","list","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","vsm_frag","vsm_vert","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","mapPass","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","renderObject","VSMPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","isGroup","WebXRController","_targetRay","_grip","_hand","getHandSpace","joints","inputState","pinching","XRHand","LITTLE_PHALANX_TIP","joint","getTargetRaySpace","getGripSpace","disconnect","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","jointPose","getJointPose","transform","jointRadius","indexTip","INDEX_PHALANX_TIP","thumbTip","THUMB_PHALANX_TIP","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","WebXRManager","framebufferScaleFactor","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","isPresenting","getController","controller","getControllerGrip","getHand","onSessionEvent","onSessionEnd","setFramebuffer","animation","onRequestReferenceSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","updateInputSources","inputSources","removed","added","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","getCamera","depthNear","depthFar","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","refreshUniformsCommon","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","opaqueObjects","transparentObjects","renderObjects","isLOD","isImmediateRenderObject","camera2","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","ltc_1","LTC_1","ltc_2","LTC_2","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","WebGL1Renderer","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","float32Array","transformVertex","vertexPosition","mvPosition","_v1$4","_v2$2","LOD","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","calculateInverses","normalizeSkinWeights","skinWeight","basePosition","skinIndex","weight","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","bone","isBone","getBoneByName","Bone","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","linecap","linejoin","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","computeLineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","hasVideoFrameCallback","HAVE_CURRENT_DATA","CompressedTexture","CanvasTexture","isCanvasTexture","DepthTexture","WireframeGeometry","edge","edges","edge1","edge2","ol","ParametricGeometry","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","uvA","uvB","uvC","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","generateBufferData","generateSegment","generateIndices","getPointAt","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","shapePoints","reverse","hl","ahole","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","font","isFont","generateShapes","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","uOffset","RingGeometry","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","segment","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","inverseSegments","base","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","indexOffset","shapeVertices","shapeHoles","shapeHole","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","__proto__","RawShaderMaterial","Materials","AnimationUtils","arraySlice","isTypedArray","convertArray","forceClone","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceValue","interpolant","createInterpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","json","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","getTrackTypeForValueTypeName","typeName","parseKeyframeTrack","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","requestHeader","setCrossOrigin","setPath","setResourcePath","setRequestHeader","loading","FileLoader","cached","dataUriRegex","dataUriRegexResult","request","isBase64","decodeURIComponent","atob","response","responseType","parser","DOMParser","parseFromString","XMLHttpRequest","callbacks","withCredentials","overrideMimeType","send","setResponseType","setWithCredentials","setMimeType","AnimationLoader","CompressedTextureLoader","loaded","loadTexture","texDatas","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","onImageLoad","onImageError","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","cacheLengths","sums","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","scaleW","scaleH","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","getAt","coeff","getIrradianceAt","addScaledSH","getBasisAt","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","decodeText","TextDecoder","escape","extractUrlBase","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","TYPED_ARRAYS","arrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","geometryShapes","bufferGeometryLoader","details","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","isImageBitmapLoader","setOptions","res","imageBitmap","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","_cachedOutline","action","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","sky","ground","isHemisphereLightProbe","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","oldTime","elapsedTime","running","getElapsedTime","getDelta","newTime","_position$2","_quaternion$3","_scale$1","_orientation","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","getInput","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","play","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","_position$3","_quaternion$4","_scale$2","_orientation$1","PositionalAudio","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","nodeName","isAnimationObjectGroup","sanitizeNodeName","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Spherical","other","setFromCartesianCoords","Cylindrical","_vector$7","Box2","_startP","_startEnd","Line3","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","startEnd_startP","ImmediateRenderObject","_vector$8","SpotLightHelper","cone","coneLength","coneWidth","_vector$9","_boneMatrix","_matrixWorldInv","getBoneList","boneList","SkeletonHelper","isSkeletonHelper","PointLightHelper","sphereSize","_vector$a","_color1","_color2","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","_v1$5","_v2$3","_v3$1","DirectionalLightHelper","lightPlane","targetLine","_vector$b","_camera","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","_box$3","BoxHelper","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setColor","AxesHelper","LOD_MIN","LOD_MAX","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","MAX_SAMPLES","ENCODINGS","_flatCamera","_createPlanes","_lodPlanes","_sizeLods","_sigmas","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","fromScene","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","equirectangular","_fromTexture","fromCubemap","cubemap","compileCubemapShader","_getCubemapShader","compileEquirectangularShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","maxComponent","fExp","log2","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","exp","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","shaderMaterial","_getCommonVertexShader","_getEncodings","Face4","LineStrip","LinePieces","NoColors","FaceColors","VertexColors","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","Handlers","XHRLoader","BinaryTextureLoader","setTexturePath","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","removeAttribute","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","WebGLRenderTargetCube","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","CanvasRenderer","JSONLoader","SceneUtils","createMultiMaterialObject","detach","LensFlare","revision","production","bootstrapModule"],"mappings":"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AA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-puzzles',\r\n  templateUrl: './admin-puzzles.component.html',\r\n  styleUrls: ['./admin-puzzles.component.css']\r\n})\r\nexport class AdminPuzzlesComponent implements OnInit {\r\n\r\n  ratings: Array<RatingsArr> = [];\r\n  puzzles: Array<PuzzleArr> = [];\r\n  ratingEntry: any;\r\n  datasource: any;\r\n  show: boolean;\r\n  dataAvailable: boolean ;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      puzzleObj.shared = data[i].shared;\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          //********* ERROR HERE - THIS LOOP IS NOT ENTERED WHEN THE RATINGS VALUE IS 0  ************\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n    this.puzzleAscending();\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzlesAdmin().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  delete(puzzleID){\r\n      if(this.api.deletePuzzleAdmin(puzzleID).subscribe()){\r\n        alert(\"Puzzle deleted\");\r\n        location.reload();\r\n      }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n    this.show = true;\r\n    this.dataAvailable = false;\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n  <mat-form-field class=\"searchArea\">\r\n      <mat-label>Search</mat-label>\r\n      <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n  </mat-form-field>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n    sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n  }\">Name\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n    sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n  }\">Rating\r\n    <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n    sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n  }\">Creator\r\n    <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n  <button mat-button [ngClass]=\"{\r\n    inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n    sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n  }\">Date\r\n    <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n    <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n  </button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n  <h1 class=\"main-title\" >All Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <!-- <mat-icon aria-hidden=\"false\" class=\"infoIcon\">info_outline</mat-icon> -->\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Created by:</strong> {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\"><strong>Shared:</strong> {{puzzle.shared}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"delete(puzzle.id)\">DELETE PUZZLE</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { PuzzleArr } from '../../pages/ratings/puzzleArr';\r\nimport { RatingsArr } from '../../pages/ratings/RatingsArr';\r\n\r\n@Component({\r\n  selector: 'app-admin-ratings',\r\n  templateUrl: './admin-ratings.component.html',\r\n  styleUrls: ['./admin-ratings.component.css']\r\n})\r\nexport class AdminRatingsComponent implements OnInit {\r\n\r\n  ratingList: any;\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  show: boolean;\r\n\r\n  datasource: any;\r\n  sortedBy: any = true;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  getPuzzleRatings() {\r\n    this.api.getAllRatingsAdmin().subscribe( data => {\r\n      this.ratingList = data;\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      console.log(this.ratingList);\r\n      this.show = false ;\r\n      this.datasource = new MatTableDataSource(this.ratingList);\r\n      this.puzzleAscending();\r\n    }\r\n    )\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.testPuzzle.name.toLowerCase().includes(filter) || data.testUser.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.ratingList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.testPuzzle.name.toLowerCase();\r\n      let paramB = b.testPuzzle.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.testUser.name.toLowerCase();\r\n      let paramB = b.testUser.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.ratingList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  delete(rateID){\r\n    if(this.api.deleteRatingAdmin(rateID).subscribe()){\r\n      alert(\"Rating deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getPuzzleRatings();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Rater\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" >\r\n    <h1 class=\"main-title\" >All Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.testPuzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rating: </strong>{{rating.rating}}/5</mat-card-subtitle>\r\n               <mat-card-subtitle class=\"puzzleDetails\"><strong>Rater: </strong>{{rating.testUser.name}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{rating.testPuzzle.name}}</strong></mat-card-title>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"delete(rating.id)\">DELETE RATING</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\n\r\n@Component({\r\n  selector: 'app-admin-user',\r\n  templateUrl: './admin-user.component.html',\r\n  styleUrls: ['./admin-user.component.css']\r\n})\r\nexport class AdminUserComponent implements OnInit {\r\n\r\n  userList: any;\r\n  show: boolean;\r\n  totalNumberOfUsers: number;\r\n  pageSize: number = 12;\r\n  startIndex:number = 0;\r\n  endIndex: number = 12;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n  datasource: any;\r\n\r\n  pageEvent: PageEvent;\r\n  sortedBy: any = \"\";\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfUsers){\r\n      this.endIndex = this.totalNumberOfUsers\r\n    }\r\n    this.userList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  puzzleDescending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.userList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.username.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfUsers = this.datasource.filteredData.length;\r\n  }\r\n\r\n  getUsers(){\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.totalNumberOfUsers = Object.keys(data).length;\r\n      this.userList = data;\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userList);\r\n      this.puzzleAscending();\r\n    });\r\n  }\r\n\r\n  delete(user){\r\n    if(this.api.deleteUser(user).subscribe()){\r\n      alert(\"User deleted\");\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.getUsers();\r\n    this.show = true;\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container-fluid\" >\r\n    <h1>All Users</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n      <div class=\"content\" *ngFor=\"let user of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n        <mat-card>\r\n            <mat-card-title><strong>{{user.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Email: {{user.username}}</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button id=\"delete\" (click)=\"delete(user.id)\">DELETE USER</button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" [length]=\"totalNumberOfUsers\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component'\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component'\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component'\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {path: 'index', component: IndexComponent},\r\n  {path: 'signup', component: SignupComponent},\r\n  {path: 'login', component: LoginComponent},\r\n  {path: 'profile', component: ProfileComponent},\r\n  {path: 'profilePuzzles', component: ProfilePuzzlesComponent},\r\n  {path: 'profileRatings', component: ProfileRatingsComponent},\r\n  {path: 'profileSolvedPuzzle', component: ProfileSolvedPuzzlesComponent},\r\n  {path: 'ratings', component: RatingsComponent},\r\n  {path: 'resetPassword', component: ResetPasswordComponent},\r\n  {path: 'resetSuccess', component: ResetSuccessComponent},\r\n  {path: 'create', component: CreateComponent},\r\n  {path: 'aicreate', component: AICreateComponent},\r\n  {path: 'adminUser', component: AdminUserComponent},\r\n  {path: 'adminRatings', component: AdminRatingsComponent},\r\n  {path: 'adminPuzzles', component: AdminPuzzlesComponent},\r\n  {path: 'leaderboard', component: LeaderboardComponent},\r\n\r\n\r\n    // otherwise redirect to home\r\n  { path: '', redirectTo: '/index', pathMatch: 'full' },\r\n  { path: '**', component: IndexComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'prometheus-puzzles';\r\n  \r\n  constructor() {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {NgxPaginationModule} from 'ngx-pagination';\r\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n//\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport { MatToolbarModule} from '@angular/material/toolbar';\r\nimport { MatTableModule} from '@angular/material/table';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatGridListModule } from '@angular/material/grid-list'\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\r\n\r\n\r\n//pages\r\nimport { IndexComponent } from './pages/index/index.component';\r\nimport { SignupComponent } from './pages/signup/signup.component';\r\nimport { LoginComponent } from './pages/login/login.component';\r\nimport { ProfileComponent } from './pages/profile/profile.component';\r\nimport { NavbarComponent } from './navbar/navbar.component';\r\nimport { RatingsComponent } from './pages/ratings/ratings.component';\r\nimport { ResetPasswordComponent } from './pages/reset-password/reset-password.component';\r\nimport { ResetSuccessComponent } from './pages/reset-success/reset-success.component';\r\nimport { CreateComponent } from './pages/create/create.component';\r\nimport { RateDialogComponent } from './rate-dialog/rate-dialog.component';\r\nimport { ProfilePuzzlesComponent } from './pages/profile-puzzles/profile-puzzles.component';\r\nimport { ProfileRatingsComponent } from './pages/profile-ratings/profile-ratings.component';\r\nimport { AICreateComponent } from './pages/aicreate/aicreate.component';\r\nimport { AdminUserComponent } from './admin/admin-user/admin-user.component';\r\nimport { AdminRatingsComponent } from './admin/admin-ratings/admin-ratings.component';\r\nimport { AdminPuzzlesComponent } from './admin/admin-puzzles/admin-puzzles.component';\r\nimport { SolveDialogComponent } from './dialogs/solve-dialog/solve-dialog.component';\r\nimport { ProfileSolvedPuzzlesComponent } from './pages/profile-solved-puzzles/profile-solved-puzzles.component';\r\nimport { MenuComponent } from './dialogs/menu/menu.component';\r\nimport { CreateDialogComponent } from './dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from './dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from './dialogs/profile-update-dialog/profile-update-dialog.component';\r\nimport { SuccessfulSolveComponent } from './dialogs/successful-solve/successful-solve.component';\r\nimport { EmailPassComponent } from './dialogs/email-pass/email-pass.component';\r\nimport { FooterComponent } from './pages/footer/footer.component';\r\nimport { ProfilePuzzlesDialogComponent } from './dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { LeaderboardComponent } from './pages/leaderboard/leaderboard.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    IndexComponent,\r\n    SignupComponent,\r\n    LoginComponent,\r\n    ProfileComponent,\r\n    RatingsComponent,\r\n    NavbarComponent,\r\n    ResetPasswordComponent,\r\n    ResetSuccessComponent,\r\n    CreateComponent,\r\n    RateDialogComponent,\r\n    ProfilePuzzlesComponent,\r\n    ProfileRatingsComponent,\r\n    AICreateComponent,\r\n    AdminUserComponent,\r\n    AdminRatingsComponent,\r\n    AdminPuzzlesComponent,\r\n    SolveDialogComponent,\r\n    ProfileSolvedPuzzlesComponent,\r\n    MenuComponent,\r\n    CreateDialogComponent,\r\n    LoginDialogComponent,\r\n    ProfileUpdateDialogComponent,\r\n    SuccessfulSolveComponent,\r\n    EmailPassComponent,\r\n    FooterComponent,\r\n    ProfilePuzzlesDialogComponent,\r\n    LeaderboardComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    NgxPaginationModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    FlexLayoutModule,\r\n    MatButtonModule,\r\n    MatDividerModule,\r\n    MatIconModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule,\r\n    MatToolbarModule,\r\n    MatTableModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    MatInputModule, MatListModule, MatPaginatorModule, MatProgressBarModule,\r\n    MatCardModule, MatFormFieldModule, MatDialogModule, MatGridListModule, MatRadioModule, ReactiveFormsModule,\r\n    MDBBootstrapModule.forRoot(),\r\n  ],\r\n  entryComponents: [RateDialogComponent],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-create-dialog',\r\n  templateUrl: './create-dialog.component.html',\r\n  styleUrls: ['./create-dialog.component.css']\r\n})\r\nexport class CreateDialogComponent implements OnInit {\r\n  \r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/profilePuzzles']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>Successfully Created</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-email-pass',\r\n  templateUrl: './email-pass.component.html',\r\n  styleUrls: ['./email-pass.component.css']\r\n})\r\nexport class EmailPassComponent implements OnInit {\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<EmailPassComponent>) { }\r\n\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ]\r\n  }\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  submit(form){\r\n    this.input = form.email;\r\n      this.dialogRef.close(`${form.email}`);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      email: ['', [Validators.email, Validators.required]]\r\n    })\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Enter email address. </h1>\r\n  <h3>Email with reset password confirmation will be sent.</h3>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"email\" placeholder=\"Enter Email\" ngControl=\"email\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.email\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('email').hasError(error.type) && (form.get('email').dirty || form.get('email').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login-dialog',\r\n  templateUrl: './login-dialog.component.html',\r\n  styleUrls: ['./login-dialog.component.css']\r\n})\r\nexport class LoginDialogComponent implements OnInit {\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  clicked(){\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>You are not logged in. Please login</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Puzzle Rating Successful</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles-dialog',\r\n  templateUrl: './profile-puzzles-dialog.component.html',\r\n  styleUrls: ['./profile-puzzles-dialog.component.css']\r\n})\r\nexport class ProfilePuzzlesDialogComponent implements OnInit {\r\n\r\n  fromPage: string;\r\n\r\n  constructor( public dialogRef: MatDialogRef<ProfilePuzzlesDialogComponent>, \r\n              @Optional() @Inject(MAT_DIALOG_DATA) public data: any) \r\n  {\r\n    this.fromPage = data.pageValue;\r\n  }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div mat-dialog-content><strong>{{fromPage}}</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-profile-update-dialog',\r\n  templateUrl: './profile-update-dialog.component.html',\r\n  styleUrls: ['./profile-update-dialog.component.css']\r\n})\r\nexport class ProfileUpdateDialogComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  clicked(){\r\n    location.reload();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- <h1 mat-dialog-title></h1> -->\r\n<div mat-dialog-content><strong>Profile Successfully Updated</strong></div>\r\n<div mat-dialog-actions>\r\n  <button mat-button mat-dialog-close class=\"btns\" (click)=\"clicked()\">Close</button>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { initializeDataSolve } from 'src/assets/js/solvePuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-solve-dialog',\r\n  templateUrl: './solve-dialog.component.html',\r\n  styleUrls: ['./solve-dialog.component.css']\r\n})\r\nexport class SolveDialogComponent implements OnInit {\r\n\r\n  token: any;\r\n\r\n  constructor(private api: APIService, private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token =  localStorage.getItem('token');\r\n    initializeDataSolve();\r\n  }\r\n\r\n}\r\n","<div class=\"solver\" id=\"solverDialogDiv\">\r\n    <h3 mat-dialog-title><strong> Puzzle Pieces onto the canvas to solve the puzzle</strong></h3>\r\n    <!-- <div mat-dialog-content> -->\r\n        \r\n    <!-- <div mat-dialog-content id=\"solvedDiv\">\r\n    \t<h3>Puzzle solved! Good show!</h3>\r\n    \t<button class=\"btns\" mat-button mat-dialog-close id=\"closeSolverDialogButton\">Close</button>\r\n    </div> -->\r\n\r\n    <div id=\"solvedDiv\" class=\"modal\">\r\n        <!-- Modal content -->\r\n        <div class=\"modal-content\">\r\n          <span class=\"close\">&times;</span>\r\n          <p>Puzzle Successfully Solved</p>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    <div id=\"solverContainer\"></div>\r\n\r\n    <div mat-dialog-actions>\r\n    \t<button class=\"btns\" mat-button mat-dialog-close id=\"closeSolverDialogButton\">Close</button>\r\n\t</div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-successful-solve',\r\n  templateUrl: './successful-solve.component.html',\r\n  styleUrls: ['./successful-solve.component.css']\r\n})\r\nexport class SuccessfulSolveComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>successful-solve works!</p>\r\n","import { Component, OnInit} from '@angular/core';\r\n//import { getName } from '.././pages/login/login.component';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n  name:string;\r\n  admin:boolean;\r\n  token: any;\r\n\r\n  constructor(private router: Router) { }\r\n\r\n  logout(){\r\n    localStorage.removeItem('token');\r\n    this.router.navigate(['/index']);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name = localStorage.getItem('name');\r\n    this.token = localStorage.getItem('token');\r\n    if (this.token == \"CgOOiUKmqqPyOlhFjDZth\"){\r\n      this.admin = true; \r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n<div class=\"logo\">\r\n  <img class=\"navimg\" src=\"assets/images/logo_nav.png\" routerLink=\"/ratings\">\r\n</div>\r\n  <nav class=\"navbar navbar-expand-sm\" id=\"navCustom\">\r\n\r\n    <span class=\"left\"><button id=\"burger\" class=\"navbar-toggler hidden-sm hidden-md hidden-lg hidden-xl\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent1\"\r\n    aria-controls=\"navbarSupportedContent1\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span><i\r\n        class=\"fa fa-bars fa-2x\"></i></span></button></span>\r\n\r\n    <span class=\"collapse navbar-collapse left\" id=\"navbarSupportedContent1\">\r\n        <ul class=\"nav navbar-nav mr-auto\" routerLinkActive=\"active\">\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/ratings\">View</a>\r\n            </li>\r\n            <li class=\"nav-item dropdown\" >\r\n              <a  role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Create<div class=\"caret\"></div></a>\r\n               <div  class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/create\" >Manual</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/aicreate\" >AI</a><br>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Profile<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/profile\">My Details</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profilePuzzles\">My Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileRatings\">My Ratings</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/profileSolvedPuzzle\">Solved Puzzles</a>\r\n               </div>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/leaderboard\">Leaderboard</a>\r\n            </li>\r\n            <li *ngIf=\"admin\" class=\"nav-item dropdown\">\r\n              <a role=\"button\" class=\"nav-link dropdown-toggle\" id=\"navbarDropdown2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Admin<div class=\"caret\"></div></a>\r\n               <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown2\">\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminUser\">All Users</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminPuzzles\">All Puzzles</a><br>\r\n                 <a class=\"dropdown-item\" routerLink=\"/adminRatings\">All Ratings</a>\r\n               </div>\r\n            </li>\r\n        </ul>\r\n    </span>\r\n    <span class=\"navbar-text\">\r\n        Hello, {{name}}\r\n        <a id=\"logout\" (click)=\"logout()\">Logout</a>\r\n    </span>\r\n  </nav>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { initializeDataAI } from 'src/assets/js/aiCreation.js';\r\nimport { Router } from '@angular/router';\r\nimport { Colors, Color } from 'angular-bootstrap-md';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-aicreate',\r\n  templateUrl: './aicreate.component.html',\r\n  styleUrls: ['./aicreate.component.css']\r\n})\r\nexport class AICreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  col: Color;\r\n  color: Colors;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>\r\n\r\n  @Input() OnlyNumber: boolean;\r\n  \r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n  \tinitializeDataAI();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div>\r\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\r\n <mat-icon class=\"fish\" id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\r\n</div>\r\n\r\n\r\n <div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\r\n   aria-hidden=\"true\">\r\n   <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n     <div class=\"modal-content\">\r\n       <div class=\"modal-body mb-0 p-0\">\r\n         <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n           <iframe class=\"embed-responsive-item\" src=\"../../assets/AIFinal.mp4\" allowfullscreen></iframe>\r\n         </div>\r\n       </div>\r\n       <div class=\"modal-footer justify-content-center\">\r\n         <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\r\n       </div>\r\n     </div>\r\n   </div>\r\n </div>\r\n\r\n <div class=\"container-fluid\">\r\n   <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n     <mat-card class=\"puzzleOptions\">\r\n       <mat-card-header>\r\n         <mat-card-title class=\"titleLabel\">Algorithm Parameters</mat-card-title>\r\n       </mat-card-header>\r\n       <mat-card-content>\r\n         <div id=\"inputContainer\">\r\n           <!-- <label>Maximum of puzzle pieces - 20</label><br>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of puzzle pieces</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"3\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox\">\r\n           </mat-form-field> -->\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 1 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox1\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 2 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox2\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <mat-form-field class=\"names\" appearance=\"outline\">\r\n             <mat-label>Number of Group 3 pieces:</mat-label>\r\n             <input class=\"input\" type=\"number\" matInput placeholder=\"1\" name=\"numberOfPieces\" id=\"numberOfPiecesInputBox3\" OnlyNumber=\"true\">\r\n           </mat-form-field>\r\n           <br><label>Select Puzzle Type</label><br>\r\n           <mat-radio-group class=\"radio-group\">\r\n             <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButtonAI\" > Euclidian </mat-radio-button>\r\n             <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButtonAI\" > Manhattan </mat-radio-button>\r\n           </mat-radio-group>\r\n           <button mat-raised-button class=\"btns\" id=\"nextButton\">Next</button>\r\n           <button mat-raised-button class=\"btns\" id=\"generatePuzzleButtonAI\">Generate Puzzle</button><br>\r\n         </div>\r\n       </mat-card-content>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"creationCard\">\r\n      <mat-card-header>\r\n        <mat-card-title >Create a puzzle</mat-card-title>\r\n      </mat-card-header>\r\n     <mat-card-content>\r\n       <div id=\"containerAI\">\r\n       </div>\r\n       <div id=\"progressBarDiv\">\r\n        <mat-progress-bar mode=\"indeterminate\" id=\"progressBar\"></mat-progress-bar>\r\n       </div>\r\n       <br>\r\n       <div id=\"puzzleControlsDiv\">\r\n        <button mat-raised-button class=\"btns\" id=\"previousPuzzleButton\">Previous Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"nextPuzzleButton\">Next Puzzle</button>\r\n        <button mat-raised-button class=\"btns\" id=\"generate3DButtonAI\">Generate 3D</button>\r\n       </div>\r\n     </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"saveOptions\">\r\n     <mat-card-header>\r\n       <mat-card-title class=\"titleLabel\">Saving Options</mat-card-title>\r\n     </mat-card-header>\r\n     <mat-card-content class=\"matContentC\">\r\n       <label id=\"colorPalleteLabel\">Select a color-palette:</label><br>\r\n       <mat-radio-group>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\r\n         <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\r\n       </mat-radio-group>\r\n       <button mat-raised-button class=\"btns\" id=\"randomizeColorsButtonAI\">Randomize Colors</button>\r\n       <br><br>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Puzzle Name</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <mat-form-field class=\"names\" appearance=\"outline\">\r\n         <mat-label>Short description</mat-label>\r\n         <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\">\r\n       </mat-form-field>\r\n\r\n       <!-- <label id=\"\">Name: </label><br><input [(ngModel)]=\"name\" type=\"text\" name=\"puzzleName\" id=\"puzzleNameInputBoxAI\"><br> -->\r\n       <!-- <label id=\"\">Short Description: </label><br><input [(ngModel)]=\"description\" type=\"text\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBoxAI\"><br> -->\r\n       <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\r\n       <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" (click)=\"success()\">Save</button>\r\n       <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButtonAI\" routerLink=\"/profilePuzzles\">Save</button> -->\r\n     </mat-card-content>\r\n   </mat-card>\r\n   </div>\r\n </div>\r\n\r\n <app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { initializeData } from 'src/assets/js/manualCreation.js';\r\nimport { Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { CreateDialogComponent } from 'src/app/dialogs/create-dialog/create-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-create',\r\n  templateUrl: './create.component.html',\r\n  styleUrls: ['./create.component.css']\r\n})\r\nexport class CreateComponent implements OnInit {\r\n\r\n  token: any;\r\n  name: any;\r\n  description: any;\r\n  createDialog: MatDialogRef<CreateDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private router: Router, private dialog: MatDialog) { }\r\n\r\n  success(){\r\n    this.createDialog = this.dialog.open(CreateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    initializeData();\r\n    this.token = localStorage.getItem('token');\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<div>\r\n <a mat-raised-button id=\"help\" (click)=\"videoModal1.show()\">Tutorial</a>\r\n <mat-icon id=\"helpXs\" (click)=\"videoModal1.show()\">info_outline</mat-icon>\r\n</div>\r\n\r\n<div mdbModal #videoModal1=\"mdbModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myVideoModal1Label\"\r\n  aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-body mb-0 p-0\">\r\n        <div class=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n          <iframe class=\"embed-responsive-item\" src=\"../../assets/ManualFinal.mp4\" allowfullscreen></iframe>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer justify-content-center\">\r\n        <button class=\"btns\" (click)=\"videoModal1.hide()\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"container-fluid\">\r\n  <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"1\">\r\n    <mat-card class=\"puzzleType\">\r\n      <mat-card-header>\r\n        <mat-card-title class=\"titleLabel\">Select Puzzle Type</mat-card-title>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <mat-radio-group class=\"radio-group\">\r\n          <mat-radio-button class=\"radio-button\" value=\"euclidean\" name=\"distanceMetric\" id=\"euclideanButton\" > Euclidian </mat-radio-button>\r\n          <mat-radio-button class=\"radio-button\" value=\"manhattan\" name=\"distanceMetric\" id=\"manhattanButton\" > Manhattan </mat-radio-button>\r\n        </mat-radio-group>\r\n      </mat-card-content>\r\n   </mat-card>\r\n\r\n   <mat-card class=\"creationCard\">\r\n    <mat-card-header>\r\n      <mat-card-title class=\"titleLabel\">Create puzzle by selecting points on the canvas</mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <button mat-raised-button class=\"btns\" id=\"deletePointButton\">\r\n        <mat-icon id=\"deletePointButtonIcon\">delete</mat-icon><mat-icon id=\"editPointButtonIcon\">edit</mat-icon> Delete Mode\r\n      </button>\r\n      <div id=\"container\">\r\n      </div>\r\n    </mat-card-content>\r\n    <mat-card-actions>\r\n      <button mat-raised-button class=\"btns\" id=\"generatePuzzleButton\">Generate Puzzle</button>\r\n      <button mat-raised-button class=\"btns\" id=\"generate3DButton\">Generate 3D</button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"saveOptions\">\r\n    <mat-card-header>\r\n      <mat-card-title id=\"saveHeading\">Saving Options</mat-card-title>\r\n    </mat-card-header>\r\n\r\n    <mat-card-content class=\"matContentC\">\r\n      <label class=\"titleLabel\" id=\"colorPalleteLabel\">Select a color-palette:</label><br>\r\n      <mat-radio-group class=\"colRadioBtns\">\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=0 value=\"default\" name=\"colorPalettes\">Default</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=1 value=\"shadesOfRed\" name=\"colorPalettes\">Shades Of Red</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=2 value=\"shadesOfGreen\" name=\"colorPalettes\">Shades Of Green</mat-radio-button>\r\n        <mat-radio-button class=\"radio-button colorPalettes\" paletteid=3 value=\"shadesOfBlue\" name=\"colorPalettes\">Shades of Blue</mat-radio-button>\r\n      </mat-radio-group>\r\n      <button mat-raised-button class=\"btns\" id=\"randomizeColorsButton\">Randomize Colors</button>\r\n      <br><br>\r\n\r\n      <mat-form-field class=\"names\" appearance=\"outline\">\r\n        <mat-label>Puzzle Name</mat-label>\r\n        <input class=\"input\" matInput placeholder=\"New Puzzle\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\">\r\n      </mat-form-field>\r\n\r\n      <mat-form-field class=\"names\" appearance=\"outline\">\r\n        <mat-label>Short description</mat-label>\r\n        <input class=\"input\" matInput placeholder=\"For my cat\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\">\r\n      </mat-form-field>\r\n\r\n      <!-- <label id=\"\">Name: </label><br><input type=\"text\" [(ngModel)]=\"name\" name=\"puzzleName\" id=\"puzzleNameInputBox\"><br> -->\r\n      <!-- <label id=\"\">Short Description: </label><br><input type=\"text\" [(ngModel)]=\"description\" name=\"puzzleDescription\" id=\"puzzleDescriptionInputBox\"><br> -->\r\n      <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label><br>\r\n      <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" (click)=\"success()\">Save</button>\r\n      <!-- <button mat-raised-button class=\"btns\" [disabled]=\"(!name) || (!description)\" id=\"saveButton\" routerLink=\"/profilePuzzles\">Save</button> -->\r\n    </mat-card-content>\r\n  </mat-card>\r\n  </div>\r\n</div>\r\n\r\n<app-footer class=\"footer\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"footer\">\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <div class=\"text\"> \r\n            Copyright 2020 - Prometheus Puzzles &nbsp; | &nbsp; team.prometheus@willowmoore.co.za\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-index',\r\n  templateUrl: './index.component.html',\r\n  styleUrls: ['./index.component.css']\r\n})\r\nexport class IndexComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<header id=\"indexNav\">\r\n    <nav class=\"links\">\r\n      <ul>\r\n        <li id=\"btnLink\"><a href=\"/signup\" mat-button class=\"indexBtn\">Sign Up</a></li>\r\n        <li id=\"btnLink\"><a href=\"/login\" mat-button class=\"indexBtn\">Login</a></li>\r\n      </ul>\r\n    </nav>\r\n</header>\r\n<div class=\"container\" id=\"second\">\r\n        <!-- <h1 class=\"main-title\"><strong>CREATE | SOLVE | PRINT | RATE</strong></h1>\r\n        <h2 class=\"subtitle\"><i>Sign up or login to start creating puzzles that can be solved, printed and rated.</i></h2> -->\r\n        <picture>\r\n          <source media=\"(max-width: 768px)\" srcset=\"assets/images/indexSml.jpg\">\r\n          <img class=\"splashImage\" src=\"assets/images/newsplash.jpg\">\r\n        </picture>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div>\r\n     -->\r\n\r\n    <!-- <div class=\"content\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"descText\">\r\n            <mat-card fxFlex=\"90\">\r\n                    <p>Puzzles have been a hobby of many people over the centuries, coming in various\r\n                    forms which have various ways of solving. Puzzles have played a role in people’s\r\n                    problem solving skills. Puzzle generators have allowed for more puzzles to be\r\n                    created, using various techniques to create interesting and challenging puzzles.\r\n                    The system requested by the client involves the creation of 3-Dimensional puzzles (manually and from the use of AI), testing of puzzles, sharing and rating of\r\n                    puzzles by other users, as well as the ability of downloading 3D printable files.\r\n                    Team Prometheus, has come up with a way to develop the system according to\r\n                    the client’s specifications.</p>\r\n          </mat-card>\r\n        </div> -->\r\n\r\n\r\n\r\n        <!-- <div class=\"container\">\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <br>\r\n        <div class=\"flex-container\" fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\" >\r\n            <div class=\"overlay\"></div>\r\n            <mat-card  class=\"child-1\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by {{puzzle.creator}}</mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Rating: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Date: </mat-card-subtitle>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\" src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n\r\n            <mat-card  class=\"child-2\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgB.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n            <mat-card class=\"child-3\">\r\n                <mat-card-header>\r\n                    <mat-card-title>Puzzle One</mat-card-title>\r\n                    <mat-card-subtitle class=\"one\">Created by X</mat-card-subtitle>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <img class=\"indexImg\"  src=\"assets/images/imgC.jpg\">\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button mat-button class=\"btns\">SOLVE</button>\r\n                    <button mat-button class=\"btns\">RATE</button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n        </div>\r\n\r\n\r\n                <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n                <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n\r\n\r\n    </div> -->\r\n\r\n    <!--\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"indexNavBtns\">\r\n        <mat-card fxFlex=\"90\" fxLayoutAlign=\"space-evenly center\">\r\n            <a routerLink=\"/login\" mat-raised-button class=\"btn\">Login\r\n            <a routerLink=\"/signup\" mat-raised-button class=\"btn\">Sign Up\r\n      </mat-card>\r\n    </div> -->\r\n","export class LeaderboardArr{\r\n  name: string;\r\n  memberSince: string;\r\n  nrPuzzles: number; \r\n}\r\n","import { AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { Observable } from 'rxjs';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport {MatPaginator} from '@angular/material/paginator';\r\nimport {MatSort} from '@angular/material/sort';\r\nimport { LeaderboardArr } from './LeaderboardArr';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-leaderboard',\r\n  templateUrl: './leaderboard.component.html',\r\n  styleUrls: ['./leaderboard.component.css']\r\n})\r\nexport class LeaderboardComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = ['name', 'memberSince', 'nrPuzzles'];\r\n  dataSource: any = \"\";\r\n  userList: Array<LeaderboardArr> = [];\r\n  i: number;\r\n  currentUser: any;\r\n  token: any;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>; \r\n\r\n\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  @ViewChild(MatSort) sort: MatSort;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.dataSource.paginator = this.paginator;\r\n    this.dataSource.sort = this.sort;\r\n  }\r\n\r\n  applyFilter(event: Event) {\r\n    const filterValue = (event.target as HTMLInputElement).value;\r\n    this.dataSource.filter = filterValue.trim().toLowerCase();\r\n\r\n    if (this.dataSource.paginator) {\r\n      this.dataSource.paginator.firstPage();\r\n    }\r\n  }\r\n\r\n  populateTable(){\r\n    this.api.getAllUsers().subscribe( data => {\r\n      this.i = 0;\r\n      while(data[this.i]!=null){\r\n        let leaderboardObj = new LeaderboardArr();\r\n        leaderboardObj.name = data[this.i].name;\r\n        leaderboardObj.memberSince = data[this.i].createdAt;\r\n\r\n        this.currentUser = {\r\n          \"token\": data[this.i].token\r\n        }\r\n\r\n        this.api.getPuzzlesByUser(this.currentUser).subscribe( data => {\r\n          leaderboardObj.nrPuzzles = Object.keys(data).length;\r\n        })\r\n\r\n\r\n\r\n        console.log(data[this.i]);\r\n\r\n        this.i = this.i + 1;\r\n\r\n        this.userList.push(leaderboardObj);\r\n      }\r\n      this.dataSource = new MatTableDataSource(this.userList);\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.populateTable();\r\n\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<h1>Leaderboard</h1>\r\n\r\n<mat-form-field>\r\n  <mat-label>Filter</mat-label>\r\n  <input matInput (keyup)=\"applyFilter($event)\" placeholder=\"Ex. Mia\" #input>\r\n</mat-form-field>\r\n\r\n<div class=\"mat-elevation-z8\">\r\n  <table mat-table [dataSource]=\"dataSource\" matSort>\r\n\r\n    <!-- Name Column -->\r\n    <ng-container matColumnDef=\"name\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.name}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"memberSince\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Member Since </th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.memberSince}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"nrPuzzles\">\r\n      <th mat-header-cell *matHeaderCellDef mat-sort-header> Number of Puzzles</th>\r\n      <td mat-cell *matCellDef=\"let row\"> {{row.nrPuzzles}} </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n\r\n    <!-- Row shown when there is no matching data. -->\r\n    <tr class=\"mat-row\" *matNoDataRow>\r\n      <td class=\"mat-cell\" colspan=\"4\">No data matching the filter \"{{input.value}}\"</td>\r\n    </tr>\r\n  </table>\r\n\r\n  <mat-paginator [pageSizeOptions]=\"[5, 10, 25, 100]\"></mat-paginator>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { EmailPassComponent } from 'src/app/dialogs/email-pass/email-pass.component';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\n\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  emailDialogRef: MatDialogRef<EmailPassComponent>;\r\n  entry: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router, private dialog: MatDialog) {}\r\n  //method for logging in user and getting the token associated with the said user\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n\r\n  loginUser(currentUser: User){\r\n    this.formError = '';\r\n    if(currentUser !== null){\r\n      this.verifyUser = {\r\n        \"username\":currentUser.email,\r\n        \"password\":currentUser.password\r\n      }\r\n\r\n      this.api.loginUser(this.verifyUser).subscribe(\r\n        data => { console.log(data);\r\n          localStorage.removeItem('name');\r\n          localStorage.setItem('name', data['name']);\r\n          localStorage.removeItem('token');\r\n          localStorage.setItem('token', data['token']);\r\n\r\n        this.formError = \"\";\r\n        this.router.navigate(['/ratings']);\r\n\r\n        setTimeout(()=>{\r\n          localStorage.removeItem('token');\r\n          this.router.navigate(['login']);\r\n          alert(\"You have been logged out after 1 hour\");\r\n        },3600000);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n          if(error.status >= 401){\r\n            this.formError = error.error;\r\n          }\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  sendMail(){\r\n    this.emailDialogRef = this.dialog.open(EmailPassComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.emailDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.entry = {\r\n        //\"id\":this.rateUID,\r\n          \"username\": result\r\n        }\r\n\r\n        if(this.api.requestPasswordChange(this.entry).subscribe())\r\n        {\r\n          alert(\"Email will be send to you.\")\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loginForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]]\r\n\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n        <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n            <mat-card-header>\r\n                <h3>Login</h3>\r\n            </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"loginForm\" (ngSubmit)=\"loginUser(loginForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('email').hasError(error.type) && (loginForm.get('email').dirty || loginForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label><br>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"loginForm.get('password').hasError(error.type) && (loginForm.get('password').dirty || loginForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!loginForm.valid\" class=\"btns\" id=\"one\">Login</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n            <mat-card-actions>\r\n                <a (click)=\"sendMail()\" class=\"forgot\">Forgot Password</a>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Puzzles</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let puzzle of (this.datasource.filteredData | slice: startIndex:endIndex)\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{puzzle.createdAt}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{puzzle.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <!-- <mat-card-subtitle>Description: {{puzzle.description}}</mat-card-subtitle> -->\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\" >\r\n              <button *ngIf=\"!puzzle.shared\" mat-button class=\"btns\" (click)=\"share(puzzle.id)\">Share</button>\r\n              <button *ngIf=\"puzzle.shared\" mat-button class=\"btns\" (click)=\"stopShare(puzzle.id)\">Stop Sharing</button>\r\n              <button mat-button class=\"btns\" (click)=\"deletePuzzle(puzzle.id)\">Delete</button>\r\n              <!-- <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">SOLVE</button> -->\r\n            </mat-card-actions>\r\n\r\n            <!-- <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n              <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n          </mat-card-actions> -->\r\n          <br>\r\n          <mat-card-actions class=\"puzzleActionsA\">\r\n            <button mat-button class=\"btnsA\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n          </mat-card-actions>\r\n\r\n\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n  <div *ngIf=\"text\">\r\n    <h2 id=\"NoneText\" >You have not created any puzzles at the moment</h2>\r\n  </div>\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { ProfilePuzzlesDialogComponent } from 'src/app/dialogs/profile-puzzles-dialog/profile-puzzles-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-profile-puzzles',\r\n  templateUrl: './profile-puzzles.component.html',\r\n  styleUrls: ['./profile-puzzles.component.css']\r\n})\r\nexport class ProfilePuzzlesComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  profileDialog: MatDialogRef<ProfilePuzzlesDialogComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.createdAt).getTime();\r\n      let paramB = new Date(b.createdAt).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  getUserPuzzles(){\r\n    this.userPuzzleList = \"\";\r\n    this.api.getPuzzlesByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  share(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.sharePuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Puzzle shared\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  deletePuzzle(puzzleID: any){\r\n    // this.puzzle = {\r\n    //   \"puzzleID\": puzzleID\r\n    // }\r\n    if(this.api.deletePuzzle(puzzleID).subscribe()){\r\n        //alert(\"Puzzle deleted\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Puzzle deleted\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  stopShare(data: any){\r\n    this.puzzle = {\r\n      \"puzzleID\": data\r\n    }\r\n    if(this.api.stopSharingPuzzle(this.puzzle).subscribe()){\r\n        //alert(\"Stop sharing puzzle\");\r\n        this.profileDialog = this.dialog.open(ProfilePuzzlesDialogComponent, \r\n          { \r\n            disableClose: true, hasBackdrop: true,\r\n            data: { pageValue: \"Stopped sharing shared\" } \r\n          });\r\n    }\r\n    //location.reload();\r\n  }\r\n\r\n  async delay(ms: number) {\r\n    await new Promise(resolve => setTimeout(()=>resolve(), ms))\r\n    .then( () => { console.log(\"fired\"); });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.delay(2000).then( () =>{\r\n      this.getUserPuzzles();\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Puzzle } from 'src/app/models/Puzzle';\r\nimport { Observable } from 'rxjs';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-profile-ratings',\r\n  templateUrl: './profile-ratings.component.html',\r\n  styleUrls: ['./profile-ratings.component.css']\r\n})\r\nexport class ProfileRatingsComponent implements OnInit {\r\n\r\n  currentUser: any;\r\n  //user puzzle ratings variables\r\n  //ratingList: Observable <any[]> ;\r\n  userRatingsList: any;\r\n  text: boolean;\r\n  ratePID: number;\r\n  ratingEntry: any;\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  show: boolean;\r\n  deleteVal: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n  sortedBy: any;\r\n  datasource: any = \"\";\r\n\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userRatingsList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userRatingsList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  getUserPuzzleRatings(){\r\n    this.api.getPuzzleRatingsByUser(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userRatingsList = data;\r\n      this.show = false;\r\n      this.text = false;\r\n      if (this.totalNumberOfPuzzles == 0){\r\n        this.text = true;\r\n      }\r\n      this.datasource = new MatTableDataSource(this.userRatingsList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          alert(\"Rating added\");\r\n        }\r\n\r\n        location.reload();\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  delete(ratePID: any){\r\n    this.deleteVal = {\r\n      \"puzzleID\" : ratePID,\r\n      \"token\" : localStorage.getItem('token')\r\n    }\r\n\r\n  this.api.findRatingID(this.deleteVal).subscribe( (result) => {\r\n    if(this.api.deleteRating(result[\"id\"]).subscribe()){\r\n        alert(\"Rating deleted\");\r\n        location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzleRatings();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n<div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n    <h1 class=\"main-title\" >My Ratings</h1>\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\" *ngFor=\"let rating of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{rating.image}}\">\r\n          <div class=\"content-details fadeIn-bottom\">\r\n            <mat-card-header>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Created on:</strong> {{rating.created}}</mat-card-subtitle>\r\n              <mat-card-subtitle class=\"puzzleDetails\"><strong>Description:</strong> {{rating.description}}</mat-card-subtitle>\r\n            </mat-card-header>\r\n          </div>\r\n            <mat-card-title><strong>{{rating.puzzleName}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{rating.rating}}/5</mat-card-subtitle>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" (click)=\"openAndCheck(rating.puzzleID)\">Update Rating</button>\r\n                <button mat-button class=\"btns\" id=\"delete\" (click)=\"delete(rating.puzzleID)\">Delete Rating</button>\r\n            </mat-card-actions>\r\n            <br>\r\n            <mat-card-actions class=\"puzzleActionsA\">\r\n                <button mat-button class=\"btnsA\" id=\"2dDownload\" (click)=\"twoDDownload(rating.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btnsA\" id=\"3dDownload\" (click)=\"threeDDownload(rating.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!text && !show\"  [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n</div>\r\n\r\n<div id=\"NoneText\" *ngIf=\"text\">\r\n    <h2>You have not made any ratings at the moment</h2>\r\n</div>\r\n<div class=\"spinner\">\r\n<mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\n\r\n@Component({\r\n  selector: 'app-profile-solved-puzzles',\r\n  templateUrl: './profile-solved-puzzles.component.html',\r\n  styleUrls: ['./profile-solved-puzzles.component.css']\r\n})\r\nexport class ProfileSolvedPuzzlesComponent implements OnInit {\r\n  currentUser: any;\r\n  //user  puzzle variables\r\n  //puzzleList: Observable <Puzzle[]> ;\r\n  userPuzzleList: any;\r\n  puzzle: any;\r\n  show: boolean;\r\n  text: boolean;\r\n  imageList: any;\r\n  temp: boolean = false;\r\n\r\n  token: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  solveDialog: MatDialogRef<SolveDialogComponent>\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n\r\n  datasource: any = \"\";\r\n  sortedBy: any;\r\n\r\n  constructor(private api: APIService, private router: Router, private dialog: MatDialog) { }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    // this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.puzzleName.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  nameDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  nameAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.puzzleName.toLowerCase();\r\n      let paramB = b.puzzleName.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n}\r\n\r\n  dateDescending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.userPuzzleList.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.dateCreated).getTime();\r\n      let paramB = new Date(b.dateCreated).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.userPuzzleList.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n  getUserPuzzles(){\r\n    this.api.retrieveAllSolveAttempts(this.currentUser).subscribe( data => {\r\n      this.totalNumberOfPuzzles = Object.keys(data).length;\r\n      this.userPuzzleList = data;\r\n      if (data[0]==null)\r\n      {\r\n        this.text = true;\r\n      }\r\n      this.show = false;\r\n\r\n      this.datasource = new MatTableDataSource(this.userPuzzleList);\r\n      this.nameAscending();\r\n    });\r\n  }\r\n\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      // alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.show = true;\r\n    this.text = false;\r\n\r\n    this.getUserPuzzles();\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"nameAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"nameDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"container\">\r\n    <div class=\"container-fluid\" *ngIf=\"currentUser\" >\r\n        <h1 class=\"main-title\">Solved Puzzles</h1>\r\n        <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxLayoutAlign=\"space-evenly center\">\r\n          <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n            <div class=\"content-overlay\"></div>\r\n            <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n              <div class=\"content-details fadeIn-bottom\">\r\n                <mat-card-header>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.dateCreated}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Best time: {{puzzle.bestTime}} seconds</mat-card-subtitle>\r\n                  <mat-card-subtitle class=\"puzzleDetails\">Solve attempts duration: {{puzzle.attemptDuration}} seconds</mat-card-subtitle>\r\n                </mat-card-header>\r\n              </div>\r\n              <mat-card-title><strong>{{puzzle.puzzleName}}</strong></mat-card-title>\r\n              <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n              <mat-card-actions class=\"puzzleActions\">\r\n                <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.puzzleID)\">Solve</button>\r\n                <button  mat-button class=\"btns\">Rate</button>\r\n                <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.puzzleID)\" >2D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n                <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.puzzleID)\">3D\r\n                  <mat-icon>save_alt</mat-icon>\r\n                </button>\r\n              </mat-card-actions>\r\n          </mat-card>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-paginator class=\"paginator\" *ngIf=\"!text && !show\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                      (page)=\"pageEvent = changeEvent($event)\">\r\n    </mat-paginator>\r\n\r\n    <div *ngIf=\"text\">\r\n      <h2 id=\"NoneText\" >You have not solved any puzzles at the moment</h2>\r\n    </div>\r\n    <div class=\"spinner\">\r\n      <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n    </div>\r\n\r\n    <app-footer class=\"footer\" *ngIf=\"!show\"></app-footer>\r\n    </div>\r\n\r\n<!-- Button trigger modal -->\r\n<!-- <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#basicExampleModal\">\r\n  Launch demo modal\r\n</button> -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialogRef, MatDialog } from '@angular/material/dialog';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { ProfileUpdateDialogComponent } from 'src/app/dialogs/profile-update-dialog/profile-update-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  nameTextboxValue: string;\r\n  usernameTextboxValue: string;\r\n  currentUserObject:any;\r\n  token: any;\r\n  currentUser: any;\r\n  updateNameForm: FormGroup;\r\n  updateUsernameForm: FormGroup;\r\n  loginDialog: MatDialogRef<LoginDialogComponent>;\r\n  updatePorfileDialog: MatDialogRef<ProfileUpdateDialogComponent>;\r\n\r\n  constructor(private api: APIService, private formBuilder: FormBuilder, private router: Router, private dialog: MatDialog) { }\r\n\r\n  updateName(){\r\n    this.currentUser = null;\r\n      if(this.nameTextboxValue != undefined){\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": this.nameTextboxValue\r\n      }\r\n      localStorage.removeItem('name');\r\n      localStorage.setItem('name', this.currentUser['name']);\r\n      this.api.updateName(this.currentUser).subscribe( data => {\r\n        this.currentUserObject['name'] = data['name'];\r\n      });\r\n      this.updatePorfileDialog = this.dialog.open(ProfileUpdateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //---------open dialog to say \"Profile Updated\"\r\n      //alert(\"Name updated\");\r\n    }\r\n    else{ console.log(\"No value provided\");}\r\n    //location.reload();\r\n  }\r\n\r\n  updateUsername(){\r\n    this.currentUser = null;\r\n    if(this.usernameTextboxValue != undefined){\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token'),\r\n      \"username\": this.usernameTextboxValue\r\n    }\r\n    this.api.updateUsername(this.currentUser).subscribe( data => {\r\n      this.currentUserObject['username'] = data['username'];\r\n    })\r\n  }\r\n  else{console.log(\"No value provided\")}\r\n  }\r\n\r\n  error_messages = {\r\n    'username': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ]\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      this.currentUserObject = data;\r\n\r\n      this.updateNameForm = this.formBuilder.group({\r\n        name: [data['name'], [Validators.required, Validators.pattern('[a-zA-Z ]*')]]\r\n      });\r\n\r\n      this.updateUsernameForm = this.formBuilder.group({\r\n        username: [data['username'], [Validators.required, Validators.email]]\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<app-navbar></app-navbar>\r\n<!--app-navbar-profile></app-navbar-profile-->\r\n\r\n\r\n<div class=\"container-fluid\" >\r\n    <div fxLayout=\"row\" fxLayout.xs=\"col wrap\">\r\n    <mat-card class=\"profileText\">\r\n        <mat-card-header>\r\n            <h1>Edit Details</h1>\r\n        </mat-card-header>\r\n        <mat-card-content class=\"move\">\r\n        <div *ngIf=\"currentUserObject\">\r\n            <form [formGroup]=\"updateNameForm\" (ngSubmit)=\"updateName()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"name\">Your Name: </label>\r\n                    <input matInput formControlName=\"name\"  value=\"{{currentUserObject.name}}\" (input)=\"nameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.name\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateNameForm.get('name').hasError(error.type) && (updateNameForm.get('name').dirty || updateNameForm.get('name').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateNameForm.valid\" class=\"btns\" >Save</button>\r\n            </form>\r\n\r\n            <form [formGroup]=\"updateUsernameForm\" (ngSubmit)=\"updateUsername()\">\r\n                <mat-form-field appearance=\"standard\">\r\n                    <label for=\"username\">Your Email: </label>\r\n                    <input matInput formControlName=\"username\"  value=\"{{currentUserObject.username}}\" (input)=\"usernameTextboxValue=$event.target.value\">\r\n                </mat-form-field>\r\n                <div>\r\n                    <ng-container *ngFor=\"let error of error_messages.username\">\r\n                        <mat-error class=\"error-message\" *ngIf=\"updateUsernameForm.get('username').hasError(error.type) && (updateUsernameForm.get('username').dirty || updateUsernameForm.get('username').touched)\">\r\n                            {{ error.message }}\r\n                        </mat-error>\r\n                    </ng-container>\r\n                </div>\r\n                <button mat-raised-button type=\"submit\" [disabled]=\"!updateUsernameForm.valid\" class=\"btns\">Save</button>\r\n            </form>\r\n        </div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n  </div>\r\n</div>\r\n\r\n<app-footer class=\"footer\" ></app-footer>\r\n","export class RatingsArr{\r\n  id: number;\r\n  rating: number;\r\n  puzzleID: number;\r\n}\r\n","export class PuzzleArr{\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  creator: string;\r\n  rating: number;\r\n  created: any;\r\n  showRating: boolean;\r\n  image: any;\r\n  shared: boolean = false; \r\n}\r\n","import { Component, OnInit, ChangeDetectorRef, ViewEncapsulation } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\nimport { PuzzleArr } from './puzzleArr';\r\nimport { RatingsArr } from './RatingsArr';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { RateDialogComponent } from '../../rate-dialog/rate-dialog.component';\r\nimport { PuzzleRating } from 'src/app/models/PuzzleRating';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { SolveDialogComponent } from 'src/app/dialogs/solve-dialog/solve-dialog.component';\r\nimport { MenuComponent } from 'src/app/dialogs/menu/menu.component';\r\nimport { LoginDialogComponent } from 'src/app/dialogs/login-dialog/login-dialog.component';\r\nimport { downloadPuzzle2D, downloadPuzzle3D } from 'src/assets/js/downloadPuzzle.js';\r\n\r\n@Component({\r\n  selector: 'app-ratings',\r\n  templateUrl: './ratings.component.html',\r\n  styleUrls: ['./ratings.component.css']\r\n})\r\nexport class RatingsComponent implements OnInit {\r\n\r\n  displayedColumns: string[] = [\"id\",\"name\",\"description\",\"creator\",\"rating\",\"created\",\"showRating\",\"image\"];\r\n  rateDialogRef: MatDialogRef<RateDialogComponent>;\r\n  puzzles: Array<PuzzleArr> = [];\r\n  name: string;\r\n  ratings: Array<RatingsArr> = [];\r\n  ratePID: number;\r\n  rateUID: string;\r\n  ratingEntry: any;\r\n  formError: string;\r\n  show: boolean;\r\n  dataAvailable: boolean;\r\n  //searchbar\r\n  searchTextboxValue: string;\r\n  token: any;\r\n  currentUser: any;\r\n  datasource: any = \"\";\r\n  solvingPuzzleID: any;\r\n\r\n  totalNumberOfPuzzles: number;\r\n  ratingsLSize: number;\r\n\r\n  //pagination\r\n  pageSize: number = 6;\r\n  startIndex:number = 0;\r\n  endIndex: number = 6;\r\n  pageSizeOptions: number[] = [5, 10, 25, 100];\r\n\r\n  // MatPaginator Output\r\n  pageEvent: PageEvent;\r\n\r\n  //solve dialog variable\r\n  solveDialog: MatDialogRef<SolveDialogComponent>;\r\n  sortedBy: any;\r\n\r\n  ratingSavedDialog: any;\r\n  loginDialog: any;\r\n\r\n  constructor(private api: APIService, private cdr: ChangeDetectorRef, private dialog: MatDialog, private router: Router) {\r\n  }\r\n\r\n  setPageSizeOptions(setPageSizeOptionsInput: string) {\r\n    this.pageSizeOptions = setPageSizeOptionsInput.split(',').map(str => +str);\r\n  }\r\n\r\n  changeEvent(event: PageEvent)\r\n  {\r\n    console.log(\"Event: \", event);\r\n    this.startIndex = event.pageIndex * event.pageSize;\r\n    this.endIndex = this.startIndex + this.pageSize;\r\n    if(this.endIndex > this.totalNumberOfPuzzles){\r\n      this.endIndex = this.totalNumberOfPuzzles\r\n    }\r\n    this.puzzles.slice(this.startIndex, this.endIndex);\r\n    return event;\r\n  }\r\n\r\n\r\n  //sorting functions start here\r\n  puzzleDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleDesc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  puzzleAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"puzzleAsc\";\r\n      let paramA = a.name.toLowerCase();\r\n      let paramB = b.name.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorDesc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  creatorAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"creatorAsc\";\r\n      let paramA = a.creator.toLowerCase();\r\n      let paramB = b.creator.toLowerCase();\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  dateDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateDesc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA > paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  dateAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"dateAsc\";\r\n      let paramA = new Date(a.created).getTime();\r\n      let paramB = new Date(b.created).getTime();\r\n      return paramA < paramB ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  ratingDescending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingDesc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA > paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  ratingAscending()\r\n  {\r\n    return this.puzzles.sort( (a,b) => {\r\n      this.sortedBy = \"ratingAsc\";\r\n      let paramA = a.rating;\r\n      let paramB = b.rating;\r\n\r\n      if(paramA < paramB ){ return -1; }\r\n      else { return 1; }\r\n      return 0;\r\n    });\r\n  }\r\n  //sorting functions end here\r\n\r\n  populate(populatePuz: any)\r\n  {\r\n    this.ratings.length = 0;\r\n    this.api.getAllPuzzleRatings().subscribe(\r\n      data=> {\r\n        for(let i=0; data[i]!= null; i++){\r\n          let ratingObj = new RatingsArr();\r\n          ratingObj.id = data[i].id;\r\n          ratingObj.rating = data[i].rating;\r\n          ratingObj.puzzleID = data[i].puzzleID;\r\n          this.ratings.push(ratingObj);\r\n        }\r\n      },\r\n      error => {\r\n        console.log(\"Error from API: \", error.error);\r\n      });\r\n\r\n\r\n    if (populatePuz != null)\r\n    {\r\n      this.getPuzzles(populatePuz);\r\n    }\r\n    else\r\n    {\r\n      this.api.getAllPuzzles().subscribe(\r\n        data => {\r\n          this.totalNumberOfPuzzles = Object.keys(data).length;\r\n          this.getPuzzles(data);\r\n      },\r\n        error => {//if status code other than in the 200 range returned, show error\r\n          console.log('Error from API: ', error.error);\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  searchItems(searchValue: any){\r\n    if(searchValue != undefined){\r\n      this.api.getSearchedPuzzles(searchValue).subscribe( data => {\r\n        var dataObjectSize = Object.keys(data).length;\r\n        if(dataObjectSize == 0 )\r\n        {\r\n          alert(\"Nothing matches given criteria\");\r\n          console.log(\"Nothing matches given criteria\");\r\n        }\r\n        else{\r\n          //Please populate the page with the data received. Other puzzles not fromd data must be cleared\r\n          console.log(data);\r\n          this.populate(data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getPuzzles(data: any){\r\n    this.puzzles.length = 0;\r\n    for(let i=0; data[i]!=null; i++)\r\n    {\r\n      let puzzleObj = new PuzzleArr();\r\n      puzzleObj.id = data[i].id;\r\n      puzzleObj.name = data[i].name;\r\n      puzzleObj.description = data[i].description;\r\n      puzzleObj.creator = data[i].creator;\r\n      puzzleObj.created = data[i].createdAt;\r\n      puzzleObj.image = data[i].image;\r\n      if (puzzleObj.creator== this.currentUser[\"name\"])\r\n      {\r\n        puzzleObj.showRating = false;\r\n      }\r\n      else\r\n      {\r\n        puzzleObj.showRating = true;\r\n      }\r\n\r\n      let j = 0;\r\n      let total = 0;\r\n\r\n      for (let k=0; this.ratings[k]!=null; k++){\r\n        if (this.ratings[k].puzzleID == data[i].id)\r\n        {\r\n          total = total + this.ratings[k].rating;\r\n          j = j+1;\r\n        }\r\n      }\r\n\r\n      if (j == 0){\r\n        puzzleObj.rating = 0;\r\n      }\r\n      else{\r\n        puzzleObj.rating = (total/j);\r\n      }\r\n      this.puzzles.push(puzzleObj);\r\n    }\r\n\r\n    this.datasource = new MatTableDataSource(this.puzzles);\r\n    this.puzzleAscending();\r\n\r\n    this.dataAvailable = true;\r\n    this.show= false;\r\n\r\n  }\r\n\r\n  applyFilter(filterValue: string) {\r\n    this.datasource.filterPredicate = function(data, filter: string): boolean {\r\n      return data.name.toLowerCase().includes(filter) || data.creator.toLowerCase().includes(filter)\r\n    };\r\n    this.datasource.filter = filterValue.trim().toLowerCase();\r\n    this.totalNumberOfPuzzles = this.datasource.filteredData.length;\r\n  }\r\n\r\n  checkData(data: any){\r\n    this.ratePID = data;\r\n  }\r\n\r\n  openRateDialog(){\r\n    this.rateDialogRef = this.dialog.open(RateDialogComponent, { disableClose: true, hasBackdrop: true });\r\n\r\n    this.rateDialogRef.afterClosed().subscribe( result => {\r\n\r\n      if (result != \"\"){\r\n\r\n        this.ratingEntry = {\r\n        //\"id\":this.rateUID,\r\n          \"puzzleID\":this.ratePID,\r\n          \"rating\":result,\r\n          \"token\": localStorage.getItem('token')\r\n        }\r\n\r\n        if(this.api.createNewPuzzleRating(this.ratingEntry).subscribe())\r\n        {\r\n          this.ratingSavedDialog = this.dialog.open(MenuComponent, { disableClose: true, hasBackdrop: true });\r\n          //alert(\"Rating added\");\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  openAndCheck(rateP: any){\r\n    this.checkData(rateP);\r\n    this.openRateDialog();\r\n  }\r\n\r\n  reload(){\r\n    this.populate(null);\r\n  }\r\n\r\n  //solve dialog\r\n  openSolveDialog(puzzleID: any){\r\n    localStorage.setItem('solvingPuzzleID', puzzleID);\r\n    this.solveDialog = this.dialog.open(SolveDialogComponent, { disableClose: true, hasBackdrop: true });\r\n  }\r\n  //end of solve dialog\r\n  //start of download methods\r\n  twoDDownload(puzzleID: any){\r\n    downloadPuzzle2D(puzzleID);\r\n  }\r\n\r\n  threeDDownload(puzzleID: any){\r\n    downloadPuzzle3D(puzzleID);\r\n  }\r\n  //end of download methods\r\n\r\n  ngOnInit(): void {\r\n    this.show=true;\r\n    this.dataAvailable = false;\r\n    if(!localStorage.getItem('token')){\r\n      this.router.navigate(['/index']);\r\n      this.loginDialog = this.dialog.open(LoginDialogComponent, { disableClose: true, hasBackdrop: true });\r\n      //this.router.navigate(['/index']);\r\n      //alert(\"You are not logged in\");\r\n    }\r\n\r\n    this.currentUser = {\r\n      \"token\": localStorage.getItem('token')\r\n    }\r\n\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.api.getUser(this.currentUser).subscribe( data => {\r\n      console.log(data[\"name\"]);\r\n      this.currentUser = {\r\n        \"token\": localStorage.getItem('token'),\r\n        \"name\": data[\"name\"]\r\n      }\r\n    });\r\n    this.sortedBy = \"\";\r\n    this.populate(null);\r\n\r\n  }\r\n}\r\n","<app-navbar></app-navbar>\r\n<div class=\"container\">\r\n<mat-form-field class=\"searchArea\">\r\n    <mat-label>Search</mat-label>\r\n    <input matInput (keyup)=\"applyFilter($event.target.value)\">\r\n</mat-form-field>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='puzzleAsc' || sortedBy=='puzzleDesc',\r\n  sortBtns: sortedBy!='puzzleAsc' || sortedBy!='puzzleDesc'\r\n}\">Name\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleAsc\"' (click)=\"puzzleAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"puzzleDesc\"' (click)=\"puzzleDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='ratingAsc' || sortedBy=='ratingDesc',\r\n  sortBtns: sortedBy!='ratingAsc' || sortedBy!='ratingDesc'\r\n}\">Rating\r\n  <mat-icon *ngIf='sortedBy!=\"ratingAsc\"' (click)=\"ratingAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"ratingDesc\"' (click)=\"ratingDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='creatorAsc' || sortedBy=='creatorDesc',\r\n  sortBtns: sortedBy!='creatorAsc' || sortedBy!='creatorDesc'\r\n}\">Creator\r\n  <mat-icon *ngIf='sortedBy!=\"creatorAsc\"' (click)=\"creatorAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"creatorDesc\"' (click)=\"creatorDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<button mat-button [ngClass]=\"{\r\n  inUse: sortedBy=='dateAsc' || sortedBy=='dateDesc',\r\n  sortBtns: sortedBy!='dateAsc' || sortedBy!='dateDesc'\r\n}\">Date\r\n  <mat-icon *ngIf='sortedBy!=\"dateAsc\"' (click)=\"dateAscending()\" class=\"arrow\">arrow_upwardward</mat-icon> |\r\n  <mat-icon *ngIf='sortedBy!=\"dateDesc\"' (click)=\"dateDescending()\" class=\"arrow\">arrow_downward</mat-icon>\r\n</button>\r\n\r\n<div class=\"spinner\">\r\n  <mat-spinner *ngIf=\"show\" id=\"spinner\"></mat-spinner>\r\n</div>\r\n\r\n<div class=\"container-fluid\" *ngIf=\"dataAvailable\" >\r\n    <div class=\"flex-container\" fxLayout=\"row wrap\" fxLayout.xs=\"row wrap\" fxLayoutAlign=\"space-evenly center\">\r\n        <mat-card class=\"content\"  *ngFor=\"let puzzle of this.datasource.filteredData | slice: startIndex:endIndex\">\r\n          <div class=\"content-overlay\"></div>\r\n          <img class=\"content-image\" src=\"{{puzzle.image}}\">\r\n            <div class=\"content-details fadeIn-bottom\">\r\n              <mat-card-header>\r\n               <mat-card-subtitle class=\"puzzleDetails\">Created by: {{puzzle.creator}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Created on: {{puzzle.created}}</mat-card-subtitle>\r\n                <mat-card-subtitle class=\"puzzleDetails\">Description: {{puzzle.description}}</mat-card-subtitle>\r\n              </mat-card-header>\r\n            </div>\r\n            <mat-card-title><strong>{{puzzle.name}}</strong></mat-card-title>\r\n            <mat-card-subtitle>Rating: {{puzzle.rating}}/5 <span *ngIf=\"puzzle.rating == '0'\">- Not yet rated</span> </mat-card-subtitle>\r\n\r\n            <label hidden=\"true\" id=\"tokenLabel\">{{token}}</label>\r\n            <mat-card-actions class=\"puzzleActions\">\r\n              <button mat-button class=\"btns\" id=\"solveButton\" (click)=\"openSolveDialog(puzzle.id)\">Solve</button>\r\n              <button *ngIf=\"puzzle.showRating\" mat-button class=\"btns\" (click)=\"openAndCheck(puzzle.id)\">Rate</button>\r\n              <button mat-button class=\"btns\" id=\"2dDownload\" (click)=\"twoDDownload(puzzle.id)\" >2D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n              <button mat-button class=\"btns\" id=\"3dDownload\" (click)=\"threeDDownload(puzzle.id)\">3D\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n            </mat-card-actions>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n\r\n<mat-paginator *ngIf=\"!show\" class=\"paginator\" [length]=\"totalNumberOfPuzzles\" [pageSize]=\"pageSize\"\r\n                  (page)=\"pageEvent = changeEvent($event)\">\r\n</mat-paginator>\r\n\r\n<app-footer *ngIf=\"!show\"  class=\"footer\" ></app-footer>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { APIService } from 'src/app/services/api.service';\r\nimport { User } from 'src/app/models/User';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-reset-password',\r\n  templateUrl: './reset-password.component.html',\r\n  styleUrls: ['./reset-password.component.css']\r\n})\r\nexport class ResetPasswordComponent implements OnInit {\r\n  resetPasswordForm: FormGroup;\r\n  verifyUser: any;\r\n  formError: string;\r\n  resetDone: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router ) {}\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for logging in user and getting the token associated with the said user\r\n  resetPassword(currentUser: User){\r\n    this.resetDone = '';\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.resetPasswordForm.controls['password'].value, this.resetPasswordForm.controls['confirmPassword'].value) == true){\r\n      this.verifyUser = {\r\n        \"username\": currentUser.email,\r\n        \"password\": currentUser.password\r\n      }\r\n      if(this.verifyUser != null){\r\n        this.api.resetPassword(this.verifyUser).subscribe(\r\n          () => {},\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n            else\r\n            {\r\n              this.router.navigate(['/resetSuccess', { message: \"Password reset. Please login\" }]);\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.resetPasswordForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n    if (firstPassword !== secondPassword) {\r\n        return false;\r\n    } else {\r\n      return true;\r\n    }\r\n}\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Reset Password</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"resetPasswordForm\" (ngSubmit)=\"resetPassword(resetPasswordForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('email').hasError(error.type) && (resetPasswordForm.get('email').dirty || resetPasswordForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                            [type]=\"fieldTextType ? 'text' : 'password'\" class=\"input\" formControlName=\"password\"/>\r\n                    </mat-form-field>\r\n                    <span>\r\n                        <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType,'fa-eye': fieldTextType }\" (click)=\"toggleFieldTextType()\">\r\n                        </i>\r\n                    </span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('password').hasError(error.type) && (resetPasswordForm.get('password').dirty || resetPasswordForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <mat-form-field appearance=\"fill\">\r\n                            <mat-label>Confirm password</mat-label>\r\n                            <input matInput required\r\n                                [type]=\"fieldTextType2 ? 'text' : 'password'\" class=\"input\" formControlName=\"confirmPassword\"/>\r\n                        </mat-form-field>\r\n                        <span>\r\n                            <i class=\"fa\" [ngClass]=\"{ 'fa-eye-slash': !fieldTextType2,'fa-eye': fieldTextType2 }\" (click)=\"toggleFieldTextType2()\">\r\n                            </i>\r\n                        </span>\r\n                            <div>\r\n                                <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                    <mat-error class=\"error-message\" *ngIf=\"resetPasswordForm.get('confirmPassword').hasError(error.type) && (resetPasswordForm.get('confirmPassword').dirty || resetPasswordForm.get('confirmPassword').touched)\">\r\n                                        {{ error.message }}\r\n                                    </mat-error>\r\n                                </ng-container>\r\n                                <span id=\"passError\">{{formError}}</span>\r\n                            </div>\r\n                    </div>\r\n\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!resetPasswordForm.valid\" class=\"btns\" id=\"one\">Submit</button>\r\n                    <a routerLink=\"/index\" mat-raised-button class=\"btns\" id=\"two\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-reset-success',\r\n  templateUrl: './reset-success.component.html',\r\n  styleUrls: ['./reset-success.component.css']\r\n})\r\nexport class ResetSuccessComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute, private router: Router ) {}\r\n\r\n  ngOnInit() {\r\n\r\n    let message = this.route.snapshot.paramMap.get('message');\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n          <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n              <mat-card-header>\r\n                  <h3>Reset Password</h3>\r\n              </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                    <p>Please login</p>\r\n                    <a routerLink=\"/login\" mat-raised-button class=\"btns\" id=\"two\">Login</a>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\r\nimport { User } from '../../models/User';\r\nimport { APIService } from '../../services/api.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-signup',\r\n  templateUrl: './signup.component.html',\r\n  styleUrls: ['./signup.component.css']\r\n})\r\nexport class SignupComponent implements OnInit {\r\n  signUpForm: FormGroup;\r\n  newUser: any;\r\n  formError: string;\r\n  fieldTextType: boolean;\r\n  fieldTextType2: boolean;\r\n\r\n  token: any;\r\n  name: any;\r\n\r\n  constructor(private formBuilder: FormBuilder, private api: APIService, private router: Router) {}\r\n\r\n\r\n  toggleFieldTextType() {\r\n    this.fieldTextType = !this.fieldTextType;\r\n  }\r\n\r\n  toggleFieldTextType2() {\r\n    this.fieldTextType2 = !this.fieldTextType2;\r\n  }\r\n\r\n  //method for creating a new user. A new JSON object is created and sent to the node api\r\n  createNewUser(createUser: any){\r\n    this.formError = '';\r\n    if(this.doPasswordsMatch(this.signUpForm.controls['password'].value, this.signUpForm.controls['confirmPassword'].value) == true){\r\n      this.newUser = {\r\n        \"name\": createUser.name,\r\n        \"username\": createUser.email,\r\n        \"password\": createUser.password\r\n      }\r\n      if(this.newUser != null){\r\n        this.api.createUser(this.newUser).subscribe(\r\n            data => {\r\n              console.log(data);\r\n              localStorage.removeItem('name');\r\n              localStorage.setItem('name', data['name']);\r\n              localStorage.removeItem('token');\r\n              localStorage.setItem('token', data['token']);\r\n              this.router.navigate(['/ratings']);\r\n            },\r\n          error => {//if status code other than in the 200 range returned, show error\r\n            console.log('Error from API: ', error.error);\r\n            if(error.status >= 401){\r\n              this.formError = error.error;\r\n            }\r\n          })\r\n      }\r\n    }\r\n    else\r\n    {\r\n      this.formError = \"Passwords do not match\";\r\n    }\r\n  }\r\n\r\n  //error messages used during login/register validation\r\n  error_messages = {\r\n    'name': [\r\n      { type: 'required', message: 'Full name is required.' },\r\n      { type: 'pattern', message: 'Name can only consist of letters' }\r\n    ],\r\n    'email': [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'email', message: 'Invalid email format.' }\r\n    ],\r\n    'password': [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n    'confirmPassword': [\r\n      { type: 'required', message: 'password is required.' },\r\n      { type: 'minlength', message: 'Password must have at least 6 characters.' }\r\n    ],\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.signUpForm = this.formBuilder.group({\r\n      name: ['', [Validators.required, Validators.pattern('[a-zA-Z ]*')]],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      confirmPassword: ['', [Validators.required, Validators.minLength(6)]]\r\n    });\r\n  }\r\n\r\n  //checking if passwords match\r\n  doPasswordsMatch(firstPassword: string, secondPassword: string) {\r\n        if (firstPassword !== secondPassword) {\r\n          //this.formError = \"Passwords do not match: \" + controlName + \" \" + matchingControlName;\r\n            return false;\r\n        } else {\r\n          //this.formError = \"Match: \" + controlName + \" \" + matchingControlName;\r\n          return true;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"flex-container\" fxLayout=\"row\" fxLayoutAlign=\"center none\">\r\n      <mat-card class=\"regForm\"><img src=\"assets/images/label.png\">\r\n          <mat-card-header>\r\n              <h3>Sign Up</h3>\r\n          </mat-card-header>\r\n            <mat-card-content class=\"regFormContent\">\r\n                <form [formGroup]=\"signUpForm\" (ngSubmit)=\"createNewUser(signUpForm.value)\">\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your full name</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"John Doe\" formControlName=\"name\" required >\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.name\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('name').hasError(error.type) && (signUpForm.get('name').dirty || signUpForm.get('name').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your email</mat-label>\r\n                        <input class=\"input\" matInput placeholder=\"john@doe.com\" formControlName=\"email\" required>\r\n                    </mat-form-field>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.email\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('email').hasError(error.type) && (signUpForm.get('email').dirty || signUpForm.get('email').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Enter your password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"password\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType,\r\n                        'fa-eye': fieldTextType\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.password\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('password').hasError(error.type) && (signUpForm.get('password').dirty || signUpForm.get('password').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                    <mat-form-field appearance=\"fill\">\r\n                        <mat-label>Confirm password</mat-label>\r\n                        <input matInput required\r\n                  [type]=\"fieldTextType2 ? 'text' : 'password'\"\r\n                  class=\"input\"\r\n                  formControlName=\"confirmPassword\"\r\n                />\r\n                    </mat-form-field>\r\n                    <span><i\r\n                      class=\"fa\"\r\n                      [ngClass]=\"{\r\n                        'fa-eye-slash': !fieldTextType2,\r\n                        'fa-eye': fieldTextType2\r\n                      }\"\r\n                      (click)=\"toggleFieldTextType2()\"\r\n                    ></i></span>\r\n                        <div>\r\n                            <ng-container *ngFor=\"let error of error_messages.confirmPassword\">\r\n                                <mat-error class=\"error-message\" *ngIf=\"signUpForm.get('confirmPassword').hasError(error.type) && (signUpForm.get('confirmPassword').dirty || signUpForm.get('confirmPassword').touched)\">\r\n                                    {{ error.message }}\r\n                                </mat-error>\r\n                            </ng-container>\r\n                            <span id=\"passError\">{{formError}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <button mat-raised-button type=\"submit\" [disabled]=\"!signUpForm.valid\" class=\"btns\" id=\"one\">Sign Up</button>\r\n\r\n                    <a routerLink=\"/index\" mat-raised-button color=\"accent\" class=\"btns\">Cancel</a>\r\n                </form>\r\n            </mat-card-content>\r\n        </mat-card>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-rate-dialog',\r\n  templateUrl: './rate-dialog.component.html',\r\n  styleUrls: ['./rate-dialog.component.css']\r\n})\r\nexport class RateDialogComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n  input: any;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private dialogRef: MatDialogRef<RateDialogComponent>) { }\r\n\r\n    @Input() OnlyNumber: boolean;\r\n\r\n    error_messages = {\r\n      'rating': [\r\n        { type: 'pattern', message: 'Must be a number between 1 and 5' }\r\n      ]\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      rating: ['', Validators.pattern(\"^([1-5])$\")]\r\n    })\r\n  }\r\n\r\n  submit(form){\r\n    this.input = form.rating;\r\n      this.dialogRef.close(`${form.rating}`);\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit)=\"submit(form.value)\">\r\n  <h1 mat-dialog-title>Rate Puzzle (out of 5)</h1>\r\n  <mat-dialog-content>\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"rating\" placeholder=\"Enter Rating\" ngControl=\"rating\" OnlyNumber=\"true\">\r\n    </mat-form-field>\r\n    <div>\r\n        <ng-container *ngFor=\"let error of error_messages.rating\">\r\n            <mat-error class=\"error-message\" *ngIf=\"form.get('rating').hasError(error.type) && (form.get('rating').dirty || form.get('rating').touched)\">\r\n                {{ error.message }}\r\n            </mat-error>\r\n        </ng-container>\r\n    </div>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\r\n    <button mat-button type=\"button\" mat-dialog-close>Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport { User } from '../models/User';\r\nimport { Puzzle } from '../models/Puzzle';\r\nimport { PuzzleRating } from '../models/PuzzleRating';\r\nimport {HttpHeaders} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class APIService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /**\r\n   * User endpoints start here\r\n   */\r\n  //create new user\r\n  createUser(newUser: User){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/createUser',newUser, httpOptions);\r\n  }\r\n\r\n  loginUser(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/login', currentUser, httpOptions);\r\n  }\r\n\r\n  resetPassword(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/resetPassword', currentUser, httpOptions);\r\n  }\r\n\r\n  getUser(token: any){\r\n    const httpOptions = { headers: new HttpHeaders({ 'Content-Type': 'application/json'} ) };\r\n    return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getUser',token, httpOptions);\r\n  }\r\n\r\n  updateName(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateName', currentUser, httpOptions);\r\n  }\r\n\r\n  updateUsername(currentUser: User){\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.put('https://prometheuspuzzles.herokuapp.com/api/users/updateUsername', currentUser, httpOptions);\r\n  }\r\n\r\n  getPuzzlesByUser(token: any): Observable<any[]> {\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzlesByUser', token, httpOptions);\r\n  }\r\n\r\n  getPuzzleRatingsByUser(token: any): Observable<any[]>{\r\n    const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n    return this.http.post<any[]>('https://prometheuspuzzles.herokuapp.com/api/users/getPuzzleRatingsByUser', token, httpOptions);\r\n  }\r\n\r\n  /**\r\n   * User endpoints end here\r\n   */\r\n\r\n\r\n/**\r\n* Puzzle endpoints start here\r\n*/\r\ngetAllPuzzles(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzles');\r\n}\r\n\r\ngetAllPuzzleByID(puzzleID: number){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID?Id=' + puzzleID);\r\n}\r\n\r\ncreateNewPuzzle(puzzle: Puzzle){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ncreateNewPuzzleRating(rating: PuzzleRating){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzleRating', rating, httpOptions);\r\n}\r\n\r\ngetAllPuzzleRatings(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getAllPuzzleRatings');\r\n}\r\n\r\ngetSearchedPuzzles(term: any){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/puzzles/getSearchedPuzzles/' + term);\r\n}\r\n\r\nsharePuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/sharePuzzle', puzzle, httpOptions);\r\n}\r\n\r\nstopSharingPuzzle(puzzle: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/puzzles/stopSharingPuzzle', puzzle, httpOptions);\r\n}\r\n\r\ndeletePuzzle(puzzle:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deletePuzzle/'+puzzle);\r\n}\r\n\r\nfindRatingID(rating: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/puzzles/findRatingID', rating, httpOptions);\r\n}\r\n\r\ndeleteRating(rating:number):Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/puzzles/deleteRating/'+rating);\r\n}\r\n\r\nretrieveAllSolveAttempts(currentUser: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.post('https://prometheuspuzzles.herokuapp.com/api/users/getSolvedPuzzles', currentUser, httpOptions);\r\n}\r\n\r\n/**\r\n* Puzzle endpoints end here\r\n*/\r\n\r\n/**\r\n* Admin endpoints start here\r\n*/\r\n\r\ngetAllUsers(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllUsers');\r\n}\r\n\r\ndeleteUser(user:number): Observable<number>\r\n{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteUser/'+user);\r\n}\r\n\r\ngetAllPuzzlesAdmin()\r\n{\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllPuzzles');\r\n}\r\n\r\ndeletePuzzleAdmin(puzzle:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deletePuzzle/'+puzzle);\r\n}\r\n\r\ngetAllRatingsAdmin(){\r\n  return this.http.get('https://prometheuspuzzles.herokuapp.com/api/admin/getAllRatings');\r\n}\r\n\r\ndeleteRatingAdmin(rateID:number): Observable<number>{\r\n  return this.http.delete<number>('https://prometheuspuzzles.herokuapp.com/api/admin/deleteRatingAdmin/'+rateID);\r\n}\r\n/**\r\n* Admin endpoints end here\r\n*/\r\n\r\nrequestPasswordChange(email: any){\r\n  const httpOptions = { headers: new HttpHeaders( { 'Content-Type': 'application/json' })};\r\n  return this.http.put('https://prometheuspuzzles.herokuapp.com/api/requestPasswordChange', email, httpOptions);\r\n}\r\n\r\n}\r\n","/*! FileSaver.js\r\n *  A saveAs() FileSaver implementation.\r\n *  2014-01-24\r\n *\r\n *  By Eli Grey, http://eligrey.com\r\n *  License: X11/MIT\r\n *    See LICENSE.md\r\n */\r\n\r\n/*global self */\r\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\r\n\r\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\r\nvar saveAs = saveAs\r\n  // IE 10+ (native saveAs)\r\n  || (typeof navigator !== \"undefined\" &&\r\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\r\n  // Everyone else\r\n  || (function(view) {\r\n\t\"use strict\";\r\n\t// IE <10 is explicitly unsupported\r\n\tif (typeof navigator !== \"undefined\" &&\r\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\r\n\t\treturn;\r\n\t}\r\n\tvar\r\n\t\t  doc = view.document\r\n\t\t  // only get URL when necessary in case BlobBuilder.js hasn't overridden it yet\r\n\t\t, get_URL = function() {\r\n\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t}\r\n\t\t, URL = view.URL || view.webkitURL || view\r\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t, can_use_save_link = !view.externalHost && \"download\" in save_link\r\n\t\t, click = function(node) {\r\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t);\r\n\t\t\tnode.dispatchEvent(event);\r\n\t\t}\r\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t, throw_outside = function(ex) {\r\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\r\n\t\t\t\tthrow ex;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t, fs_min_size = 0\r\n\t\t, deletion_queue = []\r\n\t\t, process_deletion_queue = function() {\r\n\t\t\tvar i = deletion_queue.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar file = deletion_queue[i];\r\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\tURL.revokeObjectURL(file);\r\n\t\t\t\t} else { // file is a File\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdeletion_queue.length = 0; // clear queue\r\n\t\t}\r\n\t\t, dispatch = function(filesaver, event_types, event) {\r\n\t\t\tevent_types = [].concat(event_types);\r\n\t\t\tvar i = event_types.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t, FileSaver = function(blob, name) {\r\n\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\tvar\r\n\t\t\t\t  filesaver = this\r\n\t\t\t\t, type = blob.type\r\n\t\t\t\t, blob_changed = false\r\n\t\t\t\t, object_url\r\n\t\t\t\t, target_view\r\n\t\t\t\t, get_object_url = function() {\r\n\t\t\t\t\tvar object_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\tdeletion_queue.push(object_url);\r\n\t\t\t\t\treturn object_url;\r\n\t\t\t\t}\r\n\t\t\t\t, dispatch_all = function() {\r\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t}\r\n\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t, fs_error = function() {\r\n\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.open(object_url, \"_blank\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\tdispatch_all();\r\n\t\t\t\t}\r\n\t\t\t\t, abortable = function(func) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\r\n\t\t\t\t, slice\r\n\t\t\t;\r\n\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\tif (!name) {\r\n\t\t\t\tname = \"download\";\r\n\t\t\t}\r\n\t\t\tif (can_use_save_link) {\r\n\t\t\t\tobject_url = get_object_url(blob);\r\n\t\t\t\t// FF for Android has a nasty garbage collection mechanism\r\n\t\t\t\t// that turns all objects that are not pure javascript into 'deadObject'\r\n\t\t\t\t// this means `doc` and `save_link` are unusable and need to be recreated\r\n\t\t\t\t// `view` is usable though:\r\n\t\t\t\tdoc = view.document;\r\n\t\t\t\tsave_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\");\r\n\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\tsave_link.download = name;\r\n\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t\t);\r\n\t\t\t\tsave_link.dispatchEvent(event);\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch_all();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\tblob_changed = true;\r\n\t\t\t}\r\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\tname += \".download\";\r\n\t\t\t}\r\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\ttarget_view = view;\r\n\t\t\t}\r\n\t\t\tif (!req_fs) {\r\n\t\t\t\tfs_error();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfs_min_size += blob.size;\r\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\r\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\r\n\t\t\t\t\tvar save = function() {\r\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\r\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\r\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\r\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\tdeletion_queue.push(file);\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\twriter.onerror = function() {\r\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\r\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\r\n\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\r\n\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\tsave();\r\n\t\t\t\t\t}), abortable(function(ex) {\r\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}), fs_error);\r\n\t\t\t}), fs_error);\r\n\t\t}\r\n\t\t, FS_proto = FileSaver.prototype\r\n\t\t, saveAs = function(blob, name) {\r\n\t\t\treturn new FileSaver(blob, name);\r\n\t\t}\r\n\t;\r\n\tFS_proto.abort = function() {\r\n\t\tvar filesaver = this;\r\n\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\tdispatch(filesaver, \"abort\");\r\n\t};\r\n\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\tFS_proto.WRITING = 1;\r\n\tFS_proto.DONE = 2;\r\n\r\n\tFS_proto.error =\r\n\tFS_proto.onwritestart =\r\n\tFS_proto.onprogress =\r\n\tFS_proto.onwrite =\r\n\tFS_proto.onabort =\r\n\tFS_proto.onerror =\r\n\tFS_proto.onwriteend =\r\n\t\tnull;\r\n\r\n\tview.addEventListener(\"unload\", process_deletion_queue, false);\r\n\tsaveAs.unload = function() {\r\n\t\tprocess_deletion_queue();\r\n\t\tview.removeEventListener(\"unload\", process_deletion_queue, false);\r\n\t};\r\n\treturn saveAs;\r\n}(\r\n\t   typeof self !== \"undefined\" && self\r\n\t|| typeof window !== \"undefined\" && window\r\n\t|| this.content\r\n));\r\n// `self` is undefined in Firefox for Android content script context\r\n// while `this` is nsIContentFrameMessageManager\r\n// with an attribute `content` that corresponds to the window\r\n\r\nif (typeof module !== \"undefined\") module.exports = saveAs;\r\n","import {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tTOUCH,\r\n\tVector2,\r\n\tVector3\r\n} from \"src/assets/js/three.module.js\";\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = domElement;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.05;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t// Touch fingers\r\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\tvar twoPI = 2 * Math.PI;\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\tvar min = scope.minAzimuthAngle;\r\n\t\t\tvar max = scope.maxAzimuthAngle;\r\n\r\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\tif ( min < max ) {\r\n\r\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = {\r\n\t\tNONE: - 1,\r\n\t\tROTATE: 0,\r\n\t\tDOLLY: 1,\r\n\t\tPAN: 2,\r\n\t\tTOUCH_ROTATE: 3,\r\n\t\tTOUCH_PAN: 4,\r\n\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t};\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\tvar needsUpdate = false;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t// Prevent the browser from scrolling.\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Manually set the focus since calling preventDefault above\r\n\t\t// prevents the browser from setting it automatically.\r\n\r\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n\t\tvar mouseAction;\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase 0:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// make sure element can receive keys.\r\n\r\n\tif ( scope.domElement.tabIndex === - 1 ) {\r\n\r\n\t\tscope.domElement.tabIndex = 0;\r\n\r\n\t}\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nvar MapControls = function ( object, domElement ) {\r\n\r\n\tOrbitControls.call( this, object, domElement );\r\n\r\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n\tthis.touches.ONE = TOUCH.PAN;\r\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n};\r\n\r\nMapControls.prototype = Object.create( EventDispatcher.prototype );\r\nMapControls.prototype.constructor = MapControls;\r\n\r\nexport { OrbitControls, MapControls };\r\n","import { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard } from 'src/assets/js/manualCreation.js';\r\n\r\n///The structure of each individual/chromosome object\r\nlet Chromosome = {\r\n\tsites: [],\r\n\tfitness: -1,\r\n};\r\n\r\n///The structure of each site object\r\nlet Site = {\r\n\tx: 0,\r\n\ty: 0,\r\n\tsurfaceArea: 0,\r\n};\r\n\r\nlet generatePuzzleAIButton, nextPuzzleButton, previousPuzzleButton, progressBar;\r\nlet generatedPuzzles;\r\nlet renderedPuzzleIndex;\r\nlet tempWidth, tempHeight;\r\nlet totalSurfaceArea;\r\n\r\n//Genetic Algorithm parameters\r\nlet generationSize = 10 + 1;\r\nlet tournamentSize = 4;\r\nlet maximumIterations = 150;\r\nlet seedString = 'apples';\r\n\r\nlet sliders = [];\r\nlet labels = [];\r\nlet numberOfSites = 6;\r\nlet desiredProportions = [0.40, 0.20, 0.10, 0.10, 0.10, 0.10];\r\nlet groupDistribution = [];\r\n\r\nfunction copyObject(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction xmur3(str) {\r\n    for(var i = 0, h = 1779033703 ^ str.length; i < str.length; i++)\r\n        h = Math.imul(h ^ str.charCodeAt(i), 3432918353),\r\n        h = h << 13 | h >>> 19;\r\n    return function() {\r\n        h = Math.imul(h ^ h >>> 16, 2246822507);\r\n        h = Math.imul(h ^ h >>> 13, 3266489909);\r\n        return (h ^= h >>> 16) >>> 0;\r\n    }\r\n}\r\n\r\nfunction mulberry32(a) {\r\n    return function() {\r\n      var t = a += 0x6D2B79F5;\r\n      t = Math.imul(t ^ t >>> 15, t | 1);\r\n      t ^= t + Math.imul(t ^ t >>> 7, t | 61);\r\n      return ((t ^ t >>> 14) >>> 0) / 4294967296;\r\n    }\r\n}\r\n\r\nlet seed = xmur3(seedString);\r\nlet rand = mulberry32(seed());\r\n\r\nfunction random(max)\r\n{\r\n    // return Math.ceil(rand() * max) - 1;\r\n    return Math.floor(Math.random() * max);\r\n}\r\n\r\nfunction expandPuzzle(sites, factor)\r\n{\r\n\tlet tempSites = [];\r\n\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\ttempSites[i] = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t}\r\n\t\ttempSites[i].x = sites[i].x * factor;\r\n\t\ttempSites[i].y = sites[i].y * factor;\r\n\t}\r\n\r\n\treturn tempSites;\r\n}\r\n\r\nexport function initializeDataAI()\r\n{\r\n\tinitializeData('AI');\r\n\tsetDisableEditMode(true);\r\n\tgroupDistribution = [];\r\n\tgeneratedPuzzles = [];\r\n\tsliders = [];\r\n\tlabels = [];\r\n\trenderedPuzzleIndex = 0;\r\n\tgeneratePuzzleAIButton = document.getElementById('generatePuzzleButtonAI');\r\n\tgeneratePuzzleAIButton.addEventListener('mousedown', generatePuzzleAI);\r\n\tgeneratePuzzleAIButton.remove();\r\n\r\n\tnextPuzzleButton = document.getElementById('nextPuzzleButton');\r\n\tpreviousPuzzleButton = document.getElementById('previousPuzzleButton');\r\n\tnextPuzzleButton.remove();\r\n\tpreviousPuzzleButton.remove();\r\n\r\n\tprogressBar = document.getElementById('progressBar');\r\n\tprogressBar.style.display = 'none';\r\n\r\n\tdocument.getElementById('nextButton').addEventListener('mousedown', displaySlidersCard);\r\n\r\n\tnextPuzzleButton.addEventListener('mousedown', function(){\r\n\t\trenderedPuzzleIndex++;\r\n\t\tif(renderedPuzzleIndex == generatedPuzzles.length)\r\n\t\t{\r\n\t\t\tlet newGeneration = run();\r\n\t\t\tfor(let index = 0; index < newGeneration.length; index++)\r\n\t\t\t{\r\n\t\t\t\tgeneratedPuzzles.push(newGeneration[index].sites);\r\n\t\t\t}\r\n\t\t\tconsole.log('reached maximum :<');\r\n\t\t}\r\n\r\n\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t});\r\n\r\n\tpreviousPuzzleButton.addEventListener('mousedown', function(){\r\n\t\tif(renderedPuzzleIndex != 0)\r\n\t\t{\r\n\t\t\trenderedPuzzleIndex--;\r\n\t\t\trenderPuzzle(generatedPuzzles[renderedPuzzleIndex]);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction displaySlidersCard()\r\n{\r\n\tlet numberOfPiecesInGroup;\r\n\tnumberOfSites = 0;\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tnumberOfPiecesInGroup = parseInt(document.getElementById('numberOfPiecesInputBox' + (i+1)).value);\r\n\t\tgroupDistribution.push(numberOfPiecesInGroup);\r\n\t\tnumberOfSites += numberOfPiecesInGroup;\r\n\t}\r\n\r\n\tgenerateSliders(3);\r\n\r\n\tdocument.getElementById('inputContainer').appendChild(generatePuzzleAIButton);\r\n}\r\n\r\nfunction generatePuzzleAI()\r\n{\r\n\t// document.getElementById('progressBarDiv').appendChild(progressBar);\r\n\t// progressBar.style.display = 'block';\r\n\tdesiredProportions = [];\r\n\r\n\tfor(let i = 0; i < 3; i++)\r\n\t{\r\n\t\tlet proportion = (sliders[i].value / groupDistribution[i]) / 100;\r\n\r\n\t\tfor(let counter = 0; counter < groupDistribution[i]; counter++)\r\n\t\t\tdesiredProportions.push(proportion);\r\n\t}\r\n\r\n\tdesiredProportions.sort( function(a, b) { return b - a } );\r\n\r\n\tdocument.getElementById('inputContainer').innerHTML = '';\r\n\r\n\tlet lastGeneration = run();\r\n\tfor(let index = 0; index < lastGeneration.length; index++)\r\n\t{\r\n\t\tgeneratedPuzzles.push(lastGeneration[index].sites);\r\n\t}\r\n\r\n\trenderPuzzle(lastGeneration[0].sites);\r\n\t// progressBar.remove();\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(previousPuzzleButton);\r\n\tdocument.getElementById('puzzleControlsDiv').appendChild(nextPuzzleButton);\r\n}\r\n\r\nfunction renderPuzzle(sites)\r\n{\r\n\tlet expandedSites = expandPuzzle(sites, 10);\r\n\tsetSites(expandedSites);\r\n\tclearBoard();\r\n\tgenerateSiteBoundaries();\r\n\tcreatePieces();\r\n}\r\n\r\nfunction generateSliders(numberOfSliders)\r\n{\r\n\tlet inputContainer = document.getElementById('inputContainer');\r\n\tlet defaultValue = 100/numberOfSliders;\r\n\r\n\tinputContainer.innerHTML = '';\r\n\r\n\tfor(let i = 0; i < numberOfSliders; i++)\r\n\t{\r\n\t\tlet slider = document.createElement('input');\r\n\t\tslider.type = 'range';\r\n\t\tslider.min = 1.00;\r\n\t\tslider.max = 100.00 - numberOfSliders + 1;\r\n\t\tslider.value = defaultValue;\r\n\t\tslider.previousValue = defaultValue;\r\n\t\tslider.sliderid = i;\r\n\t\tslider.step = 0.01;\r\n\r\n\t\tslider.addEventListener('input', function() {\r\n\t\t\tlet difference = this.previousValue - this.value;\r\n\t\t\tlet distributedValue = (difference/( numberOfSliders - 1 )).toFixed(2);\r\n\t\t\tlet leftover = 0;\r\n\r\n\t\t\tfor(let i = 0 ; i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = ( parseFloat(sliders[i].value) + parseFloat(distributedValue) );\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(leftover != 0 && ( tempValue + leftover ) >= 1.00)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttempValue += leftover;\r\n\t\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tleftover += parseFloat(distributedValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(let i = 0; leftover != 0 && i < numberOfSliders; i++)\r\n\t\t\t{\r\n\t\t\t\tif(i != this.sliderid)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet tempValue = parseFloat(sliders[i].value) + leftover;\r\n\t\t\t\t\tif(tempValue >= 1.00)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsliders[i].value = tempValue;\r\n\t\t\t\t\t\tsliders[i].previousValue = tempValue;\r\n\t\t\t\t\t\tlabels[i].innerHTML = parseInt(tempValue);\r\n\t\t\t\t\t\tleftover = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.previousValue = this.value;\r\n\t\t\tlabels[this.sliderid].innerHTML = parseInt(this.value);\r\n\t\t});\r\n\r\n\t\tlet headerLabel = document.createElement('label');\r\n\t\theaderLabel.innerHTML = 'Size ' + (i+1);\r\n\r\n\t\tlet valueLabel = document.createElement('label');\r\n\t\tvalueLabel.innerHTML = defaultValue.toFixed(0);\r\n\r\n\t\tlet br = document.createElement('br');\r\n\r\n\t\tsliders.push(slider); \r\n\t\tlabels.push(valueLabel);\r\n\r\n\r\n\t\tinputContainer.appendChild(headerLabel);\r\n\t\tinputContainer.appendChild(slider);\r\n\t\tinputContainer.appendChild(valueLabel);\r\n\t\tinputContainer.appendChild(br);\r\n\t}\r\n}\r\n\r\n///Executes the genetic algorithm and returns the resulting site array\r\nfunction run()\r\n{\r\n\tlet currentGeneration = [], nextGeneration = [];\r\n\tlet parentX, parentY, children;\r\n\tlet x, y;\r\n\ttempWidth = width/10;\r\n\ttempHeight = height/10;\r\n\ttotalSurfaceArea = tempWidth * tempHeight;\r\n\r\n\tnextGeneration = initializeGeneration();\r\n\tfor(let generation = 0; generation < maximumIterations; generation++)\r\n\t{\r\n\t\tcurrentGeneration = nextGeneration;\r\n\t\tnextGeneration = [];\r\n\t\tnextGeneration.push( getFittest(currentGeneration) );\r\n\t\tfor(let i = 0; i < generationSize - 1; i+=2)\r\n\t\t{\r\n\t\t\tparentX = runTournament(currentGeneration);\r\n\t\t\tparentY = runTournament(currentGeneration);\r\n\t\t\tchildren = crossover(parentX, parentY);\r\n\t\t\tmutate(children[0]);\r\n\t\t\tmutate(children[1]);\r\n\t\t\tcalculateAndSetFitness(children[0]);\r\n\t\t\tcalculateAndSetFitness(children[1]);\r\n\t\t\tnextGeneration.push(...children);\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(nextGeneration);\r\n\tconsole.log('done!');\r\n\treturn nextGeneration;\r\n}\r\n\r\n///Returns the fittest chromosome from generation\r\nfunction getFittest(generation)\r\n{\r\n\tlet fittestChromosome = null;\r\n\tfittestChromosome = generation[0];\r\n\r\n\tfor(let i = 1; i < generationSize; i++)\r\n\t\tif(generation[i].fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = generation[i];\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Randomly selected a site and a movement direction; then proceed to execute movement using a random offset\r\nfunction mutate(chromosome)\r\n{\r\n\t// let siteIndex = random(numberOfSites);\r\n\tlet selectedSite = chromosome.sites[random(numberOfSites)];\r\n\tlet offset = random(5 + 1);\r\n\tlet movementDirection = random(4);\r\n\r\n\t///Move site to the right by offset (increment x by offset), or move to the left if at board edge\r\n\tif(movementDirection == 0)\r\n\t{\r\n\t\tif(selectedSite.x + offset < tempWidth)\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t}\r\n\t///Move site to the left by offset (decrement x by offset), or move to the right if at the board edge\r\n\telse if(movementDirection == 1)\r\n\t{\r\n\t\tif(selectedSite.x - offset > 0)\r\n\t\t\tselectedSite.x = selectedSite.x - offset;\r\n\t\telse\r\n\t\t\tselectedSite.x = selectedSite.x + offset;\r\n\t}\r\n\t///Move site upwards by offset (decrement y by offset), or move downwards if at the board edge\r\n\telse if(movementDirection == 2)\r\n\t{\r\n\t\tif(selectedSite.y - offset > 0)\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t}\r\n\t///Move site downwards by offset (increment y by offset), or move upwards if at board edge\r\n\telse if(movementDirection == 3)\r\n\t{\r\n\t\tif(selectedSite.y + offset < tempHeight)\r\n\t\t\tselectedSite.y = selectedSite.y + offset;\r\n\t\telse\r\n\t\t\tselectedSite.y = selectedSite.y - offset;\r\n\t}\r\n}\r\n\r\n/**\r\n\tCrossover operation; randomly select a site index and swap the sites located on said index.\r\n\tThis function will create two new children, swap their sites and return an array containing them.\r\n**/\r\nfunction crossover(chromosomeX, chromosomeY)\r\n{\r\n\tlet swapIndex = random(numberOfSites);\r\n\tlet childX = copyObject(chromosomeX);\r\n\tlet childY = copyObject(chromosomeY);\r\n\r\n\tlet tempSite = childX.sites[swapIndex];\r\n\tchildX.sites[swapIndex] = childY.sites[swapIndex];\r\n\tchildY.sites[swapIndex] = tempSite;\r\n\r\n\treturn [childX, childY];\r\n}\r\n\r\n///Tournament selection of parent for next generation - fittest from a random bunch is returned.\r\nfunction runTournament(generation)\r\n{\r\n\tlet chosenChromosome, fittestChromosome = null;\r\n\r\n\tfor(let i = 0; i < tournamentSize; i++)\r\n\t{\r\n\t\tchosenChromosome = generation[random(generationSize)];\r\n\t\tif(fittestChromosome == null || chosenChromosome.fitness < fittestChromosome.fitness)\r\n\t\t\tfittestChromosome = chosenChromosome;\r\n\t}\r\n\r\n\treturn fittestChromosome;\r\n}\r\n\r\n///Create and return the initial generation of chromosomes\r\nfunction initializeGeneration()\r\n{\r\n\tlet currentGeneration = [];\r\n\tfor(let i = 0; i < generationSize; i++)\r\n\t{\r\n\t\tlet newChromosome = copyObject(Chromosome);\r\n\t\tfor(let siteIndex = 0; siteIndex < numberOfSites; siteIndex++)\r\n\t\t{\r\n\t\t\tlet tempSite = copyObject(Site);\r\n\t\t\ttempSite.x = random(tempWidth + 1);\r\n\t\t\ttempSite.y = random(tempHeight + 1);\r\n\t\t\tnewChromosome.sites.push(tempSite);\r\n\t\t}\r\n\r\n\t\tcalculateAndSetFitness(newChromosome);\r\n\t\tcurrentGeneration.push(newChromosome);\r\n\t}\r\n\r\n\treturn currentGeneration;\r\n}\r\n\r\n///Calculate and set the fitness of a chromosome\r\nfunction calculateAndSetFitness(chromosome)\r\n{\r\n\tdetermineAndSetSiteBoundaries(chromosome);\r\n\tsortSites(chromosome);\r\n\tlet fitness = 0, difference;\r\n\r\n\tfor(let i = 0; i < desiredProportions.length; i++)\r\n\t{\r\n\t\tdifference = ( desiredProportions[i] * totalSurfaceArea ) - chromosome.sites[i].surfaceArea;\r\n\t\tif(difference < 0)\r\n\t\t\tdifference *= -1;\r\n\t\tfitness += difference;\r\n\t}\r\n\r\n\tchromosome.fitness = fitness;\r\n}\r\n\r\n///Sort the sites according to surface area from highest to lowest\r\nfunction sortSites(chromosome)\r\n{\r\n\tlet sites = chromosome.sites;\r\n\tsites.sort(function(siteA, siteB) { return \tsiteB.surfaceArea - siteA.surfaceArea });\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction determineAndSetSiteBoundaries(chromosome)\r\n{\r\n\tfor(let i = 0; i < numberOfSites; i++)\r\n\t\tchromosome.sites[i].surfaceArea = 0;\r\n\r\n\tfor(let row = 0; row < tempHeight; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < tempWidth; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, chromosome.sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tchromosome.sites[equidistantPoints[0]].surfaceArea += 1;\r\n\t\t}\r\n\t}\r\n}\r\n","import JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { downloadPuzzle3D, downloadPuzzle2D };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet piecesJSONObject, pieces, base64Image;\r\nlet desiredFile;\r\n\r\nfunction downloadPuzzle3D(puzzleID)\r\n{\r\n\tdesiredFile = '3D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction downloadPuzzle2D(puzzleID)\r\n{\r\n\tdesiredFile = '2D';\r\n\t//puzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tgetPuzzleData(puzzleID);\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tbase64Image = base64Image.split(\",\");\r\n\t\t\tbase64Image = base64Image[1];\r\n\t\t\tif(desiredFile == '3D')\r\n\t\t\t\tgenerateSTLFiles();\r\n\t\t\telse\r\n\t\t\t\tgenerateImageFile();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generateSTLFiles()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\tlet tileFolder = zip.folder(\"tile puzzle\");\r\n\tlet cuboidFolder = zip.folder(\"cuboid puzzle\");\r\n\tcreateTilePrintableFiles(tileFolder, 0, 5);\r\n\r\n\tif(piecesJSONObject.depths === undefined)\r\n\t{\r\n\t\tdepths = [];\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(Math.floor(Math.random() * 8) + 1);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdepths = piecesJSONObject.depths;\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t\tdepths[i] = getDepth(depths[i]);\r\n\t}\r\n\r\n\tcreateCuboidPrintableFiles(cuboidFolder, depths);\r\n\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction createCuboidPrintableFiles(folder, depthsArray)\r\n{\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet nextTopRight, nextTopLeft, nextBottomRight, nextBottomLeft;\r\n\tlet stlFileFrontFace, stlFileBackFace;\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFileFrontFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tstlFileBackFace = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: 0\r\n\t\t\t};\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\t\r\n\t\t\t\tnextTopLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomLeft = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+1],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextTopRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: depthsArray[pieceIndex]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnextBottomRight = {\r\n\t\t\t\t\tx: currentPiece[vertexIndex+4+2],\r\n\t\t\t\t\ty: currentPiece[vertexIndex+4+3],\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileFrontFace);\r\n\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileFrontFace);\r\n\t\t\t\tstlFileFrontFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileFrontFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileFrontFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileFrontFace);\r\n\t\t\tstlFileFrontFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileFrontFace);\r\n\r\n\r\n\t\t\ttopLeft.z = 500;\r\n\t\t\tbottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\ttopRight.z = 500;\r\n\t\t\tbottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\tif(vertexIndex+4 < currentPiece.length)\r\n\t\t\t{\r\n\t\t\t\tnextTopLeft.z = 500;\r\n\t\t\t\tnextBottomLeft.z = depthsArray[pieceIndex];\r\n\t\t\t\tnextTopRight.z = 500;\r\n\t\t\t\tnextBottomRight.z = depthsArray[pieceIndex];\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(topLeft, topRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, nextTopLeft, topLeft, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomRight, nextBottomRight, nextTopRight, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopRight, topRight, bottomRight, stlFileBackFace);\r\n\r\n\t\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, nextBottomLeft, nextTopLeft, stlFileBackFace);\r\n\t\t\t\tstlFileBackFace = addVertexToFile(nextTopLeft, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t\t}\r\n\r\n\t\t\tstlFileBackFace = addVertexToFile(bottomLeft, bottomRight, topRight, stlFileBackFace);\r\n\t\t\tstlFileBackFace = addVertexToFile(topRight, topLeft, bottomLeft, stlFileBackFace);\r\n\t\t}\r\n\r\n\t\tstlFileFrontFace += \"endsolid puzzle\";\r\n\t\tstlFileBackFace += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(front_face).stl\", stlFileFrontFace);\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + \"(back_face).stl\", stlFileBackFace);\r\n\t}\r\n}\r\n\r\nfunction createTilePrintableFiles(folder, zPositionBottom, zPositionTop, optionalSuffix)\r\n{\r\n\tif(optionalSuffix == undefined)\r\n\t\toptionalSuffix = '';\r\n\r\n\tlet currentPiece;\r\n\tlet topRight, topLeft, bottomRight, bottomLeft;\r\n\tlet stlFile;\r\n\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tstlFile = 'solid piece_number_' + pieceIndex + '\\n';\r\n\t\tcurrentPiece = pieces[pieceIndex];\r\n\t\tfor(let vertexIndex = 0; vertexIndex < currentPiece.length; vertexIndex+=4)\r\n\t\t{\r\n\t\t\ttopLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomLeft = {\r\n\t\t\t\tx: currentPiece[vertexIndex],\r\n\t\t\t\ty: currentPiece[vertexIndex+1],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\ttopRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionTop\r\n\t\t\t};\r\n\r\n\t\t\tbottomRight = {\r\n\t\t\t\tx: currentPiece[vertexIndex+2],\r\n\t\t\t\ty: currentPiece[vertexIndex+3],\r\n\t\t\t\tz: zPositionBottom\r\n\t\t\t};\r\n\r\n\t\t\tstlFile = addVertexToFile(bottomLeft, bottomRight, topRight, stlFile);\r\n\t\t\tstlFile = addVertexToFile(topRight, topLeft, bottomLeft, stlFile);\r\n\t\t}\r\n\t\tstlFile += \"endsolid puzzle\";\r\n\t\tfolder.file(\"piece_number_\" + pieceIndex + optionalSuffix + \".stl\", stlFile);\r\n\t}\r\n}\r\n\r\nfunction addVertexToFile(vertexA, vertexB, vertexC, stlFile)\r\n{\r\n\tstlFile += \"facet normal 0 0 0\\n\";\r\n\tstlFile += \"outer loop\\n\";\r\n\tstlFile += \"vertex \" + vertexA.x + \" \" + vertexA.y + \" \" + vertexA.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexB.x + \" \" + vertexB.y + \" \" + vertexB.z + \"\\n\";\r\n\tstlFile += \"vertex \" + vertexC.x + \" \" + vertexC.y + \" \" + vertexC.z + \"\\n\";\r\n\tstlFile += \"endloop\\n\";\r\n\tstlFile += \"endfacet\\n\";\r\n\r\n\treturn stlFile;\r\n}\r\n\r\nfunction generateImageFile()\r\n{\r\n\tlet zip = new JSZip();\r\n\tlet imgFolder = zip.folder(\"images\");\r\n\timgFolder.file(\"puzzle.jpeg\", base64Image, {base64: true});\r\n\r\n\tzip.generateAsync({type:\"blob\"}).then(function(blob){\r\n\t\tsaveAs(blob, \"puzzle.zip\");\r\n\t}, function(error){\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500);\r\n}\r\n","import * as THREE from 'src/assets/js/three.module.js';\r\nimport { OrbitControls } from 'src/assets/js/OrbitControls.js';\r\nexport { initiate3DCanvas, render3D };\r\n\r\nlet scene, camera, renderer, line, points, pieceGeometry, pieceGeometryArray, piece;\r\nlet factor = 5;\r\n\r\nfunction initiate3DCanvas(height, width)\r\n{\r\n\tpoints = [];\r\n\tpieceGeometryArray = [];\r\n\tscene = new THREE.Scene();\r\n\tscene.background = new THREE.Color('white');\r\n\tcamera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);\r\n\trenderer = new THREE.WebGLRenderer({antialias: true});\r\n\t// renderer = new THREE.WebGLRenderer();\r\n\trenderer.setSize(height, width);\r\n\r\n\t// camera.lookAt( 0, 0, 0 );\r\n\tcamera.position.z = 750;\r\n\tconst controls = new OrbitControls(camera, renderer.domElement);\r\n\tcontrols.target.set(0, 10, 0);\r\n\tcontrols.update();\r\n}\r\n\r\nfunction render3D(jsonData, appendedString)\r\n{\r\n\twhile(scene.children.length > 0)\r\n\t\tscene.remove(scene.children[0]);\r\n\t\r\n\tlet pieceGeometryArray = extractPoints(jsonData.pieces, jsonData.depths);\r\n\tlet pieceMeshArray = generateAndColorMeshes(pieceGeometryArray, jsonData.colors);\r\n\taddMeshesToScene(pieceMeshArray);\r\n\tdocument.getElementById('container'+appendedString).innerHTML = \"\";\r\n\tdocument.getElementById('container'+appendedString).appendChild(renderer.domElement);\r\n\tanimate();\r\n}\r\n\r\nfunction addMeshesToScene(meshArray)\r\n{\r\n\tfor(let mesh of meshArray)\r\n\t{\r\n\t\tmesh.frustumCulled = false;\r\n\t\t// Add to scene\r\n\t\tscene.add(mesh);\r\n\t}\r\n}\r\n\r\nfunction generateAndColorMeshes(pieceGeometryArray, colors)\r\n{\r\n\tlet tempPieceMeshArray = [];\r\n\tlet material;\r\n\tfor(let i = 0; i <  pieceGeometryArray.length; i++)\r\n\t{\r\n\t\t// Create mesh with geo and MeshBasicMaterial\r\n\t\tmaterial = new THREE.MeshBasicMaterial({color: colors[(i % colors.length)]});\r\n\t\ttempPieceMeshArray.push(new THREE.Mesh(pieceGeometryArray[i], material));\r\n\t}\r\n\r\n\treturn tempPieceMeshArray;\r\n}\r\n\r\nfunction extractPoints(pieces, depths)\r\n{\r\n\tlet topLeft, topRight, bottomLeft, bottomRight, piece;\r\n\tlet tempPieceGeometryArray = [];\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tpiece = pieces[pieceIndex];\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 10);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]/10, piece[index+1]/10, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 10);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]/10, piece[index+3]/10, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index]-250, piece[index+1]-250, 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2]-250, piece[index+3]-250, 0);\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , getDepth(depths[pieceIndex]));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, 0);\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, 0);\r\n\t\t\t// topLeft = new THREE.Vector3(piece[index], piece[index+1], 100);\r\n\t\t\t// bottomLeft = new THREE.Vector3(piece[index], piece[index+1], 0);\r\n\t\t\t// topRight = new THREE.Vector3(piece[index+2], piece[index+3], 100);\r\n\t\t\t// bottomRight = new THREE.Vector3(piece[index+2], piece[index+3], 0);\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\r\n\t\tpieceGeometry = new THREE.Geometry();\r\n\t\tfor(let index = 0; index < piece.length; index+=4)\r\n\t\t{\r\n\t\t\ttopLeft = new THREE.Vector3( ( piece[index]-250 ) / factor , (piece[index+1]-250)/factor , ( 500 / factor ));\r\n\t\t\tbottomLeft = new THREE.Vector3( ( piece[index]-250 ) / factor, ( piece[index+1]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\ttopRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, ( 500 / factor ));\r\n\t\t\tbottomRight = new THREE.Vector3( ( piece[index+2]-250 ) / factor, ( piece[index+3]-250 ) / factor, getDepth(depths[pieceIndex]));\r\n\t\t\tbuildSquare(bottomLeft, bottomRight, topRight, topLeft, index);\r\n\t\t}\r\n\t\ttempPieceGeometryArray.push(pieceGeometry);\r\n\t}\r\n\r\n\treturn tempPieceGeometryArray;\r\n}\r\n\r\nfunction buildSquare(bottomLeft, bottomRight, topRight, topLeft, index)\r\n{\r\n\tpieceGeometry.vertices.push(bottomLeft, bottomRight, topRight, topLeft);\r\n\tbuildTriangle(index, index+1, index+2);\r\n\tbuildTriangle(index+2, index+3, index);\r\n}\r\n\r\nfunction buildTriangle(point1, point2, point3)\r\n{\r\n\tpieceGeometry.faces.push(new THREE.Face3(point1, point2, point3));\r\n}\r\n\r\nfunction getDepth(nth)\r\n{\r\n\treturn ((nth/10) * 500) / factor;\r\n}\r\n\r\nfunction animate()\r\n{\r\n\trequestAnimationFrame(animate);\r\n\t// piece.rotation.x += 0.01;\r\n\t// piece.rotation.y += 0.01;\r\n\t// piece.rotation.z += 0.01;\r\n\trenderer.render(scene, camera);\r\n}","/*!\r\n\r\nJSZip v3.5.0 - A JavaScript class for generating and reading zip files\r\n<http://stuartk.com/jszip>\r\n\r\n(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>\r\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.\r\n\r\nJSZip uses the library pako released under the MIT license :\r\nhttps://github.com/nodeca/pako/blob/master/LICENSE\r\n*/\r\n\r\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).JSZip=t()}}(function(){return function s(a,o,h){function u(r,t){if(!o[r]){if(!a[r]){var e=\"function\"==typeof require&&require;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var i=new Error(\"Cannot find module '\"+r+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,function(t){var e=a[r][1][t];return u(e||t)},n,n.exports,s,a,o,h)}return o[r].exports}for(var l=\"function\"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){\"use strict\";var c=t(\"./utils\"),d=t(\"./support\"),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.encode=function(t){for(var e,r,i,n,s,a,o,h=[],u=0,l=t.length,f=l,d=\"string\"!==c.getTypeOf(t);u<t.length;)f=l-u,i=d?(e=t[u++],r=u<l?t[u++]:0,u<l?t[u++]:0):(e=t.charCodeAt(u++),r=u<l?t.charCodeAt(u++):0,u<l?t.charCodeAt(u++):0),n=e>>2,s=(3&e)<<4|r>>4,a=1<f?(15&r)<<2|i>>6:64,o=2<f?63&i:64,h.push(p.charAt(n)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join(\"\")},r.decode=function(t){var e,r,i,n,s,a,o=0,h=0,u=\"data:\";if(t.substr(0,u.length)===u)throw new Error(\"Invalid base64 input, it looks like a data url.\");var l,f=3*(t=t.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&f--,t.charAt(t.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(l=d.uint8array?new Uint8Array(0|f):new Array(0|f);o<t.length;)e=p.indexOf(t.charAt(o++))<<2|(n=p.indexOf(t.charAt(o++)))>>4,r=(15&n)<<4|(s=p.indexOf(t.charAt(o++)))>>2,i=(3&s)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=e,64!==s&&(l[h++]=r),64!==a&&(l[h++]=i);return l}},{\"./support\":30,\"./utils\":32}],2:[function(t,e,r){\"use strict\";var i=t(\"./external\"),n=t(\"./stream/DataWorker\"),s=t(\"./stream/DataLengthProbe\"),a=t(\"./stream/Crc32Probe\");s=t(\"./stream/DataLengthProbe\");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),e=this;return t.on(\"end\",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s(\"uncompressedSize\")).pipe(e.compressWorker(r)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",e)},e.exports=o},{\"./external\":6,\"./stream/Crc32Probe\":25,\"./stream/DataLengthProbe\":26,\"./stream/DataWorker\":27}],3:[function(t,e,r){\"use strict\";var i=t(\"./stream/GenericWorker\");r.STORE={magic:\"\\0\\0\",compressWorker:function(t){return new i(\"STORE compression\")},uncompressWorker:function(){return new i(\"STORE decompression\")}},r.DEFLATE=t(\"./flate\")},{\"./flate\":7,\"./stream/GenericWorker\":28}],4:[function(t,e,r){\"use strict\";var i=t(\"./utils\");var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?\"string\"!==i.getTypeOf(t)?function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{\"./utils\":32}],5:[function(t,e,r){\"use strict\";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){\"use strict\";var i=null;i=\"undefined\"!=typeof Promise?Promise:t(\"lie\"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,n=t(\"pako\"),s=t(\"./utils\"),a=t(\"./stream/GenericWorker\"),o=i?\"uint8array\":\"array\";function h(t,e){a.call(this,\"FlateWorker/\"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic=\"\\b\\0\",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(t){return new h(\"Deflate\",t)},r.uncompressWorker=function(){return new h(\"Inflate\",{})}},{\"./stream/GenericWorker\":28,\"./utils\":32,pako:38}],8:[function(t,e,r){\"use strict\";function A(t,e){var r,i=\"\";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,r,i,n,s){var a,o,h=t.file,u=t.compression,l=s!==O.utf8encode,f=I.transformTo(\"string\",s(h.name)),d=I.transformTo(\"string\",O.utf8encode(h.name)),c=h.comment,p=I.transformTo(\"string\",s(c)),m=I.transformTo(\"string\",O.utf8encode(c)),_=d.length!==h.name.length,g=m.length!==c.length,b=\"\",v=\"\",y=\"\",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var S=0;e&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),\"UNIX\"===n?(C=798,z|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(t){return 63&(t||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+d,b+=\"up\"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+=\"uc\"+A(y.length,2)+y);var E=\"\";return E+=\"\\n\\0\",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+\"\\0\\0\\0\\0\"+A(z,4)+A(i,4)+f+b+p}}var I=t(\"../utils\"),n=t(\"../stream/GenericWorker\"),O=t(\"../utf8\"),B=t(\"../crc32\"),R=t(\"../signature\");function s(t,e,r,i){n.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,n),s.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},s.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return R.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,n){var s=I.transformTo(\"string\",n(i));return R.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+A(t,2)+A(t,2)+A(e,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on(\"error\",function(t){e.error(t)}),this},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},s.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=s},{\"../crc32\":4,\"../signature\":23,\"../stream/GenericWorker\":28,\"../utf8\":31,\"../utils\":32}],9:[function(t,e,r){\"use strict\";var u=t(\"../compressions\"),i=t(\"./ZipFileWorker\");r.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach(function(t,e){h++;var r=function(t,e){var r=t||e,i=u[r];if(!i)throw new Error(r+\" is not a valid compression method !\");return i}(e.options.compression,a.compression),i=e.options.compressionOptions||a.compressionOptions||{},n=e.dir,s=e.date;e._compressWorker(r,i).withStreamInfo(\"file\",{name:t,dir:n,date:s,comment:e.comment||\"\",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(t){o.error(t)}return o}},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(t,e,r){\"use strict\";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files={},this.comment=null,this.root=\"\",this.clone=function(){var t=new i;for(var e in this)\"function\"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t(\"./object\")).loadAsync=t(\"./load\"),i.support=t(\"./support\"),i.defaults=t(\"./defaults\"),i.version=\"3.5.0\",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t(\"./external\"),e.exports=i},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":15,\"./support\":30}],11:[function(t,e,r){\"use strict\";var i=t(\"./utils\"),n=t(\"./external\"),o=t(\"./utf8\"),h=(i=t(\"./utils\"),t(\"./zipEntries\")),s=t(\"./stream/Crc32Probe\"),u=t(\"./nodejsUtils\");function l(i){return new n.Promise(function(t,e){var r=i.decompressed.getContentWorker().pipe(new s);r.on(\"error\",function(t){e(t)}).on(\"end\",function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error(\"Corrupted zip : CRC32 mismatch\")):t()}).resume()})}e.exports=function(t,s){var a=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?n.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):i.prepareContent(\"the loaded zip file\",t,!0,s.optimizedBinaryString,s.base64).then(function(t){var e=new h(s);return e.load(t),e}).then(function(t){var e=[n.Promise.resolve(t)],r=t.files;if(s.checkCRC32)for(var i=0;i<r.length;i++)e.push(l(r[i]));return n.Promise.all(e)}).then(function(t){for(var e=t.shift(),r=e.files,i=0;i<r.length;i++){var n=r[i];a.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:s.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a})}},{\"./external\":6,\"./nodejsUtils\":14,\"./stream/Crc32Probe\":25,\"./utf8\":31,\"./utils\":32,\"./zipEntries\":33}],12:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../stream/GenericWorker\");function s(t,e){n.call(this,\"Nodejs stream input adapter for \"+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on(\"data\",function(t){e.push({data:t,meta:{percent:0}})}).on(\"error\",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on(\"end\",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{\"../stream/GenericWorker\":28,\"../utils\":32}],13:[function(t,e,r){\"use strict\";var n=t(\"readable-stream\").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on(\"data\",function(t,e){i.push(t)||i._helper.pause(),r&&r(e)}).on(\"error\",function(t){i.emit(\"error\",t)}).on(\"end\",function(){i.push(null)})}t(\"../utils\").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{\"../utils\":32,\"readable-stream\":16}],14:[function(t,e,r){\"use strict\";e.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if(\"number\"==typeof t)throw new Error('The \"data\" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&\"function\"==typeof t.on&&\"function\"==typeof t.pause&&\"function\"==typeof t.resume}}},{}],15:[function(t,e,r){\"use strict\";function s(t,e,r){var i,n=u.getTypeOf(e),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),\"string\"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=_(t))&&b.call(this,i,!0);var a=\"string\"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(e instanceof d&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e=\"\",s.compression=\"STORE\",n=\"string\");var o=null;o=e instanceof d||e instanceof l?e:p.isNode&&p.isStream(e)?new m(t,e):u.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var h=new c(t,o,s);this.files[t]=h}var n=t(\"./utf8\"),u=t(\"./utils\"),l=t(\"./stream/GenericWorker\"),a=t(\"./stream/StreamHelper\"),f=t(\"./defaults\"),d=t(\"./compressedObject\"),c=t(\"./zipObject\"),o=t(\"./generate\"),p=t(\"./nodejsUtils\"),m=t(\"./nodejs/NodejsStreamInputAdapter\"),_=function(t){\"/\"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf(\"/\");return 0<e?t.substring(0,e):\"\"},g=function(t){return\"/\"!==t.slice(-1)&&(t+=\"/\"),t},b=function(t,e){return e=void 0!==e?e:f.createFolders,t=g(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function h(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(r){var i=[];return this.forEach(function(t,e){r(t,e)&&i.push(e)}),i},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,s.call(this,t,e,r),this;if(h(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(t,e){return e.dir&&r.test(t)});var t=this.root+r,e=b.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(r){r=this.root+r;var t=this.files[r];if(t||(\"/\"!==r.slice(-1)&&(r+=\"/\"),t=this.files[r]),t&&!t.dir)delete this.files[r];else for(var e=this.filter(function(t,e){return e.name.slice(0,r.length)===r}),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(t){var e,r={};try{if((r=u.extend(t||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),\"binarystring\"===r.type&&(r.type=\"string\"),!r.type)throw new Error(\"No output type specified.\");u.checkSupport(r.type),\"darwin\"!==r.platform&&\"freebsd\"!==r.platform&&\"linux\"!==r.platform&&\"sunos\"!==r.platform||(r.platform=\"UNIX\"),\"win32\"===r.platform&&(r.platform=\"DOS\");var i=r.comment||this.comment||\"\";e=o.generateWorker(this,r,i)}catch(t){(e=new l(\"error\")).error(t)}return new a(e,r.type||\"string\",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type=\"nodebuffer\"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=i},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":12,\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31,\"./utils\":32,\"./zipObject\":35}],16:[function(t,e,r){e.exports=t(\"stream\")},{stream:void 0}],17:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],18:[function(t,e,r){\"use strict\";var i=t(\"../utils\");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+t+\"). Corrupted zip ?\")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo(\"string\",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{\"../utils\":32}],19:[function(t,e,r){\"use strict\";var i=t(\"./Uint8ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./Uint8ArrayReader\":21}],20:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],21:[function(t,e,r){\"use strict\";var i=t(\"./ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./ArrayReader\":17}],22:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../support\"),s=t(\"./ArrayReader\"),a=t(\"./StringReader\"),o=t(\"./NodeBufferReader\"),h=t(\"./Uint8ArrayReader\");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),\"string\"!==e||n.uint8array?\"nodebuffer\"===e?new o(t):n.uint8array?new h(i.transformTo(\"uint8array\",t)):new s(i.transformTo(\"array\",t)):new a(t)}},{\"../support\":30,\"../utils\":32,\"./ArrayReader\":17,\"./NodeBufferReader\":19,\"./StringReader\":20,\"./Uint8ArrayReader\":21}],23:[function(t,e,r){\"use strict\";r.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",r.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",r.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",r.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",r.DATA_DESCRIPTOR=\"PK\u0007\\b\"},{}],24:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../utils\");function s(t){i.call(this,\"ConvertWorker to \"+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],25:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../crc32\");function s(){i.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}t(\"../utils\").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{\"../crc32\":4,\"../utils\":32,\"./GenericWorker\":28}],26:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataLengthProbe for \"+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],27:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataWorker\");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":t=this.data.substring(this.index,e);break;case\"uint8array\":t=this.data.subarray(this.index,e);break;case\"array\":case\"nodebuffer\":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],28:[function(t,e,r){\"use strict\";function i(t){this.name=t||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit(\"data\",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit(\"error\",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit(\"error\",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.end()}),t.on(\"error\",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+t:t}},e.exports=i},{}],29:[function(t,e,r){\"use strict\";var h=t(\"../utils\"),n=t(\"./ConvertWorker\"),s=t(\"./GenericWorker\"),u=t(\"../base64\"),i=t(\"../support\"),a=t(\"../external\"),o=null;if(i.nodestream)try{o=t(\"../nodejs/NodejsStreamOutputAdapter\")}catch(t){}function l(t,o){return new a.Promise(function(e,r){var i=[],n=t._internalType,s=t._outputType,a=t._mimeType;t.on(\"data\",function(t,e){i.push(t),o&&o(e)}).on(\"error\",function(t){i=[],r(t)}).on(\"end\",function(){try{var t=function(t,e,r){switch(t){case\"blob\":return h.newBlob(h.transformTo(\"arraybuffer\",e),r);case\"base64\":return u.encode(e);default:return h.transformTo(t,e)}}(s,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case\"string\":return e.join(\"\");case\"array\":return Array.prototype.concat.apply([],e);case\"uint8array\":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case\"nodebuffer\":return Buffer.concat(e);default:throw new Error(\"concat : unsupported type '\"+t+\"'\")}}(n,i),a);e(t)}catch(t){r(t)}i=[]}).resume()})}function f(t,e,r){var i=e;switch(e){case\"blob\":case\"arraybuffer\":i=\"uint8array\";break;case\"base64\":i=\"string\"}try{this._internalType=i,this._outputType=e,this._mimeType=r,h.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s(\"error\"),this._worker.error(t)}}f.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var r=this;return\"data\"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){h.delay(e,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new o(this,{objectMode:\"nodebuffer\"!==this._outputType},t)}},e.exports=f},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":13,\"../support\":30,\"../utils\":32,\"./ConvertWorker\":24,\"./GenericWorker\":28}],30:[function(t,e,r){\"use strict\";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,r.nodebuffer=\"undefined\"!=typeof Buffer,r.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:\"application/zip\"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob(\"application/zip\").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t(\"readable-stream\").Readable}catch(t){r.nodestream=!1}},{\"readable-stream\":16}],31:[function(t,e,s){\"use strict\";for(var o=t(\"./utils\"),h=t(\"./support\"),r=t(\"./nodejsUtils\"),i=t(\"./stream/GenericWorker\"),u=new Array(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;u[254]=u[254]=1;function a(){i.call(this,\"utf-8 decode\"),this.leftOver=null}function l(){i.call(this,\"utf-8 encode\")}s.utf8encode=function(t){return h.nodebuffer?r.newBufferFrom(t,\"utf-8\"):function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=h.uint8array?new Uint8Array(o):new Array(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},s.utf8decode=function(t){return h.nodebuffer?o.transformTo(\"nodebuffer\",t).toString(\"utf-8\"):function(t){var e,r,i,n,s=t.length,a=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)a[r++]=i;else if(4<(n=u[i]))a[r++]=65533,e+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&e<s;)i=i<<6|63&t[e++],n--;1<n?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(t=o.transformTo(h.uint8array?\"uint8array\":\"array\",t))},o.inherits(a,i),a.prototype.processChunk=function(t){var e=o.transformTo(h.uint8array?\"uint8array\":\"array\",t.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}(e),n=e;i!==e.length&&(h.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,i),l.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=l},{\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./support\":30,\"./utils\":32}],32:[function(t,e,a){\"use strict\";var o=t(\"./support\"),h=t(\"./base64\"),r=t(\"./nodejsUtils\"),i=t(\"set-immediate-shim\"),u=t(\"./external\");function n(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}a.newBlob=function(e,r){a.checkSupport(\"blob\");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error(\"Bug : can't construct the Blob.\")}}};var s={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)\"array\"===e||\"nodebuffer\"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join(\"\")},stringifyByChar:function(t){for(var e=\"\",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=a.getTypeOf(t),i=!0;if(\"uint8array\"===r?i=s.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}a.applyFromCharCode=f;var c={};c.string={string:n,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,r.allocBuffer(t.length))}},c.array={string:f,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:n},a.transformTo=function(t,e){if(e=e||\"\",!t)return e;a.checkSupport(t);var r=a.getTypeOf(e);return c[r][t](e)},a.getTypeOf=function(t){return\"string\"==typeof t?\"string\":\"[object Array]\"===Object.prototype.toString.call(t)?\"array\":o.nodebuffer&&r.isBuffer(t)?\"nodebuffer\":o.uint8array&&t instanceof Uint8Array?\"uint8array\":o.arraybuffer&&t instanceof ArrayBuffer?\"arraybuffer\":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+\" is not supported by this platform\")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,r,i=\"\";for(r=0;r<(t||\"\").length;r++)i+=\"\\\\x\"+((e=t.charCodeAt(r))<16?\"0\":\"\")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,r){i(function(){t.apply(r||null,e||[])})},a.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},a.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},a.prepareContent=function(r,t,i,n,s){return u.Promise.resolve(t).then(function(i){return o.blob&&(i instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(i)))&&\"undefined\"!=typeof FileReader?new u.Promise(function(e,r){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){r(t.target.error)},t.readAsArrayBuffer(i)}):i}).then(function(t){var e=a.getTypeOf(t);return e?(\"arraybuffer\"===e?t=a.transformTo(\"uint8array\",t):\"string\"===e&&(s?t=h.decode(t):i&&!0!==n&&(t=function(t){return l(t,o.uint8array?new Uint8Array(t.length):new Array(t.length))}(t))),t):u.Promise.reject(new Error(\"Can't read the data of '\"+r+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":14,\"./support\":30,\"set-immediate-shim\":54}],33:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),n=t(\"./utils\"),s=t(\"./signature\"),a=t(\"./zipEntry\"),o=(t(\"./utf8\"),t(\"./support\"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+n.pretty(e)+\", expected \"+n.pretty(t)+\")\")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?\"uint8array\":\"array\",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(i)+\" bytes.\")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{\"./reader/readerFor\":22,\"./signature\":23,\"./support\":30,\"./utf8\":31,\"./utils\":32,\"./zipEntry\":34}],34:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),s=t(\"./utils\"),n=t(\"./compressedObject\"),a=t(\"./crc32\"),o=t(\"./utf8\"),h=t(\"./compressions\"),u=t(\"./support\");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+s.pretty(this.compressionMethod)+\" unknown (inner file : \"+s.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(n)},handleUTF8:function(){var t=u.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":22,\"./support\":30,\"./utf8\":31,\"./utils\":32}],35:[function(t,e,r){\"use strict\";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=t(\"./stream/StreamHelper\"),n=t(\"./stream/DataWorker\"),a=t(\"./utf8\"),o=t(\"./compressedObject\"),h=t(\"./stream/GenericWorker\");i.prototype={internalStream:function(t){var e=null,r=\"string\";try{if(!t)throw new Error(\"No output type specified.\");var i=\"string\"===(r=t.toLowerCase())||\"text\"===r;\"binarystring\"!==r&&\"text\"!==r||(r=\"string\"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h(\"error\")).error(t)}return new s(e,r,\"\")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||\"nodebuffer\").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var u=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],l=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},f=0;f<u.length;f++)i.prototype[u[f]]=l;e.exports=i},{\"./compressedObject\":2,\"./stream/DataWorker\":27,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31}],36:[function(t,l,e){(function(e){\"use strict\";var r,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var n=0,s=new t(u),a=e.document.createTextNode(\"\");s.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)r=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var t=e.document.createElement(\"script\");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var o=new e.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var t,e;i=!0;for(var r=h.length;r;){for(e=h,h=[],t=-1;++t<r;)e[t]();r=h.length}i=!1}l.exports=function(t){1!==h.push(t)||i||r()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],37:[function(t,e,r){\"use strict\";var n=t(\"immediate\");function u(){}var l={},s=[\"REJECTED\"],a=[\"FULFILLED\"],i=[\"PENDING\"];function o(t){if(\"function\"!=typeof t)throw new TypeError(\"resolver must be a function\");this.state=i,this.queue=[],this.outcome=void 0,t!==u&&c(this,t)}function h(t,e,r){this.promise=t,\"function\"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,i){n(function(){var t;try{t=r(i)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError(\"Cannot resolve promise with itself\")):l.resolve(e,t)})}function d(t){var e=t&&t.then;if(t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof e)return function(){e.apply(t,arguments)}}function c(e,t){var r=!1;function i(t){r||(r=!0,l.reject(e,t))}function n(t){r||(r=!0,l.resolve(e,t))}var s=p(function(){t(n,i)});\"error\"===s.status&&i(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status=\"success\"}catch(t){r.status=\"error\",r.value=t}return r}(e.exports=o).prototype.finally=function(e){if(\"function\"!=typeof e)return this;var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if(\"function\"!=typeof t&&this.state===a||\"function\"!=typeof e&&this.state===s)return this;var r=new this.constructor(u);this.state!==i?f(r,this.state===a?t:e,this.outcome):this.queue.push(new h(r,t,e));return r},h.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){l.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=p(d,e);if(\"error\"===r.status)return l.reject(t,r.value);var i=r.value;if(i)c(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},l.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},o.resolve=function(t){if(t instanceof this)return t;return l.resolve(new this(u),t)},o.reject=function(t){var e=new this(u);return l.reject(e,t)},o.all=function(t){var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var i=t.length,n=!1;if(!i)return this.resolve([]);var s=new Array(i),a=0,e=-1,o=new this(u);for(;++e<i;)h(t[e],e);return o;function h(t,e){r.resolve(t).then(function(t){s[e]=t,++a!==i||n||(n=!0,l.resolve(o,s))},function(t){n||(n=!0,l.reject(o,t))})}},o.race=function(t){var e=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var r=t.length,i=!1;if(!r)return this.resolve([]);var n=-1,s=new this(u);for(;++n<r;)a=t[n],e.resolve(a).then(function(t){i||(i=!0,l.resolve(s,t))},function(t){i||(i=!0,l.reject(s,t))});var a;return s}},{immediate:36}],38:[function(t,e,r){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(t,e,r){\"use strict\";var a=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),h=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),s=t(\"./zlib/zstream\"),u=Object.prototype.toString,l=0,f=-1,d=0,c=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:f,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(n[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?h.string2buf(e.dictionary):\"[object ArrayBuffer]\"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=a.deflateSetDictionary(this.strm,i))!==l)throw new Error(n[r]);this._dict_set=!0}}function i(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||n[r.err];return r.result}p.prototype.push=function(t,e){var r,i,n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=h.string2buf(t):\"[object ArrayBuffer]\"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),1!==(r=a.deflate(n,i))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==r);return 4===i?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==i||(this.onEnd(l),!(n.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=p,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(t,e,r){\"use strict\";var d=t(\"./zlib/inflate\"),c=t(\"./utils/common\"),p=t(\"./utils/strings\"),m=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),s=t(\"./zlib/gzheader\"),_=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,e.windowBits);if(r!==m.Z_OK)throw new Error(i[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(t,e){var r=new a(e);if(r.push(t,!0),r.err)throw r.msg||i[r.err];return r.result}a.prototype.push=function(t,e){var r,i,n,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?m.Z_FINISH:m.Z_NO_FLUSH,\"string\"==typeof t?h.input=p.binstring2buf(t):\"[object ArrayBuffer]\"===_.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new c.Buf8(u),h.next_out=0,h.avail_out=u),(r=d.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o=\"string\"==typeof l?p.string2buf(l):\"[object ArrayBuffer]\"===_.call(l)?new Uint8Array(l):l,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||i!==m.Z_FINISH&&i!==m.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=p.utf8border(h.output,h.next_out),s=h.next_out-n,a=p.buf2string(h.output,n),h.next_out=s,h.avail_out=u-s,s&&c.arraySet(h.output,h.output,n,s,0),this.onData(a)):this.onData(c.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(i=m.Z_FINISH),i===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):i!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===m.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},r.ungzip=o},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(\"object\"!=typeof r)throw new TypeError(r+\"must be non-object\");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){\"use strict\";var h=t(\"./common\"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var u=new h.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var r=\"\",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}u[254]=u[254]=1,r.string2buf=function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h.Buf8(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new h.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,a=e||t.length,o=new Array(2*a);for(r=i=0;r<a;)if((n=t[r++])<128)o[i++]=n;else if(4<(s=u[n]))o[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<a;)n=n<<6|63&t[r++],s--;1<s?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return l(o,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}},{\"./common\":41}],43:[function(t,e,r){\"use strict\";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){\"use strict\";var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){\"use strict\";var h,d=t(\"../utils/common\"),u=t(\"./trees\"),c=t(\"./adler32\"),p=t(\"./crc32\"),i=t(\"./messages\"),l=0,f=4,m=0,_=-2,g=-1,b=4,n=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(t,e){return t.msg=i[e],e}function T(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function F(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(d.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function N(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function P(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,u=t.window,l=t.w_mask,f=t.prev,d=t.strstart+S,c=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===c&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(i=S-(d-s),s=d-S,a<i){if(t.match_start=e,o<=(a=i))break;c=u[s+a-1],p=u[s+a]}}}while((e=f[e&l])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function j(t){var e,r,i,n,s,a,o,h,u,l,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(d.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--r;);for(e=r=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--r;);n+=f}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,h=t.strstart+t.lookahead,u=n,l=void 0,l=a.avail_in,u<l&&(l=u),r=0===l?0:(a.avail_in-=l,d.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=c(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=x)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+x-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function Z(t,e){for(var r,i;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r)),t.match_length>=x)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function W(t,e){for(var r,i,n;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*w),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(k+1),this.heap=new d.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:E,t.adler=2===e.wrap?0:1,e.last_flush=l,u._tr_init(e),m):R(t,_)}function K(t){var e=G(t);return e===m&&function(t){t.window_size=2*t.w_size,D(t.head),t.max_lazy_match=h[t.level].max_lazy,t.good_match=h[t.level].good_length,t.nice_match=h[t.level].nice_length,t.max_chain_length=h[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,r,i,n,s){if(!t)return _;var a=1;if(e===g&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),n<1||y<n||r!==v||i<8||15<i||e<0||9<e||s<0||b<s)return R(t,_);8===i&&(i=9);var o=new H;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,K(t)}h=[new M(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&e===l)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-z&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?_:(t.state.gzhead=e,m):_},r.deflate=function(t,e){var r,i,n,s;if(!t||!t.state||5<e||e<0)return t?R(t,_):_;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return R(t,0===t.avail_out?-5:_);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===C)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=p(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,3),i.status=E);else{var a=v+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=E,P(i,a),0!==i.strstart&&(P(i,t.adler>>>16),P(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,m}else if(0===t.avail_in&&T(e)<=T(r)&&e!==f)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==l&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===l)return A;break}if(t.match_length=0,r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):3===i.strategy?function(t,e){for(var r,i,n,s,a=t.window;;){if(t.lookahead<=S){if(j(t),t.lookahead<=S&&e===l)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=a[n=t.strstart-1])===a[++n]&&i===a[++n]&&i===a[++n]){s=t.strstart+S;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=S-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(r=u._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):h[i.level].func(i,e);if(o!==O&&o!==B||(i.status=666),o===A||o===O)return 0===t.avail_out&&(i.last_flush=-1),m;if(o===I&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,m}return e!==f?m:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(P(i,t.adler>>>16),P(i,65535&t.adler)),F(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?m:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?R(t,_):(t.state=null,e===E?R(t,-3):m):_},r.deflateSetDictionary=function(t,e){var r,i,n,s,a,o,h,u,l=e.length;if(!t||!t.state)return _;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(t.adler=c(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new d.Buf8(r.w_size),d.arraySet(u,e,l-r.w_size,r.w_size,0),e=u,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,j(r);r.lookahead>=x;){for(i=r.strstart,n=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+x-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,m},r.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(t,e,r){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){\"use strict\";e.exports=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C;r=t.state,i=t.next_in,z=t.input,n=i+(t.avail_in-5),s=t.next_out,C=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=m[c&g];e:for(;;){if(c>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(c&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg=\"invalid literal/length code\",r.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(c+=z[i++]<<p,p+=8),w+=c&(1<<y)-1,c>>>=y,p-=y),p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=_[c&b];r:for(;;){if(c>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(c&(1<<y)-1)];continue r}t.msg=\"invalid distance code\",r.mode=30;break t}if(k=65535&v,p<(y&=15)&&(c+=z[i++]<<p,(p+=8)<y&&(c+=z[i++]<<p,p+=8)),h<(k+=c&(1<<y)-1)){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(c>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(S=d,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=d[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=d[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(i<n&&s<o);i-=w=p>>3,c&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(t,e,r){\"use strict\";var I=t(\"../utils/common\"),O=t(\"./adler32\"),B=t(\"./crc32\"),R=t(\"./inffast\"),T=t(\"./inftrees\"),D=1,F=2,N=0,U=-2,P=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(i),e.distcode=e.distdyn=new I.Buf32(n),e.sane=1,e.back=-1,N):U}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):U}function h(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?U:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):U}function u(t,e){var r,i;return t?(i=new s,(t.state=i).window=null,(r=h(t,e))!==N&&(t.state=null),r):U}var l,f,d=!0;function j(t){if(d){var e;for(l=new I.Buf32(512),f=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(T(D,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;T(F,t.lens,0,32,f,0,t.work,{bits:5}),d=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function Z(t,e,r,i){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),i>=s.wsize?(I.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(n=s.wsize-s.wnext)&&(n=i),I.arraySet(s.window,e,r-i,n,s.wnext),(i-=n)?(I.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,15)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return U;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,f=o,d=h,x=N;t:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg=\"incorrect header check\",r.mode=30;break}if(8!=(15&u)){t.msg=\"unknown compression method\",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg=\"invalid window size\",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){t.msg=\"unknown compression method\",r.mode=30;break}if(57344&r.flags){t.msg=\"unknown header flags set\",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,i,s,c,k)),512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg=\"header crc mismatch\",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}t.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==e)break;u>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg=\"invalid block type\",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg=\"invalid stored block lengths\",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),h<c&&(c=h),0===c)break t;I.arraySet(n,i,s,c,a),o-=c,s+=c,h-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg=\"too many length or distance symbols\",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid code lengths set\",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){t.msg=\"invalid bit length repeat\",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg=\"invalid bit length repeat\",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg=\"invalid code -- missing end-of-block\",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid literal/lengths set\",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){t.msg=\"invalid distances set\",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,R(t,d),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){t.msg=\"invalid literal/length code\",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){t.msg=\"invalid distance code\",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg=\"invalid distance too far back\",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=d-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=n,p=a-r.offset,c=r.length;for(h<c&&(c=h),h-=c,r.length-=c;n[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=i[s++]<<l,l+=8}if(d-=h,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?B(r.check,n,d,a-d):O(r.check,n,d,a-d)),d=h,(r.flags?u:L(u))!==r.check){t.msg=\"incorrect data check\",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg=\"incorrect length check\",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return U}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Z(t,t.output,t.next_out,d-t.avail_out)?(r.mode=31,-4):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?B(r.check,n,d,t.next_out-d):O(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===d||4===e)&&x===N&&(x=-5),x)},r.inflateEnd=function(t){if(!t||!t.state)return U;var e=t.state;return e.window&&(e.window=null),t.state=null,N},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?U:((r.head=e).done=!1,N):U},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,e,i,0)!==r.check?-3:Z(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(t,e,r){\"use strict\";var D=t(\"../utils/common\"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,i,n,s,a,o){var h,u,l,f,d,c,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<i;v++)O[e[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===t||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<i;v++)0!==e[r+v]&&(a[B[e[r+v]]++]=v);if(c=0===t?(A=R=a,19):1===t?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,d=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<c?(m=0,a[v]):a[v]>c?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;n[d+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=e[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),d+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===t&&852<C||2===t&&592<C)return 1;n[l=E&f]=k<<24|x<<16|d-s|0}}return 0!==E&&(n[d+E]=b-S<<24|64<<16|0),o.bits=k,0}},{\"../utils/common\":41}],51:[function(t,e,r){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],52:[function(t,e,r){\"use strict\";var n=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,a=29,u=256,l=u+1+a,f=30,d=19,_=2*l+1,g=15,c=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));i(z);var C=new Array(2*f);i(C);var E=new Array(512);i(E);var A=new Array(256);i(A);var I=new Array(a);i(I);var O,B,R,T=new Array(f);function D(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?E[t]:E[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>c-r?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=r-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function L(t,e,r){P(t,r[2*e],r[2*e+1])}function j(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function Z(t,e,r){var i,n,s=new Array(g+1),a=0;for(i=1;i<=g;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function W(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?U(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function G(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&H(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!H(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function K(t,e,r){var i,n,s,a,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(s=A[n])+u+1,e),0!==(a=w[s])&&P(t,n-=I[s],a),L(t,s=N(--i),r),0!==(a=k[s])&&P(t,i-=T[s],a)),o<t.last_lit;);L(t,m,e)}function Y(t,e){var r,i,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)G(t,s,r);for(n=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,s[2*n]=s[2*r]+s[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,s[2*r+1]=s[2*i+1]=n,t.heap[1]=n++,G(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<_;r++)p<(s=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(s=p,m++),h[2*i+1]=s,u<i||(t.bl_count[s]++,a=0,c<=i&&(a=d[i-c]),o=h[2*i],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)u<(n=t.heap[--r])||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),i--)}}(t,e),Z(s,u,t.bl_count)}function X(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*b]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*y]++,s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function V(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<u)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(L(t,n,t.bl_tree),o--),L(t,b,t.bl_tree),P(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),P(t,o-3,3)):(L(t,y,t.bl_tree),P(t,o-11,7));s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}i(T);var q=!1;function J(t,e,r,i){P(t,(s<<1)+(i?1:0),3),function(t,e,r,i){M(t),i&&(U(t,r),U(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){q||(function(){var t,e,r,i,n,s=new Array(g+1);for(i=r=0;i<a-1;i++)for(I[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(A[r-1]=i,i=n=0;i<16;i++)for(T[i]=n,t=0;t<1<<k[i];t++)E[n++]=i;for(n>>=7;i<f;i++)for(T[i]=n<<7,t=0;t<1<<k[i]-7;t++)E[256+n++]=i;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)z[2*t+1]=8,t++,s[8]++;for(;t<=255;)z[2*t+1]=9,t++,s[9]++;for(;t<=279;)z[2*t+1]=7,t++,s[7]++;for(;t<=287;)z[2*t+1]=8,t++,s[8]++;for(Z(z,l+1,s),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=j(t,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,d,p)}(),q=!0),t.l_desc=new F(t.dyn_ltree,O),t.d_desc=new F(t.dyn_dtree,B),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},r._tr_stored_block=J,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?J(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),K(t,z,C)):(P(t,4+(i?1:0),3),function(t,e,r,i){var n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*S[n]+1],3);V(t,t.dyn_ltree,e-1),V(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&M(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(A[r]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),L(t,m,z),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{\"../utils/common\":41}],53:[function(t,e,r){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){\"use strict\";e.exports=\"function\"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)});","import Konva from 'konva';\r\nimport { initiate3DCanvas, render3D } from 'src/assets/js/generate3D.js';\r\nexport { width, height, setSites, setDisableEditMode, initializeData, calculateDistancesFromSitesToPoint,\r\n\tequidistantPointsPresent, generateSiteBoundaries, createPieces, clearBoard };\r\n\r\nlet apiURL = \"https://prometheuspuzzles.herokuapp.com/api/puzzles/createPuzzle\";\r\nlet distanceMetric = 'euclidean';\r\nlet token;\r\n\r\nlet contentDiv = null;\r\nlet aiContentDiv = null;\r\nlet canvas;\r\nlet canvasCoords;\r\nlet width =  500;\r\nlet height = 500;\r\nlet stage;\r\nlet layer;\r\nlet square;\r\nlet pointsArray = [];\r\nlet sites;\r\nlet siteBoundaries;\r\nlet pieces = [];\r\nlet precision = 0;\r\n\r\nlet colorPalettes = [];\r\nlet selectedPalette;\r\nlet paletteCounter = 0;\r\nlet radioButtons = [];\r\n\r\nlet hoverOverPoint = false;\r\nlet disableEditMode = false;\r\nlet deletePointButtonClicked = false;\r\nlet piecesJSONObject;\r\n\r\nlet editIcon, deleteIcon;\r\n\r\n///Make an array with desired colors - can be hex values or names\r\nlet defaultPalette = ['plum', 'tomato', 'orange', 'violet', 'gray', 'mediumseagreen', 'lightgray', 'slateblue', 'brown', 'aquamarine', 'antiquewhite', 'red', 'green'];\r\n///Add the array to the page using this function with the array as a first and the desired name as a second parameter\r\naddColorPalette(defaultPalette, \"Default\");\r\n\r\nlet shadesOfRedPalette = ['crimson', 'darkred', 'coral', 'firebrick', 'indianred', 'maroon', 'orangered', 'palevioletred', 'red', 'tomato', 'brown'];\r\naddColorPalette(shadesOfRedPalette, \"Shades Of Red\");\r\n\r\nlet shadesOfGreenPalette = ['teal', 'mediumspringgreen', 'limegreen', 'forestgreen', 'mediumseagreen', 'lawngreen', 'palegreen', 'greenyellow', 'aquamarine'];\r\naddColorPalette(shadesOfGreenPalette, \"Shades of Green\");\r\n\r\nlet shadesOfBluePalette = ['darkblue', 'deepskyblue', 'mediumblue', 'dodgerblue', 'midnightblue', 'royalblue', 'darkslateblue', 'cornflowerblue', 'skyblue', 'powderblue'];\r\naddColorPalette(shadesOfBluePalette, \"Shades of Blue\");\r\n\r\n///Add a color palette to the page and needed functionality\r\nfunction addColorPalette(arrayOfColors, paletteName)\r\n{\r\n\tcolorPalettes.push(arrayOfColors);\r\n}\r\n\r\n///Changes the displayed color palette used on the puzzle and re-renders it\r\nfunction changePuzzleColorPalette(colors)\r\n{\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlayer.removeChildren();\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = colors;\r\n\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\tpieces[i].attrs.stroke = colors[i % colors.length];\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\t\t\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t\tlayer.draw();\r\n\t}\r\n}\r\n\r\n///Randomizes the color palette used on the puzzle\r\nfunction randomizePuzzleColorPalette()\r\n{\r\n\tselectedPalette = [];\r\n\tif(pieces.length > 0)\r\n\t{\r\n\t\tlet rgbColor;\r\n\t\tlayer.removeChildren();\r\n\r\n\t\tfor(let i = 0; i < pieces.length; i++)\r\n\t\t{\r\n\t\t\trgbColor = getRandomRGB();\r\n\t\t\tselectedPalette.push(rgbColor);\r\n\t\t\trgbColor = getRandomRGB();\r\n\t\t\tselectedPalette.push(rgbColor);\r\n\t\t\tpieces[i].attrs.stroke = rgbColor;\r\n\t\t\tlayer.add(pieces[i]);\r\n\t\t}\r\n\r\n\t\tpiecesJSONObject = JSON.parse(piecesJSONObject);\r\n\t\tpiecesJSONObject.colors = selectedPalette;\r\n\t\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t\tlayer.draw();\r\n\t}\r\n}\r\n\r\n///Returns a random RGB value\r\nfunction getRandomRGB()\r\n{\r\n\tlet r = Math.floor(Math.random() * 256);\r\n\tlet g = Math.floor(Math.random() * 256);\r\n\tlet b = Math.floor(Math.random() * 256);\r\n\treturn \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n}\r\n\r\n///Initialize data and set functions for buttons\r\nfunction initializeData(appendedString)\r\n{\r\n\tif(appendedString == undefined)\r\n\t\tappendedString = '';\r\n\r\n\tsites = [];\r\n\tsiteBoundaries = [];\r\n\tpieces = [];\r\n\r\n\tdisableEditMode = false;\r\n\r\n\tselectedPalette = defaultPalette;\r\n\tcanvas = document.getElementById('container'+appendedString);\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'container'+appendedString,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\r\n\tstage.add(layer);\r\n\r\n\tcanvas.addEventListener('mousedown', function(event){\r\n\t\tif(!disableEditMode && !hoverOverPoint)\r\n\t\t{\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tlet x = event.clientX - canvasCoords.x;\r\n\t\t\tlet y = event.clientY - canvasCoords.y;\r\n\r\n\t\t\tlet point = createPoint(x, y);\r\n\r\n\t\t\tlayer.add(point);\r\n\t\t\tlayer.draw();\r\n\t\t\tconsole.log(\"X: \" + x + \" Y: \" + y);\r\n\t\t}\r\n\t});\r\n\r\n\tif(document.getElementById('generatePuzzleButton') != null)\r\n\t\tdocument.getElementById('generatePuzzleButton').addEventListener('mousedown', generatePuzzle);\r\n\r\n\tdocument.getElementById('euclideanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('euclidean');\r\n\t});\r\n\r\n\tdocument.getElementById('manhattanButton'+appendedString).addEventListener('mousedown', function(){\r\n\t\tsetDistanceMetric('manhattan');\r\n\t});\r\n\r\n\tdocument.getElementById('saveButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\tsavePuzzle(appendedString);\r\n\t});\r\n\r\n\tif(document.getElementById('deletePointButton') != null)\r\n\t{\r\n\t\teditIcon = document.getElementById('editPointButtonIcon');\r\n\t\tdeleteIcon = document.getElementById('deletePointButtonIcon');\r\n\t\tif(editIcon != null)\r\n\t\t\teditIcon.remove();\r\n\r\n\t\tdocument.getElementById('deletePointButton').addEventListener('mousedown', function() {\r\n\t\t\tdeletePointButtonClicked = !deletePointButtonClicked;\r\n\t\t\tif(deletePointButtonClicked)\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = true;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(editIcon);\r\n\t\t\t\tthis.innerHTML += 'Edit Mode';\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdisableEditMode = false;\r\n\t\t\t\tthis.innerHTML = '';\r\n\t\t\t\tthis.appendChild(deleteIcon);\r\n\t\t\t\tthis.innerHTML += 'Delete Mode';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdocument.getElementById('randomizeColorsButton'+appendedString).addEventListener('mousedown', randomizePuzzleColorPalette);\r\n\r\n\tlet palettes = document.getElementsByClassName('colorPalettes');\r\n\r\n\tfor(let paletteIndex = 0; paletteIndex < palettes.length; paletteIndex++)\r\n\t{\r\n\t\tpalettes[paletteIndex].addEventListener('mousedown', function(){\r\n\t\t\tselectedPalette = colorPalettes[this.getAttribute('paletteid')];\r\n\t\t\tchangePuzzleColorPalette(selectedPalette);\r\n\t\t});\r\n\t}\r\n\r\n\t// document.getElementById('saveAndSubmitButton').addEventListener('mousedown', function() {\r\n\t// \t// let puzzleImage = stage.toDataURL({ pixelRatio: 0.25 });\r\n\t// \t// document.getElementById('testingImg').src = puzzleImage;\r\n\t// \tsavePuzzle(true);\r\n\t// });\r\n\r\n\r\n\tif(document.getElementById('generate3DButton'+appendedString) != null)\r\n\t{\r\n\t\tinitiate3DCanvas(height, width);\r\n\t\tdocument.getElementById('generate3DButton'+appendedString).addEventListener('mousedown', function() {\r\n\t\t\trender3D(JSON.parse(piecesJSONObject), appendedString);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n///Create a post ajax request and send it to the API in order to save the user's created puzzle\r\nfunction savePuzzle(appendedString)\r\n{\r\n\ttoken = document.getElementById('tokenLabel').innerHTML;\r\n\r\n\tlet puzzleName = document.getElementById('puzzleNameInputBox'+appendedString).value;\r\n\tlet puzzleDescription = document.getElementById('puzzleDescriptionInputBox'+appendedString).value;\r\n\r\n\tlet puzzleImage = stage.toDataURL({ pixelRatio: 0.50 });\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tname: puzzleName,\r\n\t\tdescription: puzzleDescription,\r\n\t\tpuzzleObject: piecesJSONObject,\r\n\t\timage: puzzleImage,\r\n\t\tshared: false\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: apiURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t},\r\n\t\terror: function(data, status) {\r\n\t\t\tconsole.log(data);\r\n\t\t\tconsole.log(status);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n///Set the selected distance metric for the puzzle\r\nfunction setDistanceMetric(metric)\r\n{\r\n\tdistanceMetric = metric;\r\n}\r\n\r\n///Set disableEditMode to true to prevent user from clicking it any further\r\nfunction setDisableEditMode(bool)\r\n{\r\n\tdisableEditMode = bool;\r\n}\r\n\r\n///Set the sites array\r\nfunction setSites(tempSites)\r\n{\r\n\tsites = tempSites;\r\n}\r\n\r\n///Clear the board\r\nfunction clearBoard()\r\n{\r\n\tpiecesJSONObject = {\r\n\t\t'pieces' : [],\r\n\t\t'colors' : [],\r\n\t\t'depths' : []\r\n\t};\r\n\r\n\tpieces = [];\r\n\tlayer.destroyChildren();\r\n}\r\n\r\n///Create a visual representation of where the user clicks\r\nfunction createPoint(x, y)\r\n{\r\n\tlet point = new Konva.Ring({\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tinnerRadius: 3,\r\n        outerRadius: 15,\r\n\t\tstroke: 'black',\r\n\t\tfill: '#7C593A',\r\n\t\tstrokeWidth: 1,\r\n\t});\r\n\r\n\tpoint.draggable(true);\r\n\r\n\tpoint.on('mouseover', function (event){\r\n\t\tdocument.onmousemove = function(event) {\r\n\t\t\tcanvasCoords = canvas.getBoundingClientRect();\r\n\t\t\tpoint.x(event.clientX - canvasCoords.x);\r\n\t\t\tpoint.y(event.clientY - canvasCoords.y);\r\n\t\t};\r\n\r\n\t\thoverOverPoint = true;\r\n\t\tdocument.body.style.cursor = 'pointer';\r\n\t});\r\n\r\n\tpoint.on('mouseout', function(event) {\r\n\t\tdocument.onmousemove = null;\r\n\t\thoverOverPoint = false;\r\n\t\tdocument.body.style.cursor = 'default';\r\n\t});\r\n\r\n\tpoint.on('mousedown', function(event) {\r\n\t\t// console.log('clicked!');\r\n\t\tif(deletePointButtonClicked)\r\n\t\t{\r\n\t\t\tdocument.onmousemove = null;\r\n\t\t\thoverOverPoint = false;\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\tpoint.destroy();\r\n\t\t\tlayer.draw();\r\n\t\t}\r\n\t});\r\n\r\n\treturn point;\r\n}\r\n\r\n///Calls the necessary functions to generate puzzle's vertiecs as well as the visual representation\r\nfunction generatePuzzle()\r\n{\r\n\tpointsArray = layer.getChildren(function(node) {\r\n\t\treturn node.getClassName() === 'Ring';\r\n\t});\r\n\r\n\tsites = [];\r\n\tfor (let i = pointsArray.length - 1; i >= 0; i--) {\r\n\t\tsites.push({\r\n\t\t\tx: pointsArray[i].attrs.x,\r\n\t\t\ty: pointsArray[i].attrs.y,\r\n\t\t});\r\n\t}\r\n\r\n\tclearBoard();\r\n\r\n\t///This makes sure that the generate button will only generate once\r\n\tdisableEditMode = true;\r\n\r\n\tgenerateSiteBoundaries();\r\n\tcreatePieces();\r\n}\r\n\r\n///Creates the puzzle pieces from the siteBoundaries for each site(position selected by the user)\r\nfunction createPieces()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t{\r\n\t\tlet trimmedPoints = trimPoints(siteBoundaries[i]);\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: trimmedPoints,\r\n\t\t\tstroke: selectedPalette[i % selectedPalette.length],\r\n\t\t\tstrokeWidth: 1,\r\n\t\t\tdraggable: true,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t});\r\n\r\n\t\tpieces.push(piece);\r\n\t\tpiecesJSONObject.pieces.push(trimmedPoints);\r\n\t\tpiecesJSONObject.depths.push(Math.floor(Math.random() * 8) + 1);\r\n\t\tlayer.add(piece);\r\n\t}\r\n\r\n\tpiecesJSONObject.colors = selectedPalette;\r\n\tlayer.draw();\r\n\tpiecesJSONObject = JSON.stringify(piecesJSONObject);\r\n\t// console.log(piecesJSONObject);\r\n}\r\n\r\n///Shortens the array of vertices for each puzzle piece\r\nfunction trimPoints(pointArray)\r\n{\r\n\tlet trimmedPoints = [];\r\n\tlet lastPointCol = -1;\r\n\tlet firstPointCol = pointArray[0];\r\n\tlet currentRow = pointArray[1];\r\n\tlet crissCross = 1;\r\n\r\n\tfor(let index = 0; index < pointArray.length; index+=2)\r\n\t{\r\n\t\tif(currentRow != pointArray[index+1])\r\n\t\t{\r\n\t\t\tif(crissCross == 1)\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\tcrissCross = -1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttrimmedPoints.push(lastPointCol, currentRow);\r\n\t\t\t\ttrimmedPoints.push(firstPointCol, currentRow);\r\n\t\t\t\tcrissCross - 1;\r\n\t\t\t}\r\n\r\n\t\t\tfirstPointCol = pointArray[index];\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t\tcurrentRow = pointArray[index+1];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlastPointCol = pointArray[index];\r\n\t\t}\r\n\t}\r\n\r\n\treturn trimmedPoints;\r\n}\r\n\r\n///Generate the boundaries around the sites\r\nfunction generateSiteBoundaries()\r\n{\r\n\tfor(let i = 0; i < sites.length; i++)\r\n\t\tsiteBoundaries[i] = [];\r\n\r\n\tfor(let row = 0; row < height; row++)\r\n\t{\r\n\t\tfor(let col = 0; col < width; col++)\r\n\t\t{\r\n\t\t\tlet distances = calculateDistancesFromSitesToPoint(col, row, sites);\r\n\t\t\tlet equidistantPoints = equidistantPointsPresent(distances);\r\n\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(col);\r\n\t\t\tsiteBoundaries[equidistantPoints[0]].push(row);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n///Determines which site is closest to a pixel position\r\nfunction equidistantPointsPresent(distances)\r\n{\r\n\tlet returnArray = [];\r\n\tlet minimumDistance = Math.min(...distances);\r\n\r\n\t// if(distanceMetric === 'euclidean')\r\n\t\t// minimumDistance = minimumDistance + '';\r\n\r\n\tlet index = 0, counter = 0;\r\n\r\n\twhile(index != -1)\r\n\t{\r\n\t\tindex = distances.indexOf(minimumDistance);\r\n\t\tif(index != -1)\r\n\t\t{\r\n\t\t\treturnArray.push(index+counter);\r\n\t\t\tdistances.splice(index, 1);\r\n\t\t\tcounter++;\r\n\t\t}\r\n\t}\r\n\r\n\treturn returnArray;\r\n}\r\n\r\n///Calculates the distances from each site to pixel in position (xOfPoint, yOfPoint) and returns an array\r\nfunction calculateDistancesFromSitesToPoint(xOfPoint, yOfPoint, sitePoints)\r\n{\r\n\tlet result = [];\r\n\tfor(let i = 0; i < sitePoints.length; i++)\r\n\t\tresult.push(calculateDistance(xOfPoint, yOfPoint, sitePoints[i].x, sitePoints[i].y));\r\n\r\n\treturn result;\r\n}\r\n\r\n///Calculates the distance from point1 to point2 using the selected distance metrix\r\nfunction calculateDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tif(distanceMetric === 'euclidean')\r\n\t\treturn calculateEuclideanDistance(point1X, point1Y, point2X, point2Y);\r\n\telse if(distanceMetric === 'manhattan')\r\n\t\treturn calculateManhattanDistance(point1X, point1Y, point2X, point2Y);\r\n}\r\n\r\n///Calculates and returns the Euclidean distance\r\nfunction calculateEuclideanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet result = Math.pow( Math.pow( point1X - point2X, 2 ) + Math.pow( point1Y - point2Y, 2 ), 0.5 );\r\n\treturn result;\r\n}\r\n\r\n///Calculates and returns the Manhattan distance\r\nfunction calculateManhattanDistance(point1X, point1Y, point2X, point2Y)\r\n{\r\n\tlet resultX = point1X - point2X;\r\n\tif(resultX < 0)\r\n\t\tresultX *= -1;\r\n\tlet resultY = point1Y - point2Y;\r\n\tif(resultY < 0)\r\n\t\tresultY *= -1;\r\n\tlet result = resultX + resultY;\r\n\treturn result;\r\n}\r\n","import Konva from 'konva';\r\nimport JSZip from 'src/assets/js/jszip.min.js';\r\nimport saveAs from 'src/assets/js/FileSaver.js';\r\nexport { initializeDataSolve };\r\n\r\nlet getPuzzleDataURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/getPuzzleByID/';\r\nlet saveSolveAttemptURL = 'https://prometheuspuzzles.herokuapp.com/api/puzzles/newSolveAttempt';\r\nlet piecesJSONObject, pieces, colors, base64Image;\r\nlet correctPositions, pieceInCorrectPosition, correctOrientation;\r\nlet defaultPalette = ['Plum', 'Tomato', 'Orange', 'Violet', 'Gray', 'MediumSeaGreen', 'LightGray', 'SlateBlue', 'Brown', 'Aquamarine', 'AntiqueWhite', 'Red', 'Green'];\r\nlet canvas, stage, layer, outline, board, puzzleID;\r\nlet width = 1000, height = 500;\r\nlet startTime, puzzleSolved;\r\nlet solvedDiv;\r\n// window.onload = function(){\r\n// \tinitializeDataSolve();\r\n// }\r\n\r\nfunction initializeDataSolve()\r\n{\r\n\tsolvedDiv = document.getElementById('solvedDiv');\r\n\tsolvedDiv.remove();\r\n\tcorrectPositions = [];\r\n\tpieceInCorrectPosition = [];\r\n\tcorrectOrientation = [];\r\n\tpuzzleID = localStorage.getItem('solvingPuzzleID');\r\n\tpuzzleSolved = false;\r\n\tgetPuzzleData(puzzleID);\r\n\r\n\tcanvas = document.getElementById('solverContainer');\r\n\tstage = new Konva.Stage({\r\n\t\tcontainer: 'solverContainer',\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t});\r\n\r\n\tboard = new Konva.Rect({\r\n\t\tx: (width/4),\r\n\t\ty: 0,\r\n\t\twidth: width/2,\r\n\t\theight: height,\r\n\t\tstroke: 'black',\r\n\t\tfill: 'white',\r\n\t\tstrokeWidth: 2\r\n\t});\r\n\r\n\toutline = new Konva.Rect({\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tstroke: 'grey',\r\n\t\tfill: '#fff',\r\n\t\tstrokeWidth: 1\r\n\t});\r\n\r\n\tlayer = new Konva.Layer();\r\n\tstage.add(layer);\r\n\tlayer.add(outline);\r\n\r\n\tdocument.getElementById('closeSolverDialogButton').addEventListener('mousedown', function(){\r\n\t\tif(!puzzleSolved)\r\n\t\t\tsaveSolveAttempt(false, puzzleID, startTime);\r\n\t});\r\n}\r\n\r\nfunction saveSolveAttempt(solved, solvePuzzleID, solveStartTime)\r\n{\r\n\tlet token = document.getElementById('tokenLabel').innerHTML;\r\n\tlet timeTaken = performance.now();\r\n\ttimeTaken = (timeTaken - solveStartTime).toFixed(0);\r\n\ttimeTaken = Math.floor(timeTaken / 1000);\r\n\r\n\tlet jsonData = {\r\n\t\ttoken: token,\r\n\t\tpuzzleID: solvePuzzleID,\r\n\t\tattemptDuration: timeTaken,\r\n\t\tsolved: solved\r\n\t};\r\n\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: saveSolveAttemptURL,\r\n\t\theaders: {\r\n\t\t\t'Access-Control-Allow-Origin' : '*'\r\n\t\t},\r\n\t\tcontentType: 'application/json',\r\n\t\tdata: JSON.stringify(jsonData),\r\n\t\tdataType: 'json',\r\n\t\tsuccess: function(data, status){\r\n\t\t\tconsole.log('success!');\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getPuzzleData(puzzleID)\r\n{\r\n\tlet url = getPuzzleDataURL + puzzleID;\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: url,\r\n\t\tsuccess: function(data, status){\r\n\t\t\tpiecesJSONObject = JSON.parse(data[0].puzzleObject);\r\n\t\t\tbase64Image = data[0].image;\r\n\t\t\tpieces = piecesJSONObject.pieces;\r\n\t\t\tcolors = piecesJSONObject.colors;\r\n\t\t\tif(colors === undefined)\r\n\t\t\t\tcolors = defaultPalette;\r\n\t\t\tgeneratePieces();\r\n\t\t},\r\n\t\terror: function(data, status){\r\n\t\t\tconsole.log(status);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction generatePieces()\r\n{\r\n\tlet generalTransformer = new Konva.Transformer({\r\n\t\tcenteredScaling: true,\r\n        rotationSnaps: [0, 90, 180, 270],\r\n        rotationSnapTolerance: 45,\r\n        resizeEnabled: false,\r\n        borderEnabled: false,\r\n        anchorStroke: '',\r\n        anchorFill: '',\r\n        rotateAnchorOffset: -20,\r\n\t});\r\n\r\n\tlayer.add(generalTransformer);\r\n\t\r\n\tfor(let pieceIndex = 0; pieceIndex < pieces.length; pieceIndex++)\r\n\t{\r\n\t\tlet selectedPiece = pieces[pieceIndex];\r\n\t\tlet offsetX = getRandomOffsetX(selectedPiece, 0);\r\n\t\t// console.log(offsetX);\r\n\t\tlet offsetY = getRandomOffset(getMin(selectedPiece, 'y'), ( height/2 ));\r\n\t\tlet minY = getMin(selectedPiece, 'y');\r\n\r\n\t\tcorrectPositions.push({x: selectedPiece[0], y: selectedPiece[1]});\r\n\t\tpieceInCorrectPosition.push(false);\r\n\r\n\t\tfor(let i = 0; i < selectedPiece.length; i+=2)\r\n\t\t{\r\n\t\t\tif( (pieceIndex+1) % 2 == 0)\r\n\t\t\t\tselectedPiece[i] += 800;\r\n\t\t\tselectedPiece[i] -= offsetX;\r\n\t\t\t// selectedPiece[i+1] += minY - ((pieceIndex % 5) * 100);\r\n\t\t}\r\n\r\n\t\tlet group = new Konva.Group();\r\n\r\n\t\tlet hitBox = new Konva.Rect({\r\n\t\t\tx: selectedPiece[0],\r\n\t\t\ty: selectedPiece[1],\r\n\t\t\twidth: 5,\r\n\t\t\theight: 5\r\n\t\t});\r\n\r\n\t\tlet piece = new Konva.Line({\r\n\t\t\tpoints: selectedPiece,\r\n\t\t\tstroke: colors[pieceIndex % colors.length],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tperfectDrawEnabled: false,\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseover', function (){\r\n\t\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t// this.scale({x: 1, y: 1});\r\n\t\t\tgroup.moveToTop();\r\n\t\t\tlayer.draw();\r\n\t\t});\r\n\r\n\t\tpiece.on('mouseout', function() {\r\n\t\t\tdocument.body.style.cursor = 'default';\r\n\t\t\t// this.scale({x: 0.5, y: 0.5});\r\n\t\t\t// layer.draw();\r\n\t\t});\r\n\r\n\t\tgroup.on('dblclick', function() {\r\n\t\t\t// piece.rotate(90);\r\n\t\t\tif(pieceInCorrectPosition[pieceIndex] == false)\r\n\t\t\t{\r\n\t\t\t\tgeneralTransformer.nodes([piece]);\r\n\t\t\t\tlet attributes = generalTransformer._getNodeRect();\r\n\t\t\t\tvar shape = rotateAroundCenter(attributes, 1.5707963267948966);\r\n\r\n\t\t\t\tif(Math.floor(shape.rotation) == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t\t\t\tconsole.log((shape.rotation));\r\n\t\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\t// piece.on('transformend', function() {\r\n\t\t// \tconsole.log(generalTransformer._getNodeRect());\r\n\t\t// });\r\n\r\n\t\tgroup.on('dragend', function(){\r\n\t\t\tcheckPositionAndSnapIntoPlace(this, pieceIndex);\r\n\t\t});\r\n\r\n\t\tgroup.add(piece);\r\n\t\tgroup.add(hitBox);\r\n\t\tgroup.draggable(true);\r\n\t\tlayer.add(group);\r\n\r\n\t\t//randomly rotate piece\r\n\t\tgroup.add(generalTransformer);\r\n\t\tgeneralTransformer.nodes([piece]);\r\n\t\tvar attributes = generalTransformer._getNodeRect();\r\n\t\tvar shape = rotateAroundCenter(attributes, getRandomRotation());\r\n\t\t\r\n\t\tif(shape.rotation == 0)\r\n\t\t{\r\n\t\t\tconsole.log('correct orientation');\r\n\t\t\tcorrectOrientation[pieceIndex] = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcorrectOrientation[pieceIndex] = false;\r\n\t\t}\r\n\r\n\t\tgeneralTransformer._fitNodesInto(shape);\r\n\t}\r\n\r\n\tlayer.add(board);\r\n\tlayer.draw();\r\n\tstartTime = performance.now();\r\n}\r\n\r\nfunction checkPositionAndSnapIntoPlace(group, pieceIndex)\r\n{\r\n\tlet hitBox = group.getChildren()[1];\r\n\tlet hitBoxCoordinates = hitBox.absolutePosition();\r\n\thitBoxCoordinates.x -= 250;\r\n\r\n\tif(checkPosition(hitBoxCoordinates, correctPositions[pieceIndex]) && correctOrientation[pieceIndex])\r\n\t{\r\n\t\tsnapPieceIntoPlace(hitBoxCoordinates, correctPositions[pieceIndex], group);\r\n\t\tgroup.draggable(false);\r\n\t\tconsole.log('nailed it!!');\r\n\t\tpieceInCorrectPosition[pieceIndex] = true;\r\n\t\tcheckIfPuzzleSolved();\r\n\t}\r\n\telse\r\n\t{\r\n\t\tconsole.log('you are off bud!');\r\n\t\tconsole.log('The correct x: ' + correctPositions[pieceIndex].x + ' - The correct y: ' + correctPositions[pieceIndex].y);\r\n\t\tconsole.log('The current x: ' + hitBoxCoordinates.x + ' - The current y: ' + hitBoxCoordinates.y);\r\n\t\tpieceInCorrectPosition[pieceIndex] = false;\r\n\t}\r\n}\r\n\r\nfunction getRandomRotation()\r\n{\r\n\tlet choice = Math.floor(Math.random() * 4);\r\n\r\n\tif(choice == 0)\r\n\t{\r\n\t\t//no change to rotation\r\n\t\treturn 0;\r\n\t}\r\n\telse if(choice == 1)\r\n\t{\r\n\t\t//rotate 90 degrees\r\n\t\treturn 1.5707963267948966;\r\n\t}\r\n\telse if(choice == 2)\r\n\t{\r\n\t\t//rotate 180 degrees\r\n\t\treturn 3.141592653589793;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//rotate 270 degrees\r\n\t\treturn 4.71238898038469;\r\n\t}\r\n}\r\n\r\nfunction getMax(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet max = 0;\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] > max)\r\n\t\t\tmax = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn max;\r\n}\r\n\r\nfunction getMin(pointsArray, coordinate)\r\n{\r\n\tlet step;\r\n\tif(coordinate == 'x')\r\n\t\tstep = 0;\r\n\telse\r\n\t\tstep = 1;\r\n\r\n\tlet min = pointsArray[step];\r\n\tfor(let i = 0; i < pointsArray.length; i+=2)\r\n\t{\r\n\t\tif(pointsArray[i+step] < min)\r\n\t\t\tmin = pointsArray[i+step];\r\n\t}\r\n\r\n\treturn min;\r\n}\r\n\r\nfunction getRandomOffset(lowerBound, upperBound)\r\n{\r\n\tlet returnValue = 0;\r\n\t// while( returnValue <= lowerBound )\r\n\t{\r\n\t\treturnValue = Math.floor((Math.random() * upperBound) + 1);\r\n\t}\r\n\r\n\treturn returnValue;\r\n}\r\n\r\nfunction getRandomOffsetX(pixelArray, min)\r\n{\r\n\tlet minX = getMin(pixelArray, 'x');\r\n\tlet maxX = getMax(pixelArray, 'x');\r\n\r\n\treturn minX;\r\n\r\n}\r\n\r\nfunction checkPosition(coords1, coords2)\r\n{\r\n\tlet xDifference = coords1.x - coords2.x;\r\n\tlet yDifference = coords1.y - coords2.y;\r\n\tif(xDifference < 0)\r\n\t\txDifference *= -1;\r\n\tif(yDifference < 0)\r\n\t\tyDifference *= -1;\r\n\r\n\tif(xDifference <= 15 && yDifference <= 15)\r\n\t\treturn true;\r\n\telse\r\n\t\treturn false;\r\n}\r\n\r\nfunction checkIfPuzzleSolved()\r\n{\r\n\tfor(let pieceIndex = 0; pieceIndex < pieceInCorrectPosition.length; pieceIndex++)\r\n\t{\r\n\t\tif(!pieceInCorrectPosition[pieceIndex])\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tsetTimeout(function() {\r\n\t\tdocument.getElementById('solverDialogDiv').appendChild(solvedDiv);\r\n\t\tsolvedDiv.style.display = \"block\";\r\n\r\n\t\t// Get the <span> element that closes the modal\r\n\t\tvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n\t\t// When the user clicks on <span> (x), close the modal\r\n\t\tspan.onclick = function() {\r\n\t\t\tsolvedDiv.style.display = \"none\";\r\n\t\t}\r\n\t}, 500);\r\n\r\n\t// alert('Puzzle Solved!');\r\n\tpuzzleSolved = true;\r\n\tsaveSolveAttempt(puzzleSolved, puzzleID, startTime);\r\n}\r\n\r\nfunction snapPieceIntoPlace(currentCoords, targetCoords, piece)\r\n{\r\n\tlet xDifference = currentCoords.x - targetCoords.x;\r\n\tlet yDifference = currentCoords.y - targetCoords.y;\r\n\tpiece.x(piece.x() - xDifference);\r\n\tpiece.y(piece.y() - yDifference);\r\n\tlayer.draw();\r\n}\r\n\r\nfunction rotateAroundPoint(shape, angleRad, point) {\r\n  var x = point.x +\r\n      (shape.x - point.x) * Math.cos(angleRad) -\r\n      (shape.y - point.y) * Math.sin(angleRad);\r\n  var y = point.y +\r\n      (shape.x - point.x) * Math.sin(angleRad) +\r\n      (shape.y - point.y) * Math.cos(angleRad);\r\n  return __assign(__assign({}, shape), { rotation: shape.rotation + angleRad, x: x,\r\n      y: y });\r\n}\r\nfunction rotateAroundCenter(shape, deltaRad) {\r\n  var center = getCenter(shape);\r\n  return rotateAroundPoint(shape, deltaRad, center);\r\n}\r\n\r\nvar __assign = function() {\r\n  __assign = Object.assign || function __assign(t) {\r\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n      }\r\n      return t;\r\n  };\r\n  return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction getCenter(shape) {\r\n  return {\r\n      x: shape.x +\r\n          (shape.width / 2) * Math.cos(shape.rotation) +\r\n          (shape.height / 2) * Math.sin(-shape.rotation),\r\n      y: shape.y +\r\n          (shape.height / 2) * Math.cos(shape.rotation) +\r\n          (shape.width / 2) * Math.sin(shape.rotation),\r\n  };\r\n}\r\n","// Polyfills\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\nif ( Number.isInteger === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n\r\n\tNumber.isInteger = function ( value ) {\r\n\r\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( 'name' in Function.prototype === false ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// Missing in IE\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\tObject.assign = function ( target ) {\r\n\r\n\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n\t\t}\r\n\r\n\t\tconst output = Object( target );\r\n\r\n\t\tfor ( let index = 1; index < arguments.length; index ++ ) {\r\n\r\n\t\t\tconst source = arguments[ index ];\r\n\r\n\t\t\tif ( source !== undefined && source !== null ) {\r\n\r\n\t\t\t\tfor ( const nextKey in source ) {\r\n\r\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst REVISION = '119';\r\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\r\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\r\nconst CullFaceNone = 0;\r\nconst CullFaceBack = 1;\r\nconst CullFaceFront = 2;\r\nconst CullFaceFrontBack = 3;\r\nconst BasicShadowMap = 0;\r\nconst PCFShadowMap = 1;\r\nconst PCFSoftShadowMap = 2;\r\nconst VSMShadowMap = 3;\r\nconst FrontSide = 0;\r\nconst BackSide = 1;\r\nconst DoubleSide = 2;\r\nconst FlatShading = 1;\r\nconst SmoothShading = 2;\r\nconst NoBlending = 0;\r\nconst NormalBlending = 1;\r\nconst AdditiveBlending = 2;\r\nconst SubtractiveBlending = 3;\r\nconst MultiplyBlending = 4;\r\nconst CustomBlending = 5;\r\nconst AddEquation = 100;\r\nconst SubtractEquation = 101;\r\nconst ReverseSubtractEquation = 102;\r\nconst MinEquation = 103;\r\nconst MaxEquation = 104;\r\nconst ZeroFactor = 200;\r\nconst OneFactor = 201;\r\nconst SrcColorFactor = 202;\r\nconst OneMinusSrcColorFactor = 203;\r\nconst SrcAlphaFactor = 204;\r\nconst OneMinusSrcAlphaFactor = 205;\r\nconst DstAlphaFactor = 206;\r\nconst OneMinusDstAlphaFactor = 207;\r\nconst DstColorFactor = 208;\r\nconst OneMinusDstColorFactor = 209;\r\nconst SrcAlphaSaturateFactor = 210;\r\nconst NeverDepth = 0;\r\nconst AlwaysDepth = 1;\r\nconst LessDepth = 2;\r\nconst LessEqualDepth = 3;\r\nconst EqualDepth = 4;\r\nconst GreaterEqualDepth = 5;\r\nconst GreaterDepth = 6;\r\nconst NotEqualDepth = 7;\r\nconst MultiplyOperation = 0;\r\nconst MixOperation = 1;\r\nconst AddOperation = 2;\r\nconst NoToneMapping = 0;\r\nconst LinearToneMapping = 1;\r\nconst ReinhardToneMapping = 2;\r\nconst CineonToneMapping = 3;\r\nconst ACESFilmicToneMapping = 4;\r\nconst CustomToneMapping = 5;\r\n\r\nconst UVMapping = 300;\r\nconst CubeReflectionMapping = 301;\r\nconst CubeRefractionMapping = 302;\r\nconst EquirectangularReflectionMapping = 303;\r\nconst EquirectangularRefractionMapping = 304;\r\nconst CubeUVReflectionMapping = 306;\r\nconst CubeUVRefractionMapping = 307;\r\nconst RepeatWrapping = 1000;\r\nconst ClampToEdgeWrapping = 1001;\r\nconst MirroredRepeatWrapping = 1002;\r\nconst NearestFilter = 1003;\r\nconst NearestMipmapNearestFilter = 1004;\r\nconst NearestMipMapNearestFilter = 1004;\r\nconst NearestMipmapLinearFilter = 1005;\r\nconst NearestMipMapLinearFilter = 1005;\r\nconst LinearFilter = 1006;\r\nconst LinearMipmapNearestFilter = 1007;\r\nconst LinearMipMapNearestFilter = 1007;\r\nconst LinearMipmapLinearFilter = 1008;\r\nconst LinearMipMapLinearFilter = 1008;\r\nconst UnsignedByteType = 1009;\r\nconst ByteType = 1010;\r\nconst ShortType = 1011;\r\nconst UnsignedShortType = 1012;\r\nconst IntType = 1013;\r\nconst UnsignedIntType = 1014;\r\nconst FloatType = 1015;\r\nconst HalfFloatType = 1016;\r\nconst UnsignedShort4444Type = 1017;\r\nconst UnsignedShort5551Type = 1018;\r\nconst UnsignedShort565Type = 1019;\r\nconst UnsignedInt248Type = 1020;\r\nconst AlphaFormat = 1021;\r\nconst RGBFormat = 1022;\r\nconst RGBAFormat = 1023;\r\nconst LuminanceFormat = 1024;\r\nconst LuminanceAlphaFormat = 1025;\r\nconst RGBEFormat = RGBAFormat;\r\nconst DepthFormat = 1026;\r\nconst DepthStencilFormat = 1027;\r\nconst RedFormat = 1028;\r\nconst RedIntegerFormat = 1029;\r\nconst RGFormat = 1030;\r\nconst RGIntegerFormat = 1031;\r\nconst RGBIntegerFormat = 1032;\r\nconst RGBAIntegerFormat = 1033;\r\n\r\nconst RGB_S3TC_DXT1_Format = 33776;\r\nconst RGBA_S3TC_DXT1_Format = 33777;\r\nconst RGBA_S3TC_DXT3_Format = 33778;\r\nconst RGBA_S3TC_DXT5_Format = 33779;\r\nconst RGB_PVRTC_4BPPV1_Format = 35840;\r\nconst RGB_PVRTC_2BPPV1_Format = 35841;\r\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\r\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\r\nconst RGB_ETC1_Format = 36196;\r\nconst RGB_ETC2_Format = 37492;\r\nconst RGBA_ETC2_EAC_Format = 37496;\r\nconst RGBA_ASTC_4x4_Format = 37808;\r\nconst RGBA_ASTC_5x4_Format = 37809;\r\nconst RGBA_ASTC_5x5_Format = 37810;\r\nconst RGBA_ASTC_6x5_Format = 37811;\r\nconst RGBA_ASTC_6x6_Format = 37812;\r\nconst RGBA_ASTC_8x5_Format = 37813;\r\nconst RGBA_ASTC_8x6_Format = 37814;\r\nconst RGBA_ASTC_8x8_Format = 37815;\r\nconst RGBA_ASTC_10x5_Format = 37816;\r\nconst RGBA_ASTC_10x6_Format = 37817;\r\nconst RGBA_ASTC_10x8_Format = 37818;\r\nconst RGBA_ASTC_10x10_Format = 37819;\r\nconst RGBA_ASTC_12x10_Format = 37820;\r\nconst RGBA_ASTC_12x12_Format = 37821;\r\nconst RGBA_BPTC_Format = 36492;\r\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\r\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\r\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\r\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\r\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\r\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\r\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\r\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\r\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\r\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\r\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\r\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\r\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\r\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\r\nconst LoopOnce = 2200;\r\nconst LoopRepeat = 2201;\r\nconst LoopPingPong = 2202;\r\nconst InterpolateDiscrete = 2300;\r\nconst InterpolateLinear = 2301;\r\nconst InterpolateSmooth = 2302;\r\nconst ZeroCurvatureEnding = 2400;\r\nconst ZeroSlopeEnding = 2401;\r\nconst WrapAroundEnding = 2402;\r\nconst NormalAnimationBlendMode = 2500;\r\nconst AdditiveAnimationBlendMode = 2501;\r\nconst TrianglesDrawMode = 0;\r\nconst TriangleStripDrawMode = 1;\r\nconst TriangleFanDrawMode = 2;\r\nconst LinearEncoding = 3000;\r\nconst sRGBEncoding = 3001;\r\nconst GammaEncoding = 3007;\r\nconst RGBEEncoding = 3002;\r\nconst LogLuvEncoding = 3003;\r\nconst RGBM7Encoding = 3004;\r\nconst RGBM16Encoding = 3005;\r\nconst RGBDEncoding = 3006;\r\nconst BasicDepthPacking = 3200;\r\nconst RGBADepthPacking = 3201;\r\nconst TangentSpaceNormalMap = 0;\r\nconst ObjectSpaceNormalMap = 1;\r\n\r\nconst ZeroStencilOp = 0;\r\nconst KeepStencilOp = 7680;\r\nconst ReplaceStencilOp = 7681;\r\nconst IncrementStencilOp = 7682;\r\nconst DecrementStencilOp = 7683;\r\nconst IncrementWrapStencilOp = 34055;\r\nconst DecrementWrapStencilOp = 34056;\r\nconst InvertStencilOp = 5386;\r\n\r\nconst NeverStencilFunc = 512;\r\nconst LessStencilFunc = 513;\r\nconst EqualStencilFunc = 514;\r\nconst LessEqualStencilFunc = 515;\r\nconst GreaterStencilFunc = 516;\r\nconst NotEqualStencilFunc = 517;\r\nconst GreaterEqualStencilFunc = 518;\r\nconst AlwaysStencilFunc = 519;\r\n\r\nconst StaticDrawUsage = 35044;\r\nconst DynamicDrawUsage = 35048;\r\nconst StreamDrawUsage = 35040;\r\nconst StaticReadUsage = 35045;\r\nconst DynamicReadUsage = 35049;\r\nconst StreamReadUsage = 35041;\r\nconst StaticCopyUsage = 35046;\r\nconst DynamicCopyUsage = 35050;\r\nconst StreamCopyUsage = 35042;\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nfunction EventDispatcher() {}\r\n\r\nObject.assign( EventDispatcher.prototype, {\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\r\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tconst index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tconst listeners = this._listeners;\r\n\t\tconst listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\t// Make a copy, in case listeners are removed while iterating.\r\n\t\t\tconst array = listenerArray.slice( 0 );\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _lut = [];\r\n\r\nfor ( let i = 0; i < 256; i ++ ) {\r\n\r\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n}\r\n\r\nlet _seed = 1234567;\r\n\r\nconst MathUtils = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\r\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\r\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\r\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\r\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\r\n\r\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n\t\treturn uuid.toUpperCase();\r\n\r\n\t},\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n\tlerp: function ( x, y, t ) {\r\n\r\n\t\treturn ( 1 - t ) * x + t * y;\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\r\n\r\n\tseededRandom: function ( s ) {\r\n\r\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\r\n\r\n\t\t// Park-Miller algorithm\r\n\r\n\t\t_seed = _seed * 16807 % 2147483647;\r\n\r\n\t\treturn ( _seed - 1 ) / 2147483646;\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * MathUtils.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * MathUtils.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tceilPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tfloorPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\r\n\r\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\r\n\r\n\t\t// rotations are applied to the axes in the order specified by 'order'\r\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\r\n\t\t// angles are in radians\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c2 = cos( b / 2 );\r\n\t\tconst s2 = sin( b / 2 );\r\n\r\n\t\tconst c13 = cos( ( a + c ) / 2 );\r\n\t\tconst s13 = sin( ( a + c ) / 2 );\r\n\r\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\r\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\r\n\r\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\r\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYX':\r\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZY':\r\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXZ':\r\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZX':\r\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXY':\r\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYZ':\r\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction Vector2( x = 0, y = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector2.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.x = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.y = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tisVector2: true,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tcross: function ( v ) {\r\n\r\n\t\treturn this.x * v.y - this.y * v.x;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tconst x = this.x - center.x;\r\n\t\tconst y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Matrix3() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tisMatrix3: true,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrix3Column( this, 0 );\r\n\t\tyAxis.setFromMatrix3Column( this, 1 );\r\n\t\tzAxis.setFromMatrix3Column( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function ( m ) {\r\n\r\n\t\tconst me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\tconst me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\tte[ 3 ] = t12 * detInv;\r\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\tte[ 6 ] = t13 * detInv;\r\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tlet tmp;\r\n\t\tconst m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tconst m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\t\tconst c = Math.cos( rotation );\r\n\t\tconst s = Math.sin( rotation );\r\n\r\n\t\tthis.set(\r\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t\t0, 0, 1\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tscale: function ( sx, sy ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotate: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta );\r\n\t\tconst s = Math.sin( theta );\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n\t\tte[ 0 ] = c * a11 + s * a21;\r\n\t\tte[ 3 ] = c * a12 + s * a22;\r\n\t\tte[ 6 ] = c * a13 + s * a23;\r\n\r\n\t\tte[ 1 ] = - s * a11 + c * a21;\r\n\t\tte[ 4 ] = - s * a12 + c * a22;\r\n\t\tte[ 7 ] = - s * a13 + c * a23;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( tx, ty ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _canvas;\r\n\r\nconst ImageUtils = {\r\n\r\n\tgetDataURL: function ( image ) {\r\n\r\n\t\tif ( /^data:/i.test( image.src ) ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\r\n\r\n\t\t\treturn image.src;\r\n\r\n\t\t}\r\n\r\n\t\tlet canvas;\r\n\r\n\t\tif ( image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tcanvas = image;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t\t\t_canvas.width = image.width;\r\n\t\t\t_canvas.height = image.height;\r\n\r\n\t\t\tconst context = _canvas.getContext( '2d' );\r\n\r\n\t\t\tif ( image instanceof ImageData ) {\r\n\r\n\t\t\t\tcontext.putImageData( image, 0, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcanvas = _canvas;\r\n\r\n\t\t}\r\n\r\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nlet textureId = 0;\r\n\r\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : RGBAFormat;\r\n\tthis.internalFormat = null;\r\n\tthis.type = type !== undefined ? type : UnsignedByteType;\r\n\r\n\tthis.offset = new Vector2( 0, 0 );\r\n\tthis.repeat = new Vector2( 1, 1 );\r\n\tthis.center = new Vector2( 0, 0 );\r\n\tthis.rotation = 0;\r\n\r\n\tthis.matrixAutoUpdate = true;\r\n\tthis.matrix = new Matrix3();\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n}\r\n\r\nTexture.DEFAULT_IMAGE = undefined;\r\nTexture.DEFAULT_MAPPING = UVMapping;\r\n\r\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Texture,\r\n\r\n\tisTexture: true,\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.internalFormat = source.internalFormat;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\t\tthis.center.copy( source.center );\r\n\t\tthis.rotation = source.rotation;\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrix.copy( source.matrix );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tconst output = {\r\n\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\tcenter: [ this.center.x, this.center.y ],\r\n\t\t\trotation: this.rotation,\r\n\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tformat: this.format,\r\n\t\t\ttype: this.type,\r\n\t\t\tencoding: this.encoding,\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy,\r\n\r\n\t\t\tflipY: this.flipY,\r\n\r\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\r\n\t\t\tunpackAlignment: this.unpackAlignment\r\n\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tconst image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlet url;\r\n\r\n\t\t\t\tif ( Array.isArray( image ) ) {\r\n\r\n\t\t\t\t\t// process array of images e.g. CubeTexture\r\n\r\n\t\t\t\t\turl = [];\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// process single image\r\n\r\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: url\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! isRootObject ) {\r\n\r\n\t\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== UVMapping ) return uv;\r\n\r\n\t\tuv.applyMatrix3( this.matrix );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn uv;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Vector4( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\tthis.w = w;\r\n\r\n}\r\n\r\nObject.defineProperties( Vector4.prototype, {\r\n\r\n\t\"width\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.z = value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t\"height\": {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.w = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tisVector4: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\tthis.x = 1;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = q.x / s;\r\n\t\t\tthis.y = q.y / s;\r\n\t\t\tthis.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tlet angle, x, y, z; // variables for result\r\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tconst xx = ( m11 + 1 ) / 2;\r\n\t\t\tconst yy = ( m22 + 1 ) / 2;\r\n\t\t\tconst zz = ( m33 + 1 ) / 2;\r\n\t\t\tconst xy = ( m12 + m21 ) / 4;\r\n\t\t\tconst xz = ( m13 + m31 ) / 4;\r\n\t\t\tconst yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\t\tthis.w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\t\tthis.w = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nfunction WebGLRenderTarget( width, height, options ) {\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n\tthis.texture.image = {};\r\n\tthis.texture.image.width = width;\r\n\tthis.texture.image.height = height;\r\n\r\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\r\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\r\n\r\n}\r\n\r\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: WebGLRenderTarget,\r\n\r\n\tisWebGLRenderTarget: true,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.texture.image.width = width;\r\n\t\t\tthis.texture.image.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\tthis.depthTexture = source.depthTexture;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\r\n\r\n\tWebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.samples = 4;\r\n\r\n}\r\n\r\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\r\n\r\n\tconstructor: WebGLMultisampleRenderTarget,\r\n\r\n\tisWebGLMultisampleRenderTarget: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\r\n\r\n\t\tthis.samples = source.samples;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Quaternion( x = 0, y = 0, z = 0, w = 1 ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._w = w;\r\n\r\n}\r\n\r\nObject.assign( Quaternion, {\r\n\r\n\tslerp: function ( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tlet s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternionsFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\r\n\r\n\t\tconst x0 = src0[ srcOffset0 ];\r\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\r\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\r\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\r\n\r\n\t\tconst x1 = src1[ srcOffset1 ];\r\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\r\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\r\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\r\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\r\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\r\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\r\n\r\n\t\treturn dst;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Quaternion.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tw: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._w;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._w = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Quaternion.prototype, {\r\n\r\n\tisQuaternion: true,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tconst cos = Math.cos;\r\n\t\tconst sin = Math.sin;\r\n\r\n\t\tconst c1 = cos( x / 2 );\r\n\t\tconst c2 = cos( y / 2 );\r\n\t\tconst c3 = cos( z / 2 );\r\n\r\n\t\tconst s1 = sin( x / 2 );\r\n\t\tconst s2 = sin( y / 2 );\r\n\t\tconst s3 = sin( z / 2 );\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tconst EPS = 0.000001;\r\n\r\n\t\tlet r = vFrom.dot( vTo ) + 1;\r\n\r\n\t\tif ( r < EPS ) {\r\n\r\n\t\t\tr = 0;\r\n\r\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\tthis._x = - vFrom.y;\r\n\t\t\t\tthis._y = vFrom.x;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = - vFrom.z;\r\n\t\t\t\tthis._z = vFrom.y;\r\n\t\t\t\tthis._w = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\r\n\r\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\r\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\r\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tangleTo: function ( q ) {\r\n\r\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\r\n\r\n\t},\r\n\r\n\trotateTowards: function ( q, step ) {\r\n\r\n\t\tconst angle = this.angleTo( q );\r\n\r\n\t\tif ( angle === 0 ) return this;\r\n\r\n\t\tconst t = Math.min( 1, step / angle );\r\n\r\n\t\tthis.slerp( q, t );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\treturn this.set( 0, 0, 0, 1 );\r\n\r\n\t},\r\n\r\n\tinverse: function () {\r\n\r\n\t\t// quaternion is assumed to have unit length\r\n\r\n\t\treturn this.conjugate();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tlet l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\r\n\r\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\r\n\r\n\t\t\tconst s = 1 - t;\r\n\t\t\tthis._w = s * w + t * this._w;\r\n\t\t\tthis._x = s * x + t * this._x;\r\n\t\t\tthis._y = s * y + t * this._y;\r\n\t\t\tthis._z = s * z + t * this._z;\r\n\r\n\t\t\tthis.normalize();\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\r\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis._x = attribute.getX( index );\r\n\t\tthis._y = attribute.getY( index );\r\n\t\tthis._z = attribute.getZ( index );\r\n\t\tthis._w = attribute.getW( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nconst _vector = new Vector3();\r\nconst _quaternion = new Quaternion();\r\n\r\nfunction Vector3( x = 0, y = 0, z = 0 ) {\r\n\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.z = z;\r\n\r\n}\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tisVector3: true,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\r\n\r\n\t},\r\n\r\n\tapplyAxisAngle: function ( axis, angle ) {\r\n\r\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\treturn this.applyMatrix3( m ).normalize();\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tconst ix = qw * x + qy * z - qz * y;\r\n\t\tconst iy = qw * y + qz * x - qx * z;\r\n\t\tconst iz = qw * z + qx * y - qy * x;\r\n\t\tconst iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\r\n\r\n\t},\r\n\r\n\tunproject: function ( camera ) {\r\n\r\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tconst x = this.x, y = this.y, z = this.z;\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// assumes min < max, componentwise\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tconst length = this.length();\r\n\r\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\t// TODO lengthSquared?\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tmanhattanLength: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\r\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\r\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.crossVectors( this, v );\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tconst ax = a.x, ay = a.y, az = a.z;\r\n\t\tconst bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function ( v ) {\r\n\r\n\t\tconst denominator = v.lengthSq();\r\n\r\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\r\n\r\n\t\tconst scalar = v.dot( this ) / denominator;\r\n\r\n\t\treturn this.copy( v ).multiplyScalar( scalar );\r\n\r\n\t},\r\n\r\n\tprojectOnPlane: function ( planeNormal ) {\r\n\r\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\treturn this.sub( _vector );\r\n\r\n\t},\r\n\r\n\treflect: function ( normal ) {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t},\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\r\n\r\n\t\tif ( denominator === 0 ) return Math.PI / 2;\r\n\r\n\t\tconst theta = this.dot( v ) / denominator;\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tmanhattanDistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function ( s ) {\r\n\r\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\r\n\r\n\t},\r\n\r\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\r\n\r\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\r\n\t\tthis.y = Math.cos( phi ) * radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCylindrical: function ( c ) {\r\n\r\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\r\n\r\n\t},\r\n\r\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\r\n\r\n\t\tthis.x = radius * Math.sin( theta );\r\n\t\tthis.y = y;\r\n\t\tthis.z = radius * Math.cos( theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tconst e = m.elements;\r\n\r\n\t\tthis.x = e[ 12 ];\r\n\t\tthis.y = e[ 13 ];\r\n\t\tthis.z = e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrix3Column: function ( m, index ) {\r\n\r\n\t\treturn this.fromArray( m.elements, index * 3 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x = attribute.getX( index );\r\n\t\tthis.y = attribute.getY( index );\r\n\t\tthis.z = attribute.getZ( index );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trandom: function () {\r\n\r\n\t\tthis.x = Math.random();\r\n\t\tthis.y = Math.random();\r\n\t\tthis.z = Math.random();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v1 = new Vector3();\r\nconst _m1 = new Matrix4();\r\nconst _zero = new Vector3( 0, 0, 0 );\r\nconst _one = new Vector3( 1, 1, 1 );\r\nconst _x = new Vector3();\r\nconst _y = new Vector3();\r\nconst _z = new Vector3();\r\n\r\nfunction Matrix4() {\r\n\r\n\tthis.elements = [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t];\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\tisMatrix4: true,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tconst te = this.elements, me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function ( m ) {\r\n\r\n\t\t// this method does not support reflection matrices\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = m.elements;\r\n\r\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( ! ( euler && euler.isEuler ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\r\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\r\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\r\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// bottom row\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// last column\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\treturn this.compose( _zero, q, _one );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( eye, target, up ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\t_z.subVectors( eye, target );\r\n\r\n\t\tif ( _z.lengthSq() === 0 ) {\r\n\r\n\t\t\t// eye and target are in the same position\r\n\r\n\t\t\t_z.z = 1;\r\n\r\n\t\t}\r\n\r\n\t\t_z.normalize();\r\n\t\t_x.crossVectors( up, _z );\r\n\r\n\t\tif ( _x.lengthSq() === 0 ) {\r\n\r\n\t\t\t// up and z are parallel\r\n\r\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\r\n\r\n\t\t\t\t_z.x += 0.0001;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_z.z += 0.0001;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_z.normalize();\r\n\t\t\t_x.crossVectors( up, _z );\r\n\r\n\t\t}\r\n\r\n\t\t_x.normalize();\r\n\t\t_y.crossVectors( _z, _x );\r\n\r\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\r\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\r\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tconst ae = a.elements;\r\n\t\tconst be = b.elements;\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tlet tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPosition: function ( x, y, z ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\tte[ 12 ] = x.x;\r\n\t\t\tte[ 13 ] = x.y;\r\n\t\t\tte[ 14 ] = x.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tte[ 12 ] = x;\r\n\t\t\tte[ 13 ] = y;\r\n\t\t\tte[ 14 ] = z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t}\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tconst te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\tconst detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s, c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts, c, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tconst c = Math.cos( angle );\r\n\t\tconst s = Math.sin( angle );\r\n\t\tconst t = 1 - c;\r\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\r\n\t\tconst tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeShear: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, y, z, 0,\r\n\t\t\tx, 1, z, 0,\r\n\t\t\tx, y, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n\t\tte[ 1 ] = ( xy + wz ) * sx;\r\n\t\tte[ 2 ] = ( xz - wy ) * sx;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = ( xy - wz ) * sy;\r\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n\t\tte[ 6 ] = ( yz + wx ) * sy;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = ( xz + wy ) * sz;\r\n\t\tte[ 9 ] = ( yz - wx ) * sz;\r\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = position.x;\r\n\t\tte[ 13 ] = position.y;\r\n\t\tte[ 14 ] = position.z;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\tlet sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\tlet sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t// if determine is negative, we need to invert one scale\r\n\t\tconst det = this.determinant();\r\n\t\tif ( det < 0 ) sx = - sx;\r\n\r\n\t\tposition.x = te[ 12 ];\r\n\t\tposition.y = te[ 13 ];\r\n\t\tposition.z = te[ 14 ];\r\n\r\n\t\t// scale the rotation part\r\n\t\t_m1.copy( this );\r\n\r\n\t\tconst invSX = 1 / sx;\r\n\t\tconst invSY = 1 / sy;\r\n\t\tconst invSZ = 1 / sz;\r\n\r\n\t\t_m1.elements[ 0 ] *= invSX;\r\n\t\t_m1.elements[ 1 ] *= invSX;\r\n\t\t_m1.elements[ 2 ] *= invSX;\r\n\r\n\t\t_m1.elements[ 4 ] *= invSY;\r\n\t\t_m1.elements[ 5 ] *= invSY;\r\n\t\t_m1.elements[ 6 ] *= invSY;\r\n\r\n\t\t_m1.elements[ 8 ] *= invSZ;\r\n\t\t_m1.elements[ 9 ] *= invSZ;\r\n\t\t_m1.elements[ 10 ] *= invSZ;\r\n\r\n\t\tquaternion.setFromRotationMatrix( _m1 );\r\n\r\n\t\tscale.x = sx;\r\n\t\tscale.y = sy;\r\n\t\tscale.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tif ( far === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst x = 2 * near / ( right - left );\r\n\t\tconst y = 2 * near / ( top - bottom );\r\n\r\n\t\tconst a = ( right + left ) / ( right - left );\r\n\t\tconst b = ( top + bottom ) / ( top - bottom );\r\n\t\tconst c = - ( far + near ) / ( far - near );\r\n\t\tconst d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst w = 1.0 / ( right - left );\r\n\t\tconst h = 1.0 / ( top - bottom );\r\n\t\tconst p = 1.0 / ( far - near );\r\n\r\n\t\tconst x = ( right + left ) * w;\r\n\t\tconst y = ( top + bottom ) * h;\r\n\t\tconst z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tconst te = this.elements;\r\n\t\tconst me = matrix.elements;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\t\tarray[ offset + 9 ] = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _matrix = new Matrix4();\r\nconst _quaternion$1 = new Quaternion();\r\n\r\nfunction Euler( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\r\n\r\n\tthis._x = x;\r\n\tthis._y = y;\r\n\tthis._z = z;\r\n\tthis._order = order;\r\n\r\n}\r\n\r\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nEuler.DefaultOrder = 'XYZ';\r\n\r\nObject.defineProperties( Euler.prototype, {\r\n\r\n\tx: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._x;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._x = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ty: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._y;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._y = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tz: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._z;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._z = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\torder: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this._order;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis._order = value;\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Euler.prototype, {\r\n\r\n\tisEuler: true,\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tconst clamp = MathUtils.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tconst te = m.elements;\r\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tswitch ( order ) {\r\n\r\n\t\t\tcase 'XYZ':\r\n\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YXZ':\r\n\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZXY':\r\n\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZYX':\r\n\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YZX':\r\n\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XZY':\r\n\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\t_matrix.makeRotationFromQuaternion( q );\r\n\r\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function ( newOrder ) {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\t_quaternion$1.setFromEuler( this );\r\n\r\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\r\n\r\n\t},\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis._onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_onChange: function ( callback ) {\r\n\r\n\t\tthis._onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_onChangeCallback: function () {}\r\n\r\n} );\r\n\r\nfunction Layers() {\r\n\r\n\tthis.mask = 1 | 0;\r\n\r\n}\r\n\r\nObject.assign( Layers.prototype, {\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tenableAll: function () {\r\n\r\n\t\tthis.mask = 0xffffffff | 0;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel | 0;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\r\n\r\n\t},\r\n\r\n\tdisableAll: function () {\r\n\r\n\t\tthis.mask = 0;\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _object3DId = 0;\r\n\r\nconst _v1$1 = new Vector3();\r\nconst _q1 = new Quaternion();\r\nconst _m1$1 = new Matrix4();\r\nconst _target = new Vector3();\r\n\r\nconst _position = new Vector3();\r\nconst _scale = new Vector3();\r\nconst _quaternion$2 = new Quaternion();\r\n\r\nconst _xAxis = new Vector3( 1, 0, 0 );\r\nconst _yAxis = new Vector3( 0, 1, 0 );\r\nconst _zAxis = new Vector3( 0, 0, 1 );\r\n\r\nconst _addedEvent = { type: 'added' };\r\nconst _removedEvent = { type: 'removed' };\r\n\r\nfunction Object3D() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = Object3D.DefaultUp.clone();\r\n\r\n\tconst position = new Vector3();\r\n\tconst rotation = new Euler();\r\n\tconst quaternion = new Quaternion();\r\n\tconst scale = new Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation._onChange( onRotationChange );\r\n\tquaternion._onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.matrix = new Matrix4();\r\n\tthis.matrixWorld = new Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\r\nObject3D.DefaultMatrixAutoUpdate = true;\r\n\r\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Object3D,\r\n\r\n\tisObject3D: true,\r\n\r\n\tonBeforeRender: function () {},\r\n\tonAfterRender: function () {},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tthis.matrix.premultiply( matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tthis.quaternion.premultiply( q );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.multiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateOnWorldAxis: function ( axis, angle ) {\r\n\r\n\t\t// rotate object on axis in world space\r\n\t\t// axis is assumed to be normalized\r\n\t\t// method assumes no rotated parent\r\n\r\n\t\t_q1.setFromAxisAngle( axis, angle );\r\n\r\n\t\tthis.quaternion.premultiply( _q1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _xAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _yAxis, angle );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\treturn this.rotateOnAxis( _zAxis, angle );\r\n\r\n\t},\r\n\r\n\ttranslateOnAxis: function ( axis, distance ) {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\t_v1$1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\tthis.position.add( _v1$1.multiplyScalar( distance ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslateX: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _xAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateY: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _yAxis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateZ: function ( distance ) {\r\n\r\n\t\treturn this.translateOnAxis( _zAxis, distance );\r\n\r\n\t},\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( x, y, z ) {\r\n\r\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\r\n\r\n\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\t_target.copy( x );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_target.set( x, y, z );\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tif ( this.isCamera || this.isLight ) {\r\n\r\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\r\n\r\n\t\t}\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\r\n\r\n\t\tif ( parent ) {\r\n\r\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\r\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\r\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( object && object.isObject3D ) ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t\tobject.dispatchEvent( _addedEvent );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t\tobject.dispatchEvent( _removedEvent );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tattach: function ( object ) {\r\n\r\n\t\t// adds object as a child of this, while maintaining the object's world transform\r\n\r\n\t\tthis.updateWorldMatrix( true, false );\r\n\r\n\t\t_m1$1.getInverse( this.matrixWorld );\r\n\r\n\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\tobject.parent.updateWorldMatrix( true, false );\r\n\r\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tobject.applyMatrix4( _m1$1 );\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst child = this.children[ i ];\r\n\t\t\tconst object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\r\n\t\t\ttarget = new Quaternion();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldScale: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tconst children = this.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tconst parent = this.parent;\r\n\r\n\t\tif ( updateParents === true && parent !== null ) {\r\n\r\n\t\t\tparent.updateWorldMatrix( true, false );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n\t\tif ( this.parent === null ) {\r\n\r\n\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tif ( updateChildren === true ) {\r\n\r\n\t\t\tconst children = this.children;\r\n\r\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\t// meta is a string when called from JSON.stringify\r\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tconst output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {},\r\n\t\t\t\tshapes: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\r\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\r\n\t\tobject.layers = this.layers.mask;\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\r\n\r\n\t\t// object specific properties\r\n\r\n\t\tif ( this.isInstancedMesh ) {\r\n\r\n\t\t\tobject.type = 'InstancedMesh';\r\n\t\t\tobject.count = this.count;\r\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tfunction serialize( library, element ) {\r\n\r\n\t\t\tif ( library[ element.uuid ] === undefined ) {\r\n\r\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn element.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\r\n\r\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\r\n\r\n\t\t\tconst parameters = this.geometry.parameters;\r\n\r\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\r\n\r\n\t\t\t\tconst shapes = parameters.shapes;\r\n\r\n\t\t\t\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\t\t\t\tserialize( meta.shapes, shape );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tserialize( meta.shapes, shapes );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( Array.isArray( this.material ) ) {\r\n\r\n\t\t\t\tconst uuids = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobject.material = uuids;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tconst geometries = extractFromCache( meta.geometries );\r\n\t\t\tconst materials = extractFromCache( meta.materials );\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\t\t\tconst shapes = extractFromCache( meta.shapes );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.rotation.order = source.rotation.order;\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.layers.mask = source.layers.mask;\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tconst child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Scene() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.background = null;\r\n\tthis.environment = null;\r\n\tthis.fog = null;\r\n\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Scene,\r\n\r\n\tisScene: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tif ( source.background !== null ) this.background = source.background.clone();\r\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\r\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\r\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\r\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\r\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _points = [\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3(),\r\n\tnew Vector3()\r\n];\r\n\r\nconst _vector$1 = new Vector3();\r\n\r\nconst _box = new Box3();\r\n\r\n// triangle centered vertices\r\n\r\nconst _v0 = new Vector3();\r\nconst _v1$2 = new Vector3();\r\nconst _v2 = new Vector3();\r\n\r\n// triangle edge vectors\r\n\r\nconst _f0 = new Vector3();\r\nconst _f1 = new Vector3();\r\nconst _f2 = new Vector3();\r\n\r\nconst _center = new Vector3();\r\nconst _extents = new Vector3();\r\nconst _triangleNormal = new Vector3();\r\nconst _testAxis = new Vector3();\r\n\r\nfunction Box3( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n}\r\n\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tisBox3: true,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\tconst x = array[ i ];\r\n\t\t\tconst y = array[ i + 1 ];\r\n\t\t\tconst z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromBufferAttribute: function ( attribute ) {\r\n\r\n\t\tlet minX = + Infinity;\r\n\t\tlet minY = + Infinity;\r\n\t\tlet minZ = + Infinity;\r\n\r\n\t\tlet maxX = - Infinity;\r\n\t\tlet maxY = - Infinity;\r\n\t\tlet maxZ = - Infinity;\r\n\r\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst x = attribute.getX( i );\r\n\t\t\tconst y = attribute.getY( i );\r\n\t\t\tconst z = attribute.getZ( i );\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\treturn this.expandByObject( object );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByObject: function ( object ) {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tobject.updateWorldMatrix( false, false );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box.copy( geometry.boundingBox );\r\n\t\t\t_box.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\tthis.union( _box );\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.expandByObject( children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\r\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\r\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\tthis.clampPoint( sphere.center, _vector$1 );\r\n\r\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tlet min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\r\n\r\n\t},\r\n\r\n\tintersectsTriangle: function ( triangle ) {\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// compute box center and extents\r\n\t\tthis.getCenter( _center );\r\n\t\t_extents.subVectors( this.max, _center );\r\n\r\n\t\t// translate triangle to aabb origin\r\n\t\t_v0.subVectors( triangle.a, _center );\r\n\t\t_v1$2.subVectors( triangle.b, _center );\r\n\t\t_v2.subVectors( triangle.c, _center );\r\n\r\n\t\t// compute edge vectors for triangle\r\n\t\t_f0.subVectors( _v1$2, _v0 );\r\n\t\t_f1.subVectors( _v2, _v1$2 );\r\n\t\t_f2.subVectors( _v0, _v2 );\r\n\r\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\r\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\r\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\r\n\t\tlet axes = [\r\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\r\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\r\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\r\n\t\t];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// test 3 face normals from the aabb\r\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\r\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\t// finally testing the face normal of the triangle\r\n\t\t// use already existing triangle edge vectors here\r\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\r\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\r\n\r\n\t\treturn satForAxes( axes, _v0, _v1$2, _v2, _extents );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\r\n\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tgetBoundingSphere: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\r\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\r\n\r\n\t\t}\r\n\r\n\t\tthis.getCenter( target.center );\r\n\r\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n\t\tif ( this.isEmpty() ) this.makeEmpty();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\t// transform of empty box is an empty box.\r\n\t\tif ( this.isEmpty() ) return this;\r\n\r\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\r\n\r\n\t\tthis.setFromPoints( _points );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction satForAxes( axes, v0, v1, v2, extents ) {\r\n\r\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\r\n\r\n\t\t_testAxis.fromArray( axes, i );\r\n\t\t// project the aabb onto the seperating axis\r\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\r\n\t\t// project all 3 vertices of the triangle onto the seperating axis\r\n\t\tconst p0 = v0.dot( _testAxis );\r\n\t\tconst p1 = v1.dot( _testAxis );\r\n\t\tconst p2 = v2.dot( _testAxis );\r\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\r\n\r\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\r\n\t\t\t// the axis is seperating and we can exit\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nconst _box$1 = new Box3();\r\n\r\nfunction Sphere( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : - 1;\r\n\r\n}\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points, optionalCenter ) {\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\r\n\r\n\t\t}\r\n\r\n\t\tlet maxRadiusSq = 0;\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\treturn ( this.radius < 0 );\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.center.set( 0, 0, 0 );\r\n\t\tthis.radius = - 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\ttarget.sub( this.center ).normalize();\r\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\r\n\t\t\ttarget = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isEmpty() ) {\r\n\r\n\t\t\t// Empty sphere produces empty bounding box\r\n\t\t\ttarget.makeEmpty();\r\n\t\t\treturn target;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.set( this.center, this.center );\r\n\t\ttarget.expandByScalar( this.radius );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$2 = new Vector3();\r\nconst _segCenter = new Vector3();\r\nconst _segDir = new Vector3();\r\nconst _diff = new Vector3();\r\n\r\nconst _edge1 = new Vector3();\r\nconst _edge2 = new Vector3();\r\nconst _normal = new Vector3();\r\n\r\nfunction Ray( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\r\n\r\n}\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trecast: function ( t ) {\r\n\r\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( point, this.origin );\r\n\r\n\t\tconst directionDistance = target.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn target.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function ( point ) {\r\n\r\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t// point behind the ray\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t}\r\n\r\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\treturn _vector$2.distanceToSquared( point );\r\n\r\n\t},\r\n\r\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n\t\t// It returns the min distance between the ray and the segment\r\n\t\t// defined by v0 and v1\r\n\t\t// It can also set two optional targets :\r\n\t\t// - The closest point on the ray\r\n\t\t// - The closest point on the segment\r\n\r\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t_diff.copy( this.origin ).sub( _segCenter );\r\n\r\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\tconst a01 = - this.direction.dot( _segDir );\r\n\t\tconst b0 = _diff.dot( this.direction );\r\n\t\tconst b1 = - _diff.dot( _segDir );\r\n\t\tconst c = _diff.lengthSq();\r\n\t\tconst det = Math.abs( 1 - a01 * a01 );\r\n\t\tlet s0, s1, sqrDist, extDet;\r\n\r\n\t\tif ( det > 0 ) {\r\n\r\n\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\textDet = segExtent * det;\r\n\r\n\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\tconst invDet = 1 / det;\r\n\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\r\n\r\n\t\t}\r\n\r\n\t\treturn sqrDist;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function ( sphere, target ) {\r\n\r\n\t\t_vector$2.subVectors( sphere.center, this.origin );\r\n\t\tconst tca = _vector$2.dot( this.direction );\r\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\r\n\t\tconst radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\tconst thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\tconst t0 = tca - thc;\r\n\r\n\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\tconst t1 = tca + thc;\r\n\r\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t// test to see if t0 is behind the ray:\r\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\tif ( t0 < 0 ) return this.at( t1, target );\r\n\r\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\treturn this.at( t0, target );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t : null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, target ) {\r\n\r\n\t\tconst t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, target );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tconst denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, target ) {\r\n\r\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tconst invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tconst origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\r\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n\t\t_edge1.subVectors( b, a );\r\n\t\t_edge2.subVectors( c, a );\r\n\t\t_normal.crossVectors( _edge1, _edge2 );\r\n\r\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\tlet DdN = this.direction.dot( _normal );\r\n\t\tlet sign;\r\n\r\n\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\tsign = 1;\r\n\r\n\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\tsign = - 1;\r\n\t\t\tDdN = - DdN;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t_diff.subVectors( this.origin, a );\r\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\r\n\r\n\t\t// b1 < 0, no intersection\r\n\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\r\n\r\n\t\t// b2 < 0, no intersection\r\n\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// b1+b2 > 1, no intersection\r\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Line intersects triangle, check if ray does.\r\n\t\tconst QdN = - sign * _diff.dot( _normal );\r\n\r\n\t\t// t < 0, no intersection\r\n\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\t// Ray intersects triangle.\r\n\t\treturn this.at( QdN / DdN, target );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.transformDirection( matrix4 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector1 = new Vector3();\r\nconst _vector2 = new Vector3();\r\nconst _normalMatrix = new Matrix3();\r\n\r\nfunction Plane( normal, constant ) {\r\n\r\n\t// normal is assumed to be normalized\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n}\r\n\r\nObject.assign( Plane.prototype, {\r\n\r\n\tisPlane: true,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function ( a, b, c ) {\r\n\r\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\r\n\r\n\t},\r\n\r\n\tintersectLine: function ( line, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst direction = line.delta( _vector1 );\r\n\r\n\t\tconst denominator = this.normal.dot( direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\treturn target.copy( line.start );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t},\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tconst startSign = this.distanceToPoint( line.start );\r\n\t\tconst endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\r\n\r\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\r\n\r\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\tthis.constant = - referencePoint.dot( normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant -= offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _v0$1 = new Vector3();\r\nconst _v1$3 = new Vector3();\r\nconst _v2$1 = new Vector3();\r\nconst _v3 = new Vector3();\r\n\r\nconst _vab = new Vector3();\r\nconst _vac = new Vector3();\r\nconst _vbc = new Vector3();\r\nconst _vap = new Vector3();\r\nconst _vbp = new Vector3();\r\nconst _vcp = new Vector3();\r\n\r\nfunction Triangle( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tgetNormal: function ( a, b, c, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\ttarget.subVectors( c, b );\r\n\t\t_v0$1.subVectors( a, b );\r\n\t\ttarget.cross( _v0$1 );\r\n\r\n\t\tconst targetLengthSq = target.lengthSq();\r\n\t\tif ( targetLengthSq > 0 ) {\r\n\r\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( 0, 0, 0 );\r\n\r\n\t},\r\n\r\n\t// static/instance method to calculate barycentric coordinates\r\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n\tgetBarycoord: function ( point, a, b, c, target ) {\r\n\r\n\t\t_v0$1.subVectors( c, a );\r\n\t\t_v1$3.subVectors( b, a );\r\n\t\t_v2$1.subVectors( point, a );\r\n\r\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\r\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\r\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\r\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\r\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\r\n\r\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn target.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tconst invDenom = 1 / denom;\r\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn target.set( 1 - u - v, v, u );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point, a, b, c ) {\r\n\r\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\r\n\r\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\r\n\r\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\r\n\r\n\t\ttarget.set( 0, 0 );\r\n\t\ttarget.addScaledVector( uv1, _v3.x );\r\n\t\ttarget.addScaledVector( uv2, _v3.y );\r\n\t\ttarget.addScaledVector( uv3, _v3.z );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( a, b, c, direction ) {\r\n\r\n\t\t_v0$1.subVectors( c, b );\r\n\t\t_v1$3.subVectors( a, b );\r\n\r\n\t\t// strictly front facing\r\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetArea: function () {\r\n\r\n\t\t_v0$1.subVectors( this.c, this.b );\r\n\t\t_v1$3.subVectors( this.a, this.b );\r\n\r\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\r\n\r\n\t},\r\n\r\n\tgetMidpoint: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tgetNormal: function ( target ) {\r\n\r\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetPlane: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\r\n\t\t\ttarget = new Plane();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tgetBarycoord: function ( point, target ) {\r\n\r\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\r\n\r\n\t},\r\n\r\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\r\n\r\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tisFrontFacing: function ( direction ) {\r\n\r\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsTriangle( this );\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( p, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tconst a = this.a, b = this.b, c = this.c;\r\n\t\tlet v, w;\r\n\r\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\r\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\r\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\r\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\r\n\t\t// the point lies in with the minimum amount of redundant computation.\r\n\r\n\t\t_vab.subVectors( b, a );\r\n\t\t_vac.subVectors( c, a );\r\n\t\t_vap.subVectors( p, a );\r\n\t\tconst d1 = _vab.dot( _vap );\r\n\t\tconst d2 = _vac.dot( _vap );\r\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\r\n\r\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\r\n\t\t\treturn target.copy( a );\r\n\r\n\t\t}\r\n\r\n\t\t_vbp.subVectors( p, b );\r\n\t\tconst d3 = _vab.dot( _vbp );\r\n\t\tconst d4 = _vac.dot( _vbp );\r\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\r\n\r\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\r\n\t\t\treturn target.copy( b );\r\n\r\n\t\t}\r\n\r\n\t\tconst vc = d1 * d4 - d3 * d2;\r\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\r\n\r\n\t\t\tv = d1 / ( d1 - d3 );\r\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\r\n\r\n\t\t}\r\n\r\n\t\t_vcp.subVectors( p, c );\r\n\t\tconst d5 = _vab.dot( _vcp );\r\n\t\tconst d6 = _vac.dot( _vcp );\r\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\r\n\r\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\r\n\t\t\treturn target.copy( c );\r\n\r\n\t\t}\r\n\r\n\t\tconst vb = d5 * d2 - d1 * d6;\r\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\r\n\r\n\t\t\tw = d2 / ( d2 - d6 );\r\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\r\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\r\n\r\n\t\t}\r\n\r\n\t\tconst va = d3 * d6 - d5 * d4;\r\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\r\n\r\n\t\t\t_vbc.subVectors( c, b );\r\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\r\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\r\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\r\n\r\n\t\t}\r\n\r\n\t\t// face region\r\n\t\tconst denom = 1 / ( va + vb + vc );\r\n\t\t// u = va * denom\r\n\t\tv = vb * denom;\r\n\t\tw = vc * denom;\r\n\r\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\nconst _hslA = { h: 0, s: 0, l: 0 };\r\nconst _hslB = { h: 0, s: 0, l: 0 };\r\n\r\nfunction Color( r, g, b ) {\r\n\r\n\tif ( g === undefined && b === undefined ) {\r\n\r\n\t\t// r is THREE.Color, hex or string\r\n\t\treturn this.set( r );\r\n\r\n\t}\r\n\r\n\treturn this.setRGB( r, g, b );\r\n\r\n}\r\n\r\nfunction hue2rgb( p, q, t ) {\r\n\r\n\tif ( t < 0 ) t += 1;\r\n\tif ( t > 1 ) t -= 1;\r\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\tif ( t < 1 / 2 ) return q;\r\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction SRGBToLinear( c ) {\r\n\r\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\r\n\r\n}\r\n\r\nfunction LinearToSRGB( c ) {\r\n\r\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\r\n\r\n}\r\n\r\nObject.assign( Color.prototype, {\r\n\r\n\tisColor: true,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value && value.isColor ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function ( h, s, l ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\th = MathUtils.euclideanModulo( h, 1 );\r\n\t\ts = MathUtils.clamp( s, 0, 1 );\r\n\t\tl = MathUtils.clamp( l, 0, 1 );\r\n\r\n\t\tif ( s === 0 ) {\r\n\r\n\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\tconst q = ( 2 * l ) - p;\r\n\r\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tlet m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tlet color;\r\n\t\t\tconst name = m[ 1 ];\r\n\t\t\tconst components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tconst hex = m[ 1 ];\r\n\t\t\tconst size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\treturn this.setColorName( style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetColorName: function ( style ) {\r\n\r\n\t\t// color keywords\r\n\t\tconst hex = _colorKeywords[ style ];\r\n\r\n\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t// red\r\n\t\t\tthis.setHex( hex );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// unknown color\r\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyGammaToLinear( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function ( gammaFactor ) {\r\n\r\n\t\tthis.copyLinearToGamma( this, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopySRGBToLinear: function ( color ) {\r\n\r\n\t\tthis.r = SRGBToLinear( color.r );\r\n\t\tthis.g = SRGBToLinear( color.g );\r\n\t\tthis.b = SRGBToLinear( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToSRGB: function ( color ) {\r\n\r\n\t\tthis.r = LinearToSRGB( color.r );\r\n\t\tthis.g = LinearToSRGB( color.g );\r\n\t\tthis.b = LinearToSRGB( color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertSRGBToLinear: function () {\r\n\r\n\t\tthis.copySRGBToLinear( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToSRGB: function () {\r\n\r\n\t\tthis.copyLinearToSRGB( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( target ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\r\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\r\n\r\n\t\t}\r\n\r\n\t\tconst r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tconst max = Math.max( r, g, b );\r\n\t\tconst min = Math.min( r, g, b );\r\n\r\n\t\tlet hue, saturation;\r\n\t\tconst lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\ttarget.h = hue;\r\n\t\ttarget.s = saturation;\r\n\t\ttarget.l = lightness;\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\r\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\r\n\r\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( color ) {\r\n\r\n\t\tthis.r = Math.max( 0, this.r - color.r );\r\n\t\tthis.g = Math.max( 0, this.g - color.g );\r\n\t\tthis.b = Math.max( 0, this.b - color.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpHSL: function ( color, alpha ) {\r\n\r\n\t\tthis.getHSL( _hslA );\r\n\t\tcolor.getHSL( _hslB );\r\n\r\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\r\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\r\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\r\n\r\n\t\tthis.setHSL( h, s, l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromBufferAttribute: function ( attribute, index ) {\r\n\r\n\t\tthis.r = attribute.getX( index );\r\n\t\tthis.g = attribute.getY( index );\r\n\t\tthis.b = attribute.getZ( index );\r\n\r\n\t\tif ( attribute.normalized === true ) {\r\n\r\n\t\t\t// assuming Uint8Array\r\n\r\n\t\t\tthis.r /= 255;\r\n\t\t\tthis.g /= 255;\r\n\t\t\tthis.b /= 255;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn this.getHex();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nColor.NAMES = _colorKeywords;\r\n\r\nfunction Face3( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = ( color && color.isColor ) ? color : new Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n}\r\n\r\nObject.assign( Face3.prototype, {\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet materialId = 0;\r\n\r\nfunction Material() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.blending = NormalBlending;\r\n\tthis.side = FrontSide;\r\n\tthis.flatShading = false;\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blendSrc = SrcAlphaFactor;\r\n\tthis.blendDst = OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.stencilWriteMask = 0xff;\r\n\tthis.stencilFunc = AlwaysStencilFunc;\r\n\tthis.stencilRef = 0;\r\n\tthis.stencilFuncMask = 0xff;\r\n\tthis.stencilFail = KeepStencilOp;\r\n\tthis.stencilZFail = KeepStencilOp;\r\n\tthis.stencilZPass = KeepStencilOp;\r\n\tthis.stencilWrite = false;\r\n\r\n\tthis.clippingPlanes = null;\r\n\tthis.clipIntersection = false;\r\n\tthis.clipShadows = false;\r\n\r\n\tthis.shadowSide = null;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.dithering = false;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.toneMapped = true;\r\n\r\n\tthis.userData = {};\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Material,\r\n\r\n\tisMaterial: true,\r\n\r\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\r\n\r\n\tcustomProgramCacheKey: function () {\r\n\r\n\t\treturn this.onBeforeCompile.toString();\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( const key in values ) {\r\n\r\n\t\t\tconst newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// for backward compatability if shading is set in the constructor\r\n\t\t\tif ( key === 'shading' ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue && currentValue.isColor ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\r\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\r\n\r\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\r\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\r\n\r\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\r\n\r\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\r\n\r\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\r\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalMapType = this.normalMapType;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap && this.envMap.isTexture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\t\t\tdata.refractionRatio = this.refractionRatio;\r\n\r\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\r\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\r\n\r\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\r\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\r\n\t\tif ( this.vertexColors ) data.vertexColors = true;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\r\n\t\tdata.depthFunc = this.depthFunc;\r\n\t\tdata.depthTest = this.depthTest;\r\n\t\tdata.depthWrite = this.depthWrite;\r\n\r\n\t\tdata.stencilWrite = this.stencilWrite;\r\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\r\n\t\tdata.stencilFunc = this.stencilFunc;\r\n\t\tdata.stencilRef = this.stencilRef;\r\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\r\n\t\tdata.stencilFail = this.stencilFail;\r\n\t\tdata.stencilZFail = this.stencilZFail;\r\n\t\tdata.stencilZPass = this.stencilZPass;\r\n\r\n\t\t// rotation (SpriteMaterial)\r\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\r\n\r\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\r\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\r\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\r\n\r\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\r\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\r\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\r\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\r\n\r\n\t\tif ( this.dithering === true ) data.dithering = true;\r\n\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\r\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\r\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\r\n\t\tif ( this.skinning === true ) data.skinning = true;\r\n\r\n\t\tif ( this.visible === false ) data.visible = false;\r\n\r\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\r\n\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache( cache ) {\r\n\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( const key in cache ) {\r\n\r\n\t\t\t\tconst data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tconst textures = extractFromCache( meta.textures );\r\n\t\t\tconst images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.fog = source.fog;\r\n\r\n\t\tthis.blending = source.blending;\r\n\t\tthis.side = source.side;\r\n\t\tthis.flatShading = source.flatShading;\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\r\n\t\tthis.stencilFunc = source.stencilFunc;\r\n\t\tthis.stencilRef = source.stencilRef;\r\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\r\n\t\tthis.stencilFail = source.stencilFail;\r\n\t\tthis.stencilZFail = source.stencilZFail;\r\n\t\tthis.stencilZPass = source.stencilZPass;\r\n\t\tthis.stencilWrite = source.stencilWrite;\r\n\r\n\t\tconst srcPlanes = source.clippingPlanes;\r\n\t\tlet dstPlanes = null;\r\n\r\n\t\tif ( srcPlanes !== null ) {\r\n\r\n\t\t\tconst n = srcPlanes.length;\r\n\t\t\tdstPlanes = new Array( n );\r\n\r\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.clippingPlanes = dstPlanes;\r\n\t\tthis.clipIntersection = source.clipIntersection;\r\n\t\tthis.clipShadows = source.clipShadows;\r\n\r\n\t\tthis.shadowSide = source.shadowSide;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.dithering = source.dithering;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.toneMapped = source.toneMapped;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Material.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\r\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\r\n\r\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\r\n\r\nMeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _vector$3 = new Vector3();\r\nconst _vector2$1 = new Vector2();\r\n\r\nfunction BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tif ( Array.isArray( array ) ) {\r\n\r\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n\t}\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\r\n\tthis.normalized = normalized === true;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n}\r\n\r\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\r\n\tisBufferAttribute: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\t\tthis.count = source.count;\r\n\t\tthis.normalized = source.normalized;\r\n\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tconst array = this.array;\r\n\t\tlet offset = 0;\r\n\r\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tlet vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tif ( this.itemSize === 2 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector2$1.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.itemSize === 3 ) {\r\n\r\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\r\n\t\t\t\t_vector$3.applyMatrix3( m );\r\n\r\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyNormalMatrix: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.applyNormalMatrix( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$3.x = this.getX( i );\r\n\t\t\t_vector$3.y = this.getY( i );\r\n\t\t\t_vector$3.z = this.getZ( i );\r\n\r\n\t\t\t_vector$3.transformDirection( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\treturn {\r\n\t\t\titemSize: this.itemSize,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tarray: Array.prototype.slice.call( this.array ),\r\n\t\t\tnormalized: this.normalized\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\r\n\r\n\r\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\r\n\r\n\r\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\r\n\r\n\r\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\r\n\r\n\r\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\r\n\r\n\r\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\r\n\r\n\r\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\r\n\r\n\r\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\r\n\r\n\r\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\r\n\r\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\r\n\r\n}\r\n\r\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\r\n\r\nfunction DirectGeometry() {\r\n\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nObject.assign( DirectGeometry.prototype, {\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tconst groups = [];\r\n\r\n\t\tlet group, i;\r\n\t\tlet materialIndex = undefined;\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tconst faces = geometry.faces;\r\n\t\tconst vertices = geometry.vertices;\r\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tconst morphTargets = geometry.morphTargets;\r\n\t\tconst morphTargetsLength = morphTargets.length;\r\n\r\n\t\tlet morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = {\r\n\t\t\t\t\tname: morphTargets[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphNormals = geometry.morphNormals;\r\n\t\tconst morphNormalsLength = morphNormals.length;\r\n\r\n\t\tlet morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = {\r\n\t\t\t\t\tname: morphNormals[ i ].name,\r\n\t\t\t\t \tdata: []\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tconst skinIndices = geometry.skinIndices;\r\n\t\tconst skinWeights = geometry.skinWeights;\r\n\r\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction arrayMax( array ) {\r\n\r\n\tif ( array.length === 0 ) return - Infinity;\r\n\r\n\tlet max = array[ 0 ];\r\n\r\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\r\n\r\n\t\tif ( array[ i ] > max ) max = array[ i ];\r\n\r\n\t}\r\n\r\n\treturn max;\r\n\r\n}\r\n\r\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\r\n\r\nconst _m1$2 = new Matrix4();\r\nconst _obj = new Object3D();\r\nconst _offset = new Vector3();\r\nconst _box$2 = new Box3();\r\nconst _boxMorphTargets = new Box3();\r\nconst _vector$4 = new Vector3();\r\n\r\nfunction BufferGeometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\tthis.morphTargetsRelative = false;\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n\tthis.userData = {};\r\n\r\n}\r\n\r\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: BufferGeometry,\r\n\r\n\tisBufferGeometry: true,\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tif ( Array.isArray( index ) ) {\r\n\r\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.index = index;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tsetAttribute: function ( name, attribute ) {\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeleteAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tposition.applyMatrix4( matrix );\r\n\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst tangent = this.attributes.tangent;\r\n\r\n\t\tif ( tangent !== undefined ) {\r\n\r\n\t\t\ttangent.transformDirection( matrix );\r\n\r\n\t\t\ttangent.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$2.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$2.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$2.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$2.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$2.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj.lookAt( vector );\r\n\r\n\t\t_obj.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset ).negate();\r\n\r\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( object.isPoints || object.isLine ) {\r\n\r\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isMesh ) {\r\n\r\n\t\t\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tconst position = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tlet geometry = object.geometry;\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tlet direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\r\n\r\n\t\t\t\tdirect = undefined;\r\n\t\t\t\tgeometry.elementsNeedUpdate = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tconst attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tconst attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( const name in geometry.morphTargets ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\r\n\t\t\t\tattribute.name = morphTarget.name;\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\r\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tconst position = this.attributes.position;\r\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\tif ( position ) {\r\n\r\n\t\t\t// first, find the center of the bounding sphere\r\n\r\n\t\t\tconst center = this.boundingSphere.center;\r\n\r\n\t\t\t_box$2.setFromBufferAttribute( position );\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\r\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_box$2.getCenter( center );\r\n\r\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\r\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\tlet maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// process morph attributes if present\r\n\r\n\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\r\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\r\n\r\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\r\n\t\t\t\t\t\t\t_vector$4.add( _offset );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconst index = this.index;\r\n\t\tconst positionAttribute = this.getAttribute( 'position' );\r\n\r\n\t\tif ( positionAttribute !== undefined ) {\r\n\r\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\r\n\r\n\t\t\tif ( normalAttribute === undefined ) {\r\n\r\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\r\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tconst vA = index.getX( i + 0 );\r\n\t\t\t\t\tconst vB = index.getX( i + 1 );\r\n\t\t\t\t\tconst vC = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\r\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\r\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\r\n\r\n\t\t\t\t\tnA.add( cb );\r\n\t\t\t\t\tnB.add( cb );\r\n\t\t\t\t\tnC.add( cb );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\r\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\r\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\r\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tnormalAttribute.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) {\r\n\r\n\t\t\toffset = 0;\r\n\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tconst attribute1 = attributes[ key ];\r\n\t\t\tconst attributeArray1 = attribute1.array;\r\n\r\n\t\t\tconst attribute2 = geometry.attributes[ key ];\r\n\t\t\tconst attributeArray2 = attribute2.array;\r\n\r\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\r\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\r\n\r\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tconst normals = this.attributes.normal;\r\n\r\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\r\n\r\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\r\n\r\n\t\t\t_vector$4.normalize();\r\n\r\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tfunction convertBufferAttribute( attribute, indices ) {\r\n\r\n\t\t\tconst array = attribute.array;\r\n\t\t\tconst itemSize = attribute.itemSize;\r\n\t\t\tconst normalized = attribute.normalized;\r\n\r\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tlet index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry2 = new BufferGeometry();\r\n\r\n\t\tconst indices = this.index.array;\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\t// attributes\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\r\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\tgeometry2.setAttribute( name, newAttribute );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = this.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst morphArray = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = morphAttribute[ i ];\r\n\r\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\t\tmorphArray.push( newAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tconst index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = this.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\tdata.data.attributes[ key ] = attributeData;\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = {};\r\n\t\tlet hasMorphAttributes = false;\r\n\r\n\t\tfor ( const key in this.morphAttributes ) {\r\n\r\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst attribute = attributeArray[ i ];\r\n\r\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\r\n\r\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\r\n\r\n\t\t\t\tarray.push( attributeData );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( array.length > 0 ) {\r\n\r\n\t\t\t\tmorphAttributes[ key ] = array;\r\n\r\n\t\t\t\thasMorphAttributes = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphAttributes ) {\r\n\r\n\t\t\tdata.data.morphAttributes = morphAttributes;\r\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.index = null;\r\n\t\tthis.attributes = {};\r\n\t\tthis.morphAttributes = {};\r\n\t\tthis.groups = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// used for storing cloned, shared data\r\n\r\n\t\tconst data = {};\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// index\r\n\r\n\t\tconst index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// attributes\r\n\r\n\t\tconst attributes = source.attributes;\r\n\r\n\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ name ];\r\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\r\n\r\n\t\t}\r\n\r\n\t\t// morph attributes\r\n\r\n\t\tconst morphAttributes = source.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = [];\r\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\r\n\r\n\t\t// groups\r\n\r\n\t\tconst groups = source.groups;\r\n\r\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// draw range\r\n\r\n\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\tthis.drawRange.count = source.drawRange.count;\r\n\r\n\t\t// user data\r\n\r\n\t\tthis.userData = source.userData;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _inverseMatrix = new Matrix4();\r\nconst _ray = new Ray();\r\nconst _sphere = new Sphere();\r\n\r\nconst _vA = new Vector3();\r\nconst _vB = new Vector3();\r\nconst _vC = new Vector3();\r\n\r\nconst _tempA = new Vector3();\r\nconst _tempB = new Vector3();\r\nconst _tempC = new Vector3();\r\n\r\nconst _morphA = new Vector3();\r\nconst _morphB = new Vector3();\r\nconst _morphC = new Vector3();\r\n\r\nconst _uvA = new Vector2();\r\nconst _uvB = new Vector2();\r\nconst _uvC = new Vector2();\r\n\r\nconst _intersectionPoint = new Vector3();\r\nconst _intersectionPointWorld = new Vector3();\r\n\r\nfunction Mesh( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Mesh,\r\n\r\n\tisMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\r\n\r\n\t\t}\r\n\r\n\t\tif ( source.morphTargetDictionary !== undefined ) {\r\n\r\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\r\n\r\n\t\t}\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst material = this.material;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere.copy( geometry.boundingSphere );\r\n\t\t_sphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix.getInverse( matrixWorld );\r\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t}\r\n\r\n\t\tlet intersection;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\r\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\r\n\t\t\tconst uv = geometry.attributes.uv;\r\n\t\t\tconst uv2 = geometry.attributes.uv2;\r\n\t\t\tconst groups = geometry.groups;\r\n\t\t\tconst drawRange = geometry.drawRange;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t// indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = index.getX( j );\r\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\r\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = index.getX( i );\r\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\r\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\t\t// non-indexed buffer geometry\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\r\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst a = j;\r\n\t\t\t\t\t\t\tconst b = j + 1;\r\n\t\t\t\t\t\t\tconst c = j + 2;\r\n\r\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\r\n\t\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\r\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\r\n\r\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tconst a = i;\r\n\t\t\t\t\t\tconst b = i + 1;\r\n\t\t\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst isMultiMaterial = Array.isArray( material );\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst faces = geometry.faces;\r\n\t\t\tlet uvs;\r\n\r\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = faces[ f ];\r\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\tconst fvA = vertices[ face.a ];\r\n\t\t\t\tconst fvB = vertices[ face.b ];\r\n\t\t\t\tconst fvC = vertices[ face.c ];\r\n\r\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\r\n\r\n\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\r\n\r\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\r\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tlet intersect;\r\n\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\t_intersectionPointWorld.copy( point );\r\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: _intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\r\n\r\n\t_vA.fromBufferAttribute( position, a );\r\n\t_vB.fromBufferAttribute( position, b );\r\n\t_vC.fromBufferAttribute( position, c );\r\n\r\n\tconst morphInfluences = object.morphTargetInfluences;\r\n\r\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\r\n\r\n\t\t_morphA.set( 0, 0, 0 );\r\n\t\t_morphB.set( 0, 0, 0 );\r\n\t\t_morphC.set( 0, 0, 0 );\r\n\r\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst influence = morphInfluences[ i ];\r\n\t\t\tconst morphAttribute = morphPosition[ i ];\r\n\r\n\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\r\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\r\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\r\n\r\n\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\r\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\r\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_vA.add( _morphA );\r\n\t\t_vB.add( _morphB );\r\n\t\t_vC.add( _morphC );\r\n\r\n\t}\r\n\r\n\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\tobject.boneTransform( a, _vA );\r\n\t\tobject.boneTransform( b, _vB );\r\n\t\tobject.boneTransform( c, _vC );\r\n\r\n\t}\r\n\r\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2 ) {\r\n\r\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\r\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\r\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\r\n\r\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = new Face3( a, b, c );\r\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\nlet _geometryId = 0; // Geometry uses even numbers as Id\r\nconst _m1$3 = new Matrix4();\r\nconst _obj$1 = new Object3D();\r\nconst _offset$1 = new Vector3();\r\n\r\nfunction Geometry() {\r\n\r\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [[]];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n}\r\n\r\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: Geometry,\r\n\r\n\tisGeometry: true,\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\t_m1$3.makeRotationX( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\t_m1$3.makeRotationY( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\t_m1$3.makeRotationZ( angle );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( x, y, z ) {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\t_m1$3.makeTranslation( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( x, y, z ) {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\t_m1$3.makeScale( x, y, z );\r\n\r\n\t\tthis.applyMatrix4( _m1$3 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function ( vector ) {\r\n\r\n\t\t_obj$1.lookAt( vector );\r\n\r\n\t\t_obj$1.updateMatrix();\r\n\r\n\t\tthis.applyMatrix4( _obj$1.matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tif ( attributes.position === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tconst position = attributes.position;\r\n\t\tconst normal = attributes.normal;\r\n\t\tconst color = attributes.color;\r\n\t\tconst uv = attributes.uv;\r\n\t\tconst uv2 = attributes.uv2;\r\n\r\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\r\n\r\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\r\n\r\n\t\t\tif ( color !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\r\n\t\t\t\tscope.colors[ a ].clone(),\r\n\t\t\t\tscope.colors[ b ].clone(),\r\n\t\t\t\tscope.colors[ c ].clone()\r\n\t\t\t];\r\n\r\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\r\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\r\n\t\t\t];\r\n\r\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uv !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\r\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\r\n\t\t\t\t] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = geometry.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\r\n\r\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tconst center = this.boundingSphere.center;\r\n\t\tconst radius = this.boundingSphere.radius;\r\n\r\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tconst matrix = new Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tconst vertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst vA = this.vertices[ face.a ];\r\n\t\t\t\tconst vB = this.vertices[ face.b ];\r\n\t\t\t\tconst vC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.computeFaceNormals();\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeFlatVertexNormals: function () {\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\r\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\r\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tconst tmpGeo = new Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tconst faceNormal = new Vector3();\r\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet normalMatrix,\r\n\t\t\tvertexOffset = this.vertices.length,\r\n\t\t\tvertices1 = this.vertices,\r\n\t\t\tvertices2 = geometry.vertices,\r\n\t\t\tfaces1 = this.faces,\r\n\t\t\tfaces2 = geometry.faces,\r\n\t\t\tcolors1 = this.colors,\r\n\t\t\tcolors2 = geometry.colors;\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst vertex = vertices2[ i ];\r\n\r\n\t\t\tconst vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\r\n\r\n\t\t\tcolors1.push( colors2[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tlet face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tconst unique = [], changes = [];\r\n\r\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tconst precision = Math.pow( 10, precisionPoints );\r\n\r\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst v = this.vertices[ i ];\r\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tconst faceIndicesToRemove = [];\r\n\r\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tconst indices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tconst idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tconst diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.vertices = [];\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tconst faces = this.faces;\r\n\t\tconst length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tlet newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tconst vertices = [];\r\n\r\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tconst vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = [];\r\n\t\tconst normals = [];\r\n\t\tconst normalsHash = {};\r\n\t\tconst colors = [];\r\n\t\tconst colorsHash = {};\r\n\t\tconst uvs = [];\r\n\t\tconst uvsHash = {};\r\n\r\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tconst face = this.faces[ i ];\r\n\r\n\t\t\tconst hasMaterial = true;\r\n\t\t\tconst hasFaceUv = false; // deprecated\r\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tlet faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tconst vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tconst vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t // Handle primitives\r\n\r\n\t\t const parameters = this.parameters;\r\n\r\n\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t const values = [];\r\n\r\n\t\t for ( const key in parameters ) {\r\n\r\n\t\t values.push( parameters[ key ] );\r\n\r\n\t\t }\r\n\r\n\t\t const geometry = Object.create( this.constructor.prototype );\r\n\t\t this.constructor.apply( geometry, values );\r\n\t\t return geometry;\r\n\r\n\t\t }\r\n\r\n\t\t return new this.constructor().copy( this );\r\n\t\t */\r\n\r\n\t\treturn new Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\t// reset\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [[]];\r\n\t\tthis.morphTargets = [];\r\n\t\tthis.morphNormals = [];\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\tthis.lineDistances = [];\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\r\n\t\t// name\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\t// vertices\r\n\r\n\t\tconst vertices = source.vertices;\r\n\r\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// colors\r\n\r\n\t\tconst colors = source.colors;\r\n\r\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.colors.push( colors[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tconst faces = source.faces;\r\n\r\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// face vertex uvs\r\n\r\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tconst uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphTargets = source.morphTargets;\r\n\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = {};\r\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\r\n\r\n\t\t\t// vertices\r\n\r\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.vertices = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// normals\r\n\r\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\r\n\r\n\t\t\t\tmorphTarget.normals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.push( morphTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// morph normals\r\n\r\n\t\tconst morphNormals = source.morphNormals;\r\n\r\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphNormal = {};\r\n\r\n\t\t\t// vertex normals\r\n\r\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.vertexNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\r\n\t\t\t\t\tconst destVertexNormal = {};\r\n\r\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\r\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\r\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\r\n\r\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// face normals\r\n\r\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\r\n\r\n\t\t\t\tmorphNormal.faceNormals = [];\r\n\r\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphNormals.push( morphNormal );\r\n\r\n\t\t}\r\n\r\n\t\t// skin weights\r\n\r\n\t\tconst skinWeights = source.skinWeights;\r\n\r\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// skin indices\r\n\r\n\t\tconst skinIndices = source.skinIndices;\r\n\r\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\t// line distances\r\n\r\n\t\tconst lineDistances = source.lineDistances;\r\n\r\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// bounding box\r\n\r\n\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// bounding sphere\r\n\r\n\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\t// update flags\r\n\r\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\r\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\r\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// BoxGeometry\r\n\r\nclass BoxGeometry extends Geometry {\r\n\r\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\t\tthis.mergeVertices();\r\n\r\n\t}\r\n\r\n}\r\n\r\n// BoxBufferGeometry\r\n\r\nclass BoxBufferGeometry extends BufferGeometry {\r\n\r\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'BoxBufferGeometry';\r\n\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\t// segments\r\n\r\n\t\twidthSegments = Math.floor( widthSegments );\r\n\t\theightSegments = Math.floor( heightSegments );\r\n\t\tdepthSegments = Math.floor( depthSegments );\r\n\r\n\t\t// buffers\r\n\r\n\t\tconst indices = [];\r\n\t\tconst vertices = [];\r\n\t\tconst normals = [];\r\n\t\tconst uvs = [];\r\n\r\n\t\t// helper variables\r\n\r\n\t\tlet numberOfVertices = 0;\r\n\t\tlet groupStart = 0;\r\n\r\n\t\t// build each side of the box geometry\r\n\r\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\r\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\r\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\r\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\r\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t\t// build geometry\r\n\r\n\t\tthis.setIndex( indices );\r\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\t\tconst segmentWidth = width / gridX;\r\n\t\t\tconst segmentHeight = height / gridY;\r\n\r\n\t\t\tconst widthHalf = width / 2;\r\n\t\t\tconst heightHalf = height / 2;\r\n\t\t\tconst depthHalf = depth / 2;\r\n\r\n\t\t\tconst gridX1 = gridX + 1;\r\n\t\t\tconst gridY1 = gridY + 1;\r\n\r\n\t\t\tlet vertexCounter = 0;\r\n\t\t\tlet groupCount = 0;\r\n\r\n\t\t\tconst vector = new Vector3();\r\n\r\n\t\t\t// generate vertices, normals and uvs\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t\t// now apply vector to vertex buffer\r\n\r\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// set values to correct vector component\r\n\r\n\t\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t\t// now apply vector to normal buffer\r\n\r\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\r\n\r\n\t\t\t\t\t// uvs\r\n\r\n\t\t\t\t\tuvs.push( ix / gridX );\r\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t\t\t\t// counters\r\n\r\n\t\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\t// 1. you need three indices to draw a single face\r\n\t\t\t// 2. a single segment consists of two faces\r\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t\t// faces\r\n\r\n\t\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t\t// increase counter\r\n\r\n\t\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t\t// calculate new start value for groups\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\r\n\t\t\t// update total number of vertices\r\n\r\n\t\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nfunction cloneUniforms( src ) {\r\n\r\n\tconst dst = {};\r\n\r\n\tfor ( const u in src ) {\r\n\r\n\t\tdst[ u ] = {};\r\n\r\n\t\tfor ( const p in src[ u ] ) {\r\n\r\n\t\t\tconst property = src[ u ][ p ];\r\n\r\n\t\t\tif ( property && ( property.isColor ||\r\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\r\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\r\n\t\t\t\tproperty.isTexture ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.clone();\r\n\r\n\t\t\t} else if ( Array.isArray( property ) ) {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property.slice();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdst[ u ][ p ] = property;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dst;\r\n\r\n}\r\n\r\nfunction mergeUniforms( uniforms ) {\r\n\r\n\tconst merged = {};\r\n\r\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\r\n\r\n\t\tfor ( const p in tmp ) {\r\n\r\n\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn merged;\r\n\r\n}\r\n\r\n// Legacy\r\n\r\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\r\n\r\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\r\n\r\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\r\n\r\n/**\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction ShaderMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = default_vertex;\r\n\tthis.fragmentShader = default_fragment;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\tthis.lights = false; // set to use scene lights\r\n\tthis.clipping = false; // set to use user-defined clipping planes\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\tthis.uniformsNeedUpdate = false;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\r\n\r\nShaderMaterial.prototype = Object.create( Material.prototype );\r\nShaderMaterial.prototype.constructor = ShaderMaterial;\r\n\r\nShaderMaterial.prototype.isShaderMaterial = true;\r\n\r\nShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = cloneUniforms( source.uniforms );\r\n\r\n\tthis.defines = Object.assign( {}, source.defines );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.lights = source.lights;\r\n\tthis.clipping = source.clipping;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = Object.assign( {}, source.extensions );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tconst data = Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = {};\r\n\r\n\tfor ( const name in this.uniforms ) {\r\n\r\n\t\tconst uniform = this.uniforms[ name ];\r\n\t\tconst value = uniform.value;\r\n\r\n\t\tif ( value && value.isTexture ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 't',\r\n\t\t\t\tvalue: value.toJSON( meta ).uuid\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isColor ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'c',\r\n\t\t\t\tvalue: value.getHex()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector2 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v2',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isVector4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'v4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix3 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm3',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else if ( value && value.isMatrix4 ) {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\ttype: 'm4',\r\n\t\t\t\tvalue: value.toArray()\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata.uniforms[ name ] = {\r\n\t\t\t\tvalue: value\r\n\t\t\t};\r\n\r\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\r\n\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\tconst extensions = {};\r\n\r\n\tfor ( const key in this.extensions ) {\r\n\r\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\r\n\r\n\t}\r\n\r\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nfunction Camera() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new Matrix4();\r\n\r\n\tthis.projectionMatrix = new Matrix4();\r\n\tthis.projectionMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Camera,\r\n\r\n\tisCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\r\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetWorldDirection: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tconst e = this.matrixWorld.elements;\r\n\r\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\r\n\r\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\r\n\r\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PerspectiveCamera( fov, aspect, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\tthis.focus = 10;\r\n\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.view = null;\r\n\r\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\r\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: PerspectiveCamera,\r\n\r\n\tisPerspectiveCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\tthis.focus = source.focus;\r\n\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\tthis.filmGauge = source.filmGauge;\r\n\t\tthis.filmOffset = source.filmOffset;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */\r\n\tsetFocalLength: function ( focalLength ) {\r\n\r\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */\r\n\tgetFocalLength: function () {\r\n\r\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\r\n\r\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n\t},\r\n\r\n\tgetEffectiveFOV: function () {\r\n\r\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\r\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n\t},\r\n\r\n\tgetFilmWidth: function () {\r\n\r\n\t\t// film not completely covered in portrait format (aspect < 1)\r\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\tgetFilmHeight: function () {\r\n\r\n\t\t// film not completely covered in landscape format (aspect > 1)\r\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   const w = 1920;\r\n\t *   const h = 1080;\r\n\t *   const fullWidth = w * 3;\r\n\t *   const fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tthis.aspect = fullWidth / fullHeight;\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tlet near = this.near,\r\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n\t\t\theight = 2 * top,\r\n\t\t\twidth = this.aspect * height,\r\n\t\t\tleft = - 0.5 * width,\r\n\t\t\tview = this.view;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst fullWidth = view.fullWidth,\r\n\t\t\t\tfullHeight = view.fullHeight;\r\n\r\n\t\t\tleft += view.offsetX * width / fullWidth;\r\n\t\t\ttop -= view.offsetY * height / fullHeight;\r\n\t\t\twidth *= view.width / fullWidth;\r\n\t\t\theight *= view.height / fullHeight;\r\n\r\n\t\t}\r\n\r\n\t\tconst skew = this.filmOffset;\r\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.zoom = this.zoom;\r\n\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\tdata.object.focus = this.focus;\r\n\r\n\t\tdata.object.aspect = this.aspect;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\tdata.object.filmGauge = this.filmGauge;\r\n\t\tdata.object.filmOffset = this.filmOffset;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst fov = 90, aspect = 1;\r\n\r\nfunction CubeCamera( near, far, renderTarget ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\r\n\r\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.renderTarget = renderTarget;\r\n\r\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.layers = this.layers;\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.layers = this.layers;\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.layers = this.layers;\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.layers = this.layers;\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.layers = this.layers;\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.layers = this.layers;\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.update = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tconst currentXrEnabled = renderer.xr.enabled;\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\trenderer.xr.enabled = false;\r\n\r\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 0 );\r\n\t\trenderer.render( scene, cameraPX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 1 );\r\n\t\trenderer.render( scene, cameraNX );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 2 );\r\n\t\trenderer.render( scene, cameraPY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 3 );\r\n\t\trenderer.render( scene, cameraNY );\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 4 );\r\n\t\trenderer.render( scene, cameraPZ );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget, 5 );\r\n\t\trenderer.render( scene, cameraNZ );\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t\trenderer.xr.enabled = currentXrEnabled;\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( renderer, color, depth, stencil ) {\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\trenderer.setRenderTarget( renderTarget, i );\r\n\r\n\t\t\trenderer.clear( color, depth, stencil );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget( currentRenderTarget );\r\n\r\n\t};\r\n\r\n}\r\n\r\nCubeCamera.prototype = Object.create( Object3D.prototype );\r\nCubeCamera.prototype.constructor = CubeCamera;\r\n\r\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\r\n\r\n\tif ( Number.isInteger( options ) ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\r\n\r\n\t\toptions = dummy;\r\n\r\n\t}\r\n\r\n\tWebGLRenderTarget.call( this, size, size, options );\r\n\r\n}\r\n\r\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\r\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\r\n\r\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\r\n\r\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\r\n\r\n\tthis.texture.type = texture.type;\r\n\tthis.texture.format = RGBAFormat; // see #18859\r\n\tthis.texture.encoding = texture.encoding;\r\n\r\n\tthis.texture.generateMipmaps = texture.generateMipmaps;\r\n\tthis.texture.minFilter = texture.minFilter;\r\n\tthis.texture.magFilter = texture.magFilter;\r\n\r\n\tconst scene = new Scene();\r\n\r\n\tconst shader = {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\r\n\r\n\t\t\t\t#include <begin_vertex>\r\n\t\t\t\t#include <project_vertex>\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tuniform sampler2D tEquirect;\r\n\r\n\t\t\tvarying vec3 vWorldDirection;\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\r\n\r\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\r\n\r\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\r\n\r\n\t\t\t}\r\n\t\t`\r\n\t};\r\n\r\n\tconst material = new ShaderMaterial( {\r\n\r\n\t\tname: 'CubemapFromEquirect',\r\n\r\n\t\tuniforms: cloneUniforms( shader.uniforms ),\r\n\t\tvertexShader: shader.vertexShader,\r\n\t\tfragmentShader: shader.fragmentShader,\r\n\t\tside: BackSide,\r\n\t\tblending: NoBlending\r\n\r\n\t} );\r\n\r\n\tmaterial.uniforms.tEquirect.value = texture;\r\n\r\n\tconst mesh = new Mesh( new BoxBufferGeometry( 5, 5, 5 ), material );\r\n\r\n\tscene.add( mesh );\r\n\r\n\tconst camera = new CubeCamera( 1, 10, this );\r\n\tcamera.update( renderer, scene );\r\n\r\n\tmesh.geometry.dispose();\r\n\tmesh.material.dispose();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\tthis.unpackAlignment = 1;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture.prototype = Object.create( Texture.prototype );\r\nDataTexture.prototype.constructor = DataTexture;\r\n\r\nDataTexture.prototype.isDataTexture = true;\r\n\r\nconst _sphere$1 = new Sphere();\r\nconst _vector$5 = new Vector3();\r\n\r\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new Plane()\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( Frustum.prototype, {\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromProjectionMatrix: function ( m ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst me = m.elements;\r\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function ( object ) {\r\n\r\n\t\tconst geometry = object.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSprite: function ( sprite ) {\r\n\r\n\t\t_sphere$1.center.set( 0, 0, 0 );\r\n\t\t_sphere$1.radius = 0.7071067811865476;\r\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\treturn this.intersectsSphere( _sphere$1 );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\t\tconst center = sphere.center;\r\n\t\tconst negRadius = - sphere.radius;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst plane = planes[ i ];\r\n\r\n\t\t\t// corner at max distance\r\n\r\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tconst planes = this.planes;\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nconst UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\r\n\t\tmap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() },\r\n\t\tuv2Transform: { value: new Matrix3() },\r\n\r\n\t\talphaMap: { value: null },\r\n\r\n\t},\r\n\r\n\tspecularmap: {\r\n\r\n\t\tspecularMap: { value: null },\r\n\r\n\t},\r\n\r\n\tenvmap: {\r\n\r\n\t\tenvMap: { value: null },\r\n\t\tflipEnvMap: { value: - 1 },\r\n\t\treflectivity: { value: 1.0 },\r\n\t\trefractionRatio: { value: 0.98 },\r\n\t\tmaxMipLevel: { value: 0 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\taoMap: { value: null },\r\n\t\taoMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\tlightMap: { value: null },\r\n\t\tlightMapIntensity: { value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\temissiveMap: { value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\tbumpMap: { value: null },\r\n\t\tbumpScale: { value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\tnormalMap: { value: null },\r\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\tdisplacementMap: { value: null },\r\n\t\tdisplacementScale: { value: 1 },\r\n\t\tdisplacementBias: { value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\troughnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\tmetalnessMap: { value: null }\r\n\r\n\t},\r\n\r\n\tgradientmap: {\r\n\r\n\t\tgradientMap: { value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\tfogDensity: { value: 0.00025 },\r\n\t\tfogNear: { value: 1 },\r\n\t\tfogFar: { value: 2000 },\r\n\t\tfogColor: { value: new Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\tambientLightColor: { value: [] },\r\n\r\n\t\tlightProbe: { value: [] },\r\n\r\n\t\tdirectionalLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tcolor: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tdirectionalShadowMap: { value: [] },\r\n\t\tdirectionalShadowMatrix: { value: [] },\r\n\r\n\t\tspotLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdirection: {},\r\n\t\t\tdistance: {},\r\n\t\t\tconeCos: {},\r\n\t\t\tpenumbraCos: {},\r\n\t\t\tdecay: {}\r\n\t\t} },\r\n\r\n\t\tspotLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {}\r\n\t\t} },\r\n\r\n\t\tspotShadowMap: { value: [] },\r\n\t\tspotShadowMatrix: { value: [] },\r\n\r\n\t\tpointLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\tdecay: {},\r\n\t\t\tdistance: {}\r\n\t\t} },\r\n\r\n\t\tpointLightShadows: { value: [], properties: {\r\n\t\t\tshadowBias: {},\r\n\t\t\tshadowNormalBias: {},\r\n\t\t\tshadowRadius: {},\r\n\t\t\tshadowMapSize: {},\r\n\t\t\tshadowCameraNear: {},\r\n\t\t\tshadowCameraFar: {}\r\n\t\t} },\r\n\r\n\t\tpointShadowMap: { value: [] },\r\n\t\tpointShadowMatrix: { value: [] },\r\n\r\n\t\themisphereLights: { value: [], properties: {\r\n\t\t\tdirection: {},\r\n\t\t\tskyColor: {},\r\n\t\t\tgroundColor: {}\r\n\t\t} },\r\n\r\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\r\n\t\trectAreaLights: { value: [], properties: {\r\n\t\t\tcolor: {},\r\n\t\t\tposition: {},\r\n\t\t\twidth: {},\r\n\t\t\theight: {}\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tsize: { value: 1.0 },\r\n\t\tscale: { value: 1.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\r\n\t\topacity: { value: 1.0 },\r\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\r\n\t\trotation: { value: 0.0 },\r\n\t\tmap: { value: null },\r\n\t\talphaMap: { value: null },\r\n\t\tuvTransform: { value: new Matrix3() }\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction WebGLAnimation() {\r\n\r\n\tlet context = null;\r\n\tlet isAnimating = false;\r\n\tlet animationLoop = null;\r\n\tlet requestId = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tanimationLoop( time, frame );\r\n\r\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tstart: function () {\r\n\r\n\t\t\tif ( isAnimating === true ) return;\r\n\t\t\tif ( animationLoop === null ) return;\r\n\r\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\r\n\r\n\t\t\tisAnimating = true;\r\n\r\n\t\t},\r\n\r\n\t\tstop: function () {\r\n\r\n\t\t\tcontext.cancelAnimationFrame( requestId );\r\n\r\n\t\t\tisAnimating = false;\r\n\r\n\t\t},\r\n\r\n\t\tsetAnimationLoop: function ( callback ) {\r\n\r\n\t\t\tanimationLoop = callback;\r\n\r\n\t\t},\r\n\r\n\t\tsetContext: function ( value ) {\r\n\r\n\t\t\tcontext = value;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLAttributes( gl, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tconst buffers = new WeakMap();\r\n\r\n\tfunction createBuffer( attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst usage = attribute.usage;\r\n\r\n\t\tconst buffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\t\tgl.bufferData( bufferType, array, usage );\r\n\r\n\t\tattribute.onUploadCallback();\r\n\r\n\t\tlet type = 5126;\r\n\r\n\t\tif ( array instanceof Float32Array ) {\r\n\r\n\t\t\ttype = 5126;\r\n\r\n\t\t} else if ( array instanceof Float64Array ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\r\n\r\n\t\t} else if ( array instanceof Uint16Array ) {\r\n\r\n\t\t\ttype = 5123;\r\n\r\n\t\t} else if ( array instanceof Int16Array ) {\r\n\r\n\t\t\ttype = 5122;\r\n\r\n\t\t} else if ( array instanceof Uint32Array ) {\r\n\r\n\t\t\ttype = 5125;\r\n\r\n\t\t} else if ( array instanceof Int32Array ) {\r\n\r\n\t\t\ttype = 5124;\r\n\r\n\t\t} else if ( array instanceof Int8Array ) {\r\n\r\n\t\t\ttype = 5120;\r\n\r\n\t\t} else if ( array instanceof Uint8Array ) {\r\n\r\n\t\t\ttype = 5121;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tbuffer: buffer,\r\n\t\t\ttype: type,\r\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\r\n\t\t\tversion: attribute.version\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\r\n\r\n\t\tconst array = attribute.array;\r\n\t\tconst updateRange = attribute.updateRange;\r\n\r\n\t\tgl.bindBuffer( bufferType, buffer );\r\n\r\n\t\tif ( updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, array );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateRange.count = - 1; // reset range\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction get( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\treturn buffers.get( attribute );\r\n\r\n\t}\r\n\r\n\tfunction remove( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data ) {\r\n\r\n\t\t\tgl.deleteBuffer( data.buffer );\r\n\r\n\t\t\tbuffers.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction update( attribute, bufferType ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n\t\tconst data = buffers.get( attribute );\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\r\n\r\n\t\t} else if ( data.version < attribute.version ) {\r\n\r\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\r\n\r\n\t\t\tdata.version = attribute.version;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\n// PlaneGeometry\r\n\r\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\r\nPlaneGeometry.prototype.constructor = PlaneGeometry;\r\n\r\n// PlaneBufferGeometry\r\n\r\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\twidth = width || 1;\r\n\theight = height || 1;\r\n\r\n\tconst width_half = width / 2;\r\n\tconst height_half = height / 2;\r\n\r\n\tconst gridX = Math.floor( widthSegments ) || 1;\r\n\tconst gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tconst gridX1 = gridX + 1;\r\n\tconst gridY1 = gridY + 1;\r\n\r\n\tconst segment_width = width / gridX;\r\n\tconst segment_height = height / gridY;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tconst y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tconst x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices.push( x, - y, 0 );\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\tuvs.push( ix / gridX );\r\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tconst a = ix + gridX1 * iy;\r\n\t\t\tconst b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\r\n\r\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\r\n\r\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\r\n\r\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\r\n\r\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\r\n\r\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\r\n\r\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\r\n\r\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\r\n\r\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\r\n\r\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\r\n\r\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\r\n\r\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\r\n\r\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\r\n\r\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_maxMipLevel 8.0\\n#define cubeUV_minMipLevel 4.0\\n#define cubeUV_maxTileSize 256.0\\n#define cubeUV_minTileSize 16.0\\nfloat getFace(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    float face = -1.0;\\n    if (absDirection.x > absDirection.z) {\\n      if (absDirection.x > absDirection.y)\\n        face = direction.x > 0.0 ? 0.0 : 3.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    } else {\\n      if (absDirection.z > absDirection.y)\\n        face = direction.z > 0.0 ? 2.0 : 5.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    }\\n    return face;\\n}\\nvec2 getUV(vec3 direction, float face) {\\n    vec2 uv;\\n    if (face == 0.0) {\\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\\n    return 0.5 * (uv + 1.0);\\n}\\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\\n  float face = getFace(direction);\\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\\n  mipInt = max(mipInt, cubeUV_minMipLevel);\\n  float faceSize = exp2(mipInt);\\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\\n  vec2 f = fract(uv);\\n  uv += 0.5 - f;\\n  if (face > 2.0) {\\n    uv.y += faceSize;\\n    face -= 3.0;\\n  }\\n  uv.x += face * faceSize;\\n  if(mipInt < cubeUV_maxMipLevel){\\n    uv.y += 2.0 * cubeUV_maxTileSize;\\n  }\\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\\n  uv *= texelSize;\\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x += texelSize;\\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.y += texelSize;\\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x -= texelSize;\\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  vec3 tm = mix(tl, tr, f.x);\\n  vec3 bm = mix(bl, br, f.x);\\n  return mix(tm, bm, f.y);\\n}\\n#define r0 1.0\\n#define v0 0.339\\n#define m0 -2.0\\n#define r1 0.8\\n#define v1 0.276\\n#define m1 -1.0\\n#define r4 0.4\\n#define v4 0.046\\n#define m4 2.0\\n#define r5 0.305\\n#define v5 0.016\\n#define m5 3.0\\n#define r6 0.21\\n#define v6 0.0038\\n#define m6 4.0\\nfloat roughnessToMip(float roughness) {\\n  float mip = 0.0;\\n  if (roughness >= r1) {\\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\\n  } else if (roughness >= r4) {\\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\\n  } else if (roughness >= r5) {\\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\\n  } else if (roughness >= r6) {\\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\\n  } else {\\n    mip = -2.0 * log2(1.16 * roughness);  }\\n  return mip;\\n}\\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\\n  float mipF = fract(mip);\\n  float mipInt = floor(mip);\\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\\n  if (mipF == 0.0) {\\n    return vec4(color0, 1.0);\\n  } else {\\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\\n    return vec4(mix(color0, color1, mipF), 1.0);\\n  }\\n}\\n#endif\";\r\n\r\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\r\n\r\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\r\n\r\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\r\n\r\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\r\n\r\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\r\n\r\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\r\n\r\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\r\n\r\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\r\n\r\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\r\n\r\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\r\n\r\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\r\n\r\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\r\n\r\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\r\n\r\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\r\n\r\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\r\n\r\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\r\n\r\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\r\n\r\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\r\n\r\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\r\n\r\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\r\n\r\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\r\n\r\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\r\n\r\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\r\n\r\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\r\n\r\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\r\n\r\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\r\n\r\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\r\n\r\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\r\n\r\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\r\n\r\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\r\n\r\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\r\n\r\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\r\n\r\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\r\n\r\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\r\n\r\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\r\n\r\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\r\n\r\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\r\n\r\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\r\n\r\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\r\n\r\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\r\n\r\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\r\n\r\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\r\n\r\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\r\n\r\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\r\n\r\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\r\n\r\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\r\n\r\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\r\n\r\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\r\n\r\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\r\n\r\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\r\n\r\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\r\n\r\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\r\n\r\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\r\n\r\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\r\n\r\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\r\n\r\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\r\n\r\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\r\n\r\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\r\n\r\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\r\n\r\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\r\n\r\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\r\n\r\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\r\n\r\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\r\n\r\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\r\n\r\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\r\n\r\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\r\n\r\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\r\n\r\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\r\n\r\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\r\n\r\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\r\n\r\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\r\n\r\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\r\n\r\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\r\n\r\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\r\n\r\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\r\n\r\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\r\n\r\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\r\n\r\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\r\n\r\nconst ShaderChunk = {\r\n\talphamap_fragment: alphamap_fragment,\r\n\talphamap_pars_fragment: alphamap_pars_fragment,\r\n\talphatest_fragment: alphatest_fragment,\r\n\taomap_fragment: aomap_fragment,\r\n\taomap_pars_fragment: aomap_pars_fragment,\r\n\tbegin_vertex: begin_vertex,\r\n\tbeginnormal_vertex: beginnormal_vertex,\r\n\tbsdfs: bsdfs,\r\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\r\n\tclipping_planes_fragment: clipping_planes_fragment,\r\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\r\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\r\n\tclipping_planes_vertex: clipping_planes_vertex,\r\n\tcolor_fragment: color_fragment,\r\n\tcolor_pars_fragment: color_pars_fragment,\r\n\tcolor_pars_vertex: color_pars_vertex,\r\n\tcolor_vertex: color_vertex,\r\n\tcommon: common,\r\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\r\n\tdefaultnormal_vertex: defaultnormal_vertex,\r\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\r\n\tdisplacementmap_vertex: displacementmap_vertex,\r\n\temissivemap_fragment: emissivemap_fragment,\r\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\r\n\tencodings_fragment: encodings_fragment,\r\n\tencodings_pars_fragment: encodings_pars_fragment,\r\n\tenvmap_fragment: envmap_fragment,\r\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\r\n\tenvmap_pars_fragment: envmap_pars_fragment,\r\n\tenvmap_pars_vertex: envmap_pars_vertex,\r\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\r\n\tenvmap_vertex: envmap_vertex,\r\n\tfog_vertex: fog_vertex,\r\n\tfog_pars_vertex: fog_pars_vertex,\r\n\tfog_fragment: fog_fragment,\r\n\tfog_pars_fragment: fog_pars_fragment,\r\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\r\n\tlightmap_fragment: lightmap_fragment,\r\n\tlightmap_pars_fragment: lightmap_pars_fragment,\r\n\tlights_lambert_vertex: lights_lambert_vertex,\r\n\tlights_pars_begin: lights_pars_begin,\r\n\tlights_toon_fragment: lights_toon_fragment,\r\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\r\n\tlights_phong_fragment: lights_phong_fragment,\r\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\r\n\tlights_physical_fragment: lights_physical_fragment,\r\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\r\n\tlights_fragment_begin: lights_fragment_begin,\r\n\tlights_fragment_maps: lights_fragment_maps,\r\n\tlights_fragment_end: lights_fragment_end,\r\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\r\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\r\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\r\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\r\n\tmap_fragment: map_fragment,\r\n\tmap_pars_fragment: map_pars_fragment,\r\n\tmap_particle_fragment: map_particle_fragment,\r\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\r\n\tmetalnessmap_fragment: metalnessmap_fragment,\r\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\r\n\tmorphnormal_vertex: morphnormal_vertex,\r\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\r\n\tmorphtarget_vertex: morphtarget_vertex,\r\n\tnormal_fragment_begin: normal_fragment_begin,\r\n\tnormal_fragment_maps: normal_fragment_maps,\r\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\r\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\r\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\r\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\r\n\tpacking: packing,\r\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\r\n\tproject_vertex: project_vertex,\r\n\tdithering_fragment: dithering_fragment,\r\n\tdithering_pars_fragment: dithering_pars_fragment,\r\n\troughnessmap_fragment: roughnessmap_fragment,\r\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\r\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\r\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\r\n\tshadowmap_vertex: shadowmap_vertex,\r\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\r\n\tskinbase_vertex: skinbase_vertex,\r\n\tskinning_pars_vertex: skinning_pars_vertex,\r\n\tskinning_vertex: skinning_vertex,\r\n\tskinnormal_vertex: skinnormal_vertex,\r\n\tspecularmap_fragment: specularmap_fragment,\r\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\r\n\ttonemapping_fragment: tonemapping_fragment,\r\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\r\n\ttransmissionmap_fragment: transmissionmap_fragment,\r\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\r\n\tuv_pars_fragment: uv_pars_fragment,\r\n\tuv_pars_vertex: uv_pars_vertex,\r\n\tuv_vertex: uv_vertex,\r\n\tuv2_pars_fragment: uv2_pars_fragment,\r\n\tuv2_pars_vertex: uv2_pars_vertex,\r\n\tuv2_vertex: uv2_vertex,\r\n\tworldpos_vertex: worldpos_vertex,\r\n\r\n\tbackground_frag: background_frag,\r\n\tbackground_vert: background_vert,\r\n\tcube_frag: cube_frag,\r\n\tcube_vert: cube_vert,\r\n\tdepth_frag: depth_frag,\r\n\tdepth_vert: depth_vert,\r\n\tdistanceRGBA_frag: distanceRGBA_frag,\r\n\tdistanceRGBA_vert: distanceRGBA_vert,\r\n\tequirect_frag: equirect_frag,\r\n\tequirect_vert: equirect_vert,\r\n\tlinedashed_frag: linedashed_frag,\r\n\tlinedashed_vert: linedashed_vert,\r\n\tmeshbasic_frag: meshbasic_frag,\r\n\tmeshbasic_vert: meshbasic_vert,\r\n\tmeshlambert_frag: meshlambert_frag,\r\n\tmeshlambert_vert: meshlambert_vert,\r\n\tmeshmatcap_frag: meshmatcap_frag,\r\n\tmeshmatcap_vert: meshmatcap_vert,\r\n\tmeshtoon_frag: meshtoon_frag,\r\n\tmeshtoon_vert: meshtoon_vert,\r\n\tmeshphong_frag: meshphong_frag,\r\n\tmeshphong_vert: meshphong_vert,\r\n\tmeshphysical_frag: meshphysical_frag,\r\n\tmeshphysical_vert: meshphysical_vert,\r\n\tnormal_frag: normal_frag,\r\n\tnormal_vert: normal_vert,\r\n\tpoints_frag: points_frag,\r\n\tpoints_vert: points_vert,\r\n\tshadow_frag: shadow_frag,\r\n\tshadow_vert: shadow_vert,\r\n\tsprite_frag: sprite_frag,\r\n\tsprite_vert: sprite_vert\r\n};\r\n\r\nconst ShaderLib = {\r\n\r\n\tbasic: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\r\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\r\n\r\n\t},\r\n\r\n\tlambert: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\r\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\r\n\r\n\t},\r\n\r\n\tphong: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.specularmap,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\r\n\t\t\t\tshininess: { value: 30 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphong_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphong_frag\r\n\r\n\t},\r\n\r\n\tstandard: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.roughnessmap,\r\n\t\t\tUniformsLib.metalnessmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\r\n\t\t\t\troughness: { value: 1.0 },\r\n\t\t\t\tmetalness: { value: 0.0 },\r\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n\t},\r\n\r\n\ttoon: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.aomap,\r\n\t\t\tUniformsLib.lightmap,\r\n\t\t\tUniformsLib.emissivemap,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.gradientmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\tUniformsLib.lights,\r\n\t\t\t{\r\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\r\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\r\n\r\n\t},\r\n\r\n\tmatcap: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tmatcap: { value: null }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\r\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.points,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.points_vert,\r\n\t\tfragmentShader: ShaderChunk.points_frag\r\n\r\n\t},\r\n\r\n\tdashed: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tscale: { value: 1 },\r\n\t\t\t\tdashSize: { value: 1 },\r\n\t\t\t\ttotalSize: { value: 2 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.linedashed_vert,\r\n\t\tfragmentShader: ShaderChunk.linedashed_frag\r\n\r\n\t},\r\n\r\n\tdepth: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.depth_vert,\r\n\t\tfragmentShader: ShaderChunk.depth_frag\r\n\r\n\t},\r\n\r\n\tnormal: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.bumpmap,\r\n\t\t\tUniformsLib.normalmap,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.normal_vert,\r\n\t\tfragmentShader: ShaderChunk.normal_frag\r\n\r\n\t},\r\n\r\n\tsprite: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.sprite,\r\n\t\t\tUniformsLib.fog\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.sprite_vert,\r\n\t\tfragmentShader: ShaderChunk.sprite_frag\r\n\r\n\t},\r\n\r\n\tbackground: {\r\n\r\n\t\tuniforms: {\r\n\t\t\tuvTransform: { value: new Matrix3() },\r\n\t\t\tt2D: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.background_vert,\r\n\t\tfragmentShader: ShaderChunk.background_frag\r\n\r\n\t},\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\tcube: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.envmap,\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.cube_vert,\r\n\t\tfragmentShader: ShaderChunk.cube_frag\r\n\r\n\t},\r\n\r\n\tequirect: {\r\n\r\n\t\tuniforms: {\r\n\t\t\ttEquirect: { value: null },\r\n\t\t},\r\n\r\n\t\tvertexShader: ShaderChunk.equirect_vert,\r\n\t\tfragmentShader: ShaderChunk.equirect_frag\r\n\r\n\t},\r\n\r\n\tdistanceRGBA: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.common,\r\n\t\t\tUniformsLib.displacementmap,\r\n\t\t\t{\r\n\t\t\t\treferencePosition: { value: new Vector3() },\r\n\t\t\t\tnearDistance: { value: 1 },\r\n\t\t\t\tfarDistance: { value: 1000 }\r\n\t\t\t}\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\r\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\r\n\r\n\t},\r\n\r\n\tshadow: {\r\n\r\n\t\tuniforms: mergeUniforms( [\r\n\t\t\tUniformsLib.lights,\r\n\t\t\tUniformsLib.fog,\r\n\t\t\t{\r\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t},\r\n\t\t] ),\r\n\r\n\t\tvertexShader: ShaderChunk.shadow_vert,\r\n\t\tfragmentShader: ShaderChunk.shadow_frag\r\n\r\n\t}\r\n\r\n};\r\n\r\nShaderLib.physical = {\r\n\r\n\tuniforms: mergeUniforms( [\r\n\t\tShaderLib.standard.uniforms,\r\n\t\t{\r\n\t\t\tclearcoat: { value: 0 },\r\n\t\t\tclearcoatMap: { value: null },\r\n\t\t\tclearcoatRoughness: { value: 0 },\r\n\t\t\tclearcoatRoughnessMap: { value: null },\r\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\r\n\t\t\tclearcoatNormalMap: { value: null },\r\n\t\t\tsheen: { value: new Color( 0x000000 ) },\r\n\t\t\ttransmission: { value: 0 },\r\n\t\t\ttransmissionMap: { value: null },\r\n\t\t}\r\n\t] ),\r\n\r\n\tvertexShader: ShaderChunk.meshphysical_vert,\r\n\tfragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n};\r\n\r\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\r\n\r\n\tconst clearColor = new Color( 0x000000 );\r\n\tlet clearAlpha = 0;\r\n\r\n\tlet planeMesh;\r\n\tlet boxMesh;\r\n\r\n\tlet currentBackground = null;\r\n\tlet currentBackgroundVersion = 0;\r\n\tlet currentTonemapping = null;\r\n\r\n\tfunction render( renderList, scene, camera, forceClear ) {\r\n\r\n\t\tlet background = scene.isScene === true ? scene.background : null;\r\n\r\n\t\t// Ignore background in AR\r\n\t\t// TODO: Reconsider this.\r\n\r\n\t\tconst xr = renderer.xr;\r\n\t\tconst session = xr.getSession && xr.getSession();\r\n\r\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\r\n\r\n\t\t\tbackground = null;\r\n\r\n\t\t}\r\n\r\n\t\tif ( background === null ) {\r\n\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t} else if ( background && background.isColor ) {\r\n\r\n\t\t\tsetClear( background, 1 );\r\n\t\t\tforceClear = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderer.autoClear || forceClear ) {\r\n\r\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\r\n\r\n\t\t\tif ( boxMesh === undefined ) {\r\n\r\n\t\t\t\tboxMesh = new Mesh(\r\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\r\n\t\t\t\t\t\tside: BackSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\r\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\r\n\r\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\r\n\r\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( boxMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst texture = background.isWebGLCubeRenderTarget ? background.texture : background;\r\n\r\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\r\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tboxMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = texture.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\r\n\r\n\t\t} else if ( background && background.isTexture ) {\r\n\r\n\t\t\tif ( planeMesh === undefined ) {\r\n\r\n\t\t\t\tplaneMesh = new Mesh(\r\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\r\n\t\t\t\t\tnew ShaderMaterial( {\r\n\t\t\t\t\t\tname: 'BackgroundMaterial',\r\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\r\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\r\n\t\t\t\t\t\tside: FrontSide,\r\n\t\t\t\t\t\tdepthTest: false,\r\n\t\t\t\t\t\tdepthWrite: false,\r\n\t\t\t\t\t\tfog: false\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\r\n\r\n\t\t\t\t// enable code injection for non-built-in material\r\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\r\n\r\n\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tobjects.update( planeMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\r\n\r\n\t\t\tif ( background.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tbackground.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\r\n\r\n\t\t\tif ( currentBackground !== background ||\r\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\r\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\r\n\r\n\t\t\t\tplaneMesh.material.needsUpdate = true;\r\n\r\n\t\t\t\tcurrentBackground = background;\r\n\t\t\t\tcurrentBackgroundVersion = background.version;\r\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// push to the pre-sorted opaque render list\r\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setClear( color, alpha ) {\r\n\r\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetClearColor: function () {\r\n\r\n\t\t\treturn clearColor;\r\n\r\n\t\t},\r\n\t\tsetClearColor: function ( color, alpha ) {\r\n\r\n\t\t\tclearColor.set( color );\r\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\tgetClearAlpha: function () {\r\n\r\n\t\t\treturn clearAlpha;\r\n\r\n\t\t},\r\n\t\tsetClearAlpha: function ( alpha ) {\r\n\r\n\t\t\tclearAlpha = alpha;\r\n\t\t\tsetClear( clearColor, clearAlpha );\r\n\r\n\t\t},\r\n\t\trender: render\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\r\n\r\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\r\n\r\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\r\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\r\n\r\n\tconst bindingStates = {};\r\n\r\n\tconst defaultState = createBindingState( null );\r\n\tlet currentState = defaultState;\r\n\r\n\tfunction setup( object, material, program, geometry, index ) {\r\n\r\n\t\tlet updateBuffers = false;\r\n\r\n\t\tif ( vaoAvailable ) {\r\n\r\n\t\t\tconst state = getBindingState( geometry, program, material );\r\n\r\n\t\t\tif ( currentState !== state ) {\r\n\r\n\t\t\t\tcurrentState = state;\r\n\t\t\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = needsUpdate( geometry );\r\n\r\n\t\t\tif ( updateBuffers ) saveCache( geometry );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\t\tif ( currentState.geometry !== geometry.id ||\r\n\t\t\t\tcurrentState.program !== program.id ||\r\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\r\n\r\n\t\t\t\tcurrentState.geometry = geometry.id;\r\n\t\t\t\tcurrentState.program = program.id;\r\n\t\t\t\tcurrentState.wireframe = wireframe;\r\n\r\n\t\t\t\tupdateBuffers = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh === true ) {\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattributes.update( index, 34963 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createVertexArrayObject() {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\r\n\r\n\t\treturn extension.createVertexArrayOES();\r\n\r\n\t}\r\n\r\n\tfunction bindVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\r\n\r\n\t\treturn extension.bindVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction deleteVertexArrayObject( vao ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\r\n\r\n\t\treturn extension.deleteVertexArrayOES( vao );\r\n\r\n\t}\r\n\r\n\tfunction getBindingState( geometry, program, material ) {\r\n\r\n\t\tconst wireframe = ( material.wireframe === true );\r\n\r\n\t\tlet programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tif ( programMap === undefined ) {\r\n\r\n\t\t\tprogramMap = {};\r\n\t\t\tbindingStates[ geometry.id ] = programMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet stateMap = programMap[ program.id ];\r\n\r\n\t\tif ( stateMap === undefined ) {\r\n\r\n\t\t\tstateMap = {};\r\n\t\t\tprogramMap[ program.id ] = stateMap;\r\n\r\n\t\t}\r\n\r\n\t\tlet state = stateMap[ wireframe ];\r\n\r\n\t\tif ( state === undefined ) {\r\n\r\n\t\t\tstate = createBindingState( createVertexArrayObject() );\r\n\t\t\tstateMap[ wireframe ] = state;\r\n\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\r\n\t}\r\n\r\n\tfunction createBindingState( vao ) {\r\n\r\n\t\tconst newAttributes = [];\r\n\t\tconst enabledAttributes = [];\r\n\t\tconst attributeDivisors = [];\r\n\r\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\t\t\tenabledAttributes[ i ] = 0;\r\n\t\t\tattributeDivisors[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\r\n\t\t\t// for backward compatibility on non-VAO support browser\r\n\t\t\tgeometry: null,\r\n\t\t\tprogram: null,\r\n\t\t\twireframe: false,\r\n\r\n\t\t\tnewAttributes: newAttributes,\r\n\t\t\tenabledAttributes: enabledAttributes,\r\n\t\t\tattributeDivisors: attributeDivisors,\r\n\t\t\tobject: vao,\r\n\t\t\tattributes: {}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction needsUpdate( geometry ) {\r\n\r\n\t\tconst cachedAttributes = currentState.attributes;\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\r\n\r\n\t\tfor ( const key in geometryAttributes ) {\r\n\r\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\r\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\r\n\r\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\r\n\r\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction saveCache( geometry ) {\r\n\r\n\t\tconst cache = {};\r\n\t\tconst attributes = geometry.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\r\n\t\t\tconst data = {};\r\n\t\t\tdata.attribute = attribute;\r\n\r\n\t\t\tif ( attribute.data ) {\r\n\r\n\t\t\t\tdata.data = attribute.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache[ key ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentState.attributes = cache;\r\n\r\n\t}\r\n\r\n\tfunction initAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\r\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction enableAttribute( attribute ) {\r\n\r\n\t\tenableAttributeAndDivisor( attribute, 0 );\r\n\r\n\t}\r\n\r\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\t\tconst attributeDivisors = currentState.attributeDivisors;\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disableUnusedAttributes() {\r\n\r\n\t\tconst newAttributes = currentState.newAttributes;\r\n\t\tconst enabledAttributes = currentState.enabledAttributes;\r\n\r\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\r\n\r\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\r\n\r\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\r\n\r\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\r\n\r\n\t\t}\r\n\r\n\t\tinitAttributes();\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( const name in programAttributes ) {\r\n\r\n\t\t\tconst programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\r\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\r\n\r\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst data = geometryAttribute.data;\r\n\t\t\t\t\t\tconst stride = data.stride;\r\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\r\n\r\n\t\t\t\t\t// TODO Attribute may not be available on context restore\r\n\r\n\t\t\t\t\tif ( attribute === undefined ) continue;\r\n\r\n\t\t\t\t\tconst buffer = attribute.buffer;\r\n\t\t\t\t\tconst type = attribute.type;\r\n\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\r\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\r\n\r\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\r\n\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\r\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdisableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\treset();\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete bindingStates[ geometryId ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfGeometry( geometry ) {\r\n\r\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\r\n\r\n\t\tconst programMap = bindingStates[ geometry.id ];\r\n\r\n\t\tfor ( const programId in programMap ) {\r\n\r\n\t\t\tconst stateMap = programMap[ programId ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ programId ];\r\n\r\n\t\t}\r\n\r\n\t\tdelete bindingStates[ geometry.id ];\r\n\r\n\t}\r\n\r\n\tfunction releaseStatesOfProgram( program ) {\r\n\r\n\t\tfor ( const geometryId in bindingStates ) {\r\n\r\n\t\t\tconst programMap = bindingStates[ geometryId ];\r\n\r\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\r\n\r\n\t\t\tconst stateMap = programMap[ program.id ];\r\n\r\n\t\t\tfor ( const wireframe in stateMap ) {\r\n\r\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\r\n\r\n\t\t\t\tdelete stateMap[ wireframe ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete programMap[ program.id ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\tresetDefaultState();\r\n\r\n\t\tif ( currentState === defaultState ) return;\r\n\r\n\t\tcurrentState = defaultState;\r\n\t\tbindVertexArrayObject( currentState.object );\r\n\r\n\t}\r\n\r\n\t// for backward-compatilibity\r\n\r\n\tfunction resetDefaultState() {\r\n\r\n\t\tdefaultState.geometry = null;\r\n\t\tdefaultState.program = null;\r\n\t\tdefaultState.wireframe = false;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tsetup: setup,\r\n\t\treset: reset,\r\n\t\tresetDefaultState: resetDefaultState,\r\n\t\tdispose: dispose,\r\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\r\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\r\n\r\n\t\tinitAttributes: initAttributes,\r\n\t\tenableAttribute: enableAttribute,\r\n\t\tdisableUnusedAttributes: disableUnusedAttributes\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawArrays( mode, start, count );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawArraysInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, start, count, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLCapabilities( gl, extensions, parameters ) {\r\n\r\n\tlet maxAnisotropy;\r\n\r\n\tfunction getMaxAnisotropy() {\r\n\r\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaxAnisotropy = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxAnisotropy;\r\n\r\n\t}\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\r\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\t/* eslint-disable no-undef */\r\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\r\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\r\n\t/* eslint-enable no-undef */\r\n\r\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n\tconst maxPrecision = getMaxPrecision( precision );\r\n\r\n\tif ( maxPrecision !== precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\r\n\t\tprecision = maxPrecision;\r\n\r\n\t}\r\n\r\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\r\n\r\n\tconst maxTextures = gl.getParameter( 34930 );\r\n\tconst maxVertexTextures = gl.getParameter( 35660 );\r\n\tconst maxTextureSize = gl.getParameter( 3379 );\r\n\tconst maxCubemapSize = gl.getParameter( 34076 );\r\n\r\n\tconst maxAttributes = gl.getParameter( 34921 );\r\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\r\n\tconst maxVaryings = gl.getParameter( 36348 );\r\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\r\n\r\n\tconst vertexTextures = maxVertexTextures > 0;\r\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\r\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\r\n\r\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\r\n\r\n\treturn {\r\n\r\n\t\tisWebGL2: isWebGL2,\r\n\r\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\r\n\t\tgetMaxPrecision: getMaxPrecision,\r\n\r\n\t\tprecision: precision,\r\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\tmaxTextures: maxTextures,\r\n\t\tmaxVertexTextures: maxVertexTextures,\r\n\t\tmaxTextureSize: maxTextureSize,\r\n\t\tmaxCubemapSize: maxCubemapSize,\r\n\r\n\t\tmaxAttributes: maxAttributes,\r\n\t\tmaxVertexUniforms: maxVertexUniforms,\r\n\t\tmaxVaryings: maxVaryings,\r\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\r\n\r\n\t\tvertexTextures: vertexTextures,\r\n\t\tfloatFragmentTextures: floatFragmentTextures,\r\n\t\tfloatVertexTextures: floatVertexTextures,\r\n\r\n\t\tmaxSamples: maxSamples\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLClipping() {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet globalState = null,\r\n\t\tnumGlobalPlanes = 0,\r\n\t\tlocalClippingEnabled = false,\r\n\t\trenderingShadows = false;\r\n\r\n\tconst plane = new Plane(),\r\n\t\tviewNormalMatrix = new Matrix3(),\r\n\r\n\t\tuniform = { value: null, needsUpdate: false };\r\n\r\n\tthis.uniform = uniform;\r\n\tthis.numPlanes = 0;\r\n\tthis.numIntersection = 0;\r\n\r\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\r\n\r\n\t\tconst enabled =\r\n\t\t\tplanes.length !== 0 ||\r\n\t\t\tenableLocalClipping ||\r\n\t\t\t// enable state of previous frame - the clipping code has to\r\n\t\t\t// run another frame in order to reset the state:\r\n\t\t\tnumGlobalPlanes !== 0 ||\r\n\t\t\tlocalClippingEnabled;\r\n\r\n\t\tlocalClippingEnabled = enableLocalClipping;\r\n\r\n\t\tglobalState = projectPlanes( planes, camera, 0 );\r\n\t\tnumGlobalPlanes = planes.length;\r\n\r\n\t\treturn enabled;\r\n\r\n\t};\r\n\r\n\tthis.beginShadows = function () {\r\n\r\n\t\trenderingShadows = true;\r\n\t\tprojectPlanes( null );\r\n\r\n\t};\r\n\r\n\tthis.endShadows = function () {\r\n\r\n\t\trenderingShadows = false;\r\n\t\tresetGlobalState();\r\n\r\n\t};\r\n\r\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\r\n\r\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\r\n\r\n\t\t\t// there's no local clipping\r\n\r\n\t\t\tif ( renderingShadows ) {\r\n\r\n\t\t\t\t// there's no global clipping\r\n\r\n\t\t\t\tprojectPlanes( null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresetGlobalState();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n\t\t\t\tlGlobal = nGlobal * 4;\r\n\r\n\t\t\tlet dstArray = cache.clippingState || null;\r\n\r\n\t\t\tuniform.value = dstArray; // ensure unique state\r\n\r\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\r\n\r\n\t\t\t\tdstArray[ i ] = globalState[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache.clippingState = dstArray;\r\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\r\n\t\t\tthis.numPlanes += nGlobal;\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tfunction resetGlobalState() {\r\n\r\n\t\tif ( uniform.value !== globalState ) {\r\n\r\n\t\t\tuniform.value = globalState;\r\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = numGlobalPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t}\r\n\r\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n\t\tlet nPlanes = planes !== null ? planes.length : 0,\r\n\t\t\tdstArray = null;\r\n\r\n\t\tif ( nPlanes !== 0 ) {\r\n\r\n\t\t\tdstArray = uniform.value;\r\n\r\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\r\n\r\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\r\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\r\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniform.value = dstArray;\r\n\t\t\tuniform.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = nPlanes;\r\n\t\tscope.numIntersection = 0;\r\n\r\n\t\treturn dstArray;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLExtensions( gl ) {\r\n\r\n\tconst extensions = {};\r\n\r\n\treturn {\r\n\r\n\t\thas: function ( name ) {\r\n\r\n\t\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\t\treturn extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet extension;\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'WEBGL_depth_texture':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\textensions[ name ] = extension;\r\n\r\n\t\t\treturn !! extension;\r\n\r\n\t\t},\r\n\r\n\t\tget: function ( name ) {\r\n\r\n\t\t\tif ( ! this.has( name ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\r\n\r\n\tconst geometries = new WeakMap();\r\n\tconst wireframeAttributes = new WeakMap();\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tconst geometry = event.target;\r\n\t\tconst buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( const name in buffergeometry.attributes ) {\r\n\r\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tgeometries.delete( geometry );\r\n\r\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\r\n\r\n\t\tif ( attribute ) {\r\n\r\n\t\t\tattributes.remove( attribute );\r\n\t\t\twireframeAttributes.delete( buffergeometry );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\r\n\r\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\r\n\r\n\t\t\tdelete geometry._maxInstanceCount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction get( object, geometry ) {\r\n\r\n\t\tlet buffergeometry = geometries.get( geometry );\r\n\r\n\t\tif ( buffergeometry ) return buffergeometry;\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries.set( geometry, buffergeometry );\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction update( geometry ) {\r\n\r\n\t\tconst geometryAttributes = geometry.attributes;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\r\n\r\n\t\tfor ( const name in geometryAttributes ) {\r\n\r\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tconst morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\tconst array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tattributes.update( array[ i ], 34962 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateWireframeAttribute( geometry ) {\r\n\r\n\t\tconst indices = [];\r\n\r\n\t\tconst geometryIndex = geometry.index;\r\n\t\tconst geometryPosition = geometry.attributes.position;\r\n\t\tlet version = 0;\r\n\r\n\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\tconst array = geometryIndex.array;\r\n\t\t\tversion = geometryIndex.version;\r\n\r\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = array[ i + 0 ];\r\n\t\t\t\tconst b = array[ i + 1 ];\r\n\t\t\t\tconst c = array[ i + 2 ];\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst array = geometryPosition.array;\r\n\t\t\tversion = geometryPosition.version;\r\n\r\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tconst a = i + 0;\r\n\t\t\t\tconst b = i + 1;\r\n\t\t\t\tconst c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\r\n\t\tattribute.version = version;\r\n\r\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\r\n\r\n\t\t//\r\n\r\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\r\n\r\n\t\t//\r\n\r\n\t\twireframeAttributes.set( geometry, attribute );\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\r\n\r\n\t\tif ( currentAttribute ) {\r\n\r\n\t\t\tconst geometryIndex = geometry.index;\r\n\r\n\t\t\tif ( geometryIndex !== null ) {\r\n\r\n\t\t\t\t// if the attribute is obsolete, create a new one\r\n\r\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\r\n\r\n\t\t\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tupdateWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\treturn wireframeAttributes.get( geometry );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tget: get,\r\n\t\tupdate: update,\r\n\r\n\t\tgetWireframeAttribute: getWireframeAttribute\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tlet mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tlet type, bytesPerElement;\r\n\r\n\tfunction setIndex( value ) {\r\n\r\n\t\ttype = value.type;\r\n\t\tbytesPerElement = value.bytesPerElement;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\r\n\r\n\t\tinfo.update( count, mode, 1 );\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( start, count, primcount ) {\r\n\r\n\t\tif ( primcount === 0 ) return;\r\n\r\n\t\tlet extension, methodName;\r\n\r\n\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\textension = gl;\r\n\t\t\tmethodName = 'drawElementsInstanced';\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\r\n\r\n\t\tinfo.update( count, mode, primcount );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n}\r\n\r\nfunction WebGLInfo( gl ) {\r\n\r\n\tconst memory = {\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\t};\r\n\r\n\tconst render = {\r\n\t\tframe: 0,\r\n\t\tcalls: 0,\r\n\t\ttriangles: 0,\r\n\t\tpoints: 0,\r\n\t\tlines: 0\r\n\t};\r\n\r\n\tfunction update( count, mode, instanceCount ) {\r\n\r\n\t\trender.calls ++;\r\n\r\n\t\tswitch ( mode ) {\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\trender.lines += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\trender.points += instanceCount * count;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reset() {\r\n\r\n\t\trender.frame ++;\r\n\t\trender.calls = 0;\r\n\t\trender.triangles = 0;\r\n\t\trender.points = 0;\r\n\t\trender.lines = 0;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tmemory: memory,\r\n\t\trender: render,\r\n\t\tprograms: null,\r\n\t\tautoReset: true,\r\n\t\treset: reset,\r\n\t\tupdate: update\r\n\t};\r\n\r\n}\r\n\r\nfunction numericalSort( a, b ) {\r\n\r\n\treturn a[ 0 ] - b[ 0 ];\r\n\r\n}\r\n\r\nfunction absNumericalSort( a, b ) {\r\n\r\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\r\n\r\n}\r\n\r\nfunction WebGLMorphtargets( gl ) {\r\n\r\n\tconst influencesList = {};\r\n\tconst morphInfluences = new Float32Array( 8 );\r\n\r\n\tconst workInfluences = [];\r\n\r\n\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\tworkInfluences[ i ] = [ i, 0 ];\r\n\r\n\t}\r\n\r\n\tfunction update( object, geometry, material, program ) {\r\n\r\n\t\tconst objectInfluences = object.morphTargetInfluences;\r\n\r\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\r\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\r\n\r\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\r\n\r\n\t\tlet influences = influencesList[ geometry.id ];\r\n\r\n\t\tif ( influences === undefined ) {\r\n\r\n\t\t\t// initialise list\r\n\r\n\t\t\tinfluences = [];\r\n\r\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinfluencesList[ geometry.id ] = influences;\r\n\r\n\t\t}\r\n\r\n\t\t// Collect influences\r\n\r\n\t\tfor ( let i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tconst influence = influences[ i ];\r\n\r\n\t\t\tinfluence[ 0 ] = i;\r\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tinfluences.sort( absNumericalSort );\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\r\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tworkInfluences.sort( numericalSort );\r\n\r\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\r\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\r\n\r\n\t\tlet morphInfluencesSum = 0;\r\n\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tconst influence = workInfluences[ i ];\r\n\t\t\tconst index = influence[ 0 ];\r\n\t\t\tconst value = influence[ 1 ];\r\n\r\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\r\n\r\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = value;\r\n\t\t\t\tmorphInfluencesSum += value;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\r\n\r\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphInfluences[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\r\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\r\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\r\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\r\n\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\r\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLObjects( gl, geometries, attributes, info ) {\r\n\r\n\tlet updateMap = new WeakMap();\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\tconst geometry = object.geometry;\r\n\t\tconst buffergeometry = geometries.get( object, geometry );\r\n\r\n\t\t// Update once per frame\r\n\r\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\r\n\r\n\t\t\tif ( geometry.isGeometry ) {\r\n\r\n\t\t\t\tbuffergeometry.updateFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometries.update( buffergeometry );\r\n\r\n\t\t\tupdateMap.set( buffergeometry, frame );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\r\n\r\n\t\t}\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tupdateMap = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\r\n\tformat = format !== undefined ? format : RGBFormat;\r\n\r\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.flipY = false;\r\n\r\n}\r\n\r\nCubeTexture.prototype = Object.create( Texture.prototype );\r\nCubeTexture.prototype.constructor = CubeTexture;\r\n\r\nCubeTexture.prototype.isCubeTexture = true;\r\n\r\nObject.defineProperty( CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DataTexture2DArray( data, width, height, depth ) {\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\r\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\r\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\r\n\r\nfunction DataTexture3D( data, width, height, depth ) {\r\n\r\n\t// We're going to add .setXXX() methods for setting properties later.\r\n\t// Users can still set in DataTexture3D directly.\r\n\t//\r\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\r\n\t// \ttexture.anisotropy = 16;\r\n\t//\r\n\t// See #14839\r\n\r\n\tTexture.call( this, null );\r\n\r\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\r\n\r\n\tthis.magFilter = NearestFilter;\r\n\tthis.minFilter = NearestFilter;\r\n\r\n\tthis.wrapR = ClampToEdgeWrapping;\r\n\r\n\tthis.generateMipmaps = false;\r\n\tthis.flipY = false;\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n\r\n}\r\n\r\nDataTexture3D.prototype = Object.create( Texture.prototype );\r\nDataTexture3D.prototype.constructor = DataTexture3D;\r\nDataTexture3D.prototype.isDataTexture3D = true;\r\n\r\n/**\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [textures] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'textures' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (textures factorizations):\r\n *\r\n * .upload( gl, seq, values, textures )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n *\r\n * Methods of the top-level container (textures factorizations):\r\n *\r\n * .setValue( gl, name, value, textures )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n */\r\n\r\nconst emptyTexture = new Texture();\r\nconst emptyTexture2dArray = new DataTexture2DArray();\r\nconst emptyTexture3d = new DataTexture3D();\r\nconst emptyCubeTexture = new CubeTexture();\r\n\r\n// --- Utilities ---\r\n\r\n// Array Caches (provide typed arrays for temporary by size)\r\n\r\nconst arrayCacheF32 = [];\r\nconst arrayCacheI32 = [];\r\n\r\n// Float32Array caches used for uploading Matrix uniforms\r\n\r\nconst mat4array = new Float32Array( 16 );\r\nconst mat3array = new Float32Array( 9 );\r\nconst mat2array = new Float32Array( 4 );\r\n\r\n// Flattening for arrays of vectors and matrices\r\n\r\nfunction flatten( array, nBlocks, blockSize ) {\r\n\r\n\tconst firstElem = array[ 0 ];\r\n\r\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\r\n\t// unoptimized: ! isNaN( firstElem )\r\n\t// see http://jacksondunstan.com/articles/983\r\n\r\n\tlet n = nBlocks * blockSize,\r\n\t\tr = arrayCacheF32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Float32Array( n );\r\n\t\tarrayCacheF32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tif ( nBlocks !== 0 ) {\r\n\r\n\t\tfirstElem.toArray( r, 0 );\r\n\r\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n\t\t\toffset += blockSize;\r\n\t\t\tarray[ i ].toArray( r, offset );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\nfunction arraysEqual( a, b ) {\r\n\r\n\tif ( a.length !== b.length ) return false;\r\n\r\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\r\n\r\n\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction copyArray( a, b ) {\r\n\r\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\r\n\r\n\t\ta[ i ] = b[ i ];\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Texture unit allocation\r\n\r\nfunction allocTexUnits( textures, n ) {\r\n\r\n\tlet r = arrayCacheI32[ n ];\r\n\r\n\tif ( r === undefined ) {\r\n\r\n\t\tr = new Int32Array( n );\r\n\t\tarrayCacheI32[ n ] = r;\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\tr[ i ] = textures.allocateTextureUnit();\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\n// --- Setters ---\r\n\r\n// Note: Defining these methods externally, because they come in a bunch\r\n// and this way their names minify.\r\n\r\n// Single scalar\r\n\r\nfunction setValueV1f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1f( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Single float vector (from flat array or THREE.VectorN)\r\n\r\nfunction setValueV2f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\r\n\r\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform2fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV3f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\r\n\t\t}\r\n\r\n\t} else if ( v.r !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\r\n\r\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\r\n\t\t\tcache[ 0 ] = v.r;\r\n\t\t\tcache[ 1 ] = v.g;\r\n\t\t\tcache[ 2 ] = v.b;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform3fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueV4f( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( v.x !== undefined ) {\r\n\r\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\r\n\r\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n\t\t\tcache[ 0 ] = v.x;\r\n\t\t\tcache[ 1 ] = v.y;\r\n\t\t\tcache[ 2 ] = v.z;\r\n\t\t\tcache[ 3 ] = v.w;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniform4fv( this.addr, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single matrix (from flat array or MatrixN)\r\n\r\nfunction setValueM2( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat2array.set( elements );\r\n\r\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM3( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat3array.set( elements );\r\n\r\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueM4( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst elements = v.elements;\r\n\r\n\tif ( elements === undefined ) {\r\n\r\n\t\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\r\n\r\n\t\tcopyArray( cache, v );\r\n\r\n\t} else {\r\n\r\n\t\tif ( arraysEqual( cache, elements ) ) return;\r\n\r\n\t\tmat4array.set( elements );\r\n\r\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\r\n\r\n\t\tcopyArray( cache, elements );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Single texture (2D / Cube)\r\n\r\nfunction setValueT1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\r\n\r\n}\r\n\r\nfunction setValueT2DArray1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\r\n\r\n}\r\n\r\nfunction setValueT3D1( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\r\n\r\n}\r\n\r\nfunction setValueT6( gl, v, textures ) {\r\n\r\n\tconst cache = this.cache;\r\n\tconst unit = textures.allocateTextureUnit();\r\n\r\n\tif ( cache[ 0 ] !== unit ) {\r\n\r\n\t\tgl.uniform1i( this.addr, unit );\r\n\t\tcache[ 0 ] = unit;\r\n\r\n\t}\r\n\r\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\nfunction setValueV1i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1i( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\nfunction setValueV2i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV3i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\nfunction setValueV4i( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( arraysEqual( cache, v ) ) return;\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n\tcopyArray( cache, v );\r\n\r\n}\r\n\r\n// uint\r\n\r\nfunction setValueV1ui( gl, v ) {\r\n\r\n\tconst cache = this.cache;\r\n\r\n\tif ( cache[ 0 ] === v ) return;\r\n\r\n\tgl.uniform1ui( this.addr, v );\r\n\r\n\tcache[ 0 ] = v;\r\n\r\n}\r\n\r\n// Helper to pick the right setter for the singular case\r\n\r\nfunction getSingularSetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1f; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\r\n\r\n\t\tcase 0x1405: return setValueV1ui; // UINT\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1;\r\n\r\n\t\tcase 0x8b5f: // SAMPLER_3D\r\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\r\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\r\n\t\t\treturn setValueT3D1;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6;\r\n\r\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\r\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\r\n\t\t\treturn setValueT2DArray1;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Array of scalars\r\nfunction setValueV1fArray( gl, v ) {\r\n\r\n\tgl.uniform1fv( this.addr, v );\r\n\r\n}\r\n\r\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\nfunction setValueV1iArray( gl, v ) {\r\n\r\n\tgl.uniform1iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV2iArray( gl, v ) {\r\n\r\n\tgl.uniform2iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV3iArray( gl, v ) {\r\n\r\n\tgl.uniform3iv( this.addr, v );\r\n\r\n}\r\n\r\nfunction setValueV4iArray( gl, v ) {\r\n\r\n\tgl.uniform4iv( this.addr, v );\r\n\r\n}\r\n\r\n\r\n// Array of vectors (flat or from THREE classes)\r\n\r\nfunction setValueV2fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 2 );\r\n\r\n\tgl.uniform2fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV3fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 3 );\r\n\r\n\tgl.uniform3fv( this.addr, data );\r\n\r\n}\r\n\r\nfunction setValueV4fArray( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniform4fv( this.addr, data );\r\n\r\n}\r\n\r\n// Array of matrices (flat or from THREE clases)\r\n\r\nfunction setValueM2Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 4 );\r\n\r\n\tgl.uniformMatrix2fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM3Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 9 );\r\n\r\n\tgl.uniformMatrix3fv( this.addr, false, data );\r\n\r\n}\r\n\r\nfunction setValueM4Array( gl, v ) {\r\n\r\n\tconst data = flatten( v, this.size, 16 );\r\n\r\n\tgl.uniformMatrix4fv( this.addr, false, data );\r\n\r\n}\r\n\r\n// Array of textures (2D / Cube)\r\n\r\nfunction setValueT1Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction setValueT6Array( gl, v, textures ) {\r\n\r\n\tconst n = v.length;\r\n\r\n\tconst units = allocTexUnits( textures, n );\r\n\r\n\tgl.uniform1iv( this.addr, units );\r\n\r\n\tfor ( let i = 0; i !== n; ++ i ) {\r\n\r\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Helper to pick the right setter for a pure (bottom-level) array\r\n\r\nfunction getPureArraySetter( type ) {\r\n\r\n\tswitch ( type ) {\r\n\r\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\r\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\r\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\r\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\r\n\r\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\r\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\r\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\r\n\r\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\r\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\r\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\r\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\r\n\r\n\t\tcase 0x8b5e: // SAMPLER_2D\r\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\r\n\t\tcase 0x8dca: // INT_SAMPLER_2D\r\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\r\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\r\n\t\t\treturn setValueT1Array;\r\n\r\n\t\tcase 0x8b60: // SAMPLER_CUBE\r\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\r\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\r\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\r\n\t\t\treturn setValueT6Array;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// --- Uniform Classes ---\r\n\r\nfunction SingleUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.setValue = getSingularSetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nfunction PureArrayUniform( id, activeInfo, addr ) {\r\n\r\n\tthis.id = id;\r\n\tthis.addr = addr;\r\n\tthis.cache = [];\r\n\tthis.size = activeInfo.size;\r\n\tthis.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n\t// this.path = activeInfo.name; // DEBUG\r\n\r\n}\r\n\r\nPureArrayUniform.prototype.updateCache = function ( data ) {\r\n\r\n\tlet cache = this.cache;\r\n\r\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\r\n\r\n\t\tthis.cache = new Float32Array( data.length );\r\n\r\n\t}\r\n\r\n\tcopyArray( cache, data );\r\n\r\n};\r\n\r\nfunction StructuredUniform( id ) {\r\n\r\n\tthis.id = id;\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n}\r\n\r\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\r\n\r\n\tconst seq = this.seq;\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tu.setValue( gl, value[ u.id ], textures );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// --- Top-level ---\r\n\r\n// Parser - builds up the property tree from the path strings\r\n\r\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\r\n\r\n// extracts\r\n// \t- the identifier (member name or array index)\r\n//  - followed by an optional right bracket (found when array index)\r\n//  - followed by an optional left bracket or dot (type of subscript)\r\n//\r\n// Note: These portions can be read in a non-overlapping fashion and\r\n// allow straightforward parsing of the hierarchy that WebGL encodes\r\n// in the uniform names.\r\n\r\nfunction addUniform( container, uniformObject ) {\r\n\r\n\tcontainer.seq.push( uniformObject );\r\n\tcontainer.map[ uniformObject.id ] = uniformObject;\r\n\r\n}\r\n\r\nfunction parseUniform( activeInfo, addr, container ) {\r\n\r\n\tconst path = activeInfo.name,\r\n\t\tpathLength = path.length;\r\n\r\n\t// reset RegExp object, because of the early exit of a previous run\r\n\tRePathPart.lastIndex = 0;\r\n\r\n\twhile ( true ) {\r\n\r\n\t\tconst match = RePathPart.exec( path ),\r\n\t\t\tmatchEnd = RePathPart.lastIndex;\r\n\r\n\t\tlet id = match[ 1 ],\r\n\t\t\tidIsIndex = match[ 2 ] === ']',\r\n\t\t\tsubscript = match[ 3 ];\r\n\r\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\r\n\r\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n\t\t\taddUniform( container, subscript === undefined ?\r\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\r\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// step into inner node / create it in case it doesn't exist\r\n\r\n\t\t\tconst map = container.map;\r\n\t\t\tlet next = map[ id ];\r\n\r\n\t\t\tif ( next === undefined ) {\r\n\r\n\t\t\t\tnext = new StructuredUniform( id );\r\n\t\t\t\taddUniform( container, next );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcontainer = next;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Root Container\r\n\r\nfunction WebGLUniforms( gl, program ) {\r\n\r\n\tthis.seq = [];\r\n\tthis.map = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35718 );\r\n\r\n\tfor ( let i = 0; i < n; ++ i ) {\r\n\r\n\t\tconst info = gl.getActiveUniform( program, i ),\r\n\t\t\taddr = gl.getUniformLocation( program, info.name );\r\n\r\n\t\tparseUniform( info, addr, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\r\n\r\n\tconst u = this.map[ name ];\r\n\r\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\r\n\r\n};\r\n\r\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\r\n\r\n\tconst v = object[ name ];\r\n\r\n\tif ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n};\r\n\r\n\r\n// Static interface\r\n\r\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ],\r\n\t\t\tv = values[ u.id ];\r\n\r\n\t\tif ( v.needsUpdate !== false ) {\r\n\r\n\t\t\t// note: always updating when .needsUpdate is undefined\r\n\t\t\tu.setValue( gl, v.value, textures );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nWebGLUniforms.seqWithValue = function ( seq, values ) {\r\n\r\n\tconst r = [];\r\n\r\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\tconst u = seq[ i ];\r\n\t\tif ( u.id in values ) r.push( u );\r\n\r\n\t}\r\n\r\n\treturn r;\r\n\r\n};\r\n\r\nfunction WebGLShader( gl, type, string ) {\r\n\r\n\tconst shader = gl.createShader( type );\r\n\r\n\tgl.shaderSource( shader, string );\r\n\tgl.compileShader( shader );\r\n\r\n\treturn shader;\r\n\r\n}\r\n\r\nlet programIdCount = 0;\r\n\r\nfunction addLineNumbers( string ) {\r\n\r\n\tconst lines = string.split( '\\n' );\r\n\r\n\tfor ( let i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t}\r\n\r\n\treturn lines.join( '\\n' );\r\n\r\n}\r\n\r\nfunction getEncodingComponents( encoding ) {\r\n\r\n\tswitch ( encoding ) {\r\n\r\n\t\tcase LinearEncoding:\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\t\tcase sRGBEncoding:\r\n\t\t\treturn [ 'sRGB', '( value )' ];\r\n\t\tcase RGBEEncoding:\r\n\t\t\treturn [ 'RGBE', '( value )' ];\r\n\t\tcase RGBM7Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\r\n\t\tcase RGBM16Encoding:\r\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\r\n\t\tcase RGBDEncoding:\r\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\r\n\t\tcase GammaEncoding:\r\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\r\n\t\tcase LogLuvEncoding:\r\n\t\t\treturn [ 'LogLuv', '( value )' ];\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\r\n\t\t\treturn [ 'Linear', '( value )' ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getShaderErrors( gl, shader, type ) {\r\n\r\n\tconst status = gl.getShaderParameter( shader, 35713 );\r\n\tconst log = gl.getShaderInfoLog( shader ).trim();\r\n\r\n\tif ( status && log === '' ) return '';\r\n\r\n\t// --enable-privileged-webgl-extension\r\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\tconst source = gl.getShaderSource( shader );\r\n\r\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\r\n\r\n}\r\n\r\nfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\tconst components = getEncodingComponents( encoding );\r\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\r\n\r\n}\r\n\r\nfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\tlet toneMappingName;\r\n\r\n\tswitch ( toneMapping ) {\r\n\r\n\t\tcase LinearToneMapping:\r\n\t\t\ttoneMappingName = 'Linear';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ReinhardToneMapping:\r\n\t\t\ttoneMappingName = 'Reinhard';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CineonToneMapping:\r\n\t\t\ttoneMappingName = 'OptimizedCineon';\r\n\t\t\tbreak;\r\n\r\n\t\tcase ACESFilmicToneMapping:\r\n\t\t\ttoneMappingName = 'ACESFilmic';\r\n\t\t\tbreak;\r\n\r\n\t\tcase CustomToneMapping:\r\n\t\t\ttoneMappingName = 'Custom';\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\r\n\t\t\ttoneMappingName = 'Linear';\r\n\r\n\t}\r\n\r\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\r\n\r\n}\r\n\r\nfunction generateExtensions( parameters ) {\r\n\r\n\tconst chunks = [\r\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\r\n\t];\r\n\r\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n}\r\n\r\nfunction generateDefines( defines ) {\r\n\r\n\tconst chunks = [];\r\n\r\n\tfor ( const name in defines ) {\r\n\r\n\t\tconst value = defines[ name ];\r\n\r\n\t\tif ( value === false ) continue;\r\n\r\n\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t}\r\n\r\n\treturn chunks.join( '\\n' );\r\n\r\n}\r\n\r\nfunction fetchAttributeLocations( gl, program ) {\r\n\r\n\tconst attributes = {};\r\n\r\n\tconst n = gl.getProgramParameter( program, 35721 );\r\n\r\n\tfor ( let i = 0; i < n; i ++ ) {\r\n\r\n\t\tconst info = gl.getActiveAttrib( program, i );\r\n\t\tconst name = info.name;\r\n\r\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\r\n\r\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t}\r\n\r\n\treturn attributes;\r\n\r\n}\r\n\r\nfunction filterEmptyLine( string ) {\r\n\r\n\treturn string !== '';\r\n\r\n}\r\n\r\nfunction replaceLightNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\r\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\r\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\r\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\r\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\r\n\r\n}\r\n\r\nfunction replaceClippingPlaneNums( string, parameters ) {\r\n\r\n\treturn string\r\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\r\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\r\n\r\n}\r\n\r\n// Resolve Includes\r\n\r\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\r\n\r\nfunction resolveIncludes( string ) {\r\n\r\n\treturn string.replace( includePattern, includeReplacer );\r\n\r\n}\r\n\r\nfunction includeReplacer( match, include ) {\r\n\r\n\tconst string = ShaderChunk[ include ];\r\n\r\n\tif ( string === undefined ) {\r\n\r\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t}\r\n\r\n\treturn resolveIncludes( string );\r\n\r\n}\r\n\r\n// Unroll Loops\r\n\r\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\nconst unrollLoopPattern = /#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;\r\n\r\nfunction unrollLoops( string ) {\r\n\r\n\treturn string\r\n\t\t.replace( unrollLoopPattern, loopReplacer )\r\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\r\n\r\n}\r\n\r\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\r\n\r\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\r\n\treturn loopReplacer( match, start, end, snippet );\r\n\r\n}\r\n\r\nfunction loopReplacer( match, start, end, snippet ) {\r\n\r\n\tlet string = '';\r\n\r\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\tstring += snippet\r\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\r\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\r\n\r\n\t}\r\n\r\n\treturn string;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction generatePrecision( parameters ) {\r\n\r\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\r\n\r\n\tif ( parameters.precision === \"highp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"mediump\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\r\n\r\n\t} else if ( parameters.precision === \"lowp\" ) {\r\n\r\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\r\n\r\n\t}\r\n\r\n\treturn precisionstring;\r\n\r\n}\r\n\r\nfunction generateShadowMapTypeDefine( parameters ) {\r\n\r\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\r\n\r\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\r\n\r\n\t}\r\n\r\n\treturn shadowMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapTypeDefine( parameters ) {\r\n\r\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeReflectionMapping:\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase CubeUVReflectionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EquirectangularReflectionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapTypeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapModeDefine( parameters ) {\r\n\r\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.envMapMode ) {\r\n\r\n\t\t\tcase CubeRefractionMapping:\r\n\t\t\tcase EquirectangularRefractionMapping:\r\n\t\t\tcase CubeUVRefractionMapping:\r\n\r\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapModeDefine;\r\n\r\n}\r\n\r\nfunction generateEnvMapBlendingDefine( parameters ) {\r\n\r\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\r\n\r\n\tif ( parameters.envMap ) {\r\n\r\n\t\tswitch ( parameters.combine ) {\r\n\r\n\t\t\tcase MultiplyOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MixOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase AddOperation:\r\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn envMapBlendingDefine;\r\n\r\n}\r\n\r\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\r\n\r\n\tconst gl = renderer.getContext();\r\n\r\n\tconst defines = parameters.defines;\r\n\r\n\tlet vertexShader = parameters.vertexShader;\r\n\tlet fragmentShader = parameters.fragmentShader;\r\n\r\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\r\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\r\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\r\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\r\n\r\n\r\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\r\n\r\n\tconst customDefines = generateDefines( defines );\r\n\r\n\tconst program = gl.createProgram();\r\n\r\n\tlet prefixVertex, prefixFragment;\r\n\r\n\tif ( parameters.isRawShaderMaterial ) {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixVertex.length > 0 ) {\r\n\r\n\t\t\tprefixVertex += '\\n';\r\n\r\n\t\t}\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\t\t\tcustomDefines\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tif ( prefixFragment.length > 0 ) {\r\n\r\n\t\t\tprefixFragment += '\\n';\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tprefixVertex = [\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\r\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t'#ifdef USE_INSTANCING',\r\n\r\n\t\t\t' attribute mat4 instanceMatrix;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'attribute vec3 position;',\r\n\t\t\t'attribute vec3 normal;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'#ifdef USE_TANGENT',\r\n\r\n\t\t\t'\tattribute vec4 tangent;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t'\t#else',\r\n\r\n\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t'\t#endif',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t'#endif',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\tprefixFragment = [\r\n\r\n\t\t\tcustomExtensions,\r\n\r\n\t\t\tgeneratePrecision( parameters ),\r\n\r\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\r\n\r\n\t\t\tcustomDefines,\r\n\r\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\r\n\r\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\r\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\r\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\r\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\r\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\r\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\r\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\r\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\r\n\r\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\r\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\r\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\r\n\r\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\r\n\r\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\r\n\r\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\r\n\r\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t'uniform vec3 cameraPosition;',\r\n\t\t\t'uniform bool isOrthographic;',\r\n\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\r\n\r\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\r\n\r\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\r\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\r\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\r\n\r\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\r\n\r\n\t\t\t'\\n'\r\n\r\n\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tvertexShader = resolveIncludes( vertexShader );\r\n\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\r\n\r\n\tfragmentShader = resolveIncludes( fragmentShader );\r\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\r\n\r\n\tvertexShader = unrollLoops( vertexShader );\r\n\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\tif ( parameters.isWebGL2 && ! parameters.isRawShaderMaterial ) {\r\n\r\n\t\t// GLSL 3.0 conversion\r\n\r\n\t\tprefixVertex = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define attribute in',\r\n\t\t\t'#define varying out',\r\n\t\t\t'#define texture2D texture'\r\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\r\n\r\n\t\tprefixFragment = [\r\n\t\t\t'#version 300 es\\n',\r\n\t\t\t'#define varying in',\r\n\t\t\t'out highp vec4 pc_fragColor;',\r\n\t\t\t'#define gl_FragColor pc_fragColor',\r\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\r\n\t\t\t'#define texture2D texture',\r\n\t\t\t'#define textureCube texture',\r\n\t\t\t'#define texture2DProj textureProj',\r\n\t\t\t'#define texture2DLodEXT textureLod',\r\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\r\n\t\t\t'#define textureCubeLodEXT textureLod',\r\n\t\t\t'#define texture2DGradEXT textureGrad',\r\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\r\n\t\t\t'#define textureCubeGradEXT textureGrad'\r\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\r\n\r\n\t}\r\n\r\n\tconst vertexGlsl = prefixVertex + vertexShader;\r\n\tconst fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\r\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\r\n\r\n\tgl.attachShader( program, glVertexShader );\r\n\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t// Force a particular attribute to index 0.\r\n\r\n\tif ( parameters.index0AttributeName !== undefined ) {\r\n\r\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\r\n\r\n\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t}\r\n\r\n\tgl.linkProgram( program );\r\n\r\n\t// check for link errors\r\n\tif ( renderer.debug.checkShaderErrors ) {\r\n\r\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\r\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\r\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\r\n\r\n\t\tlet runnable = true;\r\n\t\tlet haveDiagnostics = true;\r\n\r\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\r\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Clean up\r\n\r\n\t// Crashes in iOS9 and iOS10. #18402\r\n\t// gl.detachShader( program, glVertexShader );\r\n\t// gl.detachShader( program, glFragmentShader );\r\n\r\n\tgl.deleteShader( glVertexShader );\r\n\tgl.deleteShader( glFragmentShader );\r\n\r\n\t// set up caching for uniform locations\r\n\r\n\tlet cachedUniforms;\r\n\r\n\tthis.getUniforms = function () {\r\n\r\n\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedUniforms;\r\n\r\n\t};\r\n\r\n\t// set up caching for attribute locations\r\n\r\n\tlet cachedAttributes;\r\n\r\n\tthis.getAttributes = function () {\r\n\r\n\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t}\r\n\r\n\t\treturn cachedAttributes;\r\n\r\n\t};\r\n\r\n\t// free resource\r\n\r\n\tthis.destroy = function () {\r\n\r\n\t\tbindingStates.releaseStatesOfProgram( this );\r\n\r\n\t\tgl.deleteProgram( program );\r\n\t\tthis.program = undefined;\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.name = parameters.shaderName;\r\n\tthis.id = programIdCount ++;\r\n\tthis.cacheKey = cacheKey;\r\n\tthis.usedTimes = 1;\r\n\tthis.program = program;\r\n\tthis.vertexShader = glVertexShader;\r\n\tthis.fragmentShader = glFragmentShader;\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nfunction WebGLPrograms( renderer, extensions, capabilities, bindingStates ) {\r\n\r\n\tconst programs = [];\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\r\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\r\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\r\n\tconst vertexTextures = capabilities.vertexTextures;\r\n\r\n\tlet precision = capabilities.precision;\r\n\r\n\tconst shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshDistanceMaterial: 'distanceRGBA',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshToonMaterial: 'toon',\r\n\t\tMeshStandardMaterial: 'physical',\r\n\t\tMeshPhysicalMaterial: 'physical',\r\n\t\tMeshMatcapMaterial: 'matcap',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points',\r\n\t\tShadowMaterial: 'shadow',\r\n\t\tSpriteMaterial: 'sprite'\r\n\t};\r\n\r\n\tconst parameterNames = [\r\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\",\r\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\r\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\r\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\r\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\r\n\t\t\"sheen\", \"transmissionMap\"\r\n\t];\r\n\r\n\tfunction allocateBones( object ) {\r\n\r\n\t\tconst skeleton = object.skeleton;\r\n\t\tconst bones = skeleton.bones;\r\n\r\n\t\tif ( floatVertexTextures ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\r\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\r\n\r\n\t\t\tif ( maxBones < bones.length ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map ) {\r\n\r\n\t\tlet encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = LinearEncoding;\r\n\r\n\t\t} else if ( map.isTexture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map.isWebGLRenderTarget ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tfunction getParameters( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tconst maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet vertexShader, fragmentShader;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\r\n\t\t\tvertexShader = shader.vertexShader;\r\n\t\t\tfragmentShader = shader.fragmentShader;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvertexShader = material.vertexShader;\r\n\t\t\tfragmentShader = material.fragmentShader;\r\n\r\n\t\t}\r\n\r\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\r\n\r\n\t\tconst parameters = {\r\n\r\n\t\t\tisWebGL2: isWebGL2,\r\n\r\n\t\t\tshaderID: shaderID,\r\n\t\t\tshaderName: material.type,\r\n\r\n\t\t\tvertexShader: vertexShader,\r\n\t\t\tfragmentShader: fragmentShader,\r\n\t\t\tdefines: material.defines,\r\n\r\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial,\r\n\t\t\tisShaderMaterial: material.isShaderMaterial,\r\n\r\n\t\t\tprecision: precision,\r\n\r\n\t\t\tinstancing: object.isInstancedMesh === true,\r\n\r\n\t\t\tsupportsVertexTextures: vertexTextures,\r\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\r\n\t\t\tmatcap: !! material.matcap,\r\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\r\n\t\t\tenvMap: !! envMap,\r\n\t\t\tenvMapMode: envMap && envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\r\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\r\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\r\n\t\t\tclearcoatMap: !! material.clearcoatMap,\r\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\r\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tgradientMap: !! material.gradientMap,\r\n\r\n\t\t\tsheen: !! material.sheen,\r\n\r\n\t\t\ttransmissionMap: !! material.transmissionMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\r\n\t\t\tvertexColors: material.vertexColors,\r\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\r\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\r\n\r\n\t\t\tfog: !! fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\r\n\r\n\t\t\tflatShading: material.flatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning && maxBones > 0,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: floatVertexTextures,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumRectAreaLights: lights.rectArea.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\r\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\r\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\r\n\r\n\t\t\tnumClippingPlanes: nClipPlanes,\r\n\t\t\tnumClipIntersection: nClipIntersection,\r\n\r\n\t\t\tdithering: material.dithering,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === DoubleSide,\r\n\t\t\tflipSided: material.side === BackSide,\r\n\r\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\r\n\r\n\t\t\tindex0AttributeName: material.index0AttributeName,\r\n\r\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\r\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\r\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\r\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\r\n\r\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\r\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\r\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\r\n\r\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t}\r\n\r\n\tfunction getProgramCacheKey( parameters ) {\r\n\r\n\t\tconst array = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tarray.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.push( parameters.fragmentShader );\r\n\t\t\tarray.push( parameters.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.defines !== undefined ) {\r\n\r\n\t\t\tfor ( const name in parameters.defines ) {\r\n\r\n\t\t\t\tarray.push( name );\r\n\t\t\t\tarray.push( parameters.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parameters.isRawShaderMaterial === undefined ) {\r\n\r\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray.push( renderer.outputEncoding );\r\n\t\t\tarray.push( renderer.gammaFactor );\r\n\r\n\t\t}\r\n\r\n\t\tarray.push( parameters.customProgramCacheKey );\r\n\r\n\t\treturn array.join();\r\n\r\n\t}\r\n\r\n\tfunction getUniforms( material ) {\r\n\r\n\t\tconst shaderID = shaderIDs[ material.type ];\r\n\t\tlet uniforms;\r\n\r\n\t\tif ( shaderID ) {\r\n\r\n\t\t\tconst shader = ShaderLib[ shaderID ];\r\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tuniforms = material.uniforms;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction acquireProgram( parameters, cacheKey ) {\r\n\r\n\t\tlet program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tconst preexistingProgram = programs[ p ];\r\n\r\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\r\n\r\n\t\t\t\tprogram = preexistingProgram;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction releaseProgram( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tconst i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetParameters: getParameters,\r\n\t\tgetProgramCacheKey: getProgramCacheKey,\r\n\t\tgetUniforms: getUniforms,\r\n\t\tacquireProgram: acquireProgram,\r\n\t\treleaseProgram: releaseProgram,\r\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\t\tprograms: programs\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLProperties() {\r\n\r\n\tlet properties = new WeakMap();\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tlet map = properties.get( object );\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties.set( object, map );\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t}\r\n\r\n\tfunction remove( object ) {\r\n\r\n\t\tproperties.delete( object );\r\n\r\n\t}\r\n\r\n\tfunction update( object, key, value ) {\r\n\r\n\t\tproperties.get( object )[ key ] = value;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tproperties = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tremove: remove,\r\n\t\tupdate: update,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction painterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.program !== b.program ) {\r\n\r\n\t\treturn a.program.id - b.program.id;\r\n\r\n\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\treturn a.material.id - b.material.id;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn a.z - b.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction reversePainterSortStable( a, b ) {\r\n\r\n\tif ( a.groupOrder !== b.groupOrder ) {\r\n\r\n\t\treturn a.groupOrder - b.groupOrder;\r\n\r\n\t} else if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t} else if ( a.z !== b.z ) {\r\n\r\n\t\treturn b.z - a.z;\r\n\r\n\t} else {\r\n\r\n\t\treturn a.id - b.id;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction WebGLRenderList( properties ) {\r\n\r\n\tconst renderItems = [];\r\n\tlet renderItemsIndex = 0;\r\n\r\n\tconst opaque = [];\r\n\tconst transparent = [];\r\n\r\n\tconst defaultProgram = { id: - 1 };\r\n\r\n\tfunction init() {\r\n\r\n\t\trenderItemsIndex = 0;\r\n\r\n\t\topaque.length = 0;\r\n\t\ttransparent.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tif ( renderItem === undefined ) {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\r\n\t\t\t\tgroupOrder: groupOrder,\r\n\t\t\t\trenderOrder: object.renderOrder,\r\n\t\t\t\tz: z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\r\n\t\t\trenderItem.groupOrder = groupOrder;\r\n\t\t\trenderItem.renderOrder = object.renderOrder;\r\n\t\t\trenderItem.z = z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t}\r\n\r\n\t\trenderItemsIndex ++;\r\n\r\n\t\treturn renderItem;\r\n\r\n\t}\r\n\r\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\r\n\r\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\r\n\r\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\r\n\r\n\t}\r\n\r\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\r\n\r\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\r\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\r\n\r\n\t}\r\n\r\n\tfunction finish() {\r\n\r\n\t\t// Clear references from inactive renderItems in the list\r\n\r\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderItems[ i ];\r\n\r\n\t\t\tif ( renderItem.id === null ) break;\r\n\r\n\t\t\trenderItem.id = null;\r\n\t\t\trenderItem.object = null;\r\n\t\t\trenderItem.geometry = null;\r\n\t\t\trenderItem.material = null;\r\n\t\t\trenderItem.program = null;\r\n\t\t\trenderItem.group = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\topaque: opaque,\r\n\t\ttransparent: transparent,\r\n\r\n\t\tinit: init,\r\n\t\tpush: push,\r\n\t\tunshift: unshift,\r\n\t\tfinish: finish,\r\n\r\n\t\tsort: sort\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderLists( properties ) {\r\n\r\n\tlet lists = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\tlists.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tconst cameras = lists.get( scene );\r\n\t\tlet list;\r\n\r\n\t\tif ( cameras === undefined ) {\r\n\r\n\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\tlists.set( scene, new WeakMap() );\r\n\t\t\tlists.get( scene ).set( camera, list );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlist = cameras.get( camera );\r\n\t\t\tif ( list === undefined ) {\r\n\r\n\t\t\t\tlist = new WebGLRenderList( properties );\r\n\t\t\t\tcameras.set( camera, list );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\tlists = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\nfunction UniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\t\tdecay: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tdirection: new Vector3(),\r\n\t\t\t\t\t\tskyColor: new Color(),\r\n\t\t\t\t\t\tgroundColor: new Color()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'RectAreaLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tcolor: new Color(),\r\n\t\t\t\t\t\tposition: new Vector3(),\r\n\t\t\t\t\t\thalfWidth: new Vector3(),\r\n\t\t\t\t\t\thalfHeight: new Vector3()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction ShadowUniformsCache() {\r\n\r\n\tconst lights = {};\r\n\r\n\treturn {\r\n\r\n\t\tget: function ( light ) {\r\n\r\n\t\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\t\treturn lights[ light.id ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet uniforms;\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\t\t\t\t\tuniforms = {\r\n\t\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\t\tshadowNormalBias: 0,\r\n\t\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\r\n\t\t\t\t\t\tshadowCameraNear: 1,\r\n\t\t\t\t\t\tshadowCameraFar: 1000\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\t\treturn uniforms;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n\r\n\r\nlet nextVersion = 0;\r\n\r\nfunction shadowCastingLightsFirst( lightA, lightB ) {\r\n\r\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\r\n\r\n}\r\n\r\nfunction WebGLLights() {\r\n\r\n\tconst cache = new UniformsCache();\r\n\r\n\tconst shadowCache = ShadowUniformsCache();\r\n\r\n\tconst state = {\r\n\r\n\t\tversion: 0,\r\n\r\n\t\thash: {\r\n\t\t\tdirectionalLength: - 1,\r\n\t\t\tpointLength: - 1,\r\n\t\t\tspotLength: - 1,\r\n\t\t\trectAreaLength: - 1,\r\n\t\t\themiLength: - 1,\r\n\r\n\t\t\tnumDirectionalShadows: - 1,\r\n\t\t\tnumPointShadows: - 1,\r\n\t\t\tnumSpotShadows: - 1\r\n\t\t},\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tprobe: [],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadow: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadow: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\trectArea: [],\r\n\t\tpoint: [],\r\n\t\tpointShadow: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: []\r\n\r\n\t};\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\r\n\r\n\tconst vector3 = new Vector3();\r\n\tconst matrix4 = new Matrix4();\r\n\tconst matrix42 = new Matrix4();\r\n\r\n\tfunction setup( lights, shadows, camera ) {\r\n\r\n\t\tlet r = 0, g = 0, b = 0;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\r\n\r\n\t\tlet directionalLength = 0;\r\n\t\tlet pointLength = 0;\r\n\t\tlet spotLength = 0;\r\n\t\tlet rectAreaLength = 0;\r\n\t\tlet hemiLength = 0;\r\n\r\n\t\tlet numDirectionalShadows = 0;\r\n\t\tlet numPointShadows = 0;\r\n\t\tlet numSpotShadows = 0;\r\n\r\n\t\tconst viewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\tlights.sort( shadowCastingLightsFirst );\r\n\r\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\r\n\t\t\tconst color = light.color;\r\n\t\t\tconst intensity = light.intensity;\r\n\t\t\tconst distance = light.distance;\r\n\r\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n\t\t\tif ( light.isAmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light.isLightProbe ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\r\n\r\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( light.isDirectionalLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\r\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumDirectionalShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\r\n\r\n\t\t\t\tdirectionalLength ++;\r\n\r\n\t\t\t} else if ( light.isSpotLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\r\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumSpotShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\r\n\r\n\t\t\t\tspotLength ++;\r\n\r\n\t\t\t} else if ( light.isRectAreaLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\t// (a) intensity is the total visible light emitted\r\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\r\n\r\n\t\t\t\t// (b) intensity is the brightness of the light\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\r\n\t\t\t\tmatrix42.identity();\r\n\t\t\t\tmatrix4.copy( light.matrixWorld );\r\n\t\t\t\tmatrix4.premultiply( viewMatrix );\r\n\t\t\t\tmatrix42.extractRotation( matrix4 );\r\n\r\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\r\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\r\n\r\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\r\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\r\n\r\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\r\n\t\t\t\t// uniforms.distance = distance;\r\n\r\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\r\n\r\n\t\t\t\trectAreaLength ++;\r\n\r\n\t\t\t} else if ( light.isPointLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = light.decay;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\r\n\r\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\r\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\r\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\r\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\r\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\r\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\r\n\r\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\r\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\r\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\r\n\r\n\t\t\t\t\tnumPointShadows ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.point[ pointLength ] = uniforms;\r\n\r\n\t\t\t\tpointLength ++;\r\n\r\n\t\t\t} else if ( light.isHemisphereLight ) {\r\n\r\n\t\t\t\tconst uniforms = cache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\r\n\r\n\t\t\t\themiLength ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.ambient[ 0 ] = r;\r\n\t\tstate.ambient[ 1 ] = g;\r\n\t\tstate.ambient[ 2 ] = b;\r\n\r\n\t\tconst hash = state.hash;\r\n\r\n\t\tif ( hash.directionalLength !== directionalLength ||\r\n\t\t\thash.pointLength !== pointLength ||\r\n\t\t\thash.spotLength !== spotLength ||\r\n\t\t\thash.rectAreaLength !== rectAreaLength ||\r\n\t\t\thash.hemiLength !== hemiLength ||\r\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\r\n\t\t\thash.numPointShadows !== numPointShadows ||\r\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\r\n\r\n\t\t\tstate.directional.length = directionalLength;\r\n\t\t\tstate.spot.length = spotLength;\r\n\t\t\tstate.rectArea.length = rectAreaLength;\r\n\t\t\tstate.point.length = pointLength;\r\n\t\t\tstate.hemi.length = hemiLength;\r\n\r\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\r\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadow.length = numPointShadows;\r\n\t\t\tstate.pointShadowMap.length = numPointShadows;\r\n\t\t\tstate.spotShadow.length = numSpotShadows;\r\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\r\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\r\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\r\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\r\n\r\n\t\t\thash.directionalLength = directionalLength;\r\n\t\t\thash.pointLength = pointLength;\r\n\t\t\thash.spotLength = spotLength;\r\n\t\t\thash.rectAreaLength = rectAreaLength;\r\n\t\t\thash.hemiLength = hemiLength;\r\n\r\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\r\n\t\t\thash.numPointShadows = numPointShadows;\r\n\t\t\thash.numSpotShadows = numSpotShadows;\r\n\r\n\t\t\tstate.version = nextVersion ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tsetup: setup,\r\n\t\tstate: state\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderState() {\r\n\r\n\tconst lights = new WebGLLights();\r\n\r\n\tconst lightsArray = [];\r\n\tconst shadowsArray = [];\r\n\r\n\tfunction init() {\r\n\r\n\t\tlightsArray.length = 0;\r\n\t\tshadowsArray.length = 0;\r\n\r\n\t}\r\n\r\n\tfunction pushLight( light ) {\r\n\r\n\t\tlightsArray.push( light );\r\n\r\n\t}\r\n\r\n\tfunction pushShadow( shadowLight ) {\r\n\r\n\t\tshadowsArray.push( shadowLight );\r\n\r\n\t}\r\n\r\n\tfunction setupLights( camera ) {\r\n\r\n\t\tlights.setup( lightsArray, shadowsArray, camera );\r\n\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tlightsArray: lightsArray,\r\n\t\tshadowsArray: shadowsArray,\r\n\r\n\t\tlights: lights\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: init,\r\n\t\tstate: state,\r\n\t\tsetupLights: setupLights,\r\n\r\n\t\tpushLight: pushLight,\r\n\t\tpushShadow: pushShadow\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderStates() {\r\n\r\n\tlet renderStates = new WeakMap();\r\n\r\n\tfunction onSceneDispose( event ) {\r\n\r\n\t\tconst scene = event.target;\r\n\r\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\trenderStates.delete( scene );\r\n\r\n\t}\r\n\r\n\tfunction get( scene, camera ) {\r\n\r\n\t\tlet renderState;\r\n\r\n\t\tif ( renderStates.has( scene ) === false ) {\r\n\r\n\t\t\trenderState = new WebGLRenderState();\r\n\t\t\trenderStates.set( scene, new WeakMap() );\r\n\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\r\n\r\n\t\t\t\trenderState = new WebGLRenderState();\r\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn renderState;\r\n\r\n\t}\r\n\r\n\tfunction dispose() {\r\n\r\n\t\trenderStates = new WeakMap();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t\tdispose: dispose\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nfunction MeshDepthMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.depthPacking = BasicDepthPacking;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\r\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\r\n\r\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\r\n\r\nMeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.depthPacking = source.depthPacking;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *\r\n *  referencePosition: <float>,\r\n *  nearDistance: <float>,\r\n *  farDistance: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>\r\n *\r\n * }\r\n */\r\n\r\nfunction MeshDistanceMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshDistanceMaterial';\r\n\r\n\tthis.referencePosition = new Vector3();\r\n\tthis.nearDistance = 1;\r\n\tthis.farDistance = 1000;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\r\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\r\n\r\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\r\n\r\nMeshDistanceMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.referencePosition.copy( source.referencePosition );\r\n\tthis.nearDistance = source.nearDistance;\r\n\tthis.farDistance = source.farDistance;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\r\n\r\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\r\n\r\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\r\n\r\n\tlet _frustum = new Frustum();\r\n\r\n\tconst _shadowMapSize = new Vector2(),\r\n\t\t_viewportSize = new Vector2(),\r\n\r\n\t\t_viewport = new Vector4(),\r\n\r\n\t\t_depthMaterials = [],\r\n\t\t_distanceMaterials = [],\r\n\r\n\t\t_materialCache = {};\r\n\r\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\r\n\r\n\tconst shadowMaterialVertical = new ShaderMaterial( {\r\n\r\n\t\tdefines: {\r\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\r\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\r\n\t\t},\r\n\r\n\t\tuniforms: {\r\n\t\t\tshadow_pass: { value: null },\r\n\t\t\tresolution: { value: new Vector2() },\r\n\t\t\tradius: { value: 4.0 }\r\n\t\t},\r\n\r\n\t\tvertexShader: vsm_vert,\r\n\r\n\t\tfragmentShader: vsm_frag\r\n\r\n\t} );\r\n\r\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\r\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\r\n\r\n\tconst fullScreenTri = new BufferGeometry();\r\n\tfullScreenTri.setAttribute(\r\n\t\t\"position\",\r\n\t\tnew BufferAttribute(\r\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\r\n\t\t\t3\r\n\t\t)\r\n\t);\r\n\r\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = PCFShadowMap;\r\n\r\n\tthis.render = function ( lights, scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\tif ( lights.length === 0 ) return;\r\n\r\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\r\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\r\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\r\n\r\n\t\tconst _state = _renderer.state;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.setBlending( NoBlending );\r\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\r\n\t\t_state.buffers.depth.setTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst light = lights[ i ];\r\n\t\t\tconst shadow = light.shadow;\r\n\r\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\r\n\r\n\t\t\tif ( shadow === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\r\n\r\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\r\n\r\n\t\t\t_viewportSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\r\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\r\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\r\n\r\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\r\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\r\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat, stencilBuffer: false };\r\n\r\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n\t\t\t\tshadow.camera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\tconst viewportCount = shadow.getViewportCount();\r\n\r\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\r\n\r\n\t\t\t\tconst viewport = shadow.getViewport( vp );\r\n\r\n\t\t\t\t_viewport.set(\r\n\t\t\t\t\t_viewportSize.x * viewport.x,\r\n\t\t\t\t\t_viewportSize.y * viewport.y,\r\n\t\t\t\t\t_viewportSize.x * viewport.z,\r\n\t\t\t\t\t_viewportSize.y * viewport.w\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_state.viewport( _viewport );\r\n\r\n\t\t\t\tshadow.updateMatrices( light, vp );\r\n\r\n\t\t\t\t_frustum = shadow.getFrustum();\r\n\r\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// do blur pass for VSM\r\n\r\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\r\n\r\n\t\t\t\tVSMPass( shadow, camera );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tshadow.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\r\n\r\n\t};\r\n\r\n\tfunction VSMPass( shadow, camera ) {\r\n\r\n\t\tconst geometry = _objects.update( fullScreenMesh );\r\n\r\n\t\t// vertical pass\r\n\r\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\r\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.mapPass );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\r\n\r\n\t\t// horizonal pass\r\n\r\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\r\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\r\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\r\n\t\t_renderer.setRenderTarget( shadow.map );\r\n\t\t_renderer.clear();\r\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _depthMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDepthMaterial( {\r\n\r\n\t\t\t\tdepthPacking: RGBADepthPacking,\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_depthMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\r\n\r\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\r\n\r\n\t\tlet material = _distanceMaterials[ index ];\r\n\r\n\t\tif ( material === undefined ) {\r\n\r\n\t\t\tmaterial = new MeshDistanceMaterial( {\r\n\r\n\t\t\t\tmorphTargets: useMorphing,\r\n\t\t\t\tskinning: useSkinning\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t_distanceMaterials[ index ] = material;\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\r\n\r\n\t\tlet result = null;\r\n\r\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\r\n\t\tlet customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( light.isPointLight === true ) {\r\n\r\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( customMaterial === undefined ) {\r\n\r\n\t\t\tlet useMorphing = false;\r\n\r\n\t\t\tif ( material.morphTargets === true ) {\r\n\r\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet useSkinning = false;\r\n\r\n\t\t\tif ( object.isSkinnedMesh === true ) {\r\n\r\n\t\t\t\tif ( material.skinning === true ) {\r\n\r\n\t\t\t\t\tuseSkinning = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\r\n\r\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _renderer.localClippingEnabled &&\r\n\t\t\t\tmaterial.clipShadows === true &&\r\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\r\n\r\n\t\t\t// in this case we need a unique material instance reflecting the\r\n\t\t\t// appropriate state\r\n\r\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\r\n\r\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\r\n\r\n\t\t\tif ( materialsForVariant === undefined ) {\r\n\r\n\t\t\t\tmaterialsForVariant = {};\r\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n\t\t\tif ( cachedMaterial === undefined ) {\r\n\r\n\t\t\t\tcachedMaterial = result.clone();\r\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tresult.visible = material.visible;\r\n\t\tresult.wireframe = material.wireframe;\r\n\r\n\t\tif ( type === VSMShadowMap ) {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\r\n\r\n\t\t}\r\n\r\n\t\tresult.clipShadows = material.clipShadows;\r\n\t\tresult.clippingPlanes = material.clippingPlanes;\r\n\t\tresult.clipIntersection = material.clipIntersection;\r\n\r\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\tresult.linewidth = material.linewidth;\r\n\r\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\r\n\r\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tresult.nearDistance = shadowCameraNear;\r\n\t\t\tresult.farDistance = shadowCameraFar;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\r\n\r\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\r\n\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n\t\t\t\tconst geometry = _objects.update( object );\r\n\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\tconst group = groups[ k ];\r\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGLState( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction ColorBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tconst color = new Vector4();\r\n\t\tlet currentColorMask = null;\r\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetMask: function ( colorMask ) {\r\n\r\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n\t\t\t\t\tcurrentColorMask = colorMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha === true ) {\r\n\r\n\t\t\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolor.set( r, g, b, a );\r\n\r\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\r\n\r\n\t\t\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\t\t\tcurrentColorClear.copy( color );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentColorMask = null;\r\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction DepthBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentDepthMask = null;\r\n\t\tlet currentDepthFunc = null;\r\n\t\tlet currentDepthClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( depthTest ) {\r\n\r\n\t\t\t\tif ( depthTest ) {\r\n\r\n\t\t\t\t\tenable( 2929 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdisable( 2929 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( depthMask ) {\r\n\r\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.depthMask( depthMask );\r\n\t\t\t\t\tcurrentDepthMask = depthMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( depthFunc ) {\r\n\r\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\t\t\tcase NeverDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase AlwaysDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase LessEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase EqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase GreaterDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase NotEqualDepth:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgl.depthFunc( 515 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( depth ) {\r\n\r\n\t\t\t\tif ( currentDepthClear !== depth ) {\r\n\r\n\t\t\t\t\tgl.clearDepth( depth );\r\n\t\t\t\t\tcurrentDepthClear = depth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentDepthMask = null;\r\n\t\t\t\tcurrentDepthFunc = null;\r\n\t\t\t\tcurrentDepthClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction StencilBuffer() {\r\n\r\n\t\tlet locked = false;\r\n\r\n\t\tlet currentStencilMask = null;\r\n\t\tlet currentStencilFunc = null;\r\n\t\tlet currentStencilRef = null;\r\n\t\tlet currentStencilFuncMask = null;\r\n\t\tlet currentStencilFail = null;\r\n\t\tlet currentStencilZFail = null;\r\n\t\tlet currentStencilZPass = null;\r\n\t\tlet currentStencilClear = null;\r\n\r\n\t\treturn {\r\n\r\n\t\t\tsetTest: function ( stencilTest ) {\r\n\r\n\t\t\t\tif ( ! locked ) {\r\n\r\n\t\t\t\t\tif ( stencilTest ) {\r\n\r\n\t\t\t\t\t\tenable( 2960 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tdisable( 2960 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetMask: function ( stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n\t\t\t\t\tgl.stencilMask( stencilMask );\r\n\t\t\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\r\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\r\n\r\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\t\t\tcurrentStencilRef = stencilRef;\r\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\r\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n\t\t\t\t\tcurrentStencilFail = stencilFail;\r\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetLocked: function ( lock ) {\r\n\r\n\t\t\t\tlocked = lock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetClear: function ( stencil ) {\r\n\r\n\t\t\t\tif ( currentStencilClear !== stencil ) {\r\n\r\n\t\t\t\t\tgl.clearStencil( stencil );\r\n\t\t\t\t\tcurrentStencilClear = stencil;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\treset: function () {\r\n\r\n\t\t\t\tlocked = false;\r\n\r\n\t\t\t\tcurrentStencilMask = null;\r\n\t\t\t\tcurrentStencilFunc = null;\r\n\t\t\t\tcurrentStencilRef = null;\r\n\t\t\t\tcurrentStencilFuncMask = null;\r\n\t\t\t\tcurrentStencilFail = null;\r\n\t\t\t\tcurrentStencilZFail = null;\r\n\t\t\t\tcurrentStencilZPass = null;\r\n\t\t\t\tcurrentStencilClear = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst colorBuffer = new ColorBuffer();\r\n\tconst depthBuffer = new DepthBuffer();\r\n\tconst stencilBuffer = new StencilBuffer();\r\n\r\n\tlet enabledCapabilities = {};\r\n\r\n\tlet currentProgram = null;\r\n\r\n\tlet currentBlendingEnabled = null;\r\n\tlet currentBlending = null;\r\n\tlet currentBlendEquation = null;\r\n\tlet currentBlendSrc = null;\r\n\tlet currentBlendDst = null;\r\n\tlet currentBlendEquationAlpha = null;\r\n\tlet currentBlendSrcAlpha = null;\r\n\tlet currentBlendDstAlpha = null;\r\n\tlet currentPremultipledAlpha = false;\r\n\r\n\tlet currentFlipSided = null;\r\n\tlet currentCullFace = null;\r\n\r\n\tlet currentLineWidth = null;\r\n\r\n\tlet currentPolygonOffsetFactor = null;\r\n\tlet currentPolygonOffsetUnits = null;\r\n\r\n\tconst maxTextures = gl.getParameter( 35661 );\r\n\r\n\tlet lineWidthAvailable = false;\r\n\tlet version = 0;\r\n\tconst glVersion = gl.getParameter( 7938 );\r\n\r\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 1.0 );\r\n\r\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\r\n\r\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n\t\tlineWidthAvailable = ( version >= 2.0 );\r\n\r\n\t}\r\n\r\n\tlet currentTextureSlot = null;\r\n\tlet currentBoundTextures = {};\r\n\r\n\tconst currentScissor = new Vector4();\r\n\tconst currentViewport = new Vector4();\r\n\r\n\tfunction createTexture( type, target, count ) {\r\n\r\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\r\n\t\tconst texture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( type, texture );\r\n\t\tgl.texParameteri( type, 10241, 9728 );\r\n\t\tgl.texParameteri( type, 10240, 9728 );\r\n\r\n\t\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\tconst emptyTextures = {};\r\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\r\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\r\n\r\n\t// init\r\n\r\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\r\n\tdepthBuffer.setClear( 1 );\r\n\tstencilBuffer.setClear( 0 );\r\n\r\n\tenable( 2929 );\r\n\tdepthBuffer.setFunc( LessEqualDepth );\r\n\r\n\tsetFlipSided( false );\r\n\tsetCullFace( CullFaceBack );\r\n\tenable( 2884 );\r\n\r\n\tsetBlending( NoBlending );\r\n\r\n\t//\r\n\r\n\tfunction enable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tenabledCapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction disable( id ) {\r\n\r\n\t\tif ( enabledCapabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tenabledCapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction useProgram( program ) {\r\n\r\n\t\tif ( currentProgram !== program ) {\r\n\r\n\t\t\tgl.useProgram( program );\r\n\r\n\t\t\tcurrentProgram = program;\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tconst equationToGL = {\r\n\t\t[ AddEquation ]: 32774,\r\n\t\t[ SubtractEquation ]: 32778,\r\n\t\t[ ReverseSubtractEquation ]: 32779\r\n\t};\r\n\r\n\tif ( isWebGL2 ) {\r\n\r\n\t\tequationToGL[ MinEquation ] = 32775;\r\n\t\tequationToGL[ MaxEquation ] = 32776;\r\n\r\n\t} else {\r\n\r\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\r\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst factorToGL = {\r\n\t\t[ ZeroFactor ]: 0,\r\n\t\t[ OneFactor ]: 1,\r\n\t\t[ SrcColorFactor ]: 768,\r\n\t\t[ SrcAlphaFactor ]: 770,\r\n\t\t[ SrcAlphaSaturateFactor ]: 776,\r\n\t\t[ DstColorFactor ]: 774,\r\n\t\t[ DstAlphaFactor ]: 772,\r\n\t\t[ OneMinusSrcColorFactor ]: 769,\r\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\r\n\t\t[ OneMinusDstColorFactor ]: 775,\r\n\t\t[ OneMinusDstAlphaFactor ]: 773\r\n\t};\r\n\r\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending === NoBlending ) {\r\n\r\n\t\t\tif ( currentBlendingEnabled ) {\r\n\r\n\t\t\t\tdisable( 3042 );\r\n\t\t\t\tcurrentBlendingEnabled = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! currentBlendingEnabled ) {\r\n\r\n\t\t\tenable( 3042 );\r\n\t\t\tcurrentBlendingEnabled = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== CustomBlending ) {\r\n\r\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\r\n\r\n\t\t\t\t\tgl.blendEquation( 32774 );\r\n\r\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\r\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tswitch ( blending ) {\r\n\r\n\t\t\t\t\t\tcase NormalBlending:\r\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase AdditiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase SubtractiveBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MultiplyBlending:\r\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentBlendSrc = null;\r\n\t\t\t\tcurrentBlendDst = null;\r\n\t\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t\t\tcurrentBlending = blending;\r\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// custom blending\r\n\r\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\r\n\r\n\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\r\n\r\n\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tcurrentBlending = blending;\r\n\t\tcurrentPremultipledAlpha = null;\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material, frontFaceCW ) {\r\n\r\n\t\tmaterial.side === DoubleSide\r\n\t\t\t? disable( 2884 )\r\n\t\t\t: enable( 2884 );\r\n\r\n\t\tlet flipSided = ( material.side === BackSide );\r\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\r\n\r\n\t\tsetFlipSided( flipSided );\r\n\r\n\t\t( material.blending === NormalBlending && material.transparent === false )\r\n\t\t\t? setBlending( NoBlending )\r\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\tdepthBuffer.setFunc( material.depthFunc );\r\n\t\tdepthBuffer.setTest( material.depthTest );\r\n\t\tdepthBuffer.setMask( material.depthWrite );\r\n\t\tcolorBuffer.setMask( material.colorWrite );\r\n\r\n\t\tconst stencilWrite = material.stencilWrite;\r\n\t\tstencilBuffer.setTest( stencilWrite );\r\n\t\tif ( stencilWrite ) {\r\n\r\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\r\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\r\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\r\n\r\n\t\t}\r\n\r\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setFlipSided( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( 2304 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( 2305 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCullFace( cullFace ) {\r\n\r\n\t\tif ( cullFace !== CullFaceNone ) {\r\n\r\n\t\t\tenable( 2884 );\r\n\r\n\t\t\tif ( cullFace !== currentCullFace ) {\r\n\r\n\t\t\t\tif ( cullFace === CullFaceBack ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1029 );\r\n\r\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\r\n\r\n\t\t\t\t\tgl.cullFace( 1028 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.cullFace( 1032 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 2884 );\r\n\r\n\t\t}\r\n\r\n\t\tcurrentCullFace = cullFace;\r\n\r\n\t}\r\n\r\n\tfunction setLineWidth( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tenable( 32823 );\r\n\r\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 32823 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setScissorTest( scissorTest ) {\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tenable( 3089 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdisable( 3089 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// texture\r\n\r\n\tfunction activeTexture( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction bindTexture( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === null ) {\r\n\r\n\t\t\tactiveTexture();\r\n\r\n\t\t}\r\n\r\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction unbindTexture() {\r\n\r\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\r\n\r\n\t\t\tgl.bindTexture( boundTexture.type, null );\r\n\r\n\t\t\tboundTexture.type = undefined;\r\n\t\t\tboundTexture.texture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction compressedTexImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage2D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction texImage3D() {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage3D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction scissor( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction viewport( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction reset() {\r\n\r\n\t\tenabledCapabilities = {};\r\n\r\n\t\tcurrentTextureSlot = null;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentProgram = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\t\tcurrentCullFace = null;\r\n\r\n\t\tcolorBuffer.reset();\r\n\t\tdepthBuffer.reset();\r\n\t\tstencilBuffer.reset();\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tbuffers: {\r\n\t\t\tcolor: colorBuffer,\r\n\t\t\tdepth: depthBuffer,\r\n\t\t\tstencil: stencilBuffer\r\n\t\t},\r\n\r\n\t\tenable: enable,\r\n\t\tdisable: disable,\r\n\r\n\t\tuseProgram: useProgram,\r\n\r\n\t\tsetBlending: setBlending,\r\n\t\tsetMaterial: setMaterial,\r\n\r\n\t\tsetFlipSided: setFlipSided,\r\n\t\tsetCullFace: setCullFace,\r\n\r\n\t\tsetLineWidth: setLineWidth,\r\n\t\tsetPolygonOffset: setPolygonOffset,\r\n\r\n\t\tsetScissorTest: setScissorTest,\r\n\r\n\t\tactiveTexture: activeTexture,\r\n\t\tbindTexture: bindTexture,\r\n\t\tunbindTexture: unbindTexture,\r\n\t\tcompressedTexImage2D: compressedTexImage2D,\r\n\t\ttexImage2D: texImage2D,\r\n\t\ttexImage3D: texImage3D,\r\n\r\n\t\tscissor: scissor,\r\n\t\tviewport: viewport,\r\n\r\n\t\treset: reset\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\tconst maxTextures = capabilities.maxTextures;\r\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\r\n\tconst maxTextureSize = capabilities.maxTextureSize;\r\n\tconst maxSamples = capabilities.maxSamples;\r\n\r\n\tconst _videoTextures = new WeakMap();\r\n\tlet _canvas;\r\n\r\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\r\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\r\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\r\n\r\n\tlet useOffscreenCanvas = false;\r\n\r\n\ttry {\r\n\r\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\r\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\r\n\r\n\t} catch ( err ) {\r\n\r\n\t\t// Ignore any errors\r\n\r\n\t}\r\n\r\n\tfunction createCanvas( width, height ) {\r\n\r\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\r\n\r\n\t\treturn useOffscreenCanvas ?\r\n\t\t\tnew OffscreenCanvas( width, height ) :\r\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n\t}\r\n\r\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\r\n\r\n\t\tlet scale = 1;\r\n\r\n\t\t// handle case if texture exceeds max size\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\t// only perform resize if necessary\r\n\r\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\r\n\r\n\t\t\t// only perform resize for certain image types\r\n\r\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\r\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\r\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\r\n\r\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\r\n\r\n\t\t\t\tconst width = floor( scale * image.width );\r\n\t\t\t\tconst height = floor( scale * image.height );\r\n\r\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\r\n\r\n\t\t\t\t// cube textures can't reuse the same canvas\r\n\r\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\r\n\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tconst context = canvas.getContext( '2d' );\r\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\r\n\r\n\t\t\t\treturn canvas;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( 'data' in image ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn image;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( isWebGL2 ) return false;\r\n\r\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\r\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\r\n\r\n\t\treturn texture.generateMipmaps && supportsMips &&\r\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n\t}\r\n\r\n\tfunction generateMipmap( target, texture, width, height ) {\r\n\r\n\t\t_gl.generateMipmap( target );\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\r\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\r\n\r\n\t}\r\n\r\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\r\n\r\n\t\tif ( isWebGL2 === false ) return glFormat;\r\n\r\n\t\tif ( internalFormatName !== null ) {\r\n\r\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\r\n\r\n\t\t}\r\n\r\n\t\tlet internalFormat = glFormat;\r\n\r\n\t\tif ( glFormat === 6403 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6407 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\r\n\r\n\t\t}\r\n\r\n\t\tif ( glFormat === 6408 ) {\r\n\r\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\r\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\r\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\r\n\r\n\t\t}\r\n\r\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\r\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\r\n\r\n\t\t\textensions.get( 'EXT_color_buffer_float' );\r\n\r\n\t\t}\r\n\r\n\t\treturn internalFormat;\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback( f ) {\r\n\r\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\r\n\r\n\t\t\treturn 9728;\r\n\r\n\t\t}\r\n\r\n\t\treturn 9729;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tconst texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) {\r\n\r\n\t\t\t_videoTextures.delete( texture );\r\n\r\n\t\t}\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tconst renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\tinfo.memory.textures --;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\tproperties.remove( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget ) return;\r\n\r\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\trenderTarget.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.remove( renderTarget.texture );\r\n\t\tproperties.remove( renderTarget );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tlet textureUnits = 0;\r\n\r\n\tfunction resetTextureUnits() {\r\n\r\n\t\ttextureUnits = 0;\r\n\r\n\t}\r\n\r\n\tfunction allocateTextureUnit() {\r\n\r\n\t\tconst textureUnit = textureUnits;\r\n\r\n\t\tif ( textureUnit >= maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\ttextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tfunction setTexture2D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tconst image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\r\n\r\n\t\t\t} else if ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture2DArray( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture3D( texture, slot ) {\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction setTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture.image.length !== 6 ) return;\r\n\r\n\t\tconst textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\r\n\t\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\r\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\r\n\r\n\t\t\tconst cubeImage = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst image = cubeImage[ 0 ],\r\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\t\tglFormat = utils.convert( texture.format ),\r\n\t\t\t\tglType = utils.convert( texture.type ),\r\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\r\n\r\n\t\t\tlet mipmaps;\r\n\r\n\t\t\tif ( isCompressed ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmipmaps = texture.mipmaps;\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\t\t// We assume images for cube map have the same size.\r\n\t\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.activeTexture( 33984 + slot );\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setTextureCubeDynamic( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( 34067, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\tconst wrappingToGL = {\r\n\t\t[ RepeatWrapping ]: 10497,\r\n\t\t[ ClampToEdgeWrapping ]: 33071,\r\n\t\t[ MirroredRepeatWrapping ]: 33648\r\n\t};\r\n\r\n\tconst filterToGL = {\r\n\t\t[ NearestFilter ]: 9728,\r\n\t\t[ NearestMipmapNearestFilter ]: 9984,\r\n\t\t[ NearestMipmapLinearFilter ]: 9986,\r\n\r\n\t\t[ LinearFilter ]: 9729,\r\n\t\t[ LinearMipmapNearestFilter ]: 9985,\r\n\t\t[ LinearMipmapLinearFilter ]: 9987\r\n\t};\r\n\r\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\r\n\r\n\t\tif ( supportsMips ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\r\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\r\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\r\n\r\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\r\n\r\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initTexture( textureProperties, texture ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\tinfo.memory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tlet textureType = 3553;\r\n\r\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\r\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\r\n\r\n\t\tinitTexture( textureProperties, texture );\r\n\r\n\t\tstate.activeTexture( 33984 + slot );\r\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( 37440, texture.flipY );\r\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\r\n\r\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\r\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\r\n\r\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\r\n\t\t\tglFormat = utils.convert( texture.format );\r\n\r\n\t\tlet glType = utils.convert( texture.type ),\r\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\r\n\r\n\t\tsetTextureParameters( textureType, texture, supportsMips );\r\n\r\n\t\tlet mipmap;\r\n\t\tconst mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture.isDepthTexture ) {\r\n\r\n\t\t\t// populate depth texture with dummy data\r\n\r\n\t\t\tglInternalFormat = 6402;\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tglInternalFormat = 35056;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( texture.type === FloatType ) {\r\n\r\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// validation checks for WebGL 1\r\n\r\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedShortType;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\r\n\r\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tglInternalFormat = 34041;\r\n\r\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\r\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\r\n\r\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\r\n\t\t\t\t\tglType = utils.convert( texture.type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n\t\t} else if ( texture.isDataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture.isCompressedTexture ) {\r\n\r\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( glFormat !== null ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t} else if ( texture.isDataTexture2DArray ) {\r\n\r\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else if ( texture.isDataTexture3D ) {\r\n\r\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\r\n\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\r\n\r\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\r\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\r\n\r\n\t\t}\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tlet glInternalFormat = 33189;\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\r\n\r\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\r\n\r\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 36012;\r\n\r\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\r\n\r\n\t\t\t\t\t\tglInternalFormat = 33190;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\r\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t}\r\n\r\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\r\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\r\n\r\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\r\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\r\n\r\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\r\n\r\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\r\n\r\n\t\t}\r\n\r\n\t\t// upload an empty depth texture with framebuffer size\r\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\r\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\r\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\r\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\r\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\r\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\r\n\r\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\r\n\r\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\tinfo.memory.textures ++;\r\n\r\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\r\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\r\n\r\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\r\n\r\n\t\t\trenderTarget.texture.format = RGBAFormat;\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\tif ( isMultisample ) {\r\n\r\n\t\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\r\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\r\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\r\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\r\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\r\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\r\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\r\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\r\n\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 34067, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\r\n\r\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\r\n\r\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.bindTexture( 3553, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tconst texture = renderTarget.texture;\r\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\r\n\r\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\r\n\r\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\r\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\r\n\r\n\t\t\tstate.bindTexture( target, webglTexture );\r\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\r\n\t\t\tstate.bindTexture( target, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\r\n\r\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\tif ( isWebGL2 ) {\r\n\r\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\r\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\r\n\r\n\t\t\t\tconst width = renderTarget.width;\r\n\t\t\t\tconst height = renderTarget.height;\r\n\t\t\t\tlet mask = 16384;\r\n\r\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\r\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\r\n\r\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getRenderTargetSamples( renderTarget ) {\r\n\r\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\r\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\r\n\r\n\t}\r\n\r\n\tfunction updateVideoTexture( texture ) {\r\n\r\n\t\tconst frame = info.render.frame;\r\n\r\n\t\t// Check the last frame we updated the VideoTexture\r\n\r\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\r\n\r\n\t\t\t_videoTextures.set( texture, frame );\r\n\t\t\ttexture.update();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// backwards compatibility\r\n\r\n\tlet warnedTexture2D = false;\r\n\tlet warnedTextureCube = false;\r\n\r\n\tfunction safeSetTexture2D( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTexture2D === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTexture2D = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\tsetTexture2D( texture, slot );\r\n\r\n\t}\r\n\r\n\tfunction safeSetTextureCube( texture, slot ) {\r\n\r\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\tif ( warnedTextureCube === false ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\twarnedTextureCube = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture = texture.texture;\r\n\r\n\t\t}\r\n\r\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\r\n\t\t// TODO: unify these code paths\r\n\t\tif ( ( texture && texture.isCubeTexture ) ||\r\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t// this function alone should take care of cube textures\r\n\t\t\tsetTextureCube( texture, slot );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\r\n\t\t\tsetTextureCubeDynamic( texture, slot );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tthis.allocateTextureUnit = allocateTextureUnit;\r\n\tthis.resetTextureUnits = resetTextureUnits;\r\n\r\n\tthis.setTexture2D = setTexture2D;\r\n\tthis.setTexture2DArray = setTexture2DArray;\r\n\tthis.setTexture3D = setTexture3D;\r\n\tthis.setTextureCube = setTextureCube;\r\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\r\n\tthis.setupRenderTarget = setupRenderTarget;\r\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\r\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\r\n\r\n\tthis.safeSetTexture2D = safeSetTexture2D;\r\n\tthis.safeSetTextureCube = safeSetTextureCube;\r\n\r\n}\r\n\r\nfunction WebGLUtils( gl, extensions, capabilities ) {\r\n\r\n\tconst isWebGL2 = capabilities.isWebGL2;\r\n\r\n\tfunction convert( p ) {\r\n\r\n\t\tlet extension;\r\n\r\n\t\tif ( p === UnsignedByteType ) return 5121;\r\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\r\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\r\n\t\tif ( p === UnsignedShort565Type ) return 33635;\r\n\r\n\t\tif ( p === ByteType ) return 5120;\r\n\t\tif ( p === ShortType ) return 5122;\r\n\t\tif ( p === UnsignedShortType ) return 5123;\r\n\t\tif ( p === IntType ) return 5124;\r\n\t\tif ( p === UnsignedIntType ) return 5125;\r\n\t\tif ( p === FloatType ) return 5126;\r\n\r\n\t\tif ( p === HalfFloatType ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 5131;\r\n\r\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.HALF_FLOAT_OES;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === AlphaFormat ) return 6406;\r\n\t\tif ( p === RGBFormat ) return 6407;\r\n\t\tif ( p === RGBAFormat ) return 6408;\r\n\t\tif ( p === LuminanceFormat ) return 6409;\r\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\r\n\t\tif ( p === DepthFormat ) return 6402;\r\n\t\tif ( p === DepthStencilFormat ) return 34041;\r\n\t\tif ( p === RedFormat ) return 6403;\r\n\r\n\t\t// WebGL2 formats.\r\n\r\n\t\tif ( p === RedIntegerFormat ) return 36244;\r\n\t\tif ( p === RGFormat ) return 33319;\r\n\t\tif ( p === RGIntegerFormat ) return 33320;\r\n\t\tif ( p === RGBIntegerFormat ) return 36248;\r\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\r\n\r\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\r\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\r\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC1_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\r\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\r\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\r\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\r\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\r\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\r\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === RGBA_BPTC_Format ) {\r\n\r\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\t// TODO Complete?\r\n\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === UnsignedInt248Type ) {\r\n\r\n\t\t\tif ( isWebGL2 ) return 34042;\r\n\r\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { convert: convert };\r\n\r\n}\r\n\r\nfunction ArrayCamera( array ) {\r\n\r\n\tPerspectiveCamera.call( this );\r\n\r\n\tthis.cameras = array || [];\r\n\r\n}\r\n\r\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\r\n\r\n\tconstructor: ArrayCamera,\r\n\r\n\tisArrayCamera: true\r\n\r\n} );\r\n\r\nfunction Group() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n}\r\n\r\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Group,\r\n\r\n\tisGroup: true\r\n\r\n} );\r\n\r\nfunction WebXRController() {\r\n\r\n\tthis._targetRay = null;\r\n\tthis._grip = null;\r\n\tthis._hand = null;\r\n\r\n}\r\n\r\nObject.assign( WebXRController.prototype, {\r\n\r\n\tconstructor: WebXRController,\r\n\r\n\tgetHandSpace: function () {\r\n\r\n\t\tif ( this._hand === null ) {\r\n\r\n\t\t\tthis._hand = new Group();\r\n\t\t\tthis._hand.matrixAutoUpdate = false;\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t\tthis._hand.joints = [];\r\n\t\t\tthis._hand.inputState = { pinching: false };\r\n\r\n\t\t\tif ( window.XRHand ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\r\n\t\t\t\t\tlet joint = new Group();\r\n\t\t\t\t\tjoint.matrixAutoUpdate = false;\r\n\t\t\t\t\tjoint.visible = false;\r\n\t\t\t\t\tthis._hand.joints.push( joint );\r\n\t\t\t\t\t// ??\r\n\t\t\t\t\tthis._hand.add( joint );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this._hand;\r\n\r\n\t},\r\n\r\n\tgetTargetRaySpace: function () {\r\n\r\n\t\tif ( this._targetRay === null ) {\r\n\r\n\t\t\tthis._targetRay = new Group();\r\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._targetRay;\r\n\r\n\t},\r\n\r\n\tgetGripSpace: function () {\r\n\r\n\t\tif ( this._grip === null ) {\r\n\r\n\t\t\tthis._grip = new Group();\r\n\t\t\tthis._grip.matrixAutoUpdate = false;\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this._grip;\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.dispatchEvent( event );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function ( inputSource ) {\r\n\r\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\r\n\t\tif ( this._targetRay !== null ) {\r\n\r\n\t\t\tthis._targetRay.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._grip !== null ) {\r\n\r\n\t\t\tthis._grip.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this._hand !== null ) {\r\n\r\n\t\t\tthis._hand.visible = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function ( inputSource, frame, referenceSpace ) {\r\n\r\n\t\tlet inputPose = null;\r\n\t\tlet gripPose = null;\r\n\t\tlet handPose = null;\r\n\r\n\t\tconst targetRay = this._targetRay;\r\n\t\tconst grip = this._grip;\r\n\t\tconst hand = this._hand;\r\n\r\n\t\tif ( inputSource ) {\r\n\r\n\t\t\tif ( inputSource.hand ) {\r\n\r\n\t\t\t\thandPose = true;\r\n\r\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\r\n\r\n\t\t\t\t\tif ( inputSource.hand[ i ] ) {\r\n\r\n\t\t\t\t\t\t// Update the joints groups with the XRJoint poses\r\n\t\t\t\t\t\tlet jointPose = frame.getJointPose( inputSource.hand[ i ], referenceSpace );\r\n\t\t\t\t\t\tconst joint = hand.joints[ i ];\r\n\r\n\t\t\t\t\t\tif ( jointPose !== null ) {\r\n\r\n\t\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\r\n\t\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\r\n\t\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjoint.visible = jointPose !== null;\r\n\r\n\t\t\t\t\t\t// Custom events\r\n\r\n\t\t\t\t\t\t// Check pinch\r\n\t\t\t\t\t\tconst indexTip = hand.joints[ window.XRHand.INDEX_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst thumbTip = hand.joints[ window.XRHand.THUMB_PHALANX_TIP ];\r\n\t\t\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\r\n\r\n\t\t\t\t\t\tconst distanceToPinch = 0.02;\r\n\t\t\t\t\t\tconst threshold = 0.005;\r\n\r\n\t\t\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = false;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchend\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\r\n\r\n\t\t\t\t\t\t\thand.inputState.pinching = true;\r\n\t\t\t\t\t\t\tthis.dispatchEvent( {\r\n\t\t\t\t\t\t\t\ttype: \"pinchstart\",\r\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\r\n\t\t\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( inputPose !== null ) {\r\n\r\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\r\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\r\n\r\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\r\n\r\n\t\t\t\t\tif ( gripPose !== null ) {\r\n\r\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\r\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( targetRay !== null ) {\r\n\r\n\t\t\ttargetRay.visible = ( inputPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( grip !== null ) {\r\n\r\n\t\t\tgrip.visible = ( gripPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( hand !== null ) {\r\n\r\n\t\t\thand.visible = ( handPose !== null );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebXRManager( renderer, gl ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet session = null;\r\n\r\n\tlet framebufferScaleFactor = 1.0;\r\n\r\n\tlet referenceSpace = null;\r\n\tlet referenceSpaceType = 'local-floor';\r\n\r\n\tlet pose = null;\r\n\r\n\tconst controllers = [];\r\n\tconst inputSourcesMap = new Map();\r\n\r\n\t//\r\n\r\n\tconst cameraL = new PerspectiveCamera();\r\n\tcameraL.layers.enable( 1 );\r\n\tcameraL.viewport = new Vector4();\r\n\r\n\tconst cameraR = new PerspectiveCamera();\r\n\tcameraR.layers.enable( 2 );\r\n\tcameraR.viewport = new Vector4();\r\n\r\n\tconst cameras = [ cameraL, cameraR ];\r\n\r\n\tconst cameraVR = new ArrayCamera();\r\n\tcameraVR.layers.enable( 1 );\r\n\tcameraVR.layers.enable( 2 );\r\n\r\n\tlet _currentDepthNear = null;\r\n\tlet _currentDepthFar = null;\r\n\r\n\t//\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.isPresenting = false;\r\n\r\n\tthis.getController = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getTargetRaySpace();\r\n\r\n\t};\r\n\r\n\tthis.getControllerGrip = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getGripSpace();\r\n\r\n\t};\r\n\r\n\tthis.getHand = function ( index ) {\r\n\r\n\t\tlet controller = controllers[ index ];\r\n\r\n\t\tif ( controller === undefined ) {\r\n\r\n\t\t\tcontroller = new WebXRController();\r\n\t\t\tcontrollers[ index ] = controller;\r\n\r\n\t\t}\r\n\r\n\t\treturn controller.getHandSpace();\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tfunction onSessionEvent( event ) {\r\n\r\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\r\n\r\n\t\tif ( controller ) {\r\n\r\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onSessionEnd() {\r\n\r\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\r\n\r\n\t\t\tcontroller.disconnect( inputSource );\r\n\r\n\t\t} );\r\n\r\n\t\tinputSourcesMap.clear();\r\n\r\n\t\t//\r\n\r\n\t\trenderer.setFramebuffer( null );\r\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\r\n\t\tanimation.stop();\r\n\r\n\t\tscope.isPresenting = false;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\r\n\r\n\t}\r\n\r\n\tfunction onRequestReferenceSpace( value ) {\r\n\r\n\t\treferenceSpace = value;\r\n\r\n\t\tanimation.setContext( session );\r\n\t\tanimation.start();\r\n\r\n\t\tscope.isPresenting = true;\r\n\r\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\r\n\r\n\t}\r\n\r\n\tthis.setFramebufferScaleFactor = function ( value ) {\r\n\r\n\t\tframebufferScaleFactor = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setReferenceSpaceType = function ( value ) {\r\n\r\n\t\treferenceSpaceType = value;\r\n\r\n\t\tif ( scope.isPresenting === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getReferenceSpace = function () {\r\n\r\n\t\treturn referenceSpace;\r\n\r\n\t};\r\n\r\n\tthis.getSession = function () {\r\n\r\n\t\treturn session;\r\n\r\n\t};\r\n\r\n\tthis.setSession = function ( value ) {\r\n\r\n\t\tsession = value;\r\n\r\n\t\tif ( session !== null ) {\r\n\r\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\r\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\r\n\r\n\t\t\tconst attributes = gl.getContextAttributes();\r\n\r\n\t\t\tif ( attributes.xrCompatible !== true ) {\r\n\r\n\t\t\t\tgl.makeXRCompatible();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst layerInit = {\r\n\t\t\t\tantialias: attributes.antialias,\r\n\t\t\t\talpha: attributes.alpha,\r\n\t\t\t\tdepth: attributes.depth,\r\n\t\t\t\tstencil: attributes.stencil,\r\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\r\n\t\t\t};\r\n\r\n\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\r\n\r\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\r\n\r\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateInputSources( event ) {\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\t// Assign inputSources to available controllers\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// Notify disconnected\r\n\r\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.removed[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\r\n\t\t\t\tinputSourcesMap.delete( inputSource );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Notify connected\r\n\r\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\r\n\r\n\t\t\tconst inputSource = event.added[ i ];\r\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\r\n\r\n\t\t\tif ( controller ) {\r\n\r\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tconst cameraLPos = new Vector3();\r\n\tconst cameraRPos = new Vector3();\r\n\r\n\t/**\r\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\r\n\t * the cameras' projection and world matrices have already been set.\r\n\t * And that near and far planes are identical for both cameras.\r\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\r\n\t */\r\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\r\n\r\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\r\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\r\n\r\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\r\n\r\n\t\tconst projL = cameraL.projectionMatrix.elements;\r\n\t\tconst projR = cameraR.projectionMatrix.elements;\r\n\r\n\t\t// VR systems will have identical far and near planes, and\r\n\t\t// most likely identical top and bottom frustum extents.\r\n\t\t// Use the left camera for these values.\r\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\r\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\r\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\r\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\r\n\r\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\r\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\r\n\t\tconst left = near * leftFov;\r\n\t\tconst right = near * rightFov;\r\n\r\n\t\t// Calculate the new camera's position offset from the\r\n\t\t// left camera. xOffset should be roughly half `ipd`.\r\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\r\n\t\tconst xOffset = zOffset * - leftFov;\r\n\r\n\t\t// TODO: Better way to apply this offset?\r\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.translateX( xOffset );\r\n\t\tcamera.translateZ( zOffset );\r\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t// Find the union of the frustum values of the cameras and scale\r\n\t\t// the values so that the near plane's position does not change in world space,\r\n\t\t// although must now be relative to the new union camera.\r\n\t\tconst near2 = near + zOffset;\r\n\t\tconst far2 = far + zOffset;\r\n\t\tconst left2 = left - xOffset;\r\n\t\tconst right2 = right + ( ipd - xOffset );\r\n\t\tconst top2 = topFov * far / far2 * near2;\r\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\r\n\r\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\r\n\r\n\t}\r\n\r\n\tfunction updateCamera( camera, parent ) {\r\n\r\n\t\tif ( parent === null ) {\r\n\r\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\r\n\r\n\t\t}\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t}\r\n\r\n\tthis.getCamera = function ( camera ) {\r\n\r\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\r\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\r\n\r\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\r\n\r\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\r\n\r\n\t\t\tsession.updateRenderState( {\r\n\t\t\t\tdepthNear: cameraVR.near,\r\n\t\t\t\tdepthFar: cameraVR.far\r\n\t\t\t} );\r\n\r\n\t\t\t_currentDepthNear = cameraVR.near;\r\n\t\t\t_currentDepthFar = cameraVR.far;\r\n\r\n\t\t}\r\n\r\n\t\tconst parent = camera.parent;\r\n\t\tconst cameras = cameraVR.cameras;\r\n\r\n\t\tupdateCamera( cameraVR, parent );\r\n\r\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\r\n\r\n\t\t\tupdateCamera( cameras[ i ], parent );\r\n\r\n\t\t}\r\n\r\n\t\t// update camera and its children\r\n\r\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\r\n\r\n\t\tconst children = camera.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].updateMatrixWorld( true );\r\n\r\n\t\t}\r\n\r\n\t\t// update projection matrix for proper view frustum culling\r\n\r\n\t\tif ( cameras.length === 2 ) {\r\n\r\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assume single camera setup (AR)\r\n\r\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\treturn cameraVR;\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time, frame ) {\r\n\r\n\t\tpose = frame.getViewerPose( referenceSpace );\r\n\r\n\t\tif ( pose !== null ) {\r\n\r\n\t\t\tconst views = pose.views;\r\n\t\t\tconst baseLayer = session.renderState.baseLayer;\r\n\r\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\r\n\r\n\t\t\tlet cameraVRNeedsUpdate = false;\r\n\r\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\r\n\r\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\r\n\r\n\t\t\t\tcameraVR.cameras.length = 0;\r\n\t\t\t\tcameraVRNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\r\n\r\n\t\t\t\tconst view = views[ i ];\r\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\r\n\r\n\t\t\t\tconst camera = cameras[ i ];\r\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\r\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\r\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\r\n\r\n\t\t\t\tif ( i === 0 ) {\r\n\r\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\r\n\r\n\t\t\t\t\tcameraVR.cameras.push( camera );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst inputSources = session.inputSources;\r\n\r\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\r\n\r\n\t\t\tconst controller = controllers[ i ];\r\n\t\t\tconst inputSource = inputSources[ i ];\r\n\r\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\r\n\r\n\t\t}\r\n\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\r\n\t};\r\n\r\n\tthis.dispose = function () {};\r\n\r\n}\r\n\r\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\r\n\r\nfunction WebGLMaterials( properties ) {\r\n\r\n\tfunction refreshFogUniforms( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value.copy( fog.color );\r\n\r\n\t\tif ( fog.isFog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog.isFogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshMaterialUniforms( uniforms, material, environment, pixelRatio, height ) {\r\n\r\n\t\tif ( material.isMeshBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshLambertMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsLambert( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshToonMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsToon( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshPhongMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsPhong( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshStandardMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material, environment );\r\n\r\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhysical( uniforms, material, environment );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isMeshMatcapMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsMatcap( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDepthMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDepth( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshDistanceMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsDistance( uniforms, material );\r\n\r\n\t\t} else if ( material.isMeshNormalMaterial ) {\r\n\r\n\t\t\trefreshUniformsCommon( uniforms, material );\r\n\t\t\trefreshUniformsNormal( uniforms, material );\r\n\r\n\t\t} else if ( material.isLineBasicMaterial ) {\r\n\r\n\t\t\trefreshUniformsLine( uniforms, material );\r\n\r\n\t\t\tif ( material.isLineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsDash( uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( material.isPointsMaterial ) {\r\n\r\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\r\n\r\n\t\t} else if ( material.isSpriteMaterial ) {\r\n\r\n\t\t\trefreshUniformsSprites( uniforms, material );\r\n\r\n\t\t} else if ( material.isShadowMaterial ) {\r\n\r\n\t\t\tuniforms.color.value.copy( material.color );\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t} else if ( material.isShaderMaterial ) {\r\n\r\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tif ( material.color ) {\r\n\r\n\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.specularMap ) {\r\n\r\n\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\r\n\t\t}\r\n\r\n\t\tconst envMap = material.envMap || environment;\r\n\r\n\t\tif ( envMap ) {\r\n\r\n\t\t\tuniforms.envMap.value = envMap;\r\n\r\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\r\n\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\tvar maxMipLevel = properties.get( envMap ).__maxMipLevel;\r\n\r\n\t\t\tif ( maxMipLevel !== undefined ) {\r\n\r\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities for uv2\r\n\t\t// 1. ao map\r\n\t\t// 2. light map\r\n\r\n\t\tlet uv2ScaleMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.aoMap;\r\n\r\n\t\t} else if ( material.lightMap ) {\r\n\r\n\t\t\tuv2ScaleMap = material.lightMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv2ScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuv2ScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * pixelRatio;\r\n\t\tuniforms.scale.value = height * 0.5;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsSprites( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.rotation.value = material.rotation;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuniforms.map.value = material.map;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.alphaMap ) {\r\n\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. alpha map\r\n\r\n\t\tlet uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert( uniforms, material ) {\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value.copy( material.specular );\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsToon( uniforms, material ) {\r\n\r\n\t\tif ( material.gradientMap ) {\r\n\r\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap || environment ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\r\n\r\n\t\trefreshUniformsStandard( uniforms, material, environment );\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\r\n\r\n\t\tuniforms.clearcoat.value = material.clearcoat;\r\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\r\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\r\n\r\n\t\tif ( material.clearcoatMap ) {\r\n\r\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatRoughnessMap ) {\r\n\r\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.clearcoatNormalMap ) {\r\n\r\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\r\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\r\n\r\n\t\t\tif ( material.side === BackSide ) {\r\n\r\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.transmission.value = material.transmission;\r\n\r\n\t\tif ( material.transmissionMap ) {\r\n\r\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsMatcap( uniforms, material ) {\r\n\r\n\t\tif ( material.matcap ) {\r\n\r\n\t\t\tuniforms.matcap.value = material.matcap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDepth( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDistance( uniforms, material ) {\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\r\n\t\tuniforms.nearDistance.value = material.nearDistance;\r\n\t\tuniforms.farDistance.value = material.farDistance;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsNormal( uniforms, material ) {\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\trefreshFogUniforms: refreshFogUniforms,\r\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\r\n\t};\r\n\r\n}\r\n\r\nfunction WebGLRenderer( parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\r\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\r\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\r\n\r\n\tlet currentRenderList = null;\r\n\tlet currentRenderState = null;\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\r\n\t// Debug configuration container\r\n\tthis.debug = {\r\n\r\n\t\t/**\r\n\t\t * Enables error checking and reporting when shader programs are being compiled\r\n\t\t * @type {boolean}\r\n\t\t */\r\n\t\tcheckShaderErrors: true\r\n\t};\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// user-defined clipping\r\n\r\n\tthis.clippingPlanes = [];\r\n\tthis.localClippingEnabled = false;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.outputEncoding = LinearEncoding;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = NoToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// internal properties\r\n\r\n\tconst _this = this;\r\n\r\n\tlet _isContextLost = false;\r\n\r\n\t// internal state cache\r\n\r\n\tlet _framebuffer = null;\r\n\r\n\tlet _currentActiveCubeFace = 0;\r\n\tlet _currentActiveMipmapLevel = 0;\r\n\tlet _currentRenderTarget = null;\r\n\tlet _currentFramebuffer = null;\r\n\tlet _currentMaterialId = - 1;\r\n\r\n\tlet _currentCamera = null;\r\n\tlet _currentArrayCamera = null;\r\n\r\n\tconst _currentViewport = new Vector4();\r\n\tconst _currentScissor = new Vector4();\r\n\tlet _currentScissorTest = null;\r\n\r\n\t//\r\n\r\n\tlet _width = _canvas.width;\r\n\tlet _height = _canvas.height;\r\n\r\n\tlet _pixelRatio = 1;\r\n\tlet _opaqueSort = null;\r\n\tlet _transparentSort = null;\r\n\r\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\r\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\r\n\tlet _scissorTest = false;\r\n\r\n\t// frustum\r\n\r\n\tconst _frustum = new Frustum();\r\n\r\n\t// clipping\r\n\r\n\tconst _clipping = new WebGLClipping();\r\n\tlet _clippingEnabled = false;\r\n\tlet _localClippingEnabled = false;\r\n\r\n\t// camera matrices cache\r\n\r\n\tconst _projScreenMatrix = new Matrix4();\r\n\r\n\tconst _vector3 = new Vector3();\r\n\r\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\t// initialize\r\n\r\n\tlet _gl = _context;\r\n\r\n\tfunction getContext( contextNames, contextAttributes ) {\r\n\r\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\r\n\r\n\t\t\tconst contextName = contextNames[ i ];\r\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\r\n\t\t\tif ( context !== null ) return context;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\ttry {\r\n\r\n\t\tconst contextAttributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\r\n\t\t\tpowerPreference: _powerPreference,\r\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\r\n\t\t};\r\n\r\n\t\t// event listeners must be registered before WebGL context is created, see #12753\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\r\n\r\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\r\n\r\n\t\t\t\tcontextNames.shift();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl = getContext( contextNames, contextAttributes );\r\n\r\n\t\t\tif ( _gl === null ) {\r\n\r\n\t\t\t\tif ( getContext( contextNames ) ) {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\r\n\t\tthrow error;\r\n\r\n\t}\r\n\r\n\tlet extensions, capabilities, state, info;\r\n\tlet properties, textures, attributes, geometries, objects;\r\n\tlet programCache, materials, renderLists, renderStates;\r\n\r\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\r\n\r\n\tlet utils, bindingStates;\r\n\r\n\tfunction initGLContext() {\r\n\r\n\t\textensions = new WebGLExtensions( _gl );\r\n\r\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\t\tif ( capabilities.isWebGL2 === false ) {\r\n\r\n\t\t\textensions.get( 'WEBGL_depth_texture' );\r\n\t\t\textensions.get( 'OES_texture_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float' );\r\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\r\n\t\t\textensions.get( 'OES_standard_derivatives' );\r\n\t\t\textensions.get( 'OES_element_index_uint' );\r\n\t\t\textensions.get( 'OES_vertex_array_object' );\r\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t}\r\n\r\n\t\textensions.get( 'OES_texture_float_linear' );\r\n\r\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\r\n\r\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t\tinfo = new WebGLInfo( _gl );\r\n\t\tproperties = new WebGLProperties();\r\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\r\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\r\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\r\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\r\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\r\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\r\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities, bindingStates );\r\n\t\tmaterials = new WebGLMaterials( properties );\r\n\t\trenderLists = new WebGLRenderLists( properties );\r\n\t\trenderStates = new WebGLRenderStates();\r\n\r\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\r\n\r\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\r\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\r\n\r\n\t\tinfo.programs = programCache.programs;\r\n\r\n\t\t_this.capabilities = capabilities;\r\n\t\t_this.extensions = extensions;\r\n\t\t_this.properties = properties;\r\n\t\t_this.renderLists = renderLists;\r\n\t\t_this.state = state;\r\n\t\t_this.info = info;\r\n\r\n\t}\r\n\r\n\tinitGLContext();\r\n\r\n\t// xr\r\n\r\n\tconst xr = new WebXRManager( _this, _gl );\r\n\r\n\tthis.xr = xr;\r\n\r\n\t// shadow map\r\n\r\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.loseContext();\r\n\r\n\t};\r\n\r\n\tthis.forceContextRestore = function () {\r\n\r\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\r\n\t\tif ( extension ) extension.restoreContext();\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _width, _height, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width, _height );\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\tif ( xr.isPresenting ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getDrawingBufferSize = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\r\n\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\r\n\r\n\t};\r\n\r\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_pixelRatio = pixelRatio;\r\n\r\n\t\t_canvas.width = Math.floor( width * pixelRatio );\r\n\t\t_canvas.height = Math.floor( height * pixelRatio );\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.getCurrentViewport = function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\r\n\r\n\t\t\ttarget = new Vector4();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( _currentViewport );\r\n\r\n\t};\r\n\r\n\tthis.getViewport = function ( target ) {\r\n\r\n\t\treturn target.copy( _viewport );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_viewport.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissor = function ( target ) {\r\n\r\n\t\treturn target.copy( _scissor );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tif ( x.isVector4 ) {\r\n\r\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_scissor.set( x, y, width, height );\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn _scissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\tthis.setOpaqueSort = function ( method ) {\r\n\r\n\t\t_opaqueSort = method;\r\n\r\n\t};\r\n\r\n\tthis.setTransparentSort = function ( method ) {\r\n\r\n\t\t_transparentSort = method;\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn background.getClearColor();\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function () {\r\n\r\n\t\tbackground.setClearColor.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn background.getClearAlpha();\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function () {\r\n\r\n\t\tbackground.setClearAlpha.apply( background, arguments );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tlet bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= 16384;\r\n\t\tif ( depth === undefined || depth ) bits |= 256;\r\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n\t\trenderLists.dispose();\r\n\t\trenderStates.dispose();\r\n\t\tproperties.dispose();\r\n\t\tobjects.dispose();\r\n\t\tbindingStates.dispose();\r\n\r\n\t\txr.dispose();\r\n\r\n\t\tanimation.stop();\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\r\n\r\n\t\t_isContextLost = true;\r\n\r\n\t}\r\n\r\n\tfunction onContextRestore( /* event */ ) {\r\n\r\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\r\n\r\n\t\t_isContextLost = false;\r\n\r\n\t\tinitGLContext();\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tconst material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.remove( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tconst programInfo = properties.get( material ).program;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tfunction renderObjectImmediate( object, program ) {\r\n\r\n\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t_this.renderBufferImmediate( object, program );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tthis.renderBufferImmediate = function ( object, program ) {\r\n\r\n\t\tbindingStates.initAttributes();\r\n\r\n\t\tconst buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\r\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\r\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\r\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\r\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\r\n\r\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\r\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( 4, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\r\n\r\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\r\n\r\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\tstate.setMaterial( material, frontFaceCW );\r\n\r\n\t\t//\r\n\r\n\t\tlet index = geometry.index;\r\n\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tif ( index === null ) {\r\n\r\n\t\t\tif ( position === undefined || position.count === 0 ) return;\r\n\r\n\t\t} else if ( index.count === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet rangeFactor = 1;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\r\n\t\t\trangeFactor = 2;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphTargets || material.morphNormals ) {\r\n\r\n\t\t\tmorphtargets.update( object, geometry, material, program );\r\n\r\n\t\t}\r\n\r\n\t\tbindingStates.setup( object, material, program, geometry, index );\r\n\r\n\t\tlet attribute;\r\n\t\tlet renderer = bufferRenderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tattribute = attributes.get( index );\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( attribute );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\r\n\r\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\r\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\r\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\r\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\tif ( drawCount === 0 ) return;\r\n\r\n\t\t//\r\n\r\n\t\tif ( object.isMesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isLine ) {\r\n\r\n\t\t\tlet lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object.isLineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( 1 );\r\n\r\n\t\t\t} else if ( object.isLineLoop ) {\r\n\r\n\t\t\t\trenderer.setMode( 2 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object.isPoints ) {\r\n\r\n\t\t\trenderer.setMode( 0 );\r\n\r\n\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\trenderer.setMode( 4 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.isInstancedMesh ) {\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\r\n\r\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\r\n\r\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\r\n\r\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Compile\r\n\r\n\tthis.compile = function ( scene, camera ) {\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tconst compiled = new WeakMap();\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tlet material = object.material;\r\n\r\n\t\t\tif ( material ) {\r\n\r\n\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tlet material2 = material[ i ];\r\n\r\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\r\n\r\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\r\n\t\t\t\t\t\t\tcompiled.set( material2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\r\n\r\n\t\t\t\t\tinitMaterial( material, scene, object );\r\n\t\t\t\t\tcompiled.set( material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t// Animation Loop\r\n\r\n\tlet onAnimationFrameCallback = null;\r\n\r\n\tfunction onAnimationFrame( time ) {\r\n\r\n\t\tif ( xr.isPresenting ) return;\r\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\r\n\r\n\t}\r\n\r\n\tconst animation = new WebGLAnimation();\r\n\tanimation.setAnimationLoop( onAnimationFrame );\r\n\r\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\r\n\r\n\tthis.setAnimationLoop = function ( callback ) {\r\n\r\n\t\tonAnimationFrameCallback = callback;\r\n\t\txr.setAnimationLoop( callback );\r\n\r\n\t\t( callback === null ) ? animation.stop() : animation.start();\r\n\r\n\t};\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tlet renderTarget, forceClear;\r\n\r\n\t\tif ( arguments[ 2 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\r\n\t\t\trenderTarget = arguments[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( arguments[ 3 ] !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\r\n\t\t\tforceClear = arguments[ 3 ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _isContextLost === true ) return;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\tbindingStates.resetDefaultState();\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\r\n\r\n\t\t\tcamera = xr.getCamera( camera );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\r\n\r\n\t\tcurrentRenderState = renderStates.get( scene, camera );\r\n\t\tcurrentRenderState.init();\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\r\n\r\n\t\t_localClippingEnabled = this.localClippingEnabled;\r\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n\t\tcurrentRenderList = renderLists.get( scene, camera );\r\n\t\tcurrentRenderList.init();\r\n\r\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\r\n\r\n\t\tcurrentRenderList.finish();\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.beginShadows();\r\n\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tshadowMap.render( shadowsArray, scene, camera );\r\n\r\n\t\tcurrentRenderState.setupLights( camera );\r\n\r\n\t\tif ( _clippingEnabled === true ) _clipping.endShadows();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.info.autoReset === true ) this.info.reset();\r\n\r\n\t\tif ( renderTarget !== undefined ) {\r\n\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\r\n\r\n\t\t// render scene\r\n\r\n\t\tconst opaqueObjects = currentRenderList.opaque;\r\n\t\tconst transparentObjects = currentRenderList.transparent;\r\n\r\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\r\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\tif ( _currentRenderTarget !== null ) {\r\n\r\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\r\n\r\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\r\n\r\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.buffers.depth.setTest( true );\r\n\t\tstate.buffers.depth.setMask( true );\r\n\t\tstate.buffers.color.setMask( true );\r\n\r\n\t\tstate.setPolygonOffset( false );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t\tcurrentRenderList = null;\r\n\t\tcurrentRenderState = null;\r\n\r\n\t};\r\n\r\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tconst visible = object.layers.test( camera.layers );\r\n\r\n\t\tif ( visible ) {\r\n\r\n\t\t\tif ( object.isGroup ) {\r\n\r\n\t\t\t\tgroupOrder = object.renderOrder;\r\n\r\n\t\t\t} else if ( object.isLOD ) {\r\n\r\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\r\n\r\n\t\t\t} else if ( object.isLight ) {\r\n\r\n\t\t\t\tcurrentRenderState.pushLight( object );\r\n\r\n\t\t\t\tif ( object.castShadow ) {\r\n\r\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isSprite ) {\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n\t\t\t\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\t\t\t\t// update skeleton only once in a frame\r\n\r\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\r\n\r\n\t\t\t\t\t\tobject.skeleton.update();\r\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\r\n\r\n\t\t\t\t\tif ( sortObjects ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\r\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst geometry = objects.update( object );\r\n\t\t\t\t\tconst material = object.material;\r\n\r\n\t\t\t\t\tif ( Array.isArray( material ) ) {\r\n\r\n\t\t\t\t\t\tconst groups = geometry.groups;\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst group = groups[ i ];\r\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\r\n\r\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( material.visible ) {\r\n\r\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, scene, camera ) {\r\n\r\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\r\n\r\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst renderItem = renderList[ i ];\r\n\r\n\t\t\tconst object = renderItem.object;\r\n\t\t\tconst geometry = renderItem.geometry;\r\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\r\n\t\t\tconst group = renderItem.group;\r\n\r\n\t\t\tif ( camera.isArrayCamera ) {\r\n\r\n\t\t\t\t_currentArrayCamera = camera;\r\n\r\n\t\t\t\tconst cameras = camera.cameras;\r\n\r\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tconst camera2 = cameras[ j ];\r\n\r\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\r\n\r\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\r\n\r\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\r\n\r\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_currentArrayCamera = null;\r\n\r\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\r\n\r\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\tif ( object.isImmediateRenderObject ) {\r\n\r\n\t\t\tconst program = setProgram( camera, scene, material, object );\r\n\r\n\t\t\tstate.setMaterial( material );\r\n\r\n\t\t\tbindingStates.reset();\r\n\r\n\t\t\trenderObjectImmediate( object, program );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\r\n\r\n\t\t}\r\n\r\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\r\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, scene, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n\t\tconst lightsStateVersion = lights.state.version;\r\n\r\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\r\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\r\n\r\n\t\tlet program = materialProperties.program;\r\n\t\tlet programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\r\n\r\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tparameters.uniforms = programCache.getUniforms( material, parameters );\r\n\r\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\r\n\r\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\r\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\r\n\r\n\t\t}\r\n\r\n\t\tconst programAttributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( let i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( ! material.isShaderMaterial &&\r\n\t\t\t! material.isRawShaderMaterial ||\r\n\t\t\tmaterial.clipping === true ) {\r\n\r\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\r\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\r\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tmaterialProperties.fog = scene.fog;\r\n\r\n\t\t// store the light setup it was created for\r\n\r\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\r\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\r\n\r\n\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\r\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\r\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\r\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\r\n\t\t\tuniforms.spotLights.value = lights.state.spot;\r\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\r\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\r\n\t\t\tuniforms.pointLights.value = lights.state.point;\r\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\r\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\r\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\r\n\r\n\t\t}\r\n\r\n\t\tconst progUniforms = materialProperties.program.getUniforms(),\r\n\t\t\tuniformsList =\r\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n\t\tmaterialProperties.uniformsList = uniformsList;\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, scene, material, object ) {\r\n\r\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\r\n\r\n\t\ttextures.resetTextureUnits();\r\n\r\n\t\tconst fog = scene.fog;\r\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\r\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\r\n\r\n\t\tconst materialProperties = properties.get( material );\r\n\t\tconst lights = currentRenderState.state.lights;\r\n\r\n\t\tif ( _clippingEnabled === true ) {\r\n\r\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\r\n\r\n\t\t\t\tconst useCache =\r\n\t\t\t\t\tcamera === _currentCamera &&\r\n\t\t\t\t\tmaterial.id === _currentMaterialId;\r\n\r\n\t\t\t\t// we might want to call this function with some ClippingGroup\r\n\t\t\t\t// object instead of the material, once it becomes feasible\r\n\t\t\t\t// (#8465, #8379)\r\n\t\t\t\t_clipping.setState(\r\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\r\n\t\t\t\t\tcamera, materialProperties, useCache );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.version === materialProperties.__version ) {\r\n\r\n\t\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.environment !== environment ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\r\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\r\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\r\n\r\n\t\t\t\tinitMaterial( material, scene, object );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tinitMaterial( material, scene, object );\r\n\t\t\tmaterialProperties.__version = material.version;\r\n\r\n\t\t}\r\n\r\n\t\tlet refreshProgram = false;\r\n\t\tlet refreshMaterial = false;\r\n\t\tlet refreshLights = false;\r\n\r\n\t\tconst program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.uniforms;\r\n\r\n\t\tif ( state.useProgram( program.program ) ) {\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\r\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _currentCamera !== camera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material.isShaderMaterial ||\r\n\t\t\t\tmaterial.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.envMap ) {\r\n\r\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n\t\t\t\tif ( uCamPos !== undefined ) {\r\n\r\n\t\t\t\t\tuCamPos.setValue( _gl,\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.isMeshPhongMaterial ||\r\n\t\t\t\tmaterial.isMeshToonMaterial ||\r\n\t\t\t\tmaterial.isMeshLambertMaterial ||\r\n\t\t\t\tmaterial.isMeshBasicMaterial ||\r\n\t\t\t\tmaterial.isMeshStandardMaterial ||\r\n\t\t\t\tmaterial.isShaderMaterial ||\r\n\t\t\t\tmaterial.isShadowMaterial ||\r\n\t\t\t\tmaterial.skinning ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n\t\t\tconst skeleton = object.skeleton;\r\n\r\n\t\t\tif ( skeleton ) {\r\n\r\n\t\t\t\tconst bones = skeleton.bones;\r\n\r\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\r\n\r\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\r\n\r\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\r\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\r\n\t\t\t\t\t\tsize = Math.max( size, 4 );\r\n\r\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\r\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\r\n\r\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\r\n\r\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\r\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\r\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\r\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\r\n\r\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\r\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\r\n\r\n\t\t\tif ( materialProperties.needsLights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, environment, _pixelRatio, _height );\r\n\r\n\t\t\t// RectAreaLight Texture\r\n\t\t\t// TODO (mrdoob): Find a nicer implementation\r\n\r\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\r\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\r\n\r\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\r\n\t\t\tmaterial.uniformsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.isSpriteMaterial ) {\r\n\r\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\r\n\r\n\t\t}\r\n\r\n\t\t// common matrices\r\n\r\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\r\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\t\tuniforms.lightProbe.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.pointLightShadows.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.spotLightShadows.needsUpdate = value;\r\n\t\tuniforms.rectAreaLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\tfunction materialNeedsLights( material ) {\r\n\r\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\r\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\r\n\t\t\t( material.isShaderMaterial && material.lights === true );\r\n\r\n\t}\r\n\r\n\t//\r\n\tthis.setFramebuffer = function ( value ) {\r\n\r\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\r\n\r\n\t\t_framebuffer = value;\r\n\r\n\t};\r\n\r\n\tthis.getActiveCubeFace = function () {\r\n\r\n\t\treturn _currentActiveCubeFace;\r\n\r\n\t};\r\n\r\n\tthis.getActiveMipmapLevel = function () {\r\n\r\n\t\treturn _currentActiveMipmapLevel;\r\n\r\n\t};\r\n\r\n\tthis.getRenderTarget = function () {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t};\r\n\r\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\t\t_currentActiveCubeFace = activeCubeFace;\r\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\ttextures.setupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = _framebuffer;\r\n\t\tlet isCube = false;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\r\n\t\t\t\tisCube = true;\r\n\r\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\r\n\r\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = __webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\r\n\r\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\r\n\r\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tlet restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst texture = renderTarget.texture;\r\n\t\t\t\tconst textureFormat = texture.format;\r\n\t\t\t\tconst textureType = texture.type;\r\n\r\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\r\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\r\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\r\n\r\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst levelScale = Math.pow( 2, - level );\r\n\t\tconst width = Math.floor( texture.image.width * levelScale );\r\n\t\tconst height = Math.floor( texture.image.height * levelScale );\r\n\t\tconst glFormat = utils.convert( texture.format );\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\r\n\r\n\t\tif ( level === undefined ) level = 0;\r\n\r\n\t\tconst width = srcTexture.image.width;\r\n\t\tconst height = srcTexture.image.height;\r\n\t\tconst glFormat = utils.convert( dstTexture.format );\r\n\t\tconst glType = utils.convert( dstTexture.type );\r\n\r\n\t\ttextures.setTexture2D( dstTexture, 0 );\r\n\r\n\t\t// As another texture upload may have changed pixelStorei\r\n\t\t// parameters, make sure they are correct for the dstTexture\r\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\r\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\r\n\r\n\t\tif ( srcTexture.isDataTexture ) {\r\n\r\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( srcTexture.isCompressedTexture ) {\r\n\r\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Generate mipmaps only when copying level 0\r\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tthis.initTexture = function ( texture ) {\r\n\r\n\t\ttextures.setTexture2D( texture, 0 );\r\n\r\n\t\tstate.unbindTexture();\r\n\r\n\t};\r\n\r\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction WebGL1Renderer( parameters ) {\r\n\r\n\tWebGLRenderer.call( this, parameters );\r\n\r\n}\r\n\r\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\r\n\r\n\tconstructor: WebGL1Renderer,\r\n\r\n\tisWebGL1Renderer: true\r\n\r\n} );\r\n\r\nfunction FogExp2( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n}\r\n\r\nObject.assign( FogExp2.prototype, {\r\n\r\n\tisFogExp2: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new FogExp2( this.color, this.density );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'FogExp2',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tdensity: this.density\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Fog( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n}\r\n\r\nObject.assign( Fog.prototype, {\r\n\r\n\tisFog: true,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Fog( this.color, this.near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( /* meta */ ) {\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'Fog',\r\n\t\t\tcolor: this.color.getHex(),\r\n\t\t\tnear: this.near,\r\n\t\t\tfar: this.far\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InterleavedBuffer( array, stride ) {\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\tthis.count = array !== undefined ? array.length / stride : 0;\r\n\r\n\tthis.usage = StaticDrawUsage;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n}\r\n\r\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\r\n\tisInterleavedBuffer: true,\r\n\r\n\tonUploadCallback: function () {},\r\n\r\n\tsetUsage: function ( value ) {\r\n\r\n\t\tthis.usage = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.count = source.count;\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.usage = source.usage;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\r\n\r\n\t\t}\r\n\r\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\r\n\r\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\r\n\t\tib.setUsage( this.usage );\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\tonUpload: function ( callback ) {\r\n\r\n\t\tthis.onUploadCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data.arrayBuffers === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers = {};\r\n\r\n\t\t}\r\n\r\n\t\t// generate UUID for array buffer if necessary\r\n\r\n\t\tif ( this.array.buffer._uuid === undefined ) {\r\n\r\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\r\n\r\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\treturn {\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tbuffer: this.array.buffer._uuid,\r\n\t\t\ttype: this.array.constructor.name,\r\n\t\t\tstride: this.stride\r\n\t\t};\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$6 = new Vector3();\r\n\r\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n\tthis.normalized = normalized === true;\r\n\r\n}\r\n\r\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\r\n\r\n\tcount: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.count;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tarray: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.data.array;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tneedsUpdate: {\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tthis.data.needsUpdate = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBufferAttribute.prototype, {\r\n\r\n\tisInterleavedBufferAttribute: true,\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\r\n\r\n\t\t\t_vector$6.x = this.getX( i );\r\n\t\t\t_vector$6.y = this.getY( i );\r\n\t\t\t_vector$6.z = this.getZ( i );\r\n\r\n\t\t\t_vector$6.applyMatrix4( m );\r\n\r\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tif ( data === undefined ) {\r\n\r\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\r\n\r\n\t\t\tconst array = [];\r\n\r\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\r\n\r\n\t\t\t\tconst index = i * this.data.stride + this.offset;\r\n\r\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\r\n\r\n\t\t\treturn {\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\ttype: this.array.constructor.name,\r\n\t\t\t\tarray: array,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// save as true interlaved attribtue\r\n\r\n\t\t\tif ( data.interleavedBuffers === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\r\n\r\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tisInterleavedBufferAttribute: true,\r\n\t\t\t\titemSize: this.itemSize,\r\n\t\t\t\tdata: this.data.uuid,\r\n\t\t\t\toffset: this.offset,\r\n\t\t\t\tnormalized: this.normalized\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *  rotation: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */\r\n\r\nfunction SpriteMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nSpriteMaterial.prototype = Object.create( Material.prototype );\r\nSpriteMaterial.prototype.constructor = SpriteMaterial;\r\nSpriteMaterial.prototype.isSpriteMaterial = true;\r\n\r\nSpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nlet _geometry;\r\n\r\nconst _intersectPoint = new Vector3();\r\nconst _worldScale = new Vector3();\r\nconst _mvPosition = new Vector3();\r\n\r\nconst _alignedPosition = new Vector2();\r\nconst _rotatedPosition = new Vector2();\r\nconst _viewWorldMatrix = new Matrix4();\r\n\r\nconst _vA$1 = new Vector3();\r\nconst _vB$1 = new Vector3();\r\nconst _vC$1 = new Vector3();\r\n\r\nconst _uvA$1 = new Vector2();\r\nconst _uvB$1 = new Vector2();\r\nconst _uvC$1 = new Vector2();\r\n\r\nfunction Sprite( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Sprite';\r\n\r\n\tif ( _geometry === undefined ) {\r\n\r\n\t\t_geometry = new BufferGeometry();\r\n\r\n\t\tconst float32Array = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\r\n\t\t\t0.5, - 0.5, 0, 1, 0,\r\n\t\t\t0.5, 0.5, 0, 1, 1,\r\n\t\t\t- 0.5, 0.5, 0, 0, 1\r\n\t\t] );\r\n\r\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\r\n\r\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\r\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\r\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\r\n\r\n\t}\r\n\r\n\tthis.geometry = _geometry;\r\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\r\n\r\n\tthis.center = new Vector2( 0.5, 0.5 );\r\n\r\n}\r\n\r\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Sprite,\r\n\r\n\tisSprite: true,\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tif ( raycaster.camera === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\r\n\r\n\t\t}\r\n\r\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\r\n\r\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\r\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\r\n\r\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\r\n\r\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\r\n\r\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\r\n\r\n\t\t}\r\n\r\n\t\tconst rotation = this.material.rotation;\r\n\t\tlet sin, cos;\r\n\r\n\t\tif ( rotation !== 0 ) {\r\n\r\n\t\t\tcos = Math.cos( rotation );\r\n\t\t\tsin = Math.sin( rotation );\r\n\r\n\t\t}\r\n\r\n\t\tconst center = this.center;\r\n\r\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\r\n\t\t_uvA$1.set( 0, 0 );\r\n\t\t_uvB$1.set( 1, 0 );\r\n\t\t_uvC$1.set( 1, 1 );\r\n\r\n\t\t// check first triangle\r\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\r\n\r\n\t\tif ( intersect === null ) {\r\n\r\n\t\t\t// check second triangle\r\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\r\n\t\t\t_uvB$1.set( 0, 1 );\r\n\r\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\r\n\t\t\tif ( intersect === null ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: _intersectPoint.clone(),\r\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\r\n\r\n\t\tthis.material = source.material;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\r\n\r\n\t// compute position in camera space\r\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\r\n\r\n\t// to check if rotation is not zero\r\n\tif ( sin !== undefined ) {\r\n\r\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\r\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\r\n\r\n\t} else {\r\n\r\n\t\t_rotatedPosition.copy( _alignedPosition );\r\n\r\n\t}\r\n\r\n\r\n\tvertexPosition.copy( mvPosition );\r\n\tvertexPosition.x += _rotatedPosition.x;\r\n\tvertexPosition.y += _rotatedPosition.y;\r\n\r\n\t// transform to world space\r\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\r\n\r\n}\r\n\r\nconst _v1$4 = new Vector3();\r\nconst _v2$2 = new Vector3();\r\n\r\nfunction LOD() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis._currentLevel = 0;\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.autoUpdate = true;\r\n\r\n}\r\n\r\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: LOD,\r\n\r\n\tisLOD: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\t\tconst levels = source.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddLevel: function ( object, distance ) {\r\n\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\r\n\t\tdistance = Math.abs( distance );\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tlet l;\r\n\r\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCurrentLevel: function () {\r\n\r\n\t\treturn this._currentLevel;\r\n\r\n\t},\r\n\r\n\tgetObjectForDistance: function ( distance ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn levels[ i - 1 ].object;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 0 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\r\n\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tlet i, l;\r\n\r\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._currentLevel = i - 1;\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\r\n\r\n\t\tdata.object.levels = [];\r\n\r\n\t\tconst levels = this.levels;\r\n\r\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst level = levels[ i ];\r\n\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SkinnedMesh( geometry, material ) {\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t}\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = 'attached';\r\n\tthis.bindMatrix = new Matrix4();\r\n\tthis.bindMatrixInverse = new Matrix4();\r\n\r\n}\r\n\r\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: SkinnedMesh,\r\n\r\n\tisSkinnedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.bindMode = source.bindMode;\r\n\t\tthis.bindMatrix.copy( source.bindMatrix );\r\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\r\n\r\n\t\tthis.skeleton = source.skeleton;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbind: function ( skeleton, bindMatrix ) {\r\n\r\n\t\tthis.skeleton = skeleton;\r\n\r\n\t\tif ( bindMatrix === undefined ) {\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t\t}\r\n\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tthis.skeleton.pose();\r\n\r\n\t},\r\n\r\n\tnormalizeSkinWeights: function () {\r\n\r\n\t\tconst vector = new Vector4();\r\n\r\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\r\n\r\n\t\t\tvector.x = skinWeight.getX( i );\r\n\t\t\tvector.y = skinWeight.getY( i );\r\n\t\t\tvector.z = skinWeight.getZ( i );\r\n\t\t\tvector.w = skinWeight.getW( i );\r\n\r\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tvector.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.bindMode === 'attached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t\t} else if ( this.bindMode === 'detached' ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tboneTransform: ( function () {\r\n\r\n\t\tconst basePosition = new Vector3();\r\n\r\n\t\tconst skinIndex = new Vector4();\r\n\t\tconst skinWeight = new Vector4();\r\n\r\n\t\tconst vector = new Vector3();\r\n\t\tconst matrix = new Matrix4();\r\n\r\n\t\treturn function ( index, target ) {\r\n\r\n\t\t\tconst skeleton = this.skeleton;\r\n\t\t\tconst geometry = this.geometry;\r\n\r\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\r\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\r\n\r\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\r\n\r\n\t\t\ttarget.set( 0, 0, 0 );\r\n\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst weight = skinWeight.getComponent( i );\r\n\r\n\t\t\t\tif ( weight !== 0 ) {\r\n\r\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\r\n\r\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\r\n\r\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\r\n\r\n\t\t};\r\n\r\n\t}() )\r\n\r\n} );\r\n\r\nconst _offsetMatrix = new Matrix4();\r\nconst _identityMatrix = new Matrix4();\r\n\r\nfunction Skeleton( bones, boneInverses ) {\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\r\n\r\n\tthis.frame = - 1;\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Skeleton.prototype, {\r\n\r\n\tcalculateInverses: function () {\r\n\r\n\t\tthis.boneInverses = [];\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst inverse = new Matrix4();\r\n\r\n\t\t\tif ( this.bones[ i ] ) {\r\n\r\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\t// recover the bind-time world matrices\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst bones = this.bones;\r\n\t\tconst boneInverses = this.boneInverses;\r\n\t\tconst boneMatrices = this.boneMatrices;\r\n\t\tconst boneTexture = this.boneTexture;\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\r\n\r\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\r\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( boneTexture !== undefined ) {\r\n\r\n\t\t\tboneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new Skeleton( this.bones, this.boneInverses );\r\n\r\n\t},\r\n\r\n\tgetBoneByName: function ( name ) {\r\n\r\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst bone = this.bones[ i ];\r\n\r\n\t\t\tif ( bone.name === name ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tdispose: function ( ) {\r\n\r\n\t\tif ( this.boneTexture ) {\r\n\r\n\t\t\tthis.boneTexture.dispose();\r\n\r\n\t\t\tthis.boneTexture = undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Bone() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n}\r\n\r\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Bone,\r\n\r\n\tisBone: true\r\n\r\n} );\r\n\r\nconst _instanceLocalMatrix = new Matrix4();\r\nconst _instanceWorldMatrix = new Matrix4();\r\n\r\nconst _instanceIntersects = [];\r\n\r\nconst _mesh = new Mesh();\r\n\r\nfunction InstancedMesh( geometry, material, count ) {\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\r\n\r\n\tthis.count = count;\r\n\r\n\tthis.frustumCulled = false;\r\n\r\n}\r\n\r\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n\tconstructor: InstancedMesh,\r\n\r\n\tisInstancedMesh: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tMesh.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\r\n\t\tthis.count = source.count;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst raycastTimes = this.count;\r\n\r\n\t\t_mesh.geometry = this.geometry;\r\n\t\t_mesh.material = this.material;\r\n\r\n\t\tif ( _mesh.material === undefined ) return;\r\n\r\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\r\n\r\n\t\t\t// calculate the world matrix for each instance\r\n\r\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\r\n\r\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\r\n\r\n\t\t\t// the mesh represents this single instance\r\n\r\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\r\n\r\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\r\n\r\n\t\t\t// process the result of raycast\r\n\r\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\r\n\t\t\t\tintersect.instanceId = instanceId;\r\n\t\t\t\tintersect.object = this;\r\n\t\t\t\tintersects.push( intersect );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_instanceIntersects.length = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsetMatrixAt: function ( index, matrix ) {\r\n\r\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */\r\n\r\nfunction LineBasicMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineBasicMaterial.prototype = Object.create( Material.prototype );\r\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\r\n\r\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\r\n\r\nLineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _start = new Vector3();\r\nconst _end = new Vector3();\r\nconst _inverseMatrix$1 = new Matrix4();\r\nconst _ray$1 = new Ray();\r\nconst _sphere$2 = new Sphere();\r\n\r\nfunction Line( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\r\n\r\n\t}\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Line,\r\n\r\n\tisLine: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [ 0 ];\r\n\r\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\r\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tlineDistances[ 0 ] = 0;\r\n\r\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Line.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$2.copy( geometry.boundingSphere );\r\n\t\t_sphere$2.applyMatrix4( matrixWorld );\r\n\t\t_sphere$2.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\r\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tconst vStart = new Vector3();\r\n\t\tconst vEnd = new Vector3();\r\n\t\tconst interSegment = new Vector3();\r\n\t\tconst interRay = new Vector3();\r\n\t\tconst step = ( this && this.isLineSegments ) ? 2 : 1;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\t\t\t\t\tconst b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _start$1 = new Vector3();\r\nconst _end$1 = new Vector3();\r\n\r\nfunction LineSegments( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n}\r\n\r\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineSegments,\r\n\r\n\tisLineSegments: true,\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t// we assume non-indexed geometry\r\n\r\n\t\t\tif ( geometry.index === null ) {\r\n\r\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\r\n\t\t\t\tconst lineDistances = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\r\n\r\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\r\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\r\n\r\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry.isGeometry ) {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\t\t\tconst lineDistances = geometry.lineDistances;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\r\n\r\n\t\t\t\t_start$1.copy( vertices[ i ] );\r\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\r\n\r\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LineLoop( geometry, material ) {\r\n\r\n\tLine.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineLoop';\r\n\r\n}\r\n\r\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n\tconstructor: LineLoop,\r\n\r\n\tisLineLoop: true,\r\n\r\n} );\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n *\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nfunction PointsMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nPointsMaterial.prototype = Object.create( Material.prototype );\r\nPointsMaterial.prototype.constructor = PointsMaterial;\r\n\r\nPointsMaterial.prototype.isPointsMaterial = true;\r\n\r\nPointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nconst _inverseMatrix$2 = new Matrix4();\r\nconst _ray$2 = new Ray();\r\nconst _sphere$3 = new Sphere();\r\nconst _position$1 = new Vector3();\r\n\r\nfunction Points( geometry, material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new PointsMaterial();\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n}\r\n\r\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Points,\r\n\r\n\tisPoints: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.material = source.material;\r\n\t\tthis.geometry = source.geometry;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst matrixWorld = this.matrixWorld;\r\n\t\tconst threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t_sphere$3.copy( geometry.boundingSphere );\r\n\t\t_sphere$3.applyMatrix4( matrixWorld );\r\n\t\t_sphere$3.radius += threshold;\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\r\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\r\n\r\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst attributes = geometry.attributes;\r\n\t\t\tconst positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst a = indices[ i ];\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t_position$1.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\r\n\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\tconst morphAttributes = geometry.morphAttributes;\r\n\t\t\tconst keys = Object.keys( morphAttributes );\r\n\r\n\t\t\tif ( keys.length > 0 ) {\r\n\r\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n\t\t\t\tif ( morphAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\r\n\r\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst morphTargets = geometry.morphTargets;\r\n\r\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\r\n\r\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\r\n\r\n\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\tconst intersectPoint = new Vector3();\r\n\r\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\r\n\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: distance,\r\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\tpoint: intersectPoint,\r\n\t\t\tindex: index,\r\n\t\t\tface: null,\r\n\t\t\tobject: object\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.format = format !== undefined ? format : RGBFormat;\r\n\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tconst scope = this;\r\n\r\n\tfunction updateVideo() {\r\n\r\n\t\tscope.needsUpdate = true;\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n\tif ( 'requestVideoFrameCallback' in video ) {\r\n\r\n\t\tvideo.requestVideoFrameCallback( updateVideo );\r\n\r\n\t}\r\n\r\n}\r\n\r\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\r\n\r\n\tconstructor: VideoTexture,\r\n\r\n\tisVideoTexture: true,\r\n\r\n\tupdate: function () {\r\n\r\n\t\tconst video = this.image;\r\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\r\n\r\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n}\r\n\r\nCompressedTexture.prototype = Object.create( Texture.prototype );\r\nCompressedTexture.prototype.constructor = CompressedTexture;\r\n\r\nCompressedTexture.prototype.isCompressedTexture = true;\r\n\r\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n}\r\n\r\nCanvasTexture.prototype = Object.create( Texture.prototype );\r\nCanvasTexture.prototype.constructor = CanvasTexture;\r\nCanvasTexture.prototype.isCanvasTexture = true;\r\n\r\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\r\n\r\n\tformat = format !== undefined ? format : DepthFormat;\r\n\r\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\r\n\r\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\r\n\r\n\t}\r\n\r\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\r\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\r\n\r\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps\t= false;\r\n\r\n}\r\n\r\nDepthTexture.prototype = Object.create( Texture.prototype );\r\nDepthTexture.prototype.constructor = DepthTexture;\r\nDepthTexture.prototype.isDepthTexture = true;\r\n\r\nfunction WireframeGeometry( geometry ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'WireframeGeometry';\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// different logic for Geometry and BufferGeometry\r\n\r\n\tif ( geometry && geometry.isGeometry ) {\r\n\r\n\t\t// create a data structure that contains all edges without duplicates\r\n\r\n\t\tconst faces = geometry.faces;\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tconst edge1 = face[ keys[ j ] ];\r\n\t\t\t\tconst edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// generate vertices\r\n\r\n\t\tfor ( const key in edges ) {\r\n\r\n\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\tlet vertex = geometry.vertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = geometry.vertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t} else if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n\t\tlet vertex = new Vector3();\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\t\t\tconst indices = geometry.index;\r\n\t\t\tlet groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// create a data structure that contains all eges without duplicates\r\n\r\n\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tconst group = groups[ o ];\r\n\r\n\t\t\t\tconst start = group.start;\r\n\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\r\n\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\r\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// generate vertices\r\n\r\n\t\t\tfor ( const key in edges ) {\r\n\r\n\t\t\t\tconst e = edges[ key ];\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tconst position = geometry.attributes.position;\r\n\r\n\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\r\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\r\n\r\n\t\t\t\t\tconst index1 = 3 * i + j;\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\r\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nWireframeGeometry.prototype.constructor = WireframeGeometry;\r\n\r\n/**\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\r\n */\r\n\r\n// ParametricGeometry\r\n\r\nfunction ParametricGeometry( func, slices, stacks ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nParametricGeometry.prototype = Object.create( Geometry.prototype );\r\nParametricGeometry.prototype.constructor = ParametricGeometry;\r\n\r\n// ParametricBufferGeometry\r\n\r\nfunction ParametricBufferGeometry( func, slices, stacks ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ParametricBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\tconst EPS = 0.00001;\r\n\r\n\tconst normal = new Vector3();\r\n\r\n\tconst p0 = new Vector3(), p1 = new Vector3();\r\n\tconst pu = new Vector3(), pv = new Vector3();\r\n\r\n\tif ( func.length < 3 ) {\r\n\r\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\r\n\r\n\t}\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tconst sliceCount = slices + 1;\r\n\r\n\tfor ( let i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tconst v = i / stacks;\r\n\r\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tconst u = j / slices;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tfunc( u, v, p0 );\r\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\t// approximate tangent vectors via finite differences\r\n\r\n\t\t\tif ( u - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u - EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u + EPS, v, p1 );\r\n\t\t\t\tpu.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( v - EPS >= 0 ) {\r\n\r\n\t\t\t\tfunc( u, v - EPS, p1 );\r\n\t\t\t\tpv.subVectors( p0, p1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfunc( u, v + EPS, p1 );\r\n\t\t\t\tpv.subVectors( p1, p0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// cross product of tangent vectors returns surface normal\r\n\r\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u, v );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\tconst a = i * sliceCount + j;\r\n\t\t\tconst b = i * sliceCount + j + 1;\r\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\t// faces one and two\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\r\n\r\n// PolyhedronGeometry\r\n\r\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\r\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\r\n\r\n// PolyhedronBufferGeometry\r\n\r\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\t// default buffer data\r\n\r\n\tconst vertexBuffer = [];\r\n\tconst uvBuffer = [];\r\n\r\n\t// the subdivision creates the vertex buffer data\r\n\r\n\tsubdivide( detail );\r\n\r\n\t// all vertices should lie on a conceptual sphere with a given radius\r\n\r\n\tapplyRadius( radius );\r\n\r\n\t// finally, create the uv data\r\n\r\n\tgenerateUVs();\r\n\r\n\t// build non-indexed geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\r\n\r\n\tif ( detail === 0 ) {\r\n\r\n\t\tthis.computeVertexNormals(); // flat normals\r\n\r\n\t} else {\r\n\r\n\t\tthis.normalizeNormals(); // smooth normals\r\n\r\n\t}\r\n\r\n\t// helper functions\r\n\r\n\tfunction subdivide( detail ) {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\t// iterate over all faces and apply a subdivison with the given detail value\r\n\r\n\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t// get the vertices of the face\r\n\r\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\r\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\r\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\r\n\r\n\t\t\t// perform subdivision\r\n\r\n\t\t\tsubdivideFace( a, b, c, detail );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction subdivideFace( a, b, c, detail ) {\r\n\r\n\t\tconst cols = Math.pow( 2, detail );\r\n\r\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\r\n\r\n\t\tconst v = [];\r\n\r\n\t\t// construct all of the vertices for this subdivision\r\n\r\n\t\tfor ( let i = 0; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tconst aj = a.clone().lerp( c, i / cols );\r\n\t\t\tconst bj = b.clone().lerp( c, i / cols );\r\n\r\n\t\t\tconst rows = cols - i;\r\n\r\n\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// construct all of the faces\r\n\r\n\t\tfor ( let i = 0; i < cols; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tconst k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\r\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction applyRadius( radius ) {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\t// iterate over the entire buffer and apply the radius to each vertex\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tvertex.normalize().multiplyScalar( radius );\r\n\r\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\r\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\r\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\r\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\r\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\r\n\r\n\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\r\n\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\r\n\t\t\tuvBuffer.push( u, 1 - v );\r\n\r\n\t\t}\r\n\r\n\t\tcorrectUVs();\r\n\r\n\t\tcorrectSeam();\r\n\r\n\t}\r\n\r\n\tfunction correctSeam() {\r\n\r\n\t\t// handle case when face straddles the seam, see #3269\r\n\r\n\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\r\n\r\n\t\t\t// uv data of a single face\r\n\r\n\t\t\tconst x0 = uvBuffer[ i + 0 ];\r\n\t\t\tconst x1 = uvBuffer[ i + 2 ];\r\n\t\t\tconst x2 = uvBuffer[ i + 4 ];\r\n\r\n\t\t\tconst max = Math.max( x0, x1, x2 );\r\n\t\t\tconst min = Math.min( x0, x1, x2 );\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\r\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\r\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction pushVertex( vertex ) {\r\n\r\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t}\r\n\r\n\tfunction getVertexByIndex( index, vertex ) {\r\n\r\n\t\tconst stride = index * 3;\r\n\r\n\t\tvertex.x = vertices[ stride + 0 ];\r\n\t\tvertex.y = vertices[ stride + 1 ];\r\n\t\tvertex.z = vertices[ stride + 2 ];\r\n\r\n\t}\r\n\r\n\tfunction correctUVs() {\r\n\r\n\t\tconst a = new Vector3();\r\n\t\tconst b = new Vector3();\r\n\t\tconst c = new Vector3();\r\n\r\n\t\tconst centroid = new Vector3();\r\n\r\n\t\tconst uvA = new Vector2();\r\n\t\tconst uvB = new Vector2();\r\n\t\tconst uvC = new Vector2();\r\n\r\n\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\r\n\r\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\r\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\r\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\r\n\r\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\r\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\r\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\r\n\r\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\r\n\r\n\t\t\tconst azi = azimuth( centroid );\r\n\r\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\r\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\r\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction correctUV( uv, stride, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\r\n\r\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\r\n\r\n// TetrahedronGeometry\r\n\r\nfunction TetrahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\r\n\r\n// TetrahedronBufferGeometry\r\n\r\nfunction TetrahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\r\n\r\n// OctahedronGeometry\r\n\r\nfunction OctahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\r\n\r\n// OctahedronBufferGeometry\r\n\r\nfunction OctahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst vertices = [\r\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\r\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\r\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\r\n\t\t1, 3, 4,\t1, 4, 2\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\r\n\r\n// IcosahedronGeometry\r\n\r\nfunction IcosahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\r\n\r\n// IcosahedronBufferGeometry\r\n\r\nfunction IcosahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tconst vertices = [\r\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\r\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\r\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\r\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\r\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\r\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\r\n\r\n// DodecahedronGeometry\r\n\r\nfunction DodecahedronGeometry( radius, detail ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\r\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\r\n\r\n// DodecahedronBufferGeometry\r\n\r\nfunction DodecahedronBufferGeometry( radius, detail ) {\r\n\r\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tconst r = 1 / t;\r\n\r\n\tconst vertices = [\r\n\r\n\t\t// (±1, ±1, ±1)\r\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\r\n\t\t- 1, 1, - 1, - 1, 1, 1,\r\n\t\t1, - 1, - 1, 1, - 1, 1,\r\n\t\t1, 1, - 1, 1, 1, 1,\r\n\r\n\t\t// (0, ±1/φ, ±φ)\r\n\t\t 0, - r, - t, 0, - r, t,\r\n\t\t 0, r, - t, 0, r, t,\r\n\r\n\t\t// (±1/φ, ±φ, 0)\r\n\t\t- r, - t, 0, - r, t, 0,\r\n\t\t r, - t, 0, r, t, 0,\r\n\r\n\t\t// (±φ, 0, ±1/φ)\r\n\t\t- t, 0, - r, t, 0, - r,\r\n\t\t- t, 0, r, t, 0, r\r\n\t];\r\n\r\n\tconst indices = [\r\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\r\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\r\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\r\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\r\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\r\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\r\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\r\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\r\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\r\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\r\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\r\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\r\n\t];\r\n\r\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n}\r\n\r\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\r\n\r\n// TubeGeometry\r\n\r\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\r\n\r\n\tconst bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = bufferGeometry.tangents;\r\n\tthis.normals = bufferGeometry.normals;\r\n\tthis.binormals = bufferGeometry.binormals;\r\n\r\n\t// create geometry\r\n\r\n\tthis.fromBufferGeometry( bufferGeometry );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTubeGeometry.prototype = Object.create( Geometry.prototype );\r\nTubeGeometry.prototype.constructor = TubeGeometry;\r\n\r\n// TubeBufferGeometry\r\n\r\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TubeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\ttubularSegments = tubularSegments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\r\n\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n\t// expose internals\r\n\r\n\tthis.tangents = frames.tangents;\r\n\tthis.normals = frames.normals;\r\n\tthis.binormals = frames.binormals;\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\tconst uv = new Vector2();\r\n\tlet P = new Vector3();\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\tconst indices = [];\r\n\r\n\t// create buffer data\r\n\r\n\tgenerateBufferData();\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// functions\r\n\r\n\tfunction generateBufferData() {\r\n\r\n\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\r\n\r\n\t\t\tgenerateSegment( i );\r\n\r\n\t\t}\r\n\r\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\r\n\t\t// at the regular position on the given path\r\n\t\t//\r\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n\t\t// uvs are generated in a separate function.\r\n\t\t// this makes it easy compute correct values for closed geometries\r\n\r\n\t\tgenerateUVs();\r\n\r\n\t\t// finally create faces\r\n\r\n\t\tgenerateIndices();\r\n\r\n\t}\r\n\r\n\tfunction generateSegment( i ) {\r\n\r\n\t\t// we use getPointAt to sample evenly distributed points from the given path\r\n\r\n\t\tP = path.getPointAt( i / tubularSegments, P );\r\n\r\n\t\t// retrieve corresponding normal and binormal\r\n\r\n\t\tconst N = frames.normals[ i ];\r\n\t\tconst B = frames.binormals[ i ];\r\n\r\n\t\t// generate normals and vertices for the current segment\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tconst sin = Math.sin( v );\r\n\t\t\tconst cos = - Math.cos( v );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\r\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\r\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\r\n\t\t\tnormal.normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = P.x + radius * normal.x;\r\n\t\t\tvertex.y = P.y + radius * normal.y;\r\n\t\t\tvertex.z = P.z + radius * normal.z;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateIndices() {\r\n\r\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction generateUVs() {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\t\t\tuv.x = i / tubularSegments;\r\n\t\t\t\tuv.y = j / radialSegments;\r\n\r\n\t\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\r\n\r\nTubeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tdata.path = this.parameters.path.toJSON();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// TorusKnotGeometry\r\n\r\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\r\n\r\n// TorusKnotBufferGeometry\r\n\r\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\tconst P1 = new Vector3();\r\n\tconst P2 = new Vector3();\r\n\r\n\tconst B = new Vector3();\r\n\tconst T = new Vector3();\r\n\tconst N = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tconst u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\t\t\tconst cx = - tube * Math.cos( v );\r\n\t\t\tconst cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tconst c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tconst cu = Math.cos( u );\r\n\t\tconst su = Math.sin( u );\r\n\t\tconst quOverP = q / p * u;\r\n\t\tconst cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n}\r\n\r\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\r\n\r\n// TorusGeometry\r\n\r\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTorusGeometry.prototype = Object.create( Geometry.prototype );\r\nTorusGeometry.prototype.constructor = TorusGeometry;\r\n\r\n// TorusBufferGeometry\r\n\r\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\ttube = tube || 0.4;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst center = new Vector3();\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tconst u = i / tubularSegments * arc;\r\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( i / tubularSegments );\r\n\t\t\tuvs.push( j / radialSegments );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( let j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\r\n\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\r\n\r\n/**\r\n * Port from https://github.com/mapbox/earcut (v2.2.2)\r\n */\r\n\r\nconst Earcut = {\r\n\r\n\ttriangulate: function ( data, holeIndices, dim ) {\r\n\r\n\t\tdim = dim || 2;\r\n\r\n\t\tlet hasHoles = holeIndices && holeIndices.length,\r\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\r\n\t\t\ttriangles = [];\r\n\r\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\r\n\r\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\t\tif ( data.length > 80 * dim ) {\r\n\r\n\t\t\tminX = maxX = data[ 0 ];\r\n\t\t\tminY = maxY = data[ 1 ];\r\n\r\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\r\n\r\n\t\t\t\tx = data[ i ];\r\n\t\t\t\ty = data[ i + 1 ];\r\n\t\t\t\tif ( x < minX ) minX = x;\r\n\t\t\t\tif ( y < minY ) minY = y;\r\n\t\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\t\tif ( y > maxY ) maxY = y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\r\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n\t\t}\r\n\r\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n\t\treturn triangles;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// create a circular doubly linked list from polygon points in the specified winding order\r\nfunction linkedList( data, start, end, dim, clockwise ) {\r\n\r\n\tlet i, last;\r\n\r\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n\t}\r\n\r\n\tif ( last && equals( last, last.next ) ) {\r\n\r\n\t\tremoveNode( last );\r\n\t\tlast = last.next;\r\n\r\n\t}\r\n\r\n\treturn last;\r\n\r\n}\r\n\r\n// eliminate colinear or duplicate points\r\nfunction filterPoints( start, end ) {\r\n\r\n\tif ( ! start ) return start;\r\n\tif ( ! end ) end = start;\r\n\r\n\tlet p = start,\r\n\t\tagain;\r\n\tdo {\r\n\r\n\t\tagain = false;\r\n\r\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n\t\t\tremoveNode( p );\r\n\t\t\tp = end = p.prev;\r\n\t\t\tif ( p === p.next ) break;\r\n\t\t\tagain = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tp = p.next;\r\n\r\n\t\t}\r\n\r\n\t} while ( again || p !== end );\r\n\r\n\treturn end;\r\n\r\n}\r\n\r\n// main ear slicing loop which triangulates a polygon (given as a linked list)\r\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n\tif ( ! ear ) return;\r\n\r\n\t// interlink polygon nodes in z-order\r\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n\tlet stop = ear,\r\n\t\tprev, next;\r\n\r\n\t// iterate through ears, slicing them one by one\r\n\twhile ( ear.prev !== ear.next ) {\r\n\r\n\t\tprev = ear.prev;\r\n\t\tnext = ear.next;\r\n\r\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n\t\t\t// cut off the triangle\r\n\t\t\ttriangles.push( prev.i / dim );\r\n\t\t\ttriangles.push( ear.i / dim );\r\n\t\t\ttriangles.push( next.i / dim );\r\n\r\n\t\t\tremoveNode( ear );\r\n\r\n\t\t\t// skipping the next vertex leads to less sliver triangles\r\n\t\t\tear = next.next;\r\n\t\t\tstop = next.next;\r\n\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tear = next;\r\n\r\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\r\n\t\tif ( ear === stop ) {\r\n\r\n\t\t\t// try filtering points and slicing again\r\n\t\t\tif ( ! pass ) {\r\n\r\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\r\n\r\n\t\t\t} else if ( pass === 1 ) {\r\n\r\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\r\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\r\n\r\n\t\t\t} else if ( pass === 2 ) {\r\n\r\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// check whether a polygon node forms a valid ear with adjacent nodes\r\nfunction isEar( ear ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// now make sure we don't have other points inside the potential ear\r\n\tlet p = ear.next.next;\r\n\r\n\twhile ( p !== ear.prev ) {\r\n\r\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.next;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n\tlet a = ear.prev,\r\n\t\tb = ear,\r\n\t\tc = ear.next;\r\n\r\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n\t// triangle bbox; min & max are calculated like this for speed\r\n\tlet minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n\t// z-order range for the current triangle bbox;\r\n\tlet minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n\tlet p = ear.prevZ,\r\n\t\tn = ear.nextZ;\r\n\r\n\t// look for points inside the triangle in both directions\r\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in decreasing z-order\r\n\twhile ( p && p.z >= minZ ) {\r\n\r\n\t\tif ( p !== ear.prev && p !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\r\n\t\tp = p.prevZ;\r\n\r\n\t}\r\n\r\n\t// look for remaining points in increasing z-order\r\n\twhile ( n && n.z <= maxZ ) {\r\n\r\n\t\tif ( n !== ear.prev && n !== ear.next &&\r\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\r\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\r\n\t\tn = n.nextZ;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\n// go through all polygon nodes and cure small local self-intersections\r\nfunction cureLocalIntersections( start, triangles, dim ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tlet a = p.prev,\r\n\t\t\tb = p.next.next;\r\n\r\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n\t\t\ttriangles.push( a.i / dim );\r\n\t\t\ttriangles.push( p.i / dim );\r\n\t\t\ttriangles.push( b.i / dim );\r\n\r\n\t\t\t// remove two nodes involved\r\n\t\t\tremoveNode( p );\r\n\t\t\tremoveNode( p.next );\r\n\r\n\t\t\tp = start = b;\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn filterPoints( p );\r\n\r\n}\r\n\r\n// try splitting polygon into two and triangulate them independently\r\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n\t// look for a valid diagonal that divides the polygon into two\r\n\tlet a = start;\r\n\tdo {\r\n\r\n\t\tlet b = a.next.next;\r\n\t\twhile ( b !== a.prev ) {\r\n\r\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n\t\t\t\t// split the polygon in two by the diagonal\r\n\t\t\t\tlet c = splitPolygon( a, b );\r\n\r\n\t\t\t\t// filter colinear points around the cuts\r\n\t\t\t\ta = filterPoints( a, a.next );\r\n\t\t\t\tc = filterPoints( c, c.next );\r\n\r\n\t\t\t\t// run earcut on each half\r\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\r\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tb = b.next;\r\n\r\n\t\t}\r\n\r\n\t\ta = a.next;\r\n\r\n\t} while ( a !== start );\r\n\r\n}\r\n\r\n// link every hole into the outer loop, producing a single-ring polygon without holes\r\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n\tlet queue = [],\r\n\t\ti, len, start, end, list;\r\n\r\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n\t\tstart = holeIndices[ i ] * dim;\r\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n\t\tlist = linkedList( data, start, end, dim, false );\r\n\t\tif ( list === list.next ) list.steiner = true;\r\n\t\tqueue.push( getLeftmost( list ) );\r\n\r\n\t}\r\n\r\n\tqueue.sort( compareX );\r\n\r\n\t// process holes from left to right\r\n\tfor ( i = 0; i < queue.length; i ++ ) {\r\n\r\n\t\teliminateHole( queue[ i ], outerNode );\r\n\t\touterNode = filterPoints( outerNode, outerNode.next );\r\n\r\n\t}\r\n\r\n\treturn outerNode;\r\n\r\n}\r\n\r\nfunction compareX( a, b ) {\r\n\r\n\treturn a.x - b.x;\r\n\r\n}\r\n\r\n// find a bridge between vertices that connects hole with an outer ring and and link it\r\nfunction eliminateHole( hole, outerNode ) {\r\n\r\n\touterNode = findHoleBridge( hole, outerNode );\r\n\tif ( outerNode ) {\r\n\r\n\t\tconst b = splitPolygon( outerNode, hole );\r\n\r\n\t\t// filter collinear points around the cuts\r\n\t\tfilterPoints( outerNode, outerNode.next );\r\n\t\tfilterPoints( b, b.next );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\r\nfunction findHoleBridge( hole, outerNode ) {\r\n\r\n\tlet p = outerNode,\r\n\t\thx = hole.x,\r\n\t\thy = hole.y,\r\n\t\tqx = - Infinity,\r\n\t\tm;\r\n\r\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\r\n\t// segment's endpoint with lesser x will be potential connection point\r\n\tdo {\r\n\r\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n\t\t\tlet x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\t\t\tif ( x <= hx && x > qx ) {\r\n\r\n\t\t\t\tqx = x;\r\n\t\t\t\tif ( x === hx ) {\r\n\r\n\t\t\t\t\tif ( hy === p.y ) return p;\r\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== outerNode );\r\n\r\n\tif ( ! m ) return null;\r\n\r\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\r\n\r\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\r\n\t// if there are no points found, we have a valid connection;\r\n\t// otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n\tlet stop = m,\r\n\t\tmx = m.x,\r\n\t\tmy = m.y,\r\n\t\ttanMin = Infinity,\r\n\t\ttan;\r\n\r\n\tp = m;\r\n\r\n\tdo {\r\n\r\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\r\n\r\n\t\t\t\tm = p;\r\n\t\t\t\ttanMin = tan;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== stop );\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n// whether sector in vertex m contains sector in vertex p in the same coordinates\r\nfunction sectorContainsSector( m, p ) {\r\n\r\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\r\n\r\n}\r\n\r\n// interlink polygon nodes in z-order\r\nfunction indexCurve( start, minX, minY, invSize ) {\r\n\r\n\tlet p = start;\r\n\tdo {\r\n\r\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n\t\tp.prevZ = p.prev;\r\n\t\tp.nextZ = p.next;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\tp.prevZ.nextZ = null;\r\n\tp.prevZ = null;\r\n\r\n\tsortLinked( p );\r\n\r\n}\r\n\r\n// Simon Tatham's linked list merge sort algorithm\r\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\nfunction sortLinked( list ) {\r\n\r\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\r\n\t\tinSize = 1;\r\n\r\n\tdo {\r\n\r\n\t\tp = list;\r\n\t\tlist = null;\r\n\t\ttail = null;\r\n\t\tnumMerges = 0;\r\n\r\n\t\twhile ( p ) {\r\n\r\n\t\t\tnumMerges ++;\r\n\t\t\tq = p;\r\n\t\t\tpSize = 0;\r\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\r\n\r\n\t\t\t\tpSize ++;\r\n\t\t\t\tq = q.nextZ;\r\n\t\t\t\tif ( ! q ) break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tqSize = inSize;\r\n\r\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n\t\t\t\t\te = p;\r\n\t\t\t\t\tp = p.nextZ;\r\n\t\t\t\t\tpSize --;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\te = q;\r\n\t\t\t\t\tq = q.nextZ;\r\n\t\t\t\t\tqSize --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( tail ) tail.nextZ = e;\r\n\t\t\t\telse list = e;\r\n\r\n\t\t\t\te.prevZ = tail;\r\n\t\t\t\ttail = e;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp = q;\r\n\r\n\t\t}\r\n\r\n\t\ttail.nextZ = null;\r\n\t\tinSize *= 2;\r\n\r\n\t} while ( numMerges > 1 );\r\n\r\n\treturn list;\r\n\r\n}\r\n\r\n// z-order of a point given coords and inverse of the longer side of data bbox\r\nfunction zOrder( x, y, minX, minY, invSize ) {\r\n\r\n\t// coords are transformed into non-negative 15-bit integer range\r\n\tx = 32767 * ( x - minX ) * invSize;\r\n\ty = 32767 * ( y - minY ) * invSize;\r\n\r\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\r\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\r\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n\treturn x | ( y << 1 );\r\n\r\n}\r\n\r\n// find the leftmost node of a polygon ring\r\nfunction getLeftmost( start ) {\r\n\r\n\tlet p = start,\r\n\t\tleftmost = start;\r\n\tdo {\r\n\r\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== start );\r\n\r\n\treturn leftmost;\r\n\r\n}\r\n\r\n// check if a point lies within a convex triangle\r\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n}\r\n\r\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\nfunction isValidDiagonal( a, b ) {\r\n\r\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\r\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\r\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\r\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\r\n\r\n}\r\n\r\n// signed area of a triangle\r\nfunction area( p, q, r ) {\r\n\r\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n}\r\n\r\n// check if two points are equal\r\nfunction equals( p1, p2 ) {\r\n\r\n\treturn p1.x === p2.x && p1.y === p2.y;\r\n\r\n}\r\n\r\n// check if two segments intersect\r\nfunction intersects( p1, q1, p2, q2 ) {\r\n\r\n\tconst o1 = sign( area( p1, q1, p2 ) );\r\n\tconst o2 = sign( area( p1, q1, q2 ) );\r\n\tconst o3 = sign( area( p2, q2, p1 ) );\r\n\tconst o4 = sign( area( p2, q2, q1 ) );\r\n\r\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\r\n\r\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\r\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\r\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\r\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// for collinear points p, q, r, check if point q lies on segment pr\r\nfunction onSegment( p, q, r ) {\r\n\r\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\r\n\r\n}\r\n\r\nfunction sign( num ) {\r\n\r\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\r\n\r\n}\r\n\r\n// check if a polygon diagonal intersects any polygon segments\r\nfunction intersectsPolygon( a, b ) {\r\n\r\n\tlet p = a;\r\n\tdo {\r\n\r\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n// check if a polygon diagonal is locally inside the polygon\r\nfunction locallyInside( a, b ) {\r\n\r\n\treturn area( a.prev, a, a.next ) < 0 ?\r\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n}\r\n\r\n// check if the middle point of a polygon diagonal is inside the polygon\r\nfunction middleInside( a, b ) {\r\n\r\n\tlet p = a,\r\n\t\tinside = false,\r\n\t\tpx = ( a.x + b.x ) / 2,\r\n\t\tpy = ( a.y + b.y ) / 2;\r\n\tdo {\r\n\r\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\r\n\t\t\tinside = ! inside;\r\n\t\tp = p.next;\r\n\r\n\t} while ( p !== a );\r\n\r\n\treturn inside;\r\n\r\n}\r\n\r\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\nfunction splitPolygon( a, b ) {\r\n\r\n\tlet a2 = new Node( a.i, a.x, a.y ),\r\n\t\tb2 = new Node( b.i, b.x, b.y ),\r\n\t\tan = a.next,\r\n\t\tbp = b.prev;\r\n\r\n\ta.next = b;\r\n\tb.prev = a;\r\n\r\n\ta2.next = an;\r\n\tan.prev = a2;\r\n\r\n\tb2.next = a2;\r\n\ta2.prev = b2;\r\n\r\n\tbp.next = b2;\r\n\tb2.prev = bp;\r\n\r\n\treturn b2;\r\n\r\n}\r\n\r\n// create a node and optionally link it with previous one (in a circular doubly linked list)\r\nfunction insertNode( i, x, y, last ) {\r\n\r\n\tconst p = new Node( i, x, y );\r\n\r\n\tif ( ! last ) {\r\n\r\n\t\tp.prev = p;\r\n\t\tp.next = p;\r\n\r\n\t} else {\r\n\r\n\t\tp.next = last.next;\r\n\t\tp.prev = last;\r\n\t\tlast.next.prev = p;\r\n\t\tlast.next = p;\r\n\r\n\t}\r\n\r\n\treturn p;\r\n\r\n}\r\n\r\nfunction removeNode( p ) {\r\n\r\n\tp.next.prev = p.prev;\r\n\tp.prev.next = p.next;\r\n\r\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n}\r\n\r\nfunction Node( i, x, y ) {\r\n\r\n\t// vertex index in coordinates array\r\n\tthis.i = i;\r\n\r\n\t// vertex coordinates\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\r\n\t// previous and next vertex nodes in a polygon ring\r\n\tthis.prev = null;\r\n\tthis.next = null;\r\n\r\n\t// z-order curve value\r\n\tthis.z = null;\r\n\r\n\t// previous and next nodes in z-order\r\n\tthis.prevZ = null;\r\n\tthis.nextZ = null;\r\n\r\n\t// indicates whether this is a steiner point\r\n\tthis.steiner = false;\r\n\r\n}\r\n\r\nfunction signedArea( data, start, end, dim ) {\r\n\r\n\tlet sum = 0;\r\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n\t\tj = i;\r\n\r\n\t}\r\n\r\n\treturn sum;\r\n\r\n}\r\n\r\nconst ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tconst n = contour.length;\r\n\t\tlet a = 0.0;\r\n\r\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\r\n\t\tconst holeIndices = []; // array of hole indices\r\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\r\n\r\n\t\tremoveDupEndPts( contour );\r\n\t\taddContour( vertices, contour );\r\n\r\n\t\t//\r\n\r\n\t\tlet holeIndex = contour.length;\r\n\r\n\t\tholes.forEach( removeDupEndPts );\r\n\r\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\r\n\r\n\t\t\tholeIndices.push( holeIndex );\r\n\t\t\tholeIndex += holes[ i ].length;\r\n\t\t\taddContour( vertices, holes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\r\n\r\n\t\t//\r\n\r\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\r\n\r\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn faces;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction removeDupEndPts( points ) {\r\n\r\n\tconst l = points.length;\r\n\r\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\tpoints.pop();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction addContour( vertices, contour ) {\r\n\r\n\tfor ( let i = 0; i < contour.length; i ++ ) {\r\n\r\n\t\tvertices.push( contour[ i ].x );\r\n\t\tvertices.push( contour[ i ].y );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  depth: <float>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float>, // how far from shape outline does bevel start\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\r\n *\r\n *  UVGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n */\r\n\r\n// ExtrudeGeometry\r\n\r\nfunction ExtrudeGeometry( shapes, options ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\r\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\r\n\r\nExtrudeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n// ExtrudeBufferGeometry\r\n\r\nfunction ExtrudeBufferGeometry( shapes, options ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\toptions: options\r\n\t};\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tconst scope = this;\r\n\r\n\tconst verticesArray = [];\r\n\tconst uvArray = [];\r\n\r\n\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tconst shape = shapes[ i ];\r\n\t\taddShape( shape );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst placeholder = [];\r\n\r\n\t\t// options\r\n\r\n\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\tconst steps = options.steps !== undefined ? options.steps : 1;\r\n\t\tlet depth = options.depth !== undefined ? options.depth : 100;\r\n\r\n\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\r\n\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\r\n\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\r\n\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\r\n\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\t\tconst extrudePath = options.extrudePath;\r\n\r\n\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\r\n\r\n\t\t// deprecated options\r\n\r\n\t\tif ( options.amount !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\r\n\t\t\tdepth = options.amount;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tlet extrudePts, extrudeByPath = false;\r\n\t\tlet splineTube, binormal, normal, position2;\r\n\r\n\t\tif ( extrudePath ) {\r\n\r\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\t\textrudeByPath = true;\r\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t\t// SETUP TNB variables\r\n\r\n\t\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\r\n\r\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\t\tbinormal = new Vector3();\r\n\t\t\tnormal = new Vector3();\r\n\t\t\tposition2 = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\t// Safeguards if bevels are not enabled\r\n\r\n\t\tif ( ! bevelEnabled ) {\r\n\r\n\t\t\tbevelSegments = 0;\r\n\t\t\tbevelThickness = 0;\r\n\t\t\tbevelSize = 0;\r\n\t\t\tbevelOffset = 0;\r\n\r\n\t\t}\r\n\r\n\t\t// Variables initialization\r\n\r\n\t\tconst shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet vertices = shapePoints.shape;\r\n\t\tconst holes = shapePoints.holes;\r\n\r\n\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\r\n\r\n\t\tif ( reverse ) {\r\n\r\n\t\t\tvertices = vertices.reverse();\r\n\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t\t/* Vertices */\r\n\r\n\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\tvertices = vertices.concat( ahole );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction scalePt2( pt, vec, size ) {\r\n\r\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t\t}\r\n\r\n\t\tconst vlen = vertices.length, flen = faces.length;\r\n\r\n\r\n\t\t// Find directions for point movement\r\n\r\n\r\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t\t//\r\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\r\n\r\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\t\tconst v_prev_x = inPt.x - inPrev.x,\r\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\r\n\t\t\tconst v_next_x = inNext.x - inPt.x,\r\n\t\t\t\tv_next_y = inNext.y - inPt.y;\r\n\r\n\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t\t// check for collinear edges\r\n\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not collinear\r\n\r\n\t\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\r\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t\t//  but prevent crazy spikes\r\n\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\t\tlet direction_eq = false; // assumes: opposite\r\n\r\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\t\tv_trans_y = v_prev_x;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tconst contourMovements = [];\r\n\r\n\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tconst holesMovements = [];\r\n\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tconst ahole = holes[ h ];\r\n\r\n\t\t\toneHoleMovements = [];\r\n\r\n\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\t\tif ( j === il ) j = 0;\r\n\t\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t\t//  (j)---(i)---(k)\r\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tholesMovements.push( oneHoleMovements );\r\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, - z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bs = bevelSize + bevelOffset;\r\n\r\n\t\t// Back facing vertices\r\n\r\n\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Add stepped vertices...\r\n\t\t// Including front facing vertices\r\n\r\n\t\tfor ( let s = 1; s <= steps; s ++ ) {\r\n\r\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// Add bevel segments planes\r\n\r\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\t\tconst t = b / bevelSegments;\r\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\r\n\r\n\t\t\t// contract shape\r\n\r\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// expand holes\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/* Faces */\r\n\r\n\t\t// Top and bottom faces\r\n\r\n\t\tbuildLidFaces();\r\n\r\n\t\t// Sides faces\r\n\r\n\t\tbuildSideFaces();\r\n\r\n\r\n\t\t/////  Internal functions\r\n\r\n\t\tfunction buildLidFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\r\n\t\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\t\tlet layer = 0; // steps + 1\r\n\t\t\t\tlet offset = vlen * layer;\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Bottom faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Top faces\r\n\r\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// Create faces for the z-sides of the shape\r\n\r\n\t\tfunction buildSideFaces() {\r\n\r\n\t\t\tconst start = verticesArray.length / 3;\r\n\t\t\tlet layeroffset = 0;\r\n\t\t\tsidewalls( contour, layeroffset );\r\n\t\t\tlayeroffset += contour.length;\r\n\r\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tconst ahole = holes[ h ];\r\n\t\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t\t//, true\r\n\t\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\t\tlet i = contour.length;\r\n\r\n\t\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\t\tconst j = i;\r\n\t\t\t\tlet k = i - 1;\r\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\r\n\r\n\t\t\t\t\tconst slen1 = vlen * s;\r\n\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\t\tconst a = layeroffset + j + slen1,\r\n\t\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\t\tf4( a, b, c, d );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction v( x, y, z ) {\r\n\r\n\t\t\tplaceholder.push( x );\r\n\t\t\tplaceholder.push( y );\r\n\t\t\tplaceholder.push( z );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction f3( a, b, c ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction f4( a, b, c, d ) {\r\n\r\n\t\t\taddVertex( a );\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( d );\r\n\r\n\t\t\taddVertex( b );\r\n\t\t\taddVertex( c );\r\n\t\t\taddVertex( d );\r\n\r\n\r\n\t\t\tconst nextIndex = verticesArray.length / 3;\r\n\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n\t\t\taddUV( uvs[ 0 ] );\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t\taddUV( uvs[ 1 ] );\r\n\t\t\taddUV( uvs[ 2 ] );\r\n\t\t\taddUV( uvs[ 3 ] );\r\n\r\n\t\t}\r\n\r\n\t\tfunction addVertex( index ) {\r\n\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\r\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction addUV( vector2 ) {\r\n\r\n\t\t\tuvArray.push( vector2.x );\r\n\t\t\tuvArray.push( vector2.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\r\n\r\nExtrudeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\tconst options = this.parameters.options;\r\n\r\n\treturn toJSON( shapes, options, data );\r\n\r\n};\r\n\r\n//\r\n\r\nconst WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\r\n\t\treturn [\r\n\t\t\tnew Vector2( a_x, a_y ),\r\n\t\t\tnew Vector2( b_x, b_y ),\r\n\t\t\tnew Vector2( c_x, c_y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tconst a_x = vertices[ indexA * 3 ];\r\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\r\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\r\n\t\tconst b_x = vertices[ indexB * 3 ];\r\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\r\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\r\n\t\tconst c_x = vertices[ indexC * 3 ];\r\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\r\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\r\n\t\tconst d_x = vertices[ indexD * 3 ];\r\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\r\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\r\n\r\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\r\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\r\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\r\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\nfunction toJSON( shapes, options, data ) {\r\n\r\n\t//\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\n/**\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\r\n *  bevelOffset: <float> // how far from text outline does bevel start\r\n * }\r\n */\r\n\r\n// TextGeometry\r\n\r\nfunction TextGeometry( text, parameters ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\ttext: text,\r\n\t\tparameters: parameters\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nTextGeometry.prototype = Object.create( Geometry.prototype );\r\nTextGeometry.prototype.constructor = TextGeometry;\r\n\r\n// TextBufferGeometry\r\n\r\nfunction TextBufferGeometry( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tconst font = parameters.font;\r\n\r\n\tif ( ! ( font && font.isFont ) ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new Geometry();\r\n\r\n\t}\r\n\r\n\tconst shapes = font.generateShapes( text, parameters.size );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextBufferGeometry';\r\n\r\n}\r\n\r\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\r\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\r\n\r\n// SphereGeometry\r\n\r\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nSphereGeometry.prototype = Object.create( Geometry.prototype );\r\nSphereGeometry.prototype.constructor = SphereGeometry;\r\n\r\n// SphereBufferGeometry\r\n\r\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\r\n\r\n\tlet index = 0;\r\n\tconst grid = [];\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst normal = new Vector3();\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n\t\tconst verticesRow = [];\r\n\r\n\t\tconst v = iy / heightSegments;\r\n\r\n\t\t// special case for the poles\r\n\r\n\t\tlet uOffset = 0;\r\n\r\n\t\tif ( iy == 0 && thetaStart == 0 ) {\r\n\r\n\t\t\tuOffset = 0.5 / widthSegments;\r\n\r\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\r\n\r\n\t\t\tuOffset = - 0.5 / widthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst u = ix / widthSegments;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormal.copy( vertex ).normalize();\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( u + uOffset, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index ++ );\r\n\r\n\t\t}\r\n\r\n\t\tgrid.push( verticesRow );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n\t\t\tconst a = grid[ iy ][ ix + 1 ];\r\n\t\t\tconst b = grid[ iy ][ ix ];\r\n\t\t\tconst c = grid[ iy + 1 ][ ix ];\r\n\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\r\n\r\n// RingGeometry\r\n\r\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nRingGeometry.prototype = Object.create( Geometry.prototype );\r\nRingGeometry.prototype.constructor = RingGeometry;\r\n\r\n// RingBufferGeometry\r\n\r\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0.5;\r\n\touterRadius = outerRadius || 1;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// some helper variables\r\n\r\n\tlet radius = innerRadius;\r\n\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( let j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\t// values are generate from the inside of the ring to the outside\r\n\r\n\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tconst segment = i + thetaSegmentLevel;\r\n\r\n\t\t\tconst a = segment;\r\n\t\t\tconst b = segment + thetaSegments + 1;\r\n\t\t\tconst c = segment + thetaSegments + 2;\r\n\t\t\tconst d = segment + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\r\n\r\n// LatheGeometry\r\n\r\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nLatheGeometry.prototype = Object.create( Geometry.prototype );\r\nLatheGeometry.prototype.constructor = LatheGeometry;\r\n\r\n// LatheBufferGeometry\r\n\r\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\r\n\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst inverseSegments = 1.0 / segments;\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tconst phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tconst sin = Math.sin( phi );\r\n\t\tconst cos = Math.cos( phi );\r\n\r\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tconst base = j + i * points.length;\r\n\r\n\t\t\tconst a = base;\r\n\t\t\tconst b = base + points.length;\r\n\t\t\tconst c = base + points.length + 1;\r\n\t\t\tconst d = base + 1;\r\n\r\n\t\t\t// faces\r\n\r\n\t\t\tindices.push( a, b, d );\r\n\t\t\tindices.push( b, c, d );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif ( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tconst normals = this.attributes.normal.array;\r\n\t\tconst n1 = new Vector3();\r\n\t\tconst n2 = new Vector3();\r\n\t\tconst n = new Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\r\n\t\tconst base = segments * points.length * 3;\r\n\r\n\t\tfor ( let i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\r\n\r\n// ShapeGeometry\r\n\r\nfunction ShapeGeometry( shapes, curveSegments ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( typeof curveSegments === 'object' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\r\n\r\n\t\tcurveSegments = curveSegments.curveSegments;\r\n\r\n\t}\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nShapeGeometry.prototype = Object.create( Geometry.prototype );\r\nShapeGeometry.prototype.constructor = ShapeGeometry;\r\n\r\nShapeGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = Geometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n// ShapeBufferGeometry\r\n\r\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'ShapeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tshapes: shapes,\r\n\t\tcurveSegments: curveSegments\r\n\t};\r\n\r\n\tcurveSegments = curveSegments || 12;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet groupStart = 0;\r\n\tlet groupCount = 0;\r\n\r\n\t// allow single and array values for \"shapes\" parameter\r\n\r\n\tif ( Array.isArray( shapes ) === false ) {\r\n\r\n\t\taddShape( shapes );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\r\n\r\n\t\t\taddShape( shapes[ i ] );\r\n\r\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\r\n\r\n\t\t\tgroupStart += groupCount;\r\n\t\t\tgroupCount = 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\r\n\t// helper functions\r\n\r\n\tfunction addShape( shape ) {\r\n\r\n\t\tconst indexOffset = vertices.length / 3;\r\n\t\tconst points = shape.extractPoints( curveSegments );\r\n\r\n\t\tlet shapeVertices = points.shape;\r\n\t\tconst shapeHoles = points.holes;\r\n\r\n\t\t// check direction of vertices\r\n\r\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\r\n\r\n\t\t\tshapeVertices = shapeVertices.reverse();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\r\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\r\n\r\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\r\n\r\n\t\t// join vertices of inner and outer paths to a single array\r\n\r\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shapeHole = shapeHoles[ i ];\r\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices, normals, uvs\r\n\r\n\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst vertex = shapeVertices[ i ];\r\n\r\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\r\n\t\t\tnormals.push( 0, 0, 1 );\r\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\r\n\r\n\t\t}\r\n\r\n\t\t// incides\r\n\r\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst face = faces[ i ];\r\n\r\n\t\t\tconst a = face[ 0 ] + indexOffset;\r\n\t\t\tconst b = face[ 1 ] + indexOffset;\r\n\t\t\tconst c = face[ 2 ] + indexOffset;\r\n\r\n\t\t\tindices.push( a, b, c );\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\r\n\r\nShapeBufferGeometry.prototype.toJSON = function () {\r\n\r\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\tconst shapes = this.parameters.shapes;\r\n\r\n\treturn toJSON$1( shapes, data );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction toJSON$1( shapes, data ) {\r\n\r\n\tdata.shapes = [];\r\n\r\n\tif ( Array.isArray( shapes ) ) {\r\n\r\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst shape = shapes[ i ];\r\n\r\n\t\t\tdata.shapes.push( shape.uuid );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata.shapes.push( shapes.uuid );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\nfunction EdgesGeometry( geometry, thresholdAngle ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'EdgesGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tthresholdAngle: thresholdAngle\r\n\t};\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\t// buffer\r\n\r\n\tconst vertices = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\r\n\tconst edge = [ 0, 0 ], edges = {};\r\n\tlet edge1, edge2, key;\r\n\tconst keys = [ 'a', 'b', 'c' ];\r\n\r\n\t// prepare source geometry\r\n\r\n\tlet geometry2;\r\n\r\n\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\tgeometry2 = new Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tconst sourceVertices = geometry2.vertices;\r\n\tconst faces = geometry2.faces;\r\n\r\n\t// now create a data structure where each entry represents an edge with its adjoining faces\r\n\r\n\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tconst face = faces[ i ];\r\n\r\n\t\tfor ( let j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge1 = face[ keys[ j ] ];\r\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\r\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n\t\t\tif ( edges[ key ] === undefined ) {\r\n\r\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tedges[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate vertices\r\n\r\n\tfor ( key in edges ) {\r\n\r\n\t\tconst e = edges[ key ];\r\n\r\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\r\n\r\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tlet vertex = sourceVertices[ e.index1 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\tvertex = sourceVertices[ e.index2 ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n}\r\n\r\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nEdgesGeometry.prototype.constructor = EdgesGeometry;\r\n\r\n// CylinderGeometry\r\n\r\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\r\nCylinderGeometry.prototype.constructor = CylinderGeometry;\r\n\r\n// CylinderBufferGeometry\r\n\r\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tconst scope = this;\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\r\n\theight = height || 1;\r\n\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tlet index = 0;\r\n\tconst indexArray = [];\r\n\tconst halfHeight = height / 2;\r\n\tlet groupStart = 0;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) generateCap( true );\r\n\t\tif ( radiusBottom > 0 ) generateCap( false );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\tfunction generateTorso() {\r\n\r\n\t\tconst normal = new Vector3();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tconst slope = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tconst indexRow = [];\r\n\r\n\t\t\tconst v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\r\n\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tconst u = x / radialSegments;\r\n\r\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\t\tconst sinTheta = Math.sin( theta );\r\n\t\t\t\tconst cosTheta = Math.cos( theta );\r\n\r\n\t\t\t\t// vertex\r\n\r\n\t\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\r\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\r\n\t\t\t\tuvs.push( u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\r\n\t\t\t\tindexRow.push( index ++ );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\r\n\t\t\t\tconst a = indexArray[ y ][ x ];\r\n\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tindices.push( a, b, d );\r\n\t\t\t\tindices.push( b, c, d );\r\n\r\n\t\t\t\t// update group counter\r\n\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, 0 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n\tfunction generateCap( top ) {\r\n\r\n\t\tlet centerIndexStart, centerIndexEnd;\r\n\r\n\t\tconst uv = new Vector2();\r\n\t\tconst vertex = new Vector3();\r\n\r\n\t\tlet groupCount = 0;\r\n\r\n\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tconst sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuvs.push( 0.5, 0.5 );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tconst u = x / radialSegments;\r\n\t\t\tconst theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\tconst cosTheta = Math.cos( theta );\r\n\t\t\tconst sinTheta = Math.sin( theta );\r\n\r\n\t\t\t// vertex\r\n\r\n\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\r\n\t\t\tnormals.push( 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\r\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\r\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tconst c = centerIndexStart + x;\r\n\t\t\tconst i = centerIndexEnd + x;\r\n\r\n\t\t\tif ( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\r\n\t\t\t\tindices.push( i, i + 1, c );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\r\n\t\t\t\tindices.push( i + 1, i, c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\r\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n\t\t// calculate new start value for groups\r\n\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n}\r\n\r\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\r\n\r\n// ConeGeometry\r\n\r\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\r\nConeGeometry.prototype.constructor = ConeGeometry;\r\n\r\n// ConeBufferGeometry\r\n\r\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n}\r\n\r\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\r\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\r\n\r\n// CircleGeometry\r\n\r\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tGeometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n}\r\n\r\nCircleGeometry.prototype = Object.create( Geometry.prototype );\r\nCircleGeometry.prototype.constructor = CircleGeometry;\r\n\r\n// CircleBufferGeometry\r\n\r\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\t// buffers\r\n\r\n\tconst indices = [];\r\n\tconst vertices = [];\r\n\tconst normals = [];\r\n\tconst uvs = [];\r\n\r\n\t// helper variables\r\n\r\n\tconst vertex = new Vector3();\r\n\tconst uv = new Vector2();\r\n\r\n\t// center point\r\n\r\n\tvertices.push( 0, 0, 0 );\r\n\tnormals.push( 0, 0, 1 );\r\n\tuvs.push( 0.5, 0.5 );\r\n\r\n\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\r\n\r\n\t\tconst segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\t// vertex\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t// normal\r\n\r\n\t\tnormals.push( 0, 0, 1 );\r\n\r\n\t\t// uvs\r\n\r\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\r\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t}\r\n\r\n\t// indices\r\n\r\n\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n}\r\n\r\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\r\n\r\nvar Geometries = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tWireframeGeometry: WireframeGeometry,\r\n\tParametricGeometry: ParametricGeometry,\r\n\tParametricBufferGeometry: ParametricBufferGeometry,\r\n\tTetrahedronGeometry: TetrahedronGeometry,\r\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\r\n\tOctahedronGeometry: OctahedronGeometry,\r\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\r\n\tIcosahedronGeometry: IcosahedronGeometry,\r\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\r\n\tDodecahedronGeometry: DodecahedronGeometry,\r\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\r\n\tPolyhedronGeometry: PolyhedronGeometry,\r\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\r\n\tTubeGeometry: TubeGeometry,\r\n\tTubeBufferGeometry: TubeBufferGeometry,\r\n\tTorusKnotGeometry: TorusKnotGeometry,\r\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\r\n\tTorusGeometry: TorusGeometry,\r\n\tTorusBufferGeometry: TorusBufferGeometry,\r\n\tTextGeometry: TextGeometry,\r\n\tTextBufferGeometry: TextBufferGeometry,\r\n\tSphereGeometry: SphereGeometry,\r\n\tSphereBufferGeometry: SphereBufferGeometry,\r\n\tRingGeometry: RingGeometry,\r\n\tRingBufferGeometry: RingBufferGeometry,\r\n\tPlaneGeometry: PlaneGeometry,\r\n\tPlaneBufferGeometry: PlaneBufferGeometry,\r\n\tLatheGeometry: LatheGeometry,\r\n\tLatheBufferGeometry: LatheBufferGeometry,\r\n\tShapeGeometry: ShapeGeometry,\r\n\tShapeBufferGeometry: ShapeBufferGeometry,\r\n\tExtrudeGeometry: ExtrudeGeometry,\r\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\r\n\tEdgesGeometry: EdgesGeometry,\r\n\tConeGeometry: ConeGeometry,\r\n\tConeBufferGeometry: ConeBufferGeometry,\r\n\tCylinderGeometry: CylinderGeometry,\r\n\tCylinderBufferGeometry: CylinderBufferGeometry,\r\n\tCircleGeometry: CircleGeometry,\r\n\tCircleBufferGeometry: CircleBufferGeometry,\r\n\tBoxGeometry: BoxGeometry,\r\n\tBoxBufferGeometry: BoxBufferGeometry\r\n});\r\n\r\n/**\r\n * parameters = {\r\n *  color: <THREE.Color>\r\n * }\r\n */\r\n\r\nfunction ShadowMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'ShadowMaterial';\r\n\r\n\tthis.color = new Color( 0x000000 );\r\n\tthis.transparent = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nShadowMaterial.prototype = Object.create( Material.prototype );\r\nShadowMaterial.prototype.constructor = ShadowMaterial;\r\n\r\nShadowMaterial.prototype.isShadowMaterial = true;\r\n\r\nShadowMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction RawShaderMaterial( parameters ) {\r\n\r\n\tShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n}\r\n\r\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\r\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\r\n\r\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshStandardMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 1.0;\r\n\tthis.metalness = 0.0;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.vertexTangents = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\r\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\r\n\r\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\r\n\r\nMeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.vertexTangents = source.vertexTangents;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  clearcoat: <float>,\r\n *  clearcoatMap: new THREE.Texture( <Image> ),\r\n *  clearcoatRoughness: <float>,\r\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\r\n *  clearcoatNormalScale: <Vector2>,\r\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\r\n *\r\n *  reflectivity: <float>,\r\n *\r\n *  sheen: <Color>,\r\n *\r\n *  transmission: <float>,\r\n *  transmissionMap: new THREE.Texture( <Image> )\r\n * }\r\n */\r\n\r\nfunction MeshPhysicalMaterial( parameters ) {\r\n\r\n\tMeshStandardMaterial.call( this );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.type = 'MeshPhysicalMaterial';\r\n\r\n\tthis.clearcoat = 0.0;\r\n\tthis.clearcoatMap = null;\r\n\tthis.clearcoatRoughness = 0.0;\r\n\tthis.clearcoatRoughnessMap = null;\r\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\r\n\tthis.clearcoatNormalMap = null;\r\n\r\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n\tthis.sheen = null; // null will disable sheen bsdf\r\n\r\n\tthis.transmission = 0.0;\r\n\tthis.transmissionMap = null;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\r\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\r\n\r\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\r\n\r\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = {\r\n\r\n\t\t'STANDARD': '',\r\n\t\t'PHYSICAL': ''\r\n\r\n\t};\r\n\r\n\tthis.clearcoat = source.clearcoat;\r\n\tthis.clearcoatMap = source.clearcoatMap;\r\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\r\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\r\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\r\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\r\n\r\n\tthis.reflectivity = source.reflectivity;\r\n\r\n\tif ( source.sheen ) {\r\n\r\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\r\n\r\n\t} else {\r\n\r\n\t\tthis.sheen = null;\r\n\r\n\t}\r\n\r\n\tthis.transmission = source.transmission;\r\n\tthis.transmissionMap = source.transmissionMap;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.MultiplyOperation,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshPhongMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\tthis.specular = new Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\r\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\r\n\r\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\r\n\r\nMeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *  gradientMap: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshToonMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'TOON': '' };\r\n\r\n\tthis.type = 'MeshToonMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\tthis.gradientMap = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshToonMaterial.prototype = Object.create( Material.prototype );\r\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\r\n\r\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\r\n\r\nMeshToonMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\tthis.gradientMap = source.gradientMap;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshNormalMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\r\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\r\n\r\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\r\n\r\nMeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshLambertMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\r\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\r\n\r\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\r\n\r\nMeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  matcap: new THREE.Texture( <Image> ),\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalMapType: THREE.TangentSpaceNormalMap,\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nfunction MeshMatcapMaterial( parameters ) {\r\n\r\n\tMaterial.call( this );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.type = 'MeshMatcapMaterial';\r\n\r\n\tthis.color = new Color( 0xffffff ); // diffuse\r\n\r\n\tthis.matcap = null;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalMapType = TangentSpaceNormalMap;\r\n\tthis.normalScale = new Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\r\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\r\n\r\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\r\n\r\nMeshMatcapMaterial.prototype.copy = function ( source ) {\r\n\r\n\tMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'MATCAP': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.matcap = source.matcap;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalMapType = source.normalMapType;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */\r\n\r\nfunction LineDashedMaterial( parameters ) {\r\n\r\n\tLineBasicMaterial.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n}\r\n\r\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\r\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\r\n\r\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\r\n\r\nLineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tLineBasicMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Materials = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tShadowMaterial: ShadowMaterial,\r\n\tSpriteMaterial: SpriteMaterial,\r\n\tRawShaderMaterial: RawShaderMaterial,\r\n\tShaderMaterial: ShaderMaterial,\r\n\tPointsMaterial: PointsMaterial,\r\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\r\n\tMeshStandardMaterial: MeshStandardMaterial,\r\n\tMeshPhongMaterial: MeshPhongMaterial,\r\n\tMeshToonMaterial: MeshToonMaterial,\r\n\tMeshNormalMaterial: MeshNormalMaterial,\r\n\tMeshLambertMaterial: MeshLambertMaterial,\r\n\tMeshDepthMaterial: MeshDepthMaterial,\r\n\tMeshDistanceMaterial: MeshDistanceMaterial,\r\n\tMeshBasicMaterial: MeshBasicMaterial,\r\n\tMeshMatcapMaterial: MeshMatcapMaterial,\r\n\tLineDashedMaterial: LineDashedMaterial,\r\n\tLineBasicMaterial: LineBasicMaterial,\r\n\tMaterial: Material\r\n});\r\n\r\nconst AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function ( array, from, to ) {\r\n\r\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\r\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\r\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function ( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function ( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function ( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tconst n = times.length;\r\n\t\tconst result = new Array( n );\r\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function ( values, stride, order ) {\r\n\r\n\t\tconst nValues = values.length;\r\n\t\tconst result = new values.constructor( nValues );\r\n\r\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tconst srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tlet i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tlet value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\r\n\r\n\t\tfps = fps || 30;\r\n\r\n\t\tconst clip = sourceClip.clone();\r\n\r\n\t\tclip.name = name;\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tconst track = clip.tracks[ i ];\r\n\t\t\tconst valueSize = track.getValueSize();\r\n\r\n\t\t\tconst times = [];\r\n\t\t\tconst values = [];\r\n\r\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\r\n\r\n\t\t\t\tconst frame = track.times[ j ] * fps;\r\n\r\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\r\n\r\n\t\t\t\ttimes.push( track.times[ j ] );\r\n\r\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( times.length === 0 ) continue;\r\n\r\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\r\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\r\n\r\n\t\t\ttracks.push( track );\r\n\r\n\t\t}\r\n\r\n\t\tclip.tracks = tracks;\r\n\r\n\t\t// find minimum .times value across all tracks in the trimmed clip\r\n\r\n\t\tlet minStartTime = Infinity;\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\r\n\r\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// shift all tracks such that clip begins at t=0\r\n\r\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\r\n\r\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\r\n\r\n\t\t}\r\n\r\n\t\tclip.resetDuration();\r\n\r\n\t\treturn clip;\r\n\r\n\t},\r\n\r\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\r\n\r\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\r\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\r\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\r\n\r\n\t\tconst numTracks = targetClip.tracks.length;\r\n\t\tconst referenceTime = referenceFrame / fps;\r\n\r\n\t\t// Make each track's values relative to the values at the reference frame\r\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\r\n\r\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\r\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\r\n\r\n\t\t\t// Skip this track if it's non-numeric\r\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\r\n\r\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\r\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\r\n\r\n\t\t\t\treturn track.name === referenceTrack.name\r\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( targetTrack === undefined ) continue;\r\n\r\n\t\t\tconst valueSize = referenceTrack.getValueSize();\r\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\r\n\t\t\tlet referenceValue;\r\n\r\n\t\t\t// Find the value to subtract out of the track\r\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\r\n\r\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, 0, referenceTrack.valueSize );\r\n\r\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\r\n\r\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\r\n\t\t\t\tconst startIndex = lastIndex * valueSize;\r\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Interpolate to the reference value\r\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\r\n\t\t\t\tinterpolant.evaluate( referenceTime );\r\n\t\t\t\treferenceValue = interpolant.resultBuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Conjugate the quaternion\r\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\tconst referenceQuat = new Quaternion(\r\n\t\t\t\t\treferenceValue[ 0 ],\r\n\t\t\t\t\treferenceValue[ 1 ],\r\n\t\t\t\t\treferenceValue[ 2 ],\r\n\t\t\t\t\treferenceValue[ 3 ]\r\n\t\t\t\t).normalize().conjugate();\r\n\t\t\t\treferenceQuat.toArray( referenceValue );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Subtract the reference value from all of the track values\r\n\r\n\t\t\tconst numTimes = targetTrack.times.length;\r\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\r\n\r\n\t\t\t\tconst valueStart = j * valueSize;\r\n\r\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\r\n\r\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\r\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart,\r\n\t\t\t\t\t\treferenceValue,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\ttargetTrack.values,\r\n\t\t\t\t\t\tvalueStart\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Subtract each value for all other numeric track types\r\n\t\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\r\n\r\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\r\n\r\n\t\treturn targetClip;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n */\r\n\r\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n}\r\n\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\tevaluate: function ( t ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[ i1 ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tlet right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n\r\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\r\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//- slower code:\r\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[ i1 ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function () {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function ( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\r\n\r\n\t\tthrow new Error( 'call to abstract method' );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( Interpolant.prototype, {\r\n\r\n\t//( 0, t, t0 ), returns this.resultBuffer\r\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\r\n\r\n\t//( N-1, tN-1, t ), returns this.resultBuffer\r\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\r\n\r\n} );\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n */\r\n\r\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = - 0;\r\n\tthis._offsetPrev = - 0;\r\n\tthis._weightNext = - 0;\r\n\tthis._offsetNext = - 0;\r\n\r\n}\r\n\r\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function ( i1, t0, t1 ) {\r\n\r\n\t\tlet pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\r\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\r\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\r\n\t\tconst sN = wN * ppp - wN * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: LinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n */\r\n\r\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: DiscreteInterpolant,\r\n\r\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction KeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\r\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n}\r\n\r\n// Static methods\r\n\r\nObject.assign( KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\ttoJSON: function ( track ) {\r\n\r\n\t\tconst trackType = track.constructor;\r\n\r\n\t\tlet json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( KeyframeTrack.prototype, {\r\n\r\n\tconstructor: KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\r\n\r\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function ( result ) {\r\n\r\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function ( interpolation ) {\r\n\r\n\t\tlet factoryMethod;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tconst message = \"unsupported interpolation for \" +\r\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function () {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function () {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function ( timeOffset ) {\r\n\r\n\t\tif ( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function ( timeScale ) {\r\n\r\n\t\tif ( timeScale !== 1.0 ) {\r\n\r\n\t\t\tconst times = this.times;\r\n\r\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function ( startTime, endTime ) {\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tlet from = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\r\n\r\n\t\t\t++ from;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\r\n\r\n\t\t\t-- to;\r\n\r\n\t\t}\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif ( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) {\r\n\r\n\t\t\t\tto = Math.max( to, 1 );\r\n\t\t\t\tfrom = to - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst stride = this.getValueSize();\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tconst valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif ( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tlet prevTime = null;\r\n\r\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tconst currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tconst value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function () {\r\n\r\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\r\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\r\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\r\n\r\n\t\t\tlastIndex = times.length - 1;\r\n\r\n\t\tlet writeIndex = 1;\r\n\r\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\r\n\r\n\t\t\tlet keep = false;\r\n\r\n\t\t\tconst time = times[ i ];\r\n\t\t\tconst timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\tif ( ! smoothInterpolation ) {\r\n\r\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\r\n\t\t\t\t\tconst offset = i * stride,\r\n\t\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst value = values[ offset + j ];\r\n\r\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tkeep = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tconst readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// flush last keyframe (compaction looks ahead)\r\n\r\n\t\tif ( lastIndex > 0 ) {\r\n\r\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\r\n\r\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t++ writeIndex;\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.times = times;\r\n\t\t\tthis.values = values;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\r\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\r\n\r\n\t\tconst TypedKeyframeTrack = this.constructor;\r\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\r\n\r\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\r\n\t\ttrack.createInterpolant = this.createInterpolant;\r\n\r\n\t\treturn track;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of Boolean keyframe values.\r\n */\r\n\r\nfunction BooleanKeyframeTrack( name, times, values ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values );\r\n\r\n}\r\n\r\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n/**\r\n * A Track of keyframe values that represent color.\r\n */\r\n\r\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: ColorKeyframeTrack,\r\n\r\n\tValueTypeName: 'color'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n\t// Note: Very basic implementation and nothing special yet.\r\n\t// However, this is the place for color space parameterization.\r\n\r\n} );\r\n\r\n/**\r\n * A Track of numeric keyframe values.\r\n */\r\n\r\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n */\r\n\r\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n}\r\n\r\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n\tconstructor: QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n\t\tconst result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tlet offset = i1 * stride;\r\n\r\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * A Track of quaternion keyframe values.\r\n */\r\n\r\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n/**\r\n * A Track that interpolates Strings\r\n */\r\n\r\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n/**\r\n * A Track of vectored keyframe values.\r\n */\r\n\r\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n\tKeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n}\r\n\r\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\nfunction AnimationClip( name, duration, tracks, blendMode ) {\r\n\r\n\tthis.name = name;\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\r\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getTrackTypeForValueTypeName( typeName ) {\r\n\r\n\tswitch ( typeName.toLowerCase() ) {\r\n\r\n\t\tcase 'scalar':\r\n\t\tcase 'double':\r\n\t\tcase 'float':\r\n\t\tcase 'number':\r\n\t\tcase 'integer':\r\n\r\n\t\t\treturn NumberKeyframeTrack;\r\n\r\n\t\tcase 'vector':\r\n\t\tcase 'vector2':\r\n\t\tcase 'vector3':\r\n\t\tcase 'vector4':\r\n\r\n\t\t\treturn VectorKeyframeTrack;\r\n\r\n\t\tcase 'color':\r\n\r\n\t\t\treturn ColorKeyframeTrack;\r\n\r\n\t\tcase 'quaternion':\r\n\r\n\t\t\treturn QuaternionKeyframeTrack;\r\n\r\n\t\tcase 'bool':\r\n\t\tcase 'boolean':\r\n\r\n\t\t\treturn BooleanKeyframeTrack;\r\n\r\n\t\tcase 'string':\r\n\r\n\t\t\treturn StringKeyframeTrack;\r\n\r\n\t}\r\n\r\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\r\n\r\n}\r\n\r\nfunction parseKeyframeTrack( json ) {\r\n\r\n\tif ( json.type === undefined ) {\r\n\r\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\r\n\r\n\t}\r\n\r\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\r\n\r\n\tif ( json.times === undefined ) {\r\n\r\n\t\tconst times = [], values = [];\r\n\r\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\tjson.times = times;\r\n\t\tjson.values = values;\r\n\r\n\t}\r\n\r\n\t// derived classes can define a static parse method\r\n\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\treturn trackType.parse( json );\r\n\r\n\t} else {\r\n\r\n\t\t// by default, we assume a constructor compatible with the base\r\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( AnimationClip, {\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( clip ) {\r\n\r\n\t\tconst tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tconst json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks,\r\n\t\t\t'uuid': clip.uuid,\r\n\t\t\t'blendMode': clip.blendMode\r\n\r\n\t\t};\r\n\r\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n\t\tconst numMorphTargets = morphTargetSequence.length;\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tlet times = [];\r\n\t\t\tlet values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\ti,\r\n\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\tnew NumberKeyframeTrack(\r\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\ttimes, values\r\n\t\t\t\t).scale( 1.0 / fps ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( name, - 1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function ( objectOrClipArray, name ) {\r\n\r\n\t\tlet clipArray = objectOrClipArray;\r\n\r\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n\t\t\tconst o = objectOrClipArray;\r\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\r\n\r\n\t\tconst animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tconst morphTarget = morphTargets[ i ];\r\n\t\t\tconst parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tconst name = parts[ 1 ];\r\n\r\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\r\n\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst clips = [];\r\n\r\n\t\tfor ( const name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function ( animation, bones ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tconst times = [];\r\n\t\t\t\tconst values = [];\r\n\r\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tconst clipName = animation.name || 'default';\r\n\t\tconst fps = animation.fps || 30;\r\n\t\tconst blendMode = animation.blendMode;\r\n\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tlet duration = animation.length || - 1;\r\n\r\n\t\tconst hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n\t\t\t// process morph targets\r\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tconst morphTargetNames = {};\r\n\r\n\t\t\t\tlet k;\r\n\r\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tconst times = [];\r\n\t\t\t\t\tconst values = [];\r\n\r\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( AnimationClip.prototype, {\r\n\r\n\tresetDuration: function () {\r\n\r\n\t\tconst tracks = this.tracks;\r\n\t\tlet duration = 0;\r\n\r\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttrim: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tvalidate: function () {\r\n\r\n\t\tlet valid = true;\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tvalid = valid && this.tracks[ i ].validate();\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\toptimize: function () {\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tconst tracks = [];\r\n\r\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\ttracks.push( this.tracks[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction LoadingManager( onLoad, onProgress, onError ) {\r\n\r\n\tconst scope = this;\r\n\r\n\tlet isLoading = false;\r\n\tlet itemsLoaded = 0;\r\n\tlet itemsTotal = 0;\r\n\tlet urlModifier = undefined;\r\n\tconst handlers = [];\r\n\r\n\t// Refer to #5689 for the reason why we don't set .onStart\r\n\t// in the constructor\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.resolveURL = function ( url ) {\r\n\r\n\t\tif ( urlModifier ) {\r\n\r\n\t\t\treturn urlModifier( url );\r\n\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\r\n\t};\r\n\r\n\tthis.setURLModifier = function ( transform ) {\r\n\r\n\t\turlModifier = transform;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.addHandler = function ( regex, loader ) {\r\n\r\n\t\thandlers.push( regex, loader );\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.removeHandler = function ( regex ) {\r\n\r\n\t\tconst index = handlers.indexOf( regex );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\thandlers.splice( index, 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.getHandler = function ( file ) {\r\n\r\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tconst regex = handlers[ i ];\r\n\t\t\tconst loader = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n}\r\n\r\nconst DefaultLoadingManager = new LoadingManager();\r\n\r\nfunction Loader( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n\tthis.crossOrigin = 'anonymous';\r\n\tthis.path = '';\r\n\tthis.resourcePath = '';\r\n\tthis.requestHeader = {};\r\n\r\n}\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\r\n\r\n\tloadAsync: function ( url, onProgress ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tscope.load( url, resolve, onProgress, reject );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tparse: function ( /* data */ ) {},\r\n\r\n\tsetCrossOrigin: function ( crossOrigin ) {\r\n\r\n\t\tthis.crossOrigin = crossOrigin;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetResourcePath: function ( resourcePath ) {\r\n\r\n\t\tthis.resourcePath = resourcePath;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRequestHeader: function ( requestHeader ) {\r\n\r\n\t\tthis.requestHeader = requestHeader;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst loading = {};\r\n\r\nfunction FileLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FileLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\t// Check if request is duplicate\r\n\r\n\t\tif ( loading[ url ] !== undefined ) {\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check for data: URI\r\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\r\n\t\tlet request;\r\n\r\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\r\n\t\tif ( dataUriRegexResult ) {\r\n\r\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\r\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\r\n\r\n\t\t\tlet data = dataUriRegexResult[ 3 ];\r\n\t\t\tdata = decodeURIComponent( data );\r\n\r\n\t\t\tif ( isBase64 ) data = atob( data );\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tlet response;\r\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\r\n\r\n\t\t\t\tswitch ( responseType ) {\r\n\r\n\t\t\t\t\tcase 'arraybuffer':\r\n\t\t\t\t\tcase 'blob':\r\n\r\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\r\n\r\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tresponse = view.buffer;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'document':\r\n\r\n\t\t\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'json':\r\n\r\n\t\t\t\t\t\tresponse = JSON.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault: // 'text' or other\r\n\r\n\t\t\t\t\t\tresponse = data;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tif ( onError ) onError( error );\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Initialise array for duplicate requests\r\n\r\n\t\t\tloading[ url ] = [];\r\n\r\n\t\t\tloading[ url ].push( {\r\n\r\n\t\t\t\tonLoad: onLoad,\r\n\t\t\t\tonProgress: onProgress,\r\n\t\t\t\tonError: onError\r\n\r\n\t\t\t} );\r\n\r\n\t\t\trequest = new XMLHttpRequest();\r\n\r\n\t\t\trequest.open( 'GET', url, true );\r\n\r\n\t\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\t\tconst response = this.response;\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\r\n\r\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\r\n\t\t\t\t\t// error response bodies as proper responses to requests.\r\n\t\t\t\t\tCache.add( url, response );\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\r\n\r\n\t\t\t\tconst callbacks = loading[ url ];\r\n\r\n\t\t\t\tdelete loading[ url ];\r\n\r\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst callback = callbacks[ i ];\r\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\r\n\r\n\t\t\tfor ( const header in this.requestHeader ) {\r\n\r\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trequest.send( null );\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMimeType: function ( value ) {\r\n\r\n\t\tthis.mimeType = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AnimationLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction CompressedTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst images = [];\r\n\r\n\t\tconst texture = new CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n *\r\n * Sub classes have to implement the parse() method which will be used in load().\r\n */\r\n\r\nfunction DataTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: DataTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst texture = new DataTexture();\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tconst texData = scope.parse( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( texData.image !== undefined ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( texData.data !== undefined ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\r\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( texData.format !== undefined ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.type !== undefined ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmaps !== undefined ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( texData.mipmapCount === 1 ) {\r\n\r\n\t\t\t\ttexture.minFilter = LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImageLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\r\n\r\n\t\tfunction onImageLoad() {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tCache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onImageError( event ) {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'load', onImageLoad, false );\r\n\t\timage.addEventListener( 'error', onImageError, false );\r\n\r\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\r\n\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction CubeTextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new CubeTexture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tlet loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction TextureLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst texture = new Texture();\r\n\r\n\t\tconst loader = new ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\r\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\r\n\r\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Extensible curve object.\r\n *\r\n * Some common of curve methods:\r\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\r\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following curves inherit from THREE.Curve:\r\n *\r\n * -- 2D curves --\r\n * THREE.ArcCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.EllipseCurve\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.SplineCurve\r\n *\r\n * -- 3D curves --\r\n * THREE.CatmullRomCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath.\r\n *\r\n **/\r\n\r\nfunction Curve() {\r\n\r\n\tthis.type = 'Curve';\r\n\r\n\tthis.arcLengthDivisions = 200;\r\n\r\n}\r\n\r\nObject.assign( Curve.prototype, {\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( /* t, optionalTarget */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 5;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\r\n\r\n\t\tif ( this.cacheArcLengths &&\r\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\r\n\t\t\t! this.needsUpdate ) {\r\n\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tconst cache = [];\r\n\t\tlet current, last = this.getPoint( 0 );\r\n\t\tlet sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tconst arcLengths = this.getLengths();\r\n\r\n\t\tlet i = 0, il = arcLengths.length;\r\n\r\n\t\tlet targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tlet low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\treturn i / ( il - 1 );\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tconst lengthBefore = arcLengths[ i ];\r\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tconst segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function ( t, optionalTarget ) {\r\n\r\n\t\tconst delta = 0.0001;\r\n\t\tlet t1 = t - delta;\r\n\t\tlet t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tconst pt1 = this.getPoint( t1 );\r\n\t\tconst pt2 = this.getPoint( t2 );\r\n\r\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\r\n\r\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\r\n\r\n\t\treturn tangent;\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u, optionalTarget ) {\r\n\r\n\t\tconst t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcomputeFrenetFrames: function ( segments, closed ) {\r\n\r\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\r\n\t\tconst normal = new Vector3();\r\n\r\n\t\tconst tangents = [];\r\n\t\tconst normals = [];\r\n\t\tconst binormals = [];\r\n\r\n\t\tconst vec = new Vector3();\r\n\t\tconst mat = new Matrix4();\r\n\r\n\t\t// compute the tangent vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\r\n\r\n\t\t\tconst u = i / segments;\r\n\r\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\r\n\t\t\ttangents[ i ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the minimum tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new Vector3();\r\n\t\tbinormals[ 0 ] = new Vector3();\r\n\t\tlet min = Number.MAX_VALUE;\r\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\r\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\r\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= min ) {\r\n\r\n\t\t\tmin = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= min ) {\r\n\r\n\t\t\tmin = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= min ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\r\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\r\n\r\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\t\tvec.normalize();\r\n\r\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\t\tif ( closed === true ) {\r\n\r\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\r\n\t\t\ttheta /= segments;\r\n\r\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\r\n\r\n\t\t\t\ttheta = - theta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\r\n\r\n\t\t\t\t// twist a little...\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttangents: tangents,\r\n\t\t\tnormals: normals,\r\n\t\t\tbinormals: binormals\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.5,\r\n\t\t\t\ttype: 'Curve',\r\n\t\t\t\tgenerator: 'Curve.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\r\n\t\tdata.type = this.type;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'EllipseCurve';\r\n\r\n\tthis.aX = aX || 0;\r\n\tthis.aY = aY || 0;\r\n\r\n\tthis.xRadius = xRadius || 1;\r\n\tthis.yRadius = yRadius || 1;\r\n\r\n\tthis.aStartAngle = aStartAngle || 0;\r\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\r\n\r\n\tthis.aClockwise = aClockwise || false;\r\n\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n}\r\n\r\nEllipseCurve.prototype = Object.create( Curve.prototype );\r\nEllipseCurve.prototype.constructor = EllipseCurve;\r\n\r\nEllipseCurve.prototype.isEllipseCurve = true;\r\n\r\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst twoPi = Math.PI * 2;\r\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\r\n\r\n\t// ensures that deltaAngle is 0 .. 2 PI\r\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\r\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\r\n\r\n\tif ( deltaAngle < Number.EPSILON ) {\r\n\r\n\t\tif ( samePoints ) {\r\n\r\n\t\t\tdeltaAngle = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( this.aClockwise === true && ! samePoints ) {\r\n\r\n\t\tif ( deltaAngle === twoPi ) {\r\n\r\n\t\t\tdeltaAngle = - twoPi;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdeltaAngle = deltaAngle - twoPi;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst angle = this.aStartAngle + t * deltaAngle;\r\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\r\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tconst cos = Math.cos( this.aRotation );\r\n\t\tconst sin = Math.sin( this.aRotation );\r\n\r\n\t\tconst tx = x - this.aX;\r\n\t\tconst ty = y - this.aY;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = tx * cos - ty * sin + this.aX;\r\n\t\ty = tx * sin + ty * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn point.set( x, y );\r\n\r\n};\r\n\r\nEllipseCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.aX = source.aX;\r\n\tthis.aY = source.aY;\r\n\r\n\tthis.xRadius = source.xRadius;\r\n\tthis.yRadius = source.yRadius;\r\n\r\n\tthis.aStartAngle = source.aStartAngle;\r\n\tthis.aEndAngle = source.aEndAngle;\r\n\r\n\tthis.aClockwise = source.aClockwise;\r\n\r\n\tthis.aRotation = source.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n\r\nEllipseCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.aX = this.aX;\r\n\tdata.aY = this.aY;\r\n\r\n\tdata.xRadius = this.xRadius;\r\n\tdata.yRadius = this.yRadius;\r\n\r\n\tdata.aStartAngle = this.aStartAngle;\r\n\tdata.aEndAngle = this.aEndAngle;\r\n\r\n\tdata.aClockwise = this.aClockwise;\r\n\r\n\tdata.aRotation = this.aRotation;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nEllipseCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.aX = json.aX;\r\n\tthis.aY = json.aY;\r\n\r\n\tthis.xRadius = json.xRadius;\r\n\tthis.yRadius = json.yRadius;\r\n\r\n\tthis.aStartAngle = json.aStartAngle;\r\n\tthis.aEndAngle = json.aEndAngle;\r\n\r\n\tthis.aClockwise = json.aClockwise;\r\n\r\n\tthis.aRotation = json.aRotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\tthis.type = 'ArcCurve';\r\n\r\n}\r\n\r\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\r\nArcCurve.prototype.constructor = ArcCurve;\r\n\r\nArcCurve.prototype.isArcCurve = true;\r\n\r\n/**\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\n\r\n/*\r\nBased on an optimized c++ solution in\r\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n - http://ideone.com/NoEbVM\r\n\r\nThis CubicPoly class could be used for reusing some variables and calculations,\r\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\nwhich can be placed in CurveUtils.\r\n*/\r\n\r\nfunction CubicPoly() {\r\n\r\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tfunction init( x0, x1, t0, t1 ) {\r\n\r\n\t\tc0 = x0;\r\n\t\tc1 = t0;\r\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\r\n\r\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t\t},\r\n\r\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t\t// rescale tangents for parametrization in [0,1]\r\n\t\t\tt1 *= dt1;\r\n\t\t\tt2 *= dt1;\r\n\r\n\t\t\tinit( x1, x2, t1, t2 );\r\n\r\n\t\t},\r\n\r\n\t\tcalc: function ( t ) {\r\n\r\n\t\t\tconst t2 = t * t;\r\n\t\t\tconst t3 = t2 * t;\r\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\n//\r\n\r\nconst tmp = new Vector3();\r\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\r\n\r\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CatmullRomCurve3';\r\n\r\n\tthis.points = points || [];\r\n\tthis.closed = closed || false;\r\n\tthis.curveType = curveType || 'centripetal';\r\n\tthis.tension = ( tension !== undefined ) ? tension : 0.5;\r\n\r\n}\r\n\r\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\r\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\r\n\r\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\r\n\r\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst points = this.points;\r\n\tconst l = points.length;\r\n\r\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\tlet intPoint = Math.floor( p );\r\n\tlet weight = p - intPoint;\r\n\r\n\tif ( this.closed ) {\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\r\n\r\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\tintPoint = l - 2;\r\n\t\tweight = 1;\r\n\r\n\t}\r\n\r\n\tlet p0, p1, p2, p3; // 4 points\r\n\r\n\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate first point\r\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\tp0 = tmp;\r\n\r\n\t}\r\n\r\n\tp1 = points[ intPoint % l ];\r\n\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t} else {\r\n\r\n\t\t// extrapolate last point\r\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\tp3 = tmp;\r\n\r\n\t}\r\n\r\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\r\n\r\n\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\r\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t// safety check for repeated points\r\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t} else if ( this.curveType === 'catmullrom' ) {\r\n\r\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\r\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\r\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\r\n\r\n\t}\r\n\r\n\tpoint.set(\r\n\t\tpx.calc( weight ),\r\n\t\tpy.calc( weight ),\r\n\t\tpz.calc( weight )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\tthis.closed = source.closed;\r\n\tthis.curveType = source.curveType;\r\n\tthis.tension = source.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\tdata.closed = this.closed;\r\n\tdata.curveType = this.curveType;\r\n\tdata.tension = this.tension;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector3().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\tthis.closed = json.closed;\r\n\tthis.curveType = json.curveType;\r\n\tthis.tension = json.tension;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Bezier Curves formulas obtained from\r\n * http://en.wikipedia.org/wiki/Bézier_curve\r\n */\r\n\r\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\r\n\r\n\tconst v0 = ( p2 - p0 ) * 0.5;\r\n\tconst v1 = ( p3 - p1 ) * 0.5;\r\n\tconst t2 = t * t;\r\n\tconst t3 = t * t2;\r\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction QuadraticBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP1( t, p ) {\r\n\r\n\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezierP2( t, p ) {\r\n\r\n\treturn t * t * p;\r\n\r\n}\r\n\r\nfunction QuadraticBezier( t, p0, p1, p2 ) {\r\n\r\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\r\n\t\tQuadraticBezierP2( t, p2 );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction CubicBezierP0( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn k * k * k * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP1( t, p ) {\r\n\r\n\tconst k = 1 - t;\r\n\treturn 3 * k * k * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP2( t, p ) {\r\n\r\n\treturn 3 * ( 1 - t ) * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezierP3( t, p ) {\r\n\r\n\treturn t * t * t * p;\r\n\r\n}\r\n\r\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\r\n\r\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\r\n\t\tCubicBezierP3( t, p3 );\r\n\r\n}\r\n\r\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\tthis.v3 = v3 || new Vector2();\r\n\r\n}\r\n\r\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\r\n\r\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\r\n\r\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CubicBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\tthis.v3 = v3 || new Vector3();\r\n\r\n}\r\n\r\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\r\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\r\n\r\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\r\n\r\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n\tpoint.set(\r\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\r\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\tthis.v3.copy( source.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\tdata.v3 = this.v3.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\tthis.v3.fromArray( json.v3 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve';\r\n\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nLineCurve.prototype = Object.create( Curve.prototype );\r\nLineCurve.prototype.constructor = LineCurve;\r\n\r\nLineCurve.prototype.isLineCurve = true;\r\n\r\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\r\n\r\n\tconst tangent = optionalTarget || new Vector2();\r\n\r\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\nLineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction LineCurve3( v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'LineCurve3';\r\n\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nLineCurve3.prototype = Object.create( Curve.prototype );\r\nLineCurve3.prototype.constructor = LineCurve3;\r\n\r\nLineCurve3.prototype.isLineCurve3 = true;\r\n\r\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tif ( t === 1 ) {\r\n\r\n\t\tpoint.copy( this.v2 );\r\n\r\n\t} else {\r\n\r\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\t}\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n\treturn this.getPoint( u, optionalTarget );\r\n\r\n};\r\n\r\nLineCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nLineCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nLineCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve';\r\n\r\n\tthis.v0 = v0 || new Vector2();\r\n\tthis.v1 = v1 || new Vector2();\r\n\tthis.v2 = v2 || new Vector2();\r\n\r\n}\r\n\r\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\r\n\r\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\r\n\r\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'QuadraticBezierCurve3';\r\n\r\n\tthis.v0 = v0 || new Vector3();\r\n\tthis.v1 = v1 || new Vector3();\r\n\tthis.v2 = v2 || new Vector3();\r\n\r\n}\r\n\r\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\r\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\r\n\r\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\r\n\r\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector3();\r\n\r\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n\tpoint.set(\r\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\r\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.v0.copy( source.v0 );\r\n\tthis.v1.copy( source.v1 );\r\n\tthis.v2.copy( source.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.v0 = this.v0.toArray();\r\n\tdata.v1 = this.v1.toArray();\r\n\tdata.v2 = this.v2.toArray();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.v0.fromArray( json.v0 );\r\n\tthis.v1.fromArray( json.v1 );\r\n\tthis.v2.fromArray( json.v2 );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction SplineCurve( points ) {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'SplineCurve';\r\n\r\n\tthis.points = points || [];\r\n\r\n}\r\n\r\nSplineCurve.prototype = Object.create( Curve.prototype );\r\nSplineCurve.prototype.constructor = SplineCurve;\r\n\r\nSplineCurve.prototype.isSplineCurve = true;\r\n\r\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n\tconst point = optionalTarget || new Vector2();\r\n\r\n\tconst points = this.points;\r\n\tconst p = ( points.length - 1 ) * t;\r\n\r\n\tconst intPoint = Math.floor( p );\r\n\tconst weight = p - intPoint;\r\n\r\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tconst p1 = points[ intPoint ];\r\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tpoint.set(\r\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\r\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\r\n\t);\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\nSplineCurve.prototype.copy = function ( source ) {\r\n\r\n\tCurve.prototype.copy.call( this, source );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = source.points[ i ];\r\n\r\n\t\tthis.points.push( point.clone() );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nSplineCurve.prototype.toJSON = function () {\r\n\r\n\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\tdata.points = [];\r\n\r\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = this.points[ i ];\r\n\t\tdata.points.push( point.toArray() );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\nSplineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\tthis.points = [];\r\n\r\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n\t\tconst point = json.points[ i ];\r\n\t\tthis.points.push( new Vector2().fromArray( point ) );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nvar Curves = /*#__PURE__*/Object.freeze({\r\n\t__proto__: null,\r\n\tArcCurve: ArcCurve,\r\n\tCatmullRomCurve3: CatmullRomCurve3,\r\n\tCubicBezierCurve: CubicBezierCurve,\r\n\tCubicBezierCurve3: CubicBezierCurve3,\r\n\tEllipseCurve: EllipseCurve,\r\n\tLineCurve: LineCurve,\r\n\tLineCurve3: LineCurve3,\r\n\tQuadraticBezierCurve: QuadraticBezierCurve,\r\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\r\n\tSplineCurve: SplineCurve\r\n});\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nfunction CurvePath() {\r\n\r\n\tCurve.call( this );\r\n\r\n\tthis.type = 'CurvePath';\r\n\r\n\tthis.curves = [];\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n}\r\n\r\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\r\n\r\n\tconstructor: CurvePath,\r\n\r\n\tadd: function ( curve ) {\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t},\r\n\r\n\tclosePath: function () {\r\n\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconst d = t * this.getLength();\r\n\t\tconst curveLengths = this.getCurveLengths();\r\n\t\tlet i = 0;\r\n\r\n\t\t// To think about boundaries points.\r\n\r\n\t\twhile ( i < curveLengths.length ) {\r\n\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\t\tconst diff = curveLengths[ i ] - d;\r\n\t\t\t\tconst curve = this.curves[ i ];\r\n\r\n\t\t\t\tconst segmentLength = curve.getLength();\r\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\r\n\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ti ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n\t},\r\n\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tconst lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// cacheLengths must be recalculated.\r\n\tupdateArcLengths: function () {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.cacheLengths = null;\r\n\t\tthis.getCurveLengths();\r\n\r\n\t},\r\n\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n\tgetCurveLengths: function () {\r\n\r\n\t\t// We use cache values if curves and cache array are same length\r\n\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\t\treturn this.cacheLengths;\r\n\r\n\t\t}\r\n\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\r\n\t\tconst lengths = [];\r\n\t\tlet sums = 0;\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheLengths = lengths;\r\n\r\n\t\treturn lengths;\r\n\r\n\t},\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( divisions === undefined ) divisions = 40;\r\n\r\n\t\tconst points = [];\r\n\r\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tdivisions = divisions || 12;\r\n\r\n\t\tconst points = [];\r\n\t\tlet last;\r\n\r\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\r\n\r\n\t\t\tconst curve = curves[ i ];\r\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\r\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\r\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\r\n\t\t\t\t\t\t: divisions;\r\n\r\n\t\t\tconst pts = curve.getPoints( resolution );\r\n\r\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\r\n\r\n\t\t\t\tconst point = pts[ j ];\r\n\r\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\r\n\r\n\t\t\t\tpoints.push( point );\r\n\t\t\t\tlast = point;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurve.prototype.copy.call( this, source );\r\n\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = source.curves[ i ];\r\n\r\n\t\t\tthis.curves.push( curve.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.autoClose = source.autoClose;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Curve.prototype.toJSON.call( this );\r\n\r\n\t\tdata.autoClose = this.autoClose;\r\n\t\tdata.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = this.curves[ i ];\r\n\t\t\tdata.curves.push( curve.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurve.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.autoClose = json.autoClose;\r\n\t\tthis.curves = [];\r\n\r\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst curve = json.curves[ i ];\r\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Path( points ) {\r\n\r\n\tCurvePath.call( this );\r\n\r\n\tthis.type = 'Path';\r\n\r\n\tthis.currentPoint = new Vector2();\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.setFromPoints( points );\r\n\r\n\t}\r\n\r\n}\r\n\r\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n\tconstructor: Path,\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\r\n\r\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tconst curve = new QuadraticBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCPx, aCPy ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tconst curve = new CubicBezierCurve(\r\n\t\t\tthis.currentPoint.clone(),\r\n\t\t\tnew Vector2( aCP1x, aCP1y ),\r\n\t\t\tnew Vector2( aCP2x, aCP2y ),\r\n\t\t\tnew Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.set( aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\r\n\r\n\t\tconst curve = new SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst x0 = this.currentPoint.x;\r\n\t\tconst y0 = this.currentPoint.y;\r\n\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t\tif ( this.curves.length > 0 ) {\r\n\r\n\t\t\t// if a previous curve is present, attempt to join\r\n\t\t\tconst firstPoint = curve.getPoint( 0 );\r\n\r\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\r\n\r\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tconst lastPoint = curve.getPoint( 1 );\r\n\t\tthis.currentPoint.copy( lastPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tCurvePath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.currentPoint.copy( source.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\r\n\r\n\t\tdata.currentPoint = this.currentPoint.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tCurvePath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.currentPoint.fromArray( json.currentPoint );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Shape( points ) {\r\n\r\n\tPath.call( this, points );\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\tthis.type = 'Shape';\r\n\r\n\tthis.holes = [];\r\n\r\n}\r\n\r\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\r\n\r\n\tconstructor: Shape,\r\n\r\n\tgetPointsHoles: function ( divisions ) {\r\n\r\n\t\tconst holesPts = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t\t}\r\n\r\n\t\treturn holesPts;\r\n\r\n\t},\r\n\r\n\t// get points of shape and holes (keypoints based on segments parameter)\r\n\r\n\textractPoints: function ( divisions ) {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tshape: this.getPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tPath.prototype.copy.call( this, source );\r\n\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = source.holes[ i ];\r\n\r\n\t\t\tthis.holes.push( hole.clone() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = Path.prototype.toJSON.call( this );\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = this.holes[ i ];\r\n\t\t\tdata.holes.push( hole.toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tPath.prototype.fromJSON.call( this, json );\r\n\r\n\t\tthis.uuid = json.uuid;\r\n\t\tthis.holes = [];\r\n\r\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst hole = json.holes[ i ];\r\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Light( color, intensity ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n}\r\n\r\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Light,\r\n\r\n\tisLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.intensity = source.intensity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\r\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\r\n\r\n\tLight.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new Color( groundColor );\r\n\r\n}\r\n\r\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: HemisphereLight,\r\n\r\n\tisHemisphereLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightShadow( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.normalBias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.mapPass = null;\r\n\tthis.matrix = new Matrix4();\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis._frustum = new Frustum();\r\n\tthis._frameExtents = new Vector2( 1, 1 );\r\n\r\n\tthis._viewportCount = 1;\r\n\r\n\tthis._viewports = [\r\n\r\n\t\tnew Vector4( 0, 0, 1, 1 )\r\n\r\n\t];\r\n\r\n}\r\n\r\nObject.assign( LightShadow.prototype, {\r\n\r\n\t_projScreenMatrix: new Matrix4(),\r\n\r\n\t_lightPositionWorld: new Vector3(),\r\n\r\n\t_lookTarget: new Vector3(),\r\n\r\n\tgetViewportCount: function () {\r\n\r\n\t\treturn this._viewportCount;\r\n\r\n\t},\r\n\r\n\tgetFrustum: function () {\r\n\r\n\t\treturn this._frustum;\r\n\r\n\t},\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst shadowCamera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tshadowCamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\tshadowCamera.lookAt( lookTarget );\r\n\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t\tshadowMatrix.set(\r\n\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t);\r\n\r\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t},\r\n\r\n\tgetViewport: function ( viewportIndex ) {\r\n\r\n\t\treturn this._viewports[ viewportIndex ];\r\n\r\n\t},\r\n\r\n\tgetFrameExtents: function () {\r\n\r\n\t\treturn this._frameExtents;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst object = {};\r\n\r\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\r\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\r\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\r\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\r\n\r\n\t\tobject.camera = this.camera.toJSON( false ).object;\r\n\t\tdelete object.camera.matrix;\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n}\r\n\r\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: SpotLightShadow,\r\n\r\n\tisSpotLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle;\r\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\r\n\t\tconst far = light.distance || camera.far;\r\n\r\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n\t\t\tcamera.fov = fov;\r\n\t\t\tcamera.aspect = aspect;\r\n\t\t\tcamera.far = far;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / Math.PI;\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new SpotLightShadow();\r\n\r\n}\r\n\r\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: SpotLight,\r\n\r\n\tisSpotLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.penumbra = source.penumbra;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLightShadow() {\r\n\r\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n\tthis._frameExtents = new Vector2( 4, 2 );\r\n\r\n\tthis._viewportCount = 6;\r\n\r\n\tthis._viewports = [\r\n\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t// following orientation:\r\n\t\t//\r\n\t\t//  xzXZ\r\n\t\t//   y Y\r\n\t\t//\r\n\t\t// X - Positive x direction\r\n\t\t// x - Negative x direction\r\n\t\t// Y - Positive y direction\r\n\t\t// y - Negative y direction\r\n\t\t// Z - Positive z direction\r\n\t\t// z - Negative z direction\r\n\r\n\t\t// positive X\r\n\t\tnew Vector4( 2, 1, 1, 1 ),\r\n\t\t// negative X\r\n\t\tnew Vector4( 0, 1, 1, 1 ),\r\n\t\t// positive Z\r\n\t\tnew Vector4( 3, 1, 1, 1 ),\r\n\t\t// negative Z\r\n\t\tnew Vector4( 1, 1, 1, 1 ),\r\n\t\t// positive Y\r\n\t\tnew Vector4( 3, 0, 1, 1 ),\r\n\t\t// negative Y\r\n\t\tnew Vector4( 1, 0, 1, 1 )\r\n\t];\r\n\r\n\tthis._cubeDirections = [\r\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\r\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tthis._cubeUps = [\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\r\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n}\r\n\r\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: PointLightShadow,\r\n\r\n\tisPointLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light, viewportIndex ) {\r\n\r\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\r\n\r\n\t\tconst camera = this.camera,\r\n\t\t\tshadowMatrix = this.matrix,\r\n\t\t\tlightPositionWorld = this._lightPositionWorld,\r\n\t\t\tlookTarget = this._lookTarget,\r\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\r\n\r\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\tcamera.position.copy( lightPositionWorld );\r\n\r\n\t\tlookTarget.copy( camera.position );\r\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\r\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\r\n\t\tcamera.lookAt( lookTarget );\r\n\t\tcamera.updateMatrixWorld();\r\n\r\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\r\n\r\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PointLight( color, intensity, distance, decay ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new PointLightShadow();\r\n\r\n}\r\n\r\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: PointLight,\r\n\r\n\tisPointLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\r\n\r\n\tCamera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\tthis.view = null;\r\n\r\n\tthis.left = ( left !== undefined ) ? left : - 1;\r\n\tthis.right = ( right !== undefined ) ? right : 1;\r\n\tthis.top = ( top !== undefined ) ? top : 1;\r\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n}\r\n\r\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n\tconstructor: OrthographicCamera,\r\n\r\n\tisOrthographicCamera: true,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tCamera.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\r\n\t\tthis.zoom = source.zoom;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tif ( this.view === null ) {\r\n\r\n\t\t\tthis.view = {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tfullWidth: 1,\r\n\t\t\t\tfullHeight: 1,\r\n\t\t\t\toffsetX: 0,\r\n\t\t\t\toffsetY: 0,\r\n\t\t\t\twidth: 1,\r\n\t\t\t\theight: 1\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tthis.view.enabled = true;\r\n\t\tthis.view.fullWidth = fullWidth;\r\n\t\tthis.view.fullHeight = fullHeight;\r\n\t\tthis.view.offsetX = x;\r\n\t\tthis.view.offsetY = y;\r\n\t\tthis.view.width = width;\r\n\t\tthis.view.height = height;\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function () {\r\n\r\n\t\tif ( this.view !== null ) {\r\n\r\n\t\t\tthis.view.enabled = false;\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tconst cx = ( this.right + this.left ) / 2;\r\n\t\tconst cy = ( this.top + this.bottom ) / 2;\r\n\r\n\t\tlet left = cx - dx;\r\n\t\tlet right = cx + dx;\r\n\t\tlet top = cy + dy;\r\n\t\tlet bottom = cy - dy;\r\n\r\n\t\tif ( this.view !== null && this.view.enabled ) {\r\n\r\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\r\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\r\n\r\n\t\t\tleft += scaleW * this.view.offsetX;\r\n\t\t\tright = left + scaleW * this.view.width;\r\n\t\t\ttop -= scaleH * this.view.offsetY;\r\n\t\t\tbottom = top - scaleH * this.view.height;\r\n\r\n\t\t}\r\n\r\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\r\n\r\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLightShadow() {\r\n\r\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n}\r\n\r\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n\tconstructor: DirectionalLightShadow,\r\n\r\n\tisDirectionalLightShadow: true,\r\n\r\n\tupdateMatrices: function ( light ) {\r\n\r\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction DirectionalLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.copy( Object3D.DefaultUp );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new Object3D();\r\n\r\n\tthis.shadow = new DirectionalLightShadow();\r\n\r\n}\r\n\r\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: DirectionalLight,\r\n\r\n\tisDirectionalLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLight( color, intensity ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n}\r\n\r\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: AmbientLight,\r\n\r\n\tisAmbientLight: true\r\n\r\n} );\r\n\r\nfunction RectAreaLight( color, intensity, width, height ) {\r\n\r\n\tLight.call( this, color, intensity );\r\n\r\n\tthis.type = 'RectAreaLight';\r\n\r\n\tthis.width = ( width !== undefined ) ? width : 10;\r\n\tthis.height = ( height !== undefined ) ? height : 10;\r\n\r\n}\r\n\r\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: RectAreaLight,\r\n\r\n\tisRectAreaLight: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.width = this.width;\r\n\t\tdata.object.height = this.height;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Primary reference:\r\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n *\r\n * Secondary reference:\r\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\r\n */\r\n\r\n// 3-band SH defined by 9 coefficients\r\n\r\nfunction SphericalHarmonics3() {\r\n\r\n\tthis.coefficients = [];\r\n\r\n\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\tthis.coefficients.push( new Vector3() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( SphericalHarmonics3.prototype, {\r\n\r\n\tisSphericalHarmonics3: true,\r\n\r\n\tset: function ( coefficients ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tzero: function () {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// get the radiance in the direction of the normal\r\n\t// target is a Vector3\r\n\tgetAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\r\n\t// target is a Vector3\r\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\r\n\tgetIrradianceAt: function ( normal, target ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\tconst coeff = this.coefficients;\r\n\r\n\t\t// band 0\r\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\r\n\r\n\t\t// band 1\r\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\r\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\r\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\r\n\r\n\t\t// band 2\r\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\r\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\r\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\r\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\r\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\r\n\r\n\t\treturn target;\r\n\r\n\t},\r\n\r\n\tadd: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledSH: function ( sh, s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( s ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( sh, alpha ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sh ) {\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcopy: function ( sh ) {\r\n\r\n\t\treturn this.set( sh.coefficients );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tconst coefficients = this.coefficients;\r\n\r\n\t\tfor ( let i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( SphericalHarmonics3, {\r\n\r\n\t// evaluate the basis functions\r\n\t// shBasis is an Array[ 9 ]\r\n\tgetBasisAt: function ( normal, shBasis ) {\r\n\r\n\t\t// normal is assumed to be unit length\r\n\r\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\r\n\r\n\t\t// band 0\r\n\t\tshBasis[ 0 ] = 0.282095;\r\n\r\n\t\t// band 1\r\n\t\tshBasis[ 1 ] = 0.488603 * y;\r\n\t\tshBasis[ 2 ] = 0.488603 * z;\r\n\t\tshBasis[ 3 ] = 0.488603 * x;\r\n\r\n\t\t// band 2\r\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\r\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\r\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\r\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\r\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction LightProbe( sh, intensity ) {\r\n\r\n\tLight.call( this, undefined, intensity );\r\n\r\n\tthis.type = 'LightProbe';\r\n\r\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\r\n\r\n}\r\n\r\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n\tconstructor: LightProbe,\r\n\r\n\tisLightProbe: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tLight.prototype.copy.call( this, source );\r\n\r\n\t\tthis.sh.copy( source.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromJSON: function ( json ) {\r\n\r\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\r\n\t\tthis.sh.fromArray( json.sh );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.sh = this.sh.toArray();\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction MaterialLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.textures = {};\r\n\r\n}\r\n\r\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst textures = this.textures;\r\n\r\n\t\tfunction getTexture( name ) {\r\n\r\n\t\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn textures[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tconst material = new Materials[ json.type ]();\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\r\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\r\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\r\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\r\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\r\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\r\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\r\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\r\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\r\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\r\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\r\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\r\n\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\r\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\r\n\r\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\r\n\r\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\r\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\r\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\r\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\r\n\r\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\r\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\r\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\r\n\r\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\r\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\r\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\r\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\r\n\r\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\r\n\r\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\r\n\r\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\r\n\r\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\r\n\r\n\t\tif ( json.vertexColors !== undefined ) {\r\n\r\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\r\n\r\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Shader Material\r\n\r\n\t\tif ( json.uniforms !== undefined ) {\r\n\r\n\t\t\tfor ( const name in json.uniforms ) {\r\n\r\n\t\t\t\tconst uniform = json.uniforms[ name ];\r\n\r\n\t\t\t\tmaterial.uniforms[ name ] = {};\r\n\r\n\t\t\t\tswitch ( uniform.type ) {\r\n\r\n\t\t\t\t\tcase 't':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v2':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'm3':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\r\n\r\n\t\t\t\t\tcase 'm4':\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\r\n\t\tif ( json.extensions !== undefined ) {\r\n\r\n\t\t\tfor ( const key in json.extensions ) {\r\n\r\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Deprecated\r\n\r\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\r\n\r\n\t\t// for PointsMaterial\r\n\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\r\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\r\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tlet normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\r\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\r\n\r\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\r\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\r\n\r\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\r\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\r\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\r\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\r\n\r\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\r\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\r\n\r\n\t\treturn material;\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst LoaderUtils = {\r\n\r\n\tdecodeText: function ( array ) {\r\n\r\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n\t\t\treturn new TextDecoder().decode( array );\r\n\r\n\t\t}\r\n\r\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n\t\tlet s = '';\r\n\r\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t// Implicitly assumes little-endian.\r\n\t\t\ts += String.fromCharCode( array[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// merges multi-byte utf-8 characters.\r\n\r\n\t\t\treturn decodeURIComponent( escape( s ) );\r\n\r\n\t\t} catch ( e ) { // see #16358\r\n\r\n\t\t\treturn s;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconst index = url.lastIndexOf( '/' );\r\n\r\n\t\tif ( index === - 1 ) return './';\r\n\r\n\t\treturn url.substr( 0, index + 1 );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction InstancedBufferGeometry() {\r\n\r\n\tBufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.instanceCount = Infinity;\r\n\r\n}\r\n\r\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\r\n\r\n\tconstructor: InstancedBufferGeometry,\r\n\r\n\tisInstancedBufferGeometry: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferGeometry.prototype.copy.call( this, source );\r\n\r\n\t\tthis.instanceCount = source.instanceCount;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n\t\tdata.instanceCount = this.instanceCount;\r\n\r\n\t\tdata.isInstancedBufferGeometry = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\r\n\r\n\tif ( typeof ( normalized ) === 'number' ) {\r\n\r\n\t\tmeshPerAttribute = normalized;\r\n\r\n\t\tnormalized = false;\r\n\r\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\r\n\r\n\t}\r\n\r\n\tBufferAttribute.call( this, array, itemSize, normalized );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\r\n\r\n\tconstructor: InstancedBufferAttribute,\r\n\r\n\tisInstancedBufferAttribute: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tBufferAttribute.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ()\t{\r\n\r\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\r\n\r\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\tdata.isInstancedBufferAttribute = true;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction BufferGeometryLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tconst interleavedBufferMap = {};\r\n\t\tconst arrayBufferMap = {};\r\n\r\n\t\tfunction getInterleavedBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\r\n\r\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\r\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\r\n\r\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\r\n\r\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\r\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\r\n\t\t\tib.uuid = interleavedBuffer.uuid;\r\n\r\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\r\n\r\n\t\t\treturn ib;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getArrayBuffer( json, uuid ) {\r\n\r\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\r\n\r\n\t\t\tconst arrayBuffers = json.arrayBuffers;\r\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\r\n\r\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\r\n\r\n\t\t\tarrayBufferMap[ uuid ] = ab;\r\n\r\n\t\t\treturn ab;\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\r\n\r\n\t\tconst index = json.data.index;\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst attributes = json.data.attributes;\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attribute = attributes[ key ];\r\n\t\t\tlet bufferAttribute;\r\n\r\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\r\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tconst morphAttributes = json.data.morphAttributes;\r\n\r\n\t\tif ( morphAttributes ) {\r\n\r\n\t\t\tfor ( const key in morphAttributes ) {\r\n\r\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tconst attribute = attributeArray[ i ];\r\n\t\t\t\t\tlet bufferAttribute;\r\n\r\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\r\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\r\n\t\t\t\t\tarray.push( bufferAttribute );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\r\n\r\n\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\tgeometry.morphTargetsRelative = true;\r\n\r\n\t\t}\r\n\r\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tconst center = new Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.name ) geometry.name = json.name;\r\n\t\tif ( json.userData ) geometry.userData = json.userData;\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TYPED_ARRAYS = {\r\n\tInt8Array: Int8Array,\r\n\tUint8Array: Uint8Array,\r\n\t// Workaround for IE11 pre KB2929437. See #11440\r\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\r\n\tInt16Array: Int16Array,\r\n\tUint16Array: Uint16Array,\r\n\tInt32Array: Int32Array,\r\n\tUint32Array: Uint32Array,\r\n\tFloat32Array: Float32Array,\r\n\tFloat64Array: Float64Array\r\n};\r\n\r\nfunction ObjectLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\r\n\t\tthis.resourcePath = this.resourcePath || path;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json = null;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\tif ( onError !== undefined ) onError( error );\r\n\r\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.parse( json, onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tconst shapes = this.parseShape( json.shapes );\r\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\r\n\r\n\t\tconst images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tconst textures = this.parseTextures( json.textures, images );\r\n\t\tconst materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tconst object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseShape: function ( json ) {\r\n\r\n\t\tconst shapes = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\r\n\r\n\t\t\t\tshapes[ shape.uuid ] = shape;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json, shapes ) {\r\n\r\n\t\tconst geometries = {};\r\n\t\tlet geometryShapes;\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tlet geometry;\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ConeGeometry':\r\n\t\t\t\t\tcase 'ConeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TubeGeometry':\r\n\t\t\t\t\tcase 'TubeBufferGeometry':\r\n\r\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\r\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.closed\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\t\t\t\t\tcase 'LatheBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'PolyhedronGeometry':\r\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tdata.vertices,\r\n\t\t\t\t\t\t\tdata.indices,\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.details\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ShapeGeometry':\r\n\t\t\t\t\tcase 'ShapeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.curveSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\t\tcase 'ExtrudeGeometry':\r\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometryShapes = [];\r\n\r\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\r\n\r\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst extrudePath = data.options.extrudePath;\r\n\r\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\r\n\t\t\t\t\t\t\tgeometryShapes,\r\n\t\t\t\t\t\t\tdata.options\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\t\t\t\t\tcase 'InstancedBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tconst cache = {}; // MultiMaterial\r\n\t\tconst materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tconst loader = new MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\r\n\r\n\t\t\t\t\t// Deprecated\r\n\r\n\t\t\t\t\tconst array = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst material = data.materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = array;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tconst animations = [];\r\n\r\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tconst data = json[ i ];\r\n\r\n\t\t\tconst clip = AnimationClip.parse( data );\r\n\r\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tconst scope = this;\r\n\t\tconst images = {};\r\n\r\n\t\tlet loader;\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, undefined, function () {\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tconst manager = new LoadingManager( onLoad );\r\n\r\n\t\t\tloader = new ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tconst image = json[ i ];\r\n\t\t\t\tconst url = image.url;\r\n\r\n\t\t\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\t\t\t// load array of images e.g CubeTexture\r\n\r\n\t\t\t\t\timages[ image.uuid ] = [];\r\n\r\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tconst currentUrl = url[ j ];\r\n\r\n\t\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\r\n\r\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// load single image\r\n\r\n\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\r\n\r\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value, type ) {\r\n\r\n\t\t\tif ( typeof value === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn type[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tconst textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet texture;\r\n\r\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\r\n\r\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\r\n\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\r\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\r\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\r\n\r\n\t\t\t\tif ( data.wrap !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\r\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\r\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\r\n\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\r\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\r\n\r\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\r\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function ( data, geometries, materials ) {\r\n\r\n\t\tlet object;\r\n\r\n\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn geometries[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\tif ( Array.isArray( name ) ) {\r\n\r\n\t\t\t\tconst array = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tconst uuid = name[ i ];\r\n\r\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tarray.push( materials[ uuid ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn materials[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tlet geometry, material;\r\n\r\n\t\tswitch ( data.type ) {\r\n\r\n\t\t\tcase 'Scene':\r\n\r\n\t\t\t\tobject = new Scene();\r\n\r\n\t\t\t\tif ( data.background !== undefined ) {\r\n\r\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\r\n\r\n\t\t\t\t\t\tobject.background = new Color( data.background );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( data.fog !== undefined ) {\r\n\r\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\r\n\r\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\r\n\r\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'RectAreaLight':\r\n\r\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LightProbe':\r\n\r\n\t\t\t\tobject = new LightProbe().fromJSON( data );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SkinnedMesh':\r\n\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\r\n\r\n\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\r\n\t\t\t\tobject = new Mesh( geometry, material );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'InstancedMesh':\r\n\r\n\t\t\t\tgeometry = getGeometry( data.geometry );\r\n\t\t\t\tmaterial = getMaterial( data.material );\r\n\t\t\t\tconst count = data.count;\r\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\r\n\r\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\r\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LOD':\r\n\r\n\t\t\t\tobject = new LOD();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Line':\r\n\r\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineLoop':\r\n\r\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'LineSegments':\r\n\r\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointCloud':\r\n\t\t\tcase 'Points':\r\n\r\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Group':\r\n\r\n\t\t\t\tobject = new Group();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tobject = new Object3D();\r\n\r\n\t\t}\r\n\r\n\t\tobject.uuid = data.uuid;\r\n\r\n\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\r\n\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\tobject.matrix.fromArray( data.matrix );\r\n\r\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\r\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\r\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\tif ( data.shadow ) {\r\n\r\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\r\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\r\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\r\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\r\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\r\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\r\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\r\n\r\n\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\tconst children = data.children;\r\n\r\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\r\n\r\n\t\t\tconst levels = data.levels;\r\n\r\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\tconst level = levels[ l ];\r\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst TEXTURE_MAPPING = {\r\n\tUVMapping: UVMapping,\r\n\tCubeReflectionMapping: CubeReflectionMapping,\r\n\tCubeRefractionMapping: CubeRefractionMapping,\r\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\r\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\r\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\r\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\r\n};\r\n\r\nconst TEXTURE_WRAPPING = {\r\n\tRepeatWrapping: RepeatWrapping,\r\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\r\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\r\n};\r\n\r\nconst TEXTURE_FILTER = {\r\n\tNearestFilter: NearestFilter,\r\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\r\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\r\n\tLinearFilter: LinearFilter,\r\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\r\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\r\n};\r\n\r\nfunction ImageBitmapLoader( manager ) {\r\n\r\n\tif ( typeof createImageBitmap === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\r\n\r\n\t}\r\n\r\n\tif ( typeof fetch === 'undefined' ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\r\n\r\n\t}\r\n\r\n\tLoader.call( this, manager );\r\n\r\n\tthis.options = { premultiplyAlpha: 'none' };\r\n\r\n}\r\n\r\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: ImageBitmapLoader,\r\n\r\n\tisImageBitmapLoader: true,\r\n\r\n\tsetOptions: function setOptions( options ) {\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( url === undefined ) url = '';\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tfetch( url ).then( function ( res ) {\r\n\r\n\t\t\treturn res.blob();\r\n\r\n\t\t} ).then( function ( blob ) {\r\n\r\n\t\t\treturn createImageBitmap( blob, scope.options );\r\n\r\n\t\t} ).then( function ( imageBitmap ) {\r\n\r\n\t\t\tCache.add( url, imageBitmap );\r\n\r\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} ).catch( function ( e ) {\r\n\r\n\t\t\tif ( onError ) onError( e );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t} );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ShapePath() {\r\n\r\n\tthis.type = 'ShapePath';\r\n\r\n\tthis.color = new Color();\r\n\r\n\tthis.subPaths = [];\r\n\tthis.currentPath = null;\r\n\r\n}\r\n\r\nObject.assign( ShapePath.prototype, {\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath = new Path();\r\n\t\tthis.subPaths.push( this.currentPath );\r\n\t\tthis.currentPath.moveTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tthis.currentPath.lineTo( x, y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts ) {\r\n\r\n\t\tthis.currentPath.splineThru( pts );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoShapes: function ( isCCW, noHoles ) {\r\n\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\t\tconst shapes = [];\r\n\r\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\t\tconst tmpShape = new Shape();\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\t\tconst polyLen = inPolygon.length;\r\n\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tlet inside = false;\r\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\r\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn\tinside;\r\n\r\n\t\t}\r\n\r\n\t\tconst isClockWise = ShapeUtils.isClockWise;\r\n\r\n\t\tconst subPaths = this.subPaths;\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tlet solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\t\tif ( subPaths.length === 1 ) {\r\n\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new Shape();\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\t\tconst betterShapeHoles = [];\r\n\t\tconst newShapes = [];\r\n\t\tlet newShapeHoles = [];\r\n\t\tlet mainIdx = 0;\r\n\t\tlet tmpPoints;\r\n\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\t\tif ( solid ) {\r\n\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t\t//console.log('cw', i);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t\t//console.log('ccw', i);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tif ( newShapes.length > 1 ) {\r\n\r\n\t\t\tlet ambiguous = false;\r\n\t\t\tconst toChange = [];\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\tconst ho = sho[ hIdx ];\r\n\t\t\t\t\tlet hole_unassigned = true;\r\n\r\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet tmpHoles;\r\n\r\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Font( data ) {\r\n\r\n\tthis.type = 'Font';\r\n\r\n\tthis.data = data;\r\n\r\n}\r\n\r\nObject.assign( Font.prototype, {\r\n\r\n\tisFont: true,\r\n\r\n\tgenerateShapes: function ( text, size ) {\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\r\n\t\tconst shapes = [];\r\n\t\tconst paths = createPaths( text, size, this.data );\r\n\r\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction createPaths( text, size, data ) {\r\n\r\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\r\n\tconst scale = size / data.resolution;\r\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\r\n\r\n\tconst paths = [];\r\n\r\n\tlet offsetX = 0, offsetY = 0;\r\n\r\n\tfor ( let i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\tconst char = chars[ i ];\r\n\r\n\t\tif ( char === '\\n' ) {\r\n\r\n\t\t\toffsetX = 0;\r\n\t\t\toffsetY -= line_height;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\r\n\t\t\toffsetX += ret.offsetX;\r\n\t\t\tpaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn paths;\r\n\r\n}\r\n\r\nfunction createPath( char, scale, offsetX, offsetY, data ) {\r\n\r\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\r\n\r\n\tif ( ! glyph ) {\r\n\r\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tconst path = new ShapePath();\r\n\r\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n\r\n\tif ( glyph.o ) {\r\n\r\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\tconst action = outline[ i ++ ];\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { offsetX: glyph.ha * scale, path: path };\r\n\r\n}\r\n\r\nfunction FontLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setRequestHeader( this.requestHeader );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tlet json;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst font = scope.parse( json );\r\n\r\n\t\t\tif ( onLoad ) onLoad( font );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\treturn new Font( json );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nlet _context;\r\n\r\nconst AudioContext = {\r\n\r\n\tgetContext: function () {\r\n\r\n\t\tif ( _context === undefined ) {\r\n\r\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\t\t}\r\n\r\n\t\treturn _context;\r\n\r\n\t},\r\n\r\n\tsetContext: function ( value ) {\r\n\r\n\t\t_context = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction AudioLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: AudioLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst loader = new FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\r\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\r\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\r\n\r\n\t\t\t\tconst context = AudioContext.getContext();\r\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\r\n\r\n\t\t\t\t\tonLoad( audioBuffer );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( skyColor );\r\n\tconst color2 = new Color().set( groundColor );\r\n\r\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\r\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\r\n\r\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\r\n\tconst c0 = Math.sqrt( Math.PI );\r\n\tconst c1 = c0 * Math.sqrt( 0.75 );\r\n\r\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\r\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\r\n\r\n}\r\n\r\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: HemisphereLightProbe,\r\n\r\n\tisHemisphereLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying colors not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AmbientLightProbe( color, intensity ) {\r\n\r\n\tLightProbe.call( this, undefined, intensity );\r\n\r\n\tconst color1 = new Color().set( color );\r\n\r\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\r\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\r\n\r\n}\r\n\r\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\r\n\r\n\tconstructor: AmbientLightProbe,\r\n\r\n\tisAmbientLightProbe: true,\r\n\r\n\tcopy: function ( source ) { // modifying color not currently supported\r\n\r\n\t\tLightProbe.prototype.copy.call( this, source );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\r\n\r\n\t\t// data.sh = this.sh.toArray(); // todo\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _eyeRight = new Matrix4();\r\nconst _eyeLeft = new Matrix4();\r\n\r\nfunction StereoCamera() {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.eyeSep = 0.064;\r\n\r\n\tthis.cameraL = new PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n\tthis._cache = {\r\n\t\tfocus: null,\r\n\t\tfov: null,\r\n\t\taspect: null,\r\n\t\tnear: null,\r\n\t\tfar: null,\r\n\t\tzoom: null,\r\n\t\teyeSep: null\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( StereoCamera.prototype, {\r\n\r\n\tupdate: function ( camera ) {\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\r\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\r\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\tcache.focus = camera.focus;\r\n\t\t\tcache.fov = camera.fov;\r\n\t\t\tcache.aspect = camera.aspect * this.aspect;\r\n\t\t\tcache.near = camera.near;\r\n\t\t\tcache.far = camera.far;\r\n\t\t\tcache.zoom = camera.zoom;\r\n\t\t\tcache.eyeSep = this.eyeSep;\r\n\r\n\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\r\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\r\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\r\n\t\t\tlet xmin, xmax;\r\n\r\n\t\t\t// translate xOffset\r\n\r\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\r\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\r\n\r\n\t\t\t// for left eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t// for right eye\r\n\r\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\r\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\r\n\r\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\r\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\r\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Clock( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n}\r\n\r\nObject.assign( Clock.prototype, {\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.elapsedTime = 0;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\t\tthis.autoStart = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tlet diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tconst newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\r\n\r\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$2 = new Vector3();\r\nconst _quaternion$3 = new Quaternion();\r\nconst _scale$1 = new Vector3();\r\nconst _orientation = new Vector3();\r\n\r\nfunction AudioListener() {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = AudioContext.getContext();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n\tthis.timeDelta = 0;\r\n\r\n\t// private\r\n\r\n\tthis._clock = new Clock();\r\n\r\n}\r\n\r\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: AudioListener,\r\n\r\n\tgetInput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tremoveFilter: function ( ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\t\t\tthis.gain.connect( this.context.destination );\r\n\t\t\tthis.filter = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.filter;\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( value ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t\t}\r\n\r\n\t\tthis.filter = value;\r\n\t\tthis.gain.connect( this.filter );\r\n\t\tthis.filter.connect( this.context.destination );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMasterVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetMasterVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tconst listener = this.context.listener;\r\n\t\tconst up = this.up;\r\n\r\n\t\tthis.timeDelta = this._clock.getDelta();\r\n\r\n\t\tthis.matrixWorld.decompose( _position$2, _quaternion$3, _scale$1 );\r\n\r\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion$3 );\r\n\r\n\t\tif ( listener.positionX ) {\r\n\r\n\t\t\t// code path for Chrome (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\r\n\r\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$2.x, endTime );\r\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$2.y, endTime );\r\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$2.z, endTime );\r\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\r\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\r\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\r\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\r\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\r\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlistener.setPosition( _position$2.x, _position$2.y, _position$2.z );\r\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Audio( listener ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.listener = listener;\r\n\tthis.context = listener.context;\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.buffer = null;\r\n\tthis.detune = 0;\r\n\tthis.loop = false;\r\n\tthis.loopStart = 0;\r\n\tthis.loopEnd = 0;\r\n\tthis.offset = 0;\r\n\tthis.duration = undefined;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis._startedAt = 0;\r\n\tthis._progress = 0;\r\n\r\n\tthis.filters = [];\r\n\r\n}\r\n\r\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: Audio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tsetNodeSource: function ( audioNode ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'audioNode';\r\n\t\tthis.source = audioNode;\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaElementSource: function ( mediaElement ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaNode';\r\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetMediaStreamSource: function ( mediaStream ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'mediaStreamNode';\r\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetBuffer: function ( audioBuffer ) {\r\n\r\n\t\tthis.buffer = audioBuffer;\r\n\t\tthis.sourceType = 'buffer';\r\n\r\n\t\tif ( this.autoplay ) this.play();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tplay: function ( delay ) {\r\n\r\n\t\tif ( delay === undefined ) delay = 0;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._startedAt = this.context.currentTime + delay;\r\n\r\n\t\tconst source = this.context.createBufferSource();\r\n\t\tsource.buffer = this.buffer;\r\n\t\tsource.loop = this.loop;\r\n\t\tsource.loopStart = this.loopStart;\r\n\t\tsource.loopEnd = this.loopEnd;\r\n\t\tsource.onended = this.onEnded.bind( this );\r\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.source = source;\r\n\r\n\t\tthis.setDetune( this.detune );\r\n\t\tthis.setPlaybackRate( this.playbackRate );\r\n\r\n\t\treturn this.connect();\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\t// update current progress\r\n\r\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\r\n\r\n\t\t\tif ( this.loop === true ) {\r\n\r\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\r\n\r\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.source.stop();\r\n\t\t\tthis.source.onended = null;\r\n\r\n\t\t\tthis.isPlaying = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._progress = 0;\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.source.onended = null;\r\n\t\tthis.isPlaying = false;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.connect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilters: function () {\r\n\r\n\t\treturn this.filters;\r\n\r\n\t},\r\n\r\n\tsetFilters: function ( value ) {\r\n\r\n\t\tif ( ! value ) value = [];\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filters = value;\r\n\t\t\tthis.connect();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.filters = value;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDetune: function ( value ) {\r\n\r\n\t\tthis.detune = value;\r\n\r\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDetune: function () {\r\n\r\n\t\treturn this.detune;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.getFilters()[ 0 ];\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( filter ) {\r\n\r\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\r\n\r\n\t},\r\n\r\n\tsetPlaybackRate: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.playbackRate = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetPlaybackRate: function () {\r\n\r\n\t\treturn this.playbackRate;\r\n\r\n\t},\r\n\r\n\tonEnded: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tgetLoop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.loop;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.loop = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.loop = this.loop;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopStart: function ( value ) {\r\n\r\n\t\tthis.loopStart = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoopEnd: function ( value ) {\r\n\r\n\t\tthis.loopEnd = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _position$3 = new Vector3();\r\nconst _quaternion$4 = new Quaternion();\r\nconst _scale$2 = new Vector3();\r\nconst _orientation$1 = new Vector3();\r\n\r\nfunction PositionalAudio( listener ) {\r\n\r\n\tAudio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.panningModel = 'HRTF';\r\n\tthis.panner.connect( this.gain );\r\n\r\n}\r\n\r\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\r\n\r\n\tconstructor: PositionalAudio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.panner;\r\n\r\n\t},\r\n\r\n\tgetRefDistance: function () {\r\n\r\n\t\treturn this.panner.refDistance;\r\n\r\n\t},\r\n\r\n\tsetRefDistance: function ( value ) {\r\n\r\n\t\tthis.panner.refDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetRolloffFactor: function () {\r\n\r\n\t\treturn this.panner.rolloffFactor;\r\n\r\n\t},\r\n\r\n\tsetRolloffFactor: function ( value ) {\r\n\r\n\t\tthis.panner.rolloffFactor = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetDistanceModel: function () {\r\n\r\n\t\treturn this.panner.distanceModel;\r\n\r\n\t},\r\n\r\n\tsetDistanceModel: function ( value ) {\r\n\r\n\t\tthis.panner.distanceModel = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxDistance: function () {\r\n\r\n\t\treturn this.panner.maxDistance;\r\n\r\n\t},\r\n\r\n\tsetMaxDistance: function ( value ) {\r\n\r\n\t\tthis.panner.maxDistance = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetDirectionalCone: function ( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\r\n\r\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\r\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\r\n\t\tthis.panner.coneOuterGain = coneOuterGain;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\r\n\r\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$4, _scale$2 );\r\n\r\n\t\t_orientation$1.set( 0, 0, 1 ).applyQuaternion( _quaternion$4 );\r\n\r\n\t\tconst panner = this.panner;\r\n\r\n\t\tif ( panner.positionX ) {\r\n\r\n\t\t\t// code path for Chrome and Firefox (see #14393)\r\n\r\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\r\n\r\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position$3.x, endTime );\r\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position$3.y, endTime );\r\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position$3.z, endTime );\r\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation$1.x, endTime );\r\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation$1.y, endTime );\r\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation$1.z, endTime );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpanner.setPosition( _position$3.x, _position$3.y, _position$3.z );\r\n\t\t\tpanner.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AudioAnalyser( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n}\r\n\r\nObject.assign( AudioAnalyser.prototype, {\r\n\r\n\tgetFrequencyData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\r\n\t\treturn this.data;\r\n\r\n\t},\r\n\r\n\tgetAverageFrequency: function () {\r\n\r\n\t\tlet value = 0;\r\n\t\tconst data = this.getFrequencyData();\r\n\r\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\tvalue += data[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn value / data.length;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction PropertyMixer( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tlet mixFunction,\r\n\t\tmixFunctionAdditive,\r\n\t\tsetIdentity;\r\n\r\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\t//\r\n\t// 'add' is used for additive cumulative results\r\n\t//\r\n\t// 'work' is optional and is only present for quaternion types. It is used\r\n\t// to store intermediate quaternion multiplication results\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\r\n\t\t\tmixFunction = this._slerp;\r\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\r\n\t\t\tthis._workIndex = 5;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\t\t\tmixFunction = this._select;\r\n\r\n\t\t\t// Use the regular mix function and for additive on these types,\r\n\t\t\t// additive is not relevant for non-numeric types\r\n\t\t\tmixFunctionAdditive = this._select;\r\n\r\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\r\n\r\n\t\t\tthis.buffer = new Array( valueSize * 5 );\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tmixFunction = this._lerp;\r\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\r\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\r\n\r\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\r\n\r\n\t}\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\r\n\tthis._setIdentity = setIdentity;\r\n\tthis._origIndex = 3;\r\n\tthis._addIndex = 4;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n}\r\n\r\nObject.assign( PropertyMixer.prototype, {\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function ( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride;\r\n\r\n\t\tlet currentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tconst mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// accumulate data in the 'incoming' region into 'add'\r\n\taccumulateAdditive: function ( weight ) {\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = stride * this._addIndex;\r\n\r\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\r\n\r\n\t\t\t// add = identity\r\n\r\n\t\t\tthis._setIdentity();\r\n\r\n\t\t}\r\n\r\n\t\t// add := add + incoming * weight\r\n\r\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\r\n\t\tthis.cumulativeWeightAdditive += weight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function ( accuIndex ) {\r\n\r\n\t\tconst stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tconst originalValueOffset = stride * this._origIndex;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tif ( weightAdditive > 0 ) {\r\n\r\n\t\t\t// accuN := accuN + additive accuN\r\n\r\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function () {\r\n\r\n\t\tconst binding = this.binding;\r\n\r\n\t\tconst buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * this._origIndex;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\t// Add to identity for additive\r\n\t\tthis._setIdentity();\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\t\tthis.cumulativeWeightAdditive = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function () {\r\n\r\n\t\tconst originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityNumeric: function () {\r\n\r\n\t\tconst startIndex = this._addIndex * this.valueSize;\r\n\t\tconst endIndex = startIndex + this.valueSize;\r\n\r\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityQuaternion: function () {\r\n\r\n\t\tthis._setAdditiveIdentityNumeric();\r\n\t\tthis.buffer[ this._addIndex * 4 + 3 ] = 1;\r\n\r\n\t},\r\n\r\n\t_setAdditiveIdentityOther: function () {\r\n\r\n\t\tconst startIndex = this._origIndex * this.valueSize;\r\n\t\tconst targetIndex = this._addIndex * this.valueSize;\r\n\r\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\r\n\r\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\r\n\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst workOffset = this._workIndex * stride;\r\n\r\n\t\t// Store result in intermediate buffer offset\r\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\r\n\r\n\t\t// Slerp to the intermediate result\r\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tconst s = 1 - t;\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tconst j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// Characters [].:/ are reserved for track binding syntax.\r\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\r\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\r\n\r\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\r\n// only latin characters, and the unicode \\p{L} is not yet supported. So\r\n// instead, we exclude reserved characters and match everything else.\r\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\r\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\r\n\r\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\r\n// be matched to parse the rest of the track name.\r\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\r\n\r\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\r\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\r\n\r\n// Object on target node, and accessor. May not contain reserved\r\n// characters. Accessor may contain any character except closing bracket.\r\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\r\n\r\n// Property and accessor. May not contain reserved characters. Accessor may\r\n// contain any non-bracket characters.\r\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\r\n\r\nconst _trackRe = new RegExp( ''\r\n\t+ '^'\r\n\t+ _directoryRe\r\n\t+ _nodeRe\r\n\t+ _objectRe\r\n\t+ _propertyRe\r\n\t+ '$'\r\n);\r\n\r\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\r\n\r\nfunction Composite( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n}\r\n\r\nObject.assign( Composite.prototype, {\r\n\r\n\tgetValue: function ( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function ( array, offset ) {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tconst bindings = this._bindings;\r\n\r\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\nfunction PropertyBinding( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n}\r\n\r\nObject.assign( PropertyBinding, {\r\n\r\n\tComposite: Composite,\r\n\r\n\tcreate: function ( root, path, parsedPath ) {\r\n\r\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\r\n\r\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Replaces spaces with underscores and removes unsupported characters from\r\n\t * node names, to ensure compatibility with parseTrackName().\r\n\t *\r\n\t * @param {string} name Node name to be sanitized.\r\n\t * @return {string}\r\n\t */\r\n\tsanitizeNodeName: function ( name ) {\r\n\r\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\r\n\r\n\t},\r\n\r\n\tparseTrackName: function ( trackName ) {\r\n\r\n\t\tconst matches = _trackRe.exec( trackName );\r\n\r\n\t\tif ( ! matches ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\tconst results = {\r\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\r\n\t\t\tnodeName: matches[ 2 ],\r\n\t\t\tobjectName: matches[ 3 ],\r\n\t\t\tobjectIndex: matches[ 4 ],\r\n\t\t\tpropertyName: matches[ 5 ], // required\r\n\t\t\tpropertyIndex: matches[ 6 ]\r\n\t\t};\r\n\r\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\r\n\r\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\r\n\r\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\r\n\r\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\r\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\r\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\r\n\t\t\t// include '.' characters).\r\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\r\n\r\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\r\n\t\t\t\tresults.objectName = objectName;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\r\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\r\n\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\r\n\t},\r\n\r\n\tfindNode: function ( root, nodeName ) {\r\n\r\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\t\treturn root;\r\n\r\n\t\t}\r\n\r\n\t\t// search into skeleton bones.\r\n\t\tif ( root.skeleton ) {\r\n\r\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\r\n\r\n\t\t\tif ( bone !== undefined ) {\r\n\r\n\t\t\t\treturn bone;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// search into node subtree.\r\n\t\tif ( root.children ) {\r\n\r\n\t\t\tconst searchNodeSubtree = function ( children ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\t\tconst childNode = children[ i ];\r\n\r\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\t\tif ( result ) return result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\t\tif ( subTreeNode ) {\r\n\r\n\t\t\t\treturn subTreeNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function () {},\r\n\t_setValue_unavailable: function () {},\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tconst source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tconst dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t],\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function () {\r\n\r\n\t\tlet targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n\t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( objectName ) {\r\n\r\n\t\t\tlet objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif ( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tconst nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( nodeProperty === undefined ) {\r\n\r\n\t\t\tconst nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\r\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tlet versioning = this.Versioning.None;\r\n\r\n\t\tthis.targetObject = targetObject;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tlet bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\r\n\r\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function () {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// DECLARE ALIAS AFTER assign prototype\r\nObject.assign( PropertyBinding.prototype, {\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\r\n\r\n} );\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n *  - Add objects you would otherwise pass as 'root' to the\r\n *    constructor or the .clipAction method of AnimationMixer.\r\n *\r\n *  - Instead pass this object as 'root'.\r\n *\r\n *  - You can also add and remove objects later when the mixer\r\n *    is running.\r\n *\r\n * Note:\r\n *\r\n *    Objects of this class appear as one object to the mixer,\r\n *    so cache control of the individual objects must be done\r\n *    on the group.\r\n *\r\n * Limitation:\r\n *\r\n *  - The animated properties must be compatible among the\r\n *    all objects in the group.\r\n *\r\n *  - A single property can either be controlled through a\r\n *    target group or directly, but not both.\r\n */\r\n\r\nfunction AnimationObjectGroup() {\r\n\r\n\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0; // threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tconst indices = {};\r\n\tthis._indicesByUUID = indices; // for bookkeeping\r\n\r\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = []; // inside: string\r\n\tthis._parsedPaths = []; // inside: { we don't care, here }\r\n\tthis._bindings = []; // inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\r\n\r\n\tconst scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() {\r\n\r\n\t\t\t\treturn scope._objects.length;\r\n\r\n\t\t\t},\r\n\t\t\tget inUse() {\r\n\r\n\t\t\t\treturn this.total - scope.nCachedObjects_;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tget bindingsPerObject() {\r\n\r\n\t\t\treturn scope._bindings.length;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nObject.assign( AnimationObjectGroup.prototype, {\r\n\r\n\tisAnimationObjectGroup: true,\r\n\r\n\tadd: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet knownObject = undefined,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid;\r\n\t\t\tlet index = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tknownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\r\n\r\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\r\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function () {\r\n\r\n\t\tconst objects = this._objects,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tlet nCachedObjects = this.nCachedObjects_,\r\n\t\t\tnObjects = objects.length;\r\n\r\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tconst lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function ( path, parsedPath ) {\r\n\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tlet indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tconst paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst object = objects[ i ];\r\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function ( path ) {\r\n\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tconst paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationAction( mixer, clip, localRoot, blendMode ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\tthis.blendMode = blendMode || clip.blendMode;\r\n\r\n\tconst tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tconst interpolantSettings = {\r\n\t\tendingStart: ZeroCurvatureEnding,\r\n\t\tendingEnd: ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tconst interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants; // bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null; // for the memory manager\r\n\tthis._byClipCacheIndex = null; // for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = LoopRepeat;\r\n\tthis._loopCount = - 1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; // no. of repetitions when looping\r\n\r\n\tthis.paused = false; // true -> zero effective time scale\r\n\tthis.enabled = true; // false -> zero effective weight\r\n\r\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\r\n\r\n}\r\n\r\nObject.assign( AnimationAction.prototype, {\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function () {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0; // restart clip\r\n\t\tthis._loopCount = - 1;// forget previous loops\r\n\t\tthis._startTime = null;// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function () {\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function () {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function ( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function ( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function () {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function ( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif ( warp ) {\r\n\r\n\t\t\tconst fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function () {\r\n\r\n\t\tlet weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the time scale stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function ( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function () {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function ( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function ( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function ( duration ) {\r\n\r\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tconst mixer = this._mixer,\r\n\t\t\tnow = mixer.time,\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tlet interpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function () {\r\n\r\n\t\tlet timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function () {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function () {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\r\n\r\n\t\t// called by the mixer\r\n\r\n\t\tif ( ! this.enabled ) {\r\n\r\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\r\n\r\n\t\t\tthis._updateWeight( time );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tconst clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tconst weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tconst interpolants = this._interpolants;\r\n\t\t\tconst propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tswitch ( this.blendMode ) {\r\n\r\n\t\t\t\tcase AdditiveAnimationBlendMode:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase NormalAnimationBlendMode:\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function ( time ) {\r\n\r\n\t\tlet weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tconst interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function ( time ) {\r\n\r\n\t\tlet timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tconst interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.paused = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function ( deltaTime ) {\r\n\r\n\t\tconst duration = this._clip.duration;\r\n\t\tconst loop = this.loop;\r\n\r\n\t\tlet time = this.time + deltaTime;\r\n\t\tlet loopCount = this._loopCount;\r\n\r\n\t\tconst pingPong = ( loop === LoopPingPong );\r\n\r\n\t\tif ( deltaTime === 0 ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) return time;\r\n\r\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\r\n\r\n\t\t}\r\n\r\n\t\tif ( loop === LoopOnce ) {\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tthis._loopCount = 0;\r\n\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle_stop: {\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tbreak handle_stop;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // repetitive Repeat or PingPong\r\n\r\n\t\t\tif ( loopCount === - 1 ) {\r\n\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tif ( deltaTime >= 0 ) {\r\n\r\n\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( time >= duration || time < 0 ) {\r\n\r\n\t\t\t\t// wrap around\r\n\r\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\tconst pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\tif ( pending <= 0 ) {\r\n\r\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// keep running\r\n\r\n\t\t\t\t\tif ( pending === 1 ) {\r\n\r\n\t\t\t\t\t\t// entering the last round\r\n\r\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.time = time;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\treturn duration - time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\r\n\r\n\t\tconst settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\r\n\r\n\t\tconst mixer = this._mixer, now = mixer.time;\r\n\t\tlet interpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant();\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tconst times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\t\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction AnimationMixer( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n}\r\n\r\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n\tconstructor: AnimationMixer,\r\n\r\n\t_bindAction: function ( action, prototypeAction ) {\r\n\r\n\t\tconst root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\r\n\r\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tconst track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name;\r\n\r\n\t\t\tlet binding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new PropertyMixer(\r\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function ( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipUuid = action._clip.uuid,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function ( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function () {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\r\n\t\t// \tactionByRoot: AnimationAction - lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._actions.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveActions;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._bindings.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveBindings;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() {\r\n\r\n\t\t\t\t\treturn scope._controlInterpolants.length;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tget inUse() {\r\n\r\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for AnimationAction objects\r\n\r\n\t_isActiveAction: function ( action ) {\r\n\r\n\t\tconst index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function ( action ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tconst clipUuid = action._clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function ( action ) {\r\n\r\n\t\tconst bindings = action._propertyBindings;\r\n\r\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tconst binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function ( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function ( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function ( binding ) {\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function () {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\r\n\r\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new LinearInterpolant(\r\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function ( interpolant ) {\r\n\r\n\t\tconst interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid;\r\n\r\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\r\n\r\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\r\n\r\n\t\tlet actionsForClip = this._actionsByClip[ clipUuid ],\r\n\t\t\tprototypeAction = null;\r\n\r\n\t\tif ( blendMode === undefined ) {\r\n\r\n\t\t\tif ( clipObject !== null ) {\r\n\r\n\t\t\t\tblendMode = clipObject.blendMode;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tblendMode = NormalAnimationBlendMode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tif ( clipObject === null )\r\n\t\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function () {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions;\r\n\r\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\r\n\r\n\t\t\tactions[ i ].stop();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function ( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tconst action = actions[ i ];\r\n\r\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tconst bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Allows you to seek to a specific time in an animation.\r\n\tsetTime: function ( timeInSeconds ) {\r\n\r\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\r\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\r\n\r\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function () {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function ( clip ) {\r\n\r\n\t\tconst actions = this._actions,\r\n\t\t\tclipUuid = clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tconst action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tconst cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function ( root ) {\r\n\r\n\t\tconst rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( const clipUuid in actionsByClip ) {\r\n\r\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( const trackName in bindingByName ) {\r\n\r\n\t\t\t\tconst binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function ( clip, optionalRoot ) {\r\n\r\n\t\tconst action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Uniform( value ) {\r\n\r\n\tif ( typeof value === 'string' ) {\r\n\r\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n\t\tvalue = arguments[ 1 ];\r\n\r\n\t}\r\n\r\n\tthis.value = value;\r\n\r\n}\r\n\r\nUniform.prototype.clone = function () {\r\n\r\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\r\n\r\n};\r\n\r\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\r\n\r\n\tInterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n}\r\n\r\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\r\n\r\n\tconstructor: InstancedInterleavedBuffer,\r\n\r\n\tisInstancedInterleavedBuffer: true,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function ( data ) {\r\n\r\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\r\n\r\n\t\tib.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn ib;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( data ) {\r\n\r\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\r\n\r\n\t\tjson.isInstancedInterleavedBuffer = true;\r\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction Raycaster( origin, direction, near, far ) {\r\n\r\n\tthis.ray = new Ray( origin, direction );\r\n\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\tthis.near = near || 0;\r\n\tthis.far = far || Infinity;\r\n\tthis.camera = null;\r\n\tthis.layers = new Layers();\r\n\r\n\tthis.params = {\r\n\t\tMesh: {},\r\n\t\tLine: { threshold: 1 },\r\n\t\tLOD: {},\r\n\t\tPoints: { threshold: 1 },\r\n\t\tSprite: {}\r\n\t};\r\n\r\n\tObject.defineProperties( this.params, {\r\n\t\tPointCloud: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\treturn this.Points;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n}\r\n\r\nfunction ascSort( a, b ) {\r\n\r\n\treturn a.distance - b.distance;\r\n\r\n}\r\n\r\nfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\tif ( object.layers.test( raycaster.layers ) ) {\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t}\r\n\r\n\tif ( recursive === true ) {\r\n\r\n\t\tconst children = object.children;\r\n\r\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nObject.assign( Raycaster.prototype, {\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.ray.set( origin, direction );\r\n\r\n\t},\r\n\r\n\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\r\n\r\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\r\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\t\t\tthis.camera = camera;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tintersectObject: function ( object, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t},\r\n\r\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\r\n\r\n\t\tconst intersects = optionalTarget || [];\r\n\r\n\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t}\r\n\r\n\t\tintersects.sort( ascSort );\r\n\r\n\t\treturn intersects;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\r\n * The azimuthal angle (theta) is measured from the positive z-axis.\r\n */\r\n\r\nclass Spherical {\r\n\r\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi; // polar angle\r\n\t\tthis.theta = theta; // azimuthal angle\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tset( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.phi = other.phi;\r\n\t\tthis.theta = other.theta;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe() {\r\n\r\n\t\tconst EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetFromVector3( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t}\r\n\r\n\tsetFromCartesianCoords( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( x, z );\r\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\r\n */\r\n\r\nfunction Cylindrical( radius, theta, y ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\r\n\tthis.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\r\n\r\n\treturn this;\r\n\r\n}\r\n\r\nObject.assign( Cylindrical.prototype, {\r\n\r\n\tset: function ( radius, theta, y ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.theta = theta;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius = other.radius;\r\n\t\tthis.theta = other.theta;\r\n\t\tthis.y = other.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function ( v ) {\r\n\r\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\r\n\r\n\t},\r\n\r\n\tsetFromCartesianCoords: function ( x, y, z ) {\r\n\r\n\t\tthis.radius = Math.sqrt( x * x + z * z );\r\n\t\tthis.theta = Math.atan2( x, z );\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _vector$7 = new Vector2();\r\n\r\nfunction Box2( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\r\n\r\n}\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function ( center, size ) {\r\n\r\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\r\n\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tgetSize: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, target ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 4 splitting planes to rule out intersections\r\n\r\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\r\n\t\t\ttarget = new Vector2();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\r\n\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t},\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nconst _startP = new Vector3();\r\nconst _startEnd = new Vector3();\r\n\r\nfunction Line3( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\r\n\r\n}\r\n\r\nObject.assign( Line3.prototype, {\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetCenter: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn target.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, target ) {\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function ( point, clampToLine ) {\r\n\r\n\t\t_startP.subVectors( point, this.start );\r\n\t\t_startEnd.subVectors( this.end, this.start );\r\n\r\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\r\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\r\n\r\n\t\tlet t = startEnd_startP / startEnd2;\r\n\r\n\t\tif ( clampToLine ) {\r\n\r\n\t\t\tt = MathUtils.clamp( t, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\r\n\r\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tif ( target === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\r\n\t\t\ttarget = new Vector3();\r\n\r\n\t\t}\r\n\r\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nfunction ImmediateRenderObject( material ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( /* renderCallback */ ) {};\r\n\r\n\tthis.hasPositions = false;\r\n\tthis.hasNormals = false;\r\n\tthis.hasColors = false;\r\n\tthis.hasUvs = false;\r\n\r\n\tthis.positionArray = null;\r\n\tthis.normalArray = null;\r\n\tthis.colorArray = null;\r\n\tthis.uvArray = null;\r\n\r\n\tthis.count = 0;\r\n\r\n}\r\n\r\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\r\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\r\n\r\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\r\n\r\nconst _vector$8 = new Vector3();\r\n\r\nfunction SpotLightHelper( light, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst positions = [\r\n\t\t0, 0, 0, \t0, 0, 1,\r\n\t\t0, 0, 0, \t1, 0, 1,\r\n\t\t0, 0, 0,\t- 1, 0, 1,\r\n\t\t0, 0, 0, \t0, 1, 1,\r\n\t\t0, 0, 0, \t0, - 1, 1\r\n\t];\r\n\r\n\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n\t\tconst p1 = ( i / l ) * Math.PI * 2;\r\n\t\tconst p2 = ( j / l ) * Math.PI * 2;\r\n\r\n\t\tpositions.push(\r\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\r\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.cone = new LineSegments( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nSpotLightHelper.prototype = Object.create( Object3D.prototype );\r\nSpotLightHelper.prototype.constructor = SpotLightHelper;\r\n\r\nSpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nSpotLightHelper.prototype.update = function () {\r\n\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tconst coneLength = this.light.distance ? this.light.distance : 1000;\r\n\tconst coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t_vector$8.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\tthis.cone.lookAt( _vector$8 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.cone.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst _vector$9 = new Vector3();\r\nconst _boneMatrix = new Matrix4();\r\nconst _matrixWorldInv = new Matrix4();\r\n\r\nfunction getBoneList( object ) {\r\n\r\n\tconst boneList = [];\r\n\r\n\tif ( object && object.isBone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n}\r\n\r\nfunction SkeletonHelper( object ) {\r\n\r\n\tconst bones = getBoneList( object );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst color1 = new Color( 0, 0, 1 );\r\n\tconst color2 = new Color( 0, 1, 0 );\r\n\r\n\tfor ( let i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\tcolors.push( color1.r, color1.g, color1.b );\r\n\t\t\tcolors.push( color2.r, color2.g, color2.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkeletonHelper';\r\n\r\n\tthis.root = object;\r\n\tthis.bones = bones;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n}\r\n\r\nSkeletonHelper.prototype = Object.create( LineSegments.prototype );\r\nSkeletonHelper.prototype.constructor = SkeletonHelper;\r\n\r\nSkeletonHelper.prototype.isSkeletonHelper = true;\r\n\r\nSkeletonHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst bones = this.bones;\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t_matrixWorldInv.getInverse( this.root.matrixWorld );\r\n\r\n\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n\t\tconst bone = bones[ i ];\r\n\r\n\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\r\n\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PointLightHelper( light, sphereSize, color ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\r\n\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\r\n\tMesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'PointLightHelper';\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n\r\n\t/*\r\n\tconst distanceGeometry = new THREE.IcosahedronBufferGeometry( 1, 2 );\r\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tconst d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n}\r\n\r\nPointLightHelper.prototype = Object.create( Mesh.prototype );\r\nPointLightHelper.prototype.constructor = PointLightHelper;\r\n\r\nPointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nPointLightHelper.prototype.update = function () {\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\t/*\r\n\tconst d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\nconst _vector$a = new Vector3();\r\nconst _color1 = new Color();\r\nconst _color2 = new Color();\r\n\r\nfunction HemisphereLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tconst geometry = new OctahedronBufferGeometry( size );\r\n\tgeometry.rotateY( Math.PI * 0.5 );\r\n\r\n\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\r\n\tif ( this.color === undefined ) this.material.vertexColors = true;\r\n\r\n\tconst position = geometry.getAttribute( 'position' );\r\n\tconst colors = new Float32Array( position.count * 3 );\r\n\r\n\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\r\n\r\n\tthis.add( new Mesh( geometry, this.material ) );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\r\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\r\n\r\nHemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.children[ 0 ].geometry.dispose();\r\n\tthis.children[ 0 ].material.dispose();\r\n\r\n};\r\n\r\nHemisphereLightHelper.prototype.update = function () {\r\n\r\n\tconst mesh = this.children[ 0 ];\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tconst colors = mesh.geometry.getAttribute( 'color' );\r\n\r\n\t\t_color1.copy( this.light.color );\r\n\t\t_color2.copy( this.light.groundColor );\r\n\r\n\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\r\n\r\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t\tcolors.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tmesh.lookAt( _vector$a.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\r\n};\r\n\r\nfunction GridHelper( size, divisions, color1, color2 ) {\r\n\r\n\tsize = size || 10;\r\n\tdivisions = divisions || 10;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst center = divisions / 2;\r\n\tconst step = size / divisions;\r\n\tconst halfSize = size / 2;\r\n\r\n\tconst vertices = [], colors = [];\r\n\r\n\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\r\n\r\n\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\r\n\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\r\n\r\n\t\tconst color = i === center ? color1 : color2;\r\n\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'GridHelper';\r\n\r\n}\r\n\r\nGridHelper.prototype = Object.create( LineSegments.prototype );\r\nGridHelper.prototype.constructor = GridHelper;\r\n\r\nfunction PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\r\n\r\n\tradius = radius || 10;\r\n\tradials = radials || 16;\r\n\tcircles = circles || 8;\r\n\tdivisions = divisions || 64;\r\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\t// create the radials\r\n\r\n\tfor ( let i = 0; i <= radials; i ++ ) {\r\n\r\n\t\tconst v = ( i / radials ) * ( Math.PI * 2 );\r\n\r\n\t\tconst x = Math.sin( v ) * radius;\r\n\t\tconst z = Math.cos( v ) * radius;\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tvertices.push( x, 0, z );\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t}\r\n\r\n\t// create the circles\r\n\r\n\tfor ( let i = 0; i <= circles; i ++ ) {\r\n\r\n\t\tconst color = ( i & 1 ) ? color1 : color2;\r\n\r\n\t\tconst r = radius - ( radius / circles * i );\r\n\r\n\t\tfor ( let j = 0; j < divisions; j ++ ) {\r\n\r\n\t\t\t// first vertex\r\n\r\n\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tlet x = Math.sin( v ) * r;\r\n\t\t\tlet z = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t\t// second vertex\r\n\r\n\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\r\n\r\n\t\t\tx = Math.sin( v ) * r;\r\n\t\t\tz = Math.cos( v ) * r;\r\n\r\n\t\t\tvertices.push( x, 0, z );\r\n\t\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'PolarGridHelper';\r\n\r\n}\r\n\r\nPolarGridHelper.prototype = Object.create( LineSegments.prototype );\r\nPolarGridHelper.prototype.constructor = PolarGridHelper;\r\n\r\nconst _v1$5 = new Vector3();\r\nconst _v2$3 = new Vector3();\r\nconst _v3$1 = new Vector3();\r\n\r\nfunction DirectionalLightHelper( light, size, color ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.color = color;\r\n\r\n\tif ( size === undefined ) size = 1;\r\n\r\n\tlet geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\r\n\t\t- size, size, 0,\r\n\t\tsize, size, 0,\r\n\t\tsize, - size, 0,\r\n\t\t- size, - size, 0,\r\n\t\t- size, size, 0\r\n\t], 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\r\n\r\n\tthis.lightPlane = new Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n\tthis.targetLine = new Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\r\nDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\r\n\r\nDirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nDirectionalLightHelper.prototype.update = function () {\r\n\r\n\t_v1$5.setFromMatrixPosition( this.light.matrixWorld );\r\n\t_v2$3.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t_v3$1.subVectors( _v2$3, _v1$5 );\r\n\r\n\tthis.lightPlane.lookAt( _v2$3 );\r\n\r\n\tif ( this.color !== undefined ) {\r\n\r\n\t\tthis.lightPlane.material.color.set( this.color );\r\n\t\tthis.targetLine.material.color.set( this.color );\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightPlane.material.color.copy( this.light.color );\r\n\t\tthis.targetLine.material.color.copy( this.light.color );\r\n\r\n\t}\r\n\r\n\tthis.targetLine.lookAt( _v2$3 );\r\n\tthis.targetLine.scale.z = _v3$1.length();\r\n\r\n};\r\n\r\nconst _vector$b = new Vector3();\r\nconst _camera = new Camera();\r\n\r\n/**\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nfunction CameraHelper( camera ) {\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\r\n\r\n\tconst vertices = [];\r\n\tconst colors = [];\r\n\r\n\tconst pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tconst colorFrustum = new Color( 0xffaa00 );\r\n\tconst colorCone = new Color( 0xff0000 );\r\n\tconst colorUp = new Color( 0x00aaff );\r\n\tconst colorTarget = new Color( 0xffffff );\r\n\tconst colorCross = new Color( 0x333333 );\r\n\r\n\t// near\r\n\r\n\taddLine( 'n1', 'n2', colorFrustum );\r\n\taddLine( 'n2', 'n4', colorFrustum );\r\n\taddLine( 'n4', 'n3', colorFrustum );\r\n\taddLine( 'n3', 'n1', colorFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( 'f1', 'f2', colorFrustum );\r\n\taddLine( 'f2', 'f4', colorFrustum );\r\n\taddLine( 'f4', 'f3', colorFrustum );\r\n\taddLine( 'f3', 'f1', colorFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( 'n1', 'f1', colorFrustum );\r\n\taddLine( 'n2', 'f2', colorFrustum );\r\n\taddLine( 'n3', 'f3', colorFrustum );\r\n\taddLine( 'n4', 'f4', colorFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( 'p', 'n1', colorCone );\r\n\taddLine( 'p', 'n2', colorCone );\r\n\taddLine( 'p', 'n3', colorCone );\r\n\taddLine( 'p', 'n4', colorCone );\r\n\r\n\t// up\r\n\r\n\taddLine( 'u1', 'u2', colorUp );\r\n\taddLine( 'u2', 'u3', colorUp );\r\n\taddLine( 'u3', 'u1', colorUp );\r\n\r\n\t// target\r\n\r\n\taddLine( 'c', 't', colorTarget );\r\n\taddLine( 'p', 'c', colorCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( 'cn1', 'cn2', colorCross );\r\n\taddLine( 'cn3', 'cn4', colorCross );\r\n\r\n\taddLine( 'cf1', 'cf2', colorCross );\r\n\taddLine( 'cf3', 'cf4', colorCross );\r\n\r\n\tfunction addLine( a, b, color ) {\r\n\r\n\t\taddPoint( a, color );\r\n\t\taddPoint( b, color );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, color ) {\r\n\r\n\t\tvertices.push( 0, 0, 0 );\r\n\t\tcolors.push( color.r, color.g, color.b );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\r\n\r\n\t}\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'CameraHelper';\r\n\r\n\tthis.camera = camera;\r\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nCameraHelper.prototype = Object.create( LineSegments.prototype );\r\nCameraHelper.prototype.constructor = CameraHelper;\r\n\r\nCameraHelper.prototype.update = function () {\r\n\r\n\tconst geometry = this.geometry;\r\n\tconst pointMap = this.pointMap;\r\n\r\n\tconst w = 1, h = 1;\r\n\r\n\t// we need just camera projection matrix inverse\r\n\t// world matrix must be identity\r\n\r\n\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\r\n\r\n\t// center / target\r\n\r\n\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\r\n\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\r\n\r\n\t// near\r\n\r\n\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\r\n\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\r\n\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\r\n\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\r\n\r\n\t// far\r\n\r\n\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\r\n\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\r\n\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\r\n\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\r\n\r\n\t// up\r\n\r\n\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\r\n\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\r\n\r\n\t// cross\r\n\r\n\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\r\n\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\r\n\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\r\n\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\r\n\r\n\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\r\n\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\r\n\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\r\n\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\r\n\r\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n};\r\n\r\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\r\n\r\n\t_vector$b.set( x, y, z ).unproject( camera );\r\n\r\n\tconst points = pointMap[ point ];\r\n\r\n\tif ( points !== undefined ) {\r\n\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tposition.setXYZ( points[ i ], _vector$b.x, _vector$b.y, _vector$b.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst _box$3 = new Box3();\r\n\r\nfunction BoxHelper( object, color ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tconst positions = new Float32Array( 8 * 3 );\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'BoxHelper';\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n}\r\n\r\nBoxHelper.prototype = Object.create( LineSegments.prototype );\r\nBoxHelper.prototype.constructor = BoxHelper;\r\n\r\nBoxHelper.prototype.update = function ( object ) {\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\r\n\r\n\t}\r\n\r\n\tif ( this.object !== undefined ) {\r\n\r\n\t\t_box$3.setFromObject( this.object );\r\n\r\n\t}\r\n\r\n\tif ( _box$3.isEmpty() ) return;\r\n\r\n\tconst min = _box$3.min;\r\n\tconst max = _box$3.max;\r\n\r\n\t/*\r\n\t  5____4\r\n\t1/___0/|\r\n\t| 6__|_7\r\n\t2/___3/\r\n\r\n\t0: max.x, max.y, max.z\r\n\t1: min.x, max.y, max.z\r\n\t2: min.x, min.y, max.z\r\n\t3: max.x, min.y, max.z\r\n\t4: max.x, max.y, min.z\r\n\t5: min.x, max.y, min.z\r\n\t6: min.x, min.y, min.z\r\n\t7: max.x, min.y, min.z\r\n\t*/\r\n\r\n\tconst position = this.geometry.attributes.position;\r\n\tconst array = position.array;\r\n\r\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\r\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\r\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\r\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\tposition.needsUpdate = true;\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n\r\n};\r\n\r\nBoxHelper.prototype.setFromObject = function ( object ) {\r\n\r\n\tthis.object = object;\r\n\tthis.update();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nBoxHelper.prototype.copy = function ( source ) {\r\n\r\n\tLineSegments.prototype.copy.call( this, source );\r\n\r\n\tthis.object = source.object;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction Box3Helper( box, color ) {\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.box = box;\r\n\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\r\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\r\n\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\r\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'Box3Helper';\r\n\r\n\tthis.geometry.computeBoundingSphere();\r\n\r\n}\r\n\r\nBox3Helper.prototype = Object.create( LineSegments.prototype );\r\nBox3Helper.prototype.constructor = Box3Helper;\r\n\r\nBox3Helper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tconst box = this.box;\r\n\r\n\tif ( box.isEmpty() ) return;\r\n\r\n\tbox.getCenter( this.position );\r\n\r\n\tbox.getSize( this.scale );\r\n\r\n\tthis.scale.multiplyScalar( 0.5 );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nfunction PlaneHelper( plane, size, hex ) {\r\n\r\n\tthis.plane = plane;\r\n\r\n\tthis.size = ( size === undefined ) ? 1 : size;\r\n\r\n\tconst color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tconst positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\tgeometry.computeBoundingSphere();\r\n\r\n\tLine.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\r\n\tthis.type = 'PlaneHelper';\r\n\r\n\t//\r\n\r\n\tconst positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\r\n\r\n\tconst geometry2 = new BufferGeometry();\r\n\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\r\n\tgeometry2.computeBoundingSphere();\r\n\r\n\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\r\n\r\n}\r\n\r\nPlaneHelper.prototype = Object.create( Line.prototype );\r\nPlaneHelper.prototype.constructor = PlaneHelper;\r\n\r\nPlaneHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n\tlet scale = - this.plane.constant;\r\n\r\n\tif ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\r\n\r\n\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\r\n\r\n\tthis.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\r\n\r\n\tthis.lookAt( this.plane.normal );\r\n\r\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n};\r\n\r\nconst _axis = new Vector3();\r\nlet _lineGeometry, _coneGeometry;\r\n\r\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.type = 'ArrowHelper';\r\n\r\n\tif ( dir === undefined ) dir = new Vector3( 0, 0, 1 );\r\n\tif ( origin === undefined ) origin = new Vector3( 0, 0, 0 );\r\n\tif ( length === undefined ) length = 1;\r\n\tif ( color === undefined ) color = 0xffff00;\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tif ( _lineGeometry === undefined ) {\r\n\r\n\t\t_lineGeometry = new BufferGeometry();\r\n\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n\t\t_coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n\t\t_coneGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\t}\r\n\r\n\tthis.position.copy( origin );\r\n\r\n\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.line.matrixAutoUpdate = false;\r\n\tthis.add( this.line );\r\n\r\n\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\r\n\tthis.cone.matrixAutoUpdate = false;\r\n\tthis.add( this.cone );\r\n\r\n\tthis.setDirection( dir );\r\n\tthis.setLength( length, headLength, headWidth );\r\n\r\n}\r\n\r\nArrowHelper.prototype = Object.create( Object3D.prototype );\r\nArrowHelper.prototype.constructor = ArrowHelper;\r\n\r\nArrowHelper.prototype.setDirection = function ( dir ) {\r\n\r\n\t// dir is assumed to be normalized\r\n\r\n\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t} else {\r\n\r\n\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\tconst radians = Math.acos( dir.y );\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\r\n\r\n\t}\r\n\r\n};\r\n\r\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\nArrowHelper.prototype.copy = function ( source ) {\r\n\r\n\tObject3D.prototype.copy.call( this, source, false );\r\n\r\n\tthis.line.copy( source.line );\r\n\tthis.cone.copy( source.cone );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nfunction AxesHelper( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tconst vertices = [\r\n\t\t0, 0, 0,\tsize, 0, 0,\r\n\t\t0, 0, 0,\t0, size, 0,\r\n\t\t0, 0, 0,\t0, 0, size\r\n\t];\r\n\r\n\tconst colors = [\r\n\t\t1, 0, 0,\t1, 0.6, 0,\r\n\t\t0, 1, 0,\t0.6, 1, 0,\r\n\t\t0, 0, 1,\t0, 0.6, 1\r\n\t];\r\n\r\n\tconst geometry = new BufferGeometry();\r\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\r\n\r\n\tLineSegments.call( this, geometry, material );\r\n\r\n\tthis.type = 'AxesHelper';\r\n\r\n}\r\n\r\nAxesHelper.prototype = Object.create( LineSegments.prototype );\r\nAxesHelper.prototype.constructor = AxesHelper;\r\n\r\nconst LOD_MIN = 4;\r\nconst LOD_MAX = 8;\r\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\r\n\r\n// The standard deviations (radians) associated with the extra mips. These are\r\n// chosen to approximate a Trowbridge-Reitz distribution function times the\r\n// geometric shadowing function. These sigma values squared must match the\r\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\r\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\r\n\r\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\r\n\r\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\r\n// samples and exit early, but not recompile the shader.\r\nconst MAX_SAMPLES = 20;\r\n\r\nconst ENCODINGS = {\r\n\t[ LinearEncoding ]: 0,\r\n\t[ sRGBEncoding ]: 1,\r\n\t[ RGBEEncoding ]: 2,\r\n\t[ RGBM7Encoding ]: 3,\r\n\t[ RGBM16Encoding ]: 4,\r\n\t[ RGBDEncoding ]: 5,\r\n\t[ GammaEncoding ]: 6\r\n};\r\n\r\nconst _flatCamera = new OrthographicCamera();\r\nconst { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\r\nlet _oldTarget = null;\r\n\r\n// Golden Ratio\r\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\r\nconst INV_PHI = 1 / PHI;\r\n\r\n// Vertices of a dodecahedron (except the opposites, which represent the\r\n// same axis), used as axis directions evenly spread on a sphere.\r\nconst _axisDirections = [\r\n\tnew Vector3( 1, 1, 1 ),\r\n\tnew Vector3( - 1, 1, 1 ),\r\n\tnew Vector3( 1, 1, - 1 ),\r\n\tnew Vector3( - 1, 1, - 1 ),\r\n\tnew Vector3( 0, PHI, INV_PHI ),\r\n\tnew Vector3( 0, PHI, - INV_PHI ),\r\n\tnew Vector3( INV_PHI, 0, PHI ),\r\n\tnew Vector3( - INV_PHI, 0, PHI ),\r\n\tnew Vector3( PHI, INV_PHI, 0 ),\r\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\r\n\r\n/**\r\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\r\n * (PMREM) from a cubeMap environment texture. This allows different levels of\r\n * blur to be quickly accessed based on material roughness. It is packed into a\r\n * special CubeUV format that allows us to perform custom interpolation so that\r\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\r\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\r\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\r\n * higher roughness levels. In this way we maintain resolution to smoothly\r\n * interpolate diffuse lighting while limiting sampling computation.\r\n */\r\n\r\nfunction PMREMGenerator( renderer ) {\r\n\r\n\tthis._renderer = renderer;\r\n\tthis._pingPongRenderTarget = null;\r\n\r\n\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\r\n\tthis._equirectShader = null;\r\n\tthis._cubemapShader = null;\r\n\r\n\tthis._compileMaterial( this._blurMaterial );\r\n\r\n}\r\n\r\nPMREMGenerator.prototype = {\r\n\r\n\tconstructor: PMREMGenerator,\r\n\r\n\t/**\r\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\r\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\r\n\t * in radians to be applied to the scene before PMREM generation. Optional near\r\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\r\n\t * is placed at the origin).\r\n\t */\r\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\r\n\r\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\r\n\t\tif ( sigma > 0 ) {\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\r\n\r\n\t\t}\r\n\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromEquirectangular: function ( equirectangular ) {\r\n\r\n\t\treturn this._fromTexture( equirectangular );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\r\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\r\n\t * as this matches best with the 256 x 256 cubemap output.\r\n\t */\r\n\tfromCubemap: function ( cubemap ) {\r\n\r\n\t\treturn this._fromTexture( cubemap );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileCubemapShader: function () {\r\n\r\n\t\tif ( this._cubemapShader === null ) {\r\n\r\n\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\t\t\tthis._compileMaterial( this._cubemapShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\r\n\t * your texture's network fetch for increased concurrency.\r\n\t */\r\n\tcompileEquirectangularShader: function () {\r\n\r\n\t\tif ( this._equirectShader === null ) {\r\n\r\n\t\t\tthis._equirectShader = _getEquirectShader();\r\n\t\t\tthis._compileMaterial( this._equirectShader );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\r\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\r\n\t * one of them will cause any others to also become unusable.\r\n\t */\r\n\tdispose: function () {\r\n\r\n\t\tthis._blurMaterial.dispose();\r\n\r\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\r\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\r\n\r\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\r\n\r\n\t\t\t_lodPlanes[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// private interface\r\n\r\n\t_cleanup: function ( outputTarget ) {\r\n\r\n\t\tthis._pingPongRenderTarget.dispose();\r\n\t\tthis._renderer.setRenderTarget( _oldTarget );\r\n\t\toutputTarget.scissorTest = false;\r\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\r\n\r\n\t},\r\n\r\n\t_fromTexture: function ( texture ) {\r\n\r\n\t\t_oldTarget = this._renderer.getRenderTarget();\r\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\r\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\r\n\t\tthis._applyPMREM( cubeUVRenderTarget );\r\n\t\tthis._cleanup( cubeUVRenderTarget );\r\n\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_allocateTargets: function ( texture ) { // warning: null texture is valid\r\n\r\n\t\tconst params = {\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tgenerateMipmaps: false,\r\n\t\t\ttype: UnsignedByteType,\r\n\t\t\tformat: RGBEFormat,\r\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tstencilBuffer: false\r\n\t\t};\r\n\r\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\r\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\r\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\r\n\t\treturn cubeUVRenderTarget;\r\n\r\n\t},\r\n\r\n\t_compileMaterial: function ( material ) {\r\n\r\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_sceneToCubeUV: function ( scene, near, far, cubeUVRenderTarget ) {\r\n\r\n\t\tconst fov = 90;\r\n\t\tconst aspect = 1;\r\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\r\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\r\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tconst outputEncoding = renderer.outputEncoding;\r\n\t\tconst toneMapping = renderer.toneMapping;\r\n\t\tconst clearColor = renderer.getClearColor();\r\n\t\tconst clearAlpha = renderer.getClearAlpha();\r\n\r\n\t\trenderer.toneMapping = NoToneMapping;\r\n\t\trenderer.outputEncoding = LinearEncoding;\r\n\r\n\t\tlet background = scene.background;\r\n\t\tif ( background && background.isColor ) {\r\n\r\n\t\t\tbackground.convertSRGBToLinear();\r\n\t\t\t// Convert linear to RGBE\r\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\r\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\r\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\r\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\r\n\t\t\trenderer.setClearColor( background, alpha );\r\n\t\t\tscene.background = null;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tconst col = i % 3;\r\n\t\t\tif ( col == 0 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\r\n\r\n\t\t\t} else if ( col == 1 ) {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\r\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\r\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_setViewport( cubeUVRenderTarget,\r\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\r\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\t\trenderer.render( scene, cubeCamera );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.toneMapping = toneMapping;\r\n\t\trenderer.outputEncoding = outputEncoding;\r\n\t\trenderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t},\r\n\r\n\t_textureToCubeUV: function ( texture, cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\r\n\t\tif ( texture.isCubeTexture ) {\r\n\r\n\t\t\tif ( this._cubemapShader == null ) {\r\n\r\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( this._equirectShader == null ) {\r\n\r\n\t\t\t\tthis._equirectShader = _getEquirectShader();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\r\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\r\n\r\n\t\tconst uniforms = material.uniforms;\r\n\r\n\t\tuniforms[ 'envMap' ].value = texture;\r\n\r\n\t\tif ( ! texture.isCubeTexture ) {\r\n\r\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\r\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\r\n\r\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\r\n\r\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\r\n\t\trenderer.render( mesh, _flatCamera );\r\n\r\n\t},\r\n\r\n\t_applyPMREM: function ( cubeUVRenderTarget ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst autoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\r\n\r\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\r\n\r\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.autoClear = autoClear;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\r\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\r\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\r\n\t * the poles) to approximate the orthogonally-separable blur. It is least\r\n\t * accurate at the poles, but still does a decent job.\r\n\t */\r\n\t_blur: function ( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\r\n\r\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tlodIn,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'latitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t\tthis._halfBlur(\r\n\t\t\tpingPongRenderTarget,\r\n\t\t\tcubeUVRenderTarget,\r\n\t\t\tlodOut,\r\n\t\t\tlodOut,\r\n\t\t\tsigma,\r\n\t\t\t'longitudinal',\r\n\t\t\tpoleAxis );\r\n\r\n\t},\r\n\r\n\t_halfBlur: function ( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\r\n\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst blurMaterial = this._blurMaterial;\r\n\r\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\r\n\r\n\t\t\tconsole.error(\r\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\r\n\r\n\t\t}\r\n\r\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\r\n\t\tconst STANDARD_DEVIATIONS = 3;\r\n\r\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\r\n\t\tconst blurUniforms = blurMaterial.uniforms;\r\n\r\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\r\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\r\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\r\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\r\n\r\n\t\tif ( samples > MAX_SAMPLES ) {\r\n\r\n\t\t\tconsole.warn( `sigmaRadians, ${\r\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\r\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\r\n\r\n\t\t}\r\n\r\n\t\tconst weights = [];\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\r\n\r\n\t\t\tconst x = i / sigmaPixels;\r\n\t\t\tconst weight = Math.exp( - x * x / 2 );\r\n\t\t\tweights.push( weight );\r\n\r\n\t\t\tif ( i == 0 ) {\r\n\r\n\t\t\t\tsum += weight;\r\n\r\n\t\t\t} else if ( i < samples ) {\r\n\r\n\t\t\t\tsum += 2 * weight;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\r\n\r\n\t\t\tweights[ i ] = weights[ i ] / sum;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\r\n\t\tblurUniforms[ 'samples' ].value = samples;\r\n\t\tblurUniforms[ 'weights' ].value = weights;\r\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\r\n\r\n\t\tif ( poleAxis ) {\r\n\r\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\r\n\r\n\t\t}\r\n\r\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\r\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\r\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\r\n\r\n\t\tconst outputSize = _sizeLods[ lodOut ];\r\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\r\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\r\n\r\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\r\n\t\trenderer.setRenderTarget( targetOut );\r\n\t\trenderer.render( blurMesh, _flatCamera );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction _isLDR( texture ) {\r\n\r\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\r\n\r\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\r\n\r\n}\r\n\r\nfunction _createPlanes() {\r\n\r\n\tconst _lodPlanes = [];\r\n\tconst _sizeLods = [];\r\n\tconst _sigmas = [];\r\n\r\n\tlet lod = LOD_MAX;\r\n\r\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\r\n\r\n\t\tconst sizeLod = Math.pow( 2, lod );\r\n\t\t_sizeLods.push( sizeLod );\r\n\t\tlet sigma = 1.0 / sizeLod;\r\n\r\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\r\n\r\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\r\n\r\n\t\t} else if ( i == 0 ) {\r\n\r\n\t\t\tsigma = 0;\r\n\r\n\t\t}\r\n\r\n\t\t_sigmas.push( sigma );\r\n\r\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\r\n\t\tconst min = - texelSize / 2;\r\n\t\tconst max = 1 + texelSize / 2;\r\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\r\n\r\n\t\tconst cubeFaces = 6;\r\n\t\tconst vertices = 6;\r\n\t\tconst positionSize = 3;\r\n\t\tconst uvSize = 2;\r\n\t\tconst faceIndexSize = 1;\r\n\r\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\r\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\r\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\r\n\r\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\r\n\r\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\r\n\t\t\tconst y = face > 2 ? 0 : - 1;\r\n\t\t\tconst coordinates = [\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y, 0,\r\n\t\t\t\tx + 2 / 3, y + 1, 0,\r\n\t\t\t\tx, y + 1, 0\r\n\t\t\t];\r\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\r\n\t\t\tuv.set( uv1, uvSize * vertices * face );\r\n\t\t\tconst fill = [ face, face, face, face, face, face ];\r\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\r\n\r\n\t\t}\r\n\r\n\t\tconst planes = new BufferGeometry();\r\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\r\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\r\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\r\n\t\t_lodPlanes.push( planes );\r\n\r\n\t\tif ( lod > LOD_MIN ) {\r\n\r\n\t\t\tlod --;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { _lodPlanes, _sizeLods, _sigmas };\r\n\r\n}\r\n\r\nfunction _createRenderTarget( params ) {\r\n\r\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\r\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\r\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\r\n\tcubeUVRenderTarget.scissorTest = true;\r\n\treturn cubeUVRenderTarget;\r\n\r\n}\r\n\r\nfunction _setViewport( target, x, y, width, height ) {\r\n\r\n\ttarget.viewport.set( x, y, width, height );\r\n\ttarget.scissor.set( x, y, width, height );\r\n\r\n}\r\n\r\nfunction _getBlurShader( maxSamples ) {\r\n\r\n\tconst weights = new Float32Array( maxSamples );\r\n\tconst poleAxis = new Vector3( 0, 1, 0 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'SphericalGaussianBlur',\r\n\r\n\t\tdefines: { 'n': maxSamples },\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'samples': { value: 1 },\r\n\t\t\t'weights': { value: weights },\r\n\t\t\t'latitudinal': { value: false },\r\n\t\t\t'dTheta': { value: 0 },\r\n\t\t\t'mipInt': { value: 0 },\r\n\t\t\t'poleAxis': { value: poleAxis },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform int samples;\r\n\t\t\tuniform float weights[ n ];\r\n\t\t\tuniform bool latitudinal;\r\n\t\t\tuniform float dTheta;\r\n\t\t\tuniform float mipInt;\r\n\t\t\tuniform vec3 poleAxis;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\r\n\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\r\n\r\n\t\t\t\tfloat cosTheta = cos( theta );\r\n\t\t\t\t// Rodrigues' axis-angle rotation\r\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\r\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\r\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\r\n\r\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\r\n\r\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\r\n\r\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\taxis = normalize( axis );\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\r\n\r\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\r\n\r\n\t\t\t\t\tif ( i >= samples ) {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfloat theta = dTheta * float( i );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\r\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getEquirectShader() {\r\n\r\n\tconst texelSize = new Vector2( 1, 1 );\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'EquirectangularToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'texelSize': { value: texelSize },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform sampler2D envMap;\r\n\t\t\tuniform vec2 texelSize;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\t#include <common>\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\r\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\r\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\r\n\r\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\r\n\t\t\t\tuv -= f * texelSize;\r\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x += texelSize.x;\r\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.y += texelSize.y;\r\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\t\t\t\tuv.x -= texelSize.x;\r\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\r\n\r\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\r\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\r\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\r\n\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCubemapShader() {\r\n\r\n\tconst shaderMaterial = new RawShaderMaterial( {\r\n\r\n\t\tname: 'CubemapToCubeUV',\r\n\r\n\t\tuniforms: {\r\n\t\t\t'envMap': { value: null },\r\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\r\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\r\n\t\t},\r\n\r\n\t\tvertexShader: _getCommonVertexShader(),\r\n\r\n\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t\tuniform samplerCube envMap;\r\n\r\n\t\t\t${ _getEncodings() }\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\r\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\r\n\r\n\t\t\t}\r\n\t\t`,\r\n\r\n\t\tblending: NoBlending,\r\n\t\tdepthTest: false,\r\n\t\tdepthWrite: false\r\n\r\n\t} );\r\n\r\n\treturn shaderMaterial;\r\n\r\n}\r\n\r\nfunction _getCommonVertexShader() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tprecision mediump float;\r\n\t\tprecision mediump int;\r\n\r\n\t\tattribute vec3 position;\r\n\t\tattribute vec2 uv;\r\n\t\tattribute float faceIndex;\r\n\r\n\t\tvarying vec3 vOutputDirection;\r\n\r\n\t\t// RH coordinate system; PMREM face-indexing convention\r\n\t\tvec3 getDirection( vec2 uv, float face ) {\r\n\r\n\t\t\tuv = 2.0 * uv - 1.0;\r\n\r\n\t\t\tvec3 direction = vec3( uv, 1.0 );\r\n\r\n\t\t\tif ( face == 0.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\r\n\r\n\t\t\t} else if ( face == 1.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\r\n\r\n\t\t\t} else if ( face == 2.0 ) {\r\n\r\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\r\n\r\n\t\t\t} else if ( face == 3.0 ) {\r\n\r\n\t\t\t\tdirection = direction.zyx;\r\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\r\n\r\n\t\t\t} else if ( face == 4.0 ) {\r\n\r\n\t\t\t\tdirection = direction.xzy;\r\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\r\n\r\n\t\t\t} else if ( face == 5.0 ) {\r\n\r\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn direction;\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\r\n\t\t\tgl_Position = vec4( position, 1.0 );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction _getEncodings() {\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\tuniform int inputEncoding;\r\n\t\tuniform int outputEncoding;\r\n\r\n\t\t#include <encodings_pars_fragment>\r\n\r\n\t\tvec4 inputTexelToLinear( vec4 value ) {\r\n\r\n\t\t\tif ( inputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( inputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn sRGBToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn RGBEToLinear( value );\r\n\r\n\t\t\t} else if ( inputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\r\n\r\n\t\t\t} else if ( inputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn GammaToLinear( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 linearToOutputTexel( vec4 value ) {\r\n\r\n\t\t\tif ( outputEncoding == 0 ) {\r\n\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t} else if ( outputEncoding == 1 ) {\r\n\r\n\t\t\t\treturn LinearTosRGB( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 2 ) {\r\n\r\n\t\t\t\treturn LinearToRGBE( value );\r\n\r\n\t\t\t} else if ( outputEncoding == 3 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 4 ) {\r\n\r\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\r\n\r\n\t\t\t} else if ( outputEncoding == 5 ) {\r\n\r\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn LinearToGamma( value, 2.2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\r\n\r\n\t\t\treturn inputTexelToLinear( color );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction Face4( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new Face3( a, b, c, normal, color, materialIndex );\r\n\r\n}\r\n\r\nconst LineStrip = 0;\r\nconst LinePieces = 1;\r\nconst NoColors = 0;\r\nconst FaceColors = 1;\r\nconst VertexColors = 2;\r\n\r\nfunction MeshFaceMaterial( materials ) {\r\n\r\n\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction MultiMaterial( materials ) {\r\n\r\n\tif ( materials === undefined ) materials = [];\r\n\r\n\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\r\n\tmaterials.isMultiMaterial = true;\r\n\tmaterials.materials = materials;\r\n\tmaterials.clone = function () {\r\n\r\n\t\treturn materials.slice();\r\n\r\n\t};\r\n\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction PointCloud( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction Particle( material ) {\r\n\r\n\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\r\n\treturn new Sprite( material );\r\n\r\n}\r\n\r\nfunction ParticleSystem( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\treturn new Points( geometry, material );\r\n\r\n}\r\n\r\nfunction PointCloudMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleBasicMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction ParticleSystemMaterial( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new PointsMaterial( parameters );\r\n\r\n}\r\n\r\nfunction Vertex( x, y, z ) {\r\n\r\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\treturn new Vector3( x, y, z );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction DynamicBufferAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.' );\r\n\treturn new BufferAttribute( array, itemSize ).setUsage( DynamicDrawUsage );\r\n\r\n}\r\n\r\nfunction Int8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\r\n\treturn new Int8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\r\n\treturn new Uint8BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint8ClampedAttribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\r\n\treturn new Uint8ClampedBufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\r\n\treturn new Int16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint16Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\r\n\treturn new Uint16BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Int32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\r\n\treturn new Int32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Uint32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\r\n\treturn new Uint32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float32Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\r\n\treturn new Float32BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\nfunction Float64Attribute( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\r\n\treturn new Float64BufferAttribute( array, itemSize );\r\n\r\n}\r\n\r\n//\r\n\r\nCurve.create = function ( construct, getPoint ) {\r\n\r\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\r\n\r\n\tconstruct.prototype = Object.create( Curve.prototype );\r\n\tconstruct.prototype.constructor = construct;\r\n\tconstruct.prototype.getPoint = getPoint;\r\n\r\n\treturn construct;\r\n\r\n};\r\n\r\n//\r\n\r\nObject.assign( CurvePath.prototype, {\r\n\r\n\tcreatePointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from path points (for Line or Points objects)\r\n\r\n\t\tconst pts = this.getPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateSpacedPointsGeometry: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\t// generate geometry from equidistant sampling along the path\r\n\r\n\t\tconst pts = this.getSpacedPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateGeometry: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n\t\tconst geometry = new Geometry();\r\n\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst point = points[ i ];\r\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Path.prototype, {\r\n\r\n\tfromPoints: function ( points ) {\r\n\r\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\r\n\t\treturn this.setFromPoints( points );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction ClosedSplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n}\r\n\r\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction SplineCurve3( points ) {\r\n\r\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n//\r\n\r\nfunction Spline( points ) {\r\n\r\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n\tCatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\r\n}\r\n\r\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\nObject.assign( Spline.prototype, {\r\n\r\n\tinitFromArray: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\r\n\r\n\t},\r\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\r\n\r\n\t},\r\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nfunction AxisHelper( size ) {\r\n\r\n\tconsole.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\r\n\treturn new AxesHelper( size );\r\n\r\n}\r\n\r\nfunction BoundingBoxHelper( object, color ) {\r\n\r\n\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\r\n\treturn new BoxHelper( object, color );\r\n\r\n}\r\n\r\nfunction EdgesHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\r\n\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\nGridHelper.prototype.setColors = function () {\r\n\r\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n};\r\n\r\nSkeletonHelper.prototype.update = function () {\r\n\r\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\r\n\r\n};\r\n\r\nfunction WireframeHelper( object, hex ) {\r\n\r\n\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\r\n\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.assign( Loader.prototype, {\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\r\n\t\treturn LoaderUtils.extractUrlBase( url );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nLoader.Handlers = {\r\n\r\n\tadd: function ( /* regex, loader */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\r\n\r\n\t},\r\n\r\n\tget: function ( /* file */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nfunction XHRLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\r\n\treturn new FileLoader( manager );\r\n\r\n}\r\n\r\nfunction BinaryTextureLoader( manager ) {\r\n\r\n\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\r\n\treturn new DataTextureLoader( manager );\r\n\r\n}\r\n\r\nObject.assign( ObjectLoader.prototype, {\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().' );\r\n\t\treturn this.setResourcePath( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Box2.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Box3.prototype, {\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\r\n\t\treturn this.getCenter( optionalTarget );\r\n\r\n\t},\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t},\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\r\n\t\treturn this.getSize( optionalTarget );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( Sphere.prototype, {\r\n\r\n\tempty: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\r\n\t},\r\n\r\n} );\r\n\r\nFrustum.prototype.setFromMatrix = function ( m ) {\r\n\r\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\r\n\treturn this.setFromProjectionMatrix( m );\r\n\r\n};\r\n\r\nLine3.prototype.center = function ( optionalTarget ) {\r\n\r\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\r\n\treturn this.getCenter( optionalTarget );\r\n\r\n};\r\n\r\nObject.assign( MathUtils, {\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\r\n\t\treturn MathUtils.floorPowerOfTwo( value );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\r\n\t\treturn MathUtils.ceilPowerOfTwo( value );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix3.prototype, {\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix3( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Matrix4.prototype, {\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\tgetPosition: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\r\n\r\n\t},\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\tmultiplyToArray: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\r\n\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\tmultiplyVector3Array: function ( /* a */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\r\n\r\n\t},\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\ttranslate: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\trotateX: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\trotateY: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\trotateZ: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\trotateByAxis: function () {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\tapplyToBufferAttribute: function ( attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\r\n\t\treturn attribute.applyMatrix4( this );\r\n\r\n\t},\r\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\r\n\r\n\t},\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\r\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nPlane.prototype.isIntersectionLine = function ( line ) {\r\n\r\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\treturn this.intersectsLine( line );\r\n\r\n};\r\n\r\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\r\n\r\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\treturn vector.applyQuaternion( this );\r\n\r\n};\r\n\r\nObject.assign( Ray.prototype, {\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\r\n\t},\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\treturn this.intersectsPlane( plane );\r\n\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle.prototype, {\r\n\r\n\tarea: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\r\n\t\treturn this.getArea();\r\n\r\n\t},\r\n\tbarycoordFromPoint: function ( point, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn this.getBarycoord( point, target );\r\n\r\n\t},\r\n\tmidpoint: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\r\n\t\treturn this.getMidpoint( target );\r\n\r\n\t},\r\n\tnormal: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn this.getNormal( target );\r\n\r\n\t},\r\n\tplane: function ( target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\r\n\t\treturn this.getPlane( target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Triangle, {\r\n\r\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\r\n\r\n\t},\r\n\tnormal: function ( a, b, c, target ) {\r\n\r\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n\t\treturn Triangle.getNormal( a, b, c, target );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Shape.prototype, {\r\n\r\n\textractAllPoints: function ( divisions ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\r\n\t\treturn this.extractPoints( divisions );\r\n\r\n\t},\r\n\textrude: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\r\n\t\treturn new ExtrudeGeometry( this, options );\r\n\r\n\t},\r\n\tmakeGeometry: function ( options ) {\r\n\r\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\r\n\t\treturn new ShapeGeometry( this, options );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector2.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector3.prototype, {\r\n\r\n\tsetEulerFromRotationMatrix: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\tsetEulerFromQuaternion: function () {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\treturn this.setFromMatrixScale( m );\r\n\r\n\t},\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\treturn this.setFromMatrixColumn( matrix, index );\r\n\r\n\t},\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\r\n\t\treturn this.applyMatrix4( m );\r\n\r\n\t},\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tdistanceToManhattan: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n\t\treturn this.manhattanDistanceTo( v );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Vector4.prototype, {\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\r\n\r\n\t},\r\n\tlengthManhattan: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n\t\treturn this.manhattanLength();\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( Geometry.prototype, {\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Object3D.prototype, {\r\n\r\n\tgetChildByName: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\r\n\t},\r\n\trenderDepth: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n\t},\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Object3D.prototype, {\r\n\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( Mesh.prototype, {\r\n\r\n\tsetDrawMode: function () {\r\n\r\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( Mesh.prototype, {\r\n\r\n\tdrawMode: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\r\n\t\t\treturn TrianglesDrawMode;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( LOD.prototype, {\r\n\r\n\tobjects: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\treturn this.levels;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t},\r\n\tset: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nSkinnedMesh.prototype.initBones = function () {\r\n\r\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\r\n\r\n};\r\n\r\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\r\n\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\treturn this.arcLengthDivisions;\r\n\r\n\t},\r\n\tset: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n\t\tthis.arcLengthDivisions = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n\tthis.setFocalLength( focalLength );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( BufferAttribute.prototype, {\r\n\r\n\tlength: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\r\n\t\t\treturn this.array.length;\r\n\r\n\t\t}\r\n\t},\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( DynamicDrawUsage );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( BufferAttribute.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tcopyIndicesArray: function ( /* indices */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\nObject.assign( BufferGeometry.prototype, {\r\n\r\n\taddIndex: function ( index ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\r\n\t},\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\r\n\r\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.setAttribute( name, attribute );\r\n\r\n\t},\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tif ( indexOffset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\r\n\t},\r\n\tclearDrawCalls: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\r\n\t},\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\tcomputeOffsets: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\r\n\t},\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\r\n\r\n\t\treturn this.deleteAttribute( name );\r\n\r\n\t},\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\r\n\t\treturn this.applyMatrix4( matrix );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( BufferGeometry.prototype, {\r\n\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InstancedBufferGeometry.prototype, {\r\n\r\n\tmaxInstancedCount: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\treturn this.instanceCount;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\r\n\t\t\tthis.instanceCount = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( Raycaster.prototype, {\r\n\r\n\tlinePrecision: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\treturn this.params.Line.threshold;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\r\n\t\t\tthis.params.Line.threshold = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( InterleavedBuffer.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\treturn this.usage === DynamicDrawUsage;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\r\n\t\t\tthis.setUsage( value );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.assign( InterleavedBuffer.prototype, {\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\r\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\r\n\t\treturn this;\r\n\r\n\t},\r\n\tsetArray: function ( /* array */ ) {\r\n\r\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\r\n\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( ExtrudeBufferGeometry.prototype, {\r\n\r\n\tgetArrays: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShapeList: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\r\n\r\n\t},\r\n\r\n\taddShape: function () {\r\n\r\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Uniform.prototype, {\r\n\r\n\tdynamic: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tonUpdate: {\r\n\t\tvalue: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Material.prototype, {\r\n\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\toverdraw: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\r\n\t\t\treturn new Color();\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tshading: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\t\t\tthis.flatShading = ( value === FlatShading );\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tstencilMask: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\treturn this.stencilFuncMask;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\r\n\t\t\tthis.stencilFuncMask = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhongMaterial.prototype, {\r\n\r\n\tmetal: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\r\n\r\n\ttransparency: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\treturn this.transmission;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\r\n\t\t\tthis.transmission = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( ShaderMaterial.prototype, {\r\n\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.assign( WebGLRenderer.prototype, {\r\n\r\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t},\r\n\tanimate: function ( callback ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\r\n\t\tthis.setAnimationLoop( callback );\r\n\r\n\t},\r\n\tgetCurrentRenderTarget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\r\n\t\treturn this.getRenderTarget();\r\n\r\n\t},\r\n\tgetMaxAnisotropy: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\r\n\t\treturn this.capabilities.getMaxAnisotropy();\r\n\r\n\t},\r\n\tgetPrecision: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\r\n\t\treturn this.capabilities.precision;\r\n\r\n\t},\r\n\tresetGLState: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\r\n\t\treturn this.state.reset();\r\n\r\n\t},\r\n\tsupportsFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\r\n\t},\r\n\tsupportsHalfFloatTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\r\n\t},\r\n\tsupportsStandardDerivatives: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t},\r\n\tsupportsCompressedTextureS3TC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t},\r\n\tsupportsBlendMinMax: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t},\r\n\tsupportsVertexTextures: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\r\n\t\treturn this.capabilities.vertexTextures;\r\n\r\n\t},\r\n\tsupportsInstancedArrays: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t},\r\n\tenableScissorTest: function ( boolean ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\tthis.setScissorTest( boolean );\r\n\r\n\t},\r\n\tinitMaterial: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t},\r\n\taddPrePlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t},\r\n\taddPostPlugin: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t},\r\n\tupdateShadowMap: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t},\r\n\tsetFaceCulling: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\r\n\r\n\t},\r\n\tallocTextureUnit: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\r\n\r\n\t},\r\n\tsetTexture2D: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\r\n\r\n\t},\r\n\tsetTextureCube: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\r\n\r\n\t},\r\n\tgetActiveMipMapLevel: function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\r\n\t\treturn this.getActiveMipmapLevel();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLRenderer.prototype, {\r\n\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.enabled;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.shadowMap.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* value */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tcontext: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\r\n\t\t\treturn this.getContext();\r\n\r\n\t\t}\r\n\t},\r\n\tvr: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\r\n\t\t\treturn this.xr;\r\n\r\n\t\t}\r\n\t},\r\n\tgammaInput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\tgammaOutput: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\r\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\r\n\r\n\t\t}\r\n\t},\r\n\ttoneMappingWhitePoint: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\t\t\treturn 1.0;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\r\n\r\n\t\t}\r\n\t},\r\n\r\n} );\r\n\r\nObject.defineProperties( WebGLShadowMap.prototype, {\r\n\r\n\tcullFace: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function ( /* cullFace */ ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderReverseSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t},\r\n\trenderSingleSided: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\t\t\treturn undefined;\r\n\r\n\t\t},\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nfunction WebGLRenderTargetCube( width, height, options ) {\r\n\r\n\tconsole.warn( 'THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).' );\r\n\treturn new WebGLCubeRenderTarget( width, options );\r\n\r\n}\r\n\r\n//\r\n\r\nObject.defineProperties( WebGLRenderTarget.prototype, {\r\n\r\n\twrapS: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( Audio.prototype, {\r\n\r\n\tload: {\r\n\t\tvalue: function ( file ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\r\n\t\t\tconst scope = this;\r\n\t\t\tconst audioLoader = new AudioLoader();\r\n\t\t\taudioLoader.load( file, function ( buffer ) {\r\n\r\n\t\t\t\tscope.setBuffer( buffer );\r\n\r\n\t\t\t} );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t},\r\n\tstartTime: {\r\n\t\tset: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nAudioAnalyser.prototype.getData = function () {\r\n\r\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n\treturn this.getFrequencyData();\r\n\r\n};\r\n\r\n//\r\n\r\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\r\n\treturn this.update( renderer, scene );\r\n\r\n};\r\n\r\n//\r\n\r\nconst GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\t\tlet matrix;\r\n\r\n\t\tif ( geometry2.isMesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nImageUtils.crossOrigin = undefined;\r\n\r\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\tconst loader = new TextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\r\n\r\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\tconst loader = new CubeTextureLoader();\r\n\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\treturn texture;\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTexture = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\nImageUtils.loadCompressedTextureCube = function () {\r\n\r\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n};\r\n\r\n//\r\n\r\nfunction CanvasRenderer() {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been removed' );\r\n\r\n}\r\n\r\n//\r\n\r\nfunction JSONLoader() {\r\n\r\n\tconsole.error( 'THREE.JSONLoader has been removed.' );\r\n\r\n}\r\n\r\n//\r\n\r\nconst SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tdetach: function ( /* child, parent, scene */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t},\r\n\r\n\tattach: function ( /* child, scene, parent */ ) {\r\n\r\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nfunction LensFlare() {\r\n\r\n\tconsole.error( 'THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js' );\r\n\r\n}\r\n\r\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\r\n\r\n\t/* eslint-disable no-undef */\r\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\r\n\t\trevision: REVISION,\r\n\t} } ) );\r\n\t/* eslint-enable no-undef */\r\n\r\n}\r\n\r\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, AxisHelper, BackSide, BasicDepthPacking, BasicShadowMap, BinaryTextureLoader, Bone, BooleanKeyframeTrack, BoundingBoxHelper, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasRenderer, CanvasTexture, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, ClosedSplineCurve3, Color, ColorKeyframeTrack, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, BoxGeometry as CubeGeometry, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubeUVRefractionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DirectionalLightShadow, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicBufferAttribute, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EdgesHelper, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, Face3, Face4, FaceColors, FileLoader, FlatShading, Float32Attribute, Float32BufferAttribute, Float64Attribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FrontSide, Frustum, GammaEncoding, Geometry, GeometryUtils, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16Attribute, Int16BufferAttribute, Int32Attribute, Int32BufferAttribute, Int8Attribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, JSONLoader, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LensFlare, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, LightShadow, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LinePieces, LineSegments, LineStrip, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LogLuvEncoding, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils as Math, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshFaceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiMaterial, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColors, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricBufferGeometry, ParametricGeometry, Particle, ParticleBasicMaterial, ParticleSystem, ParticleSystemMaterial, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointCloud, PointCloudMaterial, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBDEncoding, RGBEEncoding, RGBEFormat, RGBFormat, RGBIntegerFormat, RGBM16Encoding, RGBM7Encoding, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, Scene, SceneUtils, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, Spline, SplineCurve, SplineCurve3, SpotLight, SpotLightHelper, SpotLightShadow, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, TextBufferGeometry, TextGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16Attribute, Uint16BufferAttribute, Uint32Attribute, Uint32BufferAttribute, Uint8Attribute, Uint8BufferAttribute, Uint8ClampedAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, Vertex, VertexColors, VideoTexture, WebGL1Renderer, WebGLCubeRenderTarget, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderTargetCube, WebGLRenderer, WebGLUtils, WireframeGeometry, WireframeHelper, WrapAroundEnding, XHRLoader, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, sRGBEncoding };\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}