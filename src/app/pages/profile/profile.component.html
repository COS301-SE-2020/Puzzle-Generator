<app-navbar></app-navbar>
<!--app-navbar-profile></app-navbar-profile-->


<div class="container-fluid" >
    <div class="flex-container" fxLayout="row" fxLayout.xs="column">
    <mat-card class="profileImageCard">
        <mat-card-header>
            <h1>Profile</h1>
        </mat-card-header>
        <mat-card-content>
        <div><img src="assets/images/profile.jpg" id="profileImage"></div>
        </mat-card-content>
    </mat-card>

    <mat-card class="profileText">
        <mat-card-header>
            <h1>Edit Details</h1>
        </mat-card-header>
        <mat-card-content class="move">
        <div *ngIf="currentUserObject">
            <form [formGroup]="updateNameForm" (ngSubmit)="updateName()">
                <mat-form-field appearance="standard">
                    <input matInput formControlName="name"  value="{{currentUserObject.name}}" (input)="nameTextboxValue=$event.target.value">
                </mat-form-field>
                <div>
                    <ng-container *ngFor="let error of error_messages.name">
                        <mat-error class="error-message" *ngIf="updateNameForm.get('name').hasError(error.type) && (updateNameForm.get('name').dirty || updateNameForm.get('name').touched)">
                            {{ error.message }}
                        </mat-error>
                    </ng-container>
                </div>
                <button mat-raised-button type="submit" [disabled]="!updateNameForm.valid" class="btns" >Save</button>
            </form>

            <form [formGroup]="updateUsernameForm" (ngSubmit)="updateUsername()">
                <mat-form-field appearance="standard">
                    <input matInput formControlName="username"  value="{{currentUserObject.username}}" (input)="usernameTextboxValue=$event.target.value">
                </mat-form-field>
                <div>
                    <ng-container *ngFor="let error of error_messages.username">
                        <mat-error class="error-message" *ngIf="updateUsernameForm.get('username').hasError(error.type) && (updateUsernameForm.get('username').dirty || updateUsernameForm.get('username').touched)">
                            {{ error.message }}
                        </mat-error>
                    </ng-container>
                </div>
                <button mat-raised-button type="submit" [disabled]="!updateUsernameForm.valid" class="btns">Save</button>
            </form>
        </div>
        </mat-card-content>
    </mat-card>
